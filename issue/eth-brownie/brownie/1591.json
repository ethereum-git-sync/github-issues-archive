{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/1591",
  "id": 1329973534,
  "node_id": "I_kwDOCUsNcc5PRcke",
  "number": 1591,
  "title": "Feature req: Output contract metadata in build artifacts",
  "user": {
    "login": "kuzdogan",
    "id": 13069972,
    "node_id": "MDQ6VXNlcjEzMDY5OTcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/13069972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kuzdogan",
    "html_url": "https://github.com/kuzdogan",
    "followers_url": "https://api.github.com/users/kuzdogan/followers",
    "following_url": "https://api.github.com/users/kuzdogan/following{/other_user}",
    "gists_url": "https://api.github.com/users/kuzdogan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kuzdogan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kuzdogan/subscriptions",
    "organizations_url": "https://api.github.com/users/kuzdogan/orgs",
    "repos_url": "https://api.github.com/users/kuzdogan/repos",
    "events_url": "https://api.github.com/users/kuzdogan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kuzdogan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-08-05T13:55:33Z",
  "updated_at": "2022-10-26T16:23:27Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Overview\r\n\r\nRecently I got my hands on [a project](https://github.com/beamer-bridge/beamer) that compiles contracts with brownie and wants to verify their contracts with [Sourcify](https://github.com/ethereum/sourcify). Sourcify does [full/perfect verification](https://docs.sourcify.dev/docs/full-vs-partial-match/) which leverages Solidity's [contract metadata](https://docs.soliditylang.org/en/latest/metadata.html) and the hash of it appended at the end of the bytecode. \r\n\r\nTo be able to perfectly verify contracts, the contract metadata is needed and brownie doesn't seem to output this information in the contract's compilation artifacts.\r\n\r\n### Specification\r\n\r\nTo be able to verify, users need to provide the contract metadata alongside the source files. In brownie, I noticed the metadata is not output in the `build/contracts/*.json` files by default. In contrast, metadata is output by default in Truffle, and since v2.6.8 in Hardhat. \r\n\r\nI also couldn't find an option to modify the [Standard JSON Input-Output](https://docs.soliditylang.org/en/latest/using-the-compiler.html#compiler-input-and-output-json-description) of the compiler where it would be possible to output the metadata as such:\r\n```\r\nversion: ...,\r\n  optimizer: {...},\r\n  outputSelection: {\r\n    \"*\": {\r\n      \"*\": [\r\n        \"abi\",\r\n        \"evm.bytecode\",\r\n        \"evm.deployedBytecode\",\r\n        \"metadata\", // <-- add this\r\n        ...\r\n      ]\r\n    },\r\n  },\r\n```\r\n\r\nIncluding a Truffle output file as a reference. Notice the metadata field:\r\n[Resolver.json.txt](https://github.com/eth-brownie/brownie/files/9269206/Resolver.json.txt)\r\n\r\nAlso if the metadata file becomes available, it would be possible to develop a Sourcify verification plugin to easily verify contracts following the deployment of the contract.\r\n\r\ncc: @fredo",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1223428120",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1591#issuecomment-1223428120",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
    "id": 1223428120,
    "node_id": "IC_kwDOCUsNcc5I7AgY",
    "user": {
      "login": "Jeevan-J",
      "id": 25552262,
      "node_id": "MDQ6VXNlcjI1NTUyMjYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25552262?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jeevan-J",
      "html_url": "https://github.com/Jeevan-J",
      "followers_url": "https://api.github.com/users/Jeevan-J/followers",
      "following_url": "https://api.github.com/users/Jeevan-J/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jeevan-J/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jeevan-J/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jeevan-J/subscriptions",
      "organizations_url": "https://api.github.com/users/Jeevan-J/orgs",
      "repos_url": "https://api.github.com/users/Jeevan-J/repos",
      "events_url": "https://api.github.com/users/Jeevan-J/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jeevan-J/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T02:01:19Z",
    "updated_at": "2022-08-23T02:01:19Z",
    "author_association": "NONE",
    "body": "I agree with exporting the contract metadata information in build folder is needed for further verification manually. But `publish_source` argument in deploy function does the automatic verification, right?",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1223428120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1223652199",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1591#issuecomment-1223652199",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
    "id": 1223652199,
    "node_id": "IC_kwDOCUsNcc5I73Nn",
    "user": {
      "login": "kuzdogan",
      "id": 13069972,
      "node_id": "MDQ6VXNlcjEzMDY5OTcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/13069972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kuzdogan",
      "html_url": "https://github.com/kuzdogan",
      "followers_url": "https://api.github.com/users/kuzdogan/followers",
      "following_url": "https://api.github.com/users/kuzdogan/following{/other_user}",
      "gists_url": "https://api.github.com/users/kuzdogan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kuzdogan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kuzdogan/subscriptions",
      "organizations_url": "https://api.github.com/users/kuzdogan/orgs",
      "repos_url": "https://api.github.com/users/kuzdogan/repos",
      "events_url": "https://api.github.com/users/kuzdogan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kuzdogan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T07:16:38Z",
    "updated_at": "2022-08-23T07:16:38Z",
    "author_association": "NONE",
    "body": "@Jeevan-J Yes it seems, but it verifies on Etherscan and Etherscan verification does not require the metadata file. If you're interested [this article](https://docs.sourcify.dev/blog/verify-contracts-perfectly/) explains the difference in detail",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1223652199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1227371166",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1591#issuecomment-1227371166",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
    "id": 1227371166,
    "node_id": "IC_kwDOCUsNcc5JKDKe",
    "user": {
      "login": "istankovic",
      "id": 1312091,
      "node_id": "MDQ6VXNlcjEzMTIwOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1312091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/istankovic",
      "html_url": "https://github.com/istankovic",
      "followers_url": "https://api.github.com/users/istankovic/followers",
      "following_url": "https://api.github.com/users/istankovic/following{/other_user}",
      "gists_url": "https://api.github.com/users/istankovic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/istankovic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/istankovic/subscriptions",
      "organizations_url": "https://api.github.com/users/istankovic/orgs",
      "repos_url": "https://api.github.com/users/istankovic/repos",
      "events_url": "https://api.github.com/users/istankovic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/istankovic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T14:53:36Z",
    "updated_at": "2022-08-25T14:53:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @kuzdogan for submitting this!\r\nYeah, this is something that would be really nice to have.\r\n\r\n@Jeevan-J are you a maintainer of eth-brownie? Would you accept patches for this?",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1227371166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1227384437",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1591#issuecomment-1227384437",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
    "id": 1227384437,
    "node_id": "IC_kwDOCUsNcc5JKGZ1",
    "user": {
      "login": "Jeevan-J",
      "id": 25552262,
      "node_id": "MDQ6VXNlcjI1NTUyMjYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25552262?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jeevan-J",
      "html_url": "https://github.com/Jeevan-J",
      "followers_url": "https://api.github.com/users/Jeevan-J/followers",
      "following_url": "https://api.github.com/users/Jeevan-J/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jeevan-J/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jeevan-J/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jeevan-J/subscriptions",
      "organizations_url": "https://api.github.com/users/Jeevan-J/orgs",
      "repos_url": "https://api.github.com/users/Jeevan-J/repos",
      "events_url": "https://api.github.com/users/Jeevan-J/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jeevan-J/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T15:04:24Z",
    "updated_at": "2022-08-25T15:04:24Z",
    "author_association": "NONE",
    "body": "@istankovic No. I am starting as a open source contributor and started working on porting Lens Protocol from Hardhat-TypeScript to Brownie-Python and was facing some issue with verification for few contracts. \n\nTry using your compile contract's `get_verification_info` to get `standard json input`.\n\nFor example:\n```\nToken.get_verification_info()\n```",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1227384437/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1292297835",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1591#issuecomment-1292297835",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1591",
    "id": 1292297835,
    "node_id": "IC_kwDOCUsNcc5NBuZr",
    "user": {
      "login": "marcocastignoli",
      "id": 10226180,
      "node_id": "MDQ6VXNlcjEwMjI2MTgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10226180?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcocastignoli",
      "html_url": "https://github.com/marcocastignoli",
      "followers_url": "https://api.github.com/users/marcocastignoli/followers",
      "following_url": "https://api.github.com/users/marcocastignoli/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcocastignoli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcocastignoli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcocastignoli/subscriptions",
      "organizations_url": "https://api.github.com/users/marcocastignoli/orgs",
      "repos_url": "https://api.github.com/users/marcocastignoli/repos",
      "events_url": "https://api.github.com/users/marcocastignoli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcocastignoli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-26T16:23:27Z",
    "updated_at": "2022-10-26T16:23:27Z",
    "author_association": "NONE",
    "body": "There is this open PR: https://github.com/eth-brownie/brownie/pull/1280",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1292297835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

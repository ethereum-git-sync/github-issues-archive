{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/263",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/263",
  "id": 527685977,
  "node_id": "MDU6SXNzdWU1Mjc2ODU5Nzc=",
  "number": 263,
  "title": "OSX error when Ganache is already running",
  "user": {
    "login": "avatar-lavventura",
    "id": 18537398,
    "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avatar-lavventura",
    "html_url": "https://github.com/avatar-lavventura",
    "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
    "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
    "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
    "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
    "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
    "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1114236588,
      "node_id": "MDU6TGFiZWwxMTE0MjM2NTg4",
      "url": "https://api.github.com/repos/eth-brownie/brownie/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 1319593249,
      "node_id": "MDU6TGFiZWwxMzE5NTkzMjQ5",
      "url": "https://api.github.com/repos/eth-brownie/brownie/labels/priority",
      "name": "priority",
      "color": "ee0014",
      "default": false,
      "description": "Should be included in next release"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "iamdefinitelyahuman",
    "id": 35276322,
    "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iamdefinitelyahuman",
    "html_url": "https://github.com/iamdefinitelyahuman",
    "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
    "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
    "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
    "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
    "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
    "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "iamdefinitelyahuman",
      "id": 35276322,
      "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamdefinitelyahuman",
      "html_url": "https://github.com/iamdefinitelyahuman",
      "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
      "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
      "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
      "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
      "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-11-24T11:43:26Z",
  "updated_at": "2020-01-09T18:38:00Z",
  "closed_at": "2020-01-09T18:38:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Whenever I run a `pytest tests`, it launches `ganache-cli` from scratch, which takes around few seconds. It is not much but when I keep runing `pytests tests` over and over again takes long time.\r\n\r\n$ pytest tests -s -x --capture=no\r\n==================================================================== test session starts =====================================================================\r\nplatform darwin -- Python 3.7.5, pytest-5.0.1, py-1.8.0, pluggy-0.12.0\r\nrootdir: /Users/alper/eBlocBroker\r\nplugins: eth-brownie-1.1.0, web3-5.0.0\r\ncollected 6 items\r\nLaunching 'ganache-cli --allowUnlimitedContractSize --port 8545 --gasLimit 6721975 --accounts 10 --hardfork petersburg --mnemonic brownie'...\r\n\r\n------\r\n\r\nI was wondering it it possible to run `ganache-cli` on a separet window and run `pytests tests` without relauncing the `ganache-cli`, and let it use the already running `ganache-cli`.\r\n\r\nWhen I try that the error I am getting:\r\n\r\n```\r\nBrownie v1.1.0 - Python development framework for Ethereum\r\n\r\nBrownie project has been compiled at /Users/alper/eBlocBroker/contract/build/contracts\r\n==================================================================== test session starts =====================================================================\r\nplatform darwin -- Python 3.7.5, pytest-5.0.1, py-1.8.0, pluggy-0.12.0\r\nrootdir: /Users/alper/eBlocBroker\r\nplugins: eth-brownie-1.1.0, web3-5.0.0\r\ncollected 6 items\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/psutil-5.6.3-py3.7-macosx-10.13-x86_64.egg/psutil/_psosx.py\", line 339, in wrapper\r\nINTERNALERROR>     return fun(self, *args, **kwargs)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/psutil-5.6.3-py3.7-macosx-10.13-x86_64.egg/psutil/_psosx.py\", line 528, in connections\r\nINTERNALERROR>     rawlist = cext.proc_connections(self.pid, families, types)\r\nINTERNALERROR> PermissionError: [Errno 1] Operation not permitted\r\nINTERNALERROR>\r\nINTERNALERROR> During handling of the above exception, another exception occurred:\r\nINTERNALERROR>\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pytest-5.0.1-py3.7.egg/_pytest/main.py\", line 213, in wrap_session\r\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pytest-5.0.1-py3.7.egg/_pytest/main.py\", line 257, in _main\r\nINTERNALERROR>     config.hook.pytest_runtestloop(session=session)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/hooks.py\", line 289, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/manager.py\", line 87, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/manager.py\", line 81, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/pluggy-0.12.0-py3.7.egg/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/brownie/test/plugin.py\", line 131, in pytest_runtestloop\r\nINTERNALERROR>     brownie.network.connect(ARGV[\"network\"])\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/brownie/network/main.py\", line 41, in connect\r\nINTERNALERROR>     rpc.attach(host)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/brownie/network/rpc.py\", line 109, in attach\r\nINTERNALERROR>     proc = next(i for i in psutil.net_connections() if i.laddr == laddr)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/psutil-5.6.3-py3.7-macosx-10.13-x86_64.egg/psutil/__init__.py\", line 2263, in net_connections\r\nINTERNALERROR>     return _psplatform.net_connections(kind)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/psutil-5.6.3-py3.7-macosx-10.13-x86_64.egg/psutil/_psosx.py\", line 252, in net_connections\r\nINTERNALERROR>     cons = Process(pid).connections(kind)\r\nINTERNALERROR>   File \"/Users/alper/v/lib/python3.7/site-packages/psutil-5.6.3-py3.7-macosx-10.13-x86_64.egg/psutil/_psosx.py\", line 344, in wrapper\r\nINTERNALERROR>     raise AccessDenied(self.pid, self._name)\r\nINTERNALERROR> psutil.AccessDenied: psutil.AccessDenied (pid=28029)\r\n\r\n================================================================ no tests ran in 0.10 seconds ================================================================\r\n```\r\n\r\n",
  "closed_by": {
    "login": "iamdefinitelyahuman",
    "id": 35276322,
    "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iamdefinitelyahuman",
    "html_url": "https://github.com/iamdefinitelyahuman",
    "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
    "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
    "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
    "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
    "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
    "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/263/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/568910194",
    "html_url": "https://github.com/eth-brownie/brownie/issues/263#issuecomment-568910194",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263",
    "id": 568910194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2ODkxMDE5NA==",
    "user": {
      "login": "iamdefinitelyahuman",
      "id": 35276322,
      "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamdefinitelyahuman",
      "html_url": "https://github.com/iamdefinitelyahuman",
      "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
      "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
      "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
      "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
      "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-25T15:42:41Z",
    "updated_at": "2019-12-25T15:42:41Z",
    "author_association": "MEMBER",
    "body": "Looks like this is an OSX specific issue. From the psutil [documentation](https://psutil.readthedocs.io/en/latest/index.html#psutil.net_connections) on `psutil.net_connections()`:\r\n\r\n> Note (macOS and AIX) psutil.AccessDenied is always raised unless running as root. This is a limitation of the OS and lsof does the same.\r\n\r\nI will have to give this some thought - maybe attempting to automatically detect whether or not Ganache is running isn't the best way.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/568910194/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/570220340",
    "html_url": "https://github.com/eth-brownie/brownie/issues/263#issuecomment-570220340",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/263",
    "id": 570220340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDIyMDM0MA==",
    "user": {
      "login": "avatar-lavventura",
      "id": 18537398,
      "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avatar-lavventura",
      "html_url": "https://github.com/avatar-lavventura",
      "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
      "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
      "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
      "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
      "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
      "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-02T14:19:09Z",
    "updated_at": "2020-01-02T14:32:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Does it mean that like:\r\n\r\n=> First we need to detect is there any `ganache-cli` progress runs on the give `IP:PORT` , or is the requested port allocated or not? \r\n\r\n--------\r\n\r\n```python\r\nimport socket\r\n\r\ndef isOpen(ip,port):\r\n   s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n   try:\r\n      s.connect((ip, int(port)))\r\n      s.shutdown(2)\r\n      return True\r\n   except:\r\n      return False\r\n\r\nprint('isOpen:? ')\r\nif isOpen('127.0.0.1', '8545'):\r\n    print(\"False\")\r\nelse:\r\n    print(\"True\")\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/570220340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

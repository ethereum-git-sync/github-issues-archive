{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/1174",
  "id": 957466782,
  "node_id": "MDU6SXNzdWU5NTc0NjY3ODI=",
  "number": 1174,
  "title": "[help] Unable to deploy a `tx` into private network",
  "user": {
    "login": "avatar-lavventura",
    "id": 18537398,
    "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avatar-lavventura",
    "html_url": "https://github.com/avatar-lavventura",
    "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
    "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
    "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
    "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
    "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
    "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-08-01T11:27:01Z",
  "updated_at": "2022-03-18T10:39:52Z",
  "closed_at": "2021-08-17T22:59:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "- ``eth-brownie==1.14.6``\r\n-  Python 3.8.10\r\n\r\n--------\r\n\r\nI was able setup Brownie to deploy my contract and  transactions into a private network called `BloxBerg` (https://blockexplorer.bloxberg.org) using `Brownie`.  \r\n\r\nsimple setup `network-config.yaml`:\r\n\r\n```\r\n- name: bloxberg (Bloxberg)\r\n  id: bloxberg\r\n  chainid: 8995\r\n  host: https://core.bloxberg.org\r\n  explorer: https://blockexplorer.bloxberg.org/api\r\n```\r\n\r\n-------------------\r\n\r\nEverything works smooth, without any problem for most of my contract's functions.\r\n\r\nBut there is one `payable` function of my smart-contract (which is requires little bit more gas than others) and many arguments does not pass through and get deployed.\r\n\r\n```\r\nipdb> self.contract.submitJob\r\n<ContractTx payable 'submitJob(string key, uint32[] dataTransferIn, (address,uint32,uint8[],uint8[],uint32[],uint16[],uint16[],uint32) args, uint32[] storageDuration, bytes32[] sourceCodeHash)'>\r\n```\r\n\r\nLike it just halts like in an endless loop and Brownie does not return anything. I cannot do any further debugging. \r\n\r\n- That function also deployed without any problem in my own private network through web3.py and into `ganache-cli` using `brownie`.\r\n\r\n```\r\n    def _submit_job(self, requester, job_price, *args):\r\n        ops = {\"from\": requester, \"value\": self.w3.toWei(job_price, \"wei\"), \"gas\": 4500000}\r\n        self.brownie_load_accounts()\r\n        return self.Contract.submitJob(*args, ops)\r\n```\r\n\r\nDid you face anything like this before? Any advice would mean a lot.",
  "closed_by": {
    "login": "avatar-lavventura",
    "id": 18537398,
    "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avatar-lavventura",
    "html_url": "https://github.com/avatar-lavventura",
    "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
    "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
    "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
    "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
    "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
    "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/895218537",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1174#issuecomment-895218537",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1174",
    "id": 895218537,
    "node_id": "IC_kwDOCUsNcc41W_Np",
    "user": {
      "login": "avatar-lavventura",
      "id": 18537398,
      "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avatar-lavventura",
      "html_url": "https://github.com/avatar-lavventura",
      "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
      "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
      "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
      "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
      "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
      "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-09T13:22:31Z",
    "updated_at": "2022-03-18T10:39:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "###  I assume during one of the smart-contract's function call, `brownie` affects something in the main process, which prevented the deployment process.\r\n\r\nBefore deploying my `tx` I was calling of a getter function of my contract. It called under object of an object so environment's function. I tried everything changing names of the contact but couldn't find the cause.\r\n\r\nWhen I comment out to call  the getter of my contract the deployment was successful. But if I keep that line, brownie or web3.py halts the deployment operation. I highly doubt that `brownie` overwrites into `Account` object or somehing else.\r\n\r\nExample line that caused issue:\r\n```\r\nops = {\"from\": address}\r\ncontract.getReceivedStorageDeposit(job.provider, job.requester, source_code_hash, ops)\r\n```\r\n\r\nIn order to solve it, I have used highly unnecessary complex solution. I had to do [parallel independent process within function](https://stackoverflow.com/a/64506615/2402577) for this call, which is called under Python's `subprocess.Popen`, while keeping `brownie` to affect my main process.\r\n\r\n```\r\n#!/usr/bin/env python3\r\n\r\nimport os\r\nimport sys\r\nimport time\r\nfrom broker.utils import ipfs_to_bytes32\r\nfrom ast import literal_eval as make_tuple\r\nimport broker.config as config\r\n\r\n\r\ndef print_msg(msg):\r\n    \"\"\"Print arguments.\"\"\"\r\n    print(f\"[{time.ctime()}, pid: {os.getpid()}] --- {msg}\")\r\n\r\n\r\ndef main(function_name, *args):\r\n    from brownie import network, project, web3\r\n    config.w3 = web3\r\n    _args = make_tuple(str(args))\r\n    network.connect(\"bloxberg\")\r\n    project = project.load(\"/home/user/contract\")\r\n    ebb = project.Contract.at(\"0x...\")\r\n    job_provider = _args[0]\r\n    job_requester = _args[1]\r\n    source_code_hash = ipfs_to_bytes32(_args[2])\r\n    ops = {\"from\": job_provider}\r\n    output = ebb.getReceivedStorageDeposit(job_provider, job_requester, source_code_hash, ops)\r\n    print(output)\r\n    sys.exit(0)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    if len(sys.argv) > 1:\r\n        main(*sys.argv[1:])\r\n    else:\r\n        main(*sys.argv[1:])\r\n```\r\n\r\n-------\r\n**Update 03.18.2022**\r\n\r\nMain cause of this error was after a getter that has , `{from: }` when I call a tx I get following error: Tx: Request has been rejected because of queue limit.\r\n\r\n```python\r\ncontract.getter(provider, requester, code_hash, {\"from\": provider})\r\ncontract.setter(10, {\"from\": provider}) // <â€” TX gives the error\r\n```\r\n\r\nwhen I remove, `{\"from\": provider}` from the getter it works fine.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/895218537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

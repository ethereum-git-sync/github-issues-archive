{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/1087",
  "id": 898182276,
  "node_id": "MDU6SXNzdWU4OTgxODIyNzY=",
  "number": 1087,
  "title": "Coverage reports do not cover all contracts",
  "user": {
    "login": "Quaid-Doug",
    "id": 82598762,
    "node_id": "MDQ6VXNlcjgyNTk4NzYy",
    "avatar_url": "https://avatars.githubusercontent.com/u/82598762?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Quaid-Doug",
    "html_url": "https://github.com/Quaid-Doug",
    "followers_url": "https://api.github.com/users/Quaid-Doug/followers",
    "following_url": "https://api.github.com/users/Quaid-Doug/following{/other_user}",
    "gists_url": "https://api.github.com/users/Quaid-Doug/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Quaid-Doug/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Quaid-Doug/subscriptions",
    "organizations_url": "https://api.github.com/users/Quaid-Doug/orgs",
    "repos_url": "https://api.github.com/users/Quaid-Doug/repos",
    "events_url": "https://api.github.com/users/Quaid-Doug/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Quaid-Doug/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-05-21T15:52:43Z",
  "updated_at": "2023-01-05T10:43:14Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Environment information\r\n\r\n* `brownie` Version: 1.14.6\r\n* `solc` Version: 8.0.0\r\n* Python Version: 3.8.5\r\n* OS: linux\r\n\r\n### What was wrong?\r\n\r\nPlease include information like:\r\n\r\nI have 3 contracts that work in interaction with each others.\r\n\r\nMy testing script is on one file.\r\n\r\nWhen I run `brownie test --coverage` I get a coverage report for only one of the contracts. I'd like to get it for all of the contracts.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087/reactions",
    "total_count": 12,
    "+1": 11,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/846444432",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-846444432",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 846444432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NjQ0NDQzMg==",
    "user": {
      "login": "bainjamain",
      "id": 16196950,
      "node_id": "MDQ6VXNlcjE2MTk2OTUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16196950?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bainjamain",
      "html_url": "https://github.com/bainjamain",
      "followers_url": "https://api.github.com/users/bainjamain/followers",
      "following_url": "https://api.github.com/users/bainjamain/following{/other_user}",
      "gists_url": "https://api.github.com/users/bainjamain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bainjamain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bainjamain/subscriptions",
      "organizations_url": "https://api.github.com/users/bainjamain/orgs",
      "repos_url": "https://api.github.com/users/bainjamain/repos",
      "events_url": "https://api.github.com/users/bainjamain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bainjamain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-22T18:09:52Z",
    "updated_at": "2021-05-22T18:09:52Z",
    "author_association": "NONE",
    "body": "I found this issue to be quite random. Sometimes the coverages covers all my contracts, but more often than not, it covers only a small subset of the contracts tested, sometimes none.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/846444432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/848093001",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-848093001",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 848093001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODA5MzAwMQ==",
    "user": {
      "login": "igponce",
      "id": 34993,
      "node_id": "MDQ6VXNlcjM0OTkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/34993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igponce",
      "html_url": "https://github.com/igponce",
      "followers_url": "https://api.github.com/users/igponce/followers",
      "following_url": "https://api.github.com/users/igponce/following{/other_user}",
      "gists_url": "https://api.github.com/users/igponce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igponce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igponce/subscriptions",
      "organizations_url": "https://api.github.com/users/igponce/orgs",
      "repos_url": "https://api.github.com/users/igponce/repos",
      "events_url": "https://api.github.com/users/igponce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igponce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-25T18:00:14Z",
    "updated_at": "2021-05-25T18:09:01Z",
    "author_association": "NONE",
    "body": "Same issue here with:\r\n-  Brownie v1.14.6 \r\n- Python version 3.6.9\r\n-  Solc\r\n   - 0.7.6 \r\n   - 0.8.4\r\n\r\n - / EVM Version: Istambul\r\n\r\nI've got coverage for the fist contract I deploy.\r\nI tried changing the contract names to see if alphabetical of contract names was a factor, but no.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/848093001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/855413499",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-855413499",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 855413499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NTQxMzQ5OQ==",
    "user": {
      "login": "evoh-nft",
      "id": 85368633,
      "node_id": "MDQ6VXNlcjg1MzY4NjMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/85368633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/evoh-nft",
      "html_url": "https://github.com/evoh-nft",
      "followers_url": "https://api.github.com/users/evoh-nft/followers",
      "following_url": "https://api.github.com/users/evoh-nft/following{/other_user}",
      "gists_url": "https://api.github.com/users/evoh-nft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/evoh-nft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/evoh-nft/subscriptions",
      "organizations_url": "https://api.github.com/users/evoh-nft/orgs",
      "repos_url": "https://api.github.com/users/evoh-nft/repos",
      "events_url": "https://api.github.com/users/evoh-nft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/evoh-nft/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-06T15:05:04Z",
    "updated_at": "2021-06-06T15:05:04Z",
    "author_association": "NONE",
    "body": "Same problem here.  I've noticed that when using solc 0.8.3 I get a normal coverage report, but with 0.8.4 it comes back empty.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/855413499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879015051",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-879015051",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 879015051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTAxNTA1MQ==",
    "user": {
      "login": "Psirex",
      "id": 14151334,
      "node_id": "MDQ6VXNlcjE0MTUxMzM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14151334?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Psirex",
      "html_url": "https://github.com/Psirex",
      "followers_url": "https://api.github.com/users/Psirex/followers",
      "following_url": "https://api.github.com/users/Psirex/following{/other_user}",
      "gists_url": "https://api.github.com/users/Psirex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Psirex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Psirex/subscriptions",
      "organizations_url": "https://api.github.com/users/Psirex/orgs",
      "repos_url": "https://api.github.com/users/Psirex/repos",
      "events_url": "https://api.github.com/users/Psirex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Psirex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T11:40:33Z",
    "updated_at": "2021-07-13T11:40:33Z",
    "author_association": "NONE",
    "body": "I found, that it happens with contracts that use the `immutable` modifier. Maybe because of this: \r\n> \"The contract creation code generated by the compiler will modify the contract’s runtime code before it is returned by replacing all references to immutables by the values assigned to them. This is important if you are comparing the runtime code generated by the compiler with the one actually stored in the blockchain.\"\r\n\r\nas mentioned in the docs [here](https://docs.soliditylang.org/en/latest/contracts.html#immutable). But I'm not sure that it's the only reason which causes such behavior.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879015051/reactions",
      "total_count": 6,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1265066400",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1265066400",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1265066400,
    "node_id": "IC_kwDOCUsNcc5LZ2Gg",
    "user": {
      "login": "vsmelov",
      "id": 9407507,
      "node_id": "MDQ6VXNlcjk0MDc1MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9407507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsmelov",
      "html_url": "https://github.com/vsmelov",
      "followers_url": "https://api.github.com/users/vsmelov/followers",
      "following_url": "https://api.github.com/users/vsmelov/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsmelov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsmelov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsmelov/subscriptions",
      "organizations_url": "https://api.github.com/users/vsmelov/orgs",
      "repos_url": "https://api.github.com/users/vsmelov/repos",
      "events_url": "https://api.github.com/users/vsmelov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsmelov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T07:52:58Z",
    "updated_at": "2022-10-03T07:52:58Z",
    "author_association": "NONE",
    "body": "This bug is still active?\r\nI cannot use immutable in my contracts if I want to check test coverage?",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1265066400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1288676727",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1288676727",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1288676727,
    "node_id": "IC_kwDOCUsNcc5Mz6V3",
    "user": {
      "login": "iurii2002",
      "id": 61374760,
      "node_id": "MDQ6VXNlcjYxMzc0NzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/61374760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurii2002",
      "html_url": "https://github.com/iurii2002",
      "followers_url": "https://api.github.com/users/iurii2002/followers",
      "following_url": "https://api.github.com/users/iurii2002/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurii2002/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurii2002/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurii2002/subscriptions",
      "organizations_url": "https://api.github.com/users/iurii2002/orgs",
      "repos_url": "https://api.github.com/users/iurii2002/repos",
      "events_url": "https://api.github.com/users/iurii2002/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurii2002/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-24T08:54:25Z",
    "updated_at": "2022-10-24T08:54:25Z",
    "author_association": "NONE",
    "body": "Yes, the bug is still active ",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1288676727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1305635138",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1305635138",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1305635138,
    "node_id": "IC_kwDOCUsNcc5N0mlC",
    "user": {
      "login": "FlavorlessQuark",
      "id": 31075794,
      "node_id": "MDQ6VXNlcjMxMDc1Nzk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/31075794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FlavorlessQuark",
      "html_url": "https://github.com/FlavorlessQuark",
      "followers_url": "https://api.github.com/users/FlavorlessQuark/followers",
      "following_url": "https://api.github.com/users/FlavorlessQuark/following{/other_user}",
      "gists_url": "https://api.github.com/users/FlavorlessQuark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FlavorlessQuark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FlavorlessQuark/subscriptions",
      "organizations_url": "https://api.github.com/users/FlavorlessQuark/orgs",
      "repos_url": "https://api.github.com/users/FlavorlessQuark/repos",
      "events_url": "https://api.github.com/users/FlavorlessQuark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FlavorlessQuark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-07T13:42:11Z",
    "updated_at": "2022-11-07T13:42:11Z",
    "author_association": "NONE",
    "body": "I'm having the same issue. I'm using two contracts, and while they both show up in the coverage, it doesn't show all the functions in the contracts.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1305635138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1323939979",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1323939979",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1323939979,
    "node_id": "IC_kwDOCUsNcc5O6biL",
    "user": {
      "login": "Bulalu",
      "id": 71330824,
      "node_id": "MDQ6VXNlcjcxMzMwODI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/71330824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bulalu",
      "html_url": "https://github.com/Bulalu",
      "followers_url": "https://api.github.com/users/Bulalu/followers",
      "following_url": "https://api.github.com/users/Bulalu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bulalu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bulalu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bulalu/subscriptions",
      "organizations_url": "https://api.github.com/users/Bulalu/orgs",
      "repos_url": "https://api.github.com/users/Bulalu/repos",
      "events_url": "https://api.github.com/users/Bulalu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bulalu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-22T16:30:06Z",
    "updated_at": "2022-11-22T16:30:06Z",
    "author_association": "NONE",
    "body": "still having the same issue 😢",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1323939979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1363843055",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1363843055",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1363843055,
    "node_id": "IC_kwDOCUsNcc5RSpfv",
    "user": {
      "login": "jacekv",
      "id": 14347871,
      "node_id": "MDQ6VXNlcjE0MzQ3ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/14347871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacekv",
      "html_url": "https://github.com/jacekv",
      "followers_url": "https://api.github.com/users/jacekv/followers",
      "following_url": "https://api.github.com/users/jacekv/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacekv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacekv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacekv/subscriptions",
      "organizations_url": "https://api.github.com/users/jacekv/orgs",
      "repos_url": "https://api.github.com/users/jacekv/repos",
      "events_url": "https://api.github.com/users/jacekv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacekv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T10:49:07Z",
    "updated_at": "2022-12-23T10:49:23Z",
    "author_association": "NONE",
    "body": "I ran into the same issue using Brownie v1.18.1.\r\n\r\nWhat @Psirex wrote seems to be the only problem. I have some contracts where only one state variable is set to `immutable`, which leads to an empty coverage report. \r\n\r\nAs soon I remove `immutable` from the state variable, it works.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1363843055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1370483784",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1370483784",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1370483784,
    "node_id": "IC_kwDOCUsNcc5Rr-xI",
    "user": {
      "login": "jacekv",
      "id": 14347871,
      "node_id": "MDQ6VXNlcjE0MzQ3ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/14347871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacekv",
      "html_url": "https://github.com/jacekv",
      "followers_url": "https://api.github.com/users/jacekv/followers",
      "following_url": "https://api.github.com/users/jacekv/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacekv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacekv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacekv/subscriptions",
      "organizations_url": "https://api.github.com/users/jacekv/orgs",
      "repos_url": "https://api.github.com/users/jacekv/repos",
      "events_url": "https://api.github.com/users/jacekv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacekv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-04T04:47:02Z",
    "updated_at": "2023-01-04T04:47:02Z",
    "author_association": "NONE",
    "body": "Actually I was wrong. I had been playing with it a bit more and realized that something seems to be broken.\r\n\r\nI tried it with an example project: `brownie bake token`\r\nThe coverage report says 100% but does not identify all functions. The `approve` is not part of the report for some reason.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1370483784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1372053784",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1087#issuecomment-1372053784",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1087",
    "id": 1372053784,
    "node_id": "IC_kwDOCUsNcc5Rx-EY",
    "user": {
      "login": "jacekv",
      "id": 14347871,
      "node_id": "MDQ6VXNlcjE0MzQ3ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/14347871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacekv",
      "html_url": "https://github.com/jacekv",
      "followers_url": "https://api.github.com/users/jacekv/followers",
      "following_url": "https://api.github.com/users/jacekv/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacekv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacekv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacekv/subscriptions",
      "organizations_url": "https://api.github.com/users/jacekv/orgs",
      "repos_url": "https://api.github.com/users/jacekv/repos",
      "events_url": "https://api.github.com/users/jacekv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacekv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-05T10:43:14Z",
    "updated_at": "2023-01-05T10:43:14Z",
    "author_association": "NONE",
    "body": "I spend some time looking into why the `immutable` keyword is causing problems, but I was not able to find a solution to the problem, since it would take me more time and resources to understand how browie works under the hood.\r\n\r\nI was able to see that there seems to be an issue in the `brownie//network/transaction.py - _expand_trace` function.\r\n\r\nIf I saw it correct, brownie takes the local compiled files, execute the tests, and trace based on the opcodes.\r\n\r\nBut there is the following try-except block:\r\n```python\r\ntry:\r\n    pc = last[\"pc_map\"][trace[i][\"pc\"]]\r\nexcept (KeyError, TypeError):\r\n   # we don't have enough information about this contract\r\n   continue\r\n```\r\n\r\nI was wondering why but I believe that the difference is the bytecode.\r\nIf you deploy the following contract to chain:\r\n```solidity\r\npragma solidity ^0.8.12;\r\n\r\ncontract Contract1 {\r\n    uint private i1;\r\n\r\n    constructor(uint _i1){\r\n        i1=_i1;\r\n    }\r\n\r\n    function getValue() public view returns (uint) {\r\n        return i1;\r\n    }\r\n}\r\n```\r\nYou will be able to get the bytecode from the compiler.\r\nBut if you use the `immutable` keyword in the code:\r\n```\r\npragma solidity ^0.8.12;\r\n\r\ncontract Contract1 {\r\n    uint private immutable i1;\r\n\r\n    constructor(uint _i1){\r\n        i1=_i1;\r\n    }\r\n\r\n    function getValue() public view returns (uint) {\r\n        return i1;\r\n    }\r\n}\r\n```\r\nthe bytecode deployed as contract differs from the one you get from the Solidity compiler.\r\n\r\nIf I am wrong about it, let me know :)\r\n\r\nHope it might help the next dev to go deeper.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/1372053784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

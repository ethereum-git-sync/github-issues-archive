{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/1147",
  "id": 943740209,
  "node_id": "MDU6SXNzdWU5NDM3NDAyMDk=",
  "number": 1147,
  "title": "Compiling contract raises strange error from solc but solc does not complain when run directly",
  "user": {
    "login": "realisation",
    "id": 13490713,
    "node_id": "MDQ6VXNlcjEzNDkwNzEz",
    "avatar_url": "https://avatars.githubusercontent.com/u/13490713?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/realisation",
    "html_url": "https://github.com/realisation",
    "followers_url": "https://api.github.com/users/realisation/followers",
    "following_url": "https://api.github.com/users/realisation/following{/other_user}",
    "gists_url": "https://api.github.com/users/realisation/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/realisation/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/realisation/subscriptions",
    "organizations_url": "https://api.github.com/users/realisation/orgs",
    "repos_url": "https://api.github.com/users/realisation/repos",
    "events_url": "https://api.github.com/users/realisation/events{/privacy}",
    "received_events_url": "https://api.github.com/users/realisation/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-07-13T19:00:57Z",
  "updated_at": "2021-08-16T01:25:16Z",
  "closed_at": "2021-08-16T01:25:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Environment information\r\n\r\n* `brownie` Version: 14.6.2\r\n* `solc` Version: 0.8.2\r\n* Python Version: ? just running brownie compile. python3 version is 3.8.5. python2 version is 2.7.16\r\n* OS: osx\r\n\r\n### What was wrong?\r\n\r\nWhen I run brownie compile with this contract in my contracts folder\r\n\r\n```\r\n// SPDX-License-Identifier: Cheese\r\npragma solidity >=0.5.0;\r\n\r\ncontract UniswapV3OracleMock {\r\n    constructor(\r\n        uint256 _window,\r\n        address _token0, \r\n        address _token1,\r\n        int56[][] memory _observations\r\n    ) { }\r\n}\r\n ```\r\n\r\nthen brownie tells me that `CompilerError: Stack too deep when compiling inline assembly: Variable dataEnd is 1 slot(s) too deep inside the stack.`\r\n\r\nBut when I compile with the solc 0.8.2 binary directly, I don't get any such error.\r\n",
  "closed_by": {
    "login": "iamdefinitelyahuman",
    "id": 35276322,
    "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iamdefinitelyahuman",
    "html_url": "https://github.com/iamdefinitelyahuman",
    "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
    "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
    "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
    "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
    "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
    "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879329821",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1147#issuecomment-879329821",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147",
    "id": 879329821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTMyOTgyMQ==",
    "user": {
      "login": "realisation",
      "id": 13490713,
      "node_id": "MDQ6VXNlcjEzNDkwNzEz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13490713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/realisation",
      "html_url": "https://github.com/realisation",
      "followers_url": "https://api.github.com/users/realisation/followers",
      "following_url": "https://api.github.com/users/realisation/following{/other_user}",
      "gists_url": "https://api.github.com/users/realisation/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/realisation/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/realisation/subscriptions",
      "organizations_url": "https://api.github.com/users/realisation/orgs",
      "repos_url": "https://api.github.com/users/realisation/repos",
      "events_url": "https://api.github.com/users/realisation/events{/privacy}",
      "received_events_url": "https://api.github.com/users/realisation/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T19:05:59Z",
    "updated_at": "2021-07-13T19:05:59Z",
    "author_association": "NONE",
    "body": "removing \r\n`        uint256 _window,`\r\nor\r\n`        int56[][] memory _observations`\r\nallows it to compile ",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879329821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879406826",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1147#issuecomment-879406826",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147",
    "id": 879406826,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTQwNjgyNg==",
    "user": {
      "login": "iamdefinitelyahuman",
      "id": 35276322,
      "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamdefinitelyahuman",
      "html_url": "https://github.com/iamdefinitelyahuman",
      "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
      "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
      "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
      "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
      "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T21:12:46Z",
    "updated_at": "2021-07-13T21:12:46Z",
    "author_association": "MEMBER",
    "body": "This is likely related to optimizer settings within solidity.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/879406826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/898953819",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1147#issuecomment-898953819",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1147",
    "id": 898953819,
    "node_id": "IC_kwDOCUsNcc41lPJb",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-14T20:09:44Z",
    "updated_at": "2021-08-14T20:09:44Z",
    "author_association": "NONE",
    "body": "This is indeed a problem in the compiler but not one that can be quickly \"fixed\". It stems from a limitation of the EVM (only 16 stack slots are reachable at any given time) and working around it requires significant changes in the compiler backend. Work on it is currently ongoing but for the time being you have to do manual workarounds if you encounter this. See for example this article for some suggestions: [Stack Too Deep. Three words of horror](https://soliditydeveloper.com/stacktoodeep).\r\n\r\nYour particular situation seems similar to https://github.com/ethereum/solidity/issues/10930 so the workaround suggested there (disabling only the Yul optimizer with other optimizations still enabled) might be helpful too.\r\n\r\nOverall this problem is not specific to Brownie so I'd suggest closing the issue and just waiting for this to be resolved in the compiler.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/898953819/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380",
  "repository_url": "https://api.github.com/repos/eth-brownie/brownie",
  "labels_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380/labels{/name}",
  "comments_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380/comments",
  "events_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380/events",
  "html_url": "https://github.com/eth-brownie/brownie/issues/1380",
  "id": 1082358284,
  "node_id": "I_kwDOCUsNcc5Ag3oM",
  "number": 1380,
  "title": "General issue with compilation",
  "user": {
    "login": "haraslub",
    "id": 37621356,
    "node_id": "MDQ6VXNlcjM3NjIxMzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/37621356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haraslub",
    "html_url": "https://github.com/haraslub",
    "followers_url": "https://api.github.com/users/haraslub/followers",
    "following_url": "https://api.github.com/users/haraslub/following{/other_user}",
    "gists_url": "https://api.github.com/users/haraslub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haraslub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haraslub/subscriptions",
    "organizations_url": "https://api.github.com/users/haraslub/orgs",
    "repos_url": "https://api.github.com/users/haraslub/repos",
    "events_url": "https://api.github.com/users/haraslub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haraslub/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-12-16T15:45:08Z",
  "updated_at": "2021-12-22T08:45:17Z",
  "closed_at": "2021-12-22T08:45:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello everyone,\r\nI am a newbie in Solidity and I cannot solve the following problem. I am trying to fork Uniswap V2. After successful v2-core deployment, I get stuck in v2-periphery deployment. I get the following errors once running `brownie compile` command:\r\n\r\n```\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint256\".\r\n --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FullMath.sol:8:35:\r\n  |\r\n8 |         uint256 mm = mulmod(x, y, uint256(-1));\r\n  |                                   ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Unary operator - cannot be applied to type uint256\r\n  --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FullMath.sol:19:28:\r\n   |\r\n19 |         uint256 pow2 = d & -d;\r\n   |                            ^^\r\n\r\n\r\nTypeError: Unary operator - cannot be applied to type uint256\r\n  --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FullMath.sol:22:20:\r\n   |\r\n22 |         l += h * ((-pow2) / pow2 + 1);\r\n   |                    ^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint112\".\r\n  --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:81:26:\r\n   |\r\n81 |         require(upper <= uint112(-1), 'FixedPoint: MULUQ_OVERFLOW_UPPER');\r\n   |                          ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint224\".\r\n  --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:87:24:\r\n   |\r\n87 |         require(sum <= uint224(-1), 'FixedPoint: MULUQ_OVERFLOW_SUM');\r\n   |                        ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint144\".\r\n  --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:98:24:\r\n   |\r\n98 |         if (self._x <= uint144(-1)) {\r\n   |                        ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint224\".\r\n   --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:100:30:\r\n    |\r\n100 |             require(value <= uint224(-1), 'FixedPoint: DIVUQ_OVERFLOW');\r\n    |                              ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint224\".\r\n   --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:105:27:\r\n    |\r\n105 |         require(result <= uint224(-1), 'FixedPoint: DIVUQ_OVERFLOW');\r\n    |                           ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"int_const -1\" to \"uint144\".\r\n   --> C:/Users/work/.brownie/packages/Uniswap/Uniswap-lib@2.1.0/contracts/libraries/FixedPoint.sol:127:24:\r\n    |\r\n127 |         if (self._x <= uint144(-1)) {\r\n    |                        ^^^^^^^^^^^\r\n\r\n\r\nTypeError: Explicit type conversion not allowed from \"uint256\" to \"address\".\r\n  --> contracts/libraries/UniswapV2Library.sol:20:16:\r\n   |\r\n20 |         pair = address(uint(keccak256(abi.encodePacked(\r\n   |                ^ (Relevant source part starts here and spans across multiple lines).\r\n```\r\nIn the following line, you can see what I do after `brownie init`:\r\n1) copy the periphery contracts from uniswap-v2-periphery to the contracts folder by using `cp -r ..\\v2-periphery\\contracts\\* contracts`\r\n2) create WETH.sol by copying and modifying WETH9.sol:\r\n```\r\npragma solidity ^0.4.18;\r\n\r\ncontract WETH {\r\n    string public name     = \"Wrapped Ether\";\r\n    string public symbol   = \"WETH\";\r\n    uint8  public decimals = 18;\r\n\r\n    event  Approval(address indexed src, address indexed guy, uint wad);\r\n    event  Transfer(address indexed src, address indexed dst, uint wad);\r\n    event  Deposit(address indexed dst, uint wad);\r\n    event  Withdrawal(address indexed src, uint wad);\r\n\r\n    mapping (address => uint)                       public  balanceOf;\r\n    mapping (address => mapping (address => uint))  public  allowance;\r\n\r\n    receive() external payable {\r\n        deposit();\r\n    }\r\n    function deposit() public payable {\r\n        balanceOf[msg.sender] += msg.value;\r\n        emit Deposit(msg.sender, msg.value);\r\n    }\r\n    function withdraw(uint wad) public {\r\n        require(balanceOf[msg.sender] >= wad);\r\n        balanceOf[msg.sender] -= wad;\r\n        msg.sender.transfer(wad);\r\n        emit Withdrawal(msg.sender, wad);\r\n    }\r\n\r\n    function totalSupply() public view returns (uint) {\r\n        return address(this).balance;\r\n    }\r\n\r\n    function approve(address guy, uint wad) public returns (bool) {\r\n        allowance[msg.sender][guy] = wad;\r\n        emit Approval(msg.sender, guy, wad);\r\n        return true;\r\n    }\r\n\r\n    function transfer(address dst, uint wad) public returns (bool) {\r\n        return transferFrom(msg.sender, dst, wad);\r\n    }\r\n\r\n    function transferFrom(address src, address dst, uint wad)\r\n        public\r\n        returns (bool)\r\n    {\r\n        require(balanceOf[src] >= wad);\r\n\r\n        if (src != msg.sender && allowance[src][msg.sender] != uint(-1)) {\r\n            require(allowance[src][msg.sender] >= wad);\r\n            allowance[src][msg.sender] -= wad;\r\n        }\r\n\r\n        balanceOf[src] -= wad;\r\n        balanceOf[dst] += wad;\r\n\r\n        emit Transfer(src, dst, wad);\r\n\r\n        return true;\r\n    }\r\n}\r\n```\r\n3. Install packages:\r\n`brownie pm install uniswap/uniswap-lib@2.1.0`\r\n`brownie pm install uniswap/uniswap-v2-core@1.0.1`\r\n\r\n4. Configure brownie-config.yaml:\r\n```\r\ndependencies:\r\n  - Uniswap/uniswap-v2-core@1.0.0\r\n  - Uniswap/uniswap-lib@2.1.0\r\ncompiler:\r\n  solc:\r\n    remappings:\r\n      - \"@uniswap/v2-core=Uniswap/Uniswap-v2-core@1.0.0\"\r\n      - \"@uniswap/lib=Uniswap/Uniswap-lib@2.1.0\"\r\n```\r\n\r\nCould anyone provide me with help, please?\r\nThank you very much in advance.",
  "closed_by": {
    "login": "haraslub",
    "id": 37621356,
    "node_id": "MDQ6VXNlcjM3NjIxMzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/37621356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haraslub",
    "html_url": "https://github.com/haraslub",
    "followers_url": "https://api.github.com/users/haraslub/followers",
    "following_url": "https://api.github.com/users/haraslub/following{/other_user}",
    "gists_url": "https://api.github.com/users/haraslub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haraslub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haraslub/subscriptions",
    "organizations_url": "https://api.github.com/users/haraslub/orgs",
    "repos_url": "https://api.github.com/users/haraslub/repos",
    "events_url": "https://api.github.com/users/haraslub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haraslub/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/999393193",
    "html_url": "https://github.com/eth-brownie/brownie/issues/1380#issuecomment-999393193",
    "issue_url": "https://api.github.com/repos/eth-brownie/brownie/issues/1380",
    "id": 999393193,
    "node_id": "IC_kwDOCUsNcc47kYep",
    "user": {
      "login": "haraslub",
      "id": 37621356,
      "node_id": "MDQ6VXNlcjM3NjIxMzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/37621356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haraslub",
      "html_url": "https://github.com/haraslub",
      "followers_url": "https://api.github.com/users/haraslub/followers",
      "following_url": "https://api.github.com/users/haraslub/following{/other_user}",
      "gists_url": "https://api.github.com/users/haraslub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haraslub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haraslub/subscriptions",
      "organizations_url": "https://api.github.com/users/haraslub/orgs",
      "repos_url": "https://api.github.com/users/haraslub/repos",
      "events_url": "https://api.github.com/users/haraslub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haraslub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-22T08:44:53Z",
    "updated_at": "2021-12-22T08:44:53Z",
    "author_association": "NONE",
    "body": "Solved. Just set solc version to 0.6.6 in the brownie-config.yaml.",
    "reactions": {
      "url": "https://api.github.com/repos/eth-brownie/brownie/issues/comments/999393193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159",
  "repository_url": "https://api.github.com/repos/ethereum/execution-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159/events",
  "html_url": "https://github.com/ethereum/execution-spec-tests/issues/159",
  "id": 1769379371,
  "node_id": "I_kwDOIQGLK85pdpYr",
  "number": 159,
  "title": "Fixtures missing from JSON when using pytest-xdist",
  "user": {
    "login": "danceratopz",
    "id": 91727015,
    "node_id": "U_kgDOBXekpw",
    "avatar_url": "https://avatars.githubusercontent.com/u/91727015?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/danceratopz",
    "html_url": "https://github.com/danceratopz",
    "followers_url": "https://api.github.com/users/danceratopz/followers",
    "following_url": "https://api.github.com/users/danceratopz/following{/other_user}",
    "gists_url": "https://api.github.com/users/danceratopz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/danceratopz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danceratopz/subscriptions",
    "organizations_url": "https://api.github.com/users/danceratopz/orgs",
    "repos_url": "https://api.github.com/users/danceratopz/repos",
    "events_url": "https://api.github.com/users/danceratopz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/danceratopz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-06-22T10:15:59Z",
  "updated_at": "2023-06-22T10:15:59Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The `pytest-xdist` allows concurrent execution of test cases. If we enable xdist when running pytest for test cases, certain fixtures are not written to file even though the same amount of tests are reported to be executed from python.\r\n\r\nTo reproduce:\r\n```console\r\nrm -rf fixtures-without-xdist fixtures-with-xdist\r\nfill -v --output=fixtures-without-xdist\r\nfill -v -n auto --output=fixtures-with-xdist\r\nack -c \"0\\d\\d-fork=\" fixtures-without-xdist/ | awk -F: '{ total += $2 } END { print total }'\r\n# -> 134\r\nack -c \"0\\d\\d-fork=\" fixtures-with-xdist/ | awk -F: '{ total += $2 } END { print total }'\r\n# -> 35\r\n```\r\nAdditionally, we should make the fork+test ordering and naming deterministic within fixtures. The top-level fork+test entries in the JSON fixtures are not deterministically ordered by fork+test. The goal would be to generate fixtures that are identical to those generated without using the xdist plugin.\r\n\r\nOriginally spotted by @spencer-tb!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/159/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197",
  "repository_url": "https://api.github.com/repos/ethereum/execution-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197/events",
  "html_url": "https://github.com/ethereum/execution-spec-tests/issues/197",
  "id": 1793282427,
  "node_id": "I_kwDOIQGLK85q41F7",
  "number": 197,
  "title": "better json debug print",
  "user": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-07T10:36:03Z",
  "updated_at": "2023-07-14T16:01:47Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "when error happens env,pre,alloc files are printed as json but in one line. better to print it as pretty json for readability from console log\r\n\r\nthis is how it is printed right now:\r\n```\r\nself = <evm_transition_tool.EvmTransitionTool object at 0x7fcceccd8fd0>\r\nalloc = {'0x0000000000000000000000000000000000000100': {'balance': '0x00', 'code': '0x6000496000556001496001556002496002556003...e': '0x600049600055600149600155600249600255600349600355600449600455600549600555', 'nonce': '0x00', 'storage': {}}, ...}\r\ntxs = []\r\nenv = {'currentBaseFee': '7', 'currentCoinbase': '0x0000000000000000000000000000000000000000', 'currentDifficulty': '0x0', 'currentGasLimit': '0x0', ...}\r\nfork = Cancun, chain_id = 1, reward = -1, eips = None\r\n```\r\n\r\nit is even shortened so I try to investigate env contents and I don't see which fields are provided",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/comments/1636064883",
    "html_url": "https://github.com/ethereum/execution-spec-tests/issues/197#issuecomment-1636064883",
    "issue_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/197",
    "id": 1636064883,
    "node_id": "IC_kwDOIQGLK85hhF5z",
    "user": {
      "login": "danceratopz",
      "id": 91727015,
      "node_id": "U_kgDOBXekpw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91727015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danceratopz",
      "html_url": "https://github.com/danceratopz",
      "followers_url": "https://api.github.com/users/danceratopz/followers",
      "following_url": "https://api.github.com/users/danceratopz/following{/other_user}",
      "gists_url": "https://api.github.com/users/danceratopz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danceratopz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danceratopz/subscriptions",
      "organizations_url": "https://api.github.com/users/danceratopz/orgs",
      "repos_url": "https://api.github.com/users/danceratopz/repos",
      "events_url": "https://api.github.com/users/danceratopz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danceratopz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T16:01:46Z",
    "updated_at": "2023-07-14T16:01:46Z",
    "author_association": "MEMBER",
    "body": "I think this is standard pytest output that just includes the local variables in the context of a test failure. Is that right? \r\n\r\nIf so, I will have a look to see if we can modify this standard behavior.\r\n\r\nHowever, you can drop into a debugger directly in the terminal upon a test fail by specifying `--pdb -nauto` and inspect these elements. \r\n\r\nTo get a nice print in the console you can execute:\r\n\r\n```python\r\n(Pdb) import json\r\n(Pdb) print(json.dumps(alloc, indent=2))\r\n```\r\n\r\nIf the object is not already a json string, you can use `to_json`. For example:\r\n\r\n```python\r\n(Pdb) import json\r\n(Pdb) from ethereum_test_tools.common import to_json\r\n(Pdb) print(json.dumps(to_json(txs[0]), indent=2))\r\n```\r\n\r\nwill print:\r\n\r\n```console\r\n{\r\n  \"type\": \"0x0\",\r\n  \"chainId\": \"0x1\",\r\n  \"nonce\": \"0x0\",\r\n  \"gasPrice\": \"0xa\",\r\n  \"gas\": \"0x7a120\",\r\n  \"value\": \"0x0\",\r\n  \"input\": \"0x\",\r\n  \"to\": \"0x0000000000000000000000000000000000000100\",\r\n  \"sender\": \"0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b\",\r\n  \"v\": \"0x1c\",\r\n  \"r\": \"0xf73b923883495dc2174285c8fa4176de3d45accfb11cc8034ea1dd09831a4ddf\",\r\n  \"s\": \"0x1c6bccbcd655b4022bcc27de4b9d5cee9ce999cdb8459b0afec4f5054ea02243\"\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/comments/1636064883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

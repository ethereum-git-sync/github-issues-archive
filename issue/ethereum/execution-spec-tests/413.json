{
  "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413",
  "repository_url": "https://api.github.com/repos/ethereum/execution-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413/events",
  "html_url": "https://github.com/ethereum/execution-spec-tests/issues/413",
  "id": 2107710588,
  "node_id": "I_kwDOIQGLK859oRx8",
  "number": 413,
  "title": "question: beacon hash = 0x00..00 is implicit",
  "user": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2024-01-30T12:13:10Z",
  "updated_at": "2024-01-30T14:59:34Z",
  "closed_at": "2024-01-30T14:59:34Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "so here for example \r\n\r\n```\r\n(berlin/eip2930_access_list/tests/tmp/tmptest_dc4ff734_064d_4323_bc0d_e257063e1d8a/test_acl.py::test_access_list[fork_Cancun-state_test], fork: Cancun, TrInfo: d: 0, g: 0, v: 0, TrData: ` 0x..`\r\n```\r\n\r\nthis test is being generated for Cancun, but because the env now does not have beaconRoot field, it is implicitly assumed that the hash is 0x000000...00 \r\nand the pre state does not have beacon account record to indicate it. or rather the record is omited, because it is 0x00000\r\n\r\nthis makes the hash value kind of implicit. ",
  "closed_by": {
    "login": "marioevz",
    "id": 11726710,
    "node_id": "MDQ6VXNlcjExNzI2NzEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11726710?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marioevz",
    "html_url": "https://github.com/marioevz",
    "followers_url": "https://api.github.com/users/marioevz/followers",
    "following_url": "https://api.github.com/users/marioevz/following{/other_user}",
    "gists_url": "https://api.github.com/users/marioevz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marioevz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marioevz/subscriptions",
    "organizations_url": "https://api.github.com/users/marioevz/orgs",
    "repos_url": "https://api.github.com/users/marioevz/repos",
    "events_url": "https://api.github.com/users/marioevz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marioevz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/comments/1917077013",
    "html_url": "https://github.com/ethereum/execution-spec-tests/issues/413#issuecomment-1917077013",
    "issue_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/413",
    "id": 1917077013,
    "node_id": "IC_kwDOIQGLK85yREYV",
    "user": {
      "login": "marioevz",
      "id": 11726710,
      "node_id": "MDQ6VXNlcjExNzI2NzEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/11726710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marioevz",
      "html_url": "https://github.com/marioevz",
      "followers_url": "https://api.github.com/users/marioevz/followers",
      "following_url": "https://api.github.com/users/marioevz/following{/other_user}",
      "gists_url": "https://api.github.com/users/marioevz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marioevz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marioevz/subscriptions",
      "organizations_url": "https://api.github.com/users/marioevz/orgs",
      "repos_url": "https://api.github.com/users/marioevz/repos",
      "events_url": "https://api.github.com/users/marioevz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marioevz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-30T14:58:12Z",
    "updated_at": "2024-01-30T14:58:12Z",
    "author_association": "MEMBER",
    "body": "Parent Beacon Root is not part of the state tests, because this is a block behavior, it happens at the start of the block, and the purpose of the state test is to evaluate a single tx state transition.\r\n\r\nIn tests where they are written with a beacon root contract interaction in mind, the `env` still does not have any reference to the beacon root, and the beacon root storage in the `pre` is already filled with the information:\r\n```json\r\n{\r\n    \"tests/cancun/eip4788_beacon_root/test_beacon_root_contract.py::test_calldata_lengths[fork_Cancun-state_test-timestamp_12-valid_call_False-valid_input_False-1024_bytes]\": {\r\n        \"_info\": {\r\n            \"comment\": \"`execution-spec-tests` generated test\",\r\n            \"filling-transition-tool\": \"evm version 1.13.9-unstable-0b471c31\",\r\n            \"reference-spec\": \"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-4788.md\",\r\n            \"reference-spec-version\": \"e7608fe8ac8a60934ca874f5aab7d5c1f4ff7782\"\r\n        },\r\n        \"env\": {\r\n            \"currentCoinbase\": \"0x2adc25665018aa1fe0e6bc666dac8fc2697ff9ba\",\r\n            \"currentGasLimit\": \"0x016345785d8a0000\",\r\n            \"currentNumber\": \"0x01\",\r\n            \"currentTimestamp\": \"0x0c\",\r\n            \"currentRandom\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n            \"currentDifficulty\": \"0x00\",\r\n            \"currentBaseFee\": \"0x07\",\r\n            \"currentExcessBlobGas\": \"0x00\"\r\n        },\r\n        \"pre\": {\r\n            \"0x000f3df6d732807ef1319fb7b8bb8522d0beac02\": {\r\n                \"nonce\": \"0x01\",\r\n                \"balance\": \"0x00\",\r\n                \"code\": \"0x3373fffffffffffffffffffffffffffffffffffffffe14604d57602036146024575f5ffd5b5f35801560495762001fff810690815414603c575f5ffd5b62001fff01545f5260205ff35b5f5ffd5b62001fff42064281555f359062001fff015500\",\r\n                \"storage\": {\r\n                    \"0x0c\": \"0x0c\",   <= This part\r\n                    \"0x200b\": \"0x6c31fc15422ebad28aaf9089c306702f67540b53c7eea8b7d2941044b027100f\"   <= And this part\r\n                }\r\n            },\r\n```\r\n\r\nIf you really want to, you can parse this storage, it will always have the correct info:\r\n`0x0c` is equal to `currentTimestamp`, and the parent beacon root, `0x6c31fc15422ebad28aaf9089c306702f67540b53c7eea8b7d2941044b027100f` in this case, is at `0x0c + 0x1fff`, where `0x1fff` is the `HISTORY_BUFFER_LENGTH` constant in the EIP.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/comments/1917077013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244",
  "repository_url": "https://api.github.com/repos/ethereum/execution-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244/events",
  "html_url": "https://github.com/ethereum/execution-spec-tests/issues/244",
  "id": 1839934584,
  "node_id": "I_kwDOIQGLK85tqyx4",
  "number": 244,
  "title": "Handle forks that require a predefined contract in the state at genesis",
  "user": {
    "login": "marioevz",
    "id": 11726710,
    "node_id": "MDQ6VXNlcjExNzI2NzEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11726710?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marioevz",
    "html_url": "https://github.com/marioevz",
    "followers_url": "https://api.github.com/users/marioevz/followers",
    "following_url": "https://api.github.com/users/marioevz/following{/other_user}",
    "gists_url": "https://api.github.com/users/marioevz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marioevz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marioevz/subscriptions",
    "organizations_url": "https://api.github.com/users/marioevz/orgs",
    "repos_url": "https://api.github.com/users/marioevz/repos",
    "events_url": "https://api.github.com/users/marioevz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marioevz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-08-07T17:36:12Z",
  "updated_at": "2023-08-07T17:36:12Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Starting from Cancun fork, it is possible that EIP 4788 will require bytecode at a predefined address that contains the logic to retrieve the beacon root for the users, and this account will be called by a system transaction at the beginning of each block.\r\n\r\nFor our tests it is important that this account is added automatically for tests at genesis because, currently, every test defines the entirety of the `alloc` dictionary for the tests, but it seems like this could set for a scenario where this expected account with the EIP 4788 logic could be forgotten to be included by the test writer, resulting in potentially unexpected behavior from clients.\r\n\r\nI have two potential solutions for this:\r\n1) We add an `alloc` function to the forks, and before cancun it returns `{}`, after cancun it returns `{\"0x000..0b\": {\"code\": \"0x1234...\"...,` and this is appended to every test automatically while filling\r\n2) We add a default `alloc` that:\r\n  a) all tests must inherit and build upon (This still could be forgotten by test writers)\r\n  b) is automatically appended during BlockchainTest and StateTest genesis generation",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-spec-tests/issues/244/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

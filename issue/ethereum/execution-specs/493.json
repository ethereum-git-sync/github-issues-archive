{
  "url": "https://api.github.com/repos/ethereum/execution-specs/issues/493",
  "repository_url": "https://api.github.com/repos/ethereum/execution-specs",
  "labels_url": "https://api.github.com/repos/ethereum/execution-specs/issues/493/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-specs/issues/493/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-specs/issues/493/events",
  "html_url": "https://github.com/ethereum/execution-specs/issues/493",
  "id": 1194686857,
  "node_id": "I_kwDOERgWss5HNXmJ",
  "number": 493,
  "title": "Are gas payment and execution for opcodes/precompiles separate?",
  "user": {
    "login": "petertdavies",
    "id": 8127356,
    "node_id": "MDQ6VXNlcjgxMjczNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8127356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/petertdavies",
    "html_url": "https://github.com/petertdavies",
    "followers_url": "https://api.github.com/users/petertdavies/followers",
    "following_url": "https://api.github.com/users/petertdavies/following{/other_user}",
    "gists_url": "https://api.github.com/users/petertdavies/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/petertdavies/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/petertdavies/subscriptions",
    "organizations_url": "https://api.github.com/users/petertdavies/orgs",
    "repos_url": "https://api.github.com/users/petertdavies/repos",
    "events_url": "https://api.github.com/users/petertdavies/events{/privacy}",
    "received_events_url": "https://api.github.com/users/petertdavies/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3146414934,
      "node_id": "MDU6TGFiZWwzMTQ2NDE0OTM0",
      "url": "https://api.github.com/repos/ethereum/execution-specs/labels/A-spec",
      "name": "A-spec",
      "color": "FBCA04",
      "default": false,
      "description": "Area: specification"
    },
    {
      "id": 3146436421,
      "node_id": "MDU6TGFiZWwzMTQ2NDM2NDIx",
      "url": "https://api.github.com/repos/ethereum/execution-specs/labels/C-question",
      "name": "C-question",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: this is a question or request for clarification"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-04-06T14:19:58Z",
  "updated_at": "2022-04-07T20:39:37Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "It seems that in practice the EVM is structured so that gas payment for an operation and execution of that operation are separate. This leads to a bunch of behaviour that is otherwise counter-intuitive. For example, `CALL` extends memory to include all the space allocated for return data, even though not all of that memory actually gets written to.\r\n\r\nWe should consider explicitly emulating this structure in the specs.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-specs/issues/493/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-specs/issues/493/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/execution-specs/issues/comments/1090348438",
    "html_url": "https://github.com/ethereum/execution-specs/issues/493#issuecomment-1090348438",
    "issue_url": "https://api.github.com/repos/ethereum/execution-specs/issues/493",
    "id": 1090348438,
    "node_id": "IC_kwDOERgWss5A_WWW",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-06T14:37:59Z",
    "updated_at": "2022-04-06T14:37:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "> CALL extends memory to include all the space allocated for return data, even though not all of that memory actually gets written to\r\n\r\nI agree with you that it seems counter-intuitive. But it seems like the EVM was never designed with efficiency in mind. \r\nSadly, If we don't execute the operations the way they are executed now, they break consensus. \r\nAlso, gas payment needs to happen in a certain order; else, gas consumed doesn't match in case the message call results in an error. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-specs/issues/comments/1090348438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

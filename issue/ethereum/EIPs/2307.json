{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/2307",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/2307",
  "id": 503055024,
  "node_id": "MDU6SXNzdWU1MDMwNTUwMjQ=",
  "number": 2307,
  "title": "ERC 2307: Store data by logging to reduce gas cost",
  "user": {
    "login": "tak1827",
    "id": 9858498,
    "node_id": "MDQ6VXNlcjk4NTg0OTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9858498?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tak1827",
    "html_url": "https://github.com/tak1827",
    "followers_url": "https://api.github.com/users/tak1827/followers",
    "following_url": "https://api.github.com/users/tak1827/following{/other_user}",
    "gists_url": "https://api.github.com/users/tak1827/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tak1827/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tak1827/subscriptions",
    "organizations_url": "https://api.github.com/users/tak1827/orgs",
    "repos_url": "https://api.github.com/users/tak1827/repos",
    "events_url": "https://api.github.com/users/tak1827/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tak1827/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-10-06T05:33:05Z",
  "updated_at": "2021-12-04T20:11:50Z",
  "closed_at": "2021-12-04T20:11:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\r\neip: <to be assigned>\r\ntitle: Store data by logging for saving gas cost\r\nauthor: tak <re795h@gmail.com>\r\nstatus: Draft\r\ntype: Standards Track\r\ncategory: ERC\r\ncreated: 2019-10-06\r\n```\r\n\r\n# Simple Summary\r\nStore data on a distributed storage, like IPFS.  Then store just the reference, like IPFS hash, to Ethereum by logging.\r\n\r\n# Motivation\r\nWe will face two issues for using Ethereum as public ledger.\r\nThe fist issue is gas cost. Storing data to the storage is the most expensive operation. (see [`SSTORE` gas cost](https://github.com/crytic/evm-opcodes)) The second issue is capacity. Event solidity seems [not have any data size limitation](https://www.reddit.com/r/ethereum/comments/3kgxlx/in_solidity_does_bytes_have_a_maximum_length/), we restricted by gas limit.\r\n\r\nSo, current Ethereum is not suitable for large date or frequent storing.\r\n\r\n# Specification\r\nStore data on distributed storage, like IPFS. IPFS don't have any data size limitation. Then, store the hash to Ethereum for data integrity. IPFS hash is really small so that this contribute saving gas cost. This is the most likely taken solution. Etherum famous projects, like [Origin Protocol](https://github.com/OriginProtocol/origin/blob/master/packages/contracts/contracts/marketplace/V01_Marketplace.sol) or [Openlaw](https://media.consensys.net/introducing-openlaw-7a2ea410138b) are doing.\r\n\r\nFor reducing gas cost further, we propose to store data by event emission. Logging is enough, unless you delete data or operate data from a smart contract.\r\n\r\n### Recorded\r\n- eventSig is the first 4 bytes of the Keccak256 hash of event name\r\n- createdAt is the the recorded time.\r\n- ipfsHash is base58 decoeded IPFS hash\r\n```solidity\r\nevent Recorded (bytes4 indexed eventSig, uint256 indexed createdAt, bytes32 ipfsHash);\r\n```\r\nFurther Explanation: [Store data in Ethereum by logging to reduce gas cost](https://medium.com/@t.tak/store-data-in-ethereum-by-logging-to-reduce-gas-cost-b70a13884485)\r\n\r\n# Implementation\r\n```solidity\r\nimport 'openzeppelin-solidity/contracts/access/roles/WhitelistAdminRole.sol';\r\n\r\nevent Recorded (bytes4 indexed eventSig, uint256 indexed createdAt, bytes32 ipfsHash);\r\n\r\n/**\r\n * @dev Write ipfsHash as log\r\n */\r\nfunction writeHash(bytes4 _eventSig, bytes32 _ipfsHash) public onlyWhitelistAdmin {\r\n    emit Recorded(_eventSig, uint256(now), _ipfsHash);\r\n}\r\n```\r\n\r\n# Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).\r\n\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/2307/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/539466465",
    "html_url": "https://github.com/ethereum/EIPs/issues/2307#issuecomment-539466465",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307",
    "id": 539466465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTQ2NjQ2NQ==",
    "user": {
      "login": "cryptogiddi",
      "id": 35487282,
      "node_id": "MDQ6VXNlcjM1NDg3Mjgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35487282?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptogiddi",
      "html_url": "https://github.com/cryptogiddi",
      "followers_url": "https://api.github.com/users/cryptogiddi/followers",
      "following_url": "https://api.github.com/users/cryptogiddi/following{/other_user}",
      "gists_url": "https://api.github.com/users/cryptogiddi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cryptogiddi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cryptogiddi/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptogiddi/orgs",
      "repos_url": "https://api.github.com/users/cryptogiddi/repos",
      "events_url": "https://api.github.com/users/cryptogiddi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cryptogiddi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-08T11:15:54Z",
    "updated_at": "2019-10-08T11:15:54Z",
    "author_association": "NONE",
    "body": "what are your thoughts on storing data on Ethereum using hashes",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/539466465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/539955942",
    "html_url": "https://github.com/ethereum/EIPs/issues/2307#issuecomment-539955942",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307",
    "id": 539955942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTk1NTk0Mg==",
    "user": {
      "login": "tak1827",
      "id": 9858498,
      "node_id": "MDQ6VXNlcjk4NTg0OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9858498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tak1827",
      "html_url": "https://github.com/tak1827",
      "followers_url": "https://api.github.com/users/tak1827/followers",
      "following_url": "https://api.github.com/users/tak1827/following{/other_user}",
      "gists_url": "https://api.github.com/users/tak1827/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tak1827/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tak1827/subscriptions",
      "organizations_url": "https://api.github.com/users/tak1827/orgs",
      "repos_url": "https://api.github.com/users/tak1827/repos",
      "events_url": "https://api.github.com/users/tak1827/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tak1827/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-09T11:15:16Z",
    "updated_at": "2019-10-09T11:26:13Z",
    "author_association": "NONE",
    "body": "We can store variety of data.\r\n\r\n### Case1. Certification\r\nThe certification hash stored on Ethereum never be changed so we can verify certification integrity. It's publicly available any time as long as the certification issuer operate IPFS node.\r\n\r\n### Case2. Copyright\r\nSimilarly, we can verify the integrity of a copyright publicly.\r\n\r\n### Case3. Token\r\nWe can invent ERC20 like token protocol on top of this.\r\n\r\nFor example, we define `eventSig` as concatenation of token name and function  \r\n```\r\neventSig => First 4 bytes of Keccak256(\"token_name:transferFrom\")\r\n```\r\n\r\nThen, we put other informations(from, to, value) to IPFS\r\n```\r\n{\r\n  from: 0x825bBB7fdD9292ba18913c1E784D839DbEF82BbB,\r\n  to: 0x49Cb60853D1a527995F6CB784e9641bb408dBb51,\r\n  value: 10000000\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/539955942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705295",
    "html_url": "https://github.com/ethereum/EIPs/issues/2307#issuecomment-974705295",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307",
    "id": 974705295,
    "node_id": "IC_kwDOAq426M46GNKP",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-11-20T20:11:21Z",
    "updated_at": "2021-11-20T20:11:21Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086257",
    "html_url": "https://github.com/ethereum/EIPs/issues/2307#issuecomment-986086257",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2307",
    "id": 986086257,
    "node_id": "IC_kwDOAq426M46xntx",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-04T20:11:50Z",
    "updated_at": "2021-12-04T20:11:50Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/1505",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/1505",
  "id": 371318511,
  "node_id": "MDU6SXNzdWUzNzEzMTg1MTE=",
  "number": 1505,
  "title": "Token forwarding (ERC20 extension)",
  "user": {
    "login": "stasptr",
    "id": 1973940,
    "node_id": "MDQ6VXNlcjE5NzM5NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1973940?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stasptr",
    "html_url": "https://github.com/stasptr",
    "followers_url": "https://api.github.com/users/stasptr/followers",
    "following_url": "https://api.github.com/users/stasptr/following{/other_user}",
    "gists_url": "https://api.github.com/users/stasptr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stasptr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stasptr/subscriptions",
    "organizations_url": "https://api.github.com/users/stasptr/orgs",
    "repos_url": "https://api.github.com/users/stasptr/repos",
    "events_url": "https://api.github.com/users/stasptr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stasptr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-10-18T00:43:28Z",
  "updated_at": "2021-12-18T21:11:18Z",
  "closed_at": "2021-12-18T21:11:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Preamble\r\n\r\nEIP: <to be assigned>\r\nTitle: Token standard\r\nAuthor: Stanislav Petrovskiy @stasptr\r\nType: Informational\r\nCategory: ERC\r\nStatus: Draft\r\nCreated: 2018-10-17\r\nRequires: EIP20\r\n\r\n### Simple Summary\r\n\r\nAbility for address owner to set up token forwarding without paying for gas\r\n\r\n### Abstract\r\n\r\nProposed erc20 extension has option to set token forwarding from an address to target address by delegate. Tokens transferred to such address are automatically forwarded to target address. Transfer events are emitted as if tokens come to address with forwarding and then to target address.\r\n\r\n### Motivation\r\n\r\nWhen application uses erc20 utility token and application users can input tokens, the most user-friendly solution is to assign to users application controlled input addresses. But tokens sent to such addresses are hard to move further because token owner have to have ETH in his account to pay for gas.\r\nCrypto exchanges usually create a contract for each user and use it as input address - universal, but expensive solution.\r\nAnother solution is to implement #965 (send by signature token extension)\r\nProposed solution below is more specific and has some benefits against #965\r\n\r\n### Specification\r\n\r\n#### Solution\r\nToken contract has option to set permanent token forwarding from one address to another.\r\nThis operation may be performed by owner of address or by delegate using signature.\r\nTokens transferred to address with forwarding are automatically transferred to the forwarding target address. Transfer events are emitted for whole forwarding path.\r\n\r\nForwarding chain is allowed.\r\nMotivation: simple forwarding is enough if all input address forwarding set to cold wallet. But what if cold wallet is compromised? With forwarding chains we just set forwarding from the compromised wallet to new one.\r\n\r\nAfter forwarding is set, change forwarding can only owner of address - the address receiving tokens from \r\nthis address after forwarding chain. Setting forwarding is similar to transfer address ownership.\r\n\r\nWhen token forwarding is set from some address to some target, the current address balance is transferred to target. So balance of address with forwarding is always 0.\r\nMotivation: application may setup forwarding for user's input address only after user transfers some tokens to it. Further token inputs for this user are forwarding to cold wallet automatically, so application needs to pay for gas only once per user.\r\n\r\n#### function ownerOf(address _address) view public returns (address)\r\nReturns real owner of address\r\nif no forwarding for given address is set - returns given address\r\nif forwarding for given address is set to target - returns ownerOf(target)\r\nChain forwarding is possible, loops is impossible\r\n\r\n#### function setupForward(address _address, address _receiver) public\r\nNon delegate setupForward must be called by ownerOf(_address)\r\nSets forwarding from _address to _receiver\r\nEmits event SetupForward(_address, caller, _receiver)\r\nTransfers current balance of _address to _receiver, with forwarding and transfer events\r\n\r\n#### delegateSetupForward(address _address, address _receiver, uint8 _v, bytes32 _r, bytes32 _s) public\r\ndelegateSetupForward must check that signature (_v, _r, _s) of message {\"setup forward\", _tokenAddress, _address, _receiver} belongs to current ownerOf(_address)\r\nSets forwarding from _address to _receiver\r\nEmits event SetupForward(_address, caller, _receiver)\r\nTransfers current balance of _address to _receiver, with forwarding and transfer events\r\n\r\nMotivation: message doesn't start with Ethereum Signed Message prefix, so attack \"please sign this message\" is impossible. Message doesn't contain delegate, so it may be used by anybody. It is option to discuss adding delegate address to signature. Current message format allows generating pack of signatures using cold hd wallet, and not to regenerate them if application delegate wallet is changed. Application wallet has more chances to be compromised then cold wallet.\r\n\r\n#### Interface\r\n```solidity\r\npragma solidity ^0.4.24;\r\n\r\ninterface ForwardableToken {\r\n  event SetupForward(address address_, address oldOwner_, address newOwner_);\r\n\r\n  function ownerOf(address _address) view public returns (address);\r\n  function setupForward(address _address, address _receiver) public;\r\n  function delegateSetupForward(address _address, address _receiver, uint8 _v, bytes32 _r, bytes32 _s) public;\r\n}\r\n```\r\n#### Implementation\r\nAutoForwardableToken (has some differencies in method names) ](https://github.com/ElylandLLC/ico/blob/master/contracts/AutoForwardableToken.sol)\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/1505/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/588068018",
    "html_url": "https://github.com/ethereum/EIPs/issues/1505#issuecomment-588068018",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505",
    "id": 588068018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODA2ODAxOA==",
    "user": {
      "login": "djosey",
      "id": 9030566,
      "node_id": "MDQ6VXNlcjkwMzA1NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9030566?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djosey",
      "html_url": "https://github.com/djosey",
      "followers_url": "https://api.github.com/users/djosey/followers",
      "following_url": "https://api.github.com/users/djosey/following{/other_user}",
      "gists_url": "https://api.github.com/users/djosey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djosey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djosey/subscriptions",
      "organizations_url": "https://api.github.com/users/djosey/orgs",
      "repos_url": "https://api.github.com/users/djosey/repos",
      "events_url": "https://api.github.com/users/djosey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djosey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-19T07:06:24Z",
    "updated_at": "2020-02-19T07:06:24Z",
    "author_association": "NONE",
    "body": "Wonder if anyone ever pursued anything comparable to this standard?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/588068018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986093237",
    "html_url": "https://github.com/ethereum/EIPs/issues/1505#issuecomment-986093237",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505",
    "id": 986093237,
    "node_id": "IC_kwDOAq426M46xpa1",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-04T21:10:12Z",
    "updated_at": "2021-12-04T21:10:12Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986093237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/997285242",
    "html_url": "https://github.com/ethereum/EIPs/issues/1505#issuecomment-997285242",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1505",
    "id": 997285242,
    "node_id": "IC_kwDOAq426M47cV16",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-18T21:11:17Z",
    "updated_at": "2021-12-18T21:11:17Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/997285242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

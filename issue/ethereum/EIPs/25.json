{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/25/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/25/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/25/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/25",
  "id": 118039237,
  "node_id": "MDU6SXNzdWUxMTgwMzkyMzc=",
  "number": 25,
  "title": "Question on EIP3: CALLDEPTH",
  "user": {
    "login": "janx",
    "id": 5958,
    "node_id": "MDQ6VXNlcjU5NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5958?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janx",
    "html_url": "https://github.com/janx",
    "followers_url": "https://api.github.com/users/janx/followers",
    "following_url": "https://api.github.com/users/janx/following{/other_user}",
    "gists_url": "https://api.github.com/users/janx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janx/subscriptions",
    "organizations_url": "https://api.github.com/users/janx/orgs",
    "repos_url": "https://api.github.com/users/janx/repos",
    "events_url": "https://api.github.com/users/janx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2015-11-20T13:08:21Z",
  "updated_at": "2022-02-02T01:54:44Z",
  "closed_at": "2022-02-02T01:54:44Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "link: https://eips.ethereum.org/EIPS/eip-3\r\n\r\nIMO it's a good practice to check return value of callee if consequential operations is dependent and critical, if so what's the advantage of checking `CALLDEPTH` instead of return value?\r\n\r\nAnother point is, even if you use `CALLDEPTH` to guard stack overflow, you may still need return value guard in case there's other errors, thus leads to more verbose code?\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/25/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/25/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/158511311",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-158511311",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 158511311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODUxMTMxMQ==",
    "user": {
      "login": "nmushegian",
      "id": 924397,
      "node_id": "MDQ6VXNlcjkyNDM5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/924397?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmushegian",
      "html_url": "https://github.com/nmushegian",
      "followers_url": "https://api.github.com/users/nmushegian/followers",
      "following_url": "https://api.github.com/users/nmushegian/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmushegian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmushegian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmushegian/subscriptions",
      "organizations_url": "https://api.github.com/users/nmushegian/orgs",
      "repos_url": "https://api.github.com/users/nmushegian/repos",
      "events_url": "https://api.github.com/users/nmushegian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmushegian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-20T20:06:47Z",
    "updated_at": "2015-12-27T00:47:27Z",
    "author_association": "NONE",
    "body": "`CALLDEPTH` seems like it will ruin encapsulation in a lot of ways. `msg.sender` is an elegant abstraction\n\nIt seems `CALLDEPTH` is trying to solve a problem that could be solved more simply by some kind of error bit in the EVM state. Maybe OOG can be retrofitted to use an error bit as well.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/158511311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/165352412",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-165352412",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 165352412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTM1MjQxMg==",
    "user": {
      "login": "ebuchman",
      "id": 2300911,
      "node_id": "MDQ6VXNlcjIzMDA5MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2300911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebuchman",
      "html_url": "https://github.com/ebuchman",
      "followers_url": "https://api.github.com/users/ebuchman/followers",
      "following_url": "https://api.github.com/users/ebuchman/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebuchman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebuchman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebuchman/subscriptions",
      "organizations_url": "https://api.github.com/users/ebuchman/orgs",
      "repos_url": "https://api.github.com/users/ebuchman/repos",
      "events_url": "https://api.github.com/users/ebuchman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebuchman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-17T06:18:37Z",
    "updated_at": "2015-12-17T06:18:37Z",
    "author_association": "NONE",
    "body": "I similarly don't see the value in using CALLDEPTH instead of an error bit, but I did advocate for something similar, for different reasons, a year ago, and still would now: https://www.reddit.com/r/ethereum/comments/2hu2fq/proposal_for_new_opcodes_callstack_and/\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/165352412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/418709387",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-418709387",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 418709387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODcwOTM4Nw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-05T12:18:38Z",
    "updated_at": "2018-09-05T12:18:38Z",
    "author_association": "MEMBER",
    "body": "The current version is reachable at: https://eips.ethereum.org/EIPS/eip-3\r\n\r\n@holiman it seems you have never addressed the questions above.\r\n\r\nIs it still relevant? If not, should it be marked \"Rejected\"? If yes, what would it take to implement it?\r\n\r\nWhile not fully relevant, it does help in the context of ewasm implementing evm2wasm (see https://github.com/ewasm/design/issues/138)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/418709387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/435631200",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-435631200",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 435631200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTYzMTIwMA==",
    "user": {
      "login": "Earlz",
      "id": 371222,
      "node_id": "MDQ6VXNlcjM3MTIyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/371222?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Earlz",
      "html_url": "https://github.com/Earlz",
      "followers_url": "https://api.github.com/users/Earlz/followers",
      "following_url": "https://api.github.com/users/Earlz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Earlz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Earlz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Earlz/subscriptions",
      "organizations_url": "https://api.github.com/users/Earlz/orgs",
      "repos_url": "https://api.github.com/users/Earlz/repos",
      "events_url": "https://api.github.com/users/Earlz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Earlz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-04T00:13:39Z",
    "updated_at": "2018-11-04T00:13:39Z",
    "author_association": "NONE",
    "body": "The CALLDEPTH opcode would make it trivial to implement a guard preventing uncontrolled reentrancy into the contract while still allowing self-calls. With the new net gas metering for storage, I think it'd even be fairly cheap\r\n\r\nBasically just a storage variable expectedDepth. expectedDepth would be incremented when calling itself, and each function needing a reentrancy guard would check expectedDepth matches CALLDEPTH. When the self-call function returns, decrement expectedDepth. If implemented properly, expectedDepth is never anything but 0 upon contract termination (except in case of error, where this state would be reverted anyway). It would need some special case checking for when the contract is initially called with CALLDEPTH > 0, potentially another storage variable or flag saying \"execInProgress\" or similar, but should be easily doable. \r\n\r\nThe only other existing way to implement such a guard is not suitable for all cases. It can be done by checking sender == origin, but this prevents contract called contracts from preventing reentrancy as well as self-calls. It's also possible to use a simple storage mutex, but that also prevents self-calls. \r\n\r\nI see no way to have this kind of reentrancy guard functionality without CALLDEPTH and I don't really understand why this EIP is deferred with very little discussion and with only one narrow use case in mind",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/435631200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1016002127",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-1016002127",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 1016002127,
    "node_id": "IC_kwDOAq426M48jvZP",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-01-19T01:51:41Z",
    "updated_at": "2022-01-19T01:51:41Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1016002127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1027501413",
    "html_url": "https://github.com/ethereum/EIPs/issues/25#issuecomment-1027501413",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/25",
    "id": 1027501413,
    "node_id": "IC_kwDOAq426M49Pm1l",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-02-02T01:54:44Z",
    "updated_at": "2022-02-02T01:54:44Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1027501413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

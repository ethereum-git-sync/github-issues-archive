{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/2594",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/2594/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/2594/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/2594/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/2594",
  "id": 598356551,
  "node_id": "MDU6SXNzdWU1OTgzNTY1NTE=",
  "number": 2594,
  "title": "Transaction deadlines and increasing gas prices for more efficient auctions",
  "user": {
    "login": "moodysalem",
    "id": 7897876,
    "node_id": "MDQ6VXNlcjc4OTc4NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7897876?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/moodysalem",
    "html_url": "https://github.com/moodysalem",
    "followers_url": "https://api.github.com/users/moodysalem/followers",
    "following_url": "https://api.github.com/users/moodysalem/following{/other_user}",
    "gists_url": "https://api.github.com/users/moodysalem/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/moodysalem/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/moodysalem/subscriptions",
    "organizations_url": "https://api.github.com/users/moodysalem/orgs",
    "repos_url": "https://api.github.com/users/moodysalem/repos",
    "events_url": "https://api.github.com/users/moodysalem/events{/privacy}",
    "received_events_url": "https://api.github.com/users/moodysalem/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-04-11T21:41:10Z",
  "updated_at": "2020-04-11T21:55:38Z",
  "closed_at": "2020-04-11T21:55:38Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Summary\r\n\r\nAllow user to be more expressive in setting the gas price they wish to pay for a transaction. This makes the auction for block space much more efficient, and will reduce overall gas paid by users. It also improves the user experience in high congestion scenarios.\r\n\r\n## Background\r\n\r\nCurrently we have a problem where network congestion makes it difficult for users to understand what gas price to set. Often they have to set an exorbitant gas price in these situations to make sure their transaction gets through in a reasonable amount of time, without having to sign an additional transaction with a higher gas price. Then they have to wait an arbitrary amount of time for their transaction to be included in the block, never knowing when it is dropped from the mempool or whether it's safe to retry the transaction.\r\n\r\n## Solution\r\n\r\nTo solve this, it would be advantageous if the user could specify a starting gas price, a min timestamp (or block number) for inclusion, a max timestamp (or block number) for inclusion, and a maximum gas price. The transaction would not be included unless the block timestamp (or block number) is between the min and max timestamp, and the gas price paid would be the the linear price, or some other curve, between the min and max timestamp. Linear is suggested in first implementation, but perhaps this logic could be customized into reusable a smart contract with an interface as such:\r\n\r\n```solidity\r\nfunction getGasPrice(\r\n  uint256 start_timestamp,\r\n  uint256 end_timestamp,\r\n  uint256 min_price,\r\n  uint256 max_price) returns (uint256 gas_price);\r\n```\r\n\r\nWhen the transaction is included in the block, the gas price is determined by the block number/block timestamp (depending on the mechanism). Timestamp is more usable than block number, but block number is more specific and may interface better with other mechanisms.\r\n\r\nThe primary reason for the 'expiration timestamp' is to define the slope of the ramp up in gas price. Miners can prune these transactions from the mempool after the expiration timestamp. This also has the added benefit of allowing a user to know definitively when a transaction will never be included in a block (barring a re-org). Clients can more easily define logic about when a transaction should be attempted a second time.\r\n\r\nA pseudo-transaction with these additional fields may look like such:\r\n```json\r\n{\r\n  \"from\": \"0x...\",\r\n  \"to\": \"0x...\",\r\n  \"data\": \"0x...\",\r\n  \"minGasPrice\": \"10 GWEI\",\r\n  \"maxGasPrice\": \"100 GWEI\",\r\n  \"minTimestamp\": \"*now*\", \r\n  \"maxTimestamp\": \"*now* + 10 minutes\"\r\n}\r\n```\r\n\r\nIf the transaction is included at `*now* + 5 minutes` then the gas price paid is halfway between 10GWEI and 100GWEI or 55GWEI.\r\n\r\nThe current transaction blob is equivalent to setting the min price to the max price and omitting the start/end timestamps, and so the current transaction structure is backwards compatible with this one. This requires a hard fork though because this new format of transactions will not be compatible with a previous version.\r\n\r\n## Miner competition\r\n\r\nMiners have incentive to include transactions earlier as soon as they exceed a threshold gas price, as they as they do not want other miners to include the transaction and collect a higher gas price. It naively seems the best approach for a miner is to sort all the transactions in the mempool by the gas price at the current block timestamp, and include them in that order.\r\n\r\n## Open Questions\r\n\r\nOne complication is miners have to constantly reevaluate the priority of transactions by their changing gas prices. This may add some CPU complexity to constructing a block. However in mining pools this work is mostly centralized.\r\n\r\n## Other work\r\nSimilar to https://github.com/ethereum/EIPs/issues/1441",
  "closed_by": {
    "login": "moodysalem",
    "id": 7897876,
    "node_id": "MDQ6VXNlcjc4OTc4NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7897876?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/moodysalem",
    "html_url": "https://github.com/moodysalem",
    "followers_url": "https://api.github.com/users/moodysalem/followers",
    "following_url": "https://api.github.com/users/moodysalem/following{/other_user}",
    "gists_url": "https://api.github.com/users/moodysalem/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/moodysalem/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/moodysalem/subscriptions",
    "organizations_url": "https://api.github.com/users/moodysalem/orgs",
    "repos_url": "https://api.github.com/users/moodysalem/repos",
    "events_url": "https://api.github.com/users/moodysalem/events{/privacy}",
    "received_events_url": "https://api.github.com/users/moodysalem/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/2594/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/2594/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/612521342",
    "html_url": "https://github.com/ethereum/EIPs/issues/2594#issuecomment-612521342",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2594",
    "id": 612521342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMjUyMTM0Mg==",
    "user": {
      "login": "moodysalem",
      "id": 7897876,
      "node_id": "MDQ6VXNlcjc4OTc4NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7897876?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodysalem",
      "html_url": "https://github.com/moodysalem",
      "followers_url": "https://api.github.com/users/moodysalem/followers",
      "following_url": "https://api.github.com/users/moodysalem/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodysalem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodysalem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodysalem/subscriptions",
      "organizations_url": "https://api.github.com/users/moodysalem/orgs",
      "repos_url": "https://api.github.com/users/moodysalem/repos",
      "events_url": "https://api.github.com/users/moodysalem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodysalem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-11T21:55:37Z",
    "updated_at": "2020-04-11T21:55:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, I've literally just seen this https://github.com/ethereum/EIPs/pull/2593",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/612521342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

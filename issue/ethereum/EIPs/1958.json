{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/1958",
  "id": 435506237,
  "node_id": "MDU6SXNzdWU0MzU1MDYyMzc=",
  "number": 1958,
  "title": "EIP-1958: Smart contract functions payable in tokens",
  "user": {
    "login": "ramvi",
    "id": 877417,
    "node_id": "MDQ6VXNlcjg3NzQxNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/877417?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ramvi",
    "html_url": "https://github.com/ramvi",
    "followers_url": "https://api.github.com/users/ramvi/followers",
    "following_url": "https://api.github.com/users/ramvi/following{/other_user}",
    "gists_url": "https://api.github.com/users/ramvi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ramvi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ramvi/subscriptions",
    "organizations_url": "https://api.github.com/users/ramvi/orgs",
    "repos_url": "https://api.github.com/users/ramvi/repos",
    "events_url": "https://api.github.com/users/ramvi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ramvi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-04-21T12:45:26Z",
  "updated_at": "2021-12-04T20:12:40Z",
  "closed_at": "2021-12-04T20:12:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\r\neip: 1958\r\ntitle: Smart contract functions payable in tokens\r\nauthor: Jon Ramvi <jon@blockchangers.com>\r\nstatus: Draft\r\ntype: Standards Track\r\ncategory Core\r\ncreated: 2019-04-21\r\n```\r\n\r\n## Simple Summary\r\nDescription of smart contracts being able to accept payment in ERC-20 tokens.\r\n\r\n## Abstract\r\nThe following describes changes to the payable keyword in smart contracts so that payments can be made in ERC-20 tokens.\r\n\r\n## Motivation\r\nThere's a clear divide between the first-class citizen currency ETH and tokens. Many proposals have been made to make ERC-20 tokens first-class citizens. This proposal is only about acknowledging ERC-20 tokens at the base layer. This proposal is not about accepting ERC-20 tokens for gas.\r\n\r\nThe 'atomicness' and finality of Ethereum payable methods are very slick. In a couple of lines, you're able to accept payment. The payment in itself is the receipt, and can also represent what you bought, which in today's web 2.0 are three different things that need to match up. \r\n\r\nThis functionality is however only available for payments in ether. Hence, I propose we support the same easy 'atomicness' with stablecoins and other tokens. \r\n\r\n## Specification\r\nThe proposal is for the contract to define what payment's it accepts. \r\n\r\n```solidity\r\nDAI(\"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359\");\r\nfunction method() public payable(DAI, ether);\r\n```\r\n\r\n## Rationale\r\nSay you want to create a ticketing system which accepts the stablecoin DAI. The solution with all necessary security can be built with 21 lines of code and includes a solution for the second-hand market meaning these 21 lines of code includes more secure functionality than giants like TicketMaster.\r\n\r\n```solidity\r\ncontract JaycTickets20200101NYC {\r\n\r\n    uint numTickets;\r\n    mapping (address => bool) ticketsSold;\r\n    DAI = DAI(\"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359\");\r\n    \r\n    constructor(uint _numTickets) internal {\r\n        numTickets = _numTickets;\r\n    }\r\n\r\n    function buyTicket() payable(DAI) public {\r\n        require(msg.value == 100 DAI);\r\n        ticketsSold[msg.sender] = true;\r\n    }\r\n\r\n    function transfer(address _to) public {\r\n        require(ticketsSold[msg.sender]);\r\n        ticketsSold[msg.sender] = false;\r\n        ticketsSold[_to] = true;\r\n    }\r\n}\r\n```\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/1958/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/485495829",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-485495829",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 485495829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTQ5NTgyOQ==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-22T18:02:00Z",
    "updated_at": "2019-04-22T18:02:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "    require(msg.value == 100 DAI);\r\n\r\nBy design, `msg.value` is an amount of wei transferred by the transaction. It does not represent an ERC20 value.\r\n\r\nIf you do an ERC20 transfer, the ERC20 contract is the one receiving the transaction and updating its internal storage to account for the ownership change (of fungible tokens). The new owner does NOT receive any transaction. This is why you should not transfer ERC20 to a contract, but rather approve the contract and then ask the contract to do a transferFrom.\r\n\r\nI doubt your proposal is even remotely applicable to ERC20 without any additional features (callback to the receiver)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/485495829/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/485557542",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-485557542",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 485557542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTU1NzU0Mg==",
    "user": {
      "login": "tjayrush",
      "id": 5417918,
      "node_id": "MDQ6VXNlcjU0MTc5MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5417918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tjayrush",
      "html_url": "https://github.com/tjayrush",
      "followers_url": "https://api.github.com/users/tjayrush/followers",
      "following_url": "https://api.github.com/users/tjayrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/tjayrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tjayrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tjayrush/subscriptions",
      "organizations_url": "https://api.github.com/users/tjayrush/orgs",
      "repos_url": "https://api.github.com/users/tjayrush/repos",
      "events_url": "https://api.github.com/users/tjayrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tjayrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-22T21:23:17Z",
    "updated_at": "2019-04-22T21:23:17Z",
    "author_association": "NONE",
    "body": "I have no comment (yet) on this proposal, but I do think it would be improved if you referenced some of the \"many other proposals\" you mention here:\r\n\r\n> Many proposals have been made to make ERC-20 tokens first-class citizens.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/485557542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/491557089",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-491557089",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 491557089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTU1NzA4OQ==",
    "user": {
      "login": "PhABC",
      "id": 9306422,
      "node_id": "MDQ6VXNlcjkzMDY0MjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9306422?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PhABC",
      "html_url": "https://github.com/PhABC",
      "followers_url": "https://api.github.com/users/PhABC/followers",
      "following_url": "https://api.github.com/users/PhABC/following{/other_user}",
      "gists_url": "https://api.github.com/users/PhABC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PhABC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PhABC/subscriptions",
      "organizations_url": "https://api.github.com/users/PhABC/orgs",
      "repos_url": "https://api.github.com/users/PhABC/repos",
      "events_url": "https://api.github.com/users/PhABC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PhABC/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-12T01:39:00Z",
    "updated_at": "2019-05-12T01:39:19Z",
    "author_association": "CONTRIBUTOR",
    "body": ">  This proposal is only about acknowledging ERC-20 tokens at the base layer.\r\n\r\nBeing an author of ERC-1155 token standard, I am obviously biased, but I consider the ERC-20 standard ill constructed and would not support ERC-20 at the base layer. In fact, I would not support ERC-1155 either, as the base layer should not be modified based on the current hottest trend. Just my humble opinion.\r\n\r\nAs an alternative, by changing a bit how contracts are written, one can support calling functions on contract _while_ passing ERC-721 and ERC-1155 tokens, via the `safeTransferFrom()` methods in both standards. One would need to pass the function call signature + encoded arguments in the `data` field of the `safeTransferFrom()` method. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/491557089/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/529376569",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-529376569",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 529376569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTM3NjU2OQ==",
    "user": {
      "login": "ramvi",
      "id": 877417,
      "node_id": "MDQ6VXNlcjg3NzQxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/877417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ramvi",
      "html_url": "https://github.com/ramvi",
      "followers_url": "https://api.github.com/users/ramvi/followers",
      "following_url": "https://api.github.com/users/ramvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ramvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ramvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ramvi/subscriptions",
      "organizations_url": "https://api.github.com/users/ramvi/orgs",
      "repos_url": "https://api.github.com/users/ramvi/repos",
      "events_url": "https://api.github.com/users/ramvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ramvi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-09T09:16:16Z",
    "updated_at": "2019-09-09T09:16:16Z",
    "author_association": "NONE",
    "body": "@Amxx Thanks for your feedback. I propose: \r\n\r\n1. To represent DAI in the same way you can write `1 ether` (cite)[https://solidity.readthedocs.io/en/develop/units-and-global-variables.html?highlight=transfer#ether-units] you can write `1 DAI` meaning 1 + DAI's `decimals` variable\r\n2. To represent DAI it's smallest / atomic form, you can write `100000000 DAI.decimals`\r\n\r\n> I doubt your proposal is even remotely applicable\r\n\r\nWhy? My proposal is the change the EVM to understand and write directly to ERC20 contracts, to make them first-class citizens on the platform. Why would you need a transaction to the contract or a callback?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/529376569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/529397029",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-529397029",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 529397029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTM5NzAyOQ==",
    "user": {
      "login": "ramvi",
      "id": 877417,
      "node_id": "MDQ6VXNlcjg3NzQxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/877417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ramvi",
      "html_url": "https://github.com/ramvi",
      "followers_url": "https://api.github.com/users/ramvi/followers",
      "following_url": "https://api.github.com/users/ramvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ramvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ramvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ramvi/subscriptions",
      "organizations_url": "https://api.github.com/users/ramvi/orgs",
      "repos_url": "https://api.github.com/users/ramvi/repos",
      "events_url": "https://api.github.com/users/ramvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ramvi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-09T10:04:46Z",
    "updated_at": "2019-09-09T10:05:05Z",
    "author_association": "NONE",
    "body": "@tjayrush\r\n> I have no comment (yet) on this proposal, but I do think it would be improved if you referenced some of the \"many other proposals\" you mention here\r\n\r\n* https://github.com/status-im/status-react/issues/2464",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/529397029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705440",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-974705440",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 974705440,
    "node_id": "IC_kwDOAq426M46GNMg",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-11-20T20:12:09Z",
    "updated_at": "2021-11-20T20:12:09Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086379",
    "html_url": "https://github.com/ethereum/EIPs/issues/1958#issuecomment-986086379",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1958",
    "id": 986086379,
    "node_id": "IC_kwDOAq426M46xnvr",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-04T20:12:39Z",
    "updated_at": "2021-12-04T20:12:39Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

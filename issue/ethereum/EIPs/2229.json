{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/2229",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/2229",
  "id": 477070988,
  "node_id": "MDU6SXNzdWU0NzcwNzA5ODg=",
  "number": 2229,
  "title": "EIP-2229: Ping Interface",
  "user": {
    "login": "nachomazzara",
    "id": 7549152,
    "node_id": "MDQ6VXNlcjc1NDkxNTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7549152?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nachomazzara",
    "html_url": "https://github.com/nachomazzara",
    "followers_url": "https://api.github.com/users/nachomazzara/followers",
    "following_url": "https://api.github.com/users/nachomazzara/following{/other_user}",
    "gists_url": "https://api.github.com/users/nachomazzara/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nachomazzara/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nachomazzara/subscriptions",
    "organizations_url": "https://api.github.com/users/nachomazzara/orgs",
    "repos_url": "https://api.github.com/users/nachomazzara/repos",
    "events_url": "https://api.github.com/users/nachomazzara/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nachomazzara/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-08-05T21:41:52Z",
  "updated_at": "2021-12-04T20:12:09Z",
  "closed_at": "2021-12-04T20:12:09Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "```\r\neip: 2229\r\ntitle: EIP-2229: Ping Interface\r\nauthor: Ignacio Mazzara <nachomazzara@gmail.com>\r\nstatus: Active\r\ntype: Standards Track\r\ncategory: ERC\r\ncreated: 2019-08-03\r\n```\r\n\r\n## Abstract\r\nAlmost every asset created by Ethereum smart contracts has owners. Owners can lose their keys, but not only. We believe that by having a way to re-assign inactive assets, new owners can continue creating value from them. With this proposal, we want to standardize a ping mechanism for Ethereum smart contracts that can be used for all sorts of assets.\r\n\r\n## Motivation\r\nThis EIP is motivated by the need to reduce the impact of having inactive assets. There are a lot of crypto-collectibles/games with tokens that can interact together increasing the user experience. \r\n\r\nFor example: \r\n- Decentraland is a virtual world divided by parcels (ERC-721), each parcel can have content. If for some reason, a parcel owner lost his keys, the parcel can not be updated anymore. In case it has never had content, as a Decentraland's user you will see an empty parcel.\r\n\r\n- Other games like CryptoKitties, MyCryptoHeroes, etc have assets that can interact together. In case of a loss, the experience could be limited.\r\n\r\nNo existing EIPs for ping assets found.\r\n\r\nThis EIP proposes a light-weight interface for keeping active assets and reassigning inactive ones. This abstraction layer can sit on top of standards like ERC-721 or others where an inactive asset can diminish and limit the user experience.\r\n\r\n\r\n## Specification\r\nThe interface will expose two simple methods to be implemented as desired to include the mechanism on an Ethereum smart contract.\r\n\r\n```solidity\r\npragma solidity >=0.4.22 <0.6.0;\r\n\r\n\r\n/**\r\n * @title Ping interface. EIP-2227\r\n */\r\ninterface IPing {\r\n    /**\r\n     * @dev Ping your account.\r\n     */\r\n    function ping() external;\r\n    \r\n    /**\r\n     * @dev Check if a token is active or not.\r\n     * @param _tokenId - token id to check.\r\n     * @return Whether the token is active or not.\r\n     */\r\n    function isActive(uint256 _tokenId) external returns (bool);\r\n    \r\n    event Ping(address indexed _owner);\r\n}\r\n```\r\n\r\nInterface ID\r\n```solidity\r\n bytes4 internal constant _INTERFACE_ID_PING = 0xde9963bd;\r\n /*\r\n 0xde9963bd === \r\n    bytes4(keccak256('ping()')) ^\r\n    bytes4(keccak256('isActive(uint256)'));\r\n */\r\n ```\r\n\r\n### Possible usage\r\nThis is a possible and super simple implementation of each method. They should have the desired business logic.\r\n\r\n#### Ping\r\nAddress level methods used to set sort kind of last active timestamp.\r\n```solidity\r\nfunction ping() public {\r\n    lastActive[_owner] = block.timestamp;\r\n    emit Ping(_owner);\r\n}\r\n```\r\n\r\n#### isActive\r\nCheck if a token is active. For existing assets, a grace period can be used to do the math.\r\n**Disclaimer:** The `block.timestamp` is used knowing that miners could manipulate it. Moreover, as it is in seconds and refers to dates, I do not imagine a real case where an arithmetic overflow occurs.\r\n\r\n```solidity\r\nuint256 activePeriod = 4 weeks * 12; // One year\r\n\r\nfunction isActive(uint256 _tokenId) public returns (bool) {\r\n    address owner = ownerOf(_tokenId);\r\n    return lastActive[owner].add(activePeriod) >= block.timestamp;\r\n}\r\n```\r\n\r\n### Optional Extension\r\nThis interface can be extended to manage how inactive assets will behave.\r\n\r\n#### Ping another account\r\nPing someone else's account. It can be used within a role system.\r\n```solidity\r\n/**\r\n * @dev Ping someone else's account.\r\n * @param _owner - desired account to ping.\r\n */\r\nfunction ping(address _owner) public {\r\n    require(hasAccess(_owner), \"The sender does not have access\");\r\n    ping(_owner);\r\n}\r\n```\r\n\r\n#### reActivate\r\nAssign a new owner to an inactive token.\r\n```solidity\r\n /**\r\n * @dev Assign a new owner for an inactive token.\r\n * @param _newOwner - new owner for the token.\r\n * @param _tokenId - token id.\r\n */\r\nfunction reActivate(address _newOwner, uint256 _tokenId) public {\r\n    require(!isActive(_tokenId), \"The token is active\");\r\n    ownerOf[_tokenId] = _newOwner;    \r\n    lastActive[_newOwner] = block.timestamp;\r\n}\r\n```\r\n@nachomazzara, @eordano and @decentraland team",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/2229/reactions",
    "total_count": 11,
    "+1": 10,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705356",
    "html_url": "https://github.com/ethereum/EIPs/issues/2229#issuecomment-974705356",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229",
    "id": 974705356,
    "node_id": "IC_kwDOAq426M46GNLM",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-11-20T20:11:39Z",
    "updated_at": "2021-11-20T20:11:39Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086296",
    "html_url": "https://github.com/ethereum/EIPs/issues/2229#issuecomment-986086296",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/2229",
    "id": 986086296,
    "node_id": "IC_kwDOAq426M46xnuY",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-04T20:12:08Z",
    "updated_at": "2021-12-04T20:12:08Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/157",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/157/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/157/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/157/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/157",
  "id": 183230689,
  "node_id": "MDU6SXNzdWUxODMyMzA2ODk=",
  "number": 157,
  "title": "Dynamic gas pricing for opcodes (miner decided opcode pricing)",
  "user": {
    "login": "BlameByte",
    "id": 6662327,
    "node_id": "MDQ6VXNlcjY2NjIzMjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6662327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BlameByte",
    "html_url": "https://github.com/BlameByte",
    "followers_url": "https://api.github.com/users/BlameByte/followers",
    "following_url": "https://api.github.com/users/BlameByte/following{/other_user}",
    "gists_url": "https://api.github.com/users/BlameByte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BlameByte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BlameByte/subscriptions",
    "organizations_url": "https://api.github.com/users/BlameByte/orgs",
    "repos_url": "https://api.github.com/users/BlameByte/repos",
    "events_url": "https://api.github.com/users/BlameByte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BlameByte/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2016-10-15T20:16:47Z",
  "updated_at": "2022-01-22T04:13:45Z",
  "closed_at": "2022-01-22T04:13:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The current pricing scheme for opcodes is not in a good state as is shown by the attacks and the hard fork, there needs to be something more decentralized and faster reacting to both attacks and hardware / software improvements.\n\nHaving a hard fork each time these opcodes require changing is not sustainable and will require setting the opcodes higher than they should and likely will mean they never get reduced even with speed improvements.\n\nThe solution I have allows miners (who create blocks) decide what these opcodes should ultimately cost, allowing both quick action to both opcode price increase or decrease and allowing it to be decentralized.\n\nProposal A\n- Target a block in the future\n- The price the opcode the miner wants to be (within the range*)\n- Taking the average price of what the miners set their price over 64 blocks\n- The range is limited to 2x increase of decrease of current price, minimum limit is the default cost of opcode, if default cost was 0 and it increases, it may never return to 0.\n\nProposal B\n- Target a block in the future\n- Factor in the time it took to process the transactions into the block\n- Weigh in the amount of times each opcode was used and the time it took to process the block\n- Every 16 blocks adjust the pricing so it matches the amount of time it took for each opcode\n\nProposal C\n- Target a block in the future\n- Record the amount of times an opcode is used over 32 blocks\n- If a certain opcode is used very often and processing is taking longer than expected increase the gas cost of that opcode\n- If the opcode stops being used frequently and processing remains higher reduce price of opcode and increase price of another highly used opcode\n- If the opcode continues to be used but the processing lowers reduces dramatically the opcode price back in between new and old value.\n\nProposal A is more simple and ultimately gives the decision to the miners to set it to whatever they wish similar to block limit. It is slower than the other two methods and requires miners to change their pricing to react to attacks / badly priced opcodes.\nThere is a WIP of this proposal which shows an incomplete implementation of how it would look like in go-ethereum: https://github.com/BlameByte/go-ethereum/commit/c15b516d47e16a169a3d7d59a03a59fb72a4b6cc\n\nProposal B takes the approach of automatically timing each opcode but to keep consensus (faster or slower machines) we rely on the speed of the miner, but this is across the past 16 blocks so it will not be any one miner. It is also the fastest reacting to an attack.\n\nProposal C is likely the most complicated and is also automatic. It is primarily to protect against attacks as  if there are opcodes that are being used frequently to slow down the network it will increase the costs associated to them. It will also recover the prices of opcodes after they are used less frequently.\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/157/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/157/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/254116348",
    "html_url": "https://github.com/ethereum/EIPs/issues/157#issuecomment-254116348",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/157",
    "id": 254116348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDExNjM0OA==",
    "user": {
      "login": "gcolvin",
      "id": 16827129,
      "node_id": "MDQ6VXNlcjE2ODI3MTI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/16827129?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gcolvin",
      "html_url": "https://github.com/gcolvin",
      "followers_url": "https://api.github.com/users/gcolvin/followers",
      "following_url": "https://api.github.com/users/gcolvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/gcolvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gcolvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gcolvin/subscriptions",
      "organizations_url": "https://api.github.com/users/gcolvin/orgs",
      "repos_url": "https://api.github.com/users/gcolvin/repos",
      "events_url": "https://api.github.com/users/gcolvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gcolvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-17T05:34:14Z",
    "updated_at": "2016-10-17T05:34:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'd be happy if some variation on your proposals can be made to work at the protocol level, but that's not my expertise.  At the EVM level one problem is the need to count how often opcodes are used.  It will slow down an EVM, and likely force it to operate in an instrumented mode where the relative costs might not be the same as in normal operation.  E.g. a JIT might have to disable optimizations and insert special counters.  This can likely be mitigated by moving the counting to an analysis phase after the block is processed, by sampling like profilers do, or other such tricks, depending...\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/254116348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/255154046",
    "html_url": "https://github.com/ethereum/EIPs/issues/157#issuecomment-255154046",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/157",
    "id": 255154046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTE1NDA0Ng==",
    "user": {
      "login": "nicksavers",
      "id": 7483198,
      "node_id": "MDQ6VXNlcjc0ODMxOTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7483198?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicksavers",
      "html_url": "https://github.com/nicksavers",
      "followers_url": "https://api.github.com/users/nicksavers/followers",
      "following_url": "https://api.github.com/users/nicksavers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicksavers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicksavers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicksavers/subscriptions",
      "organizations_url": "https://api.github.com/users/nicksavers/orgs",
      "repos_url": "https://api.github.com/users/nicksavers/repos",
      "events_url": "https://api.github.com/users/nicksavers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicksavers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-20T16:17:22Z",
    "updated_at": "2016-10-20T16:17:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree on making changes in the gas cost flexible as part of the protocol, because it depends on the performance of client implementations and cost of hardware components relative to each other and I expect more changes to come in the future.\n\nInstead of building a separate block-based voting system for this in the protocol, if the gas cost was to be stored in a contract it could be voted on with a proof-of-stake model or perhaps even using a prediction market and go all futarchy-style, if that proves to work as advertised.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/255154046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1007875606",
    "html_url": "https://github.com/ethereum/EIPs/issues/157#issuecomment-1007875606",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/157",
    "id": 1007875606,
    "node_id": "IC_kwDOAq426M48EvYW",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-01-08T03:14:09Z",
    "updated_at": "2022-01-08T03:14:09Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1007875606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1019042002",
    "html_url": "https://github.com/ethereum/EIPs/issues/157#issuecomment-1019042002",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/157",
    "id": 1019042002,
    "node_id": "IC_kwDOAq426M48vVjS",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-01-22T04:13:45Z",
    "updated_at": "2022-01-22T04:13:45Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1019042002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/EIPs/issues/1761",
  "repository_url": "https://api.github.com/repos/ethereum/EIPs",
  "labels_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761/comments",
  "events_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761/events",
  "html_url": "https://github.com/ethereum/EIPs/issues/1761",
  "id": 412230972,
  "node_id": "MDU6SXNzdWU0MTIyMzA5NzI=",
  "number": 1761,
  "title": "ERC-1761 Scoped Approval Interface",
  "user": {
    "login": "coinfork",
    "id": 2774008,
    "node_id": "MDQ6VXNlcjI3NzQwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2774008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/coinfork",
    "html_url": "https://github.com/coinfork",
    "followers_url": "https://api.github.com/users/coinfork/followers",
    "following_url": "https://api.github.com/users/coinfork/following{/other_user}",
    "gists_url": "https://api.github.com/users/coinfork/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/coinfork/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/coinfork/subscriptions",
    "organizations_url": "https://api.github.com/users/coinfork/orgs",
    "repos_url": "https://api.github.com/users/coinfork/repos",
    "events_url": "https://api.github.com/users/coinfork/events{/privacy}",
    "received_events_url": "https://api.github.com/users/coinfork/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2328627851,
      "node_id": "MDU6TGFiZWwyMzI4NjI3ODUx",
      "url": "https://api.github.com/repos/ethereum/EIPs/labels/stale",
      "name": "stale",
      "color": "000000",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-02-20T03:43:44Z",
  "updated_at": "2022-08-02T04:15:03Z",
  "closed_at": "2021-12-04T20:13:01Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "```\r\n---\r\neip: 1761\r\ntitle: ERC-1761 Scoped Approval Interface\r\nauthor: Witek Radomski <witek@enjin.com>, Andrew Cooke <andrew@enjin.com>, James Therien <james@enjin.com>, Eric Binet <eric@enjin.com>\r\ntype: Standards Track\r\ncategory: ERC\r\nstatus: Draft\r\ncreated: 2019-02-18\r\ndiscussions-to: https://github.com/ethereum/EIPs/issues/1761\r\nrequires: 165\r\n---\r\n```\r\n\r\n## Simple Summary\r\n\r\nA standard interface to permit restricted approval in token contracts by defining \"scopes\" of one or more Token IDs.\r\n\r\n## Abstract\r\n\r\nThis interface is designed for use with token contracts that have an \"ID\" domain, such as ERC-1155 or ERC-721. This enables restricted approval of one or more Token IDs to a specific \"scope\". When considering a smart contract managing tokens from multiple different domains, it makes sense to limit approvals to those domains. Scoped approval is a generalization of this idea. Implementors can define scopes as needed.\r\n\r\nSample use cases for scopes:\r\n\r\n* A company may represent it's fleet of vehicles on the blockchain and it could create a scope for each regional office.\r\n* Game developers could share an [ERC-1155](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md) contract where each developer manages tokens under a specified scope.\r\n* Tokens of different value could be split into separate scopes. High-value tokens could be kept in smaller separate scopes while low-value tokens might be kept in a shared scope. Users would approve the entire low-value token scope to a third-party smart contract, exchange, or other application without concern about losing their high-value tokens in the event of a problem.\r\n\r\n## Motivation\r\n\r\nIt may be desired to restrict approval in some applications. Restricted approval can prevent losses in cases where users do not audit the contracts they're approving. No standard API is supplied to manage scopes as this is implementation specific. Some implementations may opt to offer a fixed number of scopes, or assign a specific set of scopes to certain types. Other implementations may open up scope configuration to its users and offer methods to create scopes and assign IDs to them.\r\n\r\n# Specification\r\n\r\n```solidity\r\npragma solidity ^0.5.2;\r\n\r\n/**\r\n    Note: The ERC-165 identifier for this interface is 0x30168307.\r\n*/\r\ninterface ScopedApproval {\r\n    /**\r\n        @dev MUST emit when approval changes for scope.\r\n    */\r\n    event ApprovalForScope(address indexed _owner, address indexed _operator, bytes32 indexed _scope, bool _approved);\r\n\r\n    /**\r\n        @dev MUST emit when the token IDs are added to the scope.\r\n        By default, IDs are in no scope.\r\n        The range is inclusive: _idStart, _idEnd, and all IDs in between have been added to the scope.\r\n        _idStart must be lower than or equal to _idEnd.\r\n    */\r\n    event AddIdsToScope(uint256 indexed _idStart, uint256 indexed _idEnd, bytes32 indexed _scope);\r\n\r\n    /**\r\n        @dev MUST emit when the token IDs are removed from the scope.\r\n        The range is inclusive: _idStart, _idEnd, and all IDs in between have been removed from the scope.\r\n        _idStart must be lower than or equal to _idEnd.\r\n    */\r\n    event RemoveIdsFromScope(uint256 indexed _idStart, uint256 indexed _idEnd, bytes32 indexed _scope);\r\n\r\n    /** @dev MUST emit when a scope URI is set or changes.\r\n        URIs are defined in RFC 3986.\r\n        The URI MUST point a JSON file that conforms to the \"Scope Metadata JSON Schema\".\r\n    */\r\n    event ScopeURI(string _value, bytes32 indexed _scope);\r\n\r\n    /**\r\n        @notice     Returns the number of scopes that contain _id.\r\n        @param _id  The token ID\r\n        @return     The number of scopes containing the ID\r\n    */\r\n    function scopeCountForId(uint256 _id) public view returns (uint32);\r\n\r\n    /**\r\n        @notice             Returns a scope that contains _id.\r\n        @param _id          The token ID\r\n        @param _scopeIndex  The scope index to  query (valid values are 0 to scopeCountForId(_id)-1)\r\n        @return             The Nth scope containing the ID\r\n    */\r\n    function scopeForId(uint256 _id, uint32 _scopeIndex) public view returns (bytes32);\r\n\r\n    /**\r\n        @notice Returns a URI that can be queried to get scope metadata. This URI should return a JSON document containing, at least the scope name and description. Although supplying a URI for every scope is recommended, returning an empty string \"\" is accepted for scopes without a URI.\r\n        @param  _scope  The queried scope\r\n        @return         The URI describing this scope.\r\n    */\r\n    function scopeUri(bytes32 _scope) public view returns (string memory);\r\n\r\n    /**\r\n        @notice Enable or disable approval for a third party (\"operator\") to manage the caller's tokens in the specified scope.\r\n        @dev MUST emit the ApprovalForScope event on success.\r\n        @param _operator    Address to add to the set of authorized operators\r\n        @param _scope       Approval scope (can be identified by calling scopeForId)\r\n        @param _approved    True if the operator is approved, false to revoke approval\r\n    */\r\n    function setApprovalForScope(address _operator, bytes32 _scope, bool _approved) external;\r\n\r\n    /**\r\n        @notice Queries the approval status of an operator for a given owner, within the specified scope.\r\n        @param _owner       The owner of the Tokens\r\n        @param _operator    Address of authorized operator\r\n        @param _scope       Scope to test for approval (can be identified by calling scopeForId)\r\n        @return             True if the operator is approved, false otherwise\r\n    */\r\n    function isApprovedForScope(address _owner, address _operator, bytes32 _scope) public view returns (bool);\r\n}\r\n```\r\n\r\n## Scope Metadata JSON Schema\r\n\r\nThis schema allows for localization. `{id}` and `{locale}` should be replaced with the appropriate values by clients.\r\n\r\n```json\r\n{\r\n    \"title\": \"Scope Metadata\",\r\n    \"type\": \"object\",\r\n    \"required\": [\"name\"],\r\n    \"properties\": {\r\n        \"name\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Identifies the scope in a human-readable way.\",\r\n        },\r\n        \"description\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Describes the scope to allow users to make informed approval decisions.\",\r\n        },\r\n        \"localization\": {\r\n            \"type\": \"object\",\r\n            \"required\": [\"uri\", \"default\", \"locales\"],\r\n            \"properties\": {\r\n                \"uri\": {\r\n                    \"type\": \"string\",\r\n                    \"description\": \"The URI pattern to fetch localized data from. This URI should contain the substring `{locale}` which will be replaced with the appropriate locale value before sending the request.\"\r\n                },\r\n                \"default\": {\r\n                    \"type\": \"string\",\r\n                    \"description\": \"The locale of the default data within the base JSON\"\r\n                },\r\n                \"locales\": {\r\n                    \"type\": \"array\",\r\n                    \"description\": \"The list of locales for which data is available. These locales should conform to those defined in the Unicode Common Locale Data Repository (http://cldr.unicode.org/).\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Localization\r\n\r\nMetadata localization should be standardized to increase presentation uniformity across all languages. As such, a simple overlay method is proposed to enable localization. If the metadata JSON file contains a `localization` attribute, its content may be used to provide localized values for fields that need it. The `localization` attribute should be a sub-object with three attributes: `uri`, `default` and `locales`. If the string `{locale}` exists in any URI, it MUST be replaced with the chosen locale by all client software.\r\n\r\n## Rationale\r\n\r\nThe initial design was proposed as an extension to ERC-1155: [Discussion Thread - Comment 1](https://github.com/ethereum/EIPs/issues/1155#issuecomment-459505728). After some discussion: [Comment 2](https://github.com/ethereum/EIPs/issues/1155#issuecomment-460603439) and suggestions by the community to implement this approval mechanism in an external contract [Comment 3](https://github.com/ethereum/EIPs/issues/1155#issuecomment-461758755), it was decided that as an interface standard, this design would allow many different token standards such as ERC-721 and ERC-1155 to implement scoped approvals without forcing the system into all implementations of the tokens.\r\n\r\n### Metadata JSON\r\n\r\nThe Scope Metadata JSON Schema was added in order to support human-readable scope names and descriptions in more than one language.\r\n\r\n## References\r\n\r\n**Standards**\r\n- [ERC-1155 Multi Token Standard](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md)\r\n- [ERC-165 Standard Interface Detection](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md)\r\n- [JSON Schema](http://json-schema.org/)\r\n\r\n**Implementations**\r\n- [Enjin Coin](https://enjincoin.io) ([github](https://github.com/enjin))\r\n\r\n**Articles & Discussions**\r\n- [Github - Original Discussion Thread](https://github.com/ethereum/EIPs/issues/1761)\r\n- [Github - ERC-1155 Discussion Thread](https://github.com/ethereum/EIPs/issues/1155)\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/1761/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705500",
    "html_url": "https://github.com/ethereum/EIPs/issues/1761#issuecomment-974705500",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761",
    "id": 974705500,
    "node_id": "IC_kwDOAq426M46GNNc",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-11-20T20:12:34Z",
    "updated_at": "2021-11-20T20:12:34Z",
    "author_association": "NONE",
    "body": "There has been no activity on this issue for two months. It will be closed in a week if no further activity occurs. If you would like to move this EIP forward, please respond to any outstanding feedback or add a comment indicating that you have addressed all required feedback and are ready for a review.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/974705500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086442",
    "html_url": "https://github.com/ethereum/EIPs/issues/1761#issuecomment-986086442",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761",
    "id": 986086442,
    "node_id": "IC_kwDOAq426M46xnwq",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-12-04T20:13:00Z",
    "updated_at": "2021-12-04T20:13:00Z",
    "author_association": "NONE",
    "body": "This issue was closed due to inactivity. If you are still pursuing it, feel free to reopen it and respond to any feedback or request a review in a comment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/986086442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1201996360",
    "html_url": "https://github.com/ethereum/EIPs/issues/1761#issuecomment-1201996360",
    "issue_url": "https://api.github.com/repos/ethereum/EIPs/issues/1761",
    "id": 1201996360,
    "node_id": "IC_kwDOAq426M5HpQJI",
    "user": {
      "login": "jaho8",
      "id": 77815530,
      "node_id": "MDQ6VXNlcjc3ODE1NTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/77815530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaho8",
      "html_url": "https://github.com/jaho8",
      "followers_url": "https://api.github.com/users/jaho8/followers",
      "following_url": "https://api.github.com/users/jaho8/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaho8/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaho8/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaho8/subscriptions",
      "organizations_url": "https://api.github.com/users/jaho8/orgs",
      "repos_url": "https://api.github.com/users/jaho8/repos",
      "events_url": "https://api.github.com/users/jaho8/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaho8/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T04:15:02Z",
    "updated_at": "2022-08-02T04:15:02Z",
    "author_association": "NONE",
    "body": "{\r\n  \"to\": \"<checksummed address>\",\r\n  \"value\": 0, // Value in wei\r\n  \"data\": \"<0x prefixed hex string>\",\r\n  \"operation\": 0,  // 0 CALL, 1 DELEGATE_CALL\r\n  \"gasToken\": \"<checksummed address>\", // Token address (hold by the Safe) to be used as a refund to the sender, if `null` is Ether\r\n  \"safeTxGas\": 0,  // Max gas to use in the transaction\r\n  \"baseGas\": 0,  // Gast costs not related to the transaction execution (signature check, refund payment...)\r\n  \"gasPrice\": 0,  // Gas price used for the refund calculation\r\n  \"refundReceiver\": \"<checksummed address>\", //Address of receiver of gas payment (or `null` if tx.origin)\r\n  \"nonce\": 0,  // Nonce of the Safe, transaction cannot be executed until Safe's nonce is not equal to this nonce\r\n  \"contractTransactionHash\": \"string\",  // Contract transaction hash calculated from all the field\r\n  \"sender\": \"<checksummed address>\",  // Owner of the Safe proposing the transaction. Must match one of the signatures\r\n  \"signature\": \"<0x prefixed hex string>\",  // One or more ethereum ECDSA signatures of the `contractTransactionHash` as an hex string\r\n  \"origin\": \"string\"  // Give more information about the transaction, e.g. \"My Custom Safe app\"\r\n}",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/EIPs/issues/comments/1201996360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

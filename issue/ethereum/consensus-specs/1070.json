{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/1070",
  "id": 442750822,
  "node_id": "MDU6SXNzdWU0NDI3NTA4MjI=",
  "number": 1070,
  "title": "Edge case issue in crosslink processing ",
  "user": {
    "login": "mkalinin",
    "id": 1892772,
    "node_id": "MDQ6VXNlcjE4OTI3NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mkalinin",
    "html_url": "https://github.com/mkalinin",
    "followers_url": "https://api.github.com/users/mkalinin/followers",
    "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
    "organizations_url": "https://api.github.com/users/mkalinin/orgs",
    "repos_url": "https://api.github.com/users/mkalinin/repos",
    "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mkalinin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1170173759,
      "node_id": "MDU6TGFiZWwxMTcwMTczNzU5",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/phase1",
      "name": "phase1",
      "color": "F7C242",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-05-10T14:35:16Z",
  "updated_at": "2019-12-12T16:15:03Z",
  "closed_at": "2019-12-12T16:15:03Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Issue\r\nEncountered with crosslinks produced by committees of latest epoch slot.\r\n\r\n#### Chain setup\r\n```\r\nshards = 4\r\nslots  = 4\r\ncrosslinks[3] = (0 -> A)\r\n```\r\n\r\n#### Steps\r\n```\r\nepoch = 0\r\n  crosslink (A -> B) for shard 3 is fired\r\nepoch 0 -> 1 transition:\r\n  crosslinks[3] = (0 -> A), has not been updated\r\n\r\nepoch = 1\r\n  crosslink `A -> B` is added to state as pending\r\n  crosslink `A -> B'` for shard 3 is fired\r\nepoch 1 -> 2 transition:\r\n  crosslinks[3] = (A -> B), now B is wanted as parent crosslink\r\n  (A -> B') is rejected as its parent still refers to A\r\n  shard 3 committee got penalized\r\n```\r\n\r\n",
  "closed_by": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500243415",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-500243415",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 500243415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDI0MzQxNQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-09T20:40:13Z",
    "updated_at": "2019-06-09T20:40:13Z",
    "author_association": "MEMBER",
    "body": "Is this edge case still present? (Sorry, I'm not sure I understand all your notation.)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500243415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500428377",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-500428377",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 500428377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDQyODM3Nw==",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-10T14:03:52Z",
    "updated_at": "2019-06-10T14:03:52Z",
    "author_association": "MEMBER",
    "body": "Yes, this one is still present. And this particular issues refers to a case when two conflicting crosslinks are produced by attesters. I'll try to bring more clarity to it.\r\nAssume there is a chain with 4 slots per epoch and 4 shards (our default simulation):\r\n```\r\nslot 3:\r\n  A1: AttestationData[shard=3, target_epoch=0, previous_crosslink_root=db56114e, source_epoch=0]\r\n\r\nslot 4:\r\n  epoch transition 0 --> 1\r\n  new block with A1 proposed\r\n  A1 added to state\r\n  A2: AttestationData[shard=3, target_epoch=1, previous_crosslink_root=db56114e, source_epoch=0]\r\n\r\nslot 5:\r\n  new block with A2 proposed\r\n  A2 added to state\r\n\r\n...\r\n\r\nslot 8:\r\n  epoch transition 1 --> 2\r\n```\r\nAt the beginning of `1 --> 2` epoch transition state has two pending attestations `A1` and `A2` with same `shard`, `previous_crosslink_root` and `source_epoch` but different `target_epoch`. \r\n\r\n`process_crosslinks` handles slots in ascending order and first attestation it processes is `A1`. Thus, current crosslink for `shard 3` is set to `A1`.\r\n\r\nAfter that `A2` is discarded cause there is no more matching between its `previous_crosslink_root` and current crosslink root for `shard 3`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500428377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500436413",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-500436413",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 500436413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDQzNjQxMw==",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-10T14:26:22Z",
    "updated_at": "2019-06-10T14:26:22Z",
    "author_association": "MEMBER",
    "body": "Yet another issue related to crosslinks processing.\r\n`get_winning_crosslink_and_attesting_indices` relays on `state.current_crosslinks` which is updated by epoch transition.\r\nTherefore its result returned when crosslink is being processed may differ from result got an epoch later when reward for this crosslink is being calculated.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500436413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/501182238",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-501182238",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 501182238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTE4MjIzOA==",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-12T08:54:37Z",
    "updated_at": "2019-06-12T08:54:37Z",
    "author_association": "MEMBER",
    "body": "Will re-check this after an update to `v0.7.0`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/501182238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/502399665",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-502399665",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 502399665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjM5OTY2NQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-15T21:10:39Z",
    "updated_at": "2019-06-15T21:10:39Z",
    "author_association": "MEMBER",
    "body": "> `process_crosslinks` handles slots in ascending order and first attestation it processes is `A1`. Thus, current crosslink for `shard 3` is set to `A1`.\r\n\r\nA couple questions:\r\n\r\n1) When you write \"handles slots\", do you mean \"handles epochs\"?\r\n2) The code in `process_crosslinks` updates the crosslinks (i.e. `state.current_crosslinks[shard] = winning_crosslink`) under `for epoch in (get_previous_epoch(state), get_current_epoch(state)):`. This means that the winning crosslink when `epoch == get_current_epoch(state)` takes precedence over the winning crosslink when `epoch == get_previous_epoch(state)` because it is run after. As such I'm expecting `A2` to take precedence over `A1`.\r\n\r\n> Therefore its result returned when crosslink is being processed may differ from result got an epoch later when reward for this crosslink is being calculated.\r\n\r\nCan you expand on this? Are you saying that the incentivisation in `get_crosslink_deltas` is broken?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/502399665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/505770927",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-505770927",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 505770927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTc3MDkyNw==",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-26T08:15:22Z",
    "updated_at": "2019-06-26T08:15:22Z",
    "author_association": "MEMBER",
    "body": "> Are you saying that the incentivisation in `get_crosslink_deltas` is broken?\r\n\r\nYes. Let me share logs grabbed from our simulation, I hope it'll help to bring more clarity.\r\n\r\n#### Crosslink format\r\nLog represents crosslink in following format:\r\n```\r\nshard: {[start_epoch..end_epoch], parent_root <~ root}\r\n```\r\nTo identify roots it uses first eight symbols of its hexadecimal representation.\r\nFor example, crosslink message `1: {[1..2], cab378d7 <~ 0a592668}` reads as following:\r\n```\r\nshard = 1\r\nstart_epoch = 1\r\nend_epoch = 2\r\nparent_root = cab378d7\r\nroot = 0a592668\r\n```\r\n\r\n#### Simulation\r\n```\r\nspec: v0.7.1\r\nregistry size: 8\r\nSHARD_COUNT: 4\r\nSLOTS_PER_EPOCH: 4\r\n```\r\n_Note:_ slot specified in logs is a slot of crosslink creation; crosslinks are included on chain one slot later.\r\n```\r\nslot #0: v0, shard 0: {[0..0], c78009fd <~ 275d37ac}\r\nslot #0: v7, shard 0: {[0..0], c78009fd <~ 275d37ac}\r\nslot #1: v4, shard 1: {[0..0], c78009fd <~ a81cabce}\r\nslot #1: v3, shard 1: {[0..0], c78009fd <~ a81cabce}\r\nslot #2: v1, shard 2: {[0..0], c78009fd <~ 83974be1}\r\nslot #2: v2, shard 2: {[0..0], c78009fd <~ 83974be1}\r\nslot #3: v5, shard 3: {[0..0], c78009fd <~ ea585e86} // shard 3 crosslinks will be added\r\nslot #3: v6, shard 3: {[0..0], c78009fd <~ ea585e86} // to state after epoch transition\r\nEpoch transition 0 => 1:\r\nprev: [0: {[0..0], 00000000 <~ c78009fd}, 0: {[0..0], 00000000 <~ c78009fd}, 0: {[0..0], 00000000 <~ c78009fd}, 0: {[0..0], 00000000 <~ c78009fd}]\r\ncurr: [0: {[0..0], c78009fd <~ 275d37ac}, 1: {[0..0], c78009fd <~ a81cabce}, 2: {[0..0], c78009fd <~ 83974be1}, 0: {[0..0], 00000000 <~ c78009fd}]\r\n  Validators rewarded:  [] // rewards are not calculated\r\n  Validators penalized: []\r\n\r\nslot #4: v2, shard 3: {[0..1], c78009fd <~ fd1d95b9} // issue 1: we have pair of conflicting\r\nslot #4: v7, shard 3: {[0..1], c78009fd <~ fd1d95b9} // crosslinks with same parent_root\r\nslot #5: v1, shard 0: {[0..1], 275d37ac <~ 2f3a6cfb}\r\nslot #5: v6, shard 0: {[0..1], 275d37ac <~ 2f3a6cfb}\r\nslot #6: v3, shard 1: {[0..1], a81cabce <~ cab378d7}\r\nslot #6: v0, shard 1: {[0..1], a81cabce <~ cab378d7}\r\nslot #7: v5, shard 2: {[0..1], 83974be1 <~ cfc8c8f1}\r\nslot #7: v4, shard 2: {[0..1], 83974be1 <~ cfc8c8f1}\r\nEpoch transition 1 => 2:\r\nprev: [0: {[0..0], c78009fd <~ 275d37ac}, 1: {[0..0], c78009fd <~ a81cabce}, 2: {[0..0], c78009fd <~ 83974be1}, 0: {[0..0], 00000000 <~ c78009fd}]\r\ncurr: [0: {[0..1], 275d37ac <~ 2f3a6cfb}, 1: {[0..1], a81cabce <~ cab378d7}, 2: {[0..0], c78009fd <~ 83974be1}, 3: {[0..0], c78009fd <~ ea585e86}]\r\n  Validators rewarded: attestations:  [0,1,2,3,4,5,6,7] crosslinks:  [1,2,5,6]\r\n  Validators penalized: crosslinks:   [0,3,4,7]  \r\n\r\n// issue 2: 0 and 1 committees got penalized\r\n// cause 'curr' crosslinks used in rewards calculation were updated by epoch transition\r\n//\r\n// in other words 'get_winning_crosslink_and_attesting_indices' is not an invariant\r\n// before transition it would return [0: {[0..0], c78009fd <~ 275d37ac}, [0,7]]\r\n// after transition it returns [0: {[0..1], 275d37ac <~ 2f3a6cfb, []]\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/505770927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/565075083",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1070#issuecomment-565075083",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1070",
    "id": 565075083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTA3NTA4Mw==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-12T16:15:03Z",
    "updated_at": "2019-12-12T16:15:03Z",
    "author_association": "MEMBER",
    "body": "Crosslinks removed from phase 0 and very much reworked for phase 1. Edge case no longer exists :)\r\n\r\nclosing!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/565075083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/1995",
  "id": 664855976,
  "node_id": "MDU6SXNzdWU2NjQ4NTU5NzY=",
  "number": 1995,
  "title": "It seems that slashed validators may be selected to propose?",
  "user": {
    "login": "lucianyao",
    "id": 1046069,
    "node_id": "MDQ6VXNlcjEwNDYwNjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1046069?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucianyao",
    "html_url": "https://github.com/lucianyao",
    "followers_url": "https://api.github.com/users/lucianyao/followers",
    "following_url": "https://api.github.com/users/lucianyao/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucianyao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucianyao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucianyao/subscriptions",
    "organizations_url": "https://api.github.com/users/lucianyao/orgs",
    "repos_url": "https://api.github.com/users/lucianyao/repos",
    "events_url": "https://api.github.com/users/lucianyao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucianyao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1725628406,
      "node_id": "MDU6TGFiZWwxNzI1NjI4NDA2",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/phase0",
      "name": "phase0",
      "color": "c2e0c6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-07-24T01:12:52Z",
  "updated_at": "2020-07-24T14:04:13Z",
  "closed_at": "2020-07-24T14:04:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "At version[8e82ca5](https://github.com/ethereum/eth2.0-specs/tree/8e82ca5d1ad6d651ef3410552c4bc13c16325f63):\r\nit seems that a slashed validator can still be selected as a proposer? I wonder if  it is by design? ",
  "closed_by": {
    "login": "lucianyao",
    "id": 1046069,
    "node_id": "MDQ6VXNlcjEwNDYwNjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1046069?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucianyao",
    "html_url": "https://github.com/lucianyao",
    "followers_url": "https://api.github.com/users/lucianyao/followers",
    "following_url": "https://api.github.com/users/lucianyao/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucianyao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucianyao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucianyao/subscriptions",
    "organizations_url": "https://api.github.com/users/lucianyao/orgs",
    "repos_url": "https://api.github.com/users/lucianyao/repos",
    "events_url": "https://api.github.com/users/lucianyao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucianyao/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663519020",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1995#issuecomment-663519020",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995",
    "id": 663519020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzUxOTAyMA==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T12:41:17Z",
    "updated_at": "2020-07-24T12:41:17Z",
    "author_association": "MEMBER",
    "body": "There's a lot to it, but I think these are the most important bits:\r\n- If they are slashed within the same epoch, they still have their proposer slot (only if they had a proposer slot within that epoch to begin with), to not cause a sudden re-assignment of validators. Same thing for their assignment to committees. After a small piece of the system gets slashed, we don't want the complete system to shuffle everything around last-second.\r\n- If they are slashed, they will be forced to initiate an exit. They need to go through the exit-queue like others, and will not be able to gain any rewards, while suffering inactivity penalties while queued. So no free shortcuts out of the system for bad validators.\r\n- They are not allowed to put any blocks on chain, at any point, after being slashed. The block-header processing function aborts the state-transition if the proposer is slashed. See https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/beacon-chain.md#block-header",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663519020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663529155",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1995#issuecomment-663529155",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995",
    "id": 663529155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzUyOTE1NQ==",
    "user": {
      "login": "lucianyao",
      "id": 1046069,
      "node_id": "MDQ6VXNlcjEwNDYwNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1046069?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucianyao",
      "html_url": "https://github.com/lucianyao",
      "followers_url": "https://api.github.com/users/lucianyao/followers",
      "following_url": "https://api.github.com/users/lucianyao/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucianyao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucianyao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucianyao/subscriptions",
      "organizations_url": "https://api.github.com/users/lucianyao/orgs",
      "repos_url": "https://api.github.com/users/lucianyao/repos",
      "events_url": "https://api.github.com/users/lucianyao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucianyao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T13:07:14Z",
    "updated_at": "2020-07-24T13:07:14Z",
    "author_association": "NONE",
    "body": "ok, I got it, thank you. but what I am still confused are(sorry for that I probably don't comprehend the spec very well yet):\r\n1) the slashed validators possibly are able to get proposer slots for several coming epochs instead of one epoch? Since I think the forced exit epoch can be several rounds later than current epoch, and the proposer election does exclude the slashed one? And if true, the slots are wasted.\r\n2)regarding no.2 :the rewards, suppose validator V proposes a block at epoch E, and V is slashed at E+1, it seems that V can earn the \"inclusion delay\" bonus for his quick enough inclusion at E+1?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663529155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663539094",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1995#issuecomment-663539094",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995",
    "id": 663539094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzUzOTA5NA==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T13:29:52Z",
    "updated_at": "2020-07-24T13:29:52Z",
    "author_association": "MEMBER",
    "body": "> (sorry for that I probably don't comprehend the spec very well yet\r\n\r\nNo problem, ask as many questions as you like, having more external review is helpful!\r\n\r\n> 1) the slashed validators possibly are able to get proposer slots for several coming epochs instead of one epoch?\r\n\r\nYes, I was having doubts about that too when reviewing things for the first answer, but think the current state is ok. The chance is very small with a large validator registry, and at worst it results in empty slots for those rare proposals.\r\n\r\nChanging it would result in splitting the semantics of an \"active validator\" and one that is eligible for being selected as proposer. This increases the consensus complexity, but otherwise sounds reasonable. Right now there is at least a bias towards selecting proposers with a healthy effective balance (which only changes at epoch boundaries). See `compute_proposer_index`. So this decreases the chance of empty slots more, as slashed validators generally have a lower balance.\r\n\r\nIf we would filter on the `slashed` attribute, there may be different proposers depending on the view of the chain within the epoch. Making pre-computing (there is a little look-ahead within the epoch) of proposers more difficult.\r\n\r\nMaybe @djrtwo has some more insight, it's an interesting edge-case.\r\n\r\n> regarding no.2 :the rewards, suppose validator V proposes a block at epoch E, and V is slashed at E+1, it seems that V can earn the \"inclusion delay\" bonus for his quick enough inclusion at E+1?\r\n\r\nIf they earn an inclusion reward for proposing a block, in the epoch transition between E and E+1, that means that their block was included in the current chain, contributing to the faster inclusion of attestations. So even while they got slashed some time after rewarding them, it does not seem too bad. Maintaining a history and rolling back rewards selectively based on slashings would also increase consensus complexity a lot.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663539094/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663541515",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1995#issuecomment-663541515",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1995",
    "id": 663541515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzU0MTUxNQ==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T13:34:59Z",
    "updated_at": "2020-07-24T13:34:59Z",
    "author_association": "MEMBER",
    "body": "Updated title to better reflect what may be wrong, since the block-header processing at least disallows the actual block.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/663541515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

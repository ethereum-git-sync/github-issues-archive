{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/3460",
  "id": 1812298227,
  "node_id": "I_kwDOCOoGbc5sBXnz",
  "number": 3460,
  "title": "Consider increasing number of attnets",
  "user": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1295438707,
      "node_id": "MDU6TGFiZWwxMjk1NDM4NzA3",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/scope:networking",
      "name": "scope:networking",
      "color": "F596AA",
      "default": false,
      "description": ""
    },
    {
      "id": 1486925112,
      "node_id": "MDU6TGFiZWwxNDg2OTI1MTEy",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/scope:attestation-management",
      "name": "scope:attestation-management",
      "color": "D9CD90",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-07-19T16:28:52Z",
  "updated_at": "2023-12-07T21:27:51Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "One strategy to help mitigate the load of attestations on nodes is to actually split committees across multiple subnets.\r\n\r\nFor example -- split each committee across two subnets, thus doubling the total subnets from 64 to 128 in which the lower half of the committee is assigned to a different subnet than the upper half of the committee (ensuring aggregatability of each half). In such a design, you'd still need to assign the same number of target aggregators per subnet (rather than per committee), so the total load on the global aggregate attestation subnet would be 2x. Given that attnets load increases linearly with size of validator set while aggregate subnet has remained stable, the trade-off to put more load on the aggregate subnet is likely acceptable.\r\n\r\nNote, the above is just an example parametrization, you could even do a partial overlap, where you do 1.5x subnets per committee where some are split and some are not (evening out the disjoint load over many repeated epochs).\r\n\r\nThe obvious issue/downside with such a design is that without sufficient nodes on the network, you might either reduce the number of nodes per subnet to dangerous levels *or* you need to increase the attnets backbone subscription count to counteract it, which would still put a similar load on nodes albeit potentially helping by creating different meshes/paths.\r\n\r\nIf we had 10x the number of nodes on the network, I think such a strategy would be a no-brainer. Given our current node counts, it's unclear if this is a worthwhile path. That said, I've been sitting on this idea for a while and wanted to make sure others were aware given all of the validator-load discussions.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1643583842",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/3460#issuecomment-1643583842",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460",
    "id": 1643583842,
    "node_id": "IC_kwDOCOoGbc5h9xli",
    "user": {
      "login": "ppopth",
      "id": 631508,
      "node_id": "MDQ6VXNlcjYzMTUwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/631508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppopth",
      "html_url": "https://github.com/ppopth",
      "followers_url": "https://api.github.com/users/ppopth/followers",
      "following_url": "https://api.github.com/users/ppopth/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppopth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppopth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppopth/subscriptions",
      "organizations_url": "https://api.github.com/users/ppopth/orgs",
      "repos_url": "https://api.github.com/users/ppopth/repos",
      "events_url": "https://api.github.com/users/ppopth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppopth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T09:25:20Z",
    "updated_at": "2023-07-20T09:25:20Z",
    "author_association": "MEMBER",
    "body": "The reason that we don't want to increase the number of committees together with the number of subnets is because we don't want to do hard-fork, right?\r\n\r\nIf the hard-fork is not the issue, I think increasing the number of committees and subnets (which, in turn, will reduce the size of the committee) probably makes more sense than distributing the members of the committees across the subnets.\r\n\r\nThat is, setting `MAX_COMMITTEES_PER_SLOT` and `ATTESTATION_SUBNET_COUNT` to be 128 looks quite cleaner. You can just change the configurations rather than designing the p2p network.\r\n\r\nIn addition, I guess that the only reason we have committees is that we want to mitigate the load on the network, so doing multiple subnets per committee sounds like solving the problem that's already solved.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1643583842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1643911539",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/3460#issuecomment-1643911539",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460",
    "id": 1643911539,
    "node_id": "IC_kwDOCOoGbc5h_Blz",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T13:17:39Z",
    "updated_at": "2023-07-20T13:17:39Z",
    "author_association": "MEMBER",
    "body": "That would be a more straightforward way to do so, but would have one side effect -- it would double the total number of messages that have to be included on chain, as yuo wouldn't get the final aggregatability of the two halves of a committee. Not a death sentence, but then you'd want to consider things such as `MAX_ATTESTATIONS`\r\n\r\nGiven the way this affects subnet message validity, you'd have to do it at a specific coordination point (e.g. activate at a particular epoch), regardless of if you just target network values or get into the consensus values",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1643911539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1645183684",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/3460#issuecomment-1645183684",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460",
    "id": 1645183684,
    "node_id": "IC_kwDOCOoGbc5iD4LE",
    "user": {
      "login": "ppopth",
      "id": 631508,
      "node_id": "MDQ6VXNlcjYzMTUwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/631508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppopth",
      "html_url": "https://github.com/ppopth",
      "followers_url": "https://api.github.com/users/ppopth/followers",
      "following_url": "https://api.github.com/users/ppopth/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppopth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppopth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppopth/subscriptions",
      "organizations_url": "https://api.github.com/users/ppopth/orgs",
      "repos_url": "https://api.github.com/users/ppopth/repos",
      "events_url": "https://api.github.com/users/ppopth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppopth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T08:08:26Z",
    "updated_at": "2023-07-21T08:08:26Z",
    "author_association": "MEMBER",
    "body": "> it would double the total number of messages that have to be included on chain, as yuo wouldn't get the final aggregatability of the two halves of a committee\r\n\r\nThat makes sense.\r\n\r\nAnother question. Who will be the ones who aggregate the two halves? the block proposers, right?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1645183684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1648505874",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/3460#issuecomment-1648505874",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3460",
    "id": 1648505874,
    "node_id": "IC_kwDOCOoGbc5iQjQS",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T19:43:35Z",
    "updated_at": "2023-07-24T19:43:35Z",
    "author_association": "MEMBER",
    "body": "Yes, the block proposer would do any final aggregation. Note that block proposers already do some of this work to try to optimize any disparate attestations (both semi-aggregates and singles they may have seen) when packing a block",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1648505874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

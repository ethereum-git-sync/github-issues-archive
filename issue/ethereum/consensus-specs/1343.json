{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/1343",
  "id": 477744751,
  "node_id": "MDU6SXNzdWU0Nzc3NDQ3NTE=",
  "number": 1343,
  "title": "Transfers checklist",
  "user": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1170173759,
      "node_id": "MDU6TGFiZWwxMTcwMTczNzU5",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/phase1",
      "name": "phase1",
      "color": "F7C242",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-08-07T07:06:31Z",
  "updated_at": "2019-12-12T15:41:18Z",
  "closed_at": "2019-12-12T15:41:18Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "- [x] 0. **Move transfers**: Move transfers from `0_beacon-chain.md` to `1_beacon-chain-misc.md`. See #1323.\r\n- [ ] 1. **Harden recipient field**: Make `recipient` a `BLSPubkey` instead of a `ValidatorIndex`.\r\n- [ ] 2. **Improve replay protection**: Replace user-unfriendly slot-based replay protection (`assert state.slot == transfer.slot`) with one based on a `transfer_roots` list/vector in the `BeaconState` keeping track of recent transfer roots over many epochs.\r\n- [ ] 3. **Quantum-secure backup**: Redefine `withdrawal_credentials` to include a commitment to secrets (see #1342).",
  "closed_by": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/519285192",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-519285192",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 519285192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTI4NTE5Mg==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T22:01:35Z",
    "updated_at": "2019-08-07T22:01:35Z",
    "author_association": "MEMBER",
    "body": ">  3. Quantum-secure backup: Redefine withdrawal_credentials to include a commitment to secrets (see #1342).\r\n\r\nThis would imply supporting both current-style and new-style withdrawal credentials, right? Seems reasonable, as I do expect we'll see more types of withdrawal credentials (eg. authorize withdrawal direct to EE with pre-specified data only) in the future.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/519285192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/519466152",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-519466152",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 519466152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTQ2NjE1Mg==",
    "user": {
      "login": "dankrad",
      "id": 6130607,
      "node_id": "MDQ6VXNlcjYxMzA2MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dankrad",
      "html_url": "https://github.com/dankrad",
      "followers_url": "https://api.github.com/users/dankrad/followers",
      "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
      "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
      "organizations_url": "https://api.github.com/users/dankrad/orgs",
      "repos_url": "https://api.github.com/users/dankrad/repos",
      "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dankrad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T10:40:27Z",
    "updated_at": "2019-08-08T10:40:27Z",
    "author_association": "MEMBER",
    "body": "> This would imply supporting both current-style and new-style withdrawal credentials, right? Seems reasonable, as I do expect we'll see more types of withdrawal credentials (eg. authorize withdrawal direct to EE with pre-specified data only) in the future.\r\n\r\nI understood it more in the sense of supporting commitment to such a secret, so that protocol support could be introduced if necessary.\r\n\r\nWouldn't supporting arbitrary withdrawals require coding the credentials as a script in a VM?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/519466152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/520407297",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-520407297",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 520407297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDQwNzI5Nw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-12T12:37:07Z",
    "updated_at": "2019-08-12T15:00:03Z",
    "author_association": "MEMBER",
    "body": "> This would imply supporting both current-style and new-style withdrawal credentials, right?\r\n\r\nMy suggestion is to abandon current-style withdrawal credentials. One concrete possibility is to have a `credentials_root` defined as the `hash_tree_root` of\r\n\r\n```python\r\nclass Credentials(Container):\r\n    withdrawal_credentials: Bytes32  # 1 byte version prefix\r\n    quantum_credentials: Vector[Bytes32, 512]  # Lamport secrets\r\n```\r\n\r\nNotice that operations that authenticate `withdrawal_credentials` against  `credentials_root` need to supply `quantum_credentials_root` (i.e. a Merkle node as part of a Merkle path). I'm also tempted to avoid the 1-byte prefix hack:\r\n\r\n```python\r\nclass Credentials(Container):\r\n    version: Bytes1\r\n    withdrawal_credentials: Hash  # Unversioned\r\n    quantum_credentials: Vector[Bytes32, 512]\r\n```\r\n\r\nBy moving the 1-byte outside of `withdrawal_credentials` we allow the versioning to operate over `quantum_credentials`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/520407297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/521451306",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-521451306",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 521451306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ1MTMwNg==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T23:02:32Z",
    "updated_at": "2019-08-14T23:02:32Z",
    "author_association": "MEMBER",
    "body": "A few more thoughts:\r\n\r\n1) We may be able to stick with the current `withdrawal_credentials` if the convention is that the BLS private key for the withdrawal pubkey is derived from the `hash_tree_root` of `quantum_credentials` of type `Vector[Bytes32, 512]`. One disadvantage here is that revealing the quantum root also reveals the BLS private key. Another disadvantage is that it's no longer MPC-friendly to generate the withdrawal pubkey (see also point 2).\r\n2) We want `quantum_credentials` to be reasonably MPC-friendly. Making elements of `quantum_credentials` be independently-generated SHA256 outputs means that computing `hash_tree_root(quantum_credentials)` can be done in the clear, and that `quantum_credentials` itself can be generated with 512 parallel secure evaluations of SHA256.\r\n3) It makes sense for the `version` byte to cover *both* the `withdrawal_credentials` and `quantum_credentials`. Indeed, we may want to allow an MPC-friendlier hash function (e.g. a STARK-friendly hash function used elsewhere) at some point in the future.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/521451306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/521453223",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-521453223",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 521453223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ1MzIyMw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T23:11:49Z",
    "updated_at": "2019-08-14T23:11:49Z",
    "author_association": "MEMBER",
    "body": "Yet another way to stick with the current `withdrawal_credentials` is to add a `quantum_credentials` field to `DepositData` and call it a day. Indeed, thanks to `historical_roots` historical deposit data can be authenticated. The main disadvantage here is that it requires modifying the deposit contract bytecode.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/521453223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/565060660",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1343#issuecomment-565060660",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1343",
    "id": 565060660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTA2MDY2MA==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-12T15:41:18Z",
    "updated_at": "2019-12-12T15:41:18Z",
    "author_association": "MEMBER",
    "body": "Closing this issue for now as Transfers are to be added in some later (to be determined) phase",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/565060660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

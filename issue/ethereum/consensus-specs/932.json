{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/932",
  "id": 433571140,
  "node_id": "MDU6SXNzdWU0MzM1NzExNDA=",
  "number": 932,
  "title": "Do we want to avoid NP hard problems for implementers",
  "user": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1137720193,
      "node_id": "MDU6TGFiZWwxMTM3NzIwMTkz",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:discussion",
      "name": "general:discussion",
      "color": "F17C67",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-04-16T03:48:20Z",
  "updated_at": "2019-08-20T13:10:36Z",
  "closed_at": "2019-08-20T13:10:35Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The Sigmaprime people (@michaelsproul) are highlighting that there are NP hard problems for implementers for optimal validator behaviour. One example is inclusion of attestations in blocks. In a single block there can be multiple attestations corresponding to subsets of the same committee (this is because two partially-aggregated attestations cannot always be merged). In this instance, a protocol-level fix would be to only allow one single attestation per committee per block.\r\n\r\nQuestion: Is avoiding NP hard problems for implementers a design goal for the beacon chain?",
  "closed_by": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483845201",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-483845201",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 483845201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzg0NTIwMQ==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-16T21:11:36Z",
    "updated_at": "2019-04-16T21:11:36Z",
    "author_association": "MEMBER",
    "body": "There are plenty of tractable near-optimal solutions to NP hard problems.\r\n\r\nGiven that we have a bag of attestations of which a subset needs to go into blocks, I'm pretty sure even with removing double committees this problem is still NP hard. The domain is just smaller. I don't see how to avoid this being NP hard if the client wants to \"optimally\" pack a block where optimal is profit maximizing.\r\n\r\nIn short, I lean toward not attempting to remove NP hard problems in general but can approach them case by case. \r\n\r\nFor this one, I lean toward allowing adding double committees in an attempt to bring more information on chain quicker. Maybe we wait until testnets and more data to see if we want to do this. The 1-second slot testnet should demonstrate how bad partial aggregations might get",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483845201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483939259",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-483939259",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 483939259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzkzOTI1OQ==",
    "user": {
      "login": "dankrad",
      "id": 6130607,
      "node_id": "MDQ6VXNlcjYxMzA2MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dankrad",
      "html_url": "https://github.com/dankrad",
      "followers_url": "https://api.github.com/users/dankrad/followers",
      "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
      "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
      "organizations_url": "https://api.github.com/users/dankrad/orgs",
      "repos_url": "https://api.github.com/users/dankrad/repos",
      "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dankrad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T05:10:00Z",
    "updated_at": "2019-04-17T05:10:00Z",
    "author_association": "MEMBER",
    "body": "> There are plenty of tractable near-optimal solutions to NP hard problems.\r\n\r\nAt least to some of them. I agree with @djrtwo that this should be decided case by case. The relevant question is how good the P approximation to this problem is.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483939259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483944942",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-483944942",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 483944942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzk0NDk0Mg==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T05:43:22Z",
    "updated_at": "2019-04-17T05:43:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @dankrad: The relevant question is how good the P approximation to this problem is.\r\n\r\nFor including attestations in a block, I think the [Maximum Coverage Problem](https://en.wikipedia.org/wiki/Maximum_coverage_problem) is close, and the best possible approximation algorithm for MCP is a simple greedy algorithm with an approximation factor of 0.632. I've implemented it on a branch for Lighthouse.\r\n\r\n> @djrtwo: I'm pretty sure even with removing double committees this problem is still NP hard.\r\n\r\nI think it might not be, you could score each aggregate attestation by the number of rewards it will net you (the number of validators for which it will be the earliest attestation in the epoch), and then take the best attestations, one per committee. Because you know that the attestations you take don't overlap in their committees, you don't need to worry about whether including one attestation changes the score of another.\r\n\r\nThose two algorithms have similar runtimes, so maybe this is a moot point, and the ability to bundle multiple attestations per committee is worth keeping (i.e. leave it NP-Hard)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483944942/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484304977",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-484304977",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 484304977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDMwNDk3Nw==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T00:00:20Z",
    "updated_at": "2019-04-18T00:00:20Z",
    "author_association": "MEMBER",
    "body": "Another reason we would not want to prevent inclusion of multiple attestations from committees is that they might be attesting to different data, not just having mismatched aggregation. Even if the committee is attesting to a different head or shard block data, it might still contribute to on-chain finality and would be a loss to miss quick inclusion.\r\n\r\nAlso to note, the spec doesn't specify this as NP-hard. The client implementer wanting maximize profit makes it NP-hard :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484304977/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484309707",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-484309707",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 484309707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDMwOTcwNw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T00:25:14Z",
    "updated_at": "2019-04-18T00:25:34Z",
    "author_association": "MEMBER",
    "body": "> the spec doesn't specify this as NP-hard\r\n\r\nIs the validator doc part of the spec? :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484309707/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484320918",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-484320918",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 484320918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDMyMDkxOA==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T01:28:55Z",
    "updated_at": "2019-04-18T01:28:55Z",
    "author_association": "MEMBER",
    "body": "good question... forgot I wrote the following\r\n\r\n> To maximize profit, the validator should attempt to gather aggregate attestations that include singular attestations from the largest number of validators whose signatures from the same epoch have not previously been added on chain.\r\n\r\nnote, I said \"attempt\"!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484320918/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/523007207",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/932#issuecomment-523007207",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/932",
    "id": 523007207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzAwNzIwNw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-20T13:10:35Z",
    "updated_at": "2019-08-20T13:10:35Z",
    "author_association": "MEMBER",
    "body": "Closing this issue for now. I think we share an intuitive notion of what is \"acceptable\" NP-hard problem for implementers (e.g. one for which we have fast approximate algorithms). As it stands, I'm not aware of any non-acceptable NP-hard problem for implementers.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/523007207/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

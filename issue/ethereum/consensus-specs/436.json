{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/436",
  "id": 398748032,
  "node_id": "MDU6SXNzdWUzOTg3NDgwMzI=",
  "number": 436,
  "title": "committee shufflings take at least 2 epochs to change",
  "user": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1063043868,
      "node_id": "MDU6TGFiZWwxMDYzMDQzODY4",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:enhancement",
      "name": "general:enhancement",
      "color": "086788",
      "default": false,
      "description": "New feature or request"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-01-14T04:50:52Z",
  "updated_at": "2019-04-17T22:44:13Z",
  "closed_at": "2019-04-17T22:44:12Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Issue\r\nThe minimum time between \"validator registry changes\" is currently 2 epochs. This is due to the requirement that all shards of the current committees must be crosslinked before a change can occur. The committees at the end of the epoch would not be able to have their attestations included until the next epoch. Conversation about this issue can be found in [here in a pr](https://github.com/ethereum/eth2.0-specs/pull/408/files/69cd9047829f4c5d062e833a6f9fe11400c6268d#r247364592).\r\n\r\nWe are also delaying the registry change because of the way we are tracking `state.validator_registry_latest_change_slot` and conditioning moving forward upon finalizing past this point. This can be easily modified if come to a solution about the crosslinks.\r\n\r\nThis has a couple obvious effects on the beacon chain:\r\n* This adds additional latency between crossshard communications (especially when lower than ~8M eth validating and not all shards are represented in each shuffling).\r\n* This slows down the max rate of activations and exits by a factor of 2.",
  "closed_by": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/453901831",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/436#issuecomment-453901831",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436",
    "id": 453901831,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzkwMTgzMQ==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-14T04:52:11Z",
    "updated_at": "2019-01-14T04:52:11Z",
    "author_association": "MEMBER",
    "body": "From @vbuterin:\r\n\r\n> so here is one possibility: if the shards to be crosslinked are x....x+k, and only x.....x+i get crosslinked, then instead of moving the counter up by k, move it up by i\r\nand this rule would only be available in the one-epoch case",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/453901831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/467649896",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/436#issuecomment-467649896",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436",
    "id": 467649896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzY0OTg5Ng==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T22:58:05Z",
    "updated_at": "2019-02-26T22:58:05Z",
    "author_association": "MEMBER",
    "body": "After discussing, we are opting to leave as is. In the case where `> 8M` eth validating. All shards can be crosslinked each epoch so this becomes near a non-issue",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/467649896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/467651236",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/436#issuecomment-467651236",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436",
    "id": 467651236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzY1MTIzNg==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T23:02:33Z",
    "updated_at": "2019-02-26T23:02:33Z",
    "author_association": "MEMBER",
    "body": "This does bias some shards to be quicker to be crosslinked. \r\nA reasonable solution to keep the start shard of each shuffling moving even when crosslinking all shards per epoch is the following:\r\n```python\r\nstart_change = min(get_current_epoch_committee_count(state), SHARD_COUNT * (EPOCH_LENGTH - 1) // EPOCH_LENGTH))\r\nstate.current_shuffling_start_shard = (state.current_shuffling_start_shard + start_change) % SHARD_COUNT\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/467651236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484288840",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/436#issuecomment-484288840",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/436",
    "id": 484288840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDI4ODg0MA==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T22:44:12Z",
    "updated_at": "2019-04-17T22:44:12Z",
    "author_association": "MEMBER",
    "body": "committee shufflings change every epoch now",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484288840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/2065",
  "id": 701822520,
  "node_id": "MDU6SXNzdWU3MDE4MjI1MjA=",
  "number": 2065,
  "title": "Proposalâ€”limit the number of active validators to 2**20",
  "user": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1137720193,
      "node_id": "MDU6TGFiZWwxMTM3NzIwMTkz",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:discussion",
      "name": "general:discussion",
      "color": "F17C67",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-09-15T10:47:25Z",
  "updated_at": "2020-11-30T16:20:33Z",
  "closed_at": "2020-11-30T16:20:33Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "This issue is a proposal for discussion to limit the number of active validators to `MAX_ACTIVE_VALIDATORS = 2**20` (roughly 1m validators) instead of the current 2**22. Rationale:\r\n\r\n1) The enshrined limit would guarantee a saner upper bound on the resource usage of a validator node (itself largely dictated by the number of active validators).\r\n2) The enshrined limit would guarantee that the PoS inflation is no more than 1m ETH per year (making ETH-is-money folks happier).\r\n3) It feels unlikely the limit would be reached organically. Even if validating is extremely popular and the limit is reached, validators in the activation queue can be dequeued on a first-come first-served basis. This would modify the validator assumptions (e.g. honesty or honesty assumptions) to a \"rolling\" variant with a large window, not too dissimilar to the status quo.",
  "closed_by": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 2,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/692684174",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2065#issuecomment-692684174",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065",
    "id": 692684174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MjY4NDE3NA==",
    "user": {
      "login": "hwwhww",
      "id": 9263930,
      "node_id": "MDQ6VXNlcjkyNjM5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9263930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hwwhww",
      "html_url": "https://github.com/hwwhww",
      "followers_url": "https://api.github.com/users/hwwhww/followers",
      "following_url": "https://api.github.com/users/hwwhww/following{/other_user}",
      "gists_url": "https://api.github.com/users/hwwhww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hwwhww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hwwhww/subscriptions",
      "organizations_url": "https://api.github.com/users/hwwhww/orgs",
      "repos_url": "https://api.github.com/users/hwwhww/repos",
      "events_url": "https://api.github.com/users/hwwhww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hwwhww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-15T12:32:49Z",
    "updated_at": "2020-09-15T12:32:49Z",
    "author_association": "MEMBER",
    "body": "Is this proposal based on #2024?\r\nIn #2024, `MAX_ACTIVE_VALIDATORS` is an invariant of `MAX_VALIDATORS_PER_COMMITTEE * SLOTS_PER_EPOCH * INITIAL_ACTIVE_SHARDS = 2**11 * 2**5 * 2**6 = 2**22`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/692684174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/692723391",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2065#issuecomment-692723391",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065",
    "id": 692723391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MjcyMzM5MQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-15T13:42:58Z",
    "updated_at": "2020-09-15T13:42:58Z",
    "author_association": "MEMBER",
    "body": "> Is this proposal based on #2024?\r\n\r\nNope, it's pretty independent of that.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/692723391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/700362878",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2065#issuecomment-700362878",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065",
    "id": 700362878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDM2Mjg3OA==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-29T01:03:19Z",
    "updated_at": "2020-09-29T01:04:15Z",
    "author_association": "MEMBER",
    "body": "I think we would need to do a bit more than just a constant change.\r\n\r\n1) Actually limit the validator count (currently the limit is not even enforced). So we'd need to change\r\n\r\n```\r\n    for index in activation_queue[:get_validator_churn_limit(state)]:\r\n```\r\n\r\nTo\r\n\r\n```\r\n    validator_count = len(get_active_validator_indices(state))\r\n    churn_limit = get_validator_churn_limit(state)\r\n    if validator_count > MAX_VALIDATORS_PER_COMMITTEE:\r\n        max_additions = 0\r\n    elif validator_count + churn_limit <= MAX_VALIDATORS_PER_COMMITTEE:\r\n        max_additions = churn_limit\r\n    else:\r\n        max_additions = MAX_VALIDATORS_PER_COMMITTEE - validator_count\r\n    for index in activation_queue[max_additions]:\r\n```\r\n\r\n2) To prevent awkward rapid changes, we may want to make a more graceful transition between \"more validators can join\" and \"more validators can't join\". One option would be, instead of doing the above, have `max_additions` be dynamic, and decrease more slowly to zero as the validator count reaches the max. Another option to prevent the validator set from becoming _too_ static would be random mandatory ejections.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/700362878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/735888713",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/2065#issuecomment-735888713",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/2065",
    "id": 735888713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTg4ODcxMw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T16:20:33Z",
    "updated_at": "2020-11-30T16:20:33Z",
    "author_association": "MEMBER",
    "body": "closing in favour of #2137",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/735888713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/926",
  "id": 433123575,
  "node_id": "MDU6SXNzdWU0MzMxMjM1NzU=",
  "number": 926,
  "title": "Randao message_hash is not a hash",
  "user": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-04-15T07:00:09Z",
  "updated_at": "2019-04-19T03:44:24Z",
  "closed_at": "2019-04-19T03:44:23Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The `message_hash` supplied to [per-block-processing/randao](https://github.com/ethereum/eth2.0-specs/blob/dev/specs/core/0_beacon-chain.md#randao) is not actually a hash, it's just the little-endian encoding of `get_current_epoch(state)`.\r\n\r\nI suspect the intention is for it to be a hash.\r\n\r\nSee #859 for reference.",
  "closed_by": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483225624",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/926#issuecomment-483225624",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926",
    "id": 483225624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzIyNTYyNA==",
    "user": {
      "login": "ralexstokes",
      "id": 3113781,
      "node_id": "MDQ6VXNlcjMxMTM3ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3113781?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ralexstokes",
      "html_url": "https://github.com/ralexstokes",
      "followers_url": "https://api.github.com/users/ralexstokes/followers",
      "following_url": "https://api.github.com/users/ralexstokes/following{/other_user}",
      "gists_url": "https://api.github.com/users/ralexstokes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ralexstokes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ralexstokes/subscriptions",
      "organizations_url": "https://api.github.com/users/ralexstokes/orgs",
      "repos_url": "https://api.github.com/users/ralexstokes/repos",
      "events_url": "https://api.github.com/users/ralexstokes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ralexstokes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T12:10:04Z",
    "updated_at": "2019-04-15T12:10:04Z",
    "author_association": "MEMBER",
    "body": "my understanding here is that given the relative cost of cryptographic signature operations, we usually want to push as little data as possible through a given signing algorithm. however usually we want to produce a commitment to data that is larger than a given digest size (e.g. 32 bytes). this tension is usually resolved by signing the hash of the input data.\r\n\r\nand following this \"usual\" procedure, it makes sense to call this parameter to this function a `message_hash`.\r\n\r\ni interpret this use in the spec to take some creative liberties wrt the input data being a hash or not. in this case we just pad the current epoch to 32 bytes and proceed normally. i would think we want to avoid introducing another hashing here, just to avoid the additional cost of computing the hash (when just the serialized integer will do).\r\n\r\nif we agree that we can use the plain serialization in lieu of the hash then we could still argue that we change the name of this function parameter. i've seen this type of flexibility around the name employed in other cryptography software so don't think its worth changing imo. this same question came up in another issue on this repo (or possibly gitter) some months ago so that would actually be motivation for a change.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483225624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483246303",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/926#issuecomment-483246303",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926",
    "id": 483246303,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI0NjMwMw==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T13:14:50Z",
    "updated_at": "2019-04-15T13:14:50Z",
    "author_association": "MEMBER",
    "body": "> I suspect the intention is for it to be a hash.\r\n\r\nThe logic is correct but I agree the typing is awkward. To fix the type mismatch, it's probably more natural to define a `RandaoReveal` object as\r\n\r\n```python\r\n{\r\n    epoch: uint64,\r\n    signature: bytes96,\r\n}\r\n```\r\n\r\nand then `assert bls_verify(proposer.pubkey, signing_root(reveal), reveal.signature, domain)`. See the discussion [here](https://github.com/ethereum/eth2.0-specs/pull/865#issuecomment-479137921).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/483246303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484303222",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/926#issuecomment-484303222",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926",
    "id": 484303222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDMwMzIyMg==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T23:51:28Z",
    "updated_at": "2019-04-17T23:51:28Z",
    "author_association": "MEMBER",
    "body": "`signing_root(reveal)` would still just be a little endian encoding of `get_current_epoch(state)`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484303222/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484758384",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/926#issuecomment-484758384",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/926",
    "id": 484758384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDc1ODM4NA==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-19T03:44:23Z",
    "updated_at": "2019-04-19T03:44:23Z",
    "author_association": "MEMBER",
    "body": "The spec now has [`hash_tree_root(get_current_epoch(state))`](https://github.com/ethereum/eth2.0-specs/blob/dev/specs/core/0_beacon-chain.md#randao) which is the intended behaviour :)\r\n\r\nI may introduce a `RandaoReveal` object later for cleanliness.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/484758384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

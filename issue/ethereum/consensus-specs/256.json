{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/256",
  "id": 388664130,
  "node_id": "MDU6SXNzdWUzODg2NjQxMzA=",
  "number": 256,
  "title": "Proposal of adding fork version to beacon block",
  "user": {
    "login": "mkalinin",
    "id": 1892772,
    "node_id": "MDQ6VXNlcjE4OTI3NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mkalinin",
    "html_url": "https://github.com/mkalinin",
    "followers_url": "https://api.github.com/users/mkalinin/followers",
    "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
    "organizations_url": "https://api.github.com/users/mkalinin/orgs",
    "repos_url": "https://api.github.com/users/mkalinin/repos",
    "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mkalinin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1063043868,
      "node_id": "MDU6TGFiZWwxMDYzMDQzODY4",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:enhancement",
      "name": "general:enhancement",
      "color": "086788",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1063052501,
      "node_id": "MDU6TGFiZWwxMDYzMDUyNTAx",
      "url": "https://api.github.com/repos/ethereum/consensus-specs/labels/general:RFC",
      "name": "general:RFC",
      "color": "00D1B2",
      "default": false,
      "description": "Request for Comments"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-12-07T13:54:17Z",
  "updated_at": "2019-01-17T15:46:04Z",
  "closed_at": "2019-01-17T15:46:04Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Rationale\r\nWith this improvement blocks from side chains that hasn't been forked for some reason could be rejected on early stage. This is something that eth1.0 lacking where blocks from invalid chains could be detected either if validating parameters (like difficulty) have been changed or after the import that is the worst case.",
  "closed_by": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445249729",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-445249729",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 445249729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTI0OTcyOQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T14:31:15Z",
    "updated_at": "2018-12-07T14:31:15Z",
    "author_association": "MEMBER",
    "body": "I'm tempted to add the fork version to *all* messages that validators sign (and gossip) with middleware \r\nlogic to verify the fork version alongside the signature. The relevant messages are:\r\n\r\n1) beacon blocks\r\n2) attestations\r\n3) exits\r\n4) withdrawals (for phase 2)\r\n\r\nDeposit messages should probably *not* be specific to `fork_data`. That is, a deposit on Ethereum 1.0 should be reflected in all Ethereum 2.0 forks and the following snippet has a bug. cc @djrtwo @vbuterin\r\n\r\n```\r\n    assert BLSVerify(\r\n        pub=pubkey,\r\n        msg=hash(bytes32(pubkey) + withdrawal_credentials + randao_commitment),\r\n        sig=proof_of_possession,\r\n        domain=get_domain(\r\n            fork_data,\r\n            current_slot,\r\n            DOMAIN_DEPOSIT\r\n        )\r\n    )\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445249729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445277649",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-445277649",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 445277649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTI3NzY0OQ==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T16:00:52Z",
    "updated_at": "2018-12-07T16:00:52Z",
    "author_association": "MEMBER",
    "body": "Why not just add forkdata to messages at the network layer? This seems like it probably should be done anyway, so that hard forks are clean at the network layer too.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445277649/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445284781",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-445284781",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 445284781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTI4NDc4MQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T16:22:33Z",
    "updated_at": "2018-12-07T16:22:33Z",
    "author_association": "MEMBER",
    "body": "> Why not just add forkdata to messages at the network layer?\r\n\r\nThe forkdata can be manipulated at the network layer if it's not part of the consensus message, allowing replay attacks.\r\n\r\n> This seems like it probably should be done anyway, so that hard forks are clean at the network layer too.\r\n\r\nDoing it at the consensus layer is stronger than doing it at the network layer. That is, clients can just look at the fork data in the consensus messages for the network layer too.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445284781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445416690",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-445416690",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 445416690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTQxNjY5MA==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-08T01:12:16Z",
    "updated_at": "2018-12-08T01:12:16Z",
    "author_association": "MEMBER",
    "body": "> Doing it at the consensus layer is stronger than doing it at the network layer. That is, clients can just look at the fork data in the consensus messages for the network layer too.\r\n\r\nSure, but we _are_ doing it at consensus layer via domain separation.\r\n\r\nIn fact, our domain separation spec is almost literally equivalent to putting the fork version at the beginning of the message (I think the only difference is there's an extra layer of hashing sometimes).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445416690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445437157",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-445437157",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 445437157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTQzNzE1Nw==",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-08T06:51:13Z",
    "updated_at": "2018-12-08T06:51:13Z",
    "author_association": "MEMBER",
    "body": "> In fact, our domain separation spec is almost literally equivalent to putting the fork version at the beginning of the message (I think the only difference is there's an extra layer of hashing sometimes).\r\n\r\nIndeed. Signature verification will be running for every message right _before_ any following steps (would it be block import or attestation propagation or anything else). Including `ForkData` in signature does the trick.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/445437157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/455219580",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/256#issuecomment-455219580",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/256",
    "id": 455219580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTIxOTU4MA==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T15:46:04Z",
    "updated_at": "2019-01-17T15:46:04Z",
    "author_association": "MEMBER",
    "body": "I think this concern is addressed. Feel free to reopen @mkalinin :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/455219580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

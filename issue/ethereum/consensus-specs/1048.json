{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/1048",
  "id": 440461210,
  "node_id": "MDU6SXNzdWU0NDA0NjEyMTA=",
  "number": 1048,
  "title": "CHAIN_START_FULL_DEPOSIT_THRESHOLD  bypass",
  "user": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-05-05T16:07:28Z",
  "updated_at": "2019-06-09T20:24:09Z",
  "closed_at": "2019-06-09T20:24:08Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The deposit contract has a `CHAIN_START_FULL_DEPOSIT_THRESHOLD` (currently set to `65536`). The intent is that, at the genesis of Eth2, there is at least `CHAIN_START_FULL_DEPOSIT_THRESHOLD * 32` ETH at stake. This expectation is not realised when multiple full deposits are made to the same pubkey.\r\n\r\nAn attacker could take advantage of this. To illustrate, the attacker makes 65,000 full deposits to the same pubkey A. The other 536 pubkeys are controlled by the community. At `Eth2Genesis` the attacker does an immediate `VoluntaryExit` for pubkey A, and makes 1000 new deposits . Those new deposits are sufficient to take over Eth2, at a low cost.",
  "closed_by": {
    "login": "JustinDrake",
    "id": 731743,
    "node_id": "MDQ6VXNlcjczMTc0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JustinDrake",
    "html_url": "https://github.com/JustinDrake",
    "followers_url": "https://api.github.com/users/JustinDrake/followers",
    "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
    "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
    "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
    "repos_url": "https://api.github.com/users/JustinDrake/repos",
    "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/489440155",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1048#issuecomment-489440155",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048",
    "id": 489440155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTQ0MDE1NQ==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-05T16:11:07Z",
    "updated_at": "2019-05-05T16:11:07Z",
    "author_association": "MEMBER",
    "body": "One idea is to remove `Eth2Genesis` altogether, and instead require (using \"offchain\" logic) at least 65536 active validators at genesis (as opposed to deposits).\r\n\r\nThis has the added advantage of cleaning up `Eth2Genesis`. Indeed, `Eth2Genesis` is not strictly required. It may even be \"dangerous\" in case a last-minute Eth2 bug is found and we want to postpone the launch.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/489440155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/489442885",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1048#issuecomment-489442885",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048",
    "id": 489442885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTQ0Mjg4NQ==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-05T16:44:53Z",
    "updated_at": "2019-05-05T16:44:53Z",
    "author_association": "MEMBER",
    "body": "> At Eth2Genesis the attacker does an immediate VoluntaryExit for pubkey A, and makes 1000 new deposits\r\n\r\nAt this point, the community controls 100% of validating keys, the attacker has spent 2M eth that is now locked in withdrawable state (no transfers yet), and now has to spend another 32000 eth to make the sufficient deposits to take over.\r\n\r\nThe more sane attack is to take the 2M eth and make separate deposits and just control the initial vset.\r\n\r\nWill ponder the value of `Eth2Genesis` in general, but I believe the above attack is not really a vector over just a normal takeover. In regards to a normal takeover, we previously upped the amount to reduce likelihood and prevent changing or adding additional logic.\r\n\r\nAnother alternative is to separately count distinct pubkeys in a map and only initiate genesis at 65k full _distinct_ pubkey deposits.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/489442885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500242258",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/1048#issuecomment-500242258",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/1048",
    "id": 500242258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDI0MjI1OA==",
    "user": {
      "login": "JustinDrake",
      "id": 731743,
      "node_id": "MDQ6VXNlcjczMTc0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustinDrake",
      "html_url": "https://github.com/JustinDrake",
      "followers_url": "https://api.github.com/users/JustinDrake/followers",
      "following_url": "https://api.github.com/users/JustinDrake/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustinDrake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustinDrake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustinDrake/subscriptions",
      "organizations_url": "https://api.github.com/users/JustinDrake/orgs",
      "repos_url": "https://api.github.com/users/JustinDrake/repos",
      "events_url": "https://api.github.com/users/JustinDrake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustinDrake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-09T20:24:08Z",
    "updated_at": "2019-06-09T20:24:08Z",
    "author_association": "MEMBER",
    "body": "Closing in favour of #1152 which address this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/500242258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

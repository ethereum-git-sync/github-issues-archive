{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/976",
  "id": 435528125,
  "node_id": "MDU6SXNzdWU0MzU1MjgxMjU=",
  "number": 976,
  "title": "API between the BeaconChain and Validators",
  "user": {
    "login": "GregTheGreek",
    "id": 16929357,
    "node_id": "MDQ6VXNlcjE2OTI5MzU3",
    "avatar_url": "https://avatars.githubusercontent.com/u/16929357?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GregTheGreek",
    "html_url": "https://github.com/GregTheGreek",
    "followers_url": "https://api.github.com/users/GregTheGreek/followers",
    "following_url": "https://api.github.com/users/GregTheGreek/following{/other_user}",
    "gists_url": "https://api.github.com/users/GregTheGreek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GregTheGreek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GregTheGreek/subscriptions",
    "organizations_url": "https://api.github.com/users/GregTheGreek/orgs",
    "repos_url": "https://api.github.com/users/GregTheGreek/repos",
    "events_url": "https://api.github.com/users/GregTheGreek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GregTheGreek/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-04-21T17:00:15Z",
  "updated_at": "2019-04-30T12:36:20Z",
  "closed_at": "2019-04-30T12:36:20Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I don't have access to the document that was made by @spble during the Sydney client meetup, but we were discussing a few topics related to the API:\r\n\r\n1. The Serialization (JSON, Proto Buffers, etc...)\r\n2. The methods\r\n3. Data availability\r\n\r\n##### Recap off the top of my head\r\n1. During the discussion everyone seemed to be leaning towards not over engineering the system, and use RPC in Phase 0 (potentially change in the future Phases). This should be fine and clients should be encouraged to use other options for benchmarking reasons, as long as your client is built with an abstraction around the serialization it really shouldn't matter what you use.\r\n\r\n2. We should flesh out a subset of **core** methods, for Phase0, keep it lean and iterate from there. The **core** methods should be labeled as such within a clients API and any additional methods an implementation team wishes to expose should be considered **extended from the **core**. The** **core** methods should allow for **ANY** client and **ANY** beacon node to interact with each-other, that being said, the handshake between the two clients should acknowledge their creator so your client can operate accordingly. That way the corresponding API's can be used and we can reduced errors. This will help with a decentralized infura so that a multitude of clients and validators can run without any potential errors.\r\n\r\n3. I can't recall, but there were some serious discussions around what is useful for storage on the validator client.\r\n\r\ncc: @jrhea @dangerousfood @wemeetagain @Mikerah",
  "closed_by": {
    "login": "GregTheGreek",
    "id": 16929357,
    "node_id": "MDQ6VXNlcjE2OTI5MzU3",
    "avatar_url": "https://avatars.githubusercontent.com/u/16929357?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GregTheGreek",
    "html_url": "https://github.com/GregTheGreek",
    "followers_url": "https://api.github.com/users/GregTheGreek/followers",
    "following_url": "https://api.github.com/users/GregTheGreek/following{/other_user}",
    "gists_url": "https://api.github.com/users/GregTheGreek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GregTheGreek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GregTheGreek/subscriptions",
    "organizations_url": "https://api.github.com/users/GregTheGreek/orgs",
    "repos_url": "https://api.github.com/users/GregTheGreek/repos",
    "events_url": "https://api.github.com/users/GregTheGreek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GregTheGreek/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/485390277",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/976#issuecomment-485390277",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976",
    "id": 485390277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTM5MDI3Nw==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-22T10:50:25Z",
    "updated_at": "2019-04-22T10:50:25Z",
    "author_association": "MEMBER",
    "body": "@spble Can you link your notes?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/485390277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/485539754",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/976#issuecomment-485539754",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976",
    "id": 485539754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTUzOTc1NA==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-22T20:23:53Z",
    "updated_at": "2019-04-22T20:23:53Z",
    "author_association": "MEMBER",
    "body": "> I can't recall, but there were some serious discussions around what is useful for storage on the validator client.\r\n\r\nI would say two things are crucial -- (1) data private to the validator and (2) data required to assess if a future message is safe to sign.\r\n\r\nPrivate data includes -- public/private key and withdrawal key.\r\n\r\nFor phase 0, safe signing data includes signed beacon blocks and attestations. This data _can_ be pruned to just signed beacon block epochs and attestation source/target epochs.\r\n\r\nFor phase 1, the validator will need to remember shard blocks signed/attested and shard block data that the validator signed a custody bit for. This data will need to be remembered through the custody challenge period. This amounts to a validator client storing a custody challenge period worth of shard chain data at all times (this data is split across many shards). Like remembering signed attestation epochs, remembering this data is crucial to the responsibilities of a validator and not doing so can result in loss of funds. By keeping this data in the validator client, the node can cleanly and safely sync and drop shards without the validator being concerned about loss of attested to data.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/485539754/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/487894695",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/976#issuecomment-487894695",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976",
    "id": 487894695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Nzg5NDY5NQ==",
    "user": {
      "login": "spble",
      "id": 233229,
      "node_id": "MDQ6VXNlcjIzMzIyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/233229?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spble",
      "html_url": "https://github.com/spble",
      "followers_url": "https://api.github.com/users/spble/followers",
      "following_url": "https://api.github.com/users/spble/following{/other_user}",
      "gists_url": "https://api.github.com/users/spble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spble/subscriptions",
      "organizations_url": "https://api.github.com/users/spble/orgs",
      "repos_url": "https://api.github.com/users/spble/repos",
      "events_url": "https://api.github.com/users/spble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-30T09:59:17Z",
    "updated_at": "2019-04-30T09:59:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey y'all,\r\nI thought it would be best to break it out into separate issues, as we planned during Sydney chats.\r\nAs such:\r\n1. #1012 \r\n2. #1011 \r\n3. I think the data availability is really up to the individual validator client implementation.\r\nI imagine that at a minimum, it would need to persist:\r\n   - `BeaconBlock`: To avoid slashing conditions\r\n   - `IndexedAnnotation`: To avoid signing conflicting attestations\r\n   - `current_version`: To make sure we are connected to the correct version of a `BeaconNode`, and if the `BeaconNode` does change forks, then the validator client agrees with this change. This is proposed in the response to `get_duties` in #1011.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/487894695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/487934296",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/976#issuecomment-487934296",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/976",
    "id": 487934296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzkzNDI5Ng==",
    "user": {
      "login": "GregTheGreek",
      "id": 16929357,
      "node_id": "MDQ6VXNlcjE2OTI5MzU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/16929357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GregTheGreek",
      "html_url": "https://github.com/GregTheGreek",
      "followers_url": "https://api.github.com/users/GregTheGreek/followers",
      "following_url": "https://api.github.com/users/GregTheGreek/following{/other_user}",
      "gists_url": "https://api.github.com/users/GregTheGreek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GregTheGreek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GregTheGreek/subscriptions",
      "organizations_url": "https://api.github.com/users/GregTheGreek/orgs",
      "repos_url": "https://api.github.com/users/GregTheGreek/repos",
      "events_url": "https://api.github.com/users/GregTheGreek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GregTheGreek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-30T12:35:45Z",
    "updated_at": "2019-04-30T12:35:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing in favour of #1011 & #1012",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/487934296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-specs",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252/events",
  "html_url": "https://github.com/ethereum/consensus-specs/issues/3252",
  "id": 1587075089,
  "node_id": "I_kwDOCOoGbc5emNgR",
  "number": 3252,
  "title": "Question: what is the difference between `LightClientUpdate`, `LightClientFinalityUpdate` and `LightClientOptimisticUpdate `",
  "user": {
    "login": "fjchen7",
    "id": 10106636,
    "node_id": "MDQ6VXNlcjEwMTA2NjM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/10106636?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjchen7",
    "html_url": "https://github.com/fjchen7",
    "followers_url": "https://api.github.com/users/fjchen7/followers",
    "following_url": "https://api.github.com/users/fjchen7/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjchen7/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjchen7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjchen7/subscriptions",
    "organizations_url": "https://api.github.com/users/fjchen7/orgs",
    "repos_url": "https://api.github.com/users/fjchen7/repos",
    "events_url": "https://api.github.com/users/fjchen7/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjchen7/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-02-16T06:02:08Z",
  "updated_at": "2023-02-19T11:20:32Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am studying the light client specs and have some confusion. I don't know where can I get explained and can only post my confusion here (sorry if here is not the appropriate place).\r\n\r\nFrom the [altair/light-client/sync-protocol.md](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#lightclientupdate) it seems that `LightClientOptimisticUpdate` and `LightClientFinalityUpdate` will be converted to `LightClientUpdate` and be processed in the same method. Why do we distinguish them? Especially for  `LightClientUpdate` and `LightClientFinalityUpdate`, the difference is that the latter does not have `next_sync_committee` and `next_sync_committee_branch`. Why can't we get the `next_sync_committee`, as it has been finalized? If so, then these type is the same.\r\n\r\nAlso, the doc [`altair/light-client/light-client.md`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/light-client.md) says\r\n\r\n> When `finalized_period + 1 >= current_period`, the light client keeps observing [`LightClientFinalityUpdate`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#lightclientfinalityupdate) and [`LightClientOptimisticUpdate`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#lightclientoptimisticupdate). Received objects are passed to [`process_light_client_finality_update`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#process_light_client_finality_update) and [`process_light_client_optimistic_update`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#process_light_client_optimistic_update). This ensures that `finalized_header` and `optimistic_header` reflect the latest blocks.\r\n\r\nThe `current_period` is computed from the clock and genesis block time. If these two values are correct then `current_period` is correct as well, and it will always represent the latest committee period.  So I think this case only includes `finalized_period == current_period - 1` and `finalized_period == current_period`. But why here it uses `LightClientFinalityUpdate` instead of `LightClientUpdate` to update `finalized_header` in storage?\r\n\r\nVery much appreciate it if someone could give some insight or provide valuable readings for better understanding.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1435961343",
    "html_url": "https://github.com/ethereum/consensus-specs/issues/3252#issuecomment-1435961343",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-specs/issues/3252",
    "id": 1435961343,
    "node_id": "IC_kwDOCOoGbc5Vlwf_",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-19T11:20:32Z",
    "updated_at": "2023-02-19T11:20:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "LightClientFinalityUpdate, LightClientOptimisticUpdate are meant to serve different lightclient consumers. If you want to follow the tip of the chain, LightClientOptimisticUpdate gives you the min data required to do so without any bloat. LightClientFinalityUpdate contains more data to prove that a header was finalized.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-specs/issues/comments/1435961343/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7/events",
  "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/7",
  "id": 454487062,
  "node_id": "MDU6SXNzdWU0NTQ0ODcwNjI=",
  "number": 7,
  "title": "Block sanity transfer test is impossible because the transfer limit is 0",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-06-11T05:28:36Z",
  "updated_at": "2019-06-16T23:51:08Z",
  "closed_at": "2019-06-16T23:51:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "In the v0.6.3 block sanity tests, there's a transfer test that can't be passed using the default config because `MAX_TRANSFERS` is 0. We should either get rid of the test, or change the minimal config to use greater transfer limit.",
  "closed_by": {
    "login": "djrtwo",
    "id": 1433595,
    "node_id": "MDQ6VXNlcjE0MzM1OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djrtwo",
    "html_url": "https://github.com/djrtwo",
    "followers_url": "https://api.github.com/users/djrtwo/followers",
    "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
    "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
    "organizations_url": "https://api.github.com/users/djrtwo/orgs",
    "repos_url": "https://api.github.com/users/djrtwo/repos",
    "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djrtwo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/500809698",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/7#issuecomment-500809698",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7",
    "id": 500809698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDgwOTY5OA==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-11T11:59:13Z",
    "updated_at": "2019-06-11T12:02:53Z",
    "author_association": "MEMBER",
    "body": "I'm having the same problem in ZRNT (go executable spec). Just ignoring the test case for now. The problem with changing the minimal config is that we also want to test the transfer rejection when `MAX_TRANSFERS = 0`.\r\n\r\nI think we could split the preset into two:\r\n1. Longer term non-changing constants, for compile-time array sizes etc.\r\n2. A few configurable numbers, passed to the transition function, e.g. all `MAX_<OPERATION_TYPE>`, maybe some others. TBD.\r\n\r\nAlso see discussion around the initial constants setup. Here's some reasoning for constant constants:\r\n\r\nFor some things, we need both the old as the new constant to be present for a transition, and after the transition (to sync from older state before transition). Which makes it more tempting to just use a differently named constant in the rare cases of a change, for the old data type. And then have it all be compile time, without managing configurations. This is especially good for things like slots-per-epoch, where we need both the old value and the new value (and genesis time) to calculate a slot number based on time. Or to calculate the a amount of epochs since some time, for justification logic. In such cases a change involves more work than just loading a new value.\r\n\r\nIt breaks for cases like this however, where we want to be flexible in a \"constant\".\r\n\r\nWhat I'd like to preserve:\r\n- constants used in data types are compile time, consistent. Change in a constant means its a different type, avoid bugs with invalid array lookups etc, and some efficiency + clarity in the code (no configuration overhead/obfuscation)\r\n- the values are easily distributed in one format, with one name, e.g. \"mainnet\". For a new phase, we append to the configuration (different name / maybe in some structure per-phase). Since it is time-based, we shouldn't need to re-define the whole thing for small fork / testnet change.\r\n\r\nIdea for new configuration format:\r\n```yaml\r\nconstants:\r\n  SHARD_COUNT: 1024\r\n  SLOTS_PER_EPOCH: 64\r\n  DOMAIN_SHARD_PROPOSER: 128 # includes phase 1 constants, not used in phase 0\r\n  ...\r\nforks: # variables, changing per fork\r\n  genesis:\r\n    MAX_ATTESTATIONS: 128\r\n    MAX_TRANSFERS: 0\r\n    ...\r\n  transferstart: # can't think of a cool fork name\r\n    MAX_TRANSFERS: 16  # overrides variables declared in earlier phases\r\n  phase1:\r\n    SHARD_GENESIS: 12345 # can also add new variables\r\n    ...\r\n```\r\n\r\nAnd then some fork timeline configuration (name -> slot), separately:\r\n```yaml\r\ngenesis: 0\r\ntransferstart: 1234\r\nphase1: 5678\r\n...\r\n```\r\n\r\nAnd in a test we either set the pre-state slot to something after the `transferstart` fork, or make the test suite run with a timeline that starts `transferstart` from slot 0.\r\n\r\nfeedback/suggestions welcome.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/500809698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/501511097",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/7#issuecomment-501511097",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/7",
    "id": 501511097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTUxMTA5Nw==",
    "user": {
      "login": "djrtwo",
      "id": 1433595,
      "node_id": "MDQ6VXNlcjE0MzM1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1433595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djrtwo",
      "html_url": "https://github.com/djrtwo",
      "followers_url": "https://api.github.com/users/djrtwo/followers",
      "following_url": "https://api.github.com/users/djrtwo/following{/other_user}",
      "gists_url": "https://api.github.com/users/djrtwo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djrtwo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djrtwo/subscriptions",
      "organizations_url": "https://api.github.com/users/djrtwo/orgs",
      "repos_url": "https://api.github.com/users/djrtwo/repos",
      "events_url": "https://api.github.com/users/djrtwo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djrtwo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-13T01:14:56Z",
    "updated_at": "2019-06-13T01:14:56Z",
    "author_association": "MEMBER",
    "body": "We are excluding this test in `v0.7.0`. We'll want to add it back in when we add tests for forks (config changes)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/501511097/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

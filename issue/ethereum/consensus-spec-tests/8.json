{
  "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8",
  "repository_url": "https://api.github.com/repos/ethereum/consensus-spec-tests",
  "labels_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8/comments",
  "events_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8/events",
  "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/8",
  "id": 460530614,
  "node_id": "MDU6SXNzdWU0NjA1MzA2MTQ=",
  "number": 8,
  "title": "Hexadecimal integers should not be in quotes",
  "user": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-06-25T16:44:45Z",
  "updated_at": "2019-06-30T15:32:23Z",
  "closed_at": "2019-06-30T15:32:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Here are the formats for integers in the yaml spec.\r\n```yaml\r\ncanonical: 12345\r\ndecimal: +12345\r\noctal: 0o14\r\nhexadecimal: 0xC\r\n```\r\n\r\nWhen a hexadecimal integer is written as `'0xC'` then it is interpreted as a string by yaml spec compliant libraries. This only seems to happen with `domain` fields in the bls yaml tests so far.\r\n\r\nSee: Example 2.19. Integers and 10.3.2. Tag Resolution in [yaml spec](https://yaml.org/spec/1.2/spec.html). ",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/505571589",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/8#issuecomment-505571589",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8",
    "id": 505571589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTU3MTU4OQ==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T18:42:58Z",
    "updated_at": "2019-06-25T18:42:58Z",
    "author_association": "MEMBER",
    "body": "See https://github.com/ethereum/eth2.0-specs/blob/dev/specs/test_formats/bls/sign_msg.md\r\nDomain is typed as bytes in the tests. I do see now that it's `uint64` in the BLS spec doc. But ultimately it's up to implementations.\r\n\r\nRegarding the spec-tests in general: all integers should be in unquoted decimal, and if it's in quoted hex, the value really is some form of bytes (even if short enough for an integer, it should be a bytes type).\r\n\r\nAlso note that the fork-version changed from int to bytes in the spec not that long ago, that may be related with what you are struggling with? We are avoiding integer arithmetic when constructing the domain for BLS signatures, since it's more precise to just define where the bytes are coming from (BLS-domain-type and fork version)\r\n\r\ndomain construction spec here: https://github.com/ethereum/eth2.0-specs/blob/v0.7.1/specs/core/0_beacon-chain.md#bls_domain\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/505571589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/505632907",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/8#issuecomment-505632907",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8",
    "id": 505632907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTYzMjkwNw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T21:39:22Z",
    "updated_at": "2019-06-25T21:39:22Z",
    "author_association": "NONE",
    "body": "Here it is mentioned as uint64 https://github.com/ethereum/eth2.0-specs/blob/ab012b8adf17a3d76dbb47ddffc5c0db6c7565ac/test_generators/bls/main.py#L30\r\n\r\nWe're fine to use it as bytes if that is what the spec is supposed to be or uint64. The problem is that when we have a struct like\r\n\r\n```go\r\ntype TestObject struct {\r\n   Domain uint64 `yaml:\"domain\"`\r\n}\r\n```\r\nand try to unmarshal a yaml with domain written as \r\n```yaml\r\ndomain: '0x01'\r\n```\r\nwhich fails to parse.\r\n\r\nHowever, if we write the domain value in the correct format:\r\n```yaml\r\ndomain: 0x01\r\n```\r\nThen it parses without issue. The correct format could be any of the formats listed in my original issue.\r\n\r\nThis leaves us with two options:\r\n- Unmarshal to something (key-value map or some other struct) that isn't the `TestObject`, then populate the `TestStruct` from that thing.\r\n- Fix the yaml so that the field value is the proper format to populate a integer.\r\n\r\nI'm asking for the second option here. The first option is simply not viable or maintainable. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/505632907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/507039342",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/8#issuecomment-507039342",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8",
    "id": 507039342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzAzOTM0Mg==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-30T14:08:54Z",
    "updated_at": "2019-06-30T14:09:12Z",
    "author_association": "MEMBER",
    "body": "See https://github.com/ethereum/eth2.0-specs/pull/1238/commits/91f55f55b532eaa422459702153876b961844dfb",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/507039342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/507045616",
    "html_url": "https://github.com/ethereum/consensus-spec-tests/issues/8#issuecomment-507045616",
    "issue_url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/8",
    "id": 507045616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzA0NTYxNg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-30T15:32:23Z",
    "updated_at": "2019-06-30T15:32:23Z",
    "author_association": "NONE",
    "body": "That works for me. Thanks!!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/consensus-spec-tests/issues/comments/507045616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

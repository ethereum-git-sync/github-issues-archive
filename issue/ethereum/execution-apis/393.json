{
  "url": "https://api.github.com/repos/ethereum/execution-apis/issues/393",
  "repository_url": "https://api.github.com/repos/ethereum/execution-apis",
  "labels_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393/events",
  "html_url": "https://github.com/ethereum/execution-apis/issues/393",
  "id": 1640746379,
  "node_id": "I_kwDOFoG9Gs5hy82L",
  "number": 393,
  "title": "jsonrpc: add eth_getBlockReceipt ",
  "user": {
    "login": "jsvisa",
    "id": 3627395,
    "node_id": "MDQ6VXNlcjM2MjczOTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3627395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jsvisa",
    "html_url": "https://github.com/jsvisa",
    "followers_url": "https://api.github.com/users/jsvisa/followers",
    "following_url": "https://api.github.com/users/jsvisa/following{/other_user}",
    "gists_url": "https://api.github.com/users/jsvisa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jsvisa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jsvisa/subscriptions",
    "organizations_url": "https://api.github.com/users/jsvisa/orgs",
    "repos_url": "https://api.github.com/users/jsvisa/repos",
    "events_url": "https://api.github.com/users/jsvisa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jsvisa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-26T03:24:26Z",
  "updated_at": "2023-07-05T18:37:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Motivation\r\n\r\nCurrently, the way we obtain complete information about all transactions in a block is as follows:\r\n\r\n1. Call `eth_getBlockBy{Number,Hash}` to retrieve all transaction data for a block;\r\n2. Iterate through all the transaction data obtained above and call `eth_getTransactionReceipt` to retrieve the receipt data for each transaction.\r\n\r\nThis method is highly inefficient for obtaining large amounts of block and transaction data. To make it easier for users, we propose an RPC that returns all the receipt data for a block in one call.\r\n\r\nParity/OpenEthereum(DEPRECATED) has already implemented this method under the `parity` namespace([parity_getblockreceipts](https://openethereum.github.io/JSONRPC-parity-module#parity_getblockreceipts)), and some node providers(eg: [alchemy eth_getBlockReceipts](https://docs.alchemy.com/reference/eth-getblockreceipts)) have provided similar solutions. If we can include this RPC in the standard, I believe it would be more consistent and user-friendly for users.\r\n\r\n# Spec\r\n\r\nHere is the spec for `eth_getBlockReceiptsBy{Number,Hash}`\r\n\r\n### eth_getBlockReceiptsByNumber {#eth_getBlockReceiptsByNumber}\r\n\r\nReturns information about a block receipts by block number.\r\n\r\n**Parameters**\r\n\r\n1. `Quantity or Tag` - integer of a block number, or the string 'earliest', 'latest' or 'pending', as in the default block parameter.\r\n\r\n```\r\nparams: [\"0x1234\"]\r\n```\r\n\r\n**Returns** `Array` - The list of Receipt object of the given block:\r\n\r\neg:\r\n\r\n```json\r\n{\r\n  \"id\": 1,\r\n  \"jsonrpc\": \"2.0\",\r\n  \"result\": [\r\n    {\r\n      \"blockHash\": \"0x64d67cf84d95f8dfa1e1c3b5a5260aaf801ac99529b4ec3ae19bb06ba78c7bd5\",\r\n      \"blockNumber\": \"0x8d2b29\",\r\n      \"contractAddress\": null,\r\n      \"cumulativeGasUsed\": \"0x5208\",\r\n      \"from\": \"0x4d6bb4ed029b33cf25d0810b029bd8b1a6bcab7b\",\r\n      \"gasUsed\": \"0x5208\",\r\n      \"logs\": [],\r\n      \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"root\": null,\r\n      \"status\": \"0x1\",\r\n      \"to\": \"0xe9c245293dac615c11a5bf26fcec91c3617645e4\",\r\n      \"transactionHash\": \"0x1eba82fb5e8426b520c49a5d8dc6c24157e8f45fb9102aca4a99f5617c1539fc\",\r\n      \"transactionIndex\": \"0x0\"\r\n    },\r\n    {\r\n      \"blockHash\": \"0x64d67cf84d95f8dfa1e1c3b5a5260aaf801ac99529b4ec3ae19bb06ba78c7bd5\",\r\n      \"blockNumber\": \"0x8d2b29\",\r\n      \"contractAddress\": null,\r\n      \"cumulativeGasUsed\": \"0x3fc28\",\r\n      \"from\": \"0x0caf0d921b2bd24ca04e1f06344e976af223783b\",\r\n      \"gasUsed\": \"0x3aa20\",\r\n      \"logs\": [],\r\n      \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"root\": null,\r\n      \"status\": \"0x1\",\r\n      \"to\": \"0xf2bb17cb59746cae43d65eec233925b6584cddef\",\r\n      \"transactionHash\": \"0x70a50d28db69e5c7a8686141f282530d52e7e3c625296dc53eb5684afa727886\",\r\n      \"transactionIndex\": \"0x1\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n### eth_getBlockReceiptsByHash {#eth_getBlockReceiptsByHash}\r\n\r\nReturns information about a block receipts by block hash.\r\n\r\n**Parameters**\r\n\r\n1. `DATA`, 32 Bytes - hash of a block\r\n\r\n```\r\nparams: [\"0xb903239f8543d04b5dc1ba6579132b143087c68db1b2168786408fcbce568238\"]\r\n```\r\n\r\n**Returns** `Array` - The list of Receipt object of the given block:\r\n\r\neg:\r\n\r\n```json\r\n{\r\n  \"id\": 1,\r\n  \"jsonrpc\": \"2.0\",\r\n  \"result\": [\r\n    {\r\n      \"blockHash\": \"0x64d67cf84d95f8dfa1e1c3b5a5260aaf801ac99529b4ec3ae19bb06ba78c7bd5\",\r\n      \"blockNumber\": \"0x8d2b29\",\r\n      \"contractAddress\": null,\r\n      \"cumulativeGasUsed\": \"0x5208\",\r\n      \"from\": \"0x4d6bb4ed029b33cf25d0810b029bd8b1a6bcab7b\",\r\n      \"gasUsed\": \"0x5208\",\r\n      \"logs\": [],\r\n      \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"root\": null,\r\n      \"status\": \"0x1\",\r\n      \"to\": \"0xe9c245293dac615c11a5bf26fcec91c3617645e4\",\r\n      \"transactionHash\": \"0x1eba82fb5e8426b520c49a5d8dc6c24157e8f45fb9102aca4a99f5617c1539fc\",\r\n      \"transactionIndex\": \"0x0\"\r\n    },\r\n    {\r\n      \"blockHash\": \"0x64d67cf84d95f8dfa1e1c3b5a5260aaf801ac99529b4ec3ae19bb06ba78c7bd5\",\r\n      \"blockNumber\": \"0x8d2b29\",\r\n      \"contractAddress\": null,\r\n      \"cumulativeGasUsed\": \"0x3fc28\",\r\n      \"from\": \"0x0caf0d921b2bd24ca04e1f06344e976af223783b\",\r\n      \"gasUsed\": \"0x3aa20\",\r\n      \"logs\": [],\r\n      \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"root\": null,\r\n      \"status\": \"0x1\",\r\n      \"to\": \"0xf2bb17cb59746cae43d65eec233925b6584cddef\",\r\n      \"transactionHash\": \"0x70a50d28db69e5c7a8686141f282530d52e7e3c625296dc53eb5684afa727886\",\r\n      \"transactionIndex\": \"0x1\"\r\n    }\r\n  ]\r\n}\r\n```\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/393/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1622259498",
    "html_url": "https://github.com/ethereum/execution-apis/issues/393#issuecomment-1622259498",
    "issue_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393",
    "id": 1622259498,
    "node_id": "IC_kwDOFoG9Gs5gsbcq",
    "user": {
      "login": "alexqrid",
      "id": 30272185,
      "node_id": "MDQ6VXNlcjMwMjcyMTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30272185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexqrid",
      "html_url": "https://github.com/alexqrid",
      "followers_url": "https://api.github.com/users/alexqrid/followers",
      "following_url": "https://api.github.com/users/alexqrid/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexqrid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexqrid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexqrid/subscriptions",
      "organizations_url": "https://api.github.com/users/alexqrid/orgs",
      "repos_url": "https://api.github.com/users/alexqrid/repos",
      "events_url": "https://api.github.com/users/alexqrid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexqrid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-05T18:23:01Z",
    "updated_at": "2023-07-05T18:23:01Z",
    "author_association": "NONE",
    "body": "This is very important feature for many explorers as well. `Erigon` client has this method. It saves a lot of time to get receipts via this method and not exhaust the node resources with many api calls for every transaction:\r\nFor every transaction explorers need to get receipt, and this becomes a problem with `geth` clients.\r\nAs `geth`'s fork is used for various chains, the problem exists in every chain that uses `\"geth\"`. \r\nAt 3xpl we have during parsing EVM-like chains we have an option for [`erigon` clients](https://github.com/3xplcom/Core/blob/c1d359ccc626cb1d6bae19d25daa883b6f2a022a/Modules/Common/EVMMainModule.php#L122) and a separate case for [`geth` clients](https://github.com/3xplcom/Core/blob/c1d359ccc626cb1d6bae19d25daa883b6f2a022a/Modules/Common/EVMMainModule.php#L155), which extremely slows down getting information from EVM-like chains that have no erigon implementation. This is also makes more sense while using node as a service provider (e.g. QuickNode) as every request is counted separately.\r\n\r\nSorry for the tag guys, but can we get more attention to this problem? @lightclient @holiman @fjl ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1622259498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1622278362",
    "html_url": "https://github.com/ethereum/execution-apis/issues/393#issuecomment-1622278362",
    "issue_url": "https://api.github.com/repos/ethereum/execution-apis/issues/393",
    "id": 1622278362,
    "node_id": "IC_kwDOFoG9Gs5gsgDa",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-05T18:37:41Z",
    "updated_at": "2023-07-05T18:37:41Z",
    "author_association": "MEMBER",
    "body": "I'm definitely in favor of adding this!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1622278362/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/execution-apis/issues/292",
  "repository_url": "https://api.github.com/repos/ethereum/execution-apis",
  "labels_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292/comments",
  "events_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292/events",
  "html_url": "https://github.com/ethereum/execution-apis/issues/292",
  "id": 1341306422,
  "node_id": "I_kwDOFoG9Gs5P8rY2",
  "number": 292,
  "title": "Proposal for eth_getCodeHash",
  "user": {
    "login": "zemse",
    "id": 22412996,
    "node_id": "MDQ6VXNlcjIyNDEyOTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zemse",
    "html_url": "https://github.com/zemse",
    "followers_url": "https://api.github.com/users/zemse/followers",
    "following_url": "https://api.github.com/users/zemse/following{/other_user}",
    "gists_url": "https://api.github.com/users/zemse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zemse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zemse/subscriptions",
    "organizations_url": "https://api.github.com/users/zemse/orgs",
    "repos_url": "https://api.github.com/users/zemse/repos",
    "events_url": "https://api.github.com/users/zemse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zemse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-08-17T07:26:37Z",
  "updated_at": "2022-09-28T15:38:03Z",
  "closed_at": "2022-09-28T15:38:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Motivation\r\n\r\nIn certain cases, knowing whether an address is a contract or not can be useful. A number of users/devs face a common issue that they are interacting with a contract on an incorrect network. The eth_estimateGas returns a value (21000 + calldata estimate), the transaction goes through but nothing happens. For eth_calls, it returns '0x' and that's what happens when a contract reverts with empty revert data. This makes beginners quite confused about why their code doesn't emit logs or reverts when there's no revert in it. \r\n\r\nClientside libraries could do a preflight check to see if the user/dev is trying to interact with an account that is not an address and throw a useful error. The `eth_getCode` exists however it's not cheap, due to the huge payload. However the [Account struct](https://ethereum.org/en/developers/docs/accounts/#an-account-examined) in already contains a codeHash. However, there doesn't seem to be a way to get that directly.\r\n\r\n## Spec\r\n\r\n`eth_getCodeHash` takes in an `account address` and results with the `codeHash` 32 bytes value.",
  "closed_by": {
    "login": "zemse",
    "id": 22412996,
    "node_id": "MDQ6VXNlcjIyNDEyOTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zemse",
    "html_url": "https://github.com/zemse",
    "followers_url": "https://api.github.com/users/zemse/followers",
    "following_url": "https://api.github.com/users/zemse/following{/other_user}",
    "gists_url": "https://api.github.com/users/zemse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zemse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zemse/subscriptions",
    "organizations_url": "https://api.github.com/users/zemse/orgs",
    "repos_url": "https://api.github.com/users/zemse/repos",
    "events_url": "https://api.github.com/users/zemse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zemse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/292/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1218293182",
    "html_url": "https://github.com/ethereum/execution-apis/issues/292#issuecomment-1218293182",
    "issue_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292",
    "id": 1218293182,
    "node_id": "IC_kwDOFoG9Gs5Ina2-",
    "user": {
      "login": "lightclient",
      "id": 14004106,
      "node_id": "MDQ6VXNlcjE0MDA0MTA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14004106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lightclient",
      "html_url": "https://github.com/lightclient",
      "followers_url": "https://api.github.com/users/lightclient/followers",
      "following_url": "https://api.github.com/users/lightclient/following{/other_user}",
      "gists_url": "https://api.github.com/users/lightclient/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lightclient/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lightclient/subscriptions",
      "organizations_url": "https://api.github.com/users/lightclient/orgs",
      "repos_url": "https://api.github.com/users/lightclient/repos",
      "events_url": "https://api.github.com/users/lightclient/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lightclient/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-17T17:20:09Z",
    "updated_at": "2022-08-17T17:20:09Z",
    "author_association": "MEMBER",
    "body": "The method generally makes sense to me and is straightforward to implement. I'm curious if you can expand on \"not cheap\" though? Max contract size is 24 kilobytes -- this seems to be quite cheap to request when webpages are often in the megabytes?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1218293182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1261095928",
    "html_url": "https://github.com/ethereum/execution-apis/issues/292#issuecomment-1261095928",
    "issue_url": "https://api.github.com/repos/ethereum/execution-apis/issues/292",
    "id": 1261095928,
    "node_id": "IC_kwDOFoG9Gs5LKsv4",
    "user": {
      "login": "zemse",
      "id": 22412996,
      "node_id": "MDQ6VXNlcjIyNDEyOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22412996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zemse",
      "html_url": "https://github.com/zemse",
      "followers_url": "https://api.github.com/users/zemse/followers",
      "following_url": "https://api.github.com/users/zemse/following{/other_user}",
      "gists_url": "https://api.github.com/users/zemse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zemse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zemse/subscriptions",
      "organizations_url": "https://api.github.com/users/zemse/orgs",
      "repos_url": "https://api.github.com/users/zemse/repos",
      "events_url": "https://api.github.com/users/zemse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zemse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-28T15:38:02Z",
    "updated_at": "2022-09-28T15:38:02Z",
    "author_association": "NONE",
    "body": "I mostly had in mind that some websocket providers charge on bandwidth, but later I checked and the actual charge is not very significant because the use case would involve occasional queries and mostly no runtime queries. It doesn't seem that the method is necessary hence closing this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/execution-apis/issues/comments/1261095928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

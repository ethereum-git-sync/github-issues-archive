{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11254",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11254/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11254/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11254/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11254",
  "id": 857615484,
  "node_id": "MDU6SXNzdWU4NTc2MTU0ODQ=",
  "number": 11254,
  "title": "Assembly export and re-import",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1017612679,
      "node_id": "MDU6TGFiZWwxMDE3NjEyNjc5",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/protocol%20design%20:crystal_ball:",
      "name": "protocol design :crystal_ball:",
      "color": "8af77e",
      "default": false,
      "description": "Potential changes to ABI, meta data, standard JSON"
    },
    {
      "id": 4372329032,
      "node_id": "LA_kwDOAm_5kc8AAAABBJxySA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/roadmap",
      "name": "roadmap",
      "color": "ff8e00",
      "default": false,
      "description": "It's on our short-term roadmap"
    },
    {
      "id": 4437999539,
      "node_id": "LA_kwDOAm_5kc8AAAABCIZ_sw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20effort",
      "name": "high effort",
      "color": "ff54f4",
      "default": false,
      "description": "A lot to implement but still doable by a single person. The task is large or difficult."
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "aarlt",
    "id": 5008794,
    "node_id": "MDQ6VXNlcjUwMDg3OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5008794?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aarlt",
    "html_url": "https://github.com/aarlt",
    "followers_url": "https://api.github.com/users/aarlt/followers",
    "following_url": "https://api.github.com/users/aarlt/following{/other_user}",
    "gists_url": "https://api.github.com/users/aarlt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aarlt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aarlt/subscriptions",
    "organizations_url": "https://api.github.com/users/aarlt/orgs",
    "repos_url": "https://api.github.com/users/aarlt/repos",
    "events_url": "https://api.github.com/users/aarlt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aarlt/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "aarlt",
      "id": 5008794,
      "node_id": "MDQ6VXNlcjUwMDg3OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5008794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aarlt",
      "html_url": "https://github.com/aarlt",
      "followers_url": "https://api.github.com/users/aarlt/followers",
      "following_url": "https://api.github.com/users/aarlt/following{/other_user}",
      "gists_url": "https://api.github.com/users/aarlt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aarlt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aarlt/subscriptions",
      "organizations_url": "https://api.github.com/users/aarlt/orgs",
      "repos_url": "https://api.github.com/users/aarlt/repos",
      "events_url": "https://api.github.com/users/aarlt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aarlt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-04-14T07:39:29Z",
  "updated_at": "2022-08-18T18:44:15Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "In order to perform super-optimization on assembly, we would like to define a serialization format so that an `Assembly` object can be exported, modified and re-imported in a similar way as we currently do with the AST. It should be possible to resume compilation from the assembly stage on.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11254/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/819505733",
    "html_url": "https://github.com/ethereum/solidity/issues/11254#issuecomment-819505733",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11254",
    "id": 819505733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTUwNTczMw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-14T13:10:17Z",
    "updated_at": "2021-04-14T13:23:31Z",
    "author_association": "MEMBER",
    "body": "Here is an idea based on the current assembly JSON:\r\n```\r\n{\r\n  \"id\": 0, // object id\r\n  \"code\": [\r\n    {\r\n      kind: \"instruction\" / \"special\"\r\n      debug: {} // debug data\r\n      // kind-specific data\r\n    }\r\n  ],\r\n  \"data\": {\r\n    <key>: <value>\r\n  },\r\n  \"sub\": [\r\n    // sub objects with the same structure\r\n  ],\r\n  \"metadata\": <hex string>\r\n}\r\n```\r\n\r\nIf we want to have settings outside, then would propose the following outer wrapping:\r\n```\r\n{\r\n  version: 1,\r\n  evmVersion: \"berlin\",\r\n  object: <the object from above>\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/819505733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/819692109",
    "html_url": "https://github.com/ethereum/solidity/issues/11254#issuecomment-819692109",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11254",
    "id": 819692109,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTY5MjEwOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-14T17:31:01Z",
    "updated_at": "2021-04-14T17:31:01Z",
    "author_association": "MEMBER",
    "body": "For a proper version, I would suggest the following modifications to the current json export:\r\n - all debugging data (\"begin\", \"end\", \"source\", \"jump type\") should be moved to a sub-object of the assemblyitem json object\r\n - opcodes and non-opcodes (pushsubsize, etc) should probably be separated somehow\r\n - names of non-opcodes should probably be cleaned up and improved - nobody can remember what `PUSH [$]` is supposed to mean\r\n - `PUSH` should include the actual byte size, i.e. `PUSH1`, ..., `PUSH32`\r\n - there should probably be a top-level item that specifies the EVM version, and maybe other things (compiler version?)\r\n\r\nUnfortunately, some members of the Assembly class are only used during the construction of the assembly code, i.e. they represent state, while others are actual data that store the assembly.\r\nThe ones that are used during construction of course should not be serialized. These include m_deposit, m_currentSourceLocation, and others.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/819692109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11557",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11557/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11557/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11557/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11557",
  "id": 924432152,
  "node_id": "MDU6SXNzdWU5MjQ0MzIxNTI=",
  "number": 11557,
  "title": "Modifiers are not disallowed in interfaces",
  "user": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 3104779662,
      "node_id": "MDU6TGFiZWwzMTA0Nzc5NjYy",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20report%20error",
      "name": "should report error",
      "color": "666666",
      "default": false,
      "description": "Compiles without errors but should not."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-06-18T00:15:33Z",
  "updated_at": "2021-08-31T14:08:40Z",
  "closed_at": "2021-08-31T14:08:40Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nCurrently it's possible to define modifiers in interfaces and even provide an implementation. This is not documented. [The current section about interfaces](https://docs.soliditylang.org/en/v0.8.5/contracts.html#interfaces) only mentions functions so technically it does not contradict the docs but I think this is not intentional. It does have some quirks, e.g. declaring a local variable causes an error.\r\n\r\nImplemented modifiers should be disallowed in interfaces. Unimplemented ones probably too given that modfiers cannot be external.\r\n\r\nRegardless of whether we change this or not, docs should be updated to say whether modifiers are allowed in interfaces. I think that we should also mention that at least up to 0.8.5 they were allowed .\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.5\r\n\r\n## Steps to Reproduce\r\n\r\n### Implemented modifier in an interface\r\nThis compiles without errors:\r\n```solidity\r\nfunction free() {}\r\n\r\ninterface I {\r\n    modifier m() {\r\n        free();\r\n        _;\r\n    }\r\n}\r\n\r\ncontract C is I {\r\n    function f() public m {}\r\n}\r\n```\r\n\r\n### Implemented modifier with a local variable in an interface\r\n```solidity\r\nfunction free() {}\r\n\r\ninterface I {\r\n    modifier m() {\r\n        uint answer = 42;\r\n        free();\r\n        _;\r\n    }\r\n}\r\n\r\ncontract C is I {\r\n    function f() public m {}\r\n}\r\n```\r\n```\r\nError: Variables cannot be declared in interfaces.\r\n --> test.sol:5:9:\r\n  |\r\n5 |         uint answer = 42;\r\n  |   \r\n```\r\n\r\n### Implemented modifier with a local variable in an abstract contract\r\nLocal variables work just fine in modifiers in abstract contracts:\r\n```solidity\r\nfunction free() {}\r\n\r\nabstract contract I {\r\n    modifier m() {\r\n        uint answer = 42;\r\n        free();\r\n        _;\r\n    }\r\n}\r\n\r\ncontract C is I {\r\n    function f() public m {}\r\n}\r\n```",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11557/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11557/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/865058796",
    "html_url": "https://github.com/ethereum/solidity/issues/11557#issuecomment-865058796",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11557",
    "id": 865058796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTA1ODc5Ng==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T14:03:24Z",
    "updated_at": "2021-06-21T14:03:24Z",
    "author_association": "MEMBER",
    "body": "We discussed it on the chat today.\r\n- It's indeed a bug and we do not consider it a breaking change.\r\n- Unimplemented modifiers should be disallowed in interfaces too. It's consistent with the fact that we we don't allow unimplemented internal functions there.\r\n\r\nAlso, there are other issues I want to work on before I start work on this and we have a bugfixing week so I'm unassigning myself for now in case someone else would want to take it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/865058796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

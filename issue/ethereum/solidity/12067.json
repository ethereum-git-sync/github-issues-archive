{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12067/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12067/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12067/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12067",
  "id": 1012520028,
  "node_id": "I_kwDOAm_5kc48WdRc",
  "number": 12067,
  "title": "Allow `verbatim` in Solidity `assembly` blocks",
  "user": {
    "login": "dessaya",
    "id": 7060033,
    "node_id": "MDQ6VXNlcjcwNjAwMzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7060033?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dessaya",
    "html_url": "https://github.com/dessaya",
    "followers_url": "https://api.github.com/users/dessaya/followers",
    "following_url": "https://api.github.com/users/dessaya/following{/other_user}",
    "gists_url": "https://api.github.com/users/dessaya/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dessaya/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dessaya/subscriptions",
    "organizations_url": "https://api.github.com/users/dessaya/orgs",
    "repos_url": "https://api.github.com/users/dessaya/repos",
    "events_url": "https://api.github.com/users/dessaya/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dessaya/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4438003076,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaNhA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20effort",
      "name": "medium effort",
      "color": "ff7df7",
      "default": false,
      "description": "Default level of effort"
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    },
    {
      "id": 4438481746,
      "node_id": "LA_kwDOAm_5kc8AAAABCI3bUg",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/must%20have%20eventually",
      "name": "must have eventually",
      "color": "ffb04d",
      "default": false,
      "description": "Something we consider essential but not enough to prevent us from releasing Solidity 1.0 without it."
    },
    {
      "id": 4525128519,
      "node_id": "LA_kwDOAm_5kc8AAAABDbf7Rw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/needs%20design",
      "name": "needs design",
      "color": "18F737",
      "default": false,
      "description": "The proposal is too vague to be implemented right away"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2021-09-30T19:02:38Z",
  "updated_at": "2023-11-08T20:02:35Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "There is currently support for `verbatim`, allowing to instert arbitrary bytecode, but only when compiling in strict assembly mode. But the `verbatim` group of functions ios not available inside `assembly` blocks in Solidity code. Example:\r\n\r\n```\r\nfunction f() {\r\n\tassembly {\r\n\t\tverbatim_0i_0o(hex\"c0\")\r\n\t}\r\n}\r\n```\r\n\r\nWhen compiling with `solc`:\r\n\r\n```\r\nError: Function \"verbatim_0i_0o\" not found.\r\n```\r\n\r\nWhat is the motivation for disabling verbatim in Solidity? I understand that it must be used with care and only for very specific reasons. My use case is that I am targetting a forked version of the EVM interpreter with new opcodes. I'm currently unable to use `solc` to compile contracts targetting this fork.\r\n\r\nThanks!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12067/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12067/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/933311063",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-933311063",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 933311063,
    "node_id": "IC_kwDOAm_5kc43oTJX",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-04T09:32:35Z",
    "updated_at": "2021-10-04T09:32:35Z",
    "author_association": "MEMBER",
    "body": "The reason is that we have to think about which optimizer steps to disable, and probably we have to disable almost all of them. Can you tell us more about the new opcodes in the fork?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/933311063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941038134",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941038134",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941038134,
    "node_id": "IC_kwDOAm_5kc44Fxo2",
    "user": {
      "login": "dessaya",
      "id": 7060033,
      "node_id": "MDQ6VXNlcjcwNjAwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7060033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dessaya",
      "html_url": "https://github.com/dessaya",
      "followers_url": "https://api.github.com/users/dessaya/followers",
      "following_url": "https://api.github.com/users/dessaya/following{/other_user}",
      "gists_url": "https://api.github.com/users/dessaya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dessaya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dessaya/subscriptions",
      "organizations_url": "https://api.github.com/users/dessaya/orgs",
      "repos_url": "https://api.github.com/users/dessaya/repos",
      "events_url": "https://api.github.com/users/dessaya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dessaya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T13:57:03Z",
    "updated_at": "2021-10-12T13:57:03Z",
    "author_association": "NONE",
    "body": "For now it's a proof of concept, and it's not even clear that this approach is the correct one.\r\n\r\nWe want to add support for Solidity as a language for an experimental language-agnostic smart contracts platform. We don't need or want to emulate a whole Ethereum blockchain, since our smart contracts run in level 2; we only need to run the Solidity code and store the current state. What we need is some way to bridge the Solidity code with the underlying sandbox; and for that one idea is to add some custom opcodes, like some form of \"syscalls\", like \"obtain the chain ID\" or \"publish an event\". Again, maybe there is a better approach but for now we are experimenting with this.\r\n\r\nThanks again!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941038134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941058814",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941058814",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941058814,
    "node_id": "IC_kwDOAm_5kc44F2r-",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T14:20:24Z",
    "updated_at": "2021-10-12T14:20:24Z",
    "author_association": "MEMBER",
    "body": "Wouldn't it be better to do this on the yul level instead? Plese feel free to schedule a call to discuss in more detail!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941058814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941104203",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941104203",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941104203,
    "node_id": "IC_kwDOAm_5kc44GBxL",
    "user": {
      "login": "dessaya",
      "id": 7060033,
      "node_id": "MDQ6VXNlcjcwNjAwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7060033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dessaya",
      "html_url": "https://github.com/dessaya",
      "followers_url": "https://api.github.com/users/dessaya/followers",
      "following_url": "https://api.github.com/users/dessaya/following{/other_user}",
      "gists_url": "https://api.github.com/users/dessaya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dessaya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dessaya/subscriptions",
      "organizations_url": "https://api.github.com/users/dessaya/orgs",
      "repos_url": "https://api.github.com/users/dessaya/repos",
      "events_url": "https://api.github.com/users/dessaya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dessaya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T15:10:25Z",
    "updated_at": "2021-10-12T15:10:25Z",
    "author_association": "NONE",
    "body": "What do you mean exactly? I know that I can write a contract in yul, and I can inject arbitrary bytecode with `verbatim`. This is what we are doing right now; but it would be nice to be able to write Solidity, and have a few small Yul blocks with `assembly {...}` where needed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941104203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941147693",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941147693",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941147693,
    "node_id": "IC_kwDOAm_5kc44GMYt",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T15:58:42Z",
    "updated_at": "2021-10-12T15:59:17Z",
    "author_association": "MEMBER",
    "body": "@dessaya To summarize why we haven't done this so far, the Yul optimizer wasn't designed keeping `verbatim` in mind. This means that if the Yul optimizer is enabled, then `verbatim` has to be used with extreme caution. We assume that users of pure Yul already are in a position to make this judgement (we have added some example situations that would lead to undefined behaviour: https://docs.soliditylang.org/en/latest/yul.html#verbatim).\r\n\r\nWe can of course allow it in Solidity's inline assembly. The question is if the Yul optimizer should be completely disabled or partly; if partly, which ones? It would be useful if you can give a list of additional opcodes that you would like to add this way, to get an idea of how this would work for your case.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941147693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941150458",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941150458",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941150458,
    "node_id": "IC_kwDOAm_5kc44GND6",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T16:01:40Z",
    "updated_at": "2021-10-12T16:01:40Z",
    "author_association": "MEMBER",
    "body": "What I meant is to compile solidity to yul using `solc --ir ` and then modify the resulting yul code where you can freely inject `verbatim`. It would be nice for us to know what exactly these syscalls are and how you want to link them to the solidity code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941150458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941185735",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941185735",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941185735,
    "node_id": "IC_kwDOAm_5kc44GVrH",
    "user": {
      "login": "dessaya",
      "id": 7060033,
      "node_id": "MDQ6VXNlcjcwNjAwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7060033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dessaya",
      "html_url": "https://github.com/dessaya",
      "followers_url": "https://api.github.com/users/dessaya/followers",
      "following_url": "https://api.github.com/users/dessaya/following{/other_user}",
      "gists_url": "https://api.github.com/users/dessaya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dessaya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dessaya/subscriptions",
      "organizations_url": "https://api.github.com/users/dessaya/orgs",
      "repos_url": "https://api.github.com/users/dessaya/repos",
      "events_url": "https://api.github.com/users/dessaya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dessaya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T16:43:58Z",
    "updated_at": "2021-10-12T16:43:58Z",
    "author_association": "NONE",
    "body": "We are still evaluating options, so we haven't settled on what the opcodes will look like exactly. But an example would be something very simple to retrieve a value from the context:\r\n\r\n```\r\nlet x := verbatim_0i_1o(hex\"c1\")\r\n```\r\n\r\nwhere the return value is provided by our sandbox; for example the (non-ethereum) address of the contract creator.\r\n\r\n@chriseth I was not aware that `solc --ir` actually produced Yul code. It looks like this could be useful for our use case. I'll explore this approach. I think we can close this issue for now. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941185735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941196737",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-941196737",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 941196737,
    "node_id": "IC_kwDOAm_5kc44GYXB",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T16:58:10Z",
    "updated_at": "2021-10-12T16:58:10Z",
    "author_association": "MEMBER",
    "body": "Instead of special opcodes it is also possible to use special addresses to exchange data (i.e. precompiles or system contract on some chains). If you have complete control over your system, that may be a nicer way because all EVM compatible languages (Vyper, Fe, etc.) could be made to work with it without changes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941196737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1242303196",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1242303196",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1242303196,
    "node_id": "IC_kwDOAm_5kc5KDArc",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T18:01:12Z",
    "updated_at": "2022-09-09T18:01:12Z",
    "author_association": "MEMBER",
    "body": "As mentioned we wanted to have this enabled originally, but the main problem here is somehow signalling what commitments the `verbatim` code makes against various EVM properties (e.g. \"reads state\", \"modifies state\", \"terminates\", etc.)\r\n\r\nSince we have the `memory-safe` annotation, we could think about introducing more of such annotations (eventually somewhat resembling [`SemanticInformation`](https://github.com/ethereum/solidity/blob/develop/libevmasm/SemanticInformation.h)). In that case would could enabled it \"rather safely\".\r\n\r\nAdditionally we could think about introducing a \"clobbered variables\" list. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1242303196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1249966504",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1249966504",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1249966504,
    "node_id": "IC_kwDOAm_5kc5KgPmo",
    "user": {
      "login": "brockelmore",
      "id": 31553173,
      "node_id": "MDQ6VXNlcjMxNTUzMTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31553173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockelmore",
      "html_url": "https://github.com/brockelmore",
      "followers_url": "https://api.github.com/users/brockelmore/followers",
      "following_url": "https://api.github.com/users/brockelmore/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockelmore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockelmore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockelmore/subscriptions",
      "organizations_url": "https://api.github.com/users/brockelmore/orgs",
      "repos_url": "https://api.github.com/users/brockelmore/repos",
      "events_url": "https://api.github.com/users/brockelmore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockelmore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-17T01:08:21Z",
    "updated_at": "2022-09-17T01:08:21Z",
    "author_association": "NONE",
    "body": "looking forward to this! so why not just do analysis on the ops to ensure no stack manipulation deeper than the \"inputs\" in the verbatim name & ensures that only 1 element is added to the stack at the end? if you have that guarantee + memory safety, while you dont get \"full\" mutability of the execution context, you do get a decent ways safely\r\n\r\nif you want to enable this sort of check maybe something like: `assembly (\"memory-safe stack-safe\") { verbatim_1i_1o(<pop, push(1) ops>, a}`\r\n\r\nAnd if you don't have stack-safe all bets are off on optimizations? Here it would be trivial to look op by op and ensure its stack safe, and if you break the safety contract there is a compiler error. And you can also easily run an analysis to check that storage purity in solidity matches verbatim opcodes. I think at this low level its fine to force users to enumerate the safety they are guaranteeing the compiler, i.e. one could imagine:\r\n\r\n`assembly (\"memory-safe stack-safe jumpless storage-pure\")` etc. \r\n\r\nTo be clear I am not as knowledgeable on the compiler as y'all obviously, just my 2 cents\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1249966504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252229846",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1252229846",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1252229846,
    "node_id": "IC_kwDOAm_5kc5Ko4LW",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-20T11:39:24Z",
    "updated_at": "2022-09-20T11:39:24Z",
    "author_association": "MEMBER",
    "body": ">  so why not just do analysis on the ops to ensure no stack manipulation deeper than the \"inputs\" in the verbatim name & ensures that only 1 element is added to the stack at the end?\r\n\r\nOne early goal for verbatim was to support opcodes that are not yet in the EVM. Other machines like OVM1, new proposed EIPs, other EVM like chains are example use cases. So we cannot really analyze the raw bytecode in general. \r\n\r\nUser annotation is a good idea. However, we have to check what optimizations we can enable with that. The Optimizer wasn't designed with Verbatim in mind, so we'll have to really look at what steps can be broken by `verbatim` even with the correct user-annotations.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252229846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1270241865",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1270241865",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1270241865,
    "node_id": "IC_kwDOAm_5kc5LtlpJ",
    "user": {
      "login": "wschwab",
      "id": 31592931,
      "node_id": "MDQ6VXNlcjMxNTkyOTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/31592931?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wschwab",
      "html_url": "https://github.com/wschwab",
      "followers_url": "https://api.github.com/users/wschwab/followers",
      "following_url": "https://api.github.com/users/wschwab/following{/other_user}",
      "gists_url": "https://api.github.com/users/wschwab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wschwab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wschwab/subscriptions",
      "organizations_url": "https://api.github.com/users/wschwab/orgs",
      "repos_url": "https://api.github.com/users/wschwab/repos",
      "events_url": "https://api.github.com/users/wschwab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wschwab/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-06T15:13:20Z",
    "updated_at": "2022-10-06T15:13:20Z",
    "author_association": "NONE",
    "body": "> It would be useful if you can give a list of additional opcodes that you would like to add this way\r\n\r\nI'm coming in late to this conversation, but am exploring the possibility of using `verbatim` for testing [EIP-3074](https://eips.ethereum.org/EIPS/eip-3074). I originally posted in the Solidity forum [here](https://forum.soliditylang.org/t/experimental-pragma-for-eip-3074/) about experimental 3074 support, and was directed here by @cameel , who thought this to be a better route than experimental provision due to the optimizer. I've responded there since I still think experimental provision is the better path, but wanted to pursue this here too.\r\n\r\nOptimization in our case isn't really a concern - this would be meant for prototyping and validation, and wouldn't be needed in the meanwhile for production-optimized code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1270241865/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1270388088",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1270388088",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1270388088,
    "node_id": "IC_kwDOAm_5kc5LuJV4",
    "user": {
      "login": "brockelmore",
      "id": 31553173,
      "node_id": "MDQ6VXNlcjMxNTUzMTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31553173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockelmore",
      "html_url": "https://github.com/brockelmore",
      "followers_url": "https://api.github.com/users/brockelmore/followers",
      "following_url": "https://api.github.com/users/brockelmore/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockelmore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockelmore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockelmore/subscriptions",
      "organizations_url": "https://api.github.com/users/brockelmore/orgs",
      "repos_url": "https://api.github.com/users/brockelmore/repos",
      "events_url": "https://api.github.com/users/brockelmore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockelmore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-06T16:40:02Z",
    "updated_at": "2022-10-06T16:40:02Z",
    "author_association": "NONE",
    "body": "> User annotation is a good idea. However, we have to check what optimizations we can enable with that. The Optimizer wasn't designed with Verbatim in mind, so we'll have to really look at what steps can be broken by `verbatim` even with the correct user-annotations.\r\n\r\n\r\nOne option is to just disallow the optimizer to be on if verbatim is used. Then slowly as the team analyzes what optimizations are possible for given annotations, they can be added. i.e.:\r\n```\r\nassembly (\"experimental-ops\") { verbatim_i0_o0(<AUTHCALL, EXPERIMENTALOP, etc>) }\r\n```\r\n\r\nwhen there are experimental opcodes, the user defines it as such. If that flag isn't present, stack analysis can be done. If it isnt present and the user uses an unknown opcode, the compiler would report something to the effect of: `Unknown opcode in verbatim \"0xB4\". If intentional, add the \"experimental-ops\" flag and turn off the optimizer to use this op`.\r\n\r\nFor clarity, when talking about optimizations here, I assume we mean at the contract level, *not* the verbatim bytecode level? In general, I don't want the optimizer touching my verbatim (see #12951) anyway. I view the user annotation as a contract between the user and the compiler - somethings are for the compiler, somethings are for me. What I mean is things like `memory-safe` - for the compiler, `stack-safe` - for me and the compiler (the compiler can check that it is truly stack safe), `storage-pure` - for me, the compiler can easily check if storage ops occur.\r\n\r\nWhen thinking about the evm, and what optimizations would be safe (on the contract level), it feels like if the following guarantees are made it should be fine:\r\n1. `memory-safe`: \"I promise to only store values at or after the value of the free memory pointer, and if I want the value to live longer, I will update the free memory pointer\"\r\n2. `stack-safe`: \"I promise to only affect stack elements that are passed in, and/or newly generated stack elements. I will *not* touch any stack elements I do not 'own'.\"\r\n3. `jumpless`: \"I promise to not jump and break control flow analysis that may be done\" (this is less evm specific, more solidity specific, so I imagine you could have a subset of `self-contained-jumps` that allows jumping to locations *inside* the verbatim block)\r\n4. `storage-view`: \"I promise to not write to storage\" (keeps previously sload-ed values correct)\r\n5. `experimental-ops`: \"I am doing crazy stuff, I am sorry Mrs. Optimizor, go have a seat and relax\"\r\n\r\nIt feels like if you have 1, 2, 3, and 4, and the verbatim code isn't modified by the compiler, the compiler can view it as an inlined function of sorts. If you don't, the optimizer takes a hike.\r\n\r\nI may be missing some things, and if anyone things of some safety contracts that need to hold it may be worthwhile to post them here?\r\n\r\nIn my mind an MVP of this would be:\r\n```rust\r\nenum SafetyContractItem {\r\n    MemSafe,\r\n    StackSafe,\r\n    Jumpless,\r\n    StorageSafe,\r\n    Experimental\r\n}\r\n\r\nif verbatim_block\r\n    .iter()\r\n    .all(|safety_item| {\r\n        matches!(safety_item, \r\n            SafetyContractItem::MemSafe,\r\n            SafetyContractItem::StackSafe,\r\n            SafetyContractItem::Jumpless,\r\n            SafetyContractItem::StorageSafe\r\n        )\r\n        && !matches(safety_item, SafetyContractItem::Experimental)\r\n    }) {\r\n    optimizations_possible = verbatim_block.analyze_stack_promise();\r\n    optimizations_possible = verbatim_block.analyze_storage_promise();\r\n    optimizations_possible = verbatim_block.analyze_jumpless_promise();\r\n}\r\n```\r\nAnd otherwise throw an error if the optimizer is on. If only a subset of needed promises are made, then throw the error. This gets us most of the way there in my mind:\r\n1. Supports weird op codes\r\n2. Allows the vast majority of verbatim uses\r\n\r\nAnd I want to drive home that *no one* expects (nor likely wants) verbatim block interiors to be optimized by the compiler so if that is a major hang up, if possible just avoid that altogether.\r\n\r\nAgain, I could definitely be off-base here, i'm just a layman trynna to get a cool feature pushed thru :).\r\n        \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1270388088/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1477722715",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1477722715",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1477722715,
    "node_id": "IC_kwDOAm_5kc5YFEJb",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-03-21T12:05:32Z",
    "updated_at": "2023-03-21T12:05:32Z",
    "author_association": "NONE",
    "body": "This issue has been marked as stale due to inactivity for the last 90 days.\nIt will be automatically closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1477722715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1477886537",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1477886537",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1477886537,
    "node_id": "IC_kwDOAm_5kc5YFsJJ",
    "user": {
      "login": "brockelmore",
      "id": 31553173,
      "node_id": "MDQ6VXNlcjMxNTUzMTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31553173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockelmore",
      "html_url": "https://github.com/brockelmore",
      "followers_url": "https://api.github.com/users/brockelmore/followers",
      "following_url": "https://api.github.com/users/brockelmore/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockelmore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockelmore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockelmore/subscriptions",
      "organizations_url": "https://api.github.com/users/brockelmore/orgs",
      "repos_url": "https://api.github.com/users/brockelmore/repos",
      "events_url": "https://api.github.com/users/brockelmore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockelmore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T13:58:28Z",
    "updated_at": "2023-03-21T13:58:28Z",
    "author_association": "NONE",
    "body": "please dont let this issue die :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1477886537/reactions",
      "total_count": 7,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1519029412",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1519029412",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1519029412,
    "node_id": "IC_kwDOAm_5kc5aioyk",
    "user": {
      "login": "robinsdan",
      "id": 115981357,
      "node_id": "U_kgDOBum8LQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/115981357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robinsdan",
      "html_url": "https://github.com/robinsdan",
      "followers_url": "https://api.github.com/users/robinsdan/followers",
      "following_url": "https://api.github.com/users/robinsdan/following{/other_user}",
      "gists_url": "https://api.github.com/users/robinsdan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robinsdan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robinsdan/subscriptions",
      "organizations_url": "https://api.github.com/users/robinsdan/orgs",
      "repos_url": "https://api.github.com/users/robinsdan/repos",
      "events_url": "https://api.github.com/users/robinsdan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robinsdan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-23T10:41:24Z",
    "updated_at": "2023-04-23T10:41:24Z",
    "author_association": "NONE",
    "body": "I want use this to insert `datahash` opcode introduced in eip4844.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1519029412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554135345",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1554135345",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1554135345,
    "node_id": "IC_kwDOAm_5kc5cojkx",
    "user": {
      "login": "Hellobloc",
      "id": 113746997,
      "node_id": "U_kgDOBsekNQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/113746997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellobloc",
      "html_url": "https://github.com/Hellobloc",
      "followers_url": "https://api.github.com/users/Hellobloc/followers",
      "following_url": "https://api.github.com/users/Hellobloc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellobloc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellobloc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellobloc/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellobloc/orgs",
      "repos_url": "https://api.github.com/users/Hellobloc/repos",
      "events_url": "https://api.github.com/users/Hellobloc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellobloc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T07:14:20Z",
    "updated_at": "2023-05-20T11:42:27Z",
    "author_association": "NONE",
    "body": "verbatim is dangerous and should not be added to solidity at will. At least it needs a lot of restrictions, such as declaring it in the compilation configuration before it can be used.\r\n\r\nA contract that uses verbatim should not be verified by the source code verifier. Thinking about verbatim can generate any bytecode's contract source code, that means I can complete the contract verification as long as I know the bytecode.\r\nThis idea comes from samczsun",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554135345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554434263",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1554434263",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1554434263,
    "node_id": "IC_kwDOAm_5kc5cpsjX",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T11:27:04Z",
    "updated_at": "2023-05-19T11:27:04Z",
    "author_association": "MEMBER",
    "body": "Yeah, verification is a good point. If we allow `verabatim`, any bytecode in the mainnet can be trivially verified by a corresponding `verbatim_0i_0o(code)`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554434263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554952652",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1554952652",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1554952652,
    "node_id": "IC_kwDOAm_5kc5crrHM",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T17:06:50Z",
    "updated_at": "2023-05-19T17:07:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Hellobloc is your point that `verbatim` makes it easier to completely obfuscate the code?\r\n\r\nI don't understand why that is a reason to not include it in solc. You can already obfuscate  code today. And if you do that, a quick look at the \"verified\" code is enough to know you are doing that and that you are (maybe) a bad actor. `verbatim` would make obfuscaton easier and way harder to decode, but I don't see how it fundamentally changes things.\r\n\r\nActually, I see something that is different: it makes it easier to get a meaningless \"Verified\" checkmark in an explorer. But IMO that's not reason enough to not add a useful feature.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1554952652/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556707965",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1556707965",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1556707965,
    "node_id": "IC_kwDOAm_5kc5cyXp9",
    "user": {
      "login": "Hellobloc",
      "id": 113746997,
      "node_id": "U_kgDOBsekNQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/113746997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellobloc",
      "html_url": "https://github.com/Hellobloc",
      "followers_url": "https://api.github.com/users/Hellobloc/followers",
      "following_url": "https://api.github.com/users/Hellobloc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellobloc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellobloc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellobloc/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellobloc/orgs",
      "repos_url": "https://api.github.com/users/Hellobloc/repos",
      "events_url": "https://api.github.com/users/Hellobloc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellobloc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-22T07:46:19Z",
    "updated_at": "2023-05-22T08:24:15Z",
    "author_association": "NONE",
    "body": "@fvictorio  I feel like you don't seem to understand what I mean. \r\nFirst of all this is definitely not a problem that can be found with a quick review, it's just that the attacker may not have constructed it very sophisticatedly.\r\nSecondly, this attack is not just about saying I deploy a contract with some `verbatim`  snippets in it that I used in such a way to make you confuse. Futher, I can go verify the source code of uniswapv4's contracts, or other large projects. It's an safety issue, you can't just think this feature makes you feel good and you ask them to add it. solidity project side is very demanding on security and you can see they need to consider a lot of things when designing and I just added one of the things they considered.\r\nSecondly, I'm not saying that this feature shouldn't be added, but I don't think a contract that uses such a feature is likely to be allowed to pass source code verification.\r\n\r\nActually the above issue is not feasible in some versions of contract source code validation because solc adds an invalid value bytecode fe at the end of the bytecode, this value is 00 in version 0.4. I have to say here that solidity really shocked me because it prevents the problem of loose assembly for source forgery, I'm not sure if this is their design, but they must have had a lot of consideration. I think it is worth discussing whether a new invalid value ending should be added inside the yul.\r\n\r\nAnd I'm curious about what you call obfuscate code because I'm looking forward to having more options for constructing source code, maybe I'm missing something.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556707965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556767117",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1556767117",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1556767117,
    "node_id": "IC_kwDOAm_5kc5cymGN",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-22T08:24:37Z",
    "updated_at": "2023-05-22T08:24:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "That's fair, thanks for elaborating 🙂",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556767117/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556774248",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1556774248",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1556774248,
    "node_id": "IC_kwDOAm_5kc5cyn1o",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-22T08:29:15Z",
    "updated_at": "2023-05-22T08:29:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "> And I'm curious about what you call obfuscate code because I'm looking forward to having more options for constructing source code, maybe I'm missing something.\r\n\r\nMy initial understanding of the concern was that it allowed you to verify a contract with meaningless code, which is sort of like obfuscating it. But I was thinking about the deployer doing it. I agree that this makes troll-verifying (I see a deployment on chain from a well-knwon account and immediately verify it using `verbatim`) super easy and something that explorers should take into account.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556774248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556787812",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1556787812",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1556787812,
    "node_id": "IC_kwDOAm_5kc5cyrJk",
    "user": {
      "login": "Hellobloc",
      "id": 113746997,
      "node_id": "U_kgDOBsekNQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/113746997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellobloc",
      "html_url": "https://github.com/Hellobloc",
      "followers_url": "https://api.github.com/users/Hellobloc/followers",
      "following_url": "https://api.github.com/users/Hellobloc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellobloc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellobloc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellobloc/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellobloc/orgs",
      "repos_url": "https://api.github.com/users/Hellobloc/repos",
      "events_url": "https://api.github.com/users/Hellobloc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellobloc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-22T08:38:18Z",
    "updated_at": "2023-05-22T08:42:33Z",
    "author_association": "NONE",
    "body": "I feel like it shouldn't throw the question to the source code verifier.  Actually I feel there is a solution to generate a new invalid value ending for `verbatim`, I don't know if that would solve the problem.\r\nBut like I said at the beginning, there needs to be at least some restrictions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1556787812/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1670603608",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1670603608",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1670603608,
    "node_id": "IC_kwDOAm_5kc5jk2NY",
    "user": {
      "login": "highskore",
      "id": 80688826,
      "node_id": "MDQ6VXNlcjgwNjg4ODI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/80688826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/highskore",
      "html_url": "https://github.com/highskore",
      "followers_url": "https://api.github.com/users/highskore/followers",
      "following_url": "https://api.github.com/users/highskore/following{/other_user}",
      "gists_url": "https://api.github.com/users/highskore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/highskore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/highskore/subscriptions",
      "organizations_url": "https://api.github.com/users/highskore/orgs",
      "repos_url": "https://api.github.com/users/highskore/repos",
      "events_url": "https://api.github.com/users/highskore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/highskore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T03:36:47Z",
    "updated_at": "2023-08-09T03:36:47Z",
    "author_association": "NONE",
    "body": "we still need this 💯",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1670603608/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1802564437",
    "html_url": "https://github.com/ethereum/solidity/issues/12067#issuecomment-1802564437",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12067",
    "id": 1802564437,
    "node_id": "IC_kwDOAm_5kc5rcPNV",
    "user": {
      "login": "brockelmore",
      "id": 31553173,
      "node_id": "MDQ6VXNlcjMxNTUzMTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31553173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockelmore",
      "html_url": "https://github.com/brockelmore",
      "followers_url": "https://api.github.com/users/brockelmore/followers",
      "following_url": "https://api.github.com/users/brockelmore/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockelmore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockelmore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockelmore/subscriptions",
      "organizations_url": "https://api.github.com/users/brockelmore/orgs",
      "repos_url": "https://api.github.com/users/brockelmore/repos",
      "events_url": "https://api.github.com/users/brockelmore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockelmore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T20:00:45Z",
    "updated_at": "2023-11-08T20:02:35Z",
    "author_association": "NONE",
    "body": "A proposal for fixing the verification issue:\r\n\r\nHave an unreachable metadata that points to verbatim blocks:\r\n```solidity\r\ncontract A {\r\n    function b() public returns (uint256) {\r\n        uint256 x = 100;\r\n        uint256 y;\r\n        assembly (\"memory-safe\") {\r\n            y := verbatim_0i_1o(hex\"6001\")\r\n        }\r\n        return x + y;\r\n    }\r\n}\r\n```\r\n\r\nWould loosely codegen into:\r\n```asm\r\nb_block:\r\nPUSH(100)\r\n\r\nverbatim_block:\r\nPUSH(1)\r\n\r\n// mstore and return\r\n// .. snip ..\r\nVERBATIM_METADATA_START\r\nNUM_VERBATIM_BLOCKS\r\nVERBATIM_IDENT_OP\r\nverbatim_block\r\nverbatim_block_len\r\n\r\n// if more than one verbatims\r\nVERBATIM_IDENT_OP\r\nverbatim_block2\r\nverbatim_block2_len\r\n```\r\n\r\nThis would make it easy on an integrator like etherscan to verify that only portions of the code are `verbatim` and couldn't be faked (unless the author of the contract explicitly messes with it). They handle regular metadata fine so i dont think this would be a big challenge for them.\r\n\r\nSure this adds 3 bytes/verbatim block + 2, but i think thats fine personally.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1802564437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

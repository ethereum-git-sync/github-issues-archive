{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13214/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13214/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13214/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13214",
  "id": 1284736902,
  "node_id": "I_kwDOAm_5kc5Mk4eG",
  "number": 13214,
  "title": "Add unitialized variable warning when for-loops contain uninitialized variables",
  "user": {
    "login": "lukehutch",
    "id": 811305,
    "node_id": "MDQ6VXNlcjgxMTMwNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/811305?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lukehutch",
    "html_url": "https://github.com/lukehutch",
    "followers_url": "https://api.github.com/users/lukehutch/followers",
    "following_url": "https://api.github.com/users/lukehutch/following{/other_user}",
    "gists_url": "https://api.github.com/users/lukehutch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lukehutch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lukehutch/subscriptions",
    "organizations_url": "https://api.github.com/users/lukehutch/orgs",
    "repos_url": "https://api.github.com/users/lukehutch/repos",
    "events_url": "https://api.github.com/users/lukehutch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lukehutch/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 1012613901,
      "node_id": "MDU6TGFiZWwxMDEyNjEzOTAx",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/easy%20difficulty",
      "name": "easy difficulty",
      "color": "0b3f89",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-06-25T22:56:43Z",
  "updated_at": "2022-08-03T13:41:15Z",
  "closed_at": "2022-08-03T13:41:14Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe following compiles and runs fine in Solidity without any warning:\r\n\r\n```solidity\r\nfor (uint256 i; i < 10; ++i) { ... }\r\n```\r\n\r\nWhereas the following should probably be required:\r\n\r\n```solidity\r\nfor (uint256 i = 0; i < 10; ++i) { ... }\r\n```\r\n\r\nI believe all variables are zero by default in Solidity, so the current behavior is not surprising, but the first of the two examples above gives an uninitialized variable warning in Slither, which is probably appropriate. (Often uninitialized variables are symptomatic of bugs in code, so they should always be initialized.)\r\n\r\nRelated question -- in the second code example above, is `i = 0` duplicating the work of zeroing out `i`, since `uint256 i` already zeroes it out?\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.14\r\n- Target EVM version (as per compiler settings):\r\n- Framework/IDE (e.g. Truffle or Remix):\r\n- EVM execution environment / backend / blockchain client: Hardhat\r\n- Operating system:  Linux\r\n\r\n## Steps to Reproduce\r\n\r\nSee above",
  "closed_by": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13214/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13214/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1176476705",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1176476705",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1176476705,
    "node_id": "IC_kwDOAm_5kc5GH5wh",
    "user": {
      "login": "timweri",
      "id": 9196362,
      "node_id": "MDQ6VXNlcjkxOTYzNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9196362?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timweri",
      "html_url": "https://github.com/timweri",
      "followers_url": "https://api.github.com/users/timweri/followers",
      "following_url": "https://api.github.com/users/timweri/following{/other_user}",
      "gists_url": "https://api.github.com/users/timweri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timweri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timweri/subscriptions",
      "organizations_url": "https://api.github.com/users/timweri/orgs",
      "repos_url": "https://api.github.com/users/timweri/repos",
      "events_url": "https://api.github.com/users/timweri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timweri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T17:11:14Z",
    "updated_at": "2022-07-06T17:11:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure what the decision is on implementing this but I would like to take a jab at it.\r\n\r\nHowever, regarding the question, I believe `i = 0` does not zero `i` twice:\r\n\r\n`explicit_zero.sol`:\r\n```solidity\r\ncontract Test {\r\n    uint256 num;\r\n    function f() public {\r\n        for (uint256 i = 0; i < 10; i++) {\r\n            num++;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`default_zero.sol`:\r\n```solidity\r\ncontract Test {\r\n    uint256 num;\r\n    function f() public {\r\n        for (uint256 i; i < 10; i++) {\r\n            num++;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nRunning\r\n```sh\r\n diff --unified \\\r\n    <(solc explicit_zero.sol --optimize --ir-optimized --debug-info none) \\\r\n    <(solc default_zero.sol --optimize --ir-optimized --debug-info none)\r\n```\r\ngives\r\n```diff\r\n@@ -1,18 +1,18 @@\r\n Optimized IR:\r\n-/// @use-src 0:\"explicit_zero.sol\"\r\n-object \"Test_22\" {\r\n+/// @use-src 0:\"default_zero.sol\"\r\n+object \"Test_21\" {\r\n     code {\r\n         {\r\n             let _1 := memoryguard(0x80)\r\n             mstore(64, _1)\r\n             if callvalue() { revert(0, 0) }\r\n-            let _2 := datasize(\"Test_22_deployed\")\r\n-            codecopy(_1, dataoffset(\"Test_22_deployed\"), _2)\r\n+            let _2 := datasize(\"Test_21_deployed\")\r\n+            codecopy(_1, dataoffset(\"Test_21_deployed\"), _2)\r\n             return(_1, _2)\r\n         }\r\n     }\r\n-    /// @use-src 0:\"explicit_zero.sol\"\r\n-    object \"Test_22_deployed\" {\r\n+    /// @use-src 0:\"default_zero.sol\"\r\n+    object \"Test_21_deployed\" {\r\n         code {\r\n             {\r\n                 mstore(64, memoryguard(0x80))\r\n@@ -48,7 +48,7 @@\r\n                 ret := add(value, 1)\r\n             }\r\n         }\r\n-        data \".metadata\" hex\"a2646970667358221220a099cb50fdae23f7d7946d610696635d5469af5c2c0012df3db7491309b1a3b064736f6c637827302e382e31362d646576656c6f702e323032322e372e362b636f6d6d69742e62326163306461640058\"\r\n+        data \".metadata\" hex\"a2646970667358221220984d16232d19482b09e7c6908a65c1774e912b1094f611887b022aa5eae57ffe64736f6c637827302e382e31362d646576656c6f702e323032322e372e362b636f6d6d69742e62326163306461640058\"\r\n     }\r\n }\r\n```\r\n\r\nThe IR for initializing `i` is the same:\r\n```yul\r\n                    ....\r\n                    let _1 := 0\r\n                    if eq(0x26121ff0, shr(224, calldataload(_1)))\r\n                    {\r\n                        if callvalue() { revert(_1, _1) }\r\n                        if slt(add(calldatasize(), not(3)), _1) { revert(_1, _1) }\r\n                        let var_i := _1\r\n                    ....\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1176476705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1200091159",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1200091159",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1200091159,
    "node_id": "IC_kwDOAm_5kc5Hh_AX",
    "user": {
      "login": "StrongerXi",
      "id": 26714592,
      "node_id": "MDQ6VXNlcjI2NzE0NTky",
      "avatar_url": "https://avatars.githubusercontent.com/u/26714592?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StrongerXi",
      "html_url": "https://github.com/StrongerXi",
      "followers_url": "https://api.github.com/users/StrongerXi/followers",
      "following_url": "https://api.github.com/users/StrongerXi/following{/other_user}",
      "gists_url": "https://api.github.com/users/StrongerXi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StrongerXi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StrongerXi/subscriptions",
      "organizations_url": "https://api.github.com/users/StrongerXi/orgs",
      "repos_url": "https://api.github.com/users/StrongerXi/repos",
      "events_url": "https://api.github.com/users/StrongerXi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StrongerXi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-30T05:07:26Z",
    "updated_at": "2022-07-30T05:07:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @timweri are you still working on this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1200091159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1200098170",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1200098170",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1200098170,
    "node_id": "IC_kwDOAm_5kc5HiAt6",
    "user": {
      "login": "timweri",
      "id": 9196362,
      "node_id": "MDQ6VXNlcjkxOTYzNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9196362?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timweri",
      "html_url": "https://github.com/timweri",
      "followers_url": "https://api.github.com/users/timweri/followers",
      "following_url": "https://api.github.com/users/timweri/following{/other_user}",
      "gists_url": "https://api.github.com/users/timweri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timweri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timweri/subscriptions",
      "organizations_url": "https://api.github.com/users/timweri/orgs",
      "repos_url": "https://api.github.com/users/timweri/repos",
      "events_url": "https://api.github.com/users/timweri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timweri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-30T06:00:21Z",
    "updated_at": "2022-07-30T06:00:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hey @timweri are you still working on this?\n\nHi. No I didn't really start. I was waiting for some maintainers to comment on the necessity of this before putting in the time. But it's all yours.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1200098170/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1202191600",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1202191600",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1202191600,
    "node_id": "IC_kwDOAm_5kc5Hp_zw",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T08:39:41Z",
    "updated_at": "2022-08-02T08:39:41Z",
    "author_association": "MEMBER",
    "body": "I don't think this should be a warning - variables declared in for loops are not special in any way, so we'd either have to warn about *all* uninitialized variables, independently of whether they occur in a for-loop or not, or none of them (including those in a for loop) (see also: https://github.com/ethereum/solidity/pull/13334#pullrequestreview-1057311873).\r\n\r\nAlso I'm not quite sure, why this reporting a warning in slither is an argument for it becoming a compiler warning. Arguably, there is call for avoiding uninitialized variables in general, but this is exactly the kind of opinionated style question that I'd think is best located in an external static analysis tool and *not* in the compiler. The behaviour of uninitialized variables is generally well-defined (except for storage pointers, in which the compiler does have a special checking logic), so as far as I'm concerned there is no need for the compiler to warn about it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1202191600/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1202600038",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1202600038",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1202600038,
    "node_id": "IC_kwDOAm_5kc5Hrjhm",
    "user": {
      "login": "lukehutch",
      "id": 811305,
      "node_id": "MDQ6VXNlcjgxMTMwNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/811305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukehutch",
      "html_url": "https://github.com/lukehutch",
      "followers_url": "https://api.github.com/users/lukehutch/followers",
      "following_url": "https://api.github.com/users/lukehutch/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukehutch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukehutch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukehutch/subscriptions",
      "organizations_url": "https://api.github.com/users/lukehutch/orgs",
      "repos_url": "https://api.github.com/users/lukehutch/repos",
      "events_url": "https://api.github.com/users/lukehutch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukehutch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T13:44:52Z",
    "updated_at": "2022-08-02T13:44:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, that all makes sense. Should this bug be closed then? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1202600038/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1203966946",
    "html_url": "https://github.com/ethereum/solidity/issues/13214#issuecomment-1203966946",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13214",
    "id": 1203966946,
    "node_id": "IC_kwDOAm_5kc5HwxPi",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-03T13:41:14Z",
    "updated_at": "2022-08-03T13:41:14Z",
    "author_association": "MEMBER",
    "body": "Alright, we quickly talked about this in our meeting today and decided to indeed close it, so I'm closing!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1203966946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

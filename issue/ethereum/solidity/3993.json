{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3993",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3993/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3993/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3993/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3993",
  "id": 317690187,
  "node_id": "MDU6SXNzdWUzMTc2OTAxODc=",
  "number": 3993,
  "title": "Solidity by example: Safe Remote Purchase throws errors",
  "user": {
    "login": "franz101",
    "id": 18228395,
    "node_id": "MDQ6VXNlcjE4MjI4Mzk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/18228395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/franz101",
    "html_url": "https://github.com/franz101",
    "followers_url": "https://api.github.com/users/franz101/followers",
    "following_url": "https://api.github.com/users/franz101/following{/other_user}",
    "gists_url": "https://api.github.com/users/franz101/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/franz101/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/franz101/subscriptions",
    "organizations_url": "https://api.github.com/users/franz101/orgs",
    "repos_url": "https://api.github.com/users/franz101/repos",
    "events_url": "https://api.github.com/users/franz101/events{/privacy}",
    "received_events_url": "https://api.github.com/users/franz101/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-04-25T15:54:31Z",
  "updated_at": "2018-04-30T14:58:25Z",
  "closed_at": "2018-04-30T14:58:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Just a quick note that the example in the documentation is not working\r\n\r\nSafe Remote Purchase\r\nhttps://solidity.readthedocs.io/en/v0.4.23/solidity-by-example.html#safe-remote-purchase\r\n\r\nbrowser/Transaction.sol:62:25: Warning: Using contract member \"balance\" inherited from the address type is deprecated. Convert the contract to \"address\" type to access the member, for example use \"address(contract).balance\" instead.\r\n        seller.transfer(this.balance);\r\n          ",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3993/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3993/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384342537",
    "html_url": "https://github.com/ethereum/solidity/issues/3993#issuecomment-384342537",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3993",
    "id": 384342537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDM0MjUzNw==",
    "user": {
      "login": "franz101",
      "id": 18228395,
      "node_id": "MDQ6VXNlcjE4MjI4Mzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/18228395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/franz101",
      "html_url": "https://github.com/franz101",
      "followers_url": "https://api.github.com/users/franz101/followers",
      "following_url": "https://api.github.com/users/franz101/following{/other_user}",
      "gists_url": "https://api.github.com/users/franz101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/franz101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/franz101/subscriptions",
      "organizations_url": "https://api.github.com/users/franz101/orgs",
      "repos_url": "https://api.github.com/users/franz101/repos",
      "events_url": "https://api.github.com/users/franz101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/franz101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-25T16:07:05Z",
    "updated_at": "2018-04-25T16:07:05Z",
    "author_association": "NONE",
    "body": "My solution\r\n\r\n`pragma solidity ^0.4.22;\r\n\r\ncontract Purchase {\r\n    uint public value;\r\n    address public seller;\r\n    address public buyer;\r\n    enum State { Created, Locked, Inactive }\r\n    State public state;\r\n\r\n    // Ensure that `msg.value` is an even number.\r\n    // Division will truncate if it is an odd number.\r\n    // Check via multiplication that it wasn't an odd number.\r\n    constructor() public payable {\r\n        seller = msg.sender;\r\n        value = msg.value / 2;\r\n        require((2 * value) == msg.value, \"Value has to be even.\");\r\n    }\r\n\r\n    modifier condition(bool _condition) {\r\n        require(_condition);\r\n        _;\r\n    }\r\n\r\n    modifier onlyBuyer() {\r\n        require(\r\n            msg.sender == buyer,\r\n            \"Only buyer can call this.\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    modifier onlySeller() {\r\n        require(\r\n            msg.sender == seller,\r\n            \"Only seller can call this.\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    modifier inState(State _state) {\r\n        require(\r\n            state == _state,\r\n            \"Invalid state.\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    event Aborted();\r\n    event PurchaseConfirmed();\r\n    event ItemReceived();\r\n\r\n    /// Abort the purchase and reclaim the ether.\r\n    /// Can only be called by the seller before\r\n    /// the contract is locked.\r\n    function abort()\r\n        public\r\n        onlySeller\r\n        inState(State.Created)\r\n    {\r\n        emit Aborted();\r\n        state = State.Inactive;\r\n        seller.transfer(address(this).balance);\r\n    }\r\n\r\n    /// Confirm the purchase as buyer.\r\n    /// Transaction has to include `2 * value` ether.\r\n    /// The ether will be locked until confirmReceived\r\n    /// is called.\r\n    function confirmPurchase()\r\n        public\r\n        inState(State.Created)\r\n        condition(msg.value == (2 * value))\r\n        payable\r\n    {\r\n        emit PurchaseConfirmed();\r\n        buyer = msg.sender;\r\n        state = State.Locked;\r\n    }\r\n\r\n    /// Confirm that you (the buyer) received the item.\r\n    /// This will release the locked ether.\r\n    function confirmReceived()\r\n        public\r\n        onlyBuyer\r\n        inState(State.Locked)\r\n    {\r\n        emit ItemReceived();\r\n        // It is important to change the state first because\r\n        // otherwise, the contracts called using `send` below\r\n        // can call in again here.\r\n        state = State.Inactive;\r\n\r\n        // NOTE: This actually allows both the buyer and the seller to\r\n        // block the refund - the withdraw pattern should be used.\r\n\r\n        buyer.transfer(value);\r\n        seller.transfer(address(this).balance);\r\n    }\r\n}`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384342537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384554195",
    "html_url": "https://github.com/ethereum/solidity/issues/3993#issuecomment-384554195",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3993",
    "id": 384554195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDU1NDE5NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-26T08:17:12Z",
    "updated_at": "2018-04-26T08:17:12Z",
    "author_association": "MEMBER",
    "body": "Thanks! Can you create a pull request with this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384554195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

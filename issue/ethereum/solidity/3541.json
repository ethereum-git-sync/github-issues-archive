{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3541",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3541/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3541/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3541/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3541",
  "id": 297942073,
  "node_id": "MDU6SXNzdWUyOTc5NDIwNzM=",
  "number": 3541,
  "title": "The right way to create a struct instance inside a function",
  "user": {
    "login": "Grobeu",
    "id": 36551061,
    "node_id": "MDQ6VXNlcjM2NTUxMDYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/36551061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Grobeu",
    "html_url": "https://github.com/Grobeu",
    "followers_url": "https://api.github.com/users/Grobeu/followers",
    "following_url": "https://api.github.com/users/Grobeu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Grobeu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Grobeu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Grobeu/subscriptions",
    "organizations_url": "https://api.github.com/users/Grobeu/orgs",
    "repos_url": "https://api.github.com/users/Grobeu/repos",
    "events_url": "https://api.github.com/users/Grobeu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Grobeu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074438,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0Mzg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    },
    {
      "id": 717596767,
      "node_id": "MDU6TGFiZWw3MTc1OTY3Njc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "006b75",
      "default": true,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-02-16T22:39:13Z",
  "updated_at": "2018-09-24T13:41:46Z",
  "closed_at": "2018-09-24T13:41:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I read in a stackoverflow discussion that if you create a storage variable inside a function, it could overwrite another existing one in the global scope of the smart contract, is that true?\r\n\r\nAlso, if I wanted to create a new struct variable inside a function, and then add push it to an array, should I create is in the storage space or memory space?\r\n\r\n```\r\nMyStruct storage newStruct;\r\n... // modifiying newStruct variables\r\nmyStructsArray.push(newStruct);\r\n```\r\n\r\nOr\r\n\r\n```\r\nMyStruct memory newStruct;\r\n... // modifiying newStruct variables\r\nmyStructsArray.push(newStruct);\r\n```\r\n\r\nSame question for when wanting to add a newly instantiated struct to a mapping:\r\n\r\n```\r\nMyStruct storage/memory newStruct;\r\n...\r\nMyStructMapping[index] = newStruct;\r\n```",
  "closed_by": {
    "login": "ChrisChinchilla",
    "id": 42080,
    "node_id": "MDQ6VXNlcjQyMDgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/42080?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChrisChinchilla",
    "html_url": "https://github.com/ChrisChinchilla",
    "followers_url": "https://api.github.com/users/ChrisChinchilla/followers",
    "following_url": "https://api.github.com/users/ChrisChinchilla/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChrisChinchilla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChrisChinchilla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChrisChinchilla/subscriptions",
    "organizations_url": "https://api.github.com/users/ChrisChinchilla/orgs",
    "repos_url": "https://api.github.com/users/ChrisChinchilla/repos",
    "events_url": "https://api.github.com/users/ChrisChinchilla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChrisChinchilla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3541/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3541/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366955896",
    "html_url": "https://github.com/ethereum/solidity/issues/3541#issuecomment-366955896",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3541",
    "id": 366955896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Njk1NTg5Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-20T12:00:15Z",
    "updated_at": "2018-02-20T12:00:15Z",
    "author_association": "MEMBER",
    "body": "It is impossible to allocate an object in storage. Because of that, the latter examples are correct. We should clarify this with examples in the documentation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366955896/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/367144539",
    "html_url": "https://github.com/ethereum/solidity/issues/3541#issuecomment-367144539",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3541",
    "id": 367144539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzE0NDUzOQ==",
    "user": {
      "login": "devzl",
      "id": 17701838,
      "node_id": "MDQ6VXNlcjE3NzAxODM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17701838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devzl",
      "html_url": "https://github.com/devzl",
      "followers_url": "https://api.github.com/users/devzl/followers",
      "following_url": "https://api.github.com/users/devzl/following{/other_user}",
      "gists_url": "https://api.github.com/users/devzl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devzl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devzl/subscriptions",
      "organizations_url": "https://api.github.com/users/devzl/orgs",
      "repos_url": "https://api.github.com/users/devzl/repos",
      "events_url": "https://api.github.com/users/devzl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devzl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-20T22:34:12Z",
    "updated_at": "2018-02-20T22:34:12Z",
    "author_association": "NONE",
    "body": "The line `MyStruct storage newStruct;` will override whatever first state variable that was declared in the global scope of the smart contract.\r\n\r\nDeclaring the new struct in memory before pushing it to an array seems to work perfectly well as per my tests.\r\n\r\nFor the mapping, there is no need to instantiate a struct. Just modify the struct by index directly. For example:\r\n\r\n    function f (uint index, uint _a, uint _b) public {\r\n\r\n        MyStructMapping[index].a = _a;\r\n\r\n        MyStructMapping[index].b = _b;\r\n\r\n    }\r\n\r\nFrom the docs: \r\n\r\n> Mappings can be seen as hash tables which are virtually initialized such that every possible key exists and is mapped to a value whose byte-representation is all zeros",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/367144539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/374057719",
    "html_url": "https://github.com/ethereum/solidity/issues/3541#issuecomment-374057719",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3541",
    "id": 374057719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDA1NzcxOQ==",
    "user": {
      "login": "MatthewDLudwig",
      "id": 6557206,
      "node_id": "MDQ6VXNlcjY1NTcyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6557206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MatthewDLudwig",
      "html_url": "https://github.com/MatthewDLudwig",
      "followers_url": "https://api.github.com/users/MatthewDLudwig/followers",
      "following_url": "https://api.github.com/users/MatthewDLudwig/following{/other_user}",
      "gists_url": "https://api.github.com/users/MatthewDLudwig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MatthewDLudwig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MatthewDLudwig/subscriptions",
      "organizations_url": "https://api.github.com/users/MatthewDLudwig/orgs",
      "repos_url": "https://api.github.com/users/MatthewDLudwig/repos",
      "events_url": "https://api.github.com/users/MatthewDLudwig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MatthewDLudwig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-18T22:23:26Z",
    "updated_at": "2018-03-18T22:25:17Z",
    "author_association": "NONE",
    "body": "Does the situation differ if you're taking something out of a mapping or array and don't want to create the space for it, just reference the stored object?\r\n\r\n    Player storage player = players[_tokenId];\r\n    playerName = player.name;\r\n    internalPlayerId = player.internalPlayerId;\r\n    sellingPrice = playerIndexToPrice[_tokenId];\r\n    owner = playerIndexToOwner[_tokenId];\r\n\r\n\r\nThis code isn't accessing the values of the contract but instead the struct stored in the players mapping.  Should memory have been used or would that cause extra space on the stack to be used.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/374057719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/423978482",
    "html_url": "https://github.com/ethereum/solidity/issues/3541#issuecomment-423978482",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3541",
    "id": 423978482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzk3ODQ4Mg==",
    "user": {
      "login": "ChrisChinchilla",
      "id": 42080,
      "node_id": "MDQ6VXNlcjQyMDgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/42080?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisChinchilla",
      "html_url": "https://github.com/ChrisChinchilla",
      "followers_url": "https://api.github.com/users/ChrisChinchilla/followers",
      "following_url": "https://api.github.com/users/ChrisChinchilla/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisChinchilla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisChinchilla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisChinchilla/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisChinchilla/orgs",
      "repos_url": "https://api.github.com/users/ChrisChinchilla/repos",
      "events_url": "https://api.github.com/users/ChrisChinchilla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisChinchilla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-24T13:41:46Z",
    "updated_at": "2018-09-24T13:41:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like this was resolved.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/423978482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

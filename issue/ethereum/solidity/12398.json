{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12398",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12398/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12398/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12398/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12398",
  "id": 1077289546,
  "node_id": "I_kwDOAm_5kc5ANiJK",
  "number": 12398,
  "title": "Skip empty output from abstract contracts and interfaces on the CLI",
  "user": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3515010024,
      "node_id": "LA_kwDOAm_5kc7Rgsvo",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/good%20first%20issue%20candidate",
      "name": "good first issue candidate",
      "color": "91B44D",
      "default": false,
      "description": "Could be a \"good first issue\" but something is blocking it or it has open questions."
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438157609,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjpKQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20impact",
      "name": "low impact",
      "color": "001dff",
      "default": false,
      "description": "Changes are not very noticeable or potential benefits are limited."
    },
    {
      "id": 4438490842,
      "node_id": "LA_kwDOAm_5kc8AAAABCI3-2g",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20have",
      "name": "should have",
      "color": "ffbe6c",
      "default": false,
      "description": "We like the idea but itâ€™s not important enough to be a part of the roadmap."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-12-10T22:45:31Z",
  "updated_at": "2022-09-14T15:50:05Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\nWhen all contracts to compile are abstract or are interfaces, the compiler should either skip them in the output or provide a message saying that the output was empty.\r\n\r\n## Motivation\r\nHandling such contracts the same way we handle actually deployable contracts may make users confused as to whether they're supposed to deploy them too or not. This is especially confusing when `--output-dir` option is used because the files are then created on disk even if empty and the user might not realize that they can be safely discarded in that case.\r\n\r\n## Example\r\n`test.sol`\r\n```solidity\r\n// SPDX-License-Identifier: GPL-3.0\r\npragma solidity >=0.0;\r\n\r\ninterface C {\r\n    event E();\r\n    function f() external;\r\n}\r\n```\r\n```bash\r\nsolc test.sol --bin --ir --ir-optimized --asm --asm-json --ewasm --bin-runtime --opcodes --gas\r\n```\r\n```\r\n======= test.sol:C =======\r\nEVM assembly:\r\nnull\r\nGas estimation:\r\nOpcodes:\r\n\r\nBinary:\r\n\r\nBinary of the runtime part:\r\n\r\nIR:\r\n\r\nOptimized IR:\r\n\r\nEwasm text:\r\n\r\nEwasm binary (hex):\r\n```\r\n\r\nNote that not all outputs are empty. `--hashes`, `--devdoc`, `--userdoc` and `--ast-compact-json` do provide useful output even for interfaces and abstract contracts. And `--storage-layout` always prints `{\"storage\":[]}` but it's technically non-empty output.\r\n\r\n## Specification\r\n1. When a given output is completely empty, include a message saying that it was empty.\r\n2. When all requested outputs for a given contract are empty, for brevity omit headers for all outputs and instead include a message saying that there was no output for the contract.\r\n    - Alternatively, we might want to completely omit such contracts in the output. In that case we should provide a message if all contracts in the input ended up being omitted.\r\n3. When `--output-dir` is used, do not create a file if it would end up being empty.\r\n4. When #10275 is implemented, I think it should omit the messages about empty output along with the headers.\r\n\r\n## Backwards Compatibility\r\nIt changes compiler output in a way visible to the user so technically it's a breaking change, but the change only applies to cases when there was no useful output anyway, so it's unlikely to affect tools in a significant way.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12398/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12398/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

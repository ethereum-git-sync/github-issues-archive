{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10985/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10985/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10985/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10985",
  "id": 813418988,
  "node_id": "MDU6SXNzdWU4MTM0MTg5ODg=",
  "number": 10985,
  "title": "[SMTChecker] ICE in toZ3Expr for homestead, spuriousdragon, and tangerineWhistle",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-22T11:36:10Z",
  "updated_at": "2021-03-24T13:39:25Z",
  "closed_at": "2021-03-24T13:39:25Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\n```\r\npragma experimental SMTChecker;\r\ncontract C {\r\n  struct S {\r\n    string a;\r\n    uint256 y;\r\n  }\r\n  S public s;\r\n  function g() public returns (uint256) {\r\n    this.s();\r\n  }\r\n}\r\n```\r\n\r\nthrows\r\n\r\nhttps://github.com/ethereum/solidity/blob/6fd5ea01d1c943b7b40afbc72fcb60be3bb2a78a/libsmtutil/Z3Interface.cpp#L270\r\n\r\n## Environment\r\n\r\n- Compiler version: 6fd5ea01d\r\n- Target EVM version (as per compiler settings): homestead/spurious dragon\r\n- Framework/IDE (e.g. Truffle or Remix):\r\n- EVM execution environment / backend / blockchain client:\r\n- Operating system:\r\n\r\n## Steps to Reproduce\r\n\r\n<!--\r\nPlease provide a *minimal* source code example to trigger the bug you have found.\r\nPlease also mention any command line flags that are necessary for triggering the bug.\r\nProvide as much information as necessary to reproduce the bug.\r\n\r\n```solidity\r\n// Some *minimal* Solidity source code to reproduce the bug.\r\n// ...\r\n```\r\n-->\r\n\r\n```\r\n$ solc --evm-version homestead test.sol\r\n```\r\n",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10985/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10985/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783343117",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-783343117",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 783343117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzM0MzExNw==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T12:35:35Z",
    "updated_at": "2021-02-22T12:35:35Z",
    "author_association": "MEMBER",
    "body": "The error I'm getting here (tested on 0.8.1) is the same as the one in #10986 that I have just reported:\r\n\r\n```\r\nSMT logic error during analysis:\r\n/solidity/libsmtutil/Z3Interface.cpp(270): Throw in function z3::expr solidity::smtutil::Z3Interface::toZ3Expr(const solidity::smtutil::Expression&)\r\nDynamic exception type: boost::wrapexcept<solidity::smtutil::SMTLogicError>\r\nstd::exception::what: Sorts Int and bytes_tuple are incompatible\r\n[solidity::util::tag_comment*] = Sorts Int and bytes_tuple are incompatible\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783343117/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783346869",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-783346869",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 783346869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzM0Njg2OQ==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T12:42:30Z",
    "updated_at": "2021-02-22T12:42:30Z",
    "author_association": "MEMBER",
    "body": "> The error I'm getting here (tested on 0.8.1) is the same as the one in #10986 that I have just reported:\r\n> \r\n> ```\r\n> SMT logic error during analysis:\r\n> /solidity/libsmtutil/Z3Interface.cpp(270): Throw in function z3::expr solidity::smtutil::Z3Interface::toZ3Expr(const solidity::smtutil::Expression&)\r\n> Dynamic exception type: boost::wrapexcept<solidity::smtutil::SMTLogicError>\r\n> std::exception::what: Sorts Int and bytes_tuple are incompatible\r\n> [solidity::util::tag_comment*] = Sorts Int and bytes_tuple are incompatible\r\n> ```\r\n\r\nAre you able to reproduce it against EVM versions other than homestead and spuriousDragon?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783346869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783351865",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-783351865",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 783351865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzM1MTg2NQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T12:52:16Z",
    "updated_at": "2021-02-22T12:52:16Z",
    "author_association": "MEMBER",
    "body": "Yeah, `tangerineWhistle`.\r\n\r\n`tangerineWhistle`, `homestead` and `spuriousDragon`: ICE.\r\n`byzantium`, `constantinople`, `petersburg`, `istanbul` and `berlin`: OK.\r\n\r\nI think that's all of them.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783351865/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783352788",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-783352788",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 783352788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzM1Mjc4OA==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T12:54:02Z",
    "updated_at": "2021-02-22T12:54:02Z",
    "author_association": "MEMBER",
    "body": "> Yeah, `tangerineWhistle`.\r\n> \r\n> `tangerineWhistle`, `homestead` and `spuriousDragon`: ICE.\r\n> `byzantium`, `constantinople`, `petersburg`, `istanbul` and `berlin`: OK.\r\n> \r\n> I think that's all of them.\r\n\r\nThank you. I'm wondering if version specific issues may have a different root cause, or if it's better to just move this to #10986 Wdyt?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783352788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783361284",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-783361284",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 783361284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzM2MTI4NA==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T13:07:50Z",
    "updated_at": "2021-02-22T13:07:50Z",
    "author_association": "MEMBER",
    "body": "I'm not sure. They could be caused by different things that just trigger the same generic message at a higher layer. The error here seems to be related to returndata not being available in these EVM versions (we have a public getter that returns a struct). #10986 on the other hand consistently fails regardless of EVM version (I just checked them all).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/783361284/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/792791277",
    "html_url": "https://github.com/ethereum/solidity/issues/10985#issuecomment-792791277",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10985",
    "id": 792791277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjc5MTI3Nw==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-08T14:27:51Z",
    "updated_at": "2021-03-08T14:27:51Z",
    "author_association": "MEMBER",
    "body": "Another ICE for the specific evm versions in this issue\r\n\r\n```\r\npragma experimental SMTChecker;\r\ncontract C{function f()public returns(bool[]memory){this.f();}}\r\n```\r\n\r\nthrows\r\n\r\nhttps://github.com/ethereum/solidity/blob/093ea4612bd2f2d99807fa3a12e8e45365e581ee/libsmtutil/SolverInterface.h#L263",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/792791277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

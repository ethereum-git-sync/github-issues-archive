{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4852",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4852/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4852/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4852/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4852",
  "id": 353264816,
  "node_id": "MDU6SXNzdWUzNTMyNjQ4MTY=",
  "number": 4852,
  "title": "security/no-assign-params: \"delegate\": Avoid assigning to function parameters.",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-08-23T07:51:48Z",
  "updated_at": "2019-08-30T07:01:28Z",
  "closed_at": "2018-08-23T08:32:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n![screenshot from 2018-08-23 12-59-34](https://user-images.githubusercontent.com/8675268/44512134-390af900-a6d7-11e8-938c-c88c581c1f96.png)\r\n",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4852/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4852/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/415336430",
    "html_url": "https://github.com/ethereum/solidity/issues/4852#issuecomment-415336430",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4852",
    "id": 415336430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTMzNjQzMA==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-23T08:32:19Z",
    "updated_at": "2018-08-23T08:32:19Z",
    "author_association": "MEMBER",
    "body": "Hi @akshaykannan ,\r\nThis doesn't seem to be an issue with the Solidity compiler.\r\nAlso, please make sure you've read the Issue template. Your screenshot only shows a message about a line of code, but it doesn't give the complete code, compiler version, how to reproduce the problem, and other important information such that we can help.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/415336430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/526484477",
    "html_url": "https://github.com/ethereum/solidity/issues/4852#issuecomment-526484477",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4852",
    "id": 526484477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNjQ4NDQ3Nw==",
    "user": {
      "login": "SCUTJcfeng",
      "id": 14869384,
      "node_id": "MDQ6VXNlcjE0ODY5Mzg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14869384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SCUTJcfeng",
      "html_url": "https://github.com/SCUTJcfeng",
      "followers_url": "https://api.github.com/users/SCUTJcfeng/followers",
      "following_url": "https://api.github.com/users/SCUTJcfeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/SCUTJcfeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SCUTJcfeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SCUTJcfeng/subscriptions",
      "organizations_url": "https://api.github.com/users/SCUTJcfeng/orgs",
      "repos_url": "https://api.github.com/users/SCUTJcfeng/repos",
      "events_url": "https://api.github.com/users/SCUTJcfeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SCUTJcfeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-30T07:01:28Z",
    "updated_at": "2019-08-30T07:01:28Z",
    "author_association": "NONE",
    "body": "I think the problem is that tha variable `to` is modified while loop, try using `address tempTo = to;` instead. I had the same problem and I fix it.\r\nSee [link](https://ethereum.stackexchange.com/questions/59128/error-security-no-assign-param-avoid-assigning-to-function-parameters)\r\n\r\nHere is my complete code (Actually this is an example in [tutorial link](https://solidity.readthedocs.io/en/v0.5.11/solidity-by-example.html))\r\n```solidity\r\npragma solidity ^0.5.10;\r\n\r\ncontract Ballot {\r\n\r\n    // this declares a new complex type which will be used for variables later.\r\n    // it will represent a single voter.\r\n    struct Voter {\r\n        // weight is accumulated by delegation\r\n        uint weight;\r\n        // if true, that person already voted\r\n        bool voted;\r\n        // person delegated to\r\n        address delegate;\r\n        // index of the voted proposal\r\n        uint vote;\r\n    }\r\n\r\n    // this is a type for a single proposal\r\n    struct Proposal {\r\n        // short name\r\n        bytes32 name;\r\n        // number of accumulated votes\r\n        uint voteCount;\r\n    }\r\n\r\n    address public chairPerson;\r\n\r\n    // 投票信息字典\r\n    // this declares a state variable that stores a `Voter` struct for each possible address\r\n    mapping (address=>Voter) public voters;\r\n\r\n    // a dynamically-sized array of `Proposal` structs.\r\n    Proposal[] public proposals;\r\n\r\n    // create a new ballot to choose one of `proposalNames`\r\n    constructor(bytes32[] memory proposalNames) public {\r\n        chairPerson = msg.sender;\r\n        voters[chairPerson].weight = 1;\r\n        for (uint i = 0; i < proposalNames.length; i++) {\r\n            proposals.push(Proposal({\r\n                name: proposalNames[i],\r\n                voteCount: 0\r\n            }));\r\n        }\r\n    }\r\n\r\n    // give voter the right to vote on this ballot\r\n    // may only be called by chari person\r\n    function giveRightToVote(address voter) public {\r\n        require(msg.sender == chairPerson, \"only chair person can give right to vote\");\r\n        require(!voters[voter].voted, \"the voter has already voted\");\r\n        require(voters[voter].weight == 0, \"the voter weight should be 0\");\r\n        // voter 初始权重为1\r\n        voters[voter].weight = 1;\r\n    }\r\n\r\n    // 你的投票权将跟随to\r\n    // delegate your vote to voter `to`\r\n    function delegate(address to) public {\r\n        address tempTo = to;\r\n        // assigns reference\r\n        Voter storage sender = voters[msg.sender];\r\n        require(!sender.voted, \"you already voted.\");\r\n        require(tempTo != msg.sender, \"you don't vote for yourself\");\r\n\r\n        // 找到委托的最终对象X, 这个对象X投的对象Y, 就是你要投的对象Y\r\n        // forward the delegation as long as `tempTo` also delegated.\r\n        // in general, such loops are very dangerous...\r\n        while (voters[tempTo].delegate != address(0)) {\r\n            tempTo = voters[tempTo].delegate;\r\n            require(tempTo != msg.sender, \"found loop in delegation\");\r\n        }\r\n        sender.voted = true;\r\n        sender.delegate = tempTo;\r\n        Voter storage final_delegate = voters[tempTo];\r\n        if (final_delegate.voted) {\r\n            // to已经投票了 所以直接往增加voteCount\r\n            proposals[final_delegate.vote].voteCount += sender.weight;\r\n        } else {\r\n            // 还没投票, 可以往权重里加\r\n            final_delegate.weight += sender.weight;\r\n        }\r\n    }\r\n\r\n    function vote(uint proposal) public {\r\n        Voter storage sender = voters[msg.sender];\r\n        require(!sender.voted, \"already voted.\");\r\n        sender.voted = true;\r\n        sender.vote = proposal;\r\n        // 权重用于投票\r\n        proposals[proposal].voteCount += sender.weight;\r\n    }\r\n\r\n    // 遍历投票情况, 选出最高投票的人\r\n    function winningProposal() public view returns (uint winningProposal_) {\r\n        uint winningVoteCount = 0;\r\n        for (uint p = 0; p < proposals.length; p++) {\r\n            if (proposals[p].voteCount > winningVoteCount) {\r\n                winningVoteCount = proposals[p].voteCount;\r\n                winningProposal_ = p;\r\n            }\r\n        }\r\n    }\r\n\r\n    function winnerName() public view returns (bytes32 winnerName_) {\r\n        winnerName_ = proposals[winningProposal()].name;\r\n    }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/526484477/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

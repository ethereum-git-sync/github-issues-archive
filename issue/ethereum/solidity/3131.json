{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3131/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3131/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3131/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3131",
  "id": 268694548,
  "node_id": "MDU6SXNzdWUyNjg2OTQ1NDg=",
  "number": 3131,
  "title": "Function signatures do not take return type into account",
  "user": {
    "login": "Qqwy",
    "id": 5345745,
    "node_id": "MDQ6VXNlcjUzNDU3NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5345745?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Qqwy",
    "html_url": "https://github.com/Qqwy",
    "followers_url": "https://api.github.com/users/Qqwy/followers",
    "following_url": "https://api.github.com/users/Qqwy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Qqwy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Qqwy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Qqwy/subscriptions",
    "organizations_url": "https://api.github.com/users/Qqwy/orgs",
    "repos_url": "https://api.github.com/users/Qqwy/repos",
    "events_url": "https://api.github.com/users/Qqwy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Qqwy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2017-10-26T09:45:42Z",
  "updated_at": "2018-03-01T15:59:48Z",
  "closed_at": "2018-03-01T15:59:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "From the [Solidity documentation](http://solidity.readthedocs.io/en/develop/abi-spec.html?highlight=signature#function-selector)\r\n\r\n> The first four bytes of the call data for a function call specifies the function to be called. It is the first (left, high-order in big-endian) four bytes of the Keccak (SHA-3) hash of the signature of the function. The signature is defined as the canonical expression of the basic prototype, i.e. the function name with the parenthesised list of parameter types. Parameter types are split by a single comma - no spaces are used.\r\n\r\nIt seems that the return type of the function is not taken into account. Does this mean that a contract that returns something that the caller contract does not expect is able to exploit problems with implicit type conversions?\r\n\r\nI have not yet had the time to create a test case to try what happens in practice, but it seems very odd to\r\n not have the return type be part of the function signature/function selector that is used to decide what function is called (and if it is possible at all to call a function on a certain contract).\r\n\r\nAm I missing something?",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3131/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3131/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339614743",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-339614743",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 339614743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTYxNDc0Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-26T09:55:16Z",
    "updated_at": "2017-10-26T09:55:16Z",
    "author_association": "MEMBER",
    "body": "The function selector only has four bytes, so there is no bijection between function selector and the type of the function anyway. If you call functions on contracts that are not compiled from the source code you assume they are compiled from, such attacks are also possible if you take the return parameters into the selector.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339614743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339806396",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-339806396",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 339806396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTgwNjM5Ng==",
    "user": {
      "login": "VoR0220",
      "id": 7756785,
      "node_id": "MDQ6VXNlcjc3NTY3ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7756785?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VoR0220",
      "html_url": "https://github.com/VoR0220",
      "followers_url": "https://api.github.com/users/VoR0220/followers",
      "following_url": "https://api.github.com/users/VoR0220/following{/other_user}",
      "gists_url": "https://api.github.com/users/VoR0220/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VoR0220/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VoR0220/subscriptions",
      "organizations_url": "https://api.github.com/users/VoR0220/orgs",
      "repos_url": "https://api.github.com/users/VoR0220/repos",
      "events_url": "https://api.github.com/users/VoR0220/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VoR0220/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-26T21:28:36Z",
    "updated_at": "2017-10-26T21:28:36Z",
    "author_association": "MEMBER",
    "body": "...you know I never thought about this, but why weren't outputs included in the original function signature sha3? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339806396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339807807",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-339807807",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 339807807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTgwNzgwNw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-26T21:34:55Z",
    "updated_at": "2017-10-26T21:34:55Z",
    "author_association": "MEMBER",
    "body": "Function overloading can have a hard time determining what expressions are valid (function as right hand side vs. lvalue) and more importantly if the return value is not assigned to anything which one to take from a return-overloaded case?\r\n\r\nThus many languages (such as C++) doesn't support it. I assume Solidity took a good chunk of early decisions from C++.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/339807807/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353600997",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-353600997",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 353600997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzYwMDk5Nw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-22T13:44:18Z",
    "updated_at": "2017-12-22T13:44:18Z",
    "author_association": "MEMBER",
    "body": "@elenadimitrova do you want to incorporate this last comment in to the documentation?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353600997/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353615983",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-353615983",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 353615983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzYxNTk4Mw==",
    "user": {
      "login": "Qqwy",
      "id": 5345745,
      "node_id": "MDQ6VXNlcjUzNDU3NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5345745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Qqwy",
      "html_url": "https://github.com/Qqwy",
      "followers_url": "https://api.github.com/users/Qqwy/followers",
      "following_url": "https://api.github.com/users/Qqwy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Qqwy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Qqwy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Qqwy/subscriptions",
      "organizations_url": "https://api.github.com/users/Qqwy/orgs",
      "repos_url": "https://api.github.com/users/Qqwy/repos",
      "events_url": "https://api.github.com/users/Qqwy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Qqwy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-22T15:09:50Z",
    "updated_at": "2017-12-22T15:09:50Z",
    "author_association": "NONE",
    "body": "@axic I do believe that there is an important difference between supporting 'parametric return types' (which is what your C++ comment is hinting at and which indeed requires a quite powerful compiler) vs incorporating the return type in the resulting function signature's SHA3-hash (since this is a separate step that happens after the compilation itself, right?)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353615983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353622159",
    "html_url": "https://github.com/ethereum/solidity/issues/3131#issuecomment-353622159",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3131",
    "id": 353622159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzYyMjE1OQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-22T15:42:47Z",
    "updated_at": "2017-12-22T15:42:47Z",
    "author_association": "MEMBER",
    "body": "I agree that it would have been more consistent with the ABI to include the return types in the signature and other languages may utilise that feature.\r\n\r\nThe function selector on its own is not supposed to be used though, but in rather a JSON description of the ABI exists of which the clients calculate the hash themselves. This contains both inputs and outputs. See https://solidity.readthedocs.io/en/develop/abi-spec.html#json\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/353622159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13603",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13603/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13603/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13603/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13603",
  "id": 1395286299,
  "node_id": "I_kwDOAm_5kc5TKmEb",
  "number": 13603,
  "title": "The storage layout of the internal function type",
  "user": {
    "login": "hydai",
    "id": 2776756,
    "node_id": "MDQ6VXNlcjI3NzY3NTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2776756?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hydai",
    "html_url": "https://github.com/hydai",
    "followers_url": "https://api.github.com/users/hydai/followers",
    "following_url": "https://api.github.com/users/hydai/following{/other_user}",
    "gists_url": "https://api.github.com/users/hydai/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hydai/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hydai/subscriptions",
    "organizations_url": "https://api.github.com/users/hydai/orgs",
    "repos_url": "https://api.github.com/users/hydai/repos",
    "events_url": "https://api.github.com/users/hydai/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hydai/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-10-03T20:29:39Z",
  "updated_at": "2023-08-17T15:11:26Z",
  "closed_at": "2022-10-04T10:20:33Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nHi teams,\r\n\r\nI am doing some research on the storage layout. According to the documents, the external function type is 24 bytes(20 bytes for the contract address and 4 bytes for the function selector). ref: [1], [2]\r\n\r\nHowever, when I try to declare an internal function type, I found that the size is only 8 bytes. But I have no idea what's the meaning of these 8 bytes.\r\n\r\nIs there any document to identify this?\r\nThanks.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.17\r\n- Target EVM version (as per compiler settings): London\r\n- Framework/IDE (e.g. Truffle or Remix): Remix\r\n\r\n## Steps to Reproduce\r\n\r\nHere is the minimal contract to show the storage layout of the internal function type and external function type:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: UNLICENSED\r\npragma solidity ^0.8.17;\r\n\r\ncontract FuncType {\r\n    function(uint256) pure internal returns (uint256) internalFunc;\r\n    function(uint256) pure external returns (uint256) externalFunc;\r\n}\r\n```\r\n\r\nThe storage layout from remix IDE:\r\n```json\r\n{\r\n\t\"storage\": [\r\n\t\t{\r\n\t\t\t\"astId\": 9,\r\n\t\t\t\"contract\": \"contracts/SolidityTutorial/st.sol:FuncType\",\r\n\t\t\t\"label\": \"internalFunc\",\r\n\t\t\t\"offset\": 0,\r\n\t\t\t\"slot\": \"0\",\r\n\t\t\t\"type\": \"t_function_internal_pure(t_uint256)returns(t_uint256)\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"astId\": 17,\r\n\t\t\t\"contract\": \"contracts/SolidityTutorial/st.sol:FuncType\",\r\n\t\t\t\"label\": \"externalFunc\",\r\n\t\t\t\"offset\": 8,\r\n\t\t\t\"slot\": \"0\",\r\n\t\t\t\"type\": \"t_function_external_pure(t_uint256)returns(t_uint256)\"\r\n\t\t}\r\n\t],\r\n\t\"types\": {\r\n\t\t\"t_function_external_pure(t_uint256)returns(t_uint256)\": {\r\n\t\t\t\"encoding\": \"inplace\",\r\n\t\t\t\"label\": \"function (uint256) pure external returns (uint256)\",\r\n\t\t\t\"numberOfBytes\": \"24\"\r\n\t\t},\r\n\t\t\"t_function_internal_pure(t_uint256)returns(t_uint256)\": {\r\n\t\t\t\"encoding\": \"inplace\",\r\n\t\t\t\"label\": \"function (uint256) pure returns (uint256)\",\r\n\t\t\t\"numberOfBytes\": \"8\"\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n[1]: https://docs.soliditylang.org/en/v0.8.17/abi-spec.html#function-selector\r\n[2]: https://docs.soliditylang.org/en/v0.8.17/internals/layout_in_storage.html",
  "closed_by": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13603/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13603/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1266728253",
    "html_url": "https://github.com/ethereum/solidity/issues/13603#issuecomment-1266728253",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13603",
    "id": 1266728253,
    "node_id": "IC_kwDOAm_5kc5LgL09",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T10:20:33Z",
    "updated_at": "2022-10-04T10:20:33Z",
    "author_association": "MEMBER",
    "body": "We consider the interpretation of internal function pointer value to be an implementation detail, which is why this is undocumented. In the legacy codegen they're jump addresses (or a combination of two addresses to account for differences between construction and deployed bytecode). In the IR codegen they're just arbitrary IDs assigned to functions by the compiler.\r\n\r\nI'm closing this since this does not look like a bug report or a feature request. I think that our [forum](https://forum.soliditylang.org) is a better place to ask these kinds of questions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1266728253/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1682458881",
    "html_url": "https://github.com/ethereum/solidity/issues/13603#issuecomment-1682458881",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13603",
    "id": 1682458881,
    "node_id": "IC_kwDOAm_5kc5kSEkB",
    "user": {
      "login": "AmadiMichael",
      "id": 97467680,
      "node_id": "U_kgDOBc89IA",
      "avatar_url": "https://avatars.githubusercontent.com/u/97467680?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AmadiMichael",
      "html_url": "https://github.com/AmadiMichael",
      "followers_url": "https://api.github.com/users/AmadiMichael/followers",
      "following_url": "https://api.github.com/users/AmadiMichael/following{/other_user}",
      "gists_url": "https://api.github.com/users/AmadiMichael/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AmadiMichael/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AmadiMichael/subscriptions",
      "organizations_url": "https://api.github.com/users/AmadiMichael/orgs",
      "repos_url": "https://api.github.com/users/AmadiMichael/repos",
      "events_url": "https://api.github.com/users/AmadiMichael/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AmadiMichael/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-17T15:11:25Z",
    "updated_at": "2023-08-17T15:11:25Z",
    "author_association": "NONE",
    "body": "@hydai did you later ask about this in the forum? if yes, mind sharing a link? would love to read more on it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1682458881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

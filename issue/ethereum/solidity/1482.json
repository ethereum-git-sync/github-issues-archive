{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/1482/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/1482/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/1482/events",
  "html_url": "https://github.com/ethereum/solidity/issues/1482",
  "id": 193180349,
  "node_id": "MDU6SXNzdWUxOTMxODAzNDk=",
  "number": 1482,
  "title": "--optimize still emits code that can be peephole-optimized",
  "user": {
    "login": "pirapira",
    "id": 44281,
    "node_id": "MDQ6VXNlcjQ0Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/44281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pirapira",
    "html_url": "https://github.com/pirapira",
    "followers_url": "https://api.github.com/users/pirapira/followers",
    "following_url": "https://api.github.com/users/pirapira/following{/other_user}",
    "gists_url": "https://api.github.com/users/pirapira/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pirapira/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pirapira/subscriptions",
    "organizations_url": "https://api.github.com/users/pirapira/orgs",
    "repos_url": "https://api.github.com/users/pirapira/repos",
    "events_url": "https://api.github.com/users/pirapira/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pirapira/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2016-12-02T18:05:19Z",
  "updated_at": "2016-12-05T10:21:39Z",
  "closed_at": "2016-12-05T10:21:39Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "On version `Version: 0.4.7-nightly.2016.12.1+commit.3a01a87a.Linux.g++`, when I try this source\r\n```\r\n$ cat same.sol\r\n                contract ClientReceipt {\r\n                        event Deposit;\r\n                        function deposit() returns (uint) {\r\n                                Deposit();\r\n                                return 1;\r\n                        }\r\n                }\r\n```\r\nwith the optimizer,\r\n```\r\n$ solc/solc same.sol --opcode --optimize\r\nWarning: This is a pre-release compiler version, please do not use it in production.\r\nsame.sol:1:3: Warning: Source file does not specify required compiler version!\r\n                contract ClientReceipt {\r\n  ^\r\nSpanning multiple lines.\r\n\r\n======= ClientReceipt =======\r\nOpcodes: \r\nPUSH1 0x60 PUSH1 0x40 MSTORE CALLVALUE PUSH1 0x0 JUMPI JUMPDEST PUSH1 0x96 DUP1\r\nPUSH2 0x17 PUSH1 0x0 CODECOPY PUSH1 0x0 RETURN STOP PUSH1 0x60 PUSH1 0x40 MSTORE \r\nPUSH1 0xE0 PUSH1 0x2 EXP PUSH1 0x0 CALLDATALOAD DIV PUSH4 0xD0E30DB0 DUP2 EQ \r\nPUSH1 0x1C JUMPI JUMPDEST PUSH1 0x0 JUMP JUMPDEST CALLVALUE PUSH1 0x0 JUMPI \r\nPUSH1 0x26 PUSH1 0x38 JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP2 DUP3 MSTORE \r\nMLOAD SWAP1 DUP2 SWAP1 SUB PUSH1 0x20 ADD SWAP1 RETURN JUMPDEST PUSH1 0x40 \r\nMLOAD PUSH1 0x0 SWAP1 PUSH32 \r\n0xED21248CB703B524CC0029BB8669DF941BACA560163A3BC6AD184E7E9C268070 SWAP1 DUP3 \r\nSWAP1 LOG1 POP PUSH1 0x1 JUMPDEST SWAP1 JUMP \r\nSTOP LOG1 PUSH6 0x627A7A723058 SHA3 \r\nSSTORE 0xad SWAP8 0xdd DUP12 CALLDATACOPY 0x4f PUSH29 \r\n0x3BFC48F568DD8CFE3FF19C75F148F78F87E17D4EE1D068460029000000 \r\n```\r\n\r\nI see a sequence `STOP LOG1`.  This should have been removed by the rule `UnreachableCode` in `PeepholeOptimizer.cpp`.\r\n",
  "closed_by": {
    "login": "pirapira",
    "id": 44281,
    "node_id": "MDQ6VXNlcjQ0Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/44281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pirapira",
    "html_url": "https://github.com/pirapira",
    "followers_url": "https://api.github.com/users/pirapira/followers",
    "following_url": "https://api.github.com/users/pirapira/following{/other_user}",
    "gists_url": "https://api.github.com/users/pirapira/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pirapira/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pirapira/subscriptions",
    "organizations_url": "https://api.github.com/users/pirapira/orgs",
    "repos_url": "https://api.github.com/users/pirapira/repos",
    "events_url": "https://api.github.com/users/pirapira/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pirapira/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/1482/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/1482/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264595805",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264595805",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264595805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDU5NTgwNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-03T00:06:07Z",
    "updated_at": "2016-12-03T00:06:07Z",
    "author_association": "MEMBER",
    "body": "I think the sequence you are seeing is not code but data. It should be the metadata we just introduced.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264595805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264601258",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264601258",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264601258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDYwMTI1OA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-03T00:52:39Z",
    "updated_at": "2016-12-03T00:52:39Z",
    "author_association": "MEMBER",
    "body": "I think we should fix the `opcodes` output to not include the aux data or to display it differently.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264601258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264601401",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264601401",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264601401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDYwMTQwMQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-03T00:54:12Z",
    "updated_at": "2016-12-03T00:54:12Z",
    "author_association": "MEMBER",
    "body": "```\r\nBinary: \r\n606060405234610000575b6101f9806100196000396000f30060606040526000357c010000000000000000000000000000000000000000000000000000000090048063204232ba146100435780637a851d8e14610084575b610000565b3461000057610082600480806101400190600a806020026040519081016040528092919082600a602002808284378201915050505050919050506100c5565b005b34610000576100c3600480806101400190600a806020026040519081016040528092919082600a602002808284378201915050505050919050506100c9565b005b5b50565b61014060405190810160405280600a905b60008152602001906001900390816100da57905050819050602a816000600a811015610000576020020151141561011057610000565b3073ffffffffffffffffffffffffffffffffffffffff1663204232ba82604051827c01000000000000000000000000000000000000000000000000000000000281526004018082600a6020028083835b602083106101835780518252602082019250602081019150602083039350610160565b6001836020036101000a038019825116818451168082178552505050505050905001915050600060405180830381600087803b156100005760325a03f115610000575050505b50505600a165627a7a72305820a23678a1e0df760121998c6270e09a8f7bcf099e9aab2d726bcd01043fb470990029\r\n\r\nBinary of the runtime part: \r\n60606040526000357c010000000000000000000000000000000000000000000000000000000090048063204232ba146100435780637a851d8e14610084575b610000565b3461000057610082600480806101400190600a806020026040519081016040528092919082600a602002808284378201915050505050919050506100c5565b005b34610000576100c3600480806101400190600a806020026040519081016040528092919082600a602002808284378201915050505050919050506100c9565b005b5b50565b61014060405190810160405280600a905b60008152602001906001900390816100da57905050819050602a816000600a811015610000576020020151141561011057610000565b3073ffffffffffffffffffffffffffffffffffffffff1663204232ba82604051827c01000000000000000000000000000000000000000000000000000000000281526004018082600a6020028083835b602083106101835780518252602082019250602081019150602083039350610160565b6001836020036101000a038019825116818451168082178552505050505050905001915050600060405180830381600087803b156100005760325a03f115610000575050505b50505600a165627a7a72305820a23678a1e0df760121998c6270e09a8f7bcf099e9aab2d726bcd01043fb470990029\r\n```\r\n\r\nWhy do we have the metadata in the runtime output?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264601401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264804095",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264804095",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264804095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDgwNDA5NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-05T09:22:40Z",
    "updated_at": "2016-12-05T09:22:40Z",
    "author_association": "MEMBER",
    "body": "The \"opcodes\" output is not too helpful after all, we could just remove it in favour of assembly.\r\nThe metadata is part of the runtime output in order to ease retrieval. It is quite hard to find the creation transaction and it might not even be available to light clients.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264804095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264804185",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264804185",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264804185,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDgwNDE4NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-05T09:23:06Z",
    "updated_at": "2016-12-05T09:23:06Z",
    "author_association": "MEMBER",
    "body": "Can this be closed?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264804185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264817167",
    "html_url": "https://github.com/ethereum/solidity/issues/1482#issuecomment-264817167",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1482",
    "id": 264817167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDgxNzE2Nw==",
    "user": {
      "login": "pirapira",
      "id": 44281,
      "node_id": "MDQ6VXNlcjQ0Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/44281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pirapira",
      "html_url": "https://github.com/pirapira",
      "followers_url": "https://api.github.com/users/pirapira/followers",
      "following_url": "https://api.github.com/users/pirapira/following{/other_user}",
      "gists_url": "https://api.github.com/users/pirapira/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pirapira/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pirapira/subscriptions",
      "organizations_url": "https://api.github.com/users/pirapira/orgs",
      "repos_url": "https://api.github.com/users/pirapira/repos",
      "events_url": "https://api.github.com/users/pirapira/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pirapira/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-05T10:21:39Z",
    "updated_at": "2016-12-05T10:21:39Z",
    "author_association": "MEMBER",
    "body": "Yes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/264817167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

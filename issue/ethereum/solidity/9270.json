{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9270",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9270/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9270/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9270/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9270",
  "id": 647661797,
  "node_id": "MDU6SXNzdWU2NDc2NjE3OTc=",
  "number": 9270,
  "title": "Internal compiler error with no description about error",
  "user": {
    "login": "zemse",
    "id": 22412996,
    "node_id": "MDQ6VXNlcjIyNDEyOTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22412996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zemse",
    "html_url": "https://github.com/zemse",
    "followers_url": "https://api.github.com/users/zemse/followers",
    "following_url": "https://api.github.com/users/zemse/following{/other_user}",
    "gists_url": "https://api.github.com/users/zemse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zemse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zemse/subscriptions",
    "organizations_url": "https://api.github.com/users/zemse/orgs",
    "repos_url": "https://api.github.com/users/zemse/repos",
    "events_url": "https://api.github.com/users/zemse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zemse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-06-29T20:54:26Z",
  "updated_at": "2020-10-07T08:46:13Z",
  "closed_at": "2020-10-07T08:46:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI have a method in one contract that returns a Struct (ABI encoder v2 enabled). When I call that method in other contract with doesn't have ABI encoder V2 enabled, it gives the following error in the solc output.\r\n\r\n```javascript\r\n{\r\n    component: 'general',\r\n    formattedMessage: 'InternalCompilerError: \\n',\r\n    message: 'Internal compiler error (/root/project/libsolidity/codegen/CompilerUtils.cpp:1418):',\r\n    severity: 'error',\r\n    type: 'InternalCompilerError'\r\n  }\r\n```\r\n\r\nHowever, when I also enable ABI Encoder V2 in the calling contract, it compiles. But it should not give internal compiler error and it should display error message that in calling contract that the method you are calling needs ABI encoder v2 enabled here.\r\n\r\n## Environment\r\n\r\n- Compiler version: `0.6.10`\r\n- Target EVM version (as per compiler settings): `istanbul` (default)\r\n- Framework/IDE (e.g. Truffle or Remix): Custom compile script (Repo https://github.com/KMPARDS/esn-contracts)\r\n- EVM execution environment / backend / blockchain client: Ganache\r\n- Operating system: macOS\r\n\r\n## Steps to Reproduce\r\n\r\n`OtherContract.sol`:\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.6.10;\r\npragma experimental ABIEncoderV2;\r\n\r\ncontract OtherContract {\r\n    struct Taxi {\r\n        uint256 numberPlate;\r\n    }\r\n\r\n    function methodThatReturnsStruct() public pure returns (Taxi memory) {\r\n        // bytes32 temp;\r\n        return Taxi({ numberPlate: 1729 });\r\n    }\r\n}\r\n\r\n```\r\n\r\n`MainContract.sol`:\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.6.10;\r\n// pragma experimental ABIEncoderV2;\r\n\r\nimport \"./OtherContract.sol\";\r\n\r\ncontract MainContract {\r\n    function main() public pure returns (uint256) {\r\n        OtherContract contractVariable = OtherContract(address(0));\r\n        OtherContract.Taxi memory result = contractVariable.methodThatReturnsStruct();\r\n        return result.numberPlate;\r\n    }\r\n}\r\n\r\n```\r\n\r\nIf you compile this, it will give a error which won't tell you what/where it went wrong. I had to give time redoing the multi file changes I introduced in my project to know that which file changes were causing this error. If you have the `pragma experimental ABIEncoderV2;`, it will work as expected.\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9270/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9270/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656105683",
    "html_url": "https://github.com/ethereum/solidity/issues/9270#issuecomment-656105683",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9270",
    "id": 656105683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjEwNTY4Mw==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T12:45:29Z",
    "updated_at": "2020-07-09T12:45:29Z",
    "author_association": "MEMBER",
    "body": "I was able to reduce this to the following multi source syntactic test case:\r\n\r\n```\r\n==== Source: i0.sol ====\r\npragma experimental ABIEncoderV2;\r\ncontract D {\r\n        struct S { int m; }\r\n        function f() public returns (S memory) {}\r\n}\r\n==== Source: i1.sol ====\r\nimport \"i0.sol\";\r\ncontract C {\r\n        function a() public {\r\n                D d;\r\n                d.f();\r\n        }\r\n}\r\n```\r\n\r\nthat throws\r\n\r\nhttps://github.com/ethereum/solidity/blob/8548bf1b4c4080a0a9cc5bc69ddf78d948301541/libsolidity/codegen/CompilerUtils.cpp#L1435\r\n\r\nTo reproduce\r\n\r\n```\r\n$ cp test.sol test/libsolidity/syntaxTests/\r\n$ soltest -t syntaxTests/test\r\nRunning 1 test case...\r\n/home/bhargava/work/github/solidity/test/boostTest.cpp(121): error: in \"syntaxTests/test\": Exception during extracted test: /home/bhargava/work/github/solidity/libsolidity/codegen/CompilerUtils.cpp(1435): Throw in function unsigned int solidity::frontend::CompilerUtils::loadFromMemoryHelper(const solidity::frontend::Type &, bool, bool)\r\nDynamic exception type: boost::exception_detail::clone_impl<solidity::langutil::InternalCompilerError>\r\nstd::exception::what: \r\n[solidity::util::tag_comment*] = \r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656105683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657496239",
    "html_url": "https://github.com/ethereum/solidity/issues/9270#issuecomment-657496239",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9270",
    "id": 657496239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzQ5NjIzOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-13T11:11:50Z",
    "updated_at": "2020-07-13T11:11:50Z",
    "author_association": "MEMBER",
    "body": "This is the problem about different ABIEncoder pragmas in different source files.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657496239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658155331",
    "html_url": "https://github.com/ethereum/solidity/issues/9270#issuecomment-658155331",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9270",
    "id": 658155331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODE1NTMzMQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-14T12:38:42Z",
    "updated_at": "2020-07-14T12:38:42Z",
    "author_association": "MEMBER",
    "body": "Duplicate of #8379 then?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658155331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658166334",
    "html_url": "https://github.com/ethereum/solidity/issues/9270#issuecomment-658166334",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9270",
    "id": 658166334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODE2NjMzNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-14T13:03:04Z",
    "updated_at": "2020-07-14T13:03:04Z",
    "author_association": "MEMBER",
    "body": "maybe",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658166334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

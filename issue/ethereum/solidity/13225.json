{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13225",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13225/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13225/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13225/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13225",
  "id": 1287329259,
  "node_id": "I_kwDOAm_5kc5MuxXr",
  "number": 13225,
  "title": "Decode number of tokens and token contract address from msg.data (ERC-20)",
  "user": {
    "login": "mpp1337",
    "id": 6707562,
    "node_id": "MDQ6VXNlcjY3MDc1NjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6707562?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mpp1337",
    "html_url": "https://github.com/mpp1337",
    "followers_url": "https://api.github.com/users/mpp1337/followers",
    "following_url": "https://api.github.com/users/mpp1337/following{/other_user}",
    "gists_url": "https://api.github.com/users/mpp1337/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mpp1337/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mpp1337/subscriptions",
    "organizations_url": "https://api.github.com/users/mpp1337/orgs",
    "repos_url": "https://api.github.com/users/mpp1337/repos",
    "events_url": "https://api.github.com/users/mpp1337/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mpp1337/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-06-28T13:13:46Z",
  "updated_at": "2022-06-29T13:37:06Z",
  "closed_at": "2022-06-29T13:37:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have a smart contract with just a fallback function and some logic.\r\n\r\nI want users to send their tokens directly to the smart contract and do some smart contract logic.\r\n\r\nI've implemented fallback function and smart contract now is able to receive ERC20 tokens, but i also want to track how much tokens user sent.\r\n\r\nI thought that its possible to do via decoding of `msg.data` in fallback in the following way:\r\n\r\n```\r\nfallback() external payable {\r\n        (sig, tokenAddress, amount) = abi.decode(msg.data, (bytes4, address, uint256));\r\n    }\r\n```\r\n\r\nI tried different things but nothing works: \r\n\r\n```\r\nfallback() external payable {\r\n        (tokenAddress, amount) = abi.decode(msg.data[4:], (address, uint256));\r\n    }\r\n```\r\n\r\nCan't decode even selector, just for test:\r\n\r\n```\r\nfallback() external payable {\r\n        sig = abi.decode(msg.data[:4], (bytes4));\r\n    }\r\n```\r\n\r\nIs it possible to implement this decoding somehow? I'm not able to rush user and execute another functions, i need to receive ERC20 tokens only via direct send.",
  "closed_by": {
    "login": "Marenz",
    "id": 424752,
    "node_id": "MDQ6VXNlcjQyNDc1Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Marenz",
    "html_url": "https://github.com/Marenz",
    "followers_url": "https://api.github.com/users/Marenz/followers",
    "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
    "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
    "organizations_url": "https://api.github.com/users/Marenz/orgs",
    "repos_url": "https://api.github.com/users/Marenz/repos",
    "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Marenz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13225/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13225/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1169991282",
    "html_url": "https://github.com/ethereum/solidity/issues/13225#issuecomment-1169991282",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13225",
    "id": 1169991282,
    "node_id": "IC_kwDOAm_5kc5FvKZy",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-29T13:37:05Z",
    "updated_at": "2022-06-29T13:37:05Z",
    "author_association": "MEMBER",
    "body": "This is not the right place for Solidity programming help so I am going to close this.\r\nAbout your issue though, read up more about it here\r\n\r\nhttps://docs.soliditylang.org/en/latest/contracts.html#index-12\r\n\r\nThe docs even mention (in the first note on that link) your specific usecase, hope that helps!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1169991282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

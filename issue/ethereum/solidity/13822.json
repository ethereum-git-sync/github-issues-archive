{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13822",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13822/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13822/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13822/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13822",
  "id": 1504584548,
  "node_id": "I_kwDOAm_5kc5ZriNk",
  "number": 13822,
  "title": "Improve performance of DataFlowAnalyzer",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 682993385,
      "node_id": "MDU6TGFiZWw2ODI5OTMzODU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/performance%20:racehorse:",
      "name": "performance :racehorse:",
      "color": "c5def5",
      "default": false,
      "description": ""
    },
    {
      "id": 1282209978,
      "node_id": "MDU6TGFiZWwxMjgyMjA5OTc4",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/optimizer",
      "name": "optimizer",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-12-20T13:43:52Z",
  "updated_at": "2022-12-20T14:28:01Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "On some examples (notably chains.sol), the DataFlowAnalyzer still takes a gigantic part of the optimizer time.\r\nProfiling shows that 63% of the whole computation time is spent inside `DataFlowAnalyzer::clearValues` while most of this time is spent inside `std::_Rb_tree<>::find(YulString const&)`.\r\n\r\nAn \"easy\" solution to this is to use better performing data structures to store the relation between how variables reference each other.\r\n\r\nAnother aspect that wastes time is that variables that are assigned inside e.g. an if body are determined multiple times when the if bodies are nested. It might be better to collect assigned variables (or reset them) at the point we visit the assignment.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13822/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13822/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1359449017",
    "html_url": "https://github.com/ethereum/solidity/issues/13822#issuecomment-1359449017",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13822",
    "id": 1359449017,
    "node_id": "IC_kwDOAm_5kc5RB4u5",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-20T14:28:01Z",
    "updated_at": "2022-12-20T14:28:01Z",
    "author_association": "MEMBER",
    "body": "A backwards map-to-string already improved performance tremendously. What would probably best is to use a data structure that contains two instances of the form `set<pair<YulString, YulString>>`, for forward and backward references. loer_bound / upper_bound operations allow iterating over keys and efficient deleting without the additional overhead of a set inside a map.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1359449017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

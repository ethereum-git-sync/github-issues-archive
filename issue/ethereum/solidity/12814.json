{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12814",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12814/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12814/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12814/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12814",
  "id": 1172639660,
  "node_id": "I_kwDOAm_5kc5F5Q-s",
  "number": 12814,
  "title": "Overflow checks should not avoid overflow",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-03-17T17:36:50Z",
  "updated_at": "2022-09-14T14:53:43Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "I'm not totally sure anymore why we implemented overflow checks without using overflow, but I think we should change that and use the cheapest method possible.\r\nI can think of two reasons:\r\n1. it might be easier for a possible future reasoning engine in the compiler\r\n2. it might be easier to detect overflow by external tools\r\n\r\nThe reasoning engine we currently have in mind should be powerful enough to deal with overflows. Furthermore, we make use of wrapping arithmetic in the optimizer rules already (subtraction is turned into addition for example).",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12814/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12814/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1072269514",
    "html_url": "https://github.com/ethereum/solidity/issues/12814#issuecomment-1072269514",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12814",
    "id": 1072269514,
    "node_id": "IC_kwDOAm_5kc4_6YjK",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T10:19:32Z",
    "updated_at": "2022-03-18T10:19:43Z",
    "author_association": "MEMBER",
    "body": "It looks like we can save 7 gas per addition:\r\n```\r\nlet z := add(x, y)\r\nif gt(x, not(y)) { revert(0, 0) }\r\n```\r\nwrt\r\n```\r\nlet z := add(x, y)\r\nif lt(z, x) { revert(0, 0) }\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1072269514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1076345089",
    "html_url": "https://github.com/ethereum/solidity/issues/12814#issuecomment-1076345089",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12814",
    "id": 1076345089,
    "node_id": "IC_kwDOAm_5kc5AJ7kB",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-23T12:56:59Z",
    "updated_at": "2022-03-23T13:21:20Z",
    "author_association": "MEMBER",
    "body": "Just to clarify: you mean we should have used the `ovf` and `sovf` flags from [EIP-1051: Overflow checking for the EVM](https://eips.ethereum.org/EIPS/eip-1051)?\r\n\r\nHow do we access them at Yul level?\r\n\r\nEDIT: I see that the EIP is stagnant so it's probably not this mechanism.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1076345089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087279783",
    "html_url": "https://github.com/ethereum/solidity/issues/12814#issuecomment-1087279783",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12814",
    "id": 1087279783,
    "node_id": "IC_kwDOAm_5kc5AzpKn",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-04T08:43:05Z",
    "updated_at": "2022-04-04T08:43:05Z",
    "author_association": "MEMBER",
    "body": "I think the main reason for doing the checks as they are done now, was that we expected a weaker reasoning engine to be able to deal with them more easily that way - but the plan back then was not to use any of this in production before the optimizer could remove most of the checks and to revisit how to do the check, when working on the optimizer to remove them...\r\nGiven how things turned out since then, it makes sense to hand-optimize them to the cheapest ones without optimization right now...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087279783/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1246891281",
    "html_url": "https://github.com/ethereum/solidity/issues/12814#issuecomment-1246891281",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12814",
    "id": 1246891281,
    "node_id": "IC_kwDOAm_5kc5KUg0R",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T14:53:43Z",
    "updated_at": "2022-09-14T14:53:43Z",
    "author_association": "MEMBER",
    "body": "Anything left here?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1246891281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

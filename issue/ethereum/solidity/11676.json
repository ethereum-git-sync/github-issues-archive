{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11676",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11676/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11676/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11676/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11676",
  "id": 946753530,
  "node_id": "MDU6SXNzdWU5NDY3NTM1MzA=",
  "number": 11676,
  "title": "[SMTChecker] Crash in `Z3CHCInterface::query()` when running isoltest on Ubuntu",
  "user": {
    "login": "benbaley",
    "id": 45843736,
    "node_id": "MDQ6VXNlcjQ1ODQzNzM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/45843736?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benbaley",
    "html_url": "https://github.com/benbaley",
    "followers_url": "https://api.github.com/users/benbaley/followers",
    "following_url": "https://api.github.com/users/benbaley/following{/other_user}",
    "gists_url": "https://api.github.com/users/benbaley/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benbaley/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benbaley/subscriptions",
    "organizations_url": "https://api.github.com/users/benbaley/orgs",
    "repos_url": "https://api.github.com/users/benbaley/repos",
    "events_url": "https://api.github.com/users/benbaley/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benbaley/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 1018738457,
      "node_id": "MDU6TGFiZWwxMDE4NzM4NDU3",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/testing%20:hammer:",
      "name": "testing :hammer:",
      "color": "ffc6db",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-07-17T08:10:39Z",
  "updated_at": "2021-08-04T13:44:12Z",
  "closed_at": "2021-08-04T13:44:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nwhen I build solidity of v0.8.6 and run the `scripts/isoltest.sh` with libevmone.so.0.7.0, the following error occur:\r\n\r\n```\r\n...\r\nABIJson/multiple_methods_order.sol: OK\r\nABIJson/inherited.sol: OK\r\nABIJson/multiple_params.sol: OK\r\nABIJson/events_anonymous.sol: OK\r\nABIJson/global_struct.sol: OK\r\nABIJson/receive_ether_function.sol: OK\r\nABIJson/events.sol: OK\r\nABIJson/payable_constructor_abi.sol: OK\r\n\r\nJSON ABI Test Summary: 32/32 tests successful.\r\n\r\nsmtCheckerTests/array_members/push_as_lhs_and_rhs_1d.sol: OK\r\nsmtCheckerTests/array_members/push_storage_ref_unsafe_length.sol: Segmentation fault (core dumped)\r\n```\r\n\r\nstacktrace:\r\n```\r\ngdb ./build/test/tools/isoltest core\r\nGNU gdb (Ubuntu 9.2-0ubuntu2) 9.2\r\nCopyright (C) 2020 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from ./build/test/tools/isoltest...\r\n(No debugging symbols found in ./build/test/tools/isoltest)\r\n[New LWP 20716]\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nCore was generated by `./scripts/../build/test/tools/isoltest --testpath ./scripts/../test'.\r\nProgram terminated with signal SIGSEGV, Segmentation fault.\r\n#0  0x00007f516225c824 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n(gdb) bt\r\n#0  0x00007f516225c824 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#1  0x00007f51622648e4 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#2  0x00007f5162264e81 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#3  0x00007f5162266782 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#4  0x00007f5162f490e2 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#5  0x00007f5162f4a32a in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#6  0x00007f5162ea3675 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#7  0x00007f5162eb16e9 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#8  0x00007f5162ec1089 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#9  0x00007f5162cf7cf5 in ?? () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#10 0x00007f516303e577 in Z3_fixedpoint_get_answer () from /lib/x86_64-linux-gnu/libz3.so.4\r\n#11 0x0000564d277b6169 in solidity::smtutil::Z3CHCInterface::query(solidity::smtutil::Expression const&) ()\r\n#12 0x0000564d27400711 in solidity::frontend::CHC::query(solidity::smtutil::Expression const&, solidity::langutil::SourceLocation const&) ()\r\n#13 0x0000564d2740b491 in solidity::frontend::CHC::checkAndReportTarget(solidity::frontend::CHC::CHCVerificationTarget const&, solidity::langutil::ErrorId, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >) ()\r\n#14 0x0000564d27416704 in solidity::frontend::CHC::checkVerificationTargets() ()\r\n#15 0x0000564d27418305 in solidity::frontend::CHC::analyze(solidity::frontend::SourceUnit const&) ()\r\n#16 0x0000564d27113801 in solidity::frontend::ModelChecker::analyze(solidity::frontend::SourceUnit const&) ()\r\n#17 0x0000564d27198487 in solidity::frontend::CompilerStack::analyze() ()\r\n#18 0x0000564d2702a7e0 in solidity::frontend::test::SyntaxTest::parseAndAnalyze() ()\r\n#19 0x0000564d270560f9 in solidity::frontend::test::SMTCheckerTest::run(std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) ()\r\n#20 0x0000564d26fa870d in TestTool::process() ()\r\n#21 0x0000564d26fa951f in TestTool::processPath(std::unique_ptr<solidity::frontend::test::TestCase, std::default_delete<solidity::frontend::test::TestCase> > (*)(solidity::frontend::test::TestCase::Config const&), solidity::test::IsolTestOptions const&, boost::filesystem::path const&, boost::filesystem::path const&) ()\r\n#22 0x0000564d26f8b31b in main ()\r\n```\r\n## Environment\r\n\r\n- Compiler version:v0.8.6 commit 11564f7ec2d34f488e7f7946c1f19491a967370e\r\n- Target EVM version (as per compiler settings): \r\n- Framework/IDE (e.g. Truffle or Remix):\r\n- EVM execution environment / backend / blockchain client:\r\n- Operating system: Ubuntu20.10\r\n\r\n## Steps to Reproduce\r\n\r\n1. sh scripts/build.sh\r\n2. sh scripts/isoltest.sh\r\n",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11676/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11676/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/887351691",
    "html_url": "https://github.com/ethereum/solidity/issues/11676#issuecomment-887351691",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11676",
    "id": 887351691,
    "node_id": "IC_kwDOAm_5kc404-mL",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-27T09:17:48Z",
    "updated_at": "2021-07-27T09:17:48Z",
    "author_association": "MEMBER",
    "body": "Hi @benbaley , thanks for reporting!\r\nUnfortunately this crash comes from z3 and there's not much we can do about it, other than reporting the issue (which we already did). What's your z3 version? Our tests require the latest z3 release (4.8.12 right now) to pass, and they don't crash on Ubuntu/Arch Linux/OSX currently. Maybe updating z3 would help if it's possible?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/887351691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/892670813",
    "html_url": "https://github.com/ethereum/solidity/issues/11676#issuecomment-892670813",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11676",
    "id": 892670813,
    "node_id": "IC_kwDOAm_5kc41NRNd",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T13:44:12Z",
    "updated_at": "2021-08-04T13:44:12Z",
    "author_association": "MEMBER",
    "body": "Closing since this should hopefully be fine with the latest z3 release. Please reopen if needed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/892670813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

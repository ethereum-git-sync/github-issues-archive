{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/709",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/709/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/709/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/709/events",
  "html_url": "https://github.com/ethereum/solidity/issues/709",
  "id": 164819283,
  "node_id": "MDU6SXNzdWUxNjQ4MTkyODM=",
  "number": 709,
  "title": "event SomeEvent(ContractType c)  becomes an invalid log entry if fired.",
  "user": {
    "login": "ethernian",
    "id": 4574735,
    "node_id": "MDQ6VXNlcjQ1NzQ3MzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4574735?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ethernian",
    "html_url": "https://github.com/ethernian",
    "followers_url": "https://api.github.com/users/ethernian/followers",
    "following_url": "https://api.github.com/users/ethernian/following{/other_user}",
    "gists_url": "https://api.github.com/users/ethernian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ethernian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ethernian/subscriptions",
    "organizations_url": "https://api.github.com/users/ethernian/orgs",
    "repos_url": "https://api.github.com/users/ethernian/repos",
    "events_url": "https://api.github.com/users/ethernian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ethernian/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/solidity/milestones/22",
    "html_url": "https://github.com/ethereum/solidity/milestone/22",
    "labels_url": "https://api.github.com/repos/ethereum/solidity/milestones/22/labels",
    "id": 1925682,
    "node_id": "MDk6TWlsZXN0b25lMTkyNTY4Mg==",
    "number": 22,
    "title": "3-easy-bugs",
    "description": null,
    "creator": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 11,
    "state": "closed",
    "created_at": "2016-08-05T15:04:44Z",
    "updated_at": "2018-03-09T13:35:37Z",
    "due_on": null,
    "closed_at": "2018-03-09T13:35:37Z"
  },
  "comments": 7,
  "created_at": "2016-07-11T11:50:07Z",
  "updated_at": "2017-03-08T10:18:30Z",
  "closed_at": "2017-03-08T10:18:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description:\n\nConsider a conract\n\n```\ncontract FooFactory {\n   event NewFoo(Foo foo);\n    function createFoo() returns (Foo foo){\n        foo = new Foo();\n        NewFoo(foo);\n    }\n}\n```\n\na call to `createFoo()` creates an entry in log like \n\n```\n{ logIndex: '0x00',\n  transactionIndex: '0x0',\n  transactionHash: '0xfbfd11df8f5bdeda926b516485737caf139b0f3eff3a74b3dda50bf6147953fb',\n  blockHash: '0x4fa25c52f80357761a8c491ff31c3c74b59dd7e9120cb0e1486cdee740a45742',\n  blockNumber: '0x65',\n  address: '0x667cbea674e29efcb90fd5938a61fc8b226a3722',\n  data: '0x0000000000000000000000000194013ad981e20f9bb2cd6d4aecbdf95d4485cb',\n  topics: [ '0x09cf5831812c5045f6913dec697b94aaf101ab015f2f3e56356ed092df26becd' ],\n  type: 'mined' }\n```\n\nthe event's topic is a result of computation `web3.sha3('NewFoo(address)')` an not `web3.sha3('NewFoo(Foo)')` as expected. You can also see other differences between these two log entries.\n\nIf I declare an even like `event NewFoo(address foo);` in the same contract, it produces a log entry as expected:\n\n```\n{ logIndex: 0,\n  transactionIndex: 0,\n  transactionHash: '0x820cb70909b81c536830e32db5fd70873cc481a2839f218bc818db3842e6b5eb',\n  blockHash: '0xe5d61b1022acdc46ad99ab4ee63af96155121e68e84bc0b5f1c45c825746170a',\n  blockNumber: 95,\n  address: '0xe1ec40eccc040f9e48f34871e6f3c1d30b4cc9e5',\n  type: 'mined',\n  event: 'NewFoo',\n  args: { foo: '0xb2dcf81abf338024afaf870f947d9c1716933e05' } }\n```\n\nYou can find contract code and a running truffle test here:\nhttps://gist.github.com/dip239/8978f4a8315f005d3c5453555916f520\nhttps://gist.github.com/dip239/d87c0ee4b842fc8ddfc8e3f073f4fd37\n### Use Case justification:\n\nI would like to use contract declaration like `event NewFoo(Foo foo);` instead of `event NewFoo(address foo);` in order to generate an ABI for `event NewFoo(Foo foo);` and use the ABI to resolve a promise direct to Contract not to address.\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/709/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/709/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231716365",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-231716365",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 231716365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTcxNjM2NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-11T12:09:32Z",
    "updated_at": "2016-07-11T12:09:32Z",
    "author_association": "MEMBER",
    "body": "The reason is that contracts are not part of the ABI types. The same transformation also applies to function signatures.\n\nAdding custom types to the ABI might be a possibility to consider, but I am not sure if we want to go down that road. You only get (a mild version of) type safety if the full contract is known to web3.js, and I don't see a nice way to provide that in a general context.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231716365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231763788",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-231763788",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 231763788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTc2Mzc4OA==",
    "user": {
      "login": "ethernian",
      "id": 4574735,
      "node_id": "MDQ6VXNlcjQ1NzQ3MzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4574735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethernian",
      "html_url": "https://github.com/ethernian",
      "followers_url": "https://api.github.com/users/ethernian/followers",
      "following_url": "https://api.github.com/users/ethernian/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethernian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethernian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethernian/subscriptions",
      "organizations_url": "https://api.github.com/users/ethernian/orgs",
      "repos_url": "https://api.github.com/users/ethernian/repos",
      "events_url": "https://api.github.com/users/ethernian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethernian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-11T15:09:53Z",
    "updated_at": "2016-07-11T15:38:16Z",
    "author_association": "NONE",
    "body": "What is a feature and what is a bug here? It is not quit clear to me.\n\nI see the `Foo` type is already used in the ABI of the `FooFactory`, created by solidity compiler.\n`[{\"constant\":false,\"inputs\":[],\"name\":\"createFoo\",\"outputs\":[{\"name\":\"foo\",\"type\":\"address\"}],\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"foo\",\"type\":\"Foo\"}],\"name\":\"NewFoo\",\"type\":\"event\"}]`\nis this a feature and not a bug?\n\nThe `FooFactory.createFoo()` call creates an log entry with the topic different from the event signature declared in the ABI. \nIs this a feature and not a bug too?\n\nEven this behaviour is intentional, it contradicts at least to solidity documentation, stating that the topic is a sha3 of event signature (as defined in contract or exposed in ABI).\n\nAdditionally it is not quite clear why a json entry `event: 'NewFoo',` is missing. Is this an anonymous event? Does the event become anonymous due to ContractType usage in event's signature?\n\nPersonlly I find it usefull if ABI string contains ContractTypes. It makes easier for UI-Engine to render correct UI for address or for the contract at that address. If an event could have any string as a topic, I would prefer to have a topic calculated from the event signatur as defined in contract and exposed in ABI, i.e. as `web3.sha3(NewFoo(Foo))`.  If the topic could be any string, why solidity compiler needs to transform the event signature for the topic calculation?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231763788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231776075",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-231776075",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 231776075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTc3NjA3NQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-11T15:48:18Z",
    "updated_at": "2016-07-11T15:48:18Z",
    "author_association": "MEMBER",
    "body": "This needs further investigation, I am actually not sure whether it is a bug or a feature. As far as datatypes are concerned, web3.js should not be able to know what `Foo` might be, at least it is not defined in the ABI, but I certainly see the benefit here. The main problem is that contract names are not globally unique as opposed to all the other type names in the ABI.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231776075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231783678",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-231783678",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 231783678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTc4MzY3OA==",
    "user": {
      "login": "ethernian",
      "id": 4574735,
      "node_id": "MDQ6VXNlcjQ1NzQ3MzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4574735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethernian",
      "html_url": "https://github.com/ethernian",
      "followers_url": "https://api.github.com/users/ethernian/followers",
      "following_url": "https://api.github.com/users/ethernian/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethernian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethernian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethernian/subscriptions",
      "organizations_url": "https://api.github.com/users/ethernian/orgs",
      "repos_url": "https://api.github.com/users/ethernian/repos",
      "events_url": "https://api.github.com/users/ethernian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethernian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-11T16:14:08Z",
    "updated_at": "2016-07-11T16:14:08Z",
    "author_association": "NONE",
    "body": "I see the problem. Thank you.\nLet me know if I could contribute to find a solution.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/231783678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/277216771",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-277216771",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 277216771,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzIxNjc3MQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-03T10:39:30Z",
    "updated_at": "2017-02-03T10:39:30Z",
    "author_association": "MEMBER",
    "body": "Currently this uses `address` both for the event and `createFoo` and it seems to decode properly in remix ide:\r\n\r\n```\r\n[\r\n  {\r\n    \"type\":\"function\"\r\n    \"name\":\"createFoo\",\r\n    \"payable\":false,\r\n    \"constant\":false,\r\n    \"inputs\":[\r\n    ],\r\n    \"outputs\":[\r\n      {\r\n        \"name\":\"foo\",\r\n        \"type\":\"address\"\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    \"type\":\"event\",\r\n    \"name\":\"NewFoo\",\r\n    \"anonymous\":false,\r\n    \"inputs\":[\r\n      {\r\n        \"indexed\":false,\r\n        \"name\":\"foo\",\r\n        \"type\":\"address\"\r\n      }\r\n    ]\r\n  }\r\n]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/277216771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/278672405",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-278672405",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 278672405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODY3MjQwNQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-09T15:18:46Z",
    "updated_at": "2017-02-09T15:18:46Z",
    "author_association": "MEMBER",
    "body": "Is this still a bug?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/278672405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/285002588",
    "html_url": "https://github.com/ethereum/solidity/issues/709#issuecomment-285002588",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/709",
    "id": 285002588,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTAwMjU4OA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-08T10:18:26Z",
    "updated_at": "2017-03-08T10:18:26Z",
    "author_association": "MEMBER",
    "body": "I don't think so. Closing.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/285002588/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

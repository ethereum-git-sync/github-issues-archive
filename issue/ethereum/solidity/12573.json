{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12573",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12573/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12573/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12573/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12573",
  "id": 1110736984,
  "node_id": "I_kwDOAm_5kc5CNIBY",
  "number": 12573,
  "title": "Add description of events \"imported\" from libraries in a contract's ABI",
  "user": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-01-21T17:49:08Z",
  "updated_at": "2022-03-24T13:40:46Z",
  "closed_at": "2022-02-07T10:39:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nContracts can emit events defined in libraries, either directly or using functions defined in these libraries. This works well, and the produced bytecode indeed emit the correct events, but the corresponding descriptions are not part of contracts's ABI\r\n\r\nThis results in potential difficulty to parse the events with tooling that relies on the ABI for event decoding.\r\n\r\n## Motivation\r\n\r\nLets consider the following code\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.0;\r\n\r\nlibrary MyLibrary {\r\n    event SomeEvent();\r\n\r\n    function someFunction() internal {\r\n        emit SomeEvent();\r\n    }\r\n}\r\n\r\ncontract MyContract {\r\n    function doSomething() external {\r\n        MyLibrary.someFunction();\r\n    }\r\n\r\n    function doSomethingElse() external {\r\n        emit MyLibrary.SomeEvent();\r\n    }\r\n}\r\n```\r\n\r\nThe ABI produced by the compiler is \r\n\r\n```json\r\n[\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"doSomething\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"doSomethingElse\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n]\r\n```\r\n\r\nI believe it would be better if it could include the description of `SomeEvent`\r\n\r\n```json\r\n\t{\r\n\t\t\"anonymous\": false,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"SomeEvent\",\r\n\t\t\"type\": \"event\"\r\n\t},\r\n```\r\n\r\n## Specification\r\n\r\nWhenever a contract emits an event or calls a function that can emit an event, then the event description should be added to the contract ABI. I'm not familiar with the compiler, but that might be done by adding \"accessible event\" metadata to functions/libraries and propagating that.\r\n\r\n## Backwards Compatibility\r\n\r\nThis doesn't affect the produced bytecode, only the metadata. It only adds new entries to the ABI array. It doesn't remove or modify existing entries. Thus I believe it is fully backward compatible.\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12573/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12573/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1020021456",
    "html_url": "https://github.com/ethereum/solidity/issues/12573#issuecomment-1020021456",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12573",
    "id": 1020021456,
    "node_id": "IC_kwDOAm_5kc48zErQ",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T11:56:33Z",
    "updated_at": "2022-01-24T11:56:33Z",
    "author_association": "MEMBER",
    "body": "This is a duplicate of https://github.com/ethereum/solidity/issues/9765, and is almost implemented in https://github.com/ethereum/solidity/pull/10996\r\n\r\nThe last I checked, this requires a breaking change in the NatSpec output. We can schedule this for 0.9.0.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1020021456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1031320595",
    "html_url": "https://github.com/ethereum/solidity/issues/12573#issuecomment-1031320595",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12573",
    "id": 1031320595,
    "node_id": "IC_kwDOAm_5kc49eLQT",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-07T10:39:15Z",
    "updated_at": "2022-02-07T10:39:15Z",
    "author_association": "MEMBER",
    "body": "Closing as duplicate.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1031320595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1073338331",
    "html_url": "https://github.com/ethereum/solidity/issues/12573#issuecomment-1073338331",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12573",
    "id": 1073338331,
    "node_id": "IC_kwDOAm_5kc4_-dfb",
    "user": {
      "login": "zemse",
      "id": 22412996,
      "node_id": "MDQ6VXNlcjIyNDEyOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22412996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zemse",
      "html_url": "https://github.com/zemse",
      "followers_url": "https://api.github.com/users/zemse/followers",
      "following_url": "https://api.github.com/users/zemse/following{/other_user}",
      "gists_url": "https://api.github.com/users/zemse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zemse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zemse/subscriptions",
      "organizations_url": "https://api.github.com/users/zemse/orgs",
      "repos_url": "https://api.github.com/users/zemse/repos",
      "events_url": "https://api.github.com/users/zemse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zemse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-20T19:57:35Z",
    "updated_at": "2022-03-20T19:57:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> We can schedule this for 0.9.0.\r\n\r\nIs there any approximate idea when 0.9 is going to be released? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1073338331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1077640830",
    "html_url": "https://github.com/ethereum/solidity/issues/12573#issuecomment-1077640830",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12573",
    "id": 1077640830,
    "node_id": "IC_kwDOAm_5kc5AO35-",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-24T13:40:46Z",
    "updated_at": "2022-03-24T13:40:46Z",
    "author_association": "MEMBER",
    "body": "Not really. Maybe this year.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1077640830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

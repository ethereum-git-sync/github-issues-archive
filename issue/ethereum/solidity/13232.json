{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13232",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13232/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13232/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13232/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13232",
  "id": 1291206059,
  "node_id": "I_kwDOAm_5kc5M9j2r",
  "number": 13232,
  "title": "FR: Initializing constants with pure functions should be possible",
  "user": {
    "login": "migoldfinger",
    "id": 106750422,
    "node_id": "U_kgDOBlzh1g",
    "avatar_url": "https://avatars.githubusercontent.com/u/106750422?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/migoldfinger",
    "html_url": "https://github.com/migoldfinger",
    "followers_url": "https://api.github.com/users/migoldfinger/followers",
    "following_url": "https://api.github.com/users/migoldfinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/migoldfinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/migoldfinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/migoldfinger/subscriptions",
    "organizations_url": "https://api.github.com/users/migoldfinger/orgs",
    "repos_url": "https://api.github.com/users/migoldfinger/repos",
    "events_url": "https://api.github.com/users/migoldfinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/migoldfinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-07-01T10:10:48Z",
  "updated_at": "2022-07-19T10:37:36Z",
  "closed_at": "2022-07-19T10:36:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nAt the moment it is impossible to use pure functions to initialize constants.\r\n\r\n## Motivation\r\n\r\nPure functions return based on the parameters if any always the same value regardless of time or status of the contract. In a way they are acting like static functions in C# for example.\r\nTherefore it should be possible to use pure functions to initialize constant variables.\r\n\r\n## Specification\r\n\r\nFor gas optimization the compiler should calculate the return value of a pure function used for constant initialization and replace the call with the returned value. Thinking ahead the compiler should do that with the complete expression right of the = operator if not already the case.\r\n\r\n## Backwards Compatibility\r\n\r\nThere should be no breaking changes.\r\n\r\n## Example\r\n```solidity\r\ncontract TestContract\r\n{\r\n\tuint256 private constant _MAX_SUPPLY = (1000000000 * (10**decimals()));\r\n\r\n\tfunction decimals() override public pure virtual returns (uint8)\r\n\t{\r\n\t\treturn 18;\r\n\t}\r\n}\r\n```\r\n\r\n",
  "closed_by": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13232/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13232/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1172345737",
    "html_url": "https://github.com/ethereum/solidity/issues/13232#issuecomment-1172345737",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13232",
    "id": 1172345737,
    "node_id": "IC_kwDOAm_5kc5F4JOJ",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-01T13:23:40Z",
    "updated_at": "2022-07-01T13:23:40Z",
    "author_association": "MEMBER",
    "body": "In theory, this is great. Unfortunately, our current definition of `pure` is rather broad. For example, you can have external calls in pure functions! That already makes constants incompatible with pure. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1172345737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1188891357",
    "html_url": "https://github.com/ethereum/solidity/issues/13232#issuecomment-1188891357",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13232",
    "id": 1188891357,
    "node_id": "IC_kwDOAm_5kc5G3Qrd",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T10:36:41Z",
    "updated_at": "2022-07-19T10:37:36Z",
    "author_association": "MEMBER",
    "body": "Duplicate of #3122.\r\n\r\n> For gas optimization the compiler should calculate the return value of a pure function used for constant initialization and replace the call with the returned value.\r\n\r\nYou're thinking of `pure` as something that has zero side-effects but that's not the case in Solidity. Currently it only means that the function cannot read and write storage. It can still freely read and write memory and calldata, use `codecopy` or, as mentioned by @hrkrshnn,  even make external calls. We have a whole discussion about it (#8153), but at the moment I think it's unlikely that we'll change it to the point of making it mean \"side-effect free\". It's more likely that we'll just introduce a new visibility level for such functions. That's actually something we have on our roadmap for the near future (#3157).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1188891357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

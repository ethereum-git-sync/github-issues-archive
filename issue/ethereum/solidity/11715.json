{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11715/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11715/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11715/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11715",
  "id": 954732162,
  "node_id": "MDU6SXNzdWU5NTQ3MzIxNjI=",
  "number": 11715,
  "title": "[Legacy/Sol->Yul] No compilation mode except optimized Sol->Yul issues a revert due to arithmetic overflow for exponentiation of very large numbers via a simple recursive algorithm",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1282209978,
      "node_id": "MDU6TGFiZWwxMjgyMjA5OTc4",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/optimizer",
      "name": "optimizer",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-07-28T10:56:01Z",
  "updated_at": "2021-08-03T11:46:09Z",
  "closed_at": "2021-08-03T10:37:11Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "```\r\nfunction exp(uint base, uint exponent) pure returns (uint power) {\r\n  if (exponent == 0)\r\n    return 1;\r\n  power = exp(base, exponent / 2);\r\n  power *= power;\r\n  if (exponent & 1 == 1)\r\n    power *= base;\r\n}\r\n\r\ncontract C {\r\n  function g(uint base, uint exponent) public pure returns (uint) {\r\n    return exp(base, exponent);\r\n  }\r\n}\r\n// ====\r\n// compileViaYul: also\r\n// ----\r\n// g(uint256, uint256): 55558612478609019528521988286241949159871555179327291270583879839857001820084,15045494086288292508913825510347384281681719338099058151627027489948519117802 -> FAILURE\r\n```\r\n\r\npasses but with different EVMC status codes\r\n\r\nLegacy: Stack underflow\r\nSol->Yul: Revert\r\n\r\nEdit:\r\n\r\nReproduction\r\n\r\n```\r\n$ cp test.sol test/libsolidity/semanticTests/testStackUnderflow.sol\r\n$ isoltest --optimize --show-messages -t semanticTests/testStackUnderflow\r\n```\r\n\r\nIdeally, legacy optimizer should also revert for this large exponentiation operation but it does not. Also note that the gas consumption in the legacy optimized call is unusually large (ideally, revert due to arithmetic overflow should occur in an earlier recursion call frame).\r\n\r\nGas table\r\n\r\n| Gas consumption | Legacy optimized call | Sol->Yul optimized call |\r\n| --- | --- | --- |\r\n|  | 9223372036854775807  | 34583 |\r\n\r\n\r\n_Originally posted by @bshastry in https://github.com/ethereum/solidity/issues/11709#issuecomment-887795572_",
  "closed_by": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11715/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11715/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888324696",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-888324696",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 888324696,
    "node_id": "IC_kwDOAm_5kc408sJY",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-28T13:49:22Z",
    "updated_at": "2021-07-28T13:49:22Z",
    "author_association": "MEMBER",
    "body": "I'm not able to reproduce this issue independently of the fuzzer. Will reopen if I find a way to. Until then, treating this as a false positive.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888324696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/890999676",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-890999676",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 890999676,
    "node_id": "IC_kwDOAm_5kc41G5N8",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T12:52:14Z",
    "updated_at": "2021-08-02T12:52:14Z",
    "author_association": "MEMBER",
    "body": "Reopening this since it is reproducible via isoltest's `--optimize` flag. See edited OP.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/890999676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891024228",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891024228",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891024228,
    "node_id": "IC_kwDOAm_5kc41G_Nk",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T13:23:31Z",
    "updated_at": "2021-08-02T13:27:54Z",
    "author_association": "MEMBER",
    "body": "Here's a summary of outcomes for legacy/Sol->Yul with/without opt\r\n\r\n| Configuration | Gas cost | EVMC status code (Description) |\r\n| --- | --- | --- |\r\n| Legacy without optimizer | 9223372036854775807  | 6 (Stack underflow) |\r\n| Sol->Yul without optimizer | 9223372036854775807  | 6 (Stack underflow) |\r\n| Legacy with optimizer | 9223372036854775807  | 6 (Stack underflow) |\r\n| Sol->Yul with optimizer | 34583  | 2 (Revert, panic code 0x11) |\r\n\r\nSo essentially a public facing contract implemented like in original post and compiled with or without optimization (legacy) is vulnerable to gas exhaustion.\r\n\r\nNote that the following input pairs revert as expected in all modes: `2, 256` (`2 ** 256`), `3, 256` (`3 ** 256`)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891024228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891115427",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891115427",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891115427,
    "node_id": "IC_kwDOAm_5kc41HVej",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T15:23:08Z",
    "updated_at": "2021-08-02T15:23:08Z",
    "author_association": "MEMBER",
    "body": "It's probably worth checking how the stack size grows in legacy and ir-optimized. Could you perhaps try to run a debugger and check why the growth is different? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891115427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891206290",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891206290",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891206290,
    "node_id": "IC_kwDOAm_5kc41HrqS",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T17:33:41Z",
    "updated_at": "2021-08-02T17:33:41Z",
    "author_association": "MEMBER",
    "body": "> Could you perhaps try to run a debugger and check why the growth is different?\r\n\r\nRemix seems to be a bad idea (browser tab crashes). IR optimized via Remix not possible it seems. I took a shot at reading assembly but the problem is that via IR assembly loses source location to original Solidity code as far as I understood, so it becomes hard to compare.\r\n\r\nOptimized legacy asm: https://gist.github.com/bshastry/88fb411affe10ae8b922dab0f67e8e5e\r\n\r\nOptimized IR asm: https://gist.github.com/bshastry/02111006987b419a3b39382722914103",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891206290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891699384",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891699384",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891699384,
    "node_id": "IC_kwDOAm_5kc41JkC4",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T09:42:55Z",
    "updated_at": "2021-08-03T09:42:55Z",
    "author_association": "MEMBER",
    "body": "Minor update:\r\n\r\nOptimized legacy debugging shows that:\r\n  - each level of recursion consumes 4 stack slots on average, 9 slots per frame is the maximum\r\n  - stack frame values follow the following pattern for exp(2, 256)\r\n    - 0x100, 0x02, <callsite_return>, 0x00\r\n    - the last `0x00` is presumably an empty stack slot reserved for return value\r\n  - if `exponent > exp(2, 253)`, worst case stack consumption is `1024 = 253 * 4 + 9 + 3` where `4` is stack slots consumed per recursion, `9` is the max stack consumption for the 254th recursion, and `3` is stack slots for the top-most call `g(base, exponent)`\r\n\r\ntl;dr For optimized legacy code, greater than 253 recursions can trigger stack-underflow (out-of-stack).\r\n  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891699384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891727099",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891727099",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891727099,
    "node_id": "IC_kwDOAm_5kc41Jqz7",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T10:22:58Z",
    "updated_at": "2021-08-03T10:22:58Z",
    "author_association": "MEMBER",
    "body": "| Configuration | Reverts upto (base = 2, exp = 2^p) where 0 <= p <= 255 |\r\n| --- | --- |\r\n| Legacy without optimizer | 251 |\r\n| Sol->Yul without optimizer | 250 |\r\n| Legacy with optimizer | 251 |\r\n| Sol->Yul with optimizer | 253 |\r\n\r\nSo, it looks like maximum recursion depth before out-of-stack is only marginally different across configurations. One hypothesis is that average stack allocation per recursive call does not differ significantly between these configurations. However, worst-case stack consumption does and this is the reason some configurations run out of stack sooner than others.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891727099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891732849",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891732849",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891732849,
    "node_id": "IC_kwDOAm_5kc41JsNx",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T10:31:44Z",
    "updated_at": "2021-08-03T10:31:44Z",
    "author_association": "MEMBER",
    "body": "Here's the most recursive test case currently only passed (returns successfully) by optimized IR.\r\n\r\n```\r\nfunction exp(uint base, uint exponent) pure returns (uint power) {\r\n  if (exponent == 0)\r\n    return 1;\r\n  power = exp(base, exponent / 2);\r\n  power *= power;\r\n  if (exponent & 1 == 1)\r\n    power *= base;\r\n}\r\n\r\ncontract C {\r\n  function g(uint base, uint exponent) public pure returns (uint) {\r\n    return exp(base, exponent);\r\n  }\r\n}\r\n// ====\r\n// compileViaYul: true\r\n// ----\r\n// g(uint256,uint256): 0x1, 0x2000000000000000000000000000000000000000000000000000000000000000 -> 1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891732849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891736294",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891736294",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891736294,
    "node_id": "IC_kwDOAm_5kc41JtDm",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T10:37:11Z",
    "updated_at": "2021-08-03T10:37:11Z",
    "author_association": "MEMBER",
    "body": "Summary before closing because this issue turned out to be a minor difference in stack allocation that affects different configurations slightly differently.\r\n\r\n- Different configurations run out of stack at different levels of recursion\r\n- Best case (most number of recursive calls) is optimized IR (solves `1 ** (2 ** 253)` i.e., 1 to the power of 2 to the power 253)\r\n- Second best are optimized and unoptimized legacy (solves `1 ** (2 ** 251)`)\r\n- Last is unoptimized IR (solves `1 ** (2 ** 250)`)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891736294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891740415",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891740415",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891740415,
    "node_id": "IC_kwDOAm_5kc41JuD_",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T10:44:01Z",
    "updated_at": "2021-08-03T10:44:01Z",
    "author_association": "MEMBER",
    "body": "> each level of recursion consumes 4 stack slots on average, 9 slots per frame is the maximum\r\n\r\n@bshastry Do you know how the stack grows in legacy v/s ir? I'm interested in knowing by how many elements the stack grows on each recursive call.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891740415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891778226",
    "html_url": "https://github.com/ethereum/solidity/issues/11715#issuecomment-891778226",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11715",
    "id": 891778226,
    "node_id": "IC_kwDOAm_5kc41J3Sy",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T11:43:42Z",
    "updated_at": "2021-08-03T11:46:09Z",
    "author_association": "MEMBER",
    "body": "> > each level of recursion consumes 4 stack slots on average, 9 slots per frame is the maximum\r\n> \r\n> @bshastry Do you know how the stack grows in legacy v/s ir? I'm interested in knowing by how many elements the stack grows on each recursive call.\r\n\r\nLegacy grows by 4 slots per recursive call. I don't know about IR though. But my guess is that it grows about the same (see table above: https://github.com/ethereum/solidity/issues/11715#issuecomment-891727099). If optimized IR were to take one slot fewer per recursive call, it would easily return the output of `1 ** (2 ** 255)` but the fact that it doesn't makes me believe that it is actually a matter of a handful of stack slots difference and definitely not an order of magnitude.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/891778226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

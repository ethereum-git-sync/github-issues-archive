{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10195/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10195/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10195/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10195",
  "id": 735952317,
  "node_id": "MDU6SXNzdWU3MzU5NTIzMTc=",
  "number": 10195,
  "title": "Consider type checking casting in 0.8",
  "user": {
    "login": "alcueca",
    "id": 38806121,
    "node_id": "MDQ6VXNlcjM4ODA2MTIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/38806121?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcueca",
    "html_url": "https://github.com/alcueca",
    "followers_url": "https://api.github.com/users/alcueca/followers",
    "following_url": "https://api.github.com/users/alcueca/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcueca/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcueca/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcueca/subscriptions",
    "organizations_url": "https://api.github.com/users/alcueca/orgs",
    "repos_url": "https://api.github.com/users/alcueca/repos",
    "events_url": "https://api.github.com/users/alcueca/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcueca/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 467898404,
      "node_id": "MDU6TGFiZWw0Njc4OTg0MDQ=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/breaking%20change%20:warning:",
      "name": "breaking change :warning:",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4438003076,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaNhA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20effort",
      "name": "medium effort",
      "color": "ff7df7",
      "default": false,
      "description": "Default level of effort"
    },
    {
      "id": 4438153180,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjX3A",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20impact",
      "name": "high impact",
      "color": "001dff",
      "default": false,
      "description": "Changes are very prominent and affect users or the project in a major way."
    },
    {
      "id": 4525128519,
      "node_id": "LA_kwDOAm_5kc8AAAABDbf7Rw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/needs%20design",
      "name": "needs design",
      "color": "18F737",
      "default": false,
      "description": "The proposal is too vague to be implemented right away"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-11-04T09:24:06Z",
  "updated_at": "2022-09-14T16:49:38Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nSolidity 0.8 is introducing type checking for arithmetic operations, but not for type casting. From my own experience most downcasting is wrapped in SafeMath-like functions in audited contracts. There are some notable exceptions (namely Uniswap v2 TWAP implementation and ABDKMath64x64) which could be managed through an `unckecked` block.\r\n\r\n## Motivation\r\n\r\nChecking type casting should be done as similarly as possible as checking overflow on arithmetic operations.\r\n\r\n## Specification\r\n\r\nNo new keywords would be required. Reuse `unchecked`.\r\n\r\n## Backwards Compatibility\r\n\r\nThis should be introduced for 0.8, as a breaking change, bundled with the arithmetic overflow checking.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10195/reactions",
    "total_count": 5,
    "+1": 5,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10195/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727896316",
    "html_url": "https://github.com/ethereum/solidity/issues/10195#issuecomment-727896316",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
    "id": 727896316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzg5NjMxNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T10:43:03Z",
    "updated_at": "2020-11-16T10:43:03Z",
    "author_association": "MEMBER",
    "body": "We will re-evaluate this, but it is probably too late to be included since it is a rather complex topic. The conversion rules will be simplified with 0.8, which could make this easier to add.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727896316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/801319764",
    "html_url": "https://github.com/ethereum/solidity/issues/10195#issuecomment-801319764",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
    "id": 801319764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTMxOTc2NA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-17T18:37:23Z",
    "updated_at": "2021-03-17T18:37:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Adding reverts on casting overflow would be a breaking change. I think this is an important safety check, and it should be done in the next breaking release, but I don't believe that should happen any time soon. In the meantime, we could consider adding a warning for downcasts that are outside `unchecked` blocks.\r\n\r\nMy only concern would be that this would produce warnings for anyone using our [`SafeCast`](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/09e302384a3c77be1b482b18a4e30f88630cfd66/contracts/utils/math/SafeCast.sol) library. But the code is pretty simple and I wonder if the compiler could detect that it's a safe downcast and thus avoid the warning in this case:\r\n\r\n```solidity\r\n    function toUint16(uint256 value) internal pure returns (uint16) {\r\n        require(value < 2**16, \"SafeCast: value doesn\\'t fit in 16 bits\");\r\n        return uint16(value);\r\n    }\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/801319764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/973135720",
    "html_url": "https://github.com/ethereum/solidity/issues/10195#issuecomment-973135720",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
    "id": 973135720,
    "node_id": "IC_kwDOAm_5kc46AN9o",
    "user": {
      "login": "vicnaum",
      "id": 5636644,
      "node_id": "MDQ6VXNlcjU2MzY2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5636644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vicnaum",
      "html_url": "https://github.com/vicnaum",
      "followers_url": "https://api.github.com/users/vicnaum/followers",
      "following_url": "https://api.github.com/users/vicnaum/following{/other_user}",
      "gists_url": "https://api.github.com/users/vicnaum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vicnaum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vicnaum/subscriptions",
      "organizations_url": "https://api.github.com/users/vicnaum/orgs",
      "repos_url": "https://api.github.com/users/vicnaum/repos",
      "events_url": "https://api.github.com/users/vicnaum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vicnaum/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-18T18:19:30Z",
    "updated_at": "2021-11-18T18:19:30Z",
    "author_association": "NONE",
    "body": "Is there a Warning already?\r\nI think many people are tricked with \"0.8.0 is safe with overflows\" and are assuming that conversions also should revert if the number overflows the resulting type. That's very dangerous and I saw no big warning on this topic anywhere. Wonder how many contracts are vulnerable because of this type of assumption?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/973135720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1028942359",
    "html_url": "https://github.com/ethereum/solidity/issues/10195#issuecomment-1028942359",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
    "id": 1028942359,
    "node_id": "IC_kwDOAm_5kc49VGoX",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-03T12:30:22Z",
    "updated_at": "2022-02-03T12:30:22Z",
    "author_association": "NONE",
    "body": "I support for this proposal",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1028942359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1247043297",
    "html_url": "https://github.com/ethereum/solidity/issues/10195#issuecomment-1247043297",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10195",
    "id": 1247043297,
    "node_id": "IC_kwDOAm_5kc5KVF7h",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T16:49:38Z",
    "updated_at": "2022-09-14T16:49:38Z",
    "author_association": "MEMBER",
    "body": "Related: https://github.com/ethereum/solidity/issues/11284",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1247043297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

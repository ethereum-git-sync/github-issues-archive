{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9442",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9442/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9442/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9442/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9442",
  "id": 660171200,
  "node_id": "MDU6SXNzdWU2NjAxNzEyMDA=",
  "number": 9442,
  "title": "Setting metadata.bytecodeHash to none still appends 12 bytes to the bytecode",
  "user": {
    "login": "junderw",
    "id": 11246316,
    "node_id": "MDQ6VXNlcjExMjQ2MzE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/junderw",
    "html_url": "https://github.com/junderw",
    "followers_url": "https://api.github.com/users/junderw/followers",
    "following_url": "https://api.github.com/users/junderw/following{/other_user}",
    "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
    "organizations_url": "https://api.github.com/users/junderw/orgs",
    "repos_url": "https://api.github.com/users/junderw/repos",
    "events_url": "https://api.github.com/users/junderw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/junderw/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-07-18T14:08:15Z",
  "updated_at": "2020-07-19T00:03:36Z",
  "closed_at": "2020-07-19T00:03:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSetting `metadata.bytecodeHash` to `'none'` in my truffle-config.js under the `compilers.solc.settings` object still appends a 12 byte data piece to the bytecode.\r\n\r\n`deploy_code[fe]contract_code[fe]a164736f6c634300060b000a`\r\n\r\nI would expect that `bytecode` just becomes `deploy_code[fe]contract_code`. Please forgive me if my understanding of contract deployment bytecode is insufficient.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.6.11\r\n- Target EVM version (as per compiler settings): istanbul\r\n- Framework/IDE (e.g. Truffle or Remix): Truffle\r\n- EVM execution environment / backend / blockchain client: Ganache\r\n- Operating system: Linux Mint\r\n\r\n## Steps to Reproduce\r\n\r\n- Set `metadata.bytecodeHash` to `'none'`\r\n- Compile\r\n- Inspect json output and check the bytecode\r\n",
  "closed_by": {
    "login": "junderw",
    "id": 11246316,
    "node_id": "MDQ6VXNlcjExMjQ2MzE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/junderw",
    "html_url": "https://github.com/junderw",
    "followers_url": "https://api.github.com/users/junderw/followers",
    "following_url": "https://api.github.com/users/junderw/following{/other_user}",
    "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
    "organizations_url": "https://api.github.com/users/junderw/orgs",
    "repos_url": "https://api.github.com/users/junderw/repos",
    "events_url": "https://api.github.com/users/junderw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/junderw/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9442/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9442/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/660560416",
    "html_url": "https://github.com/ethereum/solidity/issues/9442#issuecomment-660560416",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9442",
    "id": 660560416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDU2MDQxNg==",
    "user": {
      "login": "junderw",
      "id": 11246316,
      "node_id": "MDQ6VXNlcjExMjQ2MzE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junderw",
      "html_url": "https://github.com/junderw",
      "followers_url": "https://api.github.com/users/junderw/followers",
      "following_url": "https://api.github.com/users/junderw/following{/other_user}",
      "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
      "organizations_url": "https://api.github.com/users/junderw/orgs",
      "repos_url": "https://api.github.com/users/junderw/repos",
      "events_url": "https://api.github.com/users/junderw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junderw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-19T00:03:36Z",
    "updated_at": "2020-07-19T00:03:36Z",
    "author_association": "NONE",
    "body": "Ok, I now understand what it's doing. It is still adding the experimental and solc keys to denote which versions of solc etc. it used... This data is also not needed for our purposes.\r\n\r\nI guess this issue is resolved... I have deployed some contracts without the CBORMetadata (removing it and its preceding 0xfe) and it deployed and worked fine.\r\n\r\nhttps://github.com/ethereum/solidity/blob/76943023bd67d8628f12ac2c4f17fd9e40f2404c/libsolidity/interface/CompilerStack.cpp#L1375-L1393",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/660560416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/7698/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/7698/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/7698/events",
  "html_url": "https://github.com/ethereum/solidity/issues/7698",
  "id": 521570074,
  "node_id": "MDU6SXNzdWU1MjE1NzAwNzQ=",
  "number": 7698,
  "title": "[Build] update evmone to v0.2.0 and clean up docker image",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 437863668,
      "node_id": "MDU6TGFiZWw0Mzc4NjM2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/build%20system%20:building_construction:",
      "name": "build system :building_construction:",
      "color": "1d76db",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-11-12T14:02:32Z",
  "updated_at": "2019-11-18T22:05:58Z",
  "closed_at": "2019-11-18T22:05:58Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nevmone v0.2.0 is required to\r\n- ~~istanbul tests (via isoltest that requires shared evmone library)~~\r\n- speed up tests\r\n- ~~abiv2_proto_fuzzer (requires statically built evmone library)~~\r\n\r\nAlso the docker image that is currently used manually builds intx and ethash manually, creating the problem that these must be manually updated whenever we bump up evmone versions.\r\n\r\nThis issue tracks support for such an upgrade for our build and test CIs and doing away with manual intx and ethash builds.\r\n\r\n## Motivation\r\n\r\n- Build and install both static and shared libraries for evmone in the ubuntu 1904 clang docker image that is used for the fuzzer build CI\r\n  - Link the abiv2 proto fuzzer against the `libevmone-standone.a` static library\r\n- In the non clang docker images, build and install only the shared evmone library since these docker images are used by isoltest only and not the fuzzer\r\n- Remove manual installations of intx and ethash from all docker files\r\n- Build and deploy updated docker image\r\n\r\nIf all goes well, all CIs must pass once these changes are done.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/7698/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/7698/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/552992632",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-552992632",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 552992632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mjk5MjYzMg==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-12T17:13:41Z",
    "updated_at": "2019-11-12T17:13:41Z",
    "author_association": "MEMBER",
    "body": "> evmone v0.2.0 is required to run\r\n\r\n0.2.0 is just a speed update. It uses evcm6 so no changes are required.\r\n\r\n0.3.0, once released, will be needed for istanbul. It uses evcm7, which requires changes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/552992632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553005388",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553005388",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553005388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzAwNTM4OA==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-12T17:39:29Z",
    "updated_at": "2019-11-12T19:43:51Z",
    "author_association": "MEMBER",
    "body": "> > evmone v0.2.0 is required to run\r\n> \r\n> 0.2.0 is just a speed update. It uses evcm6 so no changes are required.\r\n> \r\n> 0.3.0, once released, will be needed for istanbul. It uses evcm7, which requires changes.\r\n\r\nOkay, in that case I see two options:\r\n\r\nOption 1:\r\n\r\n- Merge the fuzzer change portion of this PR (essentially linking against libevmone-standalone instead of the kitchen sink) + upgrade to 0.2.0 and cleanup to `develop`\r\n- Once `v0.3.0` is released, we create another PR with the version of evmone + evmc libs bumped up.\r\n\r\nOption 2:\r\n\r\n- Wait for evmone `v0.3.0` to be release and update this PR to use `v0.3.0` instead of `v0.2.0` (saves us a PR at the cost of waiting for the release)\r\n\r\nWhat do you think? CC @chriseth ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553005388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553006056",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553006056",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553006056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzAwNjA1Ng==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-12T17:40:58Z",
    "updated_at": "2019-11-12T17:40:58Z",
    "author_association": "MEMBER",
    "body": "I realize I misunderstood the intention of the original PR: It was for speeding up the underlying evm and not to enable istanbul tests :(",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553006056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553352940",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553352940",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553352940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzM1Mjk0MA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-13T11:01:10Z",
    "updated_at": "2019-11-13T11:01:10Z",
    "author_association": "MEMBER",
    "body": "> It was for speeding up the underlying evm and not to enable istanbul tests :(\r\n\r\nMy motivation was\r\n- to clear up the scripts by upgrading to 0.2.0,\r\n- learn how to update it before the bigger change of 0.3.0,\r\n- and at the same time make speed gains",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553352940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553354043",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553354043",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553354043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzM1NDA0Mw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-13T11:04:07Z",
    "updated_at": "2019-11-13T11:04:07Z",
    "author_association": "MEMBER",
    "body": "@bshastry I'd really opt for merging this for 0.2.0 as that is a clear update, no EVMC changes required. Supposedly during the process the docker files are cleaned up (using `libevmone-standalone` as depending on exact intx/ethash versions is messy).\r\n\r\nThen updating to 0.3.0 should be smoother.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553354043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553356631",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553356631",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553356631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzM1NjYzMQ==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-13T11:11:50Z",
    "updated_at": "2019-11-13T11:11:50Z",
    "author_association": "MEMBER",
    "body": "@axic Sounds good to me. Do you want to merge the small fuzzer change (linking against libevmone-standalone) + docker file change (building both shared and static evmone for the clang image and shared only for ubuntu 18.04/19.04 images) into the PR you created or should I do it via the new PR I created? In hindsight, I should have simply edited your branch.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553356631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553357171",
    "html_url": "https://github.com/ethereum/solidity/issues/7698#issuecomment-553357171",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7698",
    "id": 553357171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzM1NzE3MQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-13T11:13:22Z",
    "updated_at": "2019-11-13T11:13:22Z",
    "author_association": "MEMBER",
    "body": "I'd say just merge yours.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/553357171/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

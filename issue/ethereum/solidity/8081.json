{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/8081/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/8081/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/8081/events",
  "html_url": "https://github.com/ethereum/solidity/issues/8081",
  "id": 543040636,
  "node_id": "MDU6SXNzdWU1NDMwNDA2MzY=",
  "number": 8081,
  "title": "Introduce error instead of warning for functions called \"fallback\" or \"receive\"",
  "user": {
    "login": "nicholashc",
    "id": 44581646,
    "node_id": "MDQ6VXNlcjQ0NTgxNjQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/44581646?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicholashc",
    "html_url": "https://github.com/nicholashc",
    "followers_url": "https://api.github.com/users/nicholashc/followers",
    "following_url": "https://api.github.com/users/nicholashc/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicholashc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicholashc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicholashc/subscriptions",
    "organizations_url": "https://api.github.com/users/nicholashc/orgs",
    "repos_url": "https://api.github.com/users/nicholashc/repos",
    "events_url": "https://api.github.com/users/nicholashc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicholashc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 467898404,
      "node_id": "MDU6TGFiZWw0Njc4OTg0MDQ=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/breaking%20change%20:warning:",
      "name": "breaking change :warning:",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438157609,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjpKQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20impact",
      "name": "low impact",
      "color": "5d71ff",
      "default": false,
      "description": "Changes are not very noticeable or potential benefits are limited."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2019-12-28T01:44:57Z",
  "updated_at": "2022-09-26T19:17:59Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe fallback function syntax changes in Solidity 0.6.0 do not reserve `fallback` or `receive` as keywords. Standard functions named `fallback()` and `receive()` can be declared alongside, or instead of, the built-in fallback methods with the same names. Rather than reducing developer error and improving the readability of the code, this can lead to confusing syntax or, at worst, maliciously misleading contracts.\r\n\r\nPlease consider the following examples:\r\n\r\n```javascript\r\npragma solidity 0.6.0;\r\n\r\n/* \r\n* intended use of the new fallback syntax\r\n*/\r\ncontract StandardFallback {\r\n\r\n    /*  \r\n    * accepts ether sent with no txData\r\n    */\r\n    receive() external payable {}\r\n\r\n    /*\r\n    * refuses ether sent with txData that does not match any function signature in the contract\r\n    */\r\n    fallback() external {}\r\n}\r\n\r\n\r\n/* \r\n* confusing or malicious use of fallback syntax\r\n*/\r\ncontract ConfusingFallback {\r\n\r\n   /* \r\n   * declares a payable function called \"fallback()\" that is called with txData 0x552079dc\r\n   * this is NOT the fallback function. no fallback function is declared in this contract.\r\n   * ether sent with empty or non-matching txData is refused (exceptions: `selfdestruct` and `coinbase` rewards)\r\n   */\r\n    function fallback() external payable {}\r\n}\r\n\r\n\r\n/* \r\n* standard functions with misleading names in an inherited contract\r\n*/\r\ncontract NotFallback {\r\n    function fallback() external virtual {}\r\n    function receive() external virtual {}\r\n}\r\n\r\n\r\n/*\r\n* malicious contract creates the impression that the fallback function was overridden \r\n*/\r\ncontract ConfusingInheritance is NotFallback {\r\n    \r\n   /* \r\n   * valid fallback function accepts ether sent with no txData or data that does not match any function sig in the contract\r\n   */\r\n    fallback() external payable {}\r\n\r\n   /* \r\n   * inherited functions are overridden without affecting the contract's fallback functionality\r\n   */\r\n    function fallback() external override {}\r\n    function receive() external override {}\r\n}\r\n```\r\n\r\n`function fallback() external payable {}` is a valid function declaration but  _not a_ fallback function. This is confusingly similar to the <0.6.0 syntax of `function() external payable {}`, which is _is a valid_ fallback declaration.\r\n\r\nRather than simply throwing a warning in the compiler when used in standard functions, the `fallback` and `receive` keywords could be disallowed as names for standard functions. This would improve code readability and auditability. It would also prevent a possible fringe case in which a malicious author crafts misleading code that takes advantage of the ambiguous syntax changes in 0.6.0.\r\n\r\n## Environment\r\n\r\n- Compiler version: version: 0.6.0+commit.26b70077\r\n- Target EVM version: Petersburg\r\n- Optimisations: 200\r\n- Environment: Remix JavaScript VM",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/8081/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/8081/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/569544289",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-569544289",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 569544289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTU0NDI4OQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-29T21:39:23Z",
    "updated_at": "2019-12-29T21:39:23Z",
    "author_association": "MEMBER",
    "body": "Thanks for highlighting this. I think we should disallow those functions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/569544289/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/571083563",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-571083563",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 571083563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTA4MzU2Mw==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-06T10:17:46Z",
    "updated_at": "2020-01-06T10:17:46Z",
    "author_association": "MEMBER",
    "body": "This is rather weird - ``fallback`` and ``receive`` are in fact keywords and I was pretty sure that we had errors for using them as function names - I'll look into it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/571083563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/571086886",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-571086886",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 571086886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTA4Njg4Ng==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-06T10:27:39Z",
    "updated_at": "2020-01-06T10:27:39Z",
    "author_association": "MEMBER",
    "body": "Ah ok, I should have read more carefully - we do indeed have a warning, so the question is whether to have an error instead. I'm adding the \"to discuss\" label again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/571086886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/573618946",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-573618946",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 573618946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MzYxODk0Ng==",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-13T11:27:17Z",
    "updated_at": "2020-01-13T11:27:17Z",
    "author_association": "MEMBER",
    "body": "We prefer to keep it a warning until 0.7.0 where we want to re-evaluate the situation, but we also want to hear @axic 's opinion about this",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/573618946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574445948",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-574445948",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 574445948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDQ0NTk0OA==",
    "user": {
      "login": "nicholashc",
      "id": 44581646,
      "node_id": "MDQ6VXNlcjQ0NTgxNjQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/44581646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicholashc",
      "html_url": "https://github.com/nicholashc",
      "followers_url": "https://api.github.com/users/nicholashc/followers",
      "following_url": "https://api.github.com/users/nicholashc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicholashc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicholashc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicholashc/subscriptions",
      "organizations_url": "https://api.github.com/users/nicholashc/orgs",
      "repos_url": "https://api.github.com/users/nicholashc/repos",
      "events_url": "https://api.github.com/users/nicholashc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicholashc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T00:57:13Z",
    "updated_at": "2020-01-15T00:57:13Z",
    "author_association": "NONE",
    "body": "Thanks for your responses.\r\n\r\nI'm curious about the language design philosophy for determining when something should be a Warning vs. an Error. In this case, does the design of the language extend to a potential user of a smart contract who might be reading the verified source code on Etherscan, but not compiling it themselves? Should that type of user be able to make reasonable assumptions about the behaviour of the code? I'm thinking of the many honeypots and other misleading contracts that leverage ambiguous but valid Solidity to mislead potential users (for example, uninitialized storage pointers that long triggered a compiler warning but not an error).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574445948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574461924",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-574461924",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 574461924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDQ2MTkyNA==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T02:08:14Z",
    "updated_at": "2020-01-15T02:08:14Z",
    "author_association": "MEMBER",
    "body": "In this particular case, we don't want to cripple the ability of new contracts to interface with old contracts that define an external function called \"receive\" or e.g. a Vyper contract that still might define such a function.\r\nIn the future we may allow to import functions from ABI specifications which would basically allow renaming in these cases - at which point we probably won't hesitate to make this an error.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574461924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602628161",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-602628161",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 602628161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjYyODE2MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-23T14:24:39Z",
    "updated_at": "2020-03-23T14:24:39Z",
    "author_association": "MEMBER",
    "body": "I think we should allow such functions with a warning.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602628161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/614034466",
    "html_url": "https://github.com/ethereum/solidity/issues/8081#issuecomment-614034466",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8081",
    "id": 614034466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDAzNDQ2Ng==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-15T13:17:15Z",
    "updated_at": "2020-04-15T13:17:15Z",
    "author_association": "MEMBER",
    "body": "We could be quicker about making this an error, if/when https://github.com/ethereum/solidity/issues/1687  allows backwards compatibility with older contracts and compatibility with other languages.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/614034466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/6487/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/6487/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/6487/events",
  "html_url": "https://github.com/ethereum/solidity/issues/6487",
  "id": 430095744,
  "node_id": "MDU6SXNzdWU0MzAwOTU3NDQ=",
  "number": 6487,
  "title": "Different bytecodes for the same contracts",
  "user": {
    "login": "sammyne",
    "id": 16666661,
    "node_id": "MDQ6VXNlcjE2NjY2NjYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/16666661?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sammyne",
    "html_url": "https://github.com/sammyne",
    "followers_url": "https://api.github.com/users/sammyne/followers",
    "following_url": "https://api.github.com/users/sammyne/following{/other_user}",
    "gists_url": "https://api.github.com/users/sammyne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sammyne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sammyne/subscriptions",
    "organizations_url": "https://api.github.com/users/sammyne/orgs",
    "repos_url": "https://api.github.com/users/sammyne/repos",
    "events_url": "https://api.github.com/users/sammyne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sammyne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "erak",
    "id": 20012009,
    "node_id": "MDQ6VXNlcjIwMDEyMDA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/erak",
    "html_url": "https://github.com/erak",
    "followers_url": "https://api.github.com/users/erak/followers",
    "following_url": "https://api.github.com/users/erak/following{/other_user}",
    "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
    "organizations_url": "https://api.github.com/users/erak/orgs",
    "repos_url": "https://api.github.com/users/erak/repos",
    "events_url": "https://api.github.com/users/erak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/erak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-04-07T02:02:57Z",
  "updated_at": "2021-12-15T12:07:29Z",
  "closed_at": "2019-04-15T13:03:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\n<!--Please shortly describe the bug you have found, and what you expect instead.-->\r\n### Bug\r\nGiven the same contracts file but different path, compile with `solc` generate different bytecodes\r\n### Expectation\r\nThe same contract manifest should produce the same bytecodes\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.5.7+commit.6da8b019.Linux.g++\r\n- Target EVM version (as per compiler settings): No\r\n- Framework/IDE (e.g. Truffle or Remix): No\r\n- EVM execution environment / backend / blockchain client: No\r\n- Operating system: Fedora 29\r\n\r\n## Steps to Reproduce\r\n\r\n<!--\r\nPlease provide a *minimal* source code example to trigger the bug you have found.\r\nPlease also mention any command line flags that are necessary for triggering the bug.\r\nProvide as much information as necessary to reproduce the bug.\r\n\r\n```\r\n// Some *minimal* Solidity source code to reproduce the bug.\r\n// ...\r\n```\r\n-->\r\n\r\nTo ease the reproduction, I have make a repository as [solidity-playground](https://github.com/sammyne/solidity-playground) containing the relevant files below, and the steps for reproduce the problem found go as follows\r\n\r\n0. Clone the repository and change into the repository directory \r\n\r\n    ```bash\r\n    git clone https://github.com/sammyne/solidity-playground.git && cd solidity-playground\r\n    ```\r\n\r\n1. In the root directory, compile the `World` contract described as `contracts/World.sol` with bytecodes output to current directory\r\n\r\n   ```bash\r\n   solc --bin --optimize contracts/World.sol -o .\r\n   ```\r\n\r\n    This should give us two files `Hello.bin` and `World.bin` containing bytecodes for the respective contracts\r\n\r\n2. Change into the `contracts` folder, and compile the `World.sol` with bytecodes output to that folder\r\n\r\n   ```bash\r\n   solc --bin --optimize World.sol -o .\r\n   ```\r\n\r\n    This should also give us two files `Hello.bin` and `World.bin` containing bytecodes for the respective contracts\r\n\r\n3. Comparison tells difference \r\n   - Compare the `Hello.bin` and `contracts/Hello.bin` with `diff` would tell us difference\r\n   - Compare the `World.bin` and `contracts/World.bin` with `diff` would tell us difference\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/6487/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/6487/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/480858893",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-480858893",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 480858893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDg1ODg5Mw==",
    "user": {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-08T14:37:00Z",
    "updated_at": "2019-04-08T14:37:00Z",
    "author_association": "COLLABORATOR",
    "body": "@sammyne Thanks for your report. I'll have a look!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/480858893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483242583",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-483242583",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 483242583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI0MjU4Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T13:03:40Z",
    "updated_at": "2019-04-15T13:03:40Z",
    "author_association": "MEMBER",
    "body": "This is expected behaviour. The reason behind this is that depending on the paths used, import statements will behave differently. So the (relative) paths are exposed as the unique names of contracts when compiling. Since the bytecode contains the metadata information of contracts, this also affects the bytecode.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/483242583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/993875938",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-993875938",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 993875938,
    "node_id": "IC_kwDOAm_5kc47PVfi",
    "user": {
      "login": "rickbeeloo",
      "id": 19516376,
      "node_id": "MDQ6VXNlcjE5NTE2Mzc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19516376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rickbeeloo",
      "html_url": "https://github.com/rickbeeloo",
      "followers_url": "https://api.github.com/users/rickbeeloo/followers",
      "following_url": "https://api.github.com/users/rickbeeloo/following{/other_user}",
      "gists_url": "https://api.github.com/users/rickbeeloo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rickbeeloo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rickbeeloo/subscriptions",
      "organizations_url": "https://api.github.com/users/rickbeeloo/orgs",
      "repos_url": "https://api.github.com/users/rickbeeloo/repos",
      "events_url": "https://api.github.com/users/rickbeeloo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rickbeeloo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-14T18:47:18Z",
    "updated_at": "2021-12-14T18:47:18Z",
    "author_association": "NONE",
    "body": "Same here, https://snowtrace.io/contractdiffchecker?a2=0x0804Dd62deb46F11cDf47997778527B067E0D054&a1=0xB43C0e6460DAE61280fd4e6E793ae43Ed72AFA57, only difference I saw is that one had optimization enabled and other one did not. Could this cause that?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/993875938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/993893650",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-993893650",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 993893650,
    "node_id": "IC_kwDOAm_5kc47PZ0S",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-14T19:10:16Z",
    "updated_at": "2021-12-14T19:11:03Z",
    "author_association": "MEMBER",
    "body": "These contracts are not identical. Parameters passed to the inherited constructor differ:\r\n```solidity\r\nconstructor() ERC20(\"WAVAXPrinter\", \"WAVAXP\", 9) {\r\n```\r\nvs\r\n```solidity\r\nconstructor() ERC20(\"SonOfDAO\", \"SOD\", 9) {\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/993893650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/994163616",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-994163616",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 994163616,
    "node_id": "IC_kwDOAm_5kc47Qbug",
    "user": {
      "login": "rickbeeloo",
      "id": 19516376,
      "node_id": "MDQ6VXNlcjE5NTE2Mzc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19516376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rickbeeloo",
      "html_url": "https://github.com/rickbeeloo",
      "followers_url": "https://api.github.com/users/rickbeeloo/followers",
      "following_url": "https://api.github.com/users/rickbeeloo/following{/other_user}",
      "gists_url": "https://api.github.com/users/rickbeeloo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rickbeeloo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rickbeeloo/subscriptions",
      "organizations_url": "https://api.github.com/users/rickbeeloo/orgs",
      "repos_url": "https://api.github.com/users/rickbeeloo/repos",
      "events_url": "https://api.github.com/users/rickbeeloo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rickbeeloo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-15T00:23:17Z",
    "updated_at": "2021-12-15T00:23:17Z",
    "author_association": "NONE",
    "body": "> These contracts are not identical. Parameters passed to the inherited constructor differ:\r\n> \r\n> ```solidity\r\n> constructor() ERC20(\"WAVAXPrinter\", \"WAVAXP\", 9) {\r\n> ```\r\n> \r\n> vs\r\n> \r\n> ```solidity\r\n> constructor() ERC20(\"SonOfDAO\", \"SOD\", 9) {\r\n> ```\r\n\r\nAah yeah sorry didn't mean it like that, I meant the overall bytecode is completely different while only the constructor is different in the human readable code",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/994163616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/994728953",
    "html_url": "https://github.com/ethereum/solidity/issues/6487#issuecomment-994728953",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6487",
    "id": 994728953,
    "node_id": "IC_kwDOAm_5kc47Slv5",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-15T12:07:29Z",
    "updated_at": "2021-12-15T12:07:29Z",
    "author_association": "MEMBER",
    "body": "What specifically do you mean by \"overall bytecode\"? The compiler gives you separate bytecode for each contract it finds. So if constructor parameters are different, this particular contract will have different bytecode even if everything else in it is identical. Other contracts in the same compilation should have identical bytecode (if you ignore the metadata).\r\n\r\nPlease try to compile with `--metadata-hash none` (CLI) or `metadata: {bytecodeHash: \"none\"}` (Standard JSON). If you're still getting different bytecode with that and you're not on 0.6.12 and 0.7.0 (see #12281), please create a new issue and we'll look into that.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/994728953/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

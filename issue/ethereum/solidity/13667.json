{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13667",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13667/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13667/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13667/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13667",
  "id": 1429525135,
  "node_id": "I_kwDOAm_5kc5VNNKP",
  "number": 13667,
  "title": "Add \"macro\" keywords for better logging of error",
  "user": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-10-31T09:22:30Z",
  "updated_at": "2023-03-07T10:13:40Z",
  "closed_at": "2023-03-07T10:13:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nAdd `__FILE__`, `__LINE__`, `__CONTRACT__` and `__FUNCTION__` keywords, following the example of C/C++ macros, to improve the debugging\r\n\r\n## Motivation\r\n\r\nA recent discussion ([here on twitter](https://twitter.com/MicahZoltu/status/1586894671988785152)) discussed the upsides, and downside, of revert strings vs custom error. Without going to much into the details of the arguments, there appear to be rough consensus that filename and line number are valuable information to provide.\r\n\r\nFollowing my past experience with C++, I remember extensively using the macro commands to do \"poor man tracing\". I believe it would be nice to have the opportunity to do the same in solidity\r\n\r\n## Specification\r\n\r\nIntroduce 4 new reserved keywords: `__FILE__`, `__LINE__`, `__CONTRACT__`, `__FUNCTION__`.\r\nWhen compiling a file, these keywords should be statically replaced with the corresponding value:\r\n\r\n- `__FILE__` → a string containing the name of the file (including the fullpath?). Example `\"contracts/ERC20.sol\"`\r\n- `__LINE__` → a number containing the line in the file. Example `173`\r\n- `__CONTRACT__` → a string containing the name of the contract (or library) where the function is defined. (for free functions: replace with an empty string). Example: `\"ERC20\"`\r\n- `__FUNCTION__` → a string containing the name of the current function. To resolve ambiguity, this should contain the arguments type, but not the visibility or the return type. Example: `\"_transfer(address,address,uint256)\"`\r\n\r\nThere \"keyword\" are not types, because they are just to be replaced by some preprocessor. From the compiler/optimizer point of view they should be equivalent to the developer writing the corresponding value itself.  \r\n\r\n## Backwards Compatibility\r\n\r\nThis will break compatibility with any contract that currently uses any of these keywords. I don't expect that to be an issue. A quick search on [tintinweb/smart-contract-sanctuary](https://github.com/tintinweb/smart-contract-sanctuary) does not find any such occurence.\r\n",
  "closed_by": {
    "login": "nikola-matic",
    "id": 4415530,
    "node_id": "MDQ6VXNlcjQ0MTU1MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4415530?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nikola-matic",
    "html_url": "https://github.com/nikola-matic",
    "followers_url": "https://api.github.com/users/nikola-matic/followers",
    "following_url": "https://api.github.com/users/nikola-matic/following{/other_user}",
    "gists_url": "https://api.github.com/users/nikola-matic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nikola-matic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nikola-matic/subscriptions",
    "organizations_url": "https://api.github.com/users/nikola-matic/orgs",
    "repos_url": "https://api.github.com/users/nikola-matic/repos",
    "events_url": "https://api.github.com/users/nikola-matic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nikola-matic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13667/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13667/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1457903906",
    "html_url": "https://github.com/ethereum/solidity/issues/13667#issuecomment-1457903906",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13667",
    "id": 1457903906,
    "node_id": "IC_kwDOAm_5kc5W5dki",
    "user": {
      "login": "nikola-matic",
      "id": 4415530,
      "node_id": "MDQ6VXNlcjQ0MTU1MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4415530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikola-matic",
      "html_url": "https://github.com/nikola-matic",
      "followers_url": "https://api.github.com/users/nikola-matic/followers",
      "following_url": "https://api.github.com/users/nikola-matic/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikola-matic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikola-matic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikola-matic/subscriptions",
      "organizations_url": "https://api.github.com/users/nikola-matic/orgs",
      "repos_url": "https://api.github.com/users/nikola-matic/repos",
      "events_url": "https://api.github.com/users/nikola-matic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikola-matic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-07T10:13:39Z",
    "updated_at": "2023-03-07T10:13:39Z",
    "author_association": "MEMBER",
    "body": "Hi @Amxx, and thanks for posting. I'll be closing this issue since it's not a high priority (and not on our roadmap), and as such, preprocessor is not in the scope for the team, at least in the foreseeable future. The request you posted does however have merit, and would be nice to have, however your point about this being breaking, but not expecting it to be an issue is a bit of a moot point, since on our end, it is 100% a breaking change, and would as such require a breaking release, regardless of whether people were actually using these identifiers or not.\r\n\r\nIn any case, it would be nice to open a forum post and get some support for this so that we can at least properly prioritize issues for development, since at the moment, we have hundreds of open issues, and not enough resources to address all of them. All in all, if this does get to the point where we decide it's something we'll work on - it will still require language design.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1457903906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

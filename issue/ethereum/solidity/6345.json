{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/6345",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/6345/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/6345/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/6345/events",
  "html_url": "https://github.com/ethereum/solidity/issues/6345",
  "id": 423785019,
  "node_id": "MDU6SXNzdWU0MjM3ODUwMTk=",
  "number": 6345,
  "title": "Problems accessing methods in contracts compiled in Solidity 0.5.5 onwards",
  "user": {
    "login": "kevinaquick",
    "id": 4312083,
    "node_id": "MDQ6VXNlcjQzMTIwODM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4312083?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinaquick",
    "html_url": "https://github.com/kevinaquick",
    "followers_url": "https://api.github.com/users/kevinaquick/followers",
    "following_url": "https://api.github.com/users/kevinaquick/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinaquick/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinaquick/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinaquick/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinaquick/orgs",
    "repos_url": "https://api.github.com/users/kevinaquick/repos",
    "events_url": "https://api.github.com/users/kevinaquick/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinaquick/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-03-21T15:16:31Z",
  "updated_at": "2019-03-21T16:06:24Z",
  "closed_at": "2019-03-21T16:06:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "We are running a number of Parity Private Networks running with PoA.\r\n\r\nThe configuration being\r\nContracts compileD with differing versions of solcjs  (also used the code compiled on Remix as a double check)\r\nParity 2.3.7-stable-7d1415a-20190320\r\nLinux Ubuntu 16.04.6\r\n\r\nWe recently updated the version of Solidity our contracts were compiled under and have found that we can no longer make calls to methods within the Contract. We have investigated this in detail and have found that when contracts are compiled  for solidity versions higher than 0.5.4 we can no longer access the methods in the contract (we progressively compiled contracts from 0.4.x up to 0.5.7 = current stable release).\r\n\r\nHaving discovered the issue we wrote an extremely basic contract, to test what/ when the problem occurred. An example of the contract being as follows:\r\n\r\npragma solidity ^0.5.5;\r\n\r\ncontract test {\r\naddress public owner = 0x005e6478C5f01671f632d987e1aE862c570B7FB8;\r\nstring public name = \"Fred\";\r\n\r\nconstructor() public {\r\n}\r\nfunction getOwner() view public returns (address) {\r\n\treturn owner;\r\n}\r\n\r\n}\r\n\r\nWe have tried calling the getOwner method via web3 IPC calls using both the most uptodate version of web3 (1.0.0-beta.50) and a much older version - both versions of web3 successfully can call getOwner and receive the returned address value IF the contract is compiled on versions of solidity of 0.5.4 and below, but fail for higher versions. To eliminate the possibility of this being a problem in the web3 code we repeated the experiment, but instead accessing the contract via CURL calls e.g.\r\n\r\ncurl localhost:55260 -X POST --data '{\"jsonrpc\":\"2.0\", \"method\":\"eth_call\", \"params\":[{\"from\": \"0x00e9415aa2b0a4b37537c5f0e3f5dfc6b0a46aac\", \"to\": \"0xb45211274e8644bef6517aca557aa247d99e5a67\", \"data\": \"0x893d20e8\"}], \"id\":1}' -H \"Content-Type: application/json\"\r\n\r\nThis behaved identically to the web3 i.e. getOwner() could be called successfully as long as the contract was compiled for Solidity 0.5.4 and below. For 0.5.5 to the latest stable release 0.5.7 the following error is generated (from the curl calls although effectively identical to that thrown out by web3):\r\n\r\n{\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32015,\"message\":\"VM execution error.\",\"data\":\"Bad instruction 1c\"},\"id\":1}\r\n\r\nSO I think that eliminates web3 etc.\r\n\r\nWe also have a private Geth chain and we observe identical behaviour here to with contracts compiled for 0.5.5 solidity onwards",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/6345/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/6345/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/475294199",
    "html_url": "https://github.com/ethereum/solidity/issues/6345#issuecomment-475294199",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/6345",
    "id": 475294199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTI5NDE5OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T16:06:24Z",
    "updated_at": "2019-03-21T16:06:24Z",
    "author_association": "MEMBER",
    "body": "Following the hard fork on the Ethereum mainnet that occured shortly before the 0.5.5 release, the default EVM version now is set to \"petersburg\". If you are running a byzantium testnet, you have to compile with `--evm-version byzantium` or similar in the standard-json settings.\r\n\r\nPlease reopen if this did not solve the problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/475294199/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

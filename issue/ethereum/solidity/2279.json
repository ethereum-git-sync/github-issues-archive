{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/2279",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/2279/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/2279/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/2279/events",
  "html_url": "https://github.com/ethereum/solidity/issues/2279",
  "id": 229387037,
  "node_id": "MDU6SXNzdWUyMjkzODcwMzc=",
  "number": 2279,
  "title": "Soltest fails against newer versions of cpp-ethereum",
  "user": {
    "login": "seusher",
    "id": 416212,
    "node_id": "MDQ6VXNlcjQxNjIxMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/416212?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/seusher",
    "html_url": "https://github.com/seusher",
    "followers_url": "https://api.github.com/users/seusher/followers",
    "following_url": "https://api.github.com/users/seusher/following{/other_user}",
    "gists_url": "https://api.github.com/users/seusher/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/seusher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/seusher/subscriptions",
    "organizations_url": "https://api.github.com/users/seusher/orgs",
    "repos_url": "https://api.github.com/users/seusher/repos",
    "events_url": "https://api.github.com/users/seusher/events{/privacy}",
    "received_events_url": "https://api.github.com/users/seusher/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-05-17T15:11:12Z",
  "updated_at": "2017-07-09T07:53:32Z",
  "closed_at": "2017-07-09T07:53:32Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "After starting cpp-ethereum with ```eth --test -d /tmp/testeth``` and then running soltest via ```./soltest -- --ipcpath /tmp/testeth/geth.ipc```, all ipc tests will fail when using a recent version of cpp-ethereum:\r\n\r\n```\r\nfatal error: in \"SolidityAuctionRegistrar/creation\": Error on JSON-RPC call: INTERNAL_ERROR: \r\n```\r\n\r\nHere are logs generated by uncommenting the request logging in ```RPCSession::rpcCall```:\r\n\r\n```\r\nRequest: {\"jsonrpc\":\"2.0\",\"method\":\"personal_newAccount\",\"params\":[\"\"],\"id\":1}\r\nReply: {\"id\":1,\"jsonrpc\":\"2.0\",\"result\":\"0xa3d63670803df468e83fd15853b9b3f9704e2614\"}\r\n\r\nRequest: {\"jsonrpc\":\"2.0\",\"method\":\"personal_unlockAccount\",\"params\":[\"0xa3d63670803df468e83fd15853b9b3f9704e2614\", \"\", 100000],\"id\":2}\r\nReply: {\"id\":2,\"jsonrpc\":\"2.0\",\"result\":true}\r\n\r\nRequest: {\"jsonrpc\":\"2.0\",\"method\":\"test_setChainParams\",\"params\":[{\"accounts\":{\"0000000000000000000000000000000000000001\":{\"precompiled\":{\"linear\":{\"base\":3000,\"word\":0},\"name\":\"ecrecover\"},\"wei\":\"1\"},\"0000000000000000000000000000000000000002\":{\"precompiled\":{\"linear\":{\"base\":60,\"word\":12},\"name\":\"sha256\"},\"wei\":\"1\"},\"0000000000000000000000000000000000000003\":{\"precompiled\":{\"linear\":{\"base\":600,\"word\":120},\"name\":\"ripemd160\"},\"wei\":\"1\"},\"0000000000000000000000000000000000000004\":{\"precompiled\":{\"linear\":{\"base\":15,\"word\":3},\"name\":\"identity\"},\"wei\":\"1\"},\"0xa3d63670803df468e83fd15853b9b3f9704e2614\":{\"wei\":\"0x100000000000000000000000000000000000000000\"}},\"genesis\":{\"author\":\"0000000000000010000000000000000000000000\",\"extraData\":\"0x\",\"gasLimit\":\"0x1000000000000\",\"parentHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"timestamp\":\"0x00\"},\"params\":{\"EIP150ForkBlock\":\"0x00\",\"EIP158ForkBlock\":\"0x00\",\"accountStartNonce\":\"0x\",\"allowFutureBlocks\":\"1\",\"blockReward\":\"0x\",\"homsteadForkBlock\":\"0x00\",\"maximumExtraDataSize\":\"0x1000000\"},\"sealEngine\":\"NoProof\"}\r\n],\"id\":3}\r\nReply: {\"error\":{\"code\":-32603,\"data\":null,\"message\":\"INTERNAL_ERROR: \"},\"id\":3,\"jsonrpc\":\"2.0”}\r\n```\r\nThis issue was confirmed by chriseth on Gitter:\r\n\r\n```chriseth @chriseth 01:17\r\n@seusher yes, we noticed that, it happens with latest develop version of cpp-ethereum. You can make it work by using a slighttly older version of cpp-ethereum or wait for our fix\r\n```\r\n\r\nIn order to make debugging easier, the Request and Response messages should be written via BOOST_TEST_MESSAGE so it logs according to the --log_level=message argument to soltest.",
  "closed_by": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/2279/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/2279/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/302183102",
    "html_url": "https://github.com/ethereum/solidity/issues/2279#issuecomment-302183102",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/2279",
    "id": 302183102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjE4MzEwMg==",
    "user": {
      "login": "seusher",
      "id": 416212,
      "node_id": "MDQ6VXNlcjQxNjIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seusher",
      "html_url": "https://github.com/seusher",
      "followers_url": "https://api.github.com/users/seusher/followers",
      "following_url": "https://api.github.com/users/seusher/following{/other_user}",
      "gists_url": "https://api.github.com/users/seusher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seusher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seusher/subscriptions",
      "organizations_url": "https://api.github.com/users/seusher/orgs",
      "repos_url": "https://api.github.com/users/seusher/repos",
      "events_url": "https://api.github.com/users/seusher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seusher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-17T18:21:25Z",
    "updated_at": "2017-05-17T18:21:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Building commit 4943d3eeae865537e18c410e5e7d064825bf2711 of cpp-ethereum allowed soltest to progress much further, though it still failed on a test_mineBlocks call, which caused cpp-ethereum's worker to die:\r\n\r\n```\r\nRequest: {\"jsonrpc\":\"2.0\",\"method\":\"test_mineBlocks\",\"params\":[1],\"id\":20}\r\nReply: {\"id\":19,\"jsonrpc\":\"2.0\",\"result\":\"0x1\"}\r\n\r\n/Users/seusher/Documents/git/solidity/test/RPCSession.cpp:264: fatal error: in \"SolidityAuctionRegistrar/transfer\": critical check rpcCall(\"test_mineBlocks\", { to_string(_number) }, true) == true has failed\r\n```\r\n```\r\nSeans-MBP:cpp-ethereum seusher$ eth --test -d /tmp/testeth\r\ncpp-ethereum, a C++ Ethereum client\r\ncpp-ethereum 1.3.0\r\n  By cpp-ethereum contributors, (c) 2013-2016.\r\n  See the README for contributors and credits.\r\nTransaction Signer: XE50000000000000000000000000000000 (00000000-0000-0000-0000-000000000000 - 00000000)\r\nMining Beneficiary: XE50000000000000000000000000000000 (00000000-0000-0000-0000-000000000000 - 00000000)\r\nFoundation: XE55PXQKKK4B9BYPBGT1XCYW6R5ELFAT6EM (00000000-0000-0000-0000-000000000000 - de0b2956)\r\nNetworking disabled. To start, use netstart or pass --bootstrap or a remote host.\r\nJSONRPC Admin Session Key: akp4+x51rMQ=\r\n ⚡   11:17:37.190|  Stop worker 646 ms\r\n  ℹ  11:17:37.193|  Killing blockchain & extras database (WithExisting::Kill).\r\n  ℹ  11:17:37.199|  Killing state database (WithExisting::Kill).\r\n ⚡   11:17:38.222|eth  Worker stopping 1031 ms\r\n ⚡   11:18:25.598|  Stop worker 186 ms\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/302183102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/302219531",
    "html_url": "https://github.com/ethereum/solidity/issues/2279#issuecomment-302219531",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/2279",
    "id": 302219531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjIxOTUzMQ==",
    "user": {
      "login": "seusher",
      "id": 416212,
      "node_id": "MDQ6VXNlcjQxNjIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seusher",
      "html_url": "https://github.com/seusher",
      "followers_url": "https://api.github.com/users/seusher/followers",
      "following_url": "https://api.github.com/users/seusher/following{/other_user}",
      "gists_url": "https://api.github.com/users/seusher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seusher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seusher/subscriptions",
      "organizations_url": "https://api.github.com/users/seusher/orgs",
      "repos_url": "https://api.github.com/users/seusher/repos",
      "events_url": "https://api.github.com/users/seusher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seusher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-17T20:18:14Z",
    "updated_at": "2017-05-17T20:18:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "In case someone else wants to be able to easily see RPC requests/responses, I have created a pull request: https://github.com/ethereum/solidity/pull/2280 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/302219531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/313905153",
    "html_url": "https://github.com/ethereum/solidity/issues/2279#issuecomment-313905153",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/2279",
    "id": 313905153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzkwNTE1Mw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-09T07:53:32Z",
    "updated_at": "2017-07-09T07:53:32Z",
    "author_association": "MEMBER",
    "body": "Closing this since the message was added to the test suite and I've reported this on cpp-ethereum (https://github.com/ethereum/cpp-ethereum/issues/4240).\r\n\r\n@seusher please comment over there if this still persists.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/313905153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

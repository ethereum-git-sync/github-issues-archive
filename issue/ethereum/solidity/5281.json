{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5281/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5281/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5281/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5281",
  "id": 372115887,
  "node_id": "MDU6SXNzdWUzNzIxMTU4ODc=",
  "number": 5281,
  "title": "Import paths that do not start with `.` or `..` are not treated as global paths and are treated differently when remapping",
  "user": {
    "login": "justinmeiners",
    "id": 3220045,
    "node_id": "MDQ6VXNlcjMyMjAwNDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3220045?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/justinmeiners",
    "html_url": "https://github.com/justinmeiners",
    "followers_url": "https://api.github.com/users/justinmeiners/followers",
    "following_url": "https://api.github.com/users/justinmeiners/following{/other_user}",
    "gists_url": "https://api.github.com/users/justinmeiners/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/justinmeiners/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/justinmeiners/subscriptions",
    "organizations_url": "https://api.github.com/users/justinmeiners/orgs",
    "repos_url": "https://api.github.com/users/justinmeiners/repos",
    "events_url": "https://api.github.com/users/justinmeiners/events{/privacy}",
    "received_events_url": "https://api.github.com/users/justinmeiners/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-10-19T21:05:47Z",
  "updated_at": "2022-09-14T17:40:48Z",
  "closed_at": "2022-09-14T17:40:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\nThe solidity documentation makes the following claim:\r\n\r\n> All path names are treated as absolute paths unless they start with the current . or the parent directory ..\r\n\r\nThis does not appear to be true from a remapping perspective. This suggests to me that  a remapping such as `/=/some/include/path` should apply to imports which do not start with `.` or `..` For example, `import \"file.solc\";` These remapping to do not  work on these unprefixed imports.\r\n\r\nIn version 4.25 empty remappings could modify these imports. For example `=/some/include/path` would successfully remap `import \"file.solc\";` However, empty remappings seem to apply to everything, including relative imprts that start with `.` This contradicts this claim:\r\n> ... always treated as a path with `/` as directory separator, `.` as the current and `..` as the parent directory.\r\n\r\n I am guessing this is why empty remappings were [removed recently](https://github.com/ethereum/solidity/commit/954d7433bd8c10bce917326f70070077f0cfc165#diff-a8a5760144e03e410389fb0afd20e8c8R148).\r\n\r\n### Expected\r\n\r\nIf I am misinterpreting what the documentation means by \"treated as absolute path\", there still needs to be a way to remap includes which are not prefixed, without breaking relative imports.\r\n\r\nIn C and C++ `#include \"file.h\"` is used to include a file relative, to the current. While `#include <file.h>` would search the header include paths.\r\n\r\nSimilarly I expect something like `import \"./file.sol\"` to be a relative import. While `import \"file.sol\"` would be able to be remapped elsewhere. Currently there appears no way to do this.\r\n\r\nOnce, again, the solidity documentation seems to suggest this is the behaviour:\r\n\r\n> To import a file `x` from the same directory as the current file, use `import \"./x\" as x;`. If you use `import \"x\" as x;` instead, a different file could be referenced (in a global “include directory”).\r\n\r\n## Environment\r\n\r\nTested on both theses compilers. As I mentioned 0.50 is slightly different in that it disallows relative imports.\r\n- Compiler version:\r\n   * 0.5.0-develop.2018.10.12+commit.94526b2d.Linux.g++\r\n   * 0.4.25+commit.59dbf8f1.Linux.g++\r\n- Operating system:\r\n   * Linux (Ubuntu 18)\r\n\r\n## Steps to Reproduce\r\n\r\n### Example 1\r\n\r\nThis will not remap file.sol elsewhere. It will attempt to include relative to the current file.\r\n```\r\nsolc  root.sol /=/some/other/path\r\n```\r\nroot.sol\r\n```\r\nimport \"file.sol\";\r\n```\r\n\r\n### Example 2\r\n\r\nThis will remap file.sol elsewhere, despite being a relative import.\r\n```\r\nsolc  root.sol =/some/other/path\r\n```\r\nroot.sol\r\n```\r\nimport \"./file.sol\";\r\n```\r\n\r\n<!--\r\nPlease provide a *minimal* source code example to trigger the bug you have found.\r\nPlease also mention any command line flags that are necessary for triggering the bug.\r\nProvide as much information as necessary to reproduce the bug.\r\n\r\n-->",
  "closed_by": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5281/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5281/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/433033631",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-433033631",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 433033631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzAzMzYzMQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-25T12:36:54Z",
    "updated_at": "2018-10-25T12:36:54Z",
    "author_association": "MEMBER",
    "body": "I fear that trying to remap `\"/\"` to something is just as little helpful as trying to remap `\"\"`. In general, remappings only really work with actual directories (and the \"root\" is not really a directory).\r\nImporting files without context is unfortunately not supported. If you move your file into a directory, the remapping would work:\r\n\r\nIf you want to import a file called `file.h` from a library called `fileLib`, just use `import \"fileLib/file.h\"` and then use the remapping to point to the correct directory: `fileLib=/usr/local/mylibs/`.\r\n\r\nWe did not add a feature to just search for imported files in some random directories in the way a C compiler would do it because - at least to me - where the actual file in the end comes from is not clear in such a setting. `import \"x.h\"` and `import \"g.h\"` could import from different directories. If you use `import \"lib1/x.h\"` and `import \"lib2/g.h\"` it at least gets a little clearer where to look.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/433033631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/434445893",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-434445893",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 434445893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDQ0NTg5Mw==",
    "user": {
      "login": "justinmeiners",
      "id": 3220045,
      "node_id": "MDQ6VXNlcjMyMjAwNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3220045?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/justinmeiners",
      "html_url": "https://github.com/justinmeiners",
      "followers_url": "https://api.github.com/users/justinmeiners/followers",
      "following_url": "https://api.github.com/users/justinmeiners/following{/other_user}",
      "gists_url": "https://api.github.com/users/justinmeiners/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/justinmeiners/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/justinmeiners/subscriptions",
      "organizations_url": "https://api.github.com/users/justinmeiners/orgs",
      "repos_url": "https://api.github.com/users/justinmeiners/repos",
      "events_url": "https://api.github.com/users/justinmeiners/events{/privacy}",
      "received_events_url": "https://api.github.com/users/justinmeiners/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T19:54:34Z",
    "updated_at": "2018-10-30T19:54:34Z",
    "author_association": "NONE",
    "body": "@chriseth that is reasonable, although the confusing of where an import is happening hasn't been an issue for C. Could the documentation be updated to specify this behaviour?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/434445893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/789977440",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-789977440",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 789977440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4OTk3NzQ0MA==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-03T18:58:33Z",
    "updated_at": "2021-03-03T18:58:33Z",
    "author_association": "MEMBER",
    "body": "This seems related to #11036.\r\n\r\nSo it appears that an empty path, `/` and paths starting with `./` and `../` are not remappable on purpose? I think that an attempt to remap them should not be ignored and result in an error instead (preferably with a message explaining why this is the case).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/789977440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/790604304",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-790604304",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 790604304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDYwNDMwNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T13:06:12Z",
    "updated_at": "2021-03-04T13:06:12Z",
    "author_association": "MEMBER",
    "body": "@cameel I would say remappings are applied after removal of `.` and `..` from the path.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/790604304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/790708752",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-790708752",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 790708752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDcwODc1Mg==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T15:39:47Z",
    "updated_at": "2021-03-04T15:40:37Z",
    "author_association": "MEMBER",
    "body": "OK. That's exactly what happens now (i.e. it kinda looks to the user as if `./` and `../` are not remappable but that's just because they're no longer in the path that the remapping is operating on). But I think that's all the more reason to report an error when user tries to remap them.\r\n\r\nAlso, I wonder if the current behavior is actually useful in practice. In normal circumstances it seems redundant. For example if you do `/a/b=/x/y` then you change `import \"/a/b/c.sol\"` to `import \"/x/y/c.sol\"`. If `d.sol` then contains `import \"./d.sol\"`, the compiler will look for `d.sol` in `/x/y/` (because that's where `c.sol` is physically located) so the remapping does not play any role here.\r\n\r\nThe only thing you can achieve by remapping the expanded path is the unintuitive behavior where `import \"./d.sol\"` ends up importing a file that's not in the same directory as `c.sol`. This would happen for example if you used `/a/b=/x/y /x/y=/a/b` in the example above.\r\n\r\nFor that reason I think it would be better to just completely forbid remapping `.` and `..`. To me it looks like its main use would be writing underhanded code :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/790708752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1247098731",
    "html_url": "https://github.com/ethereum/solidity/issues/5281#issuecomment-1247098731",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5281",
    "id": 1247098731,
    "node_id": "IC_kwDOAm_5kc5KVTdr",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T17:40:17Z",
    "updated_at": "2022-09-14T17:40:17Z",
    "author_association": "MEMBER",
    "body": "I'm closing this since the documentation has been updated to precisely describe the behavior of relative and direct imports: [Import Path Resolution > Imports](https://docs.soliditylang.org/en/latest/path-resolution.html#imports).\r\n\r\nAfter working on the import paths I see that the current behavior does have its merits. There are things that maybe should be improved but better to create new issues for them, describing exactly the part we'd want to change.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1247098731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14442",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14442/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14442/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14442/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14442",
  "id": 1817170634,
  "node_id": "I_kwDOAm_5kc5sT9LK",
  "number": 14442,
  "title": "Custom Errors support in `require`",
  "user": {
    "login": "SteMak",
    "id": 26607726,
    "node_id": "MDQ6VXNlcjI2NjA3NzI2",
    "avatar_url": "https://avatars.githubusercontent.com/u/26607726?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SteMak",
    "html_url": "https://github.com/SteMak",
    "followers_url": "https://api.github.com/users/SteMak/followers",
    "following_url": "https://api.github.com/users/SteMak/following{/other_user}",
    "gists_url": "https://api.github.com/users/SteMak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SteMak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SteMak/subscriptions",
    "organizations_url": "https://api.github.com/users/SteMak/orgs",
    "repos_url": "https://api.github.com/users/SteMak/repos",
    "events_url": "https://api.github.com/users/SteMak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SteMak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4438003076,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaNhA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20effort",
      "name": "medium effort",
      "color": "ff7df7",
      "default": false,
      "description": "Default level of effort"
    },
    {
      "id": 4438488423,
      "node_id": "LA_kwDOAm_5kc8AAAABCI31Zw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/must%20have",
      "name": "must have",
      "color": "ffa12a",
      "default": false,
      "description": "Something we consider an essential part of Solidity 1.0."
    },
    {
      "id": 4726043980,
      "node_id": "LA_kwDOAm_5kc8AAAABGbG1TA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/feature",
      "name": "feature",
      "color": "fbca02",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-23T15:26:32Z",
  "updated_at": "2023-11-10T07:54:06Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nSince Gas-efficient Custom Errors were added in `solidity 0.8.4`, the `require` statement has become mostly unused. The `if (!condition) revert CustomError()` pattern sometimes looks branchy and makes requirement understanding somewhat harder.\r\n```js\r\nrequire(min <= value && value <= max, \"Value not within bounds\");\r\n// comparing to\r\nif (min > value || value > max) revert NotWithinBounds(min, max, value);\r\n```\r\n\r\nI found a [workaround](https://github.com/SteMak/solidity_ensure), however, it consumes some more Gas compared to ordinary Custom Errors usage.\r\n\r\n## Motivation\r\n\r\nI propose implementing Custom Errors support for the `require` statement, providing Custom Error as the second parameter instead of an error message.\r\n```js\r\nerror NotWithinBounds(uint256 min, uint256 max, uint256 actual);\r\n\r\nfunction checkBounds(uint256 min, uint256 max, uint256 value) external pure {\r\n  require(min <= value && value <= max, NotWithinBounds(min, max, value));\r\n}\r\n```\r\n\r\n## Specification\r\n\r\nThere are several opportunities:\r\n- Make error an ordinary type lazy loads on `revert` burning\r\n  ```js\r\n  // Bytes error message is not calculated there\r\n  require(condition, CustomError(params));\r\n\r\n  function require(bool condition, error err) pure {\r\n    if (!condition) revert err; // Bytes error message is generated here\r\n  }\r\n  ```\r\n- Implement inline functions #12297\r\n  ```js\r\n  require(condition, () => revert CustomError(params));\r\n\r\n  function require(bool condition, function() pure handler) pure {\r\n    if (!condition) handler();\r\n  }\r\n  ```\r\n- Make the transformation below in compile time\r\n  ```js\r\n  require(condition, CustomError(params));\r\n  // changed to\r\n  if (!condition) revert CustomError(params);\r\n  ```\r\n\r\n## Backwards Compatibility\r\n\r\nAs Solidity allows function overloading, the creation of `require(bool, error, or other suitable type)` should not break backward compatibility.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14442/reactions",
    "total_count": 11,
    "+1": 10,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14442/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1652192985",
    "html_url": "https://github.com/ethereum/solidity/issues/14442#issuecomment-1652192985",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14442",
    "id": 1652192985,
    "node_id": "IC_kwDOAm_5kc5ienbZ",
    "user": {
      "login": "agnxsh",
      "id": 80243668,
      "node_id": "MDQ6VXNlcjgwMjQzNjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/80243668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agnxsh",
      "html_url": "https://github.com/agnxsh",
      "followers_url": "https://api.github.com/users/agnxsh/followers",
      "following_url": "https://api.github.com/users/agnxsh/following{/other_user}",
      "gists_url": "https://api.github.com/users/agnxsh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agnxsh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agnxsh/subscriptions",
      "organizations_url": "https://api.github.com/users/agnxsh/orgs",
      "repos_url": "https://api.github.com/users/agnxsh/repos",
      "events_url": "https://api.github.com/users/agnxsh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agnxsh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T17:03:32Z",
    "updated_at": "2023-07-26T17:03:32Z",
    "author_association": "NONE",
    "body": "can i take this issue please?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1652192985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1707529538",
    "html_url": "https://github.com/ethereum/solidity/issues/14442#issuecomment-1707529538",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14442",
    "id": 1707529538,
    "node_id": "IC_kwDOAm_5kc5lxtVC",
    "user": {
      "login": "fulldecent",
      "id": 382183,
      "node_id": "MDQ6VXNlcjM4MjE4Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/382183?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fulldecent",
      "html_url": "https://github.com/fulldecent",
      "followers_url": "https://api.github.com/users/fulldecent/followers",
      "following_url": "https://api.github.com/users/fulldecent/following{/other_user}",
      "gists_url": "https://api.github.com/users/fulldecent/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fulldecent/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fulldecent/subscriptions",
      "organizations_url": "https://api.github.com/users/fulldecent/orgs",
      "repos_url": "https://api.github.com/users/fulldecent/repos",
      "events_url": "https://api.github.com/users/fulldecent/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fulldecent/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T01:49:04Z",
    "updated_at": "2023-09-06T01:49:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "I fully support this issue because it increases clarity and expressiveness of the language.\r\n\r\nIt matches \"guards\" that other languages have. And a great programming pattern is to put all your guards at the top of a function.\r\n\r\nRecognizing that this issue is now labeled as \"must have\" I have added at to the documentation at https://github.com/ethereum/solidity/pull/14539",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1707529538/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1805253879",
    "html_url": "https://github.com/ethereum/solidity/issues/14442#issuecomment-1805253879",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14442",
    "id": 1805253879,
    "node_id": "IC_kwDOAm_5kc5rmfz3",
    "user": {
      "login": "n00b21337",
      "id": 8969767,
      "node_id": "MDQ6VXNlcjg5Njk3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8969767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/n00b21337",
      "html_url": "https://github.com/n00b21337",
      "followers_url": "https://api.github.com/users/n00b21337/followers",
      "following_url": "https://api.github.com/users/n00b21337/following{/other_user}",
      "gists_url": "https://api.github.com/users/n00b21337/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/n00b21337/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/n00b21337/subscriptions",
      "organizations_url": "https://api.github.com/users/n00b21337/orgs",
      "repos_url": "https://api.github.com/users/n00b21337/repos",
      "events_url": "https://api.github.com/users/n00b21337/events{/privacy}",
      "received_events_url": "https://api.github.com/users/n00b21337/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-10T07:54:06Z",
    "updated_at": "2023-11-10T07:54:06Z",
    "author_association": "NONE",
    "body": "Please lets have it. \r\n\"If pattern\" is really suboptimal.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1805253879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

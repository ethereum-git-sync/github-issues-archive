{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5840",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5840/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5840/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5840/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5840",
  "id": 401751203,
  "node_id": "MDU6SXNzdWU0MDE3NTEyMDM=",
  "number": 5840,
  "title": "Fuzz YUL optimizer",
  "user": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-01-22T12:54:06Z",
  "updated_at": "2019-01-23T15:07:47Z",
  "closed_at": "2019-01-23T15:07:46Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nThe YUL optimizer needs to be fuzz tested. See also #3638 and #3639\r\n\r\n## Motivation\r\n\r\n1. Step 1: Write the test harness\r\n2. Step 2: Devise ways to assert optimizer inconsistencies\r\n\r\n### Test harness\r\n\r\nThere are two ways to do this\r\n\r\n[Medium effort] Write a libFuzzer test harness that takes a corpus of existing `yul` code that is available in the source repo, and uses random-but-clever-coverage-guided-mutations of this corpus to stress test the optimizer\r\n\r\n[High effort] Write a grammar for yul [1] and write a protobuf-based-libfuzzer yul generator [2] to stress test the optimizer. The main advantage compared to the purely coverage guided yul generation approach is that the yul generator is probably more likely to be parseable and can hence test deeper portions of the program.\r\n\r\n[1]: https://solidity.readthedocs.io/en/v0.5.0/yul.html#specification-of-yul\r\n[2]: https://github.com/llvm-mirror/clang/blob/master/tools/clang-fuzzer/cxx_proto.proto\r\n\r\n### Assertion\r\n\r\nAssertion should be based on inconsistencies between execution traces corresponding to input yul code and output (optimized) yul code. At a high level something like so:\r\n\r\n```\r\nyul_in_trace = traceYul(yul_in);\r\nyul_out_trace = traceYul(yul_out);\r\nassert(yul_in_trace == yul_out_trace);\r\n```\r\n\r\nwhere `yul_in` and `yul_out`  are the (fuzzed) input yul code and the optimized yul code.",
  "closed_by": {
    "login": "bshastry",
    "id": 2388185,
    "node_id": "MDQ6VXNlcjIzODgxODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bshastry",
    "html_url": "https://github.com/bshastry",
    "followers_url": "https://api.github.com/users/bshastry/followers",
    "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
    "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
    "organizations_url": "https://api.github.com/users/bshastry/orgs",
    "repos_url": "https://api.github.com/users/bshastry/repos",
    "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bshastry/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5840/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5840/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/456836633",
    "html_url": "https://github.com/ethereum/solidity/issues/5840#issuecomment-456836633",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5840",
    "id": 456836633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NjgzNjYzMw==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-23T15:07:46Z",
    "updated_at": "2019-01-23T15:07:46Z",
    "author_association": "MEMBER",
    "body": "This is a duplicate, see #3639.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/456836633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

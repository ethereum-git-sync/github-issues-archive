{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/1188/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/1188/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/1188/events",
  "html_url": "https://github.com/ethereum/solidity/issues/1188",
  "id": 182021544,
  "node_id": "MDU6SXNzdWUxODIwMjE1NDQ=",
  "number": 1188,
  "title": "LLL: support symbols in the LIT keyword",
  "user": {
    "login": "zigguratt",
    "id": 102482,
    "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zigguratt",
    "html_url": "https://github.com/zigguratt",
    "followers_url": "https://api.github.com/users/zigguratt/followers",
    "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
    "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
    "organizations_url": "https://api.github.com/users/zigguratt/orgs",
    "repos_url": "https://api.github.com/users/zigguratt/repos",
    "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zigguratt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2016-10-10T13:58:15Z",
  "updated_at": "2020-01-15T14:18:13Z",
  "closed_at": "2020-01-15T14:18:13Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "The `lit` keyword works as expected when used inline:\n\n```\n(sha3 0x00 (lit 0x00 \"Initialized(bool)\"))\n```\n\nAs with any LLL keyword, `lit` should be usable in a macro:\n\n```\n(def 'keccak (input)\n  (sha3 0x00 (lit 0x00 input)))\n```\n\nHowever, when the `keccak` macro is subsequently invoked:\n\n```\n(keccak \"Initialized(bool)\")\n```\n\nthe compiler produces this error:\n\n```\nParse error.\n/tmp/cpp-ethereum-20160629-19326-1m7sp55/solidity/liblll/CodeFragment.h(53): Throw in function void dev::eth::CodeFragment::error() const [T = dev::eth::InvalidLiteral]\nDynamic exception type: boost::exception_detail::clone_impl<dev::eth::InvalidLiteral>\nstd::exception::what: std::exception\n```\n",
  "closed_by": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/1188/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/1188/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253639560",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-253639560",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 253639560,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzYzOTU2MA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-13T21:09:20Z",
    "updated_at": "2016-10-13T21:09:20Z",
    "author_association": "MEMBER",
    "body": "Is it happening in every case or certain cases only? Do you need some help tracking it down?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253639560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253768733",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-253768733",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 253768733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Mzc2ODczMw==",
    "user": {
      "login": "zigguratt",
      "id": 102482,
      "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zigguratt",
      "html_url": "https://github.com/zigguratt",
      "followers_url": "https://api.github.com/users/zigguratt/followers",
      "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
      "organizations_url": "https://api.github.com/users/zigguratt/orgs",
      "repos_url": "https://api.github.com/users/zigguratt/repos",
      "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zigguratt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-14T10:49:03Z",
    "updated_at": "2016-10-14T11:00:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "The error happens in all cases where `lit` is executed in a `def` and a string literal is expected. I haven't tested other input types. The `lit` [docs](https://github.com/ethereum/cpp-ethereum/wiki/LLL-PoC-6/04fae9e627ac84d771faddcf60098ad09230ab58#literals--code) describe three possible input literal types. This fails in a `def` macro because I believe the `lit` handler doesn't expect the type of input provided to it by `def`. \n\nI'm not yet familiar enough with the `liblll` C++ source to be able to follow the trail effectively so yes, help tracking it down would be greatly appreciated. The `lit` handler is at line [274](https://github.com/ethereum/solidity/blob/develop/liblll/CodeFragment.cpp#L274) of `CodeFragment.cpp`, and `def` is at line [225](https://github.com/ethereum/solidity/blob/develop/liblll/CodeFragment.cpp#L225). I'll continue to try to figure it out as well.\n\nThanks, @axic!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253768733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253771774",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-253771774",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 253771774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Mzc3MTc3NA==",
    "user": {
      "login": "zigguratt",
      "id": 102482,
      "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zigguratt",
      "html_url": "https://github.com/zigguratt",
      "followers_url": "https://api.github.com/users/zigguratt/followers",
      "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
      "organizations_url": "https://api.github.com/users/zigguratt/orgs",
      "repos_url": "https://api.github.com/users/zigguratt/repos",
      "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zigguratt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-14T11:06:46Z",
    "updated_at": "2016-10-14T11:06:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would normally look through the assembly code produced by the compiler to see what `lit` is getting, but the error prevents the assembly code from being generated.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253771774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253875278",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-253875278",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 253875278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Mzg3NTI3OA==",
    "user": {
      "login": "zigguratt",
      "id": 102482,
      "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zigguratt",
      "html_url": "https://github.com/zigguratt",
      "followers_url": "https://api.github.com/users/zigguratt/followers",
      "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
      "organizations_url": "https://api.github.com/users/zigguratt/orgs",
      "repos_url": "https://api.github.com/users/zigguratt/repos",
      "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zigguratt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-14T17:59:29Z",
    "updated_at": "2016-10-14T17:59:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "A quick update: I just tested the other two types of input to `lit` in a macro and they both fail in the same way. So it's not specific to string literals.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253875278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253942238",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-253942238",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 253942238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Mzk0MjIzOA==",
    "user": {
      "login": "zigguratt",
      "id": 102482,
      "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zigguratt",
      "html_url": "https://github.com/zigguratt",
      "followers_url": "https://api.github.com/users/zigguratt/followers",
      "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
      "organizations_url": "https://api.github.com/users/zigguratt/orgs",
      "repos_url": "https://api.github.com/users/zigguratt/repos",
      "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zigguratt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-14T23:20:07Z",
    "updated_at": "2016-10-14T23:20:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually, I'd like to try to figure this out myself for a bit longer. There's no huge hurry and it would be good for me to get more familiar with the code anyway. I appreciate the offer of help and I'll probably take you up on it in the near future.\n\nThanks again, @axic!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/253942238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/259124441",
    "html_url": "https://github.com/ethereum/solidity/issues/1188#issuecomment-259124441",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1188",
    "id": 259124441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTEyNDQ0MQ==",
    "user": {
      "login": "zigguratt",
      "id": 102482,
      "node_id": "MDQ6VXNlcjEwMjQ4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/102482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zigguratt",
      "html_url": "https://github.com/zigguratt",
      "followers_url": "https://api.github.com/users/zigguratt/followers",
      "following_url": "https://api.github.com/users/zigguratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/zigguratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zigguratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zigguratt/subscriptions",
      "organizations_url": "https://api.github.com/users/zigguratt/orgs",
      "repos_url": "https://api.github.com/users/zigguratt/repos",
      "events_url": "https://api.github.com/users/zigguratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zigguratt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T12:30:41Z",
    "updated_at": "2016-11-08T12:30:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "It's not looking good for being able to fix this bug. @axic and I have looked in-depth at the `lit` code in the compiler. Having to look up symbols at compile time is a problem because, according to @axic, \"the whole compiler works on the assumption that everything is evaluated runtime and no instructions are there to be evaluated an compile time\".\n\nThat makes sense. Sadly, it introduces a situation where a legitimate LLL keyword can't be used in a macro because in that context it gets a symbol as input, which would require a compile-time evaluation.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/259124441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

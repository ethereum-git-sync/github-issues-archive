{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13907/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13907/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13907/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13907",
  "id": 1564492118,
  "node_id": "I_kwDOAm_5kc5dQEFW",
  "number": 13907,
  "title": "Invalid function signature due to a whitespace in between function parameter arguments",
  "user": {
    "login": "dcbuild3r",
    "id": 19372745,
    "node_id": "MDQ6VXNlcjE5MzcyNzQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19372745?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dcbuild3r",
    "html_url": "https://github.com/dcbuild3r",
    "followers_url": "https://api.github.com/users/dcbuild3r/followers",
    "following_url": "https://api.github.com/users/dcbuild3r/following{/other_user}",
    "gists_url": "https://api.github.com/users/dcbuild3r/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dcbuild3r/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dcbuild3r/subscriptions",
    "organizations_url": "https://api.github.com/users/dcbuild3r/orgs",
    "repos_url": "https://api.github.com/users/dcbuild3r/repos",
    "events_url": "https://api.github.com/users/dcbuild3r/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dcbuild3r/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4525128519,
      "node_id": "LA_kwDOAm_5kc8AAAABDbf7Rw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/needs%20design",
      "name": "needs design",
      "color": "18F737",
      "default": false,
      "description": "The proposal is too vague to be implemented right away"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2023-01-31T15:06:51Z",
  "updated_at": "2023-01-31T17:27:35Z",
  "closed_at": "2023-01-31T17:11:06Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWhen calling a function through an interface and using **(1)**\r\n```solidity\r\nabi.encodeWithSignature(“functionSignature(param1Type, param2Type)”)\r\n``` \r\nto encode the message it creates a different function signature than **(2)**\r\n```solidity\r\nabi.encodeWithSignature(“functionSignature(param1Type,param2Type)”)\r\n```\r\n because of the whitespace between `(“param1Type,<WHITESPACE>param2Type)”`.\r\n\r\nThe correct use is **(2)** and this can introduce bugs in contracts.\r\n\r\nOne of the contracts I made had this bug and the resulting behavior is that the Solidity contract reverts because it can't find a corresponding function signature to what's being called through the interface in a different contract. ([example](https://goerli-optimism.etherscan.io/tx/0x175fb60ef815fdfd96945a360594be529ecf201b5e51bda2a90698fdaeb73013))\r\n\r\nMy question is whether the `solc` compiler can remove whitespaces between function parameter arguments at compile time or at least issue a warning that there are whitespaces in between function parameter arguments.\r\n\r\n## Environment\r\n\r\nI believe this applies to all Solidity versions that support [EIP-712](https://eips.ethereum.org/EIPS/eip-712) if I'm not mistaken. \r\n",
  "closed_by": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13907/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13907/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410671131",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410671131",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410671131,
    "node_id": "IC_kwDOAm_5kc5UFSIb",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T16:16:20Z",
    "updated_at": "2023-01-31T16:16:44Z",
    "author_association": "MEMBER",
    "body": "The compiler just sees a regular memory string here - i.e. there's no real difference between ``abi.encodeWithSignature(“functionSignature(param1Type,param2Type)”)`` and\r\n```\r\nstring memory x = “functionSignature(param1Type,param2Type)”;\r\nabi.encodeWithSignature(x);\r\n```\r\n\r\nAnd for an arbitrary statement like ``string memory x = “functionSignature(param1Type,param2Type)”;``, in general, there is no way to tell if this is meant to be a function signature or any other kind of string, in which you may very much *want* explicit whitespace.\r\n\r\nSo given that, I don't think warning about the whitespace nor automatically removing this is an option.\r\n\r\n\r\nHowever, what we can consider, is adding compiler-constructs for constructing suitable strings from properly typed expressions in the language, similar to how we have builtin constructs for computing selectors of functions.\r\n\r\nSo e.g. for\r\n```\r\ncontract C {\r\nfunction f(uint a, uint b) external {}\r\n}\r\n```\r\nWe currently have ``f.selector`` being based on the hash of the signature ``f(uint256,uint256)``. We *could* add something like that as ``f.signature``. However, that would not really match all the cases occurring in EIP-712, e.g. structs.\r\n\r\nEventually, it would be nice to have sufficient compile-time-constant expression evaluation and reflection in the language to actually be able to safely synthesize such strings at compile-time, but that's far away in the future, so the question is whether we can do something now that will help in these cases.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410671131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410680070",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410680070",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410680070,
    "node_id": "IC_kwDOAm_5kc5UFUUG",
    "user": {
      "login": "dcbuild3r",
      "id": 19372745,
      "node_id": "MDQ6VXNlcjE5MzcyNzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19372745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcbuild3r",
      "html_url": "https://github.com/dcbuild3r",
      "followers_url": "https://api.github.com/users/dcbuild3r/followers",
      "following_url": "https://api.github.com/users/dcbuild3r/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcbuild3r/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcbuild3r/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcbuild3r/subscriptions",
      "organizations_url": "https://api.github.com/users/dcbuild3r/orgs",
      "repos_url": "https://api.github.com/users/dcbuild3r/repos",
      "events_url": "https://api.github.com/users/dcbuild3r/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcbuild3r/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T16:22:05Z",
    "updated_at": "2023-01-31T16:22:57Z",
    "author_association": "NONE",
    "body": "my friend @smartcontracts recommended me to just use \r\n```solidity\r\nabi.encodeCall(MyContract.function, (arg1, arg2))\r\n``` \r\nbecause it's type safe and it is impossible to mess up this way. Maybe a linter or LSP could catch the bug I had above as well with `regexp` or something.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410680070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410685750",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410685750",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410685750,
    "node_id": "IC_kwDOAm_5kc5UFVs2",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T16:25:45Z",
    "updated_at": "2023-01-31T16:25:45Z",
    "author_association": "MEMBER",
    "body": "That will give you a four-byte selector based on the hash of the signature of ``MyContract.function``, with the ABI-encoding of the arguments ``(arg1, arg2)`` appended to it. If that's in fact the only thing you end up needing, then that's indeed the best option.\r\n\r\nAnd yes, this could be hinted at by analysis or linting tools, but I'd consider it out-of-scope of the compiler itself, i.e. that'd be a job for an external tool plugged into an IDE or such.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410685750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410692712",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410692712",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410692712,
    "node_id": "IC_kwDOAm_5kc5UFXZo",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T16:28:45Z",
    "updated_at": "2023-01-31T16:28:45Z",
    "author_association": "MEMBER",
    "body": "So yeah, I got a bit distracted by the mention of EIP-712 there.\r\n\r\nFor any use of ``abi.encodeWithSignature(...)``, using `abi.encodeCall(...)`, if possible, is indeed *always* the better choice. Will that cover all the cases of type hashes that may occur in EIP-712 as well?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410692712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410744754",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410744754",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410744754,
    "node_id": "IC_kwDOAm_5kc5UFkGy",
    "user": {
      "login": "dcbuild3r",
      "id": 19372745,
      "node_id": "MDQ6VXNlcjE5MzcyNzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19372745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcbuild3r",
      "html_url": "https://github.com/dcbuild3r",
      "followers_url": "https://api.github.com/users/dcbuild3r/followers",
      "following_url": "https://api.github.com/users/dcbuild3r/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcbuild3r/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcbuild3r/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcbuild3r/subscriptions",
      "organizations_url": "https://api.github.com/users/dcbuild3r/orgs",
      "repos_url": "https://api.github.com/users/dcbuild3r/repos",
      "events_url": "https://api.github.com/users/dcbuild3r/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcbuild3r/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T17:00:48Z",
    "updated_at": "2023-01-31T17:00:48Z",
    "author_association": "NONE",
    "body": "I believe so",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410744754/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410760665",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410760665",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410760665,
    "node_id": "IC_kwDOAm_5kc5UFn_Z",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T17:11:06Z",
    "updated_at": "2023-01-31T17:11:06Z",
    "author_association": "MEMBER",
    "body": "Alright, if this is actually already covered by `abi.encodeCall`, I'm closing the issue.\r\n\r\nFeel free to reopen, if any additional case not handled by this comes up.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410760665/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410783372",
    "html_url": "https://github.com/ethereum/solidity/issues/13907#issuecomment-1410783372",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13907",
    "id": 1410783372,
    "node_id": "IC_kwDOAm_5kc5UFtiM",
    "user": {
      "login": "dcbuild3r",
      "id": 19372745,
      "node_id": "MDQ6VXNlcjE5MzcyNzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19372745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcbuild3r",
      "html_url": "https://github.com/dcbuild3r",
      "followers_url": "https://api.github.com/users/dcbuild3r/followers",
      "following_url": "https://api.github.com/users/dcbuild3r/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcbuild3r/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcbuild3r/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcbuild3r/subscriptions",
      "organizations_url": "https://api.github.com/users/dcbuild3r/orgs",
      "repos_url": "https://api.github.com/users/dcbuild3r/repos",
      "events_url": "https://api.github.com/users/dcbuild3r/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcbuild3r/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T17:27:34Z",
    "updated_at": "2023-01-31T17:27:34Z",
    "author_association": "NONE",
    "body": "thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1410783372/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

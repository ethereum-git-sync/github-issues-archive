{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3515/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3515/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3515/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3515",
  "id": 297344708,
  "node_id": "MDU6SXNzdWUyOTczNDQ3MDg=",
  "number": 3515,
  "title": "Make `length` member read-only (S)",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 467898404,
      "node_id": "MDU6TGFiZWw0Njc4OTg0MDQ=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/breaking%20change%20:warning:",
      "name": "breaking change :warning:",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "erak",
    "id": 20012009,
    "node_id": "MDQ6VXNlcjIwMDEyMDA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/erak",
    "html_url": "https://github.com/erak",
    "followers_url": "https://api.github.com/users/erak/followers",
    "following_url": "https://api.github.com/users/erak/following{/other_user}",
    "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
    "organizations_url": "https://api.github.com/users/erak/orgs",
    "repos_url": "https://api.github.com/users/erak/repos",
    "events_url": "https://api.github.com/users/erak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/erak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2018-02-15T06:49:58Z",
  "updated_at": "2019-11-21T18:23:04Z",
  "closed_at": "2019-11-21T18:23:03Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Once we have the `pop` member function (https://github.com/ethereum/solidity/issues/2780) there should be almost no need for writing to the `length` member of a dynamic storage array.\r\n\r\nArbitrary write access to the `length` member is dangerous as it can lead to gigantic arrays which are in turn vulnerable to a storage overlap attack (multiple arrays or an array and a mapping overlap in a predictable way). If many elements of various numbers are to be stored, mappings are probably superiour anyway.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3515/reactions",
    "total_count": 6,
    "+1": 6,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3515/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366192769",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-366192769",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 366192769,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjE5Mjc2OQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-16T10:03:07Z",
    "updated_at": "2018-02-16T10:03:07Z",
    "author_association": "MEMBER",
    "body": "Perhaps on certain cases there could be a `.truncate` function to drop multiple items, but if dropping is not constant on a given type I'd prefer not to have `.truncate`, but `.pop` only so it will be apparent to the programmer that gas usage must be considered (it will be quite clear with having `pop` in a `for` loop).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366192769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366206814",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-366206814",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 366206814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjIwNjgxNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-16T11:06:02Z",
    "updated_at": "2018-02-16T11:06:02Z",
    "author_association": "MEMBER",
    "body": "Increasing the length currently is a constant-gas operation, but this exactly is the problem, it opens the door for overlap attacks.\r\n\r\nTruncating is currently a linear-gas operation, so a for loop with pop calls would be roughly the same. There is a difference when you truncate an array with elements that are shorter than 16 bytes, because it only performs a single write per slot. A future optimizer might do loop unrolling to fix that, though.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366206814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366262110",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-366262110",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 366262110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjI2MjExMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-16T15:12:41Z",
    "updated_at": "2018-02-16T15:12:41Z",
    "author_association": "MEMBER",
    "body": "There are some use-cases where you want to extend the array by an element with its default zero value. Especially for more complex arrays, it is a detour to first construct it in memory and then `push`ing it onto the storage array.\r\n\r\nFor that, we should perhaps introduce `a.pushEmpty()`, which does exactly the same thing as `a.length++` (plus bounds check perhaps).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/366262110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/371994395",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-371994395",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 371994395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTk5NDM5NQ==",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-10T02:14:00Z",
    "updated_at": "2018-03-10T02:14:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "The best way to drop 5 elements at once is with a single SSTORE, subtracting 5 from the length. If length becomes read-only, we would need more builtins to restore lost functionality. \r\n\r\nFor example, this: https://gist.github.com/wjmelements/fab8c6961cff3dbd8715c7c55d29d660\r\nProduces cheaper code than: https://gist.github.com/wjmelements/a949117a87305b17482d2f517aa1c6e7\r\n\r\nI am in support of `truncate`, and also `extend`, and would prefer to keep the ability to update arrays cheaply.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/371994395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372320341",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-372320341",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 372320341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjMyMDM0MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T14:03:54Z",
    "updated_at": "2018-03-12T14:03:54Z",
    "author_association": "MEMBER",
    "body": "truncate is not constant, but extend can be. Still, we want to prevent constant-cost resizing operations to avoid people having gigantic arrays that might cause collisions in storage.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372320341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372320663",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-372320663",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 372320663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjMyMDY2Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T14:04:53Z",
    "updated_at": "2018-03-12T14:04:53Z",
    "author_association": "MEMBER",
    "body": "@wjmelements the simple examples you gave should compile to exactly the same code if the optimizer is used.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372320663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372514030",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-372514030",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 372514030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUxNDAzMA==",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T01:18:42Z",
    "updated_at": "2018-03-13T01:18:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "It's not the same code; with initial nonzero length, the first `sponsor` costs `128575` while the second `sponsor` costs `149929`. I suspect 20000 of that difference is four unnecessary SSTOREs on the length.\r\n\r\n(compiled with optimization on 0.4.21+commit.dfe3193c.Emscripten.clang)\r\n\r\nI would welcome the compiler performing such optimizations but at the moment it does not.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372514030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372517796",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-372517796",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 372517796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUxNzc5Ng==",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T01:40:44Z",
    "updated_at": "2018-03-13T01:40:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Still, we want to prevent constant-cost resizing operations to avoid people having gigantic arrays that might cause collisions in storage.\r\n\r\nCollisions are a [birthday problem](https://en.wikipedia.org/wiki/Birthday_problem), and not especially more likely with medium-sized arrays than with small ones. Very-large arrays are different of course.\r\n\r\n```\r\ncontract HashCollision {\r\n    uint256[] backdoor;\r\n    mapping(address => uint256) balances;\r\n    function HashCollision() {\r\n        backdoor.length = 2 ** 130;\r\n    }\r\n    function useBackdoor(uint256 idx, uint256 val) external {\r\n        backdoor[idx] = val;\r\n    }\r\n}\r\n```\r\n\r\nHigher gas costs are not a great way to protect against this. To protect devs from overextending I suggest adding a warning for nonconstant array extensions, and for constant array extensions larger than, say, 40.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372517796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372595766",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-372595766",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 372595766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjU5NTc2Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T09:10:38Z",
    "updated_at": "2018-03-13T09:10:38Z",
    "author_association": "MEMBER",
    "body": "@wjmelements I think that calling it a birthday problem might be misleading, since in the traditional birthday problem, you have two random variables that collide. Here, you have two (pseudo)random variables, but can apply offsets. These offsets make it much easier to find collisions, since you don't really have to search.\r\n\r\nCuriously, the reason why the optimizer does not reduce both versions to the same bytecode is again the potential for collisions: \r\n\r\nThe `push` version writes data and increments the length multiple times, while the other version only increases the length at the end. The optimizer works correctly even in the case where the array data and the point where its length is stored overlap and thus takes into account that writing data might actually overwrite the length. Because of that, it always has to re-fetch the length and re-write it to storage. I created an issue for that: https://github.com/ethereum/solidity/issues/3716",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/372595766/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/557211149",
    "html_url": "https://github.com/ethereum/solidity/issues/3515#issuecomment-557211149",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3515",
    "id": 557211149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NzIxMTE0OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-21T18:23:03Z",
    "updated_at": "2019-11-21T18:23:03Z",
    "author_association": "MEMBER",
    "body": "Implemented in #7350 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/557211149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

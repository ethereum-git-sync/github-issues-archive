{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13312",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13312/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13312/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13312/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13312",
  "id": 1320426106,
  "node_id": "I_kwDOAm_5kc5OtBp6",
  "number": 13312,
  "title": "Require Statements Revert Custom Errors",
  "user": {
    "login": "DevABDee",
    "id": 99166851,
    "node_id": "U_kgDOBekqgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/99166851?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DevABDee",
    "html_url": "https://github.com/DevABDee",
    "followers_url": "https://api.github.com/users/DevABDee/followers",
    "following_url": "https://api.github.com/users/DevABDee/following{/other_user}",
    "gists_url": "https://api.github.com/users/DevABDee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DevABDee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DevABDee/subscriptions",
    "organizations_url": "https://api.github.com/users/DevABDee/orgs",
    "repos_url": "https://api.github.com/users/DevABDee/repos",
    "events_url": "https://api.github.com/users/DevABDee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DevABDee/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-07-28T05:49:01Z",
  "updated_at": "2023-10-09T04:02:54Z",
  "closed_at": "2022-08-04T11:54:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# FEATURE REQUEST\r\n\r\n## Abstract\r\n\r\nThe `require` are very helpful and easy to understand, but the problem with `require` statements is that they store a string as an error message. And strings are not much gas optimized. To make the contract gas optimized we use custom errors within `if-else` statements. Which are not quite sometimes easy to understand especially when they get rooted in.\r\n\r\n## Motivation\r\n\r\nI think we can solve this problem by making `Require` statements revert `Custom Error` instead of string.\r\nCheck This:\r\n```solidity\r\npragma solidity ^0.8.0;\r\n\r\nerror Owner__ChorChorChor();\r\n\r\ncontract Owner {\r\n    address public owner = msg.sender;\r\n\r\n    function newOwner(address _newOwner) public OnlyOwner {\r\n        owner = _newOwner;\r\n    }\r\n\r\n    modifier OnlyOwner { //Instead of this \r\n        require(owner == msg.sender, \"Chor! Chor! Chor!\");\r\n        _;\r\n    }\r\n    modifier OnlyOwner { // this would be perfect\r\n        require(owner == msg.sender, revert Owner__ChorChorChor(); );\r\n        _;\r\n    }\r\n    \r\n}\r\n```\r\n\r\n## Specification\r\n\r\nIDk C++, I wish I could make a PR with this functionality.\r\n\r\n## Backwards Compatibility\r\n\r\nN/A\r\n",
  "closed_by": {
    "login": "DevABDee",
    "id": 99166851,
    "node_id": "U_kgDOBekqgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/99166851?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DevABDee",
    "html_url": "https://github.com/DevABDee",
    "followers_url": "https://api.github.com/users/DevABDee/followers",
    "following_url": "https://api.github.com/users/DevABDee/following{/other_user}",
    "gists_url": "https://api.github.com/users/DevABDee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DevABDee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DevABDee/subscriptions",
    "organizations_url": "https://api.github.com/users/DevABDee/orgs",
    "repos_url": "https://api.github.com/users/DevABDee/repos",
    "events_url": "https://api.github.com/users/DevABDee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DevABDee/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13312/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13312/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1206799726",
    "html_url": "https://github.com/ethereum/solidity/issues/13312#issuecomment-1206799726",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13312",
    "id": 1206799726,
    "node_id": "IC_kwDOAm_5kc5H7k1u",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-05T19:42:23Z",
    "updated_at": "2022-08-05T19:42:23Z",
    "author_association": "MEMBER",
    "body": "Related: https://github.com/ethereum/solidity/issues/7877#issuecomment-780598691\r\n\r\nWe considered this but so far we could not agree on a good syntax.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1206799726/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 3,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1544636636",
    "html_url": "https://github.com/ethereum/solidity/issues/13312#issuecomment-1544636636",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13312",
    "id": 1544636636,
    "node_id": "IC_kwDOAm_5kc5cEUjc",
    "user": {
      "login": "jubeira",
      "id": 2480899,
      "node_id": "MDQ6VXNlcjI0ODA4OTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2480899?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jubeira",
      "html_url": "https://github.com/jubeira",
      "followers_url": "https://api.github.com/users/jubeira/followers",
      "following_url": "https://api.github.com/users/jubeira/following{/other_user}",
      "gists_url": "https://api.github.com/users/jubeira/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jubeira/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jubeira/subscriptions",
      "organizations_url": "https://api.github.com/users/jubeira/orgs",
      "repos_url": "https://api.github.com/users/jubeira/repos",
      "events_url": "https://api.github.com/users/jubeira/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jubeira/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-11T20:30:06Z",
    "updated_at": "2023-05-11T20:30:06Z",
    "author_association": "NONE",
    "body": "(I'm sorry to revive a closed thread, but...)\r\n\r\nNot being able to use `require` with the new custom errors is indeed a barrier when porting code from older `solc` versions.\r\nDenying the existing logic and using `if` / `revert` doesn't help readability IMO, and adds one more step which can be error prone when porting large codebases. I know you can opt out and keep using strings, but it's a pity to do so given the advantages of the new custom errors.\r\n\r\nI don't know how hard it would be to implement or if there are any considerations that are being left out, but moving forward with a proposal like the one described in https://github.com/ethereum/solidity/issues/7877#issuecomment-1174358430 would be very much appreciated.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1544636636/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1752316315",
    "html_url": "https://github.com/ethereum/solidity/issues/13312#issuecomment-1752316315",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13312",
    "id": 1752316315,
    "node_id": "IC_kwDOAm_5kc5ocjmb",
    "user": {
      "login": "basememara",
      "id": 892152,
      "node_id": "MDQ6VXNlcjg5MjE1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/892152?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/basememara",
      "html_url": "https://github.com/basememara",
      "followers_url": "https://api.github.com/users/basememara/followers",
      "following_url": "https://api.github.com/users/basememara/following{/other_user}",
      "gists_url": "https://api.github.com/users/basememara/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/basememara/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/basememara/subscriptions",
      "organizations_url": "https://api.github.com/users/basememara/orgs",
      "repos_url": "https://api.github.com/users/basememara/repos",
      "events_url": "https://api.github.com/users/basememara/events{/privacy}",
      "received_events_url": "https://api.github.com/users/basememara/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-09T04:02:53Z",
    "updated_at": "2023-10-09T04:02:53Z",
    "author_association": "NONE",
    "body": "I would like this revisited as well please because I believe it is a safety issue. Most dev don't use the braces around the if-statement when using `revert` mimic the one-liner `require` syntax: `if (owner != msg.sender) revert ChorChorChor())`. This is dangerous if anything was learned from the notorious [Apple SSL bug](https://dwheeler.com/essays/apple-goto-fail.html). The if-statement doesn't really guard like the `require` statement. It also makes you think backwards.. instead of \"requiring\" for a condition to be true to continue, you have to think opposite of `require` for the if-statement condition. This is very error prone for people who want to migrate from strings to custom errors. Not to mention goes against general coding styles to do the one-line if-statement.\r\n\r\nNaturally I tried to do `require(owner == msg.sender, ChorChorChor())`. Is it possible to overload the `require` keyword? If not then `revert(owner != msg.sender, ChorChorChor())` although that is too similar and have to think opposite `require`?\r\n\r\nIn any case, please reconsider due to the risks of allowing braces in an if-statement to be optional which is what most devs are resorting to which doesn't really guard the code after it like `require` does.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1752316315/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

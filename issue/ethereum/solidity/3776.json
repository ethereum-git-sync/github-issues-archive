{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3776/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3776/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3776/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3776",
  "id": 308019462,
  "node_id": "MDU6SXNzdWUzMDgwMTk0NjI=",
  "number": 3776,
  "title": "Constant variables in inline assemby",
  "user": {
    "login": "nebojsa94",
    "id": 15905908,
    "node_id": "MDQ6VXNlcjE1OTA1OTA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15905908?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nebojsa94",
    "html_url": "https://github.com/nebojsa94",
    "followers_url": "https://api.github.com/users/nebojsa94/followers",
    "following_url": "https://api.github.com/users/nebojsa94/following{/other_user}",
    "gists_url": "https://api.github.com/users/nebojsa94/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nebojsa94/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nebojsa94/subscriptions",
    "organizations_url": "https://api.github.com/users/nebojsa94/orgs",
    "repos_url": "https://api.github.com/users/nebojsa94/repos",
    "events_url": "https://api.github.com/users/nebojsa94/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nebojsa94/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2018-03-23T12:57:53Z",
  "updated_at": "2019-12-05T12:52:49Z",
  "closed_at": "2019-12-05T12:52:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "> TypeError: Constant variables not supported by inline assembly.\r\n\r\nIs there a reason for this error? You could evaluate the constant and then copy value to assembly in compile time, right?",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3776/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3776/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376153635",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-376153635",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 376153635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjE1MzYzNQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-26T12:48:13Z",
    "updated_at": "2018-03-26T12:48:13Z",
    "author_association": "MEMBER",
    "body": "This is a missing feature, let's see if we can support it for 0.5.0.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376153635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376521308",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-376521308",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 376521308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjUyMTMwOA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-27T13:17:55Z",
    "updated_at": "2018-03-27T13:17:55Z",
    "author_association": "MEMBER",
    "body": "This might cause problems unless the constant values are known at compile time (for some, we only copy the expression). Also, it could get messy for strings and byte arrays (because inline assembly only receives the address).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376521308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376543157",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-376543157",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 376543157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjU0MzE1Nw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-27T14:20:52Z",
    "updated_at": "2018-03-27T14:20:52Z",
    "author_association": "MEMBER",
    "body": "> compile time (for some, we only copy the expression)\r\n\r\nWhich I think is a bad idea. See #3157.\r\n\r\nIf we'd split `constant` into `constant` and `constexpr`, then inline assembly could support `constant` and if someone wants to use an expression, it must be assigned (and evaluated) to a constant first.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/376543157/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/378896773",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-378896773",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 378896773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODg5Njc3Mw==",
    "user": {
      "login": "nebojsa94",
      "id": 15905908,
      "node_id": "MDQ6VXNlcjE1OTA1OTA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/15905908?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nebojsa94",
      "html_url": "https://github.com/nebojsa94",
      "followers_url": "https://api.github.com/users/nebojsa94/followers",
      "following_url": "https://api.github.com/users/nebojsa94/following{/other_user}",
      "gists_url": "https://api.github.com/users/nebojsa94/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nebojsa94/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nebojsa94/subscriptions",
      "organizations_url": "https://api.github.com/users/nebojsa94/orgs",
      "repos_url": "https://api.github.com/users/nebojsa94/repos",
      "events_url": "https://api.github.com/users/nebojsa94/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nebojsa94/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-05T10:53:01Z",
    "updated_at": "2018-04-05T10:53:01Z",
    "author_association": "NONE",
    "body": "Ah right, splitting constants sounds like a good idea.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/378896773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/505145119",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-505145119",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 505145119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTE0NTExOQ==",
    "user": {
      "login": "ondratra",
      "id": 3767729,
      "node_id": "MDQ6VXNlcjM3Njc3Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3767729?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ondratra",
      "html_url": "https://github.com/ondratra",
      "followers_url": "https://api.github.com/users/ondratra/followers",
      "following_url": "https://api.github.com/users/ondratra/following{/other_user}",
      "gists_url": "https://api.github.com/users/ondratra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ondratra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ondratra/subscriptions",
      "organizations_url": "https://api.github.com/users/ondratra/orgs",
      "repos_url": "https://api.github.com/users/ondratra/repos",
      "events_url": "https://api.github.com/users/ondratra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ondratra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-24T19:22:54Z",
    "updated_at": "2019-06-24T19:22:54Z",
    "author_association": "NONE",
    "body": "I would like to see this feature done. When working with custom data format it is useful to define couple of constants for the format. They can't be accessed in assembly resulting in more complicated patterns.\r\n\r\nFollowing code illustrates the problem when decoding custom data format. \r\n```\r\npragma solidity ^0.5.0;\r\ncontract Example {\r\n\r\n    uint256 constant sizeWord = 32; // byte size of number\r\n    uint256 constant sizeUint256 = sizeWord; // byte size of number\r\n    uint256 constant sizeAddress = 20; // byte size of address\r\n    uint256 constant sizeBytesLength = sizeWord; // byte size of encoded `length` of `bytes`\r\n\r\n    function decodeMyFormat(bytes memory serializedCommand) public pure returns (address from, address to, uint256 amount) {\r\n        uint256 diffAddress = sizeWord - sizeAddress;\r\n        uint256 shiftFrom = sizeBytesLength - diffAddress;\r\n        uint256 shiftTo = sizeBytesLength + sizeAddress - diffAddress;\r\n        uint256 shiftAmount = sizeBytesLength + sizeAddress - diffAddress + sizeWord;\r\n        assembly {\r\n            from := mload(add(serializedCommand, shiftFrom))\r\n            to := mload(add(serializedCommand, shiftTo))\r\n            amount := mload(add(serializedCommand, shiftAmount))\r\n        }\r\n    }\r\n    \r\n    /*\r\n    function decodeMyFormat(bytes memory serializedCommand) public pure returns (address from, address to, uint256 amount) {\r\n        \r\n        // this throws Solidity error \"Constant variables not supported by inline assembly\"\r\n        assembly {\r\n            assembly {\r\n            let start := add(serializedCommand, sizeBytesLength)\r\n            let tmp := sub(start, sub(sizeWord, sizeAddress))\r\n            \r\n            from := mload(tmp)\r\n            tmp := add(tmp, sizeAddress)\r\n            \r\n            to := mload(tmp)\r\n            tmp := add(tmp, sizeAddress)\r\n            \r\n            amount := mload(tmp)\r\n        }\r\n    }\r\n    */\r\n}\r\n```\r\nAssume input for `decodeMyFormat` is\r\n```\r\n0xC0AE922e728a2266b9C657EfE00188430DE05a5fca35b7d915458ef540ade6068dfe2f44e8fa733c0000000000000000000000000000000000000000000000000000000000000010\r\n``` \r\nthen result is tuple\r\n```\r\n0xC0AE922e728a2266b9C657EfE00188430DE05a5f\r\n0xca35b7d915458ef540ade6068dfe2f44e8fa733c\r\n0000000000000000000000000000000000000000000000000000000000000010\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/505145119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/505419793",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-505419793",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 505419793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTQxOTc5Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T12:21:04Z",
    "updated_at": "2019-06-25T12:21:04Z",
    "author_association": "MEMBER",
    "body": "We might be able to at least support a subset.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/505419793/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/507654422",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-507654422",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 507654422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzY1NDQyMg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-02T12:26:43Z",
    "updated_at": "2019-07-02T12:26:43Z",
    "author_association": "MEMBER",
    "body": "Only implemented a subset for now.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/507654422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/507654767",
    "html_url": "https://github.com/ethereum/solidity/issues/3776#issuecomment-507654767",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3776",
    "id": 507654767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzY1NDc2Nw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-02T12:27:43Z",
    "updated_at": "2019-07-02T12:27:43Z",
    "author_association": "MEMBER",
    "body": "What does not yet work from the above is `uint256 constant sizeUint256 = sizeWord;`, i.e. referencing another constant. What does work, though are simple pure constant expressions like `2**20`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/507654767/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

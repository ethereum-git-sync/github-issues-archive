{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/1509",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/1509/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/1509/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/1509/events",
  "html_url": "https://github.com/ethereum/solidity/issues/1509",
  "id": 195290907,
  "node_id": "MDU6SXNzdWUxOTUyOTA5MDc=",
  "number": 1509,
  "title": "Scheme to allow returning `bytes` and `string` between contracts",
  "user": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2016-12-13T15:55:51Z",
  "updated_at": "2016-12-13T21:43:08Z",
  "closed_at": "2016-12-13T21:43:08Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "My understanding is that this is currently not allowed because the length of the returned value is unknown so the caller cannot pre-allocate the *proper* amount of memory for the return value.  I propose the following scheme to enable this functionality.\r\n\r\n```\r\ncontract Returner {\r\n    string value;\r\n    function returnString() constant returns (string) {\r\n        return value;\r\n    }\r\n}\r\n\r\ncontract Getter {\r\n    Returner other;\r\n    function getString() {\r\n        var theValue = other.returnString();\r\n        ... // Do something with it.\r\n    }\r\n}\r\n```\r\n\r\nThe RLP encoding for `bytes` and `string` values begins with a 32 byte representation of the length of the value followed by the actual bytes of the value padded to a multiple of 32 bytes.\r\n\r\nIn order to retrieve a string solidity would compile the code above to perform the following actions.\r\n\r\n1. Call the `returnString` function only allocating 32 bytes for the return value.\r\n2. Read the length of the string from the returned value.\r\n3. Call the `returnString` function again, this time allocating the total necessary space for the returned value (as derived from the previous steps)\r\n\r\nThis assumes that the EVM will gracefully allow the called contract to try and write more return bytes than have been allocated *and* that when this happens that the first bytes written are preserved and still returned.\r\n\r\nThis also assumes that the act of retrieval does not modify the returned value.\r\n\r\nCould this work?",
  "closed_by": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/1509/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/1509/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/266867026",
    "html_url": "https://github.com/ethereum/solidity/issues/1509#issuecomment-266867026",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1509",
    "id": 266867026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg2NzAyNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T21:27:10Z",
    "updated_at": "2016-12-13T21:27:10Z",
    "author_association": "MEMBER",
    "body": "I think this is extremely dangerous since the called function might have side-effects. Let's wait for metropolis, where we hopefully have EIP-5 implemented.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/266867026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/266871097",
    "html_url": "https://github.com/ethereum/solidity/issues/1509#issuecomment-266871097",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1509",
    "id": 266871097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg3MTA5Nw==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T21:43:08Z",
    "updated_at": "2016-12-13T21:43:08Z",
    "author_association": "MEMBER",
    "body": "Fair point.  At least I now know it's possible :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/266871097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

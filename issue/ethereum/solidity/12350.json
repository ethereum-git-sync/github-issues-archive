{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12350/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12350/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12350/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12350",
  "id": 1067305620,
  "node_id": "I_kwDOAm_5kc4_ncqU",
  "number": 12350,
  "title": "Solc fails compiling code with inline assembly when locale is set to Turkish",
  "user": {
    "login": "Shungy",
    "id": 35086804,
    "node_id": "MDQ6VXNlcjM1MDg2ODA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35086804?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Shungy",
    "html_url": "https://github.com/Shungy",
    "followers_url": "https://api.github.com/users/Shungy/followers",
    "following_url": "https://api.github.com/users/Shungy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Shungy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Shungy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Shungy/subscriptions",
    "organizations_url": "https://api.github.com/users/Shungy/orgs",
    "repos_url": "https://api.github.com/users/Shungy/repos",
    "events_url": "https://api.github.com/users/Shungy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Shungy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "wechman",
    "id": 37188783,
    "node_id": "MDQ6VXNlcjM3MTg4Nzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/37188783?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wechman",
    "html_url": "https://github.com/wechman",
    "followers_url": "https://api.github.com/users/wechman/followers",
    "following_url": "https://api.github.com/users/wechman/following{/other_user}",
    "gists_url": "https://api.github.com/users/wechman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wechman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wechman/subscriptions",
    "organizations_url": "https://api.github.com/users/wechman/orgs",
    "repos_url": "https://api.github.com/users/wechman/repos",
    "events_url": "https://api.github.com/users/wechman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wechman/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "wechman",
      "id": 37188783,
      "node_id": "MDQ6VXNlcjM3MTg4Nzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/37188783?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wechman",
      "html_url": "https://github.com/wechman",
      "followers_url": "https://api.github.com/users/wechman/followers",
      "following_url": "https://api.github.com/users/wechman/following{/other_user}",
      "gists_url": "https://api.github.com/users/wechman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wechman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wechman/subscriptions",
      "organizations_url": "https://api.github.com/users/wechman/orgs",
      "repos_url": "https://api.github.com/users/wechman/repos",
      "events_url": "https://api.github.com/users/wechman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wechman/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2021-11-30T14:31:10Z",
  "updated_at": "2022-03-14T09:38:20Z",
  "closed_at": "2022-03-14T09:38:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSolc does not compile code with any inline assembly if the Linux system locale is set to Turkish.\r\n\r\n## Environment\r\n\r\n- Compiler version: any solc linux-amd64\r\n- Target EVM version (as per compiler settings): any\r\n- Framework/IDE (e.g. Truffle or Remix): n/a\r\n- EVM execution environment / backend / blockchain client: n/a\r\n- Operating system: linux\r\n\r\n## Steps to Reproduce\r\n\r\nOptional steps to get the same environment:\r\n\r\n1. `docker run -it --rm ubuntu bash`\r\n2. `apt update -y`\r\n3. `apt install -y locales-all curl`\r\n\r\nThen to replicate:\r\n\r\n1. `export LANG=tr_TR.UTF-8`\r\n2. `curl -O 'https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-contracts/master/contracts/utils/Address.sol'`\r\n3. `curl -O 'https://binaries.soliditylang.org/linux-amd64/solc-linux-amd64-v0.8.10+commit.fc410830'`\r\n4. `chmod +x solc-linux*`\r\n5. `./solc-linux-amd64-v0.8.10+commit.fc410830 --bin Address.sol` # compilation fails\r\n\r\nYou can then change `LANG` back to `en_US.UTF-8` and the compilation will succeed.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12350/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12350/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982708688",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982708688",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982708688,
    "node_id": "IC_kwDOAm_5kc46kvHQ",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T14:50:49Z",
    "updated_at": "2021-11-30T14:50:49Z",
    "author_association": "MEMBER",
    "body": "Maybe related to the function `setDefaultOrCLocale` in main.cpp",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982708688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982709374",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982709374",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982709374,
    "node_id": "IC_kwDOAm_5kc46kvR-",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T14:51:33Z",
    "updated_at": "2021-11-30T14:51:33Z",
    "author_association": "MEMBER",
    "body": "We should ensure that the same calls are made i libsolc.cpp",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982709374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982735679",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982735679",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982735679,
    "node_id": "IC_kwDOAm_5kc46k1s_",
    "user": {
      "login": "Shungy",
      "id": 35086804,
      "node_id": "MDQ6VXNlcjM1MDg2ODA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35086804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shungy",
      "html_url": "https://github.com/Shungy",
      "followers_url": "https://api.github.com/users/Shungy/followers",
      "following_url": "https://api.github.com/users/Shungy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shungy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shungy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shungy/subscriptions",
      "organizations_url": "https://api.github.com/users/Shungy/orgs",
      "repos_url": "https://api.github.com/users/Shungy/repos",
      "events_url": "https://api.github.com/users/Shungy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shungy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T15:19:15Z",
    "updated_at": "2021-11-30T15:19:56Z",
    "author_association": "NONE",
    "body": "I think I figured out the exact reason. Turkish capitalization rules are `i to İ`  and `I to ı`. I have realized that the both the inline assembly code I have tested have function names with letter `i`. So `extcodesize` is changed to `EXTCODESİZE` (notice dotted capital İ). This explains \"function not found error\". ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982735679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982791365",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982791365",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982791365,
    "node_id": "IC_kwDOAm_5kc46lDTF",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T16:17:31Z",
    "updated_at": "2021-11-30T16:17:31Z",
    "author_association": "MEMBER",
    "body": "Wow. I knew about this capitalization weirdness with Turkish \"i\" but I didn't even realize that it means that plain ASCII characters can be capitalized into ones from the Unicode set :) Maybe we should just randomly set system locale to Turkish in one of our CI runs just to catch problems like this :)\r\n\r\nIn any case, we do attempt to set the locale to `C` to avoid such problems and this bug means that somehow it's not enough. And once we fix it, we should recommend frameworks to set it on their side as a workaround because old binaries will still be affected.\r\n\r\n@chriseth Isn't `libsolc` just statically compiled into the binary? Why would we have to set the locale there if `solc` already does that?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982791365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982828470",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982828470",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982828470,
    "node_id": "IC_kwDOAm_5kc46lMW2",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T16:57:02Z",
    "updated_at": "2021-11-30T16:57:02Z",
    "author_association": "MEMBER",
    "body": "libsolc has its own main function",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982828470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982829302",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982829302",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982829302,
    "node_id": "IC_kwDOAm_5kc46lMj2",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T16:57:56Z",
    "updated_at": "2021-11-30T16:57:56Z",
    "author_association": "MEMBER",
    "body": "Or sorry: libsolc does not use the main function of the commandline interface - if you use solidity via js, you have to initialize it in a different way",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982829302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982830816",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-982830816",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 982830816,
    "node_id": "IC_kwDOAm_5kc46lM7g",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-30T16:59:39Z",
    "updated_at": "2021-11-30T16:59:39Z",
    "author_association": "MEMBER",
    "body": "Hmm... this is weird then - the problem is actually not reproducible via solc-js :) It only happens via solc. At least in the testing I did yesterday.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/982830816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/983145368",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-983145368",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 983145368,
    "node_id": "IC_kwDOAm_5kc46mZuY",
    "user": {
      "login": "itamarcps",
      "id": 32653934,
      "node_id": "MDQ6VXNlcjMyNjUzOTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/32653934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itamarcps",
      "html_url": "https://github.com/itamarcps",
      "followers_url": "https://api.github.com/users/itamarcps/followers",
      "following_url": "https://api.github.com/users/itamarcps/following{/other_user}",
      "gists_url": "https://api.github.com/users/itamarcps/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itamarcps/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itamarcps/subscriptions",
      "organizations_url": "https://api.github.com/users/itamarcps/orgs",
      "repos_url": "https://api.github.com/users/itamarcps/repos",
      "events_url": "https://api.github.com/users/itamarcps/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itamarcps/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-01T00:14:08Z",
    "updated_at": "2021-12-01T00:21:52Z",
    "author_association": "NONE",
    "body": "We had a similar issue with our C++ Desktop Wallet for Avalanche (https://github.com/avme/avme-wallet). The locale was causing a lot of trouble when dealing with non-standard file names (Like a file name with \"é\", or more specific, a file which the path includes \"é\", e.g. C:\\Users\\égrilo\\AppData\\Roaming\\AVME\\myfile.txt).\r\n\r\nOur solution was using boost::nowide to set locale for boost::filesystem to properly read/write to files before running anything else, if you can integrate it as a dependency, I would recommend it.\r\n\r\nhttps://github.com/avme/avme-wallet/blob/main/src/main-gui.cpp#L7\r\n\r\nboost::nowide::nowide_filesystem(); is called right after running the program to kill any future issue, be aware that this solution requires you to use boost::nowide for every I/O operation to work, but it should be pretty straightforward to replace them, at least in our wallet, it was as simple as exchanging std::ifstream to boost::nowide::ifstream)\r\n\r\nas referenced here;\r\nhttps://github.com/avme/avme-wallet/blob/main/src/core/Utils.cpp#L327\r\n\r\nOn both Utils::readJSONFile and Utils::writeJSONFile functions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/983145368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/983283956",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-983283956",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 983283956,
    "node_id": "IC_kwDOAm_5kc46m7j0",
    "user": {
      "login": "Shungy",
      "id": 35086804,
      "node_id": "MDQ6VXNlcjM1MDg2ODA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35086804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shungy",
      "html_url": "https://github.com/Shungy",
      "followers_url": "https://api.github.com/users/Shungy/followers",
      "following_url": "https://api.github.com/users/Shungy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shungy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shungy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shungy/subscriptions",
      "organizations_url": "https://api.github.com/users/Shungy/orgs",
      "repos_url": "https://api.github.com/users/Shungy/repos",
      "events_url": "https://api.github.com/users/Shungy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shungy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-01T04:43:30Z",
    "updated_at": "2021-12-01T04:43:30Z",
    "author_association": "NONE",
    "body": "Turns out not just inline assembly is causing this. Running the following code with Turkish locale also fails to compile but with a lot more detailed output (383 lines) showing assembly input and errors.\r\n\r\nCommand: `export LANG=tr_TR.UTF-8 && ./solc-linux-amd64-v0.8.7+commit.e28d00a7 --bin test.sol 2> error.txt`\r\n\r\n`test.sol`: \r\n```sol\r\ncontract Greeter {\r\n    string private greeting;\r\n\r\n    function greet() public view returns (string memory) {\r\n        return greeting;\r\n    }\r\n\r\n    function setGreeting(string memory _greeting) public {\r\n        greeting = _greeting;\r\n    }\r\n}\r\n```\r\n\r\n`head -5 error.txt`:\r\n```\r\nInternal compiler error during compilation:\r\n/solidity/libsolidity/codegen/CompilerContext.cpp(463): Throw in function solidity::frontend::CompilerContext::appendInlineAssembly(const string&, const std::vector<std::__cxx11::basic_string<char> >&, const std::set<std::__cxx11::basic_string<char> >&, bool, const solidity::frontend::OptimiserSettings&, std::string)::<lambda(const string&)>\r\nDynamic exception type: boost::wrapexcept<solidity::langutil::InternalCompilerError>\r\nstd::exception::what: Error parsing/analyzing inline assembly block:\r\nInvalid assembly generated by code generator.\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/983283956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022060959",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-1022060959",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 1022060959,
    "node_id": "IC_kwDOAm_5kc4862mf",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-26T10:21:34Z",
    "updated_at": "2022-01-26T10:21:34Z",
    "author_association": "MEMBER",
    "body": "the example in the last comment doesn't cause an ICE for me. Are there more steps required?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022060959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022176737",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-1022176737",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 1022176737,
    "node_id": "IC_kwDOAm_5kc487S3h",
    "user": {
      "login": "Shungy",
      "id": 35086804,
      "node_id": "MDQ6VXNlcjM1MDg2ODA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35086804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shungy",
      "html_url": "https://github.com/Shungy",
      "followers_url": "https://api.github.com/users/Shungy/followers",
      "following_url": "https://api.github.com/users/Shungy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shungy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shungy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shungy/subscriptions",
      "organizations_url": "https://api.github.com/users/Shungy/orgs",
      "repos_url": "https://api.github.com/users/Shungy/repos",
      "events_url": "https://api.github.com/users/Shungy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shungy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-26T13:02:40Z",
    "updated_at": "2022-01-26T13:07:54Z",
    "author_association": "NONE",
    "body": "> the example in the last comment doesn't cause an ICE for me. Are there more steps required?\r\n\r\nMaybe you don't have the tr_TR.UTF-8 locale installed. I replicated again using the optional steps to get the same environment I wrote in my original post.\r\n\r\n```\r\ndocker run -it --rm ubuntu bash\r\napt update -y\r\napt install -y locales-all curl less\r\nexport LANG=tr_TR.UTF-8\r\ncurl -O 'https://binaries.soliditylang.org/linux-amd64/solc-linux-amd64-v0.8.7+commit.e28d00a7'\r\nchmod +x solc-linux*\r\necho 'contract Greeter { string private greeting; function greet() public view returns (string memory) { return greeting; } function setGreeting(string memory _greeting) public { greeting = _greeting; } }' | ./solc-linux-amd64-v0.8.7+commit.e28d00a7 --bin - 2> error.txt\r\nless error.txt\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1022176737/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1049722498",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-1049722498",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 1049722498,
    "node_id": "IC_kwDOAm_5kc4-kX6C",
    "user": {
      "login": "wechman",
      "id": 37188783,
      "node_id": "MDQ6VXNlcjM3MTg4Nzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/37188783?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wechman",
      "html_url": "https://github.com/wechman",
      "followers_url": "https://api.github.com/users/wechman/followers",
      "following_url": "https://api.github.com/users/wechman/following{/other_user}",
      "gists_url": "https://api.github.com/users/wechman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wechman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wechman/subscriptions",
      "organizations_url": "https://api.github.com/users/wechman/orgs",
      "repos_url": "https://api.github.com/users/wechman/repos",
      "events_url": "https://api.github.com/users/wechman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wechman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-24T10:41:29Z",
    "updated_at": "2022-02-24T10:41:49Z",
    "author_association": "MEMBER",
    "body": "> In any case, we do attempt to set the locale to `C` to avoid such problems and this bug means that somehow it's not enough. And once we fix it, we should recommend frameworks to set it on their side as a workaround because old binaries will still be affected.\r\n\r\n@cameel, Actually, we try to set locale to the system environment locale first. Only if it fails, we do attempt to set the locale to `C`:\r\nhttps://github.com/ethereum/solidity/blob/e7d93f83769dd68c9d97e9be813595839dfcd1e2/solc/main.cpp#L52-L55\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1049722498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1049915596",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-1049915596",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 1049915596,
    "node_id": "IC_kwDOAm_5kc4-lHDM",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-24T14:28:17Z",
    "updated_at": "2022-02-24T14:28:17Z",
    "author_association": "MEMBER",
    "body": "ok, so we should change that.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1049915596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1050674278",
    "html_url": "https://github.com/ethereum/solidity/issues/12350#issuecomment-1050674278",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12350",
    "id": 1050674278,
    "node_id": "IC_kwDOAm_5kc4-oARm",
    "user": {
      "login": "wechman",
      "id": 37188783,
      "node_id": "MDQ6VXNlcjM3MTg4Nzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/37188783?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wechman",
      "html_url": "https://github.com/wechman",
      "followers_url": "https://api.github.com/users/wechman/followers",
      "following_url": "https://api.github.com/users/wechman/following{/other_user}",
      "gists_url": "https://api.github.com/users/wechman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wechman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wechman/subscriptions",
      "organizations_url": "https://api.github.com/users/wechman/orgs",
      "repos_url": "https://api.github.com/users/wechman/repos",
      "events_url": "https://api.github.com/users/wechman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wechman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-25T09:15:12Z",
    "updated_at": "2022-02-25T09:15:12Z",
    "author_association": "MEMBER",
    "body": "I did a little research on why this code is here and found [the original issue](https://github.com/ethereum/solidity/issues/674). Apparently, there was some problem with solc in case of invalid environment locale setting. 'export LC_ALL=C' was a workaround for that so I am not sure why solution involved environment default locale. Anyway, I agree we should change that.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1050674278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

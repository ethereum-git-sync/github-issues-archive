{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4756/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4756/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4756/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4756",
  "id": 348673334,
  "node_id": "MDU6SXNzdWUzNDg2NzMzMzQ=",
  "number": 4756,
  "title": "Split \"movable\" into \"side-effect-free\" and \"context-independent\"",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1282209978,
      "node_id": "MDU6TGFiZWwxMjgyMjA5OTc4",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/optimizer",
      "name": "optimizer",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-08-08T10:48:49Z",
  "updated_at": "2019-05-16T11:25:16Z",
  "closed_at": "2019-05-16T11:25:16Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The simplification rule `div(X, 0) -> 0` removes `X` and thus in the yul optimizer, `X` is required to be movable. Movable currently means \"side-effect-free\" and \"context-independent\". `calldataload` for example is movable, but `keccak256` is not.\r\n\r\nIf simplification rules only delete subexpressions (as opposed to moving them or unifying them like in `and(X, X) -> X`), it is sufficient to require context-independentness, and thus the term should probably be more refined and used like that.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4756/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4756/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411386579",
    "html_url": "https://github.com/ethereum/solidity/issues/4756#issuecomment-411386579",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
    "id": 411386579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTM4NjU3OQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-08T12:24:08Z",
    "updated_at": "2018-08-08T12:24:08Z",
    "author_association": "MEMBER",
    "body": "I had some work done on this previously, will try to push it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411386579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/420181929",
    "html_url": "https://github.com/ethereum/solidity/issues/4756#issuecomment-420181929",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
    "id": 420181929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDE4MTkyOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-11T07:53:32Z",
    "updated_at": "2018-09-11T07:53:32Z",
    "author_association": "MEMBER",
    "body": "If we move to SSA and \"three-address-code\", this might not be required and could be simplified: As far as the rules are concerned, we can just apply them without caring about \"movability\". Movability only comes into play if we want to rearrange or delete individual instructions. We can delete an instruction if it is side-effect free and we can rearrange them if they are context-independent. Moreover, if we only have single instructions, we can perform all movement through swapping. Two instructions can be swapped if and only if they do not conflict, i.e. do not both modify or modify and read the same memory or storage slot or blockchain \"data\" (e.g. two calls).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/420181929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/490429616",
    "html_url": "https://github.com/ethereum/solidity/issues/4756#issuecomment-490429616",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
    "id": 490429616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDQyOTYxNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-08T10:10:13Z",
    "updated_at": "2019-05-08T10:10:13Z",
    "author_association": "MEMBER",
    "body": "The current SolYul code generator creates code like `pop(sload(x))`. This can obviously be removed, but since `sload` is not movable, it is not done.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/490429616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/491863937",
    "html_url": "https://github.com/ethereum/solidity/issues/4756#issuecomment-491863937",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
    "id": 491863937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg2MzkzNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T15:12:22Z",
    "updated_at": "2019-05-13T15:12:22Z",
    "author_association": "MEMBER",
    "body": "Together with @ekpyron we came up with the following categories:\r\n\r\n - can be removed (`R`) without change in semantics\r\n - can be duplicated (`D`) without change in semantics\r\n - can be swappend with instruction `i` (`X_i`) without change in semantics\r\n\r\nWe grouped the opcodes into the following categories (might not be exhaustive). The R and D properties are listed here, the X properties below.\r\n - add: R D\r\n - sload: R D\r\n - sstore: D\r\n - mload: R D\r\n - mstore: D\r\n - call: \r\n - balance: R D\r\n - stop: D\r\n - return: D\r\n - revert with reason: D\r\n - revert without reason: D\r\n\r\nNow the swap properties:\r\n\r\n - add:\r\n    swappable with everyting\r\n - sload:\r\n    NOT swappable with sstore, call.\r\n    Swappable with everything else\r\n - sstore:\r\n    NOT swappable with sstore, sload, call, stop, return.\r\n    Swappable with everything else\r\n - mstore:\r\n    NOT swappable with mload, mstore, call, return, revert with reason\r\n    Swappable with: add, stop, revert without reason, balance, sload, sstore\r\n - balance:\r\n    NOT swappable with call\r\n    swappable with everything else\r\n - stop:\r\n    NOT swappable with sstore, call, revert with reason, revert without reason, return\r\n    swappable with: add, stop, sload, balance, mstore, mload\r\n - return:\r\n    NOT swappable with sstore, call, revert with reason, revert without reason, return, stop, mstore\r\n    swappable with: add, sload, balance, mload\r\n - revert with reason:\r\n    NOT swappable with mstore, call, revert without reason, stop, return, revert with reason\r\n    swappable with mload, sload, sstore, add, balance\r\n - revert without reason:\r\n    NOT swappable with revert with reason, stop, return\r\n    swappable with everything else\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/491863937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/491887637",
    "html_url": "https://github.com/ethereum/solidity/issues/4756#issuecomment-491887637",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4756",
    "id": 491887637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg4NzYzNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T16:12:04Z",
    "updated_at": "2019-05-13T16:12:04Z",
    "author_association": "MEMBER",
    "body": "Additional interesting categories: staticcall, selfdestruct\r\n\r\nAlso, the family of call opcodes might be further split up into ones that do not read from memory, ones that do not write to memory and ones that do neither.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/491887637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3881/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3881/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3881/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3881",
  "id": 314158391,
  "node_id": "MDU6SXNzdWUzMTQxNTgzOTE=",
  "number": 3881,
  "title": "Super does not work in overriden external functions",
  "user": {
    "login": "ajsantander",
    "id": 550409,
    "node_id": "MDQ6VXNlcjU1MDQwOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/550409?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsantander",
    "html_url": "https://github.com/ajsantander",
    "followers_url": "https://api.github.com/users/ajsantander/followers",
    "following_url": "https://api.github.com/users/ajsantander/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsantander/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsantander/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsantander/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsantander/orgs",
    "repos_url": "https://api.github.com/users/ajsantander/repos",
    "events_url": "https://api.github.com/users/ajsantander/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsantander/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-04-13T15:44:47Z",
  "updated_at": "2020-01-28T21:08:57Z",
  "closed_at": "2018-11-16T15:11:57Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Consider the following code:\r\n\r\n```\r\npragma solidity ^0.4.21;\r\n\r\ncontract Base {\r\n    \r\n    uint public x;\r\n    \r\n    function doSomething() external {\r\n        x++;\r\n    }\r\n    \r\n    function doSomethingElse() public {\r\n        x++;\r\n    }\r\n}\r\n\r\ncontract Extender is Base {\r\n    \r\n    function doSomething() external {\r\n        super.doSomething(); // <---- COMPILER ERROR HERE\r\n    }\r\n    \r\n    function doSomethingElse() public {\r\n        super.doSomethingElse();\r\n    }\r\n}\r\n```\r\n\r\nThe error can be seen by pasting the code in remix, which is:\r\n```\r\nType Error: Member \"doSomething\" not found or not visible after argument-dependent lookup in contract super Extender\r\n```\r\n\r\nWhich actually makes sense, because super triggers an internal call, and external functions cannot be called internally.\r\n\r\nThe question is, beyond the reason for the error, is this behavior desired? ",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3881/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3881/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381524372",
    "html_url": "https://github.com/ethereum/solidity/issues/3881#issuecomment-381524372",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
    "id": 381524372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTUyNDM3Mg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T08:42:16Z",
    "updated_at": "2018-04-16T08:42:16Z",
    "author_association": "MEMBER",
    "body": "I'm not sure I understand. As you say, external functions cannot be called internally. If you change it to public, it can be called internally. If the behaviour is not desired, change the function to public.\r\n\r\nOr which behaviour are you talking about? The fact that external functions can be overridden?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381524372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381946913",
    "html_url": "https://github.com/ethereum/solidity/issues/3881#issuecomment-381946913",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
    "id": 381946913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTk0NjkxMw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-17T10:53:53Z",
    "updated_at": "2018-04-17T10:54:50Z",
    "author_association": "MEMBER",
    "body": "> Which actually makes sense, because super triggers an internal call, and external functions cannot be called internally.\r\n\r\nI think the expectation here would be that `super.doSomething()` would work if the visibility in the parent is `internal` or `public`, but is not working since it is marked as `external`.\r\n\r\nIn fact the following works as expected:\r\n```\r\npragma solidity ^0.4.21;\r\n\r\ncontract Base {\r\n    \r\n    uint public x;\r\n    \r\n    function doSomething() {\r\n        x++;\r\n    }\r\n    \r\n    function doSomethingElse() public {\r\n        x++;\r\n    }\r\n}\r\n\r\ncontract Extender is Base {\r\n    \r\n    function doSomething() {\r\n        super.doSomething();\r\n    }\r\n    \r\n    function doSomethingElse() public {\r\n        super.doSomethingElse();\r\n    }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381946913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/439423321",
    "html_url": "https://github.com/ethereum/solidity/issues/3881#issuecomment-439423321",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
    "id": 439423321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzOTQyMzMyMQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-16T15:11:57Z",
    "updated_at": "2018-11-16T15:11:57Z",
    "author_association": "MEMBER",
    "body": "Closing since the issue seems solved. Please feel free to reopen if you want to restart the discussion.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/439423321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/542102557",
    "html_url": "https://github.com/ethereum/solidity/issues/3881#issuecomment-542102557",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
    "id": 542102557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjEwMjU1Nw==",
    "user": {
      "login": "alexanderatallah",
      "id": 1011391,
      "node_id": "MDQ6VXNlcjEwMTEzOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1011391?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexanderatallah",
      "html_url": "https://github.com/alexanderatallah",
      "followers_url": "https://api.github.com/users/alexanderatallah/followers",
      "following_url": "https://api.github.com/users/alexanderatallah/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexanderatallah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexanderatallah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexanderatallah/subscriptions",
      "organizations_url": "https://api.github.com/users/alexanderatallah/orgs",
      "repos_url": "https://api.github.com/users/alexanderatallah/repos",
      "events_url": "https://api.github.com/users/alexanderatallah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexanderatallah/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-15T08:34:28Z",
    "updated_at": "2019-10-15T21:39:08Z",
    "author_association": "NONE",
    "body": "I'd like to reopen this issue. It seems to impair composability for smart contracts quite a bit!\r\n\r\nMany developers are writing contracts with `external` methods that correctly aren't called internally, but they're completely unaware that ancestor methods can't call `super.methodName()` as a result. There's nothing in the docs or compiler about why.\r\n\r\nFor example, I can't write a non-fungible token contract that inherits from a base contract and calls `if (super.isApprovedForAll(...)) { ....` to check if a user approved access. The compiler shows the error: `\"TypeError: Member \"isApprovedForAll\" not found or not visible after argument-dependent lookup in contract super ERC1155Tradable\"`.\r\n\r\nWhat's the security benefit of preventing `external` methods from being called by child instances? I understand the case where a state-modifying method like `setApprovalForAll(...) external` would be confusing if it could be called by an inheriting contract, but I can't think of a scenario where it would matter.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/542102557/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/579456777",
    "html_url": "https://github.com/ethereum/solidity/issues/3881#issuecomment-579456777",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3881",
    "id": 579456777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3OTQ1Njc3Nw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-28T21:08:56Z",
    "updated_at": "2020-01-28T21:08:56Z",
    "author_association": "MEMBER",
    "body": "@alexanderatallah sorry for the late reply. The reason is just that the EVM does not allow such calls. You cannot call an overwritten function externally because it means that the entry point is replaced and you cannot call it internally because it is not public.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/579456777/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

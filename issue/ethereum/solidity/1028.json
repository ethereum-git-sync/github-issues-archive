{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/1028",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/1028/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/1028/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/1028/events",
  "html_url": "https://github.com/ethereum/solidity/issues/1028",
  "id": 175285716,
  "node_id": "MDU6SXNzdWUxNzUyODU3MTY=",
  "number": 1028,
  "title": "formal verification: model balance changes for a contract with one empty interface function",
  "user": {
    "login": "pirapira",
    "id": 44281,
    "node_id": "MDQ6VXNlcjQ0Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/44281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pirapira",
    "html_url": "https://github.com/pirapira",
    "followers_url": "https://api.github.com/users/pirapira/followers",
    "following_url": "https://api.github.com/users/pirapira/following{/other_user}",
    "gists_url": "https://api.github.com/users/pirapira/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pirapira/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pirapira/subscriptions",
    "organizations_url": "https://api.github.com/users/pirapira/orgs",
    "repos_url": "https://api.github.com/users/pirapira/repos",
    "events_url": "https://api.github.com/users/pirapira/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pirapira/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2016-09-06T16:01:09Z",
  "updated_at": "2017-05-03T12:53:51Z",
  "closed_at": "2017-05-03T12:53:50Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "A contract with one empty interface function (like the one below) has at least three kind of balance changes:\n1. the interface function (or the fallback function) is called with some value\n2. an account calls `SUICIDE` and sends all balance to our account\n3. somebody obtains PoW or PoS rewards to our account\nThis issue is about making the Why3 translation aware of these balance changes.\n\nThe contract being considered:\n\n```\ncontract C\n{\n        function f() {}\n}\n```\n\nis currently translated to\n\n```\n======= C =======\nFormal version:\n\n\nmodule UInt256\n        use import mach.int.Unsigned\n        type uint256\n        constant max_uint256: int = 0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n        clone export mach.int.Unsigned with\n                type t = uint256,\n                constant max = max_uint256\nend\n\nmodule Contract_C\n        use import int.Int\n        use import ref.Ref\n        use import map.Map\n        use import array.Array\n        use import int.ComputerDivision\n        use import mach.int.Unsigned\n        use import UInt256\n        exception Revert\n        exception Return\n        type state = ()\n        type account = {\n                mutable balance: uint256;\n                storage: state\n        }\n        val external_call (this: account): bool\n                ensures { result = false -> this = (old this) }\n                writes { this }\n        let rec _f (this: account):\n                        ()\n                writes { this }\n                =\n                let prestate = {balance = this.balance; storage = ()} in \n                try\n                begin\n                end;\n                raise Return\n                with Return -> () |\n                     Revert -> this.balance <- prestate.balance; ()\n        end\nend\n```\n\nwhose balance never changes.\n- [ ] modeling the balance change by sent values\n- [ ] modeling the balance change by other accounts executing `selfdestruct` etc.\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/1028/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/1028/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/298902148",
    "html_url": "https://github.com/ethereum/solidity/issues/1028#issuecomment-298902148",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/1028",
    "id": 298902148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODkwMjE0OA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-03T12:53:50Z",
    "updated_at": "2017-05-03T12:53:50Z",
    "author_association": "MEMBER",
    "body": "Why3 will be removed, so closing this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/298902148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3841",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3841/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3841/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3841/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3841",
  "id": 312039696,
  "node_id": "MDU6SXNzdWUzMTIwMzk2OTY=",
  "number": 3841,
  "title": "Virtual getter functions don't exist yet when checking inherited interface abstractness.",
  "user": {
    "login": "norganna",
    "id": 694366,
    "node_id": "MDQ6VXNlcjY5NDM2Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/694366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/norganna",
    "html_url": "https://github.com/norganna",
    "followers_url": "https://api.github.com/users/norganna/followers",
    "following_url": "https://api.github.com/users/norganna/following{/other_user}",
    "gists_url": "https://api.github.com/users/norganna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/norganna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/norganna/subscriptions",
    "organizations_url": "https://api.github.com/users/norganna/orgs",
    "repos_url": "https://api.github.com/users/norganna/repos",
    "events_url": "https://api.github.com/users/norganna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/norganna/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-04-06T16:30:46Z",
  "updated_at": "2018-04-06T17:14:52Z",
  "closed_at": "2018-04-06T17:14:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "As per the discussion at https://ethereum.stackexchange.com/a/44964/34929\r\n\r\nIt would seem that the issue being discussed may be a problem with the solidity compiler. Perhaps it doesn't recognise that the virtual getters match the signature definintion for the interface functions or they haven't yet been created at the time it's checking for their presence.\r\n\r\nThe problem can be demonstrated with the following code:\r\n\r\n```solidity\r\npragma solidity ^0.4.21;\r\n\r\ninterface ERC20 {\r\n    function balanceOf(address) external view returns (uint);\r\n    function transfer(address, uint) external returns (bool);\r\n}\r\n\r\ncontract TestA is ERC20 {\r\n    mapping(address=>uint) public balanceOf;\r\n\r\n    function TestA() public {\r\n        balanceOf[this] = 1000;\r\n    }\r\n\r\n    function transfer(address _to, uint256 _value) external returns (bool success) {\r\n        require(balanceOf[msg.sender] >= _value);\r\n        balanceOf[msg.sender] -= _value;\r\n        balanceOf[_to] += _value;\r\n        require(balanceOf[_to] >= _value);\r\n        return true;\r\n    }\r\n}\r\n\r\ncontract TestB {\r\n    address a;\r\n\r\n    function TestB() public {\r\n        a = new TestA();\r\n    }\r\n\r\n    function aBalance() external view returns (uint) {\r\n        return ERC20(a).balanceOf(a);\r\n    }\r\n}\r\n```\r\n\r\nIf you try and compile this contract you will end up with an error like:\r\n\r\n```\r\nbrowser/contract.sol:28:13: TypeError: Trying to create an instance of an abstract contract.\r\n        a = new TestA();\r\n            ^-------^\r\nbrowser/contract.sol:4:5: Missing implementation:\r\n    function balanceOf(address) external view returns (uint);\r\n    ^-------------------------------------------------------^\r\n```\r\n\r\nHowever if you remove the `is ERC20` then it works fine.\r\n\r\nConversely if you add the getter function manually to `TestA`:\r\n\r\n~~~solidity\r\n    function balanceOf(address _to) external view returns (uint value) {\r\n        return balanceOf[_to];\r\n    }\r\n~~~\r\n\r\nIt also works fine.",
  "closed_by": {
    "login": "norganna",
    "id": 694366,
    "node_id": "MDQ6VXNlcjY5NDM2Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/694366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/norganna",
    "html_url": "https://github.com/norganna",
    "followers_url": "https://api.github.com/users/norganna/followers",
    "following_url": "https://api.github.com/users/norganna/following{/other_user}",
    "gists_url": "https://api.github.com/users/norganna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/norganna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/norganna/subscriptions",
    "organizations_url": "https://api.github.com/users/norganna/orgs",
    "repos_url": "https://api.github.com/users/norganna/repos",
    "events_url": "https://api.github.com/users/norganna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/norganna/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3841/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3841/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/379318144",
    "html_url": "https://github.com/ethereum/solidity/issues/3841#issuecomment-379318144",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3841",
    "id": 379318144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTMxODE0NA==",
    "user": {
      "login": "norganna",
      "id": 694366,
      "node_id": "MDQ6VXNlcjY5NDM2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/694366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/norganna",
      "html_url": "https://github.com/norganna",
      "followers_url": "https://api.github.com/users/norganna/followers",
      "following_url": "https://api.github.com/users/norganna/following{/other_user}",
      "gists_url": "https://api.github.com/users/norganna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/norganna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/norganna/subscriptions",
      "organizations_url": "https://api.github.com/users/norganna/orgs",
      "repos_url": "https://api.github.com/users/norganna/repos",
      "events_url": "https://api.github.com/users/norganna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/norganna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T17:14:52Z",
    "updated_at": "2018-04-06T17:14:52Z",
    "author_association": "NONE",
    "body": "Sounds like a duplicate of #3514 actually.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/379318144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10354/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10354/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10354/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10354",
  "id": 746806318,
  "node_id": "MDU6SXNzdWU3NDY4MDYzMTg=",
  "number": 10354,
  "title": "Optimizer = false, raises  Stack too deep when compiling inline assembly",
  "user": {
    "login": "Ferparishuertas",
    "id": 1405582,
    "node_id": "MDQ6VXNlcjE0MDU1ODI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1405582?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Ferparishuertas",
    "html_url": "https://github.com/Ferparishuertas",
    "followers_url": "https://api.github.com/users/Ferparishuertas/followers",
    "following_url": "https://api.github.com/users/Ferparishuertas/following{/other_user}",
    "gists_url": "https://api.github.com/users/Ferparishuertas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Ferparishuertas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Ferparishuertas/subscriptions",
    "organizations_url": "https://api.github.com/users/Ferparishuertas/orgs",
    "repos_url": "https://api.github.com/users/Ferparishuertas/repos",
    "events_url": "https://api.github.com/users/Ferparishuertas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Ferparishuertas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 26,
  "created_at": "2020-11-19T18:01:35Z",
  "updated_at": "2021-10-12T17:49:49Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "As mentioned here https://github.com/sc-forks/solidity-coverage/issues/417#issuecomment-730526466, we are trying to execute solidity coverage for a Smart contract set with solidity 7.1, abiencoderv2 and the usage of structs.\r\n\r\nWe had the contract without structs, and as soon as we put pragma experimental ABIEncoderV2 on the contract, which is over 24kb, the following error appears. (using structs doesnt matter)\r\n\r\n **CompileError: CompilerError: Stack too deep when compiling inline assembly: Variable headStart is 1 slot(s) too deep inside the stack.**\r\n\r\n\r\n\r\n\r\nWith optimizer it works, but due solidity coverage works without optimizer we cannot have coverage.\r\n\r\nCan you help us?\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10354/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10354/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732175551",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732175551",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732175551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjE3NTU1MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T13:53:21Z",
    "updated_at": "2020-11-23T13:53:21Z",
    "author_association": "MEMBER",
    "body": "This cannot easily be fixed because the EVM just does not provide access to enough stack slots. Which problems do you have doing coverage analysis on optimized code?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732175551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732192255",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732192255",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732192255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjE5MjI1NQ==",
    "user": {
      "login": "Ferparishuertas",
      "id": 1405582,
      "node_id": "MDQ6VXNlcjE0MDU1ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1405582?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ferparishuertas",
      "html_url": "https://github.com/Ferparishuertas",
      "followers_url": "https://api.github.com/users/Ferparishuertas/followers",
      "following_url": "https://api.github.com/users/Ferparishuertas/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ferparishuertas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ferparishuertas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ferparishuertas/subscriptions",
      "organizations_url": "https://api.github.com/users/Ferparishuertas/orgs",
      "repos_url": "https://api.github.com/users/Ferparishuertas/repos",
      "events_url": "https://api.github.com/users/Ferparishuertas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ferparishuertas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T14:20:48Z",
    "updated_at": "2020-11-23T14:20:48Z",
    "author_association": "NONE",
    "body": "https://github.com/sc-forks/solidity-coverage works with optimizer=false to inject traces etc. \r\nThis is why the problem raised",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732192255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732216832",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732216832",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732216832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjIxNjgzMg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T15:02:01Z",
    "updated_at": "2020-11-23T15:02:01Z",
    "author_association": "MEMBER",
    "body": "i know, but why does it not work when the optimizer is activated? @cgewecke ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732216832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732321412",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732321412",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732321412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjMyMTQxMg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T17:48:37Z",
    "updated_at": "2020-11-23T17:48:37Z",
    "author_association": "NONE",
    "body": "@chriseth \r\n\r\nThe coverage tool injects instrumentation that pushes a hash onto to the stack by passing it as an argument to a tracing function. \r\n\r\n```solidity\r\ncontract A {\r\n  function _trace(bytes32 hash) public pure {} /* Injected trace method def. */\r\n\r\n  function someMethod() public {\r\n    _trace(0xabc....) /* tracer called w/ hash for line 5 */ \r\n```\r\n\r\nThen it hooks into ethereumjs-vm at runtime, watching the stack at each step to record hits in a hash map of lines, branches etc.\r\n\r\nI think the optimizer strips the tracing functions out because they're no-ops.\r\n\r\n@Ferparishuertas It might be helpful if you gave an example of the code triggers this error - you're the only person to report a stack too deep fault at solidity-coverage for over a year. There could be something unusual about your case.   \r\n\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732321412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732323432",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732323432",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732323432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjMyMzQzMg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T17:52:06Z",
    "updated_at": "2020-11-23T17:52:06Z",
    "author_association": "MEMBER",
    "body": "Interesting, @cgewecke ! Why don't you use source maps? They are retained during optimization (as far as possible).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732323432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732342197",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-732342197",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 732342197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjM0MjE5Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T18:24:12Z",
    "updated_at": "2020-11-23T18:26:58Z",
    "author_association": "NONE",
    "body": "@chriseth \r\n\r\nYes, agree that's a better design. As a practical matter, it seems like it's been challenging to build a source-map based tracing engine that's able to map the execution path to source files for all cases. \r\n\r\nFor example, there are some gaps in Buidler/HardhatEVM tracing [reported here][1].  (Haven't experimented with truffle debugger's implementation recently - it's possible they've resolved things like this on their end.) \r\n\r\nThe instrumentation strategy solidity-coverage uses is reasonably reliable for all JS development platforms. But it corrupts the user's code - a passive trace would be the best way of doing this. \r\n\r\n[1]: https://github.com/nomiclabs/hardhat/issues/1035",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/732342197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734716399",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-734716399",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 734716399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDcxNjM5OQ==",
    "user": {
      "login": "Ferparishuertas",
      "id": 1405582,
      "node_id": "MDQ6VXNlcjE0MDU1ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1405582?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ferparishuertas",
      "html_url": "https://github.com/Ferparishuertas",
      "followers_url": "https://api.github.com/users/Ferparishuertas/followers",
      "following_url": "https://api.github.com/users/Ferparishuertas/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ferparishuertas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ferparishuertas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ferparishuertas/subscriptions",
      "organizations_url": "https://api.github.com/users/Ferparishuertas/orgs",
      "repos_url": "https://api.github.com/users/Ferparishuertas/repos",
      "events_url": "https://api.github.com/users/Ferparishuertas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ferparishuertas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T08:41:42Z",
    "updated_at": "2020-11-27T08:41:42Z",
    "author_association": "NONE",
    "body": "We cannot share the Sol file, due License aspects and client requirements :(.\r\nHaving said that, due the contract where the error raises is to big 32kb, an quite complex, we will refactor it and keep you posted",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734716399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736332669",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-736332669",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 736332669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNjMzMjY2OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-01T09:12:41Z",
    "updated_at": "2020-12-01T09:12:41Z",
    "author_association": "MEMBER",
    "body": "@cgewecke I would be delighted to know more about the problems! Source maps have been working for remix for years.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736332669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/745749729",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-745749729",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 745749729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTc0OTcyOQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T04:04:36Z",
    "updated_at": "2020-12-16T07:10:35Z",
    "author_association": "NONE",
    "body": "@chriseth Apologies for the delay circling back here. \r\n\r\nJust ran into this issue again while trying to compile [aave/protocol-v2][1] which uses solc 0.6.12. \r\n\r\nThere are 93 files in the project. \r\n\r\nModifying [this compiler config][2] so that optimization is turned off and executing `npm run compile` results in a single solc error:\r\n```\r\n[\r\n {\r\n  \"component\": \"general\",\r\n  \"formattedMessage\": \"CompilerError: Stack too deep when compiling inline assembly: Variable headStart is 1 slot(s) too deep inside the stack.\\n\",\r\n  \"message\": \"Compiler error (/Users/distiller/project/libyul/backends/evm/AsmCodeGen.cpp:253):Stack too deep when compiling inline assembly: Variable headStart is 1 slot(s) too deep inside the stack.\",\r\n  \"severity\": \"error\",\r\n  \"type\": \"CompilerError\"\r\n }\r\n]\r\n```\r\n\r\nDo you have any advice about which Solidity statements might trigger this? If those can be isolated it might be possible on my end to selectively compile files which require optimization with the appropriate settings.\r\n\r\nRE the tracing question. Is there any trick that could be used to reliably map on-chain library code or contract-which-uses-immutable code to a corresponding `evm.deployedBytecode` compiler output?  The use case I'm thinking of is where execution jumps from one contract to another and it's necessary to resolve the source identity of the destination. \r\n\r\n[1]: https://github.com/aave/protocol-v2\r\n[2]: https://github.com/aave/protocol-v2/blob/eea6d38f243b909fc3cf82a581c45b8bc3d2390e/hardhat.config.ts#L76",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/745749729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/753829551",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-753829551",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 753829551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzgyOTU1MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-04T08:18:51Z",
    "updated_at": "2021-01-04T08:18:51Z",
    "author_association": "MEMBER",
    "body": "@cgewecke my guess is that the relevant code is inside the ABI coder, and it might actually be a problem for all files. The more values are decoded at the same time the bigger the stack pressure.\r\n\r\nI don't see how determining the deployed bytecode relates to source maps. If you have immutables, you can only simulate the creation - there is no other way that works in all cases. Is the problem that you need to re-compile the contracts because you do not know which compiler artefact corresponds to which contract address?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/753829551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/812525005",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-812525005",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 812525005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMjUyNTAwNQ==",
    "user": {
      "login": "andy-uphold",
      "id": 80281410,
      "node_id": "MDQ6VXNlcjgwMjgxNDEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/80281410?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andy-uphold",
      "html_url": "https://github.com/andy-uphold",
      "followers_url": "https://api.github.com/users/andy-uphold/followers",
      "following_url": "https://api.github.com/users/andy-uphold/following{/other_user}",
      "gists_url": "https://api.github.com/users/andy-uphold/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andy-uphold/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andy-uphold/subscriptions",
      "organizations_url": "https://api.github.com/users/andy-uphold/orgs",
      "repos_url": "https://api.github.com/users/andy-uphold/repos",
      "events_url": "https://api.github.com/users/andy-uphold/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andy-uphold/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-02T13:17:08Z",
    "updated_at": "2021-04-02T13:17:08Z",
    "author_association": "NONE",
    "body": "\r\n> Just ran into this issue again while trying to compile [aave/protocol-v2](https://github.com/aave/protocol-v2) which uses solc 0.6.12.\r\n\r\nSame here. Trying to mock the LendingPool but can't compile it.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/812525005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844567060",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-844567060",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 844567060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDU2NzA2MA==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-19T23:34:20Z",
    "updated_at": "2021-05-19T23:57:30Z",
    "author_association": "NONE",
    "body": "I am hitting this issue as well using Solidity 0.8.4, in which AbiEncoderV2 is enabled by default. Given that struct arguments are now an accepted pattern and that there is really only one coverage tool in the ecosystem AFAIK (thanks @cgewecke!) perhaps this can be solved by adding a flag to the optimizer that selectively ignores particular no-ops for instrumentation purposes? \r\n\r\nOr perhaps only the stack optimization flag should be left on by solidity-coverage when using the Yul optimizer, disabling the rest https://docs.soliditylang.org/en/latest/internals/optimizer.html#stackcompressor",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844567060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844598155",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-844598155",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 844598155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDU5ODE1NQ==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T00:52:35Z",
    "updated_at": "2021-05-20T00:52:35Z",
    "author_association": "NONE",
    "body": "After playing with this for a while disabling the \"peephole\" optimizer switch while leaving the optimizer on no longer stripped the trace function calls from contracts, although hit maps were not populated for library functions invoked via DELEGATECALL - is the latter a known issue already?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844598155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844628705",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-844628705",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 844628705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDYyODcwNQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T02:12:04Z",
    "updated_at": "2021-05-20T02:12:04Z",
    "author_association": "NONE",
    "body": "@dileepfrog\r\n\r\n> hit maps were not populated for library functions invoked via DELEGATECALL - is the latter a known issue already?\r\n\r\nNo, not as far as I'm aware. Could you give an example of that usage? Is it typical of library calls or something unusual you're doing?\r\n\r\nIf it's possible to mostly resolve this by setting the config correctly as you suggest that would be great.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/844628705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845224008",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-845224008",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 845224008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTIyNDAwOA==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T15:31:19Z",
    "updated_at": "2021-05-20T15:31:19Z",
    "author_association": "NONE",
    "body": "@cgewecke I tried creating an isolated example repo to demo this, however disabling the peephole optimization no longer preserved the trace statements leading to 0 hits across the board - so perhaps simple config modifications are not a complete solution here (I also disabled all of the Yul steps leaving only `stackAllocation` enabled).\r\n\r\nI think it would be a great thing for the community to have 100% test coverage before deploying to mainnet a standard practice (as of writing this very few projects publish any coverage stats at all). @chriseth In pursuit of this what do you think of a bespoke optimizer flag that defeats removing trace no-ops to allow instrumentation?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845224008/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845255104",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-845255104",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 845255104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTI1NTEwNA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T16:12:06Z",
    "updated_at": "2021-05-20T16:12:06Z",
    "author_association": "NONE",
    "body": "@chriseth \r\n\r\nRE: the meaning of the `ComplerError` you said above that...\r\n\r\n> my guess is that the relevant code is inside the ABI coder, and it might actually be a problem for all files. The more values are decoded at the same time the bigger the stack pressure.\r\n\r\nCould you explain this in a little more depth? \r\n\r\nDoes it mean either of the following? \r\n+ If the total size of the abi *for a given contract* were smaller the error could be avoided?\r\n+ If the total size of the compilation set (e.g. all contracts) were smaller the error could be avoided?\r\n\r\nIf so that can (likely) be managed on solidity-coverage's side.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845255104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845286194",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-845286194",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 845286194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTI4NjE5NA==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T16:52:56Z",
    "updated_at": "2021-05-20T16:59:30Z",
    "author_association": "NONE",
    "body": "My understanding of this issue is that the error actually emanates from compilation of the Yul intermediate representation (IR) of a single function rather than from compilation of its Solidity code, making it difficult to track down where exactly it's coming from in the source. Setting `settings.optimizer.details.yulDetails.stackAllocation` to true fixes the error, but this cannot be enabled without also stripping trace statements (unclear if it's the Yul optimizer or \"old\" optimizer doing this stripping).\r\n\r\nI suspect the `inliner` optimizer flag (which is currently not possible to disable per https://github.com/ethereum/solidity/issues/11418) may be the culprit though this is only conjecture.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845286194/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845343219",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-845343219",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 845343219,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTM0MzIxOQ==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T17:57:35Z",
    "updated_at": "2021-05-20T17:57:35Z",
    "author_association": "NONE",
    "body": "I put together a [repo](https://github.com/dileepfrog/solidity-coverage-delegatecall) that demonstrates the issues at hand: \r\n\r\n1) Running coverage will throw the Yul error mentioned by the OP here.\r\n2) Modifying [this line](https://github.com/sc-forks/solidity-coverage/blob/master/plugins/truffle.plugin.js#L94) to `config.compilers.solc.settings.optimizer.details = { peephole: false };` will fix the Yul error, but result in 0 coverage hits even though the tx receipt shows the contract function was indeed called.\r\n\r\nHope this helps and looking forward to your findings!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/845343219/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/847407103",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-847407103",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 847407103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzQwNzEwMw==",
    "user": {
      "login": "dileepfrog",
      "id": 8033,
      "node_id": "MDQ6VXNlcjgwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dileepfrog",
      "html_url": "https://github.com/dileepfrog",
      "followers_url": "https://api.github.com/users/dileepfrog/followers",
      "following_url": "https://api.github.com/users/dileepfrog/following{/other_user}",
      "gists_url": "https://api.github.com/users/dileepfrog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dileepfrog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dileepfrog/subscriptions",
      "organizations_url": "https://api.github.com/users/dileepfrog/orgs",
      "repos_url": "https://api.github.com/users/dileepfrog/repos",
      "events_url": "https://api.github.com/users/dileepfrog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dileepfrog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-24T22:56:57Z",
    "updated_at": "2021-05-24T22:56:57Z",
    "author_association": "NONE",
    "body": "@cgewecke I just confirmed the following changes to the aforementioned line will in fact allow the Yul stack optimizer to run as well as disable removing the trace no-ops. I motion this issue be resolved in light of this and a corresponding one opened for solidity-coverage to add:\r\n\r\n```\r\nconfig.compilers.solc.settings.optimizer.enabled = false;\r\nconfig.compilers.solc.settings.optimizer.details = {\r\n  yul: true,\r\n  yulDetails: {\r\n    stackAllocation: true,\r\n  },\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/847407103/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/847416057",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-847416057",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 847416057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzQxNjA1Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-24T23:19:11Z",
    "updated_at": "2021-05-24T23:20:35Z",
    "author_association": "NONE",
    "body": "@dileepfrog That's so great!! Wow. Thank you for looking into this :)\r\n\r\n~~Closing~~   Continuing at [solidity-coverage 636][1]\r\n\r\n(Ooops, not my issue)\r\n\r\n[1]: https://github.com/sc-forks/solidity-coverage/issues/636\r\n\r\n\r\n\r\n \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/847416057/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939785446",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-939785446",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 939785446,
    "node_id": "IC_kwDOAm_5kc44A_zm",
    "user": {
      "login": "Mubashir-ali-baig",
      "id": 30391795,
      "node_id": "MDQ6VXNlcjMwMzkxNzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30391795?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mubashir-ali-baig",
      "html_url": "https://github.com/Mubashir-ali-baig",
      "followers_url": "https://api.github.com/users/Mubashir-ali-baig/followers",
      "following_url": "https://api.github.com/users/Mubashir-ali-baig/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mubashir-ali-baig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mubashir-ali-baig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mubashir-ali-baig/subscriptions",
      "organizations_url": "https://api.github.com/users/Mubashir-ali-baig/orgs",
      "repos_url": "https://api.github.com/users/Mubashir-ali-baig/repos",
      "events_url": "https://api.github.com/users/Mubashir-ali-baig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mubashir-ali-baig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-11T08:03:13Z",
    "updated_at": "2021-10-11T08:16:22Z",
    "author_association": "NONE",
    "body": "I also encountered the same error and followed the solution @dileepfrog suggested to enable optimizer in truffle-plugin, but now the contract size exceeds from 23 kb to 59.31kb, also is there any way to set the runs value for coverage tool. Btw i'm using hardhat environment so i also enabled the optimizer in hardhat.plugin.js. Would be great if someone suggests a solution.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939785446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939837562",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-939837562",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 939837562,
    "node_id": "IC_kwDOAm_5kc44BMh6",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-11T09:09:27Z",
    "updated_at": "2021-10-11T09:09:27Z",
    "author_association": "MEMBER",
    "body": "If you decrease the \"runs\" parameter, the size should also go down.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939837562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939889848",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-939889848",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 939889848,
    "node_id": "IC_kwDOAm_5kc44BZS4",
    "user": {
      "login": "Mubashir-ali-baig",
      "id": 30391795,
      "node_id": "MDQ6VXNlcjMwMzkxNzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30391795?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mubashir-ali-baig",
      "html_url": "https://github.com/Mubashir-ali-baig",
      "followers_url": "https://api.github.com/users/Mubashir-ali-baig/followers",
      "following_url": "https://api.github.com/users/Mubashir-ali-baig/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mubashir-ali-baig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mubashir-ali-baig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mubashir-ali-baig/subscriptions",
      "organizations_url": "https://api.github.com/users/Mubashir-ali-baig/orgs",
      "repos_url": "https://api.github.com/users/Mubashir-ali-baig/repos",
      "events_url": "https://api.github.com/users/Mubashir-ali-baig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mubashir-ali-baig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-11T10:15:58Z",
    "updated_at": "2021-10-11T10:15:58Z",
    "author_association": "NONE",
    "body": "@chriseth compiling my contracts normally works fine, but when i run yarn coverage, the size goes bananas. Also how can i set runs value for coverage tool?. As clearly coverage tool is not taking any effect when i set runs value in hardhat config to 5.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939889848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939937338",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-939937338",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 939937338,
    "node_id": "IC_kwDOAm_5kc44Bk46",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-11T11:22:01Z",
    "updated_at": "2021-10-11T11:22:01Z",
    "author_association": "MEMBER",
    "body": "I guess this question can better be answered in a hardhat channel.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/939937338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941163906",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-941163906",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 941163906,
    "node_id": "IC_kwDOAm_5kc44GQWC",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T16:16:55Z",
    "updated_at": "2021-10-12T16:16:55Z",
    "author_association": "NONE",
    "body": "@Mubashir-ali-baig The size goes bananas in the coverage tool because it injects lots of instrumentation into the solidity code. Hardhat's coverage plugin is maintained at [sc-forks/solidity-coverage][1], feel free to open an issue about this there. \r\n\r\n[1]: https://github.com/sc-forks/solidity-coverage",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941163906/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941235518",
    "html_url": "https://github.com/ethereum/solidity/issues/10354#issuecomment-941235518",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10354",
    "id": 941235518,
    "node_id": "IC_kwDOAm_5kc44Gh0-",
    "user": {
      "login": "Mubashir-ali-baig",
      "id": 30391795,
      "node_id": "MDQ6VXNlcjMwMzkxNzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/30391795?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mubashir-ali-baig",
      "html_url": "https://github.com/Mubashir-ali-baig",
      "followers_url": "https://api.github.com/users/Mubashir-ali-baig/followers",
      "following_url": "https://api.github.com/users/Mubashir-ali-baig/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mubashir-ali-baig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mubashir-ali-baig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mubashir-ali-baig/subscriptions",
      "organizations_url": "https://api.github.com/users/Mubashir-ali-baig/orgs",
      "repos_url": "https://api.github.com/users/Mubashir-ali-baig/repos",
      "events_url": "https://api.github.com/users/Mubashir-ali-baig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mubashir-ali-baig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T17:49:49Z",
    "updated_at": "2021-10-12T17:49:49Z",
    "author_association": "NONE",
    "body": "@cgwecke Thanks i opened the issue. Is there a way i can set runs manually in the hardhat-plugin.js for coverage tool?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/941235518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

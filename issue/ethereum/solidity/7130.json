{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/7130/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/7130/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/7130/events",
  "html_url": "https://github.com/ethereum/solidity/issues/7130",
  "id": 470233948,
  "node_id": "MDU6SXNzdWU0NzAyMzM5NDg=",
  "number": 7130,
  "title": "[SMTChecker] Study large vs small blocks for CHC branches",
  "user": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-07-19T09:39:14Z",
  "updated_at": "2020-04-22T18:35:23Z",
  "closed_at": "2020-04-22T18:35:22Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "When encoding the program into Horn clauses, there are two options when an `if` is reached:\r\n1. Large blocks:\r\n    - Do not create new blocks for branches and rely on the SSA scheme to implicitly encode the branches.\r\n    - Assertions create edges from function to error.\r\n    - Advantages: much simpler to code, the generated invariants respect the control-flow.\r\n    - The disadvantage is constraint repetition whenever there's an edge from the function. Maybe this is optimized by the solver and is ok.\r\n2. Small blocks:\r\n    - Create a function block `f_i` containing all the constraints as long as the flow is linear; a block `if` for the if's entry point; blocks `ifTrue` and `ifFalse` for the true and false statements; a block `f_j` that continues at the join point. The edges are `f_i -> if`, `if -> ifTrue`, `if -> ifFalse`, `ifTrue -> f_j`, `ifFalse -> f_j`. If the `if` has no false statement, `f_i -> f_j`.\r\n    - Advantages: no constraint repetition, more precision in the encoding.\r\n    - Disadvantages: more complicated code, and because the if's condition is asserted in the control-flow path, it is always true in the control-flow path of assertions inside branches.",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/7130/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/7130/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513170915",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-513170915",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 513170915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzE3MDkxNQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T09:57:14Z",
    "updated_at": "2019-07-19T09:57:14Z",
    "author_association": "MEMBER",
    "body": "Example:\r\n```\r\npragma solidity >=0.5.9;\r\npragma experimental SMTChecker;\r\n\r\ncontract Simple {\r\n\tbool a;\r\n\tbool b;\r\n    \r\n    function f() public {\r\n\t\tif (!a) {\r\n\t\t\ta = true;\r\n\t\t\tb = true;\r\n\t\t}\r\n    }\r\n\r\n\tfunction g() public {\r\n\t\t// 1\r\n\t\t//if (a) assert(b);\r\n\r\n\t\t// 2\r\n\t\t//assert(a == b);\r\n\r\n\t\t// 3\r\n\t\t//assert(!a || b);\r\n\t}\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513170915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513171335",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-513171335",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 513171335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzE3MTMzNQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T09:58:38Z",
    "updated_at": "2019-07-19T09:58:38Z",
    "author_association": "MEMBER",
    "body": "Large block invariants:\r\n1. `a => b`\r\n2. `a <=> b`\r\n3. `a => b`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513171335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513173346",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-513173346",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 513173346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzE3MzM0Ng==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T10:05:17Z",
    "updated_at": "2019-07-19T10:05:17Z",
    "author_association": "MEMBER",
    "body": "Small block invariants:\r\n1. `a /\\ b`\r\n2. `a <=> b`\r\n3. `a /\\ b`\r\n\r\nNote that 1 and 3 are wrong.\r\nAt the moment I think this is because the way the encoding is implemented for small blocks, where the if condition is asserted in the control-flow path.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513173346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513174685",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-513174685",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 513174685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzE3NDY4NQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T10:10:02Z",
    "updated_at": "2019-07-19T10:10:02Z",
    "author_association": "MEMBER",
    "body": "Large block rules for assertion 1:\r\n```\r\nconstructor_Simple_33_0\r\n\r\n(=> (and constructor_Simple_33_0 (= b_6_1 false) (= a_4_1 false))\r\n    (interface_Simple_33_0 a_4_1 b_6_1))\r\n\r\n(=> (interface_Simple_33_0 a_4_3 b_6_3) (function_f_22_0 a_4_3 b_6_3))\r\n\r\n(=> (and (function_f_22_0 a_4_3 b_6_3)\r\n         (= b_6_5 (ite expr_10_1 b_6_4 b_6_3))\r\n         (= a_4_5 (ite expr_10_1 a_4_4 a_4_3))\r\n         (= b_6_4 expr_17_1)\r\n         (= expr_17_1 expr_16_0)\r\n         (= expr_16_0 true)\r\n         (= a_4_4 expr_13_1)\r\n         (= expr_13_1 expr_12_0)\r\n         (= expr_12_0 true)\r\n         (= expr_10_1 (not expr_9_0))\r\n         (= expr_9_0 a_4_3)\r\n         true)\r\n    (interface_Simple_33_0 a_4_5 b_6_5))\r\n\r\n(=> (interface_Simple_33_0 a_4_7 b_6_7) (function_g_32_0 a_4_7 b_6_7))\r\n\r\n(=> (and (function_g_32_0 a_4_7 b_6_7)\r\n         (= expr_27_0 b_6_7)\r\n         (= expr_25_0 a_4_7)\r\n         true\r\n         true\r\n         expr_25_0\r\n         (not expr_27_0))\r\n    error_0)\r\n\r\n(=> (and (function_g_32_0 a_4_7 b_6_7)\r\n         (=> (and true expr_25_0) expr_27_0)\r\n         (= expr_27_0 b_6_7)\r\n         (= expr_25_0 a_4_7)\r\n         true)\r\n    (interface_Simple_33_0 a_4_7 b_6_7))\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513174685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513175200",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-513175200",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 513175200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzE3NTIwMA==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T10:11:55Z",
    "updated_at": "2019-07-19T10:11:55Z",
    "author_association": "MEMBER",
    "body": "Small block rules for assertion 1:\r\n```\r\nconstructor_Simple_33_0\r\n\r\n(=> (and constructor_Simple_33_0 (= b_6_1 false) (= a_4_1 false))\r\n    (interface_Simple_33_0 a_4_1 b_6_1))\r\n\r\n(=> (interface_Simple_33_0 a_4_3 b_6_3) (function_f_22_0 a_4_3 b_6_3))\r\n\r\n(=> (and (function_f_22_0 a_4_3 b_6_3) true) (if_20_0 a_4_3 b_6_3))\r\n\r\n(=> (and (if_20_0 a_4_3 b_6_3)\r\n         (= expr_10_1 (not expr_9_0))\r\n         (= expr_9_0 a_4_3)\r\n         true\r\n         expr_10_1)\r\n    (if_true_19_0 a_4_3 b_6_3))\r\n\r\n(=> (and (if_true_19_0 a_4_3 b_6_3)\r\n         (= b_6_4 expr_17_1)\r\n         (= expr_17_1 expr_16_0)\r\n         (= expr_16_0 true)\r\n         (= a_4_4 expr_13_1)\r\n         (= expr_13_1 expr_12_0)\r\n         (= expr_12_0 true)\r\n         (= expr_10_1 (not expr_9_0))\r\n         (= expr_9_0 a_4_3)\r\n         true)\r\n    (function_f_22_1 a_4_4 b_6_4))\r\n\r\n(=> (and (if_20_0 a_4_3 b_6_3)\r\n         (= expr_10_1 (not expr_9_0))\r\n         (= expr_9_0 a_4_3)\r\n         true\r\n         (not expr_10_1))\r\n    (function_f_22_1 a_4_3 b_6_3))\r\n\r\n(=> (and (function_f_22_1 a_4_4 b_6_4) true)\r\n    (interface_Simple_33_0 a_4_4 b_6_4))\r\n\r\n(=> (interface_Simple_33_0 a_4_6 b_6_6) (function_g_32_0 a_4_6 b_6_6))\r\n\r\n(=> (and (function_g_32_0 a_4_6 b_6_6) true) (if_30_0 a_4_6 b_6_6))\r\n\r\n(=> (and (if_30_0 a_4_6 b_6_6) (= expr_25_0 a_4_6) true expr_25_0)\r\n    (if_true_29_0 a_4_6 b_6_6))\r\n\r\n(=> (and (if_true_29_0 a_4_6 b_6_6)\r\n         (= expr_27_0 b_6_6)\r\n         (= expr_25_0 a_4_6)\r\n         true\r\n         true\r\n         (not expr_27_0))\r\n    error_0)\r\n\r\n(=> (and (if_true_29_0 a_4_6 b_6_6)\r\n         (=> true expr_27_0)\r\n         (= expr_27_0 b_6_6)\r\n         (= expr_25_0 a_4_6)\r\n         true)\r\n    (function_g_32_1 a_4_6 b_6_6))\r\n\r\n(=> (and (if_30_0 a_4_6 b_6_6) (= expr_25_0 a_4_6) true (not expr_25_0))\r\n    (function_g_32_1 a_4_6 b_6_6))\r\n\r\n(=> (and (function_g_32_1 a_4_6 b_6_6) true)\r\n    (interface_Simple_33_0 a_4_6 b_6_6))\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/513175200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/617956069",
    "html_url": "https://github.com/ethereum/solidity/issues/7130#issuecomment-617956069",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7130",
    "id": 617956069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzk1NjA2OQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-22T18:35:22Z",
    "updated_at": "2020-04-22T18:35:22Z",
    "author_association": "MEMBER",
    "body": "The CHC code is now stable and using small blocks. This follows CFG generation and makes the model much cleaner.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/617956069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

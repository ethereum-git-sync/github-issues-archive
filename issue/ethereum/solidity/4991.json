{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4991/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4991/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4991/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4991",
  "id": 360787211,
  "node_id": "MDU6SXNzdWUzNjA3ODcyMTE=",
  "number": 4991,
  "title": "SMTChecker: Contract invariants support",
  "user": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    },
    {
      "id": 4438003076,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaNhA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20effort",
      "name": "medium effort",
      "color": "ff7df7",
      "default": false,
      "description": "Default level of effort"
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    },
    {
      "id": 4525128519,
      "node_id": "LA_kwDOAm_5kc8AAAABDbf7Rw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/needs%20design",
      "name": "needs design",
      "color": "18F737",
      "default": false,
      "description": "The proposal is too vague to be implemented right away"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2018-09-17T09:30:17Z",
  "updated_at": "2022-09-26T19:13:30Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\nCurrently the SMTChecker does not reason about contract global invariants.\r\n\r\n```\r\ncontract C\r\n{\r\n    uint a;\r\n    function f1() public { a = 1; }\r\n    function f2() public { a = 2; }\r\n    function f1(uint x) public \r\n        require(x < 10);\r\n        a = x;\r\n    }\r\n}\r\n```\r\nIn the example above, `a >= 0 && a < 10` is an invariant that might be useful to prove properties of other functions in the contract.\r\n\r\n## Specification\r\nIdeally we'd have a way to provide global invariants such that, for each invariant `I`:\r\n* `assert(I)` is added in the end of the constructor\r\n* `require(I)` is added in the beginning of every non-view function\r\n* `assert(I)` is added in the end of every non-view function\r\n\r\nIf the SMTChecker proves all assertions, the invariant is inductive and safe.\r\n\r\nPrevious example updated with new suggested syntax:\r\n```\r\ncontract C\r\n{\r\n    uint a;\r\n    invariant { a >= 0 && a < 10 }\r\n    function f1() public { a = 1; }\r\n    function f2() public { a = 2; }\r\n    function f1(uint x) public \r\n        require(x < 10);\r\n        a = x;\r\n    }\r\n}\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4991/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4991/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/422052600",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-422052600",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 422052600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjA1MjYwMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-17T15:03:32Z",
    "updated_at": "2018-09-17T15:03:32Z",
    "author_association": "MEMBER",
    "body": "I think if the content of the invariant is an expression, then it should not have `{`-`}`.\r\n\r\nAlso, the invariant should be used with all external (and perhaps also internal) function calls.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/422052600/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/424526920",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-424526920",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 424526920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDUyNjkyMA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-25T22:46:32Z",
    "updated_at": "2018-09-25T22:46:32Z",
    "author_association": "MEMBER",
    "body": "This kind of calls for `static_assert`-esque feature :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/424526920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438605912",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-438605912",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 438605912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODYwNTkxMg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T10:01:13Z",
    "updated_at": "2018-11-14T10:01:13Z",
    "author_association": "MEMBER",
    "body": "It might be useful to name invariants and then allow to annotate function that are expected to violate certain invariants: `violates invariantName`\r\n\r\nFor example, a `mint` function is fine to violated the constant-ness of the sum of balances.\r\n\r\nOn the other hand, something like ghost variables might be a better way to achieve the same goal.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438605912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438611323",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-438611323",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 438611323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODYxMTMyMw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T10:18:41Z",
    "updated_at": "2018-11-14T10:18:41Z",
    "author_association": "MEMBER",
    "body": "Another way to implement this would be a list of functions that violate an invariant to be specified with the invariant (instead of with the function).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438611323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438709386",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-438709386",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 438709386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODcwOTM4Ng==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T15:46:29Z",
    "updated_at": "2018-11-14T15:46:29Z",
    "author_association": "MEMBER",
    "body": "I would still think about how this relates to modifier areas and pre- and postconditions defined in modifiers.\r\nHaving global invariants can be achieved with just putting everything in one modifier area; excluding some functions would just mean defining them outside that modifier area, etc.\r\n\r\nAs for overlapping sets of invariants - would defining invariants while excluding some functions really be better than modifier areas in that case?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/438709386/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/446192571",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-446192571",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 446192571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE5MjU3MQ==",
    "user": {
      "login": "lojikil",
      "id": 581001,
      "node_id": "MDQ6VXNlcjU4MTAwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/581001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lojikil",
      "html_url": "https://github.com/lojikil",
      "followers_url": "https://api.github.com/users/lojikil/followers",
      "following_url": "https://api.github.com/users/lojikil/following{/other_user}",
      "gists_url": "https://api.github.com/users/lojikil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lojikil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lojikil/subscriptions",
      "organizations_url": "https://api.github.com/users/lojikil/orgs",
      "repos_url": "https://api.github.com/users/lojikil/repos",
      "events_url": "https://api.github.com/users/lojikil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lojikil/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2018-12-11T12:55:21Z",
    "updated_at": "2018-12-11T12:55:21Z",
    "author_association": "NONE",
    "body": "@ekpyron I'm with you; may as well add full Hoare logic à la pre- and post-conditions. You could also go with refinement types, but that may be a bit further than the current direction may wish to go. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/446192571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596472101",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596472101",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596472101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjQ3MjEwMQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T11:28:41Z",
    "updated_at": "2020-03-09T11:28:41Z",
    "author_association": "MEMBER",
    "body": "This was brought up again in https://github.com/ethereum/solidity/issues/8433.\r\n\r\nMy current proposal including expressiveness/syntax/code generation is:\r\n\r\n```\r\ncontract C {\r\n    uint x;\r\n    property { x < 2 };\r\n    function f() public { if (x == 0) x = 1; }\r\n    function g() public { if (x == 1) x = 0; }\r\n}\r\n```\r\nThis would add\r\n- `assert(x < 2)` in the end of the constructor\r\n- `require(x < 2)` in the beginning of `f` and `g`\r\n- `assert(x < 2)` in the end of `f` and `g`.\r\n(all the functions that can be called externally).\r\n\r\nAs @MicahZoltu pointed out, the code generation above should be done only if the function was called externally.\r\n\r\nThe expressions inside `property` must be side effect free.\r\nIf the property doesn't hold over all public functions, it can be further specified by\r\n`property { x < 2 } over f, h;`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596472101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596472742",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596472742",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596472742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjQ3Mjc0Mg==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T11:30:06Z",
    "updated_at": "2020-03-09T11:30:06Z",
    "author_association": "MEMBER",
    "body": "Any other syntax suggestions?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596472742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596525016",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596525016",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596525016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjUyNTAxNg==",
    "user": {
      "login": "dddejan",
      "id": 1482564,
      "node_id": "MDQ6VXNlcjE0ODI1NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1482564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dddejan",
      "html_url": "https://github.com/dddejan",
      "followers_url": "https://api.github.com/users/dddejan/followers",
      "following_url": "https://api.github.com/users/dddejan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dddejan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dddejan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dddejan/subscriptions",
      "organizations_url": "https://api.github.com/users/dddejan/orgs",
      "repos_url": "https://api.github.com/users/dddejan/repos",
      "events_url": "https://api.github.com/users/dddejan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dddejan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T13:31:08Z",
    "updated_at": "2020-03-09T15:43:28Z",
    "author_association": "NONE",
    "body": "It would be nice if the property expressions language is extensible in some way to support tool-specific language. I'm not sure how easily this is done. This is one of the reasons why at the moment in solc-verify we put all the specs in the comments.\r\n\r\nFor example something like:\r\n\r\n```solidity\r\ncontract C {\r\n    int[] a;\r\n    property (uint i) { forall(i, !(i < a.length) || a[i] < 100) };\r\n    function add(int x) {\r\n        require(x < 100);\r\n        a.push(x);\r\n    }\r\n}\r\n```\r\nAbove declares a new variables `i` to ease parsing, and has a new tool-specific function `forall`.\r\n\r\nEdit: maybe one could specify the language of the properties somehow with \"magic\" functions that support any number of arbitrary arguments (this is on the tool to interpret), e.g.:\r\n\r\n```solidity\r\n\r\npragma add-property-predicate forall;\r\npragma add-property-function sum_int int;\r\n\r\ncontract C {\r\n    int[] a;\r\n\r\n    property boundedLength() dynamic { a.length <= 100 }\r\n    property boundedElements(uint i) static { forall(i, !(i < a.length) || a[i] < 100) };\r\n    property boundedSum(uint i) static { sum_int(i, a[i]) > -100 }    \r\n\r\n    function add(int x) {\r\n        require(x >= -1 && x < 100 && a.length < 100);\r\n        a.push(x);\r\n    }\r\n    function remove(uint i) {\r\n        require(a.length > 0 && i < a.length);\r\n        a[i] = a[a.length-1];\r\n        a.pop();\r\n    } \r\n}\r\n```\r\n\r\nEdit: added modifiers and more functionality that shows some dynamic checks unnecessary. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596525016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596549724",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596549724",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596549724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjU0OTcyNA==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T14:14:12Z",
    "updated_at": "2020-03-09T14:14:44Z",
    "author_association": "MEMBER",
    "body": "I think this could be useful, but considering this is supposed to generate bytecode as well I find it rather dangerous, since these custom properties wouldn't generate code (but they look the same as the ones that would).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596549724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596563678",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596563678",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596563678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjU2MzY3OA==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T14:25:01Z",
    "updated_at": "2020-03-09T14:25:01Z",
    "author_association": "MEMBER",
    "body": "@dddejan what other operators would you say are important? Maybe we could have a spec language inside Solidity that doesn't generate code but accepts that.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596563678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596571961",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596571961",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596571961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjU3MTk2MQ==",
    "user": {
      "login": "dddejan",
      "id": 1482564,
      "node_id": "MDQ6VXNlcjE0ODI1NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1482564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dddejan",
      "html_url": "https://github.com/dddejan",
      "followers_url": "https://api.github.com/users/dddejan/followers",
      "following_url": "https://api.github.com/users/dddejan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dddejan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dddejan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dddejan/subscriptions",
      "organizations_url": "https://api.github.com/users/dddejan/orgs",
      "repos_url": "https://api.github.com/users/dddejan/repos",
      "events_url": "https://api.github.com/users/dddejan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dddejan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T14:38:34Z",
    "updated_at": "2020-03-09T14:38:34Z",
    "author_association": "NONE",
    "body": "Yes, I didn't realize that you're doing code generation. Examples we have now are sums over collections and and equality over complex datatypes (e.g., comparing two arrays/structs). We plan to add some quantification soon. \r\n\r\nIt's really impossible to say what's useful. It would be great if you could have some kind of modifier on properties (`dynamic`/`static`) to distinguish which ones generate code.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596571961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596574386",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-596574386",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 596574386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjU3NDM4Ng==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T14:42:34Z",
    "updated_at": "2020-03-09T14:42:34Z",
    "author_association": "MEMBER",
    "body": "Yea this dynamic/static separation is something I also really want",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/596574386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/699476036",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-699476036",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 699476036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTQ3NjAzNg==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-26T10:26:54Z",
    "updated_at": "2020-09-26T10:26:54Z",
    "author_association": "MEMBER",
    "body": "#2918 could replace this for number types at least.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/699476036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/870497637",
    "html_url": "https://github.com/ethereum/solidity/issues/4991#issuecomment-870497637",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4991",
    "id": 870497637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDQ5NzYzNw==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T11:04:36Z",
    "updated_at": "2021-06-29T11:04:36Z",
    "author_association": "MEMBER",
    "body": "With Solidity's recent custom Natspec tags, doing something like the following examples annotates the AST node of the contract with the given invariant similarly to how the other Natspec tags apply to contracts.\r\n```\r\n/// @custom:formal invariants {x == 0}\r\ncontract D {\r\n\tuint x;\r\n}\r\n```\r\n\r\n```\r\n$ solc a.sol --devdoc\r\n======= a.sol:D =======\r\nDeveloper Documentation\r\n{\r\n  \"custom:formal\": \"invariants {x == 0}\",\r\n  \"kind\": \"dev\",\r\n  \"methods\": {},\r\n  \"version\": 1\r\n}\r\n```\r\n\r\nSince this is/could be used by various tools without changing the language itself, maybe this is an easier and more practical way to go.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/870497637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9264",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9264/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9264/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9264/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9264",
  "id": 646374158,
  "node_id": "MDU6SXNzdWU2NDYzNzQxNTg=",
  "number": 9264,
  "title": "selfdestruct() and Private functions",
  "user": {
    "login": "digiblackdranzer",
    "id": 11799579,
    "node_id": "MDQ6VXNlcjExNzk5NTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/11799579?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/digiblackdranzer",
    "html_url": "https://github.com/digiblackdranzer",
    "followers_url": "https://api.github.com/users/digiblackdranzer/followers",
    "following_url": "https://api.github.com/users/digiblackdranzer/following{/other_user}",
    "gists_url": "https://api.github.com/users/digiblackdranzer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/digiblackdranzer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/digiblackdranzer/subscriptions",
    "organizations_url": "https://api.github.com/users/digiblackdranzer/orgs",
    "repos_url": "https://api.github.com/users/digiblackdranzer/repos",
    "events_url": "https://api.github.com/users/digiblackdranzer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/digiblackdranzer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-06-26T16:25:43Z",
  "updated_at": "2020-06-29T16:54:32Z",
  "closed_at": "2020-06-29T16:54:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Solidity has a compilation rule that private functions cannot be payable, it even throws compile time error stating “TypeError : Private  functions cannot be payable”. However, there is one primitive of Solidity which is payable and bypasses this check. selfdestruct() is a function in contract which is capable of destroying entire contract and transferring amount deposited at contract to some other account (whose address is passed as argument)\r\n\r\nSmart Contract : \r\n\r\n```solidity\r\ncontract Wallet {   \r\n  mapping (address => uint) public credit;\r\n  address owner;\r\n \r\n  constructor() public\r\n  {\r\n      owner=msg.sender;\r\n  }\r\n    \r\n  function deposit() public payable {\r\n    credit[msg.sender] += msg.value;\r\n  }\r\n    \r\n  function withdraw(uint amount) public {\r\n    if (credit[msg.sender]>= amount) {\r\n      msg.sender.transfer(amount);\r\n      credit[msg.sender]-=amount;\r\n    }\r\n  }\r\n \r\n  function checkBalance() public view returns(uint)\r\n  {\r\n      return credit[msg.sender];\r\n  }\r\n\r\n  function secretDrain(address x) private\r\n  {\r\n      selfdestruct(x);\r\n  }\r\n \r\n  function () public\r\n  {\r\n      secretDrain(owner);\r\n  }\r\n \r\n}\r\n```\r\nFun thing about this contract is that the private function is not even visible to other account holders in the contract interaction interface so only the contract owner knows about it. A remix interface is attached in image below.\r\n![105](https://user-images.githubusercontent.com/11799579/85879253-a8803100-b7f7-11ea-8074-0e0c00058349.png)\r\n\r\n\r\n",
  "closed_by": {
    "login": "digiblackdranzer",
    "id": 11799579,
    "node_id": "MDQ6VXNlcjExNzk5NTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/11799579?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/digiblackdranzer",
    "html_url": "https://github.com/digiblackdranzer",
    "followers_url": "https://api.github.com/users/digiblackdranzer/followers",
    "following_url": "https://api.github.com/users/digiblackdranzer/following{/other_user}",
    "gists_url": "https://api.github.com/users/digiblackdranzer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/digiblackdranzer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/digiblackdranzer/subscriptions",
    "organizations_url": "https://api.github.com/users/digiblackdranzer/orgs",
    "repos_url": "https://api.github.com/users/digiblackdranzer/repos",
    "events_url": "https://api.github.com/users/digiblackdranzer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/digiblackdranzer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9264/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9264/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651114861",
    "html_url": "https://github.com/ethereum/solidity/issues/9264#issuecomment-651114861",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9264",
    "id": 651114861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTExNDg2MQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T13:18:03Z",
    "updated_at": "2020-06-29T13:18:03Z",
    "author_association": "MEMBER",
    "body": "@digiblackdranzer I'm not sure I get your point.\r\n`secredDrain` isn't payable, so it can't receive Ether, which is not related to `selfdestruct`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651114861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651163388",
    "html_url": "https://github.com/ethereum/solidity/issues/9264#issuecomment-651163388",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9264",
    "id": 651163388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTE2MzM4OA==",
    "user": {
      "login": "digiblackdranzer",
      "id": 11799579,
      "node_id": "MDQ6VXNlcjExNzk5NTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/11799579?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/digiblackdranzer",
      "html_url": "https://github.com/digiblackdranzer",
      "followers_url": "https://api.github.com/users/digiblackdranzer/followers",
      "following_url": "https://api.github.com/users/digiblackdranzer/following{/other_user}",
      "gists_url": "https://api.github.com/users/digiblackdranzer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/digiblackdranzer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/digiblackdranzer/subscriptions",
      "organizations_url": "https://api.github.com/users/digiblackdranzer/orgs",
      "repos_url": "https://api.github.com/users/digiblackdranzer/repos",
      "events_url": "https://api.github.com/users/digiblackdranzer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/digiblackdranzer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T14:37:23Z",
    "updated_at": "2020-06-29T14:40:20Z",
    "author_association": "NONE",
    "body": "I may have got a wrong idea but here's what my understanding is as for now :\r\n1) secretDrain() would be known to only contract owner right ? Since it's a private method it won't be visible to other peers (Inferencing this from remix interface to interact with contract, I mean other peers will be able to see deposit(), credit() etc. as shown in figure but they won't be able to see secretDrain() there).\r\n2) I'm assuming contract owner is malicious here and he can call secretDrain() anytime from either fallback function or some other private function and only contract owner will be aware of this and other peers will come to know about this after the contract is destroyed.\r\n\r\n3) So my point was why shouldn't there be access modifier like payable for selfdestruct() as well so as to stop this phenomenon and people won't be able to include selfdestruct() in private functions.\r\n\r\nPlease help me out if I'm wrong.\r\n\r\nP.S : I'm new to Github and Ethereum 😅 . So please bear with me.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651163388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651176951",
    "html_url": "https://github.com/ethereum/solidity/issues/9264#issuecomment-651176951",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9264",
    "id": 651176951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTE3Njk1MQ==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T14:59:14Z",
    "updated_at": "2020-06-29T14:59:14Z",
    "author_association": "MEMBER",
    "body": "> secretDrain() would be known to only contract owner right ? Since it's a private method it won't be visible to other peers (Inferencing this from remix interface to interact with contract, I mean other peers will be able to see deposit(), credit() etc. as shown in figure but they won't be able to see secretDrain() there).\r\n\r\n[This](https://ethereum.stackexchange.com/questions/6547/solidity-functions-private-visibility) maybe relevant.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651176951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651240995",
    "html_url": "https://github.com/ethereum/solidity/issues/9264#issuecomment-651240995",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9264",
    "id": 651240995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTI0MDk5NQ==",
    "user": {
      "login": "digiblackdranzer",
      "id": 11799579,
      "node_id": "MDQ6VXNlcjExNzk5NTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/11799579?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/digiblackdranzer",
      "html_url": "https://github.com/digiblackdranzer",
      "followers_url": "https://api.github.com/users/digiblackdranzer/followers",
      "following_url": "https://api.github.com/users/digiblackdranzer/following{/other_user}",
      "gists_url": "https://api.github.com/users/digiblackdranzer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/digiblackdranzer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/digiblackdranzer/subscriptions",
      "organizations_url": "https://api.github.com/users/digiblackdranzer/orgs",
      "repos_url": "https://api.github.com/users/digiblackdranzer/repos",
      "events_url": "https://api.github.com/users/digiblackdranzer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/digiblackdranzer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T16:54:31Z",
    "updated_at": "2020-06-29T16:54:31Z",
    "author_association": "NONE",
    "body": "Oh ok I got it. Thanks for help.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651240995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

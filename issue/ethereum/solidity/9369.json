{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9369/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9369/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9369/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9369",
  "id": 653920020,
  "node_id": "MDU6SXNzdWU2NTM5MjAwMjA=",
  "number": 9369,
  "title": "Drop backwards compatibility from and fix Solidity Antlr grammar",
  "user": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-07-09T09:41:20Z",
  "updated_at": "2020-08-26T07:57:14Z",
  "closed_at": "2020-08-26T07:57:14Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Came up in https://github.com/ethereum/solidity/pull/9361.\r\n\r\nI only now realized that the grammar is supposed to also parse older solidity versions, which involves adding weird workarounds for breaking changes.\r\n\r\nI don't think this is a good idea. It renders the grammar less useful (having workarounds in the category will require similar workarounds for everyone actually using it to parse stuff) and it's an unrealistic goal anyways.\r\n\r\nThere's several examples for which this currently doesn't work ``uint override;``, ``uint virtual;``, ``function immutable()``, etc.\r\n\r\nIf anything, we should clearly define which versions it should work against and properly test that.\r\n\r\nBut I think we should specifically only target the current version of the language.\r\n\r\nThe only argument against that I heard was wanting to parse the pragma using the grammar first and not wanting to parse twice. I don't think that's a valid argument - the pragma *can* and *should* be parsed independently (it's e.g. just a simple regex to do that) and then I can choose the correct grammar for the right version.\r\n\r\nBut I may have missed more discussion about this that already has taken place, if so, sorry about that.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9369/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9369/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656026736",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-656026736",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 656026736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjAyNjczNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T09:44:08Z",
    "updated_at": "2020-07-09T09:44:08Z",
    "author_association": "MEMBER",
    "body": "I think we should have two grammars: One that is as close as possible to the current version and one that is as relaxed as possible, targeting different use-cases. I think there is already an issue about it, by the way.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656026736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656028818",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-656028818",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 656028818,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjAyODgxOA==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T09:48:33Z",
    "updated_at": "2020-07-09T09:48:33Z",
    "author_association": "MEMBER",
    "body": "What use cases would those be?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656028818/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656029779",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-656029779",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 656029779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjAyOTc3OQ==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T09:50:45Z",
    "updated_at": "2020-07-09T09:50:45Z",
    "author_association": "MEMBER",
    "body": "I searched for existing issues involving ``grammar`` and ``antlr`` and didn't find anything...\r\n\r\nTwo grammars would be fine, but what's \"as relaxed as possible\" - a grammar that's \"as relaxed as possible\" just treats everything as identifier and does nothing... I don't want to be nitpicking here, but we have to properly define what it should do... e.g. being able to parse 0.5+ would be reasonable. 0.4+ might be desirable (depending on use cases), but would already make things significantly weirder (and thereby the result of using the grammar to parse stuff *less* useful)...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/656029779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657427561",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-657427561",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 657427561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzQyNzU2MQ==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-13T09:07:18Z",
    "updated_at": "2020-07-13T09:07:18Z",
    "author_association": "MEMBER",
    "body": "> What use cases would those be?\r\n\r\nThat would be an interesting question indeed. If it's only to be able to parse the version pragma, then I'd argue that's not a good use case for a grammar at all - not sure what other use cases there could be?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657427561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657510697",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-657510697",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 657510697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzUxMDY5Nw==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-13T11:42:12Z",
    "updated_at": "2020-07-13T11:42:12Z",
    "author_association": "MEMBER",
    "body": "To document that here: There's quite a few things wrong with the current grammar in general.\r\nE.g. in inline assembly ``switch return {}`` seems to be fine - identifiers are considered function calls (although this might change in https://github.com/ethereum/solidity/pull/9285), etc.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/657510697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658663373",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-658663373",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 658663373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODY2MzM3Mw==",
    "user": {
      "login": "franzihei",
      "id": 41991517,
      "node_id": "MDQ6VXNlcjQxOTkxNTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/41991517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/franzihei",
      "html_url": "https://github.com/franzihei",
      "followers_url": "https://api.github.com/users/franzihei/followers",
      "following_url": "https://api.github.com/users/franzihei/following{/other_user}",
      "gists_url": "https://api.github.com/users/franzihei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/franzihei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/franzihei/subscriptions",
      "organizations_url": "https://api.github.com/users/franzihei/orgs",
      "repos_url": "https://api.github.com/users/franzihei/repos",
      "events_url": "https://api.github.com/users/franzihei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/franzihei/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-15T09:39:17Z",
    "updated_at": "2020-07-15T09:39:17Z",
    "author_association": "MEMBER",
    "body": "Also dropping this here in case we need it later wrt use cases: \r\n\r\nThe ANTLR grammar is currently used by [Solidity Parser for JavaScript](https://github.com/solidity-parser/parser), which is used by\r\n\r\n* [sol2uml](https://github.com/naddison36/sol2uml)\r\n* [Solhint](https://github.com/protofire/solhint/)\r\n* [solidity-coverage](https://github.com/sc-forks/solidity-coverage)\r\n* [prettier-solidity](https://github.com/prettier-solidity/prettier-plugin-solidity/)\r\n* [Buidler](https://github.com/nomiclabs/buidler/)\r\n* [eth-gas-reporter](https://github.com/cgewecke/eth-gas-reporter)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/658663373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/673766288",
    "html_url": "https://github.com/ethereum/solidity/issues/9369#issuecomment-673766288",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9369",
    "id": 673766288,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Mzc2NjI4OA==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T23:57:41Z",
    "updated_at": "2020-08-13T23:57:41Z",
    "author_association": "MEMBER",
    "body": "Another user right here https://github.com/intellij-solidity/intellij-solidity/tree/master/src/main/grammars/ - I just noticed, because that's an IntelliJ plugin I can actually use in CLion myself :-D.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/673766288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

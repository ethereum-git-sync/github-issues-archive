{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11664",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11664/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11664/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11664/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11664",
  "id": 945210223,
  "node_id": "MDU6SXNzdWU5NDUyMTAyMjM=",
  "number": 11664,
  "title": "Consider to encode certain reverts as  `Error(uint256)` with defined error codes",
  "user": {
    "login": "cburgdorf",
    "id": 521109,
    "node_id": "MDQ6VXNlcjUyMTEwOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cburgdorf",
    "html_url": "https://github.com/cburgdorf",
    "followers_url": "https://api.github.com/users/cburgdorf/followers",
    "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
    "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
    "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
    "repos_url": "https://api.github.com/users/cburgdorf/repos",
    "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-07-15T09:58:46Z",
  "updated_at": "2021-07-28T10:57:21Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "\r\n## Abstract\r\n\r\nConsider to encode certain reverts as  `Error(uint256)` with defined error codes\r\n\r\n## Motivation\r\n\r\nBoth Solidity and Fe currently use `Panic(uint256)` to encode certain reverts with different panic codes as [defined in the documentation](https://docs.soliditylang.org/en/v0.8.6/control-structures.html?#panic-via-assert-and-error-via-require).\r\n\r\nHowever, there are certain reverts around decoding of invalid abi encoded data for which Solidity reverts with zero data.\r\n[Fe](http://fe.ethereum.org/) currently encodes these reverts as `Panic(uint256)` with panic code `0x99`.\r\n\r\nBut as @ekpyron pointed out `Panic(uint256)`was meant for a different category of failures.\r\n\r\nCiting @ekpyron \r\n\r\n>short summary is: panics, which have the panic codes, were introduced to replace \"asserts\", resp. \"this should never happen\" situations, while decoding invalid abi encoded data has to be expected to happen and rather falls into the category of \"require\" errors... which is why they weren't covered in the panic codes\r\n\r\nThe Fe team wants to avoid reverting with zero information to improve the developer experience. The Fe team is quite happy to re-align to a different encoding if the Solidity teams want to start encoding these reverts differently.\r\n\r\nWe briefly discussed using the signature `Error(uint256)` for this category of errors and the purpose of this issue is to find out if that would be a favorable way forward for this category of errors.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11664/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11664/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/880877874",
    "html_url": "https://github.com/ethereum/solidity/issues/11664#issuecomment-880877874",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11664",
    "id": 880877874,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4MDg3Nzg3NA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-15T17:21:33Z",
    "updated_at": "2021-07-15T17:21:33Z",
    "author_association": "MEMBER",
    "body": "The solidity compiler has a switch to enable error messages for ABI decoding failures which cause a revert of type `Error(string)`. You could use that (even with an empty string) until we agree on the error codes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/880877874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/880904609",
    "html_url": "https://github.com/ethereum/solidity/issues/11664#issuecomment-880904609",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11664",
    "id": 880904609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4MDkwNDYwOQ==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-15T18:04:18Z",
    "updated_at": "2021-07-15T18:04:18Z",
    "author_association": "MEMBER",
    "body": "Well, we are not relying on the solidity compiler for that so I guess we will just continue using `0x99` with `Panic(uint256)` in Fe but happily make the switch to something else if we can find a common scheme. Or maybe we just spearhead the `Error(uint256)` idea if we feel adventurous. We are not yet aiming for language stability just yet so we feel free to make these changes more lightly. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/880904609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/886828708",
    "html_url": "https://github.com/ethereum/solidity/issues/11664#issuecomment-886828708",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11664",
    "id": 886828708,
    "node_id": "IC_kwDOAm_5kc402-6k",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-26T16:01:51Z",
    "updated_at": "2021-07-26T16:01:51Z",
    "author_association": "MEMBER",
    "body": "Even if you plan to change this in the future, I would ask you not to use `Panic(uint256)` for input validation. In Solidity, `Panic(uint256)` is exclusively used for internal errors with the idea in mind that bytecode-based dynamic analysis tools (formal verification, symbolic execution, fuzzing, ...) can check if such errors can be created at all by the code and flag an error if this is the case. If you use `Panic(uint256)` for input validation, these errors are always reachable.\r\n\r\nFeel free to introduce a code scheme for `Error(uint256)` or even a different kind of error (`DecodingError(uint256)`?)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/886828708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888216186",
    "html_url": "https://github.com/ethereum/solidity/issues/11664#issuecomment-888216186",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11664",
    "id": 888216186,
    "node_id": "IC_kwDOAm_5kc408Rp6",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-28T10:57:21Z",
    "updated_at": "2021-07-28T10:57:21Z",
    "author_association": "MEMBER",
    "body": "@chriseth Thank you for your input, that makes sense. I filed an issue to change that: https://github.com/ethereum/fe/issues/492",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888216186/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

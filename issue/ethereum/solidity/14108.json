{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14108",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14108/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14108/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14108/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14108",
  "id": 1660841545,
  "node_id": "I_kwDOAm_5kc5i_m5J",
  "number": 14108,
  "title": "error: storing the address of local variable 'remainingRefs' in '_187->_M_parent' [-Werror=dangling-pointer=]",
  "user": {
    "login": "lemenkov",
    "id": 41835,
    "node_id": "MDQ6VXNlcjQxODM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/41835?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lemenkov",
    "html_url": "https://github.com/lemenkov",
    "followers_url": "https://api.github.com/users/lemenkov/followers",
    "following_url": "https://api.github.com/users/lemenkov/following{/other_user}",
    "gists_url": "https://api.github.com/users/lemenkov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lemenkov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lemenkov/subscriptions",
    "organizations_url": "https://api.github.com/users/lemenkov/orgs",
    "repos_url": "https://api.github.com/users/lemenkov/repos",
    "events_url": "https://api.github.com/users/lemenkov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lemenkov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-04-10T14:10:02Z",
  "updated_at": "2023-04-12T11:20:17Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI've just run into another compilation issue when trying to compile Solidity 0.8.19 with GCC  13.0.1. The issue cannot be reproduced with GCC 12.2.1 and I suppose with the oldest ones.\r\n\r\n## Environment\r\n\r\n- Compiler version: GCC 13.0.1\r\n- Target EVM version (as per compiler settings): n/a (solidity compilation issue)\r\n- Framework/IDE (e.g. Truffle or Remix): n/a (solidity compilation issue)\r\n- EVM execution environment / backend / blockchain client: n/a (solidity compilation issue)\r\n- Operating system: Fedora 38 and upcoming Fedora 39.\r\n\r\n## Steps to Reproduce\r\n\r\nAny [attempt to compile Solidity with -Werror flag](https://download.copr.fedorainfracloud.org/results/peter/ethereum-brownie/fedora-38-x86_64/05766601-solidity/builder-live.log.gz) fails with the following error:\r\n\r\n```\r\n[ 18%] Building CXX object libevmasm/CMakeFiles/evmasm.dir/LinkerObject.cpp.o\r\ncd /builddir/build/BUILD/solidity-0.8.19/redhat-linux-build/libevmasm && /usr/bin/g++ -DBOOST_ATOMIC_DYN_LINK -DBOOST_ATOMIC_NO_LIB -DBOOST_FILESYSTEM_DYN_LINK -DBOOST_FILESYSTEM_NO_LIB -DBOOST_SYSTEM_DYN_LINK -DBOOST_SYSTEM_NO_LIB -DFMT_HEADER_ONLY=1 -DHAVE_CVC4 -DHAVE_Z3 -I/builddir/build/BUILD/solidity-0.8.19/redhat-linux-build/include -I/builddir/build/BUILD/solidity-0.8.19 -O2 -flto=auto -ffat-lto-objects -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-U_FORTIFY_SOURCE,-D_FORTIFY_SOURCE=3 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1  -m64  -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer -fuse-ld=gold -O3 -DNDEBUG -std=c++17 -fstack-protector-strong -Wimplicit-fallthrough -fmacro-prefix-map=/builddir/build/BUILD/solidity-0.8.19=/solidity -Wpessimizing-move -Wredundant-move -Wall -Wextra -Werror -pedantic -Wmissing-declarations -Wno-unknown-pragmas -Wsign-conversion -Wconversion -Wextra-semi -Wduplicated-cond -Wlogical-op -fdiagnostics-color -MD -MT libevmasm/CMakeFiles/evmasm.dir/LinkerObject.cpp.o -MF CMakeFiles/evmasm.dir/LinkerObject.cpp.o.d -o CMakeFiles/evmasm.dir/LinkerObject.cpp.o -c /builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp\r\nIn file included from /usr/include/c++/13/map:62,\r\n                 from /builddir/build/BUILD/solidity-0.8.19/libsolutil/Common.h:47,\r\n                 from /builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.h:25,\r\n                 from /builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp:23:\r\nIn member function 'std::_Rb_tree<unsigned long, std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<unsigned long>, std::allocator<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::swap(std::_Rb_tree<unsigned long, std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<unsigned long>, std::allocator<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >&)',\r\n    inlined from 'std::map<unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<unsigned long>, std::allocator<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::swap(std::map<unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<unsigned long>, std::allocator<std::pair<unsigned long const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >&)' at /usr/include/c++/13/bits/stl_map.h:1172:18,\r\n    inlined from 'solidity::evmasm::LinkerObject::link(std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, solidity::util::FixedHash<20u>, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, solidity::util::FixedHash<20u> > > > const&)' at /builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp:47:21:\r\n/usr/include/c++/13/bits/stl_tree.h:2092:36: error: storing the address of local variable 'remainingRefs' in '_187->_M_parent' [-Werror=dangling-pointer=]\r\n 2092 |           __t._M_root()->_M_parent = __t._M_end();\r\n      |           ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~\r\n/builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp: In member function 'solidity::evmasm::LinkerObject::link(std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, solidity::util::FixedHash<20u>, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, solidity::util::FixedHash<20u> > > > const&)':\r\n/builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp:41:39: note: 'remainingRefs' declared here\r\n   41 |         std::map<size_t, std::string> remainingRefs;\r\n      |                                       ^~~~~~~~~~~~~\r\n/builddir/build/BUILD/solidity-0.8.19/libevmasm/LinkerObject.cpp:41:39: note: 'MEM[(struct _Rb_tree_node_base * &)&remainingRefs + 16]' declared here\r\ncc1plus: all warnings being treated as errors\r\ngmake[2]: *** [libevmasm/CMakeFiles/evmasm.dir/build.make:261: libevmasm/CMakeFiles/evmasm.dir/LinkerObject.cpp.o] Error 1\r\ngmake[2]: *** Waiting for unfinished jobs....\r\ngmake[2]: Leaving directory '/builddir/build/BUILD/solidity-0.8.19/redhat-linux-build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:355: libevmasm/CMakeFiles/evmasm.dir/all] Error 2\r\ngmake[1]: Leaving directory '/builddir/build/BUILD/solidity-0.8.19/redhat-linux-build'\r\ngmake: *** [Makefile:139: all] Error 2\r\nerror: Bad exit status from /var/tmp/rpm-tmp.w99A0o (%build)\r\n\r\n```\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14108/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14108/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1505098861",
    "html_url": "https://github.com/ethereum/solidity/issues/14108#issuecomment-1505098861",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14108",
    "id": 1505098861,
    "node_id": "IC_kwDOAm_5kc5Ztfxt",
    "user": {
      "login": "lemenkov",
      "id": 41835,
      "node_id": "MDQ6VXNlcjQxODM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/41835?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lemenkov",
      "html_url": "https://github.com/lemenkov",
      "followers_url": "https://api.github.com/users/lemenkov/followers",
      "following_url": "https://api.github.com/users/lemenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/lemenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lemenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lemenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/lemenkov/orgs",
      "repos_url": "https://api.github.com/users/lemenkov/repos",
      "events_url": "https://api.github.com/users/lemenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lemenkov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-12T11:20:17Z",
    "updated_at": "2023-04-12T11:20:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "[builder-live.log.gz](https://github.com/ethereum/solidity/files/11210720/builder-live.log.gz)\r\n\r\n(Attaching build log mentioned above just in case)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1505098861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/825",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/825/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/825/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/825/events",
  "html_url": "https://github.com/ethereum/solidity/issues/825",
  "id": 169643656,
  "node_id": "MDU6SXNzdWUxNjk2NDM2NTY=",
  "number": 825,
  "title": "bool results can equal to true even when function calls throw",
  "user": {
    "login": "balboah",
    "id": 294690,
    "node_id": "MDQ6VXNlcjI5NDY5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/294690?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/balboah",
    "html_url": "https://github.com/balboah",
    "followers_url": "https://api.github.com/users/balboah/followers",
    "following_url": "https://api.github.com/users/balboah/following{/other_user}",
    "gists_url": "https://api.github.com/users/balboah/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/balboah/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/balboah/subscriptions",
    "organizations_url": "https://api.github.com/users/balboah/orgs",
    "repos_url": "https://api.github.com/users/balboah/repos",
    "events_url": "https://api.github.com/users/balboah/events{/privacy}",
    "received_events_url": "https://api.github.com/users/balboah/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2016-08-05T16:19:10Z",
  "updated_at": "2023-07-30T22:18:43Z",
  "closed_at": "2016-08-10T11:19:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "in this example:\n\n```\ncontract priced {\n    address public tokenContractAddress;\n\n    modifier costs(uint256 amount) {\n        Token tc = Token(tokenContractAddress);\n        bool result = tc.transfer();\n        if (result == true) _\n    }\n}\n\ncontract Token {\n    function transfer() returns (bool success) {\n        throw;\n    }\n}\n\ncontract Foo is priced {\n    uint public called;\n\n    function Foo(address tokenContract) {\n        tokenContract = 0;\n    }\n\n    function bar() costs(1) {\n        called++;\n    }\n}\n```\n\nWhen tokenContractAddress is 0, we will always have a true result in the priced modifier, as opposed to what I would expect.\n\nThis happened to me where I incorrectly set the tokenContract instead of tokenContractAddress.\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/825/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/825/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237917347",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-237917347",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 237917347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxNzM0Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:51:05Z",
    "updated_at": "2016-08-05T17:56:53Z",
    "author_association": "MEMBER",
    "body": "Well, you're invoking `transfer()`on a contract (`0`) which does not have any code. Thus, the contract `0` does not throw. Nothing strange about this. EDIT: I agree it's strange that it returns `true`\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237917347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237937200",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-237937200",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 237937200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkzNzIwMA==",
    "user": {
      "login": "Denton-L",
      "id": 9620836,
      "node_id": "MDQ6VXNlcjk2MjA4MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9620836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Denton-L",
      "html_url": "https://github.com/Denton-L",
      "followers_url": "https://api.github.com/users/Denton-L/followers",
      "following_url": "https://api.github.com/users/Denton-L/following{/other_user}",
      "gists_url": "https://api.github.com/users/Denton-L/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Denton-L/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Denton-L/subscriptions",
      "organizations_url": "https://api.github.com/users/Denton-L/orgs",
      "repos_url": "https://api.github.com/users/Denton-L/repos",
      "events_url": "https://api.github.com/users/Denton-L/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Denton-L/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T19:09:08Z",
    "updated_at": "2016-08-05T19:09:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't know what's going on but I have additional information to provide:\n\nTake the following set of contracts:\n\n```\ncontract A {\n    B b = B(address(0));\n\n    function caller() returns (uint) {\n        return b.dummy();\n    }\n\n    function methodSignature() constant returns (bytes4) {\n        return bytes4(sha3(\"dummy()\"));\n    }\n}\n\ncontract B {\n    function dummy() returns (uint) {\n        throw;\n    }\n}\n```\n\nCalling `caller()` seems to consistently return `0x32e43a1100000000000000000000000000000000000000000000000000000000`. The first four bytes of this are equal to the return value of `methodSignature()` (the method signature of `dummy()`). For some reason, it is returning the method signature.\n\nHere is what I suspect is happening, though I could be wrong though because I don't know the internals of the EVM too well.\n\nWhen `caller()` calls `dummy()`, it has to push the method signature onto the stack. Since `B`'s code is all zeros (since it hasn't been initialised), when it tries to execute, it'll hit `0x00` which corresponds to the `STOP` opcode. When it \"returns\", the method signature will still be on the stack, because it hasn't been cleared by  call to `dummy()`, so `caller()` will read that as the return value.\n\nOf course, in your case, any non-zero value, such as the method signature, will be `true`.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237937200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237942872",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-237942872",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 237942872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzk0Mjg3Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T19:35:07Z",
    "updated_at": "2016-08-05T19:40:33Z",
    "author_association": "MEMBER",
    "body": "Some details are wrong, but I think you're on the right track. \n\nSo when doing a `call`, the evm gets two sets of \"pointers\". The first being [memory in offset, memory in size], which in points to a memory location containing the `calldata` (method signature). And then there's [memory out offset, memory out size]. And that's where the EVM will write the return values. And if there is no return value, the EVM will not touch the [memout - memout+memoutsz] area, leaving it _as is_ . \n\nSo, I guess that Solidity compiler defaults to reusing the `mem_in` - area for output. Which is economically sound (less memory area used == less gas consumed) but becomes very fragile, since the return values depend on the method signature. Fun quirk, actually quite deadly.  \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237942872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237944240",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-237944240",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 237944240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzk0NDI0MA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T19:41:37Z",
    "updated_at": "2016-08-05T19:41:37Z",
    "author_association": "MEMBER",
    "body": "I think I've raised the same issue a while ago: https://github.com/ethereum/solidity/issues/520\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237944240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237988628",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-237988628",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 237988628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzk4ODYyOA==",
    "user": {
      "login": "nmushegian",
      "id": 924397,
      "node_id": "MDQ6VXNlcjkyNDM5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/924397?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmushegian",
      "html_url": "https://github.com/nmushegian",
      "followers_url": "https://api.github.com/users/nmushegian/followers",
      "following_url": "https://api.github.com/users/nmushegian/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmushegian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmushegian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmushegian/subscriptions",
      "organizations_url": "https://api.github.com/users/nmushegian/orgs",
      "repos_url": "https://api.github.com/users/nmushegian/repos",
      "events_url": "https://api.github.com/users/nmushegian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmushegian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T23:27:57Z",
    "updated_at": "2016-08-05T23:27:57Z",
    "author_association": "NONE",
    "body": "When you call empty code it doesn't throw, so you get garbage. See: https://github.com/nexusdev/dappsys/blob/develop/contracts/lang/fallback_tests.sol\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/237988628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238013126",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-238013126",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 238013126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODAxMzEyNg==",
    "user": {
      "login": "balboah",
      "id": 294690,
      "node_id": "MDQ6VXNlcjI5NDY5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/294690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/balboah",
      "html_url": "https://github.com/balboah",
      "followers_url": "https://api.github.com/users/balboah/followers",
      "following_url": "https://api.github.com/users/balboah/following{/other_user}",
      "gists_url": "https://api.github.com/users/balboah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/balboah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/balboah/subscriptions",
      "organizations_url": "https://api.github.com/users/balboah/orgs",
      "repos_url": "https://api.github.com/users/balboah/repos",
      "events_url": "https://api.github.com/users/balboah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/balboah/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-06T08:42:13Z",
    "updated_at": "2016-08-06T08:42:13Z",
    "author_association": "NONE",
    "body": "Yes I realized that I didn't initialize it properly and thus didn't get a `throw`. But I really don't think an uninitialized contract should be able to return something that can be interpreted as true, or being able to change the default value of a variable. It must be a big source of hard to track bugs and a security concern to many.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238013126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238838034",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-238838034",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 238838034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODgzODAzNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-10T11:19:33Z",
    "updated_at": "2016-08-10T11:19:33Z",
    "author_association": "MEMBER",
    "body": "Fixed as far as it is fixable in https://github.com/ethereum/solidity/pull/839\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238838034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238842599",
    "html_url": "https://github.com/ethereum/solidity/issues/825#issuecomment-238842599",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/825",
    "id": 238842599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODg0MjU5OQ==",
    "user": {
      "login": "balboah",
      "id": 294690,
      "node_id": "MDQ6VXNlcjI5NDY5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/294690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/balboah",
      "html_url": "https://github.com/balboah",
      "followers_url": "https://api.github.com/users/balboah/followers",
      "following_url": "https://api.github.com/users/balboah/following{/other_user}",
      "gists_url": "https://api.github.com/users/balboah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/balboah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/balboah/subscriptions",
      "organizations_url": "https://api.github.com/users/balboah/orgs",
      "repos_url": "https://api.github.com/users/balboah/repos",
      "events_url": "https://api.github.com/users/balboah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/balboah/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-10T11:44:02Z",
    "updated_at": "2016-08-10T11:44:02Z",
    "author_association": "NONE",
    "body": "that was quick! 👍 \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/238842599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

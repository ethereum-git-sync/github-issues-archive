{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12829",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12829/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12829/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12829/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12829",
  "id": 1175904836,
  "node_id": "I_kwDOAm_5kc5GFuJE",
  "number": 12829,
  "title": "Use immutable in pure function",
  "user": {
    "login": "fulldecent",
    "id": 382183,
    "node_id": "MDQ6VXNlcjM4MjE4Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/382183?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fulldecent",
    "html_url": "https://github.com/fulldecent",
    "followers_url": "https://api.github.com/users/fulldecent/followers",
    "following_url": "https://api.github.com/users/fulldecent/following{/other_user}",
    "gists_url": "https://api.github.com/users/fulldecent/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fulldecent/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fulldecent/subscriptions",
    "organizations_url": "https://api.github.com/users/fulldecent/orgs",
    "repos_url": "https://api.github.com/users/fulldecent/repos",
    "events_url": "https://api.github.com/users/fulldecent/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fulldecent/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-03-21T20:27:02Z",
  "updated_at": "2022-04-04T08:36:09Z",
  "closed_at": "2022-03-22T14:17:35Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\n`immutable` is defined as:\r\n\r\n> The contract creation code generated by the compiler will modify the contractâ€™s runtime code before it is returned by replacing all references to immutables by the values assigned to the them. \r\n>\r\n> https://docs.soliditylang.org/en/v0.8.13/contracts.html?highlight=immutable#immutable\r\n\r\nSo I was expecting this to work since it does not access state:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.9.0;\r\n\r\ncontract Ballot {\r\n    uint256 immutable count;\r\n    constructor() {\r\n        count = 5;\r\n    }\r\n    function getCount() external pure returns(uint256) {\r\n        return count;\r\n    }\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12829/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12829/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1075240314",
    "html_url": "https://github.com/ethereum/solidity/issues/12829#issuecomment-1075240314",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12829",
    "id": 1075240314,
    "node_id": "IC_kwDOAm_5kc5AFt16",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-22T14:17:35Z",
    "updated_at": "2022-03-22T14:17:35Z",
    "author_association": "MEMBER",
    "body": "Duplicate of https://github.com/ethereum/solidity/issues/9554 - it works if you write `uint immutable count = 4`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1075240314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1075320611",
    "html_url": "https://github.com/ethereum/solidity/issues/12829#issuecomment-1075320611",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12829",
    "id": 1075320611,
    "node_id": "IC_kwDOAm_5kc5AGBcj",
    "user": {
      "login": "fulldecent",
      "id": 382183,
      "node_id": "MDQ6VXNlcjM4MjE4Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/382183?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fulldecent",
      "html_url": "https://github.com/fulldecent",
      "followers_url": "https://api.github.com/users/fulldecent/followers",
      "following_url": "https://api.github.com/users/fulldecent/following{/other_user}",
      "gists_url": "https://api.github.com/users/fulldecent/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fulldecent/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fulldecent/subscriptions",
      "organizations_url": "https://api.github.com/users/fulldecent/orgs",
      "repos_url": "https://api.github.com/users/fulldecent/repos",
      "events_url": "https://api.github.com/users/fulldecent/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fulldecent/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-22T15:23:59Z",
    "updated_at": "2022-03-22T15:23:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "I do not consider this a duplicate.\r\n\r\nPassing in the variables in the constructor will result in the variables (immutable) getting written to the bytecode. And so that function should be able to be pure.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1075320611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087273314",
    "html_url": "https://github.com/ethereum/solidity/issues/12829#issuecomment-1087273314",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12829",
    "id": 1087273314,
    "node_id": "IC_kwDOAm_5kc5Aznli",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-04T08:36:09Z",
    "updated_at": "2022-04-04T08:36:09Z",
    "author_association": "MEMBER",
    "body": "It's in a sense a duplicate of https://github.com/ethereum/solidity/issues/8153, though - ``pure`` is still in limbo between the stronger \"can be compile-time evaluated\" and the weaker mere \"does not read from storage\"...\r\nIn the past I argued for strengthen it to the former, which would mean the case at hand is not pure. However, in the meantime I'd also be fine to weaken it to the latter (in which case the example in this issue would indeed become pure) and either make \"can be compile-time evaluated\" merely an implicit analysis result or add new explicit syntax for it...\r\nBut in general, it seems we're stuck on a definite decision on this, so we should probably should do *something* about it...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1087273314/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

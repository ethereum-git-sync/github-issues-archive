{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10301/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10301/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10301/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10301",
  "id": 743160001,
  "node_id": "MDU6SXNzdWU3NDMxNjAwMDE=",
  "number": 10301,
  "title": "Type deduction of  multi dimensional uint Arrays defined in storage",
  "user": {
    "login": "johhonn",
    "id": 35551051,
    "node_id": "MDQ6VXNlcjM1NTUxMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35551051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/johhonn",
    "html_url": "https://github.com/johhonn",
    "followers_url": "https://api.github.com/users/johhonn/followers",
    "following_url": "https://api.github.com/users/johhonn/following{/other_user}",
    "gists_url": "https://api.github.com/users/johhonn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/johhonn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/johhonn/subscriptions",
    "organizations_url": "https://api.github.com/users/johhonn/orgs",
    "repos_url": "https://api.github.com/users/johhonn/repos",
    "events_url": "https://api.github.com/users/johhonn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/johhonn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-11-15T01:49:52Z",
  "updated_at": "2021-01-12T13:28:48Z",
  "closed_at": "2021-01-12T13:28:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nError:\"TypeError: Unable to deduce common type for array elements.\"\r\nWhen defining multidimensional arrays in storage a difference in the max values of a given element triggers a type deduction error. If all elements of one sub array are less than 8  bits and one or more elments are above 8 bits in another sub array an error is thrown even though both elements are of type uint256[].\r\n\r\n## Environment\r\n\r\nRemix IDE, Solidity 0.7.4 +commit, compiler default\r\n\r\n## Steps to Reproduce\r\n\r\n```solidity\r\ncontract TEST {  \r\n    \r\n   uint256[5][] TEST=[[100,150,100,0,60],[257,50,80,0,3]];\r\n    constructor() public {       \r\n    }\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10301/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10301/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728387769",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-728387769",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 728387769,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODM4Nzc2OQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T23:17:18Z",
    "updated_at": "2020-11-16T23:20:06Z",
    "author_association": "MEMBER",
    "body": "Yeah, looks like a bug to me (or at least an undocumented omission) because the docs say that [there must be a common type for all elements are convertible to](https://docs.soliditylang.org/en/v0.7.4/types.html#array-literals) and this is clearly the case here. `[100,150,100,0,60]` (of type `uint8[5]`) is implicitly convertible to `uint16[5]` (the type of `[257,50,80,0,3]`). I think the compiler should be able to deduce that.\r\n\r\nI checked earlier versions and this behavior goes back as far as 0.4.24, maybe even earlier.\r\n\r\nAlso, this is not just for storage. Memory arrays behave that way too.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728387769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728438368",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-728438368",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 728438368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODQzODM2OA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T23:51:27Z",
    "updated_at": "2020-11-16T23:51:27Z",
    "author_association": "MEMBER",
    "body": "I think this is even an FAQ: You have to specify a \"proper\" type for at least one element of an inline array of literal numbers. The reason is that there is no common type between two different literal numbers - none of them can be converted to the other. Furthermore, I think it is correct to not assign allow such arrays without an explicit type.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728438368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728439953",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-728439953",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 728439953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODQzOTk1Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T23:52:25Z",
    "updated_at": "2020-11-16T23:52:25Z",
    "author_association": "MEMBER",
    "body": "I think the sentence `In the example below, the type of [1, 2, 3] is uint8[3] memory. ` is the documentation is wrong and should be adjusted.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728439953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/730317329",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-730317329",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 730317329,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDMxNzMyOQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T11:40:23Z",
    "updated_at": "2020-11-19T11:40:52Z",
    "author_association": "MEMBER",
    "body": "> The reason is that there is no common type between two different literal numbers - none of them can be converted to the other. \r\n\r\nIf that's the case, why does the code below work? None of these causes a compilation error. As long as the literal is in the right range, it appears to be deduced to be `uint16`:\r\n``` solidity\r\ncontract C {\r\n    uint256[5][] a = [[uint16(100), 150, 100, 0, 60], [257, 50, 80, 0, 3]];\r\n    uint256[5][] b = [[uint16(100), 150, 100, 0, 60], [uint16(257), 50, 80, 0, 3]];\r\n    uint256[5][] c = [[1000, 150, 100, 0, 60], [257, 50, 80, 0, 3]];\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/730317329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/730432001",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-730432001",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 730432001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDQzMjAwMQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T15:00:17Z",
    "updated_at": "2020-11-19T15:00:17Z",
    "author_association": "MEMBER",
    "body": "Ah, ok, so the problem seems to be that the inner arrays have different types",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/730432001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/746188671",
    "html_url": "https://github.com/ethereum/solidity/issues/10301#issuecomment-746188671",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10301",
    "id": 746188671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NjE4ODY3MQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T12:07:05Z",
    "updated_at": "2020-12-16T12:07:05Z",
    "author_association": "MEMBER",
    "body": "Is this considered a bug? Just a missing feature (which we may or may not want)? Or a lack of good error reporting?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/746188671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

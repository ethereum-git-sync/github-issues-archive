{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3156",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3156/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3156/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3156/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3156",
  "id": 269541517,
  "node_id": "MDU6SXNzdWUyNjk1NDE1MTc=",
  "number": 3156,
  "title": "grammar.txt: missing rule ExpressionList or IdentifierList",
  "user": {
    "login": "walter-weinmann",
    "id": 1956149,
    "node_id": "MDQ6VXNlcjE5NTYxNDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1956149?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/walter-weinmann",
    "html_url": "https://github.com/walter-weinmann",
    "followers_url": "https://api.github.com/users/walter-weinmann/followers",
    "following_url": "https://api.github.com/users/walter-weinmann/following{/other_user}",
    "gists_url": "https://api.github.com/users/walter-weinmann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/walter-weinmann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/walter-weinmann/subscriptions",
    "organizations_url": "https://api.github.com/users/walter-weinmann/orgs",
    "repos_url": "https://api.github.com/users/walter-weinmann/repos",
    "events_url": "https://api.github.com/users/walter-weinmann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/walter-weinmann/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-10-30T10:03:18Z",
  "updated_at": "2017-11-22T02:22:39Z",
  "closed_at": "2017-11-22T02:22:39Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "(I am currently trying to verify my Solidity LALR Parser project [syparse](https://github.com/walter-weinmann/syparse) with the examples in the [Solidity  documentation](https://github.com/ethereum/solidity/tree/develop/docs).)\r\n\r\nThe following example is taken from chapter `Assignment (Destructuring Assignments and Returning Multiple Values)` in document `control-structure.rst`:\r\n```\r\n    pragma solidity ^0.4.0;\r\n    contract C {\r\n        uint[] data;\r\n        function f() returns (uint, bool, uint) {\r\n            return (7, true, 2);\r\n        }\r\n        function g() {\r\n            // Declares and assigns the variables. Specifying the type explicitly is not possible.\r\n            var (x, b, y) = f();\r\n            // Assigns to a pre-existing variable.\r\n            (x, y) = (2, 7);\r\n            // Common trick to swap values -- does not work for non-value storage types.\r\n            (x, y) = (y, x);\r\n            // Components can be left out (also for variable declarations).\r\n            // If the tuple ends in an empty component,\r\n            // the rest of the values are discarded.\r\n            (data.length,) = f(); // Sets the length to 7\r\n            // The same can be done on the left side.\r\n            (,data[3]) = f(); // Sets data[3] to 2\r\n            // Components can only be left out at the left-hand-side of assignments, with\r\n            // one exception:\r\n            (x,) = (1,);\r\n            // (1,) is the only way to specify a 1-component tuple, because (1) is\r\n            // equivalent to 1.\r\n        }\r\n    }\r\n```\r\nRound brackets including leading or trailing commas are only allowed with an `IdentifierList`:\r\n`IdentifierList = '(' ( Identifier? ',' )* Identifier? ')'`\r\nHence the following expressions are not covered by `grammar.txt`:\r\n```\r\n            (data.length,) = f(); // Sets the length to 7\r\n\r\n            (,data[3]) = f(); // Sets data[3] to 2\r\n\r\n            (x,) = (1,);\r\n```\r\n",
  "closed_by": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3156/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3156/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340406856",
    "html_url": "https://github.com/ethereum/solidity/issues/3156#issuecomment-340406856",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3156",
    "id": 340406856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQwNjg1Ng==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:41:13Z",
    "updated_at": "2017-10-30T10:41:13Z",
    "author_association": "MEMBER",
    "body": "It seems that leading comma is covered ((`Identifier? ',')*`), but trailing one isn't.\r\n\r\nI think the rule should be\r\n```\r\n'(' ( Identifier? ','?)+ ')'\r\n```\r\n\r\nif `+` (meaning at least once) is not available then:\r\n```\r\n'(' ( Identifier? ',' )* (Identifier ','?)? ')'\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340406856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340408240",
    "html_url": "https://github.com/ethereum/solidity/issues/3156#issuecomment-340408240",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3156",
    "id": 340408240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQwODI0MA==",
    "user": {
      "login": "walter-weinmann",
      "id": 1956149,
      "node_id": "MDQ6VXNlcjE5NTYxNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1956149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/walter-weinmann",
      "html_url": "https://github.com/walter-weinmann",
      "followers_url": "https://api.github.com/users/walter-weinmann/followers",
      "following_url": "https://api.github.com/users/walter-weinmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/walter-weinmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/walter-weinmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/walter-weinmann/subscriptions",
      "organizations_url": "https://api.github.com/users/walter-weinmann/orgs",
      "repos_url": "https://api.github.com/users/walter-weinmann/repos",
      "events_url": "https://api.github.com/users/walter-weinmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/walter-weinmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:47:26Z",
    "updated_at": "2017-10-30T10:47:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "In my  opinion leading and trailing commas in an `IdentifierList `are covered, but here the problems are:\r\n\r\n1. `data.length` is not an Identifier \r\n2. `date[3]` is not an Identifier\r\n3. it should be `var (x,) = (1,);`\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340408240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340410508",
    "html_url": "https://github.com/ethereum/solidity/issues/3156#issuecomment-340410508",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3156",
    "id": 340410508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQxMDUwOA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:57:52Z",
    "updated_at": "2017-10-30T10:57:52Z",
    "author_association": "MEMBER",
    "body": "Sorry, you are correct, the grammar expression seems to be ok.\r\n\r\n1. and 2. it actually takes an expression (which must be valid as an lvalue) and not an identifier\r\n3. is fine, because `x` is already declared in the first expression of the function (`var (x,b,y)`)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340410508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340414414",
    "html_url": "https://github.com/ethereum/solidity/issues/3156#issuecomment-340414414",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3156",
    "id": 340414414,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQxNDQxNA==",
    "user": {
      "login": "walter-weinmann",
      "id": 1956149,
      "node_id": "MDQ6VXNlcjE5NTYxNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1956149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/walter-weinmann",
      "html_url": "https://github.com/walter-weinmann",
      "followers_url": "https://api.github.com/users/walter-weinmann/followers",
      "following_url": "https://api.github.com/users/walter-weinmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/walter-weinmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/walter-weinmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/walter-weinmann/subscriptions",
      "organizations_url": "https://api.github.com/users/walter-weinmann/orgs",
      "repos_url": "https://api.github.com/users/walter-weinmann/repos",
      "events_url": "https://api.github.com/users/walter-weinmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/walter-weinmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T11:15:30Z",
    "updated_at": "2017-10-30T11:15:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "The only rule which allows leading or trailing commas in a round bracket is\r\n`IdentifierList = '(' ( Identifier? ',' )* Identifier? ')'`\r\nNow `IdentifierList` is only allowed in rule `VariableDefinition`:\r\n`VariableDefinition = ('var' IdentifierList | VariableDeclaration) ( '=' Expression )?`\r\nBut then the VariableDefinition has to start with the keyword `var`.\r\n\r\nMy guess was that the three statements should all be of `VariableDefinition` type - but I think they are violating the defined rules in `grammar.txt`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/340414414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9482/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9482/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9482/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9482",
  "id": 664044914,
  "node_id": "MDU6SXNzdWU2NjQwNDQ5MTQ=",
  "number": 9482,
  "title": "Parsing of NatSpec documentation results in unexpected tags/docs.",
  "user": {
    "login": "dddejan",
    "id": 1482564,
    "node_id": "MDQ6VXNlcjE0ODI1NjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1482564?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dddejan",
    "html_url": "https://github.com/dddejan",
    "followers_url": "https://api.github.com/users/dddejan/followers",
    "following_url": "https://api.github.com/users/dddejan/following{/other_user}",
    "gists_url": "https://api.github.com/users/dddejan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dddejan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dddejan/subscriptions",
    "organizations_url": "https://api.github.com/users/dddejan/orgs",
    "repos_url": "https://api.github.com/users/dddejan/repos",
    "events_url": "https://api.github.com/users/dddejan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dddejan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-07-22T20:56:10Z",
  "updated_at": "2020-10-01T14:56:28Z",
  "closed_at": "2020-10-01T14:56:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI am not really sure what to expect from NatSpec parsing. \r\n\r\nComing from doxygen world, for the following doc\r\n\r\n```solidity\r\n/**\r\n * @dev Line 1\r\n *      Line 2.\r\n *\r\n * Line 3.\r\n *\r\n * 1. More docs\r\n *    @notice hey hey\r\n *\r\n * 2. Even more docs\r\n *    @notice hey hey hey\r\n */\r\n```\r\n\r\nI would expect to get tags:\r\n\r\n1. @dev: Line1\\nLine2\r\n2. @notice: hey hey\r\n3. @notice hey hey hey\r\n\r\nThe current compile gives strange results (see below).\r\n\r\nHaving a good understanding of NatSpec is important for us since our tool `solc-verify` parses contract specification from the comments.\r\n\r\nIt could be that this is expected behavior. In which case, it would be great if you could clarify a bit how the tags/docs are extracted.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.6.8+commit.0bbfe453.Darwin.appleclang\r\n\r\n## Steps to Reproduce\r\n\r\nTest.sol\r\n\r\n```solidity\r\npragma solidity >=0.5.0;\r\n\r\n/**\r\n * @dev Line 1\r\n *      Line 2.\r\n *\r\n * Line 3.\r\n *\r\n * 1. More docs\r\n *    @notice hey hey\r\n *\r\n * 2. Even more docs\r\n *    @notice hey hey hey\r\n */\r\ncontract Test {}\r\n```\r\n\r\nRunning \r\n\r\n```console\r\n$ solc Test.sol --combined-json devdoc,userdoc | ruby -r json -e 'jj JSON.parse gets'\r\nWarning: SPDX license identifier not provided in source file. Before publishing, consider adding a comment containing \"SPDX-License-Identifier: <SPDX-License>\" to each source file. Use \"SPDX-License-Identifier: UNLICENSED\" for non-open-source code. Please see https://spdx.org for more information.\r\n--> Test.sol\r\n\r\n{\r\n  \"contracts\": {\r\n    \"Test.sol:Test\": {\r\n      \"devdoc\": \"{\\\"details\\\":\\\"Line 1     Line 2. * Line 3. * 1. More docs\\\",\\\"methods\\\":{}}\",\r\n      \"userdoc\": \"{\\\"methods\\\":{},\\\"notice\\\":\\\"hey hey * 2. Even more docshey hey hey\\\"}\"\r\n    }\r\n  },\r\n  \"version\": \"0.6.8+commit.0bbfe453.Darwin.appleclang\"\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9482/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9482/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/662717866",
    "html_url": "https://github.com/ethereum/solidity/issues/9482#issuecomment-662717866",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
    "id": 662717866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MjcxNzg2Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-22T21:56:36Z",
    "updated_at": "2020-07-22T21:56:36Z",
    "author_association": "MEMBER",
    "body": "This is indeed weird, thanks for reporting!\r\n\r\nSince `@notice` is the summary of the functionality of a function, it might make sense to disallow it for contracts and it might certainly make sense to only allow a single `@notice` tag.\r\n\r\nYou mentioned that you parse a contract's specification from the tags. In that case, you might profit from custom tags, don't you? It would be great if you could add your thoughts to https://github.com/ethereum/solidity/issues/8802 !",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/662717866/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/681958616",
    "html_url": "https://github.com/ethereum/solidity/issues/9482#issuecomment-681958616",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
    "id": 681958616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTk1ODYxNg==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T13:45:34Z",
    "updated_at": "2020-08-27T13:45:34Z",
    "author_association": "MEMBER",
    "body": "There used to be a bug in the NatSpec parser which caused problems with empty lines (i.e., lines with just `*`.) This was fixed in https://github.com/ethereum/solidity/pull/8800, i.e., solidity version 0.6.9\r\n\r\nCurrently this is what the NatSpec for your contract looks like:\r\n```\r\n\r\nDeveloper Documentation\r\n{\r\n  \"details\": \"Line 1      Line 2. Line 3. 1. More docs\",\r\n  \"kind\": \"dev\",\r\n  \"methods\": {},\r\n  \"version\": 1\r\n}\r\nUser Documentation\r\n{\r\n  \"kind\": \"user\",\r\n  \"methods\": {},\r\n  \"notice\": \"hey hey 2. Even more docshey hey hey\",\r\n  \"version\": 1\r\n}\r\n```\r\n\r\nThe NatSpec parser is very rudimentary and doesn't clean up extra white spaces. A quick fix would be to remove more than one whitespaces after the parsing. There are issues asking for improving NatSpec parsing: https://github.com/ethereum/solidity/issues/8247, https://github.com/ethereum/solidity/issues/1617\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/681958616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/683874821",
    "html_url": "https://github.com/ethereum/solidity/issues/9482#issuecomment-683874821",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
    "id": 683874821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4Mzg3NDgyMQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-31T16:06:56Z",
    "updated_at": "2020-08-31T16:06:56Z",
    "author_association": "MEMBER",
    "body": "@dddejan I think there are multiple problems reported here. In your initial example, where would you say `Line 3` is assigned to?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/683874821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/684878468",
    "html_url": "https://github.com/ethereum/solidity/issues/9482#issuecomment-684878468",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
    "id": 684878468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDg3ODQ2OA==",
    "user": {
      "login": "dddejan",
      "id": 1482564,
      "node_id": "MDQ6VXNlcjE0ODI1NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1482564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dddejan",
      "html_url": "https://github.com/dddejan",
      "followers_url": "https://api.github.com/users/dddejan/followers",
      "following_url": "https://api.github.com/users/dddejan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dddejan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dddejan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dddejan/subscriptions",
      "organizations_url": "https://api.github.com/users/dddejan/orgs",
      "repos_url": "https://api.github.com/users/dddejan/repos",
      "events_url": "https://api.github.com/users/dddejan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dddejan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-01T14:03:58Z",
    "updated_at": "2020-09-01T14:03:58Z",
    "author_association": "NONE",
    "body": "> @dddejan I think there are multiple problems reported here. In your initial example, where would you say `Line 3` is assigned to?\r\n\r\nIntuitively, I was thinking that a blank line (ignoring the leading `*`) is a separator so it wouldn't be assigned to any tag. My intuition seems to be wrong though, I just looked up the [javadoc spec](https://docs.oracle.com/javase/9/docs/specs/doc-comment-spec.html) and it says: `Each block tag has associated text, which includes any text following the tag up to, but not including, either the next block tag, or the end of the documentation comment. This associated text can span multiple lines.`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/684878468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/702193041",
    "html_url": "https://github.com/ethereum/solidity/issues/9482#issuecomment-702193041",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9482",
    "id": 702193041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjE5MzA0MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T14:56:28Z",
    "updated_at": "2020-10-01T14:56:28Z",
    "author_association": "MEMBER",
    "body": "I actually don't think anymore that this is a bug. Please feel free to re-open.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/702193041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

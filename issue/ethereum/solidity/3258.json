{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3258/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3258/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3258/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3258",
  "id": 277831687,
  "node_id": "MDU6SXNzdWUyNzc4MzE2ODc=",
  "number": 3258,
  "title": "Warn when using `return(p, s)` assembly in non external functions.",
  "user": {
    "login": "3esmit",
    "id": 224810,
    "node_id": "MDQ6VXNlcjIyNDgxMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/3esmit",
    "html_url": "https://github.com/3esmit",
    "followers_url": "https://api.github.com/users/3esmit/followers",
    "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
    "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
    "organizations_url": "https://api.github.com/users/3esmit/orgs",
    "repos_url": "https://api.github.com/users/3esmit/repos",
    "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/3esmit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-11-29T17:00:10Z",
  "updated_at": "2017-11-30T01:15:20Z",
  "closed_at": "2017-11-30T01:15:20Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "When using assembly return it ends the call at the moment encounter this assembly return, so this type of return should be used carefully as its not as a regular solidity return (which ends the internal call), this one ends the whole call to the contract at that moment.\r\n\r\nExample:\r\n\r\n```\r\npragma solidity ^0.4.10;\r\n\r\n\r\ncontract SystemA {\r\n\r\n    event Test(bool);\r\n\r\n    function testA() public {\r\n        Test(TestReturns());\r\n    }\r\n    \r\n    function TestReturns() public constant returns(bool) {\r\n        assembly { \r\n            return(0,0)\r\n        }\r\n\r\n    }\r\n    \r\n}   \r\n``` \r\n\r\ncalling testA() will never fire the event Test.",
  "closed_by": {
    "login": "3esmit",
    "id": 224810,
    "node_id": "MDQ6VXNlcjIyNDgxMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/3esmit",
    "html_url": "https://github.com/3esmit",
    "followers_url": "https://api.github.com/users/3esmit/followers",
    "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
    "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
    "organizations_url": "https://api.github.com/users/3esmit/orgs",
    "repos_url": "https://api.github.com/users/3esmit/repos",
    "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/3esmit/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3258/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3258/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347928713",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-347928713",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 347928713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzkyODcxMw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T17:08:53Z",
    "updated_at": "2017-11-29T17:08:53Z",
    "author_association": "MEMBER",
    "body": "While this is a good suggestion, such a warning could give a false impression of safety.\r\n\r\nAssembly can do just about anything and there are many things that are not checked about assembly code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347928713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347979198",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-347979198",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 347979198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk3OTE5OA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T20:02:13Z",
    "updated_at": "2017-11-29T20:02:13Z",
    "author_association": "MEMBER",
    "body": "The same applies to `require`, `assert`, `revert`, `throw` and `selfdestruct` in non-assembly.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347979198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347990079",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-347990079",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 347990079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5MDA3OQ==",
    "user": {
      "login": "3esmit",
      "id": 224810,
      "node_id": "MDQ6VXNlcjIyNDgxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3esmit",
      "html_url": "https://github.com/3esmit",
      "followers_url": "https://api.github.com/users/3esmit/followers",
      "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
      "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
      "organizations_url": "https://api.github.com/users/3esmit/orgs",
      "repos_url": "https://api.github.com/users/3esmit/repos",
      "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3esmit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T20:43:31Z",
    "updated_at": "2017-11-29T20:43:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "This case is different. Most developers, specially the ones not aware of behavior of `assembly { return(p,s) } ` may assume that this return will return at internal function level, in the example is easy for make this misunderstand of behavior. \r\nI think that should be added some kind of warning for this case, maybe at \"deep analysis\", specially at \"Low level calls: Semantics maybe unclear\", only if the function using `return(p,s)` is not an external function.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347990079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347990832",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-347990832",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 347990832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5MDgzMg==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T20:46:18Z",
    "updated_at": "2017-11-29T20:46:18Z",
    "author_association": "MEMBER",
    "body": "`assembly` should only be used by those who have a very good understanding about the language. Since there is no way to disable warnings in the compiler, you'd need to add this feature to the static analyzer in Remix.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347990832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347992827",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-347992827",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 347992827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5MjgyNw==",
    "user": {
      "login": "3esmit",
      "id": 224810,
      "node_id": "MDQ6VXNlcjIyNDgxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3esmit",
      "html_url": "https://github.com/3esmit",
      "followers_url": "https://api.github.com/users/3esmit/followers",
      "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
      "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
      "organizations_url": "https://api.github.com/users/3esmit/orgs",
      "repos_url": "https://api.github.com/users/3esmit/repos",
      "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3esmit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T20:53:42Z",
    "updated_at": "2017-11-29T20:57:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree that this should go to static analizer. \r\nBTW, Paritytech team did not noticed this, look:\r\nhttps://github.com/paritytech/contracts/blob/657da22245dcfe0fe1cccc58ee8cd86924d65cdd/validator_contracts/interfaces/RelaySet.sol#L56\r\n\r\nThis function callls `getValidators()`, and passes the result of the function to an event called `FinalizeChange` but this function is using `return(p,s)`  so it will end execution there.\r\nhttps://github.com/paritytech/contracts/blob/657da22245dcfe0fe1cccc58ee8cd86924d65cdd/validator_contracts/interfaces/RelaySet.sol#L59-L69\r\n\r\nPerhaps we need another type of assembly return, return2(p,s) that does not end call but returns at internal call scope?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/347992827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348004105",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-348004105",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 348004105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODAwNDEwNQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T21:36:06Z",
    "updated_at": "2017-11-29T21:36:52Z",
    "author_association": "MEMBER",
    "body": "The \"another type of assembly return\" is assigning to the return variables directly from assembly.\r\n\r\nInstead of `returndatacopy` + `return` it should write directly to the array: `returndatacopy(output_addresses, 0, returndatasize)` where `returns (address[])` is named as `output_addresses`. (assuming returndatacopy's first parameter is the output memory offset).\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348004105/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348051132",
    "html_url": "https://github.com/ethereum/solidity/issues/3258#issuecomment-348051132",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3258",
    "id": 348051132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODA1MTEzMg==",
    "user": {
      "login": "3esmit",
      "id": 224810,
      "node_id": "MDQ6VXNlcjIyNDgxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3esmit",
      "html_url": "https://github.com/3esmit",
      "followers_url": "https://api.github.com/users/3esmit/followers",
      "following_url": "https://api.github.com/users/3esmit/following{/other_user}",
      "gists_url": "https://api.github.com/users/3esmit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3esmit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3esmit/subscriptions",
      "organizations_url": "https://api.github.com/users/3esmit/orgs",
      "repos_url": "https://api.github.com/users/3esmit/repos",
      "events_url": "https://api.github.com/users/3esmit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3esmit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T01:15:20Z",
    "updated_at": "2017-11-30T01:15:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing issue to be addressed to specific \"static analyzer tool\"",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/348051132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13149/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13149/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13149/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13149",
  "id": 1271970382,
  "node_id": "I_kwDOAm_5kc5L0LpO",
  "number": 13149,
  "title": "Missing custom errors from library assembly in smart contract ABI",
  "user": {
    "login": "k06a",
    "id": 702124,
    "node_id": "MDQ6VXNlcjcwMjEyNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/k06a",
    "html_url": "https://github.com/k06a",
    "followers_url": "https://api.github.com/users/k06a/followers",
    "following_url": "https://api.github.com/users/k06a/following{/other_user}",
    "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
    "organizations_url": "https://api.github.com/users/k06a/orgs",
    "repos_url": "https://api.github.com/users/k06a/repos",
    "events_url": "https://api.github.com/users/k06a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/k06a/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1017612679,
      "node_id": "MDU6TGFiZWwxMDE3NjEyNjc5",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/protocol%20design%20:crystal_ball:",
      "name": "protocol design :crystal_ball:",
      "color": "8af77e",
      "default": false,
      "description": "Potential changes to ABI, meta data, standard JSON"
    },
    {
      "id": 4699440809,
      "node_id": "LA_kwDOAm_5kc8AAAABGBvGqQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/closed%20due%20inactivity",
      "name": "closed due inactivity",
      "color": "91535E",
      "default": false,
      "description": "The issue/PR was automatically closed due to inactivity."
    },
    {
      "id": 4699444681,
      "node_id": "LA_kwDOAm_5kc8AAAABGBvVyQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/stale",
      "name": "stale",
      "color": "BF4801",
      "default": false,
      "description": "The issue/PR was marked as stale because it has been open for too long."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2022-06-15T09:49:12Z",
  "updated_at": "2023-05-09T15:48:03Z",
  "closed_at": "2023-04-21T12:04:00Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSometimes custom errors are not included in the smart contract ABI based on their direct usage in Solidity code.\r\n\r\nThis case works fine:\r\n```solidity\r\ncontract A {\r\n    error Foo();\r\n\r\n    function f() external {\r\n        revert Foo();\r\n    }\r\n}\r\n```\r\n\r\nThis case works fine too:\r\n```solidity\r\ncontract A {\r\n    error Foo();\r\n\r\n    function f() external {\r\n        bytes4 exception = Foo.selector;\r\n        assembly {\r\n            mstore(0, exception)\r\n            revert(0, 4)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut using the same approach in the library does not work properly:\r\n```solidity\r\nlibrary L {\r\n    error Foo();\r\n\r\n    function g() internal {\r\n        bytes4 exception = Foo.selector;\r\n        assembly {\r\n            mstore(0, exception)\r\n            revert(0, 4)\r\n        }\r\n    }\r\n}\r\n\r\ncontract A {\r\n    function f() external {\r\n        L.g();\r\n    }\r\n}\r\n```\r\n\r\n`Foo` error is not included in the smart contract ABI, which I believe is a mistake. What about unconditionally including all libraries' custom errors in ABI?\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.14\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13149/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13149/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1156254185",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1156254185",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1156254185,
    "node_id": "IC_kwDOAm_5kc5E6wnp",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T09:51:27Z",
    "updated_at": "2022-06-15T09:51:27Z",
    "author_association": "MEMBER",
    "body": "Related to https://github.com/ethereum/solidity/pull/10996 and its linked issues.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1156254185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1156935953",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1156935953",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1156935953,
    "node_id": "IC_kwDOAm_5kc5E9XER",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T21:04:49Z",
    "updated_at": "2022-06-15T21:04:49Z",
    "author_association": "MEMBER",
    "body": "This is actually by design - which does not mean we can't change it - but the idea was that the ABI should contain only the events that are actually emitted and errors that are actually used - in addition to all events and errors defined within the contract. For example if you just do `L.Foo;`, i.e. refer to an error (or an event) without actually doing a revert, it won't appear in the ABI either.\r\n\r\nSo I guess we could treat it as a feature request. I can see how it can be useful in your example but it could also be misleading. E.g. you could refer to the selector but use a completely different value in the revert.\r\n\r\n@chriseth Do you think this would be a good change?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1156935953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1380335189",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1380335189",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1380335189,
    "node_id": "IC_kwDOAm_5kc5SRj5V",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-12T13:13:33Z",
    "updated_at": "2023-01-12T13:13:33Z",
    "author_association": "NONE",
    "body": "Mentioned this issue here: https://ethereum.stackexchange.com/a/142809/3032",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1380335189/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1506848887",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1506848887",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1506848887,
    "node_id": "IC_kwDOAm_5kc5Z0LB3",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-04-13T12:04:28Z",
    "updated_at": "2023-04-13T12:04:28Z",
    "author_association": "NONE",
    "body": "This issue has been marked as stale due to inactivity for the last 90 days.\nIt will be automatically closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1506848887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1517719311",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1517719311",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1517719311,
    "node_id": "IC_kwDOAm_5kc5ado8P",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-04-21T12:03:59Z",
    "updated_at": "2023-04-21T12:03:59Z",
    "author_association": "NONE",
    "body": "Hi everyone! This issue has been automatically closed due to inactivity.\nIf you think this issue is still relevant in the latest Solidity version and you have something to [contribute](https://docs.soliditylang.org/en/latest/contributing.html), feel free to reopen.\nHowever, unless the issue is a concrete proposal that can be implemented, we recommend starting a language discussion on the [forum](https://forum.soliditylang.org) instead.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1517719311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534535849",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534535849",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534535849,
    "node_id": "IC_kwDOAm_5kc5bdyip",
    "user": {
      "login": "sebastiantf",
      "id": 36922376,
      "node_id": "MDQ6VXNlcjM2OTIyMzc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36922376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebastiantf",
      "html_url": "https://github.com/sebastiantf",
      "followers_url": "https://api.github.com/users/sebastiantf/followers",
      "following_url": "https://api.github.com/users/sebastiantf/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebastiantf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebastiantf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebastiantf/subscriptions",
      "organizations_url": "https://api.github.com/users/sebastiantf/orgs",
      "repos_url": "https://api.github.com/users/sebastiantf/repos",
      "events_url": "https://api.github.com/users/sebastiantf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebastiantf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T10:45:05Z",
    "updated_at": "2023-05-04T10:54:03Z",
    "author_association": "NONE",
    "body": "I am seeing the same issue with errors defined outside the contract and used within the contract, but within assembly block, both with `CustomError.selector` or the raw selector:\r\n\r\n```solidity\r\n\r\nerror Foo();\r\n\r\ncontract A {\r\n    function f() external {\r\n        bytes4 exception = Foo.selector;\r\n        assembly {\r\n            mstore(0, exception)\r\n            revert(0, 4)\r\n        }\r\n    }\r\n\r\n    function f() external {\r\n        assembly {\r\n            mstore(0, 0xbfb4ebcf) // Foo()\r\n            revert(0, 4)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd declaring the errors within the contract seem to have increased gas usage than having them outside in some cases",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534535849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534825748",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534825748",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534825748,
    "node_id": "IC_kwDOAm_5kc5be5UU",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T13:54:24Z",
    "updated_at": "2023-05-04T13:54:24Z",
    "author_association": "MEMBER",
    "body": "The compiler can't magically guess the intention of inline assembly - if you want the compiler to output the use of an error, you need to emit it by the high-level mechanisms the compiler provides for that, i.e. by a ``revert Foo();``.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534825748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534845828",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534845828",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534845828,
    "node_id": "IC_kwDOAm_5kc5be-OE",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T14:05:41Z",
    "updated_at": "2023-05-04T14:05:41Z",
    "author_association": "NONE",
    "body": "@ekpyron but compiler could detect error selector access:\r\n```\r\nbytes4 exception = Foo.selector;\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534845828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534848500",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534848500",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534848500,
    "node_id": "IC_kwDOAm_5kc5be-30",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T14:07:23Z",
    "updated_at": "2023-05-04T14:07:23Z",
    "author_association": "MEMBER",
    "body": "That's a false positive, though - there is no telling what happens with the selector.\r\nThe interesting question is: why are you emitting these errors in inline assembly in the first place?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534848500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534901106",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534901106",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534901106,
    "node_id": "IC_kwDOAm_5kc5bfLty",
    "user": {
      "login": "sebastiantf",
      "id": 36922376,
      "node_id": "MDQ6VXNlcjM2OTIyMzc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36922376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebastiantf",
      "html_url": "https://github.com/sebastiantf",
      "followers_url": "https://api.github.com/users/sebastiantf/followers",
      "following_url": "https://api.github.com/users/sebastiantf/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebastiantf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebastiantf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebastiantf/subscriptions",
      "organizations_url": "https://api.github.com/users/sebastiantf/orgs",
      "repos_url": "https://api.github.com/users/sebastiantf/repos",
      "events_url": "https://api.github.com/users/sebastiantf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebastiantf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T14:38:55Z",
    "updated_at": "2023-05-04T14:38:55Z",
    "author_association": "NONE",
    "body": "Emitting these errors from inline assembly seem to clock lesser deployment gas than otherwise. \r\nBytecode does seem to change, although its size seem to remain the same",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534901106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534937433",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1534937433",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1534937433,
    "node_id": "IC_kwDOAm_5kc5bfUlZ",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T15:00:25Z",
    "updated_at": "2023-05-04T15:00:25Z",
    "author_association": "MEMBER",
    "body": "Yeah, I'd recommend against micro-optimizing revert cases. Optimized via-IR compilation should be closer to the assembly version - optimized via-IR compilation with a high ``--optimize-runs`` value I'd expect to yield identical cost.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1534937433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535244051",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1535244051",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1535244051,
    "node_id": "IC_kwDOAm_5kc5bgfcT",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T18:46:37Z",
    "updated_at": "2023-05-04T18:46:37Z",
    "author_association": "MEMBER",
    "body": "Ah, sorry, you said deployment gas cost - there is actually indeed an easy optimization we can do for these cases, I'll take a quick look at that. In general, we'd prefer to fix the reason for people resorting to inline assembly and I think we can improve the situation here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535244051/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535528971",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1535528971",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1535528971,
    "node_id": "IC_kwDOAm_5kc5bhlAL",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T23:35:50Z",
    "updated_at": "2023-05-04T23:35:50Z",
    "author_association": "NONE",
    "body": "Sometimes error needs to happen in the middle of assembly block, it’s not related to micro optimizations.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535528971/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535530507",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1535530507",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1535530507,
    "node_id": "IC_kwDOAm_5kc5bhlYL",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T23:38:42Z",
    "updated_at": "2023-05-04T23:43:09Z",
    "author_association": "NONE",
    "body": "@ekpyron regarding reasoning for stepping back to assembly I have latest example: safeBalanceOf written in assembly cost 200 gas less than external call in solidity: https://github.com/1inch/solidity-utils/blob/b51b9348f703f7612fda7573d3cb476bccb34383/contracts/libraries/SafeERC20.sol#L26-L43 (PR https://github.com/1inch/solidity-utils/pull/83)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535530507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535531906",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1535531906",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1535531906,
    "node_id": "IC_kwDOAm_5kc5bhluC",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T23:41:40Z",
    "updated_at": "2023-05-04T23:41:40Z",
    "author_association": "NONE",
    "body": "Same for `ecrecover`, somehow using assembly saves hundreds of gas: https://github.com/1inch/solidity-utils/blob/b51b9348f703f7612fda7573d3cb476bccb34383/contracts/libraries/ECDSA.sol#L21-L40",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1535531906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1540440149",
    "html_url": "https://github.com/ethereum/solidity/issues/13149#issuecomment-1540440149",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13149",
    "id": 1540440149,
    "node_id": "IC_kwDOAm_5kc5b0UBV",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-09T15:48:03Z",
    "updated_at": "2023-05-09T15:48:03Z",
    "author_association": "MEMBER",
    "body": "Yeah, there's multiple things we can do for those cases as well (returning to scratch space for small static return data sizes and some fusing of conditions in the optimizer), but I won't get around to do anything about them in time for tomorrow's planned release - but I'm making a note of those cases and more optimizations we can do in them.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1540440149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

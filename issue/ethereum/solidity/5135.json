{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5135/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5135/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5135/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5135",
  "id": 365902387,
  "node_id": "MDU6SXNzdWUzNjU5MDIzODc=",
  "number": 5135,
  "title": "Source mappings do not point to the correct location",
  "user": {
    "login": "kaisert",
    "id": 6348026,
    "node_id": "MDQ6VXNlcjYzNDgwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6348026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kaisert",
    "html_url": "https://github.com/kaisert",
    "followers_url": "https://api.github.com/users/kaisert/followers",
    "following_url": "https://api.github.com/users/kaisert/following{/other_user}",
    "gists_url": "https://api.github.com/users/kaisert/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kaisert/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kaisert/subscriptions",
    "organizations_url": "https://api.github.com/users/kaisert/orgs",
    "repos_url": "https://api.github.com/users/kaisert/repos",
    "events_url": "https://api.github.com/users/kaisert/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kaisert/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-10-02T13:39:24Z",
  "updated_at": "2019-11-25T16:54:59Z",
  "closed_at": "2019-11-25T16:54:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\nThe source mappings gained through `solc --combined-json srcmap-runtime` does not always give the correct translation from instruction offset to source code. \r\n\r\n## Environment\r\n\r\n- Compiler version: tested with 0.4.25, 0.4.24, 0.4.11, 0.4.18\r\n- Framework/IDE (e.g. Truffle or Remix): tested locally and on remix\r\n- Operating system: linux\r\n\r\n## Steps to Reproduce\r\nMinimal example:\r\n```\r\ncontract c {\r\n    int[] a;\r\n    function f() public {\r\n        a.length = 1;\r\n    } \r\n}\r\n```\r\nWhen checking to which source code offset the SSTORE instructions correspond to, the source mapping indicates the beginning of the contract. Expected would be `a.length = 1`.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5135/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5135/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426280025",
    "html_url": "https://github.com/ethereum/solidity/issues/5135#issuecomment-426280025",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
    "id": 426280025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjI4MDAyNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-02T13:47:30Z",
    "updated_at": "2018-10-02T13:47:30Z",
    "author_association": "MEMBER",
    "body": "Are you talking about the `8:9:-1` part? Note the `-1` at the end which indicates \"unknown file\". The reason behind this is that the source for storing the number is an assembly library routine of the compiler whose code is not part of the initial source code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426280025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426287991",
    "html_url": "https://github.com/ethereum/solidity/issues/5135#issuecomment-426287991",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
    "id": 426287991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjI4Nzk5MQ==",
    "user": {
      "login": "kaisert",
      "id": 6348026,
      "node_id": "MDQ6VXNlcjYzNDgwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6348026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaisert",
      "html_url": "https://github.com/kaisert",
      "followers_url": "https://api.github.com/users/kaisert/followers",
      "following_url": "https://api.github.com/users/kaisert/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaisert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaisert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaisert/subscriptions",
      "organizations_url": "https://api.github.com/users/kaisert/orgs",
      "repos_url": "https://api.github.com/users/kaisert/repos",
      "events_url": "https://api.github.com/users/kaisert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaisert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-02T14:09:32Z",
    "updated_at": "2018-10-02T14:10:10Z",
    "author_association": "NONE",
    "body": "So when compiling the given example, the complete source mapping is \r\n```\r\n0:82:0:-;;;;;;;;;;;;;;;;;;;;;;;;30:49;;8:9:-1;5:2;;;30:1;27;20:12;5:2;30:49:0;;;;;;;71:1;60;:12;;;;;:::i;:::-;;30:49::o;0:82::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o\r\n```\r\n\r\n. I am talking about the `0:82::-` part, which points to the given source file (due to `30:49:0` a few entries before)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426287991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426290240",
    "html_url": "https://github.com/ethereum/solidity/issues/5135#issuecomment-426290240",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
    "id": 426290240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjI5MDI0MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-02T14:15:42Z",
    "updated_at": "2018-10-02T14:15:42Z",
    "author_association": "MEMBER",
    "body": "Ah right, that's a different helper routine, the \"array resize routine\". Since it can be used from multiple points, the closest source map that can be provided is the whole file.\r\n\r\n@yann300 can you give some insights into source map cleanup / filtering that is done in remix for the break points?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426290240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426312820",
    "html_url": "https://github.com/ethereum/solidity/issues/5135#issuecomment-426312820",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
    "id": 426312820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjMxMjgyMA==",
    "user": {
      "login": "kaisert",
      "id": 6348026,
      "node_id": "MDQ6VXNlcjYzNDgwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6348026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaisert",
      "html_url": "https://github.com/kaisert",
      "followers_url": "https://api.github.com/users/kaisert/followers",
      "following_url": "https://api.github.com/users/kaisert/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaisert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaisert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaisert/subscriptions",
      "organizations_url": "https://api.github.com/users/kaisert/orgs",
      "repos_url": "https://api.github.com/users/kaisert/repos",
      "events_url": "https://api.github.com/users/kaisert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaisert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-02T15:14:37Z",
    "updated_at": "2018-10-02T15:14:37Z",
    "author_association": "NONE",
    "body": "So what is the difference between these two helper functions? Or in other words: Why is the first one deemed to be in an unknown file, while the second one references the whole file?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426312820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426968996",
    "html_url": "https://github.com/ethereum/solidity/issues/5135#issuecomment-426968996",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5135",
    "id": 426968996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjk2ODk5Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-04T10:34:59Z",
    "updated_at": "2018-10-04T10:34:59Z",
    "author_association": "MEMBER",
    "body": "The first one is built using yul, the other one uses the old style code generator. The difference is that yul actually is source code, while the second is just a sequence of opcodes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/426968996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

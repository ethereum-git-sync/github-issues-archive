{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14739",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14739/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14739/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14739/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14739",
  "id": 2050293831,
  "node_id": "I_kwDOAm_5kc56NQBH",
  "number": 14739,
  "title": "Cancun Support",
  "user": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4372329032,
      "node_id": "LA_kwDOAm_5kc8AAAABBJxySA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/selected%20for%20development",
      "name": "selected for development",
      "color": "ff8e00",
      "default": false,
      "description": "It's on our short-term development"
    },
    {
      "id": 4438003076,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaNhA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20effort",
      "name": "medium effort",
      "color": "ff7df7",
      "default": false,
      "description": "Default level of effort"
    },
    {
      "id": 4438153180,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjX3A",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/high%20impact",
      "name": "high impact",
      "color": "001dff",
      "default": false,
      "description": "Changes are very prominent and affect users or the project in a major way."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/solidity/milestones/58",
    "html_url": "https://github.com/ethereum/solidity/milestone/58",
    "labels_url": "https://api.github.com/repos/ethereum/solidity/milestones/58/labels",
    "id": 10055790,
    "node_id": "MI_kwDOAm_5kc4AmXBu",
    "number": 58,
    "title": "0.8.24",
    "description": "",
    "creator": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 14,
    "closed_issues": 3,
    "state": "open",
    "created_at": "2023-10-16T13:46:09Z",
    "updated_at": "2023-12-28T10:47:13Z",
    "due_on": "2024-01-15T08:00:00Z",
    "closed_at": null
  },
  "comments": 3,
  "created_at": "2023-12-20T10:42:30Z",
  "updated_at": "2024-01-05T19:05:48Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Prerequisites:\r\n- [ ] Bump [evmc version to 11.0.0](https://github.com/ethereum/evmc/releases/tag/v11.0.0) and evmone to the upcoming 11.0.0 release (promised for Dec 21st  2023)\r\n  Tracked in https://github.com/ethereum/solidity/issues/14744 @nikola-matic\r\n\r\nWe need full support for the [EIPs of Cancun](https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/cancun.md):\r\n\r\n- [ ] [EIP-1153: Transient storage opcodes](https://eips.ethereum.org/EIPS/eip-1153)\r\n  PR: https://github.com/ethereum/solidity/pull/14737 @matheusaaguiar \r\n- [x] [EIP-4788: Beacon block root in the EVM](https://eips.ethereum.org/EIPS/eip-4788)\r\n  TODO: verify if there's anything for us to do here. @r0qs \r\n- [ ] [EIP-4844: Shard Blob Transactions](https://eips.ethereum.org/EIPS/eip-4844)\r\n  Tracked in https://github.com/ethereum/solidity/issues/14740 @r0qs \r\n- [ ] [EIP-5656: MCOPY - Memory copying instruction](https://eips.ethereum.org/EIPS/eip-5656)\r\n  Tracked in https://github.com/ethereum/solidity/issues/14741\r\n- [ ] [EIP-6780: SELFDESTRUCT only in same transaction](https://eips.ethereum.org/EIPS/eip-6780)\r\n  This will mean documentation adjustment, so falls together with https://github.com/ethereum/solidity/issues/13889.\r\n  We should also add the change in behaviour to the deprecation warning.\r\n- [ ] [EIP-7516: BLOBBASEFEE opcode](https://eips.ethereum.org/EIPS/eip-7516)\r\n  Tracked in https://github.com/ethereum/solidity/issues/14742 @nikola-matic \r\n\r\nAdditionally we will need to:\r\n- [ ] Adjust our documentation with sufficent details about Cancun. (https://github.com/ethereum/solidity/pull/14705#pullrequestreview-1756419513 and check if anything else needs to be done)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14739/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14739/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1869821372",
    "html_url": "https://github.com/ethereum/solidity/issues/14739#issuecomment-1869821372",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14739",
    "id": 1869821372,
    "node_id": "IC_kwDOAm_5kc5vczW8",
    "user": {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-26T23:34:35Z",
    "updated_at": "2023-12-26T23:41:08Z",
    "author_association": "MEMBER",
    "body": ">     * [ ]  [EIP-4788: Beacon block root in the EVM](https://eips.ethereum.org/EIPS/eip-4788)\r\n>       TODO: verify if there's anything for us to do here.\r\n\r\nRegarding this item, I did some research, and it appears that the current proposal does not require any changes in the compiler. Instead, it involves modifications to the execution and consensus clients. Although, while reading the EIP I thought that the `parent_beacon_block_root` would be exposed at the language level, but this does not seem to be the case according to the current specification. \r\n\r\nOriginally, the EIP was drafted requiring a new opcode (`BEACON_STATE_ROOT` at `0x4A`, now used by `BLOBBASEFEE`), but it was later modified to incorporate a [\"stateful\" precompile](https://github.com/ethereum/EIPs/commit/d810df00b8aa8f21741a93fd9391e703d69fcd37). More recently, another change was made, the \"stateful\" precompile idea was dropped, and now the EIP proposes the use of what is now referred to as a [\"system contract\"](https://github.com/ethereum/EIPs/commit/46f8d5bc9593f096cd92f66692e115218ec1c633). As per the current specification, the `parent_beacon_block_root` would be passed as calldata to the system contract (which would have the bytecode directly deployed at the given system address), and the execution clients would write to or read from the EVM state through a system transaction. I may have misunderstood something, so it would be helpful if someone else could confirm this as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1869821372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1879099433",
    "html_url": "https://github.com/ethereum/solidity/issues/14739#issuecomment-1879099433",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14739",
    "id": 1879099433,
    "node_id": "IC_kwDOAm_5kc5wAMgp",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-05T18:32:41Z",
    "updated_at": "2024-01-05T18:32:41Z",
    "author_association": "MEMBER",
    "body": "I can confirm @r0qs analysis, there's nothing for us to do there. It's implemented as a system contract and does not add any new opcodes. The fact that EIP-4788 is never mentioned in [evmc 10.1...11 diff](https://github.com/ethereum/evmc/compare/v10.1.1...v11.0.0) (including the changelog) confirms that.\r\n\r\nBTW, thanks for digging into the history of this EIP. Reading it now, I see no mention that it went from opcode, to precompile, to system contract, so that's useful to know.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1879099433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1879135618",
    "html_url": "https://github.com/ethereum/solidity/issues/14739#issuecomment-1879135618",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14739",
    "id": 1879135618,
    "node_id": "IC_kwDOAm_5kc5wAVWC",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-05T19:05:08Z",
    "updated_at": "2024-01-05T19:05:48Z",
    "author_association": "MEMBER",
    "body": "Actually, maybe absence of this in evmc does not really confirm it (e.g. MCOPY does not require any changes there either).\r\n\r\nOn the evmone side the change was done in https://github.com/ethereum/evmone/pull/709. Still, looks like this does not require any special compiler support. The VM automatically executes the system call that updates the circular buffer with block roots before every block. It does not deploy the system contract on its own, but, as far as I understand the EIP, it's not really the responsibility of the VM. Presence of the contract is optional.\r\n\r\nIt might at most affect our testing if we wanted to include contracts that call this system contract. For that I guess we'd have to deploy it when we set up the test environment? That does not seem like something we need right now though.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1879135618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

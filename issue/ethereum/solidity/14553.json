{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14553",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14553/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14553/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14553/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14553",
  "id": 1888212157,
  "node_id": "I_kwDOAm_5kc5wi9S9",
  "number": 14553,
  "title": "solc abi produces invalid internal type \"IERC20\"",
  "user": {
    "login": "sherpya",
    "id": 120074,
    "node_id": "MDQ6VXNlcjEyMDA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/120074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sherpya",
    "html_url": "https://github.com/sherpya",
    "followers_url": "https://api.github.com/users/sherpya/followers",
    "following_url": "https://api.github.com/users/sherpya/following{/other_user}",
    "gists_url": "https://api.github.com/users/sherpya/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sherpya/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sherpya/subscriptions",
    "organizations_url": "https://api.github.com/users/sherpya/orgs",
    "repos_url": "https://api.github.com/users/sherpya/repos",
    "events_url": "https://api.github.com/users/sherpya/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sherpya/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-09-08T19:31:40Z",
  "updated_at": "2023-09-11T11:05:18Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nsolc produces abi with `IERC20` type as per https://docs.soliditylang.org/en/latest/abi-spec.html#types\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.21+commit.d9974bed.Linux.g++\r\n- Target EVM version (as per compiler settings): default\r\n- Framework/IDE (e.g. Truffle or Remix): hardhat\r\n- EVM execution environment / backend / blockchain client: N/A\r\n- Operating system: Linux\r\n\r\n## Steps to Reproduce\r\n\r\noutput abi for https://github.com/sherpya/chainraise/blob/master/contracts/SafeTransfer.sol\r\n\r\nI used:\r\n`solc contracts/SafeTransfer.sol --abi --base-path contracts --include-path node_modules`\r\n\r\n`NATIVE_TOKEN` is defined as\r\n\r\n```solidity\r\nIERC20 public constant NATIVE_TOKEN = IERC20(address(0));\r\n```\r\n\r\nthe getter produces following abi:\r\n```json\r\n{\r\n    \"inputs\": [],\r\n    \"name\": \"NATIVE_TOKEN\",\r\n    \"outputs\": [\r\n        {\r\n            \"internalType\": \"contract IERC20\",\r\n            \"name\": \"\",\r\n            \"type\": \"IERC20\"\r\n        }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n}\r\n```\r\n\r\n`wagmi generate` fails because `IERC20` is not an internal type\r\n\r\nhttps://github.com/wagmi-dev/wagmi/issues/2974\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14553/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14553/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1712723493",
    "html_url": "https://github.com/ethereum/solidity/issues/14553#issuecomment-1712723493",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14553",
    "id": 1712723493,
    "node_id": "IC_kwDOAm_5kc5mFhYl",
    "user": {
      "login": "sherpya",
      "id": 120074,
      "node_id": "MDQ6VXNlcjEyMDA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/120074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sherpya",
      "html_url": "https://github.com/sherpya",
      "followers_url": "https://api.github.com/users/sherpya/followers",
      "following_url": "https://api.github.com/users/sherpya/following{/other_user}",
      "gists_url": "https://api.github.com/users/sherpya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sherpya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sherpya/subscriptions",
      "organizations_url": "https://api.github.com/users/sherpya/orgs",
      "repos_url": "https://api.github.com/users/sherpya/repos",
      "events_url": "https://api.github.com/users/sherpya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sherpya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-10T05:57:28Z",
    "updated_at": "2023-09-11T09:11:46Z",
    "author_association": "NONE",
    "body": "> Hi @sherpya visit the official ETH page to initiate a chat with the support team on the live chat to report your errors for review and for further assistance via ETH Support\r\n\r\nso we got scammers also on github?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1712723493/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1713460476",
    "html_url": "https://github.com/ethereum/solidity/issues/14553#issuecomment-1713460476",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14553",
    "id": 1713460476,
    "node_id": "IC_kwDOAm_5kc5mIVT8",
    "user": {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-11T08:56:12Z",
    "updated_at": "2023-09-11T11:05:18Z",
    "author_association": "MEMBER",
    "body": "Thanks @sherpya for marking the content as spam (I removed the malicious URL from your reply to the scammer, to prevent others from clicking on it by accident). Sadly there are such behavior everywhere.\r\n\r\nAbout the issue that you opened. As far as I know, it is duplicated of a long-standing issue (https://github.com/ethereum/solidity/issues/9278), since the ABI for libraries are different than the one for contracts. There are some information about it here in our documentation: https://docs.soliditylang.org/en/v0.8.21/contracts.html#function-signatures-and-selectors-in-libraries. If you change [SafeTransfer](https://github.com/sherpya/chainraise/blob/master/contracts/SafeTransfer.sol#L12C1-L12C8) to be a contract instead of a library, then it will generate the ABI in the format you are expecting.\r\n\r\nYou can read more about it here: https://github.com/ethereum/solidity/issues/12867 and https://github.com/ethereum/solidity/issues/9278.\r\n\r\nAlso, I just noticed that the main issue was recently closed due inactivity (https://github.com/ethereum/solidity/issues/9278) but I guess we should reopen it. Pinging @cameel and @ekpyron here ;)\r\n\r\nThere are also some related issues in other projects as well: https://github.com/ethers-io/ethers.js/issues/1126 and the way that they \"fixed\" it was hard-coding the underline type, see: https://github.com/ethereum/solidity/issues/9278#issuecomment-718168636\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1713460476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

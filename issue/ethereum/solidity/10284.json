{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10284/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10284/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10284/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10284",
  "id": 742032351,
  "node_id": "MDU6SXNzdWU3NDIwMzIzNTE=",
  "number": 10284,
  "title": "[Docs] Unclear description of valid struct initialization on previous solidity versions",
  "user": {
    "login": "Jaime-Iglesias",
    "id": 22358726,
    "node_id": "MDQ6VXNlcjIyMzU4NzI2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22358726?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Jaime-Iglesias",
    "html_url": "https://github.com/Jaime-Iglesias",
    "followers_url": "https://api.github.com/users/Jaime-Iglesias/followers",
    "following_url": "https://api.github.com/users/Jaime-Iglesias/following{/other_user}",
    "gists_url": "https://api.github.com/users/Jaime-Iglesias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Jaime-Iglesias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Jaime-Iglesias/subscriptions",
    "organizations_url": "https://api.github.com/users/Jaime-Iglesias/orgs",
    "repos_url": "https://api.github.com/users/Jaime-Iglesias/repos",
    "events_url": "https://api.github.com/users/Jaime-Iglesias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Jaime-Iglesias/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 275027668,
      "node_id": "MDU6TGFiZWwyNzUwMjc2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/documentation%20:book:",
      "name": "documentation :book:",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-11-13T00:40:18Z",
  "updated_at": "2020-11-30T10:12:43Z",
  "closed_at": "2020-11-30T10:12:43Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Going through the docs, particulary the struct [section](https://solidity.readthedocs.io/en/v0.7.4/types.html#structs),  there's this particular code snippet:\r\n\r\n```solidity\r\n    function newCampaign(address payable beneficiary, uint goal) public returns (uint campaignID) {\r\n        campaignID = numCampaigns++; // campaignID is return variable\r\n        // We cannot use \"campaigns[campaignID] = Campaign(beneficiary, goal, 0, 0)\"\r\n        // because the RHS creates a memory-struct \"Campaign\" that contains a mapping.\r\n        Campaign storage c = campaigns[campaignID];\r\n        c.beneficiary = beneficiary;\r\n        c.fundingGoal = goal;\r\n    }\r\n```\r\n\r\nThis snippet, **in my interpretation**, hints that a struct cannot be created in-memory if the struct type contains a mapping. This seems reasonable since the next section of the docs, [mapping types](https://solidity.readthedocs.io/en/v0.7.4/types.html#mapping-types),  explictly says that the only data location available for mappings is storage - So basically, adding these two pieces together, I think it's reasonable  for the reader to jump to the following conclusion \"It's not possible to initialize an struct in-memory if the struct type has a mapping\" and the reader could also jump into the conclusion that \"A struct can only be in-memory if all it's underlying member types are allowed to be in-memory\".\r\n\r\nSo far, I think the docs make this very clear.\r\n\r\nMy problem is that there is multiple version of solidity and we can see code in production in many of those versions. I think that, usually, the docs make an extra effort to add notes (which I find very helpful) so the reader is aware of some things that were allowed in the past and are no longer allowed, like seen in the array members [section](https://solidity.readthedocs.io/en/v0.7.4/types.html#array-members).\r\n\r\nSo, getting to the point, I think that adding a **note** to the section explaining that the compiler, in previous versions, omitted the types that were not valid outside of storage to allow in-memory intialization, would be great addition to make seeing old code less confusing; because the following code is valid in `0.6` and `0.5` and IMHO can lead to confusion when reading the latest docs.\r\n\r\n```solidity\r\ncontract Test {\r\n    struct Foo {\r\n        uint256 a;\r\n        mapping(uint => address) b;\r\n    }\r\n    \r\n    Foo public foo;\r\n    \r\n    function createFoo() external {\r\n        Foo memory newFoo = Foo({ a: 1 });\r\n        \r\n        foo = newFoo;\r\n    }\r\n}\r\n```\r\n\r\nApologies if this is not the correct venue to raise this question/problem.",
  "closed_by": {
    "login": "leonardoalt",
    "id": 504195,
    "node_id": "MDQ6VXNlcjUwNDE5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonardoalt",
    "html_url": "https://github.com/leonardoalt",
    "followers_url": "https://api.github.com/users/leonardoalt/followers",
    "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
    "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
    "repos_url": "https://api.github.com/users/leonardoalt/repos",
    "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10284/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10284/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727949887",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-727949887",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 727949887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzk0OTg4Nw==",
    "user": {
      "login": "cszcli",
      "id": 32010967,
      "node_id": "MDQ6VXNlcjMyMDEwOTY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/32010967?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cszcli",
      "html_url": "https://github.com/cszcli",
      "followers_url": "https://api.github.com/users/cszcli/followers",
      "following_url": "https://api.github.com/users/cszcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/cszcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cszcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cszcli/subscriptions",
      "organizations_url": "https://api.github.com/users/cszcli/orgs",
      "repos_url": "https://api.github.com/users/cszcli/repos",
      "events_url": "https://api.github.com/users/cszcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cszcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T12:32:21Z",
    "updated_at": "2020-11-16T12:32:21Z",
    "author_association": "NONE",
    "body": "Hi Jamie,\r\n\r\nYour conclusion is great! But I have a question about the sentence \"because the RHS creates a memory-struct\".\r\nWould you please tell me what is RHS short for?\r\n\r\nBest Regards!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727949887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727953415",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-727953415",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 727953415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzk1MzQxNQ==",
    "user": {
      "login": "Jaime-Iglesias",
      "id": 22358726,
      "node_id": "MDQ6VXNlcjIyMzU4NzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22358726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jaime-Iglesias",
      "html_url": "https://github.com/Jaime-Iglesias",
      "followers_url": "https://api.github.com/users/Jaime-Iglesias/followers",
      "following_url": "https://api.github.com/users/Jaime-Iglesias/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jaime-Iglesias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jaime-Iglesias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jaime-Iglesias/subscriptions",
      "organizations_url": "https://api.github.com/users/Jaime-Iglesias/orgs",
      "repos_url": "https://api.github.com/users/Jaime-Iglesias/repos",
      "events_url": "https://api.github.com/users/Jaime-Iglesias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jaime-Iglesias/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T12:39:53Z",
    "updated_at": "2020-11-16T12:39:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hi Jamie,\r\n> \r\n> Your conclusion is great! But I have a question about the sentence \"because the RHS creates a memory-struct\".\r\n> Would you please tell me what is RHS short for?\r\n> \r\n> Best Regards!\r\n\r\nHey, I think the docs mean \"Right Hand Side\" As in referring to the right part of the statement `campaigns[campaignID] = Campaign(beneficiary, goal, 0, 0)` i.e They are saying that `Campaign(beneficiary, goal, 0, 0)` is creating a struct in-memory.\r\n\r\nThis is my interpretation though, maybe RHS is short for something else (hard to tell).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727953415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727956126",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-727956126",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 727956126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzk1NjEyNg==",
    "user": {
      "login": "cszcli",
      "id": 32010967,
      "node_id": "MDQ6VXNlcjMyMDEwOTY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/32010967?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cszcli",
      "html_url": "https://github.com/cszcli",
      "followers_url": "https://api.github.com/users/cszcli/followers",
      "following_url": "https://api.github.com/users/cszcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/cszcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cszcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cszcli/subscriptions",
      "organizations_url": "https://api.github.com/users/cszcli/orgs",
      "repos_url": "https://api.github.com/users/cszcli/repos",
      "events_url": "https://api.github.com/users/cszcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cszcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T12:45:54Z",
    "updated_at": "2020-11-16T12:45:54Z",
    "author_association": "NONE",
    "body": "Hi Jamie,\r\n\r\nI think that's correct. Thanks very much for your help!\r\n\r\nBest Regards!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/727956126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728408106",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-728408106",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 728408106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODQwODEwNg==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-16T23:33:01Z",
    "updated_at": "2020-11-16T23:33:29Z",
    "author_association": "MEMBER",
    "body": "> This is my interpretation though, maybe RHS is short for something else (hard to tell).\r\n\r\nYes. that's exactly what it means. \"right hand side\" and \"left hand side\" are used a lot in some contexts so RHS and LHS are common shortcuts. But I see that it's used only once on that page. I think it would be fine expand it to avoid confusing people unfamiliar with it.\r\n\r\n> I think that, usually, the docs make an extra effort to add notes (which I find very helpful) so the reader is aware of some things that were allowed in the past and are no longer allowed\r\n\r\nI agree. It would be a useful piece of information here.\r\n\r\n@Jaime-Iglesias Would you like to submit a PR with that change? Good contributions to the docs are always welcome even if they're just small tweaks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/728408106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/729021935",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-729021935",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 729021935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTAyMTkzNQ==",
    "user": {
      "login": "Jaime-Iglesias",
      "id": 22358726,
      "node_id": "MDQ6VXNlcjIyMzU4NzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22358726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jaime-Iglesias",
      "html_url": "https://github.com/Jaime-Iglesias",
      "followers_url": "https://api.github.com/users/Jaime-Iglesias/followers",
      "following_url": "https://api.github.com/users/Jaime-Iglesias/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jaime-Iglesias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jaime-Iglesias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jaime-Iglesias/subscriptions",
      "organizations_url": "https://api.github.com/users/Jaime-Iglesias/orgs",
      "repos_url": "https://api.github.com/users/Jaime-Iglesias/repos",
      "events_url": "https://api.github.com/users/Jaime-Iglesias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jaime-Iglesias/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T15:54:28Z",
    "updated_at": "2020-11-17T15:54:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @Jaime-Iglesias Would you like to submit a PR with that change? Good contributions to the docs are always welcome even if they're just small tweaks.\r\n\r\n@cameel Sure, I think I will have some spare time this weekend - Is there any sort of \"guide\" that I should take a look before contributing ? Like, how the docs are generated, etc...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/729021935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/729224294",
    "html_url": "https://github.com/ethereum/solidity/issues/10284#issuecomment-729224294",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10284",
    "id": 729224294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTIyNDI5NA==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T21:27:13Z",
    "updated_at": "2020-11-17T21:27:13Z",
    "author_association": "MEMBER",
    "body": "@Jaime-Iglesias Great! There's a [short style guide in the docs](https://docs.soliditylang.org/en/latest/contributing.html#documentation-style-guide).\r\n\r\nTo build/re-build it you just run `scripts/docs.sh`. You of course need to check out a copy of the repo and it might be a good idea to create a virtualenv for the libraries if you don't want to install them globally. Here's a snippet I'm usually using to build it myself (on Linux):\r\n```bash\r\ngit clone git@github.com:ethereum/solidity.git\r\ncd solidity/\r\n\r\npython -m venv /tmp/solidity-docs-virtualenv/\r\nsource /tmp/solidity-docs-virtualenv/bin/activate\r\n\r\nscripts/docs.sh\r\nxdg-open docs/_build/html/index.html\r\n```\r\nThis assumes you have Python 3 and git installed in your system.\r\n\r\nAfter changing anything, you just need to rerun the `scripts/docs.sh` command to see the rendered changes.\r\n\r\nThe markup used in the docs [reStructuredText](https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/729224294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

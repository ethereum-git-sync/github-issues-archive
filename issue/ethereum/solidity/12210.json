{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12210",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12210/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12210/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12210/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12210",
  "id": 1037986877,
  "node_id": "I_kwDOAm_5kc493mw9",
  "number": 12210,
  "title": "A slight difference in gas when deploying smart contracts",
  "user": {
    "login": "hpumengzhao",
    "id": 36286293,
    "node_id": "MDQ6VXNlcjM2Mjg2Mjkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/36286293?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hpumengzhao",
    "html_url": "https://github.com/hpumengzhao",
    "followers_url": "https://api.github.com/users/hpumengzhao/followers",
    "following_url": "https://api.github.com/users/hpumengzhao/following{/other_user}",
    "gists_url": "https://api.github.com/users/hpumengzhao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hpumengzhao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hpumengzhao/subscriptions",
    "organizations_url": "https://api.github.com/users/hpumengzhao/orgs",
    "repos_url": "https://api.github.com/users/hpumengzhao/repos",
    "events_url": "https://api.github.com/users/hpumengzhao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hpumengzhao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-10-28T01:12:49Z",
  "updated_at": "2021-11-01T00:59:57Z",
  "closed_at": "2021-11-01T00:59:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When I deploy the smart contract below, the gas is 99621(On the remix, the version of the compiler is 0.8.9, with optimization-runs=200).\r\n```solidity\r\npragma solidity ^0.8.0;\r\ncontract SC1{\r\n    uint[100] a;\r\n    function test(uint x)  public returns(uint){\r\n        return a[1]+x;\r\n    }   \r\n}\r\n```\r\nAfter I changed it to:\r\n```solidity\r\npragma solidity ^0.8.0;\r\ncontract SC1{\r\n    uint[100] a;\r\n    function test(uint x)  public returns(uint){\r\n        return x+a[1];\r\n    }   \r\n}\r\n```\r\nthe gas at deployment is 99405.\r\n\r\nAfter comparing their assembly code, I found that it was because of the different order in which the expression parameters were put on the stack.\r\n\r\nIn the same way, I tried the following two smart contractsï¼š\r\n```solidity\r\n// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity ^0.8.0;\r\ncontract SC1{\r\n    uint[100] a;\r\n    function test()  public returns(uint){\r\n        return a[1]+a[2]*a[3];\r\n    }   \r\n}\r\n```\r\n```solidity\r\npragma solidity ^0.8.0;\r\ncontract SC2{\r\n    uint[100] a;\r\n    function test()  public returns(uint){\r\n        return a[2]*a[3]+a[1];\r\n    }   \r\n}\r\n```\r\nThe result is that the deployment gas cost of SC1 is 216 less than the deployment gas cost of SC2.\r\n\r\nI am very curious what are the rules for converting expressions into assembly code.\r\n\r\nI would be very grateful if anyone can answer my confusion:)!",
  "closed_by": {
    "login": "hpumengzhao",
    "id": 36286293,
    "node_id": "MDQ6VXNlcjM2Mjg2Mjkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/36286293?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hpumengzhao",
    "html_url": "https://github.com/hpumengzhao",
    "followers_url": "https://api.github.com/users/hpumengzhao/followers",
    "following_url": "https://api.github.com/users/hpumengzhao/following{/other_user}",
    "gists_url": "https://api.github.com/users/hpumengzhao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hpumengzhao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hpumengzhao/subscriptions",
    "organizations_url": "https://api.github.com/users/hpumengzhao/orgs",
    "repos_url": "https://api.github.com/users/hpumengzhao/repos",
    "events_url": "https://api.github.com/users/hpumengzhao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hpumengzhao/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12210/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 1,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12210/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

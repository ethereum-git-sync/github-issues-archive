{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/8615/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/8615/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/8615/events",
  "html_url": "https://github.com/ethereum/solidity/issues/8615",
  "id": 595034883,
  "node_id": "MDU6SXNzdWU1OTUwMzQ4ODM=",
  "number": 8615,
  "title": "Bug in `abi.decode`",
  "user": {
    "login": "sobolev-igor",
    "id": 44194758,
    "node_id": "MDQ6VXNlcjQ0MTk0NzU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/44194758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sobolev-igor",
    "html_url": "https://github.com/sobolev-igor",
    "followers_url": "https://api.github.com/users/sobolev-igor/followers",
    "following_url": "https://api.github.com/users/sobolev-igor/following{/other_user}",
    "gists_url": "https://api.github.com/users/sobolev-igor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sobolev-igor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sobolev-igor/subscriptions",
    "organizations_url": "https://api.github.com/users/sobolev-igor/orgs",
    "repos_url": "https://api.github.com/users/sobolev-igor/repos",
    "events_url": "https://api.github.com/users/sobolev-igor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sobolev-igor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-04-06T11:29:04Z",
  "updated_at": "2020-04-06T14:21:19Z",
  "closed_at": "2020-04-06T12:53:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\nI'm trying to verify signature and parse it using `abi.decode`, not assembly. However, `abi.decode` fails for no reason.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.6.4\r\n- Target EVM version (as per compiler settings): istanbul\r\n- Framework/IDE (e.g. Truffle or Remix): any\r\n- EVM execution environment / backend / blockchain client: ganache-cli, remix EVM\r\n- Operating system: macOS\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\ncontract Test {\r\n    function getUserFromSignature(\r\n        bytes memory signature\r\n    )\r\n        public\r\n        returns (address)\r\n    {\r\n        require(signature.length == 65, \"Wrong signature length!\");\r\n        bytes32 r;\r\n        bytes32 s;\r\n        uint8 v;\r\n        (r, s, v) = abi.decode(signature, (bytes32, bytes32, uint8));\r\n    }\r\n}\r\n```\r\n\r\nI'm calling function with `\"0x49023da0a11914ff15521e582a11c38150d5d361266161ca481ee3fc55cc5f7c16d77c35a8d4d037bfebda015c8194d09fb85d8f863bf16d9b7b8273fa8f8e851c\"`.\r\nI've tried to use `byte`, `bytes1` instead `uint8`, but it fails anyway.\r\nI've tried to debug tx, seems like for some reason it compares `signature.length` with `0x60`, not with `0x41` and thus fails.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/8615/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/8615/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609759482",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609759482",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609759482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTc1OTQ4Mg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T12:19:14Z",
    "updated_at": "2020-04-06T12:19:14Z",
    "author_association": "MEMBER",
    "body": "ABI encoding always pads to multiple of 32 bytes, that's why it fails.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609759482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609773199",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609773199",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609773199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTc3MzE5OQ==",
    "user": {
      "login": "sobolev-igor",
      "id": 44194758,
      "node_id": "MDQ6VXNlcjQ0MTk0NzU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/44194758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sobolev-igor",
      "html_url": "https://github.com/sobolev-igor",
      "followers_url": "https://api.github.com/users/sobolev-igor/followers",
      "following_url": "https://api.github.com/users/sobolev-igor/following{/other_user}",
      "gists_url": "https://api.github.com/users/sobolev-igor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sobolev-igor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sobolev-igor/subscriptions",
      "organizations_url": "https://api.github.com/users/sobolev-igor/orgs",
      "repos_url": "https://api.github.com/users/sobolev-igor/repos",
      "events_url": "https://api.github.com/users/sobolev-igor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sobolev-igor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T12:48:24Z",
    "updated_at": "2020-04-06T12:48:56Z",
    "author_association": "NONE",
    "body": "Hi, @chriseth! Thanks for the quick response.\r\n\r\nBut if i do `abi.decode(signature, (bytes32, bytes32, bytes32));` it fail also, so the only option is to add 31 bytes of zeroes when calling the function (i.e. to set `signature.length` to 96) and this does not seem the good option...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609773199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609775444",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609775444",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609775444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTc3NTQ0NA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T12:53:01Z",
    "updated_at": "2020-04-06T12:53:01Z",
    "author_association": "MEMBER",
    "body": "I'm sorry, but `abi.decode` is meant for abi decoding, not for unpacking binary data. \r\n\r\nThis is a perfect task for inline assembly and a random internet search resulted in the following, for example: https://gist.github.com/BjornvdLaan/e41d292339bbdebb831d0b976e1804e8",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609775444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609776988",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609776988",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609776988,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTc3Njk4OA==",
    "user": {
      "login": "sobolev-igor",
      "id": 44194758,
      "node_id": "MDQ6VXNlcjQ0MTk0NzU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/44194758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sobolev-igor",
      "html_url": "https://github.com/sobolev-igor",
      "followers_url": "https://api.github.com/users/sobolev-igor/followers",
      "following_url": "https://api.github.com/users/sobolev-igor/following{/other_user}",
      "gists_url": "https://api.github.com/users/sobolev-igor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sobolev-igor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sobolev-igor/subscriptions",
      "organizations_url": "https://api.github.com/users/sobolev-igor/orgs",
      "repos_url": "https://api.github.com/users/sobolev-igor/repos",
      "events_url": "https://api.github.com/users/sobolev-igor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sobolev-igor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T12:56:14Z",
    "updated_at": "2020-04-06T12:56:14Z",
    "author_association": "NONE",
    "body": "I've seen the assembly solution, but I do not want to use assembly in my code (but seems like I'll have to).\r\n\r\nThanks anyway!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609776988/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609778293",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609778293",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609778293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTc3ODI5Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T12:58:54Z",
    "updated_at": "2020-04-06T12:58:54Z",
    "author_association": "MEMBER",
    "body": "Assembly is really not that scary and dangerous as most people think. I actually am of the opinion that it is better to have reviewable user-supplied assembly routines than some compiler-internal routines that are much harder to find.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609778293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609825198",
    "html_url": "https://github.com/ethereum/solidity/issues/8615#issuecomment-609825198",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8615",
    "id": 609825198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTgyNTE5OA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-06T14:21:19Z",
    "updated_at": "2020-04-06T14:21:19Z",
    "author_association": "MEMBER",
    "body": "> Assembly is really not that scary and dangerous as most people think.\r\n\r\nThis statement was more true when it was introduced. As we transition more over to Yul, the less scary it becomes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/609825198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

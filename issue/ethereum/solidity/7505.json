{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/7505/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/7505/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/7505/events",
  "html_url": "https://github.com/ethereum/solidity/issues/7505",
  "id": 501435602,
  "node_id": "MDU6SXNzdWU1MDE0MzU2MDI=",
  "number": 7505,
  "title": "Nicely format strings in Yul IR generation",
  "user": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 717596767,
      "node_id": "MDU6TGFiZWw3MTc1OTY3Njc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "006b75",
      "default": true,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2019-10-02T11:37:55Z",
  "updated_at": "2019-11-26T14:51:55Z",
  "closed_at": "2019-11-26T14:51:55Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "When generating the Yul intermediate code of Solidity programs, strings are always translated to hex numbers. This prevents readability of IR code. Because of that, the code generator should detect if a string can be represented in printable ascii chars (for safety) and use that instead.\r\n\r\n## How to implement:\r\n\r\nAdd a function `std::string formatAsStringOrNumber(std::string const& _value)` in `libdevcore/CommonData.h` that checks if all characters are safe and outputs a quoted string. If there is an unsafe charater, use `\"0x\" + h256(_value, h256::AlignLeft).hex();` as it has been used before (you need to include `FixedHash.h` for that).\r\n\r\nNow use that function in ABIFunctions.cpp:978 (`ABIFunctions::abiEncodingFunctionStringLiteral`) and :993. The same change can be applied to `YulUtilFunctions::conversionFunctionSpecial`.\r\n\r\n## How to test:\r\n\r\nRun `solc --ir` on e.g.\r\n```\r\ncontract c {\r\nfunction f() external pure returns (string memory) { return \"abcabc\"; }\r\n}\r\n```\r\n\r\nIt should not contain `0x6162636162630000000000000000000000000000000000000000000000000000` anymore but `\"abcabc\"` instead.\r\n\r\n## How to add an automated test\r\n\r\nCreate a copy of the directory `test/cmdlineTests/standard_ir_requested` such that `input.json` contains code similar to the one above. Run `./test/cmdlineTests.sh` to update the expectation file.\r\n\r\nYou should additionally create a test inside `test/libsolidity/semanticTests` that ends in\r\n\r\n```\r\n// ====\r\n// compileViaYul: also\r\n// ----\r\n// f()\r\n```\r\n\r\nThis test should check that the contract still works as expected. Please also try string literals longer than 32 bytes.\r\n\r\n\r\nobsoletes https://github.com/ethereum/solidity/issues/7495",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/7505/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/7505/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/537671239",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-537671239",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 537671239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzY3MTIzOQ==",
    "user": {
      "login": "secondW4ve",
      "id": 42845039,
      "node_id": "MDQ6VXNlcjQyODQ1MDM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/42845039?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/secondW4ve",
      "html_url": "https://github.com/secondW4ve",
      "followers_url": "https://api.github.com/users/secondW4ve/followers",
      "following_url": "https://api.github.com/users/secondW4ve/following{/other_user}",
      "gists_url": "https://api.github.com/users/secondW4ve/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/secondW4ve/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/secondW4ve/subscriptions",
      "organizations_url": "https://api.github.com/users/secondW4ve/orgs",
      "repos_url": "https://api.github.com/users/secondW4ve/repos",
      "events_url": "https://api.github.com/users/secondW4ve/events{/privacy}",
      "received_events_url": "https://api.github.com/users/secondW4ve/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-02T20:41:04Z",
    "updated_at": "2019-10-02T21:03:09Z",
    "author_association": "NONE",
    "body": "Hi. In what namespace should it be added? In \"dev\" I guess? And also I dont get how to test, could you describe it more detail please?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/537671239/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/538348092",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-538348092",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 538348092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODM0ODA5Mg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-04T10:46:45Z",
    "updated_at": "2019-10-04T10:46:45Z",
    "author_association": "MEMBER",
    "body": "Yes, in `dev`. How to manually test: Run `solc --ir -` and paste the code provided above. If you create a draft pul request, we can guide you through how to add everything required.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/538348092/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/538590054",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-538590054",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 538590054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODU5MDA1NA==",
    "user": {
      "login": "tabathap",
      "id": 43733681,
      "node_id": "MDQ6VXNlcjQzNzMzNjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43733681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tabathap",
      "html_url": "https://github.com/tabathap",
      "followers_url": "https://api.github.com/users/tabathap/followers",
      "following_url": "https://api.github.com/users/tabathap/following{/other_user}",
      "gists_url": "https://api.github.com/users/tabathap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tabathap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tabathap/subscriptions",
      "organizations_url": "https://api.github.com/users/tabathap/orgs",
      "repos_url": "https://api.github.com/users/tabathap/repos",
      "events_url": "https://api.github.com/users/tabathap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tabathap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-04T23:23:40Z",
    "updated_at": "2019-10-04T23:23:40Z",
    "author_association": "NONE",
    "body": "👌",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/538590054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539168864",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-539168864",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 539168864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTE2ODg2NA==",
    "user": {
      "login": "secondW4ve",
      "id": 42845039,
      "node_id": "MDQ6VXNlcjQyODQ1MDM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/42845039?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/secondW4ve",
      "html_url": "https://github.com/secondW4ve",
      "followers_url": "https://api.github.com/users/secondW4ve/followers",
      "following_url": "https://api.github.com/users/secondW4ve/following{/other_user}",
      "gists_url": "https://api.github.com/users/secondW4ve/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/secondW4ve/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/secondW4ve/subscriptions",
      "organizations_url": "https://api.github.com/users/secondW4ve/orgs",
      "repos_url": "https://api.github.com/users/secondW4ve/repos",
      "events_url": "https://api.github.com/users/secondW4ve/events{/privacy}",
      "received_events_url": "https://api.github.com/users/secondW4ve/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-07T19:33:14Z",
    "updated_at": "2019-10-07T19:33:14Z",
    "author_association": "NONE",
    "body": "@chriseth Hi, I have created draft pull reques, please help me handle this if you have time.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539168864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539328507",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-539328507",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 539328507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTMyODUwNw==",
    "user": {
      "login": "jamesthesken",
      "id": 22358037,
      "node_id": "MDQ6VXNlcjIyMzU4MDM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/22358037?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesthesken",
      "html_url": "https://github.com/jamesthesken",
      "followers_url": "https://api.github.com/users/jamesthesken/followers",
      "following_url": "https://api.github.com/users/jamesthesken/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesthesken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesthesken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesthesken/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesthesken/orgs",
      "repos_url": "https://api.github.com/users/jamesthesken/repos",
      "events_url": "https://api.github.com/users/jamesthesken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesthesken/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-08T05:14:12Z",
    "updated_at": "2019-10-08T05:14:12Z",
    "author_association": "NONE",
    "body": "Is this on the `develop` branch?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539328507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539373676",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-539373676",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 539373676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTM3MzY3Ng==",
    "user": {
      "login": "secondW4ve",
      "id": 42845039,
      "node_id": "MDQ6VXNlcjQyODQ1MDM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/42845039?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/secondW4ve",
      "html_url": "https://github.com/secondW4ve",
      "followers_url": "https://api.github.com/users/secondW4ve/followers",
      "following_url": "https://api.github.com/users/secondW4ve/following{/other_user}",
      "gists_url": "https://api.github.com/users/secondW4ve/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/secondW4ve/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/secondW4ve/subscriptions",
      "organizations_url": "https://api.github.com/users/secondW4ve/orgs",
      "repos_url": "https://api.github.com/users/secondW4ve/repos",
      "events_url": "https://api.github.com/users/secondW4ve/events{/privacy}",
      "received_events_url": "https://api.github.com/users/secondW4ve/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-08T07:07:46Z",
    "updated_at": "2019-10-08T07:07:46Z",
    "author_association": "NONE",
    "body": "Yes",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/539373676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/545927342",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-545927342",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 545927342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTkyNzM0Mg==",
    "user": {
      "login": "jazalewski1",
      "id": 52531410,
      "node_id": "MDQ6VXNlcjUyNTMxNDEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/52531410?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jazalewski1",
      "html_url": "https://github.com/jazalewski1",
      "followers_url": "https://api.github.com/users/jazalewski1/followers",
      "following_url": "https://api.github.com/users/jazalewski1/following{/other_user}",
      "gists_url": "https://api.github.com/users/jazalewski1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jazalewski1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jazalewski1/subscriptions",
      "organizations_url": "https://api.github.com/users/jazalewski1/orgs",
      "repos_url": "https://api.github.com/users/jazalewski1/repos",
      "events_url": "https://api.github.com/users/jazalewski1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jazalewski1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-24T13:50:07Z",
    "updated_at": "2019-10-24T13:50:07Z",
    "author_association": "NONE",
    "body": "Hi, is anyone working on this? I am looking for my first PR.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/545927342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/545947305",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-545947305",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 545947305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTk0NzMwNQ==",
    "user": {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-24T14:33:35Z",
    "updated_at": "2019-10-24T14:34:51Z",
    "author_association": "COLLABORATOR",
    "body": "Hey @jazalewski1, @secondW4ve is working on this already and their PR is in progress https://github.com/ethereum/solidity/pull/7522. Is Yul of special interest to you? We might have other tasks that could be nice to get started.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/545947305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/546672148",
    "html_url": "https://github.com/ethereum/solidity/issues/7505#issuecomment-546672148",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7505",
    "id": 546672148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjY3MjE0OA==",
    "user": {
      "login": "jazalewski1",
      "id": 52531410,
      "node_id": "MDQ6VXNlcjUyNTMxNDEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/52531410?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jazalewski1",
      "html_url": "https://github.com/jazalewski1",
      "followers_url": "https://api.github.com/users/jazalewski1/followers",
      "following_url": "https://api.github.com/users/jazalewski1/following{/other_user}",
      "gists_url": "https://api.github.com/users/jazalewski1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jazalewski1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jazalewski1/subscriptions",
      "organizations_url": "https://api.github.com/users/jazalewski1/orgs",
      "repos_url": "https://api.github.com/users/jazalewski1/repos",
      "events_url": "https://api.github.com/users/jazalewski1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jazalewski1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-27T08:22:37Z",
    "updated_at": "2019-10-27T08:22:37Z",
    "author_association": "NONE",
    "body": "@erak Ah sorry, I didn't notice. I will look for other issue, thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/546672148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

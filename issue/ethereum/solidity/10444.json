{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10444",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10444/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10444/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10444/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10444",
  "id": 753667406,
  "node_id": "MDU6SXNzdWU3NTM2Njc0MDY=",
  "number": 10444,
  "title": "[ewasm] testcases seem only to work with RevertString::Default",
  "user": {
    "login": "aarlt",
    "id": 5008794,
    "node_id": "MDQ6VXNlcjUwMDg3OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5008794?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aarlt",
    "html_url": "https://github.com/aarlt",
    "followers_url": "https://api.github.com/users/aarlt/followers",
    "following_url": "https://api.github.com/users/aarlt/following{/other_user}",
    "gists_url": "https://api.github.com/users/aarlt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aarlt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aarlt/subscriptions",
    "organizations_url": "https://api.github.com/users/aarlt/orgs",
    "repos_url": "https://api.github.com/users/aarlt/repos",
    "events_url": "https://api.github.com/users/aarlt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aarlt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2379061831,
      "node_id": "MDU6TGFiZWwyMzc5MDYxODMx",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/wasm",
      "name": "wasm",
      "color": "63ed23",
      "default": false,
      "description": ""
    },
    {
      "id": 4699440809,
      "node_id": "LA_kwDOAm_5kc8AAAABGBvGqQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/closed%20due%20inactivity",
      "name": "closed due inactivity",
      "color": "91535E",
      "default": false,
      "description": "The issue/PR was automatically closed due to inactivity."
    },
    {
      "id": 4699444681,
      "node_id": "LA_kwDOAm_5kc8AAAABGBvVyQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/stale",
      "name": "stale",
      "color": "BF4801",
      "default": false,
      "description": "The issue/PR was marked as stale because it has been open for too long."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-11-30T17:32:34Z",
  "updated_at": "2023-02-05T12:04:44Z",
  "closed_at": "2023-02-05T12:04:44Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "While implementing the support of `--enforce-compile-to-ewasm` #10356 (see https://github.com/ethereum/solidity/pull/10356#discussion_r532742791) it turned out that there is something missing to support test-cases that use revert strings that differ from `RevertString::Default`.\r\n\r\nI didn't investigated this further. I created this issue to don't forget about this.\r\n\r\n```\r\nsemanticTests/revertStrings/short_input_bytes.sol: FAIL\r\n  Contract:\r\n    pragma abicoder               v2;\r\n    contract C {\r\n    \tfunction e(bytes memory a) public pure returns (uint) { return 7; }\r\n    }\r\n    // ====\r\n    // EVMVersion: >=byzantium\r\n    // compileToEwasm: also\r\n    // compileViaYul: also\r\n    // revertStrings: debug\r\n\r\n  Expected result:\r\n  // e(bytes): 0x20, 7 -> FAILURE, 3963877391197344453575983046348115674221700746820753546331534351508065746944, 862718293348820473429344482784628181556388621521298319395315527974912, 0x27414249206465636f64696e673a20696e76616c696420627974652061, 51765758038840874448248112245855622722229435958027532839407121884968680161280, 7879764993205877706498670012939534695854369295326189278\r\n\r\n  Obtained result:\r\n  // e(bytes): 0x20, 7 -> FAILURE, 3963877391197344453575983046348115674221700746820753546331534351508065746944, 862718293348820473429344482784628181556388621521298319395315527974912, 0x27414249206465636f64696e673a20696e76616c696420627974652061, 51765758038840874448248112245855622722229435958027532839407121884968680161280, 26857514009908594198673637516307065083938733454080333298916016612289\r\n  Warning: The call to \"e(bytes)\" returned\r\n  [8,c3,79,a0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,27,41,42,49,20,64,65,63,6f,64,69,6e,67,3a,20,69,6e,76,61,6c,69,64,20,62,79,74,65,20,61]\r\n  [72,72,61,79,20,6c,65,6e,67,74,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,0,0,0,0,0,9c,ba,37,c1,ff,7,9,0,60,93,72,13,fc,7f,0,0,de,62,6e,d,a3,69,0,19]\r\n\r\n  Attention: Updates on the test will apply the detected format displayed.\r\n```\r\n```\r\nsemanticTests/revertStrings/calldata_array_dynamic_invalid.sol: FAIL\r\n  Contract:\r\n    pragma abicoder               v2;\r\n    contract C {\r\n    \tfunction f(uint256[][] calldata a) external returns (uint) {\r\n    \t\treturn 42;\r\n    \t}\r\n    }\r\n    // ====\r\n    // EVMVersion: >=byzantium\r\n    // compileToEwasm: also\r\n    // compileViaYul: also\r\n    // revertStrings: debug\r\n\r\n  Expected result:\r\n  // f(uint256[][]): 0x20, 1 -> FAILURE, 3963877391197344453575983046348115674221700746820753546331534351508065746944, 862718293348820473429344482784628181556388621521298319395315527974912, 0x2b414249206465636f64696e673a20696e76616c69642063616c6c6461, 52639898083992983106342913290719799829523823861698573317707643453664495927296, 705839291290523792873459887657190650735835219328756789280768\r\n\r\n  Obtained result:\r\n  // f(uint256[][]): 0x20, 1 -> FAILURE, 3963877391197344453575983046348115674221700746820753546331534351508065746944, 862718293348820473429344482784628181556388621521298319395315527974912, 0x2b414249206465636f64696e673a20696e76616c69642063616c6c6461, 52639898083992983106342913290719799829523823861698573317707643453664495927296, 26857514011655642856704942381947475400083356999719558281220887412736\r\n  Warning: The call to \"f(uint256[][])\" returned\r\n  [8,c3,79,a0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,2b,41,42,49,20,64,65,63,6f,64,69,6e,67,3a,20,69,6e,76,61,6c,69,64,20,63,61,6c,6c,64,61]\r\n  [74,61,20,61,72,72,61,79,20,73,74,72,69,64,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\r\n  [0,0,0,0,0,7,0,a0,79,52,32,c1,ff,7,9,0,90,3b,2e,13,fc,7f,0,0,a8,5d,dc,d8,7f,b1,4d,b5]\r\n```",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10444/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10444/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736318678",
    "html_url": "https://github.com/ethereum/solidity/issues/10444#issuecomment-736318678",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10444",
    "id": 736318678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNjMxODY3OA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-01T08:48:02Z",
    "updated_at": "2020-12-01T08:48:02Z",
    "author_association": "MEMBER",
    "body": "Maybe `returndatacopy` is not properly implemented? It looks like the result of a 'calldatacopy' to me.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736318678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1417632010",
    "html_url": "https://github.com/ethereum/solidity/issues/10444#issuecomment-1417632010",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10444",
    "id": 1417632010,
    "node_id": "IC_kwDOAm_5kc5Uf1kK",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-02-05T12:04:42Z",
    "updated_at": "2023-02-05T12:04:42Z",
    "author_association": "NONE",
    "body": "Hi everyone! This issue has been closed due to inactivity.\nIf you think this issue is still relevant in the latest Solidity version and you have something to [contribute](https://docs.soliditylang.org/en/latest/contributing.html), feel free to reopen.\nHowever, unless the issue is a concrete proposal that can be implemented, we recommend starting a language discussion on the [forum](https://forum.soliditylang.org) instead.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1417632010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

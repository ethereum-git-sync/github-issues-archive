{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10210",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10210/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10210/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10210/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10210",
  "id": 736974176,
  "node_id": "MDU6SXNzdWU3MzY5NzQxNzY=",
  "number": 10210,
  "title": "Change source location to cover the entire function prototype",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 717596767,
      "node_id": "MDU6TGFiZWw3MTc1OTY3Njc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "006b75",
      "default": true,
      "description": ""
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438157609,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjpKQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20impact",
      "name": "low impact",
      "color": "5d71ff",
      "default": false,
      "description": "Changes are not very noticeable or potential benefits are limited."
    },
    {
      "id": 4438492402,
      "node_id": "LA_kwDOAm_5kc8AAAABCI4E8g",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/nice%20to%20have",
      "name": "nice to have",
      "color": "ffdeb3",
      "default": false,
      "description": "We don’t see a good reason not to have it but won’t go out of our way to implement it."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-11-05T14:20:38Z",
  "updated_at": "2023-02-02T14:26:42Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "From #9607: Change source location to cover the entire function prototype, especially when displayed as a candidate for overload resolution failure.\r\n\r\nExample of unwanted behaviour:\r\n```\r\nNote: Candidate:\r\n   --> src/Game.sol:156:2:\r\n    |\r\n156 |         function checkPattern(int _x, int _y, CrossState[] memory _pattern,\r\n    |  ^ (Relevant source part starts here and spans across multiple lines).\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10210/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10210/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/722411130",
    "html_url": "https://github.com/ethereum/solidity/issues/10210#issuecomment-722411130",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10210",
    "id": 722411130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjQxMTEzMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T14:25:47Z",
    "updated_at": "2020-11-05T14:25:47Z",
    "author_association": "MEMBER",
    "body": "The source location covers the entire function, but the error reported only shows the first line.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/722411130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/722571344",
    "html_url": "https://github.com/ethereum/solidity/issues/10210#issuecomment-722571344",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10210",
    "id": 722571344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjU3MTM0NA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T18:51:28Z",
    "updated_at": "2020-11-05T18:51:35Z",
    "author_association": "MEMBER",
    "body": "I said \"function prototype [..] when displayed as a candidate for overload resolution failure\" and I think that would be a good change. No point displaying the entire function of course :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/722571344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1413830154",
    "html_url": "https://github.com/ethereum/solidity/issues/10210#issuecomment-1413830154",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10210",
    "id": 1413830154,
    "node_id": "IC_kwDOAm_5kc5URVYK",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-02T14:26:41Z",
    "updated_at": "2023-02-02T14:26:41Z",
    "author_association": "MEMBER",
    "body": "Some extra context for someone who will be implementing this.\r\n\r\nThe problem here is that error messages for overloads list potential candidates and for each one point at the whole function (starting from the `function` keyword to the ending `}`) rather than just the function prototype (from `function` to the end of the parameter list). See an example of this in https://github.com/ethereum/solidity/issues/9607#issue-677611250. This means that even if the prototype is short and fits on a single line, we'll see the `(Relevant source part starts here and spans across multiple lines)` bit making it unnecessarily longer.\r\n\r\nThe cause is that we use [`ASTNode::location()`](https://github.com/ethereum/solidity/blob/v0.8.18/libsolidity/ast/AST.h#L112) to get the location and for functions it simply points at the whole function. My suggested solution would be to introduce something like `prototypeLocation()` to [CallableDeclaration](https://github.com/ethereum/solidity/blob/v0.8.18/libsolidity/ast/AST.h#L828) and use that instead.\r\n\r\nI think it should be possible to implement `CallableDeclaration::prototypeLocation()` just by combining existing locations. I.e. by taking the start from `location()` and the end from the location of the parameter list.\r\n\r\nThe code that generates this particular error is here:\r\nhttps://github.com/ethereum/solidity/blob/ddbef8f65092cd09422366881d0fc1dad5d4b64e/libsolidity/analysis/TypeChecker.cpp#L3597-L3615\r\n\r\nBut note that we have a few similar messages for overloading and the issue covers all of them.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1413830154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

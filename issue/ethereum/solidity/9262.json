{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9262",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9262/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9262/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9262/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9262",
  "id": 646140265,
  "node_id": "MDU6SXNzdWU2NDYxNDAyNjU=",
  "number": 9262,
  "title": "Incomplete documentation about compiler metadata",
  "user": {
    "login": "VersusF",
    "id": 31687181,
    "node_id": "MDQ6VXNlcjMxNjg3MTgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/31687181?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/VersusF",
    "html_url": "https://github.com/VersusF",
    "followers_url": "https://api.github.com/users/VersusF/followers",
    "following_url": "https://api.github.com/users/VersusF/following{/other_user}",
    "gists_url": "https://api.github.com/users/VersusF/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/VersusF/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/VersusF/subscriptions",
    "organizations_url": "https://api.github.com/users/VersusF/orgs",
    "repos_url": "https://api.github.com/users/VersusF/repos",
    "events_url": "https://api.github.com/users/VersusF/events{/privacy}",
    "received_events_url": "https://api.github.com/users/VersusF/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-06-26T09:38:11Z",
  "updated_at": "2020-06-29T16:40:23Z",
  "closed_at": "2020-06-29T16:40:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\n- First, many thanks for taking part in the community. We really appreciate that.\r\n- We realize there is a lot of information requested here. We ask only that you do your best to provide as much information as possible so we can better help you.\r\n- Support questions are better asked in one of the following locations:\r\n\t- [Solidity chat](https://gitter.im/ethereum/solidity)\r\n\t- [Stack Overflow](https://ethereum.stackexchange.com/)\r\n- Ensure the issue isn't already reported.\r\n- The issue should be reproducible with the latest solidity version; however, this isn't a hard requirement and being reproducible with an older version is sufficient.\r\n-->\r\n\r\n## Description\r\n\r\nCompiling a contract results is a bytecode with the metadata not matching what declared in the official documentation.\r\n\r\nThis happens with various 0.5.x versions. The bytecode ends with \"0040\" instead of \"0032\" as declared, moreover it differents in the beginning (\"a3\" instead of \"a2\") and after the swarm hash there are other bytes containing the word \"experimental\". The documentation should be updated.\r\n\r\n## Environment\r\n\r\n- Compiler version: v0.5.17+commit.d19bba13 (Although we discovered for other 0.5.x too)\r\n- Target EVM version (as per compiler settings): Default\r\n- Framework/IDE (e.g. Truffle or Remix): Remix\r\n- EVM execution environment / backend / blockchain client: - \r\n- Operating system: Linux amd64\r\n\r\n## Steps to Reproduce\r\n\r\n- Download the source code of contract [0x66718faccc5d6bd88cdf78797f9ecdb8745dae54](https://etherscan.io/address/0x66718faccc5d6bd88cdf78797f9ecdb8745dae54#code)\r\n- Compile it with Remix (Or see the contract bytecode directly on Etherscan)\r\n- The bytecode ends with \"0040\" instead of \"0032\" as declared in the [official documentation](https://solidity.readthedocs.io/en/v0.5.17/metadata.html#encoding-of-the-metadata-hash-in-the-bytecode)\r\n\r\nThe metadata format we discovered is the following:\r\n```\r\n0xa3\r\n0x65 'b' 'z' 'z' 'r' '1' 0x58 0x20 <32 bytes swarm hash>\r\n0x6c 'e' 'x' 'p' 'e' 'r' 'i' 'm' 'e' 'n' 't' 'a' 'l' 0xf5\r\n0x64 's' 'o' 'l' 'c' 0x43 <3 byte version encoding>\r\n0x00 0x40\r\n```\r\n\r\n<br>\r\n\r\nThanks in advice",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9262/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9262/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651174419",
    "html_url": "https://github.com/ethereum/solidity/issues/9262#issuecomment-651174419",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9262",
    "id": 651174419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTE3NDQxOQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T14:55:19Z",
    "updated_at": "2020-06-29T14:55:19Z",
    "author_association": "MEMBER",
    "body": "The documentation does not represent all possible formats for the metadata, it is an example.\r\nYour case contains `experimental` because it is a flag in the metadata, triggered by the usage of `pragma experimental ABIEncoderV2;`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651174419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651233979",
    "html_url": "https://github.com/ethereum/solidity/issues/9262#issuecomment-651233979",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9262",
    "id": 651233979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTIzMzk3OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-29T16:40:23Z",
    "updated_at": "2020-06-29T16:40:23Z",
    "author_association": "MEMBER",
    "body": "Copied from the documentation:\r\n```\r\nThe CBOR mapping can also contain other keys, so it is better to fully decode the data instead of relying on it starting with 0xa265. For example, if any experimental features that affect code generation are used, the mapping will also contain \"experimental\": true.\r\n```\r\n\r\nI don't see any way to adapt the documentation to better represent this case.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/651233979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4721/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4721/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4721/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4721",
  "id": 348168158,
  "node_id": "MDU6SXNzdWUzNDgxNjgxNTg=",
  "number": 4721,
  "title": "Referenced functions can be always determined at compile time in Solidity?",
  "user": {
    "login": "SunBeomSo",
    "id": 13723704,
    "node_id": "MDQ6VXNlcjEzNzIzNzA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/13723704?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SunBeomSo",
    "html_url": "https://github.com/SunBeomSo",
    "followers_url": "https://api.github.com/users/SunBeomSo/followers",
    "following_url": "https://api.github.com/users/SunBeomSo/following{/other_user}",
    "gists_url": "https://api.github.com/users/SunBeomSo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SunBeomSo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SunBeomSo/subscriptions",
    "organizations_url": "https://api.github.com/users/SunBeomSo/orgs",
    "repos_url": "https://api.github.com/users/SunBeomSo/repos",
    "events_url": "https://api.github.com/users/SunBeomSo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SunBeomSo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2018-08-07T05:02:49Z",
  "updated_at": "2018-08-15T08:19:31Z",
  "closed_at": "2018-08-15T08:19:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**A question in one sentence:**\r\nRegarding function call expressions in Solidity, can we always statically determine which functions will be invoked at compile time(not at runtime)?\r\n\r\n**Example Code:**\r\n\r\n```\r\ncontract A {\r\n    uint256 public n;\r\n    function set () public {\r\n        n = 50;\r\n    }\r\n}\r\n\r\ncontract B is A {\r\n    function set () public {\r\n        n = 40;\r\n    }\r\n}\r\n\r\ncontract C is A,B {\r\n    function test (uint n) public {\r\n        A a;\r\n        if (n==1){\r\n            a = new A();\r\n        } \r\n        else{\r\n            a = B(new B());\r\n        }\r\n        a.set(); // member of A or B? The Compiler says that the function is a member of A. \r\n    }\r\n}\r\n```\r\nConsidering features in Java programs, _**it seems that, at compile time, we cannot determine**_ whether the “set” function, invoked in the \"test\" function in contract C, is a member function of A contract or B contract (because the variable \"a\" will be instantiated as a different type of contract, according to the argument \"n\" of the function \"test\").\r\n\r\nHowever, inspecting AST generated by a Solidity compiler (the value of the \"referencedDeclaration\" attribute with an option solc --ast-compact-json), the invoked “set” function is referred as a member of A contract, not B contract. I am not sure whether it is an intentional feature of Solidity.\r\n\r\nIn addition, in the \"referencedDeclaration\" attribute of the AST in JSON, the corresponding value exists as an integer type, not a list type, which seems to imply that the answer for my question may be \"yes\".",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4721/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4721/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411025241",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-411025241",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 411025241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTAyNTI0MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-07T11:31:03Z",
    "updated_at": "2018-08-07T11:31:03Z",
    "author_association": "MEMBER",
    "body": "`referencedDeclaration` is the declaration the compiler will use to call `set` as far as type checking and so on is concerned. This does not mean that it will be the function that is actually executed in the end, but it just means that `a` is of type `A` and so `a.set` is `A.set`.\r\n\r\nIn general, it is impossible to determine which function will be called, even for internal functions, because of function pointers.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411025241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412896894",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412896894",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412896894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjg5Njg5NA==",
    "user": {
      "login": "SunBeomSo",
      "id": 13723704,
      "node_id": "MDQ6VXNlcjEzNzIzNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/13723704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SunBeomSo",
      "html_url": "https://github.com/SunBeomSo",
      "followers_url": "https://api.github.com/users/SunBeomSo/followers",
      "following_url": "https://api.github.com/users/SunBeomSo/following{/other_user}",
      "gists_url": "https://api.github.com/users/SunBeomSo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SunBeomSo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SunBeomSo/subscriptions",
      "organizations_url": "https://api.github.com/users/SunBeomSo/orgs",
      "repos_url": "https://api.github.com/users/SunBeomSo/repos",
      "events_url": "https://api.github.com/users/SunBeomSo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SunBeomSo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T14:43:35Z",
    "updated_at": "2018-08-14T14:43:35Z",
    "author_association": "NONE",
    "body": "@chriseth Thanks for the response!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412896894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412900815",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412900815",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412900815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjkwMDgxNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T14:54:46Z",
    "updated_at": "2018-08-14T14:54:46Z",
    "author_association": "MEMBER",
    "body": "So, can this be closed?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412900815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412907571",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412907571",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412907571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjkwNzU3MQ==",
    "user": {
      "login": "SunBeomSo",
      "id": 13723704,
      "node_id": "MDQ6VXNlcjEzNzIzNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/13723704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SunBeomSo",
      "html_url": "https://github.com/SunBeomSo",
      "followers_url": "https://api.github.com/users/SunBeomSo/followers",
      "following_url": "https://api.github.com/users/SunBeomSo/following{/other_user}",
      "gists_url": "https://api.github.com/users/SunBeomSo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SunBeomSo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SunBeomSo/subscriptions",
      "organizations_url": "https://api.github.com/users/SunBeomSo/orgs",
      "repos_url": "https://api.github.com/users/SunBeomSo/repos",
      "events_url": "https://api.github.com/users/SunBeomSo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SunBeomSo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T15:13:40Z",
    "updated_at": "2018-08-14T15:13:40Z",
    "author_association": "NONE",
    "body": "@chriseth Can I have just one more question? From Solidity compiler, is there a way to get \"conservative\" information about which function definitions would be referenced?\r\n(e.g., mayreferencedDeclaration: [a,b] --- if both \"a\" and \"b\" can referenced at runtime)\r\nI have been working on Solidity verification and I am not sure if I have to implement my own analysis to get that information.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412907571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412913884",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412913884",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412913884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjkxMzg4NA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T15:31:25Z",
    "updated_at": "2018-08-14T15:31:25Z",
    "author_association": "MEMBER",
    "body": "@SunBeomSo this only works for overloading but not overriding. The reason is that the ast-json for contract C is exported assuming that C is the contract that is being deployed. If you use C as a base contract in D, then the functions referenced from C will change and that information might not yet be available when C is compiled.\r\n\r\nIf you know a solution to this, I would gladly add it to the compiler.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412913884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412920647",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412920647",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412920647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjkyMDY0Nw==",
    "user": {
      "login": "SunBeomSo",
      "id": 13723704,
      "node_id": "MDQ6VXNlcjEzNzIzNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/13723704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SunBeomSo",
      "html_url": "https://github.com/SunBeomSo",
      "followers_url": "https://api.github.com/users/SunBeomSo/followers",
      "following_url": "https://api.github.com/users/SunBeomSo/following{/other_user}",
      "gists_url": "https://api.github.com/users/SunBeomSo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SunBeomSo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SunBeomSo/subscriptions",
      "organizations_url": "https://api.github.com/users/SunBeomSo/orgs",
      "repos_url": "https://api.github.com/users/SunBeomSo/repos",
      "events_url": "https://api.github.com/users/SunBeomSo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SunBeomSo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T15:50:43Z",
    "updated_at": "2018-08-14T15:50:43Z",
    "author_association": "NONE",
    "body": "@chriseth Sorry but can you give example code? I did not understand what the problematic situation is.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412920647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412940425",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-412940425",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 412940425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjk0MDQyNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T16:51:13Z",
    "updated_at": "2018-08-14T16:51:13Z",
    "author_association": "MEMBER",
    "body": "In your example code, inside `A`, when you call `set()`, it will always point to the function `set` inside `A`. But if you inherit from `A` and override the function, the call from `A` will actually call the other function.\r\n\r\n```\r\ncontract A { function set() {..} function f() { set(); } }\r\ncontract B is A { function set() { ... } }\r\n```\r\n\r\nIf you call `(new B()).f()`, then `A::f` will call `B::set`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/412940425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/413063164",
    "html_url": "https://github.com/ethereum/solidity/issues/4721#issuecomment-413063164",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4721",
    "id": 413063164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzA2MzE2NA==",
    "user": {
      "login": "SunBeomSo",
      "id": 13723704,
      "node_id": "MDQ6VXNlcjEzNzIzNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/13723704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SunBeomSo",
      "html_url": "https://github.com/SunBeomSo",
      "followers_url": "https://api.github.com/users/SunBeomSo/followers",
      "following_url": "https://api.github.com/users/SunBeomSo/following{/other_user}",
      "gists_url": "https://api.github.com/users/SunBeomSo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SunBeomSo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SunBeomSo/subscriptions",
      "organizations_url": "https://api.github.com/users/SunBeomSo/orgs",
      "repos_url": "https://api.github.com/users/SunBeomSo/repos",
      "events_url": "https://api.github.com/users/SunBeomSo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SunBeomSo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-15T01:04:09Z",
    "updated_at": "2018-08-15T02:01:33Z",
    "author_association": "NONE",
    "body": "@chriseth   Thanks. That's an interesting case. You can close this issue, and I will refer this issue when I get to know a solution.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/413063164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3998/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3998/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3998/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3998",
  "id": 318050321,
  "node_id": "MDU6SXNzdWUzMTgwNTAzMjE=",
  "number": 3998,
  "title": "String memory variable cause function to return no value",
  "user": {
    "login": "Pzixel",
    "id": 11201122,
    "node_id": "MDQ6VXNlcjExMjAxMTIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/11201122?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Pzixel",
    "html_url": "https://github.com/Pzixel",
    "followers_url": "https://api.github.com/users/Pzixel/followers",
    "following_url": "https://api.github.com/users/Pzixel/following{/other_user}",
    "gists_url": "https://api.github.com/users/Pzixel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Pzixel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Pzixel/subscriptions",
    "organizations_url": "https://api.github.com/users/Pzixel/orgs",
    "repos_url": "https://api.github.com/users/Pzixel/repos",
    "events_url": "https://api.github.com/users/Pzixel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Pzixel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-04-26T14:17:15Z",
  "updated_at": "2018-06-11T13:57:47Z",
  "closed_at": "2018-04-27T12:51:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I'm writing a simple smart contract which loops over internal array and checks if strings are equal. It compiles fine but when I run this smart contract I get no value at all. I started my investigation and here is what I have found.\r\n\r\nConsider following smart contract:\r\n\r\n```\r\npragma solidity ^0.4.23;\r\n\r\ncontract Season {\r\n    address[] public requests;\r\n    mapping(bytes32 => address) requestIdToAddress;\r\n        \r\n    function createRequest(string id) public {\r\n        bytes32 hash = keccak256(id);\r\n        require(requestIdToAddress[hash] == 0);\r\n\r\n        Request request = new Request(id);\r\n        requests.push(request);\r\n        requestIdToAddress[hash] = request;\r\n    }\r\n\r\n    function getRequestsCount() public view returns(uint) {\r\n        return requests.length;\r\n    }\r\n\r\n    function getRequestById(string id) public view returns(address) {\r\n        return getRequestByHash(keccak256(id));\r\n    }\r\n\r\n    function getRequestByHash(bytes32 hash) public view returns(address) {\r\n        return requestIdToAddress[hash];\r\n    }\r\n\r\n    function getRequestsByFilter(string id) public view returns(uint, uint, uint, bytes32[]) {\r\n        bytes32[] memory filteredRequests = new bytes32[](getRequestsCount());\r\n        uint j = 0;\r\n        for (uint i = 0; i < filteredRequests.length; i++) {\r\n            Request request = Request(requests[i]);\r\n            //string memory requestId = request.id();\r\n        }\r\n        return (filteredRequests.length, getRequestsCount(), j, filteredRequests);\r\n    }    \r\n}\r\n\r\ncontract Request {\r\n    string public id;\r\n\r\n    constructor(string id_) public {\r\n        id = id_;\r\n    }\r\n}\r\n```\r\n\r\nDeploy it and call `createRequest(somevalue)`. Then call  `getRequestsByFilter(anyvalue)` and you should see `1 1 1 0x00..00`. Ok, it's good, it works fine.\r\n\r\nHowever, try to uncomment `//string memory requestId = request.id();` line and repeat steps above. In this case this contract is still compiling, however trying to call it always leads to `0 0 0 null`. But this line shouldn't change observable behaviour?! Yes, it shouldn't, however, it does.\r\n\r\nI consider it's either VM or compiler bug.\r\n\r\n> solc, the solidity compiler commandline interface\r\nVersion: 0.4.23+commit.124ca40d.Windows.msvc",
  "closed_by": {
    "login": "Pzixel",
    "id": 11201122,
    "node_id": "MDQ6VXNlcjExMjAxMTIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/11201122?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Pzixel",
    "html_url": "https://github.com/Pzixel",
    "followers_url": "https://api.github.com/users/Pzixel/followers",
    "following_url": "https://api.github.com/users/Pzixel/following{/other_user}",
    "gists_url": "https://api.github.com/users/Pzixel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Pzixel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Pzixel/subscriptions",
    "organizations_url": "https://api.github.com/users/Pzixel/orgs",
    "repos_url": "https://api.github.com/users/Pzixel/repos",
    "events_url": "https://api.github.com/users/Pzixel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Pzixel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3998/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3998/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384701808",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-384701808",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 384701808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDcwMTgwOA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-26T16:18:25Z",
    "updated_at": "2018-04-26T16:18:25Z",
    "author_association": "MEMBER",
    "body": "Are you sure you are running this on a byzantium-compatible blockchain?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384701808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384706788",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-384706788",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 384706788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDcwNjc4OA==",
    "user": {
      "login": "Pzixel",
      "id": 11201122,
      "node_id": "MDQ6VXNlcjExMjAxMTIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11201122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Pzixel",
      "html_url": "https://github.com/Pzixel",
      "followers_url": "https://api.github.com/users/Pzixel/followers",
      "following_url": "https://api.github.com/users/Pzixel/following{/other_user}",
      "gists_url": "https://api.github.com/users/Pzixel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Pzixel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Pzixel/subscriptions",
      "organizations_url": "https://api.github.com/users/Pzixel/orgs",
      "repos_url": "https://api.github.com/users/Pzixel/repos",
      "events_url": "https://api.github.com/users/Pzixel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Pzixel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-26T16:33:45Z",
    "updated_at": "2018-04-26T17:12:59Z",
    "author_association": "NONE",
    "body": "I run it on parity. However, it seems just an error because of trying to access other's contract dynamic string method. However, It doesn't work with sized types too:\r\n\r\n```\r\npragma solidity ^0.4.23;\r\n\r\ncontract Season {\r\n    address[] public requests;\r\n\r\n    constructor() public {\r\n        requests.push(new Request());\r\n    }\r\n\r\n    function getRequestsByFilter() public view returns(bool) {\r\n        Request r = Request(requests[0]);\r\n        bool ret = r.isMatch();\r\n        return ret;\r\n    }\r\n}\r\n\r\ncontract Request {  \r\n    function isMatch() public pure returns(bool) {\r\n        return true;\r\n    }    \r\n}\r\n```\r\n\r\nHere expected value is `true` but it's actually `false`.\r\n\r\n![](https://i.stack.imgur.com/V15E4.png)\r\n\r\nI'm not sure anymore if it's a compiler bug or just bad EVM, but I think we need at least some explanation here, like some warning or something.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384706788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384961051",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-384961051",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 384961051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDk2MTA1MQ==",
    "user": {
      "login": "Pzixel",
      "id": 11201122,
      "node_id": "MDQ6VXNlcjExMjAxMTIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11201122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Pzixel",
      "html_url": "https://github.com/Pzixel",
      "followers_url": "https://api.github.com/users/Pzixel/followers",
      "following_url": "https://api.github.com/users/Pzixel/following{/other_user}",
      "gists_url": "https://api.github.com/users/Pzixel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Pzixel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Pzixel/subscriptions",
      "organizations_url": "https://api.github.com/users/Pzixel/orgs",
      "repos_url": "https://api.github.com/users/Pzixel/repos",
      "events_url": "https://api.github.com/users/Pzixel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Pzixel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T12:51:58Z",
    "updated_at": "2018-04-27T12:51:58Z",
    "author_association": "NONE",
    "body": "I have found out that it's parity bug, others ethereum implementations works fine with this code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384961051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384966446",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-384966446",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 384966446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDk2NjQ0Ng==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T13:15:01Z",
    "updated_at": "2018-04-27T13:15:01Z",
    "author_association": "MEMBER",
    "body": "You can link to the Parity issue? It is useful for others finding this issue to be able to track what's going on.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384966446/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384967578",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-384967578",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 384967578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDk2NzU3OA==",
    "user": {
      "login": "Pzixel",
      "id": 11201122,
      "node_id": "MDQ6VXNlcjExMjAxMTIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11201122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Pzixel",
      "html_url": "https://github.com/Pzixel",
      "followers_url": "https://api.github.com/users/Pzixel/followers",
      "following_url": "https://api.github.com/users/Pzixel/following{/other_user}",
      "gists_url": "https://api.github.com/users/Pzixel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Pzixel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Pzixel/subscriptions",
      "organizations_url": "https://api.github.com/users/Pzixel/orgs",
      "repos_url": "https://api.github.com/users/Pzixel/repos",
      "events_url": "https://api.github.com/users/Pzixel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Pzixel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T13:19:42Z",
    "updated_at": "2018-04-27T13:20:48Z",
    "author_association": "NONE",
    "body": "Of course: https://github.com/paritytech/parity/issues/8503\r\n\r\nIt basically forbids any interacton between contracts, e.g. in provided example you cannot call `id()` function.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/384967578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/396252472",
    "html_url": "https://github.com/ethereum/solidity/issues/3998#issuecomment-396252472",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3998",
    "id": 396252472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjI1MjQ3Mg==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-11T13:57:47Z",
    "updated_at": "2018-06-11T13:57:47Z",
    "author_association": "MEMBER",
    "body": "Related to #4259.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/396252472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/446",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/446/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/446/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/446/events",
  "html_url": "https://github.com/ethereum/solidity/issues/446",
  "id": 142984603,
  "node_id": "MDU6SXNzdWUxNDI5ODQ2MDM=",
  "number": 446,
  "title": "Attempting to uint8() a larger number causes eventual throw after array access.",
  "user": {
    "login": "Smithgift",
    "id": 10504499,
    "node_id": "MDQ6VXNlcjEwNTA0NDk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/10504499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Smithgift",
    "html_url": "https://github.com/Smithgift",
    "followers_url": "https://api.github.com/users/Smithgift/followers",
    "following_url": "https://api.github.com/users/Smithgift/following{/other_user}",
    "gists_url": "https://api.github.com/users/Smithgift/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Smithgift/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Smithgift/subscriptions",
    "organizations_url": "https://api.github.com/users/Smithgift/orgs",
    "repos_url": "https://api.github.com/users/Smithgift/repos",
    "events_url": "https://api.github.com/users/Smithgift/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Smithgift/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/solidity/milestones/4",
    "html_url": "https://github.com/ethereum/solidity/milestone/4",
    "labels_url": "https://api.github.com/repos/ethereum/solidity/milestones/4/labels",
    "id": 1639334,
    "node_id": "MDk6TWlsZXN0b25lMTYzOTMzNA==",
    "number": 4,
    "title": "colocolo",
    "description": "https://github.com/ethereum/webthree-umbrella/milestones/bieti ",
    "creator": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 8,
    "state": "closed",
    "created_at": "2016-03-11T17:31:17Z",
    "updated_at": "2016-04-11T12:10:34Z",
    "due_on": "2016-04-07T07:00:00Z",
    "closed_at": "2016-04-11T12:10:34Z"
  },
  "comments": 6,
  "created_at": "2016-03-23T15:01:19Z",
  "updated_at": "2016-03-31T16:46:38Z",
  "closed_at": "2016-03-31T16:46:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The code in question is [here](https://gist.github.com/Smithgift/7cb693556470ea5764fa). Pardon the mess, I had to kludge a few things for mix to debug it.\n\nEssentially, the line:\n\n```\nnewCoords = uint8(seed);\n```\n\nattempts to turn a uint (seed) into a uint8 (newCoords). My belief was that newCoords was a truncated seed. It doesn't actually matter to me if this isn't true, because I can stick a mod 256 in there.\n\nThe issue is that this line:\n\n```\nvar chosenSector = newMap[newCoords];\n```\n\nThrows. newMap is a 256 entry array. Examining it in Mix shows that newCoords isn't actually a truncated version of seed, so it goes out of bounds and throws.\n\nAgain, it doesn't really matter to me if it turns out that this isn't the right way to do it, but it's still a throw bug.\n",
  "closed_by": {
    "login": "bobsummerwill",
    "id": 3788156,
    "node_id": "MDQ6VXNlcjM3ODgxNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3788156?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bobsummerwill",
    "html_url": "https://github.com/bobsummerwill",
    "followers_url": "https://api.github.com/users/bobsummerwill/followers",
    "following_url": "https://api.github.com/users/bobsummerwill/following{/other_user}",
    "gists_url": "https://api.github.com/users/bobsummerwill/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bobsummerwill/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bobsummerwill/subscriptions",
    "organizations_url": "https://api.github.com/users/bobsummerwill/orgs",
    "repos_url": "https://api.github.com/users/bobsummerwill/repos",
    "events_url": "https://api.github.com/users/bobsummerwill/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bobsummerwill/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/446/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/446/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200434535",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200434535",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200434535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQzNDUzNQ==",
    "user": {
      "login": "VoR0220",
      "id": 7756785,
      "node_id": "MDQ6VXNlcjc3NTY3ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7756785?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VoR0220",
      "html_url": "https://github.com/VoR0220",
      "followers_url": "https://api.github.com/users/VoR0220/followers",
      "following_url": "https://api.github.com/users/VoR0220/following{/other_user}",
      "gists_url": "https://api.github.com/users/VoR0220/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VoR0220/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VoR0220/subscriptions",
      "organizations_url": "https://api.github.com/users/VoR0220/orgs",
      "repos_url": "https://api.github.com/users/VoR0220/repos",
      "events_url": "https://api.github.com/users/VoR0220/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VoR0220/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T16:46:38Z",
    "updated_at": "2016-03-23T16:46:38Z",
    "author_association": "MEMBER",
    "body": "This seems to be acting as it should, though the truncation of the number is an interesting feature request...for now I would try the mod 256 but I will label this as a feature request for now. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200434535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200472411",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200472411",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200472411,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQ3MjQxMQ==",
    "user": {
      "login": "Smithgift",
      "id": 10504499,
      "node_id": "MDQ6VXNlcjEwNTA0NDk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10504499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Smithgift",
      "html_url": "https://github.com/Smithgift",
      "followers_url": "https://api.github.com/users/Smithgift/followers",
      "following_url": "https://api.github.com/users/Smithgift/following{/other_user}",
      "gists_url": "https://api.github.com/users/Smithgift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Smithgift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Smithgift/subscriptions",
      "organizations_url": "https://api.github.com/users/Smithgift/orgs",
      "repos_url": "https://api.github.com/users/Smithgift/repos",
      "events_url": "https://api.github.com/users/Smithgift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Smithgift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T18:12:07Z",
    "updated_at": "2016-03-23T18:12:07Z",
    "author_association": "NONE",
    "body": "Well, it's not so much the truncation or lack thereof that's the problem. It's that a uint8 may unintiutively not actually be a uint8, which IMHO breaks some level of type safety. In reality, mod 256 is the clearest and sanest answer.\n\nAs a philosophical question, though, what should converting a larger type into a smaller type actually do? This specific case is probably rare enough that forcing truncation may not be the best answer (especially with the performance cost of normal cases).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200472411/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200484093",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200484093",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200484093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQ4NDA5Mw==",
    "user": {
      "login": "Smithgift",
      "id": 10504499,
      "node_id": "MDQ6VXNlcjEwNTA0NDk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10504499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Smithgift",
      "html_url": "https://github.com/Smithgift",
      "followers_url": "https://api.github.com/users/Smithgift/followers",
      "following_url": "https://api.github.com/users/Smithgift/following{/other_user}",
      "gists_url": "https://api.github.com/users/Smithgift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Smithgift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Smithgift/subscriptions",
      "organizations_url": "https://api.github.com/users/Smithgift/orgs",
      "repos_url": "https://api.github.com/users/Smithgift/repos",
      "events_url": "https://api.github.com/users/Smithgift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Smithgift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T18:30:08Z",
    "updated_at": "2016-03-23T18:30:08Z",
    "author_association": "NONE",
    "body": "Here's some more weird type conversion behavior.\n\n```\n    function weird() constant returns (bool a, bool b, bool c) {\n        uint foo = 257;\n        uint8 bar = uint8(foo);\n        uint baz = 256;\n        a = bar == 1;\n        b = foo > baz;\n        c = bar > baz;      \n    }\n```\n\na will be true, b will be true, c will be false. So it would seem that there is a truncation going on _sometimes?_ \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200484093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200508426",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200508426",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200508426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDUwODQyNg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T19:31:15Z",
    "updated_at": "2016-03-23T19:31:15Z",
    "author_association": "MEMBER",
    "body": "I don't see a problem with the function `weird()`. Truncation to smaller types is done in the same way it would be done in e.g. C, so `uint8(257) == 257 % 2**8 == 1`.\n\nSo `bar == 1` is what at least I would expect. Furthermore, `foo > baz`: `257 > 256` so true and finally `bar > baz`: `1 > 256` so false.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200508426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200509689",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200509689",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200509689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDUwOTY4OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T19:33:47Z",
    "updated_at": "2016-03-23T19:33:47Z",
    "author_association": "MEMBER",
    "body": "Concerning the more complicated code cited in the beginning: You are right, it should not throw. Can you get a bit more information about the actual value of the uint8 - perhaps using the mix assembly debugger?\n\nThe thing is that truncation is not done immediately, it is done whenever it is needed, i.e. some values can have dirty higher order bits, but those should be cleaned as soon as e.g. the comparison is done. It might be that since the comparison with array length is implemented directly in assembly, we forgot to do that.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200509689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200510613",
    "html_url": "https://github.com/ethereum/solidity/issues/446#issuecomment-200510613",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/446",
    "id": 200510613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDUxMDYxMw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T19:35:04Z",
    "updated_at": "2016-03-23T19:35:17Z",
    "author_association": "MEMBER",
    "body": "Ok, sorry for being impatient, I was able to reproduce the bug with\n\n```\ncontract C {\n    function f(uint x) returns (uint[256] r){\n        r[uint8(x)] = 2;\n    }\n}\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/200510613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

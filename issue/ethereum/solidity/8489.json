{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/8489/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/8489/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/8489/events",
  "html_url": "https://github.com/ethereum/solidity/issues/8489",
  "id": 579623994,
  "node_id": "MDU6SXNzdWU1Nzk2MjM5OTQ=",
  "number": 8489,
  "title": "Allow mapping to struct with dynamically-sized type to implement inherited function",
  "user": {
    "login": "travs",
    "id": 7369273,
    "node_id": "MDQ6VXNlcjczNjkyNzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7369273?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/travs",
    "html_url": "https://github.com/travs",
    "followers_url": "https://api.github.com/users/travs/followers",
    "following_url": "https://api.github.com/users/travs/following{/other_user}",
    "gists_url": "https://api.github.com/users/travs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/travs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travs/subscriptions",
    "organizations_url": "https://api.github.com/users/travs/orgs",
    "repos_url": "https://api.github.com/users/travs/repos",
    "events_url": "https://api.github.com/users/travs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/travs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/solidity/milestones/49",
    "html_url": "https://github.com/ethereum/solidity/milestone/49",
    "labels_url": "https://api.github.com/repos/ethereum/solidity/milestones/49/labels",
    "id": 5143179,
    "node_id": "MDk6TWlsZXN0b25lNTE0MzE3OQ==",
    "number": 49,
    "title": "Sprint 4",
    "description": "Capacity multiplier: 41\nStory points: 26\nVelocity: 0.63",
    "creator": {
      "login": "elenadimitrova",
      "id": 703848,
      "node_id": "MDQ6VXNlcjcwMzg0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elenadimitrova",
      "html_url": "https://github.com/elenadimitrova",
      "followers_url": "https://api.github.com/users/elenadimitrova/followers",
      "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
      "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
      "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
      "repos_url": "https://api.github.com/users/elenadimitrova/repos",
      "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 12,
    "state": "closed",
    "created_at": "2020-02-26T11:51:46Z",
    "updated_at": "2020-03-26T07:41:46Z",
    "due_on": "2020-03-25T07:00:00Z",
    "closed_at": "2020-03-25T13:00:12Z"
  },
  "comments": 6,
  "created_at": "2020-03-12T00:45:07Z",
  "updated_at": "2021-09-14T20:55:29Z",
  "closed_at": "2020-03-23T12:06:43Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Overriding functions defined in interfaces with the automatically-generated getters from public state variables usually work great. This was reported in a previous issue (#3514) and fixed.\r\n\r\nHowever, when the return type is a `struct` that has a dynamically-sized type, like the `string` in the example below, the generated getter doesn't override properly, causing a compiler error.\r\n\r\n```solidity\r\n// sample.sol\r\npragma solidity 0.6.4;\r\npragma experimental ABIEncoderV2;\r\n\r\ninterface IA {\r\n    struct Baz {\r\n        address a;\r\n        address b;\r\n        string  c;\r\n    }\r\n\r\n    function bazMap(address) external returns (Baz memory);\r\n}\r\n\r\ncontract A is IA {\r\n    mapping (address => Baz) public override bazMap;\r\n}\r\n```\r\n\r\n```sh\r\n$ solc sample.sol  # it's version 0.6.4\r\nError: Overriding public state variable return types differ.\r\n  --> sample.sol:15:5:\r\n   |\r\n15 |     mapping (address => Baz) public override bazMap;\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nNote: Overridden function is here:\r\n  --> sample.sol:11:5:\r\n   |\r\n11 |     function bazMap(address) external returns (Baz memory);\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n```\r\n\r\nBased on [the docs](https://solidity.readthedocs.io/en/v0.6.4/contracts.html#getter-functions), I might expect the function to override to be like:\r\n```\r\nfunction bazMap(address) external returns (address,address)\r\n```\r\nbut that doesn't work either. \r\n\r\nRelated to: #6337, #3514, #7521, #4244",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/8489/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/8489/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/598653026",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-598653026",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 598653026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODY1MzAyNg==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-13T10:25:16Z",
    "updated_at": "2020-03-13T10:25:16Z",
    "author_association": "MEMBER",
    "body": "Thanks for reporting! I just confirmed this and will look into fixing it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/598653026/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/598685028",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-598685028",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 598685028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODY4NTAyOA==",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-13T11:54:24Z",
    "updated_at": "2020-03-13T11:54:24Z",
    "author_association": "MEMBER",
    "body": "This should be \"fixed\" by #8491.\r\nOnce merged, in your example you could do:\r\n```\r\npragma solidity 0.6.4;\r\npragma experimental ABIEncoderV2;\r\n\r\ninterface IA {\r\n    struct Baz {\r\n        address a;\r\n        address b;\r\n        string  c;\r\n    }\r\n\r\n    function bazMap(address) external returns (address, address, string memory);\r\n}\r\n\r\ncontract A is IA {\r\n    mapping (address => Baz) public override bazMap;\r\n}\r\n```\r\n\r\nTo change this to overriding ``returns (Baz memory)`` is tracked in https://github.com/ethereum/solidity/issues/6337, but that's a breaking change unfortunately.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/598685028/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602551862",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-602551862",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 602551862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjU1MTg2Mg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-23T12:06:42Z",
    "updated_at": "2020-03-23T12:06:42Z",
    "author_association": "MEMBER",
    "body": "I'm closing this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602551862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919013142",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-919013142",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 919013142,
    "node_id": "IC_kwDOAm_5kc42xwcW",
    "user": {
      "login": "danielb1986",
      "id": 77058885,
      "node_id": "MDQ6VXNlcjc3MDU4ODg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/77058885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danielb1986",
      "html_url": "https://github.com/danielb1986",
      "followers_url": "https://api.github.com/users/danielb1986/followers",
      "following_url": "https://api.github.com/users/danielb1986/following{/other_user}",
      "gists_url": "https://api.github.com/users/danielb1986/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danielb1986/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danielb1986/subscriptions",
      "organizations_url": "https://api.github.com/users/danielb1986/orgs",
      "repos_url": "https://api.github.com/users/danielb1986/repos",
      "events_url": "https://api.github.com/users/danielb1986/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danielb1986/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T10:13:51Z",
    "updated_at": "2021-09-14T13:21:31Z",
    "author_association": "NONE",
    "body": "Hey Guys,\r\n\r\n\r\nI am still facing the same problem. Not sure if I am missing something. \r\n\r\nLets keep this example (though I am using solc 0.8.4):\r\n\r\n```\r\npragma solidity 0.8.4;\r\n\r\ninterface IA {\r\n    struct Baz {\r\n        address a;\r\n        address b;\r\n        string  c;\r\n    }\r\n\r\n    function bazMap(address) external returns (address, address, string memory);\r\n}\r\n\r\ncontract A is IA {\r\n    mapping (address => Baz) public override bazMap;\r\n}\r\n```\r\nIf I do it this way and I access one member of bazMap. then its not possible to access member.a cause the compiler doesnt know that this member has this attribute. Even if I write:\r\n    function bazMap(address) external returns (address a, address b, string memory c);\r\n\r\nStill not possible.\r\n\r\nWhat am I missing?\r\nAlso the following approach to let the mapping return a type that is known in/by the interface doesnt work:\r\n```\r\ncontract A is IA {\r\n    mapping (address => IA.Baz) public override bazMap;\r\n}\r\n```\r\nCompiler says return types differ. But they dont, they are exactly the same and get even referenced with their origin. Dont really understand how to implement this. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919013142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919151081",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-919151081",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 919151081,
    "node_id": "IC_kwDOAm_5kc42ySHp",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T13:27:32Z",
    "updated_at": "2021-09-14T13:27:32Z",
    "author_association": "MEMBER",
    "body": "Please ask this question either in ethereum stackexchange or the solidity channel on matrix - this issue is not the right place.\r\nI also don't really understand what you want to achieve. Both your examples compile for me.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919151081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919504904",
    "html_url": "https://github.com/ethereum/solidity/issues/8489#issuecomment-919504904",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8489",
    "id": 919504904,
    "node_id": "IC_kwDOAm_5kc42zogI",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T20:54:09Z",
    "updated_at": "2021-09-14T20:55:29Z",
    "author_association": "MEMBER",
    "body": "Here's a related issue that's still open: https://github.com/ethereum/solidity/issues/11826.\r\n\r\n@danielb1986 If you have a snippet that produces a compilation error and you think it's a bug (rather than just incorrect usage), you could post it there. Please use a complete example though - you said that accessing some members causes errors but I don't see that in your example and we're left guessing what might be happening.\r\n\r\nIf you're unsure, drop by at the [#solidity](https://gitter.im/ethereum/solidity) channel so that we can discuss it first.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/919504904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

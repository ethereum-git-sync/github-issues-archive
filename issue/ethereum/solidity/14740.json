{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14740/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14740/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14740/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14740",
  "id": 2050365600,
  "node_id": "I_kwDOAm_5kc56Nhig",
  "number": 14740,
  "title": "Support for BLOBHASH from EIP-4844",
  "user": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4372329032,
      "node_id": "LA_kwDOAm_5kc8AAAABBJxySA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/selected%20for%20development",
      "name": "selected for development",
      "color": "ff8e00",
      "default": false,
      "description": "It's on our short-term development"
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    },
    {
      "id": 4726043980,
      "node_id": "LA_kwDOAm_5kc8AAAABGbG1TA",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/feature",
      "name": "feature",
      "color": "fbca02",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "r0qs",
    "id": 457348,
    "node_id": "MDQ6VXNlcjQ1NzM0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/r0qs",
    "html_url": "https://github.com/r0qs",
    "followers_url": "https://api.github.com/users/r0qs/followers",
    "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
    "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
    "organizations_url": "https://api.github.com/users/r0qs/orgs",
    "repos_url": "https://api.github.com/users/r0qs/repos",
    "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/r0qs/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/solidity/milestones/58",
    "html_url": "https://github.com/ethereum/solidity/milestone/58",
    "labels_url": "https://api.github.com/repos/ethereum/solidity/milestones/58/labels",
    "id": 10055790,
    "node_id": "MI_kwDOAm_5kc4AmXBu",
    "number": 58,
    "title": "0.8.24",
    "description": "",
    "creator": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 9,
    "closed_issues": 8,
    "state": "open",
    "created_at": "2023-10-16T13:46:09Z",
    "updated_at": "2024-01-12T15:55:52Z",
    "due_on": "2024-01-15T08:00:00Z",
    "closed_at": null
  },
  "comments": 6,
  "created_at": "2023-12-20T11:27:48Z",
  "updated_at": "2024-01-18T11:59:00Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Part of https://github.com/ethereum/solidity/issues/14739\r\nTwo steps, first PR:\r\n\r\n- Implement the blobhash opcode as specified in https://eips.ethereum.org/EIPS/eip-4844\r\n- Give it a test value in evmone/evmc to test.\r\n\r\nSecond PR:\r\n- Introduce the high-level global function\r\n  ``blobhash(uint blockNumber) returns (bytes32)``\r\n  analog to the existing ``blockhash`` function\r\n- Document it in https://docs.soliditylang.org/en/develop/units-and-global-variables.html#block-and-transaction-properties\r\n- This will need to allow being overridden by user-defined functions with a shadowing warning (otherwise it'd be breaking).\r\n\r\nRemark:\r\n  Testing this may mean to add bogus values in EVMHost. I.e. check if we can inject values at all - otherwise the hashes may just end up as zero in testing.\r\n\r\nAlso needs to take care of this not being breaking: https://github.com/ethereum/solidity/pull/11763",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14740/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14740/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1877117418",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1877117418",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1877117418,
    "node_id": "IC_kwDOAm_5kc5v4onq",
    "user": {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-04T13:44:09Z",
    "updated_at": "2024-01-04T13:44:09Z",
    "author_association": "MEMBER",
    "body": "Just as a side note, the eip mentions a [point evaluation precompile](https://eips.ethereum.org/EIPS/eip-4844#point-evaluation-precompile), which I'm not sure we need to implement considering that we lack of support for BLS pairings. Should we also implement this, @ekpyron? For reference, the [verify_kzg_proof](https://github.com/ethereum/consensus-specs/blob/877817cdbda04b3e9a2ef8b619ee8f8993e0b2a0/specs/_features/sharding/polynomial-commitments.md?plain=1#L349) function is defined here if needed.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1877117418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1877216117",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1877216117",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1877216117,
    "node_id": "IC_kwDOAm_5kc5v5At1",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-04T14:47:34Z",
    "updated_at": "2024-01-08T12:51:54Z",
    "author_association": "MEMBER",
    "body": "I don't think we have to do anything about precompiles. They don't need special language support like the opcodes, since they can be invoked with a generic `call()`. We do have global built-in functions for some of the precompiles added in the past, but not even all of them. We're heading in the direction of having less hard-coded stuff so I doubt we'll be adding high-level wrappers for precompiles in the future. At best we might provide them as a part of stdlib.\r\n\r\nYou might just need to add some hard-coded results from the precompile for testing (IIRC we have them for other precompiles in `EVMHost`? Or in some similar file), but that's only if you need to use that precompile in some test.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1877216117/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1880938449",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1880938449",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1880938449,
    "node_id": "IC_kwDOAm_5kc5wHNfR",
    "user": {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-08T12:44:26Z",
    "updated_at": "2024-01-08T12:44:26Z",
    "author_association": "MEMBER",
    "body": "Yeah, we're aiming for minimal Cancun support only for the next release, for which being able to low-level call the precompile is perfectly fine. It's not like it's a major issue to add high-level support per se, but we won't do it for now and only after strong demand (it's indeed better done via stdlib later on)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1880938449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1893152691",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1893152691",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1893152691,
    "node_id": "IC_kwDOAm_5kc5w1zez",
    "user": {
      "login": "qizhou",
      "id": 2541286,
      "node_id": "MDQ6VXNlcjI1NDEyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2541286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qizhou",
      "html_url": "https://github.com/qizhou",
      "followers_url": "https://api.github.com/users/qizhou/followers",
      "following_url": "https://api.github.com/users/qizhou/following{/other_user}",
      "gists_url": "https://api.github.com/users/qizhou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qizhou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qizhou/subscriptions",
      "organizations_url": "https://api.github.com/users/qizhou/orgs",
      "repos_url": "https://api.github.com/users/qizhou/repos",
      "events_url": "https://api.github.com/users/qizhou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qizhou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-16T06:40:28Z",
    "updated_at": "2024-01-16T06:40:28Z",
    "author_association": "NONE",
    "body": "FYI: we have implemented a blob hash getter contract via Assembly code and test it against devnet-12: https://github.com/ethstorage/eip4844-blob-hash-getter",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1893152691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1898113254",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1898113254",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1898113254,
    "node_id": "IC_kwDOAm_5kc5xIujm",
    "user": {
      "login": "qizhou",
      "id": 2541286,
      "node_id": "MDQ6VXNlcjI1NDEyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2541286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qizhou",
      "html_url": "https://github.com/qizhou",
      "followers_url": "https://api.github.com/users/qizhou/followers",
      "following_url": "https://api.github.com/users/qizhou/following{/other_user}",
      "gists_url": "https://api.github.com/users/qizhou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qizhou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qizhou/subscriptions",
      "organizations_url": "https://api.github.com/users/qizhou/orgs",
      "repos_url": "https://api.github.com/users/qizhou/repos",
      "events_url": "https://api.github.com/users/qizhou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qizhou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T09:31:59Z",
    "updated_at": "2024-01-18T09:31:59Z",
    "author_association": "NONE",
    "body": "\r\n> * Introduce the high-level global function\r\n>   `blobhash(uint blockNumber) returns (bytes32)`\r\n>   analog to the existing `blockhash` function\r\n> * Document it in https://docs.soliditylang.org/en/develop/units-and-global-variables.html#block-and-transaction-properties\r\n> * This will need to allow being overridden by user-defined functions with a shadowing warning (otherwise it'd be breaking).\r\n> \r\n> Remark: Testing this may mean to add bogus values in EVMHost. I.e. check if we can inject values at all - otherwise the hashes may just end up as zero in testing.\r\n> \r\n> Also needs to take care of this not being breaking: #11763\r\n\r\nMy two cents: could we introduce `blobhash` assembly code rather than a global function?  Therefore, we don't need to deal with the overridden case if a user-defined function happens to be the same.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1898113254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1898344379",
    "html_url": "https://github.com/ethereum/solidity/issues/14740#issuecomment-1898344379",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14740",
    "id": 1898344379,
    "node_id": "IC_kwDOAm_5kc5xJm-7",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T11:59:00Z",
    "updated_at": "2024-01-18T11:59:00Z",
    "author_association": "MEMBER",
    "body": "A Yul builtin is being added by #14757 so it's not either-or. We'll have both.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1898344379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

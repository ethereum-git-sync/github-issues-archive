{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10806",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10806/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10806/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10806/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10806",
  "id": 788348426,
  "node_id": "MDU6SXNzdWU3ODgzNDg0MjY=",
  "number": 10806,
  "title": "Non-existant `file_id` generated in `0.8.0` source maps",
  "user": {
    "login": "Pet3ris",
    "id": 224585,
    "node_id": "MDQ6VXNlcjIyNDU4NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/224585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Pet3ris",
    "html_url": "https://github.com/Pet3ris",
    "followers_url": "https://api.github.com/users/Pet3ris/followers",
    "following_url": "https://api.github.com/users/Pet3ris/following{/other_user}",
    "gists_url": "https://api.github.com/users/Pet3ris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Pet3ris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Pet3ris/subscriptions",
    "organizations_url": "https://api.github.com/users/Pet3ris/orgs",
    "repos_url": "https://api.github.com/users/Pet3ris/repos",
    "events_url": "https://api.github.com/users/Pet3ris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Pet3ris/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-01-18T15:14:03Z",
  "updated_at": "2021-01-18T15:24:54Z",
  "closed_at": "2021-01-18T15:24:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI'm getting an invalid file_id of 1 in the source map that compiles a single file and should only have the file_ids -1 and 0.\r\n\r\n## Environment\r\n\r\n- Compiler version: `0.8.0`\r\n- Target EVM version (as per compiler settings): default\r\n- Framework/IDE (e.g. Truffle or Remix): raw `solc`\r\n- EVM execution environment / backend / blockchain client: n/a\r\n- Operating system: Mac M1\r\n\r\n## Steps to Reproduce\r\n\r\nThe following file:\r\n\r\n```solidity\r\ncontract SimpleArg {\r\n    uint u1;\r\n    uint u2;\r\n    string s1;\r\n\r\n    uint u16;\r\n\r\n    int i1;\r\n    address owner;\r\n    bool owned;\r\n\r\n    struct Vector {\r\n        uint u;\r\n        uint v;\r\n    }\r\n\r\n    event Count(\r\n        uint indexed _a,\r\n        uint indexed _u1\r\n    );\r\n\r\n    function test() public returns (uint) {\r\n        uint x = 2 + 5;\r\n        uint y = 5;\r\n        u1 += x + y;\r\n\r\n        x += 1;\r\n        x += 2;\r\n        x += y;\r\n\r\n        x -= 2;\r\n        x -= 1;\r\n\r\n        uint z = 10 * x - y;\r\n\r\n        bool boolean_var = true;\r\n        if (boolean_var) {\r\n            x += 1;\r\n        }\r\n        uint8 b8 = 3;\r\n\r\n        x += b8;\r\n\r\n        z -= x * 3 - 3;\r\n        z -= x;\r\n\r\n        u16 = 16;\r\n\r\n        emit Count(5, u1);\r\n        u2 = u1 - 1;\r\n        i1 = -1;\r\n\r\n        owner = block.coinbase;\r\n        owned = true;\r\n\r\n        address local_address = block.coinbase;\r\n        if (local_address == owner) {\r\n            x += 1;\r\n        }\r\n\r\n        return factorial(6);\r\n    }\r\n\r\n    function factorial(uint y) internal pure returns(uint) {\r\n        if (y == 1) {\r\n            return y;\r\n        } else {\r\n            uint product = y * factorial(y - 1);\r\n            return product;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nGenerates the source map:\r\n\r\n```\r\n0:1163:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;264:681;;;:::i;:::-;;;;;;;:::i;:::-;;;;;;;;;296:4;312:6;321:5;312:14;;336:6;345:1;336:10;;366:1;362;:5;;;;:::i;:::-;356:2;;:11;;;;;;;:::i;:::-;;;;;;;;383:1;378:6;;;;;:::i;:::-;;;399:1;394:6;;;;;:::i;:::-;;;415:1;410:6;;;;;:::i;:::-;;;432:1;427:6;;;;;:::i;:::-;;;448:1;443:6;;;;;:::i;:::-;;;460;478:1;474;469:2;:6;;;;:::i;:::-;:10;;;;:::i;:::-;460:19;;490:16;509:4;490:23;;527:11;523:48;;;559:1;554:6;;;;;:::i;:::-;;;523:48;580:8;591:1;580:12;;608:2;603:7;;;;;;;:::i;:::-;;;634:1;630;626;:5;;;;:::i;:::-;:9;;;;:::i;:::-;621:14;;;;;:::i;:::-;;;650:1;645:6;;;;;:::i;:::-;;;668:2;662:3;:8;;;;695:2;;692:1;686:12;;;;;;;;;;718:1;713:2;;:6;;;;:::i;:::-;708:2;:11;;;;734:2;729;:7;;;;755:14;747:5;;:22;;;;;;;;;;;;;;;;;;787:4;779:5;;:12;;;;;;;;;;;;;;;;;;802:21;826:14;802:38;;871:5;;;;;;;;;;;854:22;;:13;:22;;;850:59;;;897:1;892:6;;;;;:::i;:::-;;;850:59;926:12;936:1;926:9;:12::i;:::-;919:19;;;;;;;;264:681;:::o;951:210::-;1000:4;1025:1;1020;:6;1016:139;;;1049:1;1042:8;;;;1016:139;1081:12;1100:16;1114:1;1110;:5;;;;:::i;:::-;1100:9;:16::i;:::-;1096:1;:20;;;;:::i;:::-;1081:35;;1137:7;1130:14;;;951:210;;;;:::o;7:118:1:-;94:24;112:5;94:24;:::i;:::-;89:3;82:37;72:53;;:::o;131:222::-;;262:2;251:9;247:18;239:26;;275:71;343:1;332:9;328:17;319:6;275:71;:::i;:::-;229:124;;;;:::o;359:305::-;;418:20;436:1;418:20;:::i;:::-;413:25;;452:20;470:1;452:20;:::i;:::-;447:25;;606:1;538:66;534:74;531:1;528:81;525:2;;;612:18;;:::i;:::-;525:2;656:1;653;649:9;642:16;;403:261;;;;:::o;670:348::-;;733:20;751:1;733:20;:::i;:::-;728:25;;767:20;785:1;767:20;:::i;:::-;762:25;;955:1;887:66;883:74;880:1;877:81;872:1;865:9;858:17;854:105;851:2;;;962:18;;:::i;:::-;851:2;1010:1;1007;1003:9;992:20;;718:300;;;;:::o;1024:191::-;;1084:20;1102:1;1084:20;:::i;:::-;1079:25;;1118:20;1136:1;1118:20;:::i;:::-;1113:25;;1157:1;1154;1151:8;1148:2;;;1162:18;;:::i;:::-;1148:2;1207:1;1204;1200:9;1192:17;;1069:146;;;;:::o;1221:77::-;;1287:5;1276:16;;1266:32;;;:::o;1304:180::-;1352:77;1349:1;1342:88;1449:4;1446:1;1439:15;1473:4;1470:1;1463:15\r\n```\r\n\r\nWhich contains the line `7:118:1:-`. This line sets the file_id to 1 even though there is only one file in this example.\r\n\r\nAny thoughts on a workaround for this in the general case?\r\n\r\nI've double checked that this does not occur with prior versions of Solidity.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10806/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10806/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/762317693",
    "html_url": "https://github.com/ethereum/solidity/issues/10806#issuecomment-762317693",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10806",
    "id": 762317693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MjMxNzY5Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-18T15:24:54Z",
    "updated_at": "2021-01-18T15:24:54Z",
    "author_association": "MEMBER",
    "body": "The `1` refers to a file generated by the compiler: https://docs.soliditylang.org/en/v0.8.0/internals/source_mappings.html#source-mappings",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/762317693/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

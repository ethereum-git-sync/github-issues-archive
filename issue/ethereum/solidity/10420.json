{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10420",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10420/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10420/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10420/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10420",
  "id": 751793420,
  "node_id": "MDU6SXNzdWU3NTE3OTM0MjA=",
  "number": 10420,
  "title": "Static Linux and Windows builds with Z3",
  "user": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 437863668,
      "node_id": "MDU6TGFiZWw0Mzc4NjM2Njg=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/build%20system%20:building_construction:",
      "name": "build system :building_construction:",
      "color": "1d76db",
      "default": false,
      "description": ""
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-11-26T19:26:15Z",
  "updated_at": "2022-09-14T16:47:19Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "*The issue was raised in https://github.com/ethereum/solidity/issues/10166#issuecomment-734369933. I'm creating a separate issue to have a separate place to discuss it.*\r\n\r\nCurrently some of our release builds are statically linked with Z3 (emscripten, macOS), some have SMTChecker disabled (Linux) ~and some are dynamically linked with it (Windows)~ EDIT: Windows build is a static one without Z3 too.\r\n\r\nThe main argument against statically linking Z3 is the increased binary size. The argument for it is that we're already doing it on some platforms and that having to jump through hoops to enable SMTChecker discourages people from using it.\r\n\r\nAlso, if we want it, should we rebuild older versions in `solc-bin` or is it enough to provide it in newer builds? We did include Z3 in rebuilds of older macOS and emscripten versions but since SMTChecker is still experimental, it might be fine to just add Z3 now and not worry about older binaries.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10420/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10420/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734687515",
    "html_url": "https://github.com/ethereum/solidity/issues/10420#issuecomment-734687515",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10420",
    "id": 734687515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDY4NzUxNQ==",
    "user": {
      "login": "d-xo",
      "id": 6689924,
      "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/d-xo",
      "html_url": "https://github.com/d-xo",
      "followers_url": "https://api.github.com/users/d-xo/followers",
      "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
      "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
      "organizations_url": "https://api.github.com/users/d-xo/orgs",
      "repos_url": "https://api.github.com/users/d-xo/repos",
      "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/d-xo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T07:23:56Z",
    "updated_at": "2020-11-27T07:23:56Z",
    "author_association": "MEMBER",
    "body": "Would be great to have SMTChecker enabled for linux static builds. I personally would also be happy to see it included in older versions (at least back until 0.6 or so maybe).\r\n\r\nDo you know roughly the impact on binary size from including z3?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734687515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734845576",
    "html_url": "https://github.com/ethereum/solidity/issues/10420#issuecomment-734845576",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10420",
    "id": 734845576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDg0NTU3Ng==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T13:52:54Z",
    "updated_at": "2020-11-27T13:52:54Z",
    "author_association": "MEMBER",
    "body": "I think it should be comparable with the difference in macOS builds. See https://github.com/ethereum/solc-bin/pull/54#issuecomment-699991587. The size jumped from 4.6 MB in 0.4.16 (which was the last version before SMT) to 24 MB in 0.4.17. The latest binary is 32 MB, mostly due to `solc` itself.\r\n\r\nThe binary with Z3 is not huge in absolute terms but it's a big relative difference and multiplied by the number of platforms and versions, it matters in some contexts. For example the inclusion of Z3 in emscripten nightlies is the main reason why we went over the 10 GB limit in Github Pages so quickly and had to switch to a different way of hosting them. We're also not that far from going over the disk space limit in Github Actions (I think it's somewhere around 15 GB) which means that the CI workflows in solc-bin are going to become a little more complex - we won't be able to have a full checkout of the repo. We can handle the increase but we want to know it will actually benefit people and not be just dead weight.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/734845576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/735841178",
    "html_url": "https://github.com/ethereum/solidity/issues/10420#issuecomment-735841178",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10420",
    "id": 735841178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTg0MTE3OA==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T15:05:06Z",
    "updated_at": "2020-11-30T15:05:26Z",
    "author_association": "MEMBER",
    "body": "We discussed it on the call today but haven't come to a decision yet:\r\n- There was a proposal from @chriseth to provide two different release binaries for Linux. One with and the other without Z3.\r\n- Currently the binary is completely static. We'd like to also provide a binary that can just dynamically link to system Z3 if available.\r\n- @axic proposed two different builds: a size optimized one (with `-Os` and without static Z3) for use cases where it matters and speed optimized one (with Z3) for others.\r\n    - Problem: Z3 is huge and probably won't be affected much by `-Os` anyway (we haven't tried though).\r\n- One of the reasons why we still want to have a version without Z3 available is that when someone wants to just quickly try out several compiler versions, downloading big binaries is a pain.\r\n- The conclusion for now was that we still need more feedback about use cases.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/735841178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736448661",
    "html_url": "https://github.com/ethereum/solidity/issues/10420#issuecomment-736448661",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10420",
    "id": 736448661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNjQ0ODY2MQ==",
    "user": {
      "login": "d-xo",
      "id": 6689924,
      "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/d-xo",
      "html_url": "https://github.com/d-xo",
      "followers_url": "https://api.github.com/users/d-xo/followers",
      "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
      "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
      "organizations_url": "https://api.github.com/users/d-xo/orgs",
      "repos_url": "https://api.github.com/users/d-xo/repos",
      "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/d-xo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-01T11:19:49Z",
    "updated_at": "2020-12-01T11:19:49Z",
    "author_association": "MEMBER",
    "body": "@cameel thanks for all the info! :sparkles: :pray: \r\n\r\nTo make our use case clear: We have recently switched to using the static `solc` builds in dapptools, meaning that for recent versions of `solc` (0.7.x onwards) our linux users have no way to make use of the SMT checker with the solc versions provided by dapptools.\r\n\r\nWe believe that the SMT checker is a powerful and useful tool, and it is something that we ourselves use on audits, so we would very much like to be able to make this functionality available via dapptools without the hassle of maintaining our own CI chain specifically for `solc` (as we have been doing until recently).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/736448661/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5609",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5609/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5609/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5609/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5609",
  "id": 388424408,
  "node_id": "MDU6SXNzdWUzODg0MjQ0MDg=",
  "number": 5609,
  "title": "Allow assignment of overloaded function pointers to function variables",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-12-06T22:25:55Z",
  "updated_at": "2018-12-14T13:43:44Z",
  "closed_at": "2018-12-14T13:43:44Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nCurrently, it's impossible to assign an overloaded function to a function variable; the compiler complains that it cannot resolve the identifier.  This should be allowed, with resolution depending on the type of the variable.\r\n\r\n(I know there are several issues on here related to overloading already... I think this is a new one, though!  Not sure whether this was a bug or a feature request, but I decided to put it down as a feature request.  Thank you!)\r\n\r\n**Edit**: Sorry, I only realized while writing this that there's a problem here -- the implicit conversion rules for functions are too strict to allow what I want except in case of identical parameter types.  So, this request has a problem.  But, perhaps it could at least be allowed in that restrictive case of identical parameter types.  Thank you!\r\n\r\n## Motivation\r\n\r\nHere's a simplified example:\r\n\r\n```\r\ncontract OverloadTest {\r\n\r\n  function overloaded(uint x) public {}\r\n  function overloaded(address x) public {}\r\n\r\n  function overloadTest() public {\r\n    function (uint) internal over1i;\r\n    function (address) internal over2i;\r\n    function (uint) external over1e;\r\n    function (address) external over2e;\r\n    over1i = overloaded;\r\n    over2i = overloaded;\r\n    over1e = this.overloaded;\r\n    over2e = this.overloaded;\r\n  }\r\n}\r\n```\r\n\r\nAttempting to compile this yields the error `TypeError: No matching declaration found after variable lookup.`\r\n\r\n## Specification\r\n\r\nWhen an overloaded function name is assigned to a function variable, overload resolution should be invoked here based on the type of the variable that is being assigned to.  That is to say, we consider the input parameter types of the type of the variable, and perform overload resolution on the overloaded function as if it were being called with those types as the types of the input parameters.  The result can then be assigned to the variable (or result in a compile error, if it's incompatible in other ways, such as having incompatible return parameter types).   This should occur both for internal functions and internal function variables, and for external functions and external function variables.  So, in the above example, `over1i` would get the overload for `uint` input, and `over2i` would get the overload for `address` input; and similarly with the external analogues.\r\n\r\nFor a slightly less trivial example, if one were to write\r\n```\r\nfunction (uint8) internal over3i;\r\nover3i = overloaded;\r\n```\r\nthen `over3i` would be assigned the overload for `uint` input, as that's the overload that would be called if `overloaded` were called on `uint8` input.  **Edit**: Actually, this can't work at present, because the `function (uint) internal` is not presently implicitly convertible to `function (uint8) internal`.  It ought to be, but that's a separate feature request.  Oh well.  I guess only the trivial case can work at the moment.\r\n\r\nWhile if one were to write\r\n```\r\nfunction (uint) internal (returns uint) over4i;\r\nover4i = overloaded;\r\n```\r\nthen a compile error should result, as resolving the overload results in a value of type `function (uint) internal`, which cannot be implicitly converted to type `function (uint) internal (returns uint)`.  (**Edit**: And shouldn't be able to be so converted!)\r\n\r\nFurther assignments involving a variable that has been assigned to in this way, or other uses of that variable, would then not require any further resolution; it's just the initial overloaded identifier that requires resolution.\r\n\r\nNote that the above specification only covers assignments, and not more complicated expressions; but at the moment, if I'm not mistaken, the only things one can do with function values are A. invoke them (overloading resolution is already performed for that), B. store them (I'm asking that it be performed for this too), or C. attach `gas` or `value` to them (which doesn't much change matters, and currently the resulting functions can't be stored anyway).  So, I don't see this limitation as a problem.\r\n\r\n## Backwards Compatibility\r\n\r\nSince this solution only requires resolving an overload and then storing the result of the resolution in a function variable, in its usual representation, and doesn't require coming up with some new representation for function variables, there should be no backwards-compatibility issues.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5609/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5609/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/446918792",
    "html_url": "https://github.com/ethereum/solidity/issues/5609#issuecomment-446918792",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5609",
    "id": 446918792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjkxODc5Mg==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-13T10:28:34Z",
    "updated_at": "2018-12-13T10:28:34Z",
    "author_association": "MEMBER",
    "body": "I'm sorry, I know this is very useful, but we currently have no place in the language where the type of a right hand side is modified by the type of a left hand side during assignment. Changing that could result in many complications and misunderstandings.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/446918792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/447045731",
    "html_url": "https://github.com/ethereum/solidity/issues/5609#issuecomment-447045731",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5609",
    "id": 447045731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NzA0NTczMQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-13T17:06:35Z",
    "updated_at": "2018-12-13T17:06:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see, oh well. Thank you anyway!  Maybe eventually this will become possible, who knows.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/447045731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

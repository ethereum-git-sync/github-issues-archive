{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11204",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11204/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11204/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11204/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11204",
  "id": 847154773,
  "node_id": "MDU6SXNzdWU4NDcxNTQ3NzM=",
  "number": 11204,
  "title": "Behaviour with multiple different SPDX licenses",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4699444681,
      "node_id": "LA_kwDOAm_5kc8AAAABGBvVyQ",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/stale",
      "name": "stale",
      "color": "BF4801",
      "default": false,
      "description": "The issue/PR was marked as stale because it has been open for too long."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-03-31T19:04:34Z",
  "updated_at": "2022-11-25T12:44:53Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "`I.sol`:\r\n```\r\n// SPDX-License-Identifier: GPL-2.0-or-later\r\n\r\ninterface I {\r\n  function f() external;\r\n}\r\n```\r\n\r\n`C.sol`:\r\n```\r\n// SPDX-License-Identifier: GPL-3.0\r\n\r\nimport \"I.sol\";\r\n\r\ncontract C is I {\r\n  function f() override external {\r\n  }\r\n}\r\n```\r\n\r\nThe above seems to result in the following metadata:\r\n```\r\n{\"compiler\":{\"version\":\"0.8.4-develop.2021.3.26+commit.d75a132f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"f\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"I.sol\":\"I\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[]},\"sources\":{\"I.sol\":{\"keccak256\":\"0x84ec0dd55f9ee2668d9bd815128fc50341da0f95dc61daae52b5ce0c150324b9\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://d0745f91aebb069a887426c9252c7e87c9b3847a1d3ee931757fba606a1fc8fd\",\"dweb:/ipfs/QmerypZr5nJaJqJx4ja2cpkJ4a6Jpr463UGXLQoKjXxL2H\"]}},\"version\":1}\r\n```\r\n\r\nNotice that it decided to use the value of the first encountered SPDX license tag.\r\n\r\nSome potential options we could do:\r\na) Omit the license field if there are multiple different licenses\r\nb) Change the `license` field to be an array, and list all\r\nc) Issue an error(warning) if this happens\r\n\r\nProbably c) is a non-runner, and b) seems to be the most sane to me.\r\n\r\n(Noticed this while checking out [uniswap-v3-core](https://github.com/Uniswap/uniswap-v3-core) as it has some interfaces licensed as `GPL-2.0-or-later`, but the main contracts are `BUSL-1.1`.)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11204/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11204/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811359103",
    "html_url": "https://github.com/ethereum/solidity/issues/11204#issuecomment-811359103",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11204",
    "id": 811359103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTM1OTEwMw==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-31T19:11:11Z",
    "updated_at": "2021-03-31T19:11:11Z",
    "author_association": "MEMBER",
    "body": "Sorry, looked at the wrong generated output. The compiler properly generates the `GPL-2.0-or-later` metadata for the interface and `GPL-3.0` metadata for the contract.\r\n\r\nHowever, I think this behaviour is wrong, because it only outputs the license of the top level file used for compilation, but it should really list all the licenses present in every imported file. (Checking whether anything from those files is used does not matter, they are \"used\" as long as the file is imported.)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811359103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811810823",
    "html_url": "https://github.com/ethereum/solidity/issues/11204#issuecomment-811810823",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11204",
    "id": 811810823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTgxMDgyMw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T10:21:28Z",
    "updated_at": "2021-04-01T10:21:28Z",
    "author_association": "MEMBER",
    "body": "The metadata includes all sources required to compile the contract and for each source it includes the license. There is no \"top level file\".",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811810823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811941162",
    "html_url": "https://github.com/ethereum/solidity/issues/11204#issuecomment-811941162",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11204",
    "id": 811941162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTk0MTE2Mg==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T14:19:52Z",
    "updated_at": "2021-04-01T14:19:52Z",
    "author_association": "MEMBER",
    "body": "The \"top level file\" is the sourceunit in which the currently compiled contract is defined. I think it is misleading (and not very useful) we only include the license of that, and not a list of every single one included in the import chain.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/811941162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/814042371",
    "html_url": "https://github.com/ethereum/solidity/issues/11204#issuecomment-814042371",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11204",
    "id": 814042371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDA0MjM3MQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-06T11:23:23Z",
    "updated_at": "2021-04-06T11:23:23Z",
    "author_association": "MEMBER",
    "body": "In your example, I see one license tag per file and all files that are needed are included. Can you please explain what you are seeing?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/814042371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

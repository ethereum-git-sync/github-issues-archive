{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12782",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12782/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12782/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12782/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12782",
  "id": 1166774133,
  "node_id": "I_kwDOAm_5kc5Fi491",
  "number": 12782,
  "title": "allow specifying a function should be inlined in the signature",
  "user": {
    "login": "moodysalem",
    "id": 7897876,
    "node_id": "MDQ6VXNlcjc4OTc4NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7897876?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/moodysalem",
    "html_url": "https://github.com/moodysalem",
    "followers_url": "https://api.github.com/users/moodysalem/followers",
    "following_url": "https://api.github.com/users/moodysalem/following{/other_user}",
    "gists_url": "https://api.github.com/users/moodysalem/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/moodysalem/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/moodysalem/subscriptions",
    "organizations_url": "https://api.github.com/users/moodysalem/orgs",
    "repos_url": "https://api.github.com/users/moodysalem/repos",
    "events_url": "https://api.github.com/users/moodysalem/events{/privacy}",
    "received_events_url": "https://api.github.com/users/moodysalem/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-03-11T19:23:43Z",
  "updated_at": "2022-08-17T13:48:59Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "many internal functions are so small that they should be inlined to avoid a jump\r\n\r\nperhaps the solidity optimizer should handle this with a large number of runs, but some functions are expected to be run much more than others.\r\n\r\nit would be nice to be able to control whether a function is inlined where it's called at the callsite or in the function signature",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12782/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12782/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1065610851",
    "html_url": "https://github.com/ethereum/solidity/issues/12782#issuecomment-1065610851",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12782",
    "id": 1065610851,
    "node_id": "IC_kwDOAm_5kc4_g-5j",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-11T22:45:46Z",
    "updated_at": "2022-07-05T09:27:04Z",
    "author_association": "MEMBER",
    "body": "I cannot find an issue covering this but I think it was discussed before. I only see #10938, which is about improving the inlining in the optimizer.\r\n\r\nOverall, I remember that our position was that we want to make inlining heuristics better, not drop the responsibility on the users. In most cases the compiler is in a better position to make that decision. There are of course situations where you're hand-optimizing a specific piece of code and you'd make a better decision, but we prefer to focus on getting the optimizer better rather than on adding syntax for fine-tuning it, which complicates the language.\r\n\r\nHaving said that, I agree that there's a lot to improve here. The biggest reason why it isn't more aggressive right now are the \"Stack too deep\" errors. Inlining in most cases increases stack pressure so you're more likely to run into them. Work on that has been going for quite a while and we're actually reaching the point where we're considering relaxing the conditions for inlining, at least for the new code generator. See #12731.\r\n\r\nAnother obstacle was that it was hard to evaluate how much the change will affect real projects. That's also something we have taken care of - we now have a more extensive set of projects to benchmark against, including Uniswap - so you can expect more progress on that front.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1065610851/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1173888276",
    "html_url": "https://github.com/ethereum/solidity/issues/12782#issuecomment-1173888276",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12782",
    "id": 1173888276,
    "node_id": "IC_kwDOAm_5kc5F-B0U",
    "user": {
      "login": "toongeorges",
      "id": 6784449,
      "node_id": "MDQ6VXNlcjY3ODQ0NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6784449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toongeorges",
      "html_url": "https://github.com/toongeorges",
      "followers_url": "https://api.github.com/users/toongeorges/followers",
      "following_url": "https://api.github.com/users/toongeorges/following{/other_user}",
      "gists_url": "https://api.github.com/users/toongeorges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toongeorges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toongeorges/subscriptions",
      "organizations_url": "https://api.github.com/users/toongeorges/orgs",
      "repos_url": "https://api.github.com/users/toongeorges/repos",
      "events_url": "https://api.github.com/users/toongeorges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toongeorges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-04T14:31:44Z",
    "updated_at": "2022-07-04T18:15:52Z",
    "author_association": "NONE",
    "body": "I see the problem with \"Stack too deep\" errors, though would it not be possible to check if an internal/private function only uses variables that are passed as argument or not?\r\n\r\nIf a function only uses variables that are passed as argument, inlining this function should be straightforward?  If so, a function that is only used once could always be inlined.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1173888276/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1174845897",
    "html_url": "https://github.com/ethereum/solidity/issues/12782#issuecomment-1174845897",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12782",
    "id": 1174845897,
    "node_id": "IC_kwDOAm_5kc5GBrnJ",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T09:36:56Z",
    "updated_at": "2022-07-05T10:16:52Z",
    "author_association": "MEMBER",
    "body": "@toongeorges Maybe. Hard to say up front if it'll be worth it - I think that such functions are small in most cases and we're already inlining functions smaller than 6 or 8 lines of Yul code (as long as nothing else prevents it) - but it's an interesting idea and seems doable at least. You could submit it as a feature request and we'll consider it when extending the inliner. But as a separate issue - this one is about syntax for inlining.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1174845897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1175431484",
    "html_url": "https://github.com/ethereum/solidity/issues/12782#issuecomment-1175431484",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12782",
    "id": 1175431484,
    "node_id": "IC_kwDOAm_5kc5GD6k8",
    "user": {
      "login": "toongeorges",
      "id": 6784449,
      "node_id": "MDQ6VXNlcjY3ODQ0NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6784449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toongeorges",
      "html_url": "https://github.com/toongeorges",
      "followers_url": "https://api.github.com/users/toongeorges/followers",
      "following_url": "https://api.github.com/users/toongeorges/following{/other_user}",
      "gists_url": "https://api.github.com/users/toongeorges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toongeorges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toongeorges/subscriptions",
      "organizations_url": "https://api.github.com/users/toongeorges/orgs",
      "repos_url": "https://api.github.com/users/toongeorges/repos",
      "events_url": "https://api.github.com/users/toongeorges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toongeorges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T19:44:15Z",
    "updated_at": "2022-07-05T19:44:15Z",
    "author_association": "NONE",
    "body": "I created the issue #13248",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1175431484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

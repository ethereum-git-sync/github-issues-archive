{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/5479",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/5479/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/5479/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/5479/events",
  "html_url": "https://github.com/ethereum/solidity/issues/5479",
  "id": 383478736,
  "node_id": "MDU6SXNzdWUzODM0Nzg3MzY=",
  "number": 5479,
  "title": "ABIEncoderV2 + external = UnimplementedFeatureError",
  "user": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ekpyron",
    "id": 1347491,
    "node_id": "MDQ6VXNlcjEzNDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekpyron",
    "html_url": "https://github.com/ekpyron",
    "followers_url": "https://api.github.com/users/ekpyron/followers",
    "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
    "organizations_url": "https://api.github.com/users/ekpyron/orgs",
    "repos_url": "https://api.github.com/users/ekpyron/repos",
    "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekpyron/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ekpyron",
      "id": 1347491,
      "node_id": "MDQ6VXNlcjEzNDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1347491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekpyron",
      "html_url": "https://github.com/ekpyron",
      "followers_url": "https://api.github.com/users/ekpyron/followers",
      "following_url": "https://api.github.com/users/ekpyron/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekpyron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekpyron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekpyron/subscriptions",
      "organizations_url": "https://api.github.com/users/ekpyron/orgs",
      "repos_url": "https://api.github.com/users/ekpyron/repos",
      "events_url": "https://api.github.com/users/ekpyron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekpyron/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-11-22T10:39:25Z",
  "updated_at": "2020-03-23T16:52:19Z",
  "closed_at": "2019-01-21T11:03:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have solidity code that contains methods which rely on the ABIEncoderV2 to get input structs.\r\n\r\nIf the method is public (input stored in memory) everything works well. However, if the method is external (input stored in calldata) then the compiler gives me a \"NotImplementedFeatureError\"\r\n\r\nMinimal reproducible code:\r\n\r\n    pragma solidity ^0.4.25;\r\n    pragma experimental ABIEncoderV2;\r\n    contract Test {\r\n        event MyEvent(uint256 a);\r\n        struct MyStruct { uint256 a; }\r\n        function broadcast(MyStruct _value) external { emit MyEvent(_value.a); }\r\n    }\r\n\r\nError visible on remix with 0.4.25+commit.59dbf8f1.Emscripten.clang\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/5479/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/5479/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/440991475",
    "html_url": "https://github.com/ethereum/solidity/issues/5479#issuecomment-440991475",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5479",
    "id": 440991475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDk5MTQ3NQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-22T10:50:41Z",
    "updated_at": "2018-11-22T10:50:41Z",
    "author_association": "MEMBER",
    "body": "```\r\nUnimplemented feature:\r\n/Users/alex/Projects/solidity/libsolidity/codegen/ABIFunctions.cpp(1283): Throw in function std::__1::string dev::solidity::ABIFunctions::abiDecodingFunctionStruct(const dev::solidity::StructType &, bool)\r\nDynamic exception type: boost::exception_detail::clone_impl<dev::solidity::UnimplementedFeatureError>\r\nstd::exception::what: \r\n[dev::tag_comment*] = \r\n```\r\n\r\nI think this is about decoding from calldata for structs is not implemented.\r\n\r\n(The feature is also missing in 0.5.0.)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/440991475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/441000753",
    "html_url": "https://github.com/ethereum/solidity/issues/5479#issuecomment-441000753",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5479",
    "id": 441000753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTAwMDc1Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-22T11:26:18Z",
    "updated_at": "2018-11-22T11:26:18Z",
    "author_association": "MEMBER",
    "body": "The problem is that calldata structs are not a defined concept in Solidity. We might want to disallow calldata structs at the type checker level.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/441000753/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602029212",
    "html_url": "https://github.com/ethereum/solidity/issues/5479#issuecomment-602029212",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/5479",
    "id": 602029212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjAyOTIxMg==",
    "user": {
      "login": "gitpusha",
      "id": 36712489,
      "node_id": "MDQ6VXNlcjM2NzEyNDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36712489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gitpusha",
      "html_url": "https://github.com/gitpusha",
      "followers_url": "https://api.github.com/users/gitpusha/followers",
      "following_url": "https://api.github.com/users/gitpusha/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitpusha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitpusha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitpusha/subscriptions",
      "organizations_url": "https://api.github.com/users/gitpusha/orgs",
      "repos_url": "https://api.github.com/users/gitpusha/repos",
      "events_url": "https://api.github.com/users/gitpusha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitpusha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-21T11:16:59Z",
    "updated_at": "2020-03-23T16:52:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @chriseth ,\r\n\r\nI started using `ABIEncoderV2` yesterday in order to make use of `structs` in my function calls and to emit them or elements of them in events.\r\n\r\nNow I also got a `UnimplementedFeatureError` for the first time. \r\n\r\nIs it still the case that `calldata structs` are not a defined concept in Solidity? (the compiler did not warn about this).\r\n\r\nI was able to circumvent this compile error by marking all my functions that accept the `struct` as `public` and data location `memory`. Before, I thought this was only necessary, if I wanted to modify the struct in the function block, but apparently it always needs to be in `memory`, even if its element values are only `read`.\r\n\r\nOne strange thing is that now it compiles, even though I still have many solidity interface functions that are all `external` and defined with `Struct calldata _struct` as a param. I also inherit from the `interface` and `override` its methods with `public override`. \r\n\r\nIs this all intended behaviour by the compiler?\r\n\r\nEdit for explicitness:\r\n\r\nThis compiles (`ExecClaim` is a `struct`):\r\n\r\n```\r\nfunction exec(ExecClaim calldata _execClaim, bytes32 _execClaimHash) external;\r\n```\r\n\r\nThis also compiles (`ActionPayload` is a `struct`):\r\n\r\n```\r\nfunction action(bytes calldata _actionPayload) external payable override virtual {\r\n    (ActionPayload memory _p) = abi.decode(_actionPayload[4:], (ActionPayload));\r\n        action(_p);\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/602029212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

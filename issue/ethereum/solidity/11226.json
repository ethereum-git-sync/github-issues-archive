{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11226",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11226/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11226/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11226/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11226",
  "id": 853616207,
  "node_id": "MDU6SXNzdWU4NTM2MTYyMDc=",
  "number": 11226,
  "title": "Accepts Invalid code: events invocation accepted without \"emit\" keyword",
  "user": {
    "login": "Aleione",
    "id": 51761861,
    "node_id": "MDQ6VXNlcjUxNzYxODYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Aleione",
    "html_url": "https://github.com/Aleione",
    "followers_url": "https://api.github.com/users/Aleione/followers",
    "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
    "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
    "organizations_url": "https://api.github.com/users/Aleione/orgs",
    "repos_url": "https://api.github.com/users/Aleione/repos",
    "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Aleione/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "hrkrshnn",
    "id": 13174375,
    "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hrkrshnn",
    "html_url": "https://github.com/hrkrshnn",
    "followers_url": "https://api.github.com/users/hrkrshnn/followers",
    "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
    "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
    "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
    "repos_url": "https://api.github.com/users/hrkrshnn/repos",
    "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-04-08T15:54:13Z",
  "updated_at": "2021-04-12T09:10:33Z",
  "closed_at": "2021-04-12T09:10:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--## Prerequisites\r\n\r\nsolc 0.60.8.0\r\n\r\n*Delete the above section and the instructions in the sections below before submitting*\r\n\r\n-->\r\n\r\n## Description\r\n\r\n\r\nIn the below contracts, if you remove emit from the first event invocation it doesn't compile, if you switch the order of invocation it does not compile.\r\nIn this case it compiles despite missing of `emit` keyword for second event invocation.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.6.12, 0.7.0, 0.8.0 with or without optimizer enabled\r\n- Target EVM version (as per compiler settings): default\r\n- Framework/IDE (e.g. Truffle or Remix): Remix/Truffle/Hardhat\r\n- EVM execution environment / backend / blockchain client: any\r\n- Operating system: any\r\n\r\n## Steps to Reproduce\r\n\r\nCompile either of these contracts:\r\n\r\n\r\n```solidity\r\npragma solidity ^0.8.0;\r\n contract test {\r\n    \r\n    event SetFirstElem(uint indexed elem);\r\n    \r\n    event SetSecondElem(uint indexed elem);\r\n    \r\n    function setVal() external  {\r\n        emit SetFirstElem(0);\r\n    }\r\n\r\n    function setValX() external  {\r\n        SetFirstElem(1); //This should not compile\r\n    }\r\n}\r\n```\r\n\r\n```solidity\r\npragma solidity ^0.8.0;\r\n contract test2 {\r\n    \r\n    event SetFirstElem(uint indexed elem);\r\n    \r\n    event SetSecondElem(uint indexed elem);\r\n    \r\n    function setVal() external  {\r\n        emit SetFirstElem(0);\r\n    }\r\n\r\n    function setValX() external  {\r\n        SetSecondElem(1);  //This should not compile\r\n    }\r\n}\r\n```\r\n\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11226/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11226/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/817584700",
    "html_url": "https://github.com/ethereum/solidity/issues/11226#issuecomment-817584700",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11226",
    "id": 817584700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzU4NDcwMA==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-12T08:03:09Z",
    "updated_at": "2021-04-12T08:03:09Z",
    "author_association": "MEMBER",
    "body": "The reason is that `m_insideEmitStatement` is never reset to `false`. https://github.com/ethereum/solidity/blob/b04b189959cc4571f39269a8252a5a61ae9b14a6/libsolidity/analysis/PostTypeChecker.cpp#L297. The bug was accidentally fixed when implementing custom errors!\r\n\r\nI'll add a changelog entry and close this in develop.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/817584700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/817601174",
    "html_url": "https://github.com/ethereum/solidity/issues/11226#issuecomment-817601174",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11226",
    "id": 817601174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzYwMTE3NA==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-12T08:24:59Z",
    "updated_at": "2021-04-12T08:24:59Z",
    "author_association": "MEMBER",
    "body": "@Aleione Thanks for the issue. It was a really nice find.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/817601174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

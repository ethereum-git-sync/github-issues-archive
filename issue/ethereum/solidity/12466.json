{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12466/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12466/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12466/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12466",
  "id": 1090653615,
  "node_id": "I_kwDOAm_5kc5BAg2v",
  "number": 12466,
  "title": "Binary grouping; solc \"namespaces\"",
  "user": {
    "login": "Nielsbishere",
    "id": 28758736,
    "node_id": "MDQ6VXNlcjI4NzU4NzM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/28758736?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Nielsbishere",
    "html_url": "https://github.com/Nielsbishere",
    "followers_url": "https://api.github.com/users/Nielsbishere/followers",
    "following_url": "https://api.github.com/users/Nielsbishere/following{/other_user}",
    "gists_url": "https://api.github.com/users/Nielsbishere/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Nielsbishere/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Nielsbishere/subscriptions",
    "organizations_url": "https://api.github.com/users/Nielsbishere/orgs",
    "repos_url": "https://api.github.com/users/Nielsbishere/repos",
    "events_url": "https://api.github.com/users/Nielsbishere/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Nielsbishere/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-12-29T17:21:17Z",
  "updated_at": "2022-01-31T18:14:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nSometimes you might have helper functions that are put in a library because it makes sense to be there (for example; Math, Errors, XHelper, etc.). However, these all produce separate binaries that have to be deployed separately.\r\n\r\n## Motivation\r\n\r\nI have this in my project; there are a few helpers that are quite small and would benefit from being able to be bundled together so I don't have to deploy them separately and can link them more easily. \r\nCurrently I can \"fix\" it by just throwing them into the same library and prefixing functions/variables so that it indicates their real class.\r\n\r\n## Specification\r\n\r\nSomething akin to namespaces that specify where binaries are produced. Example;\r\n```sol\r\nnamespace Helpers {\r\n  library MyHelper {\r\n     function test() external pure { }\r\n  }\r\n  library MyOtherHelper {\r\n     function test() external pure { }\r\n  }\r\n}\r\n```\r\nShould produce Helpers.bin alongside of MyHelper.bin and MyOtherHelper.bin. It shouldn't replace it because people might want to only use one of the two libraries. \r\nNested namespaces could produce an inner and outer binary for further grouping.\r\n\r\n## Backwards Compatibility\r\n\r\nLibraries outside of a namespace would just function like they normally do.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12466/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12466/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002704337",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1002704337",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1002704337,
    "node_id": "IC_kwDOAm_5kc47xA3R",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-29T17:37:33Z",
    "updated_at": "2021-12-29T17:37:33Z",
    "author_association": "MEMBER",
    "body": "Thanks for creating this issue! I would like to understand your motivation a bit better. Are you really talking about libraries with external functions? Our current user research indicates that public (and external) library functions are a feature that is not very much used because of the high gas costs involved in calling such functions.\r\n\r\nI'm especially confused because you are talking about small members - wouldn't functions at file level be better suited for that? You can namespace them using files - the preferred namespacing in Solidity since it does not require a globally unique namespace.\r\n\r\nAs to your proposal: If you want to group multiple libraries into the same library binary, then you have to ensure that the function names (signatures) are different - otherwise it is not clear which library function you want to call.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002704337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002725372",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1002725372",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1002725372,
    "node_id": "IC_kwDOAm_5kc47xF_8",
    "user": {
      "login": "Nielsbishere",
      "id": 28758736,
      "node_id": "MDQ6VXNlcjI4NzU4NzM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/28758736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nielsbishere",
      "html_url": "https://github.com/Nielsbishere",
      "followers_url": "https://api.github.com/users/Nielsbishere/followers",
      "following_url": "https://api.github.com/users/Nielsbishere/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nielsbishere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nielsbishere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nielsbishere/subscriptions",
      "organizations_url": "https://api.github.com/users/Nielsbishere/orgs",
      "repos_url": "https://api.github.com/users/Nielsbishere/repos",
      "events_url": "https://api.github.com/users/Nielsbishere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nielsbishere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-29T18:29:03Z",
    "updated_at": "2021-12-29T18:29:03Z",
    "author_association": "NONE",
    "body": "@chriseth I've not deployed anything yet; however, as far as I understand there is a 24KiB limit of a contract. This basically requires me to use libraries to circumvent it, unless this limit was removed at some point and I missed it. One of the use cases is that I pack multiple tokens into 1 uint256 (2 to 64 various tokens) and the (un)packing logic is quite bulky though it saves a lot of gas for sstore/sload operations (so this needs their own library). \r\n\r\nYou're absolutely right about that; I never saw them used that way and so assumed Solidity was more like Java in the way that functions have to belong to a library/contract/interface. The only thing I dislike about that is that the file structure would be less clean as there would be one file that contains multiple \"libraries\", though I guess that should do for now, thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002725372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002742616",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1002742616",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1002742616,
    "node_id": "IC_kwDOAm_5kc47xKNY",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-29T19:18:50Z",
    "updated_at": "2021-12-29T19:18:50Z",
    "author_association": "MEMBER",
    "body": "Yes, the size limit is still active, but I think you should still find a way to avoid too many external calls. As far as I know, people usually split the functionality of a contract into multiple areas and do not even use delegatecall for that.\r\n\r\nWhy would you need one file containing multiple libraries? There is on file number limit :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002742616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002747938",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1002747938",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1002747938,
    "node_id": "IC_kwDOAm_5kc47xLgi",
    "user": {
      "login": "Nielsbishere",
      "id": 28758736,
      "node_id": "MDQ6VXNlcjI4NzU4NzM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/28758736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nielsbishere",
      "html_url": "https://github.com/Nielsbishere",
      "followers_url": "https://api.github.com/users/Nielsbishere/followers",
      "following_url": "https://api.github.com/users/Nielsbishere/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nielsbishere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nielsbishere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nielsbishere/subscriptions",
      "organizations_url": "https://api.github.com/users/Nielsbishere/orgs",
      "repos_url": "https://api.github.com/users/Nielsbishere/repos",
      "events_url": "https://api.github.com/users/Nielsbishere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nielsbishere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-29T19:34:49Z",
    "updated_at": "2021-12-29T19:35:35Z",
    "author_association": "NONE",
    "body": "@chriseth Hmm, I'm not sure how I would go about doing that. The contract is quite packed with functionality; though it only calls external where it's needed. It basically stores a private struct and passes that along to library functions that use it. The only thing this main contract does is provide a layer to call these functions for clients or other smart contracts and it emits events for transparency to nodes. This library then does internal (private/public) calls which shouldn't do a bunch of delegate calls, right? What would be the cost of these delegate calls?\r\n\r\nI put libraries in quotes because currently they are libraries, but if they were global functions then you'd have to include 1 file that contains all these functions at once; which makes file structure a little less clean. But it doesn't matter that much tbh.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1002747938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1026014340",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1026014340",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1026014340,
    "node_id": "IC_kwDOAm_5kc49J7yE",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T17:15:38Z",
    "updated_at": "2022-01-31T17:15:38Z",
    "author_association": "MEMBER",
    "body": "If you use global functions (as well as internal library functions), only the functions that are called are included in the bytecode. You can split functions across multiple files in any way you wish. If you want to use a function from a different file, you just have to import it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1026014340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1026067783",
    "html_url": "https://github.com/ethereum/solidity/issues/12466#issuecomment-1026067783",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12466",
    "id": 1026067783,
    "node_id": "IC_kwDOAm_5kc49KI1H",
    "user": {
      "login": "Nielsbishere",
      "id": 28758736,
      "node_id": "MDQ6VXNlcjI4NzU4NzM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/28758736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nielsbishere",
      "html_url": "https://github.com/Nielsbishere",
      "followers_url": "https://api.github.com/users/Nielsbishere/followers",
      "following_url": "https://api.github.com/users/Nielsbishere/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nielsbishere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nielsbishere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nielsbishere/subscriptions",
      "organizations_url": "https://api.github.com/users/Nielsbishere/orgs",
      "repos_url": "https://api.github.com/users/Nielsbishere/repos",
      "events_url": "https://api.github.com/users/Nielsbishere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nielsbishere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T18:14:41Z",
    "updated_at": "2022-01-31T18:14:41Z",
    "author_association": "NONE",
    "body": "Yeah I'm using global functions now for the things I can. Some generate too much bytecode tho so I can't stop using library functions unfortunately. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1026067783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4358",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4358/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4358/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4358/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4358",
  "id": 336064842,
  "node_id": "MDU6SXNzdWUzMzYwNjQ4NDI=",
  "number": 4358,
  "title": "How to call a token contract in another contract.",
  "user": {
    "login": "carbonnetwork",
    "id": 40283400,
    "node_id": "MDQ6VXNlcjQwMjgzNDAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/40283400?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carbonnetwork",
    "html_url": "https://github.com/carbonnetwork",
    "followers_url": "https://api.github.com/users/carbonnetwork/followers",
    "following_url": "https://api.github.com/users/carbonnetwork/following{/other_user}",
    "gists_url": "https://api.github.com/users/carbonnetwork/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carbonnetwork/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carbonnetwork/subscriptions",
    "organizations_url": "https://api.github.com/users/carbonnetwork/orgs",
    "repos_url": "https://api.github.com/users/carbonnetwork/repos",
    "events_url": "https://api.github.com/users/carbonnetwork/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carbonnetwork/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-06-27T03:29:47Z",
  "updated_at": "2018-06-29T06:31:31Z",
  "closed_at": "2018-06-27T09:00:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have a ERC20 token contract. when I used javascript call the contract it worked very well.But when I call it in my another contract, it can't be work normally. My token inherited structure:\r\n\r\n```\r\nERC20\r\nStandardToken is ERC20\r\nMyToken is StandardToken\r\n```\r\n I run these case below with truffle test. \r\n\r\nFirst, I used like this:\r\n```\r\nMyToken token = MyToken(address);\r\ntoken.transfer(_to,2000);\r\n```\r\nBecase the msg.sender is caller address, it can't be transfer token from user who initiate the transaction.\r\n\r\nThen , I tried like this: \r\n```\r\nbool res = tokenAddress.delegatecall(bytes4(keccak256(\"transfer(address,uint256)\")),_to, _amout);\r\n&\r\nassembly {\r\n  mstore(mload(0x40), sig)\r\n  mstore(add(4, mload(0x40)),_to)\r\n  mstore(add(36,mload(0x40)),_amout)\r\n  r := delegatecall(sub(gas, 700), tokenAddress, mload(0x40), 68, mload(0x40), 1)\r\n}\r\n```\r\nIn this case, although the msg.sender is expected, but the balance of msg.sender is 0(msg.sender is the token contract owner,it should have many tokens), it was not correct.\r\n\r\nAnyone who knows what should I do can make it work well. Please tell me, and thank you very much.\r\n\r\n\r\n",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4358/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4358/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/400597943",
    "html_url": "https://github.com/ethereum/solidity/issues/4358#issuecomment-400597943",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4358",
    "id": 400597943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDU5Nzk0Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-27T09:00:22Z",
    "updated_at": "2018-06-27T09:00:22Z",
    "author_association": "MEMBER",
    "body": "Sorry, but this does not sound like a compiler bug and the solidity issue tracker is not meant to be used for language support. Could you ask you question in http://gitter.im/ethereum/solidity or on ethereum.stackexchange.org, please?\r\n\r\nIt might be that you are running your contract on a testnet that is not set to byzantium mode.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/400597943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/401261179",
    "html_url": "https://github.com/ethereum/solidity/issues/4358#issuecomment-401261179",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4358",
    "id": 401261179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTI2MTE3OQ==",
    "user": {
      "login": "carbonnetwork",
      "id": 40283400,
      "node_id": "MDQ6VXNlcjQwMjgzNDAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/40283400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carbonnetwork",
      "html_url": "https://github.com/carbonnetwork",
      "followers_url": "https://api.github.com/users/carbonnetwork/followers",
      "following_url": "https://api.github.com/users/carbonnetwork/following{/other_user}",
      "gists_url": "https://api.github.com/users/carbonnetwork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carbonnetwork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carbonnetwork/subscriptions",
      "organizations_url": "https://api.github.com/users/carbonnetwork/orgs",
      "repos_url": "https://api.github.com/users/carbonnetwork/repos",
      "events_url": "https://api.github.com/users/carbonnetwork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carbonnetwork/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-29T06:31:31Z",
    "updated_at": "2018-06-29T06:31:31Z",
    "author_association": "NONE",
    "body": "@chriseth  OKï¼ŒThanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/401261179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/8269/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/8269/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/8269/events",
  "html_url": "https://github.com/ethereum/solidity/issues/8269",
  "id": 562299300,
  "node_id": "MDU6SXNzdWU1NjIyOTkzMDA=",
  "number": 8269,
  "title": "ICE in the CSE optimizer",
  "user": {
    "login": "agroce",
    "id": 967816,
    "node_id": "MDQ6VXNlcjk2NzgxNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/agroce",
    "html_url": "https://github.com/agroce",
    "followers_url": "https://api.github.com/users/agroce/followers",
    "following_url": "https://api.github.com/users/agroce/following{/other_user}",
    "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
    "organizations_url": "https://api.github.com/users/agroce/orgs",
    "repos_url": "https://api.github.com/users/agroce/repos",
    "events_url": "https://api.github.com/users/agroce/events{/privacy}",
    "received_events_url": "https://api.github.com/users/agroce/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "hrkrshnn",
    "id": 13174375,
    "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hrkrshnn",
    "html_url": "https://github.com/hrkrshnn",
    "followers_url": "https://api.github.com/users/hrkrshnn/followers",
    "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
    "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
    "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
    "repos_url": "https://api.github.com/users/hrkrshnn/repos",
    "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 18,
  "created_at": "2020-02-10T03:13:34Z",
  "updated_at": "2020-05-18T09:27:27Z",
  "closed_at": "2020-05-18T09:27:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThis contract:\r\n```solidity\r\ncontract C\r\n{\r\n    struct s1 {\r\n        uint x;\r\n    }\r\n    function fun_x() public {}\r\n    function fun_y() public {}\r\n    function f() public {\r\n        uint h = true ? 1 : 3;\r\n    }\r\n    function f2() public {\r\n    }\r\n        function () r = true ? fun_x : fun_y;\r\n    function f3() public {\r\n    }\r\n}\r\n```\r\n\r\nproduces:\r\n\r\n```\r\nInvalid error: \"InternalCompilerError\"\r\nterminate called after throwing an instance of 'std::runtime_error'\r\n  what():  Invalid error: \"InternalCompilerError\"\r\n```\r\n\r\nwhen run with solfuzzer (solc alone seems ok)\r\n\r\nOn master, using AFL fuzzing.  This was found with a new approach, that inlines a generic C-like source code mutation tool as a high-probability AFL havoc mutator.\r\n\r\n## Environment\r\n\r\n- Compiler version:  0.6.3-develop.2020.2.10+commit.e8eb1f2d.Linux.clang\r\n- Target EVM version (as per compiler settings): N/A\r\n- Framework/IDE (e.g. Truffle or Remix): N/A\r\n- EVM execution environment / backend / blockchain client: N/A\r\n- Operating system: Ubuntu 18.04 in docker\r\n\r\n## Steps to Reproduce\r\n\r\nSave this contract in `shrink.sol` (or whatever filename)\r\n\r\n```solidity\r\ncontract C\r\n{\r\n    struct s1 {\r\n        uint x;\r\n    }\r\n    function fun_x() public {}\r\n    function fun_y() public {}\r\n    function f() public {\r\n        uint h = true ? 1 : 3;\r\n    }\r\n    function f2() public {\r\n    }\r\n        function () r = true ? fun_x : fun_y;\r\n    function f3() public {\r\n    }\r\n}\r\n```\r\n\r\nproduces:\r\n\r\n```\r\n> solfuzzer < shrink.sol \r\nInvalid error: \"InternalCompilerError\"\r\nterminate called after throwing an instance of 'std::runtime_error'\r\n  what():  Invalid error: \"InternalCompilerError\"\r\n```\r\n",
  "closed_by": {
    "login": "hrkrshnn",
    "id": 13174375,
    "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hrkrshnn",
    "html_url": "https://github.com/hrkrshnn",
    "followers_url": "https://api.github.com/users/hrkrshnn/followers",
    "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
    "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
    "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
    "repos_url": "https://api.github.com/users/hrkrshnn/repos",
    "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/8269/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/8269/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584157524",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584157524",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584157524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE1NzUyNA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T14:47:25Z",
    "updated_at": "2020-02-10T14:47:25Z",
    "author_association": "MEMBER",
    "body": "@bshastry can you check this, please? I was not able to reproduce it. The assertion is triggered inside a catch clause. It would be good to know what the inner exception was.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584157524/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584163318",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584163318",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584163318,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE2MzMxOA==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T14:59:07Z",
    "updated_at": "2020-02-10T14:59:07Z",
    "author_association": "NONE",
    "body": "I'm running these on the afl-instrumented build, could cause reproduction problems.  To get roughly that, compile with afl and crank AFL_INST_RATIO up to 10.  I'll make a no-inst solc to check on, but assume anything only showing up with inst is still a real problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584163318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584163704",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584163704",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584163704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE2MzcwNA==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T14:59:53Z",
    "updated_at": "2020-02-10T14:59:53Z",
    "author_association": "NONE",
    "body": "(There's some randomness in the instrumentation, but probably not critical)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584163704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584165634",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584165634",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584165634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE2NTYzNA==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:03:52Z",
    "updated_at": "2020-02-10T15:03:52Z",
    "author_association": "NONE",
    "body": "Aha, may be that I somehow copied in wrong version.\r\n\r\n`0.6.3-develop.2020.2.10+commit.e8eb1f2d.Linux.clang` is actual solc version output.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584165634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584169166",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584169166",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584169166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE2OTE2Ng==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:11:05Z",
    "updated_at": "2020-02-10T15:11:05Z",
    "author_association": "MEMBER",
    "body": "Is it possible to reduce the input a little more? Can you run this in a debugger and see where the inner exception is throw? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584169166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584174108",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584174108",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584174108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE3NDEwOA==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:20:59Z",
    "updated_at": "2020-02-10T15:20:59Z",
    "author_association": "NONE",
    "body": "Let me see about further reduction, this is line level.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584174108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584186373",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584186373",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584186373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE4NjM3Mw==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:45:22Z",
    "updated_at": "2020-02-10T15:45:22Z",
    "author_association": "NONE",
    "body": "```solidity\r\ncontract C {\r\n  function fun_x () public {}\r\n  function fun_y () public{}\r\n  function f() public\r\n  {\r\n    int h=true?1:3;\r\n  }\r\n  function () r=true?fun_x:fun_y;\r\n}\r\n```\r\n\r\nis a pretty minimal shrink.  Debugger isn't installled on this docker, will get to that later this morning, maybe.  With the right commit info above, and this, maybe it'll repro for you.  Remember needs optimization on.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584186373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584187050",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584187050",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584187050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE4NzA1MA==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:46:44Z",
    "updated_at": "2020-02-10T15:46:44Z",
    "author_association": "NONE",
    "body": "Exact solc run:\r\n```\r\n> solc shrink.sol --optimize\r\nInternal compiler error during compilation:\r\n/home/user/solidity/libsolidity/interface/CompilerStack.cpp(1068): Throw in function void solidity::frontend::CompilerStack::compileContract(const solidity::frontend::ContractDefinition &, map<const solidity::frontend::ContractDefinition *, shared_ptr<const solidity::frontend::Compiler> > &)\r\nDynamic exception type: boost::exception_detail::clone_impl<solidity::langutil::InternalCompilerError>\r\nstd::exception::what: Assembly exception for bytecode\r\n[solidity::util::tag_comment*] = Assembly exception for bytecode\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584187050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584188355",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584188355",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584188355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDE4ODM1NQ==",
    "user": {
      "login": "agroce",
      "id": 967816,
      "node_id": "MDQ6VXNlcjk2NzgxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/967816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agroce",
      "html_url": "https://github.com/agroce",
      "followers_url": "https://api.github.com/users/agroce/followers",
      "following_url": "https://api.github.com/users/agroce/following{/other_user}",
      "gists_url": "https://api.github.com/users/agroce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agroce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agroce/subscriptions",
      "organizations_url": "https://api.github.com/users/agroce/orgs",
      "repos_url": "https://api.github.com/users/agroce/repos",
      "events_url": "https://api.github.com/users/agroce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agroce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T15:49:15Z",
    "updated_at": "2020-02-10T15:49:15Z",
    "author_association": "NONE",
    "body": "ah, maybe this will help:\r\n\r\n```\r\n(gdb) bt\r\n#0  0x00007fda9f5a3ced in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#1  0x0000000000740376 in boost::throw_exception<solidity::evmasm::AssemblyException> (e=...)\r\n    at /usr/include/boost/throw_exception.hpp:69\r\n#2  0x0000000000bef8da in solidity::evmasm::Assembly::assemble (this=<optimized out>)\r\n    at /home/user/solidity/libevmasm/Assembly.cpp:631\r\n#3  0x000000000055c2e0 in solidity::frontend::CompilerContext::assembledObject (\r\n    this=0xe15750 <vtable for boost::exception_detail::clone_impl<solidity::evmasm::InvalidDeposit>+136>)\r\n    at /home/user/solidity/libsolidity/codegen/CompilerContext.h:251\r\n#4  solidity::frontend::Compiler::assembledObject (\r\n    this=0xe15450 <typeinfo for boost::exception_detail::clone_impl<solidity::evmasm::AssemblyException>>) at /home/user/solidity/libsolidity/codegen/Compiler.h:59\r\n#5  0x00000000005466ae in solidity::frontend::CompilerStack::compileContract (this=<optimized out>, \r\n    _contract=..., _otherCompilers=...)\r\n    at /home/user/solidity/libsolidity/interface/CompilerStack.cpp:1064\r\n#6  0x0000000000545cb0 in solidity::frontend::CompilerStack::compile (this=0x2e2fc70)\r\n    at /home/user/solidity/libsolidity/interface/CompilerStack.cpp:497\r\n#7  0x000000000043d830 in solidity::frontend::CommandLineInterface::processInput (this=<optimized out>)\r\n    at /home/user/solidity/solc/CommandLineInterface.cpp:1147\r\n#8  0x000000000047797e in main (argc=3, argv=<optimized out>) at /home/user/solidity/solc/main.cpp:59\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584188355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584201790",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584201790",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584201790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDIwMTc5MA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T16:14:23Z",
    "updated_at": "2020-02-10T16:14:23Z",
    "author_association": "MEMBER",
    "body": "So the failing assertion is\r\n\r\n```\r\n\t\tassertThrow(pos != size_t(-1), AssemblyException, \"Reference to tag without position.\");\r\n```\r\n\r\nI think we need to reproduce this to fix it. Thanks again for reporting!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584201790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584205585",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584205585",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584205585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDIwNTU4NQ==",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T16:22:15Z",
    "updated_at": "2020-02-10T16:22:15Z",
    "author_association": "MEMBER",
    "body": "I can reproduce it with his latest example",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584205585/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584219718",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584219718",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584219718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDIxOTcxOA==",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-10T16:51:23Z",
    "updated_at": "2020-02-10T16:51:23Z",
    "author_association": "MEMBER",
    "body": "Problem seems to be in the CSE optimizer",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584219718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584486712",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584486712",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584486712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDQ4NjcxMg==",
    "user": {
      "login": "bshastry",
      "id": 2388185,
      "node_id": "MDQ6VXNlcjIzODgxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2388185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bshastry",
      "html_url": "https://github.com/bshastry",
      "followers_url": "https://api.github.com/users/bshastry/followers",
      "following_url": "https://api.github.com/users/bshastry/following{/other_user}",
      "gists_url": "https://api.github.com/users/bshastry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bshastry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bshastry/subscriptions",
      "organizations_url": "https://api.github.com/users/bshastry/orgs",
      "repos_url": "https://api.github.com/users/bshastry/repos",
      "events_url": "https://api.github.com/users/bshastry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bshastry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T05:48:43Z",
    "updated_at": "2020-02-11T05:48:43Z",
    "author_association": "MEMBER",
    "body": "I can reproduce it with the shrunk example.\r\n\r\n> I think we need to reproduce this to fix it.\r\n\r\nDo you mean we need to reproduce it via a standalone assembly snippet?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584486712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584600325",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584600325",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584600325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDYwMDMyNQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T11:54:19Z",
    "updated_at": "2020-02-11T11:54:19Z",
    "author_association": "MEMBER",
    "body": "@Marenz can you provide more details? Could this be a critical bug or is it always caught by the assertion?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584600325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584602326",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-584602326",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 584602326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDYwMjMyNg==",
    "user": {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T12:00:12Z",
    "updated_at": "2020-02-11T12:00:12Z",
    "author_association": "MEMBER",
    "body": "I basically disabled all optimizations and re-enabled them one by one until it crashed and the CSE was the one that caused it. I didn't get further in my analysis",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/584602326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/625480079",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-625480079",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 625480079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTQ4MDA3OQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T20:28:27Z",
    "updated_at": "2020-05-07T20:28:27Z",
    "author_association": "MEMBER",
    "body": "Still an issue today, seems to fail in the same place.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/625480079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/625524910",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-625524910",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 625524910,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTUyNDkxMA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T22:16:54Z",
    "updated_at": "2020-05-07T22:16:54Z",
    "author_association": "MEMBER",
    "body": "Looks like an internal function referenced by the constructor, stored in storage but the optimizer removes the runtime tag of that function...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/625524910/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/629275691",
    "html_url": "https://github.com/ethereum/solidity/issues/8269#issuecomment-629275691",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/8269",
    "id": 629275691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTI3NTY5MQ==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-15T14:46:38Z",
    "updated_at": "2020-05-15T15:06:04Z",
    "author_association": "MEMBER",
    "body": "This is a bug in the BlockDeDuplicator.\r\n\r\nI'm using the following code\r\n```solidity\r\ncontract C {\r\n\tfunction fun_x() public {}\r\n\tfunction fun_() public {}\r\n \tfunction f() public { true ? 1 : 3;}\r\n\tfunction() r = true ? fun_x : f;\r\n}\r\n```\r\n\r\nThe above code produced the unoptimized assembly (`./solc --asm`):\r\n```asm\r\n======= /tmp/shrink.sol:C =======\r\nEVM assembly:\r\n    /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\n  mstore(0x40, 0x80)\r\n    /* \"/tmp/shrink.sol\":123:127  true */\r\n  0x01\r\n    /* \"/tmp/shrink.sol\":123:139  true ? fun_x : f */\r\n  tag_1\r\n  jumpi\r\n    /* \"/tmp/shrink.sol\":138:139  f */\r\n  or(tag_0_7, shl(0x20, tag_2))\r\n    /* \"/tmp/shrink.sol\":123:139  true ? fun_x : f */\r\n  jump(tag_3)\r\ntag_1:\r\n    /* \"/tmp/shrink.sol\":130:135  fun_x */\r\n  or(tag_0_11, shl(0x20, tag_4))\r\n    /* \"/tmp/shrink.sol\":123:139  true ? fun_x : f */\r\ntag_3:\r\n    /* \"/tmp/shrink.sol\":108:139  function() r = true ? fun_x : f */\r\n  0x00\r\n  dup1\r\n  0x0100\r\n  exp\r\n  dup2\r\n  sload\r\n  dup2\r\n  0xffffffffffffffff\r\n  mul\r\n  not\r\n  and\r\n  swap1\r\n  dup4\r\n  0xffffffffffffffff\r\n  and\r\n  mul\r\n  or\r\n  swap1\r\n  sstore\r\n  pop\r\n    /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\n  callvalue\r\n    /* \"--CODEGEN--\":5:14   */\r\n  dup1\r\n    /* \"--CODEGEN--\":2:4   */\r\n  iszero\r\n  tag_5\r\n  jumpi\r\n    /* \"--CODEGEN--\":27:28   */\r\n  0x00\r\n    /* \"--CODEGEN--\":24:25   */\r\n  dup1\r\n    /* \"--CODEGEN--\":17:29   */\r\n  revert\r\n    /* \"--CODEGEN--\":2:4   */\r\ntag_5:\r\n    /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\n  pop\r\n  jump(tag_6)\r\n    /* \"/tmp/shrink.sol\":70:106  function f() public { true ? 1 : 3;} */\r\ntag_2:\r\n    /* \"/tmp/shrink.sol\":92:96  true */\r\n  0x01\r\n    /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\n  tag_8\r\n  jumpi\r\n    /* \"/tmp/shrink.sol\":103:104  3 */\r\n  0x03\r\n    /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\n  jump(tag_9)\r\ntag_8:\r\n    /* \"/tmp/shrink.sol\":99:100  1 */\r\n  0x01\r\n    /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\ntag_9:\r\n  pop\r\n    /* \"/tmp/shrink.sol\":70:106  function f() public { true ? 1 : 3;} */\r\n  jump\t// out\r\n    /* \"/tmp/shrink.sol\":14:40  function fun_x() public {} */\r\ntag_4:\r\n  jump\t// out\r\n    /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\ntag_6:\r\n  dataSize(sub_0)\r\n  dup1\r\n  dataOffset(sub_0)\r\n  0x00\r\n  codecopy\r\n  0x00\r\n  return\r\nstop\r\n\r\nsub_0: assembly {\r\n        /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\n      mstore(0x40, 0x80)\r\n      callvalue\r\n        /* \"--CODEGEN--\":5:14   */\r\n      dup1\r\n        /* \"--CODEGEN--\":2:4   */\r\n      iszero\r\n      tag_1\r\n      jumpi\r\n        /* \"--CODEGEN--\":27:28   */\r\n      0x00\r\n        /* \"--CODEGEN--\":24:25   */\r\n      dup1\r\n        /* \"--CODEGEN--\":17:29   */\r\n      revert\r\n        /* \"--CODEGEN--\":2:4   */\r\n    tag_1:\r\n        /* \"/tmp/shrink.sol\":0:142  contract C {... */\r\n      pop\r\n      jumpi(tag_2, lt(calldatasize, 0x04))\r\n      shr(0xe0, calldataload(0x00))\r\n      dup1\r\n      0x26121ff0\r\n      eq\r\n      tag_3\r\n      jumpi\r\n      dup1\r\n      0x2e1fb2bc\r\n      eq\r\n      tag_4\r\n      jumpi\r\n      dup1\r\n      0x4753a67d\r\n      eq\r\n      tag_5\r\n      jumpi\r\n    tag_2:\r\n        /* \"--CODEGEN--\":12:13   */\r\n      0x00\r\n        /* \"--CODEGEN--\":9:10   */\r\n      dup1\r\n        /* \"--CODEGEN--\":2:14   */\r\n      revert\r\n        /* \"/tmp/shrink.sol\":70:106  function f() public { true ? 1 : 3;} */\r\n    tag_3:\r\n      tag_6\r\n      tag_7\r\n      jump\t// in\r\n    tag_6:\r\n      stop\r\n        /* \"/tmp/shrink.sol\":42:67  function fun_() public {} */\r\n    tag_4:\r\n      tag_8\r\n      tag_9\r\n      jump\t// in\r\n    tag_8:\r\n      stop\r\n        /* \"/tmp/shrink.sol\":14:40  function fun_x() public {} */\r\n    tag_5:\r\n      tag_10\r\n      tag_11\r\n      jump\t// in\r\n    tag_10:\r\n      stop\r\n        /* \"/tmp/shrink.sol\":70:106  function f() public { true ? 1 : 3;} */\r\n    tag_7:\r\n        /* \"/tmp/shrink.sol\":92:96  true */\r\n      0x01\r\n        /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\n      tag_13\r\n      jumpi\r\n        /* \"/tmp/shrink.sol\":103:104  3 */\r\n      0x03\r\n        /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\n      jump(tag_14)\r\n    tag_13:\r\n        /* \"/tmp/shrink.sol\":99:100  1 */\r\n      0x01\r\n        /* \"/tmp/shrink.sol\":92:104  true ? 1 : 3 */\r\n    tag_14:\r\n      pop\r\n        /* \"/tmp/shrink.sol\":70:106  function f() public { true ? 1 : 3;} */\r\n      jump\t// out\r\n        /* \"/tmp/shrink.sol\":42:67  function fun_() public {} */\r\n    tag_9:\r\n      jump\t// out\r\n        /* \"/tmp/shrink.sol\":14:40  function fun_x() public {} */\r\n    tag_11:\r\n      jump\t// out\r\n\r\n    auxdata: 0xa2646970667358221220ccf6df9d64de41e3f3d92617ef3358933e874733a96bb195064e4db54340ed6c64736f6c63782b302e362e382d646576656c6f702e323032302e352e31352b636f6d6d69742e63613433313466352e6d6f64005c\r\n}\r\n```\r\n\r\nWhen `--optimize` is enabled, inside `sub_0`, the `BlockDeDuplicator` does the following changes. (the first one gets replaced by the second)\r\n1. `tag_5 <- tag_4`\r\n2. `tag_8 <- tag_6`\r\n3. `tag_10 <- tag_6`\r\n4. `tag_11 <- tag_9`\r\n5. `tag_4 <- tag_3`\r\n6. `tag_9 <- tag_7`\r\n\r\nThe tags, `tag_7` and `tag_11` are referenced from the top in   `or(tag_0_7, shl(0x20, tag_2))` and `or(tag_0_11, shl(0x20, tag_4)` respectively. When the replacements happen at the top, `tag_11` gets replaced by `tag_9`, but `tag_9` doesn't exist at this point because it was replaced by `tag_7`. This is what causes the error \"Reference to tag without position.\" \r\n\r\nI'll fix it in a PR.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/629275691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/14624",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/14624/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/14624/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/14624/events",
  "html_url": "https://github.com/ethereum/solidity/issues/14624",
  "id": 1946865448,
  "node_id": "I_kwDOAm_5kc50Cs8o",
  "number": 14624,
  "title": "ParserError: Use of unary + is disallowed.",
  "user": {
    "login": "alex1448",
    "id": 148193765,
    "node_id": "U_kgDOCNVB5Q",
    "avatar_url": "https://avatars.githubusercontent.com/u/148193765?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alex1448",
    "html_url": "https://github.com/alex1448",
    "followers_url": "https://api.github.com/users/alex1448/followers",
    "following_url": "https://api.github.com/users/alex1448/following{/other_user}",
    "gists_url": "https://api.github.com/users/alex1448/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alex1448/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alex1448/subscriptions",
    "organizations_url": "https://api.github.com/users/alex1448/orgs",
    "repos_url": "https://api.github.com/users/alex1448/repos",
    "events_url": "https://api.github.com/users/alex1448/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alex1448/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 4438006499,
      "node_id": "LA_kwDOAm_5kc8AAAABCIaa4w",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/low%20effort",
      "name": "low effort",
      "color": "ffb1fa",
      "default": false,
      "description": "There is not much implementation work to be done. The task is very easy or tiny."
    },
    {
      "id": 4438155599,
      "node_id": "LA_kwDOAm_5kc8AAAABCIjhTw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/medium%20impact",
      "name": "medium impact",
      "color": "314aff",
      "default": false,
      "description": "Default level of impact"
    },
    {
      "id": 4438488423,
      "node_id": "LA_kwDOAm_5kc8AAAABCI31Zw",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/must%20have",
      "name": "must have",
      "color": "ffa12a",
      "default": false,
      "description": "Something we consider an essential part of Solidity 1.0."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-10-17T08:33:51Z",
  "updated_at": "2023-10-17T11:08:33Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\nThe use of unary operator ```+``` is disallowed during parsing stage since version ```0.8.20```, but it looks like some valid expressions are also disallowed. Since version ```0.8.20```, the following program is not accepted:\r\n\r\n```solidity\r\npragma solidity ^0.8.20;\r\n\r\nfunction f() pure {\r\n  (0) + 1;\r\n}\r\n```\r\nCompiler output:\r\n```\r\nError: Use of unary + is disallowed.\r\n --> error.sol:4:7:\r\n  |\r\n4 |   (0) + 1;\r\n  |       ^\r\n```\r\n\r\nI believe the error is triggered when a binary expression (with operator ```+```) is being used as an expression statement and the left operand is any tuple expression. The right operand can be anything.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.20\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/14624/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/14624/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766107501",
    "html_url": "https://github.com/ethereum/solidity/issues/14624#issuecomment-1766107501",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14624",
    "id": 1766107501,
    "node_id": "IC_kwDOAm_5kc5pRKlt",
    "user": {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-17T10:14:51Z",
    "updated_at": "2023-10-17T10:28:55Z",
    "author_association": "MEMBER",
    "body": "Hi @alex1448, unary `+` is indeed disallowed since Solidity `0.8.20`, see here for more details: https://github.com/ethereum/solidity/pull/14139/files\r\n\r\n~However, your example should compile fine (if you use the return of the expression), since it uses `+` as a binary operator, see this example here: https://remix.ethereum.org/?#language=solidity&version=soljson-v0.8.20+commit.a1b79de6.js&code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKCnByYWdtYSBzb2xpZGl0eSBeMC44LjIwOwoKZnVuY3Rpb24gZigpIHB1cmUgcmV0dXJucyh1aW50KSB7CiAgLy91aW50IHggPSArKDEpIC0gMTsgLy8gPC0tIFRoaXMgaXMgZGlzYWxsb3dlZAogIHJldHVybiAoMCkgKyAxOwp9~\r\n\r\n```solidity\r\n// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity ^0.8.20;\r\n\r\nfunction f() pure returns(uint) {\r\n  //uint x = +(1) - 1; // <-- This is disallowed\r\n  return (0) + 1; // <-- This compiles (see link above)\r\n}\r\n```\r\n\r\n~Sadly, I could not reproduce your error.~",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766107501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766116719",
    "html_url": "https://github.com/ethereum/solidity/issues/14624#issuecomment-1766116719",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14624",
    "id": 1766116719,
    "node_id": "IC_kwDOAm_5kc5pRM1v",
    "user": {
      "login": "r0qs",
      "id": 457348,
      "node_id": "MDQ6VXNlcjQ1NzM0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0qs",
      "html_url": "https://github.com/r0qs",
      "followers_url": "https://api.github.com/users/r0qs/followers",
      "following_url": "https://api.github.com/users/r0qs/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0qs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0qs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0qs/subscriptions",
      "organizations_url": "https://api.github.com/users/r0qs/orgs",
      "repos_url": "https://api.github.com/users/r0qs/repos",
      "events_url": "https://api.github.com/users/r0qs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0qs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-17T10:19:39Z",
    "updated_at": "2023-10-17T10:23:26Z",
    "author_association": "MEMBER",
    "body": "Oh, I see the problem, you are right. It should emit a warning that the statement is unaffected, but instead it parses it as unary operator when you have only `(0) + 1`. If you do `uint x = (0) + 1` or use the return of the expression it parses it correctly.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766116719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766131027",
    "html_url": "https://github.com/ethereum/solidity/issues/14624#issuecomment-1766131027",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/14624",
    "id": 1766131027,
    "node_id": "IC_kwDOAm_5kc5pRQVT",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-17T10:28:57Z",
    "updated_at": "2023-10-17T10:28:57Z",
    "author_association": "MEMBER",
    "body": "Yeah, definitely a bug in #14139. Apparently we have no coverage for this case or it would have come up in testing. Interesting that this only affects the expression on its own and not in an assignment.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1766131027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

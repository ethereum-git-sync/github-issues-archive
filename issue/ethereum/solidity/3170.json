{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/3170/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/3170/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/3170/events",
  "html_url": "https://github.com/ethereum/solidity/issues/3170",
  "id": 271237606,
  "node_id": "MDU6SXNzdWUyNzEyMzc2MDY=",
  "number": 3170,
  "title": "onlyOwner modifier in one function doesn't allow the owner himself to call another function with the same onlyOwner",
  "user": {
    "login": "stefanionescu",
    "id": 15263515,
    "node_id": "MDQ6VXNlcjE1MjYzNTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/15263515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stefanionescu",
    "html_url": "https://github.com/stefanionescu",
    "followers_url": "https://api.github.com/users/stefanionescu/followers",
    "following_url": "https://api.github.com/users/stefanionescu/following{/other_user}",
    "gists_url": "https://api.github.com/users/stefanionescu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stefanionescu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stefanionescu/subscriptions",
    "organizations_url": "https://api.github.com/users/stefanionescu/orgs",
    "repos_url": "https://api.github.com/users/stefanionescu/repos",
    "events_url": "https://api.github.com/users/stefanionescu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stefanionescu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-11-05T00:26:33Z",
  "updated_at": "2022-03-13T22:03:05Z",
  "closed_at": "2017-11-05T14:24:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Solidity: 0.4.15\r\nDeployment of contracts on Mist (latest)\r\n\r\nI have a function \"mint\" in contract A that mints a token. I also have another contract B that keeps a mapping with the minted amounts of tokens for each address. In contract B, I have a function \"increaseTotal\" that increases the total amount of minted tokens when I mint something.\r\n\r\nInside \"mint\", I call the function \"increaseTotal\" from contract B. \r\n\r\nThe problem:\r\n\r\nBoth \"mint\" and \"increaseTotal\" have a modifier annotated to them, onlyOwner. I make them so that both contracts are deployed from the same address. If I call \"mint\", \"increaseTotal\" also needs to be called. Although the owner is the same for both functions, Mist tells me that it's impossible to execute this.\r\n\r\nAm I doing something wrong?\r\n\r\nP.S If I let onlyOwner only for \"mint\" and not for \"increaseTotal\", it works...",
  "closed_by": {
    "login": "stefanionescu",
    "id": 15263515,
    "node_id": "MDQ6VXNlcjE1MjYzNTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/15263515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stefanionescu",
    "html_url": "https://github.com/stefanionescu",
    "followers_url": "https://api.github.com/users/stefanionescu/followers",
    "following_url": "https://api.github.com/users/stefanionescu/following{/other_user}",
    "gists_url": "https://api.github.com/users/stefanionescu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stefanionescu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stefanionescu/subscriptions",
    "organizations_url": "https://api.github.com/users/stefanionescu/orgs",
    "repos_url": "https://api.github.com/users/stefanionescu/repos",
    "events_url": "https://api.github.com/users/stefanionescu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stefanionescu/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/3170/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/3170/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341941079",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-341941079",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 341941079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTk0MTA3OQ==",
    "user": {
      "login": "limexp",
      "id": 19608867,
      "node_id": "MDQ6VXNlcjE5NjA4ODY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19608867?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/limexp",
      "html_url": "https://github.com/limexp",
      "followers_url": "https://api.github.com/users/limexp/followers",
      "following_url": "https://api.github.com/users/limexp/following{/other_user}",
      "gists_url": "https://api.github.com/users/limexp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/limexp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/limexp/subscriptions",
      "organizations_url": "https://api.github.com/users/limexp/orgs",
      "repos_url": "https://api.github.com/users/limexp/repos",
      "events_url": "https://api.github.com/users/limexp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/limexp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-05T00:53:19Z",
    "updated_at": "2017-11-05T00:53:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@stefanionescu \r\nIt may be a migration issue. Please describe the procedure and provide code fragments for at least constructors of both contracts and call to increaseTotal from mint.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341941079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341941806",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-341941806",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 341941806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTk0MTgwNg==",
    "user": {
      "login": "stefanionescu",
      "id": 15263515,
      "node_id": "MDQ6VXNlcjE1MjYzNTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15263515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stefanionescu",
      "html_url": "https://github.com/stefanionescu",
      "followers_url": "https://api.github.com/users/stefanionescu/followers",
      "following_url": "https://api.github.com/users/stefanionescu/following{/other_user}",
      "gists_url": "https://api.github.com/users/stefanionescu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stefanionescu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stefanionescu/subscriptions",
      "organizations_url": "https://api.github.com/users/stefanionescu/orgs",
      "repos_url": "https://api.github.com/users/stefanionescu/repos",
      "events_url": "https://api.github.com/users/stefanionescu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stefanionescu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-05T01:13:55Z",
    "updated_at": "2017-11-05T01:56:18Z",
    "author_association": "NONE",
    "body": "@limexp \r\n\r\nThe contract with my modifier:\r\n\r\n     contract Owned {\r\n\r\n    address private owner;\r\n    address private newOwner;\r\n\r\n   \r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    /// @notice The Constructor assigns the message sender to be `owner`\r\n    function Owned() {\r\n        owner = msg.sender;\r\n    }\r\n\r\n\r\n    function changeOwner(address _newOwner) onlyOwner {\r\n\r\n        newOwner = _newOwner;\r\n\r\n    }\r\n\r\n    function acceptOwnership() {\r\n        if (msg.sender == newOwner) {\r\n            owner = newOwner;\r\n            newOwner = 0x0000000000000000000000000000000000000000;\r\n        }\r\n    }\r\n    }\r\n\r\nTokenController (contract A):\r\n\r\n     contract TokenController is Owned {\r\n\r\n    SapienToken private sapienToken;\r\n\r\n    event Mint(address indexed to, uint256 amount);\r\n\r\n    function TokenController(address _sapien) {\r\n\r\n        sapienToken = SapienToken(_sapien);\r\n    \r\n    }\r\n\r\n    function changeBasicToken(address _sapien) onlyOwner {\r\n\r\n        sapienToken = SapienToken(_sapien);\r\n\r\n    }\r\n\r\n    function mint(address _to, uint256 _amount) onlyOwner returns (bool) {\r\n        sapienToken.increaseTotal(_amount);\r\n        sapienToken.addToBalance(_to, _amount);\r\n        Mint(_to, _amount);\r\n        return true;\r\n    }\r\n\r\n    }\r\n\r\nSapienToken (contract B):\r\n\r\n    contract SapienToken is ERC20Basic, Owned {\r\n  \r\n    using SafeMath for uint256;\r\n\r\n    mapping(address => uint256) balances;\r\n\r\n    string public name = \"NAME\";\r\n    string public symbol = \"SYMBOL\";\r\n    uint256 public decimals = 18;\r\n\r\n\r\n    function SapienToken() {\r\n\r\n\r\n    }\r\n\r\n\r\n    function transfer(address _to, uint256 _value) public returns (bool) {\r\n    \r\n    require(_to != address(0));\r\n\r\n    balances[msg.sender] = balances[msg.sender].sub(_value);\r\n    balances[_to] = balances[_to].add(_value);\r\n    Transfer(msg.sender, _to, _value);\r\n    return true;\r\n\r\n    }\r\n\r\n  \r\n    function balanceOf(address _owner) public constant returns (uint256 balance) {\r\n    return balances[_owner];\r\n    }\r\n\r\n    function increaseTotal(uint256 _amount) public onlyOwner {\r\n\r\n    totalSupply = totalSupply.add(_amount);\r\n\r\n    }\r\n\r\n    function addToBalance(address _to, uint256 _amount) public onlyOwner {\r\n\r\n    balances[_to] = balances[_to].add(_amount);\r\n\r\n    }\r\n\r\n    }\r\n\r\nI deploy SapienToken and then TokenController.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341941806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341964492",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-341964492",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 341964492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTk2NDQ5Mg==",
    "user": {
      "login": "limexp",
      "id": 19608867,
      "node_id": "MDQ6VXNlcjE5NjA4ODY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19608867?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/limexp",
      "html_url": "https://github.com/limexp",
      "followers_url": "https://api.github.com/users/limexp/followers",
      "following_url": "https://api.github.com/users/limexp/following{/other_user}",
      "gists_url": "https://api.github.com/users/limexp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/limexp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/limexp/subscriptions",
      "organizations_url": "https://api.github.com/users/limexp/orgs",
      "repos_url": "https://api.github.com/users/limexp/repos",
      "events_url": "https://api.github.com/users/limexp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/limexp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-05T10:59:18Z",
    "updated_at": "2017-11-05T10:59:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@stefanionescu \r\nWhen you call **mint** function of TokenController from address X the value of **msg.sender** will be equal to X.\r\nBut when **increaseTotal** function of SapienToken called from mint function then the value of **msg.sender** will be equal to the address of TokenController instance. That's why onlyOwner check in increaseTotal fais.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341964492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341976844",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-341976844",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 341976844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTk3Njg0NA==",
    "user": {
      "login": "stefanionescu",
      "id": 15263515,
      "node_id": "MDQ6VXNlcjE1MjYzNTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15263515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stefanionescu",
      "html_url": "https://github.com/stefanionescu",
      "followers_url": "https://api.github.com/users/stefanionescu/followers",
      "following_url": "https://api.github.com/users/stefanionescu/following{/other_user}",
      "gists_url": "https://api.github.com/users/stefanionescu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stefanionescu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stefanionescu/subscriptions",
      "organizations_url": "https://api.github.com/users/stefanionescu/orgs",
      "repos_url": "https://api.github.com/users/stefanionescu/repos",
      "events_url": "https://api.github.com/users/stefanionescu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stefanionescu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-05T14:24:03Z",
    "updated_at": "2017-11-05T14:24:03Z",
    "author_association": "NONE",
    "body": "You're a genius. I can't believe I couldn't see that...thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/341976844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381169716",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-381169716",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 381169716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTE2OTcxNg==",
    "user": {
      "login": "jerryji",
      "id": 83122,
      "node_id": "MDQ6VXNlcjgzMTIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/83122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jerryji",
      "html_url": "https://github.com/jerryji",
      "followers_url": "https://api.github.com/users/jerryji/followers",
      "following_url": "https://api.github.com/users/jerryji/following{/other_user}",
      "gists_url": "https://api.github.com/users/jerryji/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jerryji/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jerryji/subscriptions",
      "organizations_url": "https://api.github.com/users/jerryji/orgs",
      "repos_url": "https://api.github.com/users/jerryji/repos",
      "events_url": "https://api.github.com/users/jerryji/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jerryji/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T15:20:59Z",
    "updated_at": "2018-04-13T15:20:59Z",
    "author_association": "NONE",
    "body": "So how to enforce the onlyOwner modifier in SapienToken when calling those functions from TokenController?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/381169716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1066175655",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-1066175655",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 1066175655,
    "node_id": "IC_kwDOAm_5kc4_jIyn",
    "user": {
      "login": "ozenirgokberk",
      "id": 55881181,
      "node_id": "MDQ6VXNlcjU1ODgxMTgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/55881181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ozenirgokberk",
      "html_url": "https://github.com/ozenirgokberk",
      "followers_url": "https://api.github.com/users/ozenirgokberk/followers",
      "following_url": "https://api.github.com/users/ozenirgokberk/following{/other_user}",
      "gists_url": "https://api.github.com/users/ozenirgokberk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ozenirgokberk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ozenirgokberk/subscriptions",
      "organizations_url": "https://api.github.com/users/ozenirgokberk/orgs",
      "repos_url": "https://api.github.com/users/ozenirgokberk/repos",
      "events_url": "https://api.github.com/users/ozenirgokberk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ozenirgokberk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-13T20:25:26Z",
    "updated_at": "2022-03-13T20:25:26Z",
    "author_association": "NONE",
    "body": "Is there any improvement about this content ? This approach cannot solve the problem i guess. if you try to call onlyOwner functions in SapienToken from TokenController, you can see the fails about ownership. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1066175655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1066190796",
    "html_url": "https://github.com/ethereum/solidity/issues/3170#issuecomment-1066190796",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/3170",
    "id": 1066190796,
    "node_id": "IC_kwDOAm_5kc4_jMfM",
    "user": {
      "login": "IngridMi",
      "id": 88968424,
      "node_id": "MDQ6VXNlcjg4OTY4NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/88968424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IngridMi",
      "html_url": "https://github.com/IngridMi",
      "followers_url": "https://api.github.com/users/IngridMi/followers",
      "following_url": "https://api.github.com/users/IngridMi/following{/other_user}",
      "gists_url": "https://api.github.com/users/IngridMi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IngridMi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IngridMi/subscriptions",
      "organizations_url": "https://api.github.com/users/IngridMi/orgs",
      "repos_url": "https://api.github.com/users/IngridMi/repos",
      "events_url": "https://api.github.com/users/IngridMi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IngridMi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-13T22:03:05Z",
    "updated_at": "2022-03-13T22:03:05Z",
    "author_association": "NONE",
    "body": "> Solidity: 0.4.15 Deployment of contracts on Mist (latest)\r\n> \r\n> I have a function \"mint\" in contract A that mints a token. I also have another contract B that keeps a mapping with the minted amounts of tokens for each address. In contract B, I have a function \"increaseTotal\" that increases the total amount of minted tokens when I mint something.\r\n> \r\n> Inside \"mint\", I call the function \"increaseTotal\" from contract B.\r\n> \r\n> The problem:\r\n> \r\n> Both \"mint\" and \"increaseTotal\" have a modifier annotated to them, onlyOwner. I make them so that both contracts are deployed from the same address. If I call \"mint\", \"increaseTotal\" also needs to be called. Although the owner is the same for both functions, Mist tells me that it's impossible to execute this.\r\n> \r\n> Am I doing something wrong?\r\n> \r\n> P.S If I let onlyOwner only for \"mint\" and not for \"increaseTotal\", it works...\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1066190796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

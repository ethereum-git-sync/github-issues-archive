{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/13530/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/13530/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/13530/events",
  "html_url": "https://github.com/ethereum/solidity/issues/13530",
  "id": 1374749295,
  "node_id": "I_kwDOAm_5kc5R8QJv",
  "number": 13530,
  "title": "memory writes in yul don't happen unless alongside a hardhat console log",
  "user": {
    "login": "thedavidmeister",
    "id": 629710,
    "node_id": "MDQ6VXNlcjYyOTcxMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thedavidmeister",
    "html_url": "https://github.com/thedavidmeister",
    "followers_url": "https://api.github.com/users/thedavidmeister/followers",
    "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
    "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
    "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
    "repos_url": "https://api.github.com/users/thedavidmeister/repos",
    "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-09-15T15:50:17Z",
  "updated_at": "2022-09-21T11:06:01Z",
  "closed_at": "2022-09-21T07:50:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI'm really not sure why this is happening but it seems memory writes do not happen in one of my functions.\r\n\r\nAs soon as I include console logs from hardhat the writes start to take effect.\r\n\r\nThis happens with or without compiler optimisations enabled.\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/022adea41d0c891bf8d92c117bcc4a18fb98278f\r\n\r\nremoving this\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3061601203/jobs/4941572318#step:4:400\r\n\r\ncauses this test to fail, which means that it is not writing a value to memory that it is looking for when it tries to read it back\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/c967e0d3d64eca79777f2040ce6482b1487cb402\r\n\r\ndisabling optimiser doesn't help\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3061791728/jobs/4941999523\r\n\r\ntest still fails\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/c0c20e92df01a139436d5a19309aab75376cf254\r\n\r\nadding console log fixes the test\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3061817876/jobs/4942058769\r\n\r\nthis passes now\r\n\r\n\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.8.15 and 0.8.17 tested\r\n- Target EVM version (as per compiler settings):\r\n- Framework/IDE (e.g. Truffle or Remix): hardhat\r\n- EVM execution environment / backend / blockchain client:\r\n- Operating system: mac/linux\r\n\r\n## Steps to Reproduce\r\n\r\nI don't have a minimum reproduction because it seems like some low level yul issue that i have never seen before, i've been calling this `eval` function many times in many different places and never noticed this before.\r\n\r\nvery open to debugging ideas, it's difficult to debug given the console log makes the bug disappear\r\n",
  "closed_by": {
    "login": "thedavidmeister",
    "id": 629710,
    "node_id": "MDQ6VXNlcjYyOTcxMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thedavidmeister",
    "html_url": "https://github.com/thedavidmeister",
    "followers_url": "https://api.github.com/users/thedavidmeister/followers",
    "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
    "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
    "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
    "repos_url": "https://api.github.com/users/thedavidmeister/repos",
    "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/13530/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/13530/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250222624",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1250222624",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1250222624,
    "node_id": "IC_kwDOAm_5kc5KhOIg",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T08:42:45Z",
    "updated_at": "2022-09-18T08:42:45Z",
    "author_association": "NONE",
    "body": "i thought that perhaps the issue is that i'm not keeping an explicit reference to the allocated `uint[]` in solidity\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/1220cf5c59490ac24b64fff69565c3ebe65ff9b4\r\n\r\nthat still fails tests\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3076479876/jobs/4970663451",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250222624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250223764",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1250223764",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1250223764,
    "node_id": "IC_kwDOAm_5kc5KhOaU",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T08:50:39Z",
    "updated_at": "2022-09-18T08:50:39Z",
    "author_association": "NONE",
    "body": "i tried setting the state function to view instead of pure, this is the only function called by the test script, i thought perhaps somehow that it being pure meant the compiler would elide the memory writes\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/565dea0743fe613ac865e2e1710f6ada88b14090\r\n\r\nthat does not work either\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3076500199/jobs/4970695379",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250223764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250224512",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1250224512",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1250224512,
    "node_id": "IC_kwDOAm_5kc5KhOmA",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T08:56:26Z",
    "updated_at": "2022-09-18T08:56:26Z",
    "author_association": "NONE",
    "body": "putting a console log inside the `eval` function rather than alongside it\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/c1689fdf479a2478258ecc70c4a2b09f56758632\r\n\r\ndoes cause the tests to pass\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3076516870/jobs/4970722734",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250224512/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250228579",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1250228579",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1250228579,
    "node_id": "IC_kwDOAm_5kc5KhPlj",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T09:24:21Z",
    "updated_at": "2022-09-18T12:39:44Z",
    "author_association": "NONE",
    "body": "ok i have a clue\r\n\r\nthis is what the values in memory look like when it fails:\r\n\r\n```\r\n~~~\r\n0 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n1 912823093544680850579175995568783282090442467040\r\n2 5\r\n3 6\r\n4 1258222091183498019947225577994668400935317599945\r\n5 7\r\n6 8\r\n7 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n8 912823093544680850579175995568783282090442467040\r\n9 1\r\n10 2\r\n11 1258222091183498019947225577994668400935317599945\r\n12 3\r\n13 4\r\n14 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n15 20\r\n16 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n17 912823093544680850579175995568783282090442467040\r\n18 5\r\n19 6\r\n***\r\n```\r\n\r\nthis is what it looks like when it passes\r\n\r\n```\r\n~~~\r\n0 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n1 912823093544680850579175995568783282090442467040\r\n2 5\r\n3 6\r\n4 1258222091183498019947225577994668400935317599945\r\n5 7\r\n6 8\r\n7 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n8 912823093544680850579175995568783282090442467040\r\n9 1\r\n10 2\r\n11 1258222091183498019947225577994668400935317599945\r\n12 3\r\n13 4\r\n14 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n15 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n16 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n17 115183058774379759847873638693462432260838474092724525396123647190314935293775\r\n18 0\r\n19 0\r\n***\r\n```\r\n\r\nwe can see that the 4 duplicate values from index 14-17 in the good run ~~are collapsed into a single value at index 14 in the bad run~~\r\n\r\n~~looks like the function call to `state` (linked in comment above) is simply ignored somehow when the output is the same~~\r\n\r\nsomehow the bad run is copying from the start of what was previously written, including the length (20) of what was allocated for the writes\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250228579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250261941",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1250261941",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1250261941,
    "node_id": "IC_kwDOAm_5kc5KhXu1",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T12:38:40Z",
    "updated_at": "2022-09-18T12:38:40Z",
    "author_association": "NONE",
    "body": "i tried removing `(\"memory-safe\")` from the assembly responsible for copying the above data into place\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/1f6860e5f3589a8cb325c56dcc5a390bf9bdc32f\r\n\r\nstill failing \r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/actions/runs/3077145101/jobs/4971798589\r\n\r\nthis is the code that's somehow copying from the wrong location when console logs are absent:\r\n\r\n```solidity\r\n    /// Stack a value from the state.\r\n    function state(\r\n        VMState memory state_,\r\n        Operand operand_,\r\n        StackTop stackTop_\r\n    ) internal view returns (StackTop) {\r\n        unchecked {\r\n            uint256 type_ = Operand.unwrap(operand_) & 0x1;\r\n            uint256 offset_ = Operand.unwrap(operand_) >> 1;\r\n            assembly {\r\n                mstore(\r\n                    stackTop_,\r\n                    mload(\r\n                        add(\r\n                            mload(add(state_, mul(0x20, type_))),\r\n                            mul(0x20, offset_)\r\n                        )\r\n                    )\r\n                )\r\n            }\r\n            return StackTop.wrap(StackTop.unwrap(stackTop_) + 0x20);\r\n        }\r\n    }\r\n    ```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1250261941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252178118",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1252178118",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1252178118,
    "node_id": "IC_kwDOAm_5kc5KorjG",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-20T10:51:18Z",
    "updated_at": "2022-09-20T12:42:19Z",
    "author_association": "MEMBER",
    "body": "This could be an issue in the compiler but could just as well be something in your code. `console.log()` emits events, which involves ABI-encoding and this can leave some garbage in the scratch space in the first 2 memory slots (addresses `0x00-0x64`) and in the unallocated space past the free memory pointer. If you have a bug and accidentally depend on the contents of these areas, something like a silly `console.log(\"\")` could affect the behavior of your contract.\r\n\r\nI tried looking into the problem and managed to reproduce it in your project but we'll really need a stripped down repro to figure this out. I know nothing about the codebase and there's just too much of it. There's nothing that immediately stands out as wrong so we'll just have to compare and analyze the Yul code generated from the two versions and that's much easier to do when all the code unrelated to the bug is not there.\r\n\r\nCould you do the following?\r\n1) Minimize inputs. I see that `should preview defined flow IO for ERC1155 (multi element arrays)` inside `test/Flow/Flow/previewFlow.ts` is the test that fails and it basically runs contract constructor and then calls `previewFlow()`. Please use that to create a small, isolated test without any bits that are not essential to reproducing the bug. Ideally, you'd end up with just a few external calls that don't depend on any JS code so that we can reproduce the problem directly with `solc` and a debugger, without going through Hardhat.\r\n2) Extract the relevant contracts. I see that the failing path is `Flow.previewFlow()` -> `_previewFlow()` -> `stackToFlow()` -> `consumeSentinel()`. So we only need `Flow.sol`, `LibFlow.sol` and `LibStackTop.sol`. Please take just these contracts and anything they depend on.\r\n3) Minimize the contracts. Please remove anything non-essential to reproducing the bug from the contracts.\r\n\r\nIdeally, you'll either be left with just a small bit of code that clearly shows that the compiler is doing somethting wrong - and we can take it from there - or you'll find some problem in your own code along the way.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252178118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252182937",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1252182937",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1252182937,
    "node_id": "IC_kwDOAm_5kc5KosuZ",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-20T10:55:55Z",
    "updated_at": "2022-09-20T10:56:22Z",
    "author_association": "MEMBER",
    "body": "By the way, there were two recent bugs, which could potentially produce somewhat similar effects:\r\n- [Optimizer Bug Regarding Memory Side Effects of Inline Assembly](https://blog.soliditylang.org/2022/06/15/inline-assembly-memory-side-effects-bug/)\r\n- [Head Overflow Bug in Calldata Tuple ABI-Reencoding](https://blog.soliditylang.org/2022/08/08/calldata-tuple-reencoding-head-overflow-bug/)\r\n\r\nThe first one can result in the compiler removing an `mstore()` under very specific conditions. The second might mis-encode data. But since you say you're seeing it on 0.8.17 and it's reproducible even without the optimizer this seems unlikely. It's either a new bug or something in your contract.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252182937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252504803",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1252504803",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1252504803,
    "node_id": "IC_kwDOAm_5kc5Kp7Tj",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-20T15:11:06Z",
    "updated_at": "2022-09-20T15:11:06Z",
    "author_association": "NONE",
    "body": "@cameel i'm fairly sure that i'm not reading or writing to the first two memory slots on this codepath, i hear you on the repro though, i'll try to make something simpler that shows the same behaviour",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1252504803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253234736",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1253234736",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1253234736,
    "node_id": "IC_kwDOAm_5kc5Kstgw",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T05:47:49Z",
    "updated_at": "2022-09-21T05:47:49Z",
    "author_association": "NONE",
    "body": "@cameel so looks like adding `bytes memory foo_ = abi.encodeWithSignature(\"log(bytes)\", \"\");` to eval \"fixes\" the issue in the same way as the console log, so that's some info",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253234736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253307757",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1253307757",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1253307757,
    "node_id": "IC_kwDOAm_5kc5Ks_Vt",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T07:21:43Z",
    "updated_at": "2022-09-21T07:21:43Z",
    "author_association": "NONE",
    "body": "explicitly zeroing the first 2 memory slots does nothing to help, but adding `0xA0` to the pointer at `0x40` makes tests pass\r\n\r\nhttps://github.com/beehive-innovation/rain-protocol/pull/452/commits/4d89dcaa89e590a5853b96cbb4579fe5e3793bc7#diff-84a5ca0e7658e2f6de553fa9797f941b3251296cfcb0343a9840e35dadbc04a3R297",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253307757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253335391",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1253335391",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1253335391,
    "node_id": "IC_kwDOAm_5kc5KtGFf",
    "user": {
      "login": "thedavidmeister",
      "id": 629710,
      "node_id": "MDQ6VXNlcjYyOTcxMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/629710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thedavidmeister",
      "html_url": "https://github.com/thedavidmeister",
      "followers_url": "https://api.github.com/users/thedavidmeister/followers",
      "following_url": "https://api.github.com/users/thedavidmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/thedavidmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thedavidmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thedavidmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/thedavidmeister/orgs",
      "repos_url": "https://api.github.com/users/thedavidmeister/repos",
      "events_url": "https://api.github.com/users/thedavidmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thedavidmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T07:50:10Z",
    "updated_at": "2022-09-21T07:50:10Z",
    "author_association": "NONE",
    "body": "@cameel ok i found the bug in our contract, thanks for the tips!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253335391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253539788",
    "html_url": "https://github.com/ethereum/solidity/issues/13530#issuecomment-1253539788",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/13530",
    "id": 1253539788,
    "node_id": "IC_kwDOAm_5kc5Kt3_M",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T10:59:31Z",
    "updated_at": "2022-09-21T10:59:31Z",
    "author_association": "MEMBER",
    "body": "Great! Thanks for reporting anyway. If there's a chance it's a compiler bug, we definitely want to investigate.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1253539788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/4652/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/4652/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/4652/events",
  "html_url": "https://github.com/ethereum/solidity/issues/4652",
  "id": 346854196,
  "node_id": "MDU6SXNzdWUzNDY4NTQxOTY=",
  "number": 4652,
  "title": "Optionally calling a function on an external contract with a bytes parameter",
  "user": {
    "login": "thekevinbrown",
    "id": 1531750,
    "node_id": "MDQ6VXNlcjE1MzE3NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thekevinbrown",
    "html_url": "https://github.com/thekevinbrown",
    "followers_url": "https://api.github.com/users/thekevinbrown/followers",
    "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
    "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
    "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
    "repos_url": "https://api.github.com/users/thekevinbrown/repos",
    "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2018-08-02T04:22:28Z",
  "updated_at": "2022-04-27T18:32:43Z",
  "closed_at": "2018-08-10T04:01:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "We're trying to partially implement ERC223 such that:\r\n\r\n- If the recipient is a non-contract address, they simply receive the tokens\r\n- If a recipient contract implements the `tokenFallback` function, it gets a correct, ERC223 call to `tokenFallback`\r\n- But if a recipient contract doesn't implement `tokenFallback` then the transfer still succeeds\r\n\r\nI tried using `to.call()` to do this, but as soon as there's a `bytes` parameter in the signature it no longer calls the function, e.g.\r\n\r\n```\r\nto.call(bytes4(keccak256(\"tokenFallback(address,uint256,bytes)\")), msg.sender, value, hex'0000000000');\r\n``` \r\n\r\nThis does not call the recipient, however if I remove the bytes parameter from the signature on both sides it works fine.\r\n\r\nSo because of @chriseth's suggestion in #2884 to not use `call` at all, I'm trying to use assembly to do this, but I just can't seem to make it work:\r\n\r\n```\r\nfunction _internalNoThrowTokenFallback(address contractRecipient, address from, uint value, bytes data)\r\n    internal\r\n{\r\n    // We need to do this in assembly because:\r\n    //   1. Calling the function as normal would result in a revert if the destination contract doesn't\r\n    //      implement tokenFallback. We want this case to be ignored.\r\n    //   2. We could use contractRecipient.call() but that doesn't work with bytes parameters: \r\n    //      https://github.com/ethereum/solidity/issues/2884\r\n    //   3. So we need to do the call the same way \r\n    assembly {\r\n        // Get some free memory to copy our params over to.\r\n        let free_ptr := mload(0x40)\r\n\r\n        // Tee up the function selector in the memory we've gotten\r\n        mstore(free_ptr, 0xc0ee0b8a)\r\n\r\n        // Load our calldata across to the new call, except for\r\n        //  - The function selector (4 bytes)\r\n        //  - The first address parameter (64 bytes when padded)\r\n        //\r\n        // Thus making a total of 68 bytes we want to ignore, and we want to copy the\r\n        // data to our free_ptr after our function selector\r\n        calldatacopy(add(free_ptr, 4), 68, sub(calldatasize, 68))\r\n\r\n        // Ok, call the function without allowing the other contract to alter our state\r\n        let result := staticcall(\r\n            30000,                  // Give the other contract 30k gas to work with\r\n            contractRecipient,      // The other contract's address\r\n            free_ptr,               // We've prepared the inputs at free_ptr.\r\n            sub(calldatasize, 64),  // They're the same length as our inputs were minus the address parameter.\r\n            0,                      // There's no return from the function\r\n            0\r\n        )\r\n\r\n        // Don't check the result or revert if the call failed. We want to proceed regardless.\r\n    }\r\n}\r\n```\r\n\r\nThis also does not call the recipient.\r\n\r\nWhat am I missing? Is there a way to get `call` to work? What's wrong with my assembly?\r\n\r\nI've also asked this on Stack Overflow but haven't gotten a response, which is why I came here: https://ethereum.stackexchange.com/questions/55593/optional-multi-parameter-call-to-external-contract",
  "closed_by": {
    "login": "thekevinbrown",
    "id": 1531750,
    "node_id": "MDQ6VXNlcjE1MzE3NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thekevinbrown",
    "html_url": "https://github.com/thekevinbrown",
    "followers_url": "https://api.github.com/users/thekevinbrown/followers",
    "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
    "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
    "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
    "repos_url": "https://api.github.com/users/thekevinbrown/repos",
    "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/4652/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/4652/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409880409",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-409880409",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 409880409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTg4MDQwOQ==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T10:23:49Z",
    "updated_at": "2018-08-02T10:23:49Z",
    "author_association": "MEMBER",
    "body": "Using `call` is fine when you know what you are doing, but the way it works will significantly change in 0.5.0 (you can verify that with some of the latest nightly builds of \"0.5.25\" - I know, it is confusing).\r\n\r\nWhat is the signature of the `tokenFallback` function?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409880409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409883904",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-409883904",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 409883904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTg4MzkwNA==",
    "user": {
      "login": "thekevinbrown",
      "id": 1531750,
      "node_id": "MDQ6VXNlcjE1MzE3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thekevinbrown",
      "html_url": "https://github.com/thekevinbrown",
      "followers_url": "https://api.github.com/users/thekevinbrown/followers",
      "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
      "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
      "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
      "repos_url": "https://api.github.com/users/thekevinbrown/repos",
      "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T10:38:40Z",
    "updated_at": "2018-08-02T10:38:40Z",
    "author_association": "NONE",
    "body": "I'm definitely not insisting on using `call`, I just need to be able to either:\r\n\r\n - Check if the function exists before I try to call it, or\r\n - Call it and ignore the case where it fails\r\n\r\nThe signature of `tokenFallback` is here: https://github.com/Dexaran/ERC223-token-standard/blob/master/token/ERC223/ERC223_receiving_contract.sol#L15",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409883904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409884386",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-409884386",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 409884386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTg4NDM4Ng==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T10:40:47Z",
    "updated_at": "2018-08-02T10:41:16Z",
    "author_association": "MEMBER",
    "body": "Instead of \r\n```\r\nto.call(bytes4(keccak256(\"tokenFallback(address,uint256,bytes)\")), msg.sender, value, hex'0000000000');\r\n```\r\n\r\nI suggest using\r\n```\r\nto.call(abi.encodeWithSignature(\"tokenFallback(address,uint256,bytes)\", msg.sender, value, hex\"0000000000\"))\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409884386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409964400",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-409964400",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 409964400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTk2NDQwMA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T15:19:50Z",
    "updated_at": "2018-08-02T15:19:50Z",
    "author_association": "MEMBER",
    "body": "@blargity does this answer the question? Can we close the issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/409964400/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410111481",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-410111481",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 410111481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDExMTQ4MQ==",
    "user": {
      "login": "thekevinbrown",
      "id": 1531750,
      "node_id": "MDQ6VXNlcjE1MzE3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thekevinbrown",
      "html_url": "https://github.com/thekevinbrown",
      "followers_url": "https://api.github.com/users/thekevinbrown/followers",
      "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
      "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
      "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
      "repos_url": "https://api.github.com/users/thekevinbrown/repos",
      "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T00:56:07Z",
    "updated_at": "2018-08-03T00:56:07Z",
    "author_association": "NONE",
    "body": "@axic, unfortunately no, the call still doesn't work for me:\r\n\r\nhttps://ethfiddle.com/9qGqGkGkTE",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410111481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410753458",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-410753458",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 410753458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDc1MzQ1OA==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-06T15:44:17Z",
    "updated_at": "2018-08-06T15:44:17Z",
    "author_association": "MEMBER",
    "body": "@blargity unfortunately, ethfiddle does not work for me - something to do with user tracking, I think. Can you post the example code directly here, please?\r\n\r\nConcerning `calldatacopy(add(free_ptr, 4), 68, sub(calldatasize, 68))` - note that the offset pointer for the dynamic `bytes` parameter has to change if you just remove an argument.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410753458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410890282",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-410890282",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 410890282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDg5MDI4Mg==",
    "user": {
      "login": "thekevinbrown",
      "id": 1531750,
      "node_id": "MDQ6VXNlcjE1MzE3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thekevinbrown",
      "html_url": "https://github.com/thekevinbrown",
      "followers_url": "https://api.github.com/users/thekevinbrown/followers",
      "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
      "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
      "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
      "repos_url": "https://api.github.com/users/thekevinbrown/repos",
      "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-07T00:03:58Z",
    "updated_at": "2018-08-07T00:05:19Z",
    "author_association": "NONE",
    "body": "No worries, and thanks for your help.\r\n\r\nThe code that's not working for me with `call` is:\r\n\r\n```\r\npragma solidity 0.4.24;\r\ncontract Receiver {\r\n  function tokenFallback(address, uint, bytes) public {}\r\n}\r\n\r\ncontract Sender {\r\n  function call(address receiverAddress) public {\r\n    bytes memory empty;\r\n    require(\r\n      receiverAddress.call(abi.encodeWithSignature(\"tokenFallback(address,uint256,bytes)\"), msg.sender, 100, empty),\r\n      \"Call failed\"\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nOn the `calldatacopy`, here was my (probably flawed) logic:\r\n\r\nFunction selector (4 bytes) + contractRecipient `address` (32 bytes) + value `uint` (32 bytes) = 68 byte offset from `calldata` that we got called with. Copy whatever we got sent from that offset and pass it on as it'd already be correctly set up for a call.\r\n\r\nWhen you say the pointer has to change, how should it change? I've done x86 assembly before, so this isn't that scary, I just don't understand how the args should be passed. Are bytes params sent on the heap or something? Do you have an example I could look at so I know how to prepare the parameters for the call?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/410890282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411023601",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-411023601",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 411023601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTAyMzYwMQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-07T11:23:50Z",
    "updated_at": "2018-08-07T11:23:50Z",
    "author_association": "MEMBER",
    "body": "The code above works for me. In which way is it failing for you? Can you provide a debug trace?\r\n\r\nThere is a pointer from the static part to the dynamic part. The static part is: `(address, uint256, bytes_pointer)` The pointer is the offset from the start of the dynamic part relative to the start of the static part. This means if you shorten the static part, you also have to subtract this length from the pointer. The ABI is flexible in the sense that pointers are always relative to the current structure, so you actually can move stuff around. It should all be documented here: https://solidity.readthedocs.io/en/develop/abi-spec.html",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411023601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411649423",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-411649423",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 411649423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTY0OTQyMw==",
    "user": {
      "login": "thekevinbrown",
      "id": 1531750,
      "node_id": "MDQ6VXNlcjE1MzE3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thekevinbrown",
      "html_url": "https://github.com/thekevinbrown",
      "followers_url": "https://api.github.com/users/thekevinbrown/followers",
      "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
      "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
      "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
      "repos_url": "https://api.github.com/users/thekevinbrown/repos",
      "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-09T06:19:11Z",
    "updated_at": "2018-08-09T06:19:11Z",
    "author_association": "NONE",
    "body": "Ok, looks like it's actually https://github.com/ethereum/solidity/issues/2884 that I'm experiencing, which causes corrupted values across all the args in the call, e.g. when I call the function like this:\r\n\r\n```\r\nbytes memory test = \"0x12345678\";\r\nreceiverAddress.call(abi.encodeWithSignature(\"tokenFallback(address,uint256,bytes)\"), msg.sender, 100, test);\r\n```\r\nI get this in the event log:\r\n```\r\nfrom: '0x0000000000000000000000000000000000000000',\r\namount: '1868198849852438801016113086259014272985994309699714940928',\r\ndata: null\r\n```\r\n\r\nThat issue was closed, but it looks like the plan isn't to update `call` to work correctly with `bytes` variables. So a couple of questions:\r\n\r\n1. Should call be working now that that's closed, or is this intended behaviour of `call`?\r\n2. If it's intended behaviour, should we update the docs to indicate this issue, as well as provide an inline assembly example of how to correctly transmit `bytes` args in calls for people? (happy to do a PR for that myself once I apply what you've said above and get it working myself)\r\n\r\nThe reproduction case is here: https://github.com/blargity/solidity-call-reproduction-case/blob/master/contracts/Caller.sol",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411649423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411712839",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-411712839",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 411712839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTcxMjgzOQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-09T10:29:13Z",
    "updated_at": "2018-08-09T10:29:30Z",
    "author_association": "MEMBER",
    "body": "#2884 is fixed in latest develop - `call` now only accepts a single `bytes` argument and does not pad.\r\n\r\nIn your example, you should use\r\n```\r\nreceiverAddress.call(abi.encodeWithSignature(\"tokenFallback(address,uint256,bytes)\", msg.sender, 100, test));\r\n```\r\ninstead of\r\n```\r\n receiverAddress.call(abi.encodeWithSignature(\"tokenFallback(address,uint256,bytes)\"), msg.sender, 100, test);\r\n```\r\nThe second will not be possible in 0.5.0 anymore.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411712839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411717824",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-411717824",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 411717824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTcxNzgyNA==",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-09T10:51:13Z",
    "updated_at": "2018-08-09T10:51:13Z",
    "author_association": "MEMBER",
    "body": "Actually the same advice was given a week ago: https://github.com/ethereum/solidity/issues/4652#issuecomment-409884386\r\n\r\n@blargity did you change the code to do that? Note: all the parameters are part of `abi.encodeWithSignature`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411717824/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411968720",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-411968720",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 411968720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTk2ODcyMA==",
    "user": {
      "login": "thekevinbrown",
      "id": 1531750,
      "node_id": "MDQ6VXNlcjE1MzE3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1531750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thekevinbrown",
      "html_url": "https://github.com/thekevinbrown",
      "followers_url": "https://api.github.com/users/thekevinbrown/followers",
      "following_url": "https://api.github.com/users/thekevinbrown/following{/other_user}",
      "gists_url": "https://api.github.com/users/thekevinbrown/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thekevinbrown/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thekevinbrown/subscriptions",
      "organizations_url": "https://api.github.com/users/thekevinbrown/orgs",
      "repos_url": "https://api.github.com/users/thekevinbrown/repos",
      "events_url": "https://api.github.com/users/thekevinbrown/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thekevinbrown/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T04:01:27Z",
    "updated_at": "2018-08-10T04:01:27Z",
    "author_association": "NONE",
    "body": "@axic, @chriseth, thank you both for your help.\r\n\r\nYou're right, I thought that `abi.encodeWithSignature` was a replacement for figuring out the function selector, not also encoding all the parameters. That works for me.\r\n\r\nMany thanks, and sorry for not noticing that the first time!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/411968720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1110323487",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-1110323487",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 1110323487,
    "node_id": "IC_kwDOAm_5kc5CLjEf",
    "user": {
      "login": "italoHonoratoSA",
      "id": 89170101,
      "node_id": "MDQ6VXNlcjg5MTcwMTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/89170101?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/italoHonoratoSA",
      "html_url": "https://github.com/italoHonoratoSA",
      "followers_url": "https://api.github.com/users/italoHonoratoSA/followers",
      "following_url": "https://api.github.com/users/italoHonoratoSA/following{/other_user}",
      "gists_url": "https://api.github.com/users/italoHonoratoSA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/italoHonoratoSA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/italoHonoratoSA/subscriptions",
      "organizations_url": "https://api.github.com/users/italoHonoratoSA/orgs",
      "repos_url": "https://api.github.com/users/italoHonoratoSA/repos",
      "events_url": "https://api.github.com/users/italoHonoratoSA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/italoHonoratoSA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-26T22:51:39Z",
    "updated_at": "2022-04-27T18:32:37Z",
    "author_association": "NONE",
    "body": "I'm trying to call the following function from another contract:\r\n\r\n```\r\n//This is the other contract\r\npragma solidity 0.8.0;\r\n\r\ncontract OtherContract{\r\n     function add(address account, uint256 number) external {\r\n       _add(addr, number);\r\n     }\r\n}\r\n```\r\n\r\n  But the `abi.encodeWithSignature` of the calling contract doesn't work. I've tried everything, I've been trying for days.\r\n\r\n```\r\nfunction callAdd() public\r\n  addressOtherContract.call(abi.encodeWithSignature(\"add(address,uint256)\",account,number));\r\n}\r\n```\r\n\r\nThe above function call transaction is successfully completed, but it displays the error:\r\n` Although one or more Error Occurred [execution reverted] Contract Execution Completed\r\n`\r\n\r\nI also tried the syntax below in an old version of solidity, but despite compiling, it gives the same error when the function is called:\r\n\r\n```\r\naddressOtherContract.call(bytes4(keccak256(\"add(address,uint256)\")),account,number);\r\n```\r\n\r\nI've read many reports of the same problem, the function simply not working as expected.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1110323487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1111347594",
    "html_url": "https://github.com/ethereum/solidity/issues/4652#issuecomment-1111347594",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/4652",
    "id": 1111347594,
    "node_id": "IC_kwDOAm_5kc5CPdGK",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-27T18:32:29Z",
    "updated_at": "2022-04-27T18:32:43Z",
    "author_association": "MEMBER",
    "body": "@italoHonoratoSA The call looks correct. I think something else must be wrong. Please make sure `OtherContract` was successfully deployed and that you're actually using the right address.\r\n\r\nAlso, I'd recommend creating an interface and using the new `abi.encodeCall()`. This way you can be sure that the signature is valid and that your parameters match it.\r\n\r\nIn any case, this is unrelated to this issue and the bug tracker is not the best place for such support questions. Please try asking at our [#solidity](https://gitter.im/ethereum/solidity) channel on Gitter/Matrix or submitting a question to Ethereum Stack Exchange.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/1111347594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

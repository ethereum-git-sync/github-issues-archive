{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11081",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11081/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11081/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11081/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11081",
  "id": 827967528,
  "node_id": "MDU6SXNzdWU4Mjc5Njc1Mjg=",
  "number": 11081,
  "title": "Constructor superclass invocations are mislabled as ModifierInvocation in AST",
  "user": {
    "login": "mattdf",
    "id": 11067114,
    "node_id": "MDQ6VXNlcjExMDY3MTE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/11067114?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattdf",
    "html_url": "https://github.com/mattdf",
    "followers_url": "https://api.github.com/users/mattdf/followers",
    "following_url": "https://api.github.com/users/mattdf/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattdf/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattdf/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattdf/subscriptions",
    "organizations_url": "https://api.github.com/users/mattdf/orgs",
    "repos_url": "https://api.github.com/users/mattdf/repos",
    "events_url": "https://api.github.com/users/mattdf/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattdf/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-03-10T16:04:31Z",
  "updated_at": "2021-03-16T18:44:41Z",
  "closed_at": "2021-03-16T18:44:41Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWhen a constructor explicitly invokes a superclass constructor, the AST output misrepresents the NodeType as `'ModifierInvocation'` rather than as a `'FunctionCall'` or, I suppose a new NodeType that should be specific to constructor invocations. \r\n\r\n## Environment\r\n\r\n- Compiler version: v0.8.2\r\n- Target EVM version (as per compiler settings): default\r\n- Operating system: Linux\r\n\r\n## Steps to Reproduce\r\n\r\nCompiling the below code with `--ast-compact-json`:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.0;\r\n\r\ncontract A {\r\n    constructor(uint256 a) {}\r\n}\r\n\r\ncontract B is A {\r\n    constructor() A(1) {}\r\n}\r\n```\r\n\r\nThe NodeType that represents `A(1)` is a `ModifierInvocation`:\r\n\r\n```\r\n[\r\n  {\r\n    \"arguments\": [\r\n      {\r\n        \"hexValue\": \"31\",\r\n        \"id\": 13,\r\n        \"isConstant\": false,\r\n        \"isLValue\": false,\r\n        \"isPure\": true,\r\n        \"kind\": \"number\",\r\n        \"lValueRequested\": false,\r\n        \"nodeType\": \"Literal\",\r\n        \"src\": \"142:1:0\",\r\n        \"typeDescriptions\": {\r\n          \"typeIdentifier\": \"t_rational_1_by_1\",\r\n          \"typeString\": \"int_const 1\"\r\n        },\r\n        \"value\": \"1\"\r\n      }\r\n    ],\r\n    \"id\": 14,\r\n    \"modifierName\": {\r\n      \"id\": 12,\r\n      \"name\": \"A\",\r\n      \"nodeType\": \"IdentifierPath\",\r\n      \"referencedDeclaration\": 8,\r\n      \"src\": \"140:1:0\"\r\n    },\r\n    \"nodeType\": \"ModifierInvocation\",\r\n    \"src\": \"140:4:0\"\r\n  }\r\n]\r\n```",
  "closed_by": {
    "login": "hrkrshnn",
    "id": 13174375,
    "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hrkrshnn",
    "html_url": "https://github.com/hrkrshnn",
    "followers_url": "https://api.github.com/users/hrkrshnn/followers",
    "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
    "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
    "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
    "repos_url": "https://api.github.com/users/hrkrshnn/repos",
    "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11081/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11081/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795669277",
    "html_url": "https://github.com/ethereum/solidity/issues/11081#issuecomment-795669277",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11081",
    "id": 795669277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTY2OTI3Nw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-10T16:12:19Z",
    "updated_at": "2021-03-10T16:12:19Z",
    "author_association": "MEMBER",
    "body": "The type of node is correct. It is not a function call - function calls happen at expression level. Note that writing `SuperClassName(x)` does not even invoke the super class constructor. The order of evaluation of constructors cannot be changed by this, it is fixed through the C3 linearization. What you do when you use this syntactic construct is that you set the base constructor arguments - nothing more nothing less.\r\n\r\nSince it is syntactically the same as a modifier invocation, this ast node type is used for both these semantic uses in the AST.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795669277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795708350",
    "html_url": "https://github.com/ethereum/solidity/issues/11081#issuecomment-795708350",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11081",
    "id": 795708350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTcwODM1MA==",
    "user": {
      "login": "mattdf",
      "id": 11067114,
      "node_id": "MDQ6VXNlcjExMDY3MTE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11067114?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattdf",
      "html_url": "https://github.com/mattdf",
      "followers_url": "https://api.github.com/users/mattdf/followers",
      "following_url": "https://api.github.com/users/mattdf/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattdf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattdf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattdf/subscriptions",
      "organizations_url": "https://api.github.com/users/mattdf/orgs",
      "repos_url": "https://api.github.com/users/mattdf/repos",
      "events_url": "https://api.github.com/users/mattdf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattdf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-10T16:39:49Z",
    "updated_at": "2021-03-10T16:39:49Z",
    "author_association": "MEMBER",
    "body": "It would be helpful to at least have a `.kind` property in this NodeType that differentiates between an actual modifier and a `SuperClass` constructor \"call\", the same way `FunctionCall` has differentiations via `.kind`, so one doesn't have to resolve the referenced declaration to figure out that it's not actually a modifier invocation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795708350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795727149",
    "html_url": "https://github.com/ethereum/solidity/issues/11081#issuecomment-795727149",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11081",
    "id": 795727149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTcyNzE0OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-10T16:51:57Z",
    "updated_at": "2021-03-10T16:51:57Z",
    "author_association": "MEMBER",
    "body": "Yep, we can do that!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/795727149/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

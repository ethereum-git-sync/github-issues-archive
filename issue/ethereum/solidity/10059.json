{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/10059",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/10059/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/10059/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/10059/events",
  "html_url": "https://github.com/ethereum/solidity/issues/10059",
  "id": 723562842,
  "node_id": "MDU6SXNzdWU3MjM1NjI4NDI=",
  "number": 10059,
  "title": "\"Cannot import url\" error when working with standard json on newest mac version",
  "user": {
    "login": "shellygr",
    "id": 3807885,
    "node_id": "MDQ6VXNlcjM4MDc4ODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3807885?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shellygr",
    "html_url": "https://github.com/shellygr",
    "followers_url": "https://api.github.com/users/shellygr/followers",
    "following_url": "https://api.github.com/users/shellygr/following{/other_user}",
    "gists_url": "https://api.github.com/users/shellygr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shellygr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shellygr/subscriptions",
    "organizations_url": "https://api.github.com/users/shellygr/orgs",
    "repos_url": "https://api.github.com/users/shellygr/repos",
    "events_url": "https://api.github.com/users/shellygr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shellygr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 455256446,
      "node_id": "MDU6TGFiZWw0NTUyNTY0NDY=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/waiting%20for%20more%20input",
      "name": "waiting for more input",
      "color": "fef2c0",
      "default": false,
      "description": "Issues waiting for more input by the reporter"
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-10-16T22:19:31Z",
  "updated_at": "2021-09-27T13:39:15Z",
  "closed_at": "2021-09-27T13:39:15Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nIn Mac OS 10.15.7,  a single contract file compiled with standard-json with the input file provided as a URL, Solidity compiler fails to compile with the following error:\r\n```\r\n{\"errors\":[{\"component\":\"general\",\"formattedMessage\":\"Cannot import url (\\\"/Users/thomas/Code/MacSucks/Bank.sol\\\"): File outside of allowed directories.\",\"message\":\"Cannot import url (\\\"/Users/thomas/Code/MacSucks/Bank.sol\\\"): File outside of allowed directories.\",\"severity\":\"error\",\"type\":\"IOError\"}],\"sources\":{}}\r\n```\r\nA workaround is to provide a _relative_ path instead of the absolute path.\r\n**This is a change of behavior compared to Ubuntu, Windows, and Mac OS 10.15.6.**\r\n\r\n\r\n\r\n## Environment\r\n\r\n- Compiler version: solc6.10\r\n- Operating system: Mac OS 10.15.7\r\n\r\n## Steps to Reproduce\r\n\r\nThis happens on any contract. But we take this solidity snippet:\r\n\r\n```solidity\r\npragma solidity ^0.6.0;\r\n\r\ncontract Bank {\r\n    struct Account {\r\n        uint256 balance;\r\n        uint256 exists;\r\n    }\r\n    mapping (address => Account) accounts;\r\n    uint256 public totalSupply;\r\n\r\n    function create(address a) public {\r\n        require(accounts[a].exists == 0);\r\n        accounts[a].exists = 1;\r\n    }\r\n}\r\n```\r\n\r\nThis file is stored in `/Users/thomas/Code/MacSucks/Bank.sol`.\r\n\r\nWe prepare the following standard-json input:\r\n```json\r\n\t{\r\n\t\t\"language\": \"Solidity\",\r\n\t\t\"sources\": {\r\n\t\t\t\"/Users/thomas/Code/MacSucks/Bank.sol\": {\r\n\t\t\t\t\"urls\": [\r\n\t\t\t\t\t\"/Users/thomas/Code/MacSucks/Bank.sol\"\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"settings\": {\r\n\t\t\t\"remappings\": [],\r\n\t\t\t\"outputSelection\": {\r\n\t\t\t\t\"*\": {\r\n\t\t\t\t\t\"*\": [\r\n\t\t\t\t\t\t\"storageLayout\",\r\n\t\t\t\t\t\t\"abi\",\r\n\t\t\t\t\t\t\"evm.deployedBytecode\",\r\n\t\t\t\t\t\t\"evm.methodIdentifiers\"\r\n\t\t\t\t\t],\r\n\t\t\t\t\t\"\": [\r\n\t\t\t\t\t\t\"id\",\r\n\t\t\t\t\t\t\"ast\"\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nHere are a few attempts to run the compiler and what each one gives:\r\n- `solc6.10 --allow-paths /Users/thomas/Code/MacSucks --standard-json < json.json` - fails on newest Mac, succeeds in other environments.\r\n- `solc6.10 --standard-json < json.json` - fails on all environments\r\n- `solc6.10 --allow-paths / --standard-json < json.json` - succeeds\r\n- `solc6.10 --allow-paths . --standard-json < json.json` - succeeds\r\n- `solc6.10 --allow-paths /Users/thomas/Code/MacSucks,. --standard-json < json.json` - succeeds",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/10059/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/10059/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/711433346",
    "html_url": "https://github.com/ethereum/solidity/issues/10059#issuecomment-711433346",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10059",
    "id": 711433346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQzMzM0Ng==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-18T22:28:43Z",
    "updated_at": "2020-10-18T22:29:02Z",
    "author_association": "MEMBER",
    "body": "Thanks for the report! Could you check if this is still reproducible on MacOS when using the latest version of the compiler (0.7.3)? You can find static builds of all versions of the compiler in https://github.com/ethereum/solc-bin/tree/gh-pages/macosx-amd64.\r\n\r\nAlso, is `/Users/thomas/Code/MacSucks/Bank.sol` the original capitalization of that path on disk?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/711433346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/711905530",
    "html_url": "https://github.com/ethereum/solidity/issues/10059#issuecomment-711905530",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10059",
    "id": 711905530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTkwNTUzMA==",
    "user": {
      "login": "shellygr",
      "id": 3807885,
      "node_id": "MDQ6VXNlcjM4MDc4ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3807885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shellygr",
      "html_url": "https://github.com/shellygr",
      "followers_url": "https://api.github.com/users/shellygr/followers",
      "following_url": "https://api.github.com/users/shellygr/following{/other_user}",
      "gists_url": "https://api.github.com/users/shellygr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shellygr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shellygr/subscriptions",
      "organizations_url": "https://api.github.com/users/shellygr/orgs",
      "repos_url": "https://api.github.com/users/shellygr/repos",
      "events_url": "https://api.github.com/users/shellygr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shellygr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T09:26:17Z",
    "updated_at": "2020-10-19T09:26:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm looping-in @thomasbernardi who has a Mac and with whose help I got this investigation going. \r\nI believe the capitalization presented is the correct one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/711905530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/853253839",
    "html_url": "https://github.com/ethereum/solidity/issues/10059#issuecomment-853253839",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10059",
    "id": 853253839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzI1MzgzOQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-02T17:45:24Z",
    "updated_at": "2021-06-02T17:45:24Z",
    "author_association": "MEMBER",
    "body": "I suspect that this might be caused by symlinks. Is any part of the path `/Users/thomas/Code/MacSucks` a symbolic link by chance? `--allow-paths` by design requires you to specify the actual directory and does not work with symlinks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/853253839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/922086575",
    "html_url": "https://github.com/ethereum/solidity/issues/10059#issuecomment-922086575",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/10059",
    "id": 922086575,
    "node_id": "IC_kwDOAm_5kc429eyv",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-17T21:16:33Z",
    "updated_at": "2021-09-17T21:16:33Z",
    "author_association": "MEMBER",
    "body": "By now I am pretty much convinced that this must have been caused by symlinks in workdir path and #11688 fixes that. So I'm going to close this once that PR is merged. Feel free to reopen if you encounter this even on a release including that fix (should be 0.8.8 or 0.8.9).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/922086575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/7627/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/7627/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/7627/events",
  "html_url": "https://github.com/ethereum/solidity/issues/7627",
  "id": 517727807,
  "node_id": "MDU6SXNzdWU1MTc3Mjc4MDc=",
  "number": 7627,
  "title": "`Compiled contract not found` error when not requesting output for inherited contract in Standard JSON",
  "user": {
    "login": "varasev",
    "id": 33550681,
    "node_id": "MDQ6VXNlcjMzNTUwNjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/33550681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/varasev",
    "html_url": "https://github.com/varasev",
    "followers_url": "https://api.github.com/users/varasev/followers",
    "following_url": "https://api.github.com/users/varasev/following{/other_user}",
    "gists_url": "https://api.github.com/users/varasev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/varasev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/varasev/subscriptions",
    "organizations_url": "https://api.github.com/users/varasev/orgs",
    "repos_url": "https://api.github.com/users/varasev/repos",
    "events_url": "https://api.github.com/users/varasev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/varasev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "Marenz",
    "id": 424752,
    "node_id": "MDQ6VXNlcjQyNDc1Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Marenz",
    "html_url": "https://github.com/Marenz",
    "followers_url": "https://api.github.com/users/Marenz/followers",
    "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
    "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
    "organizations_url": "https://api.github.com/users/Marenz/orgs",
    "repos_url": "https://api.github.com/users/Marenz/repos",
    "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Marenz/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Marenz",
      "id": 424752,
      "node_id": "MDQ6VXNlcjQyNDc1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/424752?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marenz",
      "html_url": "https://github.com/Marenz",
      "followers_url": "https://api.github.com/users/Marenz/followers",
      "following_url": "https://api.github.com/users/Marenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marenz/subscriptions",
      "organizations_url": "https://api.github.com/users/Marenz/orgs",
      "repos_url": "https://api.github.com/users/Marenz/repos",
      "events_url": "https://api.github.com/users/Marenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marenz/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2019-11-05T11:45:10Z",
  "updated_at": "2020-10-20T15:50:09Z",
  "closed_at": "2020-10-20T15:50:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWe have a [repository](https://github.com/poanetwork/posdao-contracts/tree/solc-bug) containing smart contracts and unit tests for them. When we compile the contracts with `truffle` and `solc` v0.5.11 or v0.5.12 (see [truffle's config](https://github.com/poanetwork/posdao-contracts/blob/solc-bug/truffle-config.js#L119-L128)), the `build` directory is created in repo's root directory as expected. After that, when we start unit tests,  we see the following error:\r\n\r\n![image](https://user-images.githubusercontent.com/33550681/68204342-cf73c380-ffd8-11e9-9f22-b1023477038b.png)\r\n\r\nHowever, if we remove the `build` directory (`rm -rf build`) and then restart the tests with `npm run test`, they start successfully.\r\n\r\nBut if we do the same for `solc` v0.5.10 (or v0.5.9), that works fine and the contracts are compiled successfully during the tests even when the `build` directory is not removed.\r\n\r\n## Environment\r\n\r\n- Compiler version: 0.5.11 or 0.5.12\r\n- Target EVM version (as per compiler settings): constantinople\r\n- Framework/IDE (e.g. Truffle or Remix): truffle 5.0.43\r\n- EVM execution environment / backend / blockchain client: ganache-cli 6.6.0\r\n- Operating system: macOS High Sierra 10.13.6\r\n\r\n## Steps to Reproduce\r\n\r\nTo see the error, perform the next steps:\r\n\r\n```bash\r\n$ git clone -b solc-bug https://github.com/poanetwork/posdao-contracts\r\n$ cd posdao-contracts\r\n$ npm i\r\n$ npm run compile\r\n$ npm run test\r\n```\r\n\r\nTo successfully start the same tests with `solc 0.5.10`, perform the next steps:\r\n\r\n```bash\r\n$ git clone -b solc-bug https://github.com/poanetwork/posdao-contracts\r\n$ cd posdao-contracts\r\n$ git checkout 3581cf3730f53848572104d95c465bb237d3936e\r\n$ npm i\r\n$ npm run compile\r\n$ npm run test\r\n```",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/7627/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/7627/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574640469",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-574640469",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 574640469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDY0MDQ2OQ==",
    "user": {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T12:34:37Z",
    "updated_at": "2020-01-15T12:34:37Z",
    "author_association": "COLLABORATOR",
    "body": "I was able to reproduce this behaviour and will start investigating.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/574640469/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/581595903",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-581595903",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 581595903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTU5NTkwMw==",
    "user": {
      "login": "erak",
      "id": 20012009,
      "node_id": "MDQ6VXNlcjIwMDEyMDA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20012009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erak",
      "html_url": "https://github.com/erak",
      "followers_url": "https://api.github.com/users/erak/followers",
      "following_url": "https://api.github.com/users/erak/following{/other_user}",
      "gists_url": "https://api.github.com/users/erak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erak/subscriptions",
      "organizations_url": "https://api.github.com/users/erak/orgs",
      "repos_url": "https://api.github.com/users/erak/repos",
      "events_url": "https://api.github.com/users/erak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-03T20:11:01Z",
    "updated_at": "2020-02-03T20:11:01Z",
    "author_association": "COLLABORATOR",
    "body": "I couldn't find the time to dive deeper into debugging. Could someone else have look?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/581595903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/668778669",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-668778669",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 668778669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODc3ODY2OQ==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-04T19:20:54Z",
    "updated_at": "2020-08-04T19:20:54Z",
    "author_association": "MEMBER",
    "body": "Might be related to https://github.com/ethereum/solidity/issues/9565",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/668778669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705613016",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705613016",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705613016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTYxMzAxNg==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T14:34:26Z",
    "updated_at": "2020-10-08T14:34:26Z",
    "author_association": "MEMBER",
    "body": "I can confirm that this error is still happening with the latest versions of solc (0.7.3) and truffle (5.1.47)\r\n\r\nI checked Solidity source and the `Compiled contract not found` is a message from one of our assertions, and not something that Truffle adds so it's clearly a bug in the compiler. But it's tricky to trigger. Only happens after Truffle compiles everything and then you change one contract and run `truffle compile` making it recompile just one file.\r\n\r\n### Details\r\nI managed to reproduce it after trimming down the contract considerably. Here's the shortest self-contained repro I managed to find so far. Run this in a shell in an empty directory with truffle installed globally:\r\n```bash\r\ntruffle init\r\n\r\ncat << EOF > contracts/BlockRewardAuRaBase.sol\r\ncontract Sacrifice {\r\n    constructor() public payable {}\r\n}\r\n\r\nabstract contract BlockRewardAuRaBase {\r\n    function _transferNativeReward() internal {\r\n        new Sacrifice();\r\n    }\r\n\r\n    function _distributeTokenRewards() internal virtual;\r\n}\r\nEOF\r\n\r\ncat << EOF > contracts/BlockRewardAuRaCoins.sol\r\nimport \"./BlockRewardAuRaBase.sol\";\r\n\r\ncontract BlockRewardAuRaCoins is BlockRewardAuRaBase {\r\n    function transferReward() public {\r\n        _transferNativeReward();\r\n    }\r\n\r\n    function _distributeTokenRewards() internal override {}\r\n}\r\nEOF\r\n\r\ncat << EOF > truffle-config.js\r\nmodule.exports = {\r\n  compilers: {\r\n    solc: {\r\n      version: \"0.7.3\"\r\n    }\r\n  }\r\n}\r\nEOF\r\n\r\ntruffle compile\r\ntouch contracts/BlockRewardAuRaCoins.sol\r\ntruffle compile\r\n```\r\n\r\nOutput from the last `truffle compile`:\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/BlockRewardAuRaCoins.sol\r\n\r\nCompileError: InternalCompilerError: Compiled contract not found.\r\n\r\nCompilation failed. See above.\r\n    at run (/usr/lib/node_modules/truffle/build/webpack:/packages/compile-solidity/run.js:51:1)\r\nTruffle v5.1.47 (core: 5.1.47)\r\nNode v10.22.1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705613016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705649989",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705649989",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705649989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTY0OTk4OQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T15:32:49Z",
    "updated_at": "2020-10-08T15:32:49Z",
    "author_association": "MEMBER",
    "body": "I managed to reproduce it with `solc` but only via the Standard JSON interface. Does not happen if I run `solc --combined-json srcmap` on the files from the repro above.\r\n\r\nI don't see anything specific that would obviously be the cause. Removing parts of the code or putting it all in a single file removes the error. Not requesting output for `BlockRewardAuRaCoins` or requesting something else than the `evm.*` properties removes it too. Requesting `*` instead of `evm.bytecode.sourceMap` also does not trigger the error.\r\n\r\nThe paths don't seem to really matter. It fails even if I call the files to `A.sol` and `B.sol`. Or if the paths are absolute (Truffle actually uses absolute paths). Removing `./` from the `import` does not make the error go away either. I suspected that it might be affected by the files existing on disk under these paths but apparently not. The result is the same whether they exist or not.\r\n\r\n### Repro\r\n```bash\r\nsolc --standard-json input.json\r\n```\r\n\r\n`input.json`:\r\n```json\r\n{\r\n    \"language\": \"Solidity\",\r\n    \"sources\": {\r\n        \"BlockRewardAuRaBase.sol\": {\r\n            \"content\": \"\r\n                contract Sacrifice {\r\n                    constructor() public payable {}\r\n                }\r\n\r\n                abstract contract BlockRewardAuRaBase {\r\n                    function _transferNativeReward() internal {\r\n                        new Sacrifice();\r\n                    }\r\n\r\n                    function _distributeTokenRewards() internal virtual;\r\n                }\r\n            \"\r\n        },\r\n        \"BlockRewardAuRaCoins.sol\": {\r\n            \"content\": \"\r\n                import \\\"./BlockRewardAuRaBase.sol\\\";\r\n\r\n                contract BlockRewardAuRaCoins is BlockRewardAuRaBase {\r\n                    function transferReward() public {\r\n                        _transferNativeReward();\r\n                    }\r\n\r\n                    function _distributeTokenRewards() internal override {}\r\n                }\r\n            \"\r\n        }\r\n    },\r\n    \"settings\": {\r\n        \"outputSelection\": {\r\n            \"BlockRewardAuRaCoins.sol\": {\r\n                \"BlockRewardAuRaCoins\": [\"evm.bytecode.sourceMap\"]\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOutput (passed through `jq` for readability):\r\n```json\r\n{\r\n    \"errors\": [\r\n        {\r\n            \"component\": \"general\",\r\n            \"formattedMessage\": \"InternalCompilerError: Compiled contract not found.\\n\",\r\n            \"message\": \"Internal compiler error (/solidity/libsolidity/codegen/CompilerContext.cpp:256):Compiled contract not found.\",\r\n            \"severity\": \"error\",\r\n            \"type\": \"InternalCompilerError\"\r\n        }\r\n    ],\r\n    \"sources\": {\r\n        \"BlockRewardAuRaBase.sol\": {\r\n            \"id\": 0\r\n        },\r\n        \"BlockRewardAuRaCoins.sol\": {\r\n            \"id\": 1\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFailing assertion:\r\n```c++\r\nshared_ptr<evmasm::Assembly> CompilerContext::compiledContract(ContractDefinition const& _contract) const\r\n{\r\n\tauto ret = m_otherCompilers.find(&_contract);\r\n\tsolAssert(ret != m_otherCompilers.end(), \"Compiled contract not found.\");\r\n\treturn ret->second->assemblyPtr();\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705649989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705662264",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705662264",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705662264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTY2MjI2NA==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T15:53:05Z",
    "updated_at": "2020-10-08T15:53:05Z",
    "author_association": "MEMBER",
    "body": "@chriseth \r\n> Might be related to #9565\r\n\r\nI think it's a different problem with similar symptoms. There is not circular dependency here and the contracts compile fine when not using standard JSON.\r\n\r\nMaybe it's a problem with the order in which the contracts are compiled?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705662264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705740316",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705740316",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705740316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTc0MDMxNg==",
    "user": {
      "login": "varasev",
      "id": 33550681,
      "node_id": "MDQ6VXNlcjMzNTUwNjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33550681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/varasev",
      "html_url": "https://github.com/varasev",
      "followers_url": "https://api.github.com/users/varasev/followers",
      "following_url": "https://api.github.com/users/varasev/following{/other_user}",
      "gists_url": "https://api.github.com/users/varasev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/varasev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/varasev/subscriptions",
      "organizations_url": "https://api.github.com/users/varasev/orgs",
      "repos_url": "https://api.github.com/users/varasev/repos",
      "events_url": "https://api.github.com/users/varasev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/varasev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T18:16:14Z",
    "updated_at": "2020-10-08T18:16:14Z",
    "author_association": "NONE",
    "body": "@cameel As far as I remember, I managed to fix this in our other repo in this commit: https://github.com/xdaichain/stake-token/commit/ad79abbaa4d1f91d73e80cc4b3f1b234a0ca6570#diff-b9cfc7f2cdf78a7f4b91a753d10865a2 - there was the same issue with updating solc v0.5.10 to v0.5.12 - seems updating `ganache-cli`, `truffle`, and `solidity-coverage` solved that, but I'm not sure of the reason.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705740316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705761216",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705761216",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705761216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTc2MTIxNg==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T18:58:16Z",
    "updated_at": "2020-10-08T19:04:16Z",
    "author_association": "MEMBER",
    "body": "@varasev Thanks for the info. I checked that commit and looks like it didn't really fix the issue, just made it much harder to trigger it. Which is a nice workaround. Great to hear that you found a way to make it work for you.\r\n\r\nThe issue is the compiler though, not in the JS libraries. It's the move of `mocks/` from `test/` to `contracts/` that really helped. When the mocks were inside `test/` Truffle compiled them separately when you ran `truffle test`. Now that everything is inside `contracts/`, all contracts get compiled together. One of the necessary conditions to trigger this error seems to be partial recompilation so if you compile everything at once, you're fine. I can still trigger it in your repo by forcing Truffle to compile just the mocks:\r\n\r\n```bash\r\ngit clone https://github.com/xdaichain/stake-token.git\r\ncd stake-token/\r\ngit checkout ad79abbaa4d1f91d73e80cc4b3f1b234a0ca6570\r\nnpm install\r\ntruffle compile\r\ntouch contracts/mocks/*\r\ntruffle compile\r\n```\r\n\r\nOutput from the second `truffle compile`:\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/mocks/BridgeMock.sol\r\n> Compiling ./contracts/mocks/BridgeTokenMock.sol\r\n> Compiling ./contracts/mocks/DistributionMock.sol\r\n> Compiling ./contracts/mocks/ERC677MultiBridgeTokenMock.sol\r\n> Compiling ./contracts/mocks/EmptyContract.sol\r\n> Compiling ./contracts/mocks/MultipleDistributionMock.sol\r\n> Compiling ./contracts/mocks/RecipientMock.sol\r\n> Compiling ./contracts/mocks/TokenMock.sol\r\n\r\nCompileError: InternalCompilerError: Compiled contract not found.\r\n\r\nCompilation failed. See above.\r\n    at run (/usr/lib/node_modules/truffle/build/webpack:/packages/compile-solidity/run.js:51:1)\r\nTruffle v5.1.47 (core: 5.1.47)\r\nNode v10.22.1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705761216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705986256",
    "html_url": "https://github.com/ethereum/solidity/issues/7627#issuecomment-705986256",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/7627",
    "id": 705986256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTk4NjI1Ng==",
    "user": {
      "login": "varasev",
      "id": 33550681,
      "node_id": "MDQ6VXNlcjMzNTUwNjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33550681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/varasev",
      "html_url": "https://github.com/varasev",
      "followers_url": "https://api.github.com/users/varasev/followers",
      "following_url": "https://api.github.com/users/varasev/following{/other_user}",
      "gists_url": "https://api.github.com/users/varasev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/varasev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/varasev/subscriptions",
      "organizations_url": "https://api.github.com/users/varasev/orgs",
      "repos_url": "https://api.github.com/users/varasev/repos",
      "events_url": "https://api.github.com/users/varasev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/varasev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T06:01:31Z",
    "updated_at": "2020-10-09T06:01:31Z",
    "author_association": "NONE",
    "body": "@cameel Yeah, seems moving `mocks` from `test` to `contracts` helped.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705986256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/12369",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/12369/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/12369/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/12369/events",
  "html_url": "https://github.com/ethereum/solidity/issues/12369",
  "id": 1071570752,
  "node_id": "I_kwDOAm_5kc4_3t9A",
  "number": 12369,
  "title": "Place access modifiers first on the line",
  "user": {
    "login": "jesseduffield",
    "id": 8456633,
    "node_id": "MDQ6VXNlcjg0NTY2MzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8456633?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jesseduffield",
    "html_url": "https://github.com/jesseduffield",
    "followers_url": "https://api.github.com/users/jesseduffield/followers",
    "following_url": "https://api.github.com/users/jesseduffield/following{/other_user}",
    "gists_url": "https://api.github.com/users/jesseduffield/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jesseduffield/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jesseduffield/subscriptions",
    "organizations_url": "https://api.github.com/users/jesseduffield/orgs",
    "repos_url": "https://api.github.com/users/jesseduffield/repos",
    "events_url": "https://api.github.com/users/jesseduffield/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jesseduffield/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 785717317,
      "node_id": "MDU6TGFiZWw3ODU3MTczMTc=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/language%20design%20:rage4:",
      "name": "language design :rage4:",
      "color": "9d76d3",
      "default": false,
      "description": "Any changes to the language, e.g. new features"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-12-05T22:09:29Z",
  "updated_at": "2022-08-17T13:49:01Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nBy placing access modifiers, and the `payable` keyword at the start of the line, solidity code would be more readable.\r\n\r\n## Motivation\r\n\r\nCurrently, access modifiers (e.g. 'public', 'external') are placed between the variable type and variable name, and for functions they're placed midway through the function signature. I find this makes it harder to read the code than if the access modifier appears first in the line as is typical with other languages.\r\n\r\nCompare this snippet from the blind auction example in the [docs](https://docs.soliditylang.org/en/v0.8.10/solidity-by-example.html#id2):\r\n\r\n```solidity\r\ncontract BlindAuction {\r\n    struct Bid {\r\n        bytes32 blindedBid;\r\n        uint deposit;\r\n    }\r\n\r\n    address payable public beneficiary;\r\n    uint public biddingEnd;\r\n    uint public revealEnd;\r\n    bool public ended;\r\n\r\n    mapping(address => Bid[]) public bids;\r\n\r\n    address public highestBidder;\r\n    uint public highestBid;\r\n\r\n    // Allowed withdrawals of previous bids\r\n    mapping(address => uint) pendingReturns;\r\n```\r\n\r\nAlthough it's not so bad for the first four variables, the `bids` variable requires a bit more effort to determine whether it's public because you need to rely on good peripheral vision, or reading the actual line, to know that it's public.\r\n\r\nIf the access modifiers came in front it would like like this:\r\n```solidity\r\ncontract BlindAuction {\r\n    struct Bid {\r\n        bytes32 blindedBid;\r\n        uint deposit;\r\n    }\r\n\r\n    public address payable beneficiary;\r\n    public uint biddingEnd;\r\n    public uint revealEnd;\r\n    public bool ended;\r\n\r\n    public mapping(address => Bid[]) bids;\r\n\r\n    public address highestBidder;\r\n    public uint highestBid;\r\n\r\n    // Allowed withdrawals of previous bids\r\n    mapping(address => uint) pendingReturns;\r\n```\r\n\r\nThis allows you to tell at a glance that the first seven variables are private and the `pendingReturns` variable isn't, without obscuring anything else. \r\n\r\nLikewise, with function definitions, the first thing I want to know about a function is its access level because that best contextualises it with respect to the rest of the code. Having it placed after the function name and input parameters makes this difficult. I would replace\r\n```solidity\r\n  function placeBid(address bidder, uint value) internal\r\n          returns (bool success)\r\n```\r\n\r\nwith\r\n\r\n```solidity\r\n  internal function placeBid(address bidder, uint value)\r\n          returns (bool success)\r\n```\r\n\r\nFor what it's worth, I would also treat the `payable` keyword the same. I would replace:\r\n\r\n```solidity\r\nuint public value;\r\naddress payable public seller;\r\naddress payable public buyer;\r\n```\r\n\r\nwith\r\n\r\n```solidity\r\npublic uint value;\r\npublic payable address seller;\r\npublic payable address buyer;\r\n```\r\n\r\nThis colocates the variable type with the variable name, which I find makes the code easier to read. `public payable address seller` reads much closer to regular english than `address payable public seller`.\r\n\r\n## Specification\r\n\r\npublic access keywords, as well as `payable` are placed at the start of the line for both variable and function declarations. Function modifiers are kept as-is.\r\n\r\n## Backwards Compatibility\r\n\r\nThis doesn't actually change functionality so there's no compatibility issue for code that's already compiled. The breaking change will apply to source code however. We could make things backwards compatible by allowing the access modifier to appear in either the old spot or the new spot at the start of the line, and deprecate the old format, but in general I think that if we're still not at version 1, now is a good time to make a change like this which will increase readability in the long run.\r\n\r\nI'm not a long-time solidity user myself so I'm not sure if there's some hidden benefit I'm missing regarding these access modifiers but I think moving access modifiers to the start of a line makes the code much easier to read and understand. I'm not sure how great this repo's tolerance is for breaking changes right now, but I thought I'd raise this issue anyway. Thanks!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/12369/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/12369/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/986332328",
    "html_url": "https://github.com/ethereum/solidity/issues/12369#issuecomment-986332328",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12369",
    "id": 986332328,
    "node_id": "IC_kwDOAm_5kc46yjyo",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-06T00:15:59Z",
    "updated_at": "2021-12-06T00:18:39Z",
    "author_association": "MEMBER",
    "body": "Hello! Thanks for taking the time to submit a well-though out proposal. I've seen people mention this from time to time but I think you're the first one to actually request this as a feature :)\r\n\r\nPlacing modifiers after a function is not unheard of as far as programming languages go. For example in C++ you can mark functions as `const` or `volatile` this way. It's not the most popular choice of placement but that does not make it necessarily bad. I think that people's opinions on this will depend strongly on what languages they're coming from.\r\n\r\nThe biggest reason for placing it after the function in Solidity is that it's where all the modifiers are. Singling it out would result in people asking why it's the only one you cannot place after the function :) You could argue that all modifiers could be placed in front (e.g. on a separate line like decorators in Python) but that's another discussion.\r\n\r\nBy the way, would you allow the new placement also for mutability modifiers (`view`, `pure`, `payable`)? If not, why? This seems like the logical next step so I'm sure that someone will request it if we allow it for the access modifiers.\r\n\r\nI do agree that placing the access first in your examples makes them somewhat easier to read. I think this is mostly due to the fact that all your state variables are `public` and line up neatly so there's less visual noise. This will not always be the case. If access types were more varied, it would be less clear-cut:\r\n```solidity\r\naddress private token;\r\naddress payable public recipient;\r\nuint roundStart;\r\nuint roundEnd;\r\nuint public reward;\r\nbool public ended;\r\nmapping(address => Bid[]) private bids;\r\naddress highestBidder;\r\nuint public highestBid;\r\n```\r\nvs\r\n```solidity\r\nprivate address token;\r\npublic payable address recipient;\r\nuint roundStart;\r\nuint roundEnd;\r\npublic uint reward;\r\npublic bool ended;\r\nprivate mapping(address => Bid[]) bids;\r\naddress highestBidder;\r\npublic uint highestBid;\r\n```\r\n\r\nI think you do have a point here though - it's probably common to have only public and internal variables and they can be clustered together to benefit from this change. I'm just not sure if the benefit is big enough to justify a breaking change in the language.\r\n\r\nAnd unfortunately I don't think accepting both placements is viable because it would make syntax for state variables of function types ambiguous (in Solidity you can have variables and parameters of external and internal function types). For example, would `public` in a state variable declared as `public function () f;` refer to access of the function or the variable?\r\n\r\nIn case of function type state variables I think that readability actually decreases. For example an internal state variable of external function type now can  look like this:\r\n```solidity\r\ncontract C {\r\n    function (uint, bool) external view returns (uint) internal f;\r\n}\r\n```\r\n\r\nand would turn into this instead:\r\n```solidity\r\ncontract C {\r\n    internal external function (uint, bool) view returns (uint) f;\r\n}\r\n```\r\n\r\nNote that specifying `internal` for both state variables and for function types is optional (it's the default). This could be solved without ambiguity in the syntax - because function types and state variables share only one access type (`internal`) - but I think it would still look ambiguous to humans. For example this would be a private state variable of internal function type (modifier applies to the **variable**):\r\n```solidity\r\ncontract C {\r\n    private function (uint, bool) view returns (uint) f;\r\n}\r\n```\r\nAnd this would be an internal state variable of external function type (modifier applies to the **type**):\r\n```solidity\r\ncontract C {\r\n    external function (uint, bool) view returns (uint) f;\r\n}\r\n```\r\n\r\nOverall I think that there's no inherent problem with the current syntax and changing it now is too much trouble for too little benefit. It's just my personal opinion though and it would be interesting to hear what others on the team and other users think about this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/986332328/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/987267909",
    "html_url": "https://github.com/ethereum/solidity/issues/12369#issuecomment-987267909",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/12369",
    "id": 987267909,
    "node_id": "IC_kwDOAm_5kc462INF",
    "user": {
      "login": "jesseduffield",
      "id": 8456633,
      "node_id": "MDQ6VXNlcjg0NTY2MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8456633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jesseduffield",
      "html_url": "https://github.com/jesseduffield",
      "followers_url": "https://api.github.com/users/jesseduffield/followers",
      "following_url": "https://api.github.com/users/jesseduffield/following{/other_user}",
      "gists_url": "https://api.github.com/users/jesseduffield/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jesseduffield/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jesseduffield/subscriptions",
      "organizations_url": "https://api.github.com/users/jesseduffield/orgs",
      "repos_url": "https://api.github.com/users/jesseduffield/repos",
      "events_url": "https://api.github.com/users/jesseduffield/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jesseduffield/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-06T21:54:24Z",
    "updated_at": "2021-12-06T21:54:24Z",
    "author_association": "NONE",
    "body": "@cameel very good points. \r\n\r\n> By the way, would you allow the new placement also for mutability modifiers (view, pure, payable)? If not, why? This seems like the logical next step so I'm sure that someone will request it if we allow it for the access modifiers.\r\n\r\nI'm not 100% confident in my response but I would say yes, mutability modifiers would also be pulled to the front, but user-defined modifiers would remain where they were. I think that it's useful to see view/pure/etc before the rest of the function signature because it gives more context to prepare your brain for when you read the function name/inputs/outputs. You could make the argument that user-defined modifiers also provide good context, but I find they make a lot more sense after you see the function name and inputs/outputs. But I recognise the argument that user-defined modifiers and builtin modifiers are both just modifiers so should be colocated.\r\n\r\nWe can resolve the issue of state variables of function types by having the variable name come before the type like so:\r\n\r\n```solidity\r\npublic payable beneficiary address; // this actually reads like regular english more so than the example in the OP\r\npublic biddingEnd uint;\r\npublic revealEnd uint;\r\npublic ended bool;\r\n\r\npublic bids mapping(address => Bid[]);\r\npublic highestBidder address;\r\npublic highestBid uint;\r\n\r\npendingReturns mapping(address => uint)\r\n...\r\ncontract C {\r\n    internal f external view function (uint, bool) returns (uint);\r\n    private f2 view function (uint, bool) returns (uint);\r\n    f3 external view function (uint, bool) returns (uint);\r\n}\r\n```\r\n\r\nCome to think of it, I actually prefer this arrangement to the original proposal in terms of giving the reader the best context. I think it's better to see something like 'public payable' first, so that when you come across 'beneficiary' it makes sense, and then when you come across 'address' it makes even more sense.\r\n\r\nWith that said, I understand if you believe it's too big a breaking change to justify!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/987267909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

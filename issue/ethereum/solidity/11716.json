{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/11716",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/11716/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/11716/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/11716/events",
  "html_url": "https://github.com/ethereum/solidity/issues/11716",
  "id": 954954906,
  "node_id": "MDU6SXNzdWU5NTQ5NTQ5MDY=",
  "number": 11716,
  "title": "Expose import graph in output json",
  "user": {
    "login": "d-xo",
    "id": 6689924,
    "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/d-xo",
    "html_url": "https://github.com/d-xo",
    "followers_url": "https://api.github.com/users/d-xo/followers",
    "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
    "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
    "organizations_url": "https://api.github.com/users/d-xo/orgs",
    "repos_url": "https://api.github.com/users/d-xo/repos",
    "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/d-xo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-07-28T15:00:38Z",
  "updated_at": "2021-09-21T11:39:40Z",
  "closed_at": "2021-07-28T21:42:21Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Abstract\r\n\r\nExposing the import graph as part of the compiler output would make implementing incremental compilation workflows in frameworks a lot easier.\r\n\r\n## Motivation\r\n\r\nOne very common feature request for dapptools is support for incremental compilation, especially for larger projects or monorepos. In order to do this we would need to parse the solidity files in the project, and build some tree or graph like structure showing which contracts are imported and where.\r\n\r\nOnce we have this graph we can pretty easily determine the set of changed contracts, and then use the graph to determine which contracts should be recompiled.\r\n\r\nPresumably solidity already builds such a structure as part of the compilation process, it would be very helpful if this could be exposed as part of the build artifacts.",
  "closed_by": {
    "login": "chriseth",
    "id": 9073706,
    "node_id": "MDQ6VXNlcjkwNzM3MDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chriseth",
    "html_url": "https://github.com/chriseth",
    "followers_url": "https://api.github.com/users/chriseth/followers",
    "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
    "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
    "organizations_url": "https://api.github.com/users/chriseth/orgs",
    "repos_url": "https://api.github.com/users/chriseth/repos",
    "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chriseth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/11716/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/11716/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888390367",
    "html_url": "https://github.com/ethereum/solidity/issues/11716#issuecomment-888390367",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11716",
    "id": 888390367,
    "node_id": "IC_kwDOAm_5kc4088Lf",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-28T15:10:21Z",
    "updated_at": "2021-07-28T15:10:21Z",
    "author_association": "MEMBER",
    "body": "You can construct an import graph from the AST. For features like incremental compilation, we also recently implemented the `--stop-after parsing` feature, which essentially only parses the input files and does not auto-load imported dependencies that were not given as input, but can still export an AST.\r\n\r\nThe `ImportDirective` has the following attributes:\r\n - `file` (just the string in the source code)\r\n - `sourceUnit` the AST ID of the referenced file\r\n - `absolutePath` the resolved absolute path as seen by the compiler inside its internal virtual file system (this is the unique name that characterizes the referenced source unit)\r\n\r\nHow to go from `absolutePath` to a file on the local filesystem depends on the way you invoke the compiler.\r\n\r\nCan you work with this information or do you need anything else?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888390367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888425292",
    "html_url": "https://github.com/ethereum/solidity/issues/11716#issuecomment-888425292",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11716",
    "id": 888425292,
    "node_id": "IC_kwDOAm_5kc409EtM",
    "user": {
      "login": "d-xo",
      "id": 6689924,
      "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/d-xo",
      "html_url": "https://github.com/d-xo",
      "followers_url": "https://api.github.com/users/d-xo/followers",
      "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
      "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
      "organizations_url": "https://api.github.com/users/d-xo/orgs",
      "repos_url": "https://api.github.com/users/d-xo/repos",
      "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/d-xo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-28T15:56:01Z",
    "updated_at": "2021-07-28T15:56:01Z",
    "author_association": "MEMBER",
    "body": "Ah interesting. Yes I think we can work with this. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/888425292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/922504321",
    "html_url": "https://github.com/ethereum/solidity/issues/11716#issuecomment-922504321",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11716",
    "id": 922504321,
    "node_id": "IC_kwDOAm_5kc42_EyB",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-19T16:56:40Z",
    "updated_at": "2021-09-19T16:56:40Z",
    "author_association": "MEMBER",
    "body": "@d-xo Is #11756 a blocker for you regarding incremental compilation? The bug is that `--stop-after parsing` does not currently provide `absolutePath`. Perhaps we should prioritize it a bit more?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/922504321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/923898630",
    "html_url": "https://github.com/ethereum/solidity/issues/11716#issuecomment-923898630",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/11716",
    "id": 923898630,
    "node_id": "IC_kwDOAm_5kc43EZMG",
    "user": {
      "login": "d-xo",
      "id": 6689924,
      "node_id": "MDQ6VXNlcjY2ODk5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6689924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/d-xo",
      "html_url": "https://github.com/d-xo",
      "followers_url": "https://api.github.com/users/d-xo/followers",
      "following_url": "https://api.github.com/users/d-xo/following{/other_user}",
      "gists_url": "https://api.github.com/users/d-xo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/d-xo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/d-xo/subscriptions",
      "organizations_url": "https://api.github.com/users/d-xo/orgs",
      "repos_url": "https://api.github.com/users/d-xo/repos",
      "events_url": "https://api.github.com/users/d-xo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/d-xo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T11:39:40Z",
    "updated_at": "2021-09-21T11:39:40Z",
    "author_association": "MEMBER",
    "body": "Hmmmm yes I think it probably is. Otherwise we would have to maintain a copy of the file resolution stages ourselves in dapp.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/923898630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

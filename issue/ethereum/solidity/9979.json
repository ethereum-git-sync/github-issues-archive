{
  "url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
  "repository_url": "https://api.github.com/repos/ethereum/solidity",
  "labels_url": "https://api.github.com/repos/ethereum/solidity/issues/9979/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/solidity/issues/9979/comments",
  "events_url": "https://api.github.com/repos/ethereum/solidity/issues/9979/events",
  "html_url": "https://github.com/ethereum/solidity/issues/9979",
  "id": 716462148,
  "node_id": "MDU6SXNzdWU3MTY0NjIxNDg=",
  "number": 9979,
  "title": "\"Variable dataEnd is 4 slot(s) too deep inside the stack\" in an external function returning triple-nested dynamic array",
  "user": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 249074435,
      "node_id": "MDU6TGFiZWwyNDkwNzQ0MzU=",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/bug%20:bug:",
      "name": "bug :bug:",
      "color": "fc1313",
      "default": false,
      "description": ""
    },
    {
      "id": 2376134343,
      "node_id": "MDU6TGFiZWwyMzc2MTM0MzQz",
      "url": "https://api.github.com/repos/ethereum/solidity/labels/should%20compile%20without%20error",
      "name": "should compile without error",
      "color": "c48f13",
      "default": false,
      "description": "Error is reported even though it shouldn't. Source is fine."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-10-07T11:55:44Z",
  "updated_at": "2022-12-02T14:01:06Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Steps to Reproduce\r\n```solidity\r\npragma experimental ABIEncoderV2;\r\n\r\ncontract A {\r\n    function get() public view returns (uint[][][] memory) {}\r\n\r\n    function foo() public view {\r\n        A(0x00).get();\r\n    }\r\n}\r\n```\r\n\r\nIt happens only when using the optimizer\r\n```bash\r\nsolc --optimize test.sol\r\n```\r\n```\r\nCompiler error: Stack too deep when compiling inline assembly: Variable dataEnd is 4 slot(s) too deep inside the stack.\r\n```\r\nWithout the optimizer it compiles just fine.\r\n\r\nRunning it as a soltest test case gives a bit more info about where the exception is raised:\r\n```\r\nRunning 1 test case...\r\n/solidity/test/boostTest.cpp(123): error: in \"syntaxTests/test\": Exception during extracted test: /solidity/libyul/backends/evm/AsmCodeGen.cpp(248): Throw in function static void solidity::yul::CodeGenerator::assemble(const solidity::yul::Block&, solidity::yul::AsmAnalysisInfo&, solidity::evmasm::Assembly&, solidity::langutil::EVMVersion, const solidity::yul::ExternalIdentifierAccess&, bool, bool)\r\nDynamic exception type: boost::wrapexcept<solidity::langutil::StackTooDeepError>\r\nstd::exception::what: Stack too deep when compiling inline assembly: Variable dataEnd is 4 slot(s) too deep inside the stack.\r\n[solidity::util::tag_comment*] = Stack too deep when compiling inline assembly: Variable dataEnd is 4 slot(s) too deep inside the stack.\r\n\r\n\r\n*** 1 failure is detected in the test module \"SolidityTests\"\r\n```\r\n\r\n## Environment\r\n- Compiler version: 0.7.3-develop.2020.10.7+commit.d15360a9.Linux.g++",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/9979/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/solidity/issues/9979/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/704896459",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-704896459",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 704896459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDg5NjQ1OQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T12:18:40Z",
    "updated_at": "2020-10-08T13:40:31Z",
    "author_association": "MEMBER",
    "body": "Managed to reproduce it with `solc` by enabling the optimizer. So it's not just a soltest thing. Description and title updated.\r\n\r\nAlso, this error happens only on 0.7.2 and in develop. It does not happen on 0.7.1.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/704896459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705548174",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-705548174",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 705548174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTU0ODE3NA==",
    "user": {
      "login": "hrkrshnn",
      "id": 13174375,
      "node_id": "MDQ6VXNlcjEzMTc0Mzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13174375?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrkrshnn",
      "html_url": "https://github.com/hrkrshnn",
      "followers_url": "https://api.github.com/users/hrkrshnn/followers",
      "following_url": "https://api.github.com/users/hrkrshnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrkrshnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrkrshnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrkrshnn/subscriptions",
      "organizations_url": "https://api.github.com/users/hrkrshnn/orgs",
      "repos_url": "https://api.github.com/users/hrkrshnn/repos",
      "events_url": "https://api.github.com/users/hrkrshnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrkrshnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T12:54:52Z",
    "updated_at": "2020-10-08T12:54:52Z",
    "author_association": "MEMBER",
    "body": "We generally ignore stack too deep errors. But this one might be a bit interesting. If it's not happening in 0.7.1, then it's likely that this is because of the change in order of inlining that was introduced in 0.7.2. If this is true, then there isn't much that we can do here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/705548174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/820552076",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-820552076",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 820552076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDU1MjA3Ng==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-15T16:10:47Z",
    "updated_at": "2021-04-15T16:10:47Z",
    "author_association": "NONE",
    "body": "I'm seeing that error in 0.8.3.\r\nAny clue what is causing that ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/820552076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822311917",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-822311917",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 822311917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjMxMTkxNw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T09:15:52Z",
    "updated_at": "2021-04-19T09:15:52Z",
    "author_association": "MEMBER",
    "body": "@Amxx try to reduce the number of parameters for your function.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822311917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822326789",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-822326789",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 822326789,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjMyNjc4OQ==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T09:37:38Z",
    "updated_at": "2021-04-19T09:37:38Z",
    "author_association": "NONE",
    "body": "> @Amxx try to reduce the number of parameters for your function.\n\nYes that was it. To many calldata arrays in parameter. Replacing them with an array of structures (or a structures with arrays) seems to fix it.\n\nThe error message is really unclear (and doesn't point out the function causing the issue). You may want to clarify things",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822326789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822518863",
    "html_url": "https://github.com/ethereum/solidity/issues/9979#issuecomment-822518863",
    "issue_url": "https://api.github.com/repos/ethereum/solidity/issues/9979",
    "id": 822518863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjUxODg2Mw==",
    "user": {
      "login": "chriseth",
      "id": 9073706,
      "node_id": "MDQ6VXNlcjkwNzM3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9073706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chriseth",
      "html_url": "https://github.com/chriseth",
      "followers_url": "https://api.github.com/users/chriseth/followers",
      "following_url": "https://api.github.com/users/chriseth/following{/other_user}",
      "gists_url": "https://api.github.com/users/chriseth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chriseth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chriseth/subscriptions",
      "organizations_url": "https://api.github.com/users/chriseth/orgs",
      "repos_url": "https://api.github.com/users/chriseth/repos",
      "events_url": "https://api.github.com/users/chriseth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chriseth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T14:38:32Z",
    "updated_at": "2021-04-19T14:38:32Z",
    "author_association": "MEMBER",
    "body": "We can hopefully fix this altogether soon.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/solidity/issues/comments/822518863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

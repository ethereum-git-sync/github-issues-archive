{
  "url": "https://api.github.com/repos/ethereum/tests/issues/20",
  "repository_url": "https://api.github.com/repos/ethereum/tests",
  "labels_url": "https://api.github.com/repos/ethereum/tests/issues/20/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/tests/issues/20/comments",
  "events_url": "https://api.github.com/repos/ethereum/tests/issues/20/events",
  "html_url": "https://github.com/ethereum/tests/issues/20",
  "id": 45632652,
  "node_id": "MDU6SXNzdWU0NTYzMjY1Mg==",
  "number": 20,
  "title": "More intuitive interpretation of pre, exec and post requested",
  "user": {
    "login": "nicksavers",
    "id": 7483198,
    "node_id": "MDQ6VXNlcjc0ODMxOTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7483198?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicksavers",
    "html_url": "https://github.com/nicksavers",
    "followers_url": "https://api.github.com/users/nicksavers/followers",
    "following_url": "https://api.github.com/users/nicksavers/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicksavers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicksavers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicksavers/subscriptions",
    "organizations_url": "https://api.github.com/users/nicksavers/orgs",
    "repos_url": "https://api.github.com/users/nicksavers/repos",
    "events_url": "https://api.github.com/users/nicksavers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicksavers/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-10-13T11:32:43Z",
  "updated_at": "2014-10-14T23:58:55Z",
  "closed_at": "2014-10-14T23:58:55Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "As I understood from @CJentzsch, the tests are created with the assumption that certain values used in the `exec`-part of the test, are assumed to be present, whereas it is more intuitive to define them in the `pre`-state of the test.\n\n**Example**\n\n`balance0` in [vmEnvironmentalInfoTest.json](https://github.com/ethereum/tests/blob/master/vmtests/vmEnvironmentalInfoTest.json#L119) expects to have account `0xcd1722f3947def4cf144679da39c4c32bdc35681` in the `post`-state, but the `pre`-state doesn't define it.\n\nAlso, the balance of `0f572e5295c57f15886f9b263e2f6d2d6c7b5ec6` is defined both in the `pre`-state and `post`-state as `1000000000000000000` while the exec-part transfers a value of `1000000000000000000` to that account.\n\nCould the tests be adapted to the interpretation that any `pre`-defined account, actually gets defined in the `pre`-part of the test and not by interpreting the `exec`-state, unless that's part of the protocol?\n\nSo in this case it would mean that `pre` would become\n\n```\n        \"pre\" : {\n            \"0f572e5295c57f15886f9b263e2f6d2d6c7b5ec6\" : {\n                \"balance\" : \"0\",\n                \"code\" : \"0x73cd1722f3947def4cf144679da39c4c32bdc3568131600057\",\n                \"nonce\" : \"0\",\n                \"storage\" : {\n                }\n            }\n            \"cd1722f3947def4cf144679da39c4c32bdc35681\" : {\n                \"balance\" : \"1000000000000000000\",\n                \"code\" : \"0x\",\n                \"nonce\" : \"0\",\n                \"storage\" : {\n                }\n            }\n        }\n```\n",
  "closed_by": {
    "login": "nicksavers",
    "id": 7483198,
    "node_id": "MDQ6VXNlcjc0ODMxOTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7483198?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicksavers",
    "html_url": "https://github.com/nicksavers",
    "followers_url": "https://api.github.com/users/nicksavers/followers",
    "following_url": "https://api.github.com/users/nicksavers/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicksavers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicksavers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicksavers/subscriptions",
    "organizations_url": "https://api.github.com/users/nicksavers/orgs",
    "repos_url": "https://api.github.com/users/nicksavers/repos",
    "events_url": "https://api.github.com/users/nicksavers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicksavers/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/tests/issues/20/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/tests/issues/20/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/59108014",
    "html_url": "https://github.com/ethereum/tests/issues/20#issuecomment-59108014",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/20",
    "id": 59108014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTA4MDE0",
    "user": {
      "login": "gavofyork",
      "id": 138296,
      "node_id": "MDQ6VXNlcjEzODI5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/138296?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavofyork",
      "html_url": "https://github.com/gavofyork",
      "followers_url": "https://api.github.com/users/gavofyork/followers",
      "following_url": "https://api.github.com/users/gavofyork/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavofyork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavofyork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavofyork/subscriptions",
      "organizations_url": "https://api.github.com/users/gavofyork/orgs",
      "repos_url": "https://api.github.com/users/gavofyork/repos",
      "events_url": "https://api.github.com/users/gavofyork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavofyork/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-10-14T20:08:58Z",
    "updated_at": "2014-10-14T20:08:58Z",
    "author_association": "MEMBER",
    "body": "I agree it's counter intuitive and certainly wouldn't be a situation found with the VM actually being used from the State.\n\nHowever, the purpose of these tests is to test the VM in complete isolation from the State and any rules about how transactions come into being.\n\nRequiring `pre` to contain, in some form, the transaction origin & sender is, I think, reasonable. Requiring it to have a particular balance is not (since even within ethereum proper, the VM has no guarantees that the balance > 0 at the start of code execution). Similarly requiring it to have equivalent code as that in `exec` is not (again, even within ethereum proper, there are instances when `exec`'s code and `pre`/`origin`'s code is different).\n\nRemember: the point if these is to test the VM in isolation from ethereum proper and all of the accidental guarantees it brings - to test it purely on the basis specified in the YP.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/59108014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/59114561",
    "html_url": "https://github.com/ethereum/tests/issues/20#issuecomment-59114561",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/20",
    "id": 59114561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTE0NTYx",
    "user": {
      "login": "nicksavers",
      "id": 7483198,
      "node_id": "MDQ6VXNlcjc0ODMxOTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7483198?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicksavers",
      "html_url": "https://github.com/nicksavers",
      "followers_url": "https://api.github.com/users/nicksavers/followers",
      "following_url": "https://api.github.com/users/nicksavers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicksavers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicksavers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicksavers/subscriptions",
      "organizations_url": "https://api.github.com/users/nicksavers/orgs",
      "repos_url": "https://api.github.com/users/nicksavers/repos",
      "events_url": "https://api.github.com/users/nicksavers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicksavers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-10-14T20:53:06Z",
    "updated_at": "2014-10-14T21:23:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Requiring pre to contain, in some form, the transaction origin & sender is, I think, reasonable.\n\nThis is currently the only reason why some tests fail for us, so I would be happy enough with that.\nFor the rest, I understand. @vbuterin also made that point about balances; the VM doesn't transfer value in a transaction.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/59114561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

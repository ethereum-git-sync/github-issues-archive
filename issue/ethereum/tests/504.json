{
  "url": "https://api.github.com/repos/ethereum/tests/issues/504",
  "repository_url": "https://api.github.com/repos/ethereum/tests",
  "labels_url": "https://api.github.com/repos/ethereum/tests/issues/504/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/tests/issues/504/comments",
  "events_url": "https://api.github.com/repos/ethereum/tests/issues/504/events",
  "html_url": "https://github.com/ethereum/tests/issues/504",
  "id": 358685500,
  "node_id": "MDU6SXNzdWUzNTg2ODU1MDA=",
  "number": 504,
  "title": "Is TransactionNonceCheck state test incorrect?",
  "user": {
    "login": "germsvel",
    "id": 3245976,
    "node_id": "MDQ6VXNlcjMyNDU5NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3245976?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/germsvel",
    "html_url": "https://github.com/germsvel",
    "followers_url": "https://api.github.com/users/germsvel/followers",
    "following_url": "https://api.github.com/users/germsvel/following{/other_user}",
    "gists_url": "https://api.github.com/users/germsvel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/germsvel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/germsvel/subscriptions",
    "organizations_url": "https://api.github.com/users/germsvel/orgs",
    "repos_url": "https://api.github.com/users/germsvel/repos",
    "events_url": "https://api.github.com/users/germsvel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/germsvel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-09-10T15:51:35Z",
  "updated_at": "2018-09-14T18:48:09Z",
  "closed_at": "2018-09-14T18:48:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I was looking through the [transaction nonce check state test](https://github.com/ethereum/tests/blob/develop/GeneralStateTests/stTransactionTest/TransactionNonceCheck.json) and its [filler](https://github.com/ethereum/tests/blob/develop/src/GeneralStateTestsFiller/stTransactionTest/TransactionNonceCheckFiller.json). And I can't quite understand why it creates the beneficiary's account `2adc25665018aa1fe0e6bc666dac8fc2697ff9ba ` (before EIP-158).\r\n\r\nThe `pre` section does not have the account, but the `post` section does. It seems to me that since the sender account's nonce is `10` and the transaction nonce is `0`, the transaction should never get executed because it fails step (3) of the initial tests of intrinsic validity outlined at the beginning of Section 6 of the Yellow Paper. \r\n\r\n![screen shot 2018-09-10 at 11 29 36 am](https://user-images.githubusercontent.com/3245976/45308405-63d6b900-b4ef-11e8-94af-46810ae15567.png)\r\n\r\nSomeone in gitter mentioned that perhaps state tests should not have tests with invalid transactions, so I'd be happy to open a PR removing the test if that's the case. ",
  "closed_by": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/tests/issues/504/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/tests/issues/504/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/420014960",
    "html_url": "https://github.com/ethereum/tests/issues/504#issuecomment-420014960",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/504",
    "id": 420014960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDAxNDk2MA==",
    "user": {
      "login": "germsvel",
      "id": 3245976,
      "node_id": "MDQ6VXNlcjMyNDU5NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3245976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/germsvel",
      "html_url": "https://github.com/germsvel",
      "followers_url": "https://api.github.com/users/germsvel/followers",
      "following_url": "https://api.github.com/users/germsvel/following{/other_user}",
      "gists_url": "https://api.github.com/users/germsvel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/germsvel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/germsvel/subscriptions",
      "organizations_url": "https://api.github.com/users/germsvel/orgs",
      "repos_url": "https://api.github.com/users/germsvel/repos",
      "events_url": "https://api.github.com/users/germsvel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/germsvel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-10T18:32:30Z",
    "updated_at": "2018-09-10T18:32:30Z",
    "author_association": "NONE",
    "body": "After looking at some of [mana's](https://github.com/poanetwork/mana) Frontier state test failures, it seems that all of the following are tests with invalid transactions, \r\n\r\n```\r\nstCallCreateCallCodeTest/createNameRegistratorPerTxsNotEnoughGas\r\nstInitCodeTest/NotEnoughCashContractCreation\r\nstRandom2/201503110226PYTHON_DUP6\r\nstTransactionTest/CreateTransactionReverted\r\nstTransactionTest/EmptyTransaction\r\nstTransactionTest/OverflowGasRequire\r\nstTransactionTest/RefundOverflow\r\nstTransactionTest/RefundOverflow2\r\nstTransactionTest/TransactionNonceCheck\r\nstTransactionTest/TransactionNonceCheck2\r\nstTransactionTest/TransactionToItselfNotEnoughFounds\r\nstTransactionTest/UserTransactionGasLimitIsTooLowWhenZeroCost\r\n```\r\n\r\nIf the state tests should not have invalid transactions, should all of those be deleted as well? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/420014960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/420328746",
    "html_url": "https://github.com/ethereum/tests/issues/504#issuecomment-420328746",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/504",
    "id": 420328746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDMyODc0Ng==",
    "user": {
      "login": "winsvega",
      "id": 4492341,
      "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winsvega",
      "html_url": "https://github.com/winsvega",
      "followers_url": "https://api.github.com/users/winsvega/followers",
      "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
      "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
      "organizations_url": "https://api.github.com/users/winsvega/orgs",
      "repos_url": "https://api.github.com/users/winsvega/repos",
      "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winsvega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-11T16:08:57Z",
    "updated_at": "2018-09-11T16:08:57Z",
    "author_association": "MEMBER",
    "body": "No. Thanks for the list. \r\nAnd yes you could open a PR that removes it. \r\nI will reimplement those cases in a form of correct blockchain test.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/420328746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/421000889",
    "html_url": "https://github.com/ethereum/tests/issues/504#issuecomment-421000889",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/504",
    "id": 421000889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTAwMDg4OQ==",
    "user": {
      "login": "germsvel",
      "id": 3245976,
      "node_id": "MDQ6VXNlcjMyNDU5NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3245976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/germsvel",
      "html_url": "https://github.com/germsvel",
      "followers_url": "https://api.github.com/users/germsvel/followers",
      "following_url": "https://api.github.com/users/germsvel/following{/other_user}",
      "gists_url": "https://api.github.com/users/germsvel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/germsvel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/germsvel/subscriptions",
      "organizations_url": "https://api.github.com/users/germsvel/orgs",
      "repos_url": "https://api.github.com/users/germsvel/repos",
      "events_url": "https://api.github.com/users/germsvel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/germsvel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-13T13:09:42Z",
    "updated_at": "2018-09-13T13:09:42Z",
    "author_association": "NONE",
    "body": "@winsvega thanks for all the guidance with this test removal. I opened a PR removing the test (and filler) for the TransactionNonceCheck. If you want me to remove any other tests on the list above, let me know. I'd be glad to help. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/421000889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/421450705",
    "html_url": "https://github.com/ethereum/tests/issues/504#issuecomment-421450705",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/504",
    "id": 421450705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTQ1MDcwNQ==",
    "user": {
      "login": "winsvega",
      "id": 4492341,
      "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winsvega",
      "html_url": "https://github.com/winsvega",
      "followers_url": "https://api.github.com/users/winsvega/followers",
      "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
      "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
      "organizations_url": "https://api.github.com/users/winsvega/orgs",
      "repos_url": "https://api.github.com/users/winsvega/repos",
      "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winsvega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-14T18:47:33Z",
    "updated_at": "2018-09-14T18:47:33Z",
    "author_association": "MEMBER",
    "body": "do not remove such tests for now. \r\nwe discussed this issue and decided to leave it as it is for now.\r\n\r\nthe problem you were having is a fake touch to coinbase that imitate mining reward in state tests. \r\nthat touch was done because state tests could be executed via rpc like a blockhain test.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/421450705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/tests/issues/991",
  "repository_url": "https://api.github.com/repos/ethereum/tests",
  "labels_url": "https://api.github.com/repos/ethereum/tests/issues/991/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/tests/issues/991/comments",
  "events_url": "https://api.github.com/repos/ethereum/tests/issues/991/events",
  "html_url": "https://github.com/ethereum/tests/issues/991",
  "id": 1058346217,
  "node_id": "I_kwDOAO0i584_FRTp",
  "number": 991,
  "title": "Max account nonce check",
  "user": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-11-19T09:56:50Z",
  "updated_at": "2021-12-17T17:22:36Z",
  "closed_at": "2021-12-17T17:22:36Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "In addition to what we already have:\r\n\r\n- [ ] transaction coming from account with maxNonce (should fail), maxNonce-1 (should work)\r\n- [ ] A delegate call B, B create/create2 contract     A has maxNonce, B has maxNonce  (create should fail)\r\n- [ ] A delegate call B, B create/create2 contract     A has maxNonce-1, B has maxNonce  (create should work)\r\n- [ ] A delegate call B, B create/create2 contract     A has maxNonce-1, B has maxNonce - 1   (create should work)\r\n- [ ] A delegate call B, B create/create2 contract     A has maxNonce, B has maxNonce - 1   (create should fail)\r\n\r\n- [ ] A call B, B create/create2 contract     A has maxNonce, B has maxNonce  (create should fail)\r\n- [ ] A call B, B create/create2 contract     A has maxNonce-1, B has maxNonce  (create should fail)   (differs from delegatecall)\r\n- [ ] A call B, B create/create2 contract     A has maxNonce-1, B has maxNonce - 1   (create should work)\r\n- [ ] A call B, B create/create2 contract     A has maxNonce, B has maxNonce - 1   (create should work) (differs from delegatecall)\r\n\r\n*I think a bug might be in the cache where it does not expect code to be that large.*\r\nSuch as state revert opeario. The state steps are getting huge with max code. and to revert them up to some point might trigger a bug.\r\n\r\n- [ ] A stores 1:1, A calls B,  B create contracts with maxcodesize 10 times (no oog upto here), then B oogs the call. creations reverted. But A still stores 1:1 as it is the subcall that OOGed\r\n- [ ] A stores 1:1, A creates contracts with maxcodesize 5 times (success), A calls B,  B create contracts with maxcodesize 10 times (no oog upto here), then B oogs the call. creations reverted. But A still stores 1:1 as it is the subcall that OOGed\r\n- [ ] A stores 1:1, A calls B,  B create contracts with maxcodesize 10 times, A calls 5 newly created contracts to suicide themselves (clean the code from state but not all of it), check that suicided contracts has no code.\r\n\r\n3 cases of above but with revert opcode at the end. telling to revert all the creations.",
  "closed_by": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/tests/issues/991/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/tests/issues/991/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/975689695",
    "html_url": "https://github.com/ethereum/tests/issues/991#issuecomment-975689695",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/991",
    "id": 975689695,
    "node_id": "IC_kwDOAO0i5846J9ff",
    "user": {
      "login": "marioevz",
      "id": 11726710,
      "node_id": "MDQ6VXNlcjExNzI2NzEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/11726710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marioevz",
      "html_url": "https://github.com/marioevz",
      "followers_url": "https://api.github.com/users/marioevz/followers",
      "following_url": "https://api.github.com/users/marioevz/following{/other_user}",
      "gists_url": "https://api.github.com/users/marioevz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marioevz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marioevz/subscriptions",
      "organizations_url": "https://api.github.com/users/marioevz/orgs",
      "repos_url": "https://api.github.com/users/marioevz/repos",
      "events_url": "https://api.github.com/users/marioevz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marioevz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-22T16:18:36Z",
    "updated_at": "2021-11-22T16:18:36Z",
    "author_association": "MEMBER",
    "body": "Test cases 2 through 9 will be covered by PR #989.\r\nTest cases 10 through 12 will be covered by PR #992 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/975689695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

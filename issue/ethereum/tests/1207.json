{
  "url": "https://api.github.com/repos/ethereum/tests/issues/1207",
  "repository_url": "https://api.github.com/repos/ethereum/tests",
  "labels_url": "https://api.github.com/repos/ethereum/tests/issues/1207/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/tests/issues/1207/comments",
  "events_url": "https://api.github.com/repos/ethereum/tests/issues/1207/events",
  "html_url": "https://github.com/ethereum/tests/issues/1207",
  "id": 1656344388,
  "node_id": "I_kwDOAO0i585iuc9E",
  "number": 1207,
  "title": "Invalid timestamps in BasicTests/difficultyMainNetwork.json since Shanghai",
  "user": {
    "login": "siladu",
    "id": 2893793,
    "node_id": "MDQ6VXNlcjI4OTM3OTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siladu",
    "html_url": "https://github.com/siladu",
    "followers_url": "https://api.github.com/users/siladu/followers",
    "following_url": "https://api.github.com/users/siladu/following{/other_user}",
    "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
    "organizations_url": "https://api.github.com/users/siladu/orgs",
    "repos_url": "https://api.github.com/users/siladu/repos",
    "events_url": "https://api.github.com/users/siladu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siladu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-04-05T21:54:38Z",
  "updated_at": "2023-04-10T15:39:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Since shanghaiTime is part of the mainnet genesis now, the Shanghai rules kick in on timestamps above `1681338455` as per https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md#upgrade-schedule\r\n\r\nThe following file is failing in the besu reference tests because we're assigning Shanghai rules to what was previously supposed to be Frontier in the following case for example:\r\nhttps://github.com/ethereum/tests/blob/develop/BasicTests/difficultyMainNetwork.json#L3-L10\r\n\r\nIt looks like multiple timestamps in that file are far into the future, which means they now are treated as Shanghai blocks and therefore fail the difficulty tests.\r\n\r\ne.g. `0x036d2f0c29` is `14716701737` which is `Friday, 9 May 2436 04:42:17`",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/tests/issues/1207/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/tests/issues/1207/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1499249494",
    "html_url": "https://github.com/ethereum/tests/issues/1207#issuecomment-1499249494",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/1207",
    "id": 1499249494,
    "node_id": "IC_kwDOAO0i585ZXLtW",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-06T15:25:33Z",
    "updated_at": "2023-04-06T15:37:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would argue the reference tests are now wrong.  There is no genesis specified by the tests and the file names imply mainnet, which includes all configurations at the time the test is run.\r\n\r\nI would generate a patch for the tests repo with values that Besu would pass and submit it as the new \"shanghai\" values.\r\n\r\nIn the interim we can effetively disable shanghai time\r\n\r\n```\r\n        Arguments.of(\r\n            \"/BasicTests/difficultyMainNetwork.json\",\r\n            MainnetProtocolSchedule.fromConfig(\r\n                GenesisConfigFile.mainnet()\r\n                    .getConfigOptions(Map.of(\"shanghaiTime\", \"999999999999\")),\r\n                EvmConfiguration.DEFAULT)),\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1499249494/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1499635907",
    "html_url": "https://github.com/ethereum/tests/issues/1207#issuecomment-1499635907",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/1207",
    "id": 1499635907,
    "node_id": "IC_kwDOAO0i585ZYqDD",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-06T21:10:51Z",
    "updated_at": "2023-04-06T21:10:51Z",
    "author_association": "NONE",
    "body": "> I would generate a patch for the tests repo with values that Besu would pass and submit it as the new \"shanghai\" values.\r\n\r\nHappy to do this - are there any docs available for how to create the patch?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1499635907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1501967582",
    "html_url": "https://github.com/ethereum/tests/issues/1207#issuecomment-1501967582",
    "issue_url": "https://api.github.com/repos/ethereum/tests/issues/1207",
    "id": 1501967582,
    "node_id": "IC_kwDOAO0i585ZhjTe",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-10T15:39:15Z",
    "updated_at": "2023-04-10T15:39:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "nope.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/tests/issues/comments/1501967582/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27865",
  "id": 1838019234,
  "node_id": "I_kwDOAOvK985tjfKi",
  "number": 27865,
  "title": "Pruning error",
  "user": {
    "login": "ktjooho",
    "id": 18390988,
    "node_id": "MDQ6VXNlcjE4MzkwOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18390988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ktjooho",
    "html_url": "https://github.com/ktjooho",
    "followers_url": "https://api.github.com/users/ktjooho/followers",
    "following_url": "https://api.github.com/users/ktjooho/following{/other_user}",
    "gists_url": "https://api.github.com/users/ktjooho/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ktjooho/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ktjooho/subscriptions",
    "organizations_url": "https://api.github.com/users/ktjooho/orgs",
    "repos_url": "https://api.github.com/users/ktjooho/repos",
    "events_url": "https://api.github.com/users/ktjooho/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ktjooho/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-06T02:48:23Z",
  "updated_at": "2023-08-07T02:31:10Z",
  "closed_at": "2023-08-07T02:31:09Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I am running geth 1.11.5 in linux with gcmode  = archive. \r\nI got an unknown snapshot error when snapshot prune-state with state-root for specific block(which node has state tree).\r\nI think this input state-root hash was not a snapshot checkpoint.\r\n\r\nDoes pruning support to prune only state HEAD ~ (HEAD - 128) range?  \r\nIf this is right, I was wrong guessing. \r\n\r\nHowever if my guess is right, How should I find a checkpoint block or state-root for pruning..? \r\nIs there any tool to find it..? I havent seen it.\r\nThanks.\r\n ",
  "closed_by": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1667096814",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27865#issuecomment-1667096814",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27865",
    "id": 1667096814,
    "node_id": "IC_kwDOAOvK985jXeDu",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-07T02:31:09Z",
    "updated_at": "2023-08-07T02:31:09Z",
    "author_association": "MEMBER",
    "body": "The mechanism of offline pruning is:\r\n\r\n- A target state is chosen(HEAD-128 as default)\r\n- iterate the target state, prune all other state data which don't belong to it\r\n\r\nIn order to simplify the situation a bit, we can only do offline pruning is snapshot\r\nis available and has all HEAD-128 -> HEAD layers present.\r\n\r\nIn order to run the pruning correctly, you just need to relaunch Geth, run it for a\r\nwhile(so that snapshot should have 128 layers), and then run the pruning command.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1667096814/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

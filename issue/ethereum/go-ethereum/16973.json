{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16973",
  "id": 332053427,
  "node_id": "MDU6SXNzdWUzMzIwNTM0Mjc=",
  "number": 16973,
  "title": "[CLIQUE] (Any) Contract deployment exceeds block gas limit",
  "user": {
    "login": "kyriediculous",
    "id": 22256858,
    "node_id": "MDQ6VXNlcjIyMjU2ODU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/22256858?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kyriediculous",
    "html_url": "https://github.com/kyriediculous",
    "followers_url": "https://api.github.com/users/kyriediculous/followers",
    "following_url": "https://api.github.com/users/kyriediculous/following{/other_user}",
    "gists_url": "https://api.github.com/users/kyriediculous/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kyriediculous/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kyriediculous/subscriptions",
    "organizations_url": "https://api.github.com/users/kyriediculous/orgs",
    "repos_url": "https://api.github.com/users/kyriediculous/repos",
    "events_url": "https://api.github.com/users/kyriediculous/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kyriediculous/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-06-13T15:41:59Z",
  "updated_at": "2019-11-14T20:56:34Z",
  "closed_at": "2019-11-14T20:56:34Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI'm encountering issues trying to deploy contracts onto a newly started Clique chain. The testing or migration works fine on testrpc-sc or ganache, trying to deploy on a clique chain returns block gas limit exception, even on just migrate.sol.\r\n\r\nSending normal ethereum transactions in geth console works... \r\n\r\nI've tried adding gasLimit to truffle config, I've tried default settings for genesis.json, nearly everything.\r\n\r\nI've followed this guide: https://hackernoon.com/setup-your-own-private-proof-of-authority-ethereum-network-with-geth-9a0a3750cda8\r\n\r\n```\r\nosboxes@osboxes:~/blockchain-programmable-incentives$ truffle test --network clique\r\nUsing network 'clique'.\r\n\r\nError: exceeds block gas limit\r\n\r\n```\r\n\r\nThis is my genesis file:\r\n```\r\n{\r\n  \"config\": {\r\n    \"chainId\": 999,\r\n    \"homesteadBlock\": 1,\r\n    \"eip150Block\": 2,\r\n    \"eip150Hash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"eip155Block\": 3,\r\n    \"eip158Block\": 3,\r\n    \"byzantiumBlock\": 4,\r\n    \"clique\": {\r\n      \"period\": 10,\r\n      \"epoch\": 30000\r\n    }\r\n  },\r\n  \"nonce\": \"0x0\",\r\n  \"timestamp\": \"0x5b213529\",\r\n  \"extraData\": \"0x0000000000000000000000000000000000000000000000000000000000000000bba513f6e464e9f7d0c08125621e92598b1c28d60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"gasLimit\": \"0x47b760\",\r\n  \"difficulty\": \"0x1\",\r\n  \"mixHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"coinbase\": \"0x0000000000000000000000000000000000000000\",\r\n  \"alloc\": {\r\n    \"bba513f6e464e9f7d0c08125621e92598b1c28d6\": {\r\n      \"balance\": \"0x200000000000000000000000000000000000000000000000000000000000000\"\r\n    }\r\n  },\r\n  \"number\": \"0x0\",\r\n  \"gasUsed\": \"0x0\",\r\n  \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\"\r\n}\r\n```\r\n\r\nStarting bootnode:\r\n`devnet$ bootnode -nodekey boot.key -verbosity 9 -addr :30310`\r\n\r\nStarting node1:\r\n`geth --datadir node1/ --syncmode 'full' --port 30311 --rpc --rpcaddr 'localhost' --rpcport 8501 --rpcapi 'personal,db,eth,net,web3,txpool,miner' --bootnodes 'enode://cfb21bfd52f947041e020dfac76e51b6c466254053335b1e46107c0bbb1235e654a2fe10a2a23042437120d4233c3475d87e69db308c507c61f98bdc40d07720@127.0.0.1:30301' --networkid 999 --gasprice '1' --unlock '0xbba513f6e464e9f7d0c08125621e92598b1c28d6' --password node1/password.txt --mine`\r\n\r\n#### Steps to reproduce the behaviour\r\n1. chain : https://github.com/kyriediculous/clique-test\r\n2. dapp: https://github.com/kyriediculous/blockchain-programmable-incentives\r\n\r\n#### Backtrace\r\n```\r\nError: exceeds block gas limit\r\n    at Object.InvalidResponse (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/web3/lib/web3/errors.js:38:1)\r\n    at /home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/web3/lib/web3/requestmanager.js:86:1\r\n    at /home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/truffle-migrate/index.js:225:1\r\n    at /home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/truffle-provider/wrapper.js:134:1\r\n    at XMLHttpRequest.request.onreadystatechange (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/web3/lib/web3/httpprovider.js:128:1)\r\n    at XMLHttpRequestEventTarget.dispatchEvent (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:64:1)\r\n    at XMLHttpRequest._setReadyState (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:354:1)\r\n    at XMLHttpRequest._onHttpResponseEnd (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:509:1)\r\n    at IncomingMessage.<anonymous> (/home/osboxes/.nvm/versions/node/v8.11.2/lib/node_modules/truffle/build/webpack:/~/xhr2/lib/xhr2.js:469:1)\r\n    at emitNone (events.js:111:20)\r\n    at IncomingMessage.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n    at process._tickCallback (internal/process/next_tick.js:180:9)\r\n\r\n```\r\n\r\n\r\n# Additional details\r\n\r\nGeth\r\nVersion: 1.8.9-stable\r\nGit Commit: ff9b14617e73c07dfa028bc477fe86c1e04d80c5\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.10\r\nOperating System: linux\r\nGOPATH=/home/osboxes\r\nGOROOT=/usr/local/go\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397215240",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16973#issuecomment-397215240",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
    "id": 397215240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzIxNTI0MA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-14T08:30:36Z",
    "updated_at": "2018-06-14T08:30:36Z",
    "author_association": "MEMBER",
    "body": "How much gas does your contract deploy cost? Looking [at your configs](https://github.com/kyriediculous/blockchain-programmable-incentives/blob/master/truffle.js), Truffle allows 69B gas for a block, whereas your genesis block starts out with a 4.7M limit. My hunch is that your code requires a bit more gas than 4.7M, causing it to be rejected.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397215240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397221664",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16973#issuecomment-397221664",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
    "id": 397221664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzIyMTY2NA==",
    "user": {
      "login": "kyriediculous",
      "id": 22256858,
      "node_id": "MDQ6VXNlcjIyMjU2ODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/22256858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyriediculous",
      "html_url": "https://github.com/kyriediculous",
      "followers_url": "https://api.github.com/users/kyriediculous/followers",
      "following_url": "https://api.github.com/users/kyriediculous/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyriediculous/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyriediculous/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyriediculous/subscriptions",
      "organizations_url": "https://api.github.com/users/kyriediculous/orgs",
      "repos_url": "https://api.github.com/users/kyriediculous/repos",
      "events_url": "https://api.github.com/users/kyriediculous/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyriediculous/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-14T08:52:57Z",
    "updated_at": "2018-06-14T08:52:57Z",
    "author_association": "NONE",
    "body": "Yeah sorry, those is the config file I comitted to github but I've played around with the settings in there.\r\n\r\nI've managed to start a single node Clique network succesfully and deploy my contracts so I will be trying to find out where I went wrong. Shouldn't be an issue with Geth I think. \r\n\r\nI'll be back to update ! ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397221664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397278243",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16973#issuecomment-397278243",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
    "id": 397278243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzI3ODI0Mw==",
    "user": {
      "login": "kyriediculous",
      "id": 22256858,
      "node_id": "MDQ6VXNlcjIyMjU2ODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/22256858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyriediculous",
      "html_url": "https://github.com/kyriediculous",
      "followers_url": "https://api.github.com/users/kyriediculous/followers",
      "following_url": "https://api.github.com/users/kyriediculous/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyriediculous/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyriediculous/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyriediculous/subscriptions",
      "organizations_url": "https://api.github.com/users/kyriediculous/orgs",
      "repos_url": "https://api.github.com/users/kyriediculous/repos",
      "events_url": "https://api.github.com/users/kyriediculous/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyriediculous/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-14T12:35:52Z",
    "updated_at": "2018-06-14T12:36:14Z",
    "author_association": "NONE",
    "body": "I removed all the parameters from my trufflef config files, it takes no gas or gasLimit options.\r\n\r\nThen I increased the gasLimit in my genesis block as you mentioned , now I got two running nodes with gasPrice '0' working correctly. Contracts have been deployed and I can call them using truffle console.\r\n\r\nThansk for your time, issue can be closed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/397278243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426413959",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16973#issuecomment-426413959",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
    "id": 426413959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjQxMzk1OQ==",
    "user": {
      "login": "KwahuNashoba",
      "id": 2933674,
      "node_id": "MDQ6VXNlcjI5MzM2NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2933674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KwahuNashoba",
      "html_url": "https://github.com/KwahuNashoba",
      "followers_url": "https://api.github.com/users/KwahuNashoba/followers",
      "following_url": "https://api.github.com/users/KwahuNashoba/following{/other_user}",
      "gists_url": "https://api.github.com/users/KwahuNashoba/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KwahuNashoba/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KwahuNashoba/subscriptions",
      "organizations_url": "https://api.github.com/users/KwahuNashoba/orgs",
      "repos_url": "https://api.github.com/users/KwahuNashoba/repos",
      "events_url": "https://api.github.com/users/KwahuNashoba/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KwahuNashoba/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-02T20:14:09Z",
    "updated_at": "2018-10-02T20:15:28Z",
    "author_association": "NONE",
    "body": "Hey @kyriediculous, what is the gasLimit you ended up with in genesis block? I tried changing it and it simply will not work. The `web3.eth.getBlock(\"pending\").gasLimit` returns 5003 regardless of what I do and I'm not even able to send ethers via web3 geth console. Reports the same \r\n\r\n> Error: exceeds block gas limit\r\n\r\n when I try it",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426413959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/538118014",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16973#issuecomment-538118014",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16973",
    "id": 538118014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODExODAxNA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-10-03T20:37:11Z",
    "updated_at": "2019-10-03T20:37:11Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/538118014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

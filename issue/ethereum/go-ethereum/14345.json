{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14345",
  "id": 222441055,
  "node_id": "MDU6SXNzdWUyMjI0NDEwNTU=",
  "number": 14345,
  "title": "SIP: support for HTTP redirect entries in Swarm Manifests",
  "user": {
    "login": "cobordism",
    "id": 12838530,
    "node_id": "MDQ6VXNlcjEyODM4NTMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/12838530?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cobordism",
    "html_url": "https://github.com/cobordism",
    "followers_url": "https://api.github.com/users/cobordism/followers",
    "following_url": "https://api.github.com/users/cobordism/following{/other_user}",
    "gists_url": "https://api.github.com/users/cobordism/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cobordism/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cobordism/subscriptions",
    "organizations_url": "https://api.github.com/users/cobordism/orgs",
    "repos_url": "https://api.github.com/users/cobordism/repos",
    "events_url": "https://api.github.com/users/cobordism/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cobordism/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "acud",
    "id": 12988138,
    "node_id": "MDQ6VXNlcjEyOTg4MTM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/12988138?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/acud",
    "html_url": "https://github.com/acud",
    "followers_url": "https://api.github.com/users/acud/followers",
    "following_url": "https://api.github.com/users/acud/following{/other_user}",
    "gists_url": "https://api.github.com/users/acud/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/acud/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/acud/subscriptions",
    "organizations_url": "https://api.github.com/users/acud/orgs",
    "repos_url": "https://api.github.com/users/acud/repos",
    "events_url": "https://api.github.com/users/acud/events{/privacy}",
    "received_events_url": "https://api.github.com/users/acud/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "acud",
      "id": 12988138,
      "node_id": "MDQ6VXNlcjEyOTg4MTM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/12988138?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/acud",
      "html_url": "https://github.com/acud",
      "followers_url": "https://api.github.com/users/acud/followers",
      "following_url": "https://api.github.com/users/acud/following{/other_user}",
      "gists_url": "https://api.github.com/users/acud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/acud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/acud/subscriptions",
      "organizations_url": "https://api.github.com/users/acud/orgs",
      "repos_url": "https://api.github.com/users/acud/repos",
      "events_url": "https://api.github.com/users/acud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/acud/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-04-18T14:45:09Z",
  "updated_at": "2019-06-03T10:42:21Z",
  "closed_at": "2019-06-03T10:42:21Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "\r\nCurrently manifest entries are key/value pairs resolving keys to hashes; these hashes are either swarm hashes of files or of further manifests.\r\n\r\nManifests can currently have the empty path as a 'default entry' - a hash that will be loaded when the manifest is addressed on the http api. \r\nIn practice this often means that a manifest might have an empty path entry and an 'index.html' entry that resolve to the same hash. When updating index.html, both of these entries have to be updated in the manifest (they may even be entries in different manifests entirely for example path 'i' might be a branching manifest with entries for 'mages/' and 'ndex.html)\r\n\r\nCurrently typical manifest entries look like this:\r\n`{\"path\":\"Swarm\",\"hash\":\"0294e48456a49fe7c02162c83b068075ff9ae6aaafb46439dba32da7de548379\",\"contentType\":\"application/bzz-manifest+json\",\"status\":0}`\r\n\r\n**Suggestion:**\r\nI suggest we allow manifest entries of the form:\r\n`{\"path\":\"YAY\",\"target\":\"Swarm\",\"Type\":\"HTTP-302-Redirect\"}`\r\n\r\nThe idea is that calling up the 'YAY' path would yield an http 302 redirect response, redirecting the browser to 'Swarm'.\r\n\r\nThis functionality could be used in future for the 'default entry' of a manifest redirecting to index.html and this functionality is also useful when recursively uploading directories to swarm that contain symlinks. A link on the filesystem could be represented as a redirect in the browser and vice versa.",
  "closed_by": {
    "login": "nonsense",
    "id": 50459,
    "node_id": "MDQ6VXNlcjUwNDU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/50459?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nonsense",
    "html_url": "https://github.com/nonsense",
    "followers_url": "https://api.github.com/users/nonsense/followers",
    "following_url": "https://api.github.com/users/nonsense/following{/other_user}",
    "gists_url": "https://api.github.com/users/nonsense/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nonsense/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nonsense/subscriptions",
    "organizations_url": "https://api.github.com/users/nonsense/orgs",
    "repos_url": "https://api.github.com/users/nonsense/repos",
    "events_url": "https://api.github.com/users/nonsense/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nonsense/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/294868367",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14345#issuecomment-294868367",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345",
    "id": 294868367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDg2ODM2Nw==",
    "user": {
      "login": "cobordism",
      "id": 12838530,
      "node_id": "MDQ6VXNlcjEyODM4NTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/12838530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cobordism",
      "html_url": "https://github.com/cobordism",
      "followers_url": "https://api.github.com/users/cobordism/followers",
      "following_url": "https://api.github.com/users/cobordism/following{/other_user}",
      "gists_url": "https://api.github.com/users/cobordism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cobordism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cobordism/subscriptions",
      "organizations_url": "https://api.github.com/users/cobordism/orgs",
      "repos_url": "https://api.github.com/users/cobordism/repos",
      "events_url": "https://api.github.com/users/cobordism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cobordism/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-18T14:47:13Z",
    "updated_at": "2017-04-18T14:47:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "In addition it might be prudent to disable the 'empty path' entirely but instead allow for a special 'default entry' in the manifest that takes the form of a redirect.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/294868367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/294964250",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14345#issuecomment-294964250",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345",
    "id": 294964250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDk2NDI1MA==",
    "user": {
      "login": "lmars",
      "id": 488515,
      "node_id": "MDQ6VXNlcjQ4ODUxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/488515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmars",
      "html_url": "https://github.com/lmars",
      "followers_url": "https://api.github.com/users/lmars/followers",
      "following_url": "https://api.github.com/users/lmars/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmars/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmars/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmars/subscriptions",
      "organizations_url": "https://api.github.com/users/lmars/orgs",
      "repos_url": "https://api.github.com/users/lmars/repos",
      "events_url": "https://api.github.com/users/lmars/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmars/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-18T20:08:00Z",
    "updated_at": "2017-04-18T20:08:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is a good opportunity to model the idea of a \"symlink\" for both mounted manifests and access via HTTP.\r\n\r\nIn a Unix filesystem, a symlink is a file with type `S_IFLNK (0120000)` containing a path to another file (either absolute or relative). These files can already be stored in swarm (manifest entries have a `Mode` field which can be set to `S_IFLNK`) and so will work as expected when mounted.\r\n\r\nFor HTTP, one option is to consult the `Mode` field, and if it is `S_IFLNK` then retrieve the content of the hash and perform a redirect. This however isn't very user friendly so we could also support an explicit manifest field like `HTTPRedirectTo string` which if set then results in a 301 redirect.\r\n\r\nRef #3601.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/294964250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339115571",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14345#issuecomment-339115571",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345",
    "id": 339115571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTExNTU3MQ==",
    "user": {
      "login": "holisticode",
      "id": 88287,
      "node_id": "MDQ6VXNlcjg4Mjg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/88287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holisticode",
      "html_url": "https://github.com/holisticode",
      "followers_url": "https://api.github.com/users/holisticode/followers",
      "following_url": "https://api.github.com/users/holisticode/following{/other_user}",
      "gists_url": "https://api.github.com/users/holisticode/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holisticode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holisticode/subscriptions",
      "organizations_url": "https://api.github.com/users/holisticode/orgs",
      "repos_url": "https://api.github.com/users/holisticode/repos",
      "events_url": "https://api.github.com/users/holisticode/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holisticode/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-24T20:09:13Z",
    "updated_at": "2017-10-24T20:09:13Z",
    "author_association": "MEMBER",
    "body": "Not sure I understand the desired behavior here: 301 Redirect usually results in a client side redirect - the complete HTTP request is aborted, resulting in a new one with the target address. \r\n\r\nSo if a manifest contains a 301 Redirect, wouldn't this result in other manifest entries for the manifest in question being ignored, thus not resolved? Isn't this rather something for the internal reader, which when hitting a `S_IFLNK` just resolves that entry via the linked hash, instead of resulting in a HTTP Redirect? \r\n\r\nOr is this a feature where a manifest may contain such a `S_IFLNK`, and then on purpose everything else is disregarded, resulting in a real HTTP Redirect?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339115571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/498206332",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14345#issuecomment-498206332",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14345",
    "id": 498206332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5ODIwNjMzMg==",
    "user": {
      "login": "nonsense",
      "id": 50459,
      "node_id": "MDQ6VXNlcjUwNDU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/50459?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nonsense",
      "html_url": "https://github.com/nonsense",
      "followers_url": "https://api.github.com/users/nonsense/followers",
      "following_url": "https://api.github.com/users/nonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/nonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/nonsense/orgs",
      "repos_url": "https://api.github.com/users/nonsense/repos",
      "events_url": "https://api.github.com/users/nonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-03T10:42:21Z",
    "updated_at": "2019-06-03T10:42:21Z",
    "author_association": "MEMBER",
    "body": "@homotopycolimit let's continue this conversation at https://github.com/ethersphere/swarm where the Swarm codebase lives from now on.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/498206332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

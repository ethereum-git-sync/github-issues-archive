{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23323",
  "id": 958892391,
  "node_id": "MDU6SXNzdWU5NTg4OTIzOTE=",
  "number": 23323,
  "title": "Ethereum blockchain size on mainnet",
  "user": {
    "login": "basvlanat",
    "id": 60644692,
    "node_id": "MDQ6VXNlcjYwNjQ0Njky",
    "avatar_url": "https://avatars.githubusercontent.com/u/60644692?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/basvlanat",
    "html_url": "https://github.com/basvlanat",
    "followers_url": "https://api.github.com/users/basvlanat/followers",
    "following_url": "https://api.github.com/users/basvlanat/following{/other_user}",
    "gists_url": "https://api.github.com/users/basvlanat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/basvlanat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/basvlanat/subscriptions",
    "organizations_url": "https://api.github.com/users/basvlanat/orgs",
    "repos_url": "https://api.github.com/users/basvlanat/repos",
    "events_url": "https://api.github.com/users/basvlanat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/basvlanat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-08-03T08:59:31Z",
  "updated_at": "2021-08-03T13:34:21Z",
  "closed_at": "2021-08-03T12:48:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello\r\nWe are using ethereum/client-go in the **mainnet**. We have one ethereum node that we started syncing about a year ago and gradually upgraded it from v1.9.x to **v1.10.6**, which takes up approximately **1.8TB** of disk space.\r\nRecently we decided to sync the spare node immediately using **v1.10.6**, after the sync finished its size was **408GB**.\r\nThe question is, is the size of the occupied disk space of our spare node so normal (and what is the reason for its decrease) and can we start the synchronization again for the main node in order to save disk space?",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/891819233",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23323#issuecomment-891819233",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323",
    "id": 891819233,
    "node_id": "IC_kwDOAOvK9841KBTh",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T12:48:33Z",
    "updated_at": "2021-08-03T12:48:33Z",
    "author_association": "MEMBER",
    "body": "Geth does not have disk pruning implemented, so once some data is written to disk, it remains there.\r\n\r\nWhile your node is running, the state is constantly garbage collected as long as it fits into RAM. But when it gets larger than the `--cache` allowance (25% of it actually), state starts to get flushed to disk to not overload the memory usage. That overflown stuff written to disk will forever stay there. Furthermore, Geth will do a full state flush after every 1h of block processing so if the process crashes, you have a checkpoint to resume from. These also stay forever on disk.\r\n\r\nWhen you do a fresh sync, you are essentially pruning off all that historical spillage described above. It's completely safe to use a freshly synced node and not hold onto the old junk.\r\n\r\nIf you have snapshots generated on a node, you can prune it without doing a resync, but the node needs to be offline (`geth snapshot prune-state`).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/891819233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/891851728",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23323#issuecomment-891851728",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23323",
    "id": 891851728,
    "node_id": "IC_kwDOAOvK9841KJPQ",
    "user": {
      "login": "basvlanat",
      "id": 60644692,
      "node_id": "MDQ6VXNlcjYwNjQ0Njky",
      "avatar_url": "https://avatars.githubusercontent.com/u/60644692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/basvlanat",
      "html_url": "https://github.com/basvlanat",
      "followers_url": "https://api.github.com/users/basvlanat/followers",
      "following_url": "https://api.github.com/users/basvlanat/following{/other_user}",
      "gists_url": "https://api.github.com/users/basvlanat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/basvlanat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/basvlanat/subscriptions",
      "organizations_url": "https://api.github.com/users/basvlanat/orgs",
      "repos_url": "https://api.github.com/users/basvlanat/repos",
      "events_url": "https://api.github.com/users/basvlanat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/basvlanat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T13:34:21Z",
    "updated_at": "2021-08-03T13:34:21Z",
    "author_association": "NONE",
    "body": "thank you",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/891851728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

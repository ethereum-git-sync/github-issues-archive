{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27598",
  "id": 1773759746,
  "node_id": "I_kwDOAOvK985puW0C",
  "number": 27598,
  "title": "error in prune state",
  "user": {
    "login": "cliff0412",
    "id": 13556363,
    "node_id": "MDQ6VXNlcjEzNTU2MzYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/13556363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cliff0412",
    "html_url": "https://github.com/cliff0412",
    "followers_url": "https://api.github.com/users/cliff0412/followers",
    "following_url": "https://api.github.com/users/cliff0412/following{/other_user}",
    "gists_url": "https://api.github.com/users/cliff0412/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cliff0412/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cliff0412/subscriptions",
    "organizations_url": "https://api.github.com/users/cliff0412/orgs",
    "repos_url": "https://api.github.com/users/cliff0412/repos",
    "events_url": "https://api.github.com/users/cliff0412/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cliff0412/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-06-26T03:18:03Z",
  "updated_at": "2023-08-08T12:49:37Z",
  "closed_at": "2023-08-08T12:49:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "i run below command to prune state; however, it throws error\r\n```\r\nINFO [06-26|03:14:46.311] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [06-26|03:14:46.311] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nINFO [06-26|03:14:46.312] Set global gas cap                       cap=50,000,000\r\nINFO [06-26|03:14:46.426] Using leveldb as the backing database\r\nINFO [06-26|03:14:46.426] Allocated cache and file handles         database=/root/data/geth/chaindata cache=512.00MiB handles=51200\r\nINFO [06-26|03:14:47.512] Using LevelDB as the backing database\r\nINFO [06-26|03:14:47.541] Opened ancient database                  database=/root/data/geth/chaindata/ancient/chain readonly=false\r\nWARN [06-26|03:14:47.561] Loaded snapshot journal                  diffs=missing\r\nWARN [06-26|03:14:47.561] Failed to load snapshot                  err=\"head doesn't match snapshot: have 0x01e457462517521833ca153279ca0500658b768da307a4ea6869ae54585082ae, want 0xaca0dad0bb9b749942294f48205ce45b9a5425d8796c67ca43cffa3a0d21219b\"\r\nERROR[06-26|03:14:47.561] Failed to open snapshot tree             err=\"head doesn't match snapshot: have 0x01e457462517521833ca153279ca0500658b768da307a4ea6869ae54585082ae, want 0xaca0dad0bb9b749942294f48205ce45b9a5425d8796c67ca43cffa3a0d21219b\"\r\nhead doesn't match snapshot: have 0x01e457462517521833ca153279ca0500658b768da307a4ea6869ae54585082ae, want 0xaca0dad0bb9b749942294f48205ce45b9a5425d8796c67ca43cffa3a0d21219b\r\n```\r\n\r\nthat's my command\r\n```\r\ngeth snapshot prune-state --datadir /root/data --mainnet\r\n```\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1608599123",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27598#issuecomment-1608599123",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
    "id": 1608599123,
    "node_id": "IC_kwDOAOvK985f4UZT",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-27T02:10:10Z",
    "updated_at": "2023-06-27T02:10:10Z",
    "author_association": "MEMBER",
    "body": "In order to run the offline pruner, you need to have a matched snapshot. From the log I can tell\r\nyour snapshot is not matched with your head state. What you can do is: launch your geth normally\r\nand the snapshot will be recovered by itself, then try the tool.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1608599123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1609137812",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27598#issuecomment-1609137812",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
    "id": 1609137812,
    "node_id": "IC_kwDOAOvK985f6X6U",
    "user": {
      "login": "cliff0412",
      "id": 13556363,
      "node_id": "MDQ6VXNlcjEzNTU2MzYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13556363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cliff0412",
      "html_url": "https://github.com/cliff0412",
      "followers_url": "https://api.github.com/users/cliff0412/followers",
      "following_url": "https://api.github.com/users/cliff0412/following{/other_user}",
      "gists_url": "https://api.github.com/users/cliff0412/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cliff0412/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cliff0412/subscriptions",
      "organizations_url": "https://api.github.com/users/cliff0412/orgs",
      "repos_url": "https://api.github.com/users/cliff0412/repos",
      "events_url": "https://api.github.com/users/cliff0412/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cliff0412/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-27T09:34:07Z",
    "updated_at": "2023-06-27T09:34:07Z",
    "author_association": "NONE",
    "body": "i have launched geth again and keep serving for a while; i stop and prune again and it's the same error. how should i know whether my snapshot is matched or not?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1609137812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1609375321",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27598#issuecomment-1609375321",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
    "id": 1609375321,
    "node_id": "IC_kwDOAOvK985f7R5Z",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-27T12:11:03Z",
    "updated_at": "2023-06-27T12:11:03Z",
    "author_association": "MEMBER",
    "body": "Please post some logs here",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1609375321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1614068368",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27598#issuecomment-1614068368",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
    "id": 1614068368,
    "node_id": "IC_kwDOAOvK985gNLqQ",
    "user": {
      "login": "FawazMalik-jjj",
      "id": 61972578,
      "node_id": "MDQ6VXNlcjYxOTcyNTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/61972578?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FawazMalik-jjj",
      "html_url": "https://github.com/FawazMalik-jjj",
      "followers_url": "https://api.github.com/users/FawazMalik-jjj/followers",
      "following_url": "https://api.github.com/users/FawazMalik-jjj/following{/other_user}",
      "gists_url": "https://api.github.com/users/FawazMalik-jjj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FawazMalik-jjj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FawazMalik-jjj/subscriptions",
      "organizations_url": "https://api.github.com/users/FawazMalik-jjj/orgs",
      "repos_url": "https://api.github.com/users/FawazMalik-jjj/repos",
      "events_url": "https://api.github.com/users/FawazMalik-jjj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FawazMalik-jjj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-30T03:35:41Z",
    "updated_at": "2023-08-08T12:49:27Z",
    "author_association": "NONE",
    "body": "Maximum peer count: This line indicates that the Ethereum network node has a maximum of 50 peers (other nodes it can connect to).\r\nSmartcard socket not found: It suggests that the smartcard socket, which is used for secure communication with smartcards, was not found and is therefore disabled.\r\nSet global gas cap: This line sets the maximum gas limit for Ethereum transactions to 50 million gas.\r\nUsing leveldb as the backing database: Geth is using LevelDB as the database to store blockchain data.\r\nAllocated cache and file handles: Geth has allocated a cache size of 512.00MiB and file handles for database operations.\r\nOpened ancient database: Geth has opened an ancient database for reading chain data.\r\nLoaded snapshot journal: The snapshot journal, which contains the differences between the current state and a snapshot, has been loaded. It reports that there are missing diffs.\r\nFailed to load snapshot: Geth encountered an error while loading a snapshot. The error message indicates that the head of the blockchain does not match the snapshot's head.\r\nFailed to open snapshot tree: Geth failed to open the snapshot tree due to a mismatch between the current blockchain head and the snapshot's head.\r\nIt seems that there might be an issue with loading the snapshot in Geth due to a mismatch between the expected snapshot head and the actual head of the blockchain. Further troubleshooting or investigation may be required to resolve this issue.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1614068368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1669550318",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27598#issuecomment-1669550318",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27598",
    "id": 1669550318,
    "node_id": "IC_kwDOAOvK985jg1Du",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-08T12:49:37Z",
    "updated_at": "2023-08-08T12:49:37Z",
    "author_association": "MEMBER",
    "body": "Issue seems stale",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1669550318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

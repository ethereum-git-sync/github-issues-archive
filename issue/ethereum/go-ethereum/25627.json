{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25627",
  "id": 1354179326,
  "node_id": "I_kwDOAOvK985QtyL-",
  "number": 25627,
  "title": "Launching 3 `geth` instances at the same time, one is in `State heal in progress` for a few days",
  "user": {
    "login": "nalepae",
    "id": 4943830,
    "node_id": "MDQ6VXNlcjQ5NDM4MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4943830?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nalepae",
    "html_url": "https://github.com/nalepae",
    "followers_url": "https://api.github.com/users/nalepae/followers",
    "following_url": "https://api.github.com/users/nalepae/following{/other_user}",
    "gists_url": "https://api.github.com/users/nalepae/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nalepae/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nalepae/subscriptions",
    "organizations_url": "https://api.github.com/users/nalepae/orgs",
    "repos_url": "https://api.github.com/users/nalepae/repos",
    "events_url": "https://api.github.com/users/nalepae/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nalepae/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-08-29T12:04:27Z",
  "updated_at": "2022-09-06T12:46:31Z",
  "closed_at": "2022-09-06T12:46:30Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "On Wednesday 24th August 2022, I launched simultaneously 3 replicas of `geth v1.10.23`, on AWS `m5a.xlarge` nodes.\r\n<img width=\"861\" alt=\"image\" src=\"https://user-images.githubusercontent.com/4943830/187196325-5ce0b9f1-b53d-4d4b-b2b2-f7e6b91aa71a.png\">\r\n\r\nThe first one is launched in `eu-west-1a`, the second one in zone `eu-west-1b` and the third one in `eu-west-1c`.\r\n\r\nFor those in zone `eu-west-1b` and `eu-west-1c`, the `State sync` phase took a few hours, and the `State heal` phase took a few more hours.\r\n\r\nFor the one launched in zone `eu-west-1a`, after almost 5 days, the `State heal` phase is still running:\r\n\r\n```\r\nINFO [08-29|12:00:50.423] State heal in progress                   accounts=3,940,808@213.02MiB  slots=6,579,646@497.77MiB   codes=4903@33.39MiB      nodes=43,391,836@12.40GiB  pending=58595\r\nWARN [08-29|12:00:51.512] Unexpected trienode heal packet          peer=de36c8ff reqid=7,508,514,832,784,375,130\r\nWARN [08-29|12:00:51.602] Unexpected trienode heal packet          peer=fa4e4ebf reqid=3,470,836,428,630,147,737\r\nINFO [08-29|12:00:59.051] State heal in progress                   accounts=3,940,987@213.03MiB  slots=6,580,240@497.82MiB   codes=4904@33.39MiB      nodes=43,393,776@12.40GiB  pending=57560\r\nWARN [08-29|12:01:02.648] Unexpected bytecode heal packet          peer=9e25c006 reqid=4,877,644,596,995,341,107\r\nWARN [08-29|12:01:02.878] Unexpected bytecode heal packet          peer=67517c40 reqid=7,411,108,659,943,866,898\r\nINFO [08-29|12:01:07.133] State heal in progress                   accounts=3,941,035@213.03MiB  slots=6,580,526@497.84MiB   codes=4905@33.41MiB      nodes=43,394,731@12.40GiB  pending=57077\r\nINFO [08-29|12:01:07.539] Imported new block headers               count=1    elapsed=5.679ms     number=15,433,966 hash=0e7c4a..a2e6b3\r\nINFO [08-29|12:01:08.356] Downloader queue stats                   receiptTasks=0     blockTasks=0     itemSize=308.77KiB throttle=849\r\nINFO [08-29|12:01:15.907] State heal in progress                   accounts=3,941,356@213.05MiB  slots=6,580,670@497.85MiB   codes=4905@33.41MiB      nodes=43,395,801@12.40GiB  pending=56513\r\nWARN [08-29|12:01:16.972] Unexpected trienode heal packet          peer=0a612543 reqid=2,533,761,335,006,296,105\r\nWARN [08-29|12:01:17.558] Unexpected trienode heal packet          peer=aae03748 reqid=6,911,901,120,356,134,997\r\nWARN [08-29|12:01:18.240] Unexpected trienode heal packet          peer=bf6c76b4 reqid=3,018,019,448,161,478,008\r\nWARN [08-29|12:01:18.999] Unexpected trienode heal packet          peer=804ef745 reqid=3,082,211,448,574,504,611\r\nWARN [08-29|12:01:19.171] Unexpected trienode heal packet          peer=d39fedf5 reqid=2,610,323,175,827,802,009\r\nWARN [08-29|12:01:19.558] Unexpected trienode heal packet          peer=5590e8ef reqid=2,708,578,095,041,099,402\r\nINFO [08-29|12:01:25.642] State heal in progress                   accounts=3,941,979@213.09MiB  slots=6,581,029@497.87MiB   codes=4905@33.41MiB      nodes=43,397,880@12.40GiB  pending=54733\r\nINFO [08-29|12:01:32.239] Imported new block headers               count=1    elapsed=5.461ms     number=15,433,967 hash=bc15e5..f4e396 age=1m4s\r\nINFO [08-29|12:01:38.357] State heal in progress                   accounts=3,942,076@213.09MiB  slots=6,581,371@497.90MiB   codes=4905@33.41MiB      nodes=43,399,008@12.40GiB  pending=54134\r\nINFO [08-29|12:01:38.472] Imported new block headers               count=1    elapsed=5.556ms     number=15,433,968 hash=eb6cf2..0f1a85\r\nWARN [08-29|12:01:45.186] Unexpected trienode heal packet          peer=2b886d49 reqid=3,864,272,756,763,167,960\r\nWARN [08-29|12:01:45.687] Unexpected trienode heal packet          peer=aae03748 reqid=1,652,023,311,822,698,185\r\nINFO [08-29|12:01:47.068] State heal in progress                   accounts=3,942,280@213.11MiB  slots=6,581,512@497.91MiB   codes=4905@33.41MiB      nodes=43,399,831@12.40GiB  pending=53721\r\nINFO [08-29|12:01:50.861] Imported new block headers               count=1    elapsed=5.839ms     number=15,433,969 hash=5b9d40..60a2b4\r\nINFO [08-29|12:01:54.016] Imported new block headers               count=1    elapsed=5.609ms     number=15,433,970 hash=4bbaec..fd263f\r\nINFO [08-29|12:01:57.519] State heal in progress                   accounts=3,942,376@213.11MiB  slots=6,581,692@497.92MiB   codes=4905@33.41MiB      nodes=43,400,573@12.40GiB  pending=53420\r\nINFO [08-29|12:02:03.326] Imported new block headers               count=1    elapsed=5.391ms     number=15,433,971 hash=3dfbe2..56bbbc\r\n```\r\n\r\nI guess resyncing from scratch the one in zone `eu-west-1a` will solve the issue (and I will do this for sure before The Merge if the issue is not solved), but for debugging purpose I did **NOT** restart/resync it.",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232821987",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25627#issuecomment-1232821987",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627",
    "id": 1232821987,
    "node_id": "IC_kwDOAOvK985Je17j",
    "user": {
      "login": "nalepae",
      "id": 4943830,
      "node_id": "MDQ6VXNlcjQ5NDM4MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943830?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nalepae",
      "html_url": "https://github.com/nalepae",
      "followers_url": "https://api.github.com/users/nalepae/followers",
      "following_url": "https://api.github.com/users/nalepae/following{/other_user}",
      "gists_url": "https://api.github.com/users/nalepae/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nalepae/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nalepae/subscriptions",
      "organizations_url": "https://api.github.com/users/nalepae/orgs",
      "repos_url": "https://api.github.com/users/nalepae/repos",
      "events_url": "https://api.github.com/users/nalepae/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nalepae/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T11:38:01Z",
    "updated_at": "2022-08-31T11:38:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "After 6 days for my `eu-west-1a` pod (compared to ~1 day for my `eu-west-1b` and `eu-west-1c` pods), the `State heal` phase finally completed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232821987/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238102709",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25627#issuecomment-1238102709",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25627",
    "id": 1238102709,
    "node_id": "IC_kwDOAOvK985Jy_K1",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-06T12:46:30Z",
    "updated_at": "2022-09-06T12:46:30Z",
    "author_association": "MEMBER",
    "body": "We are currently working on further optimizations of the heal phase. We're aware it is slow. Sorry for the trouble.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238102709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

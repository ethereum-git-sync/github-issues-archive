{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25960",
  "id": 1402859459,
  "node_id": "I_kwDOAOvK985Tne_D",
  "number": 25960,
  "title": "Error in block freeze operation and served eth_getLogs",
  "user": {
    "login": "barwod",
    "id": 91058376,
    "node_id": "MDQ6VXNlcjkxMDU4Mzc2",
    "avatar_url": "https://avatars.githubusercontent.com/u/91058376?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barwod",
    "html_url": "https://github.com/barwod",
    "followers_url": "https://api.github.com/users/barwod/followers",
    "following_url": "https://api.github.com/users/barwod/following{/other_user}",
    "gists_url": "https://api.github.com/users/barwod/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barwod/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barwod/subscriptions",
    "organizations_url": "https://api.github.com/users/barwod/orgs",
    "repos_url": "https://api.github.com/users/barwod/repos",
    "events_url": "https://api.github.com/users/barwod/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barwod/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-10-10T09:23:04Z",
  "updated_at": "2022-11-02T19:14:40Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.11.0-unstable\r\nCL client & version: e.g. prysmaticlabs/prysm-beacon-chain:v3.1.1\r\nOS & Version: Linux\r\nGit Commit: 564751668aa01f55d39851cbf4673500ec2d4718\r\n\r\n#### Expected behaviour\r\nETH working without error logs.\r\n\r\n#### Actual behaviour\r\nETH have some errors.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\nERROR[10-10|09:15:26.835] Error in block freeze operation          err=\"block receipts missing, can't freeze block 15578290\"\r\nWARN [10-10|09:15:33.939] Served eth_getLogs                       conn=127.0.0.1:42130 reqid=794155 duration=2.004548ms  err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:15:33.960] Served eth_getLogs                       conn=127.0.0.1:42150 reqid=794165 duration=1.279836ms  err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nINFO [10-10|09:15:37.358] Imported new potential chain segment     number=15,716,743 hash=5f7435..987fae blocks=1 txs=221 mgas=20.939 elapsed=225.121ms   mgasps=93.011  dirty=335.39MiB\r\nINFO [10-10|09:15:37.442] Chain head was updated                   number=15,716,743 hash=5f7435..987fae root=0a0ad5..7322e3 elapsed=9.959392ms\r\nINFO [10-10|09:15:48.811] Imported new potential chain segment     number=15,716,744 hash=639b6e..ec549c blocks=1 txs=131 mgas=9.924  elapsed=415.852ms   mgasps=23.865  dirty=334.63MiB\r\nINFO [10-10|09:15:49.176] Chain head was updated                   number=15,716,744 hash=639b6e..ec549c root=fd902e..223210 elapsed=3.683501ms\r\nWARN [10-10|09:15:49.590] Served eth_getLogs                       conn=127.0.0.1:35286 reqid=794281 duration=10.206794ms err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:15:49.761] Served eth_getLogs                       conn=127.0.0.1:35298 reqid=794291 duration=17.840272ms err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nINFO [10-10|09:16:01.193] Imported new potential chain segment     number=15,716,745 hash=c1889b..6c55cf blocks=1 txs=252 mgas=21.210 elapsed=292.660ms   mgasps=72.472  dirty=335.86MiB\r\nINFO [10-10|09:16:01.283] Chain head was updated                   number=15,716,745 hash=c1889b..6c55cf root=ac9d04..2d208d elapsed=7.503169ms\r\nWARN [10-10|09:16:03.936] Served eth_getLogs                       conn=127.0.0.1:33228 reqid=794305 duration=\"918.891µs\" err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:16:03.955] Served eth_getLogs                       conn=127.0.0.1:33246 reqid=794315 duration=\"464.128µs\" err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nINFO [10-10|09:16:16.148] Imported new potential chain segment     number=15,716,746 hash=3c5460..77d6ea blocks=1 txs=160 mgas=12.788 elapsed=148.182ms   mgasps=86.297  dirty=336.41MiB\r\nINFO [10-10|09:16:16.201] Chain head was updated                   number=15,716,746 hash=3c5460..77d6ea root=a21fd3..d7979c elapsed=3.365534ms\r\nWARN [10-10|09:16:18.913] Served eth_getLogs                       conn=127.0.0.1:57254 reqid=794329 duration=\"753.039µs\" err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:16:18.933] Served eth_getLogs                       conn=127.0.0.1:57274 reqid=794339 duration=\"417.372µs\" err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nINFO [10-10|09:16:24.843] Imported new potential chain segment     number=15,716,747 hash=465b31..444229 blocks=1 txs=111 mgas=9.264  elapsed=71.076ms    mgasps=130.339 dirty=336.85MiB\r\nINFO [10-10|09:16:24.895] Chain head was updated                   number=15,716,747 hash=465b31..444229 root=3889b7..f88de7 elapsed=3.103097ms\r\nERROR[10-10|09:16:26.835] Error in block freeze operation          err=\"block receipts missing, can't freeze block 15578290\"\r\nWARN [10-10|09:16:33.934] Served eth_getLogs                       conn=127.0.0.1:42074 reqid=794353 duration=\"783.688µs\" err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:16:33.956] Served eth_getLogs                       conn=127.0.0.1:42090 reqid=794363 duration=2.631596ms  err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nINFO [10-10|09:16:36.877] Imported new potential chain segment     number=15,716,748 hash=9c641f..4bc8f3 blocks=1 txs=211 mgas=19.451 elapsed=226.564ms   mgasps=85.853  dirty=336.87MiB\r\nINFO [10-10|09:16:36.943] Chain head was updated                   number=15,716,748 hash=9c641f..4bc8f3 root=b7901a..d30eca elapsed=3.856231ms\r\nINFO [10-10|09:16:48.352] Imported new potential chain segment     number=15,716,749 hash=226803..4f3fd5 blocks=1 txs=77  mgas=7.573  elapsed=80.750ms    mgasps=93.777  dirty=336.09MiB\r\nINFO [10-10|09:16:48.407] Chain head was updated                   number=15,716,749 hash=226803..4f3fd5 root=00495a..d7dd02 elapsed=1.970638ms\r\nWARN [10-10|09:16:49.196] Served eth_getLogs                       conn=127.0.0.1:38170 reqid=794479 duration=1.357503ms  err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\nWARN [10-10|09:16:49.414] Served eth_getLogs                       conn=127.0.0.1:38188 reqid=794489 duration=3.878925ms  err=\"failed to get logs for block #15703526 (0xc6dc50..374c64)\"\r\n````\r\n\r\nAny idea what these logs mean? I have lots of errors err=\" block receipts missing, can't freeze block 15578290\" and err=\" failed to get logs for block #15703526 (0xc6dc50..374c64)\"",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1283825301",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1283825301",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1283825301,
    "node_id": "IC_kwDOAOvK985MhZ6V",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-19T10:59:55Z",
    "updated_at": "2022-10-19T10:59:55Z",
    "author_association": "MEMBER",
    "body": "Is this after a fresh sync or is it from a long running node?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1283825301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1285189604",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1285189604",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1285189604,
    "node_id": "IC_kwDOAOvK985Mmm_k",
    "user": {
      "login": "barwod",
      "id": 91058376,
      "node_id": "MDQ6VXNlcjkxMDU4Mzc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/91058376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barwod",
      "html_url": "https://github.com/barwod",
      "followers_url": "https://api.github.com/users/barwod/followers",
      "following_url": "https://api.github.com/users/barwod/following{/other_user}",
      "gists_url": "https://api.github.com/users/barwod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barwod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barwod/subscriptions",
      "organizations_url": "https://api.github.com/users/barwod/orgs",
      "repos_url": "https://api.github.com/users/barwod/repos",
      "events_url": "https://api.github.com/users/barwod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barwod/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-20T09:06:06Z",
    "updated_at": "2022-10-20T09:06:06Z",
    "author_association": "NONE",
    "body": "It is from a long-running node.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1285189604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290498590",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1290498590",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1290498590,
    "node_id": "IC_kwDOAOvK985M63Ie",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-25T12:45:43Z",
    "updated_at": "2022-10-25T12:45:43Z",
    "author_association": "MEMBER",
    "body": "did you have any unclean shutdowns?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290498590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290501425",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1290501425",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1290501425,
    "node_id": "IC_kwDOAOvK985M630x",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-25T12:48:09Z",
    "updated_at": "2022-10-25T12:48:09Z",
    "author_association": "MEMBER",
    "body": "Could you please provide around ~100 or so lines of the startup logs? Alternatively, `geth db metadata` would show us the same info, so we can see if the error happened before or after the pivot",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290501425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290502348",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1290502348",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1290502348,
    "node_id": "IC_kwDOAOvK985M64DM",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-25T12:48:58Z",
    "updated_at": "2022-10-25T12:48:58Z",
    "author_association": "MEMBER",
    "body": "Could you also check if you have a `Loaded last fast-sync pivot marker` log output and if so, what the line contains?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1290502348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1301099924",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25960#issuecomment-1301099924",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25960",
    "id": 1301099924,
    "node_id": "IC_kwDOAOvK985NjTWU",
    "user": {
      "login": "YurGa777",
      "id": 75600058,
      "node_id": "MDQ6VXNlcjc1NjAwMDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/75600058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YurGa777",
      "html_url": "https://github.com/YurGa777",
      "followers_url": "https://api.github.com/users/YurGa777/followers",
      "following_url": "https://api.github.com/users/YurGa777/following{/other_user}",
      "gists_url": "https://api.github.com/users/YurGa777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YurGa777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YurGa777/subscriptions",
      "organizations_url": "https://api.github.com/users/YurGa777/orgs",
      "repos_url": "https://api.github.com/users/YurGa777/repos",
      "events_url": "https://api.github.com/users/YurGa777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YurGa777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T19:14:40Z",
    "updated_at": "2022-11-02T19:14:40Z",
    "author_association": "NONE",
    "body": "I had the same issue and I did next steps which helped me:\r\n1. start `geth attach`\r\n2. in opened console  run `debug.setHead('number')` where number is from message \"block receipts missing, can't freeze block 15578290\" and in hexademical. In my case it was `debug.setHead('0xF05842')`.\r\n3. The command return `Null` in 5 minutes\r\n4. restart my geth service",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1301099924/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21341",
  "id": 659398649,
  "node_id": "MDU6SXNzdWU2NTkzOTg2NDk=",
  "number": 21341,
  "title": "Issue with failing to detect peers via Bootnode on Local Network",
  "user": {
    "login": "RhysF98",
    "id": 36967095,
    "node_id": "MDQ6VXNlcjM2OTY3MDk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/36967095?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RhysF98",
    "html_url": "https://github.com/RhysF98",
    "followers_url": "https://api.github.com/users/RhysF98/followers",
    "following_url": "https://api.github.com/users/RhysF98/following{/other_user}",
    "gists_url": "https://api.github.com/users/RhysF98/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RhysF98/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RhysF98/subscriptions",
    "organizations_url": "https://api.github.com/users/RhysF98/orgs",
    "repos_url": "https://api.github.com/users/RhysF98/repos",
    "events_url": "https://api.github.com/users/RhysF98/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RhysF98/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-07-17T16:25:22Z",
  "updated_at": "2020-08-22T08:42:30Z",
  "closed_at": "2020-08-22T08:42:30Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n\r\n#### System information\r\n\r\nGeth version: 1.9.17-unstable\r\nOS & Version: Raspbian 10\r\nCommit hash : 9e88224\r\n\r\n\r\n#### Expected behaviour\r\nStart bootnode on one machine and start local peer. Start another peer on local network and connect to bootnode. Two peers should be able to see each other at this point.\r\n\r\n#### Actual behaviour\r\nWhen connecting to bootnode across local network, connection is successful but the two peers cannot see each other, with admin.peers returning an empty list.\r\n\r\n#### Steps to reproduce the behaviour\r\nStart bootnode on one machine with additional peer on same machine. Use this command for bootnode: (Replace IP as necessary)\r\n\r\n`bootnode -nodekey boot.key -verbosity 9 -addr 192.168.254.85:30310`\r\n\r\n Start a peer on another machine on local network and connect to bootnode using command :\r\n\r\n` geth --datadir node2/ --syncmode 'full' --port 30312 --rpc -rpcaddr 'localhost' --rpcport 8502 --rpcapi 'personal,db,eth,net,web3,txpool,miner' --bootnodes 'enode://4502006cbeb7c4f6a7bef61235f70c12406ed2b9f70dbab48202ab82e9f22367b685d7370ab864000406d3d5b1e8627c9ec2cd21720c366112663bede7cd27d4@192.168.254.85:0?discport=30310' --networkid 40152 --gasprice '0' --unlock '0x0888dBFf4Ac86aBE76963c7F2C339a6475CcAd2A' --password node2/password.txt --mine --allow-insecure-unlock console`\r\n\r\n",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/660462445",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21341#issuecomment-660462445",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341",
    "id": 660462445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDQ2MjQ0NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-18T10:27:45Z",
    "updated_at": "2020-07-18T10:28:29Z",
    "author_association": "MEMBER",
    "body": "I tested locally. One process: \r\n```\r\n[user@work go-ethereum]$ ./build/bin/bootnode   -nodekeyhex 0102030405060708090a0102030405060708090a0102030405060708090a0102 -verbosity 9 -addr 0.0.0.0:30340\r\n```\r\nThen another: \r\n```\r\n[user@work go-ethereum]$ build/bin/geth  --verbosity 9 --bootnodes=enode://158361ade92ae0447724f094e86e8a9add0bb87e4facac60b9a533dfe5df4b1c98da8f873761cbe70d45aaf79b3e501d59d847dd940c8fb96094439660c43b72@127.0.0.1:30340\r\n```\r\nOutput from `bootnode` when I started the other node: \r\n```\r\nTRACE[07-18|12:20:40.198] << PING/v4                               id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.200] >> PONG/v4                               id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.201] >> PING/v4                               id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.262] << PONG/v4                               id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.301] << FINDNODE/v4                           id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.301] >> NEIGHBORS/v4                          id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.726] << FINDNODE/v4                           id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.726] >> NEIGHBORS/v4                          id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.802] << FINDNODE/v4                           id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:40.802] >> NEIGHBORS/v4                          id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nTRACE[07-18|12:20:42.640] >> PING/v4                               id=071a5f65ef12c6f1 addr=127.0.0.1:30303 err=nil\r\nDEBUG[07-18|12:20:43.140] Removed dead node                        b=16 id=071a5f65ef12c6f1 ip=127.0.0.1 checks=0\r\n```\r\nI also tested with `build/bin/geth --verbosity 9 --bootnodes=enode://158361ade92ae0447724f094e86e8a9add0bb87e4facac60b9a533dfe5df4b1c98da8f873761cbe70d45aaf79b3e501d59d847dd940c8fb96094439660c43b72@127.0.0.1:0?discport=30340` -- and got the same result. \r\n\r\nSo I would suspect there's some problem on the lower layers. You could try to udp-scan it from the other host (replace my localhost addresses with yours, and also the port you're using): \r\n```\r\n[user@work go-ethereum]$ sudo nmap -sU 127.0.0.1 -p 30340\r\n```\r\nIt outputs this on the bootnode: \r\n```\r\nDEBUG[07-18|12:26:05.451] Bad discv4 packet                        addr=127.0.0.1:57883 err=\"too small\"\r\nDEBUG[07-18|12:26:06.452] Bad discv4 packet                        addr=127.0.0.1:57884 err=\"too small\"\r\n```\r\nAlternatively, you can do a wireshark or tcpdump on the `bootnode` host, and see if the packets are arriving properly. \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/660462445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/678614478",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21341#issuecomment-678614478",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21341",
    "id": 678614478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODYxNDQ3OA==",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-08-22T08:42:29Z",
    "updated_at": "2020-08-22T08:42:29Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/678614478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15812",
  "id": 286157616,
  "node_id": "MDU6SXNzdWUyODYxNTc2MTY=",
  "number": 15812,
  "title": "Feature request: Implicit transaction nonces for idempotent transactions",
  "user": {
    "login": "MitchK",
    "id": 2472064,
    "node_id": "MDQ6VXNlcjI0NzIwNjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2472064?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MitchK",
    "html_url": "https://github.com/MitchK",
    "followers_url": "https://api.github.com/users/MitchK/followers",
    "following_url": "https://api.github.com/users/MitchK/following{/other_user}",
    "gists_url": "https://api.github.com/users/MitchK/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MitchK/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MitchK/subscriptions",
    "organizations_url": "https://api.github.com/users/MitchK/orgs",
    "repos_url": "https://api.github.com/users/MitchK/repos",
    "events_url": "https://api.github.com/users/MitchK/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MitchK/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-01-05T00:37:20Z",
  "updated_at": "2018-01-05T10:53:52Z",
  "closed_at": "2018-01-05T10:53:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "We currently write a lots of transactions per account (storing hashes in a smart contract) and sometimes have the problem that a transaction cannot be executed for arbitrary reasons, for example if the gas price is too low.\r\n\r\nFollowing transactions depend on this \"non-executable transaction\" because of the transaction nonce. If the transaction times out and gets discarded, any following transactions then have to be signed again by the issuer with a lower nonce in order to go through.\r\n\r\nFor our use case, there is no big harm if the issuer is able to write the same hash to the contract twice - the transaction issuer will just lose a little bit of Ether to pay for the gas. \r\n\r\nIt would help if one could set the transaction nonce to a value \"derived\" or \"implicit\", which basically means \"determine the nonce of this transaction based on the nonce of the previous account state\". This transaction nonce could be determined by the miner.\r\n\r\nI understand that you probably don't want this in a case where you transfer value from one account to a other, meaning, when you replay a transaction, the outcome would be different (i.e. resulting in a higher balance on the other person's account).\r\n  ",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355508110",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15812#issuecomment-355508110",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812",
    "id": 355508110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTUwODExMA==",
    "user": {
      "login": "infamousrev",
      "id": 16310390,
      "node_id": "MDQ6VXNlcjE2MzEwMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16310390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/infamousrev",
      "html_url": "https://github.com/infamousrev",
      "followers_url": "https://api.github.com/users/infamousrev/followers",
      "following_url": "https://api.github.com/users/infamousrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/infamousrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/infamousrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/infamousrev/subscriptions",
      "organizations_url": "https://api.github.com/users/infamousrev/orgs",
      "repos_url": "https://api.github.com/users/infamousrev/repos",
      "events_url": "https://api.github.com/users/infamousrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/infamousrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T09:19:05Z",
    "updated_at": "2018-01-05T09:19:05Z",
    "author_association": "NONE",
    "body": "The nonce is also to offer replay protection, if you signed transaction number x, then you only gave permission to include transaction number x.\r\n\r\nI understand you don't mind if the transaction gets included twice, but would you still be fine with the transaction being included 10000x (wasting all your ether on gas)?\r\n\r\nThe account abstraction that will be implemented in the next hardfork might allow for more complicated use cases like the one you mentioned, but the trade-off between functionality and security is a delicate one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355508110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355527296",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15812#issuecomment-355527296",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15812",
    "id": 355527296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTUyNzI5Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T10:53:51Z",
    "updated_at": "2018-01-05T10:53:51Z",
    "author_association": "MEMBER",
    "body": "The nonce is part of the data being signed by the sender, so in the current form the miner can in no shape or form change it (or any other field on the transaction). Account abstraction might help with your usecase as @infamousrev mentioned, but you need to put your thoughts down on the relevant EIP (https://github.com/ethereum/EIPs/issues/86) to have it discussed and considered.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355527296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

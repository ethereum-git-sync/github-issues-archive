{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19377",
  "id": 428420816,
  "node_id": "MDU6SXNzdWU0Mjg0MjA4MTY=",
  "number": 19377,
  "title": "No/incredibly delayed sync on boot with only 1-4h of blocks to catch up on",
  "user": {
    "login": "jleeh",
    "id": 10528926,
    "node_id": "MDQ6VXNlcjEwNTI4OTI2",
    "avatar_url": "https://avatars.githubusercontent.com/u/10528926?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jleeh",
    "html_url": "https://github.com/jleeh",
    "followers_url": "https://api.github.com/users/jleeh/followers",
    "following_url": "https://api.github.com/users/jleeh/following{/other_user}",
    "gists_url": "https://api.github.com/users/jleeh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jleeh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jleeh/subscriptions",
    "organizations_url": "https://api.github.com/users/jleeh/orgs",
    "repos_url": "https://api.github.com/users/jleeh/repos",
    "events_url": "https://api.github.com/users/jleeh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jleeh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-04-02T20:12:27Z",
  "updated_at": "2019-04-03T12:15:53Z",
  "closed_at": "2019-04-03T12:15:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `Geth/v1.9.0-unstable-27e3f968/linux-amd64/go1.11.5` (Seen on many of the previous versions)\r\nOS & Version: Linux\r\nNetwork: Seen on all\r\n\r\n#### Expected behaviour\r\nBlock synchronisation to start instantly, or very close to on Geth boot. I'd like to see a parity between Geth and Parity in-regards to block syncing. As when Parity starts, it syncs without fail straight away.\r\n\r\n#### Actual behaviour\r\nBlock synchronisation never starts, or is extremely delayed. Log output (observe timestamp between last two rows and the age of the last block):\r\n```\r\nWARN [04-02|19:03:16.590] Sanitizing cache to Go's GC limits       provided=2048 updated=1295\r\nINFO [04-02|19:03:16.594] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [04-02|19:03:16.598] Starting peer-to-peer node               instance=Geth/v1.9.0-unstable-27e3f968/linux-amd64/go1.11.5\r\nINFO [04-02|19:03:16.599] Allocated trie memory caches             clean=323.00MiB dirty=323.00MiB\r\nINFO [04-02|19:03:16.601] Allocated cache and file handles         database=/geth/.ethereum/geth/chaindata cache=647.00MiB handles=2048\r\nINFO [04-02|19:03:17.334] Initialised chain configuration          config=\"{ChainID: 5 Homestead: 0 DAO: <nil> DAOSupport: true EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: 0  ConstantinopleFix: 0 Engine: clique}\"\r\nINFO [04-02|19:03:17.334] Initialising Ethereum protocol           versions=\"[63 62]\" network=1\r\nINFO [04-02|19:03:17.378] Loaded most recent local header          number=348263 hash=6adc57…adac17 td=585825 age=4h25m11s\r\nINFO [04-02|19:03:17.378] Loaded most recent local full block      number=348263 hash=6adc57…adac17 td=585825 age=4h25m11s\r\nINFO [04-02|19:03:17.378] Loaded most recent local fast block      number=348263 hash=6adc57…adac17 td=585825 age=4h25m11s\r\nINFO [04-02|19:03:17.384] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [04-02|19:03:17.384] Regenerated local transaction journal    transactions=0 accounts=0\r\nWARN [04-02|19:03:17.384] Blockchain not empty, fast sync disabled\r\nINFO [04-02|19:03:17.474] New local node record                    seq=17 id=6a317b5e788e8b6f ip=127.0.0.1 udp=30303 tcp=30303\r\nINFO [04-02|19:03:17.478] IPC endpoint opened                      url=/geth/.ethereum/geth.ipc\r\nINFO [04-02|19:03:17.479] Started P2P networking                   self=enode://be45489e74fa5dd27a5cd5a62a7a3460cd1ec1a067d6f3e2ac7a4183019f7845e7a31dc40d090812b39c9ad9567b4900b6de4ccf3e6a5d4bb9aa0c07242244dc@127.0.0.1:30303\r\nINFO [04-02|19:03:17.480] HTTP endpoint opened                     url=http://0.0.0.0:8545      cors= vhosts=*\r\nINFO [04-02|19:03:17.481] WebSocket endpoint opened                url=ws://[::]:8546\r\nINFO [04-02|19:03:31.505] New local node record                    seq=18 id=6a317b5e788e8b6f ip=34.223.1.144 udp=30303 tcp=30303\r\nINFO [04-02|19:57:43.205] Got interrupt, shutting down...\r\n```\r\nTo give some context, I have immutable infrastructure that on upgrade of Geth, performs rolling restarts of instances using a Geth image that synced up to the tip at the time.\r\n\r\nIn this process, if the box is not alive and synced within the hour, it will mark the rollout as failed and then cancel the upgrade process. Due to Geth not syncing any blocks at all in that time, it was marked as failed.\r\n\r\nIn this case, this happened at the same time on both Rinkeby & Goerli while Goerli was only 1h behind from the latest block. I've worked with Geth for a bit, and I've seen this across all networks and it plagues the automation of Geth in immutable infrastructure.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nBuild a new Geth instance and copy over a db which has the synced chain and is not far behind.\r\n",
  "closed_by": {
    "login": "jleeh",
    "id": 10528926,
    "node_id": "MDQ6VXNlcjEwNTI4OTI2",
    "avatar_url": "https://avatars.githubusercontent.com/u/10528926?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jleeh",
    "html_url": "https://github.com/jleeh",
    "followers_url": "https://api.github.com/users/jleeh/followers",
    "following_url": "https://api.github.com/users/jleeh/following{/other_user}",
    "gists_url": "https://api.github.com/users/jleeh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jleeh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jleeh/subscriptions",
    "organizations_url": "https://api.github.com/users/jleeh/orgs",
    "repos_url": "https://api.github.com/users/jleeh/repos",
    "events_url": "https://api.github.com/users/jleeh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jleeh/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479463929",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19377#issuecomment-479463929",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19377",
    "id": 479463929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTQ2MzkyOQ==",
    "user": {
      "login": "jleeh",
      "id": 10528926,
      "node_id": "MDQ6VXNlcjEwNTI4OTI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/10528926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jleeh",
      "html_url": "https://github.com/jleeh",
      "followers_url": "https://api.github.com/users/jleeh/followers",
      "following_url": "https://api.github.com/users/jleeh/following{/other_user}",
      "gists_url": "https://api.github.com/users/jleeh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jleeh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jleeh/subscriptions",
      "organizations_url": "https://api.github.com/users/jleeh/orgs",
      "repos_url": "https://api.github.com/users/jleeh/repos",
      "events_url": "https://api.github.com/users/jleeh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jleeh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T12:15:53Z",
    "updated_at": "2019-04-03T12:15:53Z",
    "author_association": "NONE",
    "body": "Closing this issue, I found it was a problem on my end with the arguments not being properly passed into Geth.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479463929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26788",
  "id": 1606525709,
  "node_id": "I_kwDOAOvK985fwaMN",
  "number": 26788,
  "title": "Panic when starting with datadir.ancient",
  "user": {
    "login": "caevv",
    "id": 1685482,
    "node_id": "MDQ6VXNlcjE2ODU0ODI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1685482?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/caevv",
    "html_url": "https://github.com/caevv",
    "followers_url": "https://api.github.com/users/caevv/followers",
    "following_url": "https://api.github.com/users/caevv/following{/other_user}",
    "gists_url": "https://api.github.com/users/caevv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/caevv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caevv/subscriptions",
    "organizations_url": "https://api.github.com/users/caevv/orgs",
    "repos_url": "https://api.github.com/users/caevv/repos",
    "events_url": "https://api.github.com/users/caevv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/caevv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-03-02T10:19:43Z",
  "updated_at": "2023-03-08T09:56:17Z",
  "closed_at": "2023-03-08T09:56:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\r\n INFO [03-02|10:13:12.169] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\n INFO [03-02|10:13:12.175] Set global gas cap                       cap=50,000,000\r\n INFO [03-02|10:13:12.184] Allocated trie memory caches             clean=614.00MiB dirty=1024.00MiB\r\n INFO [03-02|10:13:12.185] Using pebble as the backing database\r\n INFO [03-02|10:13:12.185] Allocated cache and file handles         database=/var/lib/goethereum/geth/chaindata cache=2.00GiB handles=524,288\r\n panic: runtime error: invalid memory address or nil pointer dereference\r\n [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xb7e6e5]\r\n\r\n goroutine 1 [running]:\r\n github.com/ethereum/go-ethereum/core/rawdb.NewFreezer({0xc0001e26f0, 0x21}, {0x194272f, 0x11}, 0x0, 0x0?, 0xc00060dce0?)\r\n \tgithub.com/ethereum/go-ethereum/core/rawdb/freezer.go:102 +0x165\r\n github.com/ethereum/go-ethereum/core/rawdb.NewChainFreezer(...)\r\n \tgithub.com/ethereum/go-ethereum/core/rawdb/freezer.go:85\r\n github.com/ethereum/go-ethereum/core/rawdb.newChainFreezer({0xc0001e26f0?, 0x1b?}, {0x194272f?, 0xc00060dd78?}, 0x78?)\r\n \tgithub.com/ethereum/go-ethereum/core/rawdb/chain_freezer.go:59 +0x34\r\n github.com/ethereum/go-ethereum/core/rawdb.NewDatabaseWithFreezer({0x7f2ca4c1d7e0?, 0xc000508030}, {0x7ffc562fef0b, 0x1b}, {0x194272f, 0x11}, 0x2f?)\r\n \tgithub.com/ethereum/go-ethereum/core/rawdb/database.go:203 +0x8b\r\n github.com/ethereum/go-ethereum/core/rawdb.Open({{0x0, 0x0}, {0xc0008b0060, 0x22}, {0x7ffc562fef0b, 0x1b}, {0x194272f, 0x11}, 0x800, 0x80000, ...})\r\n \tgithub.com/ethereum/go-ethereum/core/rawdb/database.go:383 +0xc5\r\n github.com/ethereum/go-ethereum/node.(*Node).OpenDatabaseWithFreezer(0xc0000eca80, {0x193807f, 0x9}, 0x800, 0x80000, {0x7ffc562fef0b, 0x1b}, {0x194272f, 0x11}, 0x0)\r\n \tgithub.com/ethereum/go-ethereum/node/node.go:744 +0x358\r\n github.com/ethereum/go-ethereum/eth.New(0xc0000eca80, 0xc00070e700)\r\n \tgithub.com/ethereum/go-ethereum/eth/backend.go:130 +0x506\r\n github.com/ethereum/go-ethereum/cmd/utils.RegisterEthService(0xc000000000?, 0xc00070e700)\r\n \tgithub.com/ethereum/go-ethereum/cmd/utils/flags.go:2003 +0x1b0\r\n main.makeFullNode(0xc00060fc20?)\r\n \tgithub.com/ethereum/go-ethereum/cmd/geth/config.go:165 +0x185\r\n main.geth(0xc00071ab80)\r\n \tgithub.com/ethereum/go-ethereum/cmd/geth/main.go:341 +0xf3\r\n github.com/urfave/cli/v2.(*App).RunContext(0xc0000cca80, {0x1c901b0?, 0xc000044070}, {0xc000040280, 0x28, 0x28})\r\n \tgithub.com/urfave/cli/v2@v2.17.2-0.20221006022127-8f469abc00aa/app.go:395 +0x1070\r\n github.com/urfave/cli/v2.(*App).Run(...)\r\n \tgithub.com/urfave/cli/v2@v2.17.2-0.20221006022127-8f469abc00aa/app.go:252\r\n main.main()\r\n \tgithub.com/ethereum/go-ethereum/cmd/geth/main.go:266 +0x47\r\n```\r\n\r\n#### System information\r\n\r\nGeth version: `geth version`\r\n```\r\ngeth version\r\nGeth\r\nVersion: 1.11.2-stable\r\nGit Commit: 73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47\r\nArchitecture: amd64\r\nGo Version: go1.20.1\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=\r\n```\r\nOS & Version: Ubuntu\r\n\r\nRunning on a docker from eth-docker and setting the volume of the datadir.ancient as a docker volume.\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1451718138",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26788#issuecomment-1451718138",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
    "id": 1451718138,
    "node_id": "IC_kwDOAOvK985Wh3X6",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-02T11:28:13Z",
    "updated_at": "2023-03-02T11:28:19Z",
    "author_association": "MEMBER",
    "body": "Can you paste your startup command?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1451718138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1451748250",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26788#issuecomment-1451748250",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
    "id": 1451748250,
    "node_id": "IC_kwDOAOvK985Wh-ua",
    "user": {
      "login": "caevv",
      "id": 1685482,
      "node_id": "MDQ6VXNlcjE2ODU0ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1685482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caevv",
      "html_url": "https://github.com/caevv",
      "followers_url": "https://api.github.com/users/caevv/followers",
      "following_url": "https://api.github.com/users/caevv/following{/other_user}",
      "gists_url": "https://api.github.com/users/caevv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caevv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caevv/subscriptions",
      "organizations_url": "https://api.github.com/users/caevv/orgs",
      "repos_url": "https://api.github.com/users/caevv/repos",
      "events_url": "https://api.github.com/users/caevv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caevv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-02T11:55:01Z",
    "updated_at": "2023-03-02T11:55:01Z",
    "author_association": "NONE",
    "body": "I think the issue is that it doesn't have permission to access the folder.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1451748250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1453316782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26788#issuecomment-1453316782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
    "id": 1453316782,
    "node_id": "IC_kwDOAOvK985Wn9qu",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-03T10:36:12Z",
    "updated_at": "2023-03-03T10:36:12Z",
    "author_association": "MEMBER",
    "body": "Then fix the permissions :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1453316782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1453320058",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26788#issuecomment-1453320058",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
    "id": 1453320058,
    "node_id": "IC_kwDOAOvK985Wn-d6",
    "user": {
      "login": "caevv",
      "id": 1685482,
      "node_id": "MDQ6VXNlcjE2ODU0ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1685482?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caevv",
      "html_url": "https://github.com/caevv",
      "followers_url": "https://api.github.com/users/caevv/followers",
      "following_url": "https://api.github.com/users/caevv/following{/other_user}",
      "gists_url": "https://api.github.com/users/caevv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caevv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caevv/subscriptions",
      "organizations_url": "https://api.github.com/users/caevv/orgs",
      "repos_url": "https://api.github.com/users/caevv/repos",
      "events_url": "https://api.github.com/users/caevv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caevv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-03T10:38:51Z",
    "updated_at": "2023-03-03T10:38:51Z",
    "author_association": "NONE",
    "body": "Yes, done that already. The initial issue still stands, imo it shouldn't panic.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1453320058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1459909997",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26788#issuecomment-1459909997",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26788",
    "id": 1459909997,
    "node_id": "IC_kwDOAOvK985XBHVt",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-08T09:56:16Z",
    "updated_at": "2023-03-08T09:56:16Z",
    "author_association": "MEMBER",
    "body": "> imo it shouldn't panic.\r\n\r\nIf geth winds up in an situation where it is unable to continue, and unable to exit gracefully, it is correct to panic. \r\nIf we are told to \"do your thing\" on a readonly disk, then it's not much to do. Nothing wrong with `panic` here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1459909997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3695",
  "id": 209151702,
  "node_id": "MDU6SXNzdWUyMDkxNTE3MDI=",
  "number": 3695,
  "title": "Connection to geth via \"geth attach\" and \"geth console\" result in conflicting number of peers reported as connected (admin.peers)",
  "user": {
    "login": "dunff2k",
    "id": 8104989,
    "node_id": "MDQ6VXNlcjgxMDQ5ODk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8104989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dunff2k",
    "html_url": "https://github.com/dunff2k",
    "followers_url": "https://api.github.com/users/dunff2k/followers",
    "following_url": "https://api.github.com/users/dunff2k/following{/other_user}",
    "gists_url": "https://api.github.com/users/dunff2k/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dunff2k/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dunff2k/subscriptions",
    "organizations_url": "https://api.github.com/users/dunff2k/orgs",
    "repos_url": "https://api.github.com/users/dunff2k/repos",
    "events_url": "https://api.github.com/users/dunff2k/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dunff2k/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-02-21T13:53:33Z",
  "updated_at": "2017-02-27T17:34:26Z",
  "closed_at": "2017-02-27T17:34:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.5.9-stable`\r\nOS & Version: Ubuntu Server 16.04\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n`admin.peers` should display the same number of peers irrespective of using `geth attach` or `geth console` to bring up the terminal.\r\n\r\n#### Actual behaviour\r\nWhile manually adding peers to my private ethereum cluster: `admin.peers` displays a reduced number of peers if I connect to the node via `geth attach`.\r\n\r\n#### Steps to reproduce the behaviour\r\n1. Create 2 Ethereum nodes: x,y (in my work, x and y are VMs).\r\n2. Successfully add y as a peer to x.\r\n3. Open a terminal on y and connect to node using `geth console` check `admin.peers` to get result (i). Should be 1.\r\n4. launch a new terminal window and use `geth attach` to connect to node y. Check `admin.peers` to get result (ii). Should be 1.\r\n5. Compare result (i) and result (ii)\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n``",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281657456",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3695#issuecomment-281657456",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3695",
    "id": 281657456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTY1NzQ1Ng==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T12:36:32Z",
    "updated_at": "2017-02-22T12:36:32Z",
    "author_association": "MEMBER",
    "body": "`attach` and `console` both use the exact same RPC methods. Are you absolutely sure that `geth attach` connects to one of the nodes in the private cluster? You can verify this by comparing the enodes.\r\n\r\n```\r\n> admin.nodeInfo.enode\r\n\"enode://822869eaf38eed83e77865b398dc622652f2510c2b29ea6151189871beebd33072b08fb6513f1001920f3c23aa2d188e0961ab9a48144bd10906426451a148db@[::]:21000\"\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281657456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

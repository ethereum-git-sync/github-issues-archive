{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20223",
  "id": 514628634,
  "node_id": "MDU6SXNzdWU1MTQ2Mjg2MzQ=",
  "number": 20223,
  "title": "export transaction evm trace via test rpc",
  "user": {
    "login": "winsvega",
    "id": 4492341,
    "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winsvega",
    "html_url": "https://github.com/winsvega",
    "followers_url": "https://api.github.com/users/winsvega/followers",
    "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
    "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
    "organizations_url": "https://api.github.com/users/winsvega/orgs",
    "repos_url": "https://api.github.com/users/winsvega/repos",
    "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winsvega/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-10-30T12:27:09Z",
  "updated_at": "2020-05-24T17:36:00Z",
  "closed_at": "2020-05-24T17:35:59Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "geth retesteth\r\n\r\nduring the test creation/debug it is required to have evm trace to see what is happening with memory/storage and which instructions are called. we need a client to export that log via test RPC \r\nMartin mentioned that there is a software console GUI to view that log, so following that format would be great. \r\n\r\nsince the log might be too huge, the method should ask for a range of evm steps. \r\nSomething like this: \r\n\r\n`test_traceTransaction( blockNumber, transactionHash, evmPosStart, evmPosLength)`\r\n\r\nthis is essential to new state test development as the debug is a key feature for test development\r\n\r\nthe evm debug flag might be transfered in set_chainParams method\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/554750024",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-554750024",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 554750024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDc1MDAyNA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-17T14:17:14Z",
    "updated_at": "2019-11-17T14:17:14Z",
    "author_association": "MEMBER",
    "body": "I still think a better option would be to use the proper geth, and have it dump out the trace to files: `debug.standardTraceBlockToFile`. If you build the testing tools using docker images, you could use that instead of retesteth. \r\n\r\nAlternatively, if executed via commandline, geth today already supports dumping out the trace: `./evm --json --statetest x.json`\r\n\r\nThe problem is that retesteth will require more and more synthetic addons that \"mimic\" what the real node does, and mimics the real node API behaviour, but it won't actually _be_ the real node. \r\n\r\nAnyway, if we were to add this, how would the results be used in practice? I mean, it's not really feasible to include all traces for all testcases, right? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/554750024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558600297",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-558600297",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 558600297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODYwMDI5Nw==",
    "user": {
      "login": "winsvega",
      "id": 4492341,
      "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winsvega",
      "html_url": "https://github.com/winsvega",
      "followers_url": "https://api.github.com/users/winsvega/followers",
      "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
      "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
      "organizations_url": "https://api.github.com/users/winsvega/orgs",
      "repos_url": "https://api.github.com/users/winsvega/repos",
      "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winsvega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T12:08:21Z",
    "updated_at": "2019-11-26T14:10:50Z",
    "author_association": "MEMBER",
    "body": "The evm trace here is essential when writing and generating a new test to trace the transaction execution. \r\n\r\n```\r\n./retesteth -t GeneralStateTests/stExample -- --singletest add11 --filltests --trace 15 20 -d 1 -g 0\r\n```\r\n\r\nso the command trace transaction execution of a specified test from evm pointer 15  for the next 20 steps. to see what code is actually being executed\r\n\r\n\r\n> addons that \"mimic\"\r\n\r\nAm I getting this right that what client devs want is actually a node rather then a test tool. A node that would generate the blocks and send it over the network to test the clients connected to this test node? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558600297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558646970",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-558646970",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 558646970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODY0Njk3MA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T14:13:11Z",
    "updated_at": "2019-11-26T14:13:51Z",
    "author_association": "MEMBER",
    "body": "Today, both `evm`, `testeth`, `parity-evm` and `nethtest` already support outputting traces for statetests, so why not use the existing support?\r\nYou could build a docker image and pull e.g. `evm` directly from the geth `alltools` docker image, and it would work out of the box. \r\n\r\n> Am I getting this right that what client devs want is actually a node rather then a test tool. A node that would generate the blocks and send it over the network to test the clients connected to this test node?\r\n\r\nNo.. we need something which can generate tests, but I don't think the architecture of `retesteth` -- as it's implemented in go-ethereum, is the correct approach. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558646970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558647889",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-558647889",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 558647889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODY0Nzg4OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T14:15:13Z",
    "updated_at": "2019-11-26T14:15:13Z",
    "author_association": "MEMBER",
    "body": "@karalabe @fjl any thoughts about this?  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558647889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558650576",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-558650576",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 558650576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODY1MDU3Ng==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T14:21:00Z",
    "updated_at": "2019-11-26T14:21:00Z",
    "author_association": "MEMBER",
    "body": "The thing is, yes, we already have this method on the debug api. However, it's really a pretty large feature, and we'd have to copy-paste the entire implementation over to retesteth -- because retesteth is implemented totally standalone -- it basically shares nothing of the common codepaths. \r\n\r\nSo it adds quite a large overhead and maintenance.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/558650576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/560407003",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-560407003",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 560407003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDQwNzAwMw==",
    "user": {
      "login": "winsvega",
      "id": 4492341,
      "node_id": "MDQ6VXNlcjQ0OTIzNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4492341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winsvega",
      "html_url": "https://github.com/winsvega",
      "followers_url": "https://api.github.com/users/winsvega/followers",
      "following_url": "https://api.github.com/users/winsvega/following{/other_user}",
      "gists_url": "https://api.github.com/users/winsvega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winsvega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winsvega/subscriptions",
      "organizations_url": "https://api.github.com/users/winsvega/orgs",
      "repos_url": "https://api.github.com/users/winsvega/repos",
      "events_url": "https://api.github.com/users/winsvega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winsvega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T13:57:16Z",
    "updated_at": "2019-12-02T13:57:16Z",
    "author_association": "MEMBER",
    "body": "https://geth.ethereum.org/docs/rpc/ns-debug#debug_tracetransaction  looks interesting. \r\nHowever I discovered that geth retesteth implementation is just copy the existing method's code. \r\nIf there is a way to call original debug methods from `geth retesteth` that is what is needed. \r\n\r\nrewriting each individual method required is not nice. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/560407003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633264848",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20223#issuecomment-633264848",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20223",
    "id": 633264848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzI2NDg0OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-24T17:35:59Z",
    "updated_at": "2020-05-24T17:35:59Z",
    "author_association": "MEMBER",
    "body": "Closing this, since we're going with `statet8n` tool instead",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633264848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15707",
  "id": 283213417,
  "node_id": "MDU6SXNzdWUyODMyMTM0MTc=",
  "number": 15707,
  "title": "No space left on device",
  "user": {
    "login": "AndriyYakymiv",
    "id": 16446206,
    "node_id": "MDQ6VXNlcjE2NDQ2MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/16446206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndriyYakymiv",
    "html_url": "https://github.com/AndriyYakymiv",
    "followers_url": "https://api.github.com/users/AndriyYakymiv/followers",
    "following_url": "https://api.github.com/users/AndriyYakymiv/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndriyYakymiv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndriyYakymiv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndriyYakymiv/subscriptions",
    "organizations_url": "https://api.github.com/users/AndriyYakymiv/orgs",
    "repos_url": "https://api.github.com/users/AndriyYakymiv/repos",
    "events_url": "https://api.github.com/users/AndriyYakymiv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndriyYakymiv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2017-12-19T12:35:49Z",
  "updated_at": "2020-10-26T18:27:15Z",
  "closed_at": "2018-01-18T15:44:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello,\r\n\r\n#### System information\r\n\r\nGeth version: `1.7.2-stable-1db4ecdc`\r\nOS & Version: Ubuntu 16.04\r\n\r\n#### Problem\r\nI was running my node in `--syncmode fast` mode and the block size was small until the node was fully synced. When the node got synced and started import new chain segments after some time I've received `No space left on device` error, although amount of free space on disk after finishing syncing node was bigger then synced blockchain size, and that free space simply was taken by next 200 000 blocks (against 4 500 000 blocks which were downloaded while node was syncing).\r\n\r\nSo, does node stop fast syncing when blockchain got synced and start importing blocks in their fool size? If yes - is there any opportunity to remove irrelevant data to free some space without removing and re-syncing blockchain?\r\n\r\n\r\n",
  "closed_by": {
    "login": "AndriyYakymiv",
    "id": 16446206,
    "node_id": "MDQ6VXNlcjE2NDQ2MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/16446206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndriyYakymiv",
    "html_url": "https://github.com/AndriyYakymiv",
    "followers_url": "https://api.github.com/users/AndriyYakymiv/followers",
    "following_url": "https://api.github.com/users/AndriyYakymiv/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndriyYakymiv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndriyYakymiv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndriyYakymiv/subscriptions",
    "organizations_url": "https://api.github.com/users/AndriyYakymiv/orgs",
    "repos_url": "https://api.github.com/users/AndriyYakymiv/repos",
    "events_url": "https://api.github.com/users/AndriyYakymiv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndriyYakymiv/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353162648",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15707#issuecomment-353162648",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
    "id": 353162648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzE2MjY0OA==",
    "user": {
      "login": "veox",
      "id": 3036030,
      "node_id": "MDQ6VXNlcjMwMzYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3036030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/veox",
      "html_url": "https://github.com/veox",
      "followers_url": "https://api.github.com/users/veox/followers",
      "following_url": "https://api.github.com/users/veox/following{/other_user}",
      "gists_url": "https://api.github.com/users/veox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/veox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/veox/subscriptions",
      "organizations_url": "https://api.github.com/users/veox/orgs",
      "repos_url": "https://api.github.com/users/veox/repos",
      "events_url": "https://api.github.com/users/veox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/veox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-20T19:40:02Z",
    "updated_at": "2017-12-20T19:40:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So, does node stop fast syncing when blockchain got synced\r\n\r\nYes. There should be a message pertaining to the fact, with default log level messages. Should also be printed on `geth` launch.\r\n\r\n> and start importing blocks in their fool size?\r\n\r\nA fast sync imports full blocks, too; what it doesn't import is historical (archive) states. So, for example, you wouldn't be able to look up the balance of an account at a particular past block.\r\n\r\n> is there any opportunity to remove irrelevant data to free some space without removing and re-syncing blockchain?\r\n\r\nTrimming the database (aka purging historical states) on a \"live\" `geth` is not currently possible AFAIK.\r\n\r\nAs a rough estimate, the blockchain itself plus historical states is currently growing at ~ 25 GiB/week for me (running `geth 1.7.3`).\r\n\r\nYou could plan accordingly, and try using `geth export`, `geth removedb`, and `geth import` - although I personally haven't tried this yet, so can't say anything on the size of the exported blockchain file (and whether it includes states).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353162648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/354289662",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15707#issuecomment-354289662",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
    "id": 354289662,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDI4OTY2Mg==",
    "user": {
      "login": "picrin",
      "id": 2790838,
      "node_id": "MDQ6VXNlcjI3OTA4Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2790838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/picrin",
      "html_url": "https://github.com/picrin",
      "followers_url": "https://api.github.com/users/picrin/followers",
      "following_url": "https://api.github.com/users/picrin/following{/other_user}",
      "gists_url": "https://api.github.com/users/picrin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/picrin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/picrin/subscriptions",
      "organizations_url": "https://api.github.com/users/picrin/orgs",
      "repos_url": "https://api.github.com/users/picrin/repos",
      "events_url": "https://api.github.com/users/picrin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/picrin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T13:38:08Z",
    "updated_at": "2017-12-28T13:38:08Z",
    "author_association": "NONE",
    "body": "Is there a feature request for database trimming/ purging historical states on a live geth instance?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/354289662/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/358675152",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15707#issuecomment-358675152",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
    "id": 358675152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODY3NTE1Mg==",
    "user": {
      "login": "cloudzhong",
      "id": 7029606,
      "node_id": "MDQ6VXNlcjcwMjk2MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7029606?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cloudzhong",
      "html_url": "https://github.com/cloudzhong",
      "followers_url": "https://api.github.com/users/cloudzhong/followers",
      "following_url": "https://api.github.com/users/cloudzhong/following{/other_user}",
      "gists_url": "https://api.github.com/users/cloudzhong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cloudzhong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cloudzhong/subscriptions",
      "organizations_url": "https://api.github.com/users/cloudzhong/orgs",
      "repos_url": "https://api.github.com/users/cloudzhong/repos",
      "events_url": "https://api.github.com/users/cloudzhong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cloudzhong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-18T15:09:04Z",
    "updated_at": "2018-01-18T15:09:04Z",
    "author_association": "NONE",
    "body": "disk always full, only with fast sync, it is over 40G in one day.   is the data really big, or the sync will increase additional data ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/358675152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/358686485",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15707#issuecomment-358686485",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
    "id": 358686485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODY4NjQ4NQ==",
    "user": {
      "login": "AndriyYakymiv",
      "id": 16446206,
      "node_id": "MDQ6VXNlcjE2NDQ2MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16446206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndriyYakymiv",
      "html_url": "https://github.com/AndriyYakymiv",
      "followers_url": "https://api.github.com/users/AndriyYakymiv/followers",
      "following_url": "https://api.github.com/users/AndriyYakymiv/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndriyYakymiv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndriyYakymiv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndriyYakymiv/subscriptions",
      "organizations_url": "https://api.github.com/users/AndriyYakymiv/orgs",
      "repos_url": "https://api.github.com/users/AndriyYakymiv/repos",
      "events_url": "https://api.github.com/users/AndriyYakymiv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndriyYakymiv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-18T15:44:19Z",
    "updated_at": "2018-01-18T15:44:19Z",
    "author_association": "NONE",
    "body": "So, as I understand, there isn't any nice solution for now when using `geth`. When geth node is synced - it imports new blocks with historical (archive) states and the size of db will grow very fast and storage will get trashed quite fast. So, there are 2 solutions which I have found:\r\n1. When you are getting out of storage you can run `geth removedb` and start to sync node again. (not very usable);\r\n2. Use Parity node for syncing blockchain. When node will be synced it will import new blocks in the same size as while it was syncing depending on arguments you will pass to `parity`.\r\n\r\nHere is a link which describes possible arguments and estimated storage amount it will take while syncing:\r\nhttps://ethereum.stackexchange.com/questions/28541/current-disk-space-requirements-for-a-pruned-parity-node/31195#31195\r\n\r\nYou can choose any :)\r\nI'm using `parity --tracing on --fat-db on`.\r\nAlso, if you need to interact with blockchain use `geth attach` or any other framework (Truffle e. g.).\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/358686485/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/716740921",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15707#issuecomment-716740921",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15707",
    "id": 716740921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjc0MDkyMQ==",
    "user": {
      "login": "SirLancelot-OG",
      "id": 20579436,
      "node_id": "MDQ6VXNlcjIwNTc5NDM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/20579436?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SirLancelot-OG",
      "html_url": "https://github.com/SirLancelot-OG",
      "followers_url": "https://api.github.com/users/SirLancelot-OG/followers",
      "following_url": "https://api.github.com/users/SirLancelot-OG/following{/other_user}",
      "gists_url": "https://api.github.com/users/SirLancelot-OG/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SirLancelot-OG/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SirLancelot-OG/subscriptions",
      "organizations_url": "https://api.github.com/users/SirLancelot-OG/orgs",
      "repos_url": "https://api.github.com/users/SirLancelot-OG/repos",
      "events_url": "https://api.github.com/users/SirLancelot-OG/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SirLancelot-OG/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-26T18:27:15Z",
    "updated_at": "2020-10-26T18:27:15Z",
    "author_association": "NONE",
    "body": "I wanted to raise this issue again as I mistakenly ran geth without the `--gcmode` flag set to `full`.\r\n\r\nWhenever I start geth the client exits with the error \"No space left on device\".\r\n\r\nAre there any options for me other than syncing again from the beginning?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/716740921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

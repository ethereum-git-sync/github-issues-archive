{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21522",
  "id": 694846128,
  "node_id": "MDU6SXNzdWU2OTQ4NDYxMjg=",
  "number": 21522,
  "title": "rpc: consider supporting HTTP in Client.Subscribe",
  "user": {
    "login": "mvdan",
    "id": 3576549,
    "node_id": "MDQ6VXNlcjM1NzY1NDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3576549?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mvdan",
    "html_url": "https://github.com/mvdan",
    "followers_url": "https://api.github.com/users/mvdan/followers",
    "following_url": "https://api.github.com/users/mvdan/following{/other_user}",
    "gists_url": "https://api.github.com/users/mvdan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mvdan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mvdan/subscriptions",
    "organizations_url": "https://api.github.com/users/mvdan/orgs",
    "repos_url": "https://api.github.com/users/mvdan/repos",
    "events_url": "https://api.github.com/users/mvdan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mvdan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-09-07T08:12:37Z",
  "updated_at": "2020-10-01T09:00:15Z",
  "closed_at": "2020-10-01T09:00:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "https://github.com/ethereum/go-ethereum/blob/f86324edb7897b539cd44ce9710095d570e27699/rpc/client.go#L443-L445\r\n\r\nHTTP server-sent events could be used to support subscribing to events over HTTP, aside from other protocols like Websockets.\r\n\r\nAn intro: https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events\r\nA Go example: https://thoughtbot.com/blog/writing-a-server-sent-events-server-in-go\r\n\r\nNote that server-sent events with HTTP1 are unidirectional; only the server can send data to the client. I think that should be fine for this use case, but if a bidirectional connection is needed, we could always rely on HTTP2. See https://www.infoq.com/articles/websocket-and-http2-coexist/\r\n\r\nI'm opening this issue to see if this would be a useful feature that would be wanted in the future. The current `ErrNotificationsUnsupported` makes me wonder if it's not supported by design.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696596353",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-696596353",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 696596353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjU5NjM1Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T09:00:02Z",
    "updated_at": "2020-09-22T09:00:02Z",
    "author_association": "MEMBER",
    "body": "Implementing http2 to get this feature sounds like it would be a pretty large task, and from a UX perspective, it wouldn't bring anything new -- everything described can already be achieved via websockets. Unless I'm missing something? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696596353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696598310",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-696598310",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 696598310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjU5ODMxMA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T09:03:35Z",
    "updated_at": "2020-09-22T09:03:35Z",
    "author_association": "MEMBER",
    "body": "I also think that WebSocket and HTTP/2 fulfill different needs. WebSocket gives you a bi-directional data stream on which anything can be sent. It is possible to send multiple requests on the same connection with HTTP/2 (as with HTTP/1.1), and Server-Sent Events can be used to relay real-time data to the client, but it's not the same thing as WebSocket. Given that WebSocket works everywhere nowadays, including in browsers, I think there is no need for us to try and create an alternative to it.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696598310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696627875",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-696627875",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 696627875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjYyNzg3NQ==",
    "user": {
      "login": "p4u",
      "id": 1075446,
      "node_id": "MDQ6VXNlcjEwNzU0NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1075446?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/p4u",
      "html_url": "https://github.com/p4u",
      "followers_url": "https://api.github.com/users/p4u/followers",
      "following_url": "https://api.github.com/users/p4u/following{/other_user}",
      "gists_url": "https://api.github.com/users/p4u/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/p4u/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/p4u/subscriptions",
      "organizations_url": "https://api.github.com/users/p4u/orgs",
      "repos_url": "https://api.github.com/users/p4u/repos",
      "events_url": "https://api.github.com/users/p4u/events{/privacy}",
      "received_events_url": "https://api.github.com/users/p4u/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T10:07:31Z",
    "updated_at": "2020-09-22T10:07:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, the first reason is that HTTP endpoints are quite more common than Websockets on the real world. The second is, from the API consumer perspective, it's a bit weird a RPC client that accept both (WS and HTTP) but some calls only work in one case.\r\n\r\nI think supporting HTTP2 and event subscription would make things easier and less complex in the future. In my opinion Websockets will eventually become obsoleted.\r\n\r\nBut sure, it does not seems like an urgent feature to add. I cannot evaluate (yet) if it's a hard work or not. In any case, would a PR on this issue be accepted?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696627875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696630431",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-696630431",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 696630431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjYzMDQzMQ==",
    "user": {
      "login": "mvdan",
      "id": 3576549,
      "node_id": "MDQ6VXNlcjM1NzY1NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3576549?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mvdan",
      "html_url": "https://github.com/mvdan",
      "followers_url": "https://api.github.com/users/mvdan/followers",
      "following_url": "https://api.github.com/users/mvdan/following{/other_user}",
      "gists_url": "https://api.github.com/users/mvdan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mvdan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mvdan/subscriptions",
      "organizations_url": "https://api.github.com/users/mvdan/orgs",
      "repos_url": "https://api.github.com/users/mvdan/repos",
      "events_url": "https://api.github.com/users/mvdan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mvdan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T10:13:07Z",
    "updated_at": "2020-09-22T10:13:07Z",
    "author_association": "NONE",
    "body": "To clarify, I don't think websockets will get entirely obsoleted by http2, but for simple use cases like sending events to a client, I think they will be replaced for the reasons @p4u mentions - consistency and simplicity.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696630431/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696634418",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-696634418",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 696634418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjYzNDQxOA==",
    "user": {
      "login": "p4u",
      "id": 1075446,
      "node_id": "MDQ6VXNlcjEwNzU0NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1075446?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/p4u",
      "html_url": "https://github.com/p4u",
      "followers_url": "https://api.github.com/users/p4u/followers",
      "following_url": "https://api.github.com/users/p4u/following{/other_user}",
      "gists_url": "https://api.github.com/users/p4u/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/p4u/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/p4u/subscriptions",
      "organizations_url": "https://api.github.com/users/p4u/orgs",
      "repos_url": "https://api.github.com/users/p4u/repos",
      "events_url": "https://api.github.com/users/p4u/events{/privacy}",
      "received_events_url": "https://api.github.com/users/p4u/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T10:22:33Z",
    "updated_at": "2020-09-22T10:22:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, not obsoleted by meaning that it will disappear from browsers or servers. But with the time I think HTTP2 will be more used and will probably become the default way to create bidirectional connections on the Web ecosystem. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/696634418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/701994910",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21522#issuecomment-701994910",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21522",
    "id": 701994910,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTk5NDkxMA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T08:59:56Z",
    "updated_at": "2020-10-01T08:59:56Z",
    "author_association": "MEMBER",
    "body": ">  In any case, would a PR on this issue be accepted?\r\n\r\nHard to say - that always depends on the quality of the PR, and how wide-ranging the effects of it is. If it touches a lot of core components or refactors the entire rpc package, the chances are pretty slim. If it's more of a standalone shim, chances increase. \r\n\r\nWe'll definitely review it if it comes in. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/701994910/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

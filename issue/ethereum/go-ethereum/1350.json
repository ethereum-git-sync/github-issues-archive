{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1350",
  "id": 91729372,
  "node_id": "MDU6SXNzdWU5MTcyOTM3Mg==",
  "number": 1350,
  "title": "Inconsistent ipc behavior between geth 0.9.32 and 0.9.33",
  "user": {
    "login": "peterbitfly",
    "id": 1674920,
    "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peterbitfly",
    "html_url": "https://github.com/peterbitfly",
    "followers_url": "https://api.github.com/users/peterbitfly/followers",
    "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
    "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
    "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
    "repos_url": "https://api.github.com/users/peterbitfly/repos",
    "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "bas-vk",
    "id": 4280775,
    "node_id": "MDQ6VXNlcjQyODA3NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bas-vk",
    "html_url": "https://github.com/bas-vk",
    "followers_url": "https://api.github.com/users/bas-vk/followers",
    "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
    "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
    "organizations_url": "https://api.github.com/users/bas-vk/orgs",
    "repos_url": "https://api.github.com/users/bas-vk/repos",
    "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bas-vk/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-06-29T07:57:14Z",
  "updated_at": "2015-07-03T15:26:57Z",
  "closed_at": "2015-07-03T15:26:57Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "There seems to be an issue with the updated ipc interface and easy-ipc for node. The following gist https://gist.github.com/ppratscher/3128f41064dc5a92a717 did work fine with geth 0.9.32 (executes immediately and the connection remains open) while it does not work with geth 0.9.33 (latest develop) as it takes approx 5secs to return the call and the connection closes immediately afterwards. Could this be related to the new batch feature of the ipc interface?\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116584716",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1350#issuecomment-116584716",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350",
    "id": 116584716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjU4NDcxNg==",
    "user": {
      "login": "peterbitfly",
      "id": 1674920,
      "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterbitfly",
      "html_url": "https://github.com/peterbitfly",
      "followers_url": "https://api.github.com/users/peterbitfly/followers",
      "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
      "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
      "repos_url": "https://api.github.com/users/peterbitfly/repos",
      "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-29T09:48:24Z",
    "updated_at": "2015-06-29T09:48:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "There is also a strange behavior when using the net package as incomplete json data is returned from a call, see: https://gist.github.com/ppratscher/cdaf96589053843dafc4 which returns:\n\n> connected to server!\n> \n> undefined:1\n> 871683572095760715221900279379292786303637268765822681241993384808166021603722\n>                                                                              ^\n> SyntaxError: Unexpected end of input\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116584716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116748670",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1350#issuecomment-116748670",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350",
    "id": 116748670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjc0ODY3MA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-29T16:20:55Z",
    "updated_at": "2015-06-29T16:20:55Z",
    "author_association": "MEMBER",
    "body": "@ppratscher, on gitter you mentioned the `net` package is working for you. Is the first question still an issue then? I have tried your example and see some strange behavior.  Geth returns the response but easy-ipc doesn't seems to trigger a data event.\n\nAbout receiving an invalid response. The IPC connection has a max buffer size which is imposed by the OS. The requested block is very large and the length of the response is larger then the buffer size of your OS. Because of that geth will send the response in multiple chunks which fit in the buffer. Its up to the receiver to combine these chunks and parse the response when the response is received complete.\n\nI have created a brief example here: https://gist.github.com/bas-vk/6df3c86168d05eff373f\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116748670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116977584",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1350#issuecomment-116977584",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350",
    "id": 116977584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjk3NzU4NA==",
    "user": {
      "login": "peterbitfly",
      "id": 1674920,
      "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterbitfly",
      "html_url": "https://github.com/peterbitfly",
      "followers_url": "https://api.github.com/users/peterbitfly/followers",
      "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
      "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
      "repos_url": "https://api.github.com/users/peterbitfly/repos",
      "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-30T05:40:46Z",
    "updated_at": "2015-06-30T05:40:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well I would prefer that at least one of the current node ipc libraries would work with geth (as they used with version 0.9.32).\n\nThanks for your example. But this approach still fails as soon as you send multiple async requests using one connection. See: https://gist.github.com/ppratscher/00c753148d00b33cbda7\n\nThe gist works fine with geth 0.9.32.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/116977584/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/117068375",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1350#issuecomment-117068375",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1350",
    "id": 117068375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNzA2ODM3NQ==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-30T09:15:00Z",
    "updated_at": "2015-06-30T09:15:00Z",
    "author_association": "MEMBER",
    "body": "The example you gave is pipelining and not async requests. Pipelining isn't supported and gives performance improvements over high latency connections. In the case of this ipc connection I don't expect a noticeable performance gain from this. It adds however a lot of complexity. Since latency isn't an issue over this interface the only benefit would be to allow for parallel processing of the requests. But in that case the responses can come back out of order and clients must be able to handle this.\n\nBrowsers open multiple connections to a server which allows for async parallel processing. There is nothing holding you back from opening multiple connections to geth if you want this behavior.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/117068375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

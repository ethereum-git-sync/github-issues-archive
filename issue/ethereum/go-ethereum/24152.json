{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24152",
  "id": 1087775588,
  "node_id": "I_kwDOAOvK985A1iNk",
  "number": 24152,
  "title": "block timestamp is before than my transaction create time",
  "user": {
    "login": "junha-ahn",
    "id": 41976906,
    "node_id": "MDQ6VXNlcjQxOTc2OTA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/41976906?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/junha-ahn",
    "html_url": "https://github.com/junha-ahn",
    "followers_url": "https://api.github.com/users/junha-ahn/followers",
    "following_url": "https://api.github.com/users/junha-ahn/following{/other_user}",
    "gists_url": "https://api.github.com/users/junha-ahn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/junha-ahn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/junha-ahn/subscriptions",
    "organizations_url": "https://api.github.com/users/junha-ahn/orgs",
    "repos_url": "https://api.github.com/users/junha-ahn/repos",
    "events_url": "https://api.github.com/users/junha-ahn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/junha-ahn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-12-23T14:44:37Z",
  "updated_at": "2022-01-20T11:37:55Z",
  "closed_at": "2022-01-20T11:35:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "So Simply Our Send workflow like this:\r\n1. DB) inesrt transfer\r\n2. wallet middleware) sign & broadcast (to my local Geth node) transaction \r\n\r\nso (in UTC)\r\n- DB created_at: `15:00:40`\r\n- sign start        : `15:01:04`\r\n- block.timestamp: `14:59:24`\r\n\r\nbut the `block.timestamp` is `14:59:24` what is wrong? \r\n- I checked block timestamp in Etherscan and `eth_getBlockByHash` in my Geth node. \r\n\r\n### I read some articles. \r\n\r\nhttps://ethereum.org/en/whitepaper/#notes\r\n- \"Check that the timestamp of the block is greater than that of the previous blockfn. 2 and less than 2 hours into the future\"\r\n\r\nhttps://geth.ethereum.org/docs/interface/peer-to-peer\r\n- \"Your local time might be incorrect. An accurate clock is required to participate in the Ethereum network. Check your OS for how to resync your clock (example sudo ntpdate -s time.nist.gov) because even 12 seconds too fast can lead to 0 peers.\"\r\n\r\nhttps://github.com/ethereum/go-ethereum/issues/21784\r\n- \"The block timestamp is set when the miner starts working on the block. So it will most likely be pretty close to the time when the previous block was propagated on the network. The header needs to be set before the pow-grinding starts.\"\r\n\r\n### So I think\r\n\r\nThe network time is correct. and I checked my DB time, that is correct too.\r\n\r\nSo what is wrong with it? \r\n\r\n\"The block timestamp is set when the miner starts working on the block\" \r\n- I think mining starts when all transaction is ready in the miner's node (txpool), so can make `txRoot` and `blockHash`\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1011993150",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1011993150",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1011993150,
    "node_id": "IC_kwDOAOvK9848Uco-",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-13T10:18:45Z",
    "updated_at": "2022-01-13T10:18:45Z",
    "author_association": "MEMBER",
    "body": "Did this happen once or regularly?\r\n\r\n> I think mining starts when all transaction is ready in the miner's node (txpool), so can make txRoot and blockHash\r\n\r\nthis assumption is wrong - mining starts and transactions can come in in between",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1011993150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013591177",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1013591177",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1013591177,
    "node_id": "IC_kwDOAOvK9848aiyJ",
    "user": {
      "login": "junha-ahn",
      "id": 41976906,
      "node_id": "MDQ6VXNlcjQxOTc2OTA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/41976906?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junha-ahn",
      "html_url": "https://github.com/junha-ahn",
      "followers_url": "https://api.github.com/users/junha-ahn/followers",
      "following_url": "https://api.github.com/users/junha-ahn/following{/other_user}",
      "gists_url": "https://api.github.com/users/junha-ahn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junha-ahn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junha-ahn/subscriptions",
      "organizations_url": "https://api.github.com/users/junha-ahn/orgs",
      "repos_url": "https://api.github.com/users/junha-ahn/repos",
      "events_url": "https://api.github.com/users/junha-ahn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junha-ahn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-15T02:37:42Z",
    "updated_at": "2022-01-15T02:37:50Z",
    "author_association": "NONE",
    "body": "> Did this happen once or regularly?\r\n\r\nI don't know for sure\r\n\r\n> this assumption is wrong - mining starts and transactions can come in between\r\n\r\nbut we have to make `block hash` with a `previous hash` and `transaction root` which is Root of the transaction trie\r\nAnd then, we can calculate `nonce`. (with `block hash`)\r\n\r\nAm I misunderstanding? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013591177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017289134",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1017289134",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1017289134,
    "node_id": "IC_kwDOAOvK9848opmu",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T09:42:16Z",
    "updated_at": "2022-01-20T09:42:16Z",
    "author_association": "MEMBER",
    "body": "@junha-ahn we can always switch the mining block in flight, with the *exact same timestamp* but different tx list.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017289134/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017290398",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1017290398",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1017290398,
    "node_id": "IC_kwDOAOvK9848op6e",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T09:43:45Z",
    "updated_at": "2022-01-20T09:43:45Z",
    "author_association": "MEMBER",
    "body": "The header is created, transactions added (new tx root). \r\nThe mining is started on that hash. \r\nThen, a bit later on, we do an update, to include new transactions. This changes the tx root hash, but we do _not_ update the header timestamp, because that would force us to reexecute all transactions already there (because the timestamp is obervable from the evm). \r\nSo a block that takes a minute to mine will have a minute old timestamp, even though it can contain a transaction that was created one second before mining completed. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017290398/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017296526",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1017296526",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1017296526,
    "node_id": "IC_kwDOAOvK9848oraO",
    "user": {
      "login": "junha-ahn",
      "id": 41976906,
      "node_id": "MDQ6VXNlcjQxOTc2OTA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/41976906?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junha-ahn",
      "html_url": "https://github.com/junha-ahn",
      "followers_url": "https://api.github.com/users/junha-ahn/followers",
      "following_url": "https://api.github.com/users/junha-ahn/following{/other_user}",
      "gists_url": "https://api.github.com/users/junha-ahn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junha-ahn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junha-ahn/subscriptions",
      "organizations_url": "https://api.github.com/users/junha-ahn/orgs",
      "repos_url": "https://api.github.com/users/junha-ahn/repos",
      "events_url": "https://api.github.com/users/junha-ahn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junha-ahn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T09:50:58Z",
    "updated_at": "2022-01-20T09:56:54Z",
    "author_association": "NONE",
    "body": "Ok, Thank you but I'm wondering one thing\r\n\r\n1. there is an (unknown) nonce that we have to find to create a new block (nonce + block hash)\r\n2. but if block hash changed, (unknown) target nonce will be change\r\n3. And if the transaction list changed, txRoot will be change, and blockhash will be change too, so We have find a new nonce\r\n4. so if a new  transaction added in txlist, Miner have to find a \"new nonce\" (it's like time waste?)\r\n\r\nWhere did I start thinking wrong?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017296526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017408106",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24152#issuecomment-1017408106",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24152",
    "id": 1017408106,
    "node_id": "IC_kwDOAOvK9848pGpq",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T11:35:13Z",
    "updated_at": "2022-01-20T11:37:55Z",
    "author_association": "MEMBER",
    "body": "1. Yes\r\n2. Yes\r\n3. Yes\r\n4. Yes\r\n\r\n> Where did I start thinking wrong?\r\n\r\nYour mental model is wrong. You think it's like when searching for a lost glove in the apartment: first you search the living-room, then the hallway, etc, and eventually you'll find it. After a while, there's only the bathroom left -- you're closing in! And in this model, if you switch and suddenly starts looking for a sock instead, then the time spent was wasted, and you start again in the living-room. \r\n\r\nConsider instead that you're on the coast of australia, searching for a particular sort of sand-grain. There's a near-infinite search space, so it doesn't matter if you jump randomly across the coast or if you investigate one square millimeter at a time - it's not like you're accidentally going to pick the same grain for comparison again anyway. And it's not like you're closing in on the possible locations of this grain of sand. \r\n\r\nSimilarly, if you switch the grain of sand to another one, you don't have to re-examine the particular grains that you have already checked. The search just goes on. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017408106/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

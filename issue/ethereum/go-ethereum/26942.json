{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26942",
  "id": 1633841841,
  "node_id": "I_kwDOAOvK985hYnKx",
  "number": 26942,
  "title": "Geth sync in full mode is extremely slow",
  "user": {
    "login": "rbartoli",
    "id": 983189,
    "node_id": "MDQ6VXNlcjk4MzE4OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/983189?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rbartoli",
    "html_url": "https://github.com/rbartoli",
    "followers_url": "https://api.github.com/users/rbartoli/followers",
    "following_url": "https://api.github.com/users/rbartoli/following{/other_user}",
    "gists_url": "https://api.github.com/users/rbartoli/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rbartoli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rbartoli/subscriptions",
    "organizations_url": "https://api.github.com/users/rbartoli/orgs",
    "repos_url": "https://api.github.com/users/rbartoli/repos",
    "events_url": "https://api.github.com/users/rbartoli/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rbartoli/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-03-21T12:44:25Z",
  "updated_at": "2023-03-21T21:14:01Z",
  "closed_at": "2023-03-21T21:14:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I've previously synced geth in full mode on a Windows 10 desktop pc. \r\n\r\nThe specs are:\r\n- Intel i7 9700k\r\n- 16GB RAM\r\n- 2TB NVME (Samsung 970 EVO Plus)\r\n\r\nI'm launching geth with the following options:\r\n`geth.exe --syncmode full --datadir Z:\\BLOCKCHAINS\\ETHEREUM-GETH --ws --ws.api eth,net,web3 --authrpc.jwtsecret token\\jwt.hex  --maxpeers 50 --snapshot=false --cache 8192`\r\n\r\nI've now reinstalled the OS from scratch, Windows 11 Pro, done standard optimisation, and I get this syncing speed in blocks per second:\r\n```\r\n60% ETA: 82725 minutes @ 3.4bps\r\n60% ETA: 61144 minutes @ 4.6bps\r\n60% ETA: 62503 minutes @ 4.5bps\r\n60% ETA: 57401 minutes @ 4.9bps\r\n60% ETA: 47672 minutes @ 5.9bps\r\n60% ETA: 52086 minutes @ 5.4bps\r\n60% ETA: 65410 minutes @ 4.3bps\r\n60% ETA: 63924 minutes @ 4.4bps\r\n60% ETA: 68601 minutes @ 4.1bps\r\n60% ETA: 56253 minutes @ 5bps\r\n60% ETA: 65410 minutes @ 4.3bps\r\n60% ETA: 51139 minutes @ 5.5bps\r\n60% ETA: 50226 minutes @ 5.6bps\r\n60% ETA: 55150 minutes @ 5.1bps\r\n60% ETA: 50226 minutes @ 5.6bps\r\n60% ETA: 53069 minutes @ 5.3bps\r\n```\r\nIt feels way slower than before. I say feels because I haven't got the same measurement from when I was running this on Windows 10.\r\n\r\nIs this normal? Am I doing something wrong?",
  "closed_by": {
    "login": "rbartoli",
    "id": 983189,
    "node_id": "MDQ6VXNlcjk4MzE4OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/983189?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rbartoli",
    "html_url": "https://github.com/rbartoli",
    "followers_url": "https://api.github.com/users/rbartoli/followers",
    "following_url": "https://api.github.com/users/rbartoli/following{/other_user}",
    "gists_url": "https://api.github.com/users/rbartoli/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rbartoli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rbartoli/subscriptions",
    "organizations_url": "https://api.github.com/users/rbartoli/orgs",
    "repos_url": "https://api.github.com/users/rbartoli/repos",
    "events_url": "https://api.github.com/users/rbartoli/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rbartoli/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1477887862",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26942#issuecomment-1477887862",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942",
    "id": 1477887862,
    "node_id": "IC_kwDOAOvK985YFsd2",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T13:59:14Z",
    "updated_at": "2023-03-21T13:59:14Z",
    "author_association": "MEMBER",
    "body": "Is `Z:` a local disk? Iirc, windows tends to allocate these letters for network drives, and if this is the case, then following the chain in `fullsync` mode will be quite slow.\r\n\r\nAs a general rule, if you disable the snapshot and run fullsync, it will be slower as well.\r\n\r\nCould you provide a sample output of the sync? I'm looking for lines that say \"Imported new chain segment\".",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1477887862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478127349",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26942#issuecomment-1478127349",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942",
    "id": 1478127349,
    "node_id": "IC_kwDOAOvK985YGm71",
    "user": {
      "login": "rbartoli",
      "id": 983189,
      "node_id": "MDQ6VXNlcjk4MzE4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rbartoli",
      "html_url": "https://github.com/rbartoli",
      "followers_url": "https://api.github.com/users/rbartoli/followers",
      "following_url": "https://api.github.com/users/rbartoli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rbartoli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rbartoli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rbartoli/subscriptions",
      "organizations_url": "https://api.github.com/users/rbartoli/orgs",
      "repos_url": "https://api.github.com/users/rbartoli/repos",
      "events_url": "https://api.github.com/users/rbartoli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rbartoli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T16:07:56Z",
    "updated_at": "2023-03-21T17:07:08Z",
    "author_association": "NONE",
    "body": "@gballet Thanks for answering.\r\n\r\nSo `Z:` is just the letter I've assigned to the disk, it is a local 2TB NVME Gen3 (Samsung 970 EVO Plus).\r\n\r\n> As a general rule, if you disable the snapshot and run fullsync, it will be slower as well.\r\n\r\nI wasn't aware of this. I'm at 60% now so not sure if I'll get to the end earlier by enabling snapshot now.\r\n\r\n> Could you provide a sample output of the sync? I'm looking for lines that say \"Imported new chain segment\".\r\n\r\n```bash\r\nINFO [03-21|16:03:24.224] Forkchoice requested sync to new head    number=16,877,078 hash=5195d2..f5e2e2 finalized=16,876,983\r\nERROR[03-21|16:03:24.612] Expired request does not exist           peer=a62e4fc7ee7dd9a5d72a36079e4b70d48c9884b007fe7a51f34bc41bf82697ef\r\nINFO [03-21|16:03:25.446] Imported new chain segment               number=10,198,301 hash=3ac2d1..ca9b6e blocks=18   txs=3422    mgas=179.650 elapsed=8.000s mgasps=22.454 age=2y10mo7h  dirty=1.32GiB\r\nINFO [03-21|16:03:33.623] Imported new chain segment               number=10,198,341 hash=985555..59f0a2 blocks=40   txs=7650    mgas=398.405 elapsed=8.176s mgasps=48.725 age=2y10mo7h  dirty=1.33GiB\r\nINFO [03-21|16:03:37.585] Forkchoice requested sync to new head    number=16,877,079 hash=49b76f..3915b4 finalized=16,877,015\r\nINFO [03-21|16:03:41.800] Imported new chain segment               number=10,198,380 hash=d30ad7..110c4e blocks=39   txs=6722    mgas=368.433 elapsed=8.177s mgasps=45.056 age=2y10mo6h  dirty=1.32GiB\r\nWARN [03-21|16:03:45.237] Checkpoint challenge timed out, dropping id=900e48cb84bc8b3c conn=inbound addr=115.231.235.242:38528 type=Nethermind/v1.17.0+d...\r\nINFO [03-21|16:03:48.303] Forkchoice requested sync to new head    number=16,877,080 hash=151430..c7041d finalized=16,877,015\r\nINFO [03-21|16:03:49.897] Imported new chain segment               number=10,198,420 hash=8cc09c..29167e blocks=40   txs=7386    mgas=361.848 elapsed=8.097s mgasps=44.687 age=2y10mo6h  dirty=1.32GiB\r\nINFO [03-21|16:03:58.074] Imported new chain segment               number=10,198,460 hash=4fbb8c..42663c blocks=40   txs=6471    mgas=396.439 elapsed=8.177s mgasps=48.482 age=2y10mo6h  dirty=1.32GiB\r\nINFO [03-21|16:04:00.214] Forkchoice requested sync to new head    number=16,877,081 hash=126c26..4f2f9d finalized=16,877,015\r\nINFO [03-21|16:04:06.271] Imported new chain segment               number=10,198,502 hash=62c3b2..226186 blocks=42   txs=7139    mgas=395.528 elapsed=8.197s mgasps=48.253 age=2y10mo6h  dirty=1.33GiB\r\nINFO [03-21|16:04:11.938] Forkchoice requested sync to new head    number=16,877,082 hash=5fbcfe..b63ad5 finalized=16,877,015\r\nINFO [03-21|16:04:14.339] Imported new chain segment               number=10,198,544 hash=90a459..aea643 blocks=42   txs=6974    mgas=398.483 elapsed=8.067s mgasps=49.393 age=2y10mo6h  dirty=1.33GiB\r\nINFO [03-21|16:04:22.428] Imported new chain segment               number=10,198,582 hash=699f06..9ca622 blocks=38   txs=6937    mgas=368.009 elapsed=8.089s mgasps=45.495 age=2y10mo6h  dirty=1.33GiB\r\nINFO [03-21|16:04:24.299] Forkchoice requested sync to new head    number=16,877,083 hash=552599..80ba98 finalized=16,877,015\r\nINFO [03-21|16:04:30.571] Imported new chain segment               number=10,198,624 hash=466c9e..8b4e32 blocks=42   txs=7091    mgas=394.622 elapsed=8.142s mgasps=48.462 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:04:36.928] Forkchoice requested sync to new head    number=16,877,084 hash=26ade2..364816 finalized=16,877,015\r\nINFO [03-21|16:04:38.711] Imported new chain segment               number=10,198,665 hash=c600b1..433c07 blocks=41   txs=6843    mgas=365.485 elapsed=8.140s mgasps=44.899 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:04:46.773] Imported new chain segment               number=10,198,710 hash=826045..53164a blocks=45   txs=7428    mgas=415.835 elapsed=8.062s mgasps=51.578 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:04:47.956] Forkchoice requested sync to new head    number=16,877,085 hash=1b8297..b8f9bd finalized=16,877,015\r\nINFO [03-21|16:04:55.036] Imported new chain segment               number=10,198,754 hash=6e65ac..1965e8 blocks=44   txs=7325    mgas=398.176 elapsed=8.262s mgasps=48.192 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:05:00.868] Forkchoice requested sync to new head    number=16,877,086 hash=3d23d4..dcf922 finalized=16,877,015\r\nWARN [03-21|16:05:01.638] Checkpoint challenge timed out, dropping id=e52b8e5716ba79e5 conn=inbound addr=5.9.25.125:28868      type=Geth/v1.11.0-unstabl...\r\nINFO [03-21|16:05:03.068] Imported new chain segment               number=10,198,791 hash=9251f9..f16372 blocks=37   txs=6687    mgas=352.453 elapsed=8.031s mgasps=43.881 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:05:11.309] Imported new chain segment               number=10,198,827 hash=c86eda..d4f3b2 blocks=36   txs=6023    mgas=338.239 elapsed=8.241s mgasps=41.043 age=2y10mo5h  dirty=1.33GiB\r\nINFO [03-21|16:05:13.036] Forkchoice requested sync to new head    number=16,877,087 hash=6617ae..eac178 finalized=16,877,015\r\nINFO [03-21|16:05:19.468] Imported new chain segment               number=10,198,870 hash=cb1f3e..faf674 blocks=43   txs=6739    mgas=406.557 elapsed=8.159s mgasps=49.829 age=2y10mo5h  dirty=1.32GiB\r\nINFO [03-21|16:05:24.925] Forkchoice requested sync to new head    number=16,877,088 hash=9ca4b9..575467 finalized=16,877,015\r\nINFO [03-21|16:05:27.625] Imported new chain segment               number=10,198,910 hash=6f3a1c..c8874e blocks=40   txs=5231    mgas=357.275 elapsed=8.157s mgasps=43.800 age=2y10mo4h  dirty=1.32GiB\r\nINFO [03-21|16:05:35.720] Imported new chain segment               number=10,198,951 hash=ec90cd..4b0b84 blocks=41   txs=6316    mgas=388.957 elapsed=8.094s mgasps=48.049 age=2y10mo4h  dirty=1.33GiB\r\nINFO [03-21|16:05:36.355] Forkchoice requested sync to new head    number=16,877,089 hash=5ebd94..4f9f10 finalized=16,877,015\r\nINFO [03-21|16:05:44.039] Imported new chain segment               number=10,198,977 hash=95c17b..17a438 blocks=26   txs=4138    mgas=258.645 elapsed=8.319s mgasps=31.089 age=2y10mo4h  dirty=1.33GiB\r\nINFO [03-21|16:05:48.881] Forkchoice requested sync to new head    number=16,877,090 hash=083381..ebd09e finalized=16,877,015\r\nINFO [03-21|16:05:52.216] Imported new chain segment               number=10,199,022 hash=e98cce..3d0f16 blocks=45   txs=6341    mgas=416.619 elapsed=8.176s mgasps=50.955 age=2y10mo4h  dirty=1.33GiB\r\nINFO [03-21|16:05:59.896] Forkchoice requested sync to new head    number=16,877,091 hash=cf9310..80f976 finalized=16,877,015\r\nINFO [03-21|16:06:00.335] Imported new chain segment               number=10,199,066 hash=a5780e..74ae91 blocks=44   txs=6709    mgas=417.036 elapsed=8.119s mgasps=51.361 age=2y10mo4h  dirty=1.33GiB\r\n```\r\n\r\nWhile digging for info I saw this:\r\n> You set syncmode to \"full\" and disabled snapshot. This will get you an archive node which is much bigger than 600 GB.\r\nhttps://stackoverflow.com/questions/71460672/ethereum-full-node-needs-too-much-storage\r\n\r\nIs this correct?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478127349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478485909",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26942#issuecomment-1478485909",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942",
    "id": 1478485909,
    "node_id": "IC_kwDOAOvK985YH-eV",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T19:44:48Z",
    "updated_at": "2023-03-21T19:44:48Z",
    "author_association": "MEMBER",
    "body": "5 blocks per second is realistic-ish, processing a mainnet block when in sync takes about 150ms. I don't know what the speed was at block 10M though.\r\n\r\nThough, why are you full syncing? I mean, if you want to verify the chain just for kicks, sure. Otherwise snap sync would get you done in half a day.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478485909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478588527",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26942#issuecomment-1478588527",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26942",
    "id": 1478588527,
    "node_id": "IC_kwDOAOvK985YIXhv",
    "user": {
      "login": "rbartoli",
      "id": 983189,
      "node_id": "MDQ6VXNlcjk4MzE4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rbartoli",
      "html_url": "https://github.com/rbartoli",
      "followers_url": "https://api.github.com/users/rbartoli/followers",
      "following_url": "https://api.github.com/users/rbartoli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rbartoli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rbartoli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rbartoli/subscriptions",
      "organizations_url": "https://api.github.com/users/rbartoli/orgs",
      "repos_url": "https://api.github.com/users/rbartoli/repos",
      "events_url": "https://api.github.com/users/rbartoli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rbartoli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T21:14:01Z",
    "updated_at": "2023-03-21T21:14:01Z",
    "author_association": "NONE",
    "body": "@karalabe Thanks for answering.\r\n\r\n> 5 blocks per second is realistic-ish, processing a mainnet block when in sync takes about 150ms. I don't know what the speed was at block 10M though.\r\n\r\nSounds good, mainly wanted to check that there was no speed issue with Windows 11.\r\n\r\n> Though, why are you full syncing? I mean, if you want to verify the chain just for kicks, sure. Otherwise snap sync would get you done in half a day.\r\n\r\nJust wanted to experiment with it, no particular reason.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478588527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

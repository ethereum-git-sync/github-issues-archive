{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27839",
  "id": 1833686206,
  "node_id": "I_kwDOAOvK985tS9S-",
  "number": 27839,
  "title": "Forkchoice in devnet",
  "user": {
    "login": "aaroua5",
    "id": 50408519,
    "node_id": "MDQ6VXNlcjUwNDA4NTE5",
    "avatar_url": "https://avatars.githubusercontent.com/u/50408519?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aaroua5",
    "html_url": "https://github.com/aaroua5",
    "followers_url": "https://api.github.com/users/aaroua5/followers",
    "following_url": "https://api.github.com/users/aaroua5/following{/other_user}",
    "gists_url": "https://api.github.com/users/aaroua5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aaroua5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aaroua5/subscriptions",
    "organizations_url": "https://api.github.com/users/aaroua5/orgs",
    "repos_url": "https://api.github.com/users/aaroua5/repos",
    "events_url": "https://api.github.com/users/aaroua5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aaroua5/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-08-02T18:17:21Z",
  "updated_at": "2023-08-03T08:34:51Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi everyone,\r\n\r\nI have two nodes in my local devnet with custom genesis file, where I am running geth and prysm in each node.\r\n\r\nInitially there was only 1 node, let's say Node-A. After some time I added Node-B and tried to extend the network. The CL in that node tries to import blocks from other node and optimitiscally update the head chain. It calls geth with fork choice and geth is stuck on  **Forkchoice requested sync to new head.**\r\n\r\n\r\n```\r\nINFO [08-02|20:12:22.967] Forkchoice requested sync to new head    number=116 hash=1ec866..c63941 finalized=104\r\nINFO [08-02|20:12:34.864] Forkchoice requested sync to new head    number=117 hash=96d591..c447ef finalized=104\r\nINFO [08-02|20:12:46.791] Forkchoice requested sync to new head    number=118 hash=9c3c0d..706a37 finalized=104\r\nINFO [08-02|20:12:58.815] Forkchoice requested sync to new head    number=119 hash=f4a3e6..b5e5c6 finalized=104\r\nINFO [08-02|20:13:10.922] Forkchoice requested sync to new head    number=120 hash=e2a3f4..16381e finalized=104\r\nINFO [08-02|20:13:22.927] Forkchoice requested sync to new head    number=121 hash=3c2d68..10cbb8 finalized=104\r\nINFO [08-02|20:13:35.023] Forkchoice requested sync to new head    number=122 hash=06a7b0..98ff05 finalized=110\r\nINFO [08-02|20:13:46.804] Forkchoice requested sync to new head    number=123 hash=6917a2..c8312b finalized=110\r\nINFO [08-02|20:13:58.858] Forkchoice requested sync to new head    number=124 hash=d40f49..34b83f finalized=110\r\nINFO [08-02|20:14:10.889] Forkchoice requested sync to new head    number=125 hash=de57da..04bfa0 finalized=110\r\nINFO [08-02|20:14:22.866] Forkchoice requested sync to new head    number=126 hash=6b8eb0..4e65ff finalized=110\r\nINFO [08-02|20:14:34.852] Forkchoice requested sync to new head    number=127 hash=d2a4bc..9d3aae finalized=110\r\nINFO [08-02|20:14:46.934] Forkchoice requested sync to new head    number=128 hash=94fe1a..cdd91b finalized=116\r\nINFO [08-02|20:14:58.842] Forkchoice requested sync to new head    number=129 hash=9b3f03..952723 finalized=116\r\nINFO [08-02|20:15:10.897] Forkchoice requested sync to new head    number=130 hash=025e50..e92d11 finalized=116\r\nINFO [08-02|20:15:22.906] Forkchoice requested sync to new head    number=131 hash=131a7c..a952e6 finalized=116\r\nINFO [08-02|20:15:34.889] Forkchoice requested sync to new head    number=132 hash=e0c205..df1cea finalized=116\r\nINFO [08-02|20:15:46.872] Forkchoice requested sync to new head    number=133 hash=fe9186..ba03b9 finalized=116\r\nINFO [08-02|20:15:58.949] Forkchoice requested sync to new head    number=134 hash=79b768..5ed2da finalized=122\r\nINFO [08-02|20:16:10.817] Forkchoice requested sync to new head    number=135 hash=1dc34f..acd8bb finalized=122\r\nINFO [08-02|20:16:22.818] Forkchoice requested sync to new head    number=136 hash=144f4a..edad37 finalized=122\r\nINFO [08-02|20:16:34.855] Forkchoice requested sync to new head    number=137 hash=dc388e..1eead2 finalized=122\r\nINFO [08-02|20:16:46.824] Forkchoice requested sync to new head    number=138 hash=ddc138..997ffa finalized=122\r\nINFO [08-02|20:16:58.849] Forkchoice requested sync to new head    number=139 hash=438b5a..045a1c finalized=122\r\n\r\n```\r\nDo you have any Idea what could be the problem ?.\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663526853",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27839#issuecomment-1663526853",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839",
    "id": 1663526853,
    "node_id": "IC_kwDOAOvK985jJ2fF",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T08:32:19Z",
    "updated_at": "2023-08-03T08:32:19Z",
    "author_association": "MEMBER",
    "body": "Geth should also get NewPayload messages. Without those, we can't sync.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663526853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663529071",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27839#issuecomment-1663529071",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839",
    "id": 1663529071,
    "node_id": "IC_kwDOAOvK985jJ3Bv",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T08:33:44Z",
    "updated_at": "2023-08-03T08:33:44Z",
    "author_association": "MEMBER",
    "body": "I think it will resolve itself if you let prysm do a checkpoint-sync (without geth). ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663529071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663530831",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27839#issuecomment-1663530831",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27839",
    "id": 1663530831,
    "node_id": "IC_kwDOAOvK985jJ3dP",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T08:34:51Z",
    "updated_at": "2023-08-03T08:34:51Z",
    "author_association": "MEMBER",
    "body": "Reminds me a bit of this one: https://github.com/ethereum/go-ethereum/issues/27482 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1663530831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22150",
  "id": 782517919,
  "node_id": "MDU6SXNzdWU3ODI1MTc5MTk=",
  "number": 22150,
  "title": "Force geth to continue using fast sync",
  "user": {
    "login": "1blockologist",
    "id": 21366360,
    "node_id": "MDQ6VXNlcjIxMzY2MzYw",
    "avatar_url": "https://avatars.githubusercontent.com/u/21366360?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/1blockologist",
    "html_url": "https://github.com/1blockologist",
    "followers_url": "https://api.github.com/users/1blockologist/followers",
    "following_url": "https://api.github.com/users/1blockologist/following{/other_user}",
    "gists_url": "https://api.github.com/users/1blockologist/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/1blockologist/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/1blockologist/subscriptions",
    "organizations_url": "https://api.github.com/users/1blockologist/orgs",
    "repos_url": "https://api.github.com/users/1blockologist/repos",
    "events_url": "https://api.github.com/users/1blockologist/events{/privacy}",
    "received_events_url": "https://api.github.com/users/1blockologist/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-01-09T05:32:57Z",
  "updated_at": "2021-02-04T16:01:00Z",
  "closed_at": "2021-02-03T20:40:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Apparently geth uses full sync when it thinks your node is close to the latest state\r\n\r\nI think this is not really the case. I think instead it looks to see if it has switched to full sync at any time in the past and continues to full sync from then on, no matter if I specified --syncmode fast or not\r\n\r\nIs there a way around this?\r\n\r\nI used fast sync on a node a year ago and let it run for a while before turning it off. now I have a year to catch up on but the system keeps switching to full sync\r\n\r\nusing command ./build/bin/geth --syncmode fast --cache=8192\r\n\r\nand receiving WARN Switch sync mode from fast sync to full sync, which really means \"hey I just switched your sync mode from fast sync to full sync no matter what you wanted\"",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/760108153",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-760108153",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 760108153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDEwODE1Mw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-14T10:32:22Z",
    "updated_at": "2021-01-14T10:32:22Z",
    "author_association": "MEMBER",
    "body": "If your node is one year behind, you might as well start fast sync from scratch. The chain data you have is not going to accelerate the fast sync because Ethereum state has high turnover.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/760108153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773295006",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-773295006",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 773295006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzI5NTAwNg==",
    "user": {
      "login": "krychla1",
      "id": 33096727,
      "node_id": "MDQ6VXNlcjMzMDk2NzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33096727?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krychla1",
      "html_url": "https://github.com/krychla1",
      "followers_url": "https://api.github.com/users/krychla1/followers",
      "following_url": "https://api.github.com/users/krychla1/following{/other_user}",
      "gists_url": "https://api.github.com/users/krychla1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krychla1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krychla1/subscriptions",
      "organizations_url": "https://api.github.com/users/krychla1/orgs",
      "repos_url": "https://api.github.com/users/krychla1/repos",
      "events_url": "https://api.github.com/users/krychla1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krychla1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T13:14:54Z",
    "updated_at": "2021-02-04T13:14:54Z",
    "author_association": "NONE",
    "body": "Why has been this closed? \r\nI'm experiencing the same, my node is 8 days behind (block 11734968), keeps switching to full sync, no way to switch to fast. (8days in full node at 5tx/s would take ~1 month of syncing). \r\nAre you sure this is the desired behavior? Have to start from scratch in case a node is a few days off?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773295006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773315285",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-773315285",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 773315285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzMxNTI4NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T13:49:30Z",
    "updated_at": "2021-02-04T13:49:30Z",
    "author_association": "MEMBER",
    "body": "Well, you should be able to catch up a few days without problem, but if you're only doing 5txs/s, instead of 5 blocks/s, then there's something else awry, and a resync won't fix it. What's the machine? Any numbers on io performance?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773315285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773362177",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-773362177",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 773362177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzM2MjE3Nw==",
    "user": {
      "login": "krychla1",
      "id": 33096727,
      "node_id": "MDQ6VXNlcjMzMDk2NzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33096727?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krychla1",
      "html_url": "https://github.com/krychla1",
      "followers_url": "https://api.github.com/users/krychla1/followers",
      "following_url": "https://api.github.com/users/krychla1/following{/other_user}",
      "gists_url": "https://api.github.com/users/krychla1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krychla1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krychla1/subscriptions",
      "organizations_url": "https://api.github.com/users/krychla1/orgs",
      "repos_url": "https://api.github.com/users/krychla1/repos",
      "events_url": "https://api.github.com/users/krychla1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krychla1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T14:44:23Z",
    "updated_at": "2021-02-04T14:48:35Z",
    "author_association": "NONE",
    "body": "Sorry, it was a typo. I meant 5blocks/s. \r\nStill it takes far more than syncing it from scratch by --fast. I mean, its a pity that we should rather sync the whole blockchain, if we are just a few days behind, than to have the possibility to switch back to fast.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773362177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773393269",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-773393269",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 773393269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzM5MzI2OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T15:28:19Z",
    "updated_at": "2021-02-04T15:28:19Z",
    "author_association": "MEMBER",
    "body": "But hold on. If you import 5 blk/s, and the production of blocks is 1blk/15s, then one hour of imports is 18K blocks, or 1.3 days. So every hour you sync is 1+day. So it's definitely 'worth it' to chug through up to maybe a week or two of blocks in favor of fast-sync from scratch. Restarting fast-sync would be possible, yes, but would leave a lot of garbage data. We're switching to snapsync soon, not worth building more intricate models on fast-sync though.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773393269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773416324",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22150#issuecomment-773416324",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22150",
    "id": 773416324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzQxNjMyNA==",
    "user": {
      "login": "krychla1",
      "id": 33096727,
      "node_id": "MDQ6VXNlcjMzMDk2NzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33096727?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krychla1",
      "html_url": "https://github.com/krychla1",
      "followers_url": "https://api.github.com/users/krychla1/followers",
      "following_url": "https://api.github.com/users/krychla1/following{/other_user}",
      "gists_url": "https://api.github.com/users/krychla1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krychla1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krychla1/subscriptions",
      "organizations_url": "https://api.github.com/users/krychla1/orgs",
      "repos_url": "https://api.github.com/users/krychla1/repos",
      "events_url": "https://api.github.com/users/krychla1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krychla1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T16:01:00Z",
    "updated_at": "2021-02-04T16:01:00Z",
    "author_association": "NONE",
    "body": "Now I see. Sorry, wrong math. Writing quicker than thinking. I already went the way to removedb, keeping ancient data, seems to be done in a few hours as well.\r\nA look forward to the snapsync, I can only find very little about it. When will it be ready?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/773416324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

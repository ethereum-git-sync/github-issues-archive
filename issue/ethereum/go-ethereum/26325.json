{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26325",
  "id": 1481907073,
  "node_id": "I_kwDOAOvK985YVBuB",
  "number": 26325,
  "title": "Spin up ethereum node from snapshot",
  "user": {
    "login": "Malak-youness",
    "id": 112073758,
    "node_id": "U_kgDOBq4cHg",
    "avatar_url": "https://avatars.githubusercontent.com/u/112073758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Malak-youness",
    "html_url": "https://github.com/Malak-youness",
    "followers_url": "https://api.github.com/users/Malak-youness/followers",
    "following_url": "https://api.github.com/users/Malak-youness/following{/other_user}",
    "gists_url": "https://api.github.com/users/Malak-youness/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Malak-youness/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Malak-youness/subscriptions",
    "organizations_url": "https://api.github.com/users/Malak-youness/orgs",
    "repos_url": "https://api.github.com/users/Malak-youness/repos",
    "events_url": "https://api.github.com/users/Malak-youness/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Malak-youness/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-12-07T13:17:42Z",
  "updated_at": "2022-12-09T12:30:28Z",
  "closed_at": "2022-12-09T12:29:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have a synced full Ethereum node to mainnet on AWS. When I try to take a snapshot of the disk, where Ethereum data is saved, and immediately give it to a new node [ the new node is approximately 73 blocks away ]. It takes about an hour to resync with the network [ the  difference between local latest block number and network latest block number keeps increasing until after 50 mins it starts to drop at a higher rate until it is synced with the network] . \r\n\r\nWhy does it take that long to resync, knowing that all the data is already found in the snapshot? Or is this way of snapshotting not valid and there is another way?\r\n",
  "closed_by": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1341939333",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1341939333",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1341939333,
    "node_id": "IC_kwDOAOvK985P_F6F",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T03:30:02Z",
    "updated_at": "2022-12-08T03:30:02Z",
    "author_association": "MEMBER",
    "body": "Perhaps you can post some logs here from the new node, it's not enough for us to know what might be the issue, or if it's Geth's issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1341939333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342137843",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1342137843",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1342137843,
    "node_id": "IC_kwDOAOvK985P_2Xz",
    "user": {
      "login": "Malak-youness",
      "id": 112073758,
      "node_id": "U_kgDOBq4cHg",
      "avatar_url": "https://avatars.githubusercontent.com/u/112073758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Malak-youness",
      "html_url": "https://github.com/Malak-youness",
      "followers_url": "https://api.github.com/users/Malak-youness/followers",
      "following_url": "https://api.github.com/users/Malak-youness/following{/other_user}",
      "gists_url": "https://api.github.com/users/Malak-youness/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Malak-youness/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Malak-youness/subscriptions",
      "organizations_url": "https://api.github.com/users/Malak-youness/orgs",
      "repos_url": "https://api.github.com/users/Malak-youness/repos",
      "events_url": "https://api.github.com/users/Malak-youness/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Malak-youness/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T06:32:32Z",
    "updated_at": "2022-12-08T06:32:32Z",
    "author_association": "NONE",
    "body": "Here are some of the logs. Nothing out of the ordinary! \r\n![image](https://user-images.githubusercontent.com/112073758/206374685-ee5b72e9-1043-44a8-9ebc-f0a05f7eaa2a.png)\r\n![image](https://user-images.githubusercontent.com/112073758/206374781-e6187c06-c48d-4a83-9a3e-af898a6ac92f.png)\r\n![image](https://user-images.githubusercontent.com/112073758/206374892-fa8baf36-04ad-49dd-ac28-8e651f129b56.png)\r\n\r\n\r\n> Perhaps you can post some logs here from the new node, it's not enough for us to know what might be the issue, or if it's Geth's issue.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342137843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342176007",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1342176007",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1342176007,
    "node_id": "IC_kwDOAOvK985P__sH",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T07:06:04Z",
    "updated_at": "2022-12-08T07:06:04Z",
    "author_association": "MEMBER",
    "body": "It feels like leveldb is compacting somehow. I am not sure how does AWS manage the data. But it turns out some block executions take up to 1 minute, which is definitely impacted/blocked by database.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342176007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342349818",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1342349818",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1342349818,
    "node_id": "IC_kwDOAOvK985QAqH6",
    "user": {
      "login": "Malak-youness",
      "id": 112073758,
      "node_id": "U_kgDOBq4cHg",
      "avatar_url": "https://avatars.githubusercontent.com/u/112073758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Malak-youness",
      "html_url": "https://github.com/Malak-youness",
      "followers_url": "https://api.github.com/users/Malak-youness/followers",
      "following_url": "https://api.github.com/users/Malak-youness/following{/other_user}",
      "gists_url": "https://api.github.com/users/Malak-youness/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Malak-youness/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Malak-youness/subscriptions",
      "organizations_url": "https://api.github.com/users/Malak-youness/orgs",
      "repos_url": "https://api.github.com/users/Malak-youness/repos",
      "events_url": "https://api.github.com/users/Malak-youness/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Malak-youness/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T09:27:32Z",
    "updated_at": "2022-12-08T09:27:32Z",
    "author_association": "NONE",
    "body": "I will look into  it. \r\n\r\nI have another question though. Is the checkpoint URL passed to the lighthouse consensus client related to the idea of starting a node from a recent block ((i.e. snapshot) instead of from genesis block? And should geth syncing mode in that case be snap ? \r\n\r\n> It feels like leveldb is compacting somehow. I am not sure how does AWS manage the data. But it turns out some block executions take up to 1 minute, which is definitely impacted/blocked by database.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342349818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342374233",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1342374233",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1342374233,
    "node_id": "IC_kwDOAOvK985QAwFZ",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T09:41:18Z",
    "updated_at": "2022-12-08T09:41:18Z",
    "author_association": "MEMBER",
    "body": "Checkpoint URL is only relevant with consensus layer client. It will fast bootstrap consensus layer client and let it sends signal to Geth.\r\n\r\nIt doesn't matter geth is launched with snap or full sync mode.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342374233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342421475",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1342421475",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1342421475,
    "node_id": "IC_kwDOAOvK985QA7nj",
    "user": {
      "login": "Malak-youness",
      "id": 112073758,
      "node_id": "U_kgDOBq4cHg",
      "avatar_url": "https://avatars.githubusercontent.com/u/112073758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Malak-youness",
      "html_url": "https://github.com/Malak-youness",
      "followers_url": "https://api.github.com/users/Malak-youness/followers",
      "following_url": "https://api.github.com/users/Malak-youness/following{/other_user}",
      "gists_url": "https://api.github.com/users/Malak-youness/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Malak-youness/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Malak-youness/subscriptions",
      "organizations_url": "https://api.github.com/users/Malak-youness/orgs",
      "repos_url": "https://api.github.com/users/Malak-youness/repos",
      "events_url": "https://api.github.com/users/Malak-youness/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Malak-youness/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T10:05:29Z",
    "updated_at": "2022-12-08T10:21:16Z",
    "author_association": "NONE",
    "body": "Then in the case of snap sync, where is the checkpoint block fetched from? And is there a way to give a node a specific checkpoint from a trusted node ?\r\n\r\n\r\n\r\n> Checkpoint URL is only relevant with consensus layer client. It will fast bootstrap consensus layer client and let it sends signal to Geth.\r\n> \r\n> It doesn't matter geth is launched with snap or full sync mode.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1342421475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1344248847",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26325#issuecomment-1344248847",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26325",
    "id": 1344248847,
    "node_id": "IC_kwDOAOvK985QH5wP",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T12:29:56Z",
    "updated_at": "2022-12-09T12:30:28Z",
    "author_association": "MEMBER",
    "body": "Checkpoint is just a hint for consensus layer, so that consensus layer can fast bootstrap and be aware of what's the current head of the network. Then Geth will backfill the missing data between local chain and this \"network chain head\" by syncing mechanism.\r\n\r\nIf Geth uses full sync, then all the missing chain segments will be pulled from the network with verification and replay all blocks in order locally.\r\n\r\nIf Geth uses snap sync, then all the missing chain segments and the corresponding states will be pulled from the network with verification, the pulled state will be used as the base to handle blocks on top.\r\n\r\nI will just close the issue. But feel free to reopen if necessary.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1344248847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

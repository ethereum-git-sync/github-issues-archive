{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14566",
  "id": 232799896,
  "node_id": "MDU6SXNzdWUyMzI3OTk4OTY=",
  "number": 14566,
  "title": "1.6.5 - hundreds of Missing trie node; then BAD BLOCK. Fixed by restart",
  "user": {
    "login": "SjonHortensius",
    "id": 1684987,
    "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SjonHortensius",
    "html_url": "https://github.com/SjonHortensius",
    "followers_url": "https://api.github.com/users/SjonHortensius/followers",
    "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
    "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
    "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
    "repos_url": "https://api.github.com/users/SjonHortensius/repos",
    "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-06-01T08:18:39Z",
  "updated_at": "2018-06-25T12:03:47Z",
  "closed_at": "2018-06-25T12:03:47Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.6.1`\r\nOS & Version: Linux\r\n\r\n#### Actual behaviour\r\n\r\nMy GETH node has exploded three times in the last couple of days. It first logs hundreds of trie errors, then stops syncing because of a 'BAD BLOCK'. Restarting the process fixes it. Logs:\r\n\r\n```\r\nINFO [05-30|19:01:36] Imported new chain segment               blocks=1  txs=38  mgas=4.517  elapsed=129.871ms mgasps=34.779  number=3793716 hash=ce8d15…357ffb\r\nINFO [05-30|19:01:52] Imported new chain segment               blocks=1  txs=45  mgas=2.393  elapsed=815.776ms mgasps=2.934   number=3793717 hash=552cec…14beb6\r\nERROR[05-30|19:02:11] Unhandled trie error: Missing trie node 7bcfd46a3e48d428067d7d4e100391a511b39b65aec8e4a41186bb331251ba16\r\nERROR[05-30|19:02:11] Unhandled trie error: Missing trie node a1b51af2cc3214a342303bdfb481de2f32c9060bd130594fd45fc0511259b1fa\r\nERROR[05-30|19:02:11] Unhandled trie error: Missing trie node b19a59a8eeed0989bc98a56078a469fcb07c77bc6554889bb6173e4108a8441a\r\nINFO [05-30|19:02:35] Imported new chain segment               blocks=1  txs=39  mgas=3.278  elapsed=141.626ms mgasps=23.144  number=3793718 hash=a354b9…8172d2\r\nERROR[05-30|19:02:37] Unhandled trie error: Missing trie node 461957f236c689f9e1aca3935642ade0d742945b979efc3e112d4de7710873a6\r\nERROR[05-30|19:02:37] Unhandled trie error: Missing trie node 13e74728248fb9fdf608d339bd879b5a2bcc79fdcb6c749df41beb71cd6d3eb5\r\nERROR[05-30|19:02:37] Unhandled trie error: Missing trie node 89e29fbc093e40379c11c6394316a77b661a42932e66195a3d95d16613c96e04\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node a075bd445554cf7ddbb73cef27446af5829190f1691e18a9fc60676238a325e8\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node 1c22dfcb609b6ca6141574974db7103bad8e762698b83d43f9c3a20c34a7c956\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node 382f36687db21a1f04c6949601cf02787728398f05e69a1005d46aeb5e92ab1c\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node 382f36687db21a1f04c6949601cf02787728398f05e69a1005d46aeb5e92ab1c\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node 6969811d447d35c577c1acbcfe43838144fce30d0e293ea04aff4b91567c5c22\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node fc76fc9a94ec7ee21823e2cd5790fb3ed8e752f7adef8873ea17a3e8b949217f\r\nERROR[05-30|19:02:38] Unhandled trie error: Missing trie node 65f36cab47f60264a412082857d1fa8003812ffe49a68f6e83424be6c026d186\r\nERROR[05-30|19:02:39] Unhandled trie error: Missing trie node 7fdd039dc3f56fbb3d196202cd6c458fd0e7450982b499574d41ba0e4fb42498\r\nERROR[05-30|19:02:39] Unhandled trie error: Missing trie node 123692012f9807a3b553507b21afbee8883206722ebd18428addf10a9413f3fa\r\n...\r\nERROR[05-30|19:02:46] Unhandled trie error: Missing trie node ccbc8ab315185864289a4fa0273d29a10aa5db28edbe88defe8b339b4531945f\r\nINFO [05-30|19:02:46] Imported new chain segment               blocks=1  txs=44  mgas=4.510  elapsed=77.774ms  mgasps=57.991  number=3793719 hash=cb0df4…40c274\r\nERROR[05-30|19:02:50] Unhandled trie error: Missing trie node c3d101dabb028441455a06bb2fb548f7586515df69bda3318d378bf321df48f7\r\nERROR[05-30|19:02:50] Unhandled trie error: Missing trie node 011af8b0e477a5781a4b65278e733b731f52e50cf2d4d2f95b61a238513b093f\r\n...\r\nERROR[05-30|19:03:03] Unhandled trie error: Missing trie node a7fc5b59e79b1a1d8831b180c66377850b1fba6f8997de1bc7b648e3e9c5aa42\r\nERROR[05-30|19:03:03]\r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Engine: ethash}\r\nNumber: 3793720\r\nHash: 0x6d0f346bc1b3e10c50f386ac8d862cbde5ec4f319150516cb641e559b7666d76\r\nError: invalid nonce: have 1, expected 0\r\n##############################\r\n \r\nERROR[05-30|19:03:03] Unhandled trie error: Missing trie node 86f430a72a6c416349b0d39f76912e201446a7c451439f5fd855bb45b7c7f156\r\nERROR[05-30|19:03:03] Unhandled trie error: Missing trie node 86f430a72a6c416349b0d39f76912e201446a7c451439f5fd855bb45b7c7f156\r\n...\r\nERROR[05-30|19:03:03] Unhandled trie error: Missing trie node 47820bb741aaf5843422daec05ff1c77197a4e28b5f28d3a265c684d33afd0de\r\nERROR[05-30|19:03:03]\r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Engine: ethash}\r\nNumber: 3793720\r\nHash: 0x6d0f346bc1b3e10c50f386ac8d862cbde5ec4f319150516cb641e559b7666d76\r\n        receipt{med=b22ee61986be8b7f338ed350d2be003e1b2b8c2c5190d1857a00b2bbeb7a430a cgas=21272 bloom=00000000000000000000000000000000000000000000000000000000000000000000000\r\n00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\r\n...\r\n```\r\n\r\nThis originally happened in 1.6.1, but also recently happened in 1.6.5",
  "closed_by": {
    "login": "SjonHortensius",
    "id": 1684987,
    "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SjonHortensius",
    "html_url": "https://github.com/SjonHortensius",
    "followers_url": "https://api.github.com/users/SjonHortensius/followers",
    "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
    "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
    "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
    "repos_url": "https://api.github.com/users/SjonHortensius/repos",
    "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/307807365",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14566#issuecomment-307807365",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566",
    "id": 307807365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzgwNzM2NQ==",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-12T14:32:30Z",
    "updated_at": "2017-06-12T14:32:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is still happening every few days and a restart of the process fixes it. Can I get some feedback if this is expected?\r\nIf the process would explode I could auto-restart it; but currently my node becomes out-of-sync without me even noticing it",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/307807365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/310831436",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14566#issuecomment-310831436",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566",
    "id": 310831436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDgzMTQzNg==",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-24T10:48:52Z",
    "updated_at": "2017-06-24T11:00:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I found something in the chaindata/LOG that might explain this: \r\n> 07:00:05.213579 table@build error I·25776 \"open /srv/geth/geth/chaindata/796852.ldb: too many open files\"\r\n\r\nSo I'm updating the `LimitNOFILE` and will update this issue if this fixes it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/310831436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399924313",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14566#issuecomment-399924313",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14566",
    "id": 399924313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTkyNDMxMw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-06-25T11:48:51Z",
    "updated_at": "2018-06-25T11:48:51Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399924313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

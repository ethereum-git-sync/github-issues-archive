{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22117",
  "id": 778678466,
  "node_id": "MDU6SXNzdWU3Nzg2Nzg0NjY=",
  "number": 22117,
  "title": "How to sync block quickly and full history state trie?",
  "user": {
    "login": "lxex",
    "id": 36943337,
    "node_id": "MDQ6VXNlcjM2OTQzMzM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/36943337?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lxex",
    "html_url": "https://github.com/lxex",
    "followers_url": "https://api.github.com/users/lxex/followers",
    "following_url": "https://api.github.com/users/lxex/following{/other_user}",
    "gists_url": "https://api.github.com/users/lxex/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lxex/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lxex/subscriptions",
    "organizations_url": "https://api.github.com/users/lxex/orgs",
    "repos_url": "https://api.github.com/users/lxex/repos",
    "events_url": "https://api.github.com/users/lxex/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lxex/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2021-01-05T07:37:26Z",
  "updated_at": "2021-04-17T01:45:04Z",
  "closed_at": "2021-02-03T20:47:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**System information**\r\nGeth version: Geth/v1.9.26\r\nOS & Version:\r\nwindows 10 pro\r\n\r\nI used the following command, but  slower than mainnet producted!\r\n\r\n**geth  --syncmode=full --gcmode=archive --cache=1024 --verbosity=2**",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/754471120",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-754471120",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 754471120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDQ3MTEyMA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-05T07:56:54Z",
    "updated_at": "2021-01-05T07:56:54Z",
    "author_association": "MEMBER",
    "body": "Well, that looks correct, if you want the full archive state of every single block ever produced. You better have good hardware; fast IO and huge disks. \r\n\r\nYou lowered the `--cache`, bumping it up should improve things a bit. \r\n\r\nIn my experience, a lot of people who thinks they want a full archive node would actually only need a `syncmode=fast gcmode=archive`, but of course that depends on your usecase. \r\n\r\nAlso, if you indeed import blocks at slower than 14s per block, then yes, something is truly bad. While not blazing fast, it should be a lot++ faster than block production time. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/754471120/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/754507148",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-754507148",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 754507148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDUwNzE0OA==",
    "user": {
      "login": "lxex",
      "id": 36943337,
      "node_id": "MDQ6VXNlcjM2OTQzMzM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36943337?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lxex",
      "html_url": "https://github.com/lxex",
      "followers_url": "https://api.github.com/users/lxex/followers",
      "following_url": "https://api.github.com/users/lxex/following{/other_user}",
      "gists_url": "https://api.github.com/users/lxex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lxex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lxex/subscriptions",
      "organizations_url": "https://api.github.com/users/lxex/orgs",
      "repos_url": "https://api.github.com/users/lxex/repos",
      "events_url": "https://api.github.com/users/lxex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lxex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-05T09:07:59Z",
    "updated_at": "2021-01-05T09:07:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks for your message @holiman.\r\n\r\nMy application scenario is to use the account(`common.Address{}`) to traverse all the historical transactions.\r\nmy solution is\r\n1) use one `Address`  and block number `start `and `end`\r\n2) Dichotomy to find the history `Nonce` and `Balance` changes\r\n3) Get the block\r\n4) Find the address's transactions with block.Transactions()\r\n\r\n**Do you have a better way to quickly query historical transactions according to a address?**\r\nthanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/754507148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756015950",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-756015950",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 756015950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjAxNTk1MA==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-07T10:03:14Z",
    "updated_at": "2021-01-07T10:03:14Z",
    "author_association": "MEMBER",
    "body": "You might want to give turbo_geth a try - it *might* help you\r\nIt would be good to know a bit more about your use-case to help you further here. E.g. are you only interested in the outgoing transactions of one account?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756015950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756016963",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-756016963",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 756016963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjAxNjk2Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-07T10:04:49Z",
    "updated_at": "2021-01-07T10:04:49Z",
    "author_association": "MEMBER",
    "body": "Also, if you're only interested in the outgoing transactions, you wouldn't even need an archive node, just some custom go-code to traverse the transactions in the block bodies in `ancients` and find the ones that are relevant. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756016963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756017368",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-756017368",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 756017368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjAxNzM2OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-07T10:05:35Z",
    "updated_at": "2021-01-07T10:05:35Z",
    "author_association": "MEMBER",
    "body": "It's not really clear what your end goal is here.\r\n\r\nIf you want to get all outgoing transactions for a specific account, you can iterate over the blocks and just retrieve the transactions from each block and look at the senders. If you want to do this regularly or as a service, you can maintain your own index. Geth will not maintain this index because it's not something every user wants. Using an archive node for this seems overkill.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756017368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756639721",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-756639721",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 756639721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjYzOTcyMQ==",
    "user": {
      "login": "lxex",
      "id": 36943337,
      "node_id": "MDQ6VXNlcjM2OTQzMzM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36943337?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lxex",
      "html_url": "https://github.com/lxex",
      "followers_url": "https://api.github.com/users/lxex/followers",
      "following_url": "https://api.github.com/users/lxex/following{/other_user}",
      "gists_url": "https://api.github.com/users/lxex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lxex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lxex/subscriptions",
      "organizations_url": "https://api.github.com/users/lxex/orgs",
      "repos_url": "https://api.github.com/users/lxex/repos",
      "events_url": "https://api.github.com/users/lxex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lxex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T09:07:12Z",
    "updated_at": "2021-01-08T09:07:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for all.\r\nIf I retrieve the transactions from each block and compare each transaction's from and to with the address, I think its low performance. otherwise there are many addresses.\r\n\r\nhow a wallet user gets more history transactions?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/756639721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/772812162",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-772812162",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 772812162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjgxMjE2Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T20:47:29Z",
    "updated_at": "2021-02-03T20:47:29Z",
    "author_association": "MEMBER",
    "body": "> If I retrieve the transactions from each block and compare each transaction's from and to with the address, I think its low performance.\r\n\r\nIt's low performance yes, also it misses the cases where you receive funds via a contract. \r\n\r\n> how a wallet user gets more history transactions?\r\n\r\nUsually logs, solidity `event`s, that leave a few bits in the block bloomfilter. There are basically no super-easy and good ways to obtain a complete listing of everything that went into your account. I'm not saying it can't be done, obviously it can, but there's no super-easy way to do it. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/772812162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/821746813",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22117#issuecomment-821746813",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22117",
    "id": 821746813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTc0NjgxMw==",
    "user": {
      "login": "lxex",
      "id": 36943337,
      "node_id": "MDQ6VXNlcjM2OTQzMzM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36943337?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lxex",
      "html_url": "https://github.com/lxex",
      "followers_url": "https://api.github.com/users/lxex/followers",
      "following_url": "https://api.github.com/users/lxex/following{/other_user}",
      "gists_url": "https://api.github.com/users/lxex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lxex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lxex/subscriptions",
      "organizations_url": "https://api.github.com/users/lxex/orgs",
      "repos_url": "https://api.github.com/users/lxex/repos",
      "events_url": "https://api.github.com/users/lxex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lxex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-17T01:45:04Z",
    "updated_at": "2021-04-17T01:45:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "> It's low performance yes, also it misses the cases where you receive funds via a contract.\r\n\r\nYes I konw, it losts contract state that's not I need, we only need the account that has priv key.\r\n\r\nthanks for your replay.\r\n\r\n\r\nby the way, does eth support to sync the latest state trie?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/821746813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

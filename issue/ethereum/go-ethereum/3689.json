{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3689",
  "id": 208722674,
  "node_id": "MDU6SXNzdWUyMDg3MjI2NzQ=",
  "number": 3689,
  "title": "confusing error message when specifying defaultBlock for call()",
  "user": {
    "login": "chafey",
    "id": 1268698,
    "node_id": "MDQ6VXNlcjEyNjg2OTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1268698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chafey",
    "html_url": "https://github.com/chafey",
    "followers_url": "https://api.github.com/users/chafey/followers",
    "following_url": "https://api.github.com/users/chafey/following{/other_user}",
    "gists_url": "https://api.github.com/users/chafey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chafey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chafey/subscriptions",
    "organizations_url": "https://api.github.com/users/chafey/orgs",
    "repos_url": "https://api.github.com/users/chafey/repos",
    "events_url": "https://api.github.com/users/chafey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chafey/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-02-19T15:01:30Z",
  "updated_at": "2017-03-16T00:10:45Z",
  "closed_at": "2017-03-16T00:10:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.5.7-stable\r\nOS & Version: OSX\r\n\r\n#### Expected behaviour\r\n\r\nInvoking call on contract with defaultBlock set to block before contract was instantiated should give a clear error - something like \"Error: Contract was created after specified block number\"\r\n\r\n#### Actual behaviour\r\n\r\nConfusing error message : \"Error: new BigNumber() not a base 16 number:\" \r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1) Deploy contract that has a public getter (constant) and setter for a property and note the block number it was created on (e.g. 300):\r\n```\r\npragma solidity ^0.4.2;\r\n\r\ncontract Test {\r\n\r\n  string public name;\r\n\r\n  function SetName(string _name) {\r\n    name = _name;\r\n  }\r\n}\r\n```\r\n\r\n2) Try invoking call for the getter on a block # before it was instantiated:\r\n```\r\n  test.name.call(299); // error\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\nError: new BigNumber() not a base 16 number: \r\n    at raise (web3.js:14632:29)\r\n    at web3.js:14620:33\r\n    at BigNumber (web3.js:13667:28)\r\n    at web3.js:1110:23\r\n    at web3.js:1634:20\r\n    at web3.js:826:16\r\n    at map (<native code>)\r\n    at web3.js:825:12\r\n    at web3.js:4004:18\r\n````\r\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281681418",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3689#issuecomment-281681418",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689",
    "id": 281681418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTY4MTQxOA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T14:18:58Z",
    "updated_at": "2017-02-22T14:18:58Z",
    "author_association": "MEMBER",
    "body": "I'm not that familiar with web3.js but I assume that `test.name.call(299)` calls the name method in block 299? From what I make of the error its look likes web3 expects the block number as a string in hex notation. But @frozeman could probably confirm this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281681418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281995894",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3689#issuecomment-281995894",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689",
    "id": 281995894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTk5NTg5NA==",
    "user": {
      "login": "chafey",
      "id": 1268698,
      "node_id": "MDQ6VXNlcjEyNjg2OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1268698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chafey",
      "html_url": "https://github.com/chafey",
      "followers_url": "https://api.github.com/users/chafey/followers",
      "following_url": "https://api.github.com/users/chafey/following{/other_user}",
      "gists_url": "https://api.github.com/users/chafey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chafey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chafey/subscriptions",
      "organizations_url": "https://api.github.com/users/chafey/orgs",
      "repos_url": "https://api.github.com/users/chafey/repos",
      "events_url": "https://api.github.com/users/chafey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chafey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T13:49:39Z",
    "updated_at": "2017-02-23T13:49:39Z",
    "author_association": "NONE",
    "body": "Correct - test.name.call(299) \"gets\" the value of name on block 299.  In this case, the smart contract instance was created after block 299 so it doesn't exist and the error is confusing.  It works as expected when using block numbers after the smart contract is created",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281995894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/286919195",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3689#issuecomment-286919195",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3689",
    "id": 286919195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjkxOTE5NQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T00:10:45Z",
    "updated_at": "2017-03-16T00:10:45Z",
    "author_association": "MEMBER",
    "body": "This is a web3.js issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/286919195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

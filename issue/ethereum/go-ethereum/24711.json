{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24711",
  "id": 1207223034,
  "node_id": "I_kwDOAOvK985H9ML6",
  "number": 24711,
  "title": "evm command line interface adds leading zeros in odd-length input",
  "user": {
    "login": "omelancon",
    "id": 16464818,
    "node_id": "MDQ6VXNlcjE2NDY0ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16464818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/omelancon",
    "html_url": "https://github.com/omelancon",
    "followers_url": "https://api.github.com/users/omelancon/followers",
    "following_url": "https://api.github.com/users/omelancon/following{/other_user}",
    "gists_url": "https://api.github.com/users/omelancon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/omelancon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/omelancon/subscriptions",
    "organizations_url": "https://api.github.com/users/omelancon/orgs",
    "repos_url": "https://api.github.com/users/omelancon/repos",
    "events_url": "https://api.github.com/users/omelancon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/omelancon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-04-18T16:39:12Z",
  "updated_at": "2022-04-27T08:24:15Z",
  "closed_at": "2022-04-27T08:24:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am executing the following dummy (smart) contract with `evm` command line.\r\n\r\n    60003500\r\n    PUSH1 0x00\r\n    CALLDATALOAD\r\n    STOP\r\n\r\nIf I provide `0x101` as input I get the expected result (EDIT: see comments below, it turns out this is _not the expected_ result):\r\n\r\n    >>> evm --code 60003500 --input 101 --debug run\r\n    0x\r\n    #### TRACE ####\r\n    PUSH1           pc=00000000 gas=10000000000 cost=3\r\n    \r\n    CALLDATALOAD    pc=00000002 gas=9999999997 cost=3\r\n    Stack:\r\n    00000000  0x0\r\n    \r\n    STOP            pc=00000003 gas=9999999994 cost=0\r\n    Stack:\r\n    00000000  0x101000000000000000000000000000000000000000000000000000000000000  # AS EXPECTED\r\n\r\nAlthough, if I input `0x001`, the heading zeros seem to be dropped by the `evm` (see stack state on last line).\r\n\r\n    >>> evm --code 60003500 --input 001 --debug run\r\n    0x\r\n    #### TRACE ####\r\n    PUSH1           pc=00000000 gas=10000000000 cost=3\r\n    \r\n    CALLDATALOAD    pc=00000002 gas=9999999997 cost=3\r\n    Stack:\r\n    00000000  0x0\r\n    \r\n    STOP            pc=00000003 gas=9999999994 cost=0\r\n    Stack:\r\n    00000000  0x1000000000000000000000000000000000000000000000000000000000000   # NOT AS EXPECTED\r\n\r\nI am using `evm version 1.10.17-stable-25c9b49f` on Linux (Pop!_OS). Why does the `evm` drops the leading zeros? It seems like a bug to me.",
  "closed_by": {
    "login": "jwasinger",
    "id": 3411040,
    "node_id": "MDQ6VXNlcjM0MTEwNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3411040?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jwasinger",
    "html_url": "https://github.com/jwasinger",
    "followers_url": "https://api.github.com/users/jwasinger/followers",
    "following_url": "https://api.github.com/users/jwasinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/jwasinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jwasinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jwasinger/subscriptions",
    "organizations_url": "https://api.github.com/users/jwasinger/orgs",
    "repos_url": "https://api.github.com/users/jwasinger/repos",
    "events_url": "https://api.github.com/users/jwasinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jwasinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103611772",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24711#issuecomment-1103611772",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
    "id": 1103611772,
    "node_id": "IC_kwDOAOvK985Bx8d8",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-20T08:25:37Z",
    "updated_at": "2022-04-20T08:25:37Z",
    "author_association": "MEMBER",
    "body": "The stack currently seems to print decimals, not entire word slots. e.g.\r\n\r\n```\r\nStack:\r\n00000000  0x0\r\n```\r\n\r\n^ this was also in your trace that does the same thing as the truncation you didn't like.\r\n\r\nI *think* this is deliberate to easier interpret numbers, but maybe I'm wrong? CC @holiman ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103611772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103614425",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24711#issuecomment-1103614425",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
    "id": 1103614425,
    "node_id": "IC_kwDOAOvK985Bx9HZ",
    "user": {
      "login": "jwasinger",
      "id": 3411040,
      "node_id": "MDQ6VXNlcjM0MTEwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3411040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwasinger",
      "html_url": "https://github.com/jwasinger",
      "followers_url": "https://api.github.com/users/jwasinger/followers",
      "following_url": "https://api.github.com/users/jwasinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwasinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwasinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwasinger/subscriptions",
      "organizations_url": "https://api.github.com/users/jwasinger/orgs",
      "repos_url": "https://api.github.com/users/jwasinger/repos",
      "events_url": "https://api.github.com/users/jwasinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwasinger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-20T08:28:29Z",
    "updated_at": "2022-04-20T08:28:44Z",
    "author_association": "MEMBER",
    "body": "Weird that it accepts odd-length input (`--input 101` is interpreted as `0x010100000...0` which seems strange).  would it make sense to explicitly disallow this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103614425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103626918",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24711#issuecomment-1103626918",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
    "id": 1103626918,
    "node_id": "IC_kwDOAOvK985ByAKm",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-20T08:40:04Z",
    "updated_at": "2022-04-20T08:40:04Z",
    "author_association": "MEMBER",
    "body": "The problem is that `101` is three nibbles. We might do something \"wonky\" on wonky input. I agree we should just exit with \"please provide full bytes input\"",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1103626918/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1104041568",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24711#issuecomment-1104041568",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
    "id": 1104041568,
    "node_id": "IC_kwDOAOvK985BzlZg",
    "user": {
      "login": "omelancon",
      "id": 16464818,
      "node_id": "MDQ6VXNlcjE2NDY0ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16464818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/omelancon",
      "html_url": "https://github.com/omelancon",
      "followers_url": "https://api.github.com/users/omelancon/followers",
      "following_url": "https://api.github.com/users/omelancon/following{/other_user}",
      "gists_url": "https://api.github.com/users/omelancon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/omelancon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/omelancon/subscriptions",
      "organizations_url": "https://api.github.com/users/omelancon/orgs",
      "repos_url": "https://api.github.com/users/omelancon/repos",
      "events_url": "https://api.github.com/users/omelancon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/omelancon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-20T15:05:27Z",
    "updated_at": "2022-04-20T15:50:24Z",
    "author_association": "NONE",
    "body": "That is correct. It seems that the problem is with odd length input specifically. I initially expected the call message to be filled bitwise from left to right, but that is not exactly what happens.\r\n\r\nHere is another minimal example, both of these commands give be the same result:\r\n\r\n```\r\nevm --code 60003500 --input 1 -debug run\r\n```\r\n\r\n```\r\nevm --code 60003500 --input 01 -debug run\r\n```\r\nIn both case, what is pushed in the stack is `0x0100000000000000000000000000000000000000000000000000000000000000`.\r\n\r\nSo the leading is zero is not dropped in the second case. **It is in fact that a leading zero is added in the first one**.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1104041568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1109666615",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24711#issuecomment-1109666615",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24711",
    "id": 1109666615,
    "node_id": "IC_kwDOAOvK985CJCs3",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-26T11:13:21Z",
    "updated_at": "2022-04-26T11:13:21Z",
    "author_association": "MEMBER",
    "body": "@jwasinger was this fixed by https://github.com/ethereum/go-ethereum/pull/24721? can I close?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1109666615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

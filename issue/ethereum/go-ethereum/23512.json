{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23512",
  "id": 983816284,
  "node_id": "MDU6SXNzdWU5ODM4MTYyODQ=",
  "number": 23512,
  "title": "The block hash from web3 RPC is different from the one generated by using the block header information returned by web3 RPC on the Rinkeby network",
  "user": {
    "login": "ChuYimeng",
    "id": 29088201,
    "node_id": "MDQ6VXNlcjI5MDg4MjAx",
    "avatar_url": "https://avatars.githubusercontent.com/u/29088201?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChuYimeng",
    "html_url": "https://github.com/ChuYimeng",
    "followers_url": "https://api.github.com/users/ChuYimeng/followers",
    "following_url": "https://api.github.com/users/ChuYimeng/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChuYimeng/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChuYimeng/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChuYimeng/subscriptions",
    "organizations_url": "https://api.github.com/users/ChuYimeng/orgs",
    "repos_url": "https://api.github.com/users/ChuYimeng/repos",
    "events_url": "https://api.github.com/users/ChuYimeng/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChuYimeng/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-08-31T12:40:35Z",
  "updated_at": "2021-09-02T09:40:41Z",
  "closed_at": "2021-09-02T08:16:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth v1.10.8`\r\nOS & Version: Windows/Linux\r\nNetwork: rinkeby\r\nNode: infura\r\n#### Expected behaviour\r\nThe block hash from web3 RPC is same as the one generated by using the block header information returned by web3 RPC\r\n#### Actual behaviour\r\nThe block hash from web3 RPC is different from the one generated by using the block header information returned by web3 RPC\r\n#### Steps to reproduce the behaviour\r\ne.g., in a block with a block number 9204314, the block hash from web3 rpc is `0xb339bd0b82a47e8d072c11aace1119099c137ad819b47ee342ef001577a91539`, \r\nbut the one generated by types.block.Hash() is `0xa30d74603c598be4f2cdebb68cca2aab4ec3efa50169993e3ee5a32bc2c82a61`\r\nThe golang example is below:\r\n```\r\n\tclient, err := ethclient.Dial(\"https://rinkeby.infura.io/v3/<PROJECT ID>\")\r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t\treturn\r\n\t}\r\n\tblock, err := client.BlockByNumber(context.TODO(), big.NewInt(9204314)) \r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t\treturn\r\n\t}\r\n\tfmt.Printf(\"block number: %v, block hash: %v, parent hash: %v\", block.Number().String(), block.Hash().String(), block.ParentHash().String())\r\n```\r\nblock.Hash() call the header.Hash() to generate the block hash at the first time.\r\nThe log is below:\r\n`block number: 9204314, block hash: 0xa30d74603c598be4f2cdebb68cca2aab4ec3efa50169993e3ee5a32bc2c82a61, parent hash: 0x636455431c7f50ca5867a5bd63a0a8f12aa731c235ae963d8d5f5169f4cd47b3`\r\nIf the requested block height is 9204315, then the outpu is below:\r\n`block number: 9204315, block hash: 0x412dd0cfde7eff5b2944b130158cffcd0e81c7e2b8c0b09007bfe736bcb18fbf, parent hash: 0xb339bd0b82a47e8d072c11aace1119099c137ad819b47ee342ef001577a91539`\r\nThe parent hash  in the block number 9204315 is same as the block hash from web3 rpc and Etherscan in the block number 9204314, but is different from the one generated by types.block.Hash() in the block number 9204314.\r\nweb3 RPC response is below with the block number 9204314:\r\n```\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"result\": {\r\n        \"baseFeePerGas\": \"0xa\",\r\n        \"difficulty\": \"0x1\",\r\n        \"extraData\": \"0xd883010a09846765746888676f312e31362e37856c696e757800000000000000dce10f4248e9e16dadd77b4e4cd843c97593cd77cf0a1d9bff115b415584a1737bda42c977bd25ad14d6ba034c420be13855196793fef816c7ab303ed26e69df01\",\r\n        \"gasLimit\": \"0x1c9c380\",\r\n        \"gasUsed\": \"0x35e205\",\r\n        \"hash\": \"0xb339bd0b82a47e8d072c11aace1119099c137ad819b47ee342ef001577a91539\",\r\n        \"logsBloom\": \"0x00a40042400000004480044082800850208800000420820010000000648402008000002000000010100280240200000000100000024104a0020000420034008028008cc1584000802100000802080020000000020000900000008400000880018080e8c402000c012200440000000800810082001664000042001030000080002000080020104020000040020020001000008000000000080000004148002004020043901008240110000004008824064800000041804201010000000000450010008206220000010000010000000800880010000000001200001800001068000010085080040c40004080000000000800008100008020180000000000940000\",\r\n        \"miner\": \"0x7ffc57839b00206d1ad20c69a1981b489f772031\",\r\n        \"mixHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"nonce\": \"0x0000000000000000\",\r\n        \"number\": \"0x8c725a\",\r\n        \"parentHash\": \"0x636455431c7f50ca5867a5bd63a0a8f12aa731c235ae963d8d5f5169f4cd47b3\",\r\n        \"receiptsRoot\": \"0x87ca355fc3ef226975eeea4af06f9526961fe96632c2302f0cf8825cb907a383\",\r\n        \"sha3Uncles\": \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\r\n        \"size\": \"0x304a\",\r\n        \"stateRoot\": \"0x84a995e71dd0ade677f32e7143b608ab9354ab1cc09f8d589fea210d4fe21c69\",\r\n        \"timestamp\": \"0x612c820d\",\r\n        \"totalDifficulty\": \"0xee3415\",\r\n        \"transactions\": [\r\n         “...”\r\n        ],\r\n        \"transactionsRoot\": \"0xbcad791650a2acb94b0eb6a6021d868b0afd8a616d9f633ada668c0f6d6db223\",\r\n        \"uncles\": []\r\n    }\r\n}\r\n```\r\n**note: this exception only appears in rinkeby**",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911361832",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23512#issuecomment-911361832",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23512",
    "id": 911361832,
    "node_id": "IC_kwDOAOvK9842Ukco",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T08:16:13Z",
    "updated_at": "2021-09-02T08:16:13Z",
    "author_association": "MEMBER",
    "body": "This was fixed by https://github.com/ethereum/go-ethereum/pull/23466, will be included in the next release v1.10.9",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/911361832/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2085",
  "id": 123139117,
  "node_id": "MDU6SXNzdWUxMjMxMzkxMTc=",
  "number": 2085,
  "title": "eth_getLogs not checking all logs (?)",
  "user": {
    "login": "kumavis",
    "id": 1474978,
    "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kumavis",
    "html_url": "https://github.com/kumavis",
    "followers_url": "https://api.github.com/users/kumavis/followers",
    "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
    "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
    "organizations_url": "https://api.github.com/users/kumavis/orgs",
    "repos_url": "https://api.github.com/users/kumavis/repos",
    "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kumavis/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-12-20T07:07:47Z",
  "updated_at": "2015-12-21T21:31:34Z",
  "closed_at": "2015-12-21T21:13:14Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "I’m seeing some seemingly broken eth_getLogs behavior on my geth node\n\n```\n$ curl -d '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getLogs\",\"params\": [{ \"topics\": [\"0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\"], \"fromBlock\": \"0x29f94\" }], \"id\":1}' -X POST https://testrpc.metamask.io/ | jsonogram\n├─ id: 1\n├─ jsonrpc: 2.0\n└─ result\n   ├─ 0\n   │  ├─ address: 0xbd8dd6e3d5ea45d55fc64462871938d5f4ba5c09\n   │  ├─ topics\n   │  │  ├─ 0: 0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\n   │  │  └─ 1: 0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\n   │  ├─ data: 0x\n   │  ├─ blockNumber: 0x29f94\n   │  ├─ logIndex: 0x0\n   │  ├─ blockHash: 0x7c414bcc414cb85e1a8a89f40098402eee5fdc5890400be116982d431cb8efd4\n   │  ├─ transactionHash: 0xa17385eca17e7ec9b2b6fe2cf53e2683f0317ed603206b1eeadfd577b098e312\n   │  └─ transactionIndex: 0x0\n   ├─ 1\n   │  ├─ address: 0xbd8dd6e3d5ea45d55fc64462871938d5f4ba5c09\n   │  ├─ topics\n   │  │  ├─ 0: 0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\n   │  │  └─ 1: 0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\n   │  ├─ data: 0x\n   │  ├─ blockNumber: 0x29fbc\n   │  ├─ logIndex: 0x0\n   │  ├─ blockHash: 0xe18bb61fa8bb1354aa5841606888dd8c4c1683e0234e1a85b455580ec2b5d5f1\n   │  ├─ transactionHash: 0x01d6ce5935d2a18e789b5b7c7aad5d784882533c7131f65380fb08a39bdec137\n   │  └─ transactionIndex: 0x0\n   ├─ 2\n   │  ├─ address: 0xbd8dd6e3d5ea45d55fc64462871938d5f4ba5c09\n   │  ├─ topics\n   │  │  ├─ 0: 0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\n   │  │  └─ 1: 0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\n   │  ├─ data: 0x\n   │  ├─ blockNumber: 0x29fe2\n   │  ├─ logIndex: 0x0\n   │  ├─ blockHash: 0xf9cbdb71c9d8a9b088c06997fa011d135e5d222ea11e54c776e7677f2b591159\n   │  ├─ transactionHash: 0x09a6ae9cb4ed8fb7b93b13874c4a8200c2bfbf19035d6e2dc9745d2204e02f7b\n   │  └─ transactionIndex: 0x1\n   ├─ 3\n   │  ├─ address: 0xbd8dd6e3d5ea45d55fc64462871938d5f4ba5c09\n   │  ├─ topics\n   │  │  ├─ 0: 0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\n   │  │  └─ 1: 0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\n   │  ├─ data: 0x\n   │  ├─ blockNumber: 0x29fff\n   │  ├─ logIndex: 0x0\n   │  ├─ blockHash: 0x73419c88ab12f1b8e42a8c0f586cb0fa2ef856a860a337a3f3847207afc69f33\n   │  ├─ transactionHash: 0x9d0b26446432ab6f428adb4f28e04e687d517e57071dc70aa71c21058a468f8e\n   │  └─ transactionIndex: 0x1\n   └─ 4\n      ├─ address: 0xbd8dd6e3d5ea45d55fc64462871938d5f4ba5c09\n      ├─ topics\n      │  ├─ 0: 0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53\n      │  └─ 1: 0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\n      ├─ data: 0x\n      ├─ blockNumber: 0x2a025\n      ├─ logIndex: 0x0\n      ├─ blockHash: 0x8a1b9a77eb4bed526b4fcb459b9c7577b909ad9ba89b5c8f193695bb2d10225f\n      ├─ transactionHash: 0xb69821ef698d3dc7a108ad9a7a0204a2c13c8538ac10037cc5739985f307bb3b\n      └─ transactionIndex: 0x0\n```\n\nshows 4 results, each with two logs - the one I searched for, and another\n- `0xb2899cb26a6f22b6b94e4cc8de24dc97bcf3cc73fc0dfaac71decef29fac7c53`\n- `0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7`\n\nbut if i search for just the second one, I find no results\n\n```\n$ curl -d '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getLogs\",\"params\": [{ \"topics\": [\"0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\"], \"fromBlock\": \"0x29f94\" }], \"id\":1}' -X POST https://testrpc.metamask.io/\n├─ id: 1\n├─ jsonrpc: 2.0\n└─ result  <--- empty array\n```\n\nafaik, this is not intended behaviour\n",
  "closed_by": {
    "login": "kumavis",
    "id": 1474978,
    "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kumavis",
    "html_url": "https://github.com/kumavis",
    "followers_url": "https://api.github.com/users/kumavis/followers",
    "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
    "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
    "organizations_url": "https://api.github.com/users/kumavis/orgs",
    "repos_url": "https://api.github.com/users/kumavis/repos",
    "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kumavis/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166076046",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2085#issuecomment-166076046",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085",
    "id": 166076046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjA3NjA0Ng==",
    "user": {
      "login": "kumavis",
      "id": 1474978,
      "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kumavis",
      "html_url": "https://github.com/kumavis",
      "followers_url": "https://api.github.com/users/kumavis/followers",
      "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
      "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
      "organizations_url": "https://api.github.com/users/kumavis/orgs",
      "repos_url": "https://api.github.com/users/kumavis/repos",
      "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kumavis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-20T07:11:28Z",
    "updated_at": "2015-12-20T07:11:28Z",
    "author_association": "MEMBER",
    "body": "this is geth `Geth/v1.4.0-unstable/linux/go1.5.1` on the morden testnet\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166076046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166259735",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2085#issuecomment-166259735",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085",
    "id": 166259735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjI1OTczNQ==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-21T10:13:30Z",
    "updated_at": "2015-12-21T10:20:20Z",
    "author_association": "MEMBER",
    "body": "If you want to skip searching for the first topic and search for the second you need to specify `null` for the first topic. This causes the node to skip the first topic.\n\nIn your example you are asking the node to return logs which have as first topic `0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7`.\n\nTry this instead:\n\n```\n$ curl -d '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getLogs\",\"params\": [{ \"topics\": [null, \"0x0000000000000000000000004b9ab6d832cd623751cda87a2714352d4c3b62a7\"], \"fromBlock\": \"0x29f94\" }], \"id\":1}' -X POST https://testrpc.metamask.io/\n```\n\nI would also recommend specifying a contract address since using only topics can give spurious logs from other contracts which use the same event signature.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166259735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166424167",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2085#issuecomment-166424167",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085",
    "id": 166424167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjQyNDE2Nw==",
    "user": {
      "login": "kumavis",
      "id": 1474978,
      "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kumavis",
      "html_url": "https://github.com/kumavis",
      "followers_url": "https://api.github.com/users/kumavis/followers",
      "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
      "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
      "organizations_url": "https://api.github.com/users/kumavis/orgs",
      "repos_url": "https://api.github.com/users/kumavis/repos",
      "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kumavis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-21T21:13:05Z",
    "updated_at": "2015-12-21T21:13:05Z",
    "author_association": "MEMBER",
    "body": "ok sounds like this is the intending behavior ( not clear from the wiki documentation ).\nI originally thought that the format `[a, [b, c]]` would mean `a and (b or c)` for logs in any position.\nI'll update the wiki.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166424167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166430386",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2085#issuecomment-166430386",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2085",
    "id": 166430386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjQzMDM4Ng==",
    "user": {
      "login": "kumavis",
      "id": 1474978,
      "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kumavis",
      "html_url": "https://github.com/kumavis",
      "followers_url": "https://api.github.com/users/kumavis/followers",
      "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
      "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
      "organizations_url": "https://api.github.com/users/kumavis/orgs",
      "repos_url": "https://api.github.com/users/kumavis/repos",
      "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kumavis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-21T21:31:34Z",
    "updated_at": "2015-12-21T21:31:34Z",
    "author_association": "MEMBER",
    "body": "feel free to expand on this\nhttps://github.com/ethereum/wiki/wiki/JSON-RPC#a-note-on-specifying-topic-filters\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/166430386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

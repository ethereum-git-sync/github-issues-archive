{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17790",
  "id": 365146952,
  "node_id": "MDU6SXNzdWUzNjUxNDY5NTI=",
  "number": 17790,
  "title": "local network 2 miners hang after DAG built",
  "user": {
    "login": "jdevoo",
    "id": 16983,
    "node_id": "MDQ6VXNlcjE2OTgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jdevoo",
    "html_url": "https://github.com/jdevoo",
    "followers_url": "https://api.github.com/users/jdevoo/followers",
    "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
    "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
    "organizations_url": "https://api.github.com/users/jdevoo/orgs",
    "repos_url": "https://api.github.com/users/jdevoo/repos",
    "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jdevoo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-09-29T16:37:30Z",
  "updated_at": "2018-10-05T16:31:36Z",
  "closed_at": "2018-10-05T16:31:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi!\r\nI am running 2 miners and 1 non-mining node using docker. Just can't see the 2 miners work in tandem. Each can generate its DAG. Only seems to work with a single miner at work.\r\n\r\nNodes are configured through static-nodes.json and I can reach each node on port 30303 (tested with nc -zv)\r\n```\r\n[                                                                                                                                                               \r\n\"enode://b27ff3191f16c7de4c9037eaf419e8d3f25c847b551dd15100c5a375f02032ca5275af29cb29c64258e99c450e0d8825010a13d18c0d404b4c95fb8a1ee9e699@172.17.0.3:30303\",    \r\n\"enode://29bd9b51c2b7f031bf5be15d4cb6028300d4d254ace507bfb5ce283121566f3cd3d96ba303c3ce5c857a7daa29522999cbe545ea64f66c639f4ec526ae3f7cb8@172.17.0.4:30303\",    \r\n\"enode://dc014606c0ee47f9ce917c9497b1a1b2819dfdc4f2d574965b6aa38f447b3c5721f6a63e8942f97cef41f656cce2429a698a0690f48d2faa0019a0026c4cbca2@172.17.0.5:30303\"     \r\n]                                                                                                                                                               \r\n```\r\n\r\nGenesis has low (?) difficulty\r\n```\r\n{\r\n  \"config\": {\r\n    \"chainId\"        : 11,\r\n    \"homesteadBlock\" : 0,\r\n    \"eip150Block\"    : 0,\r\n    \"eip150Hash\"     : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"eip155Block\"    : 0,\r\n    \"eip158Block\"    : 0,\r\n    \"byzantiumBlock\" : 0,\r\n    \"ethash\"         : {}\r\n  },\r\n  \"coinbase\"   : \"0x0000000000000000000000000000000000000000\",\r\n  \"difficulty\" : \"0x100\",\r\n  \"extraData\"  : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"gasLimit\"   : \"0xffffffff\",\r\n  \"nonce\"      : \"0x0000000000000042\",\r\n  \"mixhash\"    : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"parentHash\" : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"timestamp\"  : \"0x00\",\r\n  \"alloc\"      : {}\r\n}\r\n```\r\n\r\n#### System information\r\nGeth version: `Geth/peer1/v1.8.16-stable-477eb093/linux-amd64/go1.9.4`\r\nOS & Version: ethereum/go-client:alpine\r\n\r\n#### Expected behaviour\r\nI was expecting to see the blockchain depth increase with 2 miners competing for blocks.\r\n\r\n#### Actual behaviour\r\nWhen I start 2 miners, both mining nodes seem to hang after DAG is built.\r\nI can trigger block creation if I stop one miner.\r\nBelow is peer1 's output (after a restart and killing peer2 to get some 11 blocks created)\r\nIt just hangs there and nothing happens.\r\n\r\n```\r\nWARN [09-29|16:21:19.909] Sanitizing cache to Go's GC limits       provided=1024 updated=660\r\nINFO [09-29|16:21:19.922] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [09-29|16:21:19.948] Starting peer-to-peer node               instance=Geth/peer1/v1.8.16-stable-477eb093/linux-amd64/go1.9.4\r\nINFO [09-29|16:21:19.949] Allocated cache and file handles         database=/root/.ethereum/geth/chaindata cache=495 handles=1024\r\nINFO [09-29|16:21:20.485] Initialised chain configuration          config=\"{ChainID: 11 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: <nil> Engine: ethash}\"\r\nINFO [09-29|16:21:20.485] Disk storage enabled for ethash caches   dir=/root/.ethereum/geth/ethash count=3\r\nINFO [09-29|16:21:20.486] Disk storage enabled for ethash DAGs     dir=/root/.ethash               count=2\r\nINFO [09-29|16:21:20.486] Initialising Ethereum protocol           versions=\"[63 62]\" network=11\r\nINFO [09-29|16:21:20.497] Loaded most recent local header          number=11 hash=f506b2…e1a16f td=1444928 age=1h6m40s\r\nINFO [09-29|16:21:20.498] Loaded most recent local full block      number=11 hash=f506b2…e1a16f td=1444928 age=1h6m40s\r\nINFO [09-29|16:21:20.498] Loaded most recent local fast block      number=11 hash=f506b2…e1a16f td=1444928 age=1h6m40s\r\nINFO [09-29|16:21:20.501] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [09-29|16:21:20.513] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [09-29|16:21:20.513] Starting P2P networking\r\nINFO [09-29|16:21:20.517] Stats daemon started\r\nINFO [09-29|16:21:20.517] RLPx listener up                         self=\"enode://b27ff3191f16c7de4c9037eaf419e8d3f25c847b551dd15100c5a375f02032ca5275af29cb29c64258e99c450e0d8825010a13d18c0d404b4c95fb8a1ee9e699@[::]:30303?discport=0\"\r\nINFO [09-29|16:21:20.530] IPC endpoint opened                      url=/var/run/geth.ipc\r\nINFO [09-29|16:21:20.530] Transaction pool price threshold updated price=1000000000\r\nINFO [09-29|16:21:20.531] Updated mining threads                   threads=1\r\nINFO [09-29|16:21:20.531] Transaction pool price threshold updated price=1000000000\r\nINFO [09-29|16:21:20.531] Etherbase automatically configured       address=0xFDb60C5297aE226dd8B8813cd94995813eEaDd22\r\nINFO [09-29|16:21:20.531] Commit new mining work                   number=12 sealhash=aeaead…9c6d63 uncles=0 txs=0 gas=0 fees=0 elapsed=176.2µs\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\nShowing the commands I use from a batch file (including the netstats container)\r\nEach container has its separate folder mapped into its container.\r\n```\r\ndocker run -d --rm -v /c/Users/P33/playground/p2p/shared/peer1:/root --name peer1 --link netstats ethereum/client-go:alpine --nodiscover --networkid 11 --mine --minerthreads 1 --ipcpath /var/run/geth.ipc --identity peer1 --syncmode \"full\" --ethstats \"peer1:password@ws://netstats:3000\"\r\ndocker run -d --rm -v /c/Users/P33/playground/p2p/shared/peer2:/root --name peer2 --link netstats ethereum/client-go:alpine --nodiscover --networkid 11 --mine --minerthreads 1 --ipcpath /var/run/geth.ipc --identity peer2 --syncmode \"full\" --ethstats \"peer2:password@ws://netstats:3000\"\r\ndocker run -d --rm -v /c/Users/P33/playground/p2p/shared/peer3:/root --name peer3 --link netstats -p 8545:8545 ethereum/client-go:alpine --nodiscover --networkid 11 --rpc --rpcapi eth,net,web3,personal --rpcaddr \"0.0.0.0\" --rpccorsdomain \"*\" --ipcpath /var/run/geth.ipc --identity peer3 --syncmode \"full\" --ethstats \"peer3:password@ws://netstats:3000\"\r\n```\r\n\r\nAny thoughts? TIA!",
  "closed_by": {
    "login": "jdevoo",
    "id": 16983,
    "node_id": "MDQ6VXNlcjE2OTgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jdevoo",
    "html_url": "https://github.com/jdevoo",
    "followers_url": "https://api.github.com/users/jdevoo/followers",
    "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
    "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
    "organizations_url": "https://api.github.com/users/jdevoo/orgs",
    "repos_url": "https://api.github.com/users/jdevoo/repos",
    "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jdevoo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/425932041",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17790#issuecomment-425932041",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790",
    "id": 425932041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTkzMjA0MQ==",
    "user": {
      "login": "jdevoo",
      "id": 16983,
      "node_id": "MDQ6VXNlcjE2OTgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdevoo",
      "html_url": "https://github.com/jdevoo",
      "followers_url": "https://api.github.com/users/jdevoo/followers",
      "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
      "organizations_url": "https://api.github.com/users/jdevoo/orgs",
      "repos_url": "https://api.github.com/users/jdevoo/repos",
      "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdevoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-01T14:38:38Z",
    "updated_at": "2018-10-01T14:38:38Z",
    "author_association": "NONE",
    "body": "tried with --verbosity 5 and noticed odd stuff probably due to my docker setup\r\n```\r\nTRACE[10-01|14:36:50.616] Received message from stats server       msg=\"map[emit:[node-pong map[clientTime:2018-10-01 14:36:50.6146674 +0000 UTC m=+10.408984701 serverTime:1.538404610615e+12]]]\"\r\nTRACE[10-01|14:36:50.617] Sending measured latency to ethstats     latency=1\r\nTRACE[10-01|14:36:50.618] Sending new block to ethstats            number=11 hash=f506b2…e1a16f\r\nTRACE[10-01|14:36:50.618] Sending pending transactions to ethstats count=0\r\nTRACE[10-01|14:36:50.626] Sending node details to ethstats\r\nDEBUG[10-01|14:37:00.572] Recalculated downloader QoS values       rtt=20s confidence=0.750 ttl=1m0s\r\nTRACE[10-01|14:37:05.631] Received message from stats server       msg=\"map[emit:[node-pong map[clientTime:2018-10-01 14:37:05.6290633 +0000 UTC m=+25.423351001 serverTime:1.538404625629e+12]]]\"\r\nTRACE[10-01|14:37:05.631] Sending measured latency to ethstats     latency=1\r\nTRACE[10-01|14:37:05.632] Sending new block to ethstats            number=11 hash=f506b2…e1a16f\r\nTRACE[10-01|14:37:05.632] Sending pending transactions to ethstats count=0\r\nTRACE[10-01|14:37:05.632] Sending node details to ethstats\r\nTRACE[10-01|14:37:05.633] Received message from stats server       msg=\"map[emit:[history map[max:0 min:-49 list:[0]]]]\"\r\nTRACE[10-01|14:37:05.637] Sending historical blocks to ethstats    first=0 last=0\r\nTRACE[10-01|14:37:10.577] Dial task done                           task=\"wait for dial hist expire (27.9052955s)\"\r\nTRACE[10-01|14:37:10.577] New dial task                            task=\"staticdial b27ff3191f16c7de 172.17.0.3:30303\"\r\nTRACE[10-01|14:37:10.577] Accepted connection                      addr=172.17.0.3:34116\r\nTRACE[10-01|14:37:10.583] Rejected peer before protocol handshake  id=b27ff3191f16c7de addr=172.17.0.3:34116 conn=inbound    err=\"connected to self\"\r\nTRACE[10-01|14:37:10.584] Setting up connection failed             id=b27ff3191f16c7de err=\"connected to self\"\r\nTRACE[10-01|14:37:10.584] Rejected peer before protocol handshake  id=b27ff3191f16c7de addr=172.17.0.3:30303 conn=staticdial err=\"connected to self\"\r\nTRACE[10-01|14:37:10.584] Setting up connection failed             id=b27ff3191f16c7de err=\"connected to self\"\r\nTRACE[10-01|14:37:10.584] Dial error                               task=\"staticdial b27ff3191f16c7de 172.17.0.3:30303\" err=\"connected to self\"\r\nTRACE[10-01|14:37:10.584] Dial task done                           task=\"staticdial b27ff3191f16c7de 172.17.0.3:30303\"\r\nTRACE[10-01|14:37:10.584] New dial task                            task=\"wait for dial hist expire (1.0455922s)\"\r\nTRACE[10-01|14:37:11.630] Dial task done                           task=\"wait for dial hist expire (1.0455922s)\"\r\nTRACE[10-01|14:37:11.630] New dial task                            task=\"wait for dial hist expire (1.0399844s)\"\r\nTRACE[10-01|14:37:12.671] Dial task done                           task=\"wait for dial hist expire (1.0399844s)\"\r\nTRACE[10-01|14:37:12.672] New dial task                            task=\"wait for dial hist expire (27.9123105s)\"\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/425932041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426679254",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17790#issuecomment-426679254",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790",
    "id": 426679254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjY3OTI1NA==",
    "user": {
      "login": "jdevoo",
      "id": 16983,
      "node_id": "MDQ6VXNlcjE2OTgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdevoo",
      "html_url": "https://github.com/jdevoo",
      "followers_url": "https://api.github.com/users/jdevoo/followers",
      "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
      "organizations_url": "https://api.github.com/users/jdevoo/orgs",
      "repos_url": "https://api.github.com/users/jdevoo/repos",
      "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdevoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-03T15:25:11Z",
    "updated_at": "2018-10-04T08:38:25Z",
    "author_association": "NONE",
    "body": "Still cannot find a resolution to this; I have disabled nat and turned verbosity to 9 - here's the [gist](https://gist.github.com/jdevoo/c767f62bb6a7a357bfc0708979d586a0)\r\nThe two peers seem deadlocked and not able to move past block 0.\r\n\r\nAlso tried w/o success: non-mining peer connected with 2 miners but no link between miners in static-nodes.json\r\n\r\nWhen adding a 60s delay between the launch of miner1 and miner2, I observe the DAG process completes with miner1 in the lead; start of mining; then both hang.\r\nI then stop and re-launch with the same 60s delay. First miner stays in the lead then reaches a \"Mining too far in the future\" (at about 80 blocks) and again both miners hang there.\r\n\r\nI was hoping to see both miners compete and randomly \"win\" the next block as they are sharing identical resources on the same laptop...\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426679254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426939013",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17790#issuecomment-426939013",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790",
    "id": 426939013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjkzOTAxMw==",
    "user": {
      "login": "jdevoo",
      "id": 16983,
      "node_id": "MDQ6VXNlcjE2OTgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdevoo",
      "html_url": "https://github.com/jdevoo",
      "followers_url": "https://api.github.com/users/jdevoo/followers",
      "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
      "organizations_url": "https://api.github.com/users/jdevoo/orgs",
      "repos_url": "https://api.github.com/users/jdevoo/repos",
      "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdevoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-04T08:55:24Z",
    "updated_at": "2018-10-04T08:55:24Z",
    "author_association": "NONE",
    "body": "I launched the miners with the option --vmodule=downloader=6\r\nBelow are log extracts...\r\n\r\nminer 1\r\n```\r\nDEBUG[10-04|08:52:15.687] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nTRACE[10-04|08:52:20.815] Received message from stats server       msg=\"map[emit:[node-pong map[clientTime:2018-10-04 08:52:20.815058 +0000 UTC m=+25.427744601 serverTime:1.538643140815e+12]]]\"\r\nTRACE[10-04|08:52:20.824] Sending measured latency to ethstats     latency=4\r\nTRACE[10-04|08:52:20.824] Sending new block to ethstats            number=79 hash=5c10b5…619f89\r\nTRACE[10-04|08:52:20.825] Sending pending transactions to ethstats count=0\r\nTRACE[10-04|08:52:20.827] Sending node details to ethstats\r\nTRACE[10-04|08:52:20.859] Received message from stats server       msg=\"map[emit:[history map[max:29 min:-20 list:[0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29]]]]\"\r\nTRACE[10-04|08:52:20.871] Sending historical blocks to ethstats    first=29 last=0\r\nTRACE[10-04|08:52:26.738] Dial task done                           task=\"wait for dial hist expire (27.9196672s)\"\r\nTRACE[10-04|08:52:26.738] New dial task                            task=\"wait for dial hist expire (2.0797173s)\"\r\nTRACE[10-04|08:52:28.818] Dial task done                           task=\"wait for dial hist expire (2.0797173s)\"\r\nTRACE[10-04|08:52:28.818] New dial task                            task=\"staticdial c8cfa47d9f39f039 172.17.0.5:30303\"\r\nTRACE[10-04|08:52:28.832] Rejected peer                            id=c8cfa47d9f39f039 addr=172.17.0.5:30303 conn=staticdial err=\"useless peer\"\r\nTRACE[10-04|08:52:28.833] Setting up connection failed             id=c8cfa47d9f39f039 err=\"useless peer\"\r\nTRACE[10-04|08:52:28.833] Dial error                               task=\"staticdial c8cfa47d9f39f039 172.17.0.5:30303\" err=\"useless peer\"\r\nTRACE[10-04|08:52:28.833] Dial task done                           task=\"staticdial c8cfa47d9f39f039 172.17.0.5:30303\"\r\nTRACE[10-04|08:52:28.833] New dial task                            task=\"wait for dial hist expire (29.9999947s)\"\r\nTRACE[10-04|08:52:29.957] Accepted connection                      addr=172.17.0.5:50490\r\nTRACE[10-04|08:52:29.962] Rejected peer                            id=c8cfa47d9f39f039 addr=172.17.0.5:50490 conn=inbound    err=\"useless peer\"\r\nTRACE[10-04|08:52:29.962] Setting up connection failed             id=c8cfa47d9f39f039 err=\"useless peer\"\r\n```\r\nminer 2\r\n```\r\nTRACE[10-04|08:51:58.418] Dial error                               task=\"staticdial c8cfa47d9f39f039 172.17.0.5:30303\" err=\"dial tcp 172.17.0.5:30303: getsockopt: connection refused\"\r\nTRACE[10-04|08:51:58.418] Starting protocol eth/63                 id=42ab45e023110bc9 conn=staticdial\r\nDEBUG[10-04|08:51:58.424] Can't resolve node                       id=c8cfa47d9f39f039 err=\"discovery is disabled\"\r\nTRACE[10-04|08:51:58.424] Dial task done                           task=\"staticdial c8cfa47d9f39f039 172.17.0.5:30303\"\r\nTRACE[10-04|08:51:58.424] New dial task                            task=\"wait for dial hist expire (29.9981646s)\"\r\nDEBUG[10-04|08:51:58.424] Ethereum peer connected                  id=42ab45e023110bc9 conn=staticdial name=Geth/peer1/v1.8.16-stable-477eb093/linux-amd64/go1.9.4\r\nTRACE[10-04|08:51:58.426] Registering sync peer                    peer=42ab45e023110bc9\r\nWARN [10-04|08:51:58.445] Stats server unreachable                 err=\"websocket.Dial ws://netstats:3000/api: dial tcp 172.17.0.2:3000: getsockopt: connection refused\"\r\nDEBUG[10-04|08:51:58.782] Loaded old ethash dataset from disk      epoch=0\r\nTRACE[10-04|08:51:58.783] Started ethash search for new nonces     miner=0 seed=3799901220394739337\r\nDEBUG[10-04|08:51:58.885] Loaded old ethash dataset from disk      epoch=1\r\nTRACE[10-04|08:51:59.938] Accepted connection                      addr=172.17.0.5:54566\r\nTRACE[10-04|08:51:59.947] Rejected peer                            id=c8cfa47d9f39f039 addr=172.17.0.5:54566 conn=inbound    err=\"useless peer\"\r\nTRACE[10-04|08:51:59.947] Setting up connection failed             id=c8cfa47d9f39f039 err=\"useless peer\"\r\nTRACE[10-04|08:52:08.520] Received message from stats server       msg=\"map[emit:[node-pong map[clientTime:2018-10-04 08:52:08.5176227 +0000 UTC m=+11.613981801 serverTime:1.53864312852e+12]]]\"\r\nTRACE[10-04|08:52:08.521] Sending measured latency to ethstats     latency=1\r\nTRACE[10-04|08:52:08.527] Sending new block to ethstats            number=79 hash=5c10b5…619f89\r\nTRACE[10-04|08:52:08.532] Sending pending transactions to ethstats count=0\r\nTRACE[10-04|08:52:08.571] Sending node details to ethstats\r\nDEBUG[10-04|08:52:18.368] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426939013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427280681",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17790#issuecomment-427280681",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17790",
    "id": 427280681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI4MDY4MQ==",
    "user": {
      "login": "jdevoo",
      "id": 16983,
      "node_id": "MDQ6VXNlcjE2OTgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16983?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdevoo",
      "html_url": "https://github.com/jdevoo",
      "followers_url": "https://api.github.com/users/jdevoo/followers",
      "following_url": "https://api.github.com/users/jdevoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdevoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdevoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdevoo/subscriptions",
      "organizations_url": "https://api.github.com/users/jdevoo/orgs",
      "repos_url": "https://api.github.com/users/jdevoo/repos",
      "events_url": "https://api.github.com/users/jdevoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdevoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T08:04:47Z",
    "updated_at": "2018-10-05T08:04:47Z",
    "author_association": "NONE",
    "body": "I managed to get this small network of 2 miners and one peer going a little longer by doing the following:\r\n\r\n- start first miner and pause for 60s\r\n- edit static-nodes.json on first miner to point to other miner and peer\r\n- second miner only points to peer and leaves first miner alone\r\n- peer points to both miners\r\n\r\nI had previously each member pointing to the other two (NOK).\r\nHaving miner 2 point to miner 1 (even after delay) would eventually halt the block generation after 20-30 blocks on this laptop.\r\n\r\n\r\nWith this setup I can reach 190+ blocks... still not sure why...\r\n\r\n\r\nfetcher=6,downloader=6 logs below\r\n\r\nminer 1\r\n```\r\nDEBUG[10-05|08:00:20.959] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:00:40.959] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:01:00.960] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:01:20.962] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:01:40.963] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:02:00.964] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:02:20.965] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:02:40.965] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:03:00.966] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|08:03:20.966] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\n```\r\n\r\nminer 2\r\n```\r\nDEBUG[10-05|07:56:36.651] Queued propagated block                  peer=36d0dbecc9bbf66d number=192 hash=4fda3f…90ff75 queued=1\r\nDEBUG[10-05|07:56:36.651] Importing propagated block               peer=36d0dbecc9bbf66d number=192 hash=4fda3f…90ff75\r\nDEBUG[10-05|07:56:36.758] Queued propagated block                  peer=36d0dbecc9bbf66d number=193 hash=3c3c32…c9e9b3 queued=1\r\nDEBUG[10-05|07:56:36.758] Importing propagated block               peer=36d0dbecc9bbf66d number=193 hash=3c3c32…c9e9b3\r\nDEBUG[10-05|07:56:44.029] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|07:57:04.029] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|07:57:24.030] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|07:57:44.030] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|07:58:04.030] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\nDEBUG[10-05|07:58:24.031] Recalculated downloader QoS values       rtt=20s confidence=1.000 ttl=1m0s\r\n```\r\n\r\npeer 3 (not mining)\r\n```\r\nDEBUG[10-05|07:56:33.362] Inserted new block                       number=189 hash=b0209e…4edc82 uncles=0 txs=0 gas=0 elapsed=140.556ms\r\nINFO [10-05|07:56:33.363] Imported new chain segment               blocks=1  txs=0 mgas=0.000 elapsed=143.084ms mgasps=0.000 number=189 hash=b0209e…4edc82 cache=27.26kB\r\nDEBUG[10-05|07:56:33.371] Reinjecting stale transactions           count=0\r\nDEBUG[10-05|07:56:35.048] Inserted new block                       number=190 hash=aecf0c…285ae1 uncles=0 txs=0 gas=0 elapsed=54.696ms\r\nINFO [10-05|07:56:35.048] Imported new chain segment               blocks=1  txs=0 mgas=0.000 elapsed=54.858ms  mgasps=0.000 number=190 hash=aecf0c…285ae1 cache=27.26kB\r\nDEBUG[10-05|07:56:35.048] Reinjecting stale transactions           count=0\r\nDEBUG[10-05|07:56:36.434] Inserted new block                       number=191 hash=f33bf0…b82196 uncles=0 txs=0 gas=0 elapsed=54.571ms\r\nINFO [10-05|07:56:36.434] Imported new chain segment               blocks=1  txs=0 mgas=0.000 elapsed=68.644ms  mgasps=0.000 number=191 hash=f33bf0…b82196 cache=27.26kB\r\nDEBUG[10-05|07:56:36.435] Reinjecting stale transactions           count=0\r\nDEBUG[10-05|07:56:36.703] Inserted new block                       number=192 hash=4fda3f…90ff75 uncles=0 txs=0 gas=0 elapsed=12.576ms\r\nINFO [10-05|07:56:36.703] Imported new chain segment               blocks=1  txs=0 mgas=0.000 elapsed=12.688ms  mgasps=0.000 number=192 hash=4fda3f…90ff75 cache=27.26kB\r\nDEBUG[10-05|07:56:36.703] Reinjecting stale transactions           count=0\r\nDEBUG[10-05|07:56:36.802] Inserted new block                       number=193 hash=3c3c32…c9e9b3 uncles=0 txs=0 gas=0 elapsed=15.051ms\r\nINFO [10-05|07:56:36.802] Imported new chain segment               blocks=1  txs=0 mgas=0.000 elapsed=16.326ms  mgasps=0.000 number=193 hash=3c3c32…c9e9b3 cache=27.26kB\r\nDEBUG[10-05|07:56:36.802] Reinjecting stale transactions           count=0\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427280681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

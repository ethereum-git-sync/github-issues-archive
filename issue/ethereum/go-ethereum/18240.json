{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18240",
  "id": 387157711,
  "node_id": "MDU6SXNzdWUzODcxNTc3MTE=",
  "number": 18240,
  "title": "geth v1.8.18 crashes due to concurrent map access",
  "user": {
    "login": "vjoke",
    "id": 7498344,
    "node_id": "MDQ6VXNlcjc0OTgzNDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7498344?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vjoke",
    "html_url": "https://github.com/vjoke",
    "followers_url": "https://api.github.com/users/vjoke/followers",
    "following_url": "https://api.github.com/users/vjoke/following{/other_user}",
    "gists_url": "https://api.github.com/users/vjoke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vjoke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vjoke/subscriptions",
    "organizations_url": "https://api.github.com/users/vjoke/orgs",
    "repos_url": "https://api.github.com/users/vjoke/repos",
    "events_url": "https://api.github.com/users/vjoke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vjoke/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-12-04T07:42:56Z",
  "updated_at": "2019-01-13T14:31:27Z",
  "closed_at": "2019-01-13T14:31:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nplease note that this is an issue tracker reserved for bug reports and feature requests.\r\n\r\nFor general questions please use the gitter channel or the Ethereum stack exchange at https://ethereum.stackexchange.com.\r\n\r\n#### System information\r\n\r\nGeth version: `geth version`\r\nOS & Version: Windows/Linux/OSX\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nRun normally\r\n\r\n#### Actual behaviour\r\n\r\nDo nothing, it just crash\r\n\r\n#### Steps to reproduce the behaviour\r\nRun a single node to mine blocks for testing\r\n\r\n#### Backtrace\r\n\r\n````\r\nfatal error: concurrent map iteration and map write\r\n\r\ngoroutine 137131 [running]:\r\nruntime.throw(0xfc6319, 0x26)\r\n\t/usr/local/go/src/runtime/panic.go:605 +0x95 fp=0xc43a0c59a8 sp=0xc43a0c5988 pc=0x4418a5\r\nruntime.mapiternext(0xc43a0c5db8)\r\n\t/usr/local/go/src/runtime/hashmap.go:778 +0x6f1 fp=0xc43a0c5a40 sp=0xc43a0c59a8 pc=0x41f731\r\nruntime.mapiterinit(0xe5ffe0, 0xc421201a40, 0xc43a0c5db8)\r\n\t/usr/local/go/src/runtime/hashmap.go:768 +0x270 fp=0xc43a0c5aa8 sp=0xc43a0c5a40 pc=0x41ede0\r\ngithub.com/ethereum/go-ethereum/core/state.(*StateDB).Copy(0xc42026e1c0, 0x0)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/core/state/statedb.go:486 +0x5b1 fp=0xc43a0c5e88 sp=0xc43a0c5aa8 pc=0x7201e1\r\ngithub.com/ethereum/go-ethereum/miner.(*worker).pending(0xc4200a94a0, 0x0, 0x0)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/miner/worker.go:188 +0x125 fp=0xc43a0c5ec0 sp=0xc43a0c5e88 pc=0xa8d545\r\ngithub.com/ethereum/go-ethereum/miner.(*Miner).Pending(0xc4201f2ff0, 0xc43a0c5f38, 0x440179)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/miner/miner.go:167 +0x2f fp=0xc43a0c5ee8 sp=0xc43a0c5ec0 pc=0xa8a73f\r\ngithub.com/ethereum/go-ethereum/eth.(*EthAPIBackend).StateAndHeaderByNumber(0xc4203213c0, 0x18826c0, 0xc4384f8200, 0xfffffffffffffffe, 0x1bd4540, 0x0, 0x0, 0x41a417f7e8db497b)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/eth/api_backend.go:88 +0x12e fp=0xc43a0c5f48 sp=0xc43a0c5ee8 pc=0xadda0e\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).doCall(0xc420321460, 0x18826c0, 0xc4384f8200, 0x0, 0x0, 0x0, 0xc439380b00, 0x0, 0x0, 0x0, ...)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:617 +0x163 fp=0xc43a0c8a80 sp=0xc43a0c5f48 pc=0xa7dcd3\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).Call(0xc420321460, 0x18826c0, 0xc4384f8200, 0x0, 0x0, 0x0, 0xc439380b00, 0x0, 0x0, 0x0, ...)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:679 +0xcc fp=0xc43a0cb390 sp=0xc43a0c8a80 pc=0xa7e5bc\r\nruntime.call256(0xc4203d5020, 0xc42000f7a0, 0xc4384fc8f0, 0xa0000000c8)\r\n\t/usr/local/go/src/runtime/asm_amd64.s:512 +0x55 fp=0xc43a0cb4a0 sp=0xc43a0cb390 pc=0x470815\r\nreflect.Value.call(0xc4200a4980, 0xc42000f7a0, 0x13, 0xfa2a19, 0x4, 0xc42038a720, 0x4, 0x4, 0x0, 0xc42038a720, ...)\r\n\t/usr/local/go/src/reflect/value.go:434 +0x905 fp=0xc43a0cb778 sp=0xc43a0cb4a0 pc=0x4d1165\r\nreflect.Value.Call(0xc4200a4980, 0xc42000f7a0, 0x13, 0xc42038a720, 0x4, 0x4, 0x2, 0x2, 0x2)\r\n\t/usr/local/go/src/reflect/value.go:302 +0xa4 fp=0xc43a0cb7e0 sp=0xc43a0cb778 pc=0x4d0744\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).handle(0xc4201fd4a0, 0x18826c0, 0xc4384f8200, 0x1887500, 0xc4202c80a0, 0xc42038a360, 0xc4202c8110, 0x0, 0xe58240)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:312 +0x6ce fp=0xc43a0cb988 sp=0xc43a0cb7e0 pc=0x83a33e\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).exec(0xc4201fd4a0, 0x18826c0, 0xc4384f8200, 0x1887500, 0xc4202c80a0, 0xc42038a360)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:333 +0x1ba fp=0xc43a0cb9f8 sp=0xc43a0cb988 pc=0x83af3a\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).serveRequest(0xc4201fd4a0, 0x1882780, 0xc420562b70, 0x1887500, 0xc4202c80a0, 0xfab701, 0x1, 0x0, 0x0)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:195 +0x3b5 fp=0xc43a0cbb48 sp=0xc43a0cb9f8 pc=0x838ea5\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).ServeSingleRequest(0xc4201fd4a0, 0x1882780, 0xc420562b70, 0x1887500, 0xc4202c80a0, 0x1)\r\n\t/home/wxx/go-ethereum-1.8.11/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:226 +0x65 fp=0xc43a0cbba0 sp=0xc43a0cbb48 pc=0x8397c5\r\n````\r\n",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/444033194",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18240#issuecomment-444033194",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240",
    "id": 444033194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDAzMzE5NA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-04T09:34:45Z",
    "updated_at": "2018-12-04T09:34:45Z",
    "author_association": "MEMBER",
    "body": "The stack trace indicates that it is in fact `go-ethereum-1.8.11`, not `1.8.18`. Please verify",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/444033194/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/453834528",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18240#issuecomment-453834528",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18240",
    "id": 453834528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzgzNDUyOA==",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-01-13T14:31:26Z",
    "updated_at": "2019-01-13T14:31:26Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/453834528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

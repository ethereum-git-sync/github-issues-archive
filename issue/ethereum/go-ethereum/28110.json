{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28110",
  "id": 1894680833,
  "node_id": "I_kwDOAOvK985w7okB",
  "number": 28110,
  "title": "Upgrading chain index stuck on bloombits error=\"block #16142464 [9efc5a81..] not found\"",
  "user": {
    "login": "SjonHortensius",
    "id": 1684987,
    "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SjonHortensius",
    "html_url": "https://github.com/SjonHortensius",
    "followers_url": "https://api.github.com/users/SjonHortensius/followers",
    "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
    "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
    "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
    "repos_url": "https://api.github.com/users/SjonHortensius/repos",
    "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-09-13T14:38:07Z",
  "updated_at": "2023-09-14T12:11:52Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.13.0-stable`\r\nCL client & version: lighthouse@4.2.0\r\nOS & Version: archLinux\r\n\r\n#### Expected behaviour\r\nUpgrading chain index type=bloombits should complete\r\n\r\n#### Actual behaviour\r\nMy `Upgrading chain index` has been stuck for 7h on the same missing block error\r\n\r\n#### Steps to reproduce the behaviour\r\nNot sure what the cause is, this happened during a normal `removedb` and resync. I have attempted a restart after the first few occurrences of this error but that didn't fix anything and the same error keeps getting repeated\r\n\r\n```\r\nUpgrading chain index                    type=bloombits percentage=88\r\nSyncing: state download in progress      synced=12.03% state=28.13GiB  accounts=26,568,059@5.36GiB   slots=105,293,132@21.87GiB codes=161,303@930.97MiB eta=2h19m31.220s\r\nSyncing: chain download in progress      synced=99.92% chain=554.39GiB headers=18,126,093@8.26GiB bodies=18,111,605@388.17GiB receipts=18,111,605@157.96GiB eta=3m38.922s\r\nForkchoice requested sync to new head    number=18,126,094 hash=ce02d4..3cece2 finalized=18,126,009\r\nUpgrading chain index                    type=bloombits percentage=89\r\nSyncing: state download in progress      synced=12.08% state=28.32GiB  accounts=26,675,845@5.38GiB   slots=106,088,259@22.03GiB codes=161,657@933.16MiB eta=2h19m47.563s\r\nSyncing: chain download in progress      synced=99.92% chain=554.39GiB headers=18,126,094@8.26GiB bodies=18,112,375@388.17GiB receipts=18,112,375@157.96GiB eta=3m27.277s\r\nUpgrading chain index                    type=bloombits percentage=89\r\nForkchoice requested sync to new head    number=18,126,095 hash=947f13..9cd509 finalized=18,126,009\r\nSyncing: state download in progress      synced=12.17% state=28.48GiB  accounts=26,870,389@5.42GiB   slots=106,642,678@22.14GiB codes=162,732@940.05MiB eta=2h19m23.555s\r\nSection processing failed                type=bloombits error=\"block #16142464 [9efc5a81..] not found\"\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718787378",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1718787378",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1718787378,
    "node_id": "IC_kwDOAOvK985mcp0y",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T05:30:21Z",
    "updated_at": "2023-09-14T05:30:21Z",
    "author_association": "MEMBER",
    "body": "The bloom indexer is not supposed to run before the node is synced up. Also the missing block `16142464` should be present the log tells `Syncing: chain download in progress      synced=99.92% chain=554.39GiB headers=18,126,094@8.26GiB bodies=18,112,375@388.17GiB receipts=18,112,375@157.96GiB eta=3m27.277s`\r\n\r\nDid you keep the ancient folder when run `removedb`?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718787378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718911792",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1718911792",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1718911792,
    "node_id": "IC_kwDOAOvK985mdIMw",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T07:29:13Z",
    "updated_at": "2023-09-14T07:29:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just noticed what might have triggered it, the process was restarted accidentally while syncing - this triggered the bloom indexer. \r\n\r\nThe ancient folder is indeed still present and the node was fully synced when I switched to pbss",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718911792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718974267",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1718974267",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1718974267,
    "node_id": "IC_kwDOAOvK985mdXc7",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T08:13:49Z",
    "updated_at": "2023-09-14T08:13:49Z",
    "author_association": "MEMBER",
    "body": "Did you remove the key-value store(except the ancient) when you switch to pbss?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718974267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718982684",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1718982684",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1718982684,
    "node_id": "IC_kwDOAOvK985mdZgc",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T08:19:26Z",
    "updated_at": "2023-09-14T08:19:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "I manually removed the files in the `chaindata` directory (except `ancient/`) (due to permission challenges invoking the `geth` binary as correct user is challenging)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1718982684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1719318358",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1719318358",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1719318358,
    "node_id": "IC_kwDOAOvK985merdW",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T12:03:01Z",
    "updated_at": "2023-09-14T12:03:01Z",
    "author_association": "MEMBER",
    "body": "Can you please share the your command to launch Geth? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1719318358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1719329469",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28110#issuecomment-1719329469",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28110",
    "id": 1719329469,
    "node_id": "IC_kwDOAOvK985meuK9",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T12:10:34Z",
    "updated_at": "2023-09-14T12:11:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "sure, that's\r\n```\r\n/usr/bin/geth --authrpc.addr 0.0.0.0 --authrpc.port $RPC_PORT --authrpc.vhosts '*' \\\r\n              --datadir $STATE_DIRECTORY --ipcdisable --state.scheme=path \\\r\n              --http --http.addr 0.0.0.0 --http.vhosts '*' --http.port $HTTP_PORT \\\r\n              --maxpeers 50 --port $PORT\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1719329469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19392",
  "id": 429217291,
  "node_id": "MDU6SXNzdWU0MjkyMTcyOTE=",
  "number": 19392,
  "title": "Print details when sendTransaction fails with insufficient funds",
  "user": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    },
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    },
    {
      "id": 1269313112,
      "node_id": "MDU6TGFiZWwxMjY5MzEzMTEy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:backlog",
      "name": "status:backlog",
      "color": "29ceb3",
      "default": false,
      "description": ""
    },
    {
      "id": 1303963528,
      "node_id": "MDU6TGFiZWwxMzAzOTYzNTI4",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:error-message",
      "name": "area:error-message",
      "color": "55d168",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-04-04T11:05:48Z",
  "updated_at": "2022-06-15T15:54:36Z",
  "closed_at": "2021-10-25T20:16:42Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Give a more detailed error message when sender doesn't have enough funds to send a transaction.\r\n\r\n#### System information\r\n\r\nGeth version: `1.8.22`\r\nOS & Version: Windows/Linux/OSX\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nPrint \r\n```\r\nError: insufficient funds: gas * price + value > balance\r\n22000 * 0.0000032 + 3300 = 3300.0704 > 0\r\n```\r\n\r\n#### Actual behaviour\r\nIt prints only `Error: insufficient funds for gas * price + value`\r\n\r\n#### Steps to reproduce the behaviour\r\nExecute this script with `geth js /path/to/the-script.js`\r\n\r\n```javascript\r\npassword = 'whatever you use'\r\nalice = web3.personal.newAccount(password)\r\nbob = web3.personal.newAccount(password)\r\nweb3.personal.unlockAccount(alice, password, 60)\r\ntx = {from: alice, to: bob, value: 1000000000000000000, gas: 21000, gasPrice: 10000000000 }\r\nweb3.eth.sendTransaction(tx)\r\n```",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479988630",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19392#issuecomment-479988630",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392",
    "id": 479988630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTk4ODYzMA==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-04T17:23:14Z",
    "updated_at": "2019-04-04T17:23:14Z",
    "author_association": "MEMBER",
    "body": "For consideration - this seems like a trivial change but we should be careful with this - people currently rely on these error messages (see https://github.com/search?p=2&q=%22insufficient+funds+for+gas+%2A+price+%2B+value%22&type=Code) \r\nSo a change like this might break things.\r\nI think before doing this we should really have defined error codes for cases like this so code can react on different error without relying on the message text.\r\nthere was a proposal in the wiki: https://github.com/ethereum/wiki/wiki/JSON-RPC-Error-Codes-Improvement-Proposal\r\nPerhaps this should be raised again on magicians and migrated to an EIP. This would also have other advantages e.g. to bring uniformity across client. The error message parity is throwing for the same problem:\r\n\r\n`Insufficient funds. The account you tried to send transaction from does not have enough funds. Required 2000000000000000 and got: 0.`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479988630/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/481167609",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19392#issuecomment-481167609",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392",
    "id": 481167609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTE2NzYwOQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T09:05:06Z",
    "updated_at": "2019-04-09T09:05:06Z",
    "author_association": "MEMBER",
    "body": "Look, even Mist has it hardcoded: https://github.com/ethereum/mist/blob/1d9519a55ab3de471a777f01e218f595b8d73f3e/interface/actions.js#L265 \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/481167609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/751247339",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19392#issuecomment-751247339",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19392",
    "id": 751247339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MTI0NzMzOQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-12-25T13:10:12Z",
    "updated_at": "2020-12-25T13:10:12Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/751247339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

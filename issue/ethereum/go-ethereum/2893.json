{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2893",
  "id": 169782054,
  "node_id": "MDU6SXNzdWUxNjk3ODIwNTQ=",
  "number": 2893,
  "title": "geth js exits after startup on unstable",
  "user": {
    "login": "kevinday",
    "id": 1254665,
    "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinday",
    "html_url": "https://github.com/kevinday",
    "followers_url": "https://api.github.com/users/kevinday/followers",
    "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinday/orgs",
    "repos_url": "https://api.github.com/users/kevinday/repos",
    "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinday/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/26",
    "html_url": "https://github.com/ethereum/go-ethereum/milestone/26",
    "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/26/labels",
    "id": 1593424,
    "node_id": "MDk6TWlsZXN0b25lMTU5MzQyNA==",
    "number": 26,
    "title": "1.5.0",
    "description": "",
    "creator": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 74,
    "state": "closed",
    "created_at": "2016-02-19T15:55:33Z",
    "updated_at": "2019-02-19T11:15:37Z",
    "due_on": null,
    "closed_at": "2016-11-15T21:55:24Z"
  },
  "comments": 9,
  "created_at": "2016-08-07T06:06:38Z",
  "updated_at": "2016-08-17T23:35:47Z",
  "closed_at": "2016-08-17T23:35:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\nGeth\nVersion: 1.5.0-unstable\nProtocol Versions: [63 62]\nNetwork Id: 1\nGo Version: go1.5.1\nOS: linux\nGOPATH=\nGOROOT=/usr/lib/go\n```\n\nWhen running geth 1.5.0-unstable with the js option, it starts up then shuts down immediately. I have a `test.js` file that just contains `console.log(\"test\");`\n\nOn a clean VM, I'm doing\n\n```\nsudo apt-get -y install software-properties-common\nsudo add-apt-repository -y ppa:ethereum/ethereum\nsudo add-apt-repository -y ppa:ethereum/ethereum-dev\nsudo apt-get update\nsudo apt-get -y install ethereum\ngeth js test.js\n```\n\nand I see:\n\n```\nI0807 05:57:13.073414 ethdb/database.go:82] Allotted 128MB cache and 1024 file handles to /home/auguruser/.ethereum/chaindata\nI0807 05:57:13.424525 cmd/utils/flags.go:849] ------------------------------------------------------------------------------------------------\nI0807 05:57:13.424653 cmd/utils/flags.go:850] Geth is currently configured to SUPPORT the DAO hard-fork!\nI0807 05:57:13.424696 cmd/utils/flags.go:851] You can change your choice prior to block #1920000 with --support-dao-fork or --oppose-dao-fork.\nI0807 05:57:13.424750 cmd/utils/flags.go:852] After the hard-fork block #1920000 passed, changing chains requires a resync from scratch!\nI0807 05:57:13.424792 cmd/utils/flags.go:853] ------------------------------------------------------------------------------------------------\nI0807 05:57:13.424932 ethdb/database.go:169] closed db:/home/auguruser/.ethereum/chaindata\nI0807 05:57:13.425034 cmd/utils/flags.go:592] WARNING: No etherbase set and no accounts found as default\nI0807 05:57:13.425697 cmd/geth/main.go:309] instance: Geth/1.5.0-unstable/go1.5.1/linux\nI0807 05:57:13.425747 ethdb/database.go:82] Allotted 128MB cache and 1024 file handles to /home/auguruser/.ethereum/chaindata\nI0807 05:57:13.473078 ethdb/database.go:82] Allotted 16MB cache and 16 file handles to /home/auguruser/.ethereum/dapp\nI0807 05:57:13.481495 eth/backend.go:184] Protocol Versions: [63 62], Network Id: 1\nI0807 05:57:13.482359 core/blockchain.go:204] Last header: #0 [d4e56740…] TD=17179869184\nI0807 05:57:13.482424 core/blockchain.go:205] Last block: #0 [d4e56740…] TD=17179869184\nI0807 05:57:13.482484 core/blockchain.go:206] Fast block: #0 [d4e56740…] TD=17179869184\nI0807 05:57:13.483748 p2p/server.go:322] Starting Server\nI0807 05:57:15.628811 p2p/discover/udp.go:217] Listening, enode://113e6afd1997fd9ba067ef46174a3d53689ebfc46fe2ec4171fae6377948b224a8d2ba04d54cfe91856492eadf7c2f4f696893e88fe4bed28270edf58552746e@[::]:30303\nI0807 05:57:15.634179 p2p/server.go:576] Listening on [::]:30303\nI0807 05:57:15.637565 node/node.go:296] IPC endpoint opened: /home/auguruser/.ethereum/geth.ipc\ntest\nI0807 05:57:15.908008 node/node.go:328] IPC endpoint closed: /home/auguruser/.ethereum/geth.ipc\nI0807 05:57:15.908032 core/blockchain.go:572] Chain manager stopped\nI0807 05:57:15.908040 eth/handler.go:224] Stopping ethereum protocol handler...\nI0807 05:57:15.908053 eth/handler.go:245] Ethereum protocol handler stopped\nI0807 05:57:15.908068 core/tx_pool.go:163] Transaction pool stopped\nI0807 05:57:15.908084 eth/backend.go:502] Automatic pregeneration of ethash DAG OFF (ethash dir: /home/auguruser/.ethash)\nI0807 05:57:15.908286 ethdb/database.go:169] closed db:/home/auguruser/.ethereum/chaindata\nI0807 05:57:15.908330 ethdb/database.go:169] closed db:/home/auguruser/.ethereum/dapp\n```\n\nOn other versions of geth using `js` does not shut down geth.\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239178490",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239178490",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239178490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTE3ODQ5MA==",
    "user": {
      "login": "Hellsegga",
      "id": 20972132,
      "node_id": "MDQ6VXNlcjIwOTcyMTMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20972132?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellsegga",
      "html_url": "https://github.com/Hellsegga",
      "followers_url": "https://api.github.com/users/Hellsegga/followers",
      "following_url": "https://api.github.com/users/Hellsegga/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellsegga/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellsegga/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellsegga/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellsegga/orgs",
      "repos_url": "https://api.github.com/users/Hellsegga/repos",
      "events_url": "https://api.github.com/users/Hellsegga/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellsegga/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T14:31:39Z",
    "updated_at": "2016-08-11T14:32:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "I took the liberty to investigate this as a way to learn geth and hope I got it right.\nEssentially the behavior of geth has not changed: it wants to close down after the execution of the JS file but waits to honor any pending timers (i.e. when setTimeOut or setInterval is called by the JS).\nNow there are no timers in your test JS file, but the web3.js is executed before it and this is where the change has been introduced: in previous versions geth bundled an earlier version of web3.js that did set up timers on initialization (in RequestManager.setProvider) whereas in more recent versions timers are no longer setup.\nSo no timers means geth exits after the JS file has been executed.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239178490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239221687",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239221687",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239221687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTIyMTY4Nw==",
    "user": {
      "login": "kevinday",
      "id": 1254665,
      "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinday",
      "html_url": "https://github.com/kevinday",
      "followers_url": "https://api.github.com/users/kevinday/followers",
      "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinday/orgs",
      "repos_url": "https://api.github.com/users/kevinday/repos",
      "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinday/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T16:54:10Z",
    "updated_at": "2016-08-11T16:54:10Z",
    "author_association": "NONE",
    "body": "Thanks for looking into this Hellsegga. So are you suggesting the intended behavior of `js` has always been to shut down after execution of the js file, and that it was just a coincidence caused by another piece that it wasn't?\n\nI know the js I included in this example is trivial, but myself and others rely on `js` with non trivial pieces of code, like to toggle mining on/off when there are pending transactions. Even if this change is fixing some previously unintended behavior, a lot of us have come to rely on that behavior. It would be great to get some clarification from the devs here about what the intent of `js` is.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239221687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239239225",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239239225",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239239225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTIzOTIyNQ==",
    "user": {
      "login": "Hellsegga",
      "id": 20972132,
      "node_id": "MDQ6VXNlcjIwOTcyMTMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20972132?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellsegga",
      "html_url": "https://github.com/Hellsegga",
      "followers_url": "https://api.github.com/users/Hellsegga/followers",
      "following_url": "https://api.github.com/users/Hellsegga/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellsegga/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellsegga/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellsegga/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellsegga/orgs",
      "repos_url": "https://api.github.com/users/Hellsegga/repos",
      "events_url": "https://api.github.com/users/Hellsegga/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellsegga/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T17:56:00Z",
    "updated_at": "2016-08-11T17:56:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So are you suggesting the intended behavior of js has always been to shut down after execution of the js file, and that it was just a coincidence caused by another piece that it wasn't?\n\nYes that's how I interpret the code\n\nI will let the devs answer on the intended behavior and whether it should be changed, but maybe one of these options would work for you (I understand your use case as wanting to start a node, execute a JS file and then let the node continue to run, did I get it right?):\n- `geth --preload test.js console` (will execute your script and then start an interactive console, so will not close the node)\n- start your geth node in the background and then run `geth --exec \"$(< test.js)\" attach` (will create a console that attaches to the node running in the background and execute your file. You then let the node continue to run in the background)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239239225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239245568",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239245568",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239245568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTI0NTU2OA==",
    "user": {
      "login": "kevinday",
      "id": 1254665,
      "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinday",
      "html_url": "https://github.com/kevinday",
      "followers_url": "https://api.github.com/users/kevinday/followers",
      "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinday/orgs",
      "repos_url": "https://api.github.com/users/kevinday/repos",
      "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinday/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T18:18:11Z",
    "updated_at": "2016-08-11T18:18:11Z",
    "author_association": "NONE",
    "body": "Yeah, I'm running geth in an upstart service with some js loaded to toggle mining on off as transactions appear. So any solution that uses `attach` or `console` won't work because those don't background well.  This has worked fine for me for months, but it looks like this will be breaking soon.\n\nI brought up allowing `--preload` without `console` or `attach` a while ago (https://github.com/ethereum/go-ethereum/pull/2431#issuecomment-212590842), but was told that's what `js` is for so I switched to it instead.\n\nhttps://github.com/ethereum/go-ethereum/pull/2431#issuecomment-212590842\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239245568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239266568",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239266568",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239266568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTI2NjU2OA==",
    "user": {
      "login": "Hellsegga",
      "id": 20972132,
      "node_id": "MDQ6VXNlcjIwOTcyMTMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20972132?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hellsegga",
      "html_url": "https://github.com/Hellsegga",
      "followers_url": "https://api.github.com/users/Hellsegga/followers",
      "following_url": "https://api.github.com/users/Hellsegga/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hellsegga/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hellsegga/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hellsegga/subscriptions",
      "organizations_url": "https://api.github.com/users/Hellsegga/orgs",
      "repos_url": "https://api.github.com/users/Hellsegga/repos",
      "events_url": "https://api.github.com/users/Hellsegga/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hellsegga/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T19:32:06Z",
    "updated_at": "2016-08-11T19:37:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK. As I understand the current intended behavior it will exit once the javascript doesn't have any timers left (js setTimeOuts in your code, ethereum js api watches, basically anything left to expect from the outer world...). So exiting after the execution of the test file that just does `console.log('test')` is correct but if your code watches for new transactions then I think it should not have exited.\nDo you mind sharing the code you use (or at least a mock showing the web3 calls)?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239266568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239502385",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239502385",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239502385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTUwMjM4NQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-12T17:03:19Z",
    "updated_at": "2016-08-12T17:03:19Z",
    "author_association": "MEMBER",
    "body": "Thanks @Hellsegga. I can confirm that this is indeed the correct behaviour. If you have web3.js filters installed, your script will not exit until you uninstall them. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239502385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239507994",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239507994",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239507994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTUwNzk5NA==",
    "user": {
      "login": "kevinday",
      "id": 1254665,
      "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinday",
      "html_url": "https://github.com/kevinday",
      "followers_url": "https://api.github.com/users/kevinday/followers",
      "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinday/orgs",
      "repos_url": "https://api.github.com/users/kevinday/repos",
      "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinday/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-12T17:25:37Z",
    "updated_at": "2016-08-12T17:25:37Z",
    "author_association": "NONE",
    "body": "@fjl @Hellsegga \nA bit more info: here is my js:\n\n```\nvar mining_threads = 1;\n\nfunction checkWork() {\n    if (eth.getBlock(\"pending\").transactions.length > 0) {\n        if (eth.mining) return;\n        console.log(\"== Pending transactions! Mining...\");\n        miner.start(mining_threads);\n    } else {\n        miner.stop();\n        console.log(\"== No transactions! Mining stopped.\");\n    }\n}\n\neth.filter(\"latest\", function(err, block) { checkWork(); });\neth.filter(\"pending\", function(err, block) { checkWork(); });\n\ncheckWork();\n```\n\nI do `geth init` with the following genesis.json:\n\n```\n{\n  \"nonce\": \"0x0000000000000021\",\n  \"difficulty\": \"0x00\",\n  \"config\": {\n    \"homesteadBlock\": 0,\n    \"daoForkBlock\" : 0,\n    \"daoForkSupport\" : true\n  },\n  \"alloc\": {\n    \"7fbe93bc104ac4bcae5d643fd3747e1866f1ece4\": {\n      \"balance\": \"1000000000000000000000000000000\"\n    }\n  },\n  \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n  \"coinbase\": \"0x0000000000000000000000000000000000000000\",\n  \"timestamp\": \"0x00\",\n  \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n  \"extraData\": \"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa\",\n  \"gasLimit\": \"0x2fefd8\"\n}\n```\n\nand then run `geth js mining_toggle.js`\n\ngeth shuts down immediately (though it doesn't on stable).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239507994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239610950",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-239610950",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 239610950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTYxMDk1MA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-13T08:59:47Z",
    "updated_at": "2016-08-13T08:59:57Z",
    "author_association": "MEMBER",
    "body": "OK, that should indeed work. I'll look into it.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/239610950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240581624",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2893#issuecomment-240581624",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2893",
    "id": 240581624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDU4MTYyNA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-17T23:35:27Z",
    "updated_at": "2016-08-17T23:35:27Z",
    "author_association": "MEMBER",
    "body": "Fixed by #2910 \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240581624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

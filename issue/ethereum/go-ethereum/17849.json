{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17849",
  "id": 367107092,
  "node_id": "MDU6SXNzdWUzNjcxMDcwOTI=",
  "number": 17849,
  "title": "Synchronisation failed, dropping peer; err=\"retrieved hash chain is invalid\"; message loop",
  "user": {
    "login": "avatar-lavventura",
    "id": 18537398,
    "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avatar-lavventura",
    "html_url": "https://github.com/avatar-lavventura",
    "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
    "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
    "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
    "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
    "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
    "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2018-10-05T08:20:49Z",
  "updated_at": "2019-05-11T10:26:41Z",
  "closed_at": "2018-10-09T16:13:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have clique private proof-of-authority chain.\r\n\r\n- Geth minimum version: `v1.8.16-stable`\r\n\r\nI have updated all signer nodes' (currently I have 3 signer nodes) geth version to minimum `Version: 1.8.16-stable`. Also I have updated the other node that gives the error to `v1.8.16`.\r\n\r\nThe way I run my `geth` also tried without `--syncmode fast` flag.\r\n\r\n`geth --syncmode fast --cache=1024 --shh --datadir $DATADIR/private  --rpcaddr 127.0.0.1 --rpc --rpcport 8545 --rpccorsdomain=\"*\" --networkid 12345 --rpcapi admin,eth,net,web3,debug,personal,shh`\r\n\r\n------------\r\n\r\nError I am having on multiple nodes that are connected into the network.\r\n\r\n```\r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 23422 Homestead: 1 DAO: <nil> DAOSupport: false EIP150: 2 EIP155: 3 EIP158: 3 Byzantium: 4 Constantinople: <nil> Engine: clique}\r\n    \r\nNumber: 1260001\r\nHash: 0x659e96f35e1fa1c39fc3b8370a336f78787e482aef44e56bbe6dd9e10bb06bdc\r\n    \r\n    \r\nError: recently signed\r\n##############################\r\n\r\nWARN [10-05|15:49:57.694] Synchronisation failed, dropping peer    peer=ae57fcb24c19102e err=\"retrieved hash chain is invalid\"\r\nINFO [10-05|15:49:57.694] message loop                             peer=ae57fcb24c19102e err=EOF\r\nERROR[10-05|15:50:07.707]\r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 23422 Homestead: 1 DAO: <nil> DAOSupport: false EIP150: 2 EIP155: 3 EIP158: 3 Byzantium: 4 Constantinople: <nil> Engine: clique}\r\n\r\nNumber: 1260001\r\nHash: 0x659e96f35e1fa1c39fc3b8370a336f78787e482aef44e56bbe6dd9e10bb06bdc\r\n```\r\n\r\n------\r\n\r\n- I have reverted back the blockchain into some previous block number, ` debug.setHead(\"0x124F80\")` (1200000 th block) but it did not help.\r\n\r\n- Please note that I have to remove my chaindata `geth removedb` and sync from the start, which also didn't help.",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427286601",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427286601",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427286601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI4NjYwMQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T08:28:13Z",
    "updated_at": "2018-10-05T08:28:13Z",
    "author_association": "MEMBER",
    "body": "This is a known issue introduced in 1.8.14, iirc. Fixed in https://github.com/ethereum/go-ethereum/pull/17620 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427286601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427297989",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427297989",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427297989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI5Nzk4OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T09:11:44Z",
    "updated_at": "2018-10-05T09:11:44Z",
    "author_association": "MEMBER",
    "body": "You originally reported this on `Version: 1.8.15-unstable`. So are there still nodes running `Version: 1.8.15-unstable`? And are those still present? If so, they may be still advertising a chain which is invalid, and is being rejected by your node.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427297989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427313423",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427313423",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427313423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzMxMzQyMw==",
    "user": {
      "login": "avatar-lavventura",
      "id": 18537398,
      "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avatar-lavventura",
      "html_url": "https://github.com/avatar-lavventura",
      "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
      "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
      "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
      "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
      "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
      "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T10:10:00Z",
    "updated_at": "2018-10-05T12:56:35Z",
    "author_association": "NONE",
    "body": "@holiman: I have updated all signer nodes' (currently I have 3 signer nodes) geth version to minimum `Version: 1.8.16-stable`. Also I have updated the other node that gives the error to `v1.8.16`.\r\n\r\nI have rsync the chain from genesis block, but unfortunately, I am still having the same error.\r\n\r\n<img width=\"896\" alt=\"screen shot 2018-10-05 at 13 13 51\" src=\"https://user-images.githubusercontent.com/18537398/46529836-8f578400-c8a0-11e8-9d8b-755c875627ad.png\">\r\n\r\n-------------------\r\n\r\n**Possible Solution:**\r\n\r\n- Should I take back the signer nodes' blockchain data to point where error does not occurred using `debug.setHead()`? This could be a short-term solution where the same error could be occurred again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427313423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427801784",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427801784",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427801784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzgwMTc4NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T11:37:40Z",
    "updated_at": "2018-10-08T11:38:23Z",
    "author_association": "MEMBER",
    "body": "~~This was fixed on master. I.e. stable release will arrive today.~~",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427801784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427801933",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427801933",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427801933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzgwMTkzMw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T11:38:19Z",
    "updated_at": "2018-10-08T11:38:19Z",
    "author_association": "MEMBER",
    "body": "Oh wait, I thought the invalid hash chain error. Then this is not what I thought, sorry for the noise.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427801933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427802290",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427802290",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427802290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzgwMjI5MA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T11:39:59Z",
    "updated_at": "2018-10-08T11:39:59Z",
    "author_association": "MEMBER",
    "body": "@avatar-lavventura Yeah, you might need to rewind the chain back to before the faulty snapshot block / epoch transition. The signers won't realize some past block became invalid.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427802290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427803295",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-427803295",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 427803295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzgwMzI5NQ==",
    "user": {
      "login": "avatar-lavventura",
      "id": 18537398,
      "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avatar-lavventura",
      "html_url": "https://github.com/avatar-lavventura",
      "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
      "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
      "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
      "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
      "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
      "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T11:44:17Z",
    "updated_at": "2018-10-10T07:51:40Z",
    "author_association": "NONE",
    "body": "@karalabe: I rewinded all the signers and it has been fixed.\r\n\r\n-  Might this error may occur again after the rewind?  I didn't understand what is the main reason behind this error.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/427803295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/428254931",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-428254931",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 428254931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODI1NDkzMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-09T16:13:50Z",
    "updated_at": "2018-10-09T16:13:50Z",
    "author_association": "MEMBER",
    "body": "There was a bug in one Geth release (v1.8.14/v1.8.15) that violated the Clique consensus spec, causing some signers to create blocks when they weren't allowed to (epoch transition). All previous and subsequent version of Geth (apart from the faulty one) correctly rejected those blocks, hence why you couldn't sync a new node to your already mined chain.\r\n\r\nA node however does not re-validate blocks when you update it, so even though you updated your signers, they were oblivious to the fact that a faulty block was already in their chain. When you rewound the chain, the signers had to re-mine the faulty segment, correcting the issue.\r\n\r\nThis should most definitely not happen again, as long as you don't use the faulty version of Geth. Any version equal or above to v1.8.16 should work just fine.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/428254931/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/483840160",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-483840160",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 483840160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzg0MDE2MA==",
    "user": {
      "login": "kennethhoytwoodruff",
      "id": 5115154,
      "node_id": "MDQ6VXNlcjUxMTUxNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5115154?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kennethhoytwoodruff",
      "html_url": "https://github.com/kennethhoytwoodruff",
      "followers_url": "https://api.github.com/users/kennethhoytwoodruff/followers",
      "following_url": "https://api.github.com/users/kennethhoytwoodruff/following{/other_user}",
      "gists_url": "https://api.github.com/users/kennethhoytwoodruff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kennethhoytwoodruff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kennethhoytwoodruff/subscriptions",
      "organizations_url": "https://api.github.com/users/kennethhoytwoodruff/orgs",
      "repos_url": "https://api.github.com/users/kennethhoytwoodruff/repos",
      "events_url": "https://api.github.com/users/kennethhoytwoodruff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kennethhoytwoodruff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-16T20:56:52Z",
    "updated_at": "2019-04-16T21:01:52Z",
    "author_association": "NONE",
    "body": "I am running Geth/v1.8.26-stable-cdae1c59/linux-arm64/go1.11.8.\r\n\r\nI have made several attempts over the past few days to sync the ropsten network.  I always get pretty far along and things are going smoothly...\r\n\r\neth.syncing\r\n{\r\n  currentBlock: 5414169,\r\n  highestBlock: 5418913,\r\n  knownStates: 107811598,\r\n  pulledStates: 107811598,\r\n  startingBlock: 5414168\r\n}\r\n\r\nBut THEN.....  I get the dreaded: \"BAD BLOCK\" followed by the \"Synchronisation failed, dropping peer    peer=35a1db7f4a92d6d6 err=\"retrieved hash chain is invalid\" message - and everything comes to a halt.   Nothing precipitates this failure.  It just happens.\r\n\r\nThen I make another attempt - which always fails after days of synching.  \r\n\r\nI am getting really frustrated and am thinking about using Parity instead.  Any suggestions?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/483840160/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489320198",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-489320198",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 489320198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTMyMDE5OA==",
    "user": {
      "login": "folex",
      "id": 1949356,
      "node_id": "MDQ6VXNlcjE5NDkzNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1949356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/folex",
      "html_url": "https://github.com/folex",
      "followers_url": "https://api.github.com/users/folex/followers",
      "following_url": "https://api.github.com/users/folex/following{/other_user}",
      "gists_url": "https://api.github.com/users/folex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/folex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/folex/subscriptions",
      "organizations_url": "https://api.github.com/users/folex/orgs",
      "repos_url": "https://api.github.com/users/folex/repos",
      "events_url": "https://api.github.com/users/folex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/folex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-04T11:54:53Z",
    "updated_at": "2019-05-04T20:20:07Z",
    "author_association": "NONE",
    "body": "I'm facing similar issue on Rinkeby network. A lot of errors (see below) about `BAD BLOCK` started to appear at `May 04 05:33 UTC`:\r\n```\r\nWARN [05-04|08:41:57.197] Synchronisation failed, dropping peer    peer=c71d079f0ce96e1d err=\"retrieved hash chain is invalid\"\r\nERROR[05-04|08:56:00.458]\r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 4 Homestead: 1 DAO: <nil> DAOSupport: true EIP150: 2 EIP155: 3 EIP158: 3 Byzantium: 1035301 Constantinople: 3660663  ConstantinopleFix: 9999999 Engine: clique}\r\n\r\nNumber: 4321234\r\nHash: 0xe2fa06d53b28bfa053e022686d6106026f8a1d5fe40e0eccd09e3f7165acd424\r\n         0: cumulative: 30107 gas: 30107 contract: 0x0000000000000000000000000000000000000000 status: 1 tx: 0x18abad37269a35c25b125039e82f62ed95b00fd0644c7c590530297d1bef8a27 logs: [0xc06938c2c0] bloom: 00000000000000000000000000000000000010000000000000000000200000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000001000010000000 state:\r\n         1: cumulative: 69155 gas: 39048 contract: 0x0000000000000000000000000000000000000000 status: 1 tx: 0x6ce0d490ddc5462db6ff1a33c82360455bac423587a1c8f3d3b57910ec32e716 logs: [0xc06938c370] bloom: 00000000080000000200000000000000000000000000000000040000000000000000000010000000000000000000000000000400200000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000100000000020000002000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000002400000000000000000000000000000000000000000000000000000 state:\r\n         2: cumulative: 436538 gas: 367383 contract: 0x0000000000000000000000000000000000000000 status: 1 tx: 0xe53644bda6ac3f7880d08a56438b3d8a2f7be46b3d91bd48a95e207b803ca3b2 logs: [] bloom: 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 state:\r\n         3: cumulative: 459950 gas: 23412 contract: 0x0000000000000000000000000000000000000000 status: 0 tx: 0xa5bb5d5451600310962f95cccd42963551c950d87048ea94563f43b07c7f79cb logs: [] bloom: 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 state:\r\n         4: cumulative: 488879 gas: 28929 contract: 0x0000000000000000000000000000000000000000 status: 1 tx: 0xbebcde90a9f479d131d9e882349fa49f4495b4c54608fac0ecbe9b2c52727729 logs: [] bloom: многонулей state:\r\n\r\n\r\nError: invalid gas used (remote: 517679 local: 488879)\r\n```\r\n\r\nThis all happened on **Geth v1.8.23**, running in a docker container `ethereum/client-go:stable`. I then pulled a new container with **Geth/v1.8.27-stable-4bcc0a37/linux-amd64/go1.11.9** inside.\r\n\r\nI restarted the container, and it started to sync:\r\n```\r\nINFO [05-04|08:59:31.162] Initialised chain configuration          config=\"{ChainID: 4 Homestead: 1 DAO: <nil> DAOSupport: true EIP150: 2 EIP155: 3 EIP158: 3 Byzantium: 1035301 Constantinople: 3660663  ConstantinopleFix: 4321234 Engine: clique}\"\r\nINFO [05-04|08:59:31.164] Initialising Ethereum protocol           versions=\"[63 62]\" network=4\r\nWARN [05-04|08:59:31.236] Head state missing, repairing chain      number=4321233 hash=3fb324…efc3d0\r\nINFO [05-04|09:00:24.833] Rewound blockchain to past state         number=4207869 hash=f51389…9ec47a\r\nINFO [05-04|09:00:24.833] Loaded most recent local header          number=4321233 hash=3fb324…efc3d0 td=7948872 age=3h27m54s\r\nINFO [05-04|09:00:24.833] Loaded most recent local full block      number=4207869 hash=f51389…9ec47a td=7747159 age=2w5d19h\r\nINFO [05-04|09:00:24.833] Loaded most recent local fast block      number=4321233 hash=3fb324…efc3d0 td=7948872 age=3h27m54s\r\n```\r\n\r\nSyncing was pretty slow (comparing to usual sync speed), and following errors started to appear in logs (pasting first appearance):\r\n```\r\nINFO [05-04|09:07:00.646] Imported new chain segment               blocks=350  txs=3020 mgas=538.680 elapsed=8.008s    mgasps=67.263 number=4217719 hash=2e32a4…39f1fb age=2w4d2h   cache=164.80mB\r\nWARN [05-04|09:07:06.419] Synchronisation failed, dropping peer    peer=2573096ae36ad36b err=\"retrieved hash chain is invalid\"\r\nINFO [05-04|09:07:29.265] Importing heavy sidechain segment        blocks=2048 start=4217903 end=4219950\r\nERROR[05-04|09:07:30.005] Impossible reorg, please file an issue   oldnum=4217901 oldhash=d37168…60fa2f newnum=4217901 newhash=d37168…60fa2f\r\nINFO [05-04|09:07:37.283] Imported new chain segment               blocks=234  txs=2360 mgas=437.251 elapsed=8.017s    mgasps=54.534 number=4218136 hash=8a6ccf…326568 age=2w4d1h   cache=167.58mB\r\nINFO [05-04|09:07:45.306] Imported new chain segment               blocks=311  txs=3751 mgas=654.378 elapsed=8.022s    mgasps=81.568 number=4218447 hash=a325de…b3c61d age=2w3d23h  cache=170.52mB\r\nWARN [05-04|09:07:45.488] Synchronisation failed, dropping peer    peer=2573096ae36ad36b err=\"retrieved hash chain is invalid\"\r\nINFO [05-04|09:08:06.623] Importing heavy sidechain segment        blocks=2048 start=4218456 end=4220503\r\nERROR[05-04|09:08:07.846] Impossible reorg, please file an issue   oldnum=4218454 oldhash=92baf1…c79693 newnum=4218454 newhash=92baf1…c79693\r\n```\r\n\r\nBy now, log is full of such errors:\r\n```\r\nERROR[05-04|11:45:05.849] Impossible reorg, please file an issue   oldnum=4320754 oldhash=040e63…fe7b8a newnum=4320754 newhash=040e63…fe7b8a\r\nWARN [05-04|11:45:06.093] Synchronisation failed, dropping peer    peer=1aabba770181eef1 err=\"retrieved hash chain is invalid\"\r\nINFO [05-04|11:46:26.532] Importing sidechain segment              start=4320768 end=4322616\r\nERROR[05-04|11:46:26.558] Impossible reorg, please file an issue   oldnum=4320766 oldhash=3619e9…10ef3d newnum=4320766 newhash=3619e9…10ef3d\r\nWARN [05-04|11:46:27.053] Synchronisation failed, dropping peer    peer=94d2999235ecaef2 err=\"retrieved hash chain is invalid\"\r\n```\r\n\r\nBut it's still moving forward, not stalling, but very-very slow (like 1 block in a minute or slower).\r\n\r\nNetwork: **Rinkeby**\r\nVersion: **Geth/v1.8.27-stable-4bcc0a37/linux-amd64/go1.11.9**\r\nRun args: `--rinkeby --rpc --rpccorsdomain \"*\" --rpcaddr '<HIDDEN IP>' --rpcport 8545 --ws --wsaddr '<HIDDEN IP>' --wsport <HIDDEN PORT> --verbosity 3 --datadir /root/.ethereum --v5disc --rpcvhosts=* --nat extip:<HIDDEN IP> --lightserv 90 --lightpeers 100`\r\n\r\n**UPDATE:** Now it has stalled on block `0x41f0d8` for an hour so far\r\n**UPDATE 2:** I've launched another rinkeby full node, and it synced just fine",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489320198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491499187",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17849#issuecomment-491499187",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17849",
    "id": 491499187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTQ5OTE4Nw==",
    "user": {
      "login": "ProDog",
      "id": 12728872,
      "node_id": "MDQ6VXNlcjEyNzI4ODcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/12728872?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ProDog",
      "html_url": "https://github.com/ProDog",
      "followers_url": "https://api.github.com/users/ProDog/followers",
      "following_url": "https://api.github.com/users/ProDog/following{/other_user}",
      "gists_url": "https://api.github.com/users/ProDog/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ProDog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ProDog/subscriptions",
      "organizations_url": "https://api.github.com/users/ProDog/orgs",
      "repos_url": "https://api.github.com/users/ProDog/repos",
      "events_url": "https://api.github.com/users/ProDog/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ProDog/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-11T10:26:41Z",
    "updated_at": "2019-05-11T10:26:41Z",
    "author_association": "NONE",
    "body": "@folex  It's ok after I upgrade my go-ethereum to the latest",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491499187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

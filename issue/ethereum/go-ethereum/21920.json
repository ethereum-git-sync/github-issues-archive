{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21920",
  "id": 753205091,
  "node_id": "MDU6SXNzdWU3NTMyMDUwOTE=",
  "number": 21920,
  "title": "Documentation needed on `network.inbound` and `network.outbound`",
  "user": {
    "login": "SmartLayer",
    "id": 548435,
    "node_id": "MDQ6VXNlcjU0ODQzNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/548435?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SmartLayer",
    "html_url": "https://github.com/SmartLayer",
    "followers_url": "https://api.github.com/users/SmartLayer/followers",
    "following_url": "https://api.github.com/users/SmartLayer/following{/other_user}",
    "gists_url": "https://api.github.com/users/SmartLayer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SmartLayer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SmartLayer/subscriptions",
    "organizations_url": "https://api.github.com/users/SmartLayer/orgs",
    "repos_url": "https://api.github.com/users/SmartLayer/repos",
    "events_url": "https://api.github.com/users/SmartLayer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SmartLayer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-11-30T06:52:48Z",
  "updated_at": "2023-12-01T12:54:58Z",
  "closed_at": "2023-12-01T12:54:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The documents such as [web3py](https://web3py.readthedocs.io/en/v4.0.0/web3.admin.html) and [web3js](https://web3js.readthedocs.io/en/v2.0.0-alpha/web3-eth-admin.html) didn't explain what  `network.inbound` and `network.outbound` means.\r\n\r\nThere are two plausible explanation.\r\n\r\n1. For a peer, `network.inbound` means that the peer accepts inbound connection.\r\n2. For a peer, `network.inbound` means that peer is connected to the current node through a inbound connection.\r\n\r\nI'm not sure about you but I feel that two intuitions have equal chance of being true, so we can't pass it as a case of \"self-explanatory - no document needed\".\r\n\r\nI experimented† with both cases and found that 2 is the correct answer. But for someone who look at peers and wonders how many of them are 'selfish' (not accepting incoming connections or behind NAT firewall), looking at how many have `nework.inbound == true` seem to be the most intuitive way to go - they would be in for a surprise.\r\n\r\n## †How I experimented  ##\r\n\r\n\r\nExample of both true and false are found in the following screen transcript:\r\n\r\n````\r\n> admin.peers\r\n…\r\n {\r\n    caps: [\"eth/62\", \"eth/63\"],\r\n    enode: \"enode://1855ff4c8d07db6c311f2940493739fd14d5d47b9e52f0e4161a4efef631a1dd4017d18efdf915373fb16e3182d4b1df212fab95c29d23bea2bfcdf22f8ffb57@46.105.78.246:46360\",\r\n    id: \"ff476e8a4664654dc9d415dffda42a640c75aa305c3c4d53d4fac4e15ad90a81\",\r\n    name: \"ethereumjs-devp2p/v2.5.1/linux-x64/nodejs\",\r\n    network: {\r\n      inbound: true,\r\n      localAddress: \"192.168.47.109:30303\",\r\n      remoteAddress: \"46.105.78.246:46360\",\r\n      static: false,\r\n      trusted: false\r\n    },\r\n    protocols: {\r\n      eth: {\r\n        difficulty: 17179869184,\r\n        head: \"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\",\r\n        version: 63\r\n      }\r\n    }\r\n}, {\r\n    caps: [\"eth/63\", \"eth/64\", \"eth/65\"],\r\n    enode: \"enode://dc79daf8d1b085f32279bfff419eb884a234b55927c577e26f692a5c68c59cf7359e83a62e79ab9f9b0dcbc703c9b5fc8afd666feec165a70385a01a78c075be@173.249.6.189:30301\",\r\n    id: \"ff9a9ea0f4d5019497211cf6b98c98c86adc290d54f4475cb06725e5bba57e85\",\r\n    name: \"Geth/v1.9.24-stable-cc05b050/linux-amd64/go1.15.5\",\r\n    network: {\r\n      inbound: false,\r\n      localAddress: \"192.168.47.109:51182\",\r\n      remoteAddress: \"173.249.6.189:30301\",\r\n      static: true,\r\n      trusted: false\r\n    },\r\n    protocols: {\r\n      eth: {\r\n        difficulty: 1.9054455443752023e+22,\r\n        head: \"0x4aa4ac671dcd5a04179a8382e39453972382fb317a184d9ccd86ffa561f1cb3f\",\r\n        version: 65\r\n      }\r\n    }\r\n}]\r\n````\r\n\r\nGiven my node listens to \"192.168.47.109:30303\", the first peer should be connected through an inbound tcp connection and the second should be connected through an outbound tcp connection. Then we have the first with `network.inboud: true` and the second `false`, hence I conclude `network.inboud` is a property of the connection to the peer, not a property of the peer. ",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/736340097",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-736340097",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 736340097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNjM0MDA5Nw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-01T09:25:36Z",
    "updated_at": "2020-12-01T09:25:36Z",
    "author_association": "MEMBER",
    "body": "Your explanation is correct. The flag means whether the connection with the peer is inbound (dialed remotely) or outbound (dialed locally). I don't think there's much more we can do.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/736340097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/736409583",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-736409583",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 736409583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNjQwOTU4Mw==",
    "user": {
      "login": "SmartLayer",
      "id": 548435,
      "node_id": "MDQ6VXNlcjU0ODQzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548435?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SmartLayer",
      "html_url": "https://github.com/SmartLayer",
      "followers_url": "https://api.github.com/users/SmartLayer/followers",
      "following_url": "https://api.github.com/users/SmartLayer/following{/other_user}",
      "gists_url": "https://api.github.com/users/SmartLayer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SmartLayer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SmartLayer/subscriptions",
      "organizations_url": "https://api.github.com/users/SmartLayer/orgs",
      "repos_url": "https://api.github.com/users/SmartLayer/repos",
      "events_url": "https://api.github.com/users/SmartLayer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SmartLayer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-01T10:55:05Z",
    "updated_at": "2020-12-01T10:56:48Z",
    "author_association": "NONE",
    "body": "> Your explanation is correct. The flag means whether the connection with the peer is inbound (dialed remotely) or outbound (dialed locally). I don't think there's much more we can do.\r\n\r\nIs this not the correct repo to file an issue aginst documentation? The title said what is actionable - add mentioning of what you just said - \"The flag means whether the connection with the peer is inbound (dialed remotely) or outbound (dialed locally). \" - into the document.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/736409583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/961662927",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-961662927",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 961662927,
    "node_id": "IC_kwDOAOvK9845Uc_P",
    "user": {
      "login": "Jolly23",
      "id": 17488831,
      "node_id": "MDQ6VXNlcjE3NDg4ODMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/17488831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jolly23",
      "html_url": "https://github.com/Jolly23",
      "followers_url": "https://api.github.com/users/Jolly23/followers",
      "following_url": "https://api.github.com/users/Jolly23/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jolly23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jolly23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jolly23/subscriptions",
      "organizations_url": "https://api.github.com/users/Jolly23/orgs",
      "repos_url": "https://api.github.com/users/Jolly23/repos",
      "events_url": "https://api.github.com/users/Jolly23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jolly23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T06:47:37Z",
    "updated_at": "2021-11-05T06:53:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@colourful-land @karalabe Thanks for your explain. Thus, can we make a conclusion that peer with `inbound=false` never contribute informations(head, tx, etc) to my node? They only acquire message from me, is this true?\r\ndo they never help me to propaganda my local transaction?\r\n\r\nI am going to make a script to remove those kind of peer.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/961662927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/961671270",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-961671270",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 961671270,
    "node_id": "IC_kwDOAOvK9845UfBm",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T07:09:15Z",
    "updated_at": "2021-11-05T07:09:15Z",
    "author_association": "MEMBER",
    "body": "No, that's not true. That's just the direction of the connection. Every peer is P2P and communication and information sharing goes both ways.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/961671270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/962429628",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-962429628",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 962429628,
    "node_id": "IC_kwDOAOvK9845XYK8",
    "user": {
      "login": "Jolly23",
      "id": 17488831,
      "node_id": "MDQ6VXNlcjE3NDg4ODMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/17488831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jolly23",
      "html_url": "https://github.com/Jolly23",
      "followers_url": "https://api.github.com/users/Jolly23/followers",
      "following_url": "https://api.github.com/users/Jolly23/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jolly23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jolly23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jolly23/subscriptions",
      "organizations_url": "https://api.github.com/users/Jolly23/orgs",
      "repos_url": "https://api.github.com/users/Jolly23/repos",
      "events_url": "https://api.github.com/users/Jolly23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jolly23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-06T10:17:54Z",
    "updated_at": "2021-11-06T10:17:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@karalabe Thanks!\r\nI am going to build a script to find and remove \"BAD\" peer. \r\nlist all peers' information by `admin.peers` and then check their `['protocols']['eth']['head']`. See how many blocks they behind from the highest block. If someone lags more than 20 block, remove it.\r\n\r\nIs this a good criterion? Do you have any suggestion about this script?\r\n\r\nBtw, I notice some peer does not provide `['protocols']['eth']['head']`, show `['protocols']['eth']: 'handshake'`  instead.\r\nWhat does this mean? Can I remove them too?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/962429628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1836074143",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21920#issuecomment-1836074143",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21920",
    "id": 1836074143,
    "node_id": "IC_kwDOAOvK985tcESf",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-01T12:54:58Z",
    "updated_at": "2023-12-01T12:54:58Z",
    "author_association": "MEMBER",
    "body": "> Your explanation is correct.\r\n\r\nQuestion answered, closing",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1836074143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

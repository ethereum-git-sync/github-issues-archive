{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27699",
  "id": 1799714651,
  "node_id": "I_kwDOAOvK985rRXdb",
  "number": 27699,
  "title": "mempool not having broadcasted transactions ",
  "user": {
    "login": "nerdynaman",
    "id": 69380363,
    "node_id": "MDQ6VXNlcjY5MzgwMzYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/69380363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nerdynaman",
    "html_url": "https://github.com/nerdynaman",
    "followers_url": "https://api.github.com/users/nerdynaman/followers",
    "following_url": "https://api.github.com/users/nerdynaman/following{/other_user}",
    "gists_url": "https://api.github.com/users/nerdynaman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nerdynaman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nerdynaman/subscriptions",
    "organizations_url": "https://api.github.com/users/nerdynaman/orgs",
    "repos_url": "https://api.github.com/users/nerdynaman/repos",
    "events_url": "https://api.github.com/users/nerdynaman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nerdynaman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-11T20:35:42Z",
  "updated_at": "2023-07-25T12:50:35Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have private ethereum blockchain setup made using geth implementation of two nodes{A,B}. There is a node(A) which is directly connected to the website which sends thousands of transaction to node(A) now these transactions can be seen in mempool of node(A) but the other nodes which are connected to node(A) they don't seem to have these transactions in their mempool but after the block is mined that block and its content can be seen via other nodes\r\n\r\nblock number 8725 was finally mined by node(B) but during that time the transactions were only visible in mempool of node(A) but couldn't be seen in mempool of node(B) but the miner for block 8725 was block(B)\r\n#### Block info for 8725\r\n```\r\n> eth.getBlock(8725)\r\n{\r\n  difficulty: 5023423,\r\n  extraData: \"0xd883010b06846765746888676f312e32302e33856c696e7578\",\r\n  gasLimit: 30000000,\r\n  gasUsed: 747240,\r\n  hash: \"0xe777835662215f6553e6a6c8d35605148b34fcaf198f12b9e279b1d906b185ec\",\r\n  logsBloom: \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n  miner: \"0x458d3551263451943cc0d0093923761e86bff6b8\",\r\n  mixHash: \"0x2a80d9d62372348804fadae34de842b9d935eee9e3e3c09d787b9ef870c51186\",\r\n  nonce: \"0x2bfd1431a5978309\",\r\n  number: 8725,\r\n  parentHash: \"0xdd0faafc397ee5a2f63b66d064499fea3c4c2b3ee1d593b5582b6657b20de33f\",\r\n  receiptsRoot: \"0x962b97319879ace5b9b3f2197b16bcb7238f7c2522edd0823f132fa91afc57cd\",\r\n  sha3Uncles: \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\r\n  size: 11191,\r\n  stateRoot: \"0xeeae5d7cfd9e0a384c0945364344772437cfbca52dd7b403e872da006b85e3b0\",\r\n  timestamp: 1689107053,\r\n  totalDifficulty: 14456757391,\r\n  transactions: [\"0xa8f863af5dbc6f30cc03af474d68d45aca840bad73efd34a227c4e190b37d1a8\", \"0xa89ba73a5da94c82213b7189fe6c72769a9d41a45020aa2ed4fa7e00aa521404\", \"0x2481bea8c3d0cfbe7bbcb7d2202e455a1eea645e4cb10b80d83d49c79661f037\", \"0xaa10cc96bcdc4a07d05fdaf3e34bffb63007511689d2a696a77d73ca4f81ecb5\", \"0xd4a2f1cc29eb5595a13baff58f14d83c7ba009c7b8179990a3dbd34a4a06134c\", \"0xac84fbf104bd9adb4ff3e326efea955e8ecab6927a584d68732f373ef8ad9dfa\", \"0x957e2b3072fec261790832e3c2590646ed05435436c12f60bc4f9f4aedbe7a74\"],\r\n  transactionsRoot: \"0x639bab6c6ab78bf3daf674f1166a7dd84abbb1941c142fce03e83dfd805025e2\",\r\n  uncles: []\r\n}\r\n```\r\n\r\n#### Logs of Node(A)\r\n```\r\nINFO [07-11|16:24:13.665] Successfully sealed new block            number=8724 sealhash=a475a6..ade875 hash=dd0faa..0de33f elapsed=1.565s\r\nINFO [07-11|16:24:13.665] \"ðŸ”¨ mined potential block\"                number=8724 hash=dd0faa..0de33f\r\nINFO [07-11|16:24:13.666] Commit new sealing work                  number=8725 sealhash=8e1eaa..759b69 uncles=0 txs=0    gas=0         fees=0           elapsed=\"232.642Âµs\"\r\nINFO [07-11|16:24:13.666] Commit new sealing work                  number=8725 sealhash=d6b07b..8965a4 uncles=0 txs=1    gas=106,776   fees=0.000106776 elapsed=\"722.913Âµs\"\r\nINFO [07-11|16:24:14.183] Submitted transaction                    hash=0xa89ba73a5da94c82213b7189fe6c72769a9d41a45020aa2ed4fa7e00aa521404 from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8188 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:15.600] Submitted transaction                    hash=0x2481bea8c3d0cfbe7bbcb7d2202e455a1eea645e4cb10b80d83d49c79661f037 from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8189 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:15.670] Commit new sealing work                  number=8725 sealhash=0e6211..54fab2 uncles=0 txs=3    gas=320,264   fees=0.000320264 elapsed=\"441.629Âµs\"\r\nINFO [07-11|16:24:17.080] Submitted transaction                    hash=0xaa10cc96bcdc4a07d05fdaf3e34bffb63007511689d2a696a77d73ca4f81ecb5 from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8190 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:17.712] Commit new sealing work                  number=8725 sealhash=97994b..f112c6 uncles=0 txs=4    gas=427,040   fees=0.00042704  elapsed=\"512.677Âµs\"\r\nINFO [07-11|16:24:18.531] Submitted transaction                    hash=0xd4a2f1cc29eb5595a13baff58f14d83c7ba009c7b8179990a3dbd34a4a06134c from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8191 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:19.756] Commit new sealing work                  number=8725 sealhash=68fabe..aac649 uncles=0 txs=5    gas=533,816   fees=0.000533816 elapsed=\"607.824Âµs\"\r\nINFO [07-11|16:24:20.060] Submitted transaction                    hash=0xac84fbf104bd9adb4ff3e326efea955e8ecab6927a584d68732f373ef8ad9dfa from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8192 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:21.332] Submitted transaction                    hash=0x957e2b3072fec261790832e3c2590646ed05435436c12f60bc4f9f4aedbe7a74 from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8193 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:21.768] Commit new sealing work                  number=8725 sealhash=106cfd..1dca11 uncles=0 txs=7    gas=747,240   fees=0.00074724  elapsed=\"609.571Âµs\"\r\nINFO [07-11|16:24:22.984] Submitted transaction                    hash=0xe575a1851b5e9efe762f8176c763b8a044b915e07b0caffcd3330f0d71b518e8 from=0x9e09E76ED87EAe8C5Dc36140258049df27Dd8514 nonce=8194 recipient=0x9fBBCa301b9c4f730133eb7cEAD712C7843048Dd value=0\r\nINFO [07-11|16:24:23.620] Imported new chain segment               number=8725 hash=e77783..b185ec blocks=1    txs=7    mgas=0.747   elapsed=6.973ms     mgasps=107.157 dirty=229.87KiB\r\nINFO [07-11|16:24:23.659] Commit new sealing work                  number=8726 sealhash=ef0160..df0297 uncles=0 txs=0    gas=0         fees=0           elapsed=\"336.574Âµs\"\r\n```\r\n\r\n#### Logs of Node(B)\r\n``` 28   fees=0.000960728 elapsed=\"645.265Âµs\"\r\nINFO [07-11|16:24:13.708] Imported new chain segment               number=8724 hash=dd0faa..0de33f blocks=1 txs=9  mgas=0.961 elapsed=23.376ms    mgasps=41.097 dirty=189.10KiB\r\nINFO [07-11|16:24:13.709] \"ðŸ”— block reached canonical chain\"        number=8717 hash=796ece..7169d9\r\nINFO [07-11|16:24:13.709] Commit new sealing work                  number=8725 sealhash=128621..5b6c46 uncles=0 txs=0  gas=0         fees=0           elapsed=\"232.912Âµs\"\r\nINFO [07-11|16:24:13.709] Commit new sealing work                  number=8725 sealhash=4e461c..d990f6 uncles=0 txs=1  gas=106,776   fees=0.000106776 elapsed=\"687.221Âµs\"\r\nINFO [07-11|16:24:15.715] Commit new sealing work                  number=8725 sealhash=69ec9d..977566 uncles=0 txs=3  gas=320,264   fees=0.000320264 elapsed=\"458.399Âµs\"\r\nINFO [07-11|16:24:17.736] Commit new sealing work                  number=8725 sealhash=66909e..2e540f uncles=0 txs=4  gas=427,040   fees=0.00042704  elapsed=\"471.576Âµs\"\r\nINFO [07-11|16:24:19.772] Commit new sealing work                  number=8725 sealhash=722353..bddb09 uncles=0 txs=5  gas=533,816   fees=0.000533816 elapsed=\"544.466Âµs\"\r\nINFO [07-11|16:24:21.808] Commit new sealing work                  number=8725 sealhash=c84b41..ce22a6 uncles=0 txs=7  gas=747,240   fees=0.00074724  elapsed=\"573.724Âµs\"\r\nINFO [07-11|16:24:23.606] Successfully sealed new block            number=8725 sealhash=c84b41..ce22a6 hash=e77783..b185ec elapsed=1.798s\r\nINFO [07-11|16:24:23.606] \"ðŸ”— block reached canonical chain\"        number=8718 hash=f20791..992968\r\nINFO [07-11|16:24:23.606] \"ðŸ”¨ mined potential block\"                number=8725 hash=e77783..b185ec\r\nINFO [07-11|16:24:23.607] Commit new sealing work                  number=8726 sealhash=cef228..9912b0 uncles=0 txs=0  gas=0         fees=0           elapsed=\"219.96Âµs\"\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1643550320",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27699#issuecomment-1643550320",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699",
    "id": 1643550320,
    "node_id": "IC_kwDOAOvK985h9pZw",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T09:02:30Z",
    "updated_at": "2023-07-20T09:02:30Z",
    "author_association": "MEMBER",
    "body": "Adding thousands of transactions \"simultaneously\" may result in 1) txs propagating out of order through the network, so it may not be queued up properly on the other side(s); 2) if you broadcast more than 4K pending transactions, those will not fit into the remote pool so some may get dropped and never retransmitted.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1643550320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1644169925",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27699#issuecomment-1644169925",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699",
    "id": 1644169925,
    "node_id": "IC_kwDOAOvK985iAArF",
    "user": {
      "login": "nerdynaman",
      "id": 69380363,
      "node_id": "MDQ6VXNlcjY5MzgwMzYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/69380363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nerdynaman",
      "html_url": "https://github.com/nerdynaman",
      "followers_url": "https://api.github.com/users/nerdynaman/followers",
      "following_url": "https://api.github.com/users/nerdynaman/following{/other_user}",
      "gists_url": "https://api.github.com/users/nerdynaman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nerdynaman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nerdynaman/subscriptions",
      "organizations_url": "https://api.github.com/users/nerdynaman/orgs",
      "repos_url": "https://api.github.com/users/nerdynaman/repos",
      "events_url": "https://api.github.com/users/nerdynaman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nerdynaman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T15:49:11Z",
    "updated_at": "2023-07-20T15:49:11Z",
    "author_association": "NONE",
    "body": "Trying even with less than 1k transactions same issue was observed.\r\np.s. the above logs that are shared were noted when we had less than 1k transactions only.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1644169925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1649780296",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27699#issuecomment-1649780296",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27699",
    "id": 1649780296,
    "node_id": "IC_kwDOAOvK985iVaZI",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-25T12:50:35Z",
    "updated_at": "2023-07-25T12:50:35Z",
    "author_association": "MEMBER",
    "body": "Are you publishing the transactions in bursts simultaneously (or back to back quickly)? You might want to try waiting a bit before pushing too heavily at once. Due to how transactions propagate, Geth does not play very nice with quick bursts of *many* new transactions form the same account.\r\n\r\nMy suggestion would be to try to try sending them with delays in between, or send N (say 4-16) and then delay a bit and see what numbers are still ok and which ones result in losses and go from there. Otherwise it's kind of hard for us to say anything without seeing what your behavior is.\r\n\r\nOr you could also send up a repro script to check out and maybe answer why it's choking.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1649780296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

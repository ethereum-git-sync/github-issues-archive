{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25664",
  "id": 1359692398,
  "node_id": "I_kwDOAOvK985RC0Ju",
  "number": 25664,
  "title": "Geth docker full node synchronisation failed. err=\"retrieved hash chain is invalid: missing parent\"",
  "user": {
    "login": "abc-1211",
    "id": 59509722,
    "node_id": "MDQ6VXNlcjU5NTA5NzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/59509722?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abc-1211",
    "html_url": "https://github.com/abc-1211",
    "followers_url": "https://api.github.com/users/abc-1211/followers",
    "following_url": "https://api.github.com/users/abc-1211/following{/other_user}",
    "gists_url": "https://api.github.com/users/abc-1211/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abc-1211/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abc-1211/subscriptions",
    "organizations_url": "https://api.github.com/users/abc-1211/orgs",
    "repos_url": "https://api.github.com/users/abc-1211/repos",
    "events_url": "https://api.github.com/users/abc-1211/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abc-1211/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-09-02T04:34:02Z",
  "updated_at": "2023-01-02T11:54:58Z",
  "closed_at": "2023-01-02T11:54:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.23-stable`\r\nOS & Version: `Ubuntu 22.04.1 LTS`\r\n\r\n#### Docker compose file\r\n```\r\nversion: \"3.8\"\r\n\r\nnetworks:\r\n  mynet:\r\n\r\n# Docker\r\nservices:\r\n  # Geth Docker\r\n  ethereum-geth:\r\n    container_name: erc20\r\n    image: ethereum/client-go:stable\r\n    volumes: [/mydata/blockchain/erc20:/root]\r\n    ports:\r\n      # HTTP server / GraphQL API\r\n      - 8545:8545\r\n      # WebSocket\r\n      - 8546:8546\r\n      # Network listening port (P2P networking)\r\n      - 30303:30303\r\n    command: [\"--syncmode=full\", \"--http\", \"--http.addr=0.0.0.0\", \"--ws\", \"--ws.addr=0.0.0.0\"]\r\n    restart: always\r\n    logging:\r\n      options:\r\n        max-size: \"25k\"\r\n        max-file: \"5\"\r\n```\r\n\r\n#### Expected behaviour\r\nConnect to peers keep syncing\r\n\r\n#### Actual behaviour\r\n```\r\nerc20  | WARN [09-02|04:31:12.766] Synchronisation failed, dropping peer    peer=98eff4d8cac4349efb2a5a76c3f516390059bbcc93c6220c0fe37716fa7a6dd7 err=\"retrieved hash chain is invalid: missing parent\"\r\nerc20  | INFO [09-02|04:31:15.255] Looking for peers                        peercount=2 tried=37 static=8\r\nerc20  | WARN [09-02|04:31:30.042] Synchronisation failed, dropping peer    peer=c90982186c0cc076633cf78b02fe26cd967f8c0926453ef22da804b54909b92f err=\"retrieved hash chain is invalid: missing parent\"\r\nerc20  | INFO [09-02|04:31:35.281] Looking for peers                        peercount=1 tried=42 static=8\r\nerc20  | INFO [09-02|04:31:45.618] Looking for peers                        peercount=1 tried=40 static=8\r\nerc20  | WARN [09-02|04:31:50.773] Synchronisation failed, dropping peer    peer=d2f47c21d108711c8baec703601e2d2f31811c60c7e659866319b0121294d564 err=\"retrieved hash chain is invalid: missing parent\"\r\nerc20  | INFO [09-02|04:31:55.649] Looking for peers                        peercount=0 tried=44 static=8\r\nerc20  | INFO [09-02|04:32:05.694] Looking for peers                        peercount=1 tried=43 static=8\r\nerc20  | INFO [09-02|04:32:16.008] Looking for peers                        peercount=0 tried=26 static=8\r\nerc20  | WARN [09-02|04:32:21.743] Merge is configured, but no beacon client seen. Please ensure you have one available before the transition arrives! eta=9y1mo3w\r\nerc20  | INFO [09-02|04:32:26.278] Looking for peers                        peercount=0 tried=51 static=8\r\nerc20  | INFO [09-02|04:32:36.291] Looking for peers                        peercount=1 tried=40 static=8\r\nerc20  | WARN [09-02|04:32:36.717] Synchronisation failed, dropping peer    peer=8d1da4c5bc682f8f8ad141f60d2889fa4232144c7d2b29b88f81ca33e586ef9d err=timeout\r\nerc20  | INFO [09-02|04:32:46.967] Looking for peers                        peercount=1 tried=49 static=8\r\nerc20  | INFO [09-02|04:32:53.486] Downloader queue stats                   receiptTasks=0 blockTasks=379  itemSize=25.98KiB throttle=8192\r\nerc20  | WARN [09-02|04:32:55.935] Synchronisation failed, dropping peer    peer=3fb2bb7152a1ff54c0ff9e5a49ab9325c9030fb23627fd8da4eef53d9a937232 err=\"retrieved hash chain is invalid: missing parent\"\r\n```",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238090781",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25664#issuecomment-1238090781",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664",
    "id": 1238090781,
    "node_id": "IC_kwDOAOvK985Jy8Qd",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-06T12:35:10Z",
    "updated_at": "2022-09-06T12:35:10Z",
    "author_association": "MEMBER",
    "body": "can you provide some more logs and context?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238090781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1266563432",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25664#issuecomment-1266563432",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664",
    "id": 1266563432,
    "node_id": "IC_kwDOAOvK985Lfjlo",
    "user": {
      "login": "abc-1211",
      "id": 59509722,
      "node_id": "MDQ6VXNlcjU5NTA5NzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/59509722?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abc-1211",
      "html_url": "https://github.com/abc-1211",
      "followers_url": "https://api.github.com/users/abc-1211/followers",
      "following_url": "https://api.github.com/users/abc-1211/following{/other_user}",
      "gists_url": "https://api.github.com/users/abc-1211/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abc-1211/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abc-1211/subscriptions",
      "organizations_url": "https://api.github.com/users/abc-1211/orgs",
      "repos_url": "https://api.github.com/users/abc-1211/repos",
      "events_url": "https://api.github.com/users/abc-1211/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abc-1211/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T08:10:56Z",
    "updated_at": "2022-10-04T08:10:56Z",
    "author_association": "NONE",
    "body": "> can you provide some more logs and context?\n\nDo you mean I need to change the log level? What information you need exactly to help?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1266563432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1266585208",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25664#issuecomment-1266585208",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664",
    "id": 1266585208,
    "node_id": "IC_kwDOAOvK985Lfo54",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T08:30:36Z",
    "updated_at": "2022-10-04T08:30:36Z",
    "author_association": "MEMBER",
    "body": "First of all, you should use a more recent version. About 1.10.25: \r\n\r\n> Geth v1.10.25 is a tiny update to flip the mainnet chain configuration to be post-merge. This disables legacy sync and will prevent Geth from even starting sync until a consensus client is attached and sends forkchoice updates. The update prevents bad PoW actors from trying to get the node to - temporarily, but annoyingly - download bad state data.\r\n\r\nSecondly, however, your node is telling you that it needs a beacon-node to tell geth what head is canonical:\r\n\r\n> erc20  | WARN [09-02|04:32:21.743] Merge is configured, but no beacon client seen. Please ensure you have one available before the transition arrives! eta=9y1mo3w \r\n\r\nThirdly, loglevel can be set by \r\n```\r\n    --verbosity value              (default: 3)\r\n          Logging verbosity: 0=silent, 1=error, 2=warn, 3=info, 4=debug, 5=detail\r\n```\r\nIt can also be set from the console/rpc , e,g. `debug.verbosity(4)`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1266585208/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1368879889",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25664#issuecomment-1368879889",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25664",
    "id": 1368879889,
    "node_id": "IC_kwDOAOvK985Rl3MR",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T11:54:57Z",
    "updated_at": "2023-01-02T11:54:57Z",
    "author_association": "MEMBER",
    "body": "This issue is pretty stale now, could you retry with a new version and a beacon node?\r\nI'll close this for now, feel free to reopen if the issue still persists",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1368879889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

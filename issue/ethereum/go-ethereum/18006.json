{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18006",
  "id": 375595976,
  "node_id": "MDU6SXNzdWUzNzU1OTU5NzY=",
  "number": 18006,
  "title": "LESv2 Documentation for RLP encoding of SendTx is Wrong",
  "user": {
    "login": "EBGToo",
    "id": 673875,
    "node_id": "MDQ6VXNlcjY3Mzg3NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/673875?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EBGToo",
    "html_url": "https://github.com/EBGToo",
    "followers_url": "https://api.github.com/users/EBGToo/followers",
    "following_url": "https://api.github.com/users/EBGToo/following{/other_user}",
    "gists_url": "https://api.github.com/users/EBGToo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EBGToo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EBGToo/subscriptions",
    "organizations_url": "https://api.github.com/users/EBGToo/orgs",
    "repos_url": "https://api.github.com/users/EBGToo/repos",
    "events_url": "https://api.github.com/users/EBGToo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EBGToo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-10-30T17:01:32Z",
  "updated_at": "2019-05-03T19:30:02Z",
  "closed_at": "2019-05-03T19:30:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The LESv2 documentation for the `SendTx` RLP encoding appears to be wrong.  The documentation (https://github.com/zsfelfoldi/go-ethereum/wiki/Light-Ethereum-Subprotocol-%28LES%29) says `SendTx [+0x0c, txdata_1, txdata_2, ...]` but if that is sent on the wire one is detached  as a 'useless peer'  (which is the typical response to an unexpected RLP encoding).  One must, in fact, send `SendTx [+0x0c, [txdata_1, txdata_2, ...]]` to not be disconnected.\r\n\r\nHere one is disconnected:\r\n```\r\nETH: LES: Send: [ LES,          SendTx ]\r\nETH: SEND: L  2: [\r\nETH: SEND:   I  1: 0x1c\r\nETH: SEND:   L  9: [\r\nETH: SEND:     I  1: 0x11\r\nETH: SEND:     I  5: 0x012a05f200\r\nETH: SEND:     I  2: 0x5208\r\nETH: SEND:     I 20: 0xb0f225defec7625c6b5e43126bdde398bd90ef62\r\nETH: SEND:     I  7: 0x2386f26fc10000\r\nETH: SEND:     I  0: 0x\r\nETH: SEND:     I  1: 0x26\r\nETH: SEND:     I 32: 0x72082d0e03e18c2c97721557d1fe482c959fb814a5066f66a98e5d324bbc6eca\r\nETH: SEND:     I 32: 0x2837c88bebbc484ca4377ef29ce3b58ac5f06c33e74857739ebef31d73f9eebd\r\nETH: SEND:   ]\r\nETH: SEND: ]\r\nETH: LES: Recv: [ P2P,      Disconnect ] (Useless Peer)\r\nETH: LES: Conn: [ TCP @   2,     <=|=> ] (Disconnect : Useless Peer) - SELECT\r\n```\r\nHere one is not disconnected:\r\n\r\n```\r\nETH: LES: Send: [ LES,          SendTx ]\r\nETH: SEND: L  2: [\r\nETH: SEND:   I  1: 0x1c\r\nETH: SEND:   L  1: [\r\nETH: SEND:     L  9: [\r\nETH: SEND:       I  1: 0x11\r\nETH: SEND:       I  5: 0x012a05f200\r\nETH: SEND:       I  2: 0x5208\r\nETH: SEND:       I 20: 0xb0f225defec7625c6b5e43126bdde398bd90ef62\r\nETH: SEND:       I  7: 0x0cd6e786547800\r\nETH: SEND:       I  0: 0x\r\nETH: SEND:       I  1: 0x26\r\nETH: SEND:       I 32: 0x4ba3e7a62d96eaa96857b8da3bbb79e58dc5a163a65b69a558db8d945fd2cd72\r\nETH: SEND:       I 32: 0x56e552702d57131332878f7803d77008a553a9ca541cae8ac1cb31a1fb901b75\r\nETH: SEND:     ]\r\nETH: SEND:   ]\r\nETH: SEND: ]\r\n```\r\n\r\n#### System information\r\n\r\nGeth version: release/1.8\r\nOS & Version: OSX\r\nCommit hash :\r\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489082468",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18006#issuecomment-489082468",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006",
    "id": 489082468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTA4MjQ2OA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-03T12:43:48Z",
    "updated_at": "2019-05-03T12:43:48Z",
    "author_association": "MEMBER",
    "body": "Support for SendTx was removed inÂ https://github.com/ethereum/go-ethereum/commit/5515f364ae1673c1bf5569c089b5853c90ea1655. I'm unsure if this is a spec violation because the spec clearly states that all les/1 messages remain valid.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489082468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489213307",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18006#issuecomment-489213307",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18006",
    "id": 489213307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTIxMzMwNw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-03T19:30:02Z",
    "updated_at": "2019-05-03T19:30:02Z",
    "author_association": "MEMBER",
    "body": "@zsfelfoldi is in favor of removing the messages from the spec. This makes the issue go away I guess.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489213307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

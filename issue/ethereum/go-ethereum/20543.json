{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20543",
  "id": 548724536,
  "node_id": "MDU6SXNzdWU1NDg3MjQ1MzY=",
  "number": 20543,
  "title": "POA old Node join New chain, old data over new chain data.",
  "user": {
    "login": "sueboy19",
    "id": 6514381,
    "node_id": "MDQ6VXNlcjY1MTQzODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6514381?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sueboy19",
    "html_url": "https://github.com/sueboy19",
    "followers_url": "https://api.github.com/users/sueboy19/followers",
    "following_url": "https://api.github.com/users/sueboy19/following{/other_user}",
    "gists_url": "https://api.github.com/users/sueboy19/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sueboy19/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sueboy19/subscriptions",
    "organizations_url": "https://api.github.com/users/sueboy19/orgs",
    "repos_url": "https://api.github.com/users/sueboy19/repos",
    "events_url": "https://api.github.com/users/sueboy19/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sueboy19/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-01-13T06:08:45Z",
  "updated_at": "2020-08-27T08:56:21Z",
  "closed_at": "2020-06-11T08:53:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Make POA chain： 3 singer,  2 node\r\n\r\nsigner1  (mining)  \r\nsigner2  (mining)  \r\nsigner3  (mining)  \r\nnode1  \r\nnode2  \r\n\r\n    signer1 <- node1\r\n    signer2 <- node2\r\n    signer1 <-> signer2\r\n            <-> signer3\r\n\r\nSend transaction to node1 1xxx records and block number is 1xxx. Check all chain sync data is OK. Send transaction & contract get/set both work correct.\r\n\r\nStop all signers & nodes. Delete signer1、signer2、 signer3、node2 data. Only Deep node1 old data.\r\nNow start signer1、signer2、signer3、node2 and clique.propose() signers. Sure now chain is working. Use web3 send transaction to signer1. Signer1 get trasactions and smart contract get/set can get number and number is correct.\r\n\r\n    signer1 X  node1(old data)\r\n    signer2 <- node2\r\n    signer1 <-> signer2\r\n            <-> signer3\r\n\r\nNew chain: block number is 3x.\r\n\r\nNow start node1. Wait maybe 1min. Old data over new Chain data. Signer1 block number become 1xxx. And contract get/set value is 0. Contract disappear.\r\n\r\nWhy old node data recover to new chain？ Usually is node1 have error or can't connection to sigenr1 that Kick off node1.\r\n\r\nThis is BUG or ?\r\n\r\n#### System information\r\n\r\nGeth version: `1.9.6`\r\nOS & Version: Linux\r\nDocker & docker-compose\r\nImage:  FROM ethereum/client-go:alltools-v1.9.6\r\n\r\n#### genesis\r\n    \"clique\": {\r\n      \"period\": 5,\r\n      \"epoch\": 30000\r\n    }\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/642508531",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20543#issuecomment-642508531",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20543",
    "id": 642508531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MjUwODUzMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-11T08:53:04Z",
    "updated_at": "2020-06-11T08:53:04Z",
    "author_association": "MEMBER",
    "body": "Not sure I follow. Nodes will cross sync between each other and will end up with the most difficult chain. Even if you delete a chain locally, when you connect to a remote node, if that chain is heavier, yours will be dropped in favor of the remote one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/642508531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

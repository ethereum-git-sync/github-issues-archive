{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17574",
  "id": 356412952,
  "node_id": "MDU6SXNzdWUzNTY0MTI5NTI=",
  "number": 17574,
  "title": "Incorrect metahash byte array with long (> 255) names in MRU",
  "user": {
    "login": "DieMyst",
    "id": 4075572,
    "node_id": "MDQ6VXNlcjQwNzU1NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4075572?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DieMyst",
    "html_url": "https://github.com/DieMyst",
    "followers_url": "https://api.github.com/users/DieMyst/followers",
    "following_url": "https://api.github.com/users/DieMyst/following{/other_user}",
    "gists_url": "https://api.github.com/users/DieMyst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DieMyst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DieMyst/subscriptions",
    "organizations_url": "https://api.github.com/users/DieMyst/orgs",
    "repos_url": "https://api.github.com/users/DieMyst/repos",
    "events_url": "https://api.github.com/users/DieMyst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DieMyst/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-09-03T08:52:13Z",
  "updated_at": "2019-10-16T09:16:05Z",
  "closed_at": "2019-10-16T09:16:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\n```Geth\r\nVersion: 1.8.13-unstable\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.10.1\r\nOperating System: linux\r\n```\r\n\r\n\r\n```Swarm\r\nVersion: 0.3.2-stable\r\nGit Commit: 316fc7ecfc10d06603f1358c1f4c1020ec36dd2a\r\nGo Version: go1.10.1\r\nOS: linux\r\n```\r\n\r\n#### Expected behaviour\r\n\r\nIf I use a name with a length greater than 255 symbols, it is trimmed to 255 and with a trimmed name metahash is generated. Length of a byte array consists of name length (< 255) and other fields.\r\n\r\n#### Actual behaviour\r\n\r\nFor now, the name is trimmed correctly. but an array is created with full name length, so with name length greater than 255 there are a lot of extra zeros in the metahash byte array, and the metahash is not generated as expected.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nCreate a mutable resource with name length greater than 255.\r\n\r\n#### Backtrace\r\n\r\nWe can use request_test.go. If we change the name to a long one, we will get a confusing metahash byte array.\r\n\r\n```\r\ncreateRequest, err := NewCreateRequest(&ResourceMetadata{\r\n\t\tName:      \"a good resource name\" + strings.Repeat(\"some other word\", 30),\r\n\t\tFrequency: 300,\r\n\t\tStartTime: Timestamp{Time: 1528900000},\r\n\t\tOwner:     signer.Address()})\r\n```\r\nMetahash:\r\n```\r\n0 0 251 1 160 41 33 91 0 0 0 0 44 1 0 0 0 0 0 0 255 97 32 103 111 111 100 32 114 101 115 111 117 114 99 101 32 110 97 109 101 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 32 119 111 114 100 115 111 109 101 32 111 116 104 101 114 135 106 137 54 167 205 11 121 239 7 53 173 8 150 193 175 226 120 120 28 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]\r\n```\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/527815451",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17574#issuecomment-527815451",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17574",
    "id": 527815451,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNzgxNTQ1MQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-09-04T09:12:47Z",
    "updated_at": "2019-09-04T09:12:47Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/527815451/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

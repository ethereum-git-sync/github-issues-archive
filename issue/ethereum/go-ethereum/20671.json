{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20671",
  "id": 565224472,
  "node_id": "MDU6SXNzdWU1NjUyMjQ0NzI=",
  "number": 20671,
  "title": "Rotate nodeId",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1380070748,
      "node_id": "MDU6TGFiZWwxMzgwMDcwNzQ4",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:p2p",
      "name": "area:p2p",
      "color": "ea9adb",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-02-14T10:04:43Z",
  "updated_at": "2020-02-20T08:21:03Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "When geth first boots up, it generates a `nodeId`. The `nodeId` is never regenerated, and uniqely identifies the node in the network. \r\nThe `nodeId` is stored as `nodekey` in the datadir. There are some problems around privacy, with the nodeid.\r\n\r\n- It enables 'tracking'. A user who moves between different geographical locations can be tracked. By seeing how a unique node moves, it can be possible to identify the human behind the node. \r\n\r\nThis can be solved by rotating the nodeid. However, there are problems with that aswell, \r\n\r\n- If the node id is rotated too frequently, it causes a churn on the kademlia table.\r\n\r\nSo there are different ways we can do that. \r\n\r\n1. Rotate nodeid every `N` days/weeks (with some randomness). This is the most naive way to implement it, and makes tracking more difficult, but not impossible. \r\n2. Tie `nodeid` to external ip address. When geth boots up, it figures out the external IP. If it has been changed, it generates a new nodeid. This would prevent tracking, it would enable stable nodeid's for long-lived servers. The downside is that in order to figure out the external IP, geth would need to use a temporary nodeid first, and then change nodeid after ip discovery. \r\n3. ? \r\n  ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/587940291",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20671#issuecomment-587940291",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671",
    "id": 587940291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4Nzk0MDI5MQ==",
    "user": {
      "login": "flgh",
      "id": 33400822,
      "node_id": "MDQ6VXNlcjMzNDAwODIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/33400822?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flgh",
      "html_url": "https://github.com/flgh",
      "followers_url": "https://api.github.com/users/flgh/followers",
      "following_url": "https://api.github.com/users/flgh/following{/other_user}",
      "gists_url": "https://api.github.com/users/flgh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flgh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flgh/subscriptions",
      "organizations_url": "https://api.github.com/users/flgh/orgs",
      "repos_url": "https://api.github.com/users/flgh/repos",
      "events_url": "https://api.github.com/users/flgh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flgh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-18T22:39:46Z",
    "updated_at": "2020-02-18T22:39:46Z",
    "author_association": "NONE",
    "body": "hash of (operating system boot time + bound ip address) ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/587940291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/588747002",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20671#issuecomment-588747002",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20671",
    "id": 588747002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODc0NzAwMg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-20T08:21:02Z",
    "updated_at": "2020-02-20T08:21:02Z",
    "author_association": "MEMBER",
    "body": "> hash of (operating system boot time + bound ip address) ?\r\n\r\nThe problem is not so much to figure out a method of seeding. The problem of 2) is that actually figuring out the external IP requires some networking. Regarding the algo suggestion, I'm not sure why one would want to factor in boot time? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/588747002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

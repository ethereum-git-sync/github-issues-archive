{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20709",
  "id": 569639700,
  "node_id": "MDU6SXNzdWU1Njk2Mzk3MDA=",
  "number": 20709,
  "title": "What is safe memory limit for geth",
  "user": {
    "login": "mesudip",
    "id": 11131298,
    "node_id": "MDQ6VXNlcjExMTMxMjk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/11131298?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mesudip",
    "html_url": "https://github.com/mesudip",
    "followers_url": "https://api.github.com/users/mesudip/followers",
    "following_url": "https://api.github.com/users/mesudip/following{/other_user}",
    "gists_url": "https://api.github.com/users/mesudip/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mesudip/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mesudip/subscriptions",
    "organizations_url": "https://api.github.com/users/mesudip/orgs",
    "repos_url": "https://api.github.com/users/mesudip/repos",
    "events_url": "https://api.github.com/users/mesudip/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mesudip/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-02-24T05:11:50Z",
  "updated_at": "2020-09-12T09:02:39Z",
  "closed_at": "2020-09-12T09:02:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\nI recently ran into OOMKilled message with my docker geth instance.\r\n\r\n#### System information\r\n\r\nGeth version: `1.9.12-unstable-6ffee2af-20200221`\r\nOS & Version: Linux 4.15.0-55-generic inside Docker image\r\n\r\n#### Expected behavior\r\n5.5G memory should be more than sufficient when the cache size is set to 1024\r\n\r\n#### Actual behaviour\r\nThe container was killed with reason `OOMKilled` (Out Of Memory)\r\n\r\n#### Steps to reproduce the behaviour\r\nI was using 1.8 version that was working fine under the limit for about 4 months.\r\nI upgraded to latest version and later It was killed.\r\n\r\n#### Backtrace\r\n\r\n````json\r\n{\r\n        \"Id\": \"07915d2eabcd0c8c3f47f92d1b2a390fc3b7ae1369588653dc1d19cc31cf7601\",\r\n        \"Created\": \"2020-02-23T18:36:18.356205081Z\",\r\n        \"Path\": \"geth\",\r\n        \"Args\": [\r\n            \"--rpc\",\r\n            \"--rpcapi\",\r\n            \"db,eth,net,web3\",\r\n            \"--rpcaddr\",\r\n            \"0.0.0.0\",\r\n            \"--rpcport\",\r\n            \"8545\",\r\n            \"--rpcvhosts\",\r\n            \"*\",\r\n            \"--ws\",\r\n            \"--wsapi\",\r\n            \"db,eth,net,web3\",\r\n            \"--wsaddr\",\r\n            \"0.0.0.0\",\r\n            \"--wsport\",\r\n            \"8546\",\r\n            \"--wsorigins\",\r\n            \"*\",\r\n            \"--cache\",\r\n            \"1024\"\r\n        ],\r\n        \"State\": {\r\n            \"Status\": \"exited\",\r\n            \"Running\": false,\r\n            \"Paused\": false,\r\n            \"Restarting\": false,\r\n            \"OOMKilled\": true,\r\n            \"Dead\": false,\r\n            \"Pid\": 0,\r\n            \"ExitCode\": 137,\r\n            \"Error\": \"\",\r\n            \"StartedAt\": \"2020-02-23T18:36:21.488901932Z\",\r\n            \"FinishedAt\": \"2020-02-23T23:51:56.066285084Z\"\r\n        },\r\n        \"Image\": \"sha256:e4729995ebd6327c1e9eb3f245dbf6bc5898f75417b9bc0208a0a52f952e9e5b\",\r\n        \"Isolation\": \"default\",\r\n        \"CpuShares\": 0,\r\n        \"Memory\": 5905580032\r\n}\r\n````\r\n",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/590272733",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20709#issuecomment-590272733",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709",
    "id": 590272733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDI3MjczMw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T11:15:52Z",
    "updated_at": "2020-02-24T11:15:52Z",
    "author_association": "MEMBER",
    "body": "Indeed it should not use that much with a cache of 1GB. Are you making public RPC queries against this node? If you open it up for the entire world, you might end up with bots running queries against it. So you have any logs from the node? Memory usage charts perhaps (monitoring?)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/590272733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/596223681",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20709#issuecomment-596223681",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709",
    "id": 596223681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjIyMzY4MQ==",
    "user": {
      "login": "mesudip",
      "id": 11131298,
      "node_id": "MDQ6VXNlcjExMTMxMjk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11131298?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mesudip",
      "html_url": "https://github.com/mesudip",
      "followers_url": "https://api.github.com/users/mesudip/followers",
      "following_url": "https://api.github.com/users/mesudip/following{/other_user}",
      "gists_url": "https://api.github.com/users/mesudip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mesudip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mesudip/subscriptions",
      "organizations_url": "https://api.github.com/users/mesudip/orgs",
      "repos_url": "https://api.github.com/users/mesudip/repos",
      "events_url": "https://api.github.com/users/mesudip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mesudip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-08T16:26:28Z",
    "updated_at": "2020-03-08T16:36:52Z",
    "author_association": "NONE",
    "body": "This time, the port exposed was only `30303`. Yet it was `OOMKilled` after 8 days. Also, for a node already synced, It's doing a lot of disk/network I/O. \r\n```\r\nCONTAINER ID        NAME                                           CPU %               MEM USAGE / LIMIT   MEM %               NET I/O             BLOCK I/O           PIDS\r\n886f269002ec        ethereum_mainnet.1.tkbfwhrl52xp8rfnxbzp5f9ng   134.43%             4.406GiB / 5.5GiB   80.11%              35.4GB / 53.4GB     671GB / 158GB       73\r\n# docker ps -a | grep geth\r\n886f269002ec        ethereum/client-go:latest                 \"geth --rpc --rpcapi…\"   45 hours ago   Up 45 hours                    ethereum_mainnet.1.tkbfwhrl52xp8rfnxbzp5f9ng\r\naf0ac4ce450a        ethereum/client-go:latest                 \"geth --rpc --rpcapi…\"   10 days ago    Exited (137) 45 hours ago      ethereum_mainnet.1.vg6n2z345axoxkj8y65642pcq\r\n```\r\n\r\n**Geth `1.8.27-stable`** on my another machine is running fine for a month now.\r\n```\r\nCONTAINER ID        NAME                                      CPU %               MEM USAGE / LIMIT   MEM %               NET I/O             BLOCK I/O           PIDS\r\nea4e985483cc        mainnet_eth.1.qec7ytckdokuzsmues39vhrm7   91.38%              5.113GiB / 5.5GiB   92.96%              180GB / 278GB       7.15TB / 1.56TB     28\r\n\r\n# docker ps -a | grep ethereum\r\nea4e985483cc        ethereum/client-go:latest    \"geth --rpc --rpcapi…\"   4 weeks ago         Up 4 weeks                 8545-8547/tcp, 0.0.0.0:30304->30303/tcp, 0.0.0.0:30304->30303/udp   mainnet_eth.1.qec7ytckdokuzsmues39vhrm7\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/596223681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673348309",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20709#issuecomment-673348309",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709",
    "id": 673348309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzM0ODMwOQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T08:45:00Z",
    "updated_at": "2020-08-13T08:45:00Z",
    "author_association": "MEMBER",
    "body": "This ticket is pretty old. Does this still persist? If it does, do you have any crash-dump with the full stack trace available? Those will help investigate issues with e.g. blocked/locked go-routines piling up",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673348309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/691450272",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20709#issuecomment-691450272",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20709",
    "id": 691450272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTQ1MDI3Mg==",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-09-12T09:02:38Z",
    "updated_at": "2020-09-12T09:02:38Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/691450272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

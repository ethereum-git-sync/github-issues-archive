{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23738",
  "id": 1026639908,
  "node_id": "I_kwDOAOvK9849MUgk",
  "number": 23738,
  "title": "eth/fetcher fails nilness static analysis check",
  "user": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-10-14T17:18:12Z",
  "updated_at": "2021-10-18T20:34:21Z",
  "closed_at": "2021-10-18T20:34:21Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: develop\r\nOS & Version: Linux\r\nCommit hash : 08e782c61ff5eb1f5890238c970c95bc6d19c3a6\r\n\r\n#### Expected behaviour\r\n\r\n```\r\ngo run golang.org/x/tools/go/analysis/passes/nilness/cmd/nilness github.com/ethereum/go-ethereum/eth/fetcher\r\n# no results\r\n```\r\n\r\n#### Actual behaviour\r\n\r\n```\r\ngo run golang.org/x/tools/go/analysis/passes/nilness/cmd/nilness github.com/ethereum/go-ethereum/eth/fetcher\r\n-: impossible condition: non-nil == nil\r\nexit status 3\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\ngo get -u golang.org/x/tools/...\r\ngo run golang.org/x/tools/go/analysis/passes/nilness/cmd/nilness github.com/ethereum/go-ethereum/eth/fetcher\r\n```\r\n\r\nDue to https://github.com/golang/go/issues/31008, the nilness check results returns almost no helpful information. \r\nI'm not sure exactly where the nilness check is failing. \r\nThe nilness check result does not return the filename, line number, or autofix. \r\n\r\nMore info on this analysis check\r\n```\r\nThe nilness checker inspects the control-flow graph of each function in\r\na package and reports nil pointer dereferences, degenerate nil\r\npointers, and panics with nil values. A degenerate comparison is of the form\r\nx==nil or x!=nil where x is statically known to be nil or non-nil. These are\r\noften a mistake, especially in control flow related to errors. Panics with nil\r\nvalues are checked because they are not detectable by\r\n\tif r := recover(); r != nil {\r\nThis check reports conditions such as:\r\n\tif f == nil { // impossible condition (f is a function)\r\n\t}\r\nand:\r\n\tp := &v\r\n\t...\r\n\tif p != nil { // tautological condition\r\n\t}\r\nand:\r\n\tif p == nil {\r\n\t\tprint(*p) // nil dereference\r\n\t}\r\nand:\r\n\tif p == nil {\r\n\t\tpanic(p)\r\n\t}\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\n````\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/943569270",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23738#issuecomment-943569270",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738",
    "id": 943569270,
    "node_id": "IC_kwDOAOvK9844Pbl2",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T17:29:58Z",
    "updated_at": "2021-10-14T17:29:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "After some hacking around with the nilness analyzer, I've identified that this is the line that causes issue (L280).\r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/08e782c61ff5eb1f5890238c970c95bc6d19c3a6/eth/fetcher/tx_fetcher.go#L278-L280",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/943569270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/945421257",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23738#issuecomment-945421257",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23738",
    "id": 945421257,
    "node_id": "IC_kwDOAOvK9844WfvJ",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-18T06:59:12Z",
    "updated_at": "2021-10-18T06:59:12Z",
    "author_association": "MEMBER",
    "body": "I suppose it's line `280` followed by line `292` ? \r\nhttps://github.com/ethereum/go-ethereum/blob/08e782c61ff5eb1f5890238c970c95bc6d19c3a6/eth/fetcher/tx_fetcher.go#L292 ? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/945421257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

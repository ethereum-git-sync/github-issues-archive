{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27088",
  "id": 1664217623,
  "node_id": "I_kwDOAOvK985jMfIX",
  "number": 27088,
  "title": "Include version in exported metrics",
  "user": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-12T09:44:42Z",
  "updated_at": "2023-04-14T09:24:30Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Rationale\r\n\r\nMost software that exports metrics, exports also a special metric which provides software version.\r\n\r\nHere's an example from [Nimbus Beacon Node](https://github.com/status-im/nimbus-eth2):\r\n```sh\r\n > curl -s http://localhost:9200/metrics | grep '^version'\r\nversion{version=\"v23.3.2-6c0d75-stateofus\",commit=\"6c0d75\"} 1.0\r\nversion_created{version=\"v23.3.2-6c0d75-stateofus\",commit=\"6c0d75\"} 1680679179.0\r\n```\r\nThis allows for easy tracking of current deployed version as well as version changes over time:\r\n\r\n![image](https://user-images.githubusercontent.com/2212681/231417409-e192a1bc-ae15-4048-8d13-abe10318c8ca.png)\r\n\r\n# Implementation\r\n\r\nAn example of how this can be implemented when using `prometheus/client_golang` can be found here:\r\n\r\n* https://github.com/prometheus/client_golang/issues/693",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1508201012",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27088#issuecomment-1508201012",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088",
    "id": 1508201012,
    "node_id": "IC_kwDOAOvK985Z5VI0",
    "user": {
      "login": "SecureCodeSolutionsDev",
      "id": 90088130,
      "node_id": "MDQ6VXNlcjkwMDg4MTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/90088130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SecureCodeSolutionsDev",
      "html_url": "https://github.com/SecureCodeSolutionsDev",
      "followers_url": "https://api.github.com/users/SecureCodeSolutionsDev/followers",
      "following_url": "https://api.github.com/users/SecureCodeSolutionsDev/following{/other_user}",
      "gists_url": "https://api.github.com/users/SecureCodeSolutionsDev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SecureCodeSolutionsDev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SecureCodeSolutionsDev/subscriptions",
      "organizations_url": "https://api.github.com/users/SecureCodeSolutionsDev/orgs",
      "repos_url": "https://api.github.com/users/SecureCodeSolutionsDev/repos",
      "events_url": "https://api.github.com/users/SecureCodeSolutionsDev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SecureCodeSolutionsDev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-14T09:12:34Z",
    "updated_at": "2023-04-14T09:12:34Z",
    "author_association": "NONE",
    "body": "That's a great suggestion. Including a metric that provides software version information can be very useful for tracking the current deployed version as well as version changes over time. \r\n\r\nTo implement this using `prometheus/client_golang`, you can use the `prometheus.NewBuildInfoCollector()` function to create a new collector for the `_build_info` metric. This collector will automatically gather information about the software version and commit hash, and expose it as a metric that can be scraped by Prometheus.\r\n\r\nHere's an example of how you can use this function to create a new collector:\r\n\r\n```\r\nimport (\r\n    \"github.com/prometheus/client_golang/prometheus\"\r\n    \"github.com/prometheus/client_golang/prometheus/promauto\"\r\n)\r\n\r\nfunc main() {\r\n    // Create a new collector for the _build_info metric\r\n    buildInfo := prometheus.NewBuildInfoCollector()\r\n    // Register the collector with the default registry\r\n    prometheus.MustRegister(buildInfo)\r\n\r\n    // Your application code here\r\n}\r\n```\r\n\r\nOnce you have registered the `_build_info` collector, you should be able to see the metric in the Prometheus UI and use it to track the software version over time.\r\n\r\nIn the context of the code you provided, `prometheus` refers to the `prometheus/client_golang` library, which is a Go client library for Prometheus. This library provides a set of functions and types that make it easy to instrument your Go code and expose metrics to Prometheus.\r\n\r\nBy using this library, you can create custom metrics, collect data from your application, and expose it to Prometheus for monitoring and alerting. The library provides a simple and intuitive API for creating and registering metrics, and it integrates seamlessly with the Prometheus server.\r\n\r\n`Prometheus is a monitoring and alerting toolkit that is widely used in the industry to monitor and collect metrics from various systems. It is an open-source project that provides a powerful query language, a flexible data model, and a web UI for visualizing and alerting on metrics`.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1508201012/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1508217535",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27088#issuecomment-1508217535",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27088",
    "id": 1508217535,
    "node_id": "IC_kwDOAOvK985Z5ZK_",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-14T09:24:30Z",
    "updated_at": "2023-04-14T09:24:30Z",
    "author_association": "NONE",
    "body": "It does appear that `go-ethereum` does indeed use `client_golang` library:\r\nhttps://github.com/ethereum/go-ethereum/blob/4a9fa31450d3cdcea84735b68cd5a0a8450473f8/go.mod#L111\r\n\r\nSo that makes this simpler.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1508217535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21764",
  "id": 732404459,
  "node_id": "MDU6SXNzdWU3MzI0MDQ0NTk=",
  "number": 21764,
  "title": "Geth remote central server with local keystores",
  "user": {
    "login": "bogdangainusa",
    "id": 13803843,
    "node_id": "MDQ6VXNlcjEzODAzODQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/13803843?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bogdangainusa",
    "html_url": "https://github.com/bogdangainusa",
    "followers_url": "https://api.github.com/users/bogdangainusa/followers",
    "following_url": "https://api.github.com/users/bogdangainusa/following{/other_user}",
    "gists_url": "https://api.github.com/users/bogdangainusa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bogdangainusa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bogdangainusa/subscriptions",
    "organizations_url": "https://api.github.com/users/bogdangainusa/orgs",
    "repos_url": "https://api.github.com/users/bogdangainusa/repos",
    "events_url": "https://api.github.com/users/bogdangainusa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bogdangainusa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2020-10-29T15:14:49Z",
  "updated_at": "2021-11-03T18:21:19Z",
  "closed_at": "2021-11-03T18:21:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nWe are running multiple wallets and each wallet is connected to local geth. Because of high usage we created one central geth and we connected our wallets to this remote geth. \r\nOur issue here is that the keystores are stored on remote geth and we want them to be saved on the machine from where we're sending this requests to our central geth. \r\n\r\nHow we can manage to connect our wallets to one central geth but to save keystores locally on server from where we are sending this requests to central geth?\r\n\r\nIs there any documentation available? Tried different setup using ssh tunnels but it seems keystores are still generated on remote central geth server. \r\n\r\nThank you. ",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/720967511",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-720967511",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 720967511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDk2NzUxMQ==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T08:12:21Z",
    "updated_at": "2020-11-03T08:12:21Z",
    "author_association": "MEMBER",
    "body": "The easiest way to do this is probably using clef: https://geth.ethereum.org/docs/clef/tutorial",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/720967511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721892419",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-721892419",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 721892419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTg5MjQxOQ==",
    "user": {
      "login": "bogdangainusa",
      "id": 13803843,
      "node_id": "MDQ6VXNlcjEzODAzODQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13803843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bogdangainusa",
      "html_url": "https://github.com/bogdangainusa",
      "followers_url": "https://api.github.com/users/bogdangainusa/followers",
      "following_url": "https://api.github.com/users/bogdangainusa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bogdangainusa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bogdangainusa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bogdangainusa/subscriptions",
      "organizations_url": "https://api.github.com/users/bogdangainusa/orgs",
      "repos_url": "https://api.github.com/users/bogdangainusa/repos",
      "events_url": "https://api.github.com/users/bogdangainusa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bogdangainusa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-04T18:14:34Z",
    "updated_at": "2020-11-04T18:15:22Z",
    "author_association": "NONE",
    "body": "@MariusVanDerWijden Thanks for your response but it seems using clef i wasn't able to store keystore locally if we're sending curl request to geth which is running on another server/ip. \r\n\r\nCurrently this is a big issue for us and at this point it makes no sense to run geth on each server from where we're sending such requests and keystores are stored on central geth and not on local server.\r\n\r\n\r\nIf someone else got another idea how to achieve this i will really appreciate it. It seems geth didn't provide any documentation for such important thing. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721892419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721902287",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-721902287",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 721902287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTkwMjI4Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-04T18:34:43Z",
    "updated_at": "2020-11-04T18:34:43Z",
    "author_association": "MEMBER",
    "body": "> Our issue here is that the keystores are stored on remote geth and we want them to be saved on the machine from where we're sending this requests to our central geth.\r\n\r\nWhat is your usecase? What are you doing on the local geth nodes? I don't understand why you need all this. If you want to generate a tx locally (using a local keystore), you can just use something like web3.js or web3.py to query the central geth for nonce, gasPrice, but craft the transaction locally. Locally, you _could_ use clef, or some other wallet backend (even geth, which you could theoreticaly run with `--nodiscover --maxpeers=0` to make it a totally idle node)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721902287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721966822",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-721966822",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 721966822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTk2NjgyMg==",
    "user": {
      "login": "bogdangainusa",
      "id": 13803843,
      "node_id": "MDQ6VXNlcjEzODAzODQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13803843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bogdangainusa",
      "html_url": "https://github.com/bogdangainusa",
      "followers_url": "https://api.github.com/users/bogdangainusa/followers",
      "following_url": "https://api.github.com/users/bogdangainusa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bogdangainusa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bogdangainusa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bogdangainusa/subscriptions",
      "organizations_url": "https://api.github.com/users/bogdangainusa/orgs",
      "repos_url": "https://api.github.com/users/bogdangainusa/repos",
      "events_url": "https://api.github.com/users/bogdangainusa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bogdangainusa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-04T20:47:35Z",
    "updated_at": "2020-11-04T20:48:25Z",
    "author_association": "NONE",
    "body": "@holiman  Currently we are running several wallet instances on multiple servers. \r\nBecause geth is requiring huge space in mainnetwork and we had issues after some time with geth sync we decided to create one central geth server.\r\n\r\nCurrently we're sending all curl requests to central geth and everything is managed by it. The only issue is that we need to have stored accounts keystores locally on servers from where we're sending this curl requests. \r\nAt this moment all keystores are stored on remote geth and we're searching for a solution to:\r\n- not run geth locally on each server where we're using our wallets (to avoid high server usage)\r\n- send requests to central geth server but keystores to be saved somehow on server from where we're sending this reuqests (when creating new account)\r\n\r\nThank you for your response, if something is unclear i will be happy to let you know more about our issue and how we can solve this. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721966822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721997483",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-721997483",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 721997483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTk5NzQ4Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-04T21:58:49Z",
    "updated_at": "2020-11-04T21:58:49Z",
    "author_association": "MEMBER",
    "body": "I still don't quite understand in what capacity the 'local geth' is needed. To craft transactions? To query stuff? \r\nOne way to manage it could also be to run local light-clients, which have fixed connection to the central one, which basically whitelists the local ones, so they always are given a light slot. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721997483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721998483",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-721998483",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 721998483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTk5ODQ4Mw==",
    "user": {
      "login": "bogdangainusa",
      "id": 13803843,
      "node_id": "MDQ6VXNlcjEzODAzODQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13803843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bogdangainusa",
      "html_url": "https://github.com/bogdangainusa",
      "followers_url": "https://api.github.com/users/bogdangainusa/followers",
      "following_url": "https://api.github.com/users/bogdangainusa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bogdangainusa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bogdangainusa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bogdangainusa/subscriptions",
      "organizations_url": "https://api.github.com/users/bogdangainusa/orgs",
      "repos_url": "https://api.github.com/users/bogdangainusa/repos",
      "events_url": "https://api.github.com/users/bogdangainusa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bogdangainusa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-04T22:01:11Z",
    "updated_at": "2020-11-04T22:01:11Z",
    "author_association": "NONE",
    "body": "@holiman  There is no needed in local geth, we just want to save keystores locally but transfers/blocks to be read from central geth using curl to the ip/port.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/721998483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/725400790",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-725400790",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 725400790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTQwMDc5MA==",
    "user": {
      "login": "bogdangainusa",
      "id": 13803843,
      "node_id": "MDQ6VXNlcjEzODAzODQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13803843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bogdangainusa",
      "html_url": "https://github.com/bogdangainusa",
      "followers_url": "https://api.github.com/users/bogdangainusa/followers",
      "following_url": "https://api.github.com/users/bogdangainusa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bogdangainusa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bogdangainusa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bogdangainusa/subscriptions",
      "organizations_url": "https://api.github.com/users/bogdangainusa/orgs",
      "repos_url": "https://api.github.com/users/bogdangainusa/repos",
      "events_url": "https://api.github.com/users/bogdangainusa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bogdangainusa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-11T12:39:44Z",
    "updated_at": "2020-11-11T12:40:01Z",
    "author_association": "NONE",
    "body": "@holiman Do you have any other suggestion for this? \r\nP.S: Tried to run geth locally on our servers in light mode but it seems it's stuck on all servers and won't find any available peers even after 4-5 hours.\r\n`INFO [11-11|12:26:01.926] Looking for peers                        peercount=0 tried=1 static=0`\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/725400790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959802521",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21764#issuecomment-959802521",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21764",
    "id": 959802521,
    "node_id": "IC_kwDOAOvK9845NWyZ",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T18:21:18Z",
    "updated_at": "2021-11-03T18:21:18Z",
    "author_association": "MEMBER",
    "body": "> I still don't quite understand in what capacity the 'local geth' is needed. To craft transactions? To query stuff?\r\n\r\nI still don't understand. \r\n\r\n> Our issue here is that the keystores are stored on remote geth and we want them to be saved on the machine from where we're sending this requests to our central geth.\r\n\r\nThat sounds like a bad idea. Your local nodes will be sending passwords to the central server, which will be handling unencrypted keys. It's nearly the same as the central server having them all unlocked. You're better off signing the transactions locally, where the keystores are today. \r\n\r\n> How we can manage to connect our wallets to one central geth but to save keystores locally on server from where we are sending this requests to central geth?\r\n\r\nJust use local geth nodes. If you don't want them to be blockchain-aware, set `--no-discover --maxpeers=0` and just use them for signing `eth_signTransaction` (or use clef) and then submit the raw signed transactions to the central node . Oh, and also use the central node to query for nonces and gasprice etc. You can use `eth_fillTransaction` to make it filll the details. \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959802521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

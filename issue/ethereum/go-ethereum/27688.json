{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27688",
  "id": 1796371847,
  "node_id": "I_kwDOAOvK985rEnWH",
  "number": 27688,
  "title": "getLogs timeouts since block 9160000 on Goerli",
  "user": {
    "login": "MattKetmo",
    "id": 334996,
    "node_id": "MDQ6VXNlcjMzNDk5Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/334996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MattKetmo",
    "html_url": "https://github.com/MattKetmo",
    "followers_url": "https://api.github.com/users/MattKetmo/followers",
    "following_url": "https://api.github.com/users/MattKetmo/following{/other_user}",
    "gists_url": "https://api.github.com/users/MattKetmo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MattKetmo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MattKetmo/subscriptions",
    "organizations_url": "https://api.github.com/users/MattKetmo/orgs",
    "repos_url": "https://api.github.com/users/MattKetmo/repos",
    "events_url": "https://api.github.com/users/MattKetmo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MattKetmo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-07-10T09:37:03Z",
  "updated_at": "2023-08-10T15:47:13Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello I noticed since block **9160000** on **Goerli** the `eth_getLogs` requests are becoming extremely slow.\r\n\r\n## System information\r\n\r\n- Geth version: `1.12.0-stable (e501b3)` \r\n- CL client & version: e.g. lighthouse/prysm\r\n- OS & Version: Linux\r\n\r\n## Steps to reproduce the behaviour\r\n\r\nExample using `eth_getLogs` with a non-existing address & topic on a 100k block range (result should be empty logs)\r\n\r\nWith geth, timeout after 30s:\r\n\r\n```bash\r\nETH_EL_ADDR=\"http://localhost:8545\"\r\n\r\ncurl -X POST \"$ETH_EL_ADDR\" -H \"Content-Type: application/json\" \\\r\n  --data '{\"method\":\"eth_getLogs\",\"params\":[{\"address\": \"0x1234567890123456789012345678901234567890\", \"fromBlock\": \"0x'$(printf \"%x\" 9160000)'\", \"toBlock\": \"0x'$(printf \"%x\" 9260000)'\", \"topics\": [\"0x1234567890123456789012345678901234567890123456789012345678901234\"]}],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32002,\"message\":\"request timed out\"}}%\r\n```\r\n\r\nSame example with Erigon, correct response under 1s:\r\n```bash\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":[]}\r\n```\r\n\r\n## Actual behaviour\r\n\r\nFor comparison, I made some benchmark using different block range & different contracts.\r\n\r\nHere is the script I used to produce the data:\r\n\r\n```bash\r\nETH_EL_ADDR=\"http://localhost:8545\"\r\n\r\n# Example with Deposit events\r\nADDRESS=\"0xFF50ED3D0EC03AC01D4C79AAD74928BFF48A7B2B\"\r\nTOPIC=\"0x649BBC62D0E31342AFEA4E5CD82D4049E7E1EE912FC0889AA790803BE39038C5\"\r\n\r\nfor i in {0..36}; do\r\n  from=$(( 8960000 + $i * 10000 ))\r\n  to=$(( $from + 10000 ))\r\n  echo -n \"$from\\t$to\\t\"\r\n\r\n  start=$(date +%s)\r\n  result=$(curl -sX POST \"$ETH_EL_ADDR\" -H \"Content-Type: application/json\" --data '{\"method\":\"eth_getLogs\",\"params\":[{\"address\": \"'$(echo $ADDRESS)'\", \"fromBlock\": \"0x'$(printf \"%x\" $from)'\", \"toBlock\": \"0x'$(printf \"%x\" $to)'\", \"topics\": [\"'$(echo $TOPIC)'\"]}],\"id\":1,\"jsonrpc\":\"2.0\"}' | jq -c 'if has(\"error\") then .error else .result | length end')\r\n  end=$(date +%s)\r\n  echo \"$(($end - $start))\\t$result\"\r\ndone\r\n\r\n```\r\n\r\n### 1. The Deposit contract with 10k block range\r\n\r\n(This is a very frequent event)\r\n\r\n![image](https://github.com/ethereum/go-ethereum/assets/334996/c3a67173-538e-4fe7-b675-20ae475f95b4)\r\n\r\n<details><summary>Details</summary>\r\n\r\n\r\nBLOCK NUMBER | TO | RESPONSE TIME | RESULT\r\n-- | -- | -- | --\r\n8960000 | 8970000 | 2 | 336\r\n8970000 | 8980000 | 3 | 666\r\n8980000 | 8990000 | 4 | 2034\r\n8990000 | 9000000 | 1 | 665\r\n9000000 | 9010000 | 7 | 2223\r\n9010000 | 9020000 | 0 | 601\r\n9020000 | 9030000 | 5 | 1648\r\n9030000 | 9040000 | 6 | 233\r\n9040000 | 9050000 | 4 | 481\r\n9050000 | 9060000 | 4 | 626\r\n9060000 | 9070000 | 1 | 505\r\n9070000 | 9080000 | 1 | 279\r\n9080000 | 9090000 | 9 | 501\r\n9090000 | 9100000 | 2 | 588\r\n9100000 | 9110000 | 3 | 271\r\n9110000 | 9120000 | 3 | 418\r\n9120000 | 9130000 | 3 | 888\r\n9130000 | 9140000 | 1 | 319\r\n9140000 | 9150000 | 2 | 524\r\n9150000 | 9160000 | 1 | 102\r\n9160000 | 9170000 | 30 | {\"code\":-32002,\"message\":\"request timed out\"}\r\n9170000 | 9180000 | 13 | 1749\r\n9180000 | 9190000 | 3 | 4317\r\n9190000 | 9200000 | 2 | 395\r\n9200000 | 9210000 | 19 | 1048\r\n9210000 | 9220000 | 28 | 5288\r\n9220000 | 9230000 | 10 | 895\r\n9230000 | 9240000 | 30 | {\"code\":-32002,\"message\":\"request timed out\"}\r\n9240000 | 9250000 | 28 | 1768\r\n9250000 | 9260000 | 2 | 603\r\n9260000 | 9270000 | 1 | 616\r\n9270000 | 9280000 | 18 | 726\r\n9280000 | 9290000 | 8 | 3142\r\n9290000 | 9300000 | 20 | 684\r\n9300000 | 9310000 | 6 | 1894\r\n9310000 | 9320000 | 23 | 134\r\n9320000 | 9330000 | 3 | 111\r\n\r\n\r\n\r\n</details> \r\n\r\n### 2. My contract with 10k block range\r\n\r\n(This event is emitted occasionally)\r\n\r\n![image](https://github.com/ethereum/go-ethereum/assets/334996/6934cd39-1f7b-4a0b-a495-21018245918c)\r\n\r\n<details><summary>Details</summary>\r\n\r\nFROM | TO | RESPONSE TIME | RESULT\r\n-- | -- | -- | --\r\n8960000 | 8970000 | 0 | 0\r\n8970000 | 8980000 | 1 | 0\r\n8980000 | 8990000 | 0 | 0\r\n8990000 | 9000000 | 0 | 0\r\n9000000 | 9010000 | 5 | 0\r\n9010000 | 9020000 | 0 | 0\r\n9020000 | 9030000 | 0 | 0\r\n9030000 | 9040000 | 2 | 0\r\n9040000 | 9050000 | 1 | 1\r\n9050000 | 9060000 | 1 | 0\r\n9060000 | 9070000 | 0 | 2\r\n9070000 | 9080000 | 1 | 0\r\n9080000 | 9090000 | 11 | 0\r\n9090000 | 9100000 | 1 | 0\r\n9100000 | 9110000 | 3 | 0\r\n9110000 | 9120000 | 2 | 0\r\n9120000 | 9130000 | 0 | 0\r\n9130000 | 9140000 | 0 | 0\r\n9140000 | 9150000 | 0 | 0\r\n9150000 | 9160000 | 0 | 0\r\n9160000 | 9170000 | 22 | 0\r\n9170000 | 9180000 | 13 | 0\r\n9180000 | 9190000 | 0 | 1\r\n9190000 | 9200000 | 1 | 0\r\n9200000 | 9210000 | 6 | 2\r\n9210000 | 9220000 | 22 | 0\r\n9220000 | 9230000 | 6 | 0\r\n9230000 | 9240000 | 30 | {\"code\":-32002,\"message\":\"request timed out\"}\r\n9240000 | 9250000 | 23 | 0\r\n9250000 | 9260000 | 0 | 1\r\n9260000 | 9270000 | 0 | 0\r\n9270000 | 9280000 | 8 | 2\r\n9280000 | 9290000 | 11 | 0\r\n9290000 | 9300000 | 16 | 0\r\n9300000 | 9310000 | 4 | 4\r\n9310000 | 9320000 | 23 | 0\r\n\r\n</details> \r\n\r\n\r\n### 3. Random (non-existing) contract address\r\n\r\n(this event is never emitted)\r\n\r\n![image](https://github.com/ethereum/go-ethereum/assets/334996/05f30206-69cd-418e-8c36-e49b5952790b)\r\n\r\n<details><summary>Details</summary>\r\n\r\nBLOCK NUBMER | TO | RESPONSE TIME | RESULT\r\n-- | -- | -- | --\r\n8960000 | 8970000 | 0 | 0\r\n8970000 | 8980000 | 0 | 0\r\n8980000 | 8990000 | 0 | 0\r\n8990000 | 9000000 | 1 | 0\r\n9000000 | 9010000 | 3 | 0\r\n9010000 | 9020000 | 0 | 0\r\n9020000 | 9030000 | 1 | 0\r\n9030000 | 9040000 | 1 | 0\r\n9040000 | 9050000 | 1 | 0\r\n9050000 | 9060000 | 0 | 0\r\n9060000 | 9070000 | 1 | 0\r\n9070000 | 9080000 | 1 | 0\r\n9080000 | 9090000 | 7 | 0\r\n9090000 | 9100000 | 1 | 0\r\n9100000 | 9110000 | 2 | 0\r\n9110000 | 9120000 | 2 | 0\r\n9120000 | 9130000 | 1 | 0\r\n9130000 | 9140000 | 0 | 0\r\n9140000 | 9150000 | 0 | 0\r\n9150000 | 9160000 | 1 | 0\r\n9160000 | 9170000 | 21 | 0\r\n9170000 | 9180000 | 16 | 0\r\n9180000 | 9190000 | 0 | 0\r\n9190000 | 9200000 | 1 | 0\r\n9200000 | 9210000 | 7 | 0\r\n9210000 | 9220000 | 20 | 0\r\n9220000 | 9230000 | 9 | 0\r\n9230000 | 9240000 | 30 | {\"code\":-32002,\"message\":\"request timed out\"}\r\n9240000 | 9250000 | 23 | 0\r\n9250000 | 9260000 | 1 | 0\r\n9260000 | 9270000 | 1 | 0\r\n9270000 | 9280000 | 10 | 0\r\n9280000 | 9290000 | 12 | 0\r\n9290000 | 9300000 | 17 | 0\r\n9300000 | 9310000 | 3 | 0\r\n9310000 | 9320000 | 27 | 0\r\n\r\n\r\n</details> \r\n\r\nAs you can see, no matter if the filtered event is emitted a lot or not at all, geth is having trouble to fetch those logs on Goerli always starting from block 9160000 (until latest block).\r\n\r\nI haven't figured out what happened at that time, it's quite recent (June 11th 2023).\r\n\r\nMainnet is not impacted (yet).\r\n\r\n\r\n## Expected behaviour\r\n\r\nUsing `eth_getLogs` on a 100k block range with an event emitted occasionally should not time out and respond under 1s.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1629153890",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1629153890",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1629153890,
    "node_id": "IC_kwDOAOvK985hGupi",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-10T15:04:19Z",
    "updated_at": "2023-07-10T15:04:41Z",
    "author_association": "MEMBER",
    "body": "Hey thanks for the report and charts. We have some aggregate bloom filters for ranges of blocks that should prevent looking into too many blocks for an event that doesn't exist wastelessly. My guess is those are overflown. But interesting you say this slowdown is not seen on mainnet. We should reproduce this as a first step.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1629153890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1629225995",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1629225995",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1629225995,
    "node_id": "IC_kwDOAOvK985hHAQL",
    "user": {
      "login": "MattKetmo",
      "id": 334996,
      "node_id": "MDQ6VXNlcjMzNDk5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/334996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MattKetmo",
      "html_url": "https://github.com/MattKetmo",
      "followers_url": "https://api.github.com/users/MattKetmo/followers",
      "following_url": "https://api.github.com/users/MattKetmo/following{/other_user}",
      "gists_url": "https://api.github.com/users/MattKetmo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MattKetmo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MattKetmo/subscriptions",
      "organizations_url": "https://api.github.com/users/MattKetmo/orgs",
      "repos_url": "https://api.github.com/users/MattKetmo/repos",
      "events_url": "https://api.github.com/users/MattKetmo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MattKetmo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-10T15:45:58Z",
    "updated_at": "2023-07-10T15:45:58Z",
    "author_association": "NONE",
    "body": "About `Goerli` vs `Mainnet`, I notice the volume of logs has some huge spikes for a month on goerli. So indeed might have some optimisations to do when that happens. \r\n\r\n```sql\r\nSELECT\r\ndate_trunc('day', block_time) AS day,\r\nCOUNT(*) AS vol\r\nFROM goerli.logs\r\nWHERE block_time > date '2023-03-01'\r\nGROUP BY date_trunc('day', block_time)\r\n```    \r\n\r\n![CleanShot 2023-07-10 at 17 40 22](https://github.com/ethereum/go-ethereum/assets/334996/a41d4c37-a673-4eb3-969a-eb1054f1ee7c)\r\n\r\n```sql\r\nSELECT\r\ndate_trunc('day', block_time) AS day,\r\nCOUNT(*) AS vol\r\nFROM ethereum.logs\r\nWHERE block_time > date '2023-03-01'\r\nGROUP BY date_trunc('day', block_time)\r\n```\r\n\r\n![CleanShot 2023-07-10 at 17 40 57](https://github.com/ethereum/go-ethereum/assets/334996/2965ea94-8fd9-446c-a70a-e0ed3c7a774c)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1629225995/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1670598532",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1670598532",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1670598532,
    "node_id": "IC_kwDOAOvK985jk0-E",
    "user": {
      "login": "jsvisa",
      "id": 3627395,
      "node_id": "MDQ6VXNlcjM2MjczOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3627395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsvisa",
      "html_url": "https://github.com/jsvisa",
      "followers_url": "https://api.github.com/users/jsvisa/followers",
      "following_url": "https://api.github.com/users/jsvisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsvisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsvisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsvisa/subscriptions",
      "organizations_url": "https://api.github.com/users/jsvisa/orgs",
      "repos_url": "https://api.github.com/users/jsvisa/repos",
      "events_url": "https://api.github.com/users/jsvisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsvisa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T03:27:55Z",
    "updated_at": "2023-08-09T04:39:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems Geth's bloom filter did have some performance bottlenecks, it's fp is high(~30%), metriced by https://github.com/ethereum/go-ethereum/commit/4345e9e9b918c1a25516a496932396694c742023 and the request script looks like below:\r\n\r\n```python\r\nfrom time import time\r\nimport requests\r\n\r\nendpoint = \"http://127.0.0.1:8545\"\r\ntopic = \"0x1234567890123456789012345678901234567890123456789012345678900000\"\r\n# topic = \"0x74bbc026808dcba59692d6a8bb20596849ca718e10e2432c6cdf48af865bc5d9\"\r\n# topic = \"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\"\r\nstart = 9160000\r\n\r\nfor step in (10, 50, 100, 200, 300, 400, 500, 1000, 2000, 4000, 5000, 8000, 10000, 20000, 30000, 50000, 60000, 70000, 80000, 90000, 100000, 200000, 500000, 900000, 1000000):\r\n    req = dict(\r\n        jsonrpc=\"2.0\",\r\n        method=\"eth_getLogs\",\r\n        id=step,\r\n        params=[\r\n            {\r\n                \"fromBlock\": hex(start),\r\n                \"toBlock\": hex(start + step),\r\n                \"topics\": [topic],\r\n            }\r\n        ],\r\n    )\r\n\r\n    st0 = time()\r\n    r = requests.post(endpoint, json=req)\r\n    st1 = time()\r\n\r\n    print(\r\n        \"step: %06d[{%d, %d}], time: %fs logs: %d\"\r\n        % (step, start, start + step, st1 - st0, r.json()[\"result\"].__len__())\r\n    )\r\n\r\n    if st1 - st0 > 30:\r\n        break\r\n```\r\n\r\nRun Geth in Goerila:\r\n\r\n```bash\r\n./geth --goerli --nodiscover --maxpeers 0 --http --http.addr=0.0.0.0\r\n```\r\n\r\nAfter execute with the above python script, the logs in Geth looks like below:\r\n\r\n```\r\nERROR[08-09|02:57:08.543] indexedLogs                              falsed#=0    matched=0    fp%=0.000  total=10    begin=9,160,000 end=9,160,010 new-begin=9,160,011                                                                                                                                                  [0/0]\r\nERROR[08-09|02:57:08.602] indexedLogs                              falsed#=1    matched=1    fp%=2.000  total=50    begin=9,160,000 end=9,160,050 new-begin=9,160,051\r\nERROR[08-09|02:57:08.607] indexedLogs                              falsed#=1    matched=1    fp%=1.000  total=100   begin=9,160,000 end=9,160,100 new-begin=9,160,101\r\nERROR[08-09|02:57:08.652] indexedLogs                              falsed#=2    matched=2    fp%=1.000  total=200   begin=9,160,000 end=9,160,200 new-begin=9,160,201\r\nERROR[08-09|02:57:08.657] indexedLogs                              falsed#=2    matched=2    fp%=0.667  total=300   begin=9,160,000 end=9,160,300 new-begin=9,160,301\r\nERROR[08-09|02:57:08.715] indexedLogs                              falsed#=15   matched=15   fp%=3.750  total=400   begin=9,160,000 end=9,160,400 new-begin=9,160,401\r\nERROR[08-09|02:57:08.982] indexedLogs                              falsed#=69   matched=69   fp%=13.800 total=500   begin=9,160,000 end=9,160,500 new-begin=9,160,501\r\nERROR[08-09|02:57:09.904] indexedLogs                              falsed#=173  matched=173  fp%=17.300 total=1000  begin=9,160,000 end=9,161,000 new-begin=9,161,001\r\nERROR[08-09|02:57:12.933] indexedLogs                              falsed#=624  matched=624  fp%=31.200 total=2000  begin=9,160,000 end=9,162,000 new-begin=9,162,001\r\nERROR[08-09|02:57:20.643] indexedLogs                              falsed#=1536 matched=1536 fp%=38.400 total=4000  begin=9,160,000 end=9,164,000 new-begin=9,164,001\r\nERROR[08-09|02:57:29.362] indexedLogs                              falsed#=1771 matched=1771 fp%=35.420 total=5000  begin=9,160,000 end=9,165,000 new-begin=9,165,001\r\nERROR[08-09|02:57:41.309] indexedLogs                              falsed#=2282 matched=2282 fp%=28.525 total=8000  begin=9,160,000 end=9,168,000 new-begin=9,168,001\r\nERROR[08-09|02:57:58.008] indexedLogs                              falsed#=2955 matched=2955 fp%=29.550 total=10000 begin=9,160,000 end=9,170,000 new-begin=9,170,001\r\nERROR[08-09|02:58:21.859] indexedLogs                              falsed#=4236 matched=4236 fp%=21.180 total=20000 begin=9,160,000 end=9,180,000 new-begin=9,180,001\r\nWARN [08-09|02:58:22.719] Post-merge network, but no beacon client seen. Please launch one to follow the chain!\r\nERROR[08-09|02:58:44.833] indexedLogs                              falsed#=4312 matched=4312 fp%=14.373 total=30000 begin=9,160,000 end=9,190,000 new-begin=9,190,001\r\nERROR[08-09|02:59:13.131] indexedLogs                              falsed#=5469 matched=5469 fp%=10.938 total=50000 begin=9,160,000 end=9,210,000 new-begin=9,207,315\r\nWARN [08-09|02:59:13.131] Served eth_getLogs                       conn=192.168.1.25:60678 reqid=50000 duration=28.294283638s err=\"context canceled\"\r\nERROR[08-09|02:59:19.065] indexedLogs                              falsed#=0    matched=0    fp%=0.000  total=10    begin=9,160,000 end=9,160,010 new-begin=9,160,011\r\nERROR[08-09|02:59:19.147] indexedLogs                              falsed#=8    matched=8    fp%=16.000 total=50    begin=9,160,000 end=9,160,050 new-begin=9,160,051\r\nERROR[08-09|02:59:19.161] indexedLogs                              falsed#=11   matched=11   fp%=11.000 total=100   begin=9,160,000 end=9,160,100 new-begin=9,160,101\r\nERROR[08-09|02:59:19.169] indexedLogs                              falsed#=16   matched=16   fp%=8.000  total=200   begin=9,160,000 end=9,160,200 new-begin=9,160,201\r\nERROR[08-09|02:59:19.177] indexedLogs                              falsed#=22   matched=22   fp%=7.333  total=300   begin=9,160,000 end=9,160,300 new-begin=9,160,301\r\nERROR[08-09|02:59:19.212] indexedLogs                              falsed#=42   matched=42   fp%=10.500 total=400   begin=9,160,000 end=9,160,400 new-begin=9,160,401\r\nERROR[08-09|02:59:19.571] indexedLogs                              falsed#=102  matched=102  fp%=20.400 total=500   begin=9,160,000 end=9,160,500 new-begin=9,160,501\r\nERROR[08-09|02:59:20.491] indexedLogs                              falsed#=247  matched=247  fp%=24.700 total=1000  begin=9,160,000 end=9,161,000 new-begin=9,161,001\r\nERROR[08-09|02:59:23.710] indexedLogs                              falsed#=724  matched=724  fp%=36.200 total=2000  begin=9,160,000 end=9,162,000 new-begin=9,162,001\r\nERROR[08-09|02:59:31.488] indexedLogs                              falsed#=1703 matched=1703 fp%=42.575 total=4000  begin=9,160,000 end=9,164,000 new-begin=9,164,001\r\nERROR[08-09|02:59:40.636] indexedLogs                              falsed#=2027 matched=2027 fp%=40.540 total=5000  begin=9,160,000 end=9,165,000 new-begin=9,165,001\r\nERROR[08-09|02:59:53.036] indexedLogs                              falsed#=2890 matched=2890 fp%=36.125 total=8000  begin=9,160,000 end=9,168,000 new-begin=9,168,001\r\nERROR[08-09|03:00:08.858] indexedLogs                              falsed#=3435 matched=3435 fp%=34.350 total=10000 begin=9,160,000 end=9,170,000 new-begin=9,168,920\r\nWARN [08-09|03:00:08.859] Served eth_getLogs                       conn=192.168.1.25:58328 reqid=10000 duration=15.81682317s  err=\"context canceled\"\r\nERROR[08-09|03:00:15.509] indexedLogs                              falsed#=0    matched=4    fp%=0.000  total=10    begin=9,160,000 end=9,160,010 new-begin=9,160,011\r\nERROR[08-09|03:00:15.560] indexedLogs                              falsed#=0    matched=20   fp%=0.000  total=50    begin=9,160,000 end=9,160,050 new-begin=9,160,051\r\nERROR[08-09|03:00:15.589] indexedLogs                              falsed#=0    matched=29   fp%=0.000  total=100   begin=9,160,000 end=9,160,100 new-begin=9,160,101\r\nERROR[08-09|03:00:15.638] indexedLogs                              falsed#=0    matched=32   fp%=0.000  total=200   begin=9,160,000 end=9,160,200 new-begin=9,160,201\r\nERROR[08-09|03:00:15.677] indexedLogs                              falsed#=1    matched=37   fp%=0.333  total=300   begin=9,160,000 end=9,160,300 new-begin=9,160,301\r\nERROR[08-09|03:00:15.767] indexedLogs                              falsed#=12   matched=49   fp%=3.000  total=400   begin=9,160,000 end=9,160,400 new-begin=9,160,401\r\nERROR[08-09|03:00:16.155] indexedLogs                              falsed#=69   matched=107  fp%=13.800 total=500   begin=9,160,000 end=9,160,500 new-begin=9,160,501\r\nERROR[08-09|03:00:17.245] indexedLogs                              falsed#=169  matched=229  fp%=16.900 total=1000  begin=9,160,000 end=9,161,000 new-begin=9,161,001\r\nERROR[08-09|03:00:20.967] indexedLogs                              falsed#=604  matched=696  fp%=30.200 total=2000  begin=9,160,000 end=9,162,000 new-begin=9,162,001\r\nERROR[08-09|03:00:29.600] indexedLogs                              falsed#=1460 matched=1804 fp%=36.500 total=4000  begin=9,160,000 end=9,164,000 new-begin=9,164,001\r\nERROR[08-09|03:00:39.806] indexedLogs                              falsed#=1627 matched=2259 fp%=32.540 total=5000  begin=9,160,000 end=9,165,000 new-begin=9,165,001\r\nERROR[08-09|03:00:42.846] indexedLogs                              falsed#=591  matched=682  fp%=7.387  total=8000  begin=9,160,000 end=9,168,000 new-begin=9,161,974\r\nWARN [08-09|03:00:42.846] Served eth_getLogs                       conn=192.168.1.25:35264 reqid=8000  duration=2.954470938s  err=\"context canceled\"\r\nERROR[08-09|03:00:48.494] indexedLogs                              falsed#=1    matched=1    fp%=10.000 total=10    begin=9,160,000 end=9,160,010 new-begin=9,160,011\r\nERROR[08-09|03:00:48.499] indexedLogs                              falsed#=2    matched=2    fp%=4.000  total=50    begin=9,160,000 end=9,160,050 new-begin=9,160,051\r\nERROR[08-09|03:00:48.503] indexedLogs                              falsed#=2    matched=2    fp%=2.000  total=100   begin=9,160,000 end=9,160,100 new-begin=9,160,101\r\nERROR[08-09|03:00:48.506] indexedLogs                              falsed#=2    matched=2    fp%=1.000  total=200   begin=9,160,000 end=9,160,200 new-begin=9,160,201\r\nERROR[08-09|03:00:48.510] indexedLogs                              falsed#=3    matched=3    fp%=1.000  total=300   begin=9,160,000 end=9,160,300 new-begin=9,160,301\r\nERROR[08-09|03:00:48.522] indexedLogs                              falsed#=6    matched=6    fp%=1.500  total=400   begin=9,160,000 end=9,160,400 new-begin=9,160,401\r\nERROR[08-09|03:00:48.857] indexedLogs                              falsed#=61   matched=61   fp%=12.200 total=500   begin=9,160,000 end=9,160,500 new-begin=9,160,501\r\nERROR[08-09|03:00:49.531] indexedLogs                              falsed#=164  matched=164  fp%=16.400 total=1000  begin=9,160,000 end=9,161,000 new-begin=9,161,001\r\nERROR[08-09|03:00:52.416] indexedLogs                              falsed#=602  matched=602  fp%=30.100 total=2000  begin=9,160,000 end=9,162,000 new-begin=9,162,001\r\nERROR[08-09|03:00:59.429] indexedLogs                              falsed#=1479 matched=1479 fp%=36.975 total=4000  begin=9,160,000 end=9,164,000 new-begin=9,164,001\r\nERROR[08-09|03:01:07.608] indexedLogs                              falsed#=1697 matched=1697 fp%=33.940 total=5000  begin=9,160,000 end=9,165,000 new-begin=9,165,001\r\nERROR[08-09|03:01:19.067] indexedLogs                              falsed#=2173 matched=2173 fp%=27.163 total=8000  begin=9,160,000 end=9,168,000 new-begin=9,168,001\r\nERROR[08-09|03:01:33.992] indexedLogs                              falsed#=2842 matched=2842 fp%=28.420 total=10000 begin=9,160,000 end=9,170,000 new-begin=9,170,001\r\nERROR[08-09|03:01:56.676] indexedLogs                              falsed#=3984 matched=3984 fp%=19.920 total=20000 begin=9,160,000 end=9,180,000 new-begin=9,180,001\r\nERROR[08-09|03:02:18.851] indexedLogs                              falsed#=4031 matched=4031 fp%=13.437 total=30000 begin=9,160,000 end=9,190,000 new-begin=9,190,001\r\nERROR[08-09|03:02:46.454] indexedLogs                              falsed#=5319 matched=5319 fp%=10.638 total=50000 begin=9,160,000 end=9,210,000 new-begin=9,210,001\r\nERROR[08-09|03:03:16.366] indexedLogs                              falsed#=5642 matched=5642 fp%=9.403  total=60000 begin=9,160,000 end=9,220,000 new-begin=9,212,991\r\n```\r\n\r\nAnd this is the log for block ranges from 10 to 2000 with a increase of 10 blocks:\r\n\r\n```\r\nindexedLogs  falsed#=1   fp%=10.000 total=10   begin=9,160,000 end=9,160,010\r\nindexedLogs  falsed#=1   fp%=5.000  total=20   begin=9,160,000 end=9,160,020\r\nindexedLogs  falsed#=1   fp%=3.333  total=30   begin=9,160,000 end=9,160,030\r\nindexedLogs  falsed#=2   fp%=5.000  total=40   begin=9,160,000 end=9,160,040\r\nindexedLogs  falsed#=2   fp%=4.000  total=50   begin=9,160,000 end=9,160,050\r\nindexedLogs  falsed#=2   fp%=3.333  total=60   begin=9,160,000 end=9,160,060\r\nindexedLogs  falsed#=2   fp%=2.857  total=70   begin=9,160,000 end=9,160,070\r\nindexedLogs  falsed#=2   fp%=2.500  total=80   begin=9,160,000 end=9,160,080\r\nindexedLogs  falsed#=2   fp%=2.222  total=90   begin=9,160,000 end=9,160,090\r\nindexedLogs  falsed#=2   fp%=2.000  total=100  begin=9,160,000 end=9,160,100\r\nindexedLogs  falsed#=2   fp%=1.818  total=110  begin=9,160,000 end=9,160,110\r\nindexedLogs  falsed#=2   fp%=1.667  total=120  begin=9,160,000 end=9,160,120\r\nindexedLogs  falsed#=2   fp%=1.538  total=130  begin=9,160,000 end=9,160,130\r\nindexedLogs  falsed#=2   fp%=1.429  total=140  begin=9,160,000 end=9,160,140\r\nindexedLogs  falsed#=2   fp%=1.333  total=150  begin=9,160,000 end=9,160,150\r\nindexedLogs  falsed#=2   fp%=1.250  total=160  begin=9,160,000 end=9,160,160\r\nindexedLogs  falsed#=2   fp%=1.176  total=170  begin=9,160,000 end=9,160,170\r\nindexedLogs  falsed#=2   fp%=1.111  total=180  begin=9,160,000 end=9,160,180\r\nindexedLogs  falsed#=2   fp%=1.053  total=190  begin=9,160,000 end=9,160,190\r\nindexedLogs  falsed#=2   fp%=1.000  total=200  begin=9,160,000 end=9,160,200\r\nindexedLogs  falsed#=2   fp%=0.952  total=210  begin=9,160,000 end=9,160,210\r\nindexedLogs  falsed#=2   fp%=0.909  total=220  begin=9,160,000 end=9,160,220\r\nindexedLogs  falsed#=2   fp%=0.870  total=230  begin=9,160,000 end=9,160,230\r\nindexedLogs  falsed#=3   fp%=1.250  total=240  begin=9,160,000 end=9,160,240\r\nindexedLogs  falsed#=3   fp%=1.200  total=250  begin=9,160,000 end=9,160,250\r\nindexedLogs  falsed#=3   fp%=1.154  total=260  begin=9,160,000 end=9,160,260\r\nindexedLogs  falsed#=4   fp%=1.481  total=270  begin=9,160,000 end=9,160,270\r\nindexedLogs  falsed#=4   fp%=1.429  total=280  begin=9,160,000 end=9,160,280\r\nindexedLogs  falsed#=4   fp%=1.379  total=290  begin=9,160,000 end=9,160,290\r\nindexedLogs  falsed#=4   fp%=1.333  total=300  begin=9,160,000 end=9,160,300\r\nindexedLogs  falsed#=4   fp%=1.290  total=310  begin=9,160,000 end=9,160,310\r\nindexedLogs  falsed#=4   fp%=1.250  total=320  begin=9,160,000 end=9,160,320\r\nindexedLogs  falsed#=4   fp%=1.212  total=330  begin=9,160,000 end=9,160,330\r\nindexedLogs  falsed#=4   fp%=1.176  total=340  begin=9,160,000 end=9,160,340\r\nindexedLogs  falsed#=4   fp%=1.143  total=350  begin=9,160,000 end=9,160,350\r\nindexedLogs  falsed#=4   fp%=1.111  total=360  begin=9,160,000 end=9,160,360\r\nindexedLogs  falsed#=5   fp%=1.351  total=370  begin=9,160,000 end=9,160,370\r\nindexedLogs  falsed#=10  fp%=2.632  total=380  begin=9,160,000 end=9,160,380\r\nindexedLogs  falsed#=11  fp%=2.821  total=390  begin=9,160,000 end=9,160,390\r\nindexedLogs  falsed#=14  fp%=3.500  total=400  begin=9,160,000 end=9,160,400\r\nindexedLogs  falsed#=20  fp%=4.878  total=410  begin=9,160,000 end=9,160,410\r\nindexedLogs  falsed#=25  fp%=5.952  total=420  begin=9,160,000 end=9,160,420\r\nindexedLogs  falsed#=31  fp%=7.209  total=430  begin=9,160,000 end=9,160,430\r\nindexedLogs  falsed#=38  fp%=8.636  total=440  begin=9,160,000 end=9,160,440\r\nindexedLogs  falsed#=43  fp%=9.556  total=450  begin=9,160,000 end=9,160,450\r\nindexedLogs  falsed#=49  fp%=10.652 total=460  begin=9,160,000 end=9,160,460\r\nindexedLogs  falsed#=55  fp%=11.702 total=470  begin=9,160,000 end=9,160,470\r\nindexedLogs  falsed#=61  fp%=12.708 total=480  begin=9,160,000 end=9,160,480\r\nindexedLogs  falsed#=67  fp%=13.673 total=490  begin=9,160,000 end=9,160,490\r\nindexedLogs  falsed#=73  fp%=14.600 total=500  begin=9,160,000 end=9,160,500\r\nindexedLogs  falsed#=77  fp%=15.098 total=510  begin=9,160,000 end=9,160,510\r\nindexedLogs  falsed#=82  fp%=15.769 total=520  begin=9,160,000 end=9,160,520\r\nindexedLogs  falsed#=87  fp%=16.415 total=530  begin=9,160,000 end=9,160,530\r\nindexedLogs  falsed#=91  fp%=16.852 total=540  begin=9,160,000 end=9,160,540\r\nindexedLogs  falsed#=92  fp%=16.727 total=550  begin=9,160,000 end=9,160,550\r\nindexedLogs  falsed#=92  fp%=16.429 total=560  begin=9,160,000 end=9,160,560\r\nindexedLogs  falsed#=92  fp%=16.140 total=570  begin=9,160,000 end=9,160,570\r\nindexedLogs  falsed#=92  fp%=15.862 total=580  begin=9,160,000 end=9,160,580\r\nindexedLogs  falsed#=92  fp%=15.593 total=590  begin=9,160,000 end=9,160,590\r\nindexedLogs  falsed#=92  fp%=15.333 total=600  begin=9,160,000 end=9,160,600\r\nindexedLogs  falsed#=92  fp%=15.082 total=610  begin=9,160,000 end=9,160,610\r\nindexedLogs  falsed#=92  fp%=14.839 total=620  begin=9,160,000 end=9,160,620\r\nindexedLogs  falsed#=92  fp%=14.603 total=630  begin=9,160,000 end=9,160,630\r\nindexedLogs  falsed#=92  fp%=14.375 total=640  begin=9,160,000 end=9,160,640\r\nindexedLogs  falsed#=93  fp%=14.308 total=650  begin=9,160,000 end=9,160,650\r\nindexedLogs  falsed#=93  fp%=14.091 total=660  begin=9,160,000 end=9,160,660\r\nindexedLogs  falsed#=93  fp%=13.881 total=670  begin=9,160,000 end=9,160,670\r\nindexedLogs  falsed#=93  fp%=13.676 total=680  begin=9,160,000 end=9,160,680\r\nindexedLogs  falsed#=94  fp%=13.623 total=690  begin=9,160,000 end=9,160,690\r\nindexedLogs  falsed#=94  fp%=13.429 total=700  begin=9,160,000 end=9,160,700\r\nindexedLogs  falsed#=94  fp%=13.239 total=710  begin=9,160,000 end=9,160,710\r\nindexedLogs  falsed#=95  fp%=13.194 total=720  begin=9,160,000 end=9,160,720\r\nindexedLogs  falsed#=95  fp%=13.014 total=730  begin=9,160,000 end=9,160,730\r\nindexedLogs  falsed#=95  fp%=12.838 total=740  begin=9,160,000 end=9,160,740\r\nindexedLogs  falsed#=97  fp%=12.933 total=750  begin=9,160,000 end=9,160,750\r\nindexedLogs  falsed#=97  fp%=12.763 total=760  begin=9,160,000 end=9,160,760\r\nindexedLogs  falsed#=97  fp%=12.597 total=770  begin=9,160,000 end=9,160,770\r\nindexedLogs  falsed#=97  fp%=12.436 total=780  begin=9,160,000 end=9,160,780\r\nindexedLogs  falsed#=97  fp%=12.278 total=790  begin=9,160,000 end=9,160,790\r\nindexedLogs  falsed#=97  fp%=12.125 total=800  begin=9,160,000 end=9,160,800\r\nindexedLogs  falsed#=97  fp%=11.975 total=810  begin=9,160,000 end=9,160,810\r\nindexedLogs  falsed#=97  fp%=11.829 total=820  begin=9,160,000 end=9,160,820\r\nindexedLogs  falsed#=99  fp%=11.928 total=830  begin=9,160,000 end=9,160,830\r\nindexedLogs  falsed#=104 fp%=12.381 total=840  begin=9,160,000 end=9,160,840\r\nindexedLogs  falsed#=109 fp%=12.824 total=850  begin=9,160,000 end=9,160,850\r\nindexedLogs  falsed#=114 fp%=13.256 total=860  begin=9,160,000 end=9,160,860\r\nindexedLogs  falsed#=121 fp%=13.908 total=870  begin=9,160,000 end=9,160,870\r\nindexedLogs  falsed#=127 fp%=14.432 total=880  begin=9,160,000 end=9,160,880\r\nindexedLogs  falsed#=131 fp%=14.719 total=890  begin=9,160,000 end=9,160,890\r\nindexedLogs  falsed#=136 fp%=15.111 total=900  begin=9,160,000 end=9,160,900\r\nindexedLogs  falsed#=143 fp%=15.714 total=910  begin=9,160,000 end=9,160,910\r\nindexedLogs  falsed#=146 fp%=15.870 total=920  begin=9,160,000 end=9,160,920\r\nindexedLogs  falsed#=147 fp%=15.806 total=930  begin=9,160,000 end=9,160,930\r\nindexedLogs  falsed#=152 fp%=16.170 total=940  begin=9,160,000 end=9,160,940\r\nindexedLogs  falsed#=158 fp%=16.632 total=950  begin=9,160,000 end=9,160,950\r\nindexedLogs  falsed#=164 fp%=17.083 total=960  begin=9,160,000 end=9,160,960\r\nindexedLogs  falsed#=169 fp%=17.423 total=970  begin=9,160,000 end=9,160,970\r\nindexedLogs  falsed#=174 fp%=17.755 total=980  begin=9,160,000 end=9,160,980\r\nindexedLogs  falsed#=179 fp%=18.081 total=990  begin=9,160,000 end=9,160,990\r\nindexedLogs  falsed#=184 fp%=18.400 total=1000 begin=9,160,000 end=9,161,000\r\nindexedLogs  falsed#=188 fp%=18.614 total=1010 begin=9,160,000 end=9,161,010\r\nindexedLogs  falsed#=192 fp%=18.824 total=1020 begin=9,160,000 end=9,161,020\r\nindexedLogs  falsed#=198 fp%=19.223 total=1030 begin=9,160,000 end=9,161,030\r\nindexedLogs  falsed#=203 fp%=19.519 total=1040 begin=9,160,000 end=9,161,040\r\nindexedLogs  falsed#=208 fp%=19.810 total=1050 begin=9,160,000 end=9,161,050\r\nindexedLogs  falsed#=213 fp%=20.094 total=1060 begin=9,160,000 end=9,161,060\r\nindexedLogs  falsed#=218 fp%=20.374 total=1070 begin=9,160,000 end=9,161,070\r\nindexedLogs  falsed#=223 fp%=20.648 total=1080 begin=9,160,000 end=9,161,080\r\nindexedLogs  falsed#=227 fp%=20.826 total=1090 begin=9,160,000 end=9,161,090\r\nindexedLogs  falsed#=233 fp%=21.182 total=1100 begin=9,160,000 end=9,161,100\r\nindexedLogs  falsed#=238 fp%=21.441 total=1110 begin=9,160,000 end=9,161,110\r\nindexedLogs  falsed#=243 fp%=21.696 total=1120 begin=9,160,000 end=9,161,120\r\nindexedLogs  falsed#=248 fp%=21.947 total=1130 begin=9,160,000 end=9,161,130\r\nindexedLogs  falsed#=254 fp%=22.281 total=1140 begin=9,160,000 end=9,161,140\r\nindexedLogs  falsed#=260 fp%=22.609 total=1150 begin=9,160,000 end=9,161,150\r\nindexedLogs  falsed#=266 fp%=22.931 total=1160 begin=9,160,000 end=9,161,160\r\nindexedLogs  falsed#=272 fp%=23.248 total=1170 begin=9,160,000 end=9,161,170\r\nindexedLogs  falsed#=276 fp%=23.390 total=1180 begin=9,160,000 end=9,161,180\r\nindexedLogs  falsed#=281 fp%=23.613 total=1190 begin=9,160,000 end=9,161,190\r\nindexedLogs  falsed#=286 fp%=23.833 total=1200 begin=9,160,000 end=9,161,200\r\nindexedLogs  falsed#=291 fp%=24.050 total=1210 begin=9,160,000 end=9,161,210\r\nindexedLogs  falsed#=296 fp%=24.262 total=1220 begin=9,160,000 end=9,161,220\r\nindexedLogs  falsed#=301 fp%=24.472 total=1230 begin=9,160,000 end=9,161,230\r\nindexedLogs  falsed#=305 fp%=24.597 total=1240 begin=9,160,000 end=9,161,240\r\nindexedLogs  falsed#=310 fp%=24.800 total=1250 begin=9,160,000 end=9,161,250\r\nindexedLogs  falsed#=314 fp%=24.921 total=1260 begin=9,160,000 end=9,161,260\r\nindexedLogs  falsed#=316 fp%=24.882 total=1270 begin=9,160,000 end=9,161,270\r\nindexedLogs  falsed#=317 fp%=24.766 total=1280 begin=9,160,000 end=9,161,280\r\nindexedLogs  falsed#=318 fp%=24.651 total=1290 begin=9,160,000 end=9,161,290\r\nindexedLogs  falsed#=318 fp%=24.462 total=1300 begin=9,160,000 end=9,161,300\r\nindexedLogs  falsed#=318 fp%=24.275 total=1310 begin=9,160,000 end=9,161,310\r\nindexedLogs  falsed#=318 fp%=24.091 total=1320 begin=9,160,000 end=9,161,320\r\nindexedLogs  falsed#=318 fp%=23.910 total=1330 begin=9,160,000 end=9,161,330\r\nindexedLogs  falsed#=319 fp%=23.806 total=1340 begin=9,160,000 end=9,161,340\r\nindexedLogs  falsed#=319 fp%=23.630 total=1350 begin=9,160,000 end=9,161,350\r\nindexedLogs  falsed#=319 fp%=23.456 total=1360 begin=9,160,000 end=9,161,360\r\nindexedLogs  falsed#=319 fp%=23.285 total=1370 begin=9,160,000 end=9,161,370\r\nindexedLogs  falsed#=319 fp%=23.116 total=1380 begin=9,160,000 end=9,161,380\r\nindexedLogs  falsed#=324 fp%=23.309 total=1390 begin=9,160,000 end=9,161,390\r\nindexedLogs  falsed#=329 fp%=23.500 total=1400 begin=9,160,000 end=9,161,400\r\nindexedLogs  falsed#=333 fp%=23.617 total=1410 begin=9,160,000 end=9,161,410\r\nindexedLogs  falsed#=338 fp%=23.803 total=1420 begin=9,160,000 end=9,161,420\r\nindexedLogs  falsed#=343 fp%=23.986 total=1430 begin=9,160,000 end=9,161,430\r\nindexedLogs  falsed#=348 fp%=24.167 total=1440 begin=9,160,000 end=9,161,440\r\nindexedLogs  falsed#=354 fp%=24.414 total=1450 begin=9,160,000 end=9,161,450\r\nindexedLogs  falsed#=359 fp%=24.589 total=1460 begin=9,160,000 end=9,161,460\r\nindexedLogs  falsed#=364 fp%=24.762 total=1470 begin=9,160,000 end=9,161,470\r\nindexedLogs  falsed#=369 fp%=24.932 total=1480 begin=9,160,000 end=9,161,480\r\nindexedLogs  falsed#=373 fp%=25.034 total=1490 begin=9,160,000 end=9,161,490\r\nindexedLogs  falsed#=377 fp%=25.133 total=1500 begin=9,160,000 end=9,161,500\r\nindexedLogs  falsed#=382 fp%=25.298 total=1510 begin=9,160,000 end=9,161,510\r\nindexedLogs  falsed#=388 fp%=25.526 total=1520 begin=9,160,000 end=9,161,520\r\nindexedLogs  falsed#=394 fp%=25.752 total=1530 begin=9,160,000 end=9,161,530\r\nindexedLogs  falsed#=400 fp%=25.974 total=1540 begin=9,160,000 end=9,161,540\r\nindexedLogs  falsed#=405 fp%=26.129 total=1550 begin=9,160,000 end=9,161,550\r\nindexedLogs  falsed#=410 fp%=26.282 total=1560 begin=9,160,000 end=9,161,560\r\nindexedLogs  falsed#=415 fp%=26.433 total=1570 begin=9,160,000 end=9,161,570\r\nindexedLogs  falsed#=420 fp%=26.582 total=1580 begin=9,160,000 end=9,161,580\r\nindexedLogs  falsed#=425 fp%=26.730 total=1590 begin=9,160,000 end=9,161,590\r\nindexedLogs  falsed#=430 fp%=26.875 total=1600 begin=9,160,000 end=9,161,600\r\nindexedLogs  falsed#=436 fp%=27.081 total=1610 begin=9,160,000 end=9,161,610\r\nindexedLogs  falsed#=442 fp%=27.284 total=1620 begin=9,160,000 end=9,161,620\r\nindexedLogs  falsed#=446 fp%=27.362 total=1630 begin=9,160,000 end=9,161,630\r\nindexedLogs  falsed#=452 fp%=27.561 total=1640 begin=9,160,000 end=9,161,640\r\nindexedLogs  falsed#=457 fp%=27.697 total=1650 begin=9,160,000 end=9,161,650\r\nindexedLogs  falsed#=463 fp%=27.892 total=1660 begin=9,160,000 end=9,161,660\r\nindexedLogs  falsed#=469 fp%=28.084 total=1670 begin=9,160,000 end=9,161,670\r\nindexedLogs  falsed#=474 fp%=28.214 total=1680 begin=9,160,000 end=9,161,680\r\nindexedLogs  falsed#=479 fp%=28.343 total=1690 begin=9,160,000 end=9,161,690\r\nindexedLogs  falsed#=483 fp%=28.412 total=1700 begin=9,160,000 end=9,161,700\r\nindexedLogs  falsed#=487 fp%=28.480 total=1710 begin=9,160,000 end=9,161,710\r\nindexedLogs  falsed#=493 fp%=28.663 total=1720 begin=9,160,000 end=9,161,720\r\nindexedLogs  falsed#=498 fp%=28.786 total=1730 begin=9,160,000 end=9,161,730\r\nindexedLogs  falsed#=503 fp%=28.908 total=1740 begin=9,160,000 end=9,161,740\r\nindexedLogs  falsed#=509 fp%=29.086 total=1750 begin=9,160,000 end=9,161,750\r\nindexedLogs  falsed#=513 fp%=29.148 total=1760 begin=9,160,000 end=9,161,760\r\nindexedLogs  falsed#=518 fp%=29.266 total=1770 begin=9,160,000 end=9,161,770\r\nindexedLogs  falsed#=523 fp%=29.382 total=1780 begin=9,160,000 end=9,161,780\r\nindexedLogs  falsed#=529 fp%=29.553 total=1790 begin=9,160,000 end=9,161,790\r\nindexedLogs  falsed#=532 fp%=29.556 total=1800 begin=9,160,000 end=9,161,800\r\nindexedLogs  falsed#=537 fp%=29.669 total=1810 begin=9,160,000 end=9,161,810\r\nindexedLogs  falsed#=542 fp%=29.780 total=1820 begin=9,160,000 end=9,161,820\r\nindexedLogs  falsed#=549 fp%=30.000 total=1830 begin=9,160,000 end=9,161,830\r\nindexedLogs  falsed#=556 fp%=30.217 total=1840 begin=9,160,000 end=9,161,840\r\nindexedLogs  falsed#=562 fp%=30.378 total=1850 begin=9,160,000 end=9,161,850\r\nindexedLogs  falsed#=567 fp%=30.484 total=1860 begin=9,160,000 end=9,161,860\r\nindexedLogs  falsed#=573 fp%=30.642 total=1870 begin=9,160,000 end=9,161,870\r\nindexedLogs  falsed#=579 fp%=30.798 total=1880 begin=9,160,000 end=9,161,880\r\nindexedLogs  falsed#=584 fp%=30.899 total=1890 begin=9,160,000 end=9,161,890\r\nindexedLogs  falsed#=590 fp%=31.053 total=1900 begin=9,160,000 end=9,161,900\r\nindexedLogs  falsed#=595 fp%=31.152 total=1910 begin=9,160,000 end=9,161,910\r\nindexedLogs  falsed#=600 fp%=31.250 total=1920 begin=9,160,000 end=9,161,920\r\nindexedLogs  falsed#=606 fp%=31.399 total=1930 begin=9,160,000 end=9,161,930\r\nindexedLogs  falsed#=609 fp%=31.392 total=1940 begin=9,160,000 end=9,161,940\r\nindexedLogs  falsed#=614 fp%=31.487 total=1950 begin=9,160,000 end=9,161,950\r\nindexedLogs  falsed#=619 fp%=31.582 total=1960 begin=9,160,000 end=9,161,960\r\nindexedLogs  falsed#=625 fp%=31.726 total=1970 begin=9,160,000 end=9,161,970\r\nindexedLogs  falsed#=628 fp%=31.717 total=1980 begin=9,160,000 end=9,161,980\r\nindexedLogs  falsed#=634 fp%=31.859 total=1990 begin=9,160,000 end=9,161,990\r\n```\r\n\r\nWhen the block interval is greater than 450, fp reached 10%+",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1670598532/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1672050362",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1672050362",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1672050362,
    "node_id": "IC_kwDOAOvK985jqXa6",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T19:49:04Z",
    "updated_at": "2023-08-09T19:57:22Z",
    "author_association": "MEMBER",
    "body": "I don't really see why the size of the block-span affects the false-positive rate...?\r\nI would rather believe that the size of the span does not matter, but certain spans are more filled than others. \r\n\r\nSo, for example, the range `9,162,000 = 9,164,000` seems to be transaction-heavy == receipt-heavy == logs-heavy == false-positive-heavy. \r\n\r\n? \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1672050362/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1672726943",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1672726943",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1672726943,
    "node_id": "IC_kwDOAOvK985js8mf",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-10T07:44:46Z",
    "updated_at": "2023-08-10T07:44:46Z",
    "author_association": "MEMBER",
    "body": "I made an experiment with earlier filtering, in https://github.com/holiman/go-ethereum/tree/filter_experiments . I wonder if that makes any difference -- the false positives will still trigger the same amount of disk load, but the processing should be less processor-intense. \r\n\r\nI am not sure if it's worth pursuing, will try it out on some goerli node at some point, but if anyone wants to measure the performance difference, that'd be appreciated. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1672726943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673462837",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1673462837",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1673462837,
    "node_id": "IC_kwDOAOvK985jvwQ1",
    "user": {
      "login": "jsvisa",
      "id": 3627395,
      "node_id": "MDQ6VXNlcjM2MjczOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3627395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsvisa",
      "html_url": "https://github.com/jsvisa",
      "followers_url": "https://api.github.com/users/jsvisa/followers",
      "following_url": "https://api.github.com/users/jsvisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsvisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsvisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsvisa/subscriptions",
      "organizations_url": "https://api.github.com/users/jsvisa/orgs",
      "repos_url": "https://api.github.com/users/jsvisa/repos",
      "events_url": "https://api.github.com/users/jsvisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsvisa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-10T15:34:44Z",
    "updated_at": "2023-08-10T15:34:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> seems to be transaction-heavy == receipt-heavy == logs-heavy == false-positive-heavy.\r\n\r\nIMHO, in this scenario(the filtered topic/address is not in any block), the bloom filter will become less useful.\r\n\r\nHere is a CSV file, which is the count of the number of logs contained in each block between 9160000 to 9260000: [goer.logs-9160000-9260000.csv.gz](https://github.com/ethereum/go-ethereum/files/12314500/goer.logs-9160000-9260000.csv.gz).\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673462837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673472816",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1673472816",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1673472816,
    "node_id": "IC_kwDOAOvK985jvysw",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-10T15:40:32Z",
    "updated_at": "2023-08-10T15:40:32Z",
    "author_association": "MEMBER",
    "body": "Right, and the root issue is that the blooms are saturated. To be clear: it is not \"geths\" bloom filters, these are based on the consensus-field bloombits, from the header. \n\nSo it is not something we can just adjust. If we want to radically improve this, we would need a totally new index. Which I believe erigon has, for example.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673472816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673480316",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27688#issuecomment-1673480316",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27688",
    "id": 1673480316,
    "node_id": "IC_kwDOAOvK985jv0h8",
    "user": {
      "login": "jsvisa",
      "id": 3627395,
      "node_id": "MDQ6VXNlcjM2MjczOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3627395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsvisa",
      "html_url": "https://github.com/jsvisa",
      "followers_url": "https://api.github.com/users/jsvisa/followers",
      "following_url": "https://api.github.com/users/jsvisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsvisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsvisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsvisa/subscriptions",
      "organizations_url": "https://api.github.com/users/jsvisa/orgs",
      "repos_url": "https://api.github.com/users/jsvisa/repos",
      "events_url": "https://api.github.com/users/jsvisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsvisa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-10T15:46:10Z",
    "updated_at": "2023-08-10T15:47:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "BTW, seems Erigon doesn't use a bloom filter to filter the Log Query, they are using a inverted index to filter with. Therefore, the log query performance of Erigon is very fast, ref https://erigon.substack.com/p/erigon-stage-sync-and-control-flows\r\n\r\n<img width=\"784\" alt=\"image\" src=\"https://github.com/ethereum/go-ethereum/assets/3627395/189a3d48-5ccf-45b7-952f-6948b89a3f8f\">\r\n\r\n\r\n@holiman Do you think it would be possible if we used a similar approach in Geth, if so then the bloom filter will be useless(only used for header validation)?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1673480316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

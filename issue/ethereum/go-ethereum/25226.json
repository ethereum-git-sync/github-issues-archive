{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25226",
  "id": 1291853880,
  "node_id": "I_kwDOAOvK985NACA4",
  "number": 25226,
  "title": "Unable to deploy ethstats: ssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey], no supported methods remain ",
  "user": {
    "login": "sion42x",
    "id": 82188389,
    "node_id": "MDQ6VXNlcjgyMTg4Mzg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/82188389?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sion42x",
    "html_url": "https://github.com/sion42x",
    "followers_url": "https://api.github.com/users/sion42x/followers",
    "following_url": "https://api.github.com/users/sion42x/following{/other_user}",
    "gists_url": "https://api.github.com/users/sion42x/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sion42x/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sion42x/subscriptions",
    "organizations_url": "https://api.github.com/users/sion42x/orgs",
    "repos_url": "https://api.github.com/users/sion42x/repos",
    "events_url": "https://api.github.com/users/sion42x/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sion42x/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-07-01T21:42:35Z",
  "updated_at": "2022-07-04T13:05:17Z",
  "closed_at": "2022-07-04T13:05:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.21-unstable\r\nOS & Version: Ubuntu 22.04\r\n\r\n#### Expected behaviour\r\n\r\nSSH connects appropriately to remote server, as it does via standard SSH command.\r\n\r\n#### Actual behaviour\r\n\r\nPuppeth throws an unable to authenticate error despite id_rsa being present and working in standalone SSH command.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\nWhich server do you want to interact with?\r\n 1. Connect another server\r\n> 1\r\n\r\nWhat is the remote server's address ([username[:identity]@]hostname[:port])?\r\n> 10.0.25.175\r\nWARN [07-01|21:36:15.021] Unable to dial SSH agent, falling back to private keys err=\"dial unix: missing address\"\r\n\r\nThe authenticity of host '10.0.25.175:22 (10.0.25.175:22)' can't be established.\r\nSSH key fingerprint is 02:bd:c3:91:9e:f0:fc:a9:73:1d:15:49:07:ca:3a:52 [MD5]\r\nAre you sure you want to continue connecting (yes/no)? yes\r\nERROR[07-01|21:36:16.414] Server not ready for puppeth             err=\"ssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey], no supported methods remain\"\r\n```\r\n\r\nI have attempted this with straight IP, and with ubuntu@10.0.25.175, as well as the full user/host/identity/port with the same result. Here is the SSH verbose message:\r\n\r\n```\r\nubuntu@ip-10-0-18-164:~/go-ethereum/build/bin$ ssh -v 10.0.25.175\r\nOpenSSH_8.9p1 Ubuntu-3, OpenSSL 3.0.2 15 Mar 2022\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 19: include /etc/ssh/ssh_config.d/*.conf matched no files\r\ndebug1: /etc/ssh/ssh_config line 21: Applying options for *\r\ndebug1: Connecting to 10.0.25.175 [10.0.25.175] port 22.\r\ndebug1: Connection established.\r\ndebug1: identity file /home/ubuntu/.ssh/id_rsa type 0\r\ndebug1: identity file /home/ubuntu/.ssh/id_rsa-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ecdsa type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ecdsa-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ecdsa_sk type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ecdsa_sk-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ed25519 type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ed25519-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ed25519_sk type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_ed25519_sk-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_xmss type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_xmss-cert type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_dsa type -1\r\ndebug1: identity file /home/ubuntu/.ssh/id_dsa-cert type -1\r\ndebug1: Local version string SSH-2.0-OpenSSH_8.9p1 Ubuntu-3\r\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_8.9p1 Ubuntu-3\r\ndebug1: compat_banner: match: OpenSSH_8.9p1 Ubuntu-3 pat OpenSSH* compat 0x04000000\r\ndebug1: Authenticating to 10.0.25.175:22 as 'ubuntu'\r\ndebug1: load_hostkeys: fopen /home/ubuntu/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug1: SSH2_MSG_KEXINIT sent\r\ndebug1: SSH2_MSG_KEXINIT received\r\ndebug1: kex: algorithm: curve25519-sha256\r\ndebug1: kex: host key algorithm: ssh-ed25519\r\ndebug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\r\ndebug1: SSH2_MSG_KEX_ECDH_REPLY received\r\ndebug1: Server host key: ssh-ed25519 SHA256:2mhCanRHjgNbq+AXIVRPHhsUOW2/BanZBYnSIriVzUI\r\ndebug1: load_hostkeys: fopen /home/ubuntu/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug1: Host '10.0.25.175' is known and matches the ED25519 host key.\r\ndebug1: Found key in /home/ubuntu/.ssh/known_hosts:17\r\ndebug1: rekey out after 134217728 blocks\r\ndebug1: SSH2_MSG_NEWKEYS sent\r\ndebug1: expecting SSH2_MSG_NEWKEYS\r\ndebug1: SSH2_MSG_NEWKEYS received\r\ndebug1: rekey in after 134217728 blocks\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_rsa RSA SHA256:mcmRkd9NnbzT1/R5JIWQTcbXQFu/bM5Uk74j1/3wobk\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_ecdsa\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_ecdsa_sk\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_ed25519\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_ed25519_sk\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_xmss\r\ndebug1: Will attempt key: /home/ubuntu/.ssh/id_dsa\r\ndebug1: SSH2_MSG_EXT_INFO received\r\ndebug1: kex_input_ext_info: server-sig-algs=<ssh-ed25519,sk-ssh-ed25519@openssh.com,ssh-rsa,rsa-sha2-256,rsa-sha2-512,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,webauthn-sk-ecdsa-sha2-nistp256@openssh.com>\r\ndebug1: kex_input_ext_info: publickey-hostbound@openssh.com=<0>\r\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\r\ndebug1: Authentications that can continue: publickey\r\ndebug1: Next authentication method: publickey\r\ndebug1: Offering public key: /home/ubuntu/.ssh/id_rsa RSA SHA256:mcmRkd9NnbzT1/R5JIWQTcbXQFu/bM5Uk74j1/3wobk\r\ndebug1: Server accepts key: /home/ubuntu/.ssh/id_rsa RSA SHA256:mcmRkd9NnbzT1/R5JIWQTcbXQFu/bM5Uk74j1/3wobk\r\nAuthenticated to 10.0.25.175 ([10.0.25.175]:22) using \"publickey\".\r\ndebug1: channel 0: new [client-session]\r\ndebug1: Requesting no-more-sessions@openssh.com\r\ndebug1: Entering interactive session.\r\ndebug1: pledge: filesystem\r\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\r\ndebug1: client_input_hostkeys: searching /home/ubuntu/.ssh/known_hosts for 10.0.25.175 / (none)\r\ndebug1: client_input_hostkeys: searching /home/ubuntu/.ssh/known_hosts2 for 10.0.25.175 / (none)\r\ndebug1: client_input_hostkeys: hostkeys file /home/ubuntu/.ssh/known_hosts2 does not exist\r\ndebug1: client_input_hostkeys: host key found matching a different name/address, skipping UserKnownHostsFile update\r\ndebug1: Remote: /home/ubuntu/.ssh/authorized_keys:2: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug1: Remote: /home/ubuntu/.ssh/authorized_keys:2: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug1: Sending environment.\r\ndebug1: channel 0: setting env LANG = \"C.UTF-8\"\r\ndebug1: channel 0: setting env LC_TERMINAL = \"iTerm2\"\r\ndebug1: channel 0: setting env LC_TERMINAL_VERSION = \"3.4.15\"\r\nWelcome to Ubuntu 22.04 LTS (GNU/Linux 5.15.0-1011-aws x86_64)\r\n...\r\nLast login: Fri Jul  1 02:32:31 2022 from 10.0.18.164\r\nubuntu@ip-10-0-25-175:~$\r\n```\r\n\r\nIt's also worth noting I'm connecting on the private IP of an AWS instance, but I've tried with public IP as well. It works standalone with no issues, but not through puppeth no matter what I try. I've also tried with other versions of go.",
  "closed_by": {
    "login": "sion42x",
    "id": 82188389,
    "node_id": "MDQ6VXNlcjgyMTg4Mzg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/82188389?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sion42x",
    "html_url": "https://github.com/sion42x",
    "followers_url": "https://api.github.com/users/sion42x/followers",
    "following_url": "https://api.github.com/users/sion42x/following{/other_user}",
    "gists_url": "https://api.github.com/users/sion42x/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sion42x/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sion42x/subscriptions",
    "organizations_url": "https://api.github.com/users/sion42x/orgs",
    "repos_url": "https://api.github.com/users/sion42x/repos",
    "events_url": "https://api.github.com/users/sion42x/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sion42x/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1172752099",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25226#issuecomment-1172752099",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226",
    "id": 1172752099,
    "node_id": "IC_kwDOAOvK985F5sbj",
    "user": {
      "login": "sion42x",
      "id": 82188389,
      "node_id": "MDQ6VXNlcjgyMTg4Mzg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/82188389?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sion42x",
      "html_url": "https://github.com/sion42x",
      "followers_url": "https://api.github.com/users/sion42x/followers",
      "following_url": "https://api.github.com/users/sion42x/following{/other_user}",
      "gists_url": "https://api.github.com/users/sion42x/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sion42x/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sion42x/subscriptions",
      "organizations_url": "https://api.github.com/users/sion42x/orgs",
      "repos_url": "https://api.github.com/users/sion42x/repos",
      "events_url": "https://api.github.com/users/sion42x/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sion42x/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-01T22:10:40Z",
    "updated_at": "2022-07-01T22:10:40Z",
    "author_association": "NONE",
    "body": "I just realized I was on unstable, also tested on 1.10.20-stable commit 8f2416a89a3def6ec2c749d5afafbf2c9a18e3c8.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1172752099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1173465916",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25226#issuecomment-1173465916",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226",
    "id": 1173465916,
    "node_id": "IC_kwDOAOvK985F8as8",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-04T07:42:51Z",
    "updated_at": "2022-07-04T07:42:51Z",
    "author_association": "MEMBER",
    "body": "What happens if you specify `ubuntu@10.0.25.175` as the server for puppeth?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1173465916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1173798017",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25226#issuecomment-1173798017",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25226",
    "id": 1173798017,
    "node_id": "IC_kwDOAOvK985F9ryB",
    "user": {
      "login": "sion42x",
      "id": 82188389,
      "node_id": "MDQ6VXNlcjgyMTg4Mzg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/82188389?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sion42x",
      "html_url": "https://github.com/sion42x",
      "followers_url": "https://api.github.com/users/sion42x/followers",
      "following_url": "https://api.github.com/users/sion42x/following{/other_user}",
      "gists_url": "https://api.github.com/users/sion42x/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sion42x/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sion42x/subscriptions",
      "organizations_url": "https://api.github.com/users/sion42x/orgs",
      "repos_url": "https://api.github.com/users/sion42x/repos",
      "events_url": "https://api.github.com/users/sion42x/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sion42x/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-04T13:05:17Z",
    "updated_at": "2022-07-04T13:05:17Z",
    "author_association": "NONE",
    "body": "Specifying `ubuntu@10.0.25.175` still resulted in the error. However, I was able to resolve this. Even though SSH worked at the command line, permissions on `.ssh` and `.ssh/id_rsa` were correct, etc. I had to add the following lines explicitly to `/etc/ssh/sshd_config` on the target nodes:\r\n\r\n```\r\nPubkeyAuthentication yes\r\nPubkeyAcceptedKeyTypes=+ssh-rsa\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1173798017/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19891",
  "id": 473164870,
  "node_id": "MDU6SXNzdWU0NzMxNjQ4NzA=",
  "number": 19891,
  "title": " Contribute. Request internal transaction information through jsonrpc ",
  "user": {
    "login": "Sallery-X",
    "id": 45587738,
    "node_id": "MDQ6VXNlcjQ1NTg3NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/45587738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Sallery-X",
    "html_url": "https://github.com/Sallery-X",
    "followers_url": "https://api.github.com/users/Sallery-X/followers",
    "following_url": "https://api.github.com/users/Sallery-X/following{/other_user}",
    "gists_url": "https://api.github.com/users/Sallery-X/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Sallery-X/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Sallery-X/subscriptions",
    "organizations_url": "https://api.github.com/users/Sallery-X/orgs",
    "repos_url": "https://api.github.com/users/Sallery-X/repos",
    "events_url": "https://api.github.com/users/Sallery-X/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Sallery-X/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-07-26T03:53:39Z",
  "updated_at": "2019-07-26T07:55:08Z",
  "closed_at": "2019-07-26T07:55:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI am from Zhejiang University, I want to provide go-ethereum to get the code of the internal transaction rpc, so that you can request internal transaction information through jsonrpc under geth, if you neededï¼Œplease comment.\r\n#### System information\r\n\r\nGeth version: `1.8.22`\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n\r\n#### Actual behaviour\r\n\r\nRequest internal transaction information through jsonrpc \r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/515311254",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19891#issuecomment-515311254",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891",
    "id": 515311254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTMxMTI1NA==",
    "user": {
      "login": "Sallery-X",
      "id": 45587738,
      "node_id": "MDQ6VXNlcjQ1NTg3NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45587738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sallery-X",
      "html_url": "https://github.com/Sallery-X",
      "followers_url": "https://api.github.com/users/Sallery-X/followers",
      "following_url": "https://api.github.com/users/Sallery-X/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sallery-X/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sallery-X/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sallery-X/subscriptions",
      "organizations_url": "https://api.github.com/users/Sallery-X/orgs",
      "repos_url": "https://api.github.com/users/Sallery-X/repos",
      "events_url": "https://api.github.com/users/Sallery-X/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sallery-X/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-26T05:10:48Z",
    "updated_at": "2019-07-26T05:10:48Z",
    "author_association": "NONE",
    "body": "contract internal transaction",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/515311254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/515350154",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19891#issuecomment-515350154",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19891",
    "id": 515350154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTM1MDE1NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-26T07:55:07Z",
    "updated_at": "2019-07-26T07:55:07Z",
    "author_association": "MEMBER",
    "body": "You can run a `callTracer` against any transaction for which you have the state and it will give you back the internal calls. E.g.\r\n\r\n```\r\n$ geth --rinkeby console\r\n\r\n> debug.traceTransaction('0x77341a5f5314f448da10c731d31b296e91840af72d8c86d20bdfd7e87df81f68', {tracer: 'callTracer'})\r\n{\r\n  calls: [{\r\n      calls: [{...}, {...}, {...}],\r\n      from: \"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n      gas: \"0x2513fd\",\r\n      gasUsed: \"0x202a3\",\r\n      input: \"0xc790055400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c46fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000419bd684f3079f9d0b03e9814362007538efcec8131d4da631be828ee417e2aea96ecaa6352024df951db8f1f7d7976d96f1b4fd67115557f59254cfd212639a6d1b00000000000000000000000000000000000000000000000000000000000000\",\r\n      output: \"0x\",\r\n      to: \"0x1802fe0d223ee7fe7146e5293113bb9671719b33\",\r\n      type: \"DELEGATECALL\"\r\n  }],\r\n  from: \"0x1010920fac8a15e6a844618a9f3233c8184ba7a7\",\r\n  gas: \"0x25af08\",\r\n  gasUsed: \"0x2073f\",\r\n  input: \"0xc790055400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c46fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000419bd684f3079f9d0b03e9814362007538efcec8131d4da631be828ee417e2aea96ecaa6352024df951db8f1f7d7976d96f1b4fd67115557f59254cfd212639a6d1b00000000000000000000000000000000000000000000000000000000000000\",\r\n  output: \"0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001\",\r\n  time: \"41.627384ms\",\r\n  to: \"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n  type: \"CALL\",\r\n  value: \"0x0\"\r\n}\r\n```\r\n\r\nThe console limits nesting a bit, hence why you have the `...` pieces omitted, but if you call it via an API, you'll have the full call trace:\r\n\r\n```\r\n$ echo '{\"id\": 1, \"jsonrpc\": \"2.0\", \"method\": \"debug_traceTransaction\", \"params\": [\"0x77341a5f5314f448da10c731d31b296e91840af72d8c86d20bdfd7e87df81f68\", {\"tracer\": \"callTracer\"}]}' | nc -U ~/.ethereum/rinkeby/geth.ipc\r\n\r\n{\r\n  \"jsonrpc\":\"2.0\",\r\n  \"id\":1,\r\n  \"result\":{\r\n    \"type\":\"CALL\",\r\n    \"from\":\"0x1010920fac8a15e6a844618a9f3233c8184ba7a7\",\r\n    \"to\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n    \"value\":\"0x0\",\r\n    \"gas\":\"0x25af08\",\r\n    \"gasUsed\":\"0x2073f\",\r\n    \"input\":\"0xc790055400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c46fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000419bd684f3079f9d0b03e9814362007538efcec8131d4da631be828ee417e2aea96ecaa6352024df951db8f1f7d7976d96f1b4fd67115557f59254cfd212639a6d1b00000000000000000000000000000000000000000000000000000000000000\",\r\n    \"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001\",\r\n    \"time\":\"43.458701ms\",\r\n    \"calls\":[\r\n      {\r\n        \"type\":\"DELEGATECALL\",\r\n        \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n        \"to\":\"0x1802fe0d223ee7fe7146e5293113bb9671719b33\",\r\n        \"gas\":\"0x2513fd\",\r\n        \"gasUsed\":\"0x202a3\",\r\n        \"input\":\"0xc790055400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c46fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000419bd684f3079f9d0b03e9814362007538efcec8131d4da631be828ee417e2aea96ecaa6352024df951db8f1f7d7976d96f1b4fd67115557f59254cfd212639a6d1b00000000000000000000000000000000000000000000000000000000000000\",\r\n        \"output\":\"0x\",\r\n        \"calls\":[\r\n          {\r\n            \"type\":\"STATICCALL\",\r\n            \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n            \"to\":\"0x0fb134a34572818c2bdc3d4dfc843a16871011f5\",\r\n            \"gas\":\"0x245fcf\",\r\n            \"gasUsed\":\"0x6f7\",\r\n            \"input\":\"0x5d2faad5000000000000000000000000549a6598721b4780da0ebd2b12e7b421391e44b6000000000000000000000000ef925c521d5641867219669b4e57aea92ee8c4d4000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n            \"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000f1650162d6a73da860fcadf2a49bf59710cb1dcf\"\r\n          },\r\n          {\r\n            \"type\":\"CALL\",\r\n            \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n            \"to\":\"0x0fb134a34572818c2bdc3d4dfc843a16871011f5\",\r\n            \"value\":\"0x0\",\r\n            \"gas\":\"0x2452ad\",\r\n            \"gasUsed\":\"0x503d\",\r\n            \"input\":\"0xb1c85bf7\",\r\n            \"output\":\"0x\"\r\n          },\r\n          {\r\n            \"type\":\"CALL\",\r\n            \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n            \"to\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n            \"value\":\"0x0\",\r\n            \"gas\":\"0x1e8480\",\r\n            \"gasUsed\":\"0x16c98\",\r\n            \"input\":\"0x6fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000\",\r\n            \"output\":\"0x\",\r\n            \"calls\":[\r\n              {\r\n                \"type\":\"DELEGATECALL\",\r\n                \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n                \"to\":\"0x1802fe0d223ee7fe7146e5293113bb9671719b33\",\r\n                \"gas\":\"0x1e0672\",\r\n                \"gasUsed\":\"0x16859\",\r\n                \"input\":\"0x6fadcf7200000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440c2ddeba0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000\",\r\n                \"output\":\"0x\",\r\n                \"calls\":[\r\n                  {\r\n                    \"type\":\"CALL\",\r\n                    \"from\":\"0x549a6598721b4780da0ebd2b12e7b421391e44b6\",\r\n                    \"to\":\"0x05e6df756a4c83adfa5044538cc2e3cb6c9c10ed\",\r\n                    \"value\":\"0x0\",\r\n                    \"gas\":\"0x1d8902\",\r\n                    \"gasUsed\":\"0x15738\",\r\n                    \"input\":\"0x0c2ddeba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001\",\r\n                    \"output\":\"0x\",\r\n                    \"calls\":[\r\n                      {\r\n                        \"type\":\"CALL\",\r\n                        \"from\":\"0x05e6df756a4c83adfa5044538cc2e3cb6c9c10ed\",\r\n                        \"to\":\"0xd251597166d679bc2f6d9558da95cae0dbd16527\",\r\n                        \"value\":\"0x0\",\r\n                        \"gas\":\"0x1c4e5d\",\r\n                        \"gasUsed\":\"0x3570\",\r\n                        \"input\":\"0xd7b4338c000000000000000000000000e55180533c7482053cafcab4eda25f6060b2b3bf\",\r\n                        \"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\",\r\n                        \"calls\":[\r\n                          {\r\n                            \"type\":\"DELEGATECALL\",\r\n                            \"from\":\"0xd251597166d679bc2f6d9558da95cae0dbd16527\",\r\n                            \"to\":\"0x1802fe0d223ee7fe7146e5293113bb9671719b33\",\r\n                            \"gas\":\"0x1bd942\",\r\n                            \"gasUsed\":\"0x3155\",\r\n                            \"input\":\"0xd7b4338c000000000000000000000000e55180533c7482053cafcab4eda25f6060b2b3bf\",\r\n                            \"output\":\"0x\",\r\n                            \"calls\":[\r\n                              {\r\n                                \"type\":\"STATICCALL\",\r\n                                \"from\":\"0xd251597166d679bc2f6d9558da95cae0dbd16527\",\r\n                                \"to\":\"0x0fb134a34572818c2bdc3d4dfc843a16871011f5\",\r\n                                \"gas\":\"0x1b62a2\",\r\n                                \"gasUsed\":\"0x895\",\r\n                                \"input\":\"0x38266b22000000000000000000000000d251597166d679bc2f6d9558da95cae0dbd16527\",\r\n                                \"output\":\"0x000000000000000000000000bd8d22555ffc96ba3d30725b8653b781989a0ca00000000000000000000000000f85bfcecb39e6bc93e8550cfb2736751b1a0a17000000000000000000000000000000000000000000000000000000000000000100000000000000000000000005e6df756a4c83adfa5044538cc2e3cb6c9c10ed00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000\"\r\n                              },\r\n                              {\r\n                                \"type\":\"CALL\",\r\n                                \"from\":\"0xd251597166d679bc2f6d9558da95cae0dbd16527\",\r\n                                \"to\":\"0x0fb134a34572818c2bdc3d4dfc843a16871011f5\",\r\n                                \"value\":\"0x0\",\r\n                                \"gas\":\"0x1b53a7\",\r\n                                \"gasUsed\":\"0x1607\",\r\n                                \"input\":\"0x91a0a867000000000000000000000000e55180533c7482053cafcab4eda25f6060b2b3bf\",\r\n                                \"output\":\"0x\"\r\n                              }\r\n                            ]\r\n                          }\r\n                        ]\r\n                      }\r\n                    ]\r\n                  }\r\n                ]\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nThe caveat is that you need the state, otherwise you cannot rerun a past transaction. For this you need either an archive node, or a recent enough state (we store the last 128 in memory).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/515350154/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

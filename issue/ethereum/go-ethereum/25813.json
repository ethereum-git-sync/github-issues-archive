{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25813",
  "id": 1377423889,
  "node_id": "I_kwDOAOvK985SGdIR",
  "number": 25813,
  "title": "Geth docker restart and resync from pow block. re sync from 15,537,172, while last synced number is 15,564,944.",
  "user": {
    "login": "lansehuiyi6",
    "id": 34824924,
    "node_id": "MDQ6VXNlcjM0ODI0OTI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/34824924?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lansehuiyi6",
    "html_url": "https://github.com/lansehuiyi6",
    "followers_url": "https://api.github.com/users/lansehuiyi6/followers",
    "following_url": "https://api.github.com/users/lansehuiyi6/following{/other_user}",
    "gists_url": "https://api.github.com/users/lansehuiyi6/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lansehuiyi6/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lansehuiyi6/subscriptions",
    "organizations_url": "https://api.github.com/users/lansehuiyi6/orgs",
    "repos_url": "https://api.github.com/users/lansehuiyi6/repos",
    "events_url": "https://api.github.com/users/lansehuiyi6/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lansehuiyi6/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-19T05:32:30Z",
  "updated_at": "2023-05-08T07:33:57Z",
  "closed_at": "2022-09-20T10:14:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I start geth node and prysm beacon-node on mainnet, both use docker, on AWS Elastic Container Service, both suddently restart, I don't know what caused it.\r\n\r\nThen i find ETH node re sync from 15,537,172, while last synced number is 15,564,944.\r\nAnd the sync speed is too slow .\r\n\r\n\r\nINFO [09-19|03:47:47.959] ---------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nINFO [09-19|03:47:47.959]\r\n\r\nINFO [09-19|03:47:52.515] Disk storage enabled for ethash caches dir=/gethMainnetData/geth/ethash count=3\r\n\r\nINFO [09-19|03:47:52.515] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2\r\n\r\nINFO [09-19|03:47:52.528] Initialising Ethereum protocol network=1 dbversion=8\r\n\r\nINFO [09-19|03:47:54.511] Loaded most recent local header number=15,564,944 hash=d93ea0..aa8790 td=58,750,003,716,598,352,816,469 age=8m7s\r\n\r\nINFO [09-19|03:47:54.513] Loaded most recent local full block number=15,564,944 hash=d93ea0..aa8790 td=58,750,003,716,598,352,816,469 age=8m7s\r\n\r\nINFO [09-19|03:47:54.513] Loaded most recent local fast block number=15,564,944 hash=d93ea0..aa8790 td=58,750,003,716,598,352,816,469 age=8m7s\r\n\r\nINFO [09-19|03:47:54.513] Loaded most recent local finalized block number=15,564,855 hash=dd5f9e..01ba17 td=58,750,003,716,598,352,816,469 age=25m55s\r\n\r\nINFO [09-19|03:47:54.541] Loaded last fast-sync pivot marker number=15,425,434\r\n\r\nWARN [09-19|03:47:54.546] Head state missing, repairing number=15,564,944 hash=d93ea0..aa8790 snaproot=121172..2a5c90\r\n\r\nINFO [09-19|03:50:39.737] Loaded most recent local header number=15,564,944 hash=d93ea0..aa8790 td=58,750,003,716,598,352,816,469 age=10m52s\r\n\r\nINFO [09-19|03:50:39.737] Loaded most recent local full block number=15,537,172 hash=06b5d0..ccc392 td=58,747,571,640,260,799,172,910 age=3d22h1s\r\n\r\nINFO [09-19|03:50:39.737] Loaded most recent local fast block number=15,564,944 hash=d93ea0..aa8790 td=58,750,003,716,598,352,816,469 age=10m52s\r\n\r\nINFO [09-19|03:50:39.737] Loaded most recent local finalized block number=15,564,855 hash=dd5f9e..01ba17 td=58,750,003,716,598,352,816,469 age=28m40s\r\n\r\nINFO [09-19|03:50:39.737] Loaded last fast-sync pivot marker number=15,425,434\r\n\r\nWARN [09-19|03:50:39.743] Enabling snapshot recovery chainhead=15,537,172 diskbase=15,564,719\r\n\r\nWARN [09-19|03:50:39.747] Loaded snapshot journal diffs=missing\r\n\r\nWARN [09-19|03:50:39.747] Snapshot is not continuous with chain snaproot=121172..2a5c90 chainroot=831423..082946\r\n\r\nINFO [09-19|03:50:39.757] Setting new local account address=0x8FAeE769b0b2c4072EF11029B1AeDD5650145b9d\r\n\r\nINFO [09-19|03:50:39.757] Loaded local transaction journal transactions=1 dropped=0\r\n\r\nINFO [09-19|03:50:39.757] Regenerated local transaction journal transactions=1 accounts=1\r\n\r\nWARN [09-19|03:50:39.757] Switch sync mode from snap sync to full sync\r\n\r\nWARN [09-19|03:50:39.758] Chain pre-merge, sync via PoW (ensure beacon client is ready)\r\n\r\nINFO [09-19|03:50:39.758] Gasprice oracle is ignoring threshold set threshold=2\r\n\r\nWARN [09-19|03:50:39.758] Unclean shutdown detected booted=2022-08-26T06:35:34+0000 age=3w2d21h\r\n\r\nWARN [09-19|03:50:39.758] Unclean shutdown detected booted=2022-09-19T03:36:13+0000 age=14m26s\r\n\r\nWARN [09-19|03:50:39.758] Engine API enabled protocol=eth\r\n\r\nINFO [09-19|03:50:39.762] Starting peer-to-peer node instance=Geth/v1.10.23-stable-d901d853/linux-amd64/go1.18.5\r\n\r\nINFO [09-19|03:50:39.891] New local node record seq=1,661,486,804,259 id=6697872b43a56c38 ip=127.0.0.1 udp=30303 tcp=30303\r\n\r\nINFO [09-19|03:50:39.891] Started P2P networking self=enode://26f1274579273f9e85bab796104a69de286c1a7708a399757ef1c68ea9546d324ee792350b832b71024b92230621cf65091cc1ea95d66936345869998585b39b@127.0.0.1:30303\r\n\r\nINFO [09-19|03:50:39.895] IPC endpoint opened url=/gethMainnetData/geth.ipc\r\n\r\nINFO [09-19|03:50:39.896] Loaded JWT secret file path=/gethMainnetData/jwt.hex crc32=0x6848607b\r\n\r\nINFO [09-19|03:50:39.896] HTTP server started endpoint=[::]:26892 auth=false prefix= cors= vhosts=*\r\n\r\nINFO [09-19|03:50:39.896] WebSocket enabled url=ws://[::]:8551\r\n\r\nINFO [09-19|03:50:39.897] HTTP server started endpoint=[::]:8551 auth=true prefix= cors=localhost vhosts=*\r\n\r\nWARN [09-19|03:50:41.376] Served eth_coinbase conn=195.123.222.16:48074 reqid=1 duration=\"66.62µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.425] Served eth_coinbase conn=195.123.222.16:48520 reqid=1 duration=\"45.12µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.533] Served eth_coinbase conn=195.123.222.16:48574 reqid=1 duration=\"41.09µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.647] Served eth_coinbase conn=195.123.222.16:55312 reqid=1 duration=\"39.22µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.660] Served eth_coinbase conn=195.123.222.16:55306 reqid=1 duration=\"86.29µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.661] Served eth_coinbase conn=195.123.222.16:55744 reqid=1 duration=\"26.21µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.760] Served eth_coinbase conn=195.123.222.16:57256 reqid=1 duration=\"37.089µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:41.783] Served eth_coinbase conn=195.123.222.16:57770 reqid=1 duration=\"38.98µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:42.075] Served eth_coinbase conn=195.123.222.16:60304 reqid=1 duration=\"30.411µs\" err=\"etherbase must be explicitly specified\"\r\n\r\nWARN [09-19|03:50:42.596] Served miner_getHashrate conn=195.123.222.16:49386 reqid=1 duration=\"15.63µs\" err=\"the method miner_getHashrate does not exist/is not available\"\r\n\r\nINFO [09-19|03:50:43.407] New local node record seq=1,661,486,804,260 id=6697872b43a56c38 ip=52.89.90.120 udp=30303 tcp=30303",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1251540143",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25813#issuecomment-1251540143",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813",
    "id": 1251540143,
    "node_id": "IC_kwDOAOvK985KmPyv",
    "user": {
      "login": "mohammadfarari1360",
      "id": 51296953,
      "node_id": "MDQ6VXNlcjUxMjk2OTUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/51296953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mohammadfarari1360",
      "html_url": "https://github.com/mohammadfarari1360",
      "followers_url": "https://api.github.com/users/mohammadfarari1360/followers",
      "following_url": "https://api.github.com/users/mohammadfarari1360/following{/other_user}",
      "gists_url": "https://api.github.com/users/mohammadfarari1360/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mohammadfarari1360/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mohammadfarari1360/subscriptions",
      "organizations_url": "https://api.github.com/users/mohammadfarari1360/orgs",
      "repos_url": "https://api.github.com/users/mohammadfarari1360/repos",
      "events_url": "https://api.github.com/users/mohammadfarari1360/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mohammadfarari1360/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T20:58:15Z",
    "updated_at": "2023-05-08T07:33:57Z",
    "author_association": "NONE",
    "body": "Good ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1251540143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1252137740",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25813#issuecomment-1252137740",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25813",
    "id": 1252137740,
    "node_id": "IC_kwDOAOvK985KohsM",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-20T10:14:07Z",
    "updated_at": "2022-09-20T10:14:07Z",
    "author_association": "MEMBER",
    "body": "Seems that you hard terminated Geth (`WARN [09-19|03:50:39.758] Unclean shutdown detected booted=2022-09-19T03:36:13+0000 age=14m26s`) without a graceful shutdown. That results in state kept in memory (GC) to be lost. In that case, Geth needs to go back to the point where it had a clean shutdown and rerun the blocks from there.\r\n\r\nPlease make sure things always terminate gracefully.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1252137740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

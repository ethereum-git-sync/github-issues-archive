{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17232",
  "id": 343661808,
  "node_id": "MDU6SXNzdWUzNDM2NjE4MDg=",
  "number": 17232,
  "title": "Restarting Geth loses all transactions?",
  "user": {
    "login": "DottoreM",
    "id": 7346776,
    "node_id": "MDQ6VXNlcjczNDY3NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7346776?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DottoreM",
    "html_url": "https://github.com/DottoreM",
    "followers_url": "https://api.github.com/users/DottoreM/followers",
    "following_url": "https://api.github.com/users/DottoreM/following{/other_user}",
    "gists_url": "https://api.github.com/users/DottoreM/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DottoreM/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DottoreM/subscriptions",
    "organizations_url": "https://api.github.com/users/DottoreM/orgs",
    "repos_url": "https://api.github.com/users/DottoreM/repos",
    "events_url": "https://api.github.com/users/DottoreM/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DottoreM/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-07-23T14:40:04Z",
  "updated_at": "2018-10-25T01:21:11Z",
  "closed_at": "2018-07-24T09:38:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI am using the below commands to a private network.\r\n\r\n`geth --datadir c:\\\\blockchain init c:\\\\genesis.json`\r\n\r\n`geth –-identity \"blockdb\" –-rpc -–rpcport \"9040\" --rpccorsdomain \"*\" –-rpcapi \"db,eth,net,web3\" –-datadir \"c:\\\\blockchain\" –-port \"30303\" –-nodiscover –-networkid 76543 console`\r\n\r\nWhen I close the CMD (effectively shutting off the node) and restart it again, using the same line of code \r\n\r\n`geth –-identity \"blockdb\" –-rpc -–rpcport \"9040\" --rpccorsdomain \"*\" –-rpcapi \"db,eth,net,web3\" –-datadir \"c:\\\\blockchain\" –-port \"30303\" –-nodiscover –-networkid 76543 console`\r\n\r\nI am keeping all wallets i create but all the Ether and transactions are reset to 0.\r\n\r\nI have already [asked ](https://ethereum.stackexchange.com/questions/54756/ethereum-deployment-problems )in the stack exchange community, came across a [similar ](https://ethereum.stackexchange.com/questions/39922/ethereum-private-chain-resets-back-to-block-0-when-restarted) question but did not solve the issue.  I have more than 130 blocks (that might be empty). Now I am asking here because I came across this [question ](https://stackoverflow.com/questions/48827797/ethereum-private-chain-resets-back-to-block-0-when-restarted) and I noticed the following comment: \r\n\r\n> Thanks everyone just figured out the issue. Problem is with the geth 1.8 Iceberg version it resets the blockchain everytime u close the console I downgraded to 1.7.3 stable and the issue is solved :) Do not use the 1.8 geth version yet – Saliya Perera Feb 17 at 2:01\r\n\r\nSo, is there really an issue with Geth Versions 1.8????",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/407325137",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17232#issuecomment-407325137",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232",
    "id": 407325137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzMyNTEzNw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T08:27:52Z",
    "updated_at": "2018-07-24T08:27:52Z",
    "author_association": "MEMBER",
    "body": "If you gracefully close Geth it should be fine (Ctrl + D). I have a hunch you are forcefully killing it.\r\n\r\nStarting with Geth 1.8.0, we don't push everything to disk immediately, rather retain the state in memory for some amount of time (1h of block processing with the latest code). This reduces disk usage enormously. However, it also means that if you kill Geth before it can push the data to disk, you'll need to resync that part.\r\n\r\nNow, if you have a single node, that's problematic because there is noone to sync from. Please make sure you always terminate Geth gracefully and not kill it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/407325137/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/422633979",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17232#issuecomment-422633979",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232",
    "id": 422633979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjYzMzk3OQ==",
    "user": {
      "login": "liwei00wade",
      "id": 40479347,
      "node_id": "MDQ6VXNlcjQwNDc5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/40479347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liwei00wade",
      "html_url": "https://github.com/liwei00wade",
      "followers_url": "https://api.github.com/users/liwei00wade/followers",
      "following_url": "https://api.github.com/users/liwei00wade/following{/other_user}",
      "gists_url": "https://api.github.com/users/liwei00wade/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liwei00wade/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liwei00wade/subscriptions",
      "organizations_url": "https://api.github.com/users/liwei00wade/orgs",
      "repos_url": "https://api.github.com/users/liwei00wade/repos",
      "events_url": "https://api.github.com/users/liwei00wade/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liwei00wade/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-19T03:06:15Z",
    "updated_at": "2018-09-19T03:06:15Z",
    "author_association": "NONE",
    "body": "@karalabe karalabe\r\nhow to resync that part ? \r\n\r\nwhich command ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/422633979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/432880340",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17232#issuecomment-432880340",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17232",
    "id": 432880340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg4MDM0MA==",
    "user": {
      "login": "taoxinyi",
      "id": 22277258,
      "node_id": "MDQ6VXNlcjIyMjc3MjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/22277258?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taoxinyi",
      "html_url": "https://github.com/taoxinyi",
      "followers_url": "https://api.github.com/users/taoxinyi/followers",
      "following_url": "https://api.github.com/users/taoxinyi/following{/other_user}",
      "gists_url": "https://api.github.com/users/taoxinyi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taoxinyi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taoxinyi/subscriptions",
      "organizations_url": "https://api.github.com/users/taoxinyi/orgs",
      "repos_url": "https://api.github.com/users/taoxinyi/repos",
      "events_url": "https://api.github.com/users/taoxinyi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taoxinyi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-25T01:18:49Z",
    "updated_at": "2018-10-25T01:21:11Z",
    "author_association": "NONE",
    "body": "@karalabe  Is there a way to force geth to push the data to disk immediately or manually whenever a new block is created?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/432880340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23382",
  "id": 967285972,
  "node_id": "MDU6SXNzdWU5NjcyODU5NzI=",
  "number": 23382,
  "title": "debug_traceCall should not require a non-zero maxFeePerGas value",
  "user": {
    "login": "bgelb",
    "id": 203273,
    "node_id": "MDQ6VXNlcjIwMzI3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/203273?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bgelb",
    "html_url": "https://github.com/bgelb",
    "followers_url": "https://api.github.com/users/bgelb/followers",
    "following_url": "https://api.github.com/users/bgelb/following{/other_user}",
    "gists_url": "https://api.github.com/users/bgelb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bgelb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bgelb/subscriptions",
    "organizations_url": "https://api.github.com/users/bgelb/orgs",
    "repos_url": "https://api.github.com/users/bgelb/repos",
    "events_url": "https://api.github.com/users/bgelb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bgelb/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-08-11T19:14:15Z",
  "updated_at": "2021-08-12T03:05:11Z",
  "closed_at": "2021-08-12T03:05:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "This issue is a spin-off of issue #23377 \r\n\r\n#### System information\r\n\r\nGeth version: 1.10.6\r\nOS & Version: Ubuntu 20.04\r\nCommit hash : n/a\r\n\r\n#### Expected behaviour\r\n\r\nBelow is an example eth_call invocation to read the name() getter in the WETH token:\r\n\r\n>>> web3.provider.make_request('eth_call', [{'to' : '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2', 'data': '0x06fdde03'}, hex(13005659)])\r\n{\r\n    'id': 8,\r\n    'jsonrpc': \"2.0\",\r\n    'result': \"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000d5772617070656420457468657200000000000000000000000000000000000000\"\r\n}\r\n\r\nI would expect I should be able to call debug_traceCall with the same call args and get a trace of the call.\r\n\r\n#### Actual behaviour\r\n\r\n>>> web3.provider.make_request('debug_traceCall', [{'to' : '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2', 'data': '0x06fdde03'}, hex(13005659)])\r\n{\r\n    'error': {\r\n        'code': -32000,\r\n        'message': \"tracing failed: fee cap less than block base fee: address 0x0000000000000000000000000000000000000000, gasFeeCap: 0 baseFee: 127426603036\"\r\n    },\r\n    'id': 11,\r\n    'jsonrpc': \"2.0\",\r\n    'result': {\r\n        'structLogs': []\r\n    }\r\n}\r\n\r\nTo work around this issue, I must specify a maxFeePerGas larger than the baseFeePerGas of the specified block, e.g.:\r\n\r\n>>> web3.provider.make_request('debug_traceCall', [{'to' : '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2', 'data': '0x06fdde03', 'maxFeePerGas' : hex(500*10**9)}, hex(13005659)])\r\n{\r\n    'id': 12,\r\n    'jsonrpc': \"2.0\",\r\n    'result': {\r\n        'failed': False,\r\n        'gas': 24174,\r\n        'returnValue': \"0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000d5772617070656420457468657200000000000000000000000000000000000000\",\r\n        'structLogs': [\r\n            {\r\n                'depth': 1,\r\n                'gas': 24978936,\r\n                'gasCost': 3,\r\n                'memory': [],\r\n                'op': \"PUSH1\",\r\n                'pc': 0,\r\n                'stack': [],\r\n                'storage': {\r\n                }\r\n            },\r\n<snip>\r\n\r\n...and then it works as expected. I don't believe it makes sense to require a non-zero maxFeePerGas on a call (and eth_call does not require it) so I don't believe debug_traceCall should require non-zero maxFeePerGas either.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nSee above.",
  "closed_by": {
    "login": "bgelb",
    "id": 203273,
    "node_id": "MDQ6VXNlcjIwMzI3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/203273?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bgelb",
    "html_url": "https://github.com/bgelb",
    "followers_url": "https://api.github.com/users/bgelb/followers",
    "following_url": "https://api.github.com/users/bgelb/following{/other_user}",
    "gists_url": "https://api.github.com/users/bgelb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bgelb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bgelb/subscriptions",
    "organizations_url": "https://api.github.com/users/bgelb/orgs",
    "repos_url": "https://api.github.com/users/bgelb/repos",
    "events_url": "https://api.github.com/users/bgelb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bgelb/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897102991",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23382#issuecomment-897102991",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382",
    "id": 897102991,
    "node_id": "IC_kwDOAOvK9841eLSP",
    "user": {
      "login": "bgelb",
      "id": 203273,
      "node_id": "MDQ6VXNlcjIwMzI3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/203273?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgelb",
      "html_url": "https://github.com/bgelb",
      "followers_url": "https://api.github.com/users/bgelb/followers",
      "following_url": "https://api.github.com/users/bgelb/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgelb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgelb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgelb/subscriptions",
      "organizations_url": "https://api.github.com/users/bgelb/orgs",
      "repos_url": "https://api.github.com/users/bgelb/repos",
      "events_url": "https://api.github.com/users/bgelb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgelb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T19:45:48Z",
    "updated_at": "2021-08-11T19:45:48Z",
    "author_association": "NONE",
    "body": "Also noting the documentation seems to confirm that specifying a gas price should be optional (though it has not been updated for EIP1559):\r\n\r\nFrom: https://geth.ethereum.org/docs/rpc/ns-debug#debug_tracecall\r\n\r\nObject - The transaction call object\r\n\r\nfrom: DATA, 20 Bytes - (optional) The address the transaction is sent from.\r\nto: DATA, 20 Bytes - The address the transaction is directed to.\r\ngas: QUANTITY - (optional) Integer of the gas provided for the transaction execution. eth_call consumes zero gas, but this parameter may be needed by some executions.\r\ngasPrice: QUANTITY - (optional) Integer of the gasPrice used for each paid gas <------------------------------- optional\r\nvalue: QUANTITY - (optional) Integer of the value sent with this transaction\r\ndata: DATA - (optional) Hash of the method signature and encoded parameters. For details see Ethereum Contract ABI in the Solidity documentation",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897102991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897306946",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23382#issuecomment-897306946",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382",
    "id": 897306946,
    "node_id": "IC_kwDOAOvK9841e9FC",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T02:52:43Z",
    "updated_at": "2021-08-12T02:52:43Z",
    "author_association": "MEMBER",
    "body": "@bgelb are you sure you are using the 1.10.6? I can't find the error `fee cap less than block base fee` in our codebase. And actually the basefee check is also disabled for `debug_traceCall`. Can you please double check your version?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897306946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897310010",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23382#issuecomment-897310010",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382",
    "id": 897310010,
    "node_id": "IC_kwDOAOvK9841e906",
    "user": {
      "login": "bgelb",
      "id": 203273,
      "node_id": "MDQ6VXNlcjIwMzI3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/203273?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgelb",
      "html_url": "https://github.com/bgelb",
      "followers_url": "https://api.github.com/users/bgelb/followers",
      "following_url": "https://api.github.com/users/bgelb/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgelb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgelb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgelb/subscriptions",
      "organizations_url": "https://api.github.com/users/bgelb/orgs",
      "repos_url": "https://api.github.com/users/bgelb/repos",
      "events_url": "https://api.github.com/users/bgelb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgelb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T03:01:46Z",
    "updated_at": "2021-08-12T03:01:46Z",
    "author_association": "NONE",
    "body": "$ geth attach http://localhost:8545\r\nWelcome to the Geth JavaScript console!\r\n\r\ninstance: Geth/v1.10.6-stable/linux-amd64/go1.14.2\r\ncoinbase: 0x7c3e6c2544e3e4462e44530e9cda5e745c831c0b\r\nat block: 13007784 (Wed Aug 11 2021 20:01:19 GMT-0700 (PDT))\r\n modules: debug:1.0 eth:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0\r\n\r\nTo exit, press ctrl-d\r\n> ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897310010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897311262",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23382#issuecomment-897311262",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23382",
    "id": 897311262,
    "node_id": "IC_kwDOAOvK9841e-Ie",
    "user": {
      "login": "bgelb",
      "id": 203273,
      "node_id": "MDQ6VXNlcjIwMzI3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/203273?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgelb",
      "html_url": "https://github.com/bgelb",
      "followers_url": "https://api.github.com/users/bgelb/followers",
      "following_url": "https://api.github.com/users/bgelb/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgelb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgelb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgelb/subscriptions",
      "organizations_url": "https://api.github.com/users/bgelb/orgs",
      "repos_url": "https://api.github.com/users/bgelb/repos",
      "events_url": "https://api.github.com/users/bgelb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgelb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T03:05:11Z",
    "updated_at": "2021-08-12T03:05:11Z",
    "author_association": "NONE",
    "body": "**head hung in shame**\r\n\r\nYou were right Gary. I was using my archive node. I can get debug_callTrace to run with a 0 valued maxFeePerGas.\r\n\r\nI am closing the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/897311262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

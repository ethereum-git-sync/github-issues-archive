{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20000",
  "id": 484066213,
  "node_id": "MDU6SXNzdWU0ODQwNjYyMTM=",
  "number": 20000,
  "title": "personal.newAccount should be rejected over HTTP RPC endpoints",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-08-22T15:34:41Z",
  "updated_at": "2019-09-10T09:11:18Z",
  "closed_at": "2019-09-10T09:11:18Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `master`\r\nOS & Version: OSX\r\nCommit hash : 961aa0533f75027bc5bc80f994adb80d14635553\r\n\r\n#### Expected behaviour\r\n\r\n`personal.newAccount` is rejected when issued over an HTTP (and potentially HTTPS?) RPC connection.\r\n\r\n#### Actual behaviour\r\n\r\n`personal.newAccount` succeeds without any warning.\r\n\r\nInterestingly, `personal.unlockAccount` is rejected with the message `account unlock with HTTP access is forbidden` even if issued over an IPC connect **IF** the node has HTTP RPC exposed to the public.\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/523967685",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20000#issuecomment-523967685",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20000",
    "id": 523967685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzk2NzY4NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-22T15:58:49Z",
    "updated_at": "2019-08-22T15:58:49Z",
    "author_association": "MEMBER",
    "body": "So, let me explain a bit of the background why `personal.unlock` is forbidden. \r\n\r\n- If an account `A` is unlocked, _anyone_ who has access to the `eth` namespace through the RPC port can send transactions from `A`. Therefore, whenever `http rpc` is enabled, we disable unlocking capabilities, regardless of whether the actual unlock happens through CLI-flags/IPC RPC/whatever. \r\n\r\nThat same reasoning does not apply to `newAccount`, though. I would say there are two sensitive things here: \r\n\r\n1. An attacker might see the password traverse the network. \r\n2. An attacker might create new accounts, spuriously on the victim (which is not really an issue -- he would also need the actual keystore, not just the password in order to take any funds from them).\r\n\r\nWith regards to the first item, I agree that it's bad to send passwords over http, both for the reason mentioned but also because it prevents us from keeping an audit log of the RPC traffic. \r\n\r\nClef does not permit such things -- but the question is if we should change how geth works at this time? I'm guessing many prod systems cannot use IPC across machines, and thus are left to HTTP which they have to secure by themselves in their local networks. If we disallow this, then I'm thinking we need geth to be able to handle https properly.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/523967685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

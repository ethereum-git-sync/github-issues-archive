{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1098",
  "id": 80842925,
  "node_id": "MDU6SXNzdWU4MDg0MjkyNQ==",
  "number": 1098,
  "title": "Fork, Synchronisation failed: empty hash set by peer",
  "user": {
    "login": "bas-vk",
    "id": 4280775,
    "node_id": "MDQ6VXNlcjQyODA3NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bas-vk",
    "html_url": "https://github.com/bas-vk",
    "followers_url": "https://api.github.com/users/bas-vk/followers",
    "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
    "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
    "organizations_url": "https://api.github.com/users/bas-vk/orgs",
    "repos_url": "https://api.github.com/users/bas-vk/repos",
    "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bas-vk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2015-05-26T07:47:21Z",
  "updated_at": "2015-06-05T15:28:10Z",
  "closed_at": "2015-06-05T15:28:09Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Geth keeps printing the following message and won't import/receive new blocks.\n`Synchronisation failed: empty hash set by peer`\n\nThis was with cc318ff8db20528cb567227c42c5d37dc892cc49\n\nLogs:\nhttps://gist.github.com/bas-vk/0f600f5e3f700ea90580\n\nExtra info:\n\n```\n> net\n{\n  listening: true,\n  getListening: [Function],\n  peerCount: 12,\n  getPeerCount: [Function]\n}\n> admin.peers()\n[{\n  ID: 'ead9cb39c855003c52bee5e94165d4c54403e2bf21d6e208c330c0d518161b19c7f73f78fd17d34a953e98043e1de40d77cdec24485c3e7aa78e247895fc3505',\n  Name: 'pyethapp_c86e/v0.9.18/linux2/py2.7.9',\n  Caps: 'eth/60, p2p/4',\n  RemoteAddress: '144.76.62.101:30304',\n  LocalAddress: '192.168.178.13:16177'\n}, {\n  ID: '01a3c94245317b7e96b42be2fe34a4c365d9174492e6033786da9f922e24ce7ee548734efe748e82d257c1c10126178f4dbd81b5e02b7ea1ddcaf9451037e9fb',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '52.5.26.21:48031',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '01d984e121148368381a554989dac2279b28b7c1c0cd3e1bae3176ac120d4370ba83775b35bcfbabb71bd1757e23d01600bf08acfee01bebcc327334393d2eb4',\n  Name: '++eth/v0.9.20/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '85.183.206.130:48106',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '8fa4505495db082c99793cb7985d6814f03119b0d27c6223cb15dfe47e3da3b03f5ae93cf4bbd3616f052641f1d5d531546201ebc00a424770bfef793ad64b23',\n  Name: '++eth/v0.9.21/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '81.135.246.3:46142',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: 'cf2336ebf5c5cf92f9c0ac14d390c7be56e2da27b7bd2cd0bf5bba10a8c0090dd2fd279d7c7a057b3845027cd90ba8f014247432e5b9b22bb750356615205865',\n  Name: '++eth/Gav's Node/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '92.51.165.126:41631',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '6274ae0dcd3153a3e05a6a918c7557d7c031c805882ce78e4a0759b759c9ad6f87803141d03e68c131a2b6098f59a1df95a092baf77923a8f9d10da8cf38f6ab',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '52.5.25.137:30303',\n  LocalAddress: '192.168.178.13:8805'\n}, {\n  ID: 'a8c1476bd31311b4bc0cad77d928b30e0a61da0d796a5fe3e9d1a8cd41c8560e6379533c84cd93130b4335a33c4934a5d98b97ba2e35f5ff26c5ae3cfcd60b0d',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '71.123.62.102:37060',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '0eeca1b2060ccc1fe454eac674db1723dea7eaeefadf2cf4d356c377a2f46344c91e68e840737e88f55377f4e083a11a72626085dd40219bcd85a7990f5bf1ec',\n  Name: 'Geth/v0.9.22-6c2ad7b7/linux/go1.2.1',\n  Caps: 'eth/60',\n  RemoteAddress: '50.169.152.25:33346',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '20fc7344bc3714cd27ccb5af7653d9a70d176d4f06867456abb20e18d4651948044f3761a6df1d264fd1d975d1ebca08e4fa0a71ab41270ade248ce90c2e4270',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '52.5.26.15:55666',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: '4beba5e2cfc63aa3bba90e84cd2c3690921b0ee4c72cecb96b6ce08b51d1614317dd86c167c957e7bf7c99c80ec7b6a948150bc29d1f76260b0e387e3acc1031',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '52.5.60.7:30303',\n  LocalAddress: '192.168.178.13:25588'\n}, {\n  ID: 'a700e3746f4203a453f9e384ca6a42b7d1b92e6f9f7286f2cd68fe237187f2fbdc4b7ef97cff6163498914e3f82720c6cbe442b63eb47ceba8b9ffde87104aa5',\n  Name: '++eth/v0.9.23/Release/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '79.199.154.68:44219',\n  LocalAddress: '192.168.178.13:30303'\n}, {\n  ID: 'a1983e960ce3e3a91b1f3f504221b7b1c85fd37e252750811decd4300dedc04a9b1b319eca11f4cb42ceae2d1186effb3285af078a415222c179fdb1afaa773f',\n  Name: '++eth/v0.9.23/Debug/Linux/g++/int',\n  Caps: 'eth/60',\n  RemoteAddress: '71.202.162.40:60803',\n  LocalAddress: '192.168.178.13:30303'\n} ]\n```\n\nAfter a restart of geth:\n\n```\nI0526 09:41:15.621598    6709 backend.go:255] Protocol Version: 60, Network Id: 0\nI0526 09:41:15.621701    6709 backend.go:265] Blockchain DB Version: 2\nI0526 09:41:15.623341    6709 chain_manager.go:248] Last block (#449960) ac8fd20c696fdf7c887eb0acb4532fe972aa195bcfb3ab1c89afcb2f90a22688 TD=957922466603046\nI0526 09:41:16.197109    6709 cmd.go:137] Starting Geth/v0.9.23/linux/go1.4.2\nI0526 09:41:16.197184    6709 server.go:209] Starting Server\nI0526 09:41:17.658683    6709 udp.go:189] Listening, enode://4d19a2d9df5fcdce6d9a23574a4ccf57a81595d9ca83688e29d5adb1d2d2d9a922e893a0b1b78814cd84ad4c7481b5a065e591218ff57a022ebe7488f167fa41@94.214.9.104:30303\nI0526 09:41:17.658794    6709 backend.go:479] Server started\nI0526 09:41:17.658823    6709 server.go:349] Listening on [::]:30303\nI0526 09:41:17.659868    6709 nat.go:95] mapped network port udp:30303 -> 30303 (ethereum discovery) using UPNP IGDv1-IP1\nI0526 09:41:17.670121    6709 nat.go:95] mapped network port tcp:30303 -> 30303 (ethereum p2p) using UPNP IGDv1-IP1\nI0526 09:42:33.529193    6709 downloader.go:153] Block synchronisation started\nI0526 09:42:36.670011    6709 chain_manager.go:707] Fork detected @ aadd742f. Reorganising chain from #449960 ac8fd20c to 06f10655\nI0526 09:42:45.563400    6709 chain_manager.go:650] imported 256 block(s) (0 queued 0 ignored) in 8.89732269s. #450215 [4ae14af7 / d33084fe]\nI0526 09:42:45.916427    6709 chain_manager.go:650] imported 86 block(s) (0 queued 0 ignored) in 352.94393ms. #450301 [80548189 / 7c44d88f]\nI0526 09:42:47.903898    6709 chain_manager.go:650] imported 0 block(s) (0 queued 256 ignored) in 1.739527321s. #450219 [2a549c72 / 9f9f6d16]\n```\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/105453850",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1098#issuecomment-105453850",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1098",
    "id": 105453850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTQ1Mzg1MA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-26T08:56:41Z",
    "updated_at": "2015-05-26T08:56:41Z",
    "author_association": "MEMBER",
    "body": "Ah, I have an idea.\n\nThere seems to be a faulty peer in the network which sent you a partial chain, and at a certain point refused to send you anything new (i.e. an empty hash set). Then sync aborted because it was simply a dangling chain. However, I did not drop the peer (should have), so you keep retrying the next time too from the same guy, again getting screwed.\n\nI'll open a fix in a few mins, it's fairly trivial, though a test would also be welcome to support it.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/105453850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

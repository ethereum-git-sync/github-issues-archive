{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16607",
  "id": 318793760,
  "node_id": "MDU6SXNzdWUzMTg3OTM3NjA=",
  "number": 16607,
  "title": "Geth DB corruption for gcmode=archive",
  "user": {
    "login": "vbecas",
    "id": 5663698,
    "node_id": "MDQ6VXNlcjU2NjM2OTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5663698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vbecas",
    "html_url": "https://github.com/vbecas",
    "followers_url": "https://api.github.com/users/vbecas/followers",
    "following_url": "https://api.github.com/users/vbecas/following{/other_user}",
    "gists_url": "https://api.github.com/users/vbecas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vbecas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vbecas/subscriptions",
    "organizations_url": "https://api.github.com/users/vbecas/orgs",
    "repos_url": "https://api.github.com/users/vbecas/repos",
    "events_url": "https://api.github.com/users/vbecas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vbecas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-04-30T06:07:16Z",
  "updated_at": "2018-05-02T07:58:14Z",
  "closed_at": "2018-05-02T07:58:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\n3 days ago all my Geth instances (6 of them) running in gcmode=archive were corrupted. Nodes that were running with fastmode=full were unaffected. \r\n\r\nI was unable to just restart Geth, so I restored it from a backup and let it catch up with the chain. Unfortunately, after 2 days of syncing, I got the same bug.\r\n\r\nPS: I also tried syncing with an older Geth version (i.e v.1.8.1 and 1.7.3) without any luck.\r\n\r\n#### System information\r\n\r\nGeth version: 1.8.6 and older\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n(128GB RAM with 32cores and 4TB ssd)\r\n\r\n#### Expected behaviour\r\nGeth should sync\r\n\r\n#### Actual behaviour\r\nGeth crashes\r\n\r\n#### Backtrace\r\nINFO [04-30|02:48:56] Imported new chain segment               blocks=15 txs=1689 mgas=97.669  elapsed=8.217s    mgasps=11.886 number=5528514 hash=0c644dâ€¦c6a4d8 cache=0.00B\r\npanic: runtime error: index out of range [recovered]\r\n\tpanic: runtime error: index out of range [recovered]\r\n\tpanic: runtime error: index out of range\r\n\r\ngoroutine 15 [running]:\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction.func1(0xc82582df28, 0xc4202c84e0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:741 +0xf1\r\npanic(0xdd05a0, 0x17601a0)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/panic.go:505 +0x229\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionTransact.func1(0x108d780, 0xcc4c83b150, 0xc4202c84e0, 0xc581c5f0b0, 0xc)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:158 +0x1a9\r\npanic(0xdd05a0, 0x17601a0)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/panic.go:505 +0x229\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.shortenb(0x100d14b2d84, 0x4, 0xc82582d4a8)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/util.go:30 +0x136\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*version).computeCompaction(0xc5835aa0a0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:395 +0x47a\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*versionStaging).finish(0xc82582d7a0, 0xc6c5006000)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:510 +0x893\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*version).spawn(0xc866248410, 0xc6c5006000, 0xc866248410)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:279 +0x63\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*session).commit(0xc4200f9600, 0xc6c5006000, 0x0, 0x0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/session.go:195 +0x7e\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionCommit.func1(0xc581c5f0c0, 0xc5835aa001, 0xc581c5f0c0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:263 +0x37\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*compactionTransactFunc).run(0xcc4c83b150, 0xc581c5f0c0, 0x108d780, 0xcc4c83b150)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:241 +0x33\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionTransact(0xc4202c84e0, 0xc581c5f0b0, 0xc, 0x108d780, 0xcc4c83b150)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:185 +0x162\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionTransactFunc(0xc4202c84e0, 0xc581c5f0b0, 0xc, 0xc5835a4340, 0x0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:252 +0x88\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionCommit(0xc4202c84e0, 0xf097a3, 0x5, 0xc6c5006000)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:262 +0x11e\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).memCompaction(0xc4202c84e0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:322 +0x4a5\r\ngithub.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc4202c84e0)\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:755 +0x81\r\ncreated by github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.openDB\r\n\t/home/travis/gopath/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x649\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385494540",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16607#issuecomment-385494540",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607",
    "id": 385494540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQ5NDU0MA==",
    "user": {
      "login": "ryanschneider",
      "id": 53520,
      "node_id": "MDQ6VXNlcjUzNTIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/53520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanschneider",
      "html_url": "https://github.com/ryanschneider",
      "followers_url": "https://api.github.com/users/ryanschneider/followers",
      "following_url": "https://api.github.com/users/ryanschneider/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanschneider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanschneider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanschneider/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanschneider/orgs",
      "repos_url": "https://api.github.com/users/ryanschneider/repos",
      "events_url": "https://api.github.com/users/ryanschneider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanschneider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T18:55:17Z",
    "updated_at": "2018-04-30T18:55:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can confirm that we had several `1.7.3` nodes hit what appears to be the same issue over the weekend (but none of our 1.8.x seem to have been effected).\r\n\r\nUnfortunately the logs rolled over because it kept trying to restart, so I don't have the original panic, but do have the panic that occurs when trying to restart:\r\n\r\n```\r\nApr 30 18:52:07 ip-10-0-24-218 systemd[1]: Started Geth.\r\nApr 30 18:52:07 ip-10-0-24-218 geth[8238]: WARN [04-30|18:52:07] No etherbase set and no accounts found as default\r\nApr 30 18:52:07 ip-10-0-24-218 geth[8238]: INFO [04-30|18:52:07] Starting peer-to-peer node               instance=Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9\r\nApr 30 18:52:07 ip-10-0-24-218 geth[8238]: INFO [04-30|18:52:07] Allocated cache and file handles         database=/mnt/chainsnap/ethereum/geth/chaindata cache=2048 handles=1024\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: panic: runtime error: index out of range\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: goroutine 1 [running]:\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.shortenb(0x1004ec0105d, 0x4, 0xc4204c79f8)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/util.go:30 +0x14d\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*version).computeCompaction(0xc4287e40f0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:395 +0x4b3\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*versionStaging).finish(0xc4204c7d18, 0xc4201f2000)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:510 +0x935\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*version).spawn(0xc4201b80f0, 0xc4201f2000, 0xc4201b80f0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/version.go:279 +0x7a\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*session).commit(0xc4201d6240, 0xc4201f2000, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/session.go:195 +0x88\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal(0xc42016ed80, 0xc42016ed80, 0xc42006c660)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db.go:538 +0xdb8\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.openDB(0xc4201d6240, 0x0, 0x0, 0xc4201d6240)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db.go:122 +0x6ba\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.Open(0x185f540, 0xc42020e700, 0xc4204c82f0, 0x0, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db.go:194 +0x100\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb.OpenFile(0xc420238ea0, 0x26, 0xc4204c82f0, 0xc4201d3be0, 0x4, 0x4)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/github.com/syndtr/goleveldb/leveldb/db.go:216 +0x97\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/ethdb.NewLDBDatabase(0xc420238ea0, 0x26, 0x800, 0x400, 0x26, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/ethdb/database.go:72 +0x363\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/node.(*ServiceContext).OpenDatabase(0xc4202acd80, 0xf4ab0c, 0x9, 0x800, 0x400, 0x0, 0x0, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/node/service.go:46 +0x133\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/eth.CreateDB(0xc4202acd80, 0xc4201f0800, 0xf4ab0c, 0x9, 0x0, 0x0, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/backend.go:201 +0x5d\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/eth.New(0xc4202acd80, 0xc4201f0800, 0x181e560, 0xc4204cd808, 0x417388)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/backend.go:111 +0x93\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/cmd/utils.RegisterEthService.func2(0xc4202acd80, 0xc420172570, 0xc4204cdb18, 0x0, 0xc4201725a0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/utils/flags.go:1065 +0x3d\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/node.(*Node).Start(0xc4201fe480, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/node/node.go:175 +0x433\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/cmd/utils.StartNode(0xc4201fe480)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/utils/cmd.go:62 +0x2f\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: main.startNode(0xc42023a840, 0xc4201fe480)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:225 +0x43\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: main.geth(0xc42023a840, 0xffb990, 0xb2d05e00)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:215 +0x43\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.HandleAction(0xdd0020, 0xffce18, 0xc42023a840, 0xc42023a840, 0xc4204cdf40)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:490 +0xd2\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.(*App).Run(0xc42025a000, 0xc420010140, 0x14, 0x14, 0x0, 0x0)\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:264 +0x635\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]: main.main()\r\nApr 30 18:52:49 ip-10-0-24-218 geth[8238]:         /build/ethereum-ZSPmrv/ethereum-1.7.3+build11486+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:204 +0x55\r\n```\r\n\r\nIf there's anything I can capture from the chaindata that would help pinpoint what caused this please let me know. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385494540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385718440",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16607#issuecomment-385718440",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607",
    "id": 385718440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTcxODQ0MA==",
    "user": {
      "login": "tstranex",
      "id": 1934223,
      "node_id": "MDQ6VXNlcjE5MzQyMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1934223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tstranex",
      "html_url": "https://github.com/tstranex",
      "followers_url": "https://api.github.com/users/tstranex/followers",
      "following_url": "https://api.github.com/users/tstranex/following{/other_user}",
      "gists_url": "https://api.github.com/users/tstranex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tstranex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tstranex/subscriptions",
      "organizations_url": "https://api.github.com/users/tstranex/orgs",
      "repos_url": "https://api.github.com/users/tstranex/repos",
      "events_url": "https://api.github.com/users/tstranex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tstranex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T16:38:42Z",
    "updated_at": "2018-05-01T16:38:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "We're seeing the same issue.\r\n\r\nThe panic itself seems to be caused by a trivial bug in the leveldb code: https://github.com/ethereum/go-ethereum/blob/master/vendor/github.com/syndtr/goleveldb/leveldb/util.go#L30\r\nIf bytes is > 1 TB, then i = 4, which is out of range of bunits.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385718440/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385762534",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16607#issuecomment-385762534",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16607",
    "id": 385762534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTc2MjUzNA==",
    "user": {
      "login": "ryanschneider",
      "id": 53520,
      "node_id": "MDQ6VXNlcjUzNTIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/53520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanschneider",
      "html_url": "https://github.com/ryanschneider",
      "followers_url": "https://api.github.com/users/ryanschneider/followers",
      "following_url": "https://api.github.com/users/ryanschneider/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanschneider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanschneider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanschneider/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanschneider/orgs",
      "repos_url": "https://api.github.com/users/ryanschneider/repos",
      "events_url": "https://api.github.com/users/ryanschneider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanschneider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T19:18:04Z",
    "updated_at": "2018-05-01T19:18:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @tstranex for finding the fix!  If anyone needs a branch with his fix vendored in you can use this one, it's just 1.8.6 with leveled vendored from his PR, and an update to the version.go to correctly identify it as patched.\r\n\r\nhttps://github.com/ryanschneider/go-ethereum/tree/leveldb-patch-186\r\n\r\nHopefully 1.8.7 gets released ASAP, even if the leveled team is slow to accept the PR.  /cc @karalabe  and @holiman \r\n\r\nI guess this also means `geth` is the first consumer of goleveldb to have a 1TB db? :tada:..?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/385762534/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

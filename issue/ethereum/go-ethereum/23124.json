{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23124",
  "id": 932265606,
  "node_id": "MDU6SXNzdWU5MzIyNjU2MDY=",
  "number": 23124,
  "title": "London hard fork, geth and openethereum return values ​​are different",
  "user": {
    "login": "vae520283995",
    "id": 30487254,
    "node_id": "MDQ6VXNlcjMwNDg3MjU0",
    "avatar_url": "https://avatars.githubusercontent.com/u/30487254?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vae520283995",
    "html_url": "https://github.com/vae520283995",
    "followers_url": "https://api.github.com/users/vae520283995/followers",
    "following_url": "https://api.github.com/users/vae520283995/following{/other_user}",
    "gists_url": "https://api.github.com/users/vae520283995/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vae520283995/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vae520283995/subscriptions",
    "organizations_url": "https://api.github.com/users/vae520283995/orgs",
    "repos_url": "https://api.github.com/users/vae520283995/repos",
    "events_url": "https://api.github.com/users/vae520283995/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vae520283995/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-06-29T06:35:40Z",
  "updated_at": "2021-07-01T09:43:42Z",
  "closed_at": "2021-07-01T08:45:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "https://ropsten.etherscan.io/tx/0x2b6e2683876baa10f2de87811b7f4cb18b9b68e0519f7d943f0348cf6d4c77d9\r\n\r\ngeth:v1.10.4\r\n```\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"result\": {\r\n        \"blockHash\": \"0x310e11add898b3b617579832164daeb5c4eca8c76b902ca6b44686f04b7ade67\",\r\n        \"blockNumber\": \"0xa05e00\",\r\n        \"from\": \"0x822378bfb78bb5635d45cc1f64e47db21ec75ffd\",\r\n        \"gas\": \"0x5208\",\r\n        \"gasPrice\": \"0x25a02aa9c\",\r\n        \"maxFeePerGas\": \"0x25a02aa9c\",\r\n        \"maxPriorityFeePerGas\": \"0x25a02aa9c\",\r\n        \"hash\": \"0x2b6e2683876baa10f2de87811b7f4cb18b9b68e0519f7d943f0348cf6d4c77d9\",\r\n        \"input\": \"0x\",\r\n        \"nonce\": \"0x0\",\r\n        \"to\": \"0x8210357f377e901f18e45294e86a2a32215cc3c9\",\r\n        \"transactionIndex\": \"0xa\",\r\n        \"value\": \"0x7b\",\r\n        \"type\": \"0x2\",\r\n        \"accessList\": [],\r\n        \"chainId\": \"0x3\",\r\n        \"v\": \"0x1\",\r\n        \"r\": \"0x23b8a29e6e4ae9dbfa5db770c6d13c280ec6008ec2be3825ad881edbcb6ef8ce\",\r\n        \"s\": \"0xc3d666377009573d404737f0fa23faebf74a469bc05b8aba16d46e45d9c7afe\"\r\n    }\r\n}\r\n```\r\n\r\nopenethereum:v3.3.0-rc2\r\n```\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"result\": {\r\n        \"accessList\": [],\r\n        \"blockHash\": \"0x310e11add898b3b617579832164daeb5c4eca8c76b902ca6b44686f04b7ade67\",\r\n        \"blockNumber\": \"0xa05e00\",\r\n        \"chainId\": \"0x3\",\r\n        \"condition\": null,\r\n        \"creates\": null,\r\n        \"from\": \"0x822378bfb78bb5635d45cc1f64e47db21ec75ffd\",\r\n        \"gas\": \"0x5208\",\r\n        \"hash\": \"0x2b6e2683876baa10f2de87811b7f4cb18b9b68e0519f7d943f0348cf6d4c77d9\",\r\n        \"input\": \"0x\",\r\n        \"maxFeePerGas\": \"0x25a02aa9c\",\r\n        \"maxPriorityFeePerGas\": \"0x25a02aa9c\",\r\n        \"nonce\": \"0x0\",\r\n        \"publicKey\": \"0xe72cffa12972763ce7363bc05eeb7f61688a780bb45728584f3fa37e2a53e87da29bf01c740ae0ad79d1081995bf6b814d36799f1145b61e9c6387cc53bba2c3\",\r\n        \"r\": \"0x23b8a29e6e4ae9dbfa5db770c6d13c280ec6008ec2be3825ad881edbcb6ef8ce\",\r\n        \"raw\": \"0x02f86c038085025a02aa9c85025a02aa9c825208948210357f377e901f18e45294e86a2a32215cc3c97b80c001a023b8a29e6e4ae9dbfa5db770c6d13c280ec6008ec2be3825ad881edbcb6ef8cea00c3d666377009573d404737f0fa23faebf74a469bc05b8aba16d46e45d9c7afe\",\r\n        \"s\": \"0xc3d666377009573d404737f0fa23faebf74a469bc05b8aba16d46e45d9c7afe\",\r\n        \"to\": \"0x8210357f377e901f18e45294e86a2a32215cc3c9\",\r\n        \"transactionIndex\": \"0xa\",\r\n        \"type\": \"0x2\",\r\n        \"v\": \"0x1\",\r\n        \"value\": \"0x7b\"\r\n    },\r\n    \"id\": 1\r\n}\r\n```\r\n\r\nhttps://github.com/openethereum/openethereum/issues/453#issuecomment-868720660\r\n\r\ngeth has one more field than openethereum: gasprice\r\nSo how should the real tx fee be calculated for eip-1559?\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870313849",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-870313849",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 870313849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDMxMzg0OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T07:00:26Z",
    "updated_at": "2021-06-29T07:00:26Z",
    "author_association": "MEMBER",
    "body": "If it's an executed transaction, there is no need to calculate it - the gasPrice represents the effective price per gas in geth. So the cost is then calculated from that. Gas x gasPrice",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870313849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870322942",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-870322942",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 870322942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDMyMjk0Mg==",
    "user": {
      "login": "vae520283995",
      "id": 30487254,
      "node_id": "MDQ6VXNlcjMwNDg3MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/30487254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vae520283995",
      "html_url": "https://github.com/vae520283995",
      "followers_url": "https://api.github.com/users/vae520283995/followers",
      "following_url": "https://api.github.com/users/vae520283995/following{/other_user}",
      "gists_url": "https://api.github.com/users/vae520283995/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vae520283995/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vae520283995/subscriptions",
      "organizations_url": "https://api.github.com/users/vae520283995/orgs",
      "repos_url": "https://api.github.com/users/vae520283995/repos",
      "events_url": "https://api.github.com/users/vae520283995/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vae520283995/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T07:04:23Z",
    "updated_at": "2021-06-29T07:04:23Z",
    "author_association": "NONE",
    "body": "> If it's an executed transaction, there is no need to calculate it - the gasPrice represents the effective price per gas in geth. So the cost is then calculated from that. Gas x gasPrice\r\n\r\nYou mean that on geth, the method of calculating the fee is the same as the previous transaction: gasUsed*gasPrice\r\n\r\nBut if the gasPrice field is deleted in a future version, or we can't get the gasprice on clients such as openethereum now, how should the fee be calculated?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870322942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870377785",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-870377785",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 870377785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDM3Nzc4NQ==",
    "user": {
      "login": "vae520283995",
      "id": 30487254,
      "node_id": "MDQ6VXNlcjMwNDg3MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/30487254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vae520283995",
      "html_url": "https://github.com/vae520283995",
      "followers_url": "https://api.github.com/users/vae520283995/followers",
      "following_url": "https://api.github.com/users/vae520283995/following{/other_user}",
      "gists_url": "https://api.github.com/users/vae520283995/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vae520283995/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vae520283995/subscriptions",
      "organizations_url": "https://api.github.com/users/vae520283995/orgs",
      "repos_url": "https://api.github.com/users/vae520283995/repos",
      "events_url": "https://api.github.com/users/vae520283995/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vae520283995/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T08:10:14Z",
    "updated_at": "2021-06-29T08:10:14Z",
    "author_association": "NONE",
    "body": "> If it's an executed transaction, there is no need to calculate it - the gasPrice represents the effective price per gas in geth. So the cost is then calculated from that. Gas x gasPrice\r\n\r\n```\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"result\": {\r\n        \"blockHash\": \"0xef34793f27e1a884e215f78364ff2d30a7da7a2784eacff82e7e4ba509e7f53d\",\r\n        \"blockNumber\": \"0xa0b782\",\r\n        \"contractAddress\": null,\r\n        \"cumulativeGasUsed\": \"0xe7d7bd\",\r\n        \"effectiveGasPrice\": \"0x3b9aca07\",\r\n        \"from\": \"0x71b1887bba2de358b22cd053708f7beaed8a07e4\",\r\n        \"gasUsed\": \"0x5208\",\r\n        \"logs\": [],\r\n        \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"status\": \"0x1\",\r\n        \"to\": \"0xa8ec6970fec8842dd229eef170f624c3d77dab45\",\r\n        \"transactionHash\": \"0x27eca75ead5ce7a5c9e7da9c91a931e9f11e41d708594c02dfb1c61342e86976\",\r\n        \"transactionIndex\": \"0x1b\",\r\n        \"type\": \"0x2\"\r\n    }\r\n}\r\n```\r\nfee = effectiveGasPrice * gasUsed",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/870377785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872052444",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-872052444",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 872052444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjA1MjQ0NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T08:45:23Z",
    "updated_at": "2021-07-01T08:45:23Z",
    "author_association": "MEMBER",
    "body": "So, this is working as expected:\r\n\r\nThe 1559 spec wanted to remove the old `gasPrice` field from transactions and publish a new `effectiveGasPrice` in the receipts. Geth made a slight variation of this spec:\r\n\r\n- The `effectiveGasPrice` in the receipt was added, but that requires pulling the entire receipt from disk, just to discard it because it's not needed at all to calculate the gas price used. As such, we've also kept the gasPrice field in the transaction. Keeping the old field also prevents tools that look at gas prices from insta-breaking post-London.\r\n- The `gasPrice` field for 1559 txs before being mined will return the feeCap, as we don't know how much exactly the cost will be, but we do know the maximum. After inclusion, the gasPrice will be the amount actually paid per gas (same as for non 1559 txs).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872052444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872073154",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-872073154",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 872073154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjA3MzE1NA==",
    "user": {
      "login": "sunce86",
      "id": 19595624,
      "node_id": "MDQ6VXNlcjE5NTk1NjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19595624?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sunce86",
      "html_url": "https://github.com/sunce86",
      "followers_url": "https://api.github.com/users/sunce86/followers",
      "following_url": "https://api.github.com/users/sunce86/following{/other_user}",
      "gists_url": "https://api.github.com/users/sunce86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sunce86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sunce86/subscriptions",
      "organizations_url": "https://api.github.com/users/sunce86/orgs",
      "repos_url": "https://api.github.com/users/sunce86/repos",
      "events_url": "https://api.github.com/users/sunce86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sunce86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T09:12:40Z",
    "updated_at": "2021-07-01T09:12:40Z",
    "author_association": "NONE",
    "body": "> * The `effectiveGasPrice` in the receipt was added, but that requires pulling the entire receipt from disk, just to discard it because it's not needed at all to calculate the gas price used. As such, we've also kept the gasPrice field in the transaction. Keeping the old field also prevents tools that look at gas prices from insta-breaking post-London.\r\n\r\nSo, should we change the spec then? https://github.com/ethereum/eth1.0-specs/blob/05d6bf480a4e3228cf42b86b044de6832c077b3a/json-rpc/spec.json#L1709",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872073154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872075240",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23124#issuecomment-872075240",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23124",
    "id": 872075240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjA3NTI0MA==",
    "user": {
      "login": "vae520283995",
      "id": 30487254,
      "node_id": "MDQ6VXNlcjMwNDg3MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/30487254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vae520283995",
      "html_url": "https://github.com/vae520283995",
      "followers_url": "https://api.github.com/users/vae520283995/followers",
      "following_url": "https://api.github.com/users/vae520283995/following{/other_user}",
      "gists_url": "https://api.github.com/users/vae520283995/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vae520283995/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vae520283995/subscriptions",
      "organizations_url": "https://api.github.com/users/vae520283995/orgs",
      "repos_url": "https://api.github.com/users/vae520283995/repos",
      "events_url": "https://api.github.com/users/vae520283995/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vae520283995/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T09:15:26Z",
    "updated_at": "2021-07-01T09:15:26Z",
    "author_association": "NONE",
    "body": "@sunce86 https://github.com/ethereum/go-ethereum/issues/23125#issuecomment-872009070\r\nIs there a new api for openethereum?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/872075240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

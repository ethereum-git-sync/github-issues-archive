{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22001",
  "id": 762256983,
  "node_id": "MDU6SXNzdWU3NjIyNTY5ODM=",
  "number": 22001,
  "title": "Compilation error func Call()  from /accounts/abi/bind/base.go (master, release-1.9)",
  "user": {
    "login": "aquavirgo",
    "id": 21212395,
    "node_id": "MDQ6VXNlcjIxMjEyMzk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/21212395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aquavirgo",
    "html_url": "https://github.com/aquavirgo",
    "followers_url": "https://api.github.com/users/aquavirgo/followers",
    "following_url": "https://api.github.com/users/aquavirgo/following{/other_user}",
    "gists_url": "https://api.github.com/users/aquavirgo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aquavirgo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aquavirgo/subscriptions",
    "organizations_url": "https://api.github.com/users/aquavirgo/orgs",
    "repos_url": "https://api.github.com/users/aquavirgo/repos",
    "events_url": "https://api.github.com/users/aquavirgo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aquavirgo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-12-11T11:26:13Z",
  "updated_at": "2020-12-11T11:35:57Z",
  "closed_at": "2020-12-11T11:35:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.9`\r\nSolc version:  0.5.16+commit.9c3226ce.Linux.g++\r\nOS & Version: Windows/Linux/OSX\r\n\r\n#### Expected behaviour\r\n\r\n\r\n#### Actual behaviour\r\nThe problem with compilation of the GO file generate from the abigen.\r\nThe error information is \"(type *interface {}) as type *[]interface {} in argument to\"\r\n\r\n#### Steps to reproduce the behaviour\r\nThe base of the error is in changes in the accounts/abi/bind/base.go file on the master and the release-1.9 branches. \r\n\r\n results argumet has type ***[]interface{}** \r\n\r\n(c *BoundContract) Call(opts *CallOpts, results ***[]interface{}**, method string, params ...interface{})\r\n\r\nIn lower versions result is interface{} type and works properly.\r\nfunc (c *BoundContract) Call(opts *CallOpts, results interface{}, method string, params ...interface{}) error {\r\n\t\r\nThe fast solution for this problem is:\r\n\r\nfunc (c *BoundContract) Call(opts *CallOpts, results interface{}, method string, params ...interface{}) error {\r\n\t// Don't crash on a lazy user\r\n\tif opts == nil {\r\n\t\topts = new(CallOpts)\r\n\t}\r\n//\tif results == nil {\r\n//\t\tresults = new([]interface{})\r\n//\t}\r\n\t// Pack the input, call and unpack the results\r\n\tinput, err := c.abi.Pack(method, params...)\r\n\tif err != nil {\r\n\t\treturn err\r\n\t}\r\n\tvar (\r\n\t\tmsg    = ethereum.CallMsg{From: opts.From, To: &c.address, Data: input}\r\n\t\tctx    = ensureContext(opts.Context)\r\n\t\tcode   []byte\r\n\t\toutput []byte\r\n\t)\r\n\tif opts.Pending {\r\n\t\tpb, ok := c.caller.(PendingContractCaller)\r\n\t\tif !ok {\r\n\t\t\treturn ErrNoPendingState\r\n\t\t}\r\n\t\toutput, err = pb.PendingCallContract(ctx, msg)\r\n\t\tif err == nil && len(output) == 0 {\r\n\t\t\t// Make sure we have a contract to operate on, and bail out otherwise.\r\n\t\t\tif code, err = pb.PendingCodeAt(ctx, c.address); err != nil {\r\n\t\t\t\treturn err\r\n\t\t\t} else if len(code) == 0 {\r\n\t\t\t\treturn ErrNoCode\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\toutput, err = c.caller.CallContract(ctx, msg, opts.BlockNumber)\r\n\t\tif err != nil {\r\n\t\t\treturn err\r\n\t\t}\r\n\t\tif len(output) == 0 {\r\n\t\t\t// Make sure we have a contract to operate on, and bail out otherwise.\r\n\t\t\tif code, err = c.caller.CodeAt(ctx, c.address, opts.BlockNumber); err != nil {\r\n\t\t\t\treturn err\r\n\t\t\t} else if len(code) == 0 {\r\n\t\t\t\treturn ErrNoCode\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n//\tif len(*results) == 0 {\r\n//\t\tres, err := c.abi.Unpack(method, output)\r\n//\t\t*results = res\r\n//\t\treturn err\r\n//\t}\r\n//\tres := *results\r\n\treturn c.abi.UnpackIntoInterface(results, method, output)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/743143630",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22001#issuecomment-743143630",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22001",
    "id": 743143630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzE0MzYzMA==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-11T11:35:56Z",
    "updated_at": "2020-12-11T11:35:56Z",
    "author_association": "MEMBER",
    "body": "Yes, we changed something in abigen a while back. You need to update your dependencies or downgrade abigen.\r\nSee also https://github.com/ethereum/go-ethereum/issues/21758",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/743143630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23669",
  "id": 1013033606,
  "node_id": "I_kwDOAOvK9848YaqG",
  "number": 23669,
  "title": "JS tracer fails on too large stacks in returnvalue",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 19,
  "created_at": "2021-10-01T08:02:16Z",
  "updated_at": "2021-10-20T08:22:02Z",
  "closed_at": "2021-10-20T08:22:02Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "There appears to be a regression, which concerns alpine builds, which causes crashes like https://github.com/ethereum/go-ethereum/issues/23660 . \r\nThis seems to happen only when runing via docker, and it can be reproed like as shown below. This was once fixed by https://github.com/ethereum/go-ethereum/pull/22857, no idea why we're seeing it now. \r\n\r\nRun it\r\n\r\n\tdocker run ethereum/client-go --nodiscover --maxpeers 0 --dev \r\n\r\n\r\nAlso \r\n\r\n```\r\n\r\ndocker exec -it beautiful_banach  /bin/sh\r\n\r\n/ # geth attach /tmp/geth.ipc \r\nWelcome to the Geth JavaScript console!\r\n\r\ninstance: Geth/v1.10.10-unstable-f2491c5e/linux-amd64/go1.17.1\r\ncoinbase: 0xb2337989567fba76b5e50d8244c29aa38f33b2e3\r\nat block: 0 (Thu Jan 01 1970 00:00:00 GMT+0000 (UTC))\r\n datadir: \r\n modules: admin:1.0 clique:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0\r\n\r\nTo exit, press ctrl-d or type exit\r\n> eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[0], value:1 })\r\n\"0x1f1f731660e34a9e71bc8d2fe809334529ea8f6ce997d7fcdd34180c669d5c4f\"\r\n\r\n> tracer = \"{step: function() {}, fault: function() {}, result: function() { var o={}; var x=o; for (var i=0; i<1000; i++){o.foo={}; o=o.foo; } return x; }}\"\r\n\"{step: function() {}, fault: function() {}, result: function() { var o={}; var x=o; for (var i=0; i<1000; i++){o.foo={}; o=o.foo; } return x; }}\"\r\n> debug.traceTransaction(\"0x1f1f731660e34a9e71bc8d2fe809334529ea8f6ce997d7fcdd34180c669d5c4f\", {\"tracer\": tracer})\r\nError: EOF\r\n\tat web3.js:6357:37(47)\r\n\tat web3.js:5091:62(37)\r\n\tat <eval>:1:23(7)\r\n\r\n```\r\n^ process killed. ",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932018898",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932018898",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932018898,
    "node_id": "IC_kwDOAOvK9843jXrS",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T08:13:01Z",
    "updated_at": "2021-10-01T08:13:01Z",
    "author_association": "MEMBER",
    "body": "```\r\ntx = eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[0], value: 1})\r\n\r\n\r\nfor(i = 0; i < 1000; i++){\r\n        console.log(\"testing \", i)\r\n        tracer = \"{step: function() {}, fault: function() {}, result: function() { var o={}; var x=o; for (var i=0; i<\"+i+\"; i++){o.foo={}; o=o.foo; } return x; }}\"\r\n        debug.traceTransaction(tx, {\"tracer\": tracer})\r\n\r\n}\r\n\r\n```\r\nIt gets killed here: \r\n```\r\ntesting  428\r\ntesting  429\r\nGoError: Error while compiling or running script: Error: EOF at web3.js:6357:37(47)\r\n\tat native\r\n\tat <eval>:1:12(1)\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932018898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932132596",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932132596",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932132596,
    "node_id": "IC_kwDOAOvK9843jzb0",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T11:04:18Z",
    "updated_at": "2021-10-01T11:04:18Z",
    "author_association": "MEMBER",
    "body": "backtrace courtesy of @gballet\r\n\r\n```\r\n#0  0x00007ffff7fb30b0 in printf_core (f=f@entry=0x0, \r\n    fmt=fmt@entry=0x18d9a3e \"%p\", ap=ap@entry=0x7fffccce70c0, \r\n    nl_arg=nl_arg@entry=0x7fffccce7150, nl_type=nl_type@entry=0x7fffccce70d8)\r\n    at src/stdio/vfprintf.c:431\r\n#1  0x00007ffff7fb3a3c in vfprintf (f=f@entry=0x7fffccce7248, \r\n    fmt=fmt@entry=0x18d9a3e \"%p\", ap=<optimized out>)\r\n    at src/stdio/vfprintf.c:668\r\n#2  0x00007ffff7fb5bbe in vsnprintf (s=s@entry=0x7fffccce7370 \"\", \r\n    n=n@entry=256, fmt=fmt@entry=0x18d9a3e \"%p\", ap=ap@entry=0x7fffccce7358)\r\n    at src/stdio/vsnprintf.c:54\r\n#3  0x00000000012a538f in duk__try_push_vsprintf (ap=0x7fffccce7358, \r\n    fmt=0x18d9a3e \"%p\", sz=256, buf=0x7fffccce7370, thr=0x7fffccce3070)\r\n    at duk_api_stack.c:4765\r\n#4  duk_push_vsprintf (thr=0x7fffccce3070, fmt=0x18d9a3e \"%p\", \r\n    ap=0x7fffccce74c0) at duk_api_stack.c:4817\r\n#5  0x00000000012a5504 in duk_push_sprintf (thr=thr@entry=0x7fffccce3070, \r\n    fmt=fmt@entry=0x18d9a3e \"%p\") at duk_api_stack.c:4849\r\n#6  0x00000000012befb4 in duk__enc_objarr_entry (js_ctx=0x7fffccd07480, \r\n    entry_top=0x7fffccce75f4) at duk_bi_json.c:1764\r\n#7  0x00000000012c801e in duk__enc_object (js_ctx=0x7fffccd07480)\r\n    at duk_bi_json.c:1833\r\n#8  0x00000000012c7a9a in duk__enc_value (js_ctx=0x7fffccd07480, \r\n    idx_holder=1291) at duk_bi_json.c:2203\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932132596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932133081",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932133081",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932133081,
    "node_id": "IC_kwDOAOvK9843jzjZ",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T11:04:58Z",
    "updated_at": "2021-10-01T11:04:58Z",
    "author_association": "MEMBER",
    "body": "This same bug can be reproed all the way back to `1.9.1`. I checked `1.8.1` too, that one crashes even earlier. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932133081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932368302",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932368302",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932368302,
    "node_id": "IC_kwDOAOvK9843ks-u",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T16:17:26Z",
    "updated_at": "2021-10-01T16:17:26Z",
    "author_association": "MEMBER",
    "body": "This problem is related to the `musl` libc library as much as to duktape. I am not a 100% sure what goes wrong just yet, but at the low level, duktape passes some invalid input to musl's `vsnprintf` function when trying to print a pointer.\r\n\r\nThe segfault is triggered in the prologue of musl's `print_core`. The function goes back on the stack, and it seems to go back too far, crossing a page boundary.\r\n\r\n```\r\n   0x00007ffff7fb309a <+0>:\tpush   %r15\r\n   0x00007ffff7fb309c <+2>:\tpush   %r14\r\n   0x00007ffff7fb309e <+4>:\tpush   %r13\r\n   0x00007ffff7fb30a0 <+6>:\tpush   %r12\r\n   0x00007ffff7fb30a2 <+8>:\tpush   %rbp\r\n   0x00007ffff7fb30a3 <+9>:\tmov    %rdi,%rbp\r\n   0x00007ffff7fb30a6 <+12>:\tpush   %rbx\r\n   0x00007ffff7fb30a7 <+13>:\txor    %ebx,%ebx\r\n   0x00007ffff7fb30a9 <+15>:\tsub    $0xa8,%rsp\r\n   0x00007ffff7fb30b0 <+22>:\tmov    %rdx,0x10(%rsp)\r\n```\r\n\r\nBefore subtracting `0xa8`, `rsp` is at `0x7fffd0ded070` and before executing the faulty `mov    %rdx,0x10(%rsp)` instruction, `rsp` is at `0x7fffd0decfc0`. The segfault is completely normal, since that new location is write(and read)-protected, unlike the stack page that `vsnprintf` is created with.\r\n\r\n```\r\n7fffd0deb000-7fffd0ded000 ---p 00000000 00:00 0 \r\n7fffd0ded000-7fffd108e000 rw-p 00000000 00:00 0\r\n```\r\nSo this is what happens at the very lowest level. Root cause analysis still needs to be done to understand why this came to be. The program is clearly running out of stack, as `print_core` is trying to allocate 168 bytes on a stack that it doesn't have. This problem doesn't occur on systems running a more standard libc (ran it on FreeBSD, the problem doesn't occur). The first conclusion I could reach is that the system needs more stack. I'll see if I can enforce that for duktape.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932368302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932385689",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932385689",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932385689,
    "node_id": "IC_kwDOAOvK9843kxOZ",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T16:44:03Z",
    "updated_at": "2021-10-01T16:44:03Z",
    "author_association": "MEMBER",
    "body": "After increasing the thread stack size when linking-in duktape, the behavior is the expected one:\r\n\r\n```\r\ntesting  997\r\ntesting  998\r\ntesting  999\r\n{\r\n  foo: {\r\n    foo: {\r\n      foo: {\r\n        foo: {...}\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nSo that seems to be the problem: musl doesn't offer too much thread stack space (see [here](https://ariadne.space/2021/06/25/understanding-thread-stack-sizes-and-how-alpine-is-different/)) for a nice comparison table. Because other distribs have a higher stack size, duktape usually hits the limit of 1000 allowed recursions before it runs out of stack. Not so with alpine linux, that offers a smaller stacksize by default.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932385689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932434525",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932434525",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932434525,
    "node_id": "IC_kwDOAOvK9843k9Jd",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T17:48:10Z",
    "updated_at": "2021-10-01T17:48:10Z",
    "author_association": "MEMBER",
    "body": "@holiman Looks like go won't let me hardcode the linker flags to increase the stack size on alpine, so we have two courses of action to avoid this issue:\r\n\r\n 1. Reduce the maximum number of allowed recursions in duktape, possibly through a fork; or\r\n 2. Change `build/ci.go` to build geth with an increased stack size on alpine linux, as done in PR #23676",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932434525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435212",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932435212",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932435212,
    "node_id": "IC_kwDOAOvK9843k9UM",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T17:49:18Z",
    "updated_at": "2021-10-01T17:49:18Z",
    "author_association": "MEMBER",
    "body": "Heh, that's pretty spot on: the table says `128KiB` per thread. Well, we hit the error after roughty `430` nestings, and each nesting uses `256B` stack buffer.  `256 * 430 / 1024 = 107.5 KB`, so taking some overhead into account, it looks like we're hitting exactly that limit. \r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435811",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932435811",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932435811,
    "node_id": "IC_kwDOAOvK9843k9dj",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T17:50:21Z",
    "updated_at": "2021-10-01T17:50:21Z",
    "author_association": "MEMBER",
    "body": "429 to be precise",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435895",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932435895",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932435895,
    "node_id": "IC_kwDOAOvK9843k9e3",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T17:50:27Z",
    "updated_at": "2021-10-01T17:50:27Z",
    "author_association": "MEMBER",
    "body": "With that in mind, btw, it would be good if we could run the CI testsuite on alpine too. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932435895/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932439399",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932439399",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932439399,
    "node_id": "IC_kwDOAOvK9843k-Vn",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T17:56:26Z",
    "updated_at": "2021-10-01T17:56:26Z",
    "author_association": "MEMBER",
    "body": "Another alternative to 1), would be to fork duktape to not 'cheat' and use a stack buffer: https://github.com/svaarala/duktape/blob/master/src-input/duk_api_stack.c#L4768 , or make it smaller than `256` (https://github.com/svaarala/duktape/blob/master/src-input/duk_api_stack.c#L4737) . But it would decrease performance. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932439399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932441569",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932441569",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932441569,
    "node_id": "IC_kwDOAOvK9843k-3h",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T18:00:00Z",
    "updated_at": "2021-10-01T18:00:00Z",
    "author_association": "MEMBER",
    "body": "Would also be good to produce a minimum PoC and submit upstream to duktape, maybe they wouldn't mind figuring something out on their end. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932441569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932442425",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932442425",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932442425,
    "node_id": "IC_kwDOAOvK9843k_E5",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T18:01:11Z",
    "updated_at": "2021-10-01T18:01:11Z",
    "author_association": "MEMBER",
    "body": "> Would also be good to produce a minimum PoC and submit upstream to duktape, maybe they wouldn't mind figuring something out on their end.\r\n\r\nI thought about that, but Go doesn't let you set external ld flags via a `#cgo` directive. It has to be build externally :angry: ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932442425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932717320",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932717320",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932717320,
    "node_id": "IC_kwDOAOvK9843mCMI",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-02T08:55:05Z",
    "updated_at": "2021-10-02T08:55:05Z",
    "author_association": "MEMBER",
    "body": "> I thought about that, but \r\n\r\nI meant maybe just an alpine docker image with a minimal duktape interpreter which just loads a piece of code and crashes. Not sure what you mean is problematic? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932717320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932947512",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-932947512",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 932947512,
    "node_id": "IC_kwDOAOvK9843m6Y4",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-03T13:05:20Z",
    "updated_at": "2021-10-03T13:05:20Z",
    "author_association": "MEMBER",
    "body": "I thought you meant: provide a fix using the cgo directive, which is not possible. Just reproducing it isn't problematic.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932947512/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/935167269",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-935167269",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 935167269,
    "node_id": "IC_kwDOAOvK9843vYUl",
    "user": {
      "login": "maxogden",
      "id": 39759,
      "node_id": "MDQ6VXNlcjM5NzU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/39759?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxogden",
      "html_url": "https://github.com/maxogden",
      "followers_url": "https://api.github.com/users/maxogden/followers",
      "following_url": "https://api.github.com/users/maxogden/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxogden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxogden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxogden/subscriptions",
      "organizations_url": "https://api.github.com/users/maxogden/orgs",
      "repos_url": "https://api.github.com/users/maxogden/repos",
      "events_url": "https://api.github.com/users/maxogden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxogden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T00:48:57Z",
    "updated_at": "2021-10-06T02:42:06Z",
    "author_association": "NONE",
    "body": "Hope this is the right thread. Since upgrading to v1.10.9 in our testing env we are seeing errors tracing certain txs. \r\n\r\n```\r\ncurl -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"debug_traceBlockByHash\",\"params\":[\"0xb846bc49fcbead2fb6deec3a3283506bd0edc83c54c53e069f57c0163a40ebe9\",{\"tracer\":\"callTracer\",\"timeout\":null}],\"id\":15293,\"jsonrpc\":\"2.0\"}' http://localhost:8545\r\n``` \r\n\r\nThis returns a number of txs with the error `\"error\": \"TypeError: cannot read property 'calls' of undefined    in server-side tracer function 'fault'\"`. We are compiling and executing geth inside a docker container based on `amazonlinux` which has a default 8MB thread size. We confirmed by running this program inside our container:\r\n\r\n<details>\r\n  <summary>pthread size program</summary>\r\n\r\n```\r\n#include <stdio.h>\r\n#include <stdlib.h>\r\n#include <pthread.h>\r\n\r\nint main() {\r\n   size_t stacksize;\r\n   pthread_attr_t a;\r\n   pthread_attr_getstacksize(&a, &stacksize);\r\n   printf(\"Current stack size = %d\\n\", stacksize);\r\n   return 0;\r\n}\r\n```\r\n</details>\r\n\r\nWhich returned `4195888`. We have also been running this patch on duktape for around 9 months https://github.com/olebedev/go-duktape/pull/58/files, but we switched back to `gopkg.in/olebedev/go-duktape.v3 v3.0.0-20200619000410-60c24ae608a6` just to confirm, and still got the above errors. We also tried https://github.com/ethereum/go-ethereum/pull/23676. There have been 6 transactions so far that v1.10.8 and below have been unable to trace, so we are eager to get the new tracing performance fixes into prod :) \r\n\r\n<details>\r\n  <summary>Untraceable txs</summary>\r\n\r\n0x430874b252f837eecef4eefd51f94019d31b0cb2fa8cba78ebc98f33c660ade2\r\n0xa76cdf87291f4f38b9ff4100b24c9070aa4c3548fa358d468a7fe495e9754d75\r\n0x66bf740ad2a56c9d1d57e1bc5b0a019414bb25aa73a25e9223f92dff76eab56d\r\n0x86cad91250a6c96a7af1f32a23ba329b9cca85cccd8f982847a9e731920e8fc3\r\n0x709622690357809f821592ffab5326404b17ac6a258e5479d525d5c4b517d5fe\r\n0xd22027b361a97d68fa8ec9166a42d73fa490da05945557ae68ffa9c2e35df9d1 \r\n</details>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/935167269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936085288",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-936085288",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 936085288,
    "node_id": "IC_kwDOAOvK9843y4co",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T11:50:35Z",
    "updated_at": "2021-10-06T11:50:35Z",
    "author_association": "MEMBER",
    "body": "@maxogden the error you're referring to is fixed on master (PR https://github.com/ethereum/go-ethereum/pull/23667), but hasn't been released yet.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936085288/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936091154",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-936091154",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 936091154,
    "node_id": "IC_kwDOAOvK9843y54S",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T11:54:27Z",
    "updated_at": "2021-10-06T11:54:27Z",
    "author_association": "MEMBER",
    "body": "I made this into a unit test in https://github.com/s1na/go-ethereum/tree/test/tracer-deep-nested but the crash wasn't happening for me in an alpine docker. We tried with @gballet's setup and at first the test was passing (i.e. no segfault). Then he tried with compiling the test (i.e. `go test -c ./eth/tracers`) which caused the segfault. I still don't understand what makes running the tracer as part of a RPC call (or console) different from doing it in a test.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936091154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936138017",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-936138017",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 936138017,
    "node_id": "IC_kwDOAOvK9843zFUh",
    "user": {
      "login": "jwasinger",
      "id": 3411040,
      "node_id": "MDQ6VXNlcjM0MTEwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3411040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwasinger",
      "html_url": "https://github.com/jwasinger",
      "followers_url": "https://api.github.com/users/jwasinger/followers",
      "following_url": "https://api.github.com/users/jwasinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwasinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwasinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwasinger/subscriptions",
      "organizations_url": "https://api.github.com/users/jwasinger/orgs",
      "repos_url": "https://api.github.com/users/jwasinger/repos",
      "events_url": "https://api.github.com/users/jwasinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwasinger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T12:25:58Z",
    "updated_at": "2021-10-06T14:27:25Z",
    "author_association": "MEMBER",
    "body": "Can also confirm that the test passes on my machine (host machine running ubuntu 20.04 fwiw).  Tried running it on `golang:1.14-alpine` and `golang:alpine` images.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/936138017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/947438921",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23669#issuecomment-947438921",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23669",
    "id": 947438921,
    "node_id": "IC_kwDOAOvK9844eMVJ",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-20T08:22:02Z",
    "updated_at": "2021-10-20T08:22:02Z",
    "author_association": "MEMBER",
    "body": "Closed by #23676",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/947438921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21174",
  "id": 630712904,
  "node_id": "MDU6SXNzdWU2MzA3MTI5MDQ=",
  "number": 21174,
  "title": "Feature: Separate local tx tracking from the `priced` field in the pool",
  "user": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    },
    {
      "id": 1671673325,
      "node_id": "MDU6TGFiZWwxNjcxNjczMzI1",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:work-in-progress",
      "name": "status:work-in-progress",
      "color": "6bb6e5",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-06-04T10:42:57Z",
  "updated_at": "2020-12-11T09:44:57Z",
  "closed_at": "2020-12-11T09:44:57Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The notion of *local* transactions was added after the tx pool was implemented. The idea was that nodes should keep holding onto transactions that they themselves created, even if otherwise there are better ones in the network. The rationale is that even if currently the tx won't get included, later it might be. The way it was implemented is that eviction operations simply jump over any local tx.\r\n\r\nIf a node has a handful of local txs, and lots of remote ones, this logic works perfectly. It might happen that an eviction does a few more cycles to find a non-local cheap tx to drop, but it's negligible. However, if the node has 10Ks of local transactions (and maybe none non-local), then every single eviction will iterate over all the underpriced locals, just to find that there's nothing to evict. This becomes problematic.\r\n\r\nA possible solution would be to completely separate out the notion of locals from the `priced` tx list, so that when we search for txs to evict, we never even consider the local ones. The catch is that tx promotion and demotion (and possibly others) would need to be extended to handle two sets of disjoint transactions at the same time. We also need special casing when an account is marked local for the first time, to move previous transactions from the same account from the `priced` list to the `local` list.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/671026732",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21174#issuecomment-671026732",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21174",
    "id": 671026732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTAyNjczMg==",
    "user": {
      "login": "poonai",
      "id": 10010900,
      "node_id": "MDQ6VXNlcjEwMDEwOTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10010900?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/poonai",
      "html_url": "https://github.com/poonai",
      "followers_url": "https://api.github.com/users/poonai/followers",
      "following_url": "https://api.github.com/users/poonai/following{/other_user}",
      "gists_url": "https://api.github.com/users/poonai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/poonai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/poonai/subscriptions",
      "organizations_url": "https://api.github.com/users/poonai/orgs",
      "repos_url": "https://api.github.com/users/poonai/repos",
      "events_url": "https://api.github.com/users/poonai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/poonai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-09T09:01:28Z",
    "updated_at": "2020-08-09T09:01:28Z",
    "author_association": "NONE",
    "body": "Eviction is the iterating transaction queue. https://github.com/ethereum/go-ethereum/blob/master/core/tx_pool.go#L359\r\n\r\nI'm thinking to separate the queue into localQueue and remoteQueue. The right queue will be chosen while promotion and demotion.\r\n\r\nFor eviction, we don't need to run over the local queue. \r\n\r\nIs this the right way to find the solution?\r\n\r\n@karalabe \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/671026732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

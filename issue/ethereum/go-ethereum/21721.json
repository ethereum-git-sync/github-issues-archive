{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21721",
  "id": 723995090,
  "node_id": "MDU6SXNzdWU3MjM5OTUwOTA=",
  "number": 21721,
  "title": "prometheus goerli and the scrape config hell, thanks to /debug/metrics",
  "user": {
    "login": "ChuckNorrison",
    "id": 2964146,
    "node_id": "MDQ6VXNlcjI5NjQxNDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChuckNorrison",
    "html_url": "https://github.com/ChuckNorrison",
    "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
    "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
    "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
    "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
    "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-10-18T12:21:49Z",
  "updated_at": "2020-10-19T20:23:35Z",
  "closed_at": "2020-10-19T07:22:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nafter several hours of configs and params in geth application, i was not able to get your special metrics_path (/debug/metrics) work together with a default metrics path (/metrics) from another client.\r\n\r\n#### Expected behaviour\r\njust use /metrics as everybody do\r\n\r\n#### Actual behaviour\r\nspecial metrics path to get maximum of user depressions on config hells\r\n\r\n#### Steps to reproduce the behaviour\r\njust setup geth --goerli and lighthouse metrics from several machines to a single grafana instance\r\n",
  "closed_by": {
    "login": "ChuckNorrison",
    "id": 2964146,
    "node_id": "MDQ6VXNlcjI5NjQxNDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChuckNorrison",
    "html_url": "https://github.com/ChuckNorrison",
    "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
    "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
    "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
    "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
    "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/711160355",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21721#issuecomment-711160355",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
    "id": 711160355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTE2MDM1NQ==",
    "user": {
      "login": "ChuckNorrison",
      "id": 2964146,
      "node_id": "MDQ6VXNlcjI5NjQxNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChuckNorrison",
      "html_url": "https://github.com/ChuckNorrison",
      "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
      "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
      "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
      "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
      "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-18T12:24:53Z",
    "updated_at": "2020-10-18T12:24:53Z",
    "author_association": "NONE",
    "body": "to get this solved you need to add another scrape_config to the prometheus.yml with a file path to a new scrape_config.json and with the special metrics_path /debug/metrics. A lot of fun if used in a docker compose and this guy dont want  to read the second scrape json. Makes me mad, just cause one guy thought it would be useful to change some defaults for fun",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/711160355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/711741011",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21721#issuecomment-711741011",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
    "id": 711741011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTc0MTAxMQ==",
    "user": {
      "login": "ChuckNorrison",
      "id": 2964146,
      "node_id": "MDQ6VXNlcjI5NjQxNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChuckNorrison",
      "html_url": "https://github.com/ChuckNorrison",
      "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
      "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
      "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
      "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
      "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T07:22:05Z",
    "updated_at": "2020-10-19T07:24:29Z",
    "author_association": "NONE",
    "body": "i will close that, seems this will not change. Users which get aware of this could help here with a tutorial how to grafana with goerli together with another prometheus scrape target, which is NOT based on metric_path /debug/metrics. This could also be asked in prometheus repo",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/711741011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712144663",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21721#issuecomment-712144663",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
    "id": 712144663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjE0NDY2Mw==",
    "user": {
      "login": "ChuckNorrison",
      "id": 2964146,
      "node_id": "MDQ6VXNlcjI5NjQxNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChuckNorrison",
      "html_url": "https://github.com/ChuckNorrison",
      "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
      "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
      "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
      "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
      "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T13:09:00Z",
    "updated_at": "2020-10-19T13:09:00Z",
    "author_association": "NONE",
    "body": "This is related to that: https://github.com/prometheus/prometheus/issues/1852",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712144663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712160547",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21721#issuecomment-712160547",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
    "id": 712160547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjE2MDU0Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T13:34:54Z",
    "updated_at": "2020-10-19T13:34:54Z",
    "author_association": "MEMBER",
    "body": "I've read the text you wrote, apparently in anger, and I still don't quite understand what the original problem is/was, or what \" useful to change some defaults for fun\" refers to, or why you say \"seems this will not change.\". \r\n\r\nIf our metrics are exposed in a non-standard way, which for some reason is 'wrong', then by all means open a ticket which describes the problem and what could be done to make it better. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712160547/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712172961",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21721#issuecomment-712172961",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21721",
    "id": 712172961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjE3Mjk2MQ==",
    "user": {
      "login": "ChuckNorrison",
      "id": 2964146,
      "node_id": "MDQ6VXNlcjI5NjQxNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChuckNorrison",
      "html_url": "https://github.com/ChuckNorrison",
      "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
      "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
      "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
      "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
      "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T13:54:38Z",
    "updated_at": "2020-10-19T20:23:35Z",
    "author_association": "NONE",
    "body": "The issue is caused by prometheus and `scrape_configs` so this repo was not the right place. If prometheus scrape_configs would work as documented this special metrics_path of geth --goerli would have worked. \r\n\r\nit was just annoying to not get it up and running cause this metric_paths was changed at geth to `/debug/metrics` without possibility to parameterize, which is called \"uncommon\" for prometheus.\r\n\r\nthanks for your reply, i still try to push those repos, even my language could be more clear. At this point i got all informations i was missing and closed it.\r\n\r\n// This change is the root cause why geth needs a separate prometheus instance:\r\nhttps://github.com/ethereum/go-ethereum/blob/490b380a04437d7eb780635e941fc8fa017413e7/metrics/exp/exp.go#L46\r\n\r\n> If our metrics are exposed in a non-standard way, which for some reason is 'wrong', then by all means open a ticket which describes the problem and what could be done to make it better.\r\n\r\ni tried... every information you ask for is in my initial post. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/712172961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

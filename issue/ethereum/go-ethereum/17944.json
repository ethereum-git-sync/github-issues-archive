{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17944",
  "id": 371639543,
  "node_id": "MDU6SXNzdWUzNzE2Mzk1NDM=",
  "number": 17944,
  "title": "admin.peers unkown node handshaking on private network",
  "user": {
    "login": "marcosmartinez7",
    "id": 14795944,
    "node_id": "MDQ6VXNlcjE0Nzk1OTQ0",
    "avatar_url": "https://avatars.githubusercontent.com/u/14795944?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marcosmartinez7",
    "html_url": "https://github.com/marcosmartinez7",
    "followers_url": "https://api.github.com/users/marcosmartinez7/followers",
    "following_url": "https://api.github.com/users/marcosmartinez7/following{/other_user}",
    "gists_url": "https://api.github.com/users/marcosmartinez7/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marcosmartinez7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marcosmartinez7/subscriptions",
    "organizations_url": "https://api.github.com/users/marcosmartinez7/orgs",
    "repos_url": "https://api.github.com/users/marcosmartinez7/repos",
    "events_url": "https://api.github.com/users/marcosmartinez7/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marcosmartinez7/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-10-18T17:46:19Z",
  "updated_at": "2019-01-15T13:45:42Z",
  "closed_at": "2019-01-15T13:45:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n\r\n#### System information\r\n\r\nGeth version: `1,8.11-stable`\r\nOS & Version: Ubuntu 16.04\r\n\r\n\r\n#### Expected behaviour\r\n\r\nadmin.peers should be [] if i dont add a peer\r\n\r\n#### Actual behaviour\r\n\r\nWhen i run the nodes and i connect to the geth js console i can see (during a while) that there is a peer handshaking. \r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nJust created a private network on a server that is a LAN. The lan can be accessed from the public internet because we have a port forwarding rule.\r\n\r\nI ran 2 sealers: \r\n\r\n> 'geth --datadir sealer1/  --syncmode 'full' --port 30393 --rpc --rpcaddr 'localhost' --rpcport 8603 --rpcapi='admin,personal,db,eth,net,web3,txpool,miner,debug' --networkid 22 --gasprice '1' -unlock 'thekeyforsealer1' --password sealer2/password.txt --mine '\r\n\r\n> 'geth --datadir sealer2/  --syncmode 'full' --port 30394 --rpc --rpcaddr 'localhost' --rpcport 8604 --rpcapi='admin,personal,db,eth,net,web3,txpool,miner,debug' --networkid 22 --gasprice '1' -unlock 'thekeyforsealer2' --password sealer2/password.txt --mine '\r\n\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n\r\n> > admin.peers\r\n> [{\r\n>     caps: [\"eth/62\", \"eth/63\"],\r\n>     id: \"9001d898d1784a4e8651826fe0d1f460dd9cbcdb90a6bb0f4dec6040686933416e3bf1cd8e1e9a3eb85a7379514e969be71f80c2b1de0535ef0c52276ae15569\",\r\n>     name: \"Pirl/v1.8.1-premium-masternode-stablev3-824f23e3/linux-amd64/go1.10\",\r\n>     network: {\r\n>       inbound: false,\r\n>       localAddress: \"192.168.1.244:45656\",\r\n>       remoteAddress: \"80.209.234.66:30303\",\r\n>       static: false,\r\n>       trusted: false\r\n>     },\r\n>     protocols: {\r\n>       eth: \"handshake\"\r\n>     }\r\n> \r\n````\r\n\r\nAfter 1 minute the peer is gone..\r\n\r\n\r\nI have some questions about this:\r\n\r\n1. How that node discovers my private network nodes? I mean, my nodes are not connected to any bootnode, so if an external node wants to peer with it it must have the enode value to use admin.addPeer, how it can discover the enode?\r\n\r\n2. What represents the handshake?\r\n\r\n",
  "closed_by": {
    "login": "marcosmartinez7",
    "id": 14795944,
    "node_id": "MDQ6VXNlcjE0Nzk1OTQ0",
    "avatar_url": "https://avatars.githubusercontent.com/u/14795944?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marcosmartinez7",
    "html_url": "https://github.com/marcosmartinez7",
    "followers_url": "https://api.github.com/users/marcosmartinez7/followers",
    "following_url": "https://api.github.com/users/marcosmartinez7/following{/other_user}",
    "gists_url": "https://api.github.com/users/marcosmartinez7/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marcosmartinez7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marcosmartinez7/subscriptions",
    "organizations_url": "https://api.github.com/users/marcosmartinez7/orgs",
    "repos_url": "https://api.github.com/users/marcosmartinez7/repos",
    "events_url": "https://api.github.com/users/marcosmartinez7/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marcosmartinez7/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/432418838",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17944#issuecomment-432418838",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944",
    "id": 432418838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjQxODgzOA==",
    "user": {
      "login": "marcosmartinez7",
      "id": 14795944,
      "node_id": "MDQ6VXNlcjE0Nzk1OTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14795944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcosmartinez7",
      "html_url": "https://github.com/marcosmartinez7",
      "followers_url": "https://api.github.com/users/marcosmartinez7/followers",
      "following_url": "https://api.github.com/users/marcosmartinez7/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcosmartinez7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcosmartinez7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcosmartinez7/subscriptions",
      "organizations_url": "https://api.github.com/users/marcosmartinez7/orgs",
      "repos_url": "https://api.github.com/users/marcosmartinez7/repos",
      "events_url": "https://api.github.com/users/marcosmartinez7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcosmartinez7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T21:03:42Z",
    "updated_at": "2018-10-23T21:03:42Z",
    "author_association": "NONE",
    "body": "Bump ! \r\n\r\nAny info about this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/432418838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/449139236",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17944#issuecomment-449139236",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17944",
    "id": 449139236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTEzOTIzNg==",
    "user": {
      "login": "marcosmartinez7",
      "id": 14795944,
      "node_id": "MDQ6VXNlcjE0Nzk1OTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14795944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcosmartinez7",
      "html_url": "https://github.com/marcosmartinez7",
      "followers_url": "https://api.github.com/users/marcosmartinez7/followers",
      "following_url": "https://api.github.com/users/marcosmartinez7/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcosmartinez7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcosmartinez7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcosmartinez7/subscriptions",
      "organizations_url": "https://api.github.com/users/marcosmartinez7/orgs",
      "repos_url": "https://api.github.com/users/marcosmartinez7/repos",
      "events_url": "https://api.github.com/users/marcosmartinez7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcosmartinez7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-20T21:21:29Z",
    "updated_at": "2018-12-20T21:21:29Z",
    "author_association": "NONE",
    "body": "This is normal since the nodiscovery isnt enabled. Even with nodiscovery enabled you prevent only discovery of other nodes, but not from your node to be discover from others",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/449139236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

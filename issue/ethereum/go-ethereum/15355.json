{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15355",
  "id": 267451135,
  "node_id": "MDU6SXNzdWUyNjc0NTExMzU=",
  "number": 15355,
  "title": "No notifications are returned after subscription to the pubsub",
  "user": {
    "login": "er3es",
    "id": 32927843,
    "node_id": "MDQ6VXNlcjMyOTI3ODQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/32927843?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/er3es",
    "html_url": "https://github.com/er3es",
    "followers_url": "https://api.github.com/users/er3es/followers",
    "following_url": "https://api.github.com/users/er3es/following{/other_user}",
    "gists_url": "https://api.github.com/users/er3es/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/er3es/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/er3es/subscriptions",
    "organizations_url": "https://api.github.com/users/er3es/orgs",
    "repos_url": "https://api.github.com/users/er3es/repos",
    "events_url": "https://api.github.com/users/er3es/events{/privacy}",
    "received_events_url": "https://api.github.com/users/er3es/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2017-10-22T09:51:44Z",
  "updated_at": "2019-04-12T19:36:48Z",
  "closed_at": "2019-04-12T19:36:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.7.2-stable`\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\nSubscribing to rpc pubsub should return notifications. I connected to geth using wscat and tried everything that I read here https://github.com/ethereum/go-ethereum/wiki/RPC-PUB-SUB without any luck.\r\n\r\n#### Actual behaviour\r\n\r\nI get a subscription id back when I subscribe but I get no notifications back.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/338783541",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15355#issuecomment-338783541",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
    "id": 338783541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODc4MzU0MQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-23T20:17:47Z",
    "updated_at": "2017-10-23T20:17:47Z",
    "author_association": "MEMBER",
    "body": "Seems to work for me:\r\n\r\n```\r\n$ wscat --connect localhost:8546\r\nconnected (press CTRL+C to quit)\r\n> {\"id\": 1, \"method\": \"eth_subscribe\", \"params\": [\"newHeads\", {}]}\r\n< {\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x756cad3d8371849c3b208da403399d50\"}\r\n\r\n< {\"jsonrpc\":\"2.0\",\"method\":\"eth_subscription\",\"params\":{\"subscription\":\"0x756cad3d8371849c3b208da403399d50\",\"result\":{\"parentHash\":\"0x093d285bc49dbc7f54e39834f69cb1340a2be858d8aede268486cf4801a9847b\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"miner\":\"0x0000000000000000000000000000000000000000\",\"stateRoot\":\"0x58548844b20aa66dfc77531cd05aa19612664c1075780bace84a1bb8ddfab3c2\",\"transactionsRoot\":\"0xb25b4bbd30c86a379d1ccc65e7d77ef928ab444d9a5b25fd751ca3ca18e57ca5\",\"receiptsRoot\":\"0x40d17736c1df13d825f40e5482b97ea96e8e30f30f5b68ab2ef7c76571155d93\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000100000000000002000000000000000000000010000008000000000000000000000000000000000000000000000000000000000008000800000000000000000000000000000000000000400000000000000000000000000000000000000000000000000010000000000000080000000000000000000000000000000000000000000400000000000000000000000000000000000000800000000000000400000000080000000802000000000002000000000000000000008000000000000000800000000000000000000010000000000000000002100000000000000000200010000000000010000000\",\"difficulty\":\"0x2\",\"number\":\"0x110b0b\",\"gasLimit\":\"0x5d8d24\",\"gasUsed\":\"0x193694\",\"timestamp\":\"0x59ee4e44\",\"extraData\":\"0xd783010703846765746887676f312e392e31856c696e75780000000000000000b47c3c89e64ccad721e828794ff125da857140bcdb38d1ea83647315030ab4897c82fb7394fd978287466bf61e997dfa725c529267578ae4726d673a10d89d3401\",\"mixHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"nonce\":\"0x0000000000000000\",\"hash\":\"0x1ea829304450475a0a33be80c7f06cbf83bdf0368dc055c84b5b03a8d946b41d\"}}}\r\n\r\n< {\"jsonrpc\":\"2.0\",\"method\":\"eth_subscription\",\"params\":{\"subscription\":\"0x756cad3d8371849c3b208da403399d50\",\"result\":{\"parentHash\":\"0x1ea829304450475a0a33be80c7f06cbf83bdf0368dc055c84b5b03a8d946b41d\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"miner\":\"0x0000000000000000000000000000000000000000\",\"stateRoot\":\"0xa458852fb97a0f270f3be8c4b364ecdf30b67ddcedbd0237648f44c73fe2f07b\",\"transactionsRoot\":\"0x204a0b29afca2eec51d770f579fe1a489953fba88eacd42fa66deb671bfe6653\",\"receiptsRoot\":\"0x28660d771e3a0106b63f74ccdd69e0181dd02cc7753312526805519e9c05aff1\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"difficulty\":\"0x2\",\"number\":\"0x110b0c\",\"gasLimit\":\"0x5d7f36\",\"gasUsed\":\"0x16669\",\"timestamp\":\"0x59ee4e53\",\"extraData\":\"0xd783010703846765746887676f312e392e31856c696e757800000000000000001bf310fdb3efe4837c130e3e91ed8e3b9175b0b46eef82a76ce85a070923a3321b37ebe47dbb3bdaf5e0a118eb1acbf9f49bc9fe07000d427d5bcc15728735fe00\",\"mixHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"nonce\":\"0x0000000000000000\",\"hash\":\"0x8efc5be3ae724920980f19a396bd57e71d4c3480940a909646aa43e857093448\"}}}\r\n\r\n\r\n[...]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/338783541/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339224430",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15355#issuecomment-339224430",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
    "id": 339224430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTIyNDQzMA==",
    "user": {
      "login": "er3es",
      "id": 32927843,
      "node_id": "MDQ6VXNlcjMyOTI3ODQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32927843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/er3es",
      "html_url": "https://github.com/er3es",
      "followers_url": "https://api.github.com/users/er3es/followers",
      "following_url": "https://api.github.com/users/er3es/following{/other_user}",
      "gists_url": "https://api.github.com/users/er3es/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/er3es/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/er3es/subscriptions",
      "organizations_url": "https://api.github.com/users/er3es/orgs",
      "repos_url": "https://api.github.com/users/er3es/repos",
      "events_url": "https://api.github.com/users/er3es/events{/privacy}",
      "received_events_url": "https://api.github.com/users/er3es/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-25T06:06:05Z",
    "updated_at": "2017-10-25T06:06:05Z",
    "author_association": "NONE",
    "body": "@karalabe thanx for the reply. Do subscriptions work if you fast sync? I guess not : / I managed to get all the subscriptions working after I fully synced instead of fast. Also there is this [thread](https://github.com/ethereum/web3.js/issues/1093) in web3's repo where people had the similar issues with me.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339224430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339242772",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15355#issuecomment-339242772",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
    "id": 339242772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTI0Mjc3Mg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-25T07:39:55Z",
    "updated_at": "2017-10-25T07:39:55Z",
    "author_association": "MEMBER",
    "body": "During fast sync there aren't notifications because the \"head\" is yet incomplete. Any header imported is lacking associated state, so it cannot be advertised as a new chain head. Only after fast sync completes does the chain progress for the first time, jumping to the current head. After that it will get a new head event for each (batch of) block it imports.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/339242772/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/369321506",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15355#issuecomment-369321506",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
    "id": 369321506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTMyMTUwNg==",
    "user": {
      "login": "sraka1",
      "id": 788904,
      "node_id": "MDQ6VXNlcjc4ODkwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/788904?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sraka1",
      "html_url": "https://github.com/sraka1",
      "followers_url": "https://api.github.com/users/sraka1/followers",
      "following_url": "https://api.github.com/users/sraka1/following{/other_user}",
      "gists_url": "https://api.github.com/users/sraka1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sraka1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sraka1/subscriptions",
      "organizations_url": "https://api.github.com/users/sraka1/orgs",
      "repos_url": "https://api.github.com/users/sraka1/repos",
      "events_url": "https://api.github.com/users/sraka1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sraka1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-28T17:44:30Z",
    "updated_at": "2018-02-28T18:57:53Z",
    "author_association": "NONE",
    "body": "~~@karalabe I'm experiencing this exact behaviour on v1.8.1 - is it possible there has been a regression with v1.8? I've fully completed a fast sync and created a subscription (both for newHeads and pendingTransactions) after the sync has completed (I do get the subscription ID, however). I don't get any events returned...~~\r\n\r\n~~I'm looking at the command line and geth is receiving/importing new heads/blocks successfully so it really looks like the problem lies with the pub sub functionality...~~\r\n\r\nIgnore the above. Had to restart geth.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/369321506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/468775488",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15355#issuecomment-468775488",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15355",
    "id": 468775488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODc3NTQ4OA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-03-01T19:05:21Z",
    "updated_at": "2019-03-01T19:05:21Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/468775488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

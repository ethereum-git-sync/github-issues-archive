{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23243",
  "id": 949849274,
  "node_id": "MDU6SXNzdWU5NDk4NDkyNzQ=",
  "number": 23243,
  "title": "Ledger wallet closed after a while on mac",
  "user": {
    "login": "s1na",
    "id": 1591639,
    "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/s1na",
    "html_url": "https://github.com/s1na",
    "followers_url": "https://api.github.com/users/s1na/followers",
    "following_url": "https://api.github.com/users/s1na/following{/other_user}",
    "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
    "organizations_url": "https://api.github.com/users/s1na/orgs",
    "repos_url": "https://api.github.com/users/s1na/repos",
    "events_url": "https://api.github.com/users/s1na/events{/privacy}",
    "received_events_url": "https://api.github.com/users/s1na/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-07-21T15:35:34Z",
  "updated_at": "2022-06-12T14:43:44Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `f05419f`\r\nOS & Version: OSX\r\n\r\n#### Expected behaviour\r\n\r\nLedger connects and stays connected.\r\n\r\n#### Actual behaviour\r\n\r\nIt connects successfully and starts deriving accounts. But fails abruptly with `hidapi: unknown failure`, after which point the wallet is closed. Failure is undeterministic, sometimes occurs after a few seconds, sometimes a bit later. Also when I disable the heartbeat loop it doesn't happen anymore. I thought it might be a data race with two routines wanting to use device at the same time or modifying the device object but couldn't find it. I'm gonna shelf this for now but creating this issue for documentation of the problem.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nConnect ledger and start geth with `--usb`. Wait for a while and check `personal.listWallets` a few times to see the error.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/884745377",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23243#issuecomment-884745377",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23243",
    "id": 884745377,
    "node_id": "IC_kwDOAOvK9840vCSh",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-22T08:36:32Z",
    "updated_at": "2021-07-22T08:36:32Z",
    "author_association": "MEMBER",
    "body": "next step - sina checks if it also happens with the TREZOR on his system",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/884745377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

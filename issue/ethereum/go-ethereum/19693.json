{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19693",
  "id": 454451973,
  "node_id": "MDU6SXNzdWU0NTQ0NTE5NzM=",
  "number": 19693,
  "title": "Geth database version question",
  "user": {
    "login": "northeusunshine",
    "id": 40818211,
    "node_id": "MDQ6VXNlcjQwODE4MjEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/40818211?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/northeusunshine",
    "html_url": "https://github.com/northeusunshine",
    "followers_url": "https://api.github.com/users/northeusunshine/followers",
    "following_url": "https://api.github.com/users/northeusunshine/following{/other_user}",
    "gists_url": "https://api.github.com/users/northeusunshine/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/northeusunshine/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/northeusunshine/subscriptions",
    "organizations_url": "https://api.github.com/users/northeusunshine/orgs",
    "repos_url": "https://api.github.com/users/northeusunshine/repos",
    "events_url": "https://api.github.com/users/northeusunshine/events{/privacy}",
    "received_events_url": "https://api.github.com/users/northeusunshine/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-06-11T02:30:47Z",
  "updated_at": "2019-08-10T19:26:50Z",
  "closed_at": "2019-06-11T07:10:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI found geth built from the latest master branch(git clone https://github.com/ethereum/go-ethereum.git, then compile source code by \"make all\" command) uses new database version different from Geth & Tools 1.8.27(latest stable excutable version now).\r\n\r\nFirst I use  Geth & Tools 1.8.27(latest stable excutable version now), set up a clique eth node.\r\nthen I switch version to the one built from latest source code.\r\n\r\nwhen I start the node again, I got error as below:\r\n```\r\n[root@localhost test]# geth --networkid 123456 --rpc --rpcport \"8545\" --rpccorsdomain \"*\" --datadir ./enode1/data --syncmode 'full' --port \"2001\" --rpcaddr \"0.0.0.0\" --rpcapi \"admin,db,eth,miner,web3,net,personal,txpool\"\r\nINFO [05-28|10:50:12.097] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [05-28|10:50:12.189] Starting peer-to-peer node               instance=Geth/v1.8.27-stable-4bcc0a37/linux-amd64/go1.11.9\r\nINFO [05-28|10:50:12.189] Allocated cache and file handles         database=/root/download/eth5/enode1/data/geth/chaindata cache=512 handles=2048\r\nINFO [05-28|10:50:12.223] Initialised chain configuration          config=\"{ChainID: 123456 Homestead: 1 DAO: <nil> DAOSupport: false EIP150: 2 EIP155: 3 EIP158: 3 Byzantium: 4 Constantinople: 5  ConstantinopleFix: <nil> Engine: clique}\"\r\nINFO [05-28|10:50:12.223] Initialising Ethereum protocol           versions=\"[63 62]\" network=123456\r\nFatal: Error starting protocol stack: database version is v6, Geth 1.8.27-stable only supports v3\r\n```\r\nI think there should be an version compatible problem, so how to fix the problem when switching geth version.\r\nMany thanks.",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/500679849",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19693#issuecomment-500679849",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693",
    "id": 500679849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDY3OTg0OQ==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-11T04:13:48Z",
    "updated_at": "2019-06-11T04:13:48Z",
    "author_association": "MEMBER",
    "body": "Please always use the newer geth version since we don't support database degradation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/500679849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/500716444",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19693#issuecomment-500716444",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693",
    "id": 500716444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDcxNjQ0NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-11T07:10:50Z",
    "updated_at": "2019-06-11T07:10:50Z",
    "author_association": "MEMBER",
    "body": "Whenever we make a minor version bump (e.g. from 1.8.x to 1.9.0) you can expect incompatible breaking changes that will prevent going back down. There's no way to make old versions aware of new data formats. If you want to use 18.27, you need to only use that. Once you update, there'd no going back down.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/500716444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/520173762",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19693#issuecomment-520173762",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19693",
    "id": 520173762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDE3Mzc2Mg==",
    "user": {
      "login": "dexterity2k16",
      "id": 25292097,
      "node_id": "MDQ6VXNlcjI1MjkyMDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/25292097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexterity2k16",
      "html_url": "https://github.com/dexterity2k16",
      "followers_url": "https://api.github.com/users/dexterity2k16/followers",
      "following_url": "https://api.github.com/users/dexterity2k16/following{/other_user}",
      "gists_url": "https://api.github.com/users/dexterity2k16/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dexterity2k16/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dexterity2k16/subscriptions",
      "organizations_url": "https://api.github.com/users/dexterity2k16/orgs",
      "repos_url": "https://api.github.com/users/dexterity2k16/repos",
      "events_url": "https://api.github.com/users/dexterity2k16/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dexterity2k16/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-10T19:26:50Z",
    "updated_at": "2019-08-10T19:26:50Z",
    "author_association": "NONE",
    "body": "Hi @karalabe , I downgraded geth to 1.8.27 and started on rinkeby with the same database of 1.9.0 and it worked fine. But starting on mainnet with the same dataset giving me this error.\r\nIs there any work around for downgrading and using the same synced dataset?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/520173762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26904",
  "id": 1626917854,
  "node_id": "I_kwDOAOvK985g-Mve",
  "number": 26904,
  "title": "Goerli  out of memory",
  "user": {
    "login": "sundafa",
    "id": 24621599,
    "node_id": "MDQ6VXNlcjI0NjIxNTk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sundafa",
    "html_url": "https://github.com/sundafa",
    "followers_url": "https://api.github.com/users/sundafa/followers",
    "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
    "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
    "organizations_url": "https://api.github.com/users/sundafa/orgs",
    "repos_url": "https://api.github.com/users/sundafa/repos",
    "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sundafa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-03-16T08:02:12Z",
  "updated_at": "2023-03-23T13:28:14Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: v1.11.4\r\nCL client & version: e.g. lighthouse and prysm\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nStable memory usage\r\n\r\n#### Actual behaviour\r\nThe memory rises sharply every 3 hours, and the service is killed due to insufficient memory\r\n\r\n#### Steps to reproduce the behaviour\r\nnone\r\n\r\n#### Backtrace\r\n\r\n````\r\nThe run log looks like everything is ok\r\n````\r\n\r\nIn specific cases, only the picture display is more intuitive\r\n\r\n![image](https://user-images.githubusercontent.com/24621599/225552076-e976f7f1-b248-4533-aa68-e26830868b73.png)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1473285641",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1473285641",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1473285641,
    "node_id": "IC_kwDOAOvK985X0I4J",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T07:19:53Z",
    "updated_at": "2023-03-17T07:19:53Z",
    "author_association": "MEMBER",
    "body": "Can you share the command line flags for starting Geth? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1473285641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1473287459",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1473287459",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1473287459,
    "node_id": "IC_kwDOAOvK985X0JUj",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T07:22:16Z",
    "updated_at": "2023-03-17T07:22:16Z",
    "author_association": "NONE",
    "body": "@rjl493456442 \r\n```\r\n${nodeServiceDir}/bin/geth --goerli --syncmode snap --gcmode=full --datadir ${nodeServiceDir}/geth/ --rpc.evmtimeout='10s' --snapshot=false --light.maxpeers=0 --http.vhosts=* --http.corsdomain=* --http --http.addr ${listeningAddr} --http.api eth,net,web3,debug,trace,txpool --ws.api=eth,net,web3,debug,trace,txpool --ws --ws.addr ${listeningAddr} --metrics --metrics.addr localhost --port 31030 --http.port 31031 --ws.port 31032 --authrpc.port 31033 --metrics.port 31035\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1473287459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1477617378",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1477617378",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1477617378,
    "node_id": "IC_kwDOAOvK985YEqbi",
    "user": {
      "login": "varuzam",
      "id": 6206965,
      "node_id": "MDQ6VXNlcjYyMDY5NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6206965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/varuzam",
      "html_url": "https://github.com/varuzam",
      "followers_url": "https://api.github.com/users/varuzam/followers",
      "following_url": "https://api.github.com/users/varuzam/following{/other_user}",
      "gists_url": "https://api.github.com/users/varuzam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/varuzam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/varuzam/subscriptions",
      "organizations_url": "https://api.github.com/users/varuzam/orgs",
      "repos_url": "https://api.github.com/users/varuzam/repos",
      "events_url": "https://api.github.com/users/varuzam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/varuzam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-21T10:45:45Z",
    "updated_at": "2023-03-21T10:45:45Z",
    "author_association": "NONE",
    "body": "I have similar problem at Mainnet. \r\nInteresting that \r\ngeth process RSS = 33GB but geth go heap memory shows \r\n![image](https://user-images.githubusercontent.com/6206965/226582997-e723a093-dd27-47bc-99fc-40334760479d.png)\r\nWhere does 33gb - 6gb = 26GB disappear?\r\n\r\ncmd: geth --${GETH_NETWORK} --datadir /srv --http.api \"eth,net,web3,debug\" --http --http.addr \"0.0.0.0\" --http.corsdomain \"*\" --http.vhosts \"*\" --ws --ws.addr \"0.0.0.0\" --ws.origins \"*\"  --authrpc.addr \"0.0.0.0\" --authrpc.jwtsecret=/config/jwttoken \\ --metrics --metrics.addr \"0.0.0.0\"\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1477617378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478868225",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1478868225",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1478868225,
    "node_id": "IC_kwDOAOvK985YJb0B",
    "user": {
      "login": "JAVAN000B",
      "id": 39431803,
      "node_id": "MDQ6VXNlcjM5NDMxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JAVAN000B",
      "html_url": "https://github.com/JAVAN000B",
      "followers_url": "https://api.github.com/users/JAVAN000B/followers",
      "following_url": "https://api.github.com/users/JAVAN000B/following{/other_user}",
      "gists_url": "https://api.github.com/users/JAVAN000B/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JAVAN000B/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JAVAN000B/subscriptions",
      "organizations_url": "https://api.github.com/users/JAVAN000B/orgs",
      "repos_url": "https://api.github.com/users/JAVAN000B/repos",
      "events_url": "https://api.github.com/users/JAVAN000B/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JAVAN000B/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T03:22:33Z",
    "updated_at": "2023-03-22T03:22:33Z",
    "author_association": "NONE",
    "body": "I also have the same problem. After updating to v1.11.3, my geth on goerli kept running out of memory, and  I am wondering if we can set some flags when lauching geth to avoid this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1478868225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1479285702",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1479285702",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1479285702,
    "node_id": "IC_kwDOAOvK985YLBvG",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T10:21:14Z",
    "updated_at": "2023-03-22T10:21:14Z",
    "author_association": "MEMBER",
    "body": "There was an attack happening on goerli that uses a lot of memory/cpu. Updating to v1.11.4 or higher should mitigate the attack",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1479285702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1481195371",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26904#issuecomment-1481195371",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26904",
    "id": 1481195371,
    "node_id": "IC_kwDOAOvK985YST9r",
    "user": {
      "login": "JAVAN000B",
      "id": 39431803,
      "node_id": "MDQ6VXNlcjM5NDMxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JAVAN000B",
      "html_url": "https://github.com/JAVAN000B",
      "followers_url": "https://api.github.com/users/JAVAN000B/followers",
      "following_url": "https://api.github.com/users/JAVAN000B/following{/other_user}",
      "gists_url": "https://api.github.com/users/JAVAN000B/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JAVAN000B/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JAVAN000B/subscriptions",
      "organizations_url": "https://api.github.com/users/JAVAN000B/orgs",
      "repos_url": "https://api.github.com/users/JAVAN000B/repos",
      "events_url": "https://api.github.com/users/JAVAN000B/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JAVAN000B/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T13:28:13Z",
    "updated_at": "2023-03-23T13:28:13Z",
    "author_association": "NONE",
    "body": "I think I find the answer why my geth kept running huge RAM and then killed by system. I added --maxpeer 1000 when launcing geth.  When I last check my node, it already connected 337 other geths. Never expected these connections are such resource consuming things.(about 4gb) Can we estimated how much ram will be consumed per connection, as I found this is not counted by pprof. When I looked localhost:6060/memsize, it is different from what I found on `top`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1481195371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21595",
  "id": 706190938,
  "node_id": "MDU6SXNzdWU3MDYxOTA5Mzg=",
  "number": 21595,
  "title": "Probably misleading comment of \"bn256\"",
  "user": {
    "login": "SadPencil",
    "id": 11227602,
    "node_id": "MDQ6VXNlcjExMjI3NjAy",
    "avatar_url": "https://avatars.githubusercontent.com/u/11227602?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SadPencil",
    "html_url": "https://github.com/SadPencil",
    "followers_url": "https://api.github.com/users/SadPencil/followers",
    "following_url": "https://api.github.com/users/SadPencil/following{/other_user}",
    "gists_url": "https://api.github.com/users/SadPencil/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SadPencil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SadPencil/subscriptions",
    "organizations_url": "https://api.github.com/users/SadPencil/orgs",
    "repos_url": "https://api.github.com/users/SadPencil/repos",
    "events_url": "https://api.github.com/users/SadPencil/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SadPencil/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1141538240,
      "node_id": "MDU6TGFiZWwxMTQxNTM4MjQw",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:documentation",
      "name": "need:documentation",
      "color": "b4fcae",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-09-22T08:46:24Z",
  "updated_at": "2020-11-13T09:17:24Z",
  "closed_at": "2020-11-13T09:17:24Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "At [file](https://github.com/ethereum/go-ethereum/blob/master/crypto/bn256/google/bn256.go): `github.com/ethereum/go-ethereum/crypto/bn256/google/bn256.go`\r\n```go\r\n// This package specifically implements the Optimal Ate pairing over a 256-bit\r\n// Barreto-Naehrig curve as described in\r\n// http://cryptojedi.org/papers/dclxvi-20100714.pdf. Its output is compatible\r\n// with the implementation described in that paper.\r\n```\r\nIt does not. On Page 2, Paragraph 3 at [that paper](https://cryptojedi.org/papers/dclxvi-20100714.pdf), the parameters are:\r\n`p = 36u^4 + 36u^3 + 24u^2 + 6u + 1, with u = v^3 and v = 1868033, BN curve: y^2 = x^3 + 3 over F_p`\r\n\r\nSo that the parameter `u` is `1868033^3`, which is `6518589491078791937`\r\n\r\nHowever, in the source code of ethereum, at [file](https://github.com/ethereum/go-ethereum/blob/master/crypto/bn256/google/constants.go) `github.com/ethereum/go-ethereum/crypto/bn256/google/constants.go`\r\n```go\r\n// u is the BN parameter that determines the prime: 1868033³.\r\nvar u = bigFromBase10(\"4965661367192848881\")\r\n```\r\nthe parameter `u` is `4965661367192848881`. And note that the comment still says that the number is `1868033³`, but in the source code, it is not.\r\n\r\nSo there are at least two problems in \"bn256\" in this repo:\r\n- This package does not implement the exact BN curve described in that paper\r\n- The comment and the actual value are not consistent\r\n\r\n--------\r\n\r\nIn addition, I have this question: All the [parameters](https://github.com/ethereum/go-ethereum/blob/master/crypto/bn256/google/constants.go) in \"bn256\" in this repo is different from [Go's offcial crypto package](https://github.com/golang/crypto/tree/master/bn256). The parameters of \"bn256\" in this repo is actually consistent with [libsnark](https://github.com/scipr-lab/libsnark)'s \"[alt_bn128](https://github.com/scipr-lab/libff/blob/master/libff/algebra/curves/alt_bn128/alt_bn128_init.cpp)\", instead of [Go's offcial one](https://github.com/golang/crypto/blob/master/bn256/constants.go). And yes, \"alt_bn128\" is actually another name of \"bn256\", right? But why there are two sets of different parameters? It's confusing.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/697171428",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21595#issuecomment-697171428",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21595",
    "id": 697171428,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzE3MTQyOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-23T06:53:29Z",
    "updated_at": "2020-09-23T06:53:29Z",
    "author_association": "MEMBER",
    "body": "Ethereum uses the libsnark alt_bn128 curve, yes. Any remaining references to anything else in the comments should be updated.\r\n\r\nAs to why? The authors wanted the curve to be compatible with Zcash.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/697171428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

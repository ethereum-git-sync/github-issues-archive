{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20170",
  "id": 507283928,
  "node_id": "MDU6SXNzdWU1MDcyODM5Mjg=",
  "number": 20170,
  "title": "gcmode missing in toml config?",
  "user": {
    "login": "phahulin",
    "id": 2278876,
    "node_id": "MDQ6VXNlcjIyNzg4NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2278876?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/phahulin",
    "html_url": "https://github.com/phahulin",
    "followers_url": "https://api.github.com/users/phahulin/followers",
    "following_url": "https://api.github.com/users/phahulin/following{/other_user}",
    "gists_url": "https://api.github.com/users/phahulin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/phahulin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/phahulin/subscriptions",
    "organizations_url": "https://api.github.com/users/phahulin/orgs",
    "repos_url": "https://api.github.com/users/phahulin/repos",
    "events_url": "https://api.github.com/users/phahulin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/phahulin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-10-15T14:29:22Z",
  "updated_at": "2022-07-28T06:46:36Z",
  "closed_at": "2019-11-16T08:39:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version\r\n```\r\nGeth\r\nVersion: 1.9.6-stable\r\nGit Commit: bd05968077f27f7eb083404dd8448157996a8788\r\nGit Commit Date: 20191003\r\nArchitecture: amd64\r\nProtocol Versions: [63]\r\nNetwork Id: 1\r\nGo Version: go1.13.1\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/home/travis/.gimme/versions/go1.13.1.linux.amd64\r\n```\r\nOS & Version: Amazon Linux\r\n\r\n#### Expected behaviour\r\nWe started a ropsten node with toml config file generated by dumpconfig\r\n```\r\n./geth --testnet --syncmode full --gcmode archive --cache 2048  --datadir /data/ropsten --rpc --rpcaddr 0.0.0.0 --rpcport 8545 --rpcapi \"debug, net, eth, shh, web3, txpool\" --ws --wsaddr 0.0.0.0 --wsapi \"eth, net, web3, network, debug, txpool\" --wsorigins \"*\" --rpccorsdomain \"*\" dumpconfig > ropsten.toml\r\n```\r\n(note that there's `--gcmode archive` option enabled) and started the node with `./geth --config ropsten.toml`.\r\n\r\n#### Actual behaviour\r\nIt seems `gcmode` is not present in the toml file: https://gist.github.com/phahulin/9851a3a1bbe70586ba9201ce4d4b0a89\r\nand we're seeing errors like\r\n```\r\n%{code: -32000, data: %{block_number: 6575111, transaction_hash: \"0x84f6f459a31a8e5b7b8678ca6c7cce30132c9113c35c7ccfece904095fae8a56\", transaction_index: 7}, message: \"required historical state unavailable (reexec=128)\"}\r\n```\r\nwhich usually happen when gcmode was not set to `archive`.\r\n\r\n#### Steps to reproduce the behaviour\r\nSee above\r\n\r\n#### Backtrace\r\nNone\r\n\r\n----------\r\n\r\nIs there something else we missed? If we have to resync, is there a geth option to start syncing from specific block number?\r\n",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/543023086",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-543023086",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 543023086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzAyMzA4Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-17T06:20:43Z",
    "updated_at": "2019-10-17T06:20:43Z",
    "author_association": "MEMBER",
    "body": "The flag in the config file is named a bit differently:\r\n\r\n```\r\n$ geth --gcmode=archive dumpconfig\r\n\r\n[Eth]\r\nNetworkId = 1\r\nSyncMode = \"fast\"\r\nNoPruning = true   <- this one\r\n\r\n...\r\n```\r\n\r\nAre you sure you did a full sync with archive mode enabled? If you just accidentally messed this up for the last blocks, you can run `debug.setHead(blocknum)` to revert to an older block. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/543023086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/554617347",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-554617347",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 554617347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDYxNzM0Nw==",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-11-16T08:39:09Z",
    "updated_at": "2019-11-16T08:39:09Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/554617347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1106073878",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-1106073878",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 1106073878,
    "node_id": "IC_kwDOAOvK985B7VkW",
    "user": {
      "login": "PeaStew",
      "id": 34198053,
      "node_id": "MDQ6VXNlcjM0MTk4MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/34198053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeaStew",
      "html_url": "https://github.com/PeaStew",
      "followers_url": "https://api.github.com/users/PeaStew/followers",
      "following_url": "https://api.github.com/users/PeaStew/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeaStew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeaStew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeaStew/subscriptions",
      "organizations_url": "https://api.github.com/users/PeaStew/orgs",
      "repos_url": "https://api.github.com/users/PeaStew/repos",
      "events_url": "https://api.github.com/users/PeaStew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeaStew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-22T06:56:59Z",
    "updated_at": "2022-04-22T06:56:59Z",
    "author_association": "NONE",
    "body": "So that is really confusing... does the command line switch override the config.toml setting?\r\n\r\nif node is run as gcmode = archive and the config.toml is set to NoPruning = false, which one wins when running the node?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1106073878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197284781",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-1197284781",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 1197284781,
    "node_id": "IC_kwDOAOvK985HXR2t",
    "user": {
      "login": "MikeC-BC",
      "id": 46449334,
      "node_id": "MDQ6VXNlcjQ2NDQ5MzM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/46449334?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MikeC-BC",
      "html_url": "https://github.com/MikeC-BC",
      "followers_url": "https://api.github.com/users/MikeC-BC/followers",
      "following_url": "https://api.github.com/users/MikeC-BC/following{/other_user}",
      "gists_url": "https://api.github.com/users/MikeC-BC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MikeC-BC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MikeC-BC/subscriptions",
      "organizations_url": "https://api.github.com/users/MikeC-BC/orgs",
      "repos_url": "https://api.github.com/users/MikeC-BC/repos",
      "events_url": "https://api.github.com/users/MikeC-BC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MikeC-BC/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T19:39:39Z",
    "updated_at": "2022-07-27T19:39:39Z",
    "author_association": "NONE",
    "body": "yes, confused about this as well. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197284781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197624658",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-1197624658",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 1197624658,
    "node_id": "IC_kwDOAOvK985HYk1S",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-28T03:51:56Z",
    "updated_at": "2022-07-28T03:51:56Z",
    "author_association": "MEMBER",
    "body": "Priority is always `CLI > Config > Defaults`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197624658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197731776",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20170#issuecomment-1197731776",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20170",
    "id": 1197731776,
    "node_id": "IC_kwDOAOvK985HY-_A",
    "user": {
      "login": "PeaStew",
      "id": 34198053,
      "node_id": "MDQ6VXNlcjM0MTk4MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/34198053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeaStew",
      "html_url": "https://github.com/PeaStew",
      "followers_url": "https://api.github.com/users/PeaStew/followers",
      "following_url": "https://api.github.com/users/PeaStew/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeaStew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeaStew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeaStew/subscriptions",
      "organizations_url": "https://api.github.com/users/PeaStew/orgs",
      "repos_url": "https://api.github.com/users/PeaStew/repos",
      "events_url": "https://api.github.com/users/PeaStew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeaStew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-28T06:45:03Z",
    "updated_at": "2022-07-28T06:46:36Z",
    "author_association": "NONE",
    "body": "A cleanup of the naming between CLI & config would be super helpful there are quite a few instances where the CLI and config names are different and a few where they are completely different, it's possible to find this out in the code, but a standardisation would be very helpful\r\n\r\nwhy not just get rid of gcmode=archive entirely and just have pruning switches instead as erigon has done",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1197731776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28441",
  "id": 1970012991,
  "node_id": "I_kwDOAOvK9851bAM_",
  "number": 28441,
  "title": "`eth_getProof` implementation returns invalid hashes",
  "user": {
    "login": "Wollac",
    "id": 4930426,
    "node_id": "MDQ6VXNlcjQ5MzA0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4930426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Wollac",
    "html_url": "https://github.com/Wollac",
    "followers_url": "https://api.github.com/users/Wollac/followers",
    "following_url": "https://api.github.com/users/Wollac/following{/other_user}",
    "gists_url": "https://api.github.com/users/Wollac/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Wollac/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Wollac/subscriptions",
    "organizations_url": "https://api.github.com/users/Wollac/orgs",
    "repos_url": "https://api.github.com/users/Wollac/repos",
    "events_url": "https://api.github.com/users/Wollac/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Wollac/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-10-31T09:28:04Z",
  "updated_at": "2023-10-31T09:28:04Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### Description\r\n\r\nWhen `eth_getProof` is called for an account, that does not exist, it returns null hashes for the code and the storage hash. This is inconsistent with the behavior of existing simple accounts and was apparently introduced with #28357. Previously, `codeHash` consistently returned the hash of the empty string `0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470` and `storageHash` returned the empty MPT root hash `0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421`.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\n$ curl localhost:8545 \\ \r\n      -X POST \\\r\n      -H \"Content-Type: application/json\" \\\r\n      -d '{ \"method\": \"eth_getProof\", \"params\": [\"0x0010000000000000000000000000000000000000\", [], \"latest\"], \"id\": 1, \"jsonrpc\": \"2.0\" }'\r\n```\r\n\r\n#### Actual behaviour\r\n\r\nThe previous command returns\r\n```json\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"result\": {\r\n    \"address\": \"0x0010000000000000000000000000000000000000\",\r\n    \"accountProof\": [\r\n      ...\r\n    ],\r\n    \"balance\": \"0x0\",\r\n    \"codeHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"nonce\": \"0x0\",\r\n    \"storageHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"storageProof\": []\r\n  }\r\n}\r\n```\r\n\r\n#### Expected behaviour\r\n\r\nThe previous command should return the correct hash for \"empty\" data:\r\n```json\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"result\": {\r\n    \"address\": \"0x0010000000000000000000000000000000000000\",\r\n    \"accountProof\": [\r\n      ...\r\n    ],\r\n    \"balance\": \"0x0\",\r\n    \"codeHash\": \"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470\",\r\n    \"nonce\": \"0x0\",\r\n    \"storageHash\": \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\r\n    \"storageProof\": []\r\n  }\r\n}\r\n```\r\n\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28441/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

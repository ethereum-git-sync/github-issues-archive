{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26030",
  "id": 1419412978,
  "node_id": "I_kwDOAOvK985UmoXy",
  "number": 26030,
  "title": "Return sender (and chainId) on `'eth_subscribe', ['newPendingTransactions', true]`",
  "user": {
    "login": "geomad",
    "id": 7707517,
    "node_id": "MDQ6VXNlcjc3MDc1MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7707517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/geomad",
    "html_url": "https://github.com/geomad",
    "followers_url": "https://api.github.com/users/geomad/followers",
    "following_url": "https://api.github.com/users/geomad/following{/other_user}",
    "gists_url": "https://api.github.com/users/geomad/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/geomad/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/geomad/subscriptions",
    "organizations_url": "https://api.github.com/users/geomad/orgs",
    "repos_url": "https://api.github.com/users/geomad/repos",
    "events_url": "https://api.github.com/users/geomad/events{/privacy}",
    "received_events_url": "https://api.github.com/users/geomad/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-10-22T17:18:32Z",
  "updated_at": "2022-11-14T13:48:03Z",
  "closed_at": "2022-11-14T13:48:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The new feature added on https://github.com/ethereum/go-ethereum/commit/5b1a04b9c749d804b51159fe12246c56de8515c1 returning the full transaction on `newPendingTransactions` subscription is really useful, but does not return the full information like subscribing for hashes and then using `eth_getTransaction` with it does. \r\n\r\nPlease add `from` and possibly `chainId` (to make it complete) on the full transaction object.\r\n\r\nExample of object returned with `'eth_subscribe', ['newPendingTransactions', true]`:\r\n```\r\n{\r\n  type: '0x2',\r\n  nonce: '0xe',\r\n  gasPrice: null,\r\n  maxPriorityFeePerGas: '0x59682f00',\r\n  maxFeePerGas: '0x8e26dacb2',\r\n  gas: '0x394de',\r\n  value: '0x0',\r\n  input: '0x5ae401dc0000000000000000000000000000000000000000000000000000000063542a0b000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000e4472b43f30000000000000000000000000000000000000000000a17ae76b747b02bc0bb7800000000000000000000000000000000000000000000000007cc4a16fbd8c81e00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000200000000000000000000000038c15f59f2f14adb24672ea25da111c3f81637a0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004449404b7c00000000000000000000000000000000000000000000000007cc4a16fbd8c81e000000000000000000000000f9eb81b3807e3e9abc5537af73be2a0c8e6b923900000000000000000000000000000000000000000000000000000000',\r\n  v: '0x1',\r\n  r: '0x5aaf8b6da68451a1ac6fba1a00107179eac97500d4cb0b849d9671462eedd890',\r\n  s: '0x279d7df79cb05c3033de9d963cc9b2a785a43bca9c9b802fe33c2ee955edad09',\r\n  to: '0x68b3465833fb72a70ecdf485e0e4c7bd8665fc45',\r\n  chainId: '0x1',\r\n  accessList: [],\r\n  hash: '0x5ec2a5ae29fab77d7503e8cc5921b7c31d05e72ad2e7602526c6b3ecabbe18d0'\r\n}\r\n```\r\n\r\nExample of object returned with `'eth_subscribe', ['newPendingTransactions']` , and then `eth_getTransaction` on the result:\r\n```\r\n{\r\n  blockHash: null,\r\n  blockNumber: null,\r\n  from: '0x97521d509A028b1009F651e14E1e471f3452DE36',\r\n  gas: 69724,\r\n  gasPrice: '32950574540',\r\n  maxFeePerGas: '32950574540',\r\n  maxPriorityFeePerGas: '1000000000',\r\n  hash: '0xf5b75b99b293b20a4029718f165f356d2f3d3b2f5b2d36dfd0d0fd7454cc4968',\r\n  input: '0x095ea7b30000000000000000000000001111111254fb6c44bac0bed2854e76f90643097dffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',\r\n  nonce: 22,\r\n  to: '0x761D38e5ddf6ccf6Cf7c55759d5210750B5D60F3',\r\n  transactionIndex: null,\r\n  value: '0',\r\n  type: 2,\r\n  accessList: [],\r\n  chainId: '0x1',\r\n  v: '0x0',\r\n  r: '0x608844986b439407a7e49c3c2db9a4b46ff213cef692a4397cf202fea790edb6',\r\n  s: '0x424cce707fe6c5c366a4369d025ae4908def0afec259639f9f70d5dbf26d509b'\r\n}\r\n```\r\n\r\nNote: web3.js (v1.8.0) does not support yet the `true` argument when subscribing `'newPendingTransactions'`. I've opened an issue for it (https://github.com/web3/web3.js/issues/5548).\r\nWorkaround for now is to comment out line 70 in `\\node_modules\\web3-core-subscriptions\\lib\\subscription.js`\r\n```\r\n    if (args.length !== subscription.params) {\r\n        //throw errors.InvalidNumberOfParams(args.length, subscription.params, subscription.subscriptionName);\r\n    }\r\n```\r\n\r\nNote 2: I just noticed that while one method returns hex values, the other returns numbers. I am not sure if that's due to web3.js lack of support but maybe worth taking a look as well.\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1297231004",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26030#issuecomment-1297231004",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030",
    "id": 1297231004,
    "node_id": "IC_kwDOAOvK985NUiyc",
    "user": {
      "login": "kaber2",
      "id": 34914579,
      "node_id": "MDQ6VXNlcjM0OTE0NTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/34914579?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaber2",
      "html_url": "https://github.com/kaber2",
      "followers_url": "https://api.github.com/users/kaber2/followers",
      "following_url": "https://api.github.com/users/kaber2/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaber2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaber2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaber2/subscriptions",
      "organizations_url": "https://api.github.com/users/kaber2/orgs",
      "repos_url": "https://api.github.com/users/kaber2/repos",
      "events_url": "https://api.github.com/users/kaber2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaber2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-31T15:06:47Z",
    "updated_at": "2022-10-31T15:06:47Z",
    "author_association": "NONE",
    "body": "Agreed, for consistency it would be nice to send the result of ethapi.newRPCTransaction(tx, ...).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1297231004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1308571049",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26030#issuecomment-1308571049",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26030",
    "id": 1308571049,
    "node_id": "IC_kwDOAOvK985N_zWp",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T10:55:33Z",
    "updated_at": "2022-11-09T10:55:33Z",
    "author_association": "MEMBER",
    "body": "> Note 2: I just noticed that while one method returns hex values, the other returns numbers. I am not sure if that's due to web3.js lack of support but maybe worth taking a look as well.\r\n\r\nThat's because web3.js is post-processing the result. If you getTransactionByHash via curl:\r\n\r\n```console\r\n‚ùØ curl -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_getTransactionByHash\",\"params\":[\"0xfa1c1fe6823ceb6b0c8688e3f690025aaf7188c44fc1a334f47b71013caba2df\":15295,\"jsonrpc\":\"2.0\"}' http://localhost:8545 | jq\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  3090    0  2946  100   144   208k  10424 --:--:-- --:--:-- --:--:-- 3017k\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 15295,\r\n  \"result\": {\r\n    \"blockHash\": \"0x7744902ac62296047d47cd68fc89676de31053973bc2cff24d8ba70da0ea585a\",\r\n    \"blockNumber\": \"0x72b5d8\",\r\n    \"from\": \"0x7351dc227bacc5b33d1e14c778e46439852673b7\",\r\n    \"gas\": \"0x1c9c380\",\r\n    \"gasPrice\": \"0x95032efe\",\r\n    \"maxFeePerGas\": \"0x95032efe\",\r\n    \"maxPriorityFeePerGas\": \"0x9502f900\",\r\n    \"hash\": \"0xfa1c1fe6823ceb6b0c8688e3f690025aaf7188c44fc1a334f47b71013caba2df\",\r\n    \"input\": \"0x2e....\",\r\n    \"nonce\": \"0x5c\",\r\n    \"to\": \"0x9b0b70edaa3b6ae70389d8514ed65acd86386ef2\",\r\n    \"transactionIndex\": \"0x0\",\r\n    \"value\": \"0x0\",\r\n    \"type\": \"0x2\",\r\n    \"accessList\": [],\r\n    \"chainId\": \"0x5\",\r\n    \"v\": \"0x1\",\r\n    \"r\": \"0x5556afe935aae3e4f3275b04c8bf7405733cd0c6bdef6aae9dc5c3f8d96a2f9f\",\r\n    \"s\": \"0x1c5305e2d9e6068bfdb154b3139c07cd67a98d158c3f0e3e0e01840783df3eff\"\r\n  }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1308571049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27165",
  "id": 1684199889,
  "node_id": "I_kwDOAOvK985kYtnR",
  "number": 27165,
  "title": "How to increase the synchronization speed of archive nodes",
  "user": {
    "login": "harveyff",
    "id": 21994933,
    "node_id": "MDQ6VXNlcjIxOTk0OTMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/21994933?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/harveyff",
    "html_url": "https://github.com/harveyff",
    "followers_url": "https://api.github.com/users/harveyff/followers",
    "following_url": "https://api.github.com/users/harveyff/following{/other_user}",
    "gists_url": "https://api.github.com/users/harveyff/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/harveyff/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/harveyff/subscriptions",
    "organizations_url": "https://api.github.com/users/harveyff/orgs",
    "repos_url": "https://api.github.com/users/harveyff/repos",
    "events_url": "https://api.github.com/users/harveyff/events{/privacy}",
    "received_events_url": "https://api.github.com/users/harveyff/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-26T03:21:07Z",
  "updated_at": "2023-04-30T04:34:13Z",
  "closed_at": "2023-04-26T08:02:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi guys,\r\n\r\nThank you for your great work,\r\n\r\nI'm currently syncing the eth mainnet archive node, and I'm wondering how to increase the sync speed, I synced once before and it took about 20 days. How can this speed be accelerated? \r\n\r\nI would be very grateful if you have any helpful advice.\r\n\r\nMy machine configuration is AWS Ubuntu LTS 20, 32 cores, 128G memory, 32000 IOPS, and sufficient bandwidth.\r\n\r\nIt runs with k8s.\r\n\r\nRun command:\r\n\r\n```\r\n   exec geth --datadir=/data --config=/config/geth.toml  --port=30303\r\n              --syncmode=full --gcmode=archive  --snapshot=false --http\r\n              --http.addr=0.0.0.0 --http.port=8545 --http.vhosts=*\r\n              --http.corsdomain=* --ws --ws.addr=0.0.0.0 --ws.port=8546\r\n              --ws.origins=*  --metrics --metrics.addr=0.0.0.0\r\n              --metrics.port=6060 \r\n              --authrpc.jwtsecret=\"/jwt/node_beacon/jwt.hex\" \r\n              --authrpc.port=8551  --authrpc.vhosts=* --cache=20000\r\n```",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1522961130",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27165#issuecomment-1522961130",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165",
    "id": 1522961130,
    "node_id": "IC_kwDOAOvK985axorq",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T08:02:12Z",
    "updated_at": "2023-04-26T08:02:12Z",
    "author_association": "MEMBER",
    "body": "We cannot. Processing all the blocks and writing all that data takes a very long time. We switched over the default database to Pebble on master, that might make things ever so slightly faster, but nothing meaningfully better really.\r\n\r\nUnfortunately this is the cost of an archive node in Geth's data model. Erigon has a better data model for archive nodes, you might look into them if you really need an archive node.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1522961130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1528936898",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27165#issuecomment-1528936898",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27165",
    "id": 1528936898,
    "node_id": "IC_kwDOAOvK985bIbnC",
    "user": {
      "login": "dreadedhamish",
      "id": 5133413,
      "node_id": "MDQ6VXNlcjUxMzM0MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5133413?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dreadedhamish",
      "html_url": "https://github.com/dreadedhamish",
      "followers_url": "https://api.github.com/users/dreadedhamish/followers",
      "following_url": "https://api.github.com/users/dreadedhamish/following{/other_user}",
      "gists_url": "https://api.github.com/users/dreadedhamish/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dreadedhamish/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dreadedhamish/subscriptions",
      "organizations_url": "https://api.github.com/users/dreadedhamish/orgs",
      "repos_url": "https://api.github.com/users/dreadedhamish/repos",
      "events_url": "https://api.github.com/users/dreadedhamish/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dreadedhamish/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-30T04:34:13Z",
    "updated_at": "2023-04-30T04:34:13Z",
    "author_association": "NONE",
    "body": "> Processing all the blocks and writing all that data takes a very long time.\r\n\r\nHe has cache set at 20000. Would bumping that up help, or is it diminishing returns after a point?\r\nI came across this issue while investigating ideal cache sizes, but haven't found any good documentation. Is there data around for cache size?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1528936898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

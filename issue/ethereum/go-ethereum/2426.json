{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2426",
  "id": 146207756,
  "node_id": "MDU6SXNzdWUxNDYyMDc3NTY=",
  "number": 2426,
  "title": "eth_getFilter RPC returns error on develop",
  "user": {
    "login": "tinybike",
    "id": 2637020,
    "node_id": "MDQ6VXNlcjI2MzcwMjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2637020?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tinybike",
    "html_url": "https://github.com/tinybike",
    "followers_url": "https://api.github.com/users/tinybike/followers",
    "following_url": "https://api.github.com/users/tinybike/following{/other_user}",
    "gists_url": "https://api.github.com/users/tinybike/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tinybike/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tinybike/subscriptions",
    "organizations_url": "https://api.github.com/users/tinybike/orgs",
    "repos_url": "https://api.github.com/users/tinybike/repos",
    "events_url": "https://api.github.com/users/tinybike/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tinybike/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "bas-vk",
    "id": 4280775,
    "node_id": "MDQ6VXNlcjQyODA3NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bas-vk",
    "html_url": "https://github.com/bas-vk",
    "followers_url": "https://api.github.com/users/bas-vk/followers",
    "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
    "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
    "organizations_url": "https://api.github.com/users/bas-vk/orgs",
    "repos_url": "https://api.github.com/users/bas-vk/repos",
    "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bas-vk/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2016-04-06T07:01:01Z",
  "updated_at": "2016-04-06T10:29:45Z",
  "closed_at": "2016-04-06T10:29:42Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#### System information\n\nGeth version: 1.4.0-unstable\nOS & Version: Ubuntu Linux 14.04\nCommit hash: 7e02105672cda92889a78db864a5701d78f45eb2\n#### Expected behaviour\n\nSuccessful creation of a new filter using RPC `eth_getFilter`.  The response I get on the master branch is:\n\n```\n{\"id\":1,\"jsonrpc\":\"2.0\",\"result\":\"0x0\"}\n```\n\n(Subsequent new filter requests return `0x1`, `0x2`, etc., as expected.)\n#### Actual behaviour\n\nOn the develop branch, `eth_getFilter` RPC request returns an error:\n\n```\n{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32602,\"message\":\"invalid topic on index 0\"}}\n```\n#### Steps to reproduce the behaviour\n\nStart a local geth node on the develop branch.  For completeness' sake, here is the full command I used to start geth:\n\n```\ndeploy@loopy:~$ geth --cache 2048 --rpc --rpcaddr 0.0.0.0 --rpcport 8545 --maxpeers 64 --rpcapi eth,net,web3 --ipcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3 --testnet --etherbase 0x00bae5113ee9f252cceb0001205b88fad175461a --unlock 0x00bae5113ee9f252cceb0001205b88fad175461a --password ~/.ethereum/.password console\n```\n\nThen send the `eth_newFilter` RPC using curl:\n\n```\ndeploy@loopy:~$ curl -X POST --data '{\"id\":1,\"jsonrpc\":\"2.0\",\"method\":\"eth_newFilter\",\"params\":[{\"address\":\"0xf37626aa99f29a4afe7406e386f68cc77be2cb6e\",\"topics\":[\"updatePrice\"]}]}' http://localhost:8545\n```\n\nThis request works fine on master (returning the expected result above); however, on develop, it fails and returns the `-32602: invalid topic on index 0` error.\n",
  "closed_by": {
    "login": "tinybike",
    "id": 2637020,
    "node_id": "MDQ6VXNlcjI2MzcwMjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2637020?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tinybike",
    "html_url": "https://github.com/tinybike",
    "followers_url": "https://api.github.com/users/tinybike/followers",
    "following_url": "https://api.github.com/users/tinybike/following{/other_user}",
    "gists_url": "https://api.github.com/users/tinybike/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tinybike/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tinybike/subscriptions",
    "organizations_url": "https://api.github.com/users/tinybike/orgs",
    "repos_url": "https://api.github.com/users/tinybike/repos",
    "events_url": "https://api.github.com/users/tinybike/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tinybike/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206217430",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206217430",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206217430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjIxNzQzMA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T08:32:12Z",
    "updated_at": "2016-04-06T08:32:12Z",
    "author_association": "MEMBER",
    "body": "I'm actually a bit surprised that this \"works\" on master. The spec specifies that topics are 32 bytes long. I did a test with master and using an invalid topic does indeed create the filter but it matches topics incorrect.\n\nDevelop has a RPC implementation that does better input validation which rejects this input. I don't know how your event looks like. If it has no argument then you need to use something like:\n\n`0x673a7e28e0c32ef7c9d62cc87ee5bc9ee0cb512937e54075b13c4d9770e98988`\n\nYou can calculate this with:\n`web3.sha3(\"updatePrice()\")`\n\n[More details can be found in the solidity tutorial.](https://solidity.readthedocs.org/en/latest/contracts.html#events)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206217430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206228987",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206228987",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206228987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjIyODk4Nw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T08:52:11Z",
    "updated_at": "2016-04-06T08:52:11Z",
    "author_association": "MEMBER",
    "body": "The error message could be improved though.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206228987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206231057",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206231057",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206231057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjIzMTA1Nw==",
    "user": {
      "login": "tinybike",
      "id": 2637020,
      "node_id": "MDQ6VXNlcjI2MzcwMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2637020?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinybike",
      "html_url": "https://github.com/tinybike",
      "followers_url": "https://api.github.com/users/tinybike/followers",
      "following_url": "https://api.github.com/users/tinybike/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinybike/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinybike/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinybike/subscriptions",
      "organizations_url": "https://api.github.com/users/tinybike/orgs",
      "repos_url": "https://api.github.com/users/tinybike/repos",
      "events_url": "https://api.github.com/users/tinybike/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinybike/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T08:54:51Z",
    "updated_at": "2016-04-06T08:55:25Z",
    "author_association": "MEMBER",
    "body": "As far as I can tell it works on master; we have been using it to filter for `updatePrice` and `creationBlock` events in the Augur app.  It seems to match topics correctly, which is very strange if it's expecting to receive sha3(\"updatePrice()\") and instead it's just receiving \"updatePrice\".  Examples: https://github.com/AugurProject/augur.js/blob/master/test/core/filters.js\n\nEvent definitions:\nupdatePrice: https://github.com/AugurProject/augur-core/blob/scaling/src/functions/buy%26sellShares.se#L31\ncreationBlock: https://github.com/AugurProject/augur-core/blob/scaling/src/functions/createMarket.se#L32\n\n(These are Serpent contracts, but I assume Serpent and Solidity events compile to the same EVM code.)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206231057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206232802",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206232802",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206232802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjIzMjgwMg==",
    "user": {
      "login": "tinybike",
      "id": 2637020,
      "node_id": "MDQ6VXNlcjI2MzcwMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2637020?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinybike",
      "html_url": "https://github.com/tinybike",
      "followers_url": "https://api.github.com/users/tinybike/followers",
      "following_url": "https://api.github.com/users/tinybike/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinybike/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinybike/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinybike/subscriptions",
      "organizations_url": "https://api.github.com/users/tinybike/orgs",
      "repos_url": "https://api.github.com/users/tinybike/repos",
      "events_url": "https://api.github.com/users/tinybike/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinybike/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T08:56:33Z",
    "updated_at": "2016-04-06T08:56:33Z",
    "author_association": "MEMBER",
    "body": "Hmm.  We're also filtering by contract address, and `updatePrice` is the only event on that contract, so that might be why the filter appears to work on master.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206232802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206241084",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206241084",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206241084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjI0MTA4NA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T09:07:31Z",
    "updated_at": "2016-04-06T09:07:31Z",
    "author_association": "MEMBER",
    "body": "Yes, that is the reason.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206241084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206295974",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2426#issuecomment-206295974",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2426",
    "id": 206295974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjI5NTk3NA==",
    "user": {
      "login": "tinybike",
      "id": 2637020,
      "node_id": "MDQ6VXNlcjI2MzcwMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2637020?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinybike",
      "html_url": "https://github.com/tinybike",
      "followers_url": "https://api.github.com/users/tinybike/followers",
      "following_url": "https://api.github.com/users/tinybike/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinybike/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinybike/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinybike/subscriptions",
      "organizations_url": "https://api.github.com/users/tinybike/orgs",
      "repos_url": "https://api.github.com/users/tinybike/repos",
      "events_url": "https://api.github.com/users/tinybike/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinybike/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T10:29:42Z",
    "updated_at": "2016-04-06T10:29:42Z",
    "author_association": "MEMBER",
    "body": "Okay, fixed our topics and all's well.  Thanks @bas-vk!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206295974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

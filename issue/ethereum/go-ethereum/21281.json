{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21281",
  "id": 648718242,
  "node_id": "MDU6SXNzdWU2NDg3MTgyNDI=",
  "number": 21281,
  "title": "Out of the blue chaindata takes up ~700GB",
  "user": {
    "login": "wschwab",
    "id": 31592931,
    "node_id": "MDQ6VXNlcjMxNTkyOTMx",
    "avatar_url": "https://avatars.githubusercontent.com/u/31592931?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wschwab",
    "html_url": "https://github.com/wschwab",
    "followers_url": "https://api.github.com/users/wschwab/followers",
    "following_url": "https://api.github.com/users/wschwab/following{/other_user}",
    "gists_url": "https://api.github.com/users/wschwab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wschwab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wschwab/subscriptions",
    "organizations_url": "https://api.github.com/users/wschwab/orgs",
    "repos_url": "https://api.github.com/users/wschwab/repos",
    "events_url": "https://api.github.com/users/wschwab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wschwab/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-07-01T06:42:21Z",
  "updated_at": "2020-07-01T07:51:09Z",
  "closed_at": "2020-07-01T07:50:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.9.11`\r\nOS & Version: Linux Debian 10 latest\r\n\r\n#### Expected behaviour\r\nIt would seem the expected size of `chaindata` on a full (not archive) node is currently ~350 GB. [source](https://bitinfocharts.com/ethereum/) About a week ago I started getting notifications that I was running out of disk space, and discovered my `chaindata` was ~700GB, and `ancient` another ~150GB.\r\n\r\nI moved `ancient` to an auxiliary drive, but the node 'died' shortly thereafter, citing `Fatal: Error starting protocol stack: gap in the chain between ancients and leveldb`.\r\n\r\n#### Steps to reproduce the behaviour\r\nI don't know how to reproduce this. I figured it would be wise to bring it to your attention in case this is not a one-time event. The only thing I can think of is that I was not explicitly using the `--syncmode fast` flag, and was relying on fast sync being the default behavior, as I believe is specified in the docs.\r\n\r\nAgain, I don't have a specific issue to solve - I deleted `chaindata` and started a new sync off of the `ancient`. Just in case this part of a larger bug, though, I figured I should bring it to your attention,\r\n\r\nThanks for all the great work! We ❤️ Geth!",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652255048",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21281#issuecomment-652255048",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281",
    "id": 652255048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjI1NTA0OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-01T07:50:32Z",
    "updated_at": "2020-07-01T07:50:32Z",
    "author_association": "MEMBER",
    "body": "A fast-sync starts off having the 'bare minimum' state -- nothing more than required to operate at the 'pivot point' where you synced to. After fast-sync is done, blocks are imported one by one, and when blocks are imported one by one, we do an in-memory pruning of state. We try to maintain minimum state, but the effectiveness of the in-memory pruner depends on how much memory it has, and it can never be perfect. \r\n\r\nSo the longer you run it, the more extraneous data is collected. If you've ran it for a long time, it can easily be double the size, compared to if you do a fresh fast-sync. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652255048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652255359",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21281#issuecomment-652255359",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21281",
    "id": 652255359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjI1NTM1OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-01T07:51:09Z",
    "updated_at": "2020-07-01T07:51:09Z",
    "author_association": "MEMBER",
    "body": "> Thanks for all the great work! We :heart: Geth!\r\n\r\nAnd thanks a lot for the support! ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652255359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

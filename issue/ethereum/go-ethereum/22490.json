{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22490",
  "id": 830294783,
  "node_id": "MDU6SXNzdWU4MzAyOTQ3ODM=",
  "number": 22490,
  "title": "Transactions continuously stuck in the local mempool",
  "user": {
    "login": "Norfolks",
    "id": 20839457,
    "node_id": "MDQ6VXNlcjIwODM5NDU3",
    "avatar_url": "https://avatars.githubusercontent.com/u/20839457?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Norfolks",
    "html_url": "https://github.com/Norfolks",
    "followers_url": "https://api.github.com/users/Norfolks/followers",
    "following_url": "https://api.github.com/users/Norfolks/following{/other_user}",
    "gists_url": "https://api.github.com/users/Norfolks/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Norfolks/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Norfolks/subscriptions",
    "organizations_url": "https://api.github.com/users/Norfolks/orgs",
    "repos_url": "https://api.github.com/users/Norfolks/repos",
    "events_url": "https://api.github.com/users/Norfolks/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Norfolks/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-03-12T16:56:15Z",
  "updated_at": "2021-05-11T05:21:48Z",
  "closed_at": "2021-03-22T12:21:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth 1.10.0`\r\nOS & Version: Linux\r\nMode: Full\r\nCPU/RAM/SSD: More than needed.\r\n\r\n#### Expected behaviour\r\nGeth node receives transactions and broadcasts them through the network.\r\n\r\n#### Actual behaviour\r\nAt some point, transactions are stucked in mempool. The gas price of our transactions is high, however, we do not see transactions on other nodes/etherscan.\r\n\r\n#### Steps to reproduce the behaviour\r\nToo hard to reproduce. We have a lot of transactions to different wallets, we haven't met such a problem while sending less amounts of transactions.\r\nFor now, we have found two workarounds: \r\n1. resend a transaction with a slight gas increase(Doesn't help sometimes). \r\n2. delete some peers from a node list, when the node connects to new peers transactions start to broadcast successfully.\r\nThere is possibly some bug in the p2p connection because reconnection to node helps.\r\n\r\n#### Backtrace\r\nBacktrace looks fine, no errors, the node has 25 peers available. ",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/797863205",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22490#issuecomment-797863205",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
    "id": 797863205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Nzg2MzIwNQ==",
    "user": {
      "login": "tharunprabhakaran",
      "id": 40835224,
      "node_id": "MDQ6VXNlcjQwODM1MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/40835224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tharunprabhakaran",
      "html_url": "https://github.com/tharunprabhakaran",
      "followers_url": "https://api.github.com/users/tharunprabhakaran/followers",
      "following_url": "https://api.github.com/users/tharunprabhakaran/following{/other_user}",
      "gists_url": "https://api.github.com/users/tharunprabhakaran/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tharunprabhakaran/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tharunprabhakaran/subscriptions",
      "organizations_url": "https://api.github.com/users/tharunprabhakaran/orgs",
      "repos_url": "https://api.github.com/users/tharunprabhakaran/repos",
      "events_url": "https://api.github.com/users/tharunprabhakaran/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tharunprabhakaran/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-13T04:15:15Z",
    "updated_at": "2021-03-13T04:16:11Z",
    "author_association": "NONE",
    "body": "Faced this issue few days back, in our case the cause of the issue was the low IOPS of the disk. Please mention the IOPS of the SSD. Is the host machine exclusively dedicated to geth node ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/797863205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/800055897",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22490#issuecomment-800055897",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
    "id": 800055897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDA1NTg5Nw==",
    "user": {
      "login": "Norfolks",
      "id": 20839457,
      "node_id": "MDQ6VXNlcjIwODM5NDU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20839457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Norfolks",
      "html_url": "https://github.com/Norfolks",
      "followers_url": "https://api.github.com/users/Norfolks/followers",
      "following_url": "https://api.github.com/users/Norfolks/following{/other_user}",
      "gists_url": "https://api.github.com/users/Norfolks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Norfolks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Norfolks/subscriptions",
      "organizations_url": "https://api.github.com/users/Norfolks/orgs",
      "repos_url": "https://api.github.com/users/Norfolks/repos",
      "events_url": "https://api.github.com/users/Norfolks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Norfolks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-16T08:21:28Z",
    "updated_at": "2021-03-16T08:21:28Z",
    "author_association": "NONE",
    "body": "Thanks @tharunprabhakaran\r\nBut it doesn't look like we have IOPS problem.\r\nWe have found a temporary solution - delete one node from the peer list, and as soon as another node is added, our transactions are broadcasted.\r\nIt is definitely a network problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/800055897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/804020503",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22490#issuecomment-804020503",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
    "id": 804020503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNDAyMDUwMw==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-22T12:21:01Z",
    "updated_at": "2021-03-22T12:21:01Z",
    "author_association": "MEMBER",
    "body": "Actually this is currently expected behaviour (we're working on it).\r\nBasically we don't want nodes to be able to resend their transactions to peers that have already seen the transactions. \r\nOtherwise this would increase the network load of ethereum significantly and also allow for ddos-ing peers. \r\nSo the transactions are only send to each peer once. If you kick a peer and connect to a new one, then the transactions are resend to that peer, which will distribute them again in the network.\r\n\r\nSo yeah, kicking a peer and adding a new one is the way to go right now.\r\nAs I said, we're working on a better solution than this",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/804020503/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/804026644",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22490#issuecomment-804026644",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
    "id": 804026644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNDAyNjY0NA==",
    "user": {
      "login": "Norfolks",
      "id": 20839457,
      "node_id": "MDQ6VXNlcjIwODM5NDU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20839457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Norfolks",
      "html_url": "https://github.com/Norfolks",
      "followers_url": "https://api.github.com/users/Norfolks/followers",
      "following_url": "https://api.github.com/users/Norfolks/following{/other_user}",
      "gists_url": "https://api.github.com/users/Norfolks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Norfolks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Norfolks/subscriptions",
      "organizations_url": "https://api.github.com/users/Norfolks/orgs",
      "repos_url": "https://api.github.com/users/Norfolks/repos",
      "events_url": "https://api.github.com/users/Norfolks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Norfolks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-22T12:32:02Z",
    "updated_at": "2021-03-22T12:32:02Z",
    "author_association": "NONE",
    "body": "@MariusVanDerWijden\r\nThanks for the answer.\r\nWe hope for your success in resolving the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/804026644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/837838775",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22490#issuecomment-837838775",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22490",
    "id": 837838775,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzgzODc3NQ==",
    "user": {
      "login": "gitteri",
      "id": 8359193,
      "node_id": "MDQ6VXNlcjgzNTkxOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8359193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gitteri",
      "html_url": "https://github.com/gitteri",
      "followers_url": "https://api.github.com/users/gitteri/followers",
      "following_url": "https://api.github.com/users/gitteri/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitteri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitteri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitteri/subscriptions",
      "organizations_url": "https://api.github.com/users/gitteri/orgs",
      "repos_url": "https://api.github.com/users/gitteri/repos",
      "events_url": "https://api.github.com/users/gitteri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitteri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T05:21:48Z",
    "updated_at": "2021-05-11T05:21:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MariusVanDerWijden @karalabe I understand it's quite the problem when considering rebroadcasting, but is there any appetite for enforcing an unstable peer list? By that I mean, can we simply enforce a new peer every x minutes to fix this issue, decrease the likelihood of an eclipse attack, and keep a better decentralized web of node connections? If this is acceptable then I can get working on it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/837838775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

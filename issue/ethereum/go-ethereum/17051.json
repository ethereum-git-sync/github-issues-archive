{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17051",
  "id": 334653169,
  "node_id": "MDU6SXNzdWUzMzQ2NTMxNjk=",
  "number": 17051,
  "title": "eth_getBlockByNumber RPC is returning no transactions for any block except recent ones.",
  "user": {
    "login": "nutmix",
    "id": 5080942,
    "node_id": "MDQ6VXNlcjUwODA5NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5080942?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nutmix",
    "html_url": "https://github.com/nutmix",
    "followers_url": "https://api.github.com/users/nutmix/followers",
    "following_url": "https://api.github.com/users/nutmix/following{/other_user}",
    "gists_url": "https://api.github.com/users/nutmix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nutmix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nutmix/subscriptions",
    "organizations_url": "https://api.github.com/users/nutmix/orgs",
    "repos_url": "https://api.github.com/users/nutmix/repos",
    "events_url": "https://api.github.com/users/nutmix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nutmix/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-06-21T20:52:16Z",
  "updated_at": "2018-06-21T22:20:46Z",
  "closed_at": "2018-06-21T22:20:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nOS: Ubuntu 18.04LTS\r\ngeth:    1.8.10-stable-eae63c51\r\nstart command: /usr/bin/geth --syncmode fast --cache=4096 --rpc --datadir /mnt/eth_volume 2>/var/log/geth.log\r\n\r\n#### Expected behaviour\r\ncalling \"eth_getBlockByNumber\" should return the array of transaction hashes or complete transactions (depending on boolean parameter)\r\n\r\n#### Actual behaviour\r\ncalling \"eth_getBlockByNumber\" contains no transaction hashes or transactions, it always returns an empty transactions array.  this is also true for block 1, 10, 100, 1000 etc.\r\n\r\n`{\"jsonrpc\":\"2.0\",\"method\":\"eth_getBlockByNumber\",\"params\":[\"0x0\", false],\"id\":1}`\r\n\r\n```\r\n{\r\n\"jsonrpc\": \"2.0\",\r\n\"id\": 1,\r\n\"result\":{\r\n\"difficulty\": \"0x400000000\",\r\n\"extraData\": \"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa\",\r\n\"gasLimit\": \"0x1388\",\r\n\"gasUsed\": \"0x0\",\r\n\"hash\": \"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\",\r\n\"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n\"miner\": \"0x0000000000000000000000000000000000000000\",\r\n\"mixHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n\"nonce\": \"0x0000000000000042\",\r\n\"number\": \"0x0\",\r\n\"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n\"receiptsRoot\": \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\r\n\"sha3Uncles\": \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\r\n\"size\": \"0x21c\",\r\n\"stateRoot\": \"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544\",\r\n\"timestamp\": \"0x0\",\r\n\"totalDifficulty\": \"0x400000000\",\r\n\"transactions\":[],\r\n\"transactionsRoot\": \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\r\n\"uncles\":[]\r\n}\r\n}\r\n```\r\n\r\nIf we now check the same block (the first block) in etherscan, we see it has in-fact 8893 transactions:\r\n\r\n`https://etherscan.io/block/0`\r\n\r\n```\r\nBlock Information\r\n  Height:      0   \r\n  TimeStamp:    1056 days 22 hrs ago (Jul-30-2015 03:26:13 PM +UTC)\r\n  Transactions: 8893 transactions and 0 contract internal transactions in this block\r\n  Hash: 0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\r\n```\r\n\r\nInterestingly, doing the same call with the current block does return transactions:\r\n\r\n`{\"jsonrpc\":\"2.0\",\"method\":\"eth_getBlockByNumber\",\"params\":[\"latest\", false],\"id\":1}`\r\n\r\n```\r\n{\r\n\"jsonrpc\": \"2.0\",\r\n\"id\": 1,\r\n\"result\":{\r\n\"difficulty\": \"0xc3b8bd1641b11\",\r\n\"extraData\": \"0x6e616e6f706f6f6c2e6f7267\",\r\n\"gasLimit\": \"0x7a121d\",\r\n\"gasUsed\": \"0x791292\",\r\n\"hash\": \"0xdceea8bb6ecced92866076153ebf53f8b2625b9e8c1b1a6994e6165169d8ec1e\",\r\n\"logsBloom\": \"0x0800000000000800006002004800008400000203084000280040081000404088000001020000000020400116002010001200040040e0000a410000000220000080004028008c0030000008880000000000230000000008000401000200008000303021040000804000111008100101000820000040080000004200100008400210000100240000002004080000c4400044100402004000000a2003000008000042002200024000400000201002000181000000400002c0000000020601000050004240820004022000104408400000024290000c400200600408000000000000021100010310000008000050100080000401003200a220001000100000080088\",\r\n\"miner\": \"0x52bc44d5378309ee2abf1539bf71de1b7d7be3b5\",\r\n\"mixHash\": \"0xf18cc70010ddd154e89060a1997e84f4a0d89069be97456ad963233adfc7bec7\",\r\n\"nonce\": \"0xe4ba8320389ed383\",\r\n\"number\": \"0x58f6fd\",\r\n\"parentHash\": \"0xf9cd64b0c1ba499e9b8741fc6ee42be32941bc6d76e1b15e3bd47b9e9bbcdfc9\",\r\n\"receiptsRoot\": \"0xb9027fd275bab446e91091f421cc9ca9d4f32f387d019bd794dcffd9e6adc6c9\",\r\n\"sha3Uncles\": \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\r\n\"size\": \"0x2ae5\",\r\n\"stateRoot\": \"0x145b135a17c331ff3eb6ae624bacabb3a7ec49a4b4e78a0eae62de6993a3ba2e\",\r\n\"timestamp\": \"0x5b2c0cd4\",\r\n\"totalDifficulty\": \"0x109a9022c4938060528\",\r\n\"transactions\":[\"0x5082274412e359dfbc1d268cb243c22f2849be7e28daf8124c7fbe54bcfbe6c6\", \"0x077a927e8a264e97ec47669aeee31e85ded07f1239523c6715002706ecbf5300\", \"0x4a2f687959f692da528df926b9674a8142bbfd13b60d87cdc92645e6e02a0241\",â€¦],\r\n\"transactionsRoot\": \"0xad8393cc38db74627688f78c26c36b7b123f3676fea5e85e630484a26180b206\",\r\n\"uncles\":[]\r\n}\r\n}\r\n```\r\n\r\nIs there an issue with --syncmode fast which means the transactions are not available? If so, its not going to be usable.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1. Install geth\r\n1. start with --syncmode fast\r\n1. When fully synced, hit the local RPC with the eth_getBlockByNumber call for any low block number.\r\n1. Observer no transactions in the transactions array in the response.\r\n\r\n#### Backtrace\r\n\r\n````\r\nSorry, no idea how to use backtrace.  Looks like a paid for 3rd party library?\r\n````\r\n",
  "closed_by": {
    "login": "nutmix",
    "id": 5080942,
    "node_id": "MDQ6VXNlcjUwODA5NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5080942?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nutmix",
    "html_url": "https://github.com/nutmix",
    "followers_url": "https://api.github.com/users/nutmix/followers",
    "following_url": "https://api.github.com/users/nutmix/following{/other_user}",
    "gists_url": "https://api.github.com/users/nutmix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nutmix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nutmix/subscriptions",
    "organizations_url": "https://api.github.com/users/nutmix/orgs",
    "repos_url": "https://api.github.com/users/nutmix/repos",
    "events_url": "https://api.github.com/users/nutmix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nutmix/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399242662",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17051#issuecomment-399242662",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051",
    "id": 399242662,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTI0MjY2Mg==",
    "user": {
      "login": "chapsuk",
      "id": 5525114,
      "node_id": "MDQ6VXNlcjU1MjUxMTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5525114?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chapsuk",
      "html_url": "https://github.com/chapsuk",
      "followers_url": "https://api.github.com/users/chapsuk/followers",
      "following_url": "https://api.github.com/users/chapsuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/chapsuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chapsuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chapsuk/subscriptions",
      "organizations_url": "https://api.github.com/users/chapsuk/orgs",
      "repos_url": "https://api.github.com/users/chapsuk/repos",
      "events_url": "https://api.github.com/users/chapsuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chapsuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-21T21:02:55Z",
    "updated_at": "2018-06-21T21:03:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "see https://github.com/ethereum/go-ethereum/issues/17049#issuecomment-399131381 about 0 (genesis) block\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399242662/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399261260",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17051#issuecomment-399261260",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17051",
    "id": 399261260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTI2MTI2MA==",
    "user": {
      "login": "nutmix",
      "id": 5080942,
      "node_id": "MDQ6VXNlcjUwODA5NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5080942?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nutmix",
      "html_url": "https://github.com/nutmix",
      "followers_url": "https://api.github.com/users/nutmix/followers",
      "following_url": "https://api.github.com/users/nutmix/following{/other_user}",
      "gists_url": "https://api.github.com/users/nutmix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nutmix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nutmix/subscriptions",
      "organizations_url": "https://api.github.com/users/nutmix/orgs",
      "repos_url": "https://api.github.com/users/nutmix/repos",
      "events_url": "https://api.github.com/users/nutmix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nutmix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-21T22:19:17Z",
    "updated_at": "2018-06-21T22:19:17Z",
    "author_association": "NONE",
    "body": "OK, got it.  Many of the blocks from zero to 5000 have few or no transactions.  Etherscan is lying about transactions for block 0...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/399261260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19299",
  "id": 422684055,
  "node_id": "MDU6SXNzdWU0MjI2ODQwNTU=",
  "number": 19299,
  "title": "geth crash: in `consensus/clique.(*Clique).snapshot`  panic: runtime error: makeslice: len out of range  ",
  "user": {
    "login": "sheb-gregor",
    "id": 11243996,
    "node_id": "MDQ6VXNlcjExMjQzOTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11243996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sheb-gregor",
    "html_url": "https://github.com/sheb-gregor",
    "followers_url": "https://api.github.com/users/sheb-gregor/followers",
    "following_url": "https://api.github.com/users/sheb-gregor/following{/other_user}",
    "gists_url": "https://api.github.com/users/sheb-gregor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sheb-gregor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sheb-gregor/subscriptions",
    "organizations_url": "https://api.github.com/users/sheb-gregor/orgs",
    "repos_url": "https://api.github.com/users/sheb-gregor/repos",
    "events_url": "https://api.github.com/users/sheb-gregor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sheb-gregor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-03-19T11:37:34Z",
  "updated_at": "2019-09-04T12:44:22Z",
  "closed_at": "2019-03-19T12:22:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nunable to start private chain :(\r\n\r\n#### System information\r\n\r\nVersion: 1.8.18-stable\r\nGit Commit: 58632d44021bf095b43a1bb2443e6e3690a94739\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.10.4\r\nOperating System: linux\r\nGOPATH=/home/sheb/go\r\nGOROOT=/usr/lib/go-1.10\r\n\r\n#### Expected behaviour\r\n\r\nNode should start\r\n\r\n#### Actual behaviour\r\n\r\nNode crash with panic\r\n\r\n#### Steps to reproduce the behaviour\r\n- get actual version of `geth`\r\n- ` ./bin/geth init --datadir ./data/geth.alpha ./geth.json`\r\n- ` ./bin/geth --config ./geth.toml --rpc`\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n> $ ./bin/geth --config ./geth.toml --rpc\r\nWARN [03-19|10:35:01.060] Sanitizing cache to Go's GC limits       provided=1024 updated=648\r\nINFO [03-19|10:35:01.062] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [03-19|10:35:01.064] Starting peer-to-peer node               instance=Geth/v1.9.0-unstable-fb458280/linux-amd64/go1.12.1\r\nINFO [03-19|10:35:01.064] Allocated trie memory caches             clean=162.00MiB dirty=162.00MiB\r\nINFO [03-19|10:35:01.064] Allocated cache and file handles         database=/home/sheb/geth/data/geth.alpha/geth/chaindata cache=324.00MiB handles=524288\r\nINFO [03-19|10:35:01.091] Initialised chain configuration          config=\"{ChainID: 1337 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: 0 EIP155: 10 EIP158: 10 Byzantium: 15 Constantinople: 15  ConstantinopleFix: <nil> Engine: clique}\"\r\nINFO [03-19|10:35:01.092] Initialising Ethereum protocol           versions=\"[63 62]\" network=1337 dbversion=<nil>\r\nWARN [03-19|10:35:01.092] Upgrade blockchain database version      from=<nil> to=4\r\nINFO [03-19|10:35:01.104] Loaded most recent local header          number=0 hash=a5ef7d…60d4b4 td=65536 age=49y11mo4d\r\nINFO [03-19|10:35:01.104] Loaded most recent local full block      number=0 hash=a5ef7d…60d4b4 td=65536 age=49y11mo4d\r\nINFO [03-19|10:35:01.104] Loaded most recent local fast block      number=0 hash=a5ef7d…60d4b4 td=65536 age=49y11mo4d\r\nINFO [03-19|10:35:01.105] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [03-19|10:35:01.117] IPC endpoint opened                      url=/home/sheb/geth/data/geth.alpha.ipc\r\nINFO [03-19|10:35:01.118] HTTP endpoint opened                     url=http://0.0.0.0:8555                 cors= vhosts=geth.teamo.work,localhost\r\nINFO [03-19|10:35:01.119] WebSocket endpoint opened                url=ws://[::]:8546\r\npanic: runtime error: makeslice: len out of range\r\n\r\ngoroutine 43 [running]:\r\ngithub.com/ethereum/go-ethereum/consensus/clique.(*Clique).snapshot(0xc000488540, 0x12e2ea0, 0xc013d72000, 0x0, 0xeedcd788c37defa5, 0x353a9edb05ea1e, 0x19f30754d09fdcc2, 0xb4d46070fa8dab1e, 0x0, 0x0, ...)\r\n        /home/sheb/go/src/github.com/ethereum/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/consensus/clique/clique.go:374 +0x53d\r\ngithub.com/ethereum/go-ethereum/consensus/clique.(*Clique).Prepare(0xc000488540, 0x12e2ea0, 0xc013d72000, 0xc0002ba480, 0xb4d46070fa8dab1e, 0x0)\r\n        /home/sheb/go/src/github.com/ethereum/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/consensus/clique/clique.go:494 +0xf1\r\ngithub.com/ethereum/go-ethereum/miner.(*worker).commitNewWork(0xc0002d5a40, 0xc000170000, 0x0, 0x5c90b7c5)\r\n        /home/sheb/go/src/github.com/ethereum/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/miner/worker.go:852 +0x569\r\ngithub.com/ethereum/go-ethereum/miner.(*worker).mainLoop(0xc0002d5a40)\r\n        /home/sheb/go/src/github.com/ethereum/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/miner/worker.go:410 +0xbe0\r\ncreated by github.com/ethereum/go-ethereum/miner.newWorker\r\n        /home/sheb/go/src/github.com/ethereum/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/miner/worker.go:218 +0x522\r\n````\r\n\r\n## geth.json\r\n\r\n```json\r\n{\r\n  \"config\": {\r\n    \"chainId\": 1337,\r\n    \"homesteadBlock\": 0,\r\n    \"eip150Block\": 0,\r\n    \"eip155Block\": 10,\r\n    \"eip158Block\": 10,\r\n    \"eip160Block\": 10,\r\n    \"byzantiumBlock\": 15,\r\n    \"constantinopleBlock\": 15,\r\n    \"clique\": {\r\n      \"period\": 5,\r\n      \"epoch\": 30000\r\n    }\r\n  },\r\n  \"nonce\": \"0x0000000000000042\",\r\n  \"alloc\": {\r\n    \"0x0000000000000000000000000000000000000001\": {\r\n      \"balance\": \"1\"\r\n    },\r\n    \"0x0000000000000000000000000000000000000002\": {\r\n      \"balance\": \"1\"\r\n    },\r\n    \"0x0000000000000000000000000000000000000003\": {\r\n      \"balance\": \"1\"\r\n    },\r\n    \"0x0000000000000000000000000000000000000004\": {\r\n      \"balance\": \"1\"\r\n    }\r\n  },\r\n  \"timestamp\": \"0x00\",\r\n  \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"extraData\": \"0x3535353535353535353535353535353535353535353535353535353535353535\",\r\n  \"gasLimit\": \"0x1000000\",\r\n  \"difficulty\": \"0x10000\",\r\n  \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"coinbase\": \"0x1acbaf36647743324f90d543c0058bb7ee31b407\"\r\n}\r\n```\r\n\r\n## geth.toml\r\n```toml\r\n[Eth]\r\nNetworkId = 1337\r\nSyncMode = \"fast\"\r\nLightPeers = 20\r\nDatabaseCache = 128\r\nEnablePreimageRecording = false\r\n\r\n\r\n[Eth.TxPool]\r\nNoLocals = false\r\nJournal = \"transactions.rlp\"\r\nRejournal = 3600000000000\r\nPriceLimit = 1\r\nPriceBump = 10\r\nAccountSlots = 16\r\nGlobalSlots = 4096\r\nAccountQueue = 64\r\nGlobalQueue = 1024\r\nLifetime = 10800000000000\r\n\r\n[Eth.GPO]\r\nBlocks = 10\r\nPercentile = 50\r\n\r\n[Shh]\r\nMaxMessageSize = 1048576\r\n#MinimumAcceptedPOW = \"2.0\"\r\n\r\n[Node]\r\nDataDir = \"/home/sheb/geth/data/geth.alpha\"\r\nKeyStoreDir = \"/home/sheb/geth/keys/geth.alpha\"\r\nIPCPath = \"/home/sheb/geth/data/geth.alpha.ipc\"\r\nHTTPHost = \"0.0.0.0\"\r\nHTTPPort = 8555\r\nHTTPVirtualHosts = [\"localhost\"]\r\nHTTPModules = [\"net\", \"web3\", \"eth\", \"shh\", \"personal\"]\r\nWSPort = 8546\r\nWSHost = \"0.0.0.0\"\r\nWSOrigins = [ \"localhost\", \"*\"]\r\nWSModules = [\"net\", \"web3\", \"eth\", \"shh\"]\r\n\r\n[Node.P2P]\r\nMaxPeers = 25\r\nNoDiscovery = true\r\nDiscoveryV5 = false\r\n#DiscoveryV5Addr = \":30304\"\r\n# BootstrapNodes = []\r\n# BootstrapNodesV5 = []\r\nStaticNodes = []\r\nTrustedNodes = []\r\nListenAddr = \"127.0.0.1:30303\"\r\nEnableMsgEvents = false\r\n```\r\n\r\n",
  "closed_by": {
    "login": "sheb-gregor",
    "id": 11243996,
    "node_id": "MDQ6VXNlcjExMjQzOTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11243996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sheb-gregor",
    "html_url": "https://github.com/sheb-gregor",
    "followers_url": "https://api.github.com/users/sheb-gregor/followers",
    "following_url": "https://api.github.com/users/sheb-gregor/following{/other_user}",
    "gists_url": "https://api.github.com/users/sheb-gregor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sheb-gregor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sheb-gregor/subscriptions",
    "organizations_url": "https://api.github.com/users/sheb-gregor/orgs",
    "repos_url": "https://api.github.com/users/sheb-gregor/repos",
    "events_url": "https://api.github.com/users/sheb-gregor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sheb-gregor/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474339098",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19299#issuecomment-474339098",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299",
    "id": 474339098,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDMzOTA5OA==",
    "user": {
      "login": "sheb-gregor",
      "id": 11243996,
      "node_id": "MDQ6VXNlcjExMjQzOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11243996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sheb-gregor",
      "html_url": "https://github.com/sheb-gregor",
      "followers_url": "https://api.github.com/users/sheb-gregor/followers",
      "following_url": "https://api.github.com/users/sheb-gregor/following{/other_user}",
      "gists_url": "https://api.github.com/users/sheb-gregor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sheb-gregor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sheb-gregor/subscriptions",
      "organizations_url": "https://api.github.com/users/sheb-gregor/orgs",
      "repos_url": "https://api.github.com/users/sheb-gregor/repos",
      "events_url": "https://api.github.com/users/sheb-gregor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sheb-gregor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-19T12:20:57Z",
    "updated_at": "2019-03-19T12:20:57Z",
    "author_association": "NONE",
    "body": "# FIX\r\n\r\nIn `geth.json` set:\r\n\r\n```\r\n  \"extraData\":\"\",\r\n```\r\n\r\nAnd now node started :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474339098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474339511",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19299#issuecomment-474339511",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299",
    "id": 474339511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDMzOTUxMQ==",
    "user": {
      "login": "sheb-gregor",
      "id": 11243996,
      "node_id": "MDQ6VXNlcjExMjQzOTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11243996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sheb-gregor",
      "html_url": "https://github.com/sheb-gregor",
      "followers_url": "https://api.github.com/users/sheb-gregor/followers",
      "following_url": "https://api.github.com/users/sheb-gregor/following{/other_user}",
      "gists_url": "https://api.github.com/users/sheb-gregor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sheb-gregor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sheb-gregor/subscriptions",
      "organizations_url": "https://api.github.com/users/sheb-gregor/orgs",
      "repos_url": "https://api.github.com/users/sheb-gregor/repos",
      "events_url": "https://api.github.com/users/sheb-gregor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sheb-gregor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-19T12:22:19Z",
    "updated_at": "2019-03-19T12:22:19Z",
    "author_association": "NONE",
    "body": "Can be closed",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474339511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/527883907",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19299#issuecomment-527883907",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19299",
    "id": 527883907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNzg4MzkwNw==",
    "user": {
      "login": "alonana",
      "id": 8308698,
      "node_id": "MDQ6VXNlcjgzMDg2OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8308698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alonana",
      "html_url": "https://github.com/alonana",
      "followers_url": "https://api.github.com/users/alonana/followers",
      "following_url": "https://api.github.com/users/alonana/following{/other_user}",
      "gists_url": "https://api.github.com/users/alonana/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alonana/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alonana/subscriptions",
      "organizations_url": "https://api.github.com/users/alonana/orgs",
      "repos_url": "https://api.github.com/users/alonana/repos",
      "events_url": "https://api.github.com/users/alonana/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alonana/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-04T12:44:22Z",
    "updated_at": "2019-09-04T12:44:22Z",
    "author_association": "NONE",
    "body": "Actually the solution is not accurate.\r\nThe extra data should include the signers addresses, as well as padding for extraVanity and extraSeal\r\nSee example at https://ethereum.stackexchange.com/questions/51091/clique-genesis-file",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/527883907/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20760",
  "id": 580263987,
  "node_id": "MDU6SXNzdWU1ODAyNjM5ODc=",
  "number": 20760,
  "title": "ABI incompatibility between geth/web3 and Solidity 0.6.x because of missing payable attribute",
  "user": {
    "login": "gsalzer",
    "id": 13353518,
    "node_id": "MDQ6VXNlcjEzMzUzNTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/13353518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gsalzer",
    "html_url": "https://github.com/gsalzer",
    "followers_url": "https://api.github.com/users/gsalzer/followers",
    "following_url": "https://api.github.com/users/gsalzer/following{/other_user}",
    "gists_url": "https://api.github.com/users/gsalzer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gsalzer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gsalzer/subscriptions",
    "organizations_url": "https://api.github.com/users/gsalzer/orgs",
    "repos_url": "https://api.github.com/users/gsalzer/repos",
    "events_url": "https://api.github.com/users/gsalzer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gsalzer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1153621723,
      "node_id": "MDU6TGFiZWwxMTUzNjIxNzIz",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:on-hold",
      "name": "status:on-hold",
      "color": "d89165",
      "default": false,
      "description": ""
    },
    {
      "id": 1912320685,
      "node_id": "MDU6TGFiZWwxOTEyMzIwNjg1",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:console",
      "name": "area:console",
      "color": "5edb9c",
      "default": false,
      "description": ""
    },
    {
      "id": 2535524324,
      "node_id": "MDU6TGFiZWwyNTM1NTI0MzI0",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:web3js",
      "name": "area:web3js",
      "color": "fce588",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-03-12T22:42:08Z",
  "updated_at": "2022-09-11T07:20:47Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `v1.9.12-unstable-556888c4-20200302/linux-386/go1.13.8`\r\n\r\n#### Expected behaviour\r\nCompiling the contract\r\n```\r\ncontract Test {\r\n    constructor() public payable {}\r\n}\r\n```\r\nwith `solc 0.6.4` and deploying it with some Ether value (using the ABI provided by Solidity) should succeed.\r\n\r\n\r\n#### Actual behaviour\r\n```\r\nvar testContract = web3.eth.contract([{\"inputs\":[],\"stateMutability\":\"payable\",\"type\":\"constructor\"}]);\r\nvar test = testContract.new(\r\n   {\r\n     from: web3.eth.accounts[0], \r\n     data: '0x6080604052603f8060116000396000f3fe6080604052600080fdfea2646970667358221220a17c728a0be18787dab464f57cd462a5ff641e6e6b01a7d966c4fb2f5c6f53e864736f6c63430006040033', \r\n     gas: '4700000',\r\n     value: 1\r\n   }, function (e, contract){\r\n    console.log(e, contract);\r\n    if (typeof contract.address !== 'undefined') {\r\n         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);\r\n    }\r\n })\r\n```\r\nresults in\r\n```\r\nError: Cannot send value to non-payable constructor\r\n\tat web3.js:2997:23(102)\r\n\tat <eval>:1:28(19)\r\n```\r\n\r\n#### Analysis\r\n\r\nAfter adding `payable: true` to the ABI in the assignment to variable `testContract`, the deployment works. Solidity versions prior to 0.6.0 had this attribute, and `geth/web3` seems to depend on it to check for payability.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/601076237",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-601076237",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 601076237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMTA3NjIzNw==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-19T09:26:38Z",
    "updated_at": "2020-03-19T09:26:38Z",
    "author_association": "MEMBER",
    "body": "This feature would require an upgrade of web3.js. Works has started in this direction with the replace of otto with goja, but promises are required. The future of web3 is currently in flux, and we are considering a switch to ethers.js. We're putting this issue on hold until progress has been made in this multi-week project.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/601076237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646955862",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-646955862",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 646955862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0Njk1NTg2Mg==",
    "user": {
      "login": "garyng2000",
      "id": 241666,
      "node_id": "MDQ6VXNlcjI0MTY2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/241666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyng2000",
      "html_url": "https://github.com/garyng2000",
      "followers_url": "https://api.github.com/users/garyng2000/followers",
      "following_url": "https://api.github.com/users/garyng2000/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyng2000/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyng2000/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyng2000/subscriptions",
      "organizations_url": "https://api.github.com/users/garyng2000/orgs",
      "repos_url": "https://api.github.com/users/garyng2000/repos",
      "events_url": "https://api.github.com/users/garyng2000/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyng2000/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-20T07:11:42Z",
    "updated_at": "2020-06-20T07:11:42Z",
    "author_association": "NONE",
    "body": "I simply don't understand this 'removal' for the solc output(serve no purpose, it is not a bug). It breaks many 'old' libraries. I am using Nethereum 2.0(upgrade is always complicated in large projects) and have to re-massage the abi json back to produce the 'constant' and 'payable' keyword.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646955862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/647129509",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-647129509",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 647129509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzEyOTUwOQ==",
    "user": {
      "login": "gsalzer",
      "id": 13353518,
      "node_id": "MDQ6VXNlcjEzMzUzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/13353518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsalzer",
      "html_url": "https://github.com/gsalzer",
      "followers_url": "https://api.github.com/users/gsalzer/followers",
      "following_url": "https://api.github.com/users/gsalzer/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsalzer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsalzer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsalzer/subscriptions",
      "organizations_url": "https://api.github.com/users/gsalzer/orgs",
      "repos_url": "https://api.github.com/users/gsalzer/repos",
      "events_url": "https://api.github.com/users/gsalzer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsalzer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T13:36:28Z",
    "updated_at": "2020-06-21T13:36:28Z",
    "author_association": "NONE",
    "body": "Apparently the compiler is still considered experimental, otherwise backwards compatibility would be of more concern.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/647129509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/647146597",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-647146597",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 647146597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzE0NjU5Nw==",
    "user": {
      "login": "garyng2000",
      "id": 241666,
      "node_id": "MDQ6VXNlcjI0MTY2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/241666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyng2000",
      "html_url": "https://github.com/garyng2000",
      "followers_url": "https://api.github.com/users/garyng2000/followers",
      "following_url": "https://api.github.com/users/garyng2000/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyng2000/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyng2000/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyng2000/subscriptions",
      "organizations_url": "https://api.github.com/users/garyng2000/orgs",
      "repos_url": "https://api.github.com/users/garyng2000/repos",
      "events_url": "https://api.github.com/users/garyng2000/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyng2000/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-21T16:00:37Z",
    "updated_at": "2020-06-21T16:00:37Z",
    "author_association": "NONE",
    "body": "may be Microsoft should put that word behind their windows ;-)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/647146597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/648654049",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-648654049",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 648654049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0ODY1NDA0OQ==",
    "user": {
      "login": "gsalzer",
      "id": 13353518,
      "node_id": "MDQ6VXNlcjEzMzUzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/13353518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsalzer",
      "html_url": "https://github.com/gsalzer",
      "followers_url": "https://api.github.com/users/gsalzer/followers",
      "following_url": "https://api.github.com/users/gsalzer/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsalzer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsalzer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsalzer/subscriptions",
      "organizations_url": "https://api.github.com/users/gsalzer/orgs",
      "repos_url": "https://api.github.com/users/gsalzer/repos",
      "events_url": "https://api.github.com/users/gsalzer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsalzer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-24T07:43:49Z",
    "updated_at": "2020-06-24T07:43:49Z",
    "author_association": "NONE",
    "body": "@garyng2000 Maybe you want to add your complaint about the removal of the keywords to the [solc thread](https://github.com/ethereum/solidity/issues/8690).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/648654049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1242796226",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-1242796226",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 1242796226,
    "node_id": "IC_kwDOAOvK985KE5DC",
    "user": {
      "login": "cobordism",
      "id": 12838530,
      "node_id": "MDQ6VXNlcjEyODM4NTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/12838530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cobordism",
      "html_url": "https://github.com/cobordism",
      "followers_url": "https://api.github.com/users/cobordism/followers",
      "following_url": "https://api.github.com/users/cobordism/following{/other_user}",
      "gists_url": "https://api.github.com/users/cobordism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cobordism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cobordism/subscriptions",
      "organizations_url": "https://api.github.com/users/cobordism/orgs",
      "repos_url": "https://api.github.com/users/cobordism/repos",
      "events_url": "https://api.github.com/users/cobordism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cobordism/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-10T19:54:51Z",
    "updated_at": "2022-09-10T19:54:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> After adding `payable: true` to the ABI in the assignment to variable `testContract`, the deployment works. Solidity versions prior to 0.6.0 had this attribute, and `geth/web3` seems to depend on it to check for payability.\r\n\r\nthanks for posting the workaround. I had just been stuck on this issue for hours until I finally found your post. Seemingly the issue still exists 2 years later...\r\n\r\nIs the geth console no longer the \"correct\" interface to use?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1242796226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1242904923",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20760#issuecomment-1242904923",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20760",
    "id": 1242904923,
    "node_id": "IC_kwDOAOvK985KFTlb",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-11T07:20:47Z",
    "updated_at": "2022-09-11T07:20:47Z",
    "author_association": "MEMBER",
    "body": "Yeah the console is very outdated. The issue is, that we can't update to a newer version since the newer web3js uses promises",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1242904923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19292",
  "id": 422318036,
  "node_id": "MDU6SXNzdWU0MjIzMTgwMzY=",
  "number": 19292,
  "title": "Abigen with -pkg option cannot parse contract JSON from stdin",
  "user": {
    "login": "vsbogd",
    "id": 983480,
    "node_id": "MDQ6VXNlcjk4MzQ4MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/983480?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vsbogd",
    "html_url": "https://github.com/vsbogd",
    "followers_url": "https://api.github.com/users/vsbogd/followers",
    "following_url": "https://api.github.com/users/vsbogd/following{/other_user}",
    "gists_url": "https://api.github.com/users/vsbogd/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vsbogd/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vsbogd/subscriptions",
    "organizations_url": "https://api.github.com/users/vsbogd/orgs",
    "repos_url": "https://api.github.com/users/vsbogd/repos",
    "events_url": "https://api.github.com/users/vsbogd/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vsbogd/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-03-18T16:34:35Z",
  "updated_at": "2019-09-19T13:00:28Z",
  "closed_at": "2019-06-18T08:17:37Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "After PR https://github.com/ethereum/go-ethereum/pull/17648 it is not possible to use ```--pkg``` flag with JSON contract artifacts. \r\n\r\nPreviously execution of command \r\n```\r\ncat <contract.json> | abigen --abi -  --pkg <packagename> --out <output.go>\r\n```\r\nlead to execution of the ```contractsFromStdin()``` at https://github.com/ethereum/go-ethereum/blob/7e7781ffaa5c5486c5e7b66dea4986e063524f63/cmd/abigen/main.go#L94\r\n\r\nAnd after the PR ```pkgFlag == \"\"``` condition prevents falling into this branch:\r\nhttps://github.com/ethereum/go-ethereum/blob/7e7781ffaa5c5486c5e7b66dea4986e063524f63/cmd/abigen/main.go#L78\r\nAnd fails with the parse error.\r\n\r\nSee https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-443110907 and https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-464965285 for discussion\r\n\r\n#### System information\r\n\r\nGo-ethereum version: 1.8.23\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\nGolang stub for the contract is generated.\r\n\r\n#### Actual behaviour\r\n\r\nError printed:\r\nFailed to generate ABI binding: json: cannot unmarshal object into Go value of type []struct { Type string; Name string; Constant bool; Anonymous bool; Inputs []abi.Argument; Outputs []abi.Argument }\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\necho '{\"contracts\":{\"test.sol:Test\":{\"abi\":\"[]\",\"bin\":\"6080604052348015600f57600080fd5b50603580601d6000396000f3fe6080604052600080fdfea165627a7a723058204607ea1e116ed157fa353615ead6dab3b941f6c06adf7c0e724273ad8ca0a9c80029\",\"devdoc\":\"{\\\"methods\\\":{}}\",\"userdoc\":\"{\\\"methods\\\":{}}\"}},\"version\":\"0.5.3+commit.10d17f24.Linux.g++\"}' | abigen --abi - --pkg test\r\n```",
  "closed_by": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/473994244",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-473994244",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 473994244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mzk5NDI0NA==",
    "user": {
      "login": "vsbogd",
      "id": 983480,
      "node_id": "MDQ6VXNlcjk4MzQ4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983480?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsbogd",
      "html_url": "https://github.com/vsbogd",
      "followers_url": "https://api.github.com/users/vsbogd/followers",
      "following_url": "https://api.github.com/users/vsbogd/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsbogd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsbogd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsbogd/subscriptions",
      "organizations_url": "https://api.github.com/users/vsbogd/orgs",
      "repos_url": "https://api.github.com/users/vsbogd/repos",
      "events_url": "https://api.github.com/users/vsbogd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsbogd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-18T16:34:50Z",
    "updated_at": "2019-03-18T16:34:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Raised PR https://github.com/ethereum/go-ethereum/pull/19207 with fix",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/473994244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/502999111",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-502999111",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 502999111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjk5OTExMQ==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-18T08:17:37Z",
    "updated_at": "2019-06-18T08:17:37Z",
    "author_association": "MEMBER",
    "body": "#19207 has been merged, closing this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/502999111/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/532541551",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-532541551",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 532541551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjU0MTU1MQ==",
    "user": {
      "login": "hkalodner",
      "id": 412311,
      "node_id": "MDQ6VXNlcjQxMjMxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/412311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hkalodner",
      "html_url": "https://github.com/hkalodner",
      "followers_url": "https://api.github.com/users/hkalodner/followers",
      "following_url": "https://api.github.com/users/hkalodner/following{/other_user}",
      "gists_url": "https://api.github.com/users/hkalodner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hkalodner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hkalodner/subscriptions",
      "organizations_url": "https://api.github.com/users/hkalodner/orgs",
      "repos_url": "https://api.github.com/users/hkalodner/repos",
      "events_url": "https://api.github.com/users/hkalodner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hkalodner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-18T06:34:39Z",
    "updated_at": "2019-09-18T06:34:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've run into this same issue myself and it appears that the reproduction example that @vsbogd provided still fails as of 1.9.4. I tested from the official docker image (`ethereum/client-go:alltools-stable`) to ensure that it wasn't a weird system config issue.\r\n\r\n@gbalint, I'm happy to open a new issue, but I thought I'd try bumping this one since it seems like the exact same problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/532541551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533050429",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-533050429",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 533050429,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzA1MDQyOQ==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T09:34:11Z",
    "updated_at": "2019-09-19T09:34:11Z",
    "author_association": "MEMBER",
    "body": "@hkalodner 1.9.4 has been released 11 minutes ago, so the version you were using yesterday is definitely not 1.9.4. Could you please try again with `ethereum/client-go:latest` ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533050429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533051274",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-533051274",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 533051274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzA1MTI3NA==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T09:36:30Z",
    "updated_at": "2019-09-19T09:36:30Z",
    "author_association": "MEMBER",
    "body": "Oh and if you open an issue, please join your contract.json as well. Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533051274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533119659",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19292#issuecomment-533119659",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19292",
    "id": 533119659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzExOTY1OQ==",
    "user": {
      "login": "hkalodner",
      "id": 412311,
      "node_id": "MDQ6VXNlcjQxMjMxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/412311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hkalodner",
      "html_url": "https://github.com/hkalodner",
      "followers_url": "https://api.github.com/users/hkalodner/followers",
      "following_url": "https://api.github.com/users/hkalodner/following{/other_user}",
      "gists_url": "https://api.github.com/users/hkalodner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hkalodner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hkalodner/subscriptions",
      "organizations_url": "https://api.github.com/users/hkalodner/orgs",
      "repos_url": "https://api.github.com/users/hkalodner/repos",
      "events_url": "https://api.github.com/users/hkalodner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hkalodner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T13:00:28Z",
    "updated_at": "2019-09-19T13:00:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Whoops my bad on the version. I must have transcribed it wrong. I just retried with `ethereum/client-go:latest` with abigen version `abigen version 1.9.5-unstable-24ef8351-20190919` and I still hit `Fatal: Failed to generate ABI binding: json: cannot unmarshal object into Go value of type []struct { Type string; Name string; Constant bool; Anonymous bool; Inputs []abi.Argument; Outputs []abi.Argument }`.\r\n\r\nFor the contract I just used the reproduction step in the original issue piping directly from an echo\r\n`echo '{\"contracts\":{\"test.sol:Test\":{\"abi\":\"[]\",\"bin\":\"6080604052348015600f57600080fd5b50603580601d6000396000f3fe6080604052600080fdfea165627a7a723058204607ea1e116ed157fa353615ead6dab3b941f6c06adf7c0e724273ad8ca0a9c80029\",\"devdoc\":\"{\\\"methods\\\":{}}\",\"userdoc\":\"{\\\"methods\\\":{}}\"}},\"version\":\"0.5.3+commit.10d17f24.Linux.g++\"}' | abigen --abi - --pkg test`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/533119659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

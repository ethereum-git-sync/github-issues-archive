{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19457",
  "id": 432618640,
  "node_id": "MDU6SXNzdWU0MzI2MTg2NDA=",
  "number": 19457,
  "title": "Node stops receiving transaction receipts",
  "user": {
    "login": "jmcnevin",
    "id": 12859,
    "node_id": "MDQ6VXNlcjEyODU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/12859?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmcnevin",
    "html_url": "https://github.com/jmcnevin",
    "followers_url": "https://api.github.com/users/jmcnevin/followers",
    "following_url": "https://api.github.com/users/jmcnevin/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmcnevin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmcnevin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmcnevin/subscriptions",
    "organizations_url": "https://api.github.com/users/jmcnevin/orgs",
    "repos_url": "https://api.github.com/users/jmcnevin/repos",
    "events_url": "https://api.github.com/users/jmcnevin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmcnevin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    },
    {
      "id": 1380079158,
      "node_id": "MDU6TGFiZWwxMzgwMDc5MTU4",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:private-network",
      "name": "area:private-network",
      "color": "d870ff",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-04-12T15:18:55Z",
  "updated_at": "2020-08-27T09:10:42Z",
  "closed_at": "2020-05-28T08:43:51Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.8.26\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\nUnder load, I should be able to submit transactions, and listen for mining receipts for those transactions.\r\n\r\n#### Actual behaviour\r\n\r\nUnder Clique and Ethash, when stress-testing a private network, after some time the submitting node will stop receiving transaction receipts.\r\n\r\nThese queries were run when the network was around block 1400...\r\n\r\nFrom submitting node:\r\n\r\n```\r\n> eth.getTransaction(\"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\")\r\n{\r\n  blockHash: \"0x8adaadd63fba40848d7c462536eb8cd745d3ac8c0b37cb786684e04aa412c77f\",\r\n  blockNumber: 808,\r\n  from: \"0xda9b53ac0609c634ad9e177c58ea73d043c9e940\",\r\n  gas: 2000000,\r\n  gasPrice: 0,\r\n  hash: \"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\",\r\n  input: \"...\",\r\n  nonce: 27508,\r\n  r: \"0xbb6016eaf4aa87c2c3cbb7582dbdb624f2ecfaec429ad49f530b131d702b8c1c\",\r\n  s: \"0x13a3800b725f1272891400bf2072de797979b9be509c5f9ee0e8a98aa2d4bad4\",\r\n  to: \"0x8913ff5d19fa1ed92e4b2c1f6dd529b3a507ed30\",\r\n  transactionIndex: 41,\r\n  v: \"0x1b\",\r\n> eth.getTransactionReceipt(\"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\")\r\nnull\r\n```\r\n\r\nFrom miner:\r\n\r\n```\r\n> eth.getTransactionReceipt(\"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\")\r\n{\r\n  blockHash: \"0x8adaadd63fba40848d7c462536eb8cd745d3ac8c0b37cb786684e04aa412c77f\",\r\n  blockNumber: 808,\r\n  contractAddress: null,\r\n  cumulativeGasUsed: 36878262,\r\n  from: \"0xda9b53ac0609c634ad9e177c58ea73d043c9e940\",\r\n  gasUsed: 781193,\r\n  logs: [{\r\n      address: \"0x8913ff5d19fa1ed92e4b2c1f6dd529b3a507ed30\",\r\n      blockHash: \"0x8adaadd63fba40848d7c462536eb8cd745d3ac8c0b37cb786684e04aa412c77f\",\r\n      blockNumber: 808,\r\n      data: \"0x000000000000000000000000da9b53ac0609c634ad9e177c58ea73d043c9e94000000000000000000000000000000000000000000000000000000000000000ff\",\r\n      logIndex: 82,\r\n      removed: false,\r\n      topics: [\"0xc33ab4baae4e71a04214db86ec97274a63aec7ee7bed2238e377af645378f619\", \"0xb1b8dac55d3111e996c036055c302e7700000000000000000000000000000000\", \"0x0000000000000000000000000000000000000000000000000000000000000000\", \"0x000000000000000000000000f891acbfe3541f6ea44748f7d1f79bd7bb56a1ea\"],\r\n      transactionHash: \"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\",\r\n      transactionIndex: 41\r\n  }, {\r\n      address: \"0xefc927089de2cfb25325c103c1616ca6c7bcd9d4\",\r\n      blockHash: \"0x8adaadd63fba40848d7c462536eb8cd745d3ac8c0b37cb786684e04aa412c77f\",\r\n      blockNumber: 808,\r\n      data: \"0x\",\r\n      logIndex: 83,\r\n      removed: false,\r\n      topics: [\"0x8af6cd5fa63e7039d512fb6943d382b5649b4074a242ac055ce4d022f8d0e691\", \"0x3130353333313230303900000000000000000000000000000000000000000000\", \"0xb1b8dac55d3111e996c036055c302e7700000000000000000000000000000000\", \"0x0000000000000000000000000000000000000000000000000000000000000000\"],\r\n      transactionHash: \"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\",\r\n      transactionIndex: 41\r\n  }],\r\n  logsBloom: \"0x00000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000020000100000000001000000040000000000000000000000000000000000000001000000004000000020000000000000000000800000800000000005000000000000000020000000000000000000000000000000000000000000000000000000002000000040000000004000000000000000000020000000000040000000000000000000000000100600000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000\",\r\n  status: \"0x1\",\r\n  to: \"0x8913ff5d19fa1ed92e4b2c1f6dd529b3a507ed30\",\r\n  transactionHash: \"0x1e82360160fb806d6885fbaef0bc4ce342ea3cb17b554601f315b728e9720eca\",\r\n  transactionIndex: 41\r\n}\r\n```\r\n\r\nFinally, and perhaps most importantly, after restarting the submitting node, the transaction receipt is available.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nThis behavior starts to occur after submitting several thousand transactions through a node, ranging from 800K-1mil gas.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491359799",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19457#issuecomment-491359799",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457",
    "id": 491359799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTM1OTc5OQ==",
    "user": {
      "login": "jmcnevin",
      "id": 12859,
      "node_id": "MDQ6VXNlcjEyODU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmcnevin",
      "html_url": "https://github.com/jmcnevin",
      "followers_url": "https://api.github.com/users/jmcnevin/followers",
      "following_url": "https://api.github.com/users/jmcnevin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmcnevin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmcnevin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmcnevin/subscriptions",
      "organizations_url": "https://api.github.com/users/jmcnevin/orgs",
      "repos_url": "https://api.github.com/users/jmcnevin/repos",
      "events_url": "https://api.github.com/users/jmcnevin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmcnevin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-10T17:02:00Z",
    "updated_at": "2019-05-10T17:02:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "An update to this: the node will eventually receive receipts for transactions, but some receipts are very delayed.  In one case, for a mined block of 58 txns, I received timely receipts for the first 15 txns in the block, but the remaining 43 txn receipts were delayed.  Transaction receipts were not delayed for the subsequent block.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491359799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/509898603",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19457#issuecomment-509898603",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457",
    "id": 509898603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTg5ODYwMw==",
    "user": {
      "login": "yqzzj",
      "id": 19380198,
      "node_id": "MDQ6VXNlcjE5MzgwMTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/19380198?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yqzzj",
      "html_url": "https://github.com/yqzzj",
      "followers_url": "https://api.github.com/users/yqzzj/followers",
      "following_url": "https://api.github.com/users/yqzzj/following{/other_user}",
      "gists_url": "https://api.github.com/users/yqzzj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yqzzj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yqzzj/subscriptions",
      "organizations_url": "https://api.github.com/users/yqzzj/orgs",
      "repos_url": "https://api.github.com/users/yqzzj/repos",
      "events_url": "https://api.github.com/users/yqzzj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yqzzj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-10T04:04:26Z",
    "updated_at": "2019-07-10T04:04:26Z",
    "author_association": "NONE",
    "body": "I encountered the same problem with my version 1.8.27.\r\nIs there any solution?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/509898603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/590079753",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19457#issuecomment-590079753",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457",
    "id": 590079753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDA3OTc1Mw==",
    "user": {
      "login": "oxfn",
      "id": 641896,
      "node_id": "MDQ6VXNlcjY0MTg5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/641896?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oxfn",
      "html_url": "https://github.com/oxfn",
      "followers_url": "https://api.github.com/users/oxfn/followers",
      "following_url": "https://api.github.com/users/oxfn/following{/other_user}",
      "gists_url": "https://api.github.com/users/oxfn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oxfn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oxfn/subscriptions",
      "organizations_url": "https://api.github.com/users/oxfn/orgs",
      "repos_url": "https://api.github.com/users/oxfn/repos",
      "events_url": "https://api.github.com/users/oxfn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oxfn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-23T15:23:39Z",
    "updated_at": "2020-02-23T15:50:52Z",
    "author_association": "NONE",
    "body": "Same issue here in docker.\r\n\r\nethereum/client-go:stable (1.9.11-stable-6a62fe39) **light mode**\r\npython:3.7-alpine, web3 v5.5.1\r\n\r\n`getTransaction` is successful but `getTransactionReceipt` raises `TransactionNotFound`\r\n\r\nHave to mention that before upgrading from 1.8 receipts were OK",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/590079753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/621704064",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19457#issuecomment-621704064",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19457",
    "id": 621704064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTcwNDA2NA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-30T08:53:26Z",
    "updated_at": "2020-04-30T08:53:26Z",
    "author_association": "MEMBER",
    "body": "> An update to this: the node will eventually receive receipts for transactions, but some receipts are very delayed. \r\n\r\nIIUC: when doing a stress-test, the receipts get delayed. If that's the case, it doesn't really sound like an actionable issue, since any system under stress will typically behave that way. \r\n\r\nWe're keeping this open a bit longer -- if you have some scripted way to reproduce this behaviour, we can always play with it and see what can be improved. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/621704064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

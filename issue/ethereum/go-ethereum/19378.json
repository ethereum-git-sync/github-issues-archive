{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19378",
  "id": 428464873,
  "node_id": "MDU6SXNzdWU0Mjg0NjQ4NzM=",
  "number": 19378,
  "title": "Private networks aren't really private",
  "user": {
    "login": "WinstonPrivacy",
    "id": 36650369,
    "node_id": "MDQ6VXNlcjM2NjUwMzY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/36650369?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/WinstonPrivacy",
    "html_url": "https://github.com/WinstonPrivacy",
    "followers_url": "https://api.github.com/users/WinstonPrivacy/followers",
    "following_url": "https://api.github.com/users/WinstonPrivacy/following{/other_user}",
    "gists_url": "https://api.github.com/users/WinstonPrivacy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/WinstonPrivacy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/WinstonPrivacy/subscriptions",
    "organizations_url": "https://api.github.com/users/WinstonPrivacy/orgs",
    "repos_url": "https://api.github.com/users/WinstonPrivacy/repos",
    "events_url": "https://api.github.com/users/WinstonPrivacy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/WinstonPrivacy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-04-02T22:00:16Z",
  "updated_at": "2019-05-03T12:30:13Z",
  "closed_at": "2019-05-03T12:11:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "We are using the go-ethereum p2p library, discv4 and a custom protocol. We have determined that the recommended method for creating a private network doesn't really work.\r\n\r\nSpecifically, the p2p/protocols library permits you to assign a version # to your protocol. Nodes that do not agree on protocol or version will not negotiate an RLPx handshake, which is good.\r\n\r\nHowever, we have traced the code down to the p2p/discover library and found that nodes will still respond to ping, pong and findnode packets from peers which do not agree on RLPx protocol or version. This is bad.\r\n\r\nGiven the above, it seems almost trivial to write an ethereum powered crawler which can determine the existence of all ethereum nodes which are connected to the internet. \r\n\r\nPlease let me know if I am incorrect in this understanding. It would be excellent news to hear that ethereum nodes can be configured to respond only to other nodes on a private network and not to unknown peers (potential attackers).",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479224616",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-479224616",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
    "id": 479224616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTIyNDYxNg==",
    "user": {
      "login": "WinstonPrivacy",
      "id": 36650369,
      "node_id": "MDQ6VXNlcjM2NjUwMzY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36650369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WinstonPrivacy",
      "html_url": "https://github.com/WinstonPrivacy",
      "followers_url": "https://api.github.com/users/WinstonPrivacy/followers",
      "following_url": "https://api.github.com/users/WinstonPrivacy/following{/other_user}",
      "gists_url": "https://api.github.com/users/WinstonPrivacy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WinstonPrivacy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WinstonPrivacy/subscriptions",
      "organizations_url": "https://api.github.com/users/WinstonPrivacy/orgs",
      "repos_url": "https://api.github.com/users/WinstonPrivacy/repos",
      "events_url": "https://api.github.com/users/WinstonPrivacy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WinstonPrivacy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T22:03:23Z",
    "updated_at": "2019-04-02T22:03:23Z",
    "author_association": "NONE",
    "body": "#https://github.com/ethereum/go-ethereum/issues/15358",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479224616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479632010",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-479632010",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
    "id": 479632010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTYzMjAxMA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T19:45:12Z",
    "updated_at": "2019-04-03T19:45:12Z",
    "author_association": "MEMBER",
    "body": "I think it's a fair assessment that private networks aren't private. It's in the basic design. Correct, @fjl ? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479632010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479641703",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-479641703",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
    "id": 479641703,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTY0MTcwMw==",
    "user": {
      "login": "WinstonPrivacy",
      "id": 36650369,
      "node_id": "MDQ6VXNlcjM2NjUwMzY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36650369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WinstonPrivacy",
      "html_url": "https://github.com/WinstonPrivacy",
      "followers_url": "https://api.github.com/users/WinstonPrivacy/followers",
      "following_url": "https://api.github.com/users/WinstonPrivacy/following{/other_user}",
      "gists_url": "https://api.github.com/users/WinstonPrivacy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WinstonPrivacy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WinstonPrivacy/subscriptions",
      "organizations_url": "https://api.github.com/users/WinstonPrivacy/orgs",
      "repos_url": "https://api.github.com/users/WinstonPrivacy/repos",
      "events_url": "https://api.github.com/users/WinstonPrivacy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WinstonPrivacy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T20:14:25Z",
    "updated_at": "2019-04-03T20:14:25Z",
    "author_association": "NONE",
    "body": "I have also confirmed that hashing the discoverv4 packets isn't effective\non its own either. While this will prevent node discovery, it does nothing\nto protect the RLPx protocol from being probed on a node.\n\nWith the appropriate patches in place, we have been able to create private\n(undiscoverable) networks using the Ethereum p2p protocol. I'm surprised\nthis hasn't been rolled in yet.\n\nOn Wed, Apr 3, 2019 at 2:46 PM Martin Holst Swende <notifications@github.com>\nwrote:\n\n> I think it's a fair assessment that private networks aren't private. It's\n> in the basic design. Correct, @fjl <https://github.com/fjl> ?\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-479632010>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/Ai89gfQEniIgcT4RwypmlBUnRbgtbBQmks5vdQUAgaJpZM4cZNXi>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/479641703/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489074515",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-489074515",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
    "id": 489074515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTA3NDUxNQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-03T12:11:12Z",
    "updated_at": "2019-05-03T12:11:12Z",
    "author_association": "MEMBER",
    "body": "The purpose of the discovery protocol is finding all the other nodes on the Internet. The term 'private network' is commonly used to describe non-mainnet blockchains but doesn't imply that the participants can't be discovered. If you fork the discovery to create your own small DHT and run it on the Internet, your system will have low security because small DHTs can be overtaken easily.\r\n\r\nYou have several options for peer discovery in a private chain setting:\r\n\r\n- If you run a network with few, known participants just connect everyone together with static nodes    and disable the DHT using `--nodiscover`.\r\n- If your network runs within a single cloud environment, use `--netrestrict` or just close the firewall.\r\n- If you need communication among multiple parties, set up a VPN with dedicated IP range, then run all clients with the `--netrestrict` flag to only allow communication with nodes in that range.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489074515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489078985",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-489078985",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19378",
    "id": 489078985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTA3ODk4NQ==",
    "user": {
      "login": "WinstonPrivacy",
      "id": 36650369,
      "node_id": "MDQ6VXNlcjM2NjUwMzY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36650369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WinstonPrivacy",
      "html_url": "https://github.com/WinstonPrivacy",
      "followers_url": "https://api.github.com/users/WinstonPrivacy/followers",
      "following_url": "https://api.github.com/users/WinstonPrivacy/following{/other_user}",
      "gists_url": "https://api.github.com/users/WinstonPrivacy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WinstonPrivacy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WinstonPrivacy/subscriptions",
      "organizations_url": "https://api.github.com/users/WinstonPrivacy/orgs",
      "repos_url": "https://api.github.com/users/WinstonPrivacy/repos",
      "events_url": "https://api.github.com/users/WinstonPrivacy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WinstonPrivacy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-03T12:30:12Z",
    "updated_at": "2019-05-03T12:30:12Z",
    "author_association": "NONE",
    "body": "That's only true if one is using the higher level crypto protocols.\n\nYou also forgot option #4, which is pretty easily implemented. Salt the\ndiscovery and RLPx handshakes so that packets not coming from authorized\nnodes are dropped. This can be implemented as an optional parameter and\nthus is completely backwards compatible without requiring any changes for\nexisting users.\n\nThis is an easy solution with no downside and I find it curious that it\nhasn't been implemented.\n\nOn Fri, May 3, 2019 at 7:13 AM Felix Lange <notifications@github.com> wrote:\n\n> Pasting same response to the other issue.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/19378#issuecomment-489074656>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AIXT3AIV7FHSTYU3HNGI6S3PTQT6TANCNFSM4HDE2XRA>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/489078985/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

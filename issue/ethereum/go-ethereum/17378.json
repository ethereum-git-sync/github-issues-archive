{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17378",
  "id": 349731509,
  "node_id": "MDU6SXNzdWUzNDk3MzE1MDk=",
  "number": 17378,
  "title": "Geth Full Node CPU Usage >100% + dropping peer",
  "user": {
    "login": "jordimorris",
    "id": 10827671,
    "node_id": "MDQ6VXNlcjEwODI3Njcx",
    "avatar_url": "https://avatars.githubusercontent.com/u/10827671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jordimorris",
    "html_url": "https://github.com/jordimorris",
    "followers_url": "https://api.github.com/users/jordimorris/followers",
    "following_url": "https://api.github.com/users/jordimorris/following{/other_user}",
    "gists_url": "https://api.github.com/users/jordimorris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jordimorris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jordimorris/subscriptions",
    "organizations_url": "https://api.github.com/users/jordimorris/orgs",
    "repos_url": "https://api.github.com/users/jordimorris/repos",
    "events_url": "https://api.github.com/users/jordimorris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jordimorris/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2018-08-11T12:42:43Z",
  "updated_at": "2019-11-28T09:40:39Z",
  "closed_at": "2019-11-28T09:40:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\ngeth as Full Node is running with a CPU usage over 100%. It can barely keep up with the synchronisation and as soon as it catches up then dropping peers occur. The node tends to be behind the latest block or barely holds synchronisation for a while.  \r\n\r\nThis issue is very similar to the one experimented in summer 2016 where the network was constantly under successful attacks and it was a nightmare to keep up the node updated. \r\n\r\n#### System information\r\n\r\nGeth version: v1.8.13-stable\r\nOS & Version: OSX High Sierra\r\nCPU Core i7@2.7GHz + Turboboost\r\n\r\n\r\n#### Expected behaviour\r\nGeth syncs up with the network\r\nGeth to use less than 80% of CPU\r\nAfter a peer is dropped geth finds others and doesn't stop sync up\r\n\r\n#### Actual behaviour\r\n\r\nWhen is not sync up I understand it takes higher CPU usage to process all the blocks. \r\nAs soon as it's sync up it gets in trouble with peers, sync failed, dropped peer and head headers broke chain. \r\nGeth node tends to be slightly behind the latest block. \r\nGeth node drops peers and it takes long time to resume synchronisation again\r\n\r\n\r\nSync Failed:\r\nSynchronisation failed, retrying         err=\"block download canceled (requested)\"\r\nWARN [08-11|14:31:05.526] Synchronisation failed, retrying         err=\"block download canceled (requested)\"\r\nWARN [08-11|14:31:36.637] Synchronisation failed, dropping peer    peer=02e8dea482d9528f err=timeout\r\n\r\n#### Steps to reproduce the behaviour\r\ngeth --rpc --cache=2058\r\n\r\n\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412276354",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-412276354",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 412276354,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjI3NjM1NA==",
    "user": {
      "login": "jordimorris",
      "id": 10827671,
      "node_id": "MDQ6VXNlcjEwODI3Njcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/10827671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jordimorris",
      "html_url": "https://github.com/jordimorris",
      "followers_url": "https://api.github.com/users/jordimorris/followers",
      "following_url": "https://api.github.com/users/jordimorris/following{/other_user}",
      "gists_url": "https://api.github.com/users/jordimorris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jordimorris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jordimorris/subscriptions",
      "organizations_url": "https://api.github.com/users/jordimorris/orgs",
      "repos_url": "https://api.github.com/users/jordimorris/repos",
      "events_url": "https://api.github.com/users/jordimorris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jordimorris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-11T13:50:18Z",
    "updated_at": "2018-08-11T13:50:18Z",
    "author_association": "NONE",
    "body": "It is back to normal:\r\n\r\nWARN [08-11|15:42:42.105] Synchronisation failed, dropping peer    peer=3c81f6064e6399a6 err=timeout\r\nINFO [08-11|15:42:47.076] Imported new chain segment               blocks=1  txs=89   mgas=7.979  elapsed=177.537ms mgasps=44.941 number=6128532 hash=cb54efâ€¦24a119 cache=535.15mB\r\n\r\nEventually, when there's a dropping peer event, geth doesn't stop syncing and just keeps up importing segments and processing blocks. In recent days this wasn't happening and the node got stuck every time geth was synced. \r\n\r\nOn a side note, also I experienced that Metamask wasn't even broadcasting some of the transactions, independently of the Gas price. \r\n\r\n**Conclusion:**\r\n\r\nCPU usage is back to 20-80%, occasionally >100% \r\ndrop peer user and not finding peers has stopped, geth is sync up all the time\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412276354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412279146",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-412279146",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 412279146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjI3OTE0Ng==",
    "user": {
      "login": "jordimorris",
      "id": 10827671,
      "node_id": "MDQ6VXNlcjEwODI3Njcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/10827671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jordimorris",
      "html_url": "https://github.com/jordimorris",
      "followers_url": "https://api.github.com/users/jordimorris/followers",
      "following_url": "https://api.github.com/users/jordimorris/following{/other_user}",
      "gists_url": "https://api.github.com/users/jordimorris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jordimorris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jordimorris/subscriptions",
      "organizations_url": "https://api.github.com/users/jordimorris/orgs",
      "repos_url": "https://api.github.com/users/jordimorris/repos",
      "events_url": "https://api.github.com/users/jordimorris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jordimorris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-11T14:38:21Z",
    "updated_at": "2018-08-11T14:38:21Z",
    "author_association": "NONE",
    "body": "it is back to slow performance and dropping peers.\r\n\r\nsearching into github there are plenty of issues opened under the same circumstances. \r\n\r\nWhy is this a recurring issue? I understand ethereum network is under attack constantly but why the same problem comes over ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412279146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412390900",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-412390900",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 412390900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjM5MDkwMA==",
    "user": {
      "login": "liuhuanhui",
      "id": 10370625,
      "node_id": "MDQ6VXNlcjEwMzcwNjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10370625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuhuanhui",
      "html_url": "https://github.com/liuhuanhui",
      "followers_url": "https://api.github.com/users/liuhuanhui/followers",
      "following_url": "https://api.github.com/users/liuhuanhui/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuhuanhui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuhuanhui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuhuanhui/subscriptions",
      "organizations_url": "https://api.github.com/users/liuhuanhui/orgs",
      "repos_url": "https://api.github.com/users/liuhuanhui/repos",
      "events_url": "https://api.github.com/users/liuhuanhui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuhuanhui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-13T02:05:40Z",
    "updated_at": "2018-08-13T02:05:54Z",
    "author_association": "NONE",
    "body": "Buddy, my side is also 8 core 16g centos configuration, start synchronization and rpc, cpu takes up more than 80%, may I solve it?\r\n@jordimorris ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412390900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460152946",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-460152946",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 460152946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDE1Mjk0Ng==",
    "user": {
      "login": "peterlayke",
      "id": 47314267,
      "node_id": "MDQ6VXNlcjQ3MzE0MjY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47314267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterlayke",
      "html_url": "https://github.com/peterlayke",
      "followers_url": "https://api.github.com/users/peterlayke/followers",
      "following_url": "https://api.github.com/users/peterlayke/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterlayke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterlayke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterlayke/subscriptions",
      "organizations_url": "https://api.github.com/users/peterlayke/orgs",
      "repos_url": "https://api.github.com/users/peterlayke/repos",
      "events_url": "https://api.github.com/users/peterlayke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterlayke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T07:26:38Z",
    "updated_at": "2019-02-04T07:26:38Z",
    "author_association": "NONE",
    "body": "Has there been any resolution to this? My node has been performing badly and getting much worse (every few days now). \r\n\r\nI see lots of issues about this but not a single resolution. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460152946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/463075830",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-463075830",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 463075830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzA3NTgzMA==",
    "user": {
      "login": "liuhuanhui",
      "id": 10370625,
      "node_id": "MDQ6VXNlcjEwMzcwNjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10370625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuhuanhui",
      "html_url": "https://github.com/liuhuanhui",
      "followers_url": "https://api.github.com/users/liuhuanhui/followers",
      "following_url": "https://api.github.com/users/liuhuanhui/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuhuanhui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuhuanhui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuhuanhui/subscriptions",
      "organizations_url": "https://api.github.com/users/liuhuanhui/orgs",
      "repos_url": "https://api.github.com/users/liuhuanhui/repos",
      "events_url": "https://api.github.com/users/liuhuanhui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuhuanhui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-13T06:25:44Z",
    "updated_at": "2019-02-13T06:25:44Z",
    "author_association": "NONE",
    "body": "The same question\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/463075830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/528005130",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-528005130",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 528005130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyODAwNTEzMA==",
    "user": {
      "login": "technologiespro",
      "id": 9394904,
      "node_id": "MDQ6VXNlcjkzOTQ5MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9394904?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/technologiespro",
      "html_url": "https://github.com/technologiespro",
      "followers_url": "https://api.github.com/users/technologiespro/followers",
      "following_url": "https://api.github.com/users/technologiespro/following{/other_user}",
      "gists_url": "https://api.github.com/users/technologiespro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/technologiespro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/technologiespro/subscriptions",
      "organizations_url": "https://api.github.com/users/technologiespro/orgs",
      "repos_url": "https://api.github.com/users/technologiespro/repos",
      "events_url": "https://api.github.com/users/technologiespro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/technologiespro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-04T17:34:38Z",
    "updated_at": "2019-09-04T17:37:17Z",
    "author_association": "NONE",
    "body": "The same question\r\nUbuntu 18\r\nXeon 24 core\r\n64 Gb RAM\r\n512Gb SSD\r\n\r\n--cache=2048 --syncmode fast\r\n\r\nCPU > 100%\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/528005130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/532131352",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-532131352",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 532131352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjEzMTM1Mg==",
    "user": {
      "login": "jordimorris",
      "id": 10827671,
      "node_id": "MDQ6VXNlcjEwODI3Njcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/10827671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jordimorris",
      "html_url": "https://github.com/jordimorris",
      "followers_url": "https://api.github.com/users/jordimorris/followers",
      "following_url": "https://api.github.com/users/jordimorris/following{/other_user}",
      "gists_url": "https://api.github.com/users/jordimorris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jordimorris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jordimorris/subscriptions",
      "organizations_url": "https://api.github.com/users/jordimorris/orgs",
      "repos_url": "https://api.github.com/users/jordimorris/repos",
      "events_url": "https://api.github.com/users/jordimorris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jordimorris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-17T09:03:45Z",
    "updated_at": "2019-09-17T09:03:45Z",
    "author_association": "NONE",
    "body": "The issue occurred frequently and gave up after finding no solution to this topic.\r\n\r\n\r\nAlternative:\r\nMounted a dAppNode and now I can run parity, rinkeby, kovan and geth with 0% impact on the laptop I'm working with and connecting through a VPN.\r\n\r\nHighly recommended !\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/532131352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/559418433",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17378#issuecomment-559418433",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17378",
    "id": 559418433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTQxODQzMw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-28T09:40:39Z",
    "updated_at": "2019-11-28T09:40:39Z",
    "author_association": "MEMBER",
    "body": "The original ticket was for ` v1.8.13-stable`. We did a bunch of improvements for 1.9 (see https://blog.ethereum.org/2019/07/10/geth-v1-9-0/ ), and have been steadily improving geth since. \r\nAs this ticket is pretty stale, I think it's better to discuss how geth currently works (or not) ina new ticket. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/559418433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

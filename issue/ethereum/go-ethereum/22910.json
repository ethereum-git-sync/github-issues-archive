{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22910",
  "id": 896139947,
  "node_id": "MDU6SXNzdWU4OTYxMzk5NDc=",
  "number": 22910,
  "title": "Synchronisation failed, retrying .. \"trie node .. failed with all peers\"",
  "user": {
    "login": "dasayan05",
    "id": 18719603,
    "node_id": "MDQ6VXNlcjE4NzE5NjAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/18719603?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dasayan05",
    "html_url": "https://github.com/dasayan05",
    "followers_url": "https://api.github.com/users/dasayan05/followers",
    "following_url": "https://api.github.com/users/dasayan05/following{/other_user}",
    "gists_url": "https://api.github.com/users/dasayan05/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dasayan05/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dasayan05/subscriptions",
    "organizations_url": "https://api.github.com/users/dasayan05/orgs",
    "repos_url": "https://api.github.com/users/dasayan05/repos",
    "events_url": "https://api.github.com/users/dasayan05/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dasayan05/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-05-20T01:04:53Z",
  "updated_at": "2021-05-20T09:03:10Z",
  "closed_at": "2021-05-20T09:03:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.3-stable`\r\nOS & Version: Linux Ubuntu 20.04\r\n\r\nI have fast network & SSD hard drive.\r\n\r\n#### Issue\r\n\r\nI was running a fast node on the ropsten test network. It was working fine (it downloaded quite a lot of blocks, maybe 80%), but suddenly it stopped syncing (`eth.syncing` is `false`). The below is the relevant output log (just when the error started appearing). Its been a while I am still getting the same.\r\n\r\nI am fairly new in running geth nodes, so can someone explain what is going on ?\r\n\r\n#### Backtrace\r\n\r\n````\r\n...\r\n...\r\nINFO [05-20|01:10:16.647] Imported new block receipts              count=83   elapsed=32.273ms    number=9,242,079  hash=d49feb..5d0497 age=5mo1w1d    size=831.22KiB\r\nINFO [05-20|01:10:16.788] Imported new block receipts              count=46   elapsed=12.309ms    number=9,242,125  hash=e408ee..b23dee age=5mo1w1d    size=608.93KiB\r\nINFO [05-20|01:10:16.969] Imported new block receipts              count=130  elapsed=54.006ms    number=9,242,255  hash=ce111d..400854 age=5mo1w1d    size=1.89MiB\r\nINFO [05-20|01:10:17.707] Imported new block headers               count=512  elapsed=19.403ms    number=9,278,369  hash=a711cd..60f54a age=5mo3d22h\r\nINFO [05-20|01:10:17.791] Imported new block receipts              count=662  elapsed=207.162ms   number=9,242,917  hash=a4474d..f7bf30 age=5mo1w1d    size=9.18MiB\r\nINFO [05-20|01:10:17.894] Imported new block receipts              count=266  elapsed=101.949ms   number=9,243,183  hash=401cc4..646fa0 age=5mo1w1d    size=3.84MiB\r\nINFO [05-20|01:10:20.242] Imported new block receipts              count=437  elapsed=198.610ms   number=9,243,620  hash=cb9d65..30e258 age=5mo1w1d    size=7.09MiB\r\nINFO [05-20|01:10:22.223] Imported new block receipts              count=634  elapsed=251.938ms   number=9,244,254  hash=40a300..93a84a age=5mo1w1d    size=9.43MiB\r\nINFO [05-20|01:10:24.804] Imported new block headers               count=2048 elapsed=75.103ms    number=9,280,417  hash=d70ac2..ed49a1 age=5mo3d16h\r\nWARN [05-20|01:10:26.439] Node data write error                    err=\"trie node f835b9..414e37 failed with all peers (2 tries, 2 peers)\"\r\nERROR[05-20|01:10:26.440] Ethereum peer removal failed             peer=420fc6d3 err=\"peer not registered\"\r\nWARN [05-20|01:10:26.440] Rewinding blockchain                     target=9,278,368\r\nINFO [05-20|01:10:26.447] Imported new state entries               count=1536 elapsed=7.722ms     processed=28,042,014 pending=6894  trieretry=134 coderetry=0 duplicate=0 unexpected=0\r\nINFO [05-20|01:10:26.740] Loaded most recent local header          number=9,278,368  hash=14f76c..eb8518 td=32,320,502,543,967,496 age=5mo3d22h\r\nINFO [05-20|01:10:26.740] Loaded most recent local full block      number=0          hash=419410..ca4a2d td=1,048,576              age=52y1mo2w\r\nINFO [05-20|01:10:26.740] Loaded most recent local fast block      number=9,244,254  hash=40a300..93a84a td=32,314,858,260,554,233 age=5mo1w1d\r\nINFO [05-20|01:10:26.740] Loaded last fast-sync pivot marker       number=10,268,848\r\nWARN [05-20|01:10:26.740] Rolled back chain segment                header=9280417->9278368 fast=9244254->9244254 block=0->0 reason=\"syncing canceled (requested)\"\r\nWARN [05-20|01:10:26.740] Synchronisation failed, dropping peer    peer=420fc6d3a832a0a3ee31ca372642282e885518c1aff2ce9607a23ec93c36ef41 err=\"retrieved hash chain is invalid: timeout\"\r\nERROR[05-20|01:10:26.740] Ethereum peer removal failed             peer=420fc6d3 err=\"peer not registered\"\r\nINFO [05-20|01:10:31.350] Looking for peers                        peercount=2 tried=16 static=0\r\nINFO [05-20|01:10:37.235] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:10:37.362] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:10:37.362] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:10:41.478] Looking for peers                        peercount=2 tried=24 static=0\r\nINFO [05-20|01:10:47.837] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:10:47.930] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:10:47.930] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:10:51.985] Looking for peers                        peercount=2 tried=28 static=0\r\nINFO [05-20|01:10:58.411] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:10:58.514] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:10:58.514] Downloader queue stats                   receiptTasks=0     blockTasks=0     itemSize=16.25KiB  throttle=4032\r\nWARN [05-20|01:10:58.515] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:02.319] Looking for peers                        peercount=2 tried=32 static=0\r\nINFO [05-20|01:11:08.997] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:11:09.118] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:11:09.118] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:12.320] Looking for peers                        peercount=2 tried=34 static=0\r\nWARN [05-20|01:11:14.203] Dropping unsynced node during sync       id=d41bcd6a93f4b3f5 conn=dyndial addr=5.9.17.150:30303   type=OpenEthereum/v3.2.6-...\r\nERROR[05-20|01:11:16.486] Snapshot extension registration failed   peer=cb5b9771 err=\"peer connected on snap without compatible eth support\"\r\nINFO [05-20|01:11:19.596] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:11:19.729] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:11:19.729] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:22.320] Looking for peers                        peercount=2 tried=38 static=0\r\nINFO [05-20|01:11:30.207] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:11:30.304] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:11:30.304] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:32.361] Looking for peers                        peercount=2 tried=31 static=0\r\nINFO [05-20|01:11:40.784] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:11:40.841] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:11:40.842] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:42.654] Looking for peers                        peercount=2 tried=32 static=0\r\nINFO [05-20|01:11:51.318] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:11:51.374] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nWARN [05-20|01:11:51.374] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:11:52.987] Looking for peers                        peercount=2 tried=31 static=0\r\nINFO [05-20|01:12:01.852] Disabling direct-ancient mode            origin=9,244,254 ancient=9,175,039\r\nWARN [05-20|01:12:01.957] Node data write error                    err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:12:01.958] Downloader queue stats                   receiptTasks=0     blockTasks=0     itemSize=16.25KiB  throttle=4032\r\nWARN [05-20|01:12:01.958] Synchronisation failed, retrying         err=\"trie node 830ce7..68edc4 failed with all peers (2 tries, 2 peers)\"\r\nINFO [05-20|01:12:02.988] Looking for peers                        peercount=2 tried=16 static=0\r\n\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.",
  "closed_by": {
    "login": "dasayan05",
    "id": 18719603,
    "node_id": "MDQ6VXNlcjE4NzE5NjAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/18719603?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dasayan05",
    "html_url": "https://github.com/dasayan05",
    "followers_url": "https://api.github.com/users/dasayan05/followers",
    "following_url": "https://api.github.com/users/dasayan05/following{/other_user}",
    "gists_url": "https://api.github.com/users/dasayan05/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dasayan05/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dasayan05/subscriptions",
    "organizations_url": "https://api.github.com/users/dasayan05/orgs",
    "repos_url": "https://api.github.com/users/dasayan05/repos",
    "events_url": "https://api.github.com/users/dasayan05/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dasayan05/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844802504",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22910#issuecomment-844802504",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910",
    "id": 844802504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDgwMjUwNA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T07:29:57Z",
    "updated_at": "2021-05-20T07:29:57Z",
    "author_association": "MEMBER",
    "body": "You're syncing the `ropsten` testnet, and for some reason you only have two peers, none of which seems to be very good. Hard to say if the problem is on your side or you had bad luck with the peers you found. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844802504/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844804743",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22910#issuecomment-844804743",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910",
    "id": 844804743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDgwNDc0Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T07:31:45Z",
    "updated_at": "2021-05-20T07:31:45Z",
    "author_association": "MEMBER",
    "body": "I'd say that the root problem is that you only have two peers, which leads to the situation that you do not (reliably) get data delivered. What parameters did you start geth with? Do you have a public ip address? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844804743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844886341",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22910#issuecomment-844886341",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22910",
    "id": 844886341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDg4NjM0MQ==",
    "user": {
      "login": "dasayan05",
      "id": 18719603,
      "node_id": "MDQ6VXNlcjE4NzE5NjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/18719603?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dasayan05",
      "html_url": "https://github.com/dasayan05",
      "followers_url": "https://api.github.com/users/dasayan05/followers",
      "following_url": "https://api.github.com/users/dasayan05/following{/other_user}",
      "gists_url": "https://api.github.com/users/dasayan05/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dasayan05/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dasayan05/subscriptions",
      "organizations_url": "https://api.github.com/users/dasayan05/orgs",
      "repos_url": "https://api.github.com/users/dasayan05/repos",
      "events_url": "https://api.github.com/users/dasayan05/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dasayan05/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T09:02:49Z",
    "updated_at": "2021-05-20T09:02:49Z",
    "author_association": "NONE",
    "body": "@holiman Ahh ! You were right. It got solved itself after a while when it found more reliable peers. Anyway thanks for the explanation. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844886341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

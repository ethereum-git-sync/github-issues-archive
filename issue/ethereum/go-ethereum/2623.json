{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2623",
  "id": 156923129,
  "node_id": "MDU6SXNzdWUxNTY5MjMxMjk=",
  "number": 2623,
  "title": "Don't provide job if daemon is stuck",
  "user": {
    "login": "sammy007",
    "id": 7374093,
    "node_id": "MDQ6VXNlcjczNzQwOTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7374093?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sammy007",
    "html_url": "https://github.com/sammy007",
    "followers_url": "https://api.github.com/users/sammy007/followers",
    "following_url": "https://api.github.com/users/sammy007/following{/other_user}",
    "gists_url": "https://api.github.com/users/sammy007/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sammy007/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sammy007/subscriptions",
    "organizations_url": "https://api.github.com/users/sammy007/orgs",
    "repos_url": "https://api.github.com/users/sammy007/repos",
    "events_url": "https://api.github.com/users/sammy007/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sammy007/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-05-26T07:40:12Z",
  "updated_at": "2018-04-16T16:37:34Z",
  "closed_at": "2018-04-16T16:37:34Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\n\nGeth version: `1.4.5-\"stable\"-a269a713`\nOS & Version: Linux\n#### Expected behaviour\n\nStop respond with new job on `eth_getWork` request if daemon is stuck.\n#### Actual behaviour\n\nDaemon stuck for some reason.\n#### Steps to reproduce the behaviour\n\nBecome lucky.\n#### Backtrace\n\n```\nI0526 06:04:38.347117 miner/worker.go:555] commit new work on block 1585198 with 0 txs & 0 uncles. Took 3.118263ms\nI0526 06:04:38.400830 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 289.565846ms. #1583245 [37972e92 / 684c2084]\nI0526 06:04:38.674826 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 272.100186ms. #1583501 [c180d4ac / 09e03e2a]\nI0526 06:04:38.949976 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 273.240282ms. #1583757 [df3ce8f1 / f78937be]\nI0526 06:04:38.964370 core/blockchain.go:959] imported 0 block(s) (0 queued 8 ignored) including 0 txs in 14.20852ms. #1583765 [12ffab06 / 215ff8e3]\nI0526 06:04:40.115317 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 277.53034ms. #1584021 [b9d62b44 / 5740002a]\nI0526 06:04:40.445705 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 328.533228ms. #1584277 [d9ed1382 / 247d99dc]\nI0526 06:04:40.731824 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 284.23234ms. #1584533 [fb2ae560 / 5b443812]\nI0526 06:04:40.770011 core/blockchain.go:959] imported 0 block(s) (0 queued 32 ignored) including 0 txs in 37.862926ms. #1584565 [d59bd889 / 4c32dd5b]\nI0526 06:04:41.048642 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 265.229368ms. #1584821 [14aa5d3c / 6ae78d48]\nI0526 06:04:41.298331 core/blockchain.go:959] imported 0 block(s) (0 queued 256 ignored) including 0 txs in 247.863396ms. #1585077 [480cc10d / 1966030f]\nI0526 06:04:41.453100 core/blockchain.go:959] imported 0 block(s) (0 queued 119 ignored) including 0 txs in 153.757735ms. #1585196 [00062ead / a649113c]\nI0526 06:04:54.849477 core/blockchain.go:959] imported 1 block(s) (0 queued 0 ignored) including 65 txs in 300.610103ms. #1585198 [ff68b37d / ff68b37d]\nI0526 06:04:55.824216 miner/worker.go:555] commit new work on block 1585199 with 102 txs & 0 uncles. Took 968.832996ms\nI0526 06:05:12.572468 core/blockchain.go:959] imported 1 block(s) (0 queued 0 ignored) including 99 txs in 619.631885ms. #1585199 [647982a7 / 647982a7]\nI0526 06:05:20.016059 miner/worker.go:555] commit new work on block 1585200 with 126 txs & 0 uncles. Took 7.443372425s\nI0526 06:09:57.675652 core/blockchain.go:959] imported 0 block(s) (0 queued 1 ignored) including 0 txs in 6.094826ms. #1585198 [ff68b37d / ff68b37d]\n^CI0526 06:18:24.746379 cmd/utils/cmd.go:74] Got interrupt, shutting down...\n```\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237972404",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2623#issuecomment-237972404",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623",
    "id": 237972404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzk3MjQwNA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T21:38:22Z",
    "updated_at": "2016-08-05T21:38:22Z",
    "author_association": "MEMBER",
    "body": "I think what you are requesting here is that the RPC server should be shut down sooner when you quit geth. Is that correct?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237972404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237982213",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2623#issuecomment-237982213",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623",
    "id": 237982213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzk4MjIxMw==",
    "user": {
      "login": "sammy007",
      "id": 7374093,
      "node_id": "MDQ6VXNlcjczNzQwOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7374093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sammy007",
      "html_url": "https://github.com/sammy007",
      "followers_url": "https://api.github.com/users/sammy007/followers",
      "following_url": "https://api.github.com/users/sammy007/following{/other_user}",
      "gists_url": "https://api.github.com/users/sammy007/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sammy007/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sammy007/subscriptions",
      "organizations_url": "https://api.github.com/users/sammy007/orgs",
      "repos_url": "https://api.github.com/users/sammy007/repos",
      "events_url": "https://api.github.com/users/sammy007/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sammy007/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T22:37:54Z",
    "updated_at": "2016-08-05T22:37:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "No, I believe that if geth didn't receive blocks from network (stuck) for N specified minutes it must return an error in response to `eth_getWork` instead of same and same job again. Unfortunately more and more cases reported by users that geth just stop sync and people continue to mine on local chain overnight for example. It can be handled by failover policy when you have several nodes and check for the longest chain, but I am pretty sure that geth should maybe handle this too. This way you can put several geth instances behind haproxy for example with simple `httpcheck` policy without writing failover code yourself.\n\nhttps://github.com/ethcore/parity/issues/1818\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237982213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370461432",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2623#issuecomment-370461432",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2623",
    "id": 370461432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQ2MTQzMg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-03-05T15:44:34Z",
    "updated_at": "2018-03-05T15:44:34Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370461432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

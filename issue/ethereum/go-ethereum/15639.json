{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15639",
  "id": 280751516,
  "node_id": "MDU6SXNzdWUyODA3NTE1MTY=",
  "number": 15639,
  "title": "Geth suddenly lost account information from Ledger Nano S",
  "user": {
    "login": "op9",
    "id": 34402727,
    "node_id": "MDQ6VXNlcjM0NDAyNzI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/34402727?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/op9",
    "html_url": "https://github.com/op9",
    "followers_url": "https://api.github.com/users/op9/followers",
    "following_url": "https://api.github.com/users/op9/following{/other_user}",
    "gists_url": "https://api.github.com/users/op9/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/op9/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/op9/subscriptions",
    "organizations_url": "https://api.github.com/users/op9/orgs",
    "repos_url": "https://api.github.com/users/op9/repos",
    "events_url": "https://api.github.com/users/op9/events{/privacy}",
    "received_events_url": "https://api.github.com/users/op9/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2017-12-09T20:21:01Z",
  "updated_at": "2019-08-27T08:47:41Z",
  "closed_at": "2019-08-27T08:45:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI was about to transfer my out mined ETH-s to a Ledger Nano S (FW: 1.3.1).\r\nGeth was able to see the accounts on the Ledger, so I used it.\r\nBecause this was my very first transaction, I started with a small amount of 0.05ETH.\r\n> eth.sendTransaction({from:eth.coinbase, to:eth.accounts[1], value: web3.toWei(0.05, \"ether\")})\r\n\r\nIt worked as I expected.\r\nSo I wanted to send all my ETHs:\r\n> eth.sendTransaction({from:eth.coinbase, to:eth.accounts[1], value: web3.toWei(12.95, \"ether\")})\r\nError: insufficient funds for gas * price + value\r\n    at web3.js:3143:20\r\n    at web3.js:6347:15\r\n    at web3.js:5081:36\r\n    at <anonymous>:1:1\r\n\r\nSo I have reduced the amount:\r\n> eth.sendTransaction({from:eth.coinbase, to:eth.accounts[1], value: web3.toWei(12.92, \"ether\")})\r\n\"0x0d0c739f63274585282640f69fc1167fbb2acf229e9e54caff3433e52fe00131\"\r\n\r\nThen I checked on etherscan:\r\nhttps://etherscan.io/tx/0x0d0c739f63274585282640f69fc1167fbb2acf229e9e54caff3433e52fe00131\r\n\r\nAnd I could see, that something bad is happening, because at the \"to\" field wasn't my address, instead it was about to create a contract.\r\n\r\nBetween these 2 transactions was 12 minutes, but I pressed buttons on Ledger to not go into \"sleep\" mode (vires in numeris) and I stayed inside the Ethereum app (1.0.21), as you can see also on the log I attached.\r\nI even tried now to wait till this message, and geth was able to see the adresses.\r\n\r\nBonus question: how can I get my ETHs back?\r\n\r\n#### System information\r\n\r\nGeth version: `1.7.3-stable-4bb3c89d`\r\nOS & Version: Windows 10\r\n\r\n#### Expected behaviour\r\nable to see the connected ledger as 12 minutes earlier and get a valid address from \"eth.accounts[1]\"\r\n\r\n#### Actual behaviour\r\nwithout any warning it couldn't read the address from Ledger, that lead to an \"undefined\" value, and that created a contract\r\n\r\n#### Steps to reproduce the behaviour\r\nI tried to make a new transaction again with a higher value to cause this error message:\r\n\"Error: insufficient funds for gas * price + value\"\r\nBut the accounts was still there, so I don't know how to reproduce again.\r\n\r\n#### Backtrace\r\n\r\n[geth-attach.txt](https://github.com/ethereum/go-ethereum/files/1545061/geth-attach.txt)\r\n[geth-cmd.txt](https://github.com/ethereum/go-ethereum/files/1545062/geth-cmd.txt)\r\n\r\n",
  "closed_by": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/350534782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-350534782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 350534782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDUzNDc4Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-10T09:09:59Z",
    "updated_at": "2017-12-10T09:09:59Z",
    "author_association": "MEMBER",
    "body": "First of all, the ether is lost. I'm sorry for your loss. \r\n\r\nSecondly, judging from the logs, it looks strange that the `eth.accounts[1]` suddenly disappeared, since there's no mention of the USB getting dropped. When the first tx is made, the wallet 'discovered' two new accounts (which are ledger accounts 1 and 2). Could there be a bug there, @karalabe? I'll assign this to you to look into. \r\n\r\nFor anyone else reading this; it would have been avoidable if the `to`-address had been saved in a variable, instead of relying on `eth.accounts[1]`. This would also have been avoided if we have 'sign-what-you-see', instead of 'submit-then-sign'.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/350534782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/350537568",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-350537568",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 350537568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDUzNzU2OA==",
    "user": {
      "login": "op9",
      "id": 34402727,
      "node_id": "MDQ6VXNlcjM0NDAyNzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/34402727?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/op9",
      "html_url": "https://github.com/op9",
      "followers_url": "https://api.github.com/users/op9/followers",
      "following_url": "https://api.github.com/users/op9/following{/other_user}",
      "gists_url": "https://api.github.com/users/op9/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/op9/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/op9/subscriptions",
      "organizations_url": "https://api.github.com/users/op9/orgs",
      "repos_url": "https://api.github.com/users/op9/repos",
      "events_url": "https://api.github.com/users/op9/events{/privacy}",
      "received_events_url": "https://api.github.com/users/op9/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-10T10:08:28Z",
    "updated_at": "2017-12-10T10:18:30Z",
    "author_association": "NONE",
    "body": "Thank you for your comment!\r\n\r\nI also thought, that maybe the new discovered accounts, or the change at the balance field caused something.\r\n\r\nI noticed another interesting line.\r\nPlease look at the geth-attach.txt line: 17.\r\nIt does not return anything. I still have the console open, and checked again, and there is no return value.\r\n\r\nI don't get this yet:\r\n> This would also have been avoided if we have 'sign-what-you-see', instead of 'submit-then-sign'.\r\n\r\nFirst: the last quote is not 'sign-then-submit'? Because we unlock the account (sign) and make the sendTransaction (submit).\r\nSecond: geth is able to 'sign-what-you-see', and I should have been using it? Or geth can only 'sign-then-submit', and it would be good to change to 'sign-what-you-see'.\r\n\r\nFYI: there is a chance to get the ETHs back, if they will implement the EIP 156, I just got an answer for my question on another forum (https://ethereum.stackexchange.com/questions/32815/transaction-sent-to-null)\r\nFYI2: I'm Hungarian too as karalabe :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/350537568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446164809",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-446164809",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 446164809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE2NDgwOQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-11T11:10:20Z",
    "updated_at": "2018-12-11T11:10:20Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446164809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/447603721",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-447603721",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 447603721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NzYwMzcyMQ==",
    "user": {
      "login": "op9",
      "id": 34402727,
      "node_id": "MDQ6VXNlcjM0NDAyNzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/34402727?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/op9",
      "html_url": "https://github.com/op9",
      "followers_url": "https://api.github.com/users/op9/followers",
      "following_url": "https://api.github.com/users/op9/following{/other_user}",
      "gists_url": "https://api.github.com/users/op9/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/op9/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/op9/subscriptions",
      "organizations_url": "https://api.github.com/users/op9/orgs",
      "repos_url": "https://api.github.com/users/op9/repos",
      "events_url": "https://api.github.com/users/op9/events{/privacy}",
      "received_events_url": "https://api.github.com/users/op9/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-15T22:55:18Z",
    "updated_at": "2018-12-15T22:55:18Z",
    "author_association": "NONE",
    "body": "Any update on this one?\r\nOr I was the only one who faced this issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/447603721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/525203358",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-525203358",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 525203358,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTIwMzM1OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-27T08:43:14Z",
    "updated_at": "2019-08-27T08:43:14Z",
    "author_association": "MEMBER",
    "body": "We added a check for the underlying error: https://github.com/ethereum/go-ethereum/blob/master/internal/ethapi/api.go#L1390  \r\nFixed two years ago: https://github.com/ethereum/go-ethereum/pull/16108 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/525203358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/525205046",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15639#issuecomment-525205046",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15639",
    "id": 525205046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTIwNTA0Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-27T08:47:41Z",
    "updated_at": "2019-08-27T08:47:41Z",
    "author_association": "MEMBER",
    "body": "Sorry again for this loss, but unfortunately there's nothing else we can do. There are no known issues with accounts disappearing temporarily that might explain what happened to you.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/525205046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

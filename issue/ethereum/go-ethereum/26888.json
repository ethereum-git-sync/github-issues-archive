{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26888",
  "id": 1624643196,
  "node_id": "I_kwDOAOvK985g1hZ8",
  "number": 26888,
  "title": "\"gas uint64 overflow\" why i get this error",
  "user": {
    "login": "whonion",
    "id": 47848969,
    "node_id": "MDQ6VXNlcjQ3ODQ4OTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/47848969?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/whonion",
    "html_url": "https://github.com/whonion",
    "followers_url": "https://api.github.com/users/whonion/followers",
    "following_url": "https://api.github.com/users/whonion/following{/other_user}",
    "gists_url": "https://api.github.com/users/whonion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/whonion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/whonion/subscriptions",
    "organizations_url": "https://api.github.com/users/whonion/orgs",
    "repos_url": "https://api.github.com/users/whonion/repos",
    "events_url": "https://api.github.com/users/whonion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/whonion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-03-15T03:01:26Z",
  "updated_at": "2023-03-15T23:57:33Z",
  "closed_at": "2023-03-15T23:57:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello, guys!\r\nCan someone explain what the error is in this code:\r\n```sh\r\n// Get the bytecode and ABI from the compiled contract\r\nbytecodeFile := filepath.Join(binDir, binFilename)\r\nbytecodeBytes, err := ioutil.ReadFile(bytecodeFile)\r\n  if err != nil {\r\n  log.Fatal(err)\r\n  }\r\nabiFile := filepath.Join(binDir, abiFilename)\r\nabiBytes, err := ioutil.ReadFile(abiFile)\r\n  if err != nil {\r\n  log.Fatal(err)\r\n  }\r\n// Set the gas price and gas limit\r\ngasPrice, err := client.SuggestGasPrice(context.Background())\r\n  if err != nil {\r\n  log.Fatal(err)\r\n}\r\n// Calculate the gas required for deploying the contract\r\nestimateGas, err := client.EstimateGas(context.Background(), ethereum.CallMsg{\r\n  From: crypto.PubkeyToAddress(privateKey.PublicKey),\r\n  To:   nil,\r\n  Data: bytecodeBytes,\r\n  })\r\n  if err != nil {\r\n  fmt.Printf(\"Estimate gas overflow uint64\\n\")\r\n  log.Fatal(err)\r\n  }\r\nfmt.Printf(\"Estimated gas: %v\\n\", estimateGas)\r\ngasLimit := estimateGas\r\n// Create a new instance of a transaction signer\r\nauth, err := bind.NewKeyedTransactorWithChainID(privateKey, big.NewInt(chainId))\r\n  if err != nil {\r\n  log.Fatal(err)\r\n  }\r\nauth.GasPrice = gasPrice\r\nauth.GasLimit = gasLimit //estimateGas +10000\r\n\r\n// Load the contract's ABI\r\ncontractABI, err := abi.JSON(bytes.NewReader(abiBytes))\r\n  if err != nil {\r\n  log.Fatal(err)\r\n  }\r\n\r\n// Deploy the contract\r\naddress, tx, _, err := bind.DeployContract(auth, contractABI, bytecodeBytes, client)\r\n  if err != nil {\r\n  log.Fatal(err)\r\n  }\r\n```\r\nI compile a simple contract here is his code:\r\n```sh\r\n// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.9.0;\r\n\r\n/**\r\n * @title Storage\r\n * @dev Store & retrieve value in a variable\r\n * @custom:dev-run-script ./scripts/deploy_with_ethers.ts\r\n */\r\ncontract Storage {\r\n\r\n    uint256 number;\r\n\r\n    /**\r\n     * @dev Store value in variable\r\n     * @param num value to store\r\n     */\r\n    function store(uint256 num) public {\r\n        number = num;\r\n    }\r\n\r\n    /**\r\n     * @dev Return value \r\n     * @return value of 'number'\r\n     */\r\n    function retrieve() public view returns (uint256){\r\n        return number;\r\n    }\r\n}\r\n```\r\n```sh\r\n608060405234801561001057600080fd5b50600080546001600160a01b0319163317905561019c806100326000396000f3fe6080604052600436106100385760003560e01c806312065fe0146100445780632e1a7d4d146100645780638da5cb5b1461008657600080fd5b3661003f57005b600080fd5b34801561005057600080fd5b506040514781526020015b60405180910390f35b34801561007057600080fd5b5061008461007f36600461014d565b6100be565b005b34801561009257600080fd5b506000546100a6906001600160a01b031681565b6040516001600160a01b03909116815260200161005b565b6000546001600160a01b0316331461011c5760405162461bcd60e51b815260206004820152601f60248201527f4f6e6c7920746865204f776e65722063616c6c2074686973206d6574686f6400604482015260640160405180910390fd5b604051339082156108fc029083906000818181858888f19350505050158015610149573d6000803e3d6000fd5b5050565b60006020828403121561015f57600080fd5b503591905056fea2646970667358221220bebbc2c0db38c5a0e3dd0caa1c76332be9cec831645500fad14a9c09498f3a6464736f6c63430008130033\r\n```\r\nUsing ABI:\r\n```sh\r\n[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address payable\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}]\r\n```\r\nI try to deploy bytecode compiled with `solcjs` or `Remix IDE` but get the error `gas uint64 overflow` when I try to calculate the cost of gas, and the transaction fails when I manually set the gas limit:\r\n`Warning! Error encountered during contract execution [gas uint64 overflow]`\r\nMaybe I'm not passing the data to the function correctly, tell me please, what's my error ?\r\n",
  "closed_by": {
    "login": "whonion",
    "id": 47848969,
    "node_id": "MDQ6VXNlcjQ3ODQ4OTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/47848969?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/whonion",
    "html_url": "https://github.com/whonion",
    "followers_url": "https://api.github.com/users/whonion/followers",
    "following_url": "https://api.github.com/users/whonion/following{/other_user}",
    "gists_url": "https://api.github.com/users/whonion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/whonion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/whonion/subscriptions",
    "organizations_url": "https://api.github.com/users/whonion/orgs",
    "repos_url": "https://api.github.com/users/whonion/repos",
    "events_url": "https://api.github.com/users/whonion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/whonion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469816191",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26888#issuecomment-1469816191",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
    "id": 1469816191,
    "node_id": "IC_kwDOAOvK985Xm51_",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T11:14:58Z",
    "updated_at": "2023-03-15T11:14:58Z",
    "author_association": "MEMBER",
    "body": "Are you sure that the bytecode there is the constructor-code and not the runtime bytecode? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469816191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469824056",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26888#issuecomment-1469824056",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
    "id": 1469824056,
    "node_id": "IC_kwDOAOvK985Xm7w4",
    "user": {
      "login": "whonion",
      "id": 47848969,
      "node_id": "MDQ6VXNlcjQ3ODQ4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/47848969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whonion",
      "html_url": "https://github.com/whonion",
      "followers_url": "https://api.github.com/users/whonion/followers",
      "following_url": "https://api.github.com/users/whonion/following{/other_user}",
      "gists_url": "https://api.github.com/users/whonion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whonion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whonion/subscriptions",
      "organizations_url": "https://api.github.com/users/whonion/orgs",
      "repos_url": "https://api.github.com/users/whonion/repos",
      "events_url": "https://api.github.com/users/whonion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whonion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T11:20:33Z",
    "updated_at": "2023-03-15T11:20:33Z",
    "author_association": "NONE",
    "body": "> Are you sure that the bytecode there is the constructor-code and not the runtime bytecode?\r\n\r\nNot quite sure what you mean?\r\nI have tried different contracts, compiled in different ways.\r\nI'm just starting to learn this library, maybe I misunderstood something.\r\nCould you please tell me sir where I misunderstood or made a mistake ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469824056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469858718",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26888#issuecomment-1469858718",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
    "id": 1469858718,
    "node_id": "IC_kwDOAOvK985XnEOe",
    "user": {
      "login": "whonion",
      "id": 47848969,
      "node_id": "MDQ6VXNlcjQ3ODQ4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/47848969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whonion",
      "html_url": "https://github.com/whonion",
      "followers_url": "https://api.github.com/users/whonion/followers",
      "following_url": "https://api.github.com/users/whonion/following{/other_user}",
      "gists_url": "https://api.github.com/users/whonion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whonion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whonion/subscriptions",
      "organizations_url": "https://api.github.com/users/whonion/orgs",
      "repos_url": "https://api.github.com/users/whonion/repos",
      "events_url": "https://api.github.com/users/whonion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whonion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T11:46:54Z",
    "updated_at": "2023-03-15T11:46:54Z",
    "author_association": "NONE",
    "body": "\r\n\r\n\r\n\r\n> Are you sure that the bytecode there is the constructor-code and not the runtime bytecode?\r\n\r\nI didn't immediately understand what you're talking about.\r\nYes, this is the runtime code, now I need to figure out how to convert it to constructor bytecode.\r\nIf everything else I'm passing is correct of course.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469858718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469868690",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26888#issuecomment-1469868690",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
    "id": 1469868690,
    "node_id": "IC_kwDOAOvK985XnGqS",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T11:54:53Z",
    "updated_at": "2023-03-15T11:54:53Z",
    "author_association": "MEMBER",
    "body": "The compiler should spit out both the constructor code (for use in tx deployent) and the runtime bytecode. In this step: \r\n```\r\nestimateGas, err := client.EstimateGas(context.Background(), ethereum.CallMsg{\r\n  From: crypto.PubkeyToAddress(privateKey.PublicKey),\r\n  To:   nil,\r\n  Data: bytecodeBytes,\r\n  })\r\n```\r\nyou need to provide the constructor-code, not the runtime code. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1469868690/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1470197498",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26888#issuecomment-1470197498",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26888",
    "id": 1470197498,
    "node_id": "IC_kwDOAOvK985XoW76",
    "user": {
      "login": "whonion",
      "id": 47848969,
      "node_id": "MDQ6VXNlcjQ3ODQ4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/47848969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whonion",
      "html_url": "https://github.com/whonion",
      "followers_url": "https://api.github.com/users/whonion/followers",
      "following_url": "https://api.github.com/users/whonion/following{/other_user}",
      "gists_url": "https://api.github.com/users/whonion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whonion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whonion/subscriptions",
      "organizations_url": "https://api.github.com/users/whonion/orgs",
      "repos_url": "https://api.github.com/users/whonion/repos",
      "events_url": "https://api.github.com/users/whonion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whonion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T15:18:24Z",
    "updated_at": "2023-03-15T15:18:24Z",
    "author_association": "NONE",
    "body": "Thank you, sir!\r\nThanks to you, I solved the problem and realized what my mistake was\r\n```\r\nconstructorBytes, err := hex.DecodeString(bytecodeStr[:len(bytecodeStr)-68])\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1470197498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

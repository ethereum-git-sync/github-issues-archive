{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23534",
  "id": 988582531,
  "node_id": "MDU6SXNzdWU5ODg1ODI1MzE=",
  "number": 23534,
  "title": "Node not keeping sync, giving constant warnings",
  "user": {
    "login": "jaydemyr",
    "id": 90057767,
    "node_id": "MDQ6VXNlcjkwMDU3NzY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/90057767?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jaydemyr",
    "html_url": "https://github.com/jaydemyr",
    "followers_url": "https://api.github.com/users/jaydemyr/followers",
    "following_url": "https://api.github.com/users/jaydemyr/following{/other_user}",
    "gists_url": "https://api.github.com/users/jaydemyr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jaydemyr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jaydemyr/subscriptions",
    "organizations_url": "https://api.github.com/users/jaydemyr/orgs",
    "repos_url": "https://api.github.com/users/jaydemyr/repos",
    "events_url": "https://api.github.com/users/jaydemyr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jaydemyr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-09-05T19:39:34Z",
  "updated_at": "2021-10-12T10:43:59Z",
  "closed_at": "2021-10-12T10:43:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello, I have tried to setup a full node on a ubuntu VPS, by installing ethereum through ubuntu ppa and running it.\r\n\r\nThe sync process is very inconsistent. From time to time it just stops adding new blocks, and gives lots of warnings\r\n\r\n```\r\n> WARN [09-05|21:32:39.066] Dropping unsynced node during sync       id=c17e0e45\r\n\r\nERROR[09-05|21:33:41.411] Snapshot extension registration failed   peer=a05e766c         err=\"peer connected on snap without compatible eth support\"\r\nWARN [09-05|21:34:07.051] Dropping unsynced node during sync       id=fd005eea1b3ea757 conn=inbound addr=13.115.75.55:22928    type=Geth/v1.9.11-stable-...\r\nERROR[09-05|21:34:15.378] Snapshot extension registration failed   peer=20dcc090         err=\"peer connected on snap without compatible eth support\"\r\nERROR[09-05|21:34:19.666] Snapshot extension registration failed   peer=1d4fc8e3         err=\"peer connected on snap without compatible eth support\"\r\nERROR[09-05|21:34:26.656] Snapshot extension registration failed   peer=8b297441         err=\"peer connected on snap without compatible eth support\"\r\nWARN [09-05|21:34:30.614] Dropping unsynced node during sync       id=d198ac2f33fb042d conn=dyndial addr=143.198.113.110:30303 type=Geth/v1.10.1-stable-...\r\nWARN [09-05|21:34:40.038] Database compacting, degraded performance database=/root/.ethereum/geth/chaindata\r\nERROR[09-05|21:34:47.867] Snapshot extension registration failed   peer=b4ad7978         err=\"peer connected on snap without compatible eth support\"\r\n```\r\n\r\nthen it waits to resolve itself for a long time before continuing to sync blocks. \"Dropping unsynced node\" seems to be the big problem here.\r\n\r\nEventually it syncs. But once it does, it still seems to have some problem keeping up - eth.syncing will return false, but it's not synced properly, it's not seeing the new block data.\r\n\r\nImportant to note... my sync did not have issues before the last fork of geth client recently. It used to run just fine, what happened? Do I need to update something? I'm not sure, since I already downloaded latest version of ethereum from package manager, right? Or is that outdated already\r\n\r\nSpecs:\r\nAMD Ryzen 5 3600 \r\n64 GB DDR4 RAM\r\n2x 512GB nvme ssd (combined with raid for just under 1tb storage drive)\r\n1 gbit/s bandwidth\r\n\r\n\r\nGeth\r\nVersion: 1.10.8-stable\r\nGit Commit: 26675454bf93bf904be7a43cce6b3f550115ff90\r\nArchitecture: amd64\r\nGo Version: go1.16.4\r\nOperating System: linux\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925609541",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23534#issuecomment-925609541",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534",
    "id": 925609541,
    "node_id": "IC_kwDOAOvK9843K65F",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T08:36:50Z",
    "updated_at": "2021-09-23T08:36:50Z",
    "author_association": "MEMBER",
    "body": "`WARN [09-05|21:34:40.038] Database compacting, degraded performance database=/root/.ethereum/geth/chaindata\r\n` your node is serving the heavy disk write load. \r\n\r\nCan you provide more logs? It's not enough for us to know the real issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925609541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925610106",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23534#issuecomment-925610106",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534",
    "id": 925610106,
    "node_id": "IC_kwDOAOvK9843K7B6",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T08:37:44Z",
    "updated_at": "2021-09-23T08:37:44Z",
    "author_association": "MEMBER",
    "body": "And also 1.10.8 is new enough to sync the ethereum mainnet.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925610106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925617674",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23534#issuecomment-925617674",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534",
    "id": 925617674,
    "node_id": "IC_kwDOAOvK9843K84K",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T08:46:29Z",
    "updated_at": "2021-09-23T08:46:29Z",
    "author_association": "MEMBER",
    "body": "Also it would be really helpful if you provide us with the flags you start geth with",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/925617674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/940889568",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23534#issuecomment-940889568",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23534",
    "id": 940889568,
    "node_id": "IC_kwDOAOvK9844FNXg",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T10:43:59Z",
    "updated_at": "2021-10-12T10:43:59Z",
    "author_association": "MEMBER",
    "body": "`WARN [09-05|21:34:40.038] Database compacting, degraded performance database=/root/.ethereum/geth/chaindata` means leveldb is shuffling the data around and everything is suspended from pretty much doing anything until it finishes. There's not much we can do, when you initially sync it throws a **lot** of data at your node so from time to time it suspends a bit to catch up.\r\n\r\nThe `Snapshot extension registration failed` is not that important, unfortunately Optimism is running nodes with `snap` but no `eth` protocol, so their nodes always try to connect and then we have to drop them. Annoying that they do this, but to prevent it we'll need a bit more data exposed via the discovery protocols.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/940889568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22907",
  "id": 895374013,
  "node_id": "MDU6SXNzdWU4OTUzNzQwMTM=",
  "number": 22907,
  "title": "The node falls for no apparent reason, several times a day",
  "user": {
    "login": "petrovi4ev",
    "id": 23744025,
    "node_id": "MDQ6VXNlcjIzNzQ0MDI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/23744025?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/petrovi4ev",
    "html_url": "https://github.com/petrovi4ev",
    "followers_url": "https://api.github.com/users/petrovi4ev/followers",
    "following_url": "https://api.github.com/users/petrovi4ev/following{/other_user}",
    "gists_url": "https://api.github.com/users/petrovi4ev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/petrovi4ev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/petrovi4ev/subscriptions",
    "organizations_url": "https://api.github.com/users/petrovi4ev/orgs",
    "repos_url": "https://api.github.com/users/petrovi4ev/repos",
    "events_url": "https://api.github.com/users/petrovi4ev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/petrovi4ev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-05-19T12:18:42Z",
  "updated_at": "2021-05-20T13:33:22Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.3`\r\nOS & Version: Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-1048-aws x86_64)\r\n\r\nCPU with 8 cores\r\nRAM 32 GB\r\n\r\n#### Expected behaviour\r\n\r\nwork for a long time without crashing the application\r\n\r\n#### Actual behaviour\r\n\r\nthe node crashes every day, at first the memory grows in leaps and bounds, and then the application restarts without any errors in the logs\r\n\r\n<img width=\"805\" alt=\"Screenshot 2021-05-19 at 15 07 58\" src=\"https://user-images.githubusercontent.com/23744025/118811047-37d17f80-b8b5-11eb-99c4-01b79afb62cc.png\">\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nthe application is running in a container (image - ethereum/client-go:v1.10.3):\r\n\r\n```geth --rpc --rpcaddr 0.0.0.0 --http.vhosts ‘*’ --rpcapi ‘eth,net,web3,personal,debug’ --syncmode fast --cache 2048 --maxpeers 100 --allow-insecure-unlock```\r\n\r\n#### Log\r\n\r\n````\r\nINFO [05-18|18:40:36.531] Generating state snapshot                root=504e7d..961286 in=0d144b..a27e36 at=ec5c6e..faf96d accounts=6,812,168 slots=25,306,066 storage=2.21GiB elapsed=5h49m31.488s    eta=488h45m52.915s\r\nDEBUG[05-18|18:40:36.931] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44758 t=\"137.086µs\"\r\nDEBUG[05-18|18:40:36.932] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44759 t=\"111.099µs\"\r\nDEBUG[05-18|18:40:37.705] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44760 t=\"141.067µs\"\r\nDEBUG[05-18|18:40:37.708] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44761 t=1.907428ms\r\nDEBUG[05-18|18:40:37.731] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44762 t=2.313936ms\r\nDEBUG[05-18|18:40:37.756] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44763 t=2.816332ms\r\nDEBUG[05-18|18:40:37.782] Served eth_getUncleByBlockHashAndIndex   conn=172.17.0.7:41886 reqid=44764 t=\"151.913µs\"\r\nDEBUG[05-18|18:40:37.786] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44765 t=2.78419ms\r\nDEBUG[05-18|18:40:37.816] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44766 t=2.056668ms\r\nDEBUG[05-18|18:40:37.846] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44767 t=3.136012ms\r\nDEBUG[05-18|18:40:37.879] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44768 t=2.751091ms\r\nDEBUG[05-18|18:40:37.907] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44769 t=2.149909ms\r\nDEBUG[05-18|18:40:37.931] Served eth_getBlockByNumber              conn=172.17.0.7:41888 reqid=44771 t=\"124.226µs\"\r\nDEBUG[05-18|18:40:37.932] Served eth_getBlockByNumber              conn=172.17.0.7:41888 reqid=44772 t=\"108.498µs\"\r\nDEBUG[05-18|18:40:37.933] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44770 t=2.267511ms\r\nDEBUG[05-18|18:40:37.960] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44773 t=2.163681ms\r\nDEBUG[05-18|18:40:37.985] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44774 t=1.841825ms\r\nDEBUG[05-18|18:40:38.006] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44775 t=\"132.073µs\"\r\nDEBUG[05-18|18:40:38.931] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44776 t=\"138.339µs\"\r\nINFO [05-18|18:40:38.931] Regenerating historical state            block=12,452,148 target=12,452,205 remaining=57 elapsed=20.276530753s\r\nDEBUG[05-18|18:40:38.932] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44777 t=\"123.082µs\"\r\nDEBUG[05-18|18:40:39.931] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44778 t=\"136.671µs\"\r\nDEBUG[05-18|18:40:39.932] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44779 t=\"122.594µs\"\r\nDEBUG[05-18|18:40:40.931] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44780 t=\"142.469µs\"\r\nDEBUG[05-18|18:40:40.932] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44781 t=\"119.588µs\"\r\nDEBUG[05-18|18:40:42.588] Served eth_getBlockByNumber              conn=172.17.0.7:41886 reqid=44782 t=449.516819ms\r\nINFO [05-18|18:40:52.116] Starting Geth on Ethereum mainnet... \r\nINFO [05-18|18:40:52.118] Maximum peer count                       ETH=100 LES=0 total=100\r\n````",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844880600",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22907#issuecomment-844880600",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907",
    "id": 844880600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDg4MDYwMA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T08:55:52Z",
    "updated_at": "2021-05-20T08:55:52Z",
    "author_association": "MEMBER",
    "body": "Your node seems to be doing an awful lot of things as the same time. Can you detail exactly what calls you are making to it, how frequently? Seems you are also tracing, are you? Do you have a bit more logs for us to see what it's doing longer term?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844880600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844880782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22907#issuecomment-844880782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907",
    "id": 844880782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDg4MDc4Mg==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T08:56:07Z",
    "updated_at": "2021-05-20T08:56:07Z",
    "author_association": "MEMBER",
    "body": "Is this node exposed to the public? Can you provide some more logs?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844880782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/845126011",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22907#issuecomment-845126011",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22907",
    "id": 845126011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTEyNjAxMQ==",
    "user": {
      "login": "petrovi4ev",
      "id": 23744025,
      "node_id": "MDQ6VXNlcjIzNzQ0MDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23744025?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrovi4ev",
      "html_url": "https://github.com/petrovi4ev",
      "followers_url": "https://api.github.com/users/petrovi4ev/followers",
      "following_url": "https://api.github.com/users/petrovi4ev/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrovi4ev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrovi4ev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrovi4ev/subscriptions",
      "organizations_url": "https://api.github.com/users/petrovi4ev/orgs",
      "repos_url": "https://api.github.com/users/petrovi4ev/repos",
      "events_url": "https://api.github.com/users/petrovi4ev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrovi4ev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T13:33:18Z",
    "updated_at": "2021-05-20T13:33:18Z",
    "author_association": "NONE",
    "body": "https://drive.google.com/file/d/1xvl4v1NVTUfbgJ7c9iYTdr2Cci6ocKws/view?usp=sharing\r\n\r\nlogs from the start to the fall of the node",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/845126011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24053",
  "id": 1071373006,
  "node_id": "I_kwDOAOvK984_29rO",
  "number": 24053,
  "title": "extra copy in trie hasher? not sure",
  "user": {
    "login": "elee1766",
    "id": 2260857,
    "node_id": "MDQ6VXNlcjIyNjA4NTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2260857?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/elee1766",
    "html_url": "https://github.com/elee1766",
    "followers_url": "https://api.github.com/users/elee1766/followers",
    "following_url": "https://api.github.com/users/elee1766/following{/other_user}",
    "gists_url": "https://api.github.com/users/elee1766/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/elee1766/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/elee1766/subscriptions",
    "organizations_url": "https://api.github.com/users/elee1766/orgs",
    "repos_url": "https://api.github.com/users/elee1766/repos",
    "events_url": "https://api.github.com/users/elee1766/events{/privacy}",
    "received_events_url": "https://api.github.com/users/elee1766/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-12-05T04:59:36Z",
  "updated_at": "2021-12-09T10:14:07Z",
  "closed_at": "2021-12-09T10:13:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "hi ! i was reading this function and saw that there were two copies at the top \r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/93f196c4b052983dd89d8ba749dcdc98a80cf69c/trie/hasher.go#L119-L122\r\n\r\ni see that this function is currently being used in two places\r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/93f196c4b052983dd89d8ba749dcdc98a80cf69c/trie/hasher.go#L86-L94\r\n\r\nand \r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/93f196c4b052983dd89d8ba749dcdc98a80cf69c/trie/hasher.go#L200-L203\r\n\r\n\r\nin neither of these cases, n seems to be used. can't we avoid a copy if we simply use n for the \"cached\" value? (cached = n, or just replacing variable altogether) it would be faster and also get rid of some gcs. in fact, in the second call the cached value isnt even used, so is it not possible in that case to avoid the copy all together?\r\n\r\ni tried editing and removing the copies and the tests seemed to pass + benchmarks made some sense, but i'm not super familiar with the whole codebase yet so i could be just mistaken.\r\n\r\nthanks!\r\n",
  "closed_by": {
    "login": "ligi",
    "id": 111600,
    "node_id": "MDQ6VXNlcjExMTYwMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ligi",
    "html_url": "https://github.com/ligi",
    "followers_url": "https://api.github.com/users/ligi/followers",
    "following_url": "https://api.github.com/users/ligi/following{/other_user}",
    "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
    "organizations_url": "https://api.github.com/users/ligi/orgs",
    "repos_url": "https://api.github.com/users/ligi/repos",
    "events_url": "https://api.github.com/users/ligi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ligi/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/989708851",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24053#issuecomment-989708851",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24053",
    "id": 989708851,
    "node_id": "IC_kwDOAOvK9846_cIz",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-09T10:13:55Z",
    "updated_at": "2021-12-09T10:14:07Z",
    "author_association": "MEMBER",
    "body": "Thanks for looking into it - there might be the option to save a copy here - but it will most likely not make a significant impact and is so not really worth doing.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/989708851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

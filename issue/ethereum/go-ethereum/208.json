{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/208",
  "id": 51981518,
  "node_id": "MDU6SXNzdWU1MTk4MTUxOA==",
  "number": 208,
  "title": "Key store",
  "user": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/4",
    "html_url": "https://github.com/ethereum/go-ethereum/milestone/4",
    "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/4/labels",
    "id": 835684,
    "node_id": "MDk6TWlsZXN0b25lODM1Njg0",
    "number": 4,
    "title": "PoC8",
    "description": "",
    "creator": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 23,
    "state": "closed",
    "created_at": "2014-10-22T09:15:32Z",
    "updated_at": "2015-03-09T00:07:06Z",
    "due_on": "2015-02-27T08:00:00Z",
    "closed_at": "2015-03-09T00:07:06Z"
  },
  "comments": 4,
  "created_at": "2014-12-15T12:42:17Z",
  "updated_at": "2015-01-30T15:19:56Z",
  "closed_at": "2015-01-30T15:19:55Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "A new key store needs to be developed for genesis release. The current version has always been in a stand in for the final version.\n\nPossible model\n\n```\n+----------------------+\n| KeyStore - Generic   |\n+----------------------+\n          |\n         \\|/\n+----------------------+\n| KeyManager           |\n+----------------------+\n          |\n         \\|/\n+----------------------+\n| Wallet               |\n+----------------------+\n```\n\n`KeyStore` is a generic interface and should potentially contains:\n- `Keys() []Key` returns all keys currently in the `KeyStore`\n- `Store(Key)` add a new key to the `KeyStore`\n  If any encryption needs to be done for storing, the `KeyStore` should handle this. `Store` and `Keys` simply return keys (unencrypted).\n\n`KeyManager` should accept a `KeyStore` as its backing mechanism. KeyManager need not to know about the implementation details of the `KeyStore`:\n- `NewKey() Key` generates a new key and adds it to the key store.\n- `DeleteKey(Key)` deletes a key from the key manager as well as the `KeyStore`\n\n`Wallet` basic wallet functionality. Manages accounts currently in use, known and owned by the author. Creating transactions for specific accounts should also be handled by the `Wallet`.\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67363718",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/208#issuecomment-67363718",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208",
    "id": 67363718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYzNzE4",
    "user": {
      "login": "Gustav-Simonsson",
      "id": 293096,
      "node_id": "MDQ6VXNlcjI5MzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/293096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gustav-Simonsson",
      "html_url": "https://github.com/Gustav-Simonsson",
      "followers_url": "https://api.github.com/users/Gustav-Simonsson/followers",
      "following_url": "https://api.github.com/users/Gustav-Simonsson/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gustav-Simonsson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gustav-Simonsson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gustav-Simonsson/subscriptions",
      "organizations_url": "https://api.github.com/users/Gustav-Simonsson/orgs",
      "repos_url": "https://api.github.com/users/Gustav-Simonsson/repos",
      "events_url": "https://api.github.com/users/Gustav-Simonsson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gustav-Simonsson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-17T17:57:59Z",
    "updated_at": "2014-12-19T16:01:22Z",
    "author_association": "NONE",
    "body": "### Types & Interfaces\n\n``` go\ntype Key struct {\n     Id *UUID                  // stdlib type. UUID version 4 - useful to have id not derived from key data. for e.g. key file name\n     Flags [4]byte             // metadata flags, first bit indicates if stored encrypted\n     PrivKey *ecdsa.PrivateKey // plaintext privkey using stdlib type\n}\n\ntype KeyStore interface {\n     GenerateNewKey() (*key, error)\n     GetKey(UUID) (*Key, error)         // key from id\n     GetKey(UUID, string) (*Key, error) // key from id, passphrase\n     StoreKey(*Key) (error)             // store key without passphrase\n     StoreKey(*Key, string) (error)     // store key encrypted with passphrase\n     DeleteKey(UUID) (error)            // delete key by id\n     ExportKey(UUID) ([]byte, error)    // TODO: export format/go type?\n     ExportAllKeys() ([]byte, error)\n}\n\ntype KeyManager interface {\n     NewKey() (UUID, error)        // generates & stores key, returns key id\n     NewKey(string) (UUID, error)  // same but with passphrase\n     DeleteKey(UUID) (error)       // deletes key by id\n}\n\n```\n\n### Key generation\n- 32 random bytes from CSPRNG [1] (dev/urandom or equivalent).\n- Possibly mixing in of other entropy sources.\n- Standard EC secp256k1 generation from the final bytes.\n\nTODO: decide whether to mix in other entropy, for example some ethereum node state, if available, like current root hash of Merkle Patricia tree. Could be useful in case default OS CSPRNG is weak.\n\n### Key storage (default disk storage)\n- One directory per file with one file containing privkey bytes.\n- File permissions are read/write for the user running the go client.\n- Default storage location is defaultDataDir + \"wallet/keys/<key_uuid>/\"\n\n### Passphrase encryption\n- Mandatory by default in client GUI. Can be disabled with config option.\n- AES-256-CBC for encryption of EC privkey.\n\nTODO: KDF choice? scrypt [2] with high N value?\nTODO: any objections to using CBC for cipher mode [3] for AES enc of privkey? ssh-keygen default is AES-128-CBC.\n\n### Key export / backup\n\nTODO: encrypted key export format? Bitcoin WIF [4] for plaintext ones?\nTODO: should default key store produce a file?\n\n### References\n1. http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\n2. http://en.wikipedia.org/wiki/Scrypt\n3. http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation\n4. https://en.bitcoin.it/wiki/Wallet_import_format\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67363718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67655093",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/208#issuecomment-67655093",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208",
    "id": 67655093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjU1MDkz",
    "user": {
      "login": "Gustav-Simonsson",
      "id": 293096,
      "node_id": "MDQ6VXNlcjI5MzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/293096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gustav-Simonsson",
      "html_url": "https://github.com/Gustav-Simonsson",
      "followers_url": "https://api.github.com/users/Gustav-Simonsson/followers",
      "following_url": "https://api.github.com/users/Gustav-Simonsson/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gustav-Simonsson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gustav-Simonsson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gustav-Simonsson/subscriptions",
      "organizations_url": "https://api.github.com/users/Gustav-Simonsson/orgs",
      "repos_url": "https://api.github.com/users/Gustav-Simonsson/repos",
      "events_url": "https://api.github.com/users/Gustav-Simonsson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gustav-Simonsson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T15:49:20Z",
    "updated_at": "2014-12-19T15:49:20Z",
    "author_association": "NONE",
    "body": "Edited key struct to use stdlib UUID and ecdsa.PrivateKey types.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67655093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67684348",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/208#issuecomment-67684348",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208",
    "id": 67684348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Njg0MzQ4",
    "user": {
      "login": "Gustav-Simonsson",
      "id": 293096,
      "node_id": "MDQ6VXNlcjI5MzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/293096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gustav-Simonsson",
      "html_url": "https://github.com/Gustav-Simonsson",
      "followers_url": "https://api.github.com/users/Gustav-Simonsson/followers",
      "following_url": "https://api.github.com/users/Gustav-Simonsson/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gustav-Simonsson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gustav-Simonsson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gustav-Simonsson/subscriptions",
      "organizations_url": "https://api.github.com/users/Gustav-Simonsson/orgs",
      "repos_url": "https://api.github.com/users/Gustav-Simonsson/repos",
      "events_url": "https://api.github.com/users/Gustav-Simonsson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gustav-Simonsson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T19:23:19Z",
    "updated_at": "2014-12-19T19:29:10Z",
    "author_association": "NONE",
    "body": "Scrypt params test: https://gist.github.com/Gustav-Simonsson/39801db33f0a11239eb8\n\nOn a Intel Core i7-3517U CPU @ 1.90GHz (ivy bridge, 3 years old laptop):\n\nWith N = 2^18, r = 8, p = 1 we get CPU time of 1s and 256MB memory used.\nWith N = 2^17 both CPU and memory is halved to 0.5s and 128MB.\n\nIf we are OK with scrypt for KDF we can tune this to have as high params as possible without compromising usability & support for older computers.\n\nAnother note is that https://bitcoinarmory.com/ adapts the scrypt params for the particular system it runs on before using scrypt as KDF. Pretty cool.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/67684348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/68487005",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/208#issuecomment-68487005",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/208",
    "id": 68487005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDg3MDA1",
    "user": {
      "login": "Gustav-Simonsson",
      "id": 293096,
      "node_id": "MDQ6VXNlcjI5MzA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/293096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gustav-Simonsson",
      "html_url": "https://github.com/Gustav-Simonsson",
      "followers_url": "https://api.github.com/users/Gustav-Simonsson/followers",
      "following_url": "https://api.github.com/users/Gustav-Simonsson/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gustav-Simonsson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gustav-Simonsson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gustav-Simonsson/subscriptions",
      "organizations_url": "https://api.github.com/users/Gustav-Simonsson/orgs",
      "repos_url": "https://api.github.com/users/Gustav-Simonsson/repos",
      "events_url": "https://api.github.com/users/Gustav-Simonsson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gustav-Simonsson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-01T13:44:15Z",
    "updated_at": "2015-01-01T13:44:15Z",
    "author_association": "NONE",
    "body": "WIP branch with to-be-squashed WIP commits: https://github.com/Gustav-Simonsson/go-ethereum/tree/new_key_handling\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/68487005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21363",
  "id": 664394932,
  "node_id": "MDU6SXNzdWU2NjQzOTQ5MzI=",
  "number": 21363,
  "title": "les node can't serve historical block query",
  "user": {
    "login": "secmask",
    "id": 382284,
    "node_id": "MDQ6VXNlcjM4MjI4NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/382284?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/secmask",
    "html_url": "https://github.com/secmask",
    "followers_url": "https://api.github.com/users/secmask/followers",
    "following_url": "https://api.github.com/users/secmask/following{/other_user}",
    "gists_url": "https://api.github.com/users/secmask/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/secmask/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/secmask/subscriptions",
    "organizations_url": "https://api.github.com/users/secmask/orgs",
    "repos_url": "https://api.github.com/users/secmask/repos",
    "events_url": "https://api.github.com/users/secmask/events{/privacy}",
    "received_events_url": "https://api.github.com/users/secmask/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 841716348,
      "node_id": "MDU6TGFiZWw4NDE3MTYzNDg=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:les",
      "name": "area:les",
      "color": "c2e0c6",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "zsfelfoldi",
    "id": 9884311,
    "node_id": "MDQ6VXNlcjk4ODQzMTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9884311?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zsfelfoldi",
    "html_url": "https://github.com/zsfelfoldi",
    "followers_url": "https://api.github.com/users/zsfelfoldi/followers",
    "following_url": "https://api.github.com/users/zsfelfoldi/following{/other_user}",
    "gists_url": "https://api.github.com/users/zsfelfoldi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zsfelfoldi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zsfelfoldi/subscriptions",
    "organizations_url": "https://api.github.com/users/zsfelfoldi/orgs",
    "repos_url": "https://api.github.com/users/zsfelfoldi/repos",
    "events_url": "https://api.github.com/users/zsfelfoldi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zsfelfoldi/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zsfelfoldi",
      "id": 9884311,
      "node_id": "MDQ6VXNlcjk4ODQzMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9884311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zsfelfoldi",
      "html_url": "https://github.com/zsfelfoldi",
      "followers_url": "https://api.github.com/users/zsfelfoldi/followers",
      "following_url": "https://api.github.com/users/zsfelfoldi/following{/other_user}",
      "gists_url": "https://api.github.com/users/zsfelfoldi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zsfelfoldi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zsfelfoldi/subscriptions",
      "organizations_url": "https://api.github.com/users/zsfelfoldi/orgs",
      "repos_url": "https://api.github.com/users/zsfelfoldi/repos",
      "events_url": "https://api.github.com/users/zsfelfoldi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zsfelfoldi/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-07-23T11:20:20Z",
  "updated_at": "2020-08-27T08:55:39Z",
  "closed_at": "2020-07-30T08:17:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "hello, I have two node, one is archive node, and the other is LES node\r\nI setup my LES node to connect to my archive node, and `admin.peers` show it connected\r\n1. archive node: ubuntu 18.04, geth v1.9.15\r\n2. les node: macos, geth v1.9.17\r\n\r\nthe problem is when I call a contract function using my node\r\n- call with old block using my archive node works fine\r\n- call with latest block using LES node works fine too\r\n- call with old block using LES node, it return error: `getDeleteStateObject (1e158c0e93c30d24e918ef83d1e0be23595c3c0f) error: no suitable peers available`\r\n\r\nmy archive node has already set `--light.serve 50 --light.ingress 10240 --light.egress 10240 --light.maxpeers 70`, and I am the only client connect to the archive node. Do you have idea on how to make my LES node to work with old block?\r\n",
  "closed_by": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663357335",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21363#issuecomment-663357335",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
    "id": 663357335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzM1NzMzNQ==",
    "user": {
      "login": "osiztechnologies",
      "id": 12368647,
      "node_id": "MDQ6VXNlcjEyMzY4NjQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12368647?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osiztechnologies",
      "html_url": "https://github.com/osiztechnologies",
      "followers_url": "https://api.github.com/users/osiztechnologies/followers",
      "following_url": "https://api.github.com/users/osiztechnologies/following{/other_user}",
      "gists_url": "https://api.github.com/users/osiztechnologies/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osiztechnologies/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osiztechnologies/subscriptions",
      "organizations_url": "https://api.github.com/users/osiztechnologies/orgs",
      "repos_url": "https://api.github.com/users/osiztechnologies/repos",
      "events_url": "https://api.github.com/users/osiztechnologies/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osiztechnologies/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T05:46:39Z",
    "updated_at": "2020-07-24T05:46:39Z",
    "author_association": "NONE",
    "body": "We also faced same issue. No peercount increasing in light sync mode. Kindly give solution to us. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663357335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663412524",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21363#issuecomment-663412524",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
    "id": 663412524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzQxMjUyNA==",
    "user": {
      "login": "zsfelfoldi",
      "id": 9884311,
      "node_id": "MDQ6VXNlcjk4ODQzMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9884311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zsfelfoldi",
      "html_url": "https://github.com/zsfelfoldi",
      "followers_url": "https://api.github.com/users/zsfelfoldi/followers",
      "following_url": "https://api.github.com/users/zsfelfoldi/following{/other_user}",
      "gists_url": "https://api.github.com/users/zsfelfoldi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zsfelfoldi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zsfelfoldi/subscriptions",
      "organizations_url": "https://api.github.com/users/zsfelfoldi/orgs",
      "repos_url": "https://api.github.com/users/zsfelfoldi/repos",
      "events_url": "https://api.github.com/users/zsfelfoldi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zsfelfoldi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T08:38:10Z",
    "updated_at": "2020-07-24T08:38:10Z",
    "author_association": "MEMBER",
    "body": "I quickly checked the code and it looks like it should work so I am now archive syncing Goerli to see why it does not. Will get back soon.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663412524/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/664121279",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21363#issuecomment-664121279",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
    "id": 664121279,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDEyMTI3OQ==",
    "user": {
      "login": "osiztechnologies",
      "id": 12368647,
      "node_id": "MDQ6VXNlcjEyMzY4NjQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12368647?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osiztechnologies",
      "html_url": "https://github.com/osiztechnologies",
      "followers_url": "https://api.github.com/users/osiztechnologies/followers",
      "following_url": "https://api.github.com/users/osiztechnologies/following{/other_user}",
      "gists_url": "https://api.github.com/users/osiztechnologies/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osiztechnologies/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osiztechnologies/subscriptions",
      "organizations_url": "https://api.github.com/users/osiztechnologies/orgs",
      "repos_url": "https://api.github.com/users/osiztechnologies/repos",
      "events_url": "https://api.github.com/users/osiztechnologies/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osiztechnologies/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-27T05:06:32Z",
    "updated_at": "2020-07-27T05:06:32Z",
    "author_association": "NONE",
    "body": "@zsfelfoldi Is there any update for this issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/664121279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/666029199",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21363#issuecomment-666029199",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
    "id": 666029199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjAyOTE5OQ==",
    "user": {
      "login": "zsfelfoldi",
      "id": 9884311,
      "node_id": "MDQ6VXNlcjk4ODQzMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9884311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zsfelfoldi",
      "html_url": "https://github.com/zsfelfoldi",
      "followers_url": "https://api.github.com/users/zsfelfoldi/followers",
      "following_url": "https://api.github.com/users/zsfelfoldi/following{/other_user}",
      "gists_url": "https://api.github.com/users/zsfelfoldi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zsfelfoldi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zsfelfoldi/subscriptions",
      "organizations_url": "https://api.github.com/users/zsfelfoldi/orgs",
      "repos_url": "https://api.github.com/users/zsfelfoldi/repos",
      "events_url": "https://api.github.com/users/zsfelfoldi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zsfelfoldi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-30T01:43:57Z",
    "updated_at": "2020-07-30T01:43:57Z",
    "author_association": "MEMBER",
    "body": "Found the issue in the old light fetcher code which has been recently replaced on master. Can you try updating with the recent master branch on the client side? The new code does not have the same faulty condition and old state retrieval seems to work now.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/666029199/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/666071458",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21363#issuecomment-666071458",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21363",
    "id": 666071458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjA3MTQ1OA==",
    "user": {
      "login": "secmask",
      "id": 382284,
      "node_id": "MDQ6VXNlcjM4MjI4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/382284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/secmask",
      "html_url": "https://github.com/secmask",
      "followers_url": "https://api.github.com/users/secmask/followers",
      "following_url": "https://api.github.com/users/secmask/following{/other_user}",
      "gists_url": "https://api.github.com/users/secmask/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/secmask/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/secmask/subscriptions",
      "organizations_url": "https://api.github.com/users/secmask/orgs",
      "repos_url": "https://api.github.com/users/secmask/repos",
      "events_url": "https://api.github.com/users/secmask/events{/privacy}",
      "received_events_url": "https://api.github.com/users/secmask/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-30T03:26:17Z",
    "updated_at": "2020-07-30T03:26:17Z",
    "author_association": "NONE",
    "body": "I tested and it worked on my side",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/666071458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

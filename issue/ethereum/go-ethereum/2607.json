{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2607",
  "id": 156470577,
  "node_id": "MDU6SXNzdWUxNTY0NzA1Nzc=",
  "number": 2607,
  "title": "Geth doesn't send any logs and dies when started in background",
  "user": {
    "login": "wawrzek",
    "id": 968748,
    "node_id": "MDQ6VXNlcjk2ODc0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/968748?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wawrzek",
    "html_url": "https://github.com/wawrzek",
    "followers_url": "https://api.github.com/users/wawrzek/followers",
    "following_url": "https://api.github.com/users/wawrzek/following{/other_user}",
    "gists_url": "https://api.github.com/users/wawrzek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wawrzek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wawrzek/subscriptions",
    "organizations_url": "https://api.github.com/users/wawrzek/orgs",
    "repos_url": "https://api.github.com/users/wawrzek/repos",
    "events_url": "https://api.github.com/users/wawrzek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wawrzek/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2016-05-24T10:14:52Z",
  "updated_at": "2016-07-03T20:51:07Z",
  "closed_at": "2016-05-24T13:50:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\n\nGeth version: `Version: 1.4.3-stable`\nOS & Version: Linux ubuntu 14.04 LTS\n#### Expected behaviour\n\nlogs appears in redirection\n#### Actual behaviour\n\nno logs\n#### Steps to reproduce the behaviour\n\nI try to start geth as a daemon using start-stop-daemon functionality using following scripts. There are at least 2 problems. \n1) There is not logs, so I don't exactly know what's going on.\n2) geth seems to die after attempt to create new account (when attached via ipc).\n\n```\n> personal.newAccount()\nPassphrase:\nRepeat passphrase:\nEOF\nfalse\n```\n\n\"ethereum\" script I try to use (derivative from https://gist.github.com/alobato/1968852)\n\n```\n!/bin/sh\nset -e\n\n\nNAME=geth\nPIDFILE=/var/run/$NAME.pid\n\nDAEMON=/usr/bin/geth\nDAEMON_OPTS=\"--rpc --ipcpath /opt/chain/geth.ipc --autodag 2>>~/geth.log\"\n\ncase \"$1\" in\n  start)\n        echo -n \"Starting daemon: \"$NAME\n        start-stop-daemon -v --start --background --make-pidfile --pidfile $PIDFILE --exec $DAEMON -- $DAEMON_OPTS\n        echo \".\"\n        ;;\n  stop)\n        echo -n \"Stopping daemon: \"$NAME\n        start-stop-daemon --stop --oknodo --pidfile $PIDFILE\n        echo \".\"\n        ;;\n  restart)\n        echo -n \"Restarting daemon: \"$NAME\n        start-stop-daemon --stop --quiet --oknodo --retry 30 --pidfile $PIDFILE\n        start-stop-daemon --start --quiet --pidfile $PIDFILE --exec $DAEMON -- $DAEMON_OPTS\n        echo \".\"\n        ;;\n\n  *)\n        echo \"Usage: \"$1\" {start|stop|restart}\"\n        exit 1\nesac\n\nexit 0\n```\n",
  "closed_by": {
    "login": "wawrzek",
    "id": 968748,
    "node_id": "MDQ6VXNlcjk2ODc0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/968748?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wawrzek",
    "html_url": "https://github.com/wawrzek",
    "followers_url": "https://api.github.com/users/wawrzek/followers",
    "following_url": "https://api.github.com/users/wawrzek/following{/other_user}",
    "gists_url": "https://api.github.com/users/wawrzek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wawrzek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wawrzek/subscriptions",
    "organizations_url": "https://api.github.com/users/wawrzek/orgs",
    "repos_url": "https://api.github.com/users/wawrzek/repos",
    "events_url": "https://api.github.com/users/wawrzek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wawrzek/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221240289",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221240289",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221240289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI0MDI4OQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T11:24:13Z",
    "updated_at": "2016-05-24T11:24:13Z",
    "author_association": "MEMBER",
    "body": "It looks like this is an issue with start-stop-daemon. See http://stackoverflow.com/a/13991911 for a possible solution.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221240289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221245654",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221245654",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221245654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI0NTY1NA==",
    "user": {
      "login": "wawrzek",
      "id": 968748,
      "node_id": "MDQ6VXNlcjk2ODc0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/968748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wawrzek",
      "html_url": "https://github.com/wawrzek",
      "followers_url": "https://api.github.com/users/wawrzek/followers",
      "following_url": "https://api.github.com/users/wawrzek/following{/other_user}",
      "gists_url": "https://api.github.com/users/wawrzek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wawrzek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wawrzek/subscriptions",
      "organizations_url": "https://api.github.com/users/wawrzek/orgs",
      "repos_url": "https://api.github.com/users/wawrzek/repos",
      "events_url": "https://api.github.com/users/wawrzek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wawrzek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T11:52:10Z",
    "updated_at": "2016-05-24T11:52:10Z",
    "author_association": "NONE",
    "body": "Actually, I hoped that start-stop-daemon will help me with stdout/strerr mess you decided to have.\n\nAnyway, I decided temporary use '-C' option in start-stop-daemon and the problem 2) seems to be cause by low memory. That might be a case as I'm testing my script in vagrant with 0.5 GB of memory.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221245654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221246714",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221246714",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221246714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI0NjcxNA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T11:57:40Z",
    "updated_at": "2016-05-24T11:59:45Z",
    "author_association": "MEMBER",
    "body": ">  help me with stdout/strerr mess you decided to have\n\nThat sounds very constructive.\n\nI think you will be better off using upstart or systemd instead of an rc.d style init script.\nLogging to stderr and not double forking into background work nicely with those init systems.\nIt also works very well with supervisord, launchd and any other recent decent init.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221246714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221275915",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221275915",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221275915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI3NTkxNQ==",
    "user": {
      "login": "wawrzek",
      "id": 968748,
      "node_id": "MDQ6VXNlcjk2ODc0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/968748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wawrzek",
      "html_url": "https://github.com/wawrzek",
      "followers_url": "https://api.github.com/users/wawrzek/followers",
      "following_url": "https://api.github.com/users/wawrzek/following{/other_user}",
      "gists_url": "https://api.github.com/users/wawrzek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wawrzek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wawrzek/subscriptions",
      "organizations_url": "https://api.github.com/users/wawrzek/orgs",
      "repos_url": "https://api.github.com/users/wawrzek/repos",
      "events_url": "https://api.github.com/users/wawrzek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wawrzek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T13:50:51Z",
    "updated_at": "2016-05-24T13:50:51Z",
    "author_association": "NONE",
    "body": "a)  I can confirm that my problem with dying geth is related to memory. Virtual Box with 2GB is fine.\n\nb) \n\n>  It looks like this is an issue with start-stop-daemon. See http://stackoverflow.com/a/13991911 for a possible solution.\n\nThanks for sharing this link seems that with following change to my 'start definition': \n\n```\n[...]\nDAEMON=/usr/bin/geth\nDAEMON_OPTS=\"--rpc --ipcapi 'admin,db,eth,debug,miner,net,shh,txpool,personal,web3' --ipcpath /opt/chain/geth.ipc --verbosity 3  --autodag\"\n[...]\nstart-stop-daemon -v --start  --background --make-pidfile --pidfile $PIDFILE --startas /bin/bash -- -c \"exec $DAEMON $DAEMON_OPTS 2>>/var/log/geth.log\"\n```\n\nc) Actually using supervisord or something similar might be the better approach, if you think that works.\n\nd)\n\n> >   help me with stdout/strerr mess you decided to have\n> \n> That sounds very constructive.\n\nIn https://github.com/ethereum/go-ethereum/issues/2495 you made clear that you don't think proper logging is important feature. That's fine - your write the code and support the project. However, it doesn't mean every one has to agree with you. Based on my experience lack of proper logging and daemon switch are main usability issue (along with lack way to create new account with RPC - however, I imagine that one might have some security implication).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221275915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221277964",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221277964",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221277964,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI3Nzk2NA==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T13:56:29Z",
    "updated_at": "2016-05-24T13:58:26Z",
    "author_association": "MEMBER",
    "body": "If you want to try supervisord, maybe check\nout this config that we used to have in the docker hub container: https://github.com/ethereum/go-ethereum/blob/3b4ffacd0c63952ceda96b3fafb050c91e72b420/docker/supervisord.conf#L4\n\nI would not recommend `stopsignal=QUIT` (you'll get lots of useless output on exit)\nbut the other settings should be ok. You probably also want to run it as a non-root user ;)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221277964/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221299941",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221299941",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221299941,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI5OTk0MQ==",
    "user": {
      "login": "wawrzek",
      "id": 968748,
      "node_id": "MDQ6VXNlcjk2ODc0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/968748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wawrzek",
      "html_url": "https://github.com/wawrzek",
      "followers_url": "https://api.github.com/users/wawrzek/followers",
      "following_url": "https://api.github.com/users/wawrzek/following{/other_user}",
      "gists_url": "https://api.github.com/users/wawrzek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wawrzek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wawrzek/subscriptions",
      "organizations_url": "https://api.github.com/users/wawrzek/orgs",
      "repos_url": "https://api.github.com/users/wawrzek/repos",
      "events_url": "https://api.github.com/users/wawrzek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wawrzek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T15:02:17Z",
    "updated_at": "2016-05-24T15:02:17Z",
    "author_association": "NONE",
    "body": "Why did you hid it so well? It works!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221299941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221321806",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-221321806",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 221321806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTMyMTgwNg==",
    "user": {
      "login": "gituser",
      "id": 104405,
      "node_id": "MDQ6VXNlcjEwNDQwNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/104405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gituser",
      "html_url": "https://github.com/gituser",
      "followers_url": "https://api.github.com/users/gituser/followers",
      "following_url": "https://api.github.com/users/gituser/following{/other_user}",
      "gists_url": "https://api.github.com/users/gituser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gituser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gituser/subscriptions",
      "organizations_url": "https://api.github.com/users/gituser/orgs",
      "repos_url": "https://api.github.com/users/gituser/repos",
      "events_url": "https://api.github.com/users/gituser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gituser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T16:09:17Z",
    "updated_at": "2016-05-24T16:09:17Z",
    "author_association": "NONE",
    "body": "Still... why not to implement proper daemon mode?\n\nI don't get it at all.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/221321806/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/230174629",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2607#issuecomment-230174629",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2607",
    "id": 230174629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMDE3NDYyOQ==",
    "user": {
      "login": "ajankuv",
      "id": 12450513,
      "node_id": "MDQ6VXNlcjEyNDUwNTEz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12450513?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajankuv",
      "html_url": "https://github.com/ajankuv",
      "followers_url": "https://api.github.com/users/ajankuv/followers",
      "following_url": "https://api.github.com/users/ajankuv/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajankuv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajankuv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajankuv/subscriptions",
      "organizations_url": "https://api.github.com/users/ajankuv/orgs",
      "repos_url": "https://api.github.com/users/ajankuv/repos",
      "events_url": "https://api.github.com/users/ajankuv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajankuv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-03T20:51:07Z",
    "updated_at": "2016-07-03T20:51:07Z",
    "author_association": "NONE",
    "body": "+1 for daemon mode not having this is modern day software seems weird.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/230174629/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

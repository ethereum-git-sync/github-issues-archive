{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3124",
  "id": 182282654,
  "node_id": "MDU6SXNzdWUxODIyODI2NTQ=",
  "number": 3124,
  "title": "Blocks importing out of order?",
  "user": {
    "login": "ntpeters",
    "id": 1189211,
    "node_id": "MDQ6VXNlcjExODkyMTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1189211?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ntpeters",
    "html_url": "https://github.com/ntpeters",
    "followers_url": "https://api.github.com/users/ntpeters/followers",
    "following_url": "https://api.github.com/users/ntpeters/following{/other_user}",
    "gists_url": "https://api.github.com/users/ntpeters/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ntpeters/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ntpeters/subscriptions",
    "organizations_url": "https://api.github.com/users/ntpeters/orgs",
    "repos_url": "https://api.github.com/users/ntpeters/repos",
    "events_url": "https://api.github.com/users/ntpeters/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ntpeters/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-10-11T14:42:05Z",
  "updated_at": "2016-10-12T14:02:14Z",
  "closed_at": "2016-10-12T14:02:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\n\nGeth version: `1.4.17`\nOS & Version: macOS 10.12\nCommit hash : 1.4.17 release, installed via brew\n#### Expected behaviour\n\nI would assume that blocks need to be imported in order. Sorry if I'm missing something and this is somehow expected.\n#### Actual behaviour\n\nThis is a small section from this sync, but at the points marked below it appears that the sync moves back to older blocks (full log output of these lines below):\n\n```\n2398765\n2399895\n2398809\n2400087\n2400279\n2400286\n> 2399001\n2398812\n2399193\n2399385\n2398816\n2399577\n2399008\n2398818\n2399200\n2399392\n2398834\n2399584\n> 2380810\n2381002\n2381194\n2381851\n2382043\n2382235\n```\n#### Steps to reproduce the behaviour\n\n```\ngeth --cache 2048 --targetgaslimit 1500000 --gasprice 20000000000 --fast console\n```\n#### Backtrace\n\nRelevant portion:\n\n```\nI1011 09:19:54.749180 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:01.763063 core/blockchain.go:764] imported 95 receipt(s) (0 ignored) in 54.043083ms. #2398765 [50feb0aa… / 4f02b15a…]\nI1011 09:20:02.248359 core/headerchain.go:297] imported 192 header(s) (0 ignored) in 339.020495ms. #2399895 [1aca5d1b… / 2ef76017…]\nI1011 09:20:02.468448 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:06.727854 core/blockchain.go:764] imported 44 receipt(s) (0 ignored) in 21.943721ms. #2398809 [74561253… / cfa4257d…]\nI1011 09:20:07.300885 core/headerchain.go:297] imported 192 header(s) (0 ignored) in 308.952063ms. #2400087 [739242b7… / 1c68311c…]\nI1011 09:20:08.127458 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:12.274030 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:15.293154 core/headerchain.go:297] imported 192 header(s) (0 ignored) in 433.650845ms. #2400279 [a06f4d98… / bfa76067…]\nI1011 09:20:16.534697 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:20.934377 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:20.952781 core/headerchain.go:297] imported 7 header(s) (0 ignored) in 16.154711ms. #2400286 [c27efb9a… / 63c700ea…]\nI1011 09:20:26.054761 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:30.634056 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:37.159380 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:42.983930 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:51.498452 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:55.405756 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:20:59.897874 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:04.076377 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:08.796262 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:11.224843 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:16.010767 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:20.884784 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:21.633010 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:31.779544 eth/downloader/downloader.go:948] imported 1 state entries in 14.273834ms: processed 1814, pending at least 17\nI1011 09:21:33.139114 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.29913ms. #2399001 [6783669f… / d3ce02f3…]\nI1011 09:21:33.381146 eth/downloader/downloader.go:948] imported 3 state entries in 25.527386ms: processed 1817, pending at least 65\nI1011 09:21:33.802803 core/blockchain.go:764] imported 3 receipt(s) (0 ignored) in 2.146532ms. #2398812 [6783669f… / a681490f…]\nI1011 09:21:33.804620 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.297651ms. #2399193 [4d016651… / 11b3a1bc…]\nI1011 09:21:33.941082 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:34.140413 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.817916ms. #2399385 [e60b8c89… / ef757983…]\nI1011 09:21:34.431440 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:21:34.436805 core/blockchain.go:764] imported 4 receipt(s) (0 ignored) in 4.485463ms. #2398816 [8b2e9a86… / b6b2de15…]\nI1011 09:21:34.458405 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.459231ms. #2399577 [82703c73… / 16e02dc3…]\nI1011 09:22:00.139692 eth/downloader/downloader.go:948] imported 1 state entries in 14.875946ms: processed 1818, pending at least 17\nI1011 09:22:00.633653 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.762085ms. #2399008 [7c12a183… / a22ad495…]\nI1011 09:22:00.708215 eth/downloader/downloader.go:948] imported 9 state entries in 83.498205ms: processed 1827, pending at least 161\nI1011 09:22:00.978528 core/blockchain.go:764] imported 2 receipt(s) (0 ignored) in 2.773486ms. #2398818 [7c12a183… / a6abcdc4…]\nI1011 09:22:00.982861 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 2.085533ms. #2399200 [dfa06276… / 8ede718a…]\nI1011 09:22:01.019444 eth/downloader/downloader.go:948] imported 7 state entries in 47.72463ms: processed 1834, pending at least 273\nI1011 09:22:01.170759 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.652077ms. #2399392 [1188244e… / ce06953e…]\nI1011 09:22:01.312775 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:22:01.651656 eth/downloader/downloader.go:925] peer de471bccee3d0422: replied to stale state request, forgiving\nI1011 09:22:01.656168 core/blockchain.go:764] imported 16 receipt(s) (0 ignored) in 14.597906ms. #2398834 [253d426d… / 197890ae…]\nI1011 09:22:01.657333 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.808097ms. #2399584 [ba0fa41d… / f2110263…]\nI1011 09:24:00.396763 eth/downloader/downloader.go:948] imported 1 state entries in 10.40066ms: processed 1835, pending at least 17\nI1011 09:24:00.693811 eth/downloader/downloader.go:948] imported 8 state entries in 56.643941ms: processed 1843, pending at least 131\nI1011 09:24:08.027390 eth/downloader/downloader.go:948] imported 8 state entries in 43.739589ms: processed 1851, pending at least 253\nI1011 09:24:08.132542 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.228046ms. #2380810 [5c2ab3a9… / 024f7fa4…]\nI1011 09:24:10.185493 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.261686ms. #2381002 [e8938f8a… / 4cad7ef0…]\nI1011 09:24:10.383790 eth/downloader/downloader.go:925] peer 1118980bf48b0a36: replied to stale state request, forgiving\nI1011 09:24:14.325847 eth/downloader/downloader.go:925] peer 1118980bf48b0a36: replied to stale state request, forgiving\nI1011 09:24:14.444854 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.303059ms. #2381194 [7e2f5984… / 67d7ef95…]\nI1011 09:26:49.990296 eth/downloader/downloader.go:948] imported 1 state entries in 5.642256ms: processed 1852, pending at least 17\nI1011 09:26:50.180590 eth/downloader/downloader.go:948] imported 16 state entries in 73.174476ms: processed 1868, pending at least 273\nI1011 09:26:50.443615 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.331987ms. #2381851 [9bfe42d9… / 21be4822…]\nI1011 09:26:50.946635 eth/downloader/downloader.go:925] peer a979fb575495b8d6: replied to stale state request, forgiving\nI1011 09:26:51.062666 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 1.27301ms. #2382043 [9a92f6ff… / dd8e3cbf…]\nI1011 09:26:51.071261 eth/downloader/downloader.go:948] imported 1 state entries in 4.16322ms: processed 1869, pending at least 17\nI1011 09:26:51.215085 eth/downloader/downloader.go:948] imported 16 state entries in 24.374581ms: processed 1885, pending at least 253\nI1011 09:26:51.224199 core/headerchain.go:297] imported 0 header(s) (192 ignored) in 2.082496ms. #2382235 [e7b44c7e… / 79b1d53c…]\n```\n",
  "closed_by": {
    "login": "ntpeters",
    "id": 1189211,
    "node_id": "MDQ6VXNlcjExODkyMTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1189211?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ntpeters",
    "html_url": "https://github.com/ntpeters",
    "followers_url": "https://api.github.com/users/ntpeters/followers",
    "following_url": "https://api.github.com/users/ntpeters/following{/other_user}",
    "gists_url": "https://api.github.com/users/ntpeters/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ntpeters/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ntpeters/subscriptions",
    "organizations_url": "https://api.github.com/users/ntpeters/orgs",
    "repos_url": "https://api.github.com/users/ntpeters/repos",
    "events_url": "https://api.github.com/users/ntpeters/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ntpeters/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253158197",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3124#issuecomment-253158197",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124",
    "id": 253158197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzE1ODE5Nw==",
    "user": {
      "login": "ethernomad",
      "id": 161566,
      "node_id": "MDQ6VXNlcjE2MTU2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/161566?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethernomad",
      "html_url": "https://github.com/ethernomad",
      "followers_url": "https://api.github.com/users/ethernomad/followers",
      "following_url": "https://api.github.com/users/ethernomad/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethernomad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethernomad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethernomad/subscriptions",
      "organizations_url": "https://api.github.com/users/ethernomad/orgs",
      "repos_url": "https://api.github.com/users/ethernomad/repos",
      "events_url": "https://api.github.com/users/ethernomad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethernomad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-12T09:01:22Z",
    "updated_at": "2016-10-12T09:01:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "That's just how it works. Ultimately everyone ends up with the same blocks or the whole thing falls apart.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253158197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253221348",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3124#issuecomment-253221348",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124",
    "id": 253221348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzIyMTM0OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-12T13:59:49Z",
    "updated_at": "2016-10-12T13:59:49Z",
    "author_association": "MEMBER",
    "body": "Seems to me fast sync interrupted (due to your master peer dropping) and resumed afterwards. In those cases the top 2K blocks are discarded and pulled over for security reasons. Didn't your log contain \"Rolled back ...\" message?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253221348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253221980",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3124#issuecomment-253221980",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3124",
    "id": 253221980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzIyMTk4MA==",
    "user": {
      "login": "ntpeters",
      "id": 1189211,
      "node_id": "MDQ6VXNlcjExODkyMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1189211?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ntpeters",
      "html_url": "https://github.com/ntpeters",
      "followers_url": "https://api.github.com/users/ntpeters/followers",
      "following_url": "https://api.github.com/users/ntpeters/following{/other_user}",
      "gists_url": "https://api.github.com/users/ntpeters/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ntpeters/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ntpeters/subscriptions",
      "organizations_url": "https://api.github.com/users/ntpeters/orgs",
      "repos_url": "https://api.github.com/users/ntpeters/repos",
      "events_url": "https://api.github.com/users/ntpeters/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ntpeters/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-12T14:02:14Z",
    "updated_at": "2016-10-12T14:02:14Z",
    "author_association": "NONE",
    "body": "@karalabe Ah, yes it did. Wasn't included here as I didn't notice it when pulling out this part of the log. Thanks for the explanation, since I'd never seen this before. Closing.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/253221980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

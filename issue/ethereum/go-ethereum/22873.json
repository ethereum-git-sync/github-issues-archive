{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22873",
  "id": 891108758,
  "node_id": "MDU6SXNzdWU4OTExMDg3NTg=",
  "number": 22873,
  "title": "Сan't sync last 64-100 block",
  "user": {
    "login": "ArtemkaMakarenko",
    "id": 70571597,
    "node_id": "MDQ6VXNlcjcwNTcxNTk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/70571597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ArtemkaMakarenko",
    "html_url": "https://github.com/ArtemkaMakarenko",
    "followers_url": "https://api.github.com/users/ArtemkaMakarenko/followers",
    "following_url": "https://api.github.com/users/ArtemkaMakarenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/ArtemkaMakarenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ArtemkaMakarenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ArtemkaMakarenko/subscriptions",
    "organizations_url": "https://api.github.com/users/ArtemkaMakarenko/orgs",
    "repos_url": "https://api.github.com/users/ArtemkaMakarenko/repos",
    "events_url": "https://api.github.com/users/ArtemkaMakarenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ArtemkaMakarenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-05-13T14:50:49Z",
  "updated_at": "2021-05-14T06:56:56Z",
  "closed_at": "2021-05-14T06:56:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Ethereum node stuck, and can't sync last 64-100 block.\r\ncurrentBlock cannot catch up and be equal to highestBlock\r\nI studied these articles but none of the above solved my problem.\r\nhttps://github.com/ethereum/mist/issues/3760#issuecomment-390892894\r\nhttps://geth.ethereum.org/docs/faq\r\n#### System information\r\nran on a powerful server on ssd disks. \r\nuse docker image ethereum/client-go:v1.10.3 , ethereum/client-go:v1.10.2 , ethereum/client-go:v1.10.1 \r\n/ # geth version\r\nGeth\r\nVersion: 1.10.3-stable\r\nGit Commit: 991384a7f6719e1125ca0be7fb27d0c4d1c5d2d3\r\nGit Commit Date: 20210505\r\nArchitecture: amd64\r\nGo Version: go1.16.3\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=go\r\n/ # \r\n/ # geth attach http://127.0.0.1:8545\r\nWelcome to the Geth JavaScript console!\r\ninstance: Geth/v1.10.3-stable-991384a7/linux-amd64/go1.16.3\r\nat block: 0 (Thu Jan 01 1970 00:00:00 GMT+0000 (UTC))\r\n modules: debug:1.0 eth:1.0 net:1.0 personal:1.0 rpc:1.0 web3:1.0\r\nTo exit, press ctrl-d\r\n> eth.syncing\r\n{\r\n  currentBlock: 12426171,\r\n  highestBlock: 12426265,\r\n  knownStates: 475449342,\r\n  pulledStates: 475423888,\r\n  startingBlock: 12424165\r\n}\r\n> eth.syncing\r\n{\r\n  currentBlock: 12426171,\r\n  highestBlock: 12426286,\r\n  knownStates: 475480967,\r\n  pulledStates: 475456631,\r\n  startingBlock: 12424165\r\n}\r\n> eth.syncing\r\n{\r\n  currentBlock: 12426171,\r\n  highestBlock: 12426293,\r\n  knownStates: 475496629,\r\n  pulledStates: 475473187,\r\n  startingBlock: 12424165\r\n} \r\n> eth.syncing\r\n{\r\n  currentBlock: 12426235,\r\n  highestBlock: 12426300,\r\n  knownStates: 475504019,\r\n  pulledStates: 475481500,\r\n  startingBlock: 12424165\r\n}\r\n> eth.syncing\r\n{\r\n  currentBlock: 12426299,\r\n  highestBlock: 12426365,\r\n  knownStates: 475621554,\r\n  pulledStates: 475581058,\r\n  startingBlock: 12424165\r\n}\r\n> eth.syncing\r\n{\r\n  currentBlock: 12426427,\r\n  highestBlock: 12426502,\r\n  knownStates: 478070262,\r\n  pulledStates: 477957170,\r\n  startingBlock: 12424165\r\n}\r\nlogs \r\nINFO [05-13|13:43:54.657] Imported new block headers               count=2    elapsed=49.410ms    number=12,426,352 hash=eef0b3..d4cfd0\r\nINFO [05-13|13:43:55.459] Downloader queue stats                   receiptTasks=0    blockTasks=0    itemSize=262.42KiB throttle=250\r\nINFO [05-13|13:43:56.618] Imported new state entries               count=384  elapsed=\"83.075µs\"  processed=475,562,946 pending=54956 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nWARN [05-13|13:43:57.113] Stalling state sync, dropping peer       peer=c01e5f123f4272e3cffc2a73da9d1424f6c57c8f9dc4ab1927218173c47a37aa\r\nERROR[05-13|13:43:57.132] Ethereum peer removal failed             peer=c01e5f12 err=\"peer not registered\"\r\nINFO [05-13|13:44:00.347] Imported new state entries               count=768  elapsed=22.575ms    processed=475,563,714 pending=54232 trieretry=2   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:00.533] Initializing state bloom                 items=201,268,138 errorrate=0.000 elapsed=28m18.731s\r\nINFO [05-13|13:44:07.334] Imported new block headers               count=1    elapsed=18.526ms    number=12,426,353 hash=02f20b..fbafb2\r\nINFO [05-13|13:44:08.539] Initializing state bloom                 items=201,276,006 errorrate=0.000 elapsed=28m26.737s\r\nINFO [05-13|13:44:08.750] Imported new state entries               count=384  elapsed=\"3.766µs\"   processed=475,564,098 pending=54629 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nWARN [05-13|13:44:10.031] Dropping unsynced node during sync       id=53455744030e83cc conn=dyndial         addr=143.198.119.44:30303  type=Geth/v1.10.1-stable-...\r\nINFO [05-13|13:44:13.337] Imported new state entries               count=384  elapsed=2.902ms     processed=475,564,482 pending=54335 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:16.556] Initializing state bloom                 items=201,283,706 errorrate=0.000 elapsed=28m34.754s\r\nINFO [05-13|13:44:17.701] Imported new state entries               count=384  elapsed=3.100ms     processed=475,564,866 pending=54026 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:20.812] Imported new state entries               count=384  elapsed=2.336ms     processed=475,565,250 pending=53869 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:24.556] Initializing state bloom                 items=201,292,766 errorrate=0.000 elapsed=28m42.754s\r\nINFO [05-13|13:44:26.589] Imported new state entries               count=384  elapsed=1.913ms     processed=475,565,634 pending=53781 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:32.354] Imported new state entries               count=384  elapsed=1.437ms     processed=475,566,018 pending=53912 trieretry=2   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:32.531] Imported new block headers               count=1    elapsed=6.185ms     number=12,426,354 hash=f41b8a..83ef78\r\nINFO [05-13|13:44:32.561] Initializing state bloom                 items=201,301,452 errorrate=0.000 elapsed=28m50.759s\r\nWARN [05-13|13:44:32.752] Dropping unsynced node during sync       id=7a163552d8aeafa5 conn=dyndial         addr=198.199.77.203:30303  type=Geth/v1.10.1-stable-...\r\nINFO [05-13|13:44:35.809] Imported new state entries               count=384  elapsed=1.823ms     processed=475,566,402 pending=54206 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:38.979] Imported new block headers               count=2    elapsed=38.064ms    number=12,426,356 hash=a3c3a8..99ad3a\r\nINFO [05-13|13:44:40.565] Initializing state bloom                 items=201,309,491 errorrate=0.000 elapsed=28m58.763s\r\nINFO [05-13|13:44:42.660] Imported new state entries               count=770  elapsed=10.452ms    processed=475,567,172 pending=54883 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:48.569] Initializing state bloom                 items=201,316,918 errorrate=0.000 elapsed=29m6.767s\r\nINFO [05-13|13:44:51.768] Imported new block headers               count=1    elapsed=6.028ms     number=12,426,357 hash=c620f2..97c754\r\nINFO [05-13|13:44:51.856] Imported new state entries               count=768  elapsed=15.386ms    processed=475,567,940 pending=55127 trieretry=382 coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:44:55.007] Imported new block headers               count=1    elapsed=18.947ms    number=12,426,358 hash=5c8cb6..f90ef1\r\nINFO [05-13|13:44:55.783] Downloader queue stats                   receiptTasks=0    blockTasks=0    itemSize=269.09KiB throttle=244\r\nINFO [05-13|13:44:56.577] Initializing state bloom                 items=201,325,247 errorrate=0.000 elapsed=29m14.774s\r\nINFO [05-13|13:45:00.834] Imported new state entries               count=665  elapsed=9.326ms     processed=475,568,605 pending=55605 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:01.414] Imported new block headers               count=1    elapsed=6.023ms     number=12,426,359 hash=74fd69..d710af\r\nINFO [05-13|13:45:04.577] Initializing state bloom                 items=201,333,360 errorrate=0.000 elapsed=29m22.774s\r\nINFO [05-13|13:45:04.832] Imported new state entries               count=384  elapsed=3.715ms     processed=475,568,989 pending=55285 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:08.878] Imported new state entries               count=384  elapsed=1.571ms     processed=475,569,373 pending=55448 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:10.890] Imported new block headers               count=2    elapsed=11.313ms    number=12,426,361 hash=366ee7..2a437e\r\nINFO [05-13|13:45:12.545] Imported new state entries               count=768  elapsed=2.382ms     processed=475,570,141 pending=55816 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:12.577] Initializing state bloom                 items=201,349,114 errorrate=0.000 elapsed=29m30.774s\r\nINFO [05-13|13:45:15.022] Imported new state entries               count=384  elapsed=1.146ms     processed=475,570,525 pending=56079 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:16.495] Imported new state entries               count=384  elapsed=5.304ms     processed=475,570,909 pending=55986 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:18.115] Imported new state entries               count=384  elapsed=1.039ms     processed=475,571,293 pending=56242 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:20.577] Initializing state bloom                 items=201,373,498 errorrate=0.000 elapsed=29m38.775s\r\nINFO [05-13|13:45:21.194] Imported new state entries               count=384  elapsed=1.254ms     processed=475,571,677 pending=56386 trieretry=2   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:23.299] Imported new state entries               count=384  elapsed=2.142ms     processed=475,572,061 pending=56455 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:25.425] Imported new state entries               count=386  elapsed=2.169ms     processed=475,572,447 pending=56460 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:27.313] Imported new state entries               count=768  elapsed=5.299ms     processed=475,573,215 pending=55935 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:28.577] Initializing state bloom                 items=201,399,715 errorrate=0.000 elapsed=29m46.775s\r\nINFO [05-13|13:45:31.571] Imported new state entries               count=384  elapsed=\"174.6µs\"   processed=475,573,599 pending=56432 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nWARN [05-13|13:45:31.572] Stalling state sync, dropping peer       peer=302e88cf2fba4a6de2ec13bb056aa5c8b1ea4edb3aeaefdff4da036fcda0ce26\r\nERROR[05-13|13:45:31.573] Ethereum peer removal failed             peer=302e88cf err=\"peer not registered\"\r\nINFO [05-13|13:45:33.432] Imported new state entries               count=687  elapsed=5.249ms     processed=475,574,286 pending=55881 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:36.577] Initializing state bloom                 items=201,424,595 errorrate=0.000 elapsed=29m54.775s\r\nINFO [05-13|13:45:36.895] Imported new state entries               count=768  elapsed=2.948ms     processed=475,575,054 pending=56028 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:37.902] Imported new state entries               count=768  elapsed=5.552ms     processed=475,575,822 pending=55432 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:39.007] Imported new block headers               count=1    elapsed=16.308ms    number=12,426,362 hash=fe3f59..791ac4\r\nINFO [05-13|13:45:39.880] Imported new state entries               count=768  elapsed=4.253ms     processed=475,576,590 pending=55262 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nWARN [05-13|13:45:39.888] Pivot became stale, moving               old=12,426,236 new=12,426,300\r\nINFO [05-13|13:45:40.288] Imported new block receipts              count=64   elapsed=398.398ms   number=12,426,299 hash=35e037..3fee26 age=14m      size=6.90MiB\r\nINFO [05-13|13:45:41.295] Imported new state entries               count=384  elapsed=4.387ms     processed=475,576,974 pending=54848 trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\nINFO [05-13|13:45:42.080] Imported new state entries               count=273  elapsed=\"3.579µs\"   processed=475,577,247 pending=4332  trieretry=0   coderetry=0 duplicate=273 unexpected=876\r\n\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/841053696",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22873#issuecomment-841053696",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22873",
    "id": 841053696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTA1MzY5Ng==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-14T06:56:56Z",
    "updated_at": "2021-05-14T06:56:56Z",
    "author_association": "MEMBER",
    "body": "It's not stuck, it needs to sync the state now.\r\nAn Ethereum node has all old blocks and the current state of all smart contracts/balances. During sync we need to download all old blocks and the current state. Your node has synced the old blocks, but it has not synced the state yet.\r\nYou can see that the `knownStates` which are the states that you need to download differ from the `pulledStates` which are the states that you already downloaded. The `pulledStates` are increasing between subsequent calls to `eth.syncing` which indicates that you node is downloading the state. So your not stuck, you just need to download more. You can run `--syncmode=snap` instead of fast sync which improves the state download drastically.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/841053696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

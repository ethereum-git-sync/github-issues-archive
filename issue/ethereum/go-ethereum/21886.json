{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21886",
  "id": 748132928,
  "node_id": "MDU6SXNzdWU3NDgxMzI5Mjg=",
  "number": 21886,
  "title": "eth_call revert error code for Execution Errors",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1157707837,
      "node_id": "MDU6TGFiZWwxMTU3NzA3ODM3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:rpc",
      "name": "area:rpc",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-11-22T00:41:42Z",
  "updated_at": "2020-11-26T09:30:09Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "In comparing a revert error from an `eth_call` between nodes, I noticed that Geth returns a generic(?) error code during a revert. Where as Nethermind returns a specific error code, and I THINK Parity/OpenEthereum is also returning the same error code as Nethermind. I'm wondering why Geth doesn't?\r\n\r\nThe Parity/OpenEthereum line referencing the specific error code is here (I think):\r\nhttps://github.com/openethereum/openethereum/blob/main/rpc/src/v1/helpers/errors.rs#L41\r\n\r\nThe Nethermind line is here (I think):\r\nhttps://github.com/NethermindEth/nethermind/blob/master/src/Nethermind/Nethermind.JsonRpc/ErrorType.cs#L91\r\n\r\nThe Geth errors.go file does not seem to have a similar error code, so I get the generic -32000:\r\nhttps://github.com/ethereum/go-ethereum/blob/master/rpc/errors.go\r\n\r\nUnfortunately, I was given this curl command from someone else while investigating an error and OpenEthereum doesn't seem to like it, so I only have outputs from Geth and Nethermind, I only looked at OpenEthereum code to see if I could find a reference to that specific error code, and I could. I cannot with Geth searching github.\r\n\r\nHere's a sample POST body\r\n```\r\n{\"jsonrpc\":\"2.0\",\"method\":\"eth_call\",\"params\":[{\"data\":\"0x06fdde03\",\"to\":\"0x1f0d3048b3d49de0ed6169a443dbb049e6daa6ce\"},{\"blockHash\":\"0xa5626dc20d3a0a209b1de85521717a3e859698de8ce98bca1b16822b7501f74b\"}],\"id\":1}\r\n```\r\n\r\nHere's the result from Geth, as you can see it's a generic error code:\r\n```\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"error\": {\r\n    \"code\": -32000,\r\n    \"message\": \"execution reverted\"\r\n  }\r\n}\r\n```\r\n\r\nHere's the result from Nethermind:\r\n```\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"error\": {\r\n    \"code\": -32015,\r\n    \"message\": \"VM execution error.\",\r\n    \"data\": \"revert\"\r\n  },\r\n  \"id\": 1\r\n}\r\n```\r\n\r\nWhile Google searching, I did find a stackexchange referencing the same 32015 error code, from Infura, on Kovan, so I'm guessing that Parity/OE would agree on the error code if I could query it ðŸ˜„ \r\n\r\nAnyway, should the error code be 32015 for a revert of this nature?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731896468",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-731896468",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 731896468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTg5NjQ2OA==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T02:28:54Z",
    "updated_at": "2020-11-23T02:29:02Z",
    "author_association": "MEMBER",
    "body": "For the `eth_call` `eth_estimate`, they will all return a concrete **revert reason** if they are available. I'm not sure whether it's the specific error you want. \r\n\r\nIn your testcase, is there a  concrete revert reason available? If so but Geth returns nothing, please open an issue!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731896468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731903426",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-731903426",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 731903426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTkwMzQyNg==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T03:05:12Z",
    "updated_at": "2020-11-23T03:05:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure I understand the reply, I'm asking specifically about the \"code\" -32015 vs -32000 for an execution error.\r\n\r\nWhen a revert occures, the response is an error, which contains an error code, and if you're trying to determine \"did the node error out on this request? Or was this a genuine reply?\" then the error code matters.\r\n\r\nI'm not the developer of the linked `dshackle` application, but my assumption here is that because the error codes are different, it cannot come to a quorum and it thinks the nodes are just erroring out for different reasons.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731903426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731904706",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-731904706",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 731904706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTkwNDcwNg==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T03:12:25Z",
    "updated_at": "2020-11-23T03:12:25Z",
    "author_association": "MEMBER",
    "body": "Yeah it's true in Geth the generic error code `-32000` is returned(if the execution is failed). But in the ethereum jsonrpc doc, there is no consensus that which error code refers to the `execution revert` error. https://eth.wiki/json-rpc/json-rpc-error-codes-improvement-proposal\r\n\r\nSo here we return the concrete the revert reason. Developers can distinguish the error types via it?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731904706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731908578",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-731908578",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 731908578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTkwODU3OA==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T03:30:34Z",
    "updated_at": "2020-11-23T03:30:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "That would be fine if all of the clients were doing the same thing, but they're not. The code is different, as is the \"message\" and when dealing with APIs parsing a string message with a regex or whatever is far less ideal than checking the error code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731908578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731910125",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-731910125",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 731910125,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTkxMDEyNQ==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T03:37:41Z",
    "updated_at": "2020-11-23T03:37:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like maybe that error code improvement proposal would solve the problem (eventually?)\r\n\r\nI don't know, I'm really just playing middleman here between client implementations and tools.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/731910125/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/734179979",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-734179979",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 734179979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDE3OTk3OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T09:24:01Z",
    "updated_at": "2020-11-26T09:24:01Z",
    "author_association": "MEMBER",
    "body": "> It looks like maybe that error code improvement proposal would solve the problem (eventually?)\r\n\r\nLooks very strange to me -- it adds another layer of error codes inside the error codes. I think it would be more realistic to come to consensus about which JSON-RPC error codes in the \"reserved space\" of `-32000 ... ` to use for which error. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/734179979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/734183438",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21886#issuecomment-734183438",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21886",
    "id": 734183438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDE4MzQzOA==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T09:30:09Z",
    "updated_at": "2020-11-26T09:30:09Z",
    "author_association": "MEMBER",
    "body": "It needs standartisation - ideally as an EIP. Then be added to tests.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/734183438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

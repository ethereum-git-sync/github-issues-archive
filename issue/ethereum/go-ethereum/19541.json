{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19541",
  "id": 441861438,
  "node_id": "MDU6SXNzdWU0NDE4NjE0Mzg=",
  "number": 19541,
  "title": "Some geth peers disconnect randomly, in private chin?",
  "user": {
    "login": "jianwei20",
    "id": 18433369,
    "node_id": "MDQ6VXNlcjE4NDMzMzY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/18433369?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jianwei20",
    "html_url": "https://github.com/jianwei20",
    "followers_url": "https://api.github.com/users/jianwei20/followers",
    "following_url": "https://api.github.com/users/jianwei20/following{/other_user}",
    "gists_url": "https://api.github.com/users/jianwei20/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jianwei20/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jianwei20/subscriptions",
    "organizations_url": "https://api.github.com/users/jianwei20/orgs",
    "repos_url": "https://api.github.com/users/jianwei20/repos",
    "events_url": "https://api.github.com/users/jianwei20/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jianwei20/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-05-08T18:08:54Z",
  "updated_at": "2019-05-14T15:09:40Z",
  "closed_at": "2019-05-14T15:09:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `v 1.6.7`\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n\r\nHundreds of nodes connect in private chin.\r\n\r\n#### Actual behaviour\r\n\r\nSome geth peers disconnect randomly, in private chin.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI would like to build a private chain with hundreds of nodes.I Use static-nodes.json to connect each others. When I start each nodes synchronously, there are some nodes disconnect from my private chain randomly. The number of connecting nodes always change\r\n\r\n\r\nThis is command starting geth \r\n```\r\n../build/bin/geth --networkid 2234 --port 30303 --rpcport 8545 --datadir \"data1/node1\" --nodiscover --maxpeers 100 --rpc --rpccorsdomain \"*\" --rpcapi \"eth,net,web3,debug\" --bft --allow-empty --num-validators 100 --node-num 0\r\n``` \r\nI Use static-nodes.json to connect each others like below.\r\n```\r\n\"enode://e76ebac548ee2d5fc79f3e1ab8d7b17214966c6ab369dd980c76fb9fe96521af4d4f79cd4ade59f05d58744e1ffda3ad5b5ee6684ac8c7c52f07acca965f3601@10.0.1.171:30303?discport=0\"...... and so on.\r\n```\r\nThis command is for number of peer connect. \r\n```\r\n../build/bin/geth --exec 'admin.peers.length ' attach ipc:./data1/node1/geth.ipc\r\n```\r\n```\r\nINFO [05-08|16:46:30] Ethereum message handling failed         id=4ac60e3de59bcef8 conn=staticdial err=EOF\r\nINFO [05-08|16:46:30] Removing Ethereum peer                   peer=4ac60e3de59bcef8\r\nINFO [05-08|16:46:30] err:                                     LOG15_ERROR=                                                   LOG15_ERROR=\"Normalized odd number of arguments by adding nil\"\r\nINFO [05-08|16:46:30] Ethereum message handling failed         id=73a8a9eb5497477b conn=inbound    err=EOF\r\nINFO [05-08|16:46:30] Removing Ethereum peer                   peer=73a8a9eb5497477b\r\nINFO [05-08|16:46:30] err:                                     LOG15_ERROR=                                                   LOG15_ERROR=\"Normalized odd number of arguments by adding nil\"\r\n```\r\n\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/490781058",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19541#issuecomment-490781058",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541",
    "id": 490781058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDc4MTA1OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-09T07:26:28Z",
    "updated_at": "2019-05-09T07:26:28Z",
    "author_association": "MEMBER",
    "body": "Which Geth version are you running? Could you please run `geth version` and paste the output here?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/490781058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491705997",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19541#issuecomment-491705997",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541",
    "id": 491705997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTcwNTk5Nw==",
    "user": {
      "login": "jianwei20",
      "id": 18433369,
      "node_id": "MDQ6VXNlcjE4NDMzMzY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18433369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jianwei20",
      "html_url": "https://github.com/jianwei20",
      "followers_url": "https://api.github.com/users/jianwei20/followers",
      "following_url": "https://api.github.com/users/jianwei20/following{/other_user}",
      "gists_url": "https://api.github.com/users/jianwei20/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jianwei20/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jianwei20/subscriptions",
      "organizations_url": "https://api.github.com/users/jianwei20/orgs",
      "repos_url": "https://api.github.com/users/jianwei20/repos",
      "events_url": "https://api.github.com/users/jianwei20/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jianwei20/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T07:24:02Z",
    "updated_at": "2019-05-13T07:24:38Z",
    "author_association": "NONE",
    "body": "#### This is my geth version running\r\nGeth\r\nVersion: 1.6.7-unstable\r\nGit Commit: bd4699a05df4dc9c956ac65fe19d1cb15cd8fdb2\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.9.6\r\nOperating System: linux\r\nGOPATH=/home/ubuntu/go\r\nGOROOT=/usr/local/go\r\n#### My happen like figure\r\n<img width=\"899\" alt=\"螢幕快照 2019-05-13 下午3 18 40\" src=\"https://user-images.githubusercontent.com/18433369/57602653-5435d580-7592-11e9-9933-9c8a6f905c9f.png\">\r\nIn my experiment, I run 80 EC2 with geth to run bft consensus, so the number of each node should connect 79 geth. \r\nI found that some nodes seems disconnect randomly.\r\nThis is command starting geth \r\n\r\n#### geth 01 \r\n\r\n```\r\n../build/bin/geth --networkid 2234 --port 30303 --rpcport 8545 --datadir \"data1/node1\" --nodiscover --maxpeers 80 --rpc --rpccorsdomain \"*\" --rpcapi \"eth,net,web3,debug\" --bft --allow-empty --num-validators 80 --node-num 0\r\n``` \r\n\r\n#### geth 02\r\n\r\n```\r\n../build/bin/geth --networkid 2234 --port 30304 --rpcport 8546 --datadir \"data1/node1\" --nodiscover --maxpeers 80 --rpc --rpccorsdomain \"*\" --rpcapi \"eth,net,web3,debug\" --bft --allow-empty --num-validators 80 --node-num 0\r\n``` \r\n\r\nand so on \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491705997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491867636",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19541#issuecomment-491867636",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19541",
    "id": 491867636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg2NzYzNg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T15:21:17Z",
    "updated_at": "2019-05-13T15:21:17Z",
    "author_association": "MEMBER",
    "body": "We have made 33 releases since that version. We cannot support 2 year old releases. Please update to the latest code and see what happens.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/491867636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

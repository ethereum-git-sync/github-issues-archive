{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26546",
  "id": 1555732967,
  "node_id": "I_kwDOAOvK985cupnn",
  "number": 26546,
  "title": "Geth Reboots with geth.service: Failed with result 'signal'.",
  "user": {
    "login": "KrisSodroski",
    "id": 75279046,
    "node_id": "MDQ6VXNlcjc1Mjc5MDQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/75279046?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KrisSodroski",
    "html_url": "https://github.com/KrisSodroski",
    "followers_url": "https://api.github.com/users/KrisSodroski/followers",
    "following_url": "https://api.github.com/users/KrisSodroski/following{/other_user}",
    "gists_url": "https://api.github.com/users/KrisSodroski/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KrisSodroski/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KrisSodroski/subscriptions",
    "organizations_url": "https://api.github.com/users/KrisSodroski/orgs",
    "repos_url": "https://api.github.com/users/KrisSodroski/repos",
    "events_url": "https://api.github.com/users/KrisSodroski/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KrisSodroski/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-01-24T21:57:09Z",
  "updated_at": "2023-01-30T16:05:43Z",
  "closed_at": "2023-01-30T16:05:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth\r\nVersion: 1.10.26-stable\r\nGit Commit: e5eb32acee19cc9fca6a03b10283b7484246b15a\r\nArchitecture: amd64\r\nGo Version: go1.18.5\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=go\r\n\r\n\r\nSince a couple months ago, geth has been randomly restarting with \r\n\r\n`geth.service: Failed with result 'signal'.` \r\n\r\nI cannot figure out why it is happening.  Teku seems to hum along no issue, and the error logs don't show anything except that it was killed for some reason.\r\n\r\nAfter this happens, geth is always in an unclean state, and my node goes down for 3 hours or so.  \r\n\r\nAny help is much appreciated\r\n\r\n\r\nError Log:\r\n[geth-signal.txt](https://github.com/ethereum/go-ethereum/files/10494316/geth-signal.txt)\r\n\r\n\r\nDisagnostics, though, these are just teku diagnostics if I'm not mistaken:\r\n![image](https://user-images.githubusercontent.com/75279046/214429717-730f5295-a370-4171-8a1f-88d4ff8fbcf5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/75279046/214429894-527fe407-03c2-4db3-95fc-86c9db6d3ffd.png)\r\n\r\n",
  "closed_by": {
    "login": "KrisSodroski",
    "id": 75279046,
    "node_id": "MDQ6VXNlcjc1Mjc5MDQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/75279046?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KrisSodroski",
    "html_url": "https://github.com/KrisSodroski",
    "followers_url": "https://api.github.com/users/KrisSodroski/followers",
    "following_url": "https://api.github.com/users/KrisSodroski/following{/other_user}",
    "gists_url": "https://api.github.com/users/KrisSodroski/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KrisSodroski/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KrisSodroski/subscriptions",
    "organizations_url": "https://api.github.com/users/KrisSodroski/orgs",
    "repos_url": "https://api.github.com/users/KrisSodroski/repos",
    "events_url": "https://api.github.com/users/KrisSodroski/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KrisSodroski/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408131427",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26546#issuecomment-1408131427",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546",
    "id": 1408131427,
    "node_id": "IC_kwDOAOvK985T7mFj",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T07:46:26Z",
    "updated_at": "2023-01-30T07:46:26Z",
    "author_association": "MEMBER",
    "body": "```\r\nJan 24 14:20:57 broli systemd[1]: geth.service: Main process exited, code=killed, status=9/KILL\r\n```\r\nSo, something on your system is sending signal `9` ,or `SIGKILL` to the process, killing it. I can't say what it is, perhaps the OOM-reaper? If you peruse your system logs around the time this is happening, they should tell you more. \r\n\r\nIf you are using geth via docker, and have set docker memory limits, that's a possible cause too. Either way, I'm pretty certain that the cause is a signal sent from externally, this is not geth itself crashing. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408131427/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408786735",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26546#issuecomment-1408786735",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546",
    "id": 1408786735,
    "node_id": "IC_kwDOAOvK985T-GEv",
    "user": {
      "login": "KrisSodroski",
      "id": 75279046,
      "node_id": "MDQ6VXNlcjc1Mjc5MDQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/75279046?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KrisSodroski",
      "html_url": "https://github.com/KrisSodroski",
      "followers_url": "https://api.github.com/users/KrisSodroski/followers",
      "following_url": "https://api.github.com/users/KrisSodroski/following{/other_user}",
      "gists_url": "https://api.github.com/users/KrisSodroski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KrisSodroski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KrisSodroski/subscriptions",
      "organizations_url": "https://api.github.com/users/KrisSodroski/orgs",
      "repos_url": "https://api.github.com/users/KrisSodroski/repos",
      "events_url": "https://api.github.com/users/KrisSodroski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KrisSodroski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T15:03:18Z",
    "updated_at": "2023-01-30T15:03:18Z",
    "author_association": "NONE",
    "body": "Thanks for taking a look @holiman. \r\n\r\nI'm not using a docker container.  I'm running on the base operating system.  \r\n\r\nIt happened again this morning, and I was able to isolate all the logs around that time.  This maybe looks like a ram issue to me?  It seems to fail allocation maybe?  \r\n\r\nI have 16gb, maybe that's not enough these days.  What are your thoughts?\r\n\r\n[geth2.txt](https://github.com/ethereum/go-ethereum/files/10536961/geth2.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408786735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408881690",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26546#issuecomment-1408881690",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546",
    "id": 1408881690,
    "node_id": "IC_kwDOAOvK985T-dQa",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T16:02:13Z",
    "updated_at": "2023-01-30T16:02:13Z",
    "author_association": "MEMBER",
    "body": "The logs say:\n\nbroli kernel: oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0,global_oom,task_memcg=/system.slice/geth.service,task=geth,pid=23622,uid=1001 Jan 30 09:54:57 broli kernel: Out of memory: Killed process 23622 (geth) total-vm:13865544kB, anon-rss:8877648kB, file-rss:0kB, shmem-rss:0kB, UID:1001 pgtables:21252kB oom_score_adj:0 Jan 30 09:54:59 broli systemd[1]: geth.service: Main process exited, code=killed, status=9/KILL Jan 30 09:54:59 broli systemd[1]: geth.service: Failed with result 'signal'.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408881690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408887729",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26546#issuecomment-1408887729",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26546",
    "id": 1408887729,
    "node_id": "IC_kwDOAOvK985T-eux",
    "user": {
      "login": "KrisSodroski",
      "id": 75279046,
      "node_id": "MDQ6VXNlcjc1Mjc5MDQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/75279046?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KrisSodroski",
      "html_url": "https://github.com/KrisSodroski",
      "followers_url": "https://api.github.com/users/KrisSodroski/followers",
      "following_url": "https://api.github.com/users/KrisSodroski/following{/other_user}",
      "gists_url": "https://api.github.com/users/KrisSodroski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KrisSodroski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KrisSodroski/subscriptions",
      "organizations_url": "https://api.github.com/users/KrisSodroski/orgs",
      "repos_url": "https://api.github.com/users/KrisSodroski/repos",
      "events_url": "https://api.github.com/users/KrisSodroski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KrisSodroski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T16:05:43Z",
    "updated_at": "2023-01-30T16:05:43Z",
    "author_association": "NONE",
    "body": "Yeah, I bought some more ram.  Ty for taking a look. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408887729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23539",
  "id": 989243953,
  "node_id": "MDU6SXNzdWU5ODkyNDM5NTM=",
  "number": 23539,
  "title": "Geth stops unexpectedly: Killed",
  "user": {
    "login": "EkremSel",
    "id": 6073290,
    "node_id": "MDQ6VXNlcjYwNzMyOTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6073290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EkremSel",
    "html_url": "https://github.com/EkremSel",
    "followers_url": "https://api.github.com/users/EkremSel/followers",
    "following_url": "https://api.github.com/users/EkremSel/following{/other_user}",
    "gists_url": "https://api.github.com/users/EkremSel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EkremSel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EkremSel/subscriptions",
    "organizations_url": "https://api.github.com/users/EkremSel/orgs",
    "repos_url": "https://api.github.com/users/EkremSel/repos",
    "events_url": "https://api.github.com/users/EkremSel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EkremSel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-09-06T14:44:36Z",
  "updated_at": "2021-09-20T06:10:09Z",
  "closed_at": "2021-09-20T06:10:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.8`\r\nOS & Version: Linux/ Ubuntu 20.10\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nimported new chain segment\r\n\r\n#### Actual behaviour\r\n-killed\r\n\r\n#### Steps to reproduce the behaviour\r\nses@ses:~$ sudo ./geth --http --syncmode snap --datadir.ancient /media/ses/'Yeni Birim'  \r\n('Yeni- Birim') is an external drive\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO [09-06|09:59:23.119] Imported new chain segment               blocks=17  txs=2907 mgas=249.348  elapsed=8.912s       mgasps=27.978  number=13,091,467 hash=d668ae..6887c6 age=1w5d5h   dirty=1022.89MiB\r\nINFO [09-06|09:59:27.886] Generating state snapshot                root=f74dcb..45d4bc at=a73527..678c4d accounts=94,065,370 slots=326,320,214 storage=27.67GiB  elapsed=2h12m48.275s eta=1h10m31.397s\r\nINFO [09-06|09:59:38.002] Generating state snapshot                root=f74dcb..45d4bc at=a736b5..05ab28 accounts=94,068,829 slots=326,324,826 storage=27.67GiB  elapsed=2h12m58.386s eta=1h10m36.326s\r\nINFO [09-06|09:59:46.906] Generating state snapshot                root=f74dcb..45d4bc at=a736b5..113127 accounts=94,068,832 slots=326,324,826 storage=27.67GiB  elapsed=2h13m7.293s  eta=1h10m41.053s\r\nKilled\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.",
  "closed_by": {
    "login": "EkremSel",
    "id": 6073290,
    "node_id": "MDQ6VXNlcjYwNzMyOTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6073290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EkremSel",
    "html_url": "https://github.com/EkremSel",
    "followers_url": "https://api.github.com/users/EkremSel/followers",
    "following_url": "https://api.github.com/users/EkremSel/following{/other_user}",
    "gists_url": "https://api.github.com/users/EkremSel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EkremSel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EkremSel/subscriptions",
    "organizations_url": "https://api.github.com/users/EkremSel/orgs",
    "repos_url": "https://api.github.com/users/EkremSel/repos",
    "events_url": "https://api.github.com/users/EkremSel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EkremSel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/913703505",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23539#issuecomment-913703505",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539",
    "id": 913703505,
    "node_id": "IC_kwDOAOvK9842dgJR",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-06T14:47:58Z",
    "updated_at": "2021-09-06T14:47:58Z",
    "author_association": "MEMBER",
    "body": "What specs does your computer have? RAM?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/913703505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/914114102",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23539#issuecomment-914114102",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539",
    "id": 914114102,
    "node_id": "IC_kwDOAOvK9842fEY2",
    "user": {
      "login": "hdiass",
      "id": 29974003,
      "node_id": "MDQ6VXNlcjI5OTc0MDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/29974003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hdiass",
      "html_url": "https://github.com/hdiass",
      "followers_url": "https://api.github.com/users/hdiass/followers",
      "following_url": "https://api.github.com/users/hdiass/following{/other_user}",
      "gists_url": "https://api.github.com/users/hdiass/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hdiass/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hdiass/subscriptions",
      "organizations_url": "https://api.github.com/users/hdiass/orgs",
      "repos_url": "https://api.github.com/users/hdiass/repos",
      "events_url": "https://api.github.com/users/hdiass/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hdiass/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-07T08:48:13Z",
    "updated_at": "2021-09-07T08:48:13Z",
    "author_association": "NONE",
    "body": "I'm having the same, no OOM.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/914114102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/915880875",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23539#issuecomment-915880875",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539",
    "id": 915880875,
    "node_id": "IC_kwDOAOvK9842lzur",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-09T08:35:50Z",
    "updated_at": "2021-09-09T08:36:18Z",
    "author_association": "MEMBER",
    "body": "So, Geth by default runs with a cache allowance of 4GB, which translates into a memory usage of 6-8GB.\r\n\r\nIf your mem dump:\r\n\r\n```\r\ntotal        used        free      shared  buff/cache   available\r\nMem: 15Gi 10Gi 157Mi 60Mi 4,8Gi 4,5Gi\r\nSwap: 2,0Gi 1,8Gi 169Mi\r\n```\r\n\r\nI assume you printed this after Geth was Killed (because otherwise the swap would be 0). Based on these numbers, you have something on your OS using 10GB of RAM + 2GB swap, and you have 4.5 left for Geth. Geth will need more than that with default parameters, so when it tries to request more, the OS denies and kills it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/915880875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/920016959",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23539#issuecomment-920016959",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23539",
    "id": 920016959,
    "node_id": "IC_kwDOAOvK98421lg_",
    "user": {
      "login": "EkremSel",
      "id": 6073290,
      "node_id": "MDQ6VXNlcjYwNzMyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6073290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EkremSel",
      "html_url": "https://github.com/EkremSel",
      "followers_url": "https://api.github.com/users/EkremSel/followers",
      "following_url": "https://api.github.com/users/EkremSel/following{/other_user}",
      "gists_url": "https://api.github.com/users/EkremSel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EkremSel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EkremSel/subscriptions",
      "organizations_url": "https://api.github.com/users/EkremSel/orgs",
      "repos_url": "https://api.github.com/users/EkremSel/repos",
      "events_url": "https://api.github.com/users/EkremSel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EkremSel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-15T13:25:49Z",
    "updated_at": "2021-09-19T17:24:56Z",
    "author_association": "NONE",
    "body": "@karalabe @MariusVanDerWijden \r\n\r\nI ve  disabled swap and here is the memdump, geth running,\r\n\r\n total        used        free      shared  buff/cache   available\r\nMem:           15Gi        12Gi       156Mi        72Mi       3,1Gi       2,8Gi\r\nSwap:            0B          0B          0B\r\n\r\nGeth seems to eat up all the memory then I believe linux oom kills geth. \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/920016959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/252",
  "id": 53887188,
  "node_id": "MDU6SXNzdWU1Mzg4NzE4OA==",
  "number": 252,
  "title": "Remote DoS by memory exhaustion in the TxPool using MsgTxTy",
  "user": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/5",
    "html_url": "https://github.com/ethereum/go-ethereum/milestone/5",
    "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/5/labels",
    "id": 1011600,
    "node_id": "MDk6TWlsZXN0b25lMTAxMTYwMA==",
    "number": 5,
    "title": "Frontier",
    "description": "This is the Frontier milestone for the ethereum protocol soft release. This milestone is not set in stone. Over time issues will be added and removed.",
    "creator": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 167,
    "state": "closed",
    "created_at": "2015-03-09T00:06:47Z",
    "updated_at": "2015-07-28T14:12:54Z",
    "due_on": null,
    "closed_at": "2015-07-28T14:12:54Z"
  },
  "comments": 6,
  "created_at": "2015-01-09T16:40:15Z",
  "updated_at": "2015-05-18T17:59:16Z",
  "closed_at": "2015-05-18T17:59:15Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Each new transaction send using the MsgTxTy message is queued in the TxPool. An attacker can supply transactions at a higher rate than the time the victim node requires to evaluate each transaction. For example, in a 100 KByte/sec connection to a victim node the attacker can transmit approximately 1000 transactions per second, while verifying the transaction signature may cost more than 1 msec. This can lead to the accumulation of messages in the queue and the consumption of all available memory. Also the attack can be used to delay the processing of transaction from other peers.\n\nSeveral fixes are possible, for example:\n- Establish a maximum number of transactions that can be queued per client.\n- Block the client if the number of transaction queued is above a predefined limit.\n- Force node isolation by continued supply of MsgPeersTy messages\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/70189850",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-70189850",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 70189850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg5ODUw",
    "user": {
      "login": "ebuchman",
      "id": 2300911,
      "node_id": "MDQ6VXNlcjIzMDA5MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2300911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebuchman",
      "html_url": "https://github.com/ebuchman",
      "followers_url": "https://api.github.com/users/ebuchman/followers",
      "following_url": "https://api.github.com/users/ebuchman/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebuchman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebuchman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebuchman/subscriptions",
      "organizations_url": "https://api.github.com/users/ebuchman/orgs",
      "repos_url": "https://api.github.com/users/ebuchman/repos",
      "events_url": "https://api.github.com/users/ebuchman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebuchman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:36:06Z",
    "updated_at": "2015-01-16T00:36:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Funny, was just thinking about this problem today - is a serious issue. Not sure you can just have a limit, since a bad peer could just fill your limit with bad txs and then you're not really contributing to the network.\n\nWe could have nodes run the tx execution and punish peers sending bad execution or executions that run out of gas, but these executions will have to be redone when txs come in the block possibly in another order, so that's also not that nice.\n\nOne thing we can maybe count on is more of the nodes to be mining (say, unlike btc), in which case they will verify the txs, so its less of an issue. But at the least the node should check that the sender has at least as much funds as gas included in the tx (I suppose you can ignore value, ie the comment in ValidateTransaction()) \n\nFurther on that thought - if the intention really is to keep this ASIC hard and/or move to PoS, we will have much closer agreement between the validating set and the mining set, so again this won't be as big an issue. Can we rely on that? What is the significance/importance of having nodes propagate txs if it turns out those txs might actually be invalid executions (and hence impossible to get included in a block)? It's just DoSing the network. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/70189850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/72254251",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-72254251",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 72254251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjU0MjUx",
    "user": {
      "login": "ebuchman",
      "id": 2300911,
      "node_id": "MDQ6VXNlcjIzMDA5MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2300911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebuchman",
      "html_url": "https://github.com/ebuchman",
      "followers_url": "https://api.github.com/users/ebuchman/followers",
      "following_url": "https://api.github.com/users/ebuchman/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebuchman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebuchman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebuchman/subscriptions",
      "organizations_url": "https://api.github.com/users/ebuchman/orgs",
      "repos_url": "https://api.github.com/users/ebuchman/repos",
      "events_url": "https://api.github.com/users/ebuchman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebuchman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-30T19:16:30Z",
    "updated_at": "2015-01-30T19:16:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Been thinking about this more. We can mitigate a big part of the attack if the transaction pool tracks an intermediate account balance state. Otherwise I can send a billion transactions each sending 0.01 eth from an account with 0.01 eth and the peers will store all of them but only one will get mined. But if they track in the txpool such an intermediate state they would notice the double spend immediately and drop them, like in bitcoin, stifling the RAM DoS. Is that feasible? What do you think? Can we just use the ChainManager's transState?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/72254251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/72354780",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-72354780",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 72354780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzU0Nzgw",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-01T07:17:02Z",
    "updated_at": "2015-02-01T07:17:02Z",
    "author_association": "MEMBER",
    "body": "The transient state is intended for such use though I don't think this is the right solution.\n\nThere might be good reason to allow for transactions with the same nonce and not being necessarily an attempt to double spend. For example what if you create 2 transactions each containing the same instructions, though, with a different `gas_price`? \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/72354780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/83295146",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-83295146",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 83295146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMjk1MTQ2",
    "user": {
      "login": "ebuchman",
      "id": 2300911,
      "node_id": "MDQ6VXNlcjIzMDA5MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2300911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebuchman",
      "html_url": "https://github.com/ebuchman",
      "followers_url": "https://api.github.com/users/ebuchman/followers",
      "following_url": "https://api.github.com/users/ebuchman/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebuchman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebuchman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebuchman/subscriptions",
      "organizations_url": "https://api.github.com/users/ebuchman/orgs",
      "repos_url": "https://api.github.com/users/ebuchman/repos",
      "events_url": "https://api.github.com/users/ebuchman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebuchman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-19T03:27:19Z",
    "updated_at": "2015-03-19T03:27:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "thats a reasonable concern. surely someone should enable that but should it be default behaviour? reminds me of the bitcoin Replace By Fee tools patch. maybe someone from the community will want to maintain a branch that supports that. also I notice the \"check account has sufficient balance\" is commented out but I don't understand why\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/83295146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103142247",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-103142247",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 103142247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzE0MjI0Nw==",
    "user": {
      "login": "tgerring",
      "id": 731472,
      "node_id": "MDQ6VXNlcjczMTQ3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731472?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tgerring",
      "html_url": "https://github.com/tgerring",
      "followers_url": "https://api.github.com/users/tgerring/followers",
      "following_url": "https://api.github.com/users/tgerring/following{/other_user}",
      "gists_url": "https://api.github.com/users/tgerring/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tgerring/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tgerring/subscriptions",
      "organizations_url": "https://api.github.com/users/tgerring/orgs",
      "repos_url": "https://api.github.com/users/tgerring/repos",
      "events_url": "https://api.github.com/users/tgerring/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tgerring/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-18T17:27:52Z",
    "updated_at": "2015-05-18T17:27:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this issue still open? If so, what changes are needed to close it out?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103142247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103149375",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/252#issuecomment-103149375",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/252",
    "id": 103149375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzE0OTM3NQ==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-18T17:59:15Z",
    "updated_at": "2015-05-18T17:59:15Z",
    "author_association": "MEMBER",
    "body": "Most of these have been addressed in the TxPool. Will close\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/103149375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24129",
  "id": 1083981825,
  "node_id": "I_kwDOAOvK985AnEAB",
  "number": 24129,
  "title": "Unpacking output of multicall abi ",
  "user": {
    "login": "fomotrader",
    "id": 82184770,
    "node_id": "MDQ6VXNlcjgyMTg0Nzcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/82184770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fomotrader",
    "html_url": "https://github.com/fomotrader",
    "followers_url": "https://api.github.com/users/fomotrader/followers",
    "following_url": "https://api.github.com/users/fomotrader/following{/other_user}",
    "gists_url": "https://api.github.com/users/fomotrader/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fomotrader/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fomotrader/subscriptions",
    "organizations_url": "https://api.github.com/users/fomotrader/orgs",
    "repos_url": "https://api.github.com/users/fomotrader/repos",
    "events_url": "https://api.github.com/users/fomotrader/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fomotrader/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-12-19T01:21:03Z",
  "updated_at": "2022-02-23T09:29:09Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.14-unstable\r\nUbunutu version 20.04\r\n\r\n#### Expected behaviour\r\n\r\nUnpacking output of ABI for a multicall smart contract should return mutliple abi encoded values.\r\n\r\n#### Actual behaviour\r\n\r\nInstead this error is raised here https://github.com/ethereum/go-ethereum/blob/master/accounts/abi/unpack.go#L262\r\n\r\nI think the issue may be that we assume the return value will always be a single abi encoded value.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\n\r\nfunc handleMultiCall(tx *types.Transaction) {\r\n\tmultiCall = [4]byte{0x5a, 0xe4, 0x01, 0xdc}\r\n\tauto_router_abi, _ = abi.JSON(strings.NewReader(erc20.AutoRouterABI))\r\n\tmethod_multiCall, _ = auto_router_abi.MethodById(multiCall[:])\r\n\tcontractData := tx.Data()[4:]\r\n\ttxData := make(map[string]interface{})\r\n\terr := method_multiCall.Outputs.UnpackIntoMap(txData, contractData)\r\n\r\n\tif err != nil {\r\n\t\tlog.Printf(\"Destructuring tx failed %v\\n: \", err)\r\n\t\treturn\r\n\t}\r\n}\r\n```\r\n\r\n\r\nSetup a GETH instance, monitor pending txs and pass them into this function if they belong to the new Uniswap Router\r\n`0xDa1EC4dA97019972759FedA1285878b97FDCC014`\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\ncannot marshal in to go slice: offset 1639859878 would go over slice bou\r\n````",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/997311606",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24129#issuecomment-997311606",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129",
    "id": 997311606,
    "node_id": "IC_kwDOAOvK9847ccR2",
    "user": {
      "login": "fomotrader",
      "id": 82184770,
      "node_id": "MDQ6VXNlcjgyMTg0Nzcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/82184770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fomotrader",
      "html_url": "https://github.com/fomotrader",
      "followers_url": "https://api.github.com/users/fomotrader/followers",
      "following_url": "https://api.github.com/users/fomotrader/following{/other_user}",
      "gists_url": "https://api.github.com/users/fomotrader/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fomotrader/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fomotrader/subscriptions",
      "organizations_url": "https://api.github.com/users/fomotrader/orgs",
      "repos_url": "https://api.github.com/users/fomotrader/repos",
      "events_url": "https://api.github.com/users/fomotrader/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fomotrader/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-19T01:21:56Z",
    "updated_at": "2021-12-19T01:21:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hopefully I've provided enough information in this ticket for others that are more familiar with GETH to help me look into it and either correct my understanding or we can fix GETH.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/997311606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1011982202",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24129#issuecomment-1011982202",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129",
    "id": 1011982202,
    "node_id": "IC_kwDOAOvK9848UZ96",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-13T10:05:48Z",
    "updated_at": "2022-01-13T10:05:48Z",
    "author_association": "MEMBER",
    "body": "Can you provide more details like the ABI, tx and all that is needed to reproduce the issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1011982202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1048590869",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24129#issuecomment-1048590869",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24129",
    "id": 1048590869,
    "node_id": "IC_kwDOAOvK984-gDoV",
    "user": {
      "login": "WayneLiang",
      "id": 13344145,
      "node_id": "MDQ6VXNlcjEzMzQ0MTQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13344145?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WayneLiang",
      "html_url": "https://github.com/WayneLiang",
      "followers_url": "https://api.github.com/users/WayneLiang/followers",
      "following_url": "https://api.github.com/users/WayneLiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/WayneLiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WayneLiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WayneLiang/subscriptions",
      "organizations_url": "https://api.github.com/users/WayneLiang/orgs",
      "repos_url": "https://api.github.com/users/WayneLiang/repos",
      "events_url": "https://api.github.com/users/WayneLiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WayneLiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-23T09:29:09Z",
    "updated_at": "2022-02-23T09:29:09Z",
    "author_association": "NONE",
    "body": "> Can you provide more details like the ABI, tx and all that is needed to reproduce the issue?\r\n\r\nlike this Transaction https://etherscan.io/tx/0xbfb3415b5f949519abfee01388ab0fb56edf5e4ac3f949086de6907f2387e64e.\r\nabi Method is multicall, when unpacking the input data, it will return abi: cannot marshal in to go slice: offset 78063394979094799799290440606367866824566315126099565707416874105828244717600 would go over slice boundary (len=580)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1048590869/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

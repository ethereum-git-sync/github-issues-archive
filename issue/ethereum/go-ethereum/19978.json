{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19978",
  "id": 482027055,
  "node_id": "MDU6SXNzdWU0ODIwMjcwNTU=",
  "number": 19978,
  "title": "Syncing with Geth 1.9.2 - rinkeby - get stuck from time to time",
  "user": {
    "login": "AndreiD",
    "id": 542665,
    "node_id": "MDQ6VXNlcjU0MjY2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/542665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndreiD",
    "html_url": "https://github.com/AndreiD",
    "followers_url": "https://api.github.com/users/AndreiD/followers",
    "following_url": "https://api.github.com/users/AndreiD/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndreiD/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndreiD/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndreiD/subscriptions",
    "organizations_url": "https://api.github.com/users/AndreiD/orgs",
    "repos_url": "https://api.github.com/users/AndreiD/repos",
    "events_url": "https://api.github.com/users/AndreiD/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndreiD/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-08-18T19:12:01Z",
  "updated_at": "2019-08-19T15:48:20Z",
  "closed_at": "2019-08-19T10:50:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.9.2 stable\r\nOS & Version: Ubuntu 19\r\nGood CPU\r\nSSD with plenty of space\r\n\r\n#### Expected behaviour\r\n\r\nTo sync till the end no matter if invalid things happen\r\n\r\n#### Actual behaviour\r\n\r\nhalts with:\r\n \r\n~~~~\r\nCRIT [08-18|19:03:39.431] Failed to store last header's hash       err=\"leveldb/table: corruption on data-block (pos=1140825): checksum mismatch, want=0xc5a83e88 got=0x32c3d4fa *[file=003715.ldb]*\"\r\n~~~~\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nThis will be difficult to reproduce but...\r\n\r\n\r\n- install latest geth\r\n\r\n- geth --rinkeby --datadir /home/me/rinkeby --v5disc  --port=50111  --cache=1024 --ipcdisable\r\n\r\n#### Backtrace\r\n\r\n~~~~\r\nINFO [08-18|18:26:57.179] Imported new block receipts              count=257  elapsed=231.340ms number=2333832 hash=608479…ab68b2 age=1y3mo2d   size=2.51MiB\r\nINFO [08-18|18:26:57.225] Imported new state entries               count=1773 elapsed=25.399ms  processed=4415435 pending=34381 retry=0   duplicate=319 unexpected=1269\r\nINFO [08-18|18:26:57.439] Imported new block receipts              count=257  elapsed=245.707ms number=2334089 hash=6f300f…a4f5dd age=1y3mo2d   size=2.76MiB\r\nINFO [08-18|18:26:57.654] Imported new block receipts              count=258  elapsed=211.562ms number=2334347 hash=76460a…607010 age=1y3mo2d   size=2.63MiB\r\nINFO [08-18|18:26:57.829] Imported new block headers               count=2048 elapsed=605.414ms number=2371776 hash=a86b42…e56853 age=1y2mo3w\r\nINFO [08-18|18:26:58.541] Imported new state entries               count=1773 elapsed=3.984ms   processed=4417208 pending=34349 retry=177 duplicate=319 unexpected=1269\r\nINFO [08-18|18:26:59.333] Imported new state entries               count=1980 elapsed=5.098ms   processed=4419188 pending=33175 retry=177 duplicate=319 unexpected=1269\r\nINFO [08-18|18:26:59.699] Imported new state entries               count=1773 elapsed=4.458ms   processed=4420961 pending=32539 retry=177 duplicate=319 unexpected=1269\r\nINFO [08-18|18:26:59.999] Imported new state entries               count=798  elapsed=3.945ms   processed=4421759 pending=34010 retry=177 duplicate=319 unexpected=1269\r\nCRIT [08-18|18:27:00.304] Failed to store last header's hash       err=\"leveldb/table: corruption on data-block (pos=1140825): checksum mismatch, want=0xc5a83e88 got=0x32c3d4fa [file=003715.ldb]\"\r\n~~~~\r\n\r\nI have to go into chaindata, delete the file, start the sync again. \r\n\r\nShouldn't this operation be done automatically somehow ?\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/522517046",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19978#issuecomment-522517046",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978",
    "id": 522517046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjUxNzA0Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-19T10:50:08Z",
    "updated_at": "2019-08-19T10:50:08Z",
    "author_association": "MEMBER",
    "body": "1. You can'd just delete a random file from a database and expect thing to keep working. The database will be blown and useless eventually hitting a bad block due to missing data.\r\n2. `corruption on data-block` means that LevelDB wrote something to disk, but later when reading it back, the disk is returning something else. Generally this means your disk is dying, you'll need to buy a new one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/522517046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/522633841",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19978#issuecomment-522633841",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19978",
    "id": 522633841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjYzMzg0MQ==",
    "user": {
      "login": "AndreiD",
      "id": 542665,
      "node_id": "MDQ6VXNlcjU0MjY2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/542665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndreiD",
      "html_url": "https://github.com/AndreiD",
      "followers_url": "https://api.github.com/users/AndreiD/followers",
      "following_url": "https://api.github.com/users/AndreiD/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndreiD/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndreiD/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndreiD/subscriptions",
      "organizations_url": "https://api.github.com/users/AndreiD/orgs",
      "repos_url": "https://api.github.com/users/AndreiD/repos",
      "events_url": "https://api.github.com/users/AndreiD/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndreiD/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-19T15:40:51Z",
    "updated_at": "2019-08-19T15:48:20Z",
    "author_association": "NONE",
    "body": " it's a new SSD Disk just bought 1 months ago... Samsung evo 860 1TB.  I don't think the disk is the problem.\r\n\r\nThe problem appeared again...\r\n\r\n~~~~\r\n4|mainnet  | WARN [08-19|15:42:30.915] Dropping unsynced node during fast sync  id=4b4d6f44f023b1cb conn=inbound              addr=89.212.240.204:57084  type=Parity-Ethereum/v2.5.5-stable-3ebc769757-20190708/x86_64-linux-gnu/rustc1.35.0\r\n64|mainnet  | WARN [08-19|15:42:31.365] Synchronisation failed, dropping peer    peer=376471f5267cb83a err=\"action from bad peer ignored\"\r\n64|mainnet  | WARN [08-19|15:42:32.276] Synchronisation failed, dropping peer    peer=45a52fa44b94d33a err=\"action from bad peer ignored\"\r\n64|mainnet  | WARN [08-19|15:42:33.064] Synchronisation failed, dropping peer    peer=c845e51a5e470e44 err=\"action from bad peer ignored\"\r\n64|mainnet  | INFO [08-19|15:42:42.843] Imported new block headers               count=0    elapsed=2.965ms   number=4760594 hash=ce7a62…84dd18 age=1y8mo1w  ignored=192\r\n64|mainnet  | INFO [08-19|15:42:43.807] Imported new block headers               count=0    elapsed=3.401ms   number=4760786 hash=404fb9…bd10a9 age=1y8mo1w  ignored=192\r\n64|mainnet  | WARN [08-19|15:42:46.367] Synchronisation failed, retrying         err=\"DB write error: leveldb/table: corruption on data-block (pos=71817408): checksum mismatch, want=0xaf2bb8ce got=0x8c9abcdb [file=086859.ldb]\"\r\n64|mainnet  | WARN [08-19|15:42:47.395] Dropping unsynced node during fast sync  id=6d0e158760916e29 conn=inbound              addr=88.198.230.114:51394  type=Parity-Ethereum/etc.multipool.online/v2.6.0-beta-e38293b-20190708/x86_64-linux-gnu/rustc1.36.0\r\n64|mainnet  | WARN [08-19|15:42:48.664] Synchronisation failed, dropping peer    peer=bcdf5d98cf5e8c26 err=\"action from bad peer ignored\"\r\n64|mainnet  | INFO [08-19|15:43:10.338] Imported new block headers               count=0    elapsed=45.334ms  number=4761938 hash=8aa0d9…52218a age=1y8mo1w  ignored=1536\r\n64|mainnet  | WARN [08-19|15:43:11.179] Synchronisation failed, retrying         err=\"DB write error: leveldb/table: corruption on data-block (pos=71817408): checksum mismatch, want=0xaf2bb8ce got=0x8c9abcdb [file=086859.ldb]\"\r\n64|mainnet  | WARN [08-19|15:43:11.978] Synchronisation failed, dropping peer    peer=2e22b63a8a87b5ee err=\"action from bad peer ignored\"\r\n64|mainnet  | WARN [08-19|15:43:13.079] Dropping unsynced node during fast sync  id=9c760ad007c71c09 conn=inbound              addr=213.0.69.150:32860    type=Parity-Ethereum/v2.5.6-stable-ff398fe7f-20190812/x86_64-linux-gnu/rustc1.35.0\r\n64|mainnet  | WARN [08-19|15:43:18.231] Synchronisation failed, dropping peer    peer=91e2c9e02d99fc1d err=timeout\r\n64|mainnet  | WARN [08-19|15:43:18.846] Synchronisation failed, dropping peer    peer=80fe7bee1d8dc690 err=\"action from bad peer ignored\"\r\n64|mainnet  | WARN [08-19|15:43:18.938] Dropping unsynced node during fast sync  id=f16ec9a380ba5ac6 conn=inbound              addr=40.83.72.16:45428     type=geth-eth-monitor/uiuc-2(research-scan.sprai.org)/v1.7.3-stable-e0f220f0/linux-amd64/go1.9.6\r\n64|mainnet  | WARN [08-19|15:43:22.468] Dropping unsynced node during fast sync  id=4b4d6f44f023b1cb conn=inbound              addr=89.212.240.204:60380  type=Parity-Ethereum/v2.5.5-stable-3ebc769757-20190708/x86_64-linux-gnu/rustc1.35.0\r\n64|mainnet  | WARN [08-19|15:43:26.781] Checkpoint challenge timed out, dropping id=7a24e15affd227be conn=inbound              addr=119.205.217.221:51635 type=Geth/v4.0.0/linux/go1.8\r\n64|mainnet  | WARN [08-19|15:43:30.643] Synchronisation failed, retrying         err=\"DB write error: leveldb/table: corruption on data-block (pos=71817408): checksum mismatch, want=0xaf2bb8ce got=0x8c9abcdb [file=086859.ldb]\"\r\n64|mainnet  | WARN [08-19|15:43:30.897] Synchronisation failed, dropping peer    peer=1c8d5300108d40b8 err=\"action from bad peer ignored\"\r\n64|mainnet  | INFO [08-19|15:43:34.000] Imported new block headers               count=0    elapsed=70.835ms  number=4762450 hash=c6f8aa…c3dabf age=1y8mo1w  ignored=2048\r\n64|mainnet  | INFO [08-19|15:43:34.047] Imported new block headers               count=0    elapsed=25.844ms  number=4763282 hash=7dff7e…ae7d11 age=1y8mo1w  ignored=832\r\n64|mainnet  | WARN [08-19|15:43:34.102] Dropping unsynced node during fast sync  id=cff3005c8b6beeb8 conn=inbound              addr=78.46.88.205:59226    type=Parity-Ethereum/v2.4.5-stable-76d4064-20190408/x86_64-linux-gnu/rustc1.34.1\r\n~~~~\r\n\r\n@karalabe  You're saying that the SSD is at fault ?.... even though it's a new one ?!... this doesn't make sense\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/522633841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

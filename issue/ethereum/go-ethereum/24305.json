{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24305",
  "id": 1117543499,
  "node_id": "I_kwDOAOvK985CnFxL",
  "number": 24305,
  "title": "Geth genesis mismatch",
  "user": {
    "login": "spatial25",
    "id": 89701798,
    "node_id": "MDQ6VXNlcjg5NzAxNzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/89701798?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/spatial25",
    "html_url": "https://github.com/spatial25",
    "followers_url": "https://api.github.com/users/spatial25/followers",
    "following_url": "https://api.github.com/users/spatial25/following{/other_user}",
    "gists_url": "https://api.github.com/users/spatial25/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/spatial25/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/spatial25/subscriptions",
    "organizations_url": "https://api.github.com/users/spatial25/orgs",
    "repos_url": "https://api.github.com/users/spatial25/repos",
    "events_url": "https://api.github.com/users/spatial25/events{/privacy}",
    "received_events_url": "https://api.github.com/users/spatial25/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-01-28T15:38:55Z",
  "updated_at": "2022-02-01T21:34:55Z",
  "closed_at": "2022-02-01T21:34:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: geth linux amd64 1.10.15\r\nOS & Version: Centos 8\r\n\r\n#### Expected behaviour\r\nSync or Mine\r\n\r\n#### Actual behaviour\r\nSync was running fine last night and I woke up to the genesis error. EDIT: There is an ancients directory in my datadir. Not sure the problem.\r\n\r\n#### Steps to reproduce the behaviour\r\n```\r\n./geth --miner.etherbase '0xc6B****3AEB' --datadir=\"/run/media/***/m/\" --mine 2>> geth.log\r\n```\r\n\r\n#### Backtrace\r\n```\r\nINFO [01-28|09:33:20.155] Starting Geth on Ethereum mainnet... \r\nINFO [01-28|09:33:20.155] Bumping default cache on mainnet         provided=1024 updated=4096\r\nINFO [01-28|09:33:20.156] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [01-28|09:33:20.156] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nINFO [01-28|09:33:20.157] Set global gas cap                       cap=50,000,000\r\nINFO [01-28|09:33:20.157] Allocated trie memory caches             clean=614.00MiB dirty=1024.00MiB\r\nINFO [01-28|09:33:20.157] Allocated cache and file handles         database=/run/media/*****/m/geth/chaindata cache=2.00GiB handles=131,072\r\nINFO [01-28|09:33:20.698] Opened ancient database                  database=/run/media/******/m/geth/chaindata/ancient readonly=false\r\nFatal: Failed to register the Ethereum service: genesis mismatch: 0xd4e56740f876******745a118d0906a34e69aec8c0db1cb8fa3 (leveldb) != 0x0000000000000000000000000000000000000000000000000000000000000000 (ancients)\r\n```",
  "closed_by": {
    "login": "spatial25",
    "id": 89701798,
    "node_id": "MDQ6VXNlcjg5NzAxNzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/89701798?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/spatial25",
    "html_url": "https://github.com/spatial25",
    "followers_url": "https://api.github.com/users/spatial25/followers",
    "following_url": "https://api.github.com/users/spatial25/following{/other_user}",
    "gists_url": "https://api.github.com/users/spatial25/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/spatial25/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/spatial25/subscriptions",
    "organizations_url": "https://api.github.com/users/spatial25/orgs",
    "repos_url": "https://api.github.com/users/spatial25/repos",
    "events_url": "https://api.github.com/users/spatial25/events{/privacy}",
    "received_events_url": "https://api.github.com/users/spatial25/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1025501221",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1025501221",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305",
    "id": 1025501221,
    "node_id": "IC_kwDOAOvK9849H-gl",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T08:45:57Z",
    "updated_at": "2022-01-31T08:45:57Z",
    "author_association": "MEMBER",
    "body": "Can you tell us what you did? Based on the logs, there seems to be some junk in your ancients folder. Did you edit these files? Did you set some strange permissions? Can you list the ancient folder contents? `ls -al`?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1025501221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1026018045",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1026018045",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305",
    "id": 1026018045,
    "node_id": "IC_kwDOAOvK9849J8r9",
    "user": {
      "login": "spatial25",
      "id": 89701798,
      "node_id": "MDQ6VXNlcjg5NzAxNzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/89701798?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spatial25",
      "html_url": "https://github.com/spatial25",
      "followers_url": "https://api.github.com/users/spatial25/followers",
      "following_url": "https://api.github.com/users/spatial25/following{/other_user}",
      "gists_url": "https://api.github.com/users/spatial25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spatial25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spatial25/subscriptions",
      "organizations_url": "https://api.github.com/users/spatial25/orgs",
      "repos_url": "https://api.github.com/users/spatial25/repos",
      "events_url": "https://api.github.com/users/spatial25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spatial25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T17:19:09Z",
    "updated_at": "2022-01-31T17:19:09Z",
    "author_association": "NONE",
    "body": "I had the sync running on a dual boot laptop to an ssd through USB and changed the datadir to the drive. I went to work and came back, restarted my PC and one of my VM boot files was corrupted or missing. (Havent edited my boot files to fix it yet) so I plugged it into my other PC and ran geth and am getting this error.\n\n-------- Original Message --------\nOn Jan 31, 2022, 2:46 AM, Péter Szilágyi wrote:\n\n> Can you tell us what you did? Based on the logs, there seems to be some junk in your ancients folder. Did you edit these files? Did you set some strange permissions? Can you list the ancient folder contents? ls -al?\n>\n> —\n> Reply to this email directly, [view it on GitHub](https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1025501221), or [unsubscribe](https://github.com/notifications/unsubscribe-auth/AVML3JQQTEWUUI4JZUAQX7DUYZD47ANCNFSM5NBCGHYQ).\n> Triage notifications on the go with GitHub Mobile for [iOS](https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675) or [Android](https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub).\n> You are receiving this because you authored the thread.Message ID: ***@***.***>",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1026018045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1027297927",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1027297927",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305",
    "id": 1027297927,
    "node_id": "IC_kwDOAOvK9849O1KH",
    "user": {
      "login": "spatial25",
      "id": 89701798,
      "node_id": "MDQ6VXNlcjg5NzAxNzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/89701798?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spatial25",
      "html_url": "https://github.com/spatial25",
      "followers_url": "https://api.github.com/users/spatial25/followers",
      "following_url": "https://api.github.com/users/spatial25/following{/other_user}",
      "gists_url": "https://api.github.com/users/spatial25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spatial25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spatial25/subscriptions",
      "organizations_url": "https://api.github.com/users/spatial25/orgs",
      "repos_url": "https://api.github.com/users/spatial25/repos",
      "events_url": "https://api.github.com/users/spatial25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spatial25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T21:19:18Z",
    "updated_at": "2022-02-01T21:19:18Z",
    "author_association": "NONE",
    "body": "> I had the sync running on a dual boot laptop to an ssd through USB and changed the datadir to the drive. I went to work and came back, restarted my PC and one of my VM boot files was corrupted or missing. (Havent edited my boot files to fix it yet) so I plugged it into my other PC and ran geth and am getting this error.\r\n> […](#)\r\n> -------- Original Message --------\r\n> On Jan 31, 2022, 2:46 AM, Péter Szilágyi wrote: Can you tell us what you did? Based on the logs, there seems to be some junk in your ancients folder. Did you edit these files? Did you set some strange permissions? Can you list the ancient folder contents? ls -al? — Reply to this email directly, [view it on GitHub]([#24305 (comment)](https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1025501221)), or [unsubscribe](https://github.com/notifications/unsubscribe-auth/AVML3JQQTEWUUI4JZUAQX7DUYZD47ANCNFSM5NBCGHYQ). Triage notifications on the go with GitHub Mobile for [iOS](https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675) or [Android](https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub). You are receiving this because you authored the thread.Message ID: ***@***.***>\r\n\r\nI was able to boot back into the PC I originally ran the geth sync, but I am still getting a Fatal error: \"Failed to register the Ethereum service: genesis mismatch\" should I resync or is there any possible way to correct it?\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1027297927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1027310078",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24305#issuecomment-1027310078",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24305",
    "id": 1027310078,
    "node_id": "IC_kwDOAOvK9849O4H-",
    "user": {
      "login": "spatial25",
      "id": 89701798,
      "node_id": "MDQ6VXNlcjg5NzAxNzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/89701798?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spatial25",
      "html_url": "https://github.com/spatial25",
      "followers_url": "https://api.github.com/users/spatial25/followers",
      "following_url": "https://api.github.com/users/spatial25/following{/other_user}",
      "gists_url": "https://api.github.com/users/spatial25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spatial25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spatial25/subscriptions",
      "organizations_url": "https://api.github.com/users/spatial25/orgs",
      "repos_url": "https://api.github.com/users/spatial25/repos",
      "events_url": "https://api.github.com/users/spatial25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spatial25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T21:34:54Z",
    "updated_at": "2022-02-01T21:34:54Z",
    "author_association": "NONE",
    "body": "Fixed it by using ./geth removedb --datadir=\"directory\" IPC file remained so I don't think a full new sync is needed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1027310078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

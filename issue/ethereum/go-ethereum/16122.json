{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16122",
  "id": 298072809,
  "node_id": "MDU6SXNzdWUyOTgwNzI4MDk=",
  "number": 16122,
  "title": "Last 200 blocks never sync with geth 1.7.3 using fast sync",
  "user": {
    "login": "prashantprabhakar",
    "id": 20419322,
    "node_id": "MDQ6VXNlcjIwNDE5MzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/20419322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prashantprabhakar",
    "html_url": "https://github.com/prashantprabhakar",
    "followers_url": "https://api.github.com/users/prashantprabhakar/followers",
    "following_url": "https://api.github.com/users/prashantprabhakar/following{/other_user}",
    "gists_url": "https://api.github.com/users/prashantprabhakar/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prashantprabhakar/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prashantprabhakar/subscriptions",
    "organizations_url": "https://api.github.com/users/prashantprabhakar/orgs",
    "repos_url": "https://api.github.com/users/prashantprabhakar/repos",
    "events_url": "https://api.github.com/users/prashantprabhakar/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prashantprabhakar/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-02-18T10:00:01Z",
  "updated_at": "2018-02-19T06:33:50Z",
  "closed_at": "2018-02-19T06:28:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth\r\nVersion: 1.7.3-stable\r\nGit Commit: 4bb3c89d44e372e6a9ab85a8be0c9345265c763a\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.9\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/lib/go-1.9\r\n\r\nOS & Version: Linux\r\n#### Expected behaviour\r\nAll blocks should sync normally\r\n\r\n#### Actual behaviour\r\nLast 200 blocks never sync.. Has been more than 4 hours since only 200 blocks were remaining. Still 200 blocks remaining.\r\n\r\n#### Steps to reproduce the behaviour\r\nInstall geth 1.7.3\r\nRun `geth --fast --cache=2048`.\r\n\r\n#### Further details:\r\n**$ eth.syncing**\r\n```\r\n{\r\n  currentBlock: 5111862,\r\n  highestBlock: 5111942,\r\n  knownStates: 999555,\r\n  pulledStates: 947983,\r\n  startingBlock: 5111744\r\n}\r\n\r\n```\r\n\r\nNo matter if I check after an hour result is same. If I stop geth and start again, both current and heighest blocks count will increase. The difference is roughly around 200 blocks. So seems last 200 blocks never sync.\r\n\r\nHowever, logs keep going like this:\r\n```\r\n[02-18|09:57:56] Imported new state entries               count=1224 elapsed=26.074ms  processed=1933989 pending=45337 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:56] Imported new state entries               count=1001 elapsed=35.142ms  processed=1934990 pending=44589 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:57] Imported new state entries               count=1194 elapsed=22.065ms  processed=1936184 pending=44829 retry=2    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:57] Imported new state entries               count=1002 elapsed=23.095ms  processed=1937186 pending=44276 retry=1    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:58] Imported new state entries               count=1179 elapsed=38.459ms  processed=1938365 pending=44558 retry=100  duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:58] Imported new state entries               count=1138 elapsed=24.388ms  processed=1939503 pending=43987 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:58] Imported new state entries               count=1338 elapsed=17.762ms  processed=1940841 pending=42841 retry=3    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:59] Imported new state entries               count=565  elapsed=6.756ms   processed=1941406 pending=45074 retry=1    duplicate=338 unexpected=1365\r\nINFO [02-18|09:57:59] Imported new state entries               count=1136 elapsed=25.393ms  processed=1942542 pending=44570 retry=57   duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:00] Imported new state entries               count=957  elapsed=19.497ms  processed=1943499 pending=47120 retry=4    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:01] Imported new state entries               count=1310 elapsed=42.180ms  processed=1944809 pending=46466 retry=2    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:01] Imported new state entries               count=1122 elapsed=36.890ms  processed=1945931 pending=46068 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:01] Imported new state entries               count=1071 elapsed=23.370ms  processed=1947002 pending=45739 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:02] Imported new state entries               count=1281 elapsed=35.039ms  processed=1948283 pending=45938 retry=6    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:02] Imported new state entries               count=1090 elapsed=19.365ms  processed=1949373 pending=45635 retry=89   duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:03] Imported new state entries               count=1137 elapsed=33.953ms  processed=1950510 pending=44912 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:03] Imported new state entries               count=1335 elapsed=23.593ms  processed=1951845 pending=43679 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:03] Imported new state entries               count=1110 elapsed=11.599ms  processed=1952955 pending=43934 retry=3    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:04] Imported new state entries               count=1252 elapsed=15.924ms  processed=1954207 pending=43487 retry=3    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:04] Imported new state entries               count=1428 elapsed=25.289ms  processed=1955635 pending=43201 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:04] Imported new state entries               count=947  elapsed=12.164ms  processed=1956582 pending=42711 retry=2    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:05] Imported new state entries               count=602  elapsed=6.676ms   processed=1957184 pending=43623 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:06] Imported new state entries               count=705  elapsed=6.022ms   processed=1957889 pending=46347 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:06] Imported new state entries               count=947  elapsed=22.144ms  processed=1958836 pending=46680 retry=87   duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:08] Imported new state entries               count=1092 elapsed=16.774ms  processed=1959928 pending=49239 retry=0    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:08] Imported new state entries               count=1355 elapsed=12.120ms  processed=1961283 pending=49672 retry=4    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:08] Imported new state entries               count=1264 elapsed=29.052ms  processed=1962547 pending=49200 retry=22   duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:09] Imported new state entries               count=1198 elapsed=31.746ms  processed=1963745 pending=48918 retry=4    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:09] Imported new state entries               count=1263 elapsed=25.053ms  processed=1965008 pending=48581 retry=2    duplicate=338 unexpected=1365\r\nINFO [02-18|09:58:10] Imported new state entries               count=958  elapsed=16.660ms  processed=1965966 pending=47917 retry=0    duplicate=338 unexpected=1365\r\n\r\n\r\n```",
  "closed_by": {
    "login": "prashantprabhakar",
    "id": 20419322,
    "node_id": "MDQ6VXNlcjIwNDE5MzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/20419322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prashantprabhakar",
    "html_url": "https://github.com/prashantprabhakar",
    "followers_url": "https://api.github.com/users/prashantprabhakar/followers",
    "following_url": "https://api.github.com/users/prashantprabhakar/following{/other_user}",
    "gists_url": "https://api.github.com/users/prashantprabhakar/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prashantprabhakar/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prashantprabhakar/subscriptions",
    "organizations_url": "https://api.github.com/users/prashantprabhakar/orgs",
    "repos_url": "https://api.github.com/users/prashantprabhakar/repos",
    "events_url": "https://api.github.com/users/prashantprabhakar/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prashantprabhakar/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366599353",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16122#issuecomment-366599353",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16122",
    "id": 366599353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjU5OTM1Mw==",
    "user": {
      "login": "prashantprabhakar",
      "id": 20419322,
      "node_id": "MDQ6VXNlcjIwNDE5MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20419322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prashantprabhakar",
      "html_url": "https://github.com/prashantprabhakar",
      "followers_url": "https://api.github.com/users/prashantprabhakar/followers",
      "following_url": "https://api.github.com/users/prashantprabhakar/following{/other_user}",
      "gists_url": "https://api.github.com/users/prashantprabhakar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prashantprabhakar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prashantprabhakar/subscriptions",
      "organizations_url": "https://api.github.com/users/prashantprabhakar/orgs",
      "repos_url": "https://api.github.com/users/prashantprabhakar/repos",
      "events_url": "https://api.github.com/users/prashantprabhakar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prashantprabhakar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-19T06:28:49Z",
    "updated_at": "2018-02-19T06:28:49Z",
    "author_association": "NONE",
    "body": "Finally, after 6 hours the blocks synced. Geth was importing new states for a quite long time.But finally I could see `eth.blockNumber` to be the latest block and `eth.syncing` returned false, verifying that blockchain synced. Needed some patience. Still not sure why so much state imports only when 150-200 blocks left and these 200 blocks took much time. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366599353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

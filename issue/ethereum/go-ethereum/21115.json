{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21115",
  "id": 623278001,
  "node_id": "MDU6SXNzdWU2MjMyNzgwMDE=",
  "number": 21115,
  "title": "block sealing failed, unauthorized signer",
  "user": {
    "login": "kvakes",
    "id": 377005,
    "node_id": "MDQ6VXNlcjM3NzAwNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/377005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kvakes",
    "html_url": "https://github.com/kvakes",
    "followers_url": "https://api.github.com/users/kvakes/followers",
    "following_url": "https://api.github.com/users/kvakes/following{/other_user}",
    "gists_url": "https://api.github.com/users/kvakes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kvakes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kvakes/subscriptions",
    "organizations_url": "https://api.github.com/users/kvakes/orgs",
    "repos_url": "https://api.github.com/users/kvakes/repos",
    "events_url": "https://api.github.com/users/kvakes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kvakes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-05-22T15:12:01Z",
  "updated_at": "2020-06-26T06:36:32Z",
  "closed_at": "2020-06-26T06:36:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I'm starting a private testner in a docker container. In genesis.json that was used in `geth init ...` I have the \"extradata\" field:\r\n\r\n```\r\n\"extradata\": \"0x000000000000000000000000000000000000000000000000000000000000000028d9f2192f8cec7724c6c71e3048d03372f8d5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"\r\n```\r\n\r\nAccording to [documentation](https://geth.ethereum.org/docs/interface/private-network), this is how one would make the `0x28d9f2192f8cec7724c6c71e3048d03372f8d5d0` account to be able to sign blocks. (Althouth there is a [tool](https://github.com/getamis/Istanbul-tools) that generates a different `extradata` contents.)\r\n\r\n#### System information\r\n\r\nGeth version: 1.9.14\r\nOS & Version: node:10-alpine\r\n\r\n#### Expected behaviour\r\n\r\nWhen I start the blockchain with `0x28d9f2192f8cec7724c6c71e3048d03372f8d5d0` unlocked, I expect to see normal mining activity.\r\n\r\n#### Actual behaviour\r\n\r\n`geth` ignores the `extradata` field and instead takes the first account from `datadir/keystore` and makes it the signer.\r\n\r\n```\r\nINFO [05-22|14:46:46.730] Etherbase automatically configured       address=0xa6e96AC2C446F89699479FBb1bf0DE93719E2105\r\nINFO [05-22|14:46:46.730] Commit new mining work                   number=1 sealhash=\"437fc5…8ecd60\" uncles=0 txs=0 gas=0 fees=0 elapsed=\"73.42µs\"\r\nWARN [05-22|14:46:46.730] Block sealing failed                     err=\"unauthorized signer\"\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n##### Dockerfile\r\n\r\n```\r\nARG GETH_VERSION=1.9.14\r\nARG DATADIR=/testnet-datadir\r\n\r\n# Build Geth in a stock Go builder container\r\nFROM golang:1.14-alpine as builder\r\nARG GETH_VERSION\r\n\r\nRUN apk add --no-cache make gcc musl-dev linux-headers\r\n\r\nWORKDIR /\r\nRUN wget https://github.com/ethereum/go-ethereum/archive/v${GETH_VERSION}.tar.gz\r\nRUN tar -xvzf v${GETH_VERSION}.tar.gz\r\nRUN cd go-ethereum-${GETH_VERSION} && make geth\r\n\r\n# Pull Geth into a second stage deploy alpine container\r\nFROM node:10-alpine as setup\r\nARG DATADIR\r\nENV DATADIR=${DATADIR}\r\n\r\n# Copy geth built in previous step\r\nCOPY --from=builder /go-ethereum-${GETH_VERSION}/build/bin/geth /usr/local/bin/\r\n\r\n# Initialize testnet\r\nCOPY genesis.json ${DATADIR}/\r\nRUN geth init --datadir ${DATADIR} ${DATADIR}/genesis.json\r\n\r\nEXPOSE 8545 8546 8547 30303 30303/udp\r\n\r\nENTRYPOINT geth --datadir ${DATADIR} --networkid 15\r\n```\r\n\r\n##### genesis.json\r\n\r\n```\r\n{\r\n    \"config\": {\r\n        \"chainId\": 15,\r\n        \"homesteadBlock\":0,\r\n        \"eip150Block\":0,\r\n        \"eip150Hash\": \"0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a\",\r\n        \"eip155Block\":0,\r\n        \"eip158Block\":0,\r\n        \"eip160Block\":0,\r\n        \"byzantiumBlock\":0,\r\n        \"constantinopleBlock\":0,\r\n        \"petersburgBlock\":0,\r\n        \"istanbulBlock\":0,\r\n        \"clique\": {\r\n            \"period\":5,\r\n            \"epoch\":30000\r\n        }\r\n    },\r\n    \"difficulty\": \"1\",\r\n    \"gasLimit\": \"0xa00000\",\r\n    \"extradata\": \"0x000000000000000000000000000000000000000000000000000000000000000028d9f2192f8cec7724c6c71e3048d03372f8d5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"alloc\": {\r\n      \"28D9F2192F8CeC7724c6C71e3048D03372F8d5D0\": { \"balance\": \"20000000000000000000\" },\r\n      \"a6e96AC2C446F89699479FBb1bf0DE93719E2105\": { \"balance\": \"20000000000000000000\" }\r\n    }\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633647095",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21115#issuecomment-633647095",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115",
    "id": 633647095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzY0NzA5NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-25T16:39:57Z",
    "updated_at": "2020-05-25T16:39:57Z",
    "author_association": "MEMBER",
    "body": "You can run `clique.getSnapshot()` in the Geth console to see what the current state of the network is. That might shed some light as to why you are unauthorized. My hunch is that there's some error in the extra data and a different account is given signing permissions.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633647095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633650999",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21115#issuecomment-633650999",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115",
    "id": 633650999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzY1MDk5OQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-25T16:52:42Z",
    "updated_at": "2020-05-25T16:52:42Z",
    "author_association": "MEMBER",
    "body": "Btw, I think you're missing a zero at the end",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/633650999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640321356",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21115#issuecomment-640321356",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115",
    "id": 640321356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDMyMTM1Ng==",
    "user": {
      "login": "beyonderyue",
      "id": 15408094,
      "node_id": "MDQ6VXNlcjE1NDA4MDk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/15408094?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beyonderyue",
      "html_url": "https://github.com/beyonderyue",
      "followers_url": "https://api.github.com/users/beyonderyue/followers",
      "following_url": "https://api.github.com/users/beyonderyue/following{/other_user}",
      "gists_url": "https://api.github.com/users/beyonderyue/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/beyonderyue/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/beyonderyue/subscriptions",
      "organizations_url": "https://api.github.com/users/beyonderyue/orgs",
      "repos_url": "https://api.github.com/users/beyonderyue/repos",
      "events_url": "https://api.github.com/users/beyonderyue/events{/privacy}",
      "received_events_url": "https://api.github.com/users/beyonderyue/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T02:01:45Z",
    "updated_at": "2020-06-08T02:01:45Z",
    "author_association": "NONE",
    "body": "May be you should set etherbase first",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640321356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/650002764",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21115#issuecomment-650002764",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21115",
    "id": 650002764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDAwMjc2NA==",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-06-26T06:36:32Z",
    "updated_at": "2020-06-26T06:36:32Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/650002764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

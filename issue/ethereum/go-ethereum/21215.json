{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21215",
  "id": 636713655,
  "node_id": "MDU6SXNzdWU2MzY3MTM2NTU=",
  "number": 21215,
  "title": "The process EVM is terminated automatically when it detect an \"infinite loop\" ",
  "user": {
    "login": "BattleBird",
    "id": 13298978,
    "node_id": "MDQ6VXNlcjEzMjk4OTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/13298978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BattleBird",
    "html_url": "https://github.com/BattleBird",
    "followers_url": "https://api.github.com/users/BattleBird/followers",
    "following_url": "https://api.github.com/users/BattleBird/following{/other_user}",
    "gists_url": "https://api.github.com/users/BattleBird/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BattleBird/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BattleBird/subscriptions",
    "organizations_url": "https://api.github.com/users/BattleBird/orgs",
    "repos_url": "https://api.github.com/users/BattleBird/repos",
    "events_url": "https://api.github.com/users/BattleBird/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BattleBird/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-06-11T04:48:13Z",
  "updated_at": "2020-06-19T10:44:12Z",
  "closed_at": "2020-06-19T10:44:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "when I use the binary EVM to run the following code,\r\n./evm_1_9_11 --debug --json --code 608060405260043610603f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063f8a8fd6d146044575b600080fd5b348015604f57600080fd5b506056604f565b6040518082815260200191505060405180910390f35b6000806000809150600090505b6101008110156095578181830201915080806001019150506079565b8192505050905600a165627a7a723058209532f82c5915ea5c48e4bec8d992af9c7b0000000000000000000000c467441af9aaf8c53a5bb7d6074e680029 --input f8a8fd6d run\r\n\r\nSystem information\r\nGeth version: 1.9.11\r\nOS & Version: Linux\r\nCommit hash : (if develop)\r\n\r\nExpected behaviour\r\nevm will keep running because there is enough gas\r\n\r\nActual behaviour\r\nprocess is terminated after running a few second\r\n\r\nSteps to reproduce the behaviour\r\nThe bytecode THAT I provided above contains an \"infinite loop\"\r\n\r\nBacktrace\r\n[backtrace]\r\n![trace_geth](https://user-images.githubusercontent.com/13298978/84346040-98eece80-abe1-11ea-89ca-ed44681e1be6.png)\r\n\r\n\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/642404103",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21215#issuecomment-642404103",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215",
    "id": 642404103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MjQwNDEwMw==",
    "user": {
      "login": "BattleBird",
      "id": 13298978,
      "node_id": "MDQ6VXNlcjEzMjk4OTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/13298978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BattleBird",
      "html_url": "https://github.com/BattleBird",
      "followers_url": "https://api.github.com/users/BattleBird/followers",
      "following_url": "https://api.github.com/users/BattleBird/following{/other_user}",
      "gists_url": "https://api.github.com/users/BattleBird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BattleBird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BattleBird/subscriptions",
      "organizations_url": "https://api.github.com/users/BattleBird/orgs",
      "repos_url": "https://api.github.com/users/BattleBird/repos",
      "events_url": "https://api.github.com/users/BattleBird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BattleBird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-11T04:49:11Z",
    "updated_at": "2020-06-11T04:49:11Z",
    "author_association": "NONE",
    "body": "I know restricting the gas limit is the only way to detect (or rather protect against) infinite loops. However, in this example, the program has enough gas limit. As the trace picture shows, the remaining gas is enough to keep running. Why the process is terminated automatically?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/642404103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646555135",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21215#issuecomment-646555135",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215",
    "id": 646555135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjU1NTEzNQ==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T10:12:23Z",
    "updated_at": "2020-06-19T10:14:50Z",
    "author_association": "MEMBER",
    "body": "I tried to repro, but couldn't. The infinite loop has been running on my machine for ~10 minutes now and it didn't crash. Maybe your program was terminated by the OS as it used to much memory or cpu? \r\nMaybe you also need to update from evm_1_9_11 to a newer version\r\n\r\nI ran the test down to \r\n```\r\n{\"pc\":81,\"op\":96,\"gas\":\"0x252ee7102\",\"gasCost\":\"0x3\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":83,\"op\":96,\"gas\":\"0x252ee70ff\",\"gasCost\":\"0x3\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\",\"0x56\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":85,\"op\":86,\"gas\":\"0x252ee70fc\",\"gasCost\":\"0x8\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\",\"0x56\",\"0x4f\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"JUMP\",\"error\":\"\"}\r\n``` ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646555135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646565720",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21215#issuecomment-646565720",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21215",
    "id": 646565720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjU2NTcyMA==",
    "user": {
      "login": "BattleBird",
      "id": 13298978,
      "node_id": "MDQ6VXNlcjEzMjk4OTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/13298978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BattleBird",
      "html_url": "https://github.com/BattleBird",
      "followers_url": "https://api.github.com/users/BattleBird/followers",
      "following_url": "https://api.github.com/users/BattleBird/following{/other_user}",
      "gists_url": "https://api.github.com/users/BattleBird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BattleBird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BattleBird/subscriptions",
      "organizations_url": "https://api.github.com/users/BattleBird/orgs",
      "repos_url": "https://api.github.com/users/BattleBird/repos",
      "events_url": "https://api.github.com/users/BattleBird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BattleBird/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T10:37:49Z",
    "updated_at": "2020-06-19T10:37:49Z",
    "author_association": "NONE",
    "body": "> I tried to repro, but couldn't. The infinite loop has been running on my machine for ~10 minutes now and it didn't crash. Maybe your program was terminated by the OS as it used to much memory or cpu?\r\n> Maybe you also need to update from evm_1_9_11 to a newer version\r\n> \r\n> I ran the test down to\r\n> \r\n> ```\r\n> {\"pc\":81,\"op\":96,\"gas\":\"0x252ee7102\",\"gasCost\":\"0x3\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n> {\"pc\":83,\"op\":96,\"gas\":\"0x252ee70ff\",\"gasCost\":\"0x3\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\",\"0x56\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n> {\"pc\":85,\"op\":86,\"gas\":\"0x252ee70fc\",\"gasCost\":\"0x8\",\"memory\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080\",\"memSize\":96,\"stack\":[\"0xf8a8fd6d\",\"0x56\",\"0x4f\"],\"returnStack\":[],\"depth\":1,\"refund\":0,\"opName\":\"JUMP\",\"error\":\"\"}\r\n> ```\r\n\r\nYeah, I think you're right. Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/646565720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

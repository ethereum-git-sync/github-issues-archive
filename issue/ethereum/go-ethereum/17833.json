{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17833",
  "id": 366593620,
  "node_id": "MDU6SXNzdWUzNjY1OTM2MjA=",
  "number": 17833,
  "title": "Geth console contract interaction is different when compared with Remix IDE",
  "user": {
    "login": "diego-lima",
    "id": 12664294,
    "node_id": "MDQ6VXNlcjEyNjY0Mjk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/12664294?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/diego-lima",
    "html_url": "https://github.com/diego-lima",
    "followers_url": "https://api.github.com/users/diego-lima/followers",
    "following_url": "https://api.github.com/users/diego-lima/following{/other_user}",
    "gists_url": "https://api.github.com/users/diego-lima/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/diego-lima/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/diego-lima/subscriptions",
    "organizations_url": "https://api.github.com/users/diego-lima/orgs",
    "repos_url": "https://api.github.com/users/diego-lima/repos",
    "events_url": "https://api.github.com/users/diego-lima/events{/privacy}",
    "received_events_url": "https://api.github.com/users/diego-lima/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    },
    {
      "id": 1153621723,
      "node_id": "MDU6TGFiZWwxMTUzNjIxNzIz",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:on-hold",
      "name": "status:on-hold",
      "color": "d89165",
      "default": false,
      "description": ""
    },
    {
      "id": 1269313112,
      "node_id": "MDU6TGFiZWwxMjY5MzEzMTEy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:backlog",
      "name": "status:backlog",
      "color": "29ceb3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-10-04T01:59:43Z",
  "updated_at": "2020-08-09T12:54:45Z",
  "closed_at": "2020-08-09T12:54:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Geth console (or solc compiler, can't tell) bug\r\nI found evidences of a problem that lies somewhere between the solc compiler or geth console. I don't know which one is actually the source of this bug. \r\n\r\nThe bug is (apparently): I can't add too many attributes to a Solidity struct inside a contract when using geth console + solc compiler.\r\n\r\nI had no problem testing my contract inside Remix IDE, but couldn't get it to work using solc+geth console.\r\n\r\nI had a list(array) of structs, and two functions: the first would put new data to array, the second would return all data contained inside the array.\r\n\r\nIn Remix IDE, I could put new data and see it using the listing function. But compiling the same contract using solc and testing the same functions using geth console only got me some empty arrays (like `[[],[],[]]`).\r\n\r\nBelow reads:\r\n\r\n#### 1. Explanation\r\n#### 2. Reproducing\r\n#### 3. System information\r\n\r\n\r\n## 1. Explanation\r\n\r\n\r\nSuppose there are three pieces of information I want to store: `bytes32 food`, `uint weight` and `address owner`.\r\n\r\nI wrote contracts for storing some structs with these attributes, with functions for putting new data, and listing all data. But I couldn't have a struct with all 3 attributes working together. This means:\r\n* `food` and `owner` worked\r\n* `food` and `weight` worked\r\n* `weight` and `owner` worked\r\n\r\nBut all three together did not work:\r\n\r\n* `food`, `weight`, `owner`\r\n\r\nFor each situation, I had a `put` function, to store new data in an array, and `list` function, to retrieve all data.\r\n\r\nI compiled and deployed using both Remix IDE and solc compiler (with geth console). It always worked on Remix, but it only worked on solc+geth when I only had 2 attributes.\r\n\r\n## 1. Reproducing\r\n\r\nThis is an example contract. It defines a `Bowl` structure, which holds text, integer and address attributes.\r\nIt has a `bowlArray` for storing `Bowl`s, and functions to store and retrieve `Bowls.`\r\n\r\n```js\r\npragma solidity ^0.4.23;\r\ncontract Kitchen {\r\n    struct Bowl {\r\n        bytes32 food;\r\n        address owner;\r\n        uint weight;\r\n    }\r\n\r\n    Bowl[] bowlArray;\r\n    \r\n    function put(bytes32 _food, uint _weight) public returns (uint){\r\n        return bowlArray.push(\r\n            Bowl({food: _food, weight: _weight, owner:msg.sender})\r\n        ) - 1;\r\n    }\r\n        \r\n    function listBowls() public view returns (bytes32[], uint[], address[]) {\r\n        uint[] memory weights = new uint[](bowlArray.length);\r\n        bytes32[] memory foods = new bytes32[](bowlArray.length);\r\n        address[] memory owners = new address[](bowlArray.length);\r\n\r\n        for (uint i = 0; i < bowlArray.length; i++){\r\n            weights[i] = bowlArray[i].weight;\r\n            foods[i] = bowlArray[i].food;\r\n            owners[i] = bowlArray[i].owner;\r\n        }\r\n\r\n        return (foods, weights, owners);\r\n    }\r\n}  \r\n```\r\n\r\nSo, I can successfully:\r\n\r\n1. Compile and deploy this contract via Remix IDE\r\n2. Call `put` function to store new data\r\n3. Call `listBowls` function to retrieve stored data and actually see all stored data\r\n\r\nI was hoping to achieve the same results in **geth console**:\r\n\r\n\r\n```js\r\n// var contract = the deployed contract\r\ncontract.put(\"beans\", 12);\r\n// wait a few moments for transaction to be mined...\r\ncontract.listBowls()\r\n// this should read something like [[foods], [weights], [owners]]\r\n// > [[\"0x6265616e73000000000000000000000000000000000000000000000000000000\"], [12], [\"0x8b1223141c073f698411d34ad1725dafbef1933d\"]]\r\n```\r\n\r\nBut what I actually get is\r\n\r\n```js\r\n> [[],[],[]]\r\n```\r\n\r\nBUT, if I change the `Bowl` structure to have only two fields, whatever they may be, it works. In the below example, I removed the `weight` attribute from the `Bowl` structure:\r\n\r\n```js\r\npragma solidity ^0.4.23;\r\n\r\ncontract Kitchen {\r\n    struct Bowl {\r\n        bytes32 food;\r\n        address owner;\r\n    }\r\n\r\n    Bowl[] bowlArray;\r\n    \r\n    function put(bytes32 _text) public returns (uint){\r\n        return bowlArray.push(\r\n            Bowl({food:_text, owner:msg.sender})\r\n        ) - 1;\r\n    }\r\n        \r\n    function listBowls() public view returns (bytes32[], address[]) {\r\n        bytes32[] memory foods = new bytes32[](bowlArray.length);\r\n        address[] memory owners = new address[](bowlArray.length);\r\n\r\n        for (uint i = 0; i < bowlArray.length; i++){\r\n            foods[i] = bowlArray[i].food;\r\n            owners[i] = bowlArray[i].owner;\r\n        }\r\n\r\n        return (foods, owners);\r\n    }\r\n}  \r\n```\r\n\r\nSo, in the geth console:\r\n\r\n```js\r\n// var contract = the deployed contract\r\ncontract.put(\"beans\");\r\n// wait a few moments for transaction to be mined...\r\ncontract.listBowls()\r\n// this should read something like [[foods], [owners]]\r\n// > [[\"0x6265616e73000000000000000000000000000000000000000000000000000000\"], [\"0x8b1223141c073f698411d34ad1725dafbef1933d\"]]\r\n```\r\n\r\nAnd the result I get:\r\n\r\n```js\r\n> [[\"0x6265616e73000000000000000000000000000000000000000000000000000000\"], [\"0x8b1223141c073f698411d34ad1725dafbef1933d\"]]\r\n```\r\n\r\nI also tried with only `food` and `weight` attributes, and it also worked both in Remix and geth console.\r\n\r\nAnytime I had 3 different attributes, it stopped working in geth console, but continued to work as expected in Remix.\r\n\r\nAm I missing something?\r\n\r\n## 3. System information\r\n\r\nGeth version: `1.8.12-stable-37685930`\r\nSolc version: `0.4.24+commit.e67f0147.Linux.g++`\r\nOS & Version: `Ubuntu 18.04.1 LTS`",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505744786",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17833#issuecomment-505744786",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833",
    "id": 505744786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTc0NDc4Ng==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-26T06:51:02Z",
    "updated_at": "2019-06-26T06:51:02Z",
    "author_association": "MEMBER",
    "body": "I'm suspecting this is related to https://github.com/ethereum/go-ethereum/issues/14649\r\n\r\nI have a fix in the pipe, will get back to this when it's deployed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505744786/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505890970",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17833#issuecomment-505890970",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833",
    "id": 505890970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTg5MDk3MA==",
    "user": {
      "login": "diego-lima",
      "id": 12664294,
      "node_id": "MDQ6VXNlcjEyNjY0Mjk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12664294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diego-lima",
      "html_url": "https://github.com/diego-lima",
      "followers_url": "https://api.github.com/users/diego-lima/followers",
      "following_url": "https://api.github.com/users/diego-lima/following{/other_user}",
      "gists_url": "https://api.github.com/users/diego-lima/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diego-lima/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diego-lima/subscriptions",
      "organizations_url": "https://api.github.com/users/diego-lima/orgs",
      "repos_url": "https://api.github.com/users/diego-lima/repos",
      "events_url": "https://api.github.com/users/diego-lima/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diego-lima/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-26T14:06:55Z",
    "updated_at": "2019-06-26T14:06:55Z",
    "author_association": "NONE",
    "body": "@gballet , I ran into another bug, which I soon found it to be related to `solc`, not `geth`.\r\n\r\nI was having trouble calling state-changing functions on my contracts.\r\n\r\nI solved my issue downgrading the `solc` version. I described my process on [StackExchange](https://ethereum.stackexchange.com/q/72070/46481).\r\n\r\nDo you think this bug could be related to the one described in this page?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505890970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/506228698",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17833#issuecomment-506228698",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833",
    "id": 506228698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjIyODY5OA==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-27T07:31:28Z",
    "updated_at": "2019-06-27T07:31:35Z",
    "author_association": "MEMBER",
    "body": "These don't seem related, no. This one seems to be a JS interpreter issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/506228698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/650747300",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17833#issuecomment-650747300",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17833",
    "id": 650747300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDc0NzMwMA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-06-28T12:37:34Z",
    "updated_at": "2020-06-28T12:37:34Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/650747300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

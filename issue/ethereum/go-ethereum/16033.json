{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16033",
  "id": 295290629,
  "node_id": "MDU6SXNzdWUyOTUyOTA2Mjk=",
  "number": 16033,
  "title": "SIGBUS: bus error code=0x2 in consensus/ethash.generateDataset.func2",
  "user": {
    "login": "9607835",
    "id": 11466579,
    "node_id": "MDQ6VXNlcjExNDY2NTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/11466579?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/9607835",
    "html_url": "https://github.com/9607835",
    "followers_url": "https://api.github.com/users/9607835/followers",
    "following_url": "https://api.github.com/users/9607835/following{/other_user}",
    "gists_url": "https://api.github.com/users/9607835/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/9607835/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/9607835/subscriptions",
    "organizations_url": "https://api.github.com/users/9607835/orgs",
    "repos_url": "https://api.github.com/users/9607835/repos",
    "events_url": "https://api.github.com/users/9607835/events{/privacy}",
    "received_events_url": "https://api.github.com/users/9607835/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-02-07T20:59:23Z",
  "updated_at": "2018-02-10T01:54:09Z",
  "closed_at": "2018-02-10T01:54:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "It used to at least startup but fail to mine (I noticed all the CPU time was being spent waiting for IO).... then I deleted the ~/.ethash directory (located in AppData in windows/cygwin fyi) and started over.\r\nNow when I run a second instance of geth on a different data directory I get a SIGBUS error, everytime reliably.  However if the DAG has finished generating then I am able to start a second instance (not that it matters since the first instance is already using 99% of the CPU waiting for IO at that point...)\r\n\r\nI don't have any fancy drive setup like fuse zfs-fuse encfs etc...\r\nno errors in /var/log/{messages,secure,...}\r\n\r\n#### System information\r\n\r\nGeth version:\r\n  Geth\r\n  Version: 1.8.0-unstable\r\n  Git Commit: b06e20bc7c498adef658b58f10f5c729b46d84f9\r\n  Architecture: amd64\r\n  Protocol Versions: [63 62]\r\n  Network Id: 1\r\n  Go Version: go1.8.3\r\n  Operating System: linux\r\n  GOPATH=\r\n  GOROOT=/usr/lib/golang\r\n\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\ncontinue without error after starting second instance since there should be no communication between the two instances (the bootnode server is not running)\r\n\r\n#### Actual behaviour\r\n\r\nunexpected fault address 0x7f6ae2b50288\r\nfatal error: fault\r\n[signal SIGBUS: bus error code=0x2 addr=0x7f6ae2b50288 pc=0x4706ac]\r\n\r\ngoroutine 142 [running]:\r\nruntime.throw(0x101593a, 0x5)\r\n        /usr/lib/golang/src/runtime/panic.go:596 +0x95 fp=0xc420c7ce48 sp=0xc420c7ce28\r\nruntime.sigpanic()\r\n        /usr/lib/golang/src/runtime/signal_unix.go:287 +0xf4 fp=0xc420c7ce98 sp=0xc420c7ce48\r\nruntime.memmove(0x7f6ae2b50288, 0xc423e8cd40, 0x40)\r\n        /usr/lib/golang/src/runtime/memmove_amd64.s:188 +0x66c fp=0xc420c7cea0 sp=0xc420c7ce98\r\ngithub.com/ethereum/go-ethereum/consensus/ethash.generateDataset.func2(0xc424288060, 0x3ffff880, 0x1, 0xc422600000, 0x3fffb0, 0x3fffb0, 0x0, 0x7f6ae0000008, 0x3ffff880, 0x3ffff880, ...)\r\n        /root/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/consensus/ethash/algorithm.go:275 +0x1f4 fp=0xc420c7cf58 sp=0xc420c7cea0\r\nruntime.goexit()\r\n        /usr/lib/golang/src/runtime/asm_amd64.s:2197 +0x1 fp=0xc420c7cf60 sp=0xc420c7cf58\r\ncreated by github.com/ethereum/go-ethereum/consensus/ethash.generateDataset\r\n        /root/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/consensus/ethash/algorithm.go:281 +0x3ad\r\n\r\n\r\n#### Steps to reproduce the behavior\r\n\r\n(I haven't installed bootnode yet so that wasn't running on this linux machine)\r\n\r\ncd ~/ethereum\r\nmkdir ~/ethereum/ethereum1;\r\ngeth --datadir=\"ethereum1\" init genesis.json;\r\nnice geth --cache=64 --networkid=435343 --datadir=\"ethereum1\" -verbosity 3 --port 30302 --rpcport 8102 --rpcaddr \"0.0.0.0\" --rpccorsdomain \"...\" --ipcdisable --bootnodes \"`cat boot.url`\" --etherbase=\"0xc8164a7b5e194509412939961f858a2f966b0007\" --minerthreads=1 --mine console 2>ethereum1.log;\r\n\r\n[open second terminal]\r\ncd ~/ethereum\r\nmkdir ~/ethereum/ethereum2;\r\ngeth --datadir=\"ethereum2\" init genesis.json;\r\nnice geth --cache=64 --networkid=435343 --datadir=\"ethereum2\" -verbosity 3 --port 30303 --rpcport 8103 --rpcaddr \"0.0.0.0\" --rpccorsdomain \"...\" --ipcdisable --bootnodes \"`cat boot.url`\" --etherbase=\"0xc8164a7b5e194509412939961f858a2f966b0007\" --minerthreads=1 --mine console 2>ethereum2.log;\r\n\r\n#### Backtrace\r\n\r\n[ethereum1.log](https://github.com/ethereum/go-ethereum/files/1704695/ethereum1.log)\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/364100556",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16033#issuecomment-364100556",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16033",
    "id": 364100556,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDEwMDU1Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-08T12:43:27Z",
    "updated_at": "2018-02-08T12:43:27Z",
    "author_association": "MEMBER",
    "body": "Mining requires a 1+GB dataset to be generated on disk. If you start to Geth instances of the same machine, enabling both to mine, they will try to use the same file, overwriting each other's stuff. Geth does have a configuration to put the `--ethash.dataset` on a different folder for one of the instances, but why would you want to run 2 miners on a single host?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/364100556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

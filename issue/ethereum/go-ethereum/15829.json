{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15829",
  "id": 286620009,
  "node_id": "MDU6SXNzdWUyODY2MjAwMDk=",
  "number": 15829,
  "title": "knownStates and pulledStates start from 0 after restart geth in fast mode",
  "user": {
    "login": "gaoxiangxyz",
    "id": 4114641,
    "node_id": "MDQ6VXNlcjQxMTQ2NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4114641?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaoxiangxyz",
    "html_url": "https://github.com/gaoxiangxyz",
    "followers_url": "https://api.github.com/users/gaoxiangxyz/followers",
    "following_url": "https://api.github.com/users/gaoxiangxyz/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaoxiangxyz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaoxiangxyz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaoxiangxyz/subscriptions",
    "organizations_url": "https://api.github.com/users/gaoxiangxyz/orgs",
    "repos_url": "https://api.github.com/users/gaoxiangxyz/repos",
    "events_url": "https://api.github.com/users/gaoxiangxyz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaoxiangxyz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-01-08T01:36:50Z",
  "updated_at": "2018-01-16T04:05:11Z",
  "closed_at": "2018-01-16T04:05:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.7.3`\r\nOS & Version: Windows, OSX\r\n\r\n#### Expected behaviour\r\nknownStates and pulledStates start from last states after restart.\r\n\r\n#### Actual behaviour\r\nknownStates and pulledStates start from 0 after restart. And all knownStates and pulledStates synced before lost.\r\n\r\n#### Steps to reproduce the behaviour\r\nstart geth in fast mode and sync several days, eth.syncing is as below\r\n```\r\neth.syncing\r\n{\r\n  currentBlock: 4862763,\r\n  highestBlock: 4862866,\r\n  knownStates: 57384051,\r\n  pulledStates: 57382304,\r\n  startingBlock: 4862489\r\n}\r\n```\r\nafter restart the eth.syning is as below\r\n```\r\neth.syncing\r\n{\r\n  currentBlock: 48xxxxx,\r\n  highestBlock: 48xxxxx,\r\n  knownStates: 0,\r\n  pulledStates: 0,\r\n  startingBlock: 4862763\r\n}\r\n```\r\n\r\nAnd another question is the disk usage is 166GB at around 4.0 million block number  in full mode, but it is only 47GB in fast mode when currentBlock is 4862763 and pulledStates is 57382304. Is it normal ?\r\n ",
  "closed_by": {
    "login": "gaoxiangxyz",
    "id": 4114641,
    "node_id": "MDQ6VXNlcjQxMTQ2NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4114641?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaoxiangxyz",
    "html_url": "https://github.com/gaoxiangxyz",
    "followers_url": "https://api.github.com/users/gaoxiangxyz/followers",
    "following_url": "https://api.github.com/users/gaoxiangxyz/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaoxiangxyz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaoxiangxyz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaoxiangxyz/subscriptions",
    "organizations_url": "https://api.github.com/users/gaoxiangxyz/orgs",
    "repos_url": "https://api.github.com/users/gaoxiangxyz/repos",
    "events_url": "https://api.github.com/users/gaoxiangxyz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaoxiangxyz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355889386",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15829#issuecomment-355889386",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829",
    "id": 355889386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTg4OTM4Ng==",
    "user": {
      "login": "FOUNDXFUND",
      "id": 3086958,
      "node_id": "MDQ6VXNlcjMwODY5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3086958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FOUNDXFUND",
      "html_url": "https://github.com/FOUNDXFUND",
      "followers_url": "https://api.github.com/users/FOUNDXFUND/followers",
      "following_url": "https://api.github.com/users/FOUNDXFUND/following{/other_user}",
      "gists_url": "https://api.github.com/users/FOUNDXFUND/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FOUNDXFUND/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FOUNDXFUND/subscriptions",
      "organizations_url": "https://api.github.com/users/FOUNDXFUND/orgs",
      "repos_url": "https://api.github.com/users/FOUNDXFUND/repos",
      "events_url": "https://api.github.com/users/FOUNDXFUND/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FOUNDXFUND/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T06:04:29Z",
    "updated_at": "2018-01-08T06:04:29Z",
    "author_association": "NONE",
    "body": "same problem,  when i restart knownStates=0 and then  slow incr by time.  currenctBlock stop incr ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355889386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/357246301",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15829#issuecomment-357246301",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15829",
    "id": 357246301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzI0NjMwMQ==",
    "user": {
      "login": "veox",
      "id": 3036030,
      "node_id": "MDQ6VXNlcjMwMzYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3036030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/veox",
      "html_url": "https://github.com/veox",
      "followers_url": "https://api.github.com/users/veox/followers",
      "following_url": "https://api.github.com/users/veox/following{/other_user}",
      "gists_url": "https://api.github.com/users/veox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/veox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/veox/subscriptions",
      "organizations_url": "https://api.github.com/users/veox/orgs",
      "repos_url": "https://api.github.com/users/veox/repos",
      "events_url": "https://api.github.com/users/veox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/veox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-12T14:04:40Z",
    "updated_at": "2018-01-12T14:04:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Regarding disk usage: yes, \"full archive\" mode keeps all historic states, so it's normal for it to take more than a \"fast\" sync (that only keeps historic states for blocks _after_ the sync).\r\n\r\nYou may want to read https://github.com/ethereum/go-ethereum/issues/15649#issuecomment-357105157 for insights on the state counters during long syncs.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/357246301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

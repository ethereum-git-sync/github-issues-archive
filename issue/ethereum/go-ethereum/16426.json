{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16426",
  "id": 310326173,
  "node_id": "MDU6SXNzdWUzMTAzMjYxNzM=",
  "number": 16426,
  "title": "geth crashes while tracing a specific transaction",
  "user": {
    "login": "Har01d",
    "id": 14060856,
    "node_id": "MDQ6VXNlcjE0MDYwODU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/14060856?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Har01d",
    "html_url": "https://github.com/Har01d",
    "followers_url": "https://api.github.com/users/Har01d/followers",
    "following_url": "https://api.github.com/users/Har01d/following{/other_user}",
    "gists_url": "https://api.github.com/users/Har01d/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Har01d/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Har01d/subscriptions",
    "organizations_url": "https://api.github.com/users/Har01d/orgs",
    "repos_url": "https://api.github.com/users/Har01d/repos",
    "events_url": "https://api.github.com/users/Har01d/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Har01d/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1153621723,
      "node_id": "MDU6TGFiZWwxMTUzNjIxNzIz",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:on-hold",
      "name": "status:on-hold",
      "color": "d89165",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-04-01T14:07:33Z",
  "updated_at": "2021-05-11T14:21:04Z",
  "closed_at": "2021-05-11T14:21:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello,\r\n\r\nThereâ€™s transaction `0x0c10fafe0cdbfff32abfe53d57ec861d09986cc1050c850481f79b1a862bb10a` with many layers of calls (see https://etherscan.io/vmtrace?txhash=0x0c10fafe0cdbfff32abfe53d57ec861d09986cc1050c850481f79b1a862bb10a&type=parity), and when calling something like `debug.traceTransaction(\"0x0c10fafe0cdbfff32abfe53d57ec861d09986cc1050c850481f79b1a862bb10a\", {tracer: \"callTracer\"})`, geth suddenly crashes.\r\n\r\n#### System information\r\n\r\nGeth version: `geth 1.8.2` (with `--syncmode full --gcmode archive` flags)\r\nOS & Version: Ubuntu\r\n\r\n#### Backtrace\r\n\r\n````\r\nSIGABRT: abort\r\nPC=0x7f440dd10428 m=34 sigcode=18446744073709551610\r\nsignal arrived during cgo execution\r\n\r\ngoroutine 6242 [syscall, locked to thread]:\r\nruntime.cgocall(0xcf89a0, 0xc4ed87fe08, 0xf9ec98)\r\n\t/usr/lib/go-1.9/src/runtime/cgocall.go:132 +0xe4 fp=0xc4ed87fdc8 sp=0xc4ed87fd88 pc=0x416f04\r\ngithub.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape%2ev3._Cfunc_duk_json_encode(0x7f43a4005130, 0x7f43ffffffff, 0x0)\r\n\tgithub.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape.v3/_obj/_cgo_gotypes.go:2104 +0x4e fp=0xc4ed87fe08 sp=0xc4ed87fdc8 pc=0xa8baae\r\ngithub.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape%2ev3.(*Context).JsonEncode.func1(0x7f43a4005130, 0xc4ffffffff, 0x7f4300000000)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape.v3/api.go:749 +0x68 fp=0xc4ed87fe40 sp=0xc4ed87fe08 pc=0xa9cab8\r\ngithub.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape%2ev3.(*Context).JsonEncode(0xc4e463b478, 0xffffffffffffffff, 0xc4e463b478, 0x0)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/olebedev/go-duktape.v3/api.go:749 +0x3b fp=0xc4ed87fe68 sp=0xc4ed87fe40 pc=0xa92f4b\r\ngithub.com/ethereum/go-ethereum/eth/tracers.(*Tracer).call(0xc4c7e5aaa0, 0xf7bb8c, 0x6, 0xc4ed87ffe8, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0, ...)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/tracers/tracer.go:485 +0x230 fp=0xc4ed87fed8 sp=0xc4ed87fe68 pc=0xaa7da0\r\ngithub.com/ethereum/go-ethereum/eth/tracers.(*Tracer).GetResult(0xc4c7e5aaa0, 0x184cba0, 0xc4e13f8ea0, 0xc4e5266438, 0x0, 0x0)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/tracers/tracer.go:609 +0x522 fp=0xc4ed880078 sp=0xc4ed87fed8 pc=0xaa9332\r\ngithub.com/ethereum/go-ethereum/eth.(*PrivateDebugAPI).traceTx(0xc43e0473d0, 0x1848140, 0xc4dcb39880, 0x184cba0, 0xc4e13f8ea0, 0x10068b0, 0x10068b8, 0xc4e492d540, 0xbd355efba711ec62, 0x3a367f8b73e249e, ...)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/api_tracer.go:606 +0x448 fp=0xc4ed885278 sp=0xc4ed880078 pc=0xaca928\r\ngithub.com/ethereum/go-ethereum/eth.(*PrivateDebugAPI).TraceTransaction(0xc43e0473d0, 0x1848140, 0xc4dcb39880, 0xf3ffdb0cfefa100c, 0x1d86ec573de5bf2a, 0x4850c05c16c9809, 0xab12b861a9bf781, 0xc4dc5b8920, 0x0, 0x0, ...)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/eth/api_tracer.go:549 +0x27b fp=0xc4ed8854a8 sp=0xc4ed885278 pc=0xaca37b\r\nruntime.call128(0xc4ddf26270, 0xc440640298, 0xc44054f740, 0x4000000060)\r\n\t/usr/lib/go-1.9/src/runtime/asm_amd64.s:511 +0x52 fp=0xc4ed885538 sp=0xc4ed8854a8 pc=0x4705b2\r\nreflect.Value.call(0xc44049d680, 0xc440640298, 0x13, 0xf79134, 0x4, 0xc44054f6e0, 0x4, 0x4, 0x0, 0xc44054f6e0, ...)\r\n\t/usr/lib/go-1.9/src/reflect/value.go:434 +0x905 fp=0xc4ed885810 sp=0xc4ed885538 pc=0x4d0fb5\r\nreflect.Value.Call(0xc44049d680, 0xc440640298, 0x13, 0xc44054f6e0, 0x4, 0x4, 0x2, 0x2, 0x2)\r\n\t/usr/lib/go-1.9/src/reflect/value.go:302 +0xa4 fp=0xc4ed885878 sp=0xc4ed885810 pc=0x4d0594\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).handle(0xc4405f9ca0, 0x1848140, 0xc4dcb39880, 0x184ce60, 0xc4dc5a58b0, 0xc44054f680, 0xc4dc5a5920, 0x0, 0xe34040)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:311 +0x6ce fp=0xc4ed885a20 sp=0xc4ed885878 pc=0x830ebe\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).exec(0xc4405f9ca0, 0x1848140, 0xc4dcb39880, 0x184ce60, 0xc4dc5a58b0, 0xc44054f680)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:333 +0x1ba fp=0xc4ed885a90 sp=0xc4ed885a20 pc=0x831aba\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).serveRequest(0xc4405f9ca0, 0x184ce60, 0xc4dc5a58b0, 0xf81d01, 0x1, 0x0, 0x0)\r\n\r\n\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:194 +0x38f fp=0xc4ed885be0 sp=0xc4ed885a90 pc=0x82fa7f\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).ServeSingleRequest(0xc4405f9ca0, 0x184ce60, 0xc4dc5a58b0, 0x1)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:225 +0x4e fp=0xc4ed885c28 sp=0xc4ed885be0 pc=0x83034e\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).ServeHTTP(0xc4405f9ca0, 0x1846d80, 0xc4db6a4d20, 0xc4da301e00)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/http.go:176 +0x39d fp=0xc4ed885cb8 sp=0xc4ed885c28 pc=0x82971d\r\ngithub.com/ethereum/go-ethereum/rpc.(*virtualHostHandler).ServeHTTP(0xc440646b20, 0x1846d80, 0xc4db6a4d20, 0xc4da301e00)\r\n\t/build/ethereum-s2a8_D/ethereum-1.8.2+build12774+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/http.go:244 +0x14a fp=0xc4ed885d18 sp=0xc4ed885cb8 pc=0x829fca\r\nnet/http.serverHandler.ServeHTTP(0xc440656ea0, 0x1846d80, 0xc4db6a4d20, 0xc4da301e00)\r\n\t/usr/lib/go-1.9/src/net/http/server.go:2619 +0xb4 fp=0xc4ed885d48 sp=0xc4ed885d18 pc=0x7ee024\r\nnet/http.(*conn).serve(0xc4dc590b40, 0x1848140, 0xc4dcb39700)\r\n\t/usr/lib/go-1.9/src/net/http/server.go:1801 +0x71d fp=0xc4ed885fc8 sp=0xc4ed885d48 pc=0x7ea21d\r\nruntime.goexit()\r\n\t/usr/lib/go-1.9/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc4ed885fd0 sp=0xc4ed885fc8 pc=0x472d01\r\ncreated by net/http.(*Server).Serve\r\n\t/usr/lib/go-1.9/src/net/http/server.go:2720 +0x288\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/379418579",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16426#issuecomment-379418579",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426",
    "id": 379418579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTQxODU3OQ==",
    "user": {
      "login": "linuxion",
      "id": 25755605,
      "node_id": "MDQ6VXNlcjI1NzU1NjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/25755605?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/linuxion",
      "html_url": "https://github.com/linuxion",
      "followers_url": "https://api.github.com/users/linuxion/followers",
      "following_url": "https://api.github.com/users/linuxion/following{/other_user}",
      "gists_url": "https://api.github.com/users/linuxion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/linuxion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/linuxion/subscriptions",
      "organizations_url": "https://api.github.com/users/linuxion/orgs",
      "repos_url": "https://api.github.com/users/linuxion/repos",
      "events_url": "https://api.github.com/users/linuxion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/linuxion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-07T00:31:18Z",
    "updated_at": "2018-05-15T21:16:44Z",
    "author_association": "NONE",
    "body": "The problem [solved](https://github.com/ethereum/go-ethereum/pull/16687).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/379418579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/461352858",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16426#issuecomment-461352858",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426",
    "id": 461352858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTM1Mjg1OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T09:52:36Z",
    "updated_at": "2019-02-07T09:52:36Z",
    "author_association": "MEMBER",
    "body": "Depends on https://github.com/olebedev/go-duktape/pull/58 \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/461352858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/583722296",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16426#issuecomment-583722296",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426",
    "id": 583722296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzcyMjI5Ng==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-02-08T10:04:45Z",
    "updated_at": "2020-02-08T10:04:45Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/583722296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/815541739",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16426#issuecomment-815541739",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16426",
    "id": 815541739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNTU0MTczOQ==",
    "user": {
      "login": "easeev",
      "id": 14873170,
      "node_id": "MDQ6VXNlcjE0ODczMTcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/14873170?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/easeev",
      "html_url": "https://github.com/easeev",
      "followers_url": "https://api.github.com/users/easeev/followers",
      "following_url": "https://api.github.com/users/easeev/following{/other_user}",
      "gists_url": "https://api.github.com/users/easeev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/easeev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/easeev/subscriptions",
      "organizations_url": "https://api.github.com/users/easeev/orgs",
      "repos_url": "https://api.github.com/users/easeev/repos",
      "events_url": "https://api.github.com/users/easeev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/easeev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-08T07:56:09Z",
    "updated_at": "2021-04-08T07:56:09Z",
    "author_association": "NONE",
    "body": "Guys @holiman @linuxion @karalabe,\r\n\r\nAny progress with this? AFAIK [the upstream PR](https://github.com/olebedev/go-duktape/pull/58) hasn't been merged and the problem still exists. We have a bunch of Geth nodes crashing due to `traceTransaction` calls.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/815541739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

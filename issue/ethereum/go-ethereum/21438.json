{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21438",
  "id": 676930280,
  "node_id": "MDU6SXNzdWU2NzY5MzAyODA=",
  "number": 21438,
  "title": "Geth trace parser providing invalid traces",
  "user": {
    "login": "juliankoh",
    "id": 19170425,
    "node_id": "MDQ6VXNlcjE5MTcwNDI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19170425?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/juliankoh",
    "html_url": "https://github.com/juliankoh",
    "followers_url": "https://api.github.com/users/juliankoh/followers",
    "following_url": "https://api.github.com/users/juliankoh/following{/other_user}",
    "gists_url": "https://api.github.com/users/juliankoh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/juliankoh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juliankoh/subscriptions",
    "organizations_url": "https://api.github.com/users/juliankoh/orgs",
    "repos_url": "https://api.github.com/users/juliankoh/repos",
    "events_url": "https://api.github.com/users/juliankoh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/juliankoh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2020-08-11T14:35:23Z",
  "updated_at": "2022-04-26T03:12:46Z",
  "closed_at": "2020-08-27T09:33:46Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Hi! I'm getting invalid traces when using the [call_tracer](https://github.com/ethereum/go-ethereum/blob/master/eth/tracers/internal/tracers/call_tracer.js) geth tracing paser. Specifically, it is outputting a trace that should change balance, even though there is no actual balance change on-chain. \r\n\r\n#### System information\r\n\r\nGeth version: `geth version v1.9.18`\r\nOS & Version: OSX\r\nCommit hash : -\r\n\r\n#### Expected behaviour\r\n\r\nUsing the aforementioned tracer on [this transaction](https://ropsten.etherscan.io/tx/0x73ccf1fbebdaa2bc4d33e769373fd9cf65365666245736a11bc773b32ab9f92a), I get the following output: \r\n\r\n```\r\n{\r\n  \"type\": \"CALL\",\r\n  \"from\": \"0x66fdfd05e46126a07465ad24e40cc0597bc1ef31\",\r\n  \"to\": \"0x6c06b16512b332e6cd8293a2974872674716ce18\",\r\n  \"value\": \"0x0\",\r\n  \"gas\": \"0x1a466\",\r\n  \"gasUsed\": \"0x1dc6\",\r\n  \"input\": \"0x2e1a7d4d00000000000000000000000000000000000000000000000014d1120d7b160000\",\r\n  \"output\": \"0x\",\r\n  \"time\": \"1.278236ms\",\r\n  \"calls\": [\r\n    {\r\n      \"type\": \"CALL\",\r\n      \"from\": \"0x6c06b16512b332e6cd8293a2974872674716ce18\",\r\n      \"to\": \"0x66fdfd05e46126a07465ad24e40cc0597bc1ef31\",\r\n      \"value\": \"0x14d1120d7b160000\",\r\n      \"input\": \"0x\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nThis implies that there should be a transfer of value `0x14d1120d7b160000`, but [Etherscan shows](https://ropsten.etherscan.io/tx/0x73ccf1fbebdaa2bc4d33e769373fd9cf65365666245736a11bc773b32ab9f92a#statechange) that this balance change does not happen. \r\n\r\nFurthermore, tracing that same transaction using Parity's node shows that the subcall does not actually happen. Here are Parity's traces: \r\n\r\n```\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"result\": [\r\n    {\r\n      \"action\": {\r\n        \"callType\": \"call\",\r\n        \"from\": \"0x66fdfd05e46126a07465ad24e40cc0597bc1ef31\",\r\n        \"gas\": \"0x1a466\",\r\n        \"input\": \"0x2e1a7d4d00000000000000000000000000000000000000000000000014d1120d7b160000\",\r\n        \"to\": \"0x6c06b16512b332e6cd8293a2974872674716ce18\",\r\n        \"value\": \"0x0\"\r\n      },\r\n      \"blockHash\": \"0xc91e2c6efc40c303a969cace595c31a5ea810986dbbc134c6825fa8b6b226113\",\r\n      \"blockNumber\": 24974,\r\n      \"result\": {\r\n        \"gasUsed\": \"0x1dc6\",\r\n        \"output\": \"0x\"\r\n      },\r\n      \"subtraces\": 0,\r\n      \"traceAddress\": [],\r\n      \"transactionHash\": \"0x73ccf1fbebdaa2bc4d33e769373fd9cf65365666245736a11bc773b32ab9f92a\",\r\n      \"transactionPosition\": 1,\r\n      \"type\": \"call\"\r\n    }\r\n  ],\r\n  \"id\": 1\r\n}\r\n```\r\n\r\nInitially, I thought that I could consider this call invalid because it did not have gasUsed populated. However, I found an example of [another transaction](https://ropsten.etherscan.io/tx/0xfb608b8286d48454e80a9fb190c2a3908a3cdfd6c9c9e96961b1e68320a3f3c7) where the traces look identical to the one I posted above, but actually does apply a balance change as you can see on Etherscan. \r\n\r\nHere are the traces for that transaction:\r\n```\r\n{\r\n  \"type\": \"CALL\",\r\n  \"from\": \"0xb5f5999a52904d4f3482fa31baa52f7be1984906\",\r\n  \"to\": \"0x536e7faca074d21f0830c936e141a7271d09b0c9\",\r\n  \"value\": \"0x0\",\r\n  \"gas\": \"0x2b168\",\r\n  \"gasUsed\": \"0x88f9\",\r\n  \"input\": \"0xb5c5f6720000000000000000000000008f480474b014ea63d4fe5e52478e833fb9e8f93800000000000000000000000000000000000000000000000006f05b59d3b200000000000000000000000000000000000000000000000000000000000000030d40\",\r\n  \"output\": \"0x\",\r\n  \"time\": \"2.063668ms\",\r\n  \"calls\": [\r\n    {\r\n      \"type\": \"CALL\",\r\n      \"from\": \"0x536e7faca074d21f0830c936e141a7271d09b0c9\",\r\n      \"to\": \"0x8f480474b014ea63d4fe5e52478e833fb9e8f938\",\r\n      \"value\": \"0x6f05b59d3b20000\",\r\n      \"input\": \"0x\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n#### Actual behaviour\r\nShowing trace in a transaction although it never happened on-chain. \r\n\r\n#### Steps to reproduce the behaviour\r\nTo reproduce, use this [call_tracer](https://github.com/ethereum/go-ethereum/blob/master/eth/tracers/internal/tracers/call_tracer.js) in the `debug_traceTransaction` endpoint, with [this transaction](https://ropsten.etherscan.io/tx/0x73ccf1fbebdaa2bc4d33e769373fd9cf65365666245736a11bc773b32ab9f92a) on Ropsten\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673336052",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673336052",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673336052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzMzNjA1Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T08:20:35Z",
    "updated_at": "2020-08-13T08:20:35Z",
    "author_association": "MEMBER",
    "body": "Etherscan/parity says that the internal call to `0x66fdfd05e46126a07465ad24e40cc0597bc1ef31` has `0`  value:\r\n\r\nhttps://ropsten.etherscan.io/vmtrace?txhash=0x73ccf1fbebdaa2bc4d33e769373fd9cf65365666245736a11bc773b32ab9f92a&type=parity\r\n\r\n![Screenshot_2020-08-13 Etherscan Transaction VMTrace And Debug](https://user-images.githubusercontent.com/142290/90111182-8bbf9e80-dd4e-11ea-9f28-9dd041969e07.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673336052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673337205",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673337205",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673337205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzMzNzIwNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T08:22:53Z",
    "updated_at": "2020-08-13T08:22:53Z",
    "author_association": "MEMBER",
    "body": "In order to debug this, we'll have to sync ropsten up to block `24974`, which shouldn't take too long, and then get a full trace (not the abriged version) to see what exactly happens here. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673337205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673598586",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673598586",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673598586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzU5ODU4Ng==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:09:45Z",
    "updated_at": "2020-08-13T17:09:45Z",
    "author_association": "MEMBER",
    "body": "So, there is indeed a call like geth says: \r\n![trace-1](https://user-images.githubusercontent.com/142290/90164813-24c6d780-dd98-11ea-973a-46405a7a0d37.png)\r\n\r\nHowever, looking at the next op, it places a `0` on the stack, meaning the call failed. \r\n\r\n![trace-2](https://user-images.githubusercontent.com/142290/90164867-33ad8a00-dd98-11ea-806d-41cf8cb5eebd.png)\r\n\r\nSo indeed, the call did not change the state for the call-destination, nor did it execute any code on the recipient. It's a failed call (I'm not sure why it failed though)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673598586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673599747",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673599747",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673599747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzU5OTc0Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:12:10Z",
    "updated_at": "2020-08-13T17:12:10Z",
    "author_association": "MEMBER",
    "body": "I'm 99% certain that the internal call failed because it tried to send value, but didn't actually have `balance`. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673599747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673602507",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673602507",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673602507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwMjUwNw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:17:41Z",
    "updated_at": "2020-08-13T17:17:41Z",
    "author_association": "MEMBER",
    "body": "So, before I \"fix\" this, I think we should first establish whether the parity-behaviour is correct. I can see the point in that, since if the call fails due to too low balance for call, it's an \"insta-fail\" which does not cause any state changes on the recipient. \r\nOn the other hand, one could argue that the `geth` trace is more correct. \r\n\r\n@karalabe  -- thoughts? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673602507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673605321",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673605321",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673605321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwNTMyMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:23:22Z",
    "updated_at": "2020-08-13T17:23:22Z",
    "author_association": "MEMBER",
    "body": "I *think* it's nice to know there was a call attempt, though in that case we should also list an error accordingly if it failed. But I think we're entering limit-territory for the tracers. We only have a capture method for before (or after, don't remember) an opcode, but to properly capture the failure here I think we'd need both.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673605321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673606615",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673606615",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673606615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwNjYxNQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:25:36Z",
    "updated_at": "2020-08-13T17:25:36Z",
    "author_association": "MEMBER",
    "body": "I distinctly remember that the call tracer has some limitation when 0 opcodes get executed within a call. E.g. we don't know how much gas was allotted to the inner call because we only see the outer gas, then a success/fail. but never the inner one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673606615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673607370",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673607370",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673607370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwNzM3MA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:27:10Z",
    "updated_at": "2020-08-13T17:27:10Z",
    "author_association": "MEMBER",
    "body": "> E.g. we don't know how much gas was allotted to the inner call because we only see the outer gas, then a success/fail. but never the inner one.\r\n\r\nYes, same applies to calls to precompiles. There's no internal tracing, so we can't know if it executed or failed... Don't know how parity handles that case.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673607370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673608136",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-673608136",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 673608136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYwODEzNg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:28:46Z",
    "updated_at": "2020-08-13T17:28:46Z",
    "author_association": "MEMBER",
    "body": "( I mean, we can know that it failed based on the retvalue, but not really much else)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/673608136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/676760842",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-676760842",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 676760842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Njc2MDg0Mg==",
    "user": {
      "login": "juliankoh",
      "id": 19170425,
      "node_id": "MDQ6VXNlcjE5MTcwNDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19170425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juliankoh",
      "html_url": "https://github.com/juliankoh",
      "followers_url": "https://api.github.com/users/juliankoh/followers",
      "following_url": "https://api.github.com/users/juliankoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/juliankoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juliankoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juliankoh/subscriptions",
      "organizations_url": "https://api.github.com/users/juliankoh/orgs",
      "repos_url": "https://api.github.com/users/juliankoh/repos",
      "events_url": "https://api.github.com/users/juliankoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juliankoh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-19T22:18:55Z",
    "updated_at": "2020-08-19T22:18:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@holiman @karalabe hey! wondering if we came to any consensus here on what the path forward is? From a user perspective, I'd like this to be as similar as possible to Parity's, since majority of the industry uses their nodes for tracing. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/676760842/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/679357401",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-679357401",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 679357401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTM1NzQwMQ==",
    "user": {
      "login": "brockmiller",
      "id": 894031,
      "node_id": "MDQ6VXNlcjg5NDAzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockmiller",
      "html_url": "https://github.com/brockmiller",
      "followers_url": "https://api.github.com/users/brockmiller/followers",
      "following_url": "https://api.github.com/users/brockmiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockmiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockmiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockmiller/subscriptions",
      "organizations_url": "https://api.github.com/users/brockmiller/orgs",
      "repos_url": "https://api.github.com/users/brockmiller/repos",
      "events_url": "https://api.github.com/users/brockmiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockmiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-24T20:47:03Z",
    "updated_at": "2020-08-24T20:47:03Z",
    "author_association": "NONE",
    "body": "Following along with this issue as well.  Do we think it is possible to update Geth's response here such that we can at least determine whether the call succeeded or failed (even if we can't provide the exact error)?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/679357401/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/681846175",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-681846175",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 681846175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTg0NjE3NQ==",
    "user": {
      "login": "xrn",
      "id": 8377768,
      "node_id": "MDQ6VXNlcjgzNzc3Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8377768?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrn",
      "html_url": "https://github.com/xrn",
      "followers_url": "https://api.github.com/users/xrn/followers",
      "following_url": "https://api.github.com/users/xrn/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrn/subscriptions",
      "organizations_url": "https://api.github.com/users/xrn/orgs",
      "repos_url": "https://api.github.com/users/xrn/repos",
      "events_url": "https://api.github.com/users/xrn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T09:49:58Z",
    "updated_at": "2020-08-27T09:49:58Z",
    "author_association": "NONE",
    "body": "Great job! I have a question, can I use the call_tracer with Geth archive node or I need a different type of syncing? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/681846175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/681893203",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-681893203",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 681893203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTg5MzIwMw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T11:35:41Z",
    "updated_at": "2020-08-27T11:35:41Z",
    "author_association": "MEMBER",
    "body": "Well, the archive node means it can instantly serve you the state for any block (which is good). If you have a non-archive node, in order to find the state for block `X`, it might have to go back to `X-N` to find the state, and then chug through `N` blocks to obtain the state again (you can tune how large N can be with the reexec-parameter). \r\n\r\nAnd lastly, if you did a fast-sync, your first state is `genesis` and second is at `pivot_block`, so if you try tracing something earlier than pivot, the node would essentially have to do a full-sync from genesis to obtain the state, so that's a no-go. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/681893203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1108212826",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-1108212826",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 1108212826,
    "node_id": "IC_kwDOAOvK985CDfxa",
    "user": {
      "login": "aeharvlee",
      "id": 48897274,
      "node_id": "MDQ6VXNlcjQ4ODk3Mjc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/48897274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aeharvlee",
      "html_url": "https://github.com/aeharvlee",
      "followers_url": "https://api.github.com/users/aeharvlee/followers",
      "following_url": "https://api.github.com/users/aeharvlee/following{/other_user}",
      "gists_url": "https://api.github.com/users/aeharvlee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aeharvlee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aeharvlee/subscriptions",
      "organizations_url": "https://api.github.com/users/aeharvlee/orgs",
      "repos_url": "https://api.github.com/users/aeharvlee/repos",
      "events_url": "https://api.github.com/users/aeharvlee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aeharvlee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-25T08:01:09Z",
    "updated_at": "2022-04-25T08:01:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So, there is indeed a call like geth says: ![trace-1](https://user-images.githubusercontent.com/142290/90164813-24c6d780-dd98-11ea-973a-46405a7a0d37.png)\r\n> \r\n> However, looking at the next op, it places a `0` on the stack, meaning the call failed.\r\n> \r\n> ![trace-2](https://user-images.githubusercontent.com/142290/90164867-33ad8a00-dd98-11ea-806d-41cf8cb5eebd.png)\r\n> \r\n> So indeed, the call did not change the state for the call-destination, nor did it execute any code on the recipient. It's a failed call (I'm not sure why it failed though)\r\n\r\n@holiman \r\nHi. Can I ask you what tool did you use for investigating this issue?\r\nLooks really cool and powerful tool for debugging. Can you share that tool name or link? \r\n\r\nThanks in advance.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1108212826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1108241297",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-1108241297",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 1108241297,
    "node_id": "IC_kwDOAOvK985CDmuR",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-25T08:24:32Z",
    "updated_at": "2022-04-25T08:24:51Z",
    "author_association": "MEMBER",
    "body": "@aeharvlee see https://github.com/holiman/goevmlab#traceview . `go install github.com/holiman/goevmlab/cmd/traceview` ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1108241297/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1109256380",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21438#issuecomment-1109256380",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21438",
    "id": 1109256380,
    "node_id": "IC_kwDOAOvK985CHei8",
    "user": {
      "login": "aeharvlee",
      "id": 48897274,
      "node_id": "MDQ6VXNlcjQ4ODk3Mjc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/48897274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aeharvlee",
      "html_url": "https://github.com/aeharvlee",
      "followers_url": "https://api.github.com/users/aeharvlee/followers",
      "following_url": "https://api.github.com/users/aeharvlee/following{/other_user}",
      "gists_url": "https://api.github.com/users/aeharvlee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aeharvlee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aeharvlee/subscriptions",
      "organizations_url": "https://api.github.com/users/aeharvlee/orgs",
      "repos_url": "https://api.github.com/users/aeharvlee/repos",
      "events_url": "https://api.github.com/users/aeharvlee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aeharvlee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-26T03:12:46Z",
    "updated_at": "2022-04-26T03:12:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So, before I \"fix\" this, I think we should first establish whether the parity-behaviour is correct. I can see the point in that, since if the call fails due to too low balance for call, it's an \"insta-fail\" which does not cause any state changes on the recipient. On the other hand, one could argue that the `geth` trace is more correct.\r\n> \r\n> @karalabe -- thoughts?\r\n\r\n@holiman \r\nHi. What does a word `insta` means in the \"insta-fail\"?\r\nI checked the Geth and Parity source code but couldn't find that word.\r\n\r\nThanks in advance.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1109256380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21340",
  "id": 659373425,
  "node_id": "MDU6SXNzdWU2NTkzNzM0MjU=",
  "number": 21340,
  "title": "Can't make ios",
  "user": {
    "login": "ToJen",
    "id": 13075885,
    "node_id": "MDQ6VXNlcjEzMDc1ODg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13075885?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ToJen",
    "html_url": "https://github.com/ToJen",
    "followers_url": "https://api.github.com/users/ToJen/followers",
    "following_url": "https://api.github.com/users/ToJen/following{/other_user}",
    "gists_url": "https://api.github.com/users/ToJen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ToJen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ToJen/subscriptions",
    "organizations_url": "https://api.github.com/users/ToJen/orgs",
    "repos_url": "https://api.github.com/users/ToJen/repos",
    "events_url": "https://api.github.com/users/ToJen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ToJen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-07-17T15:57:03Z",
  "updated_at": "2020-07-23T19:25:16Z",
  "closed_at": "2020-07-23T17:15:41Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version`\r\nOS & Version: Windows/Linux/OSX\r\nCommit hash : (if `develop`)\r\n```\r\nGeth\r\nVersion: 1.9.17-unstable\r\nGit Commit: 9e88224eb86c92c78f5f03ffcd0793704a8b4309\r\nGit Commit Date: 20200716\r\nArchitecture: amd64\r\nProtocol Versions: [65 64 63]\r\nGo Version: go1.13.10\r\nOperating System: darwin\r\nGOPATH=/my/go\r\nGOROOT=/usr/local/Cellar/go@1.13/1.13.10_1/libexec\r\n```\r\n\r\n#### Expected behaviour\r\n```\r\n$ make ios\r\n[...]\r\nDone building.\r\nImport \"build/bin/Geth.framework\" to use the library.\r\n```\r\n\r\n#### Actual behaviour\r\n```\r\n$ make ios\r\n[...]\r\n# gobind/gobind\r\nGeth_darwin.m:5133:17: error: method 'sign:p1:error:' in protocol 'GethSigner' not implemented [-Werror,-Wprotocol]\r\ngobind/Geth.objc.h:87:1: note: method 'sign:p1:error:' declared here\r\n/code/go-ethereum/build/bin/gomobile: darwin-arm: go build -tags ios -v -ldflags -s -w -buildmode=c-archive -o /var/folders/05/rlnn721s0_d3yhbbx027602dsk4gsv/T/gomobile-work-343520635/geth-arm.a ./gobind failed: exit status 2\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n- I cloned the repo\r\n- I ran `make ios`\r\n- This didn't work so I ran `make geth android ios`. The Android `.aar` was built but not the iOS `.framework` folder.\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/661973187",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21340#issuecomment-661973187",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340",
    "id": 661973187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MTk3MzE4Nw==",
    "user": {
      "login": "KevinVitale",
      "id": 276137,
      "node_id": "MDQ6VXNlcjI3NjEzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/276137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KevinVitale",
      "html_url": "https://github.com/KevinVitale",
      "followers_url": "https://api.github.com/users/KevinVitale/followers",
      "following_url": "https://api.github.com/users/KevinVitale/following{/other_user}",
      "gists_url": "https://api.github.com/users/KevinVitale/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KevinVitale/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KevinVitale/subscriptions",
      "organizations_url": "https://api.github.com/users/KevinVitale/orgs",
      "repos_url": "https://api.github.com/users/KevinVitale/repos",
      "events_url": "https://api.github.com/users/KevinVitale/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KevinVitale/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-21T16:42:33Z",
    "updated_at": "2020-07-23T12:55:39Z",
    "author_association": "NONE",
    "body": "I'm seeing exactly the same issue.\r\n```\r\nmacOS Catalina, 10.15.6 (19G73)\r\n\r\nVersion: 1.9.18-unstable\r\nGit Commit: 123864fc055482279fa61ce063b7e2aad48c0609\r\nGit Commit Date: 20200721\r\nArchitecture: amd64\r\nProtocol Versions: [65 64 63]\r\nGo Version: go1.14.5\r\nOperating System: darwin\r\n```\r\n<hr/>\r\n\r\n~~**Edit:**: I'm very unfamiliar with this code base (having just cloned it a few minutes ago). However, it appears that #20921 will fix this issue.~~\r\n\r\nAs the error states, `GethSigner` is missing an implementation for `sign:p1:error:`. The iOS build [reportedly broke](https://travis-ci.org/github/ethereum/go-ethereum/jobs/675176643) after merging #20764.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/661973187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/662942632",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21340#issuecomment-662942632",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340",
    "id": 662942632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2Mjk0MjYzMg==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-23T10:56:58Z",
    "updated_at": "2020-07-23T10:56:58Z",
    "author_association": "MEMBER",
    "body": "I can reproduce the build failure. The issue is with this interface: https://github.com/ethereum/go-ethereum/blob/997b55236ebb5c35a87fa25dd5ec89fe6240d801/mobile/bind.go#L34-L36\r\n\r\nWhen gomobile generates objc, it uses the parameter names for the method selector. For the Signer interface, it generates\r\n\r\n```\r\n@protocol GethSigner <NSObject>\r\n- (GethTransaction* _Nullable)sign:(GethAddress* _Nullable)p0 p1:(GethTransaction* _Nullable)p1 error:(NSError* _Nullable* _Nullable)error;\r\n@end\r\n```\r\n\r\nFor the GethMobileSigner type https://github.com/ethereum/go-ethereum/blob/997b55236ebb5c35a87fa25dd5ec89fe6240d801/mobile/bind.go#L42 it generates:\r\n\r\n```\r\n- (GethTransaction* _Nullable)sign:(GethAddress* _Nullable)addr unsignedTx:(GethTransaction* _Nullable)unsignedTx error:(NSError* _Nullable* _Nullable)error {\r\n```\r\n\r\nThis doesn't compile because the method selectors don't match.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/662942632/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663146096",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21340#issuecomment-663146096",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340",
    "id": 663146096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzE0NjA5Ng==",
    "user": {
      "login": "ToJen",
      "id": 13075885,
      "node_id": "MDQ6VXNlcjEzMDc1ODg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13075885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ToJen",
      "html_url": "https://github.com/ToJen",
      "followers_url": "https://api.github.com/users/ToJen/followers",
      "following_url": "https://api.github.com/users/ToJen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ToJen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ToJen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ToJen/subscriptions",
      "organizations_url": "https://api.github.com/users/ToJen/orgs",
      "repos_url": "https://api.github.com/users/ToJen/repos",
      "events_url": "https://api.github.com/users/ToJen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ToJen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-23T17:52:10Z",
    "updated_at": "2020-07-23T17:52:10Z",
    "author_association": "NONE",
    "body": "Can confirm it works now 👍 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663146096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663189339",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21340#issuecomment-663189339",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21340",
    "id": 663189339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzE4OTMzOQ==",
    "user": {
      "login": "KevinVitale",
      "id": 276137,
      "node_id": "MDQ6VXNlcjI3NjEzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/276137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KevinVitale",
      "html_url": "https://github.com/KevinVitale",
      "followers_url": "https://api.github.com/users/KevinVitale/followers",
      "following_url": "https://api.github.com/users/KevinVitale/following{/other_user}",
      "gists_url": "https://api.github.com/users/KevinVitale/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KevinVitale/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KevinVitale/subscriptions",
      "organizations_url": "https://api.github.com/users/KevinVitale/orgs",
      "repos_url": "https://api.github.com/users/KevinVitale/repos",
      "events_url": "https://api.github.com/users/KevinVitale/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KevinVitale/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-23T19:25:16Z",
    "updated_at": "2020-07-23T19:25:16Z",
    "author_association": "NONE",
    "body": "Builds successfully 👍 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/663189339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20286",
  "id": 522604606,
  "node_id": "MDU6SXNzdWU1MjI2MDQ2MDY=",
  "number": 20286,
  "title": "network is hangout at `Ancient blocks frozen already`",
  "user": {
    "login": "hadv",
    "id": 941411,
    "node_id": "MDQ6VXNlcjk0MTQxMQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hadv",
    "html_url": "https://github.com/hadv",
    "followers_url": "https://api.github.com/users/hadv/followers",
    "following_url": "https://api.github.com/users/hadv/following{/other_user}",
    "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
    "organizations_url": "https://api.github.com/users/hadv/orgs",
    "repos_url": "https://api.github.com/users/hadv/repos",
    "events_url": "https://api.github.com/users/hadv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hadv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-11-14T03:40:25Z",
  "updated_at": "2019-11-14T09:15:40Z",
  "closed_at": "2019-11-14T09:15:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "chain is stop working when freezer happen\r\n\r\n#### System information\r\n\r\nGeth version: `1.9.6 stable`\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n\r\nchain should continue working even freezer happen \r\n\r\n#### Actual behaviour\r\n\r\nchain is stop working at a specific blocknumber\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\nDEBUG[11-14|03:35:15.155] Ancient blocks frozen already            number=641028 hash=9ac845â€¦b71f22 frozen=551028\r\n````\r\n",
  "closed_by": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553745857",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20286#issuecomment-553745857",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286",
    "id": 553745857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc0NTg1Nw==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T06:30:03Z",
    "updated_at": "2019-11-14T06:30:30Z",
    "author_association": "MEMBER",
    "body": "Actually it's the expected behavior. You can see it's a debug level log.\r\n\r\nSo the mechanism of freezer is: whenever there are some blocks stable enough, freezer will move these blocks from \"Live database\" (leveldb) into \"Ancient database\"(flatten file). So that freezer will have an endless loop to check the stable block every minute. If `HEAD` - `Block.number` > 90,000. Then it's migrated.\r\n\r\nHowever there is a special case => Fast Sync\r\n\r\nIn the fast sync, we will write \"stable\" chain data into \"Ancient database\" directly. Basically all blocks below the checkpoint are regarded as stable. \r\n\r\nSo it can happen that after syncing, the block with number `HEAD` - `90,000` is already migrated. So we print this debug log that we don't need to anything now.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553745857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553769408",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20286#issuecomment-553769408",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286",
    "id": 553769408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc2OTQwOA==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T07:53:57Z",
    "updated_at": "2019-11-14T07:53:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank @rjl493456442 for your detail explanation. By the way, still don't understand why the all the validators with fast-sync stop working after freezing. I need to investigate more.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553769408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553778025",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20286#issuecomment-553778025",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286",
    "id": 553778025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc3ODAyNQ==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T08:21:51Z",
    "updated_at": "2019-11-14T08:21:51Z",
    "author_association": "MEMBER",
    "body": "Can this issue be closed then?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553778025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553796945",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20286#issuecomment-553796945",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20286",
    "id": 553796945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc5Njk0NQ==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-14T09:15:29Z",
    "updated_at": "2019-11-14T09:15:40Z",
    "author_association": "MEMBER",
    "body": "@hadv No idea. But I think it's not relevant to this issue. So I will just close it and you can open another one with some logs we can investigate",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/553796945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22027",
  "id": 768583955,
  "node_id": "MDU6SXNzdWU3Njg1ODM5NTU=",
  "number": 22027,
  "title": "Transactions losing not being broadcasted",
  "user": {
    "login": "janke99",
    "id": 9427688,
    "node_id": "MDQ6VXNlcjk0Mjc2ODg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9427688?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janke99",
    "html_url": "https://github.com/janke99",
    "followers_url": "https://api.github.com/users/janke99/followers",
    "following_url": "https://api.github.com/users/janke99/following{/other_user}",
    "gists_url": "https://api.github.com/users/janke99/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janke99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janke99/subscriptions",
    "organizations_url": "https://api.github.com/users/janke99/orgs",
    "repos_url": "https://api.github.com/users/janke99/repos",
    "events_url": "https://api.github.com/users/janke99/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janke99/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-12-16T08:34:35Z",
  "updated_at": "2021-02-18T09:58:57Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: \r\n```\r\nGeth\r\nVersion: 1.9.25-stable & 1.9.21-stable\r\nGit Commit: e7872729012a4871397307b12cc3f4772ffcbec6\r\nGit Commit Date: 20201211\r\nArchitecture: amd64\r\nProtocol Versions: [65 64 63]\r\nGo Version: go1.15.6\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=go\r\n```\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\nweb3.eth.sendTransaction(...) returns a hash and the transaction should be broadcasted to the network.\r\n\r\n#### Actual behaviour\r\nreturns a hash but the transaction is never broadcasted to the network, and then use web3.eth.getTransaction($hash) return null\r\n\r\n#### Steps to reproduce the behaviour\r\nit's not happen every time, if i send some (like 10) transactions at the same time, it may be losing 5 transactions\r\ngeth run cmdline\r\n`./geth --syncmode 'fast' --datadir ./blocks --maxpeers 200 --light.maxpeers 200 --maxpendpeers 2000 --port 30304 --http --http.port 8555 --http.addr '0.0.0.0' --http.corsdomain '*' --http.vhosts '*' --ws --ws.port 8556 --ws.addr '0.0.0.0' --ws.origins '*' --txpool.nolocals --txpool.pricelimit 12000000000 --txpool.globalslots 40960 --rpc.txfeecap 100 console`\r\n\r\nHow can i prevent this from happening in the future?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747249122",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-747249122",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 747249122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzI0OTEyMg==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T06:52:18Z",
    "updated_at": "2020-12-17T06:52:18Z",
    "author_association": "MEMBER",
    "body": "You can remove `--txpool.nolocals` then all transactions submitted via RPC or the sender is in `--txpool.locals` set will be treated as \"local transactions\".\r\nAll local transactions will be saved into the journal and will be resent across the restarts if it's still not confirmed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747249122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747255395",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-747255395",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 747255395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzI1NTM5NQ==",
    "user": {
      "login": "janke99",
      "id": 9427688,
      "node_id": "MDQ6VXNlcjk0Mjc2ODg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9427688?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janke99",
      "html_url": "https://github.com/janke99",
      "followers_url": "https://api.github.com/users/janke99/followers",
      "following_url": "https://api.github.com/users/janke99/following{/other_user}",
      "gists_url": "https://api.github.com/users/janke99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janke99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janke99/subscriptions",
      "organizations_url": "https://api.github.com/users/janke99/orgs",
      "repos_url": "https://api.github.com/users/janke99/repos",
      "events_url": "https://api.github.com/users/janke99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janke99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T07:05:59Z",
    "updated_at": "2020-12-17T07:05:59Z",
    "author_association": "NONE",
    "body": "`--txpool.nolocals` means Disables price exemptions for locally submitted transactions, i'm sure gasPrice is higher than local pricelimit 12 GWEI",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747255395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747323510",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-747323510",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 747323510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzMyMzUxMA==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T09:32:42Z",
    "updated_at": "2020-12-17T09:32:42Z",
    "author_association": "MEMBER",
    "body": "How do you submit your transactions at the same time? Are you sure you have no conflicting nonces?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747323510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747323758",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-747323758",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 747323758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzMyMzc1OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T09:33:13Z",
    "updated_at": "2020-12-17T09:33:13Z",
    "author_association": "MEMBER",
    "body": "Please provide a js snippet showing how you do it. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747323758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747326407",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-747326407",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 747326407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzMyNjQwNw==",
    "user": {
      "login": "janke99",
      "id": 9427688,
      "node_id": "MDQ6VXNlcjk0Mjc2ODg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9427688?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janke99",
      "html_url": "https://github.com/janke99",
      "followers_url": "https://api.github.com/users/janke99/followers",
      "following_url": "https://api.github.com/users/janke99/following{/other_user}",
      "gists_url": "https://api.github.com/users/janke99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janke99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janke99/subscriptions",
      "organizations_url": "https://api.github.com/users/janke99/orgs",
      "repos_url": "https://api.github.com/users/janke99/repos",
      "events_url": "https://api.github.com/users/janke99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janke99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T09:38:23Z",
    "updated_at": "2020-12-17T09:38:23Z",
    "author_association": "NONE",
    "body": "it's just like this code\r\n```\r\nfor (let i = 0; i < config.accounts.length; i++) {\r\n    let account = config.accounts[i];\r\n    this.web3.eth.sendTransaction({\r\n        from: account.address,\r\n        to: config.send.address,\r\n        gas: new BigNumber(config.send.gas),\r\n        gasPrice: new BigNumber(config.send.gasPrice * Math.pow(10, 9)).toFixed(0),\r\n        value: sendValue.toFixed(0),\r\n    }).on('transactionHash', function (hash) {\r\n        console.log(`sendTransaction hash: ${hash}`);\r\n    })\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/747326407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781227120",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22027#issuecomment-781227120",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22027",
    "id": 781227120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTIyNzEyMA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-18T09:58:57Z",
    "updated_at": "2021-02-18T09:58:57Z",
    "author_association": "MEMBER",
    "body": "Ok, is there a reason to disable local tracking? That ensures no matter what happens, locally submitted transactions won't get dropped. If you are running a public node I might understand wanting to disable it. Are you?\r\n\r\nSetting the txpool price limit to 12 gwei only means your pool won't accept cheaper ones, but if there's enough more expensive ones to push yours out, your's are getting pushed out. Would be nice to know what prices you submit at and what are the network ones.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781227120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

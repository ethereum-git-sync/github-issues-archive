{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25695",
  "id": 1363040139,
  "node_id": "I_kwDOAOvK985RPleL",
  "number": 25695,
  "title": "eth_blockNumber returns 0 after merge on Goerli",
  "user": {
    "login": "jasoncsli",
    "id": 102136185,
    "node_id": "U_kgDOBhZ5eQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/102136185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jasoncsli",
    "html_url": "https://github.com/jasoncsli",
    "followers_url": "https://api.github.com/users/jasoncsli/followers",
    "following_url": "https://api.github.com/users/jasoncsli/following{/other_user}",
    "gists_url": "https://api.github.com/users/jasoncsli/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jasoncsli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jasoncsli/subscriptions",
    "organizations_url": "https://api.github.com/users/jasoncsli/orgs",
    "repos_url": "https://api.github.com/users/jasoncsli/repos",
    "events_url": "https://api.github.com/users/jasoncsli/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jasoncsli/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-06T10:07:57Z",
  "updated_at": "2022-10-07T05:51:05Z",
  "closed_at": "2022-09-06T12:20:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Geth version: 1.10.21\r\nPrysm version: 3.0.0\r\n\r\nWhy I get 0 block height after the merge? \r\n\r\n````\r\ncurl -X POST http://localhost:8236 -H 'Content-Type: application/json' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[],\"id\":83}'\r\n{\"jsonrpc\":\"2.0\",\"id\":83,\"result\":\"0x0\"}\r\n````\r\n\r\nBut I can get block data from eth_getBlockByNumber.  And I can get current block by eth_syncing.\r\n````\r\ncurl -X POST http://localhost:8236 -H 'Content-Type: application/json' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getBlockByNumber\",\"params\":[\"0x730EF7\", true],\"id\":1}'\r\n\r\n\r\ncurl -X POST http://localhost:8236  -H 'Content-Type: application/json' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_syncing\",\"params\":[],\"id\":1}'\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":{\"currentBlock\":\"0x730fa0\",\"healedBytecodeBytes\":\"0x0\",\"healedBytecodes\":\"0x0\",\"healedTrienodeBytes\":\"0x0\",\"healedTrienodes\":\"0x0\",\"healingBytecode\":\"0x0\",\"healingTrienodes\":\"0x0\",\"highestBlock\":\"0x730fe7\",\"startingBlock\":\"0x709f1f\",\"syncedAccountBytes\":\"0x0\",\"syncedAccounts\":\"0x0\",\"syncedBytecodeBytes\":\"0x0\",\"syncedBytecodes\":\"0x0\",\"syncedStorage\":\"0x0\",\"syncedStorageBytes\":\"0x0\"}}\r\n````\r\n\r\nIt seems like it is syncing with the most recent blocks.\r\n````\r\nINFO [09-06|11:07:14.298] Imported new block headers               count=1    elapsed=\"141.777µs\" number=7,540,758 hash=5c7aad..1301cb\r\nINFO [09-06|11:07:40.411] Forkchoice requested sync to new head    number=7,540,759 hash=a82151..b81f23\r\nINFO [09-06|11:07:41.305] Imported new block headers               count=1    elapsed=\"175.028µs\" number=7,540,759 hash=a82151..b81f23\r\nINFO [09-06|11:07:42.148] Downloader queue stats                   receiptTasks=0    blockTasks=0    itemSize=116.93KiB throttle=2242\r\nINFO [09-06|11:07:48.707] Forkchoice requested sync to new head    number=7,540,760 hash=399bd1..d863fa\r\nINFO [09-06|11:07:50.308] Imported new block headers               count=1    elapsed=\"137.824µs\" number=7,540,760 hash=399bd1..d863fa\r\nINFO [09-06|11:08:13.051] Forkchoice requested sync to new head    number=7,540,761 hash=8d01ac..65c25b\r\nINFO [09-06|11:08:14.313] Imported new block headers               count=1    elapsed=\"142.859µs\" number=7,540,761 hash=8d01ac..65c25b\r\nINFO [09-06|11:08:25.095] Forkchoice requested sync to new head    number=7,540,762 hash=f4570e..bcfcf4\r\nINFO [09-06|11:08:26.315] Imported new block headers               count=1    elapsed=\"186.402µs\" number=7,540,762 hash=f4570e..bcfcf4\r\nINFO [09-06|11:08:40.641] Forkchoice requested sync to new head    number=7,540,763 hash=579052..cbbcc0\r\nINFO [09-06|11:08:41.319] Imported new block headers               count=1    elapsed=\"182.27µs\"  number=7,540,763 hash=579052..cbbcc0\r\nINFO [09-06|11:08:42.185] Downloader queue stats                   receiptTasks=0    blockTasks=0    itemSize=119.09KiB throttle=2202\r\nINFO [09-06|11:09:00.637] Forkchoice requested sync to new head    number=7,540,764 hash=ec788b..75627f\r\nINFO [09-06|11:09:02.322] Imported new block headers               count=1    elapsed=\"142.442µs\" number=7,540,764 hash=ec788b..75627f\r\n````",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238073498",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25695#issuecomment-1238073498",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695",
    "id": 1238073498,
    "node_id": "IC_kwDOAOvK985Jy4Ca",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-06T12:20:50Z",
    "updated_at": "2022-09-06T12:20:50Z",
    "author_association": "MEMBER",
    "body": "In Geth, `eth_blockNumber` returns the latest block for which the full state is available. While the node is performing snap sync, the state of the blocks being synced is not fully available, i.e. the \"latest block\" is genesis until the sync is done.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1238073498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1271141928",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25695#issuecomment-1271141928",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25695",
    "id": 1271141928,
    "node_id": "IC_kwDOAOvK985LxBYo",
    "user": {
      "login": "chinababy-zlj",
      "id": 69578006,
      "node_id": "MDQ6VXNlcjY5NTc4MDA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/69578006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chinababy-zlj",
      "html_url": "https://github.com/chinababy-zlj",
      "followers_url": "https://api.github.com/users/chinababy-zlj/followers",
      "following_url": "https://api.github.com/users/chinababy-zlj/following{/other_user}",
      "gists_url": "https://api.github.com/users/chinababy-zlj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chinababy-zlj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chinababy-zlj/subscriptions",
      "organizations_url": "https://api.github.com/users/chinababy-zlj/orgs",
      "repos_url": "https://api.github.com/users/chinababy-zlj/repos",
      "events_url": "https://api.github.com/users/chinababy-zlj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chinababy-zlj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-07T05:51:04Z",
    "updated_at": "2022-10-07T05:51:04Z",
    "author_association": "NONE",
    "body": "> 在 Geth 中，`eth_blockNumber`返回完整状态可用的最新块。当节点执行快速同步时，正在同步的块的状态并不完全可用，即“最新块”是创世，直到同步完成。\r\nI synchronized for a week, and the ETH blocknumber returned is still {\"jsonrpc\":\"2.0\",\"id\":83,\"result\":\"0x0\"}\r\nI'm always 100 points away from the latest height",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1271141928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18139",
  "id": 382570379,
  "node_id": "MDU6SXNzdWUzODI1NzAzNzk=",
  "number": 18139,
  "title": "Investigate memory consumption of fast sync on raspberry pi 3 b+",
  "user": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-11-20T09:24:56Z",
  "updated_at": "2020-04-16T08:55:10Z",
  "closed_at": "2020-04-16T08:55:10Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "",
  "closed_by": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/488833822",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-488833822",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 488833822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODgzMzgyMg==",
    "user": {
      "login": "aboutlo",
      "id": 1236268,
      "node_id": "MDQ6VXNlcjEyMzYyNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aboutlo",
      "html_url": "https://github.com/aboutlo",
      "followers_url": "https://api.github.com/users/aboutlo/followers",
      "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
      "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
      "organizations_url": "https://api.github.com/users/aboutlo/orgs",
      "repos_url": "https://api.github.com/users/aboutlo/repos",
      "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aboutlo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-02T21:11:22Z",
    "updated_at": "2019-05-02T21:11:22Z",
    "author_association": "NONE",
    "body": "I'm trying to get a node up & running with raspberry pi 3 b+ and I have the out of memory error as well. Somehow I'm getting there but only because I configured geth as service so every time it crash the demon is restarted automatically.\r\n\r\n**geth**: \r\n- 1.9.0-unstable-504f88b6 (compiled from master)\r\n- 2GB swap file\r\n- command `geth --cache=256 --rpc --rpcaddr 0.0.0.0 --rpccorsdomain *`\r\n\r\nlogs:\r\n```\r\nMay  1 06:35:58 raspberrypi geth[2322]: INFO [05-01|06:35:58.080] Imported new block headers               count=0    elapsed=639.717ms  number=5121691 hash=ea6ad6…98f236 age=1y2mo2w  ignored=2048\r\nMay  1 06:35:58 raspberrypi geth[2322]: INFO [05-01|06:35:58.300] Imported new block headers               count=0    elapsed=33.656ms   number=5121819 hash=2f8ecf…30a3aa age=1y2mo2w  ignored=128\r\nMay  1 06:36:01 raspberrypi geth[2322]: INFO [05-01|06:36:01.466] Imported new block headers               count=0    elapsed=778.100ms  number=5123867 hash=9dbed9…5308e4 age=1y2mo2w  ignored=2048\r\nMay  1 06:36:03 raspberrypi geth[2322]: INFO [05-01|06:36:03.632] Imported new block headers               count=0    elapsed=1.628s     number=5125915 hash=38e9c2…339065 age=1y2mo2w  ignored=2048\r\nMay  1 06:36:05 raspberrypi geth[2322]: INFO [05-01|06:36:05.616] Imported new block headers               count=0    elapsed=1.316s     number=5127963 hash=5702a1…e5e4b4 age=1y2mo2w  ignored=2048\r\nMay  1 06:36:05 raspberrypi geth[2322]: INFO [05-01|06:36:05.626] Imported new block receipts              count=160  elapsed=4.427s     number=5111615 hash=b94ae1…66083b age=1y2mo2w  size=5.50MiB\r\nMay  1 06:36:10 raspberrypi geth[2322]: INFO [05-01|06:36:10.210] Imported new state entries               count=1700 elapsed=107.672ms  processed=16297138 pending=5343  retry=0   duplicate=578 unexpected=1335\r\nMay  1 06:36:10 raspberrypi geth[2322]: INFO [05-01|06:36:10.466] Imported new block receipts              count=61   elapsed=3.921s     number=5111676 hash=bddfa7…237313 age=1y2mo2w  size=1.82MiB\r\nMay  1 06:36:11 raspberrypi geth[2322]: ERROR[05-01|06:36:11.748] Failed to generate mapped ethash cache   epoch=172 err=\"cannot allocate memory\"\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime: out of memory: cannot allocate 39321600-byte block (1394900992 in use)\r\nMay  1 06:36:11 raspberrypi geth[2322]: fatal error: out of memory\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime stack:\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime.throw(0xabaedc, 0xd)\r\nMay  1 06:36:11 raspberrypi geth[2322]: #011/home/pi/.go/src/runtime/panic.go:617 +0x5c\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime.largeAlloc(0x257fcc0, 0x1a10101, 0x58a7c388)\r\nMay  1 06:36:11 raspberrypi geth[2322]: #011/home/pi/.go/src/runtime/malloc.go:1057 +0x140\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime.mallocgc.func1()\r\nMay  1 06:36:11 raspberrypi geth[2322]: #011/home/pi/.go/src/runtime/malloc.go:950 +0x38\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime.systemstack(0x0)\r\nMay  1 06:36:11 raspberrypi geth[2322]: #011/home/pi/.go/src/runtime/asm_arm.s:354 +0x84\r\nMay  1 06:36:11 raspberrypi geth[2322]: runtime.mstart()\r\n```\r\n\r\nPattern:\r\nMay  1 06:36:11 raspberrypi geth[2322]: fatal error: out of memory\r\nMay  1 17:01:01 raspberrypi geth[526]: fatal error: out of memory\r\nMay  2 02:40:42 raspberrypi geth[1551]: fatal error: out of memory\r\n\r\ntop:\r\n```\r\ntop - 22:08:24 up 1 day, 14:07,  1 user,  load average: 5.11, 6.24, 5.92\r\nTasks:  98 total,   2 running,  53 sleeping,   0 stopped,   0 zombie\r\n%Cpu(s): 11.2 us,  2.9 sy,  0.0 ni, 46.4 id, 39.3 wa,  0.0 hi,  0.2 si,  0.0 st\r\nKiB Mem :   949448 total,    33304 free,   851164 used,    64980 buff/cache\r\nKiB Swap:  2097148 total,  1961980 free,   135168 used.    82080 avail Mem \r\n```\r\n\r\nSo the raspberry pi is clearly struggling a lot but I hope once it's updated will be less CPU intensive :) \r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/488833822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567411293",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-567411293",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 567411293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzQxMTI5Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-19T09:34:20Z",
    "updated_at": "2019-12-19T09:34:20Z",
    "author_association": "MEMBER",
    "body": "@aboutlo It rings a bell, that there are some problems (but I'm not sure about the specifics) with ethash generation on 32-bit architectures. Did you compile it as a 32-bit or 64-bit target?  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567411293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567412166",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-567412166",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 567412166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzQxMjE2Ng==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-19T09:36:35Z",
    "updated_at": "2019-12-19T09:36:35Z",
    "author_association": "MEMBER",
    "body": "Probably related: https://github.com/ethereum/go-ethereum/issues/15180 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567412166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567412377",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-567412377",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 567412377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzQxMjM3Nw==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-19T09:37:04Z",
    "updated_at": "2019-12-19T09:37:04Z",
    "author_association": "MEMBER",
    "body": "it's compiled as 32 bits, see `arch_arm.s` in the stack trace.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567412377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567413156",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-567413156",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 567413156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzQxMzE1Ng==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-19T09:39:00Z",
    "updated_at": "2020-04-16T08:52:34Z",
    "author_association": "MEMBER",
    "body": "@aboutlo  So it seems that we have an issue with 32 bits arm, your machine supports arm64. Could you please give us the output of `uname -a` and also try to compile geth to arm64/aarch64 and see if the problem persists?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567413156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567413181",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-567413181",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 567413181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzQxMzE4MQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-19T09:39:03Z",
    "updated_at": "2019-12-19T09:39:58Z",
    "author_association": "MEMBER",
    "body": "Possibly related aswell: https://github.com/ethereum/go-ethereum/issues/16601#issuecomment-446138303 \r\n\r\n> Closing as a limitation of the 32bit arm platform. Please open a new issue if you think this should work and it still happens on latest master.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/567413181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/614511729",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18139#issuecomment-614511729",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18139",
    "id": 614511729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDUxMTcyOQ==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-16T08:55:10Z",
    "updated_at": "2020-04-16T08:55:10Z",
    "author_association": "MEMBER",
    "body": "No response, closing. Recent tests on aarch64 seem to work and we do not intend to support 32 bits machines. Please reopen the issue if the problem persists in 64 bits.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/614511729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

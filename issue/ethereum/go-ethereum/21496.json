{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21496",
  "id": 687994314,
  "node_id": "MDU6SXNzdWU2ODc5OTQzMTQ=",
  "number": 21496,
  "title": "Panic on \"Looking for peers\"",
  "user": {
    "login": "voronindev",
    "id": 10127919,
    "node_id": "MDQ6VXNlcjEwMTI3OTE5",
    "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/voronindev",
    "html_url": "https://github.com/voronindev",
    "followers_url": "https://api.github.com/users/voronindev/followers",
    "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
    "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
    "organizations_url": "https://api.github.com/users/voronindev/orgs",
    "repos_url": "https://api.github.com/users/voronindev/repos",
    "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/voronindev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 19,
  "created_at": "2020-08-28T11:01:49Z",
  "updated_at": "2020-09-08T08:49:38Z",
  "closed_at": "2020-09-08T08:49:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI'm using the latest build, but one of them (I've got 2) are crashing periodically.\r\n\r\n#### System information\r\n\r\nGeth version: `1.9.20 ethereum/client-go`\r\nDigest: `sha256:9e14d7cdf4f610e0b0f4edeb6e1ef218ae1114dcd819d62bb2d2949e4aa4e333`\r\nOS & Version: `NAME=\"Ubuntu\"\r\nVERSION=\"18.04.4 LTS (Bionic Beaver)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 18.04.4 LTS\"\r\nVERSION_ID=\"18.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=bionic\r\nUBUNTU_CODENAME=bionic`\r\nDocker CMD: `--testnet  --cache 10000 --syncmode \"fast\" --nousb --rpcapi debug,eth,web3,personal,net --rpc --rpcaddr \"0.0.0.0\" --rpcvhosts=\"*\" --ws --wsaddr \"0.0.0.0\" --wsorigins=\"*\" --port 30303 --wsport 8546 --rpcport 8545`\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nNo panic\r\n\r\n#### Actual behaviour\r\nPanics while trying to sync\r\n\r\n#### Steps to reproduce the behaviour\r\nIdk, how to reproduce that. I have 2 different nodes, on different machines, but with the same configuration and docker compose image. One of them are crashing periodically. (Every 2-3 mins)\r\n\r\n#### Backtrace\r\n\r\n````\r\ngeth_1  | WARN [08-28|10:50:27.300] Switch sync mode from fast sync to full sync \r\ngeth_1  | INFO [08-28|10:50:27.301] Starting peer-to-peer node               instance=Geth/v1.9.20-stable-979fc968/linux-amd64/go1.15\r\ngeth_1  | INFO [08-28|10:50:27.709] New local node record                    seq=9065 id=e5666364e47fd534 ip=127.0.0.1 udp=30303 tcp=30303\r\ngeth_1  | INFO [08-28|10:50:27.710] IPC endpoint opened                      url=/root/.ethereum/testnet/geth.ipc\r\ngeth_1  | INFO [08-28|10:50:27.711] HTTP server started                      endpoint=[::]:8545 cors= vhosts=*\r\ngeth_1  | INFO [08-28|10:50:27.711] WebSocket enabled                        url=ws://[::]:8546\r\ngeth_1  | INFO [08-28|10:50:27.711] Started P2P networking                   self=enode://61bc478a98c152250dcfa78ff8fb3677ad21b33f5bd3de4e72b4d5158df28f72198ccc8b5dcc960a7b8e8d357762f3ae0bd2e3836d5b9e040beca441914bc10d@127.0.0.1:30303\r\ngeth_1  | INFO [08-28|10:50:37.865] Looking for peers                        peercount=0 tried=60 static=0\r\ngeth_1  | INFO [08-28|10:50:39.072] New local node record                    seq=9066 id=e5666364e47fd534 ip=159.69.196.55 udp=30303 tcp=30303\r\ngeth_1  | INFO [08-28|10:50:47.926] Looking for peers                        peercount=1 tried=60 static=0\r\ngeth_1  | INFO [08-28|10:50:58.023] Looking for peers                        peercount=0 tried=43 static=0\r\ngeth_1  | INFO [08-28|10:51:08.170] Looking for peers                        peercount=0 tried=59 static=0\r\ngeth_1  | INFO [08-28|10:51:18.181] Looking for peers                        peercount=0 tried=59 static=0\r\ngeth_1  | INFO [08-28|10:51:19.629] Block synchronisation started \r\ngeth_1  | INFO [08-28|10:51:28.186] Looking for peers                        peercount=2 tried=77 static=0\r\ngeth_1  | panic: runtime error: invalid memory address or nil pointer dereference\r\ngeth_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xc2cfd0]\r\ngeth_1  | \r\ngeth_1  | goroutine 1843 [running]:\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc01be781c0, 0xc073984c30, 0xc074a0cb40, 0x0, 0x0, 0xa)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:906 +0x1670\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc01be781c0, 0xc073984c30, 0xe03473da4c4bee10, 0x7be4e15229ec19b7, 0xe71161f77a60e4ee, 0x5f4eb7d0d41fc283, 0xc026b0a840, 0x0, 0x0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:460 +0x3da\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc01be781c0, 0xc073b3a880, 0x10, 0xe03473da4c4bee10, 0x7be4e15229ec19b7, 0xe71161f77a60e4ee, 0x5f4eb7d0d41fc283, 0xc026b0a840, 0x0, 0x0, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:423 +0x390\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc01be781c0, 0xc073b3a880, 0x10, 0xe03473da4c4bee10, 0x7be4e15229ec19b7, 0xe71161f77a60e4ee, 0x5f4eb7d0d41fc283, 0xc026b0a840, 0xf1d9d2e00000000, 0x1000200000003, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:333 +0x8c\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*ProtocolManager).doSync(0xc071356f00, 0xc07cc100c0, 0x135e1f8, 0xc01be6e9a0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:322 +0xa5\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync.func1(0xc085877e00, 0xc07cc100c0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x38\r\ngeth_1  | created by github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x76\r\nroot_geth_1 exited with code 2\r\n````\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496/reactions",
    "total_count": 7,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 3,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682474028",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682474028",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682474028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ3NDAyOA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:28:21Z",
    "updated_at": "2020-08-28T11:28:21Z",
    "author_association": "MEMBER",
    "body": "```\r\ngeth_1  | WARN [08-28|10:50:27.300] Switch sync mode from fast sync to full sync \r\n```\r\nThat's odd. Any more logs before that? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682474028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682474706",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682474706",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682474706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ3NDcwNg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:30:23Z",
    "updated_at": "2020-08-28T11:30:23Z",
    "author_association": "MEMBER",
    "body": "In particular, it should output info about latest header, latest block etc during the bootstrap phase\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682474706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682476473",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682476473",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682476473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ3NjQ3Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:34:34Z",
    "updated_at": "2020-08-28T11:34:34Z",
    "author_association": "MEMBER",
    "body": "How are you supplying the datadir to the node? are you using docker mounts to mount a host-volume? And if so, are you by any chance using that same host-folder with another process?   ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682476473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682480581",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682480581",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682480581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ4MDU4MQ==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:45:26Z",
    "updated_at": "2020-08-28T11:52:08Z",
    "author_association": "NONE",
    "body": "The full log here:\r\n```\r\ngeth_1  | INFO [08-28|11:05:28.035] Starting Geth on Ropsten testnet... \r\ngeth_1  | WARN [08-28|11:05:28.036] The --testnet flag is ambiguous! Please specify one of --goerli, --rinkeby, or --ropsten. \r\ngeth_1  | WARN [08-28|11:05:28.036] The generic --testnet flag is deprecated and will be removed in the future! \r\ngeth_1  | WARN [08-28|11:05:28.036] Sanitizing cache to Go's GC limits       provided=10000 updated=5220\r\ngeth_1  | INFO [08-28|11:05:28.039] Maximum peer count                       ETH=50 LES=0 total=50\r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --rpc is deprecated and will be removed in the future, please use --http \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --rpcaddr is deprecated and will be removed in the future, please use --http.addr \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --rpcport is deprecated and will be removed in the future, please use --http.port \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --rpcapi is deprecated and will be removed in the future, please use --http.api \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --rpcvhosts is deprecated and will be removed in the future, please use --http.vhosts \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --wsaddr is deprecated and will be removed in the future, please use --ws.addr \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --wsport is deprecated and will be removed in the future, please use --ws.port \r\ngeth_1  | WARN [08-28|11:05:28.039] The flag --wsorigins is deprecated and will be removed in the future, please use --ws.origins \r\ngeth_1  | WARN [08-28|11:05:28.039] Using the deprecated `testnet` datadir. Future versions will store the Ropsten chain in `ropsten`. \r\ngeth_1  | INFO [08-28|11:05:28.039] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\ngeth_1  | INFO [08-28|11:05:28.040] Set global gas cap                       cap=25000000\r\ngeth_1  | INFO [08-28|11:05:28.041] Allocated trie memory caches             clean=1.27GiB dirty=1.27GiB\r\ngeth_1  | INFO [08-28|11:05:28.041] Allocated cache and file handles         database=/root/.ethereum/testnet/geth/chaindata cache=2.55GiB handles=524288\r\ngeth_1  | INFO [08-28|11:05:28.858] Opened ancient database                  database=/root/.ethereum/testnet/geth/chaindata/ancient\r\ngeth_1  | INFO [08-28|11:05:28.875] Persisted trie from memory database      nodes=355 size=50.41KiB time=2.435348ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B\r\ngeth_1  | INFO [08-28|11:05:28.876] Initialised chain configuration          config=\"{ChainID: 3 Homestead: 0 DAO: <nil> DAOSupport: true EIP150: 0 EIP155: 10 EIP158: 10 Byzantium: 1700000 Constantinople: 4230000 Petersburg: 4939394 Istanbul: 6485846, Muir Glacier: 7117117, YOLO v1: <nil>, Engine: ethash}\"\r\ngeth_1  | INFO [08-28|11:05:28.876] Disk storage enabled for ethash caches   dir=/root/.ethereum/testnet/geth/ethash count=3\r\ngeth_1  | INFO [08-28|11:05:28.876] Disk storage enabled for ethash DAGs     dir=/root/.ethash                       count=2\r\ngeth_1  | INFO [08-28|11:05:28.876] Initialising Ethereum protocol           versions=\"[65 64 63]\" network=3 dbversion=8\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local header          number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local full block      number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local fast block      number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\ngeth_1  | INFO [08-28|11:05:31.515] Loaded local transaction journal         transactions=0 dropped=0\r\ngeth_1  | INFO [08-28|11:05:31.515] Regenerated local transaction journal    transactions=0 accounts=0\r\ngeth_1  | WARN [08-28|11:05:31.515] Switch sync mode from fast sync to full sync \r\ngeth_1  | INFO [08-28|11:05:31.516] Starting peer-to-peer node               instance=Geth/v1.9.20-stable-979fc968/linux-amd64/go1.15\r\ngeth_1  | INFO [08-28|11:05:31.829] New local node record                    seq=9099 id=e5666364e47fd534 ip=127.0.0.1 udp=30303 tcp=30303\r\ngeth_1  | INFO [08-28|11:05:31.831] IPC endpoint opened                      url=/root/.ethereum/testnet/geth.ipc\r\ngeth_1  | INFO [08-28|11:05:31.831] HTTP server started                      endpoint=[::]:8545 cors= vhosts=*\r\ngeth_1  | INFO [08-28|11:05:31.831] WebSocket enabled                        url=ws://[::]:8546\r\ngeth_1  | INFO [08-28|11:05:31.831] Started P2P networking                   self=enode://61bc478a98c152250dcfa78ff8fb3677ad21b33f5bd3de4e72b4d5158df28f72198ccc8b5dcc960a7b8e8d357762f3ae0bd2e3836d5b9e040beca441914bc10d@127.0.0.1:30303\r\ngeth_1  | INFO [08-28|11:05:41.862] Looking for peers                        peercount=1 tried=57 static=0\r\ngeth_1  | INFO [08-28|11:05:46.439] New local node record                    seq=9100 id=e5666364e47fd534 ip=159.69.196.55 udp=1042  tcp=30303\r\ngeth_1  | INFO [08-28|11:05:51.862] Looking for peers                        peercount=1 tried=55 static=0\r\ngeth_1  | INFO [08-28|11:05:59.177] Block synchronisation started \r\ngeth_1  | INFO [08-28|11:06:02.863] Looking for peers                        peercount=2 tried=47 static=0\r\ngeth_1  | panic: runtime error: invalid memory address or nil pointer dereference\r\ngeth_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xc2cfd0]\r\ngeth_1  | \r\ngeth_1  | goroutine 1099 [running]:\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc00013cc40, 0xc019c47b30, 0xc0006bb8c0, 0x0, 0x0, 0xa)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:906 +0x1670\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc00013cc40, 0xc019c47b30, 0x6c9ba7e358cb325d, 0xe0b11fefaa91e8d6, 0xc50144752a187f32, 0xe5d5b296cd118145, 0xc01a3b4540, 0x0, 0x0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:460 +0x3da\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc00013cc40, 0xc019079d20, 0x10, 0x6c9ba7e358cb325d, 0xe0b11fefaa91e8d6, 0xc50144752a187f32, 0xe5d5b296cd118145, 0xc01a3b4540, 0x0, 0x0, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:423 +0x390\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc00013cc40, 0xc019079d20, 0x10, 0x6c9ba7e358cb325d, 0xe0b11fefaa91e8d6, 0xc50144752a187f32, 0xe5d5b296cd118145, 0xc01a3b4540, 0x0, 0x0, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:333 +0x8c\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*ProtocolManager).doSync(0xc000843100, 0xc01d2ed380, 0x3, 0xc019fef140)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:322 +0xa5\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync.func1(0xc00084fd10, 0xc01d2ed380)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x38\r\ngeth_1  | created by github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x76\r\n```\r\nUsing following docker-compose config:\r\n```\r\nversion: \"2\"\r\nservices:\r\n  geth:\r\n    image: ethereum/client-go:stable\r\n    volumes:\r\n      - /usr/lib/ethereum:/root/.ethereum\r\n    command: --testnet  --cache 10000 --syncmode \"fast\" --nousb --rpcapi debug,eth,web3,personal,net --rpc --rpcaddr \"0.0.0.0\" --rpcvhosts=\"*\" --ws --wsaddr \"0.0.0.0\" --wsorigins=\"*\" --port 30303 --wsport 8546 --rpcport 8545\r\n    ports:\r\n      - 30303:30303\r\n      - 8545:8545\r\n      - 8546:8546\r\n    restart: always\r\n```\r\nOnly one node per host. This volume used by single instance.\r\n```\r\n~# docker-compose -f geth.yml ps\r\n   Name                  Command               State                                               Ports                                            \r\n----------------------------------------------------------------------------------------------------------------------------------------------------\r\nroot_geth_1   geth --testnet --cache 100 ...   Up      0.0.0.0:30303->30303/tcp, 30303/udp, 0.0.0.0:8545->8545/tcp, 0.0.0.0:8546->8546/tcp, 8547/tcp\r\n```\r\n\r\nYou are right, I've got mistake over here: `Switch sync mode from fast sync to full sync` due to `--syncmode \"fast\"`, I'll fix it.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682480581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682486167",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682486167",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682486167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ4NjE2Nw==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:59:35Z",
    "updated_at": "2020-08-28T12:00:17Z",
    "author_association": "NONE",
    "body": "I've restart a host, and and following problem has been repeated (truncated log):\r\n```\r\ngeth_1  | INFO [08-28|11:56:04.965] New local node record                    seq=9192 id=e5666364e47fd534 ip=159.69.196.55 udp=30303 tcp=30303\r\ngeth_1  | INFO [08-28|11:56:06.907] Looking for peers                        peercount=1 tried=61 static=0\r\ngeth_1  | INFO [08-28|11:56:16.908] Looking for peers                        peercount=1 tried=58 static=0\r\ngeth_1  | INFO [08-28|11:56:30.907] Looking for peers                        peercount=1 tried=44 static=0\r\ngeth_1  | INFO [08-28|11:56:40.907] Looking for peers                        peercount=1 tried=73 static=0\r\ngeth_1  | INFO [08-28|11:56:50.922] Looking for peers                        peercount=2 tried=59 static=0\r\ngeth_1  | INFO [08-28|11:57:01.205] Looking for peers                        peercount=1 tried=165 static=0\r\ngeth_1  | INFO [08-28|11:57:11.262] Block synchronisation started \r\ngeth_1  | INFO [08-28|11:57:11.417] Looking for peers                        peercount=2 tried=52  static=0\r\ngeth_1  | INFO [08-28|11:57:21.417] Looking for peers                        peercount=2 tried=80  static=0\r\ngeth_1  | panic: runtime error: invalid memory address or nil pointer dereference\r\ngeth_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xc2cfd0]\r\ngeth_1  | \r\ngeth_1  | goroutine 3053 [running]:\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc0000dce00, 0xc01e933c20, 0xc01f143d40, 0x0, 0x0, 0xa)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:906 +0x1670\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc0000dce00, 0xc01e933c20, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0x0, 0x0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:460 +0x3da\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc0000dce00, 0xc01e9e4a70, 0x10, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0xc000000000, 0x0, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:423 +0x390\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc0000dce00, 0xc01e9e4a70, 0x10, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0x0, 0xc0001b9900, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:333 +0x8c\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*ProtocolManager).doSync(0xc00066f600, 0xc01eade1c0, 0xd189992ee7b0c77a, 0xfcacb18289bd092d)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:322 +0xa5\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync.func1(0xc0006958f0, 0xc01eade1c0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x38\r\ngeth_1  | created by github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x76\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682486167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682581815",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682581815",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682581815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjU4MTgxNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T13:41:34Z",
    "updated_at": "2020-08-28T13:41:34Z",
    "author_association": "MEMBER",
    "body": "So, one thing I'm curious about, is if you can start it, and then stop it before it talks to any peers.  The stop portion should write out some additional info about the blocks, e.g: \r\n```\r\nINFO [08-28|11:53:18.087] HTTP server stopped                      endpoint=[::]:8546\r\nINFO [08-28|11:53:18.088] IPC endpoint closed                      url=/eth/geth.ipc\r\nINFO [08-28|11:53:18.147] Deallocated fast sync bloom              items=355 errorrate=0.000\r\nINFO [08-28|11:53:18.148] Loaded most recent local header          number=784     hash=\"7a964e…587cf2\" td=721311419 age=3y9mo3w\r\nINFO [08-28|11:53:18.148] Loaded most recent local full block      number=0       hash=\"419410…ca4a2d\" td=1048576   age=51y4mo3w\r\nINFO [08-28|11:53:18.148] Loaded most recent local fast block      number=0       hash=\"419410…ca4a2d\" td=1048576   age=51y4mo3w\r\nINFO [08-28|11:53:18.148] Loaded last fast-sync pivot marker       number=8570973\r\nWARN [08-28|11:53:18.148] Rolled back chain segment                header=784->784 fast=527->0 block=0->0 reason=\"syncing canceled (requested)\"\r\n```\r\n\r\nYou can achieve this by adding `--nodiscover --maxpeers=0` to the command line, and just let it run for a few seconds before you shut it down. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682581815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682593668",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-682593668",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 682593668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjU5MzY2OA==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T14:04:09Z",
    "updated_at": "2020-08-28T14:09:12Z",
    "author_association": "NONE",
    "body": "I'm not sure, that it's what you are curious about, but did as you wrote:\r\n```\r\ngeth_1  | INFO [08-28|14:01:40.001] HTTP server stopped                      endpoint=[::]:8545\r\ngeth_1  | INFO [08-28|14:01:40.502] HTTP server stopped                      endpoint=[::]:8546\r\ngeth_1  | INFO [08-28|14:01:40.502] IPC endpoint closed                      url=/root/.ethereum/testnet/geth.ipc\r\ngeth_1  | INFO [08-28|14:01:40.502] Ethereum protocol stopped \r\ngeth_1  | INFO [08-28|14:01:40.502] Transaction pool stopped \r\ngeth_1  | INFO [08-28|14:01:40.502] Writing cached state to disk             block=8479627 hash=\"9400e7…b1acfc\" root=\"21660a…2c8eae\"\r\ngeth_1  | INFO [08-28|14:01:40.502] Persisted trie from memory database      nodes=0   size=0.00B    time=\"9.55µs\"   gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B\r\ngeth_1  | INFO [08-28|14:01:40.502] Writing cached state to disk             block=8479626 hash=\"aa27d9…979a04\" root=\"b0d505…fcd9f0\"\r\ngeth_1  | INFO [08-28|14:01:40.502] Persisted trie from memory database      nodes=0   size=0.00B    time=\"1.807µs\"  gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B\r\ngeth_1  | INFO [08-28|14:01:40.503] Writing cached state to disk             block=8479500 hash=\"a542f7…736a9a\" root=\"9beb29…5ce501\"\r\ngeth_1  | INFO [08-28|14:01:40.503] Persisted trie from memory database      nodes=0   size=0.00B    time=\"2.681µs\"  gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B\r\ngeth_1  | INFO [08-28|14:01:40.503] Writing clean trie cache to disk         path=/root/.ethereum/testnet/geth/triecache threads=4\r\ngeth_1  | INFO [08-28|14:01:41.840] Looking for peers                        peercount=0 tried=56 static=0\r\ngeth_1  | INFO [08-28|14:01:42.048] Persisted the clean trie cache           path=/root/.ethereum/testnet/geth/triecache elapsed=1.545s\r\ngeth_1  | INFO [08-28|14:01:42.048] Blockchain stopped \r\nroot_geth_1 exited with code 0\r\n```\r\nWith following cmd:\r\n`command: --ropsten --cache 10000 --syncmode \"full\" --nodiscover --maxpeers=0`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/682593668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/684524267",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-684524267",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 684524267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDUyNDI2Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-01T07:48:17Z",
    "updated_at": "2020-09-01T07:48:17Z",
    "author_association": "MEMBER",
    "body": "Yes, that was what I was curious about. So essentially: \r\nstartup:\r\n```\r\n\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local header          number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local full block      number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\ngeth_1  | INFO [08-28|11:05:31.493] Loaded most recent local fast block      number=8479627 hash=\"9400e7…b1acfc\" td=31290068525054253 age=2w2d2h\r\n```\r\nshutdown:\r\n```\r\ngeth_1  | INFO [08-28|14:01:40.502] Writing cached state to disk             block=8479627 hash=\"9400e7…b1acfc\" root=\"21660a…2c8eae\"\r\ngeth_1  | INFO [08-28|14:01:40.502] Writing cached state to disk             block=8479626 hash=\"aa27d9…979a04\" root=\"b0d505…fcd9f0\"\r\ngeth_1  | INFO [08-28|14:01:40.503] Writing cached state to disk             block=8479500 hash=\"a542f7…736a9a\" root=\"9beb29…5ce501\"\r\n```\r\nBut if it talks to some network peer, we hit \r\n```\r\ngeth_1  | panic: runtime error: invalid memory address or nil pointer dereference\r\ngeth_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xc2cfd0]\r\ngeth_1  | \r\ngeth_1  | goroutine 3053 [running]:\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc0000dce00, 0xc01e933c20, 0xc01f143d40, 0x0, 0x0, 0xa)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:906 +0x1670\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc0000dce00, 0xc01e933c20, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0x0, 0x0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:460 +0x3da\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc0000dce00, 0xc01e9e4a70, 0x10, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0xc000000000, 0x0, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:423 +0x390\r\ngeth_1  | github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc0000dce00, 0xc01e9e4a70, 0x10, 0x2145bf608fec33ca, 0x7338955df07d77ae, 0xca4d880a62b5f122, 0xdb9e4d61a7fa8575, 0xc01eaced00, 0x0, 0xc0001b9900, ...)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/downloader/downloader.go:333 +0x8c\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*ProtocolManager).doSync(0xc00066f600, 0xc01eade1c0, 0xd189992ee7b0c77a, 0xfcacb18289bd092d)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:322 +0xa5\r\ngeth_1  | github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync.func1(0xc0006958f0, 0xc01eade1c0)\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x38\r\ngeth_1  | created by github.com/ethereum/go-ethereum/eth.(*chainSyncer).startSync\r\ngeth_1  |       github.com/ethereum/go-ethereum/eth/sync.go:298 +0x76\r\n```\r\nThis is very curious indeed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/684524267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/684821486",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-684821486",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 684821486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDgyMTQ4Ng==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-01T12:37:49Z",
    "updated_at": "2020-09-01T12:37:49Z",
    "author_association": "MEMBER",
    "body": "@karalabe any ideas how to diagnose this? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/684821486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685544637",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685544637",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685544637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTU0NDYzNw==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T10:05:30Z",
    "updated_at": "2020-09-02T10:05:30Z",
    "author_association": "NONE",
    "body": "Looks like #21505 got the same problem ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685544637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685727658",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685727658",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685727658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTcyNzY1OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T13:13:48Z",
    "updated_at": "2020-09-02T13:13:48Z",
    "author_association": "MEMBER",
    "body": "That's unrelated",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685727658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685733857",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685733857",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685733857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTczMzg1Nw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T13:23:28Z",
    "updated_at": "2020-09-02T13:23:28Z",
    "author_association": "MEMBER",
    "body": "Pasting from discord.\r\n\r\n---\r\n\r\n```go\r\n                var known bool\r\n                switch mode {\r\n                case FullSync:\r\n                    known = d.blockchain.HasBlock(h, n)\r\n                case FastSync:\r\n                    known = d.blockchain.HasFastBlock(h, n)\r\n                default:\r\n                    known = d.lightchain.HasHeader(h, n)\r\n                }\r\n                if !known {\r\n                    end = check\r\n                    break\r\n                }\r\n                header := d.lightchain.GetHeaderByHash(h) // Independent of sync mode, header surely exists\r\n                if header.Number.Uint64() != check {\r\n```\r\n\r\nit crashes in the last line\r\nbut we just checked that it exists right above that\r\nunless we lost the hash->number mapping\r\nbecause above we check with the number included, so we don't do the extra inde xlookup\r\nbut ByHash does it. if th eindex is missing, header will be nil",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685733857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685734908",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685734908",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685734908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTczNDkwOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T13:25:12Z",
    "updated_at": "2020-09-02T13:25:56Z",
    "author_association": "MEMBER",
    "body": "@voronindev Do you have an unclean shutdown / crash log from before this thing started happening? It seems to me that something went missing from the database. Would be nice to know if it is due to a crash or normal operation. Would help triage where the issue might be.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685734908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685740644",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685740644",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685740644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTc0MDY0NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T13:34:20Z",
    "updated_at": "2020-09-02T13:35:26Z",
    "author_association": "MEMBER",
    "body": "@voronindev My suggestion to fix it quickly is to\r\n\r\n1. **Back up your entire data directory somewhere.**\r\n2. Start your node with `--maxpeers=0` to prevent it from crashing.\r\n3. Run `debug.setHead(\"0x813DF0\")` to roll back the chain to block 8470000.\r\n4. Restart Geth normally.\r\n\r\nThe `setHead` command should clean up the head of the database from any leftovers and hopefully the issue is not too deep in the chain and it can just pick up from that older block.\r\n\r\n**Again, please back up your datadir first, using `setHead` is not without danger**.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685740644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685740953",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685740953",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685740953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTc0MDk1Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T13:34:50Z",
    "updated_at": "2020-09-02T13:34:50Z",
    "author_association": "MEMBER",
    "body": "If you can upload your `chaindata` dir somewhere so we could poke at it, that would be even more awesome.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685740953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685983526",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685983526",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685983526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTk4MzUyNg==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T20:35:50Z",
    "updated_at": "2020-09-02T20:35:50Z",
    "author_association": "NONE",
    "body": "Ok, i'll try to rollback header to the following height. Before this error happened, I've updating my node from 1.9.19 to 1.9.20, like this::\r\n```\r\ndocker-compose pull\r\ndocker-compose up -d\r\n```\r\nWhen I received latest version (1.9.20), and tried to look through the logs, I've reached this error. That's is all.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685983526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685997583",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-685997583",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 685997583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTk5NzU4Mw==",
    "user": {
      "login": "voronindev",
      "id": 10127919,
      "node_id": "MDQ6VXNlcjEwMTI3OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10127919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voronindev",
      "html_url": "https://github.com/voronindev",
      "followers_url": "https://api.github.com/users/voronindev/followers",
      "following_url": "https://api.github.com/users/voronindev/following{/other_user}",
      "gists_url": "https://api.github.com/users/voronindev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voronindev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voronindev/subscriptions",
      "organizations_url": "https://api.github.com/users/voronindev/orgs",
      "repos_url": "https://api.github.com/users/voronindev/repos",
      "events_url": "https://api.github.com/users/voronindev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voronindev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T21:06:02Z",
    "updated_at": "2020-09-02T21:13:25Z",
    "author_association": "NONE",
    "body": "It's quite difficult to share `chaindata`, but I did as you said @karalabe , first I saw (after `debug_setHead(\"0x813DF0\")`):\r\n```\r\ngeth_1  | WARN [09-02|20:46:19.452] Rewinding blockchain                     target=0\r\n```\r\nThen, after graceful stop and run:\r\n```\r\neth_1  | INFO [09-02|20:59:49.871] Initialising Ethereum protocol           versions=\"[65 64 63]\" network=3 dbversion=8\r\ngeth_1  | INFO [09-02|20:59:49.873] Loaded most recent local header          number=7719961 hash=\"854d85…ea87d4\" td=30281157352637171 age=4mo2w6d\r\ngeth_1  | INFO [09-02|20:59:49.873] Loaded most recent local full block      number=7624435 hash=\"cdea42…94e28c\" td=30215657987996072 age=5mo5d12h\r\ngeth_1  | INFO [09-02|20:59:49.873] Loaded most recent local fast block      number=7719961 hash=\"854d85…ea87d4\" td=30281157352637171 age=4mo2w6d\r\ngeth_1  | ERROR[09-02|20:59:49.898] Truncating ancient chain                 from=7719961 to=7624435\r\ngeth_1  | INFO [09-02|21:00:26.516] Loaded most recent local header          number=7624435 hash=\"cdea42…94e28c\" td=30215657987996072 age=5mo5d12h\r\ngeth_1  | INFO [09-02|21:00:26.516] Loaded most recent local full block      number=7624435 hash=\"cdea42…94e28c\" td=30215657987996072 age=5mo5d12h\r\ngeth_1  | INFO [09-02|21:00:26.516] Loaded most recent local fast block      number=7624435 hash=\"cdea42…94e28c\" td=30215657987996072 age=5mo5d12h\r\ngeth_1  | INFO [09-02|21:00:26.520] Loaded local transaction journal         transactions=1 dropped=1\r\ngeth_1  | INFO [09-02|21:00:26.521] Regenerated local transaction journal    transactions=0 accounts=0\r\ngeth_1  | INFO [09-02|21:00:26.522] Starting peer-to-peer node               instance=Geth/v1.9.20-stable-979fc968/linux-amd64/go1.15\r\ngeth_1  | INFO [09-02|21:00:26.587] New local node record                    seq=20292 id=e5666364e47fd534 ip=127.0.0.1 udp=30303 tcp=30303\r\ngeth_1  | INFO [09-02|21:00:26.587] Started P2P networking                   self=enode://61bc478a98c152250dcfa78ff8fb3677ad21b33f5bd3de4e72b4d5158df28f72198ccc8b5dcc960a7b8e8d357762f3ae0bd2e3836d5b9e040beca441914bc10d@127.0.0.1:30303\r\ngeth_1  | INFO [09-02|21:00:26.588] IPC endpoint opened                      url=/root/.ethereum/testnet/geth.ipc\r\ngeth_1  | INFO [09-02|21:00:26.589] HTTP server started                      endpoint=[::]:8545 cors= vhosts=*\r\ngeth_1  | INFO [09-02|21:00:26.589] WebSocket enabled                        url=ws://[::]:8546\r\ngeth_1  | INFO [09-02|21:00:36.664] Looking for peers                        peercount=1 tried=59 static=0\r\ngeth_1  | INFO [09-02|21:00:42.815] New local node record                    seq=20293 id=e5666364e47fd534 ip=159.69.196.55 udp=1033  tcp=30303\r\ngeth_1  | INFO [09-02|21:00:46.828] Looking for peers                        peercount=1 tried=56 static=0\r\ngeth_1  | INFO [09-02|21:00:56.895] Looking for peers                        peercount=0 tried=52 static=0\r\ngeth_1  | INFO [09-02|21:01:00.557] Block synchronisation started \r\ngeth_1  | INFO [09-02|21:01:03.980] Downloader queue stats                   receiptTasks=0 blockTasks=153 itemSize=613.96B throttle=8192\r\ngeth_1  | INFO [09-02|21:01:06.903] Looking for peers                        peercount=2 tried=52 static=0\r\ngeth_1  | INFO [09-02|21:01:07.098] Imported new chain segment               blocks=2 txs=27 mgas=2.327 elapsed=3.117s mgasps=0.746 number=7624437 hash=\"996fd3…c0b479\" age=5mo5d12h dirty=231.98KiB\r\ngeth_1  | INFO [09-02|21:01:15.159] Imported new chain segment               blocks=126 txs=2561 mgas=266.571 elapsed=8.056s mgasps=33.086 number=7624563 hash=\"2c8fa3…0d47da\" age=5mo5d12h dirty=15.52MiB\r\ngeth_1  | INFO [09-02|21:01:16.943] Looking for peers                        peercount=2 tried=70 static=0\r\ngeth_1  | INFO [09-02|21:01:23.161] Imported new chain segment               blocks=21  txs=547  mgas=140.040 elapsed=8.002s mgasps=17.499 number=7624584 hash=\"bb3e3a…7c7971\" age=5mo5d11h dirty=27.68MiB\r\ngeth_1  | INFO [09-02|21:01:23.762] Imported new chain segment               blocks=20  txs=284  mgas=21.258  elapsed=600.489ms mgasps=35.402 number=7624604 hash=\"92ee60…6def85\" age=5mo5d11h dirty=28.09MiB\r\ngeth_1  | INFO [09-02|21:01:23.763] Downloader queue stats                   receiptTasks=0 blockTasks=3525 itemSize=5.93KiB throttle=8192\r\ngeth_1  | INFO [09-02|21:01:27.228] Looking for peers                        peercount=3 tried=68 static=0\r\ngeth_1  | INFO [09-02|21:01:31.957] Imported new chain segment               blocks=161 txs=2629 mgas=295.146 elapsed=8.177s    mgasps=36.093 number=7624765 hash=\"d2f901…bf7558\" age=5mo5d11h dirty=31.84MiB\r\ngeth_1  | INFO [09-02|21:01:37.504] Looking for peers                        peercount=3 tried=107 static=0\r\ngeth_1  | INFO [09-02|21:01:40.049] Imported new chain segment               blocks=118 txs=2932 mgas=408.865 elapsed=8.092s    mgasps=50.526 number=7624883 hash=\"275ad0…890e1a\" age=5mo5d10h dirty=43.71MiB\r\ngeth_1  | INFO [09-02|21:01:47.526] Looking for peers                        peercount=3 tried=64  static=0\r\ngeth_1  | INFO [09-02|21:01:48.062] Imported new chain segment               blocks=229 txs=4009 mgas=486.746 elapsed=8.012s    mgasps=60.749 number=7625112 hash=\"3a914e…718905\" age=5mo5d9h  dirty=44.68MiB\r\n```\r\nIt's syncing. Was the `chaindata` corrupted?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/685997583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/688716359",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-688716359",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 688716359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODcxNjM1OQ==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T08:40:38Z",
    "updated_at": "2020-09-08T08:40:38Z",
    "author_association": "MEMBER",
    "body": "It seems after rewinding the HEAD, the chain is syncing correctly.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/688716359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/688721782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21496#issuecomment-688721782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21496",
    "id": 688721782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODcyMTc4Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T08:49:37Z",
    "updated_at": "2020-09-08T08:49:37Z",
    "author_association": "MEMBER",
    "body": "Thanks for working with us, we're closing this now since it seems that the cause was older code crashing, and the reworked setHead solved the issue, allowing geth to continue syncing. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/688721782/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

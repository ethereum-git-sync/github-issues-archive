{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26166",
  "id": 1446290059,
  "node_id": "I_kwDOAOvK985WNKKL",
  "number": 26166,
  "title": "Automation of private chain nodes deployment",
  "user": {
    "login": "Gelassen",
    "id": 426382,
    "node_id": "MDQ6VXNlcjQyNjM4Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gelassen",
    "html_url": "https://github.com/Gelassen",
    "followers_url": "https://api.github.com/users/Gelassen/followers",
    "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
    "organizations_url": "https://api.github.com/users/Gelassen/orgs",
    "repos_url": "https://api.github.com/users/Gelassen/repos",
    "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gelassen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-11-12T06:32:26Z",
  "updated_at": "2022-11-17T10:46:34Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am working on automation of private chain nodes deployment. By link below you could find my scenario, shell script and current issues. \r\nhttps://unix.stackexchange.com/questions/724525/custom-scenario-for-linux-shell-script\r\n\r\nThere is [a popular question](https://ethereum.stackexchange.com/questions/28703/full-list-of-geth-terminal-command) about a comprehensive overview of Geth API and its abilities, but [JSON RPC API's section in the official documentation](https://geth.ethereum.org/docs/rpc/serverhttps://geth.ethereum.org/docs/rpc/server) looks like the most complete overview of the API. Unfortunately, it doesn't clarify my current issue. \r\n\r\nWhat I would like to do is automate this part: \r\n\r\n```\r\n$geth attach ipc:node1/data/geth.ipc\r\n$admin.nodeInfo.enode\r\n(reply would be something similar to \"enode://64dccd02d5d1166cfb4913f0d0c164dff2b9c61fd55182461010569e15319c7ff5cb4dc8b502e441c38c80ae1b42c2cc95c7e170ed973bb0353d766669c5447c@195.178.22.21:2001?discport=39805\")\r\n$geth attach ipc:node2/data/geth.ipc\r\n$admin.addPeer(\"enode://64dccd02d5d1166cfb4913f0d0c164dff2b9c61fd55182461010569e15319c7ff5cb4dc8b502e441c38c80ae1b42c2cc95c7e170ed973bb0353d766669c5447c@127.0.0.1:2001\")\r\n```    \r\nThe issue is how to get ```enode``` value from one **geth node's JS console** and put it another one **geth node's console**. Initially I thought to write it into the temp file from one console and read this temp file from another one console, but **geth node's JS console** seems doesn't able to operate with files based on API overview by link above. \r\n\r\nI found out ```geth``` also supports HTTP request from node, if it is able to return ```enode``` value then my automation task would be just running ```curl``` command. Unfortunately, I do not see any existing use cases of interaction with ```admin.nodeInfo.enode``` and ```admin.addPeer(<enode value>)``` over http. Is it possible at all? \r\n\r\nWhat would be the best option to solve this task? API description like API method, request example, response example would be good to see in docs or at least here. \r\n\r\nThank you.  \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1312401333",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26166#issuecomment-1312401333",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166",
    "id": 1312401333,
    "node_id": "IC_kwDOAOvK985OOae1",
    "user": {
      "login": "Gelassen",
      "id": 426382,
      "node_id": "MDQ6VXNlcjQyNjM4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gelassen",
      "html_url": "https://github.com/Gelassen",
      "followers_url": "https://api.github.com/users/Gelassen/followers",
      "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
      "organizations_url": "https://api.github.com/users/Gelassen/orgs",
      "repos_url": "https://api.github.com/users/Gelassen/repos",
      "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gelassen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-12T07:46:14Z",
    "updated_at": "2022-11-12T07:46:14Z",
    "author_association": "NONE",
    "body": "Actually there is a doc which covers piece of requested information: \r\nhttps://geth.ethereum.org/docs/rpc/ns-admin#admin_nodeinfo\r\n\r\nHowever I have an issue to execute it properly: \r\n\r\n```\r\nOne console: $geth --http --http.port 2001 --http.api admin,personal,eth,net,web3  --datadir ./node1/data\r\nAnother console: $curl -X GET http://127.0.0.1:8551 -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\", \"method\":\"admin_nodeInfo\"}'\r\n```\r\n\r\nCurl command tells me 'missing token'. It seems ```curl``` related, not ```geth```, error, but the only token ```curl``` should require is auth token which ```geth``` doesn't require for this request.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1312401333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1313539897",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26166#issuecomment-1313539897",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166",
    "id": 1313539897,
    "node_id": "IC_kwDOAOvK985OSwc5",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-14T11:32:27Z",
    "updated_at": "2022-11-14T11:32:27Z",
    "author_association": "MEMBER",
    "body": "Yes your best bet is to use the HTTP API instead of console. Your curl command is using the wrong port. In the first command you set the HTTP port to be 2001.\r\n\r\nIn the other node you can again use curl and `admin_addPeer`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1313539897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1313553718",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26166#issuecomment-1313553718",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166",
    "id": 1313553718,
    "node_id": "IC_kwDOAOvK985OSz02",
    "user": {
      "login": "Gelassen",
      "id": 426382,
      "node_id": "MDQ6VXNlcjQyNjM4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gelassen",
      "html_url": "https://github.com/Gelassen",
      "followers_url": "https://api.github.com/users/Gelassen/followers",
      "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
      "organizations_url": "https://api.github.com/users/Gelassen/orgs",
      "repos_url": "https://api.github.com/users/Gelassen/repos",
      "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gelassen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-14T11:44:48Z",
    "updated_at": "2022-11-14T11:44:48Z",
    "author_association": "NONE",
    "body": "Thank you for spotted a typo in the console command! I'll try it when finish with current task. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1313553718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1318444430",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26166#issuecomment-1318444430",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26166",
    "id": 1318444430,
    "node_id": "IC_kwDOAOvK985Old2O",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T10:46:34Z",
    "updated_at": "2022-11-17T10:46:34Z",
    "author_association": "MEMBER",
    "body": "If you are trying to set up a network of connected nodes with e.g. ansible, you can also pre-generate the node keys and corresponding enode endpoints using the `devp2p` tool.\r\n\r\nTo create a key, use `devp2p key generate node1.key`. This writes a private key to the file `node1.key`. \r\n\r\nThen you can create the p2p endpoint using `devp2p key to-enr -ip 1.2.3.4 -udp 30303 -tcp 30303 node1.key`. This command outputs a string that can be passed to `addPeer` or the `--bootnodes` flag of geth.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1318444430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21189",
  "id": 634396115,
  "node_id": "MDU6SXNzdWU2MzQzOTYxMTU=",
  "number": 21189,
  "title": "Proof Of Authority Clique Block Period 0 does not seal blocks even on pending txs",
  "user": {
    "login": "cyrilnavessamuel",
    "id": 8938494,
    "node_id": "MDQ6VXNlcjg5Mzg0OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8938494?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cyrilnavessamuel",
    "html_url": "https://github.com/cyrilnavessamuel",
    "followers_url": "https://api.github.com/users/cyrilnavessamuel/followers",
    "following_url": "https://api.github.com/users/cyrilnavessamuel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cyrilnavessamuel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cyrilnavessamuel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cyrilnavessamuel/subscriptions",
    "organizations_url": "https://api.github.com/users/cyrilnavessamuel/orgs",
    "repos_url": "https://api.github.com/users/cyrilnavessamuel/repos",
    "events_url": "https://api.github.com/users/cyrilnavessamuel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cyrilnavessamuel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-06-08T08:57:33Z",
  "updated_at": "2020-09-17T08:39:48Z",
  "closed_at": "2020-09-17T08:39:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\n#### System information\r\n\r\nGeth version: 1.9.12\r\nOS & Version: Linux\r\nClique PoA\r\nProcessor: Intel i7 - 3770\r\nCPU: 8\r\nRAM : 16 GB\r\ntxpool.global slot : 100000000\r\n\r\n#### Expected behaviour\r\nClique Block Period 0 should seal blocks when there is pending transaction in the network.\r\n\r\n#### Actual behaviour\r\nWhen I tested for set of 200000 transactions which invokes a simple smart contract method of addition repetitively. After some transactions are sealed into a block, sealing of blocks is stopped even when there are pending transactions in the network. 70000 txs are pending\r\n\r\nDuring the pending transaction state, Again when some more transactions 200000 are sent it starts to seal again and then stops again with some transactions being in pending state. 50000 txs are pending this time.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nSend transaction in block period 0 for large no of transactions continuously 200000.\r\n\r\nNo of sealers in network : 4\r\n\r\nIn case of replication, please refer https://github.com/cyrilnavessamuel/ethereumissue which contains client script and smart contract file which can be used\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/641249872",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21189#issuecomment-641249872",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189",
    "id": 641249872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTI0OTg3Mg==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T12:14:50Z",
    "updated_at": "2020-06-09T12:14:50Z",
    "author_association": "MEMBER",
    "body": "Can you retrieve the txpool status via console(`txpool.status`)? My hunch is there exists nonce gap so all following transactions can't be packed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/641249872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652424133",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21189#issuecomment-652424133",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189",
    "id": 652424133,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjQyNDEzMw==",
    "user": {
      "login": "cyrilnavessamuel",
      "id": 8938494,
      "node_id": "MDQ6VXNlcjg5Mzg0OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8938494?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cyrilnavessamuel",
      "html_url": "https://github.com/cyrilnavessamuel",
      "followers_url": "https://api.github.com/users/cyrilnavessamuel/followers",
      "following_url": "https://api.github.com/users/cyrilnavessamuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cyrilnavessamuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cyrilnavessamuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cyrilnavessamuel/subscriptions",
      "organizations_url": "https://api.github.com/users/cyrilnavessamuel/orgs",
      "repos_url": "https://api.github.com/users/cyrilnavessamuel/repos",
      "events_url": "https://api.github.com/users/cyrilnavessamuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cyrilnavessamuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-01T13:38:53Z",
    "updated_at": "2020-08-20T09:02:24Z",
    "author_association": "NONE",
    "body": "Hello,\r\nSorry for the delay in my response.\r\n\r\nYes I have checked it as well to identify a nonce gap which would result in transaction stocked in queue.\r\n\r\nSo I reran the tests with block period 0 having 4 Geth Nodes as sealers in the network.\r\nI sent 100000 transactions out of which only 12500 txs were processed onto block.\r\nI ran txpool.status on 4 Nodes individually:\r\nNode A:  txpool.status\r\n\r\n```javascript\r\n{\r\n  pending: 87495,\r\n  queued: 0\r\n}\r\n```\r\nNode B: txpool.status\r\n```javascript\r\n{\r\n  pending: 3951,\r\n  queued: 1024\r\n}\r\n```\r\nNode C: \r\ntxpool.status\r\n```javascript\r\n{\r\n  pending: 0,\r\n  queued: 0\r\n}\r\n```\r\n txpool.status\r\n```javascript\r\n{\r\n  pending: 3951,\r\n  queued: 1024\r\n}\r\n```\r\nSo It means results are varied with each Nodes, with 2 Nodes having same status of txpool.\r\n\r\nOn looking at the logs:\r\nNode A & Node D: \r\nWait for block seal to be signed by the other Nodes\r\n\r\nLog Excerpt: \r\n```\r\nCommit new mining work                   number=24 sealhash=f86454…d030ac uncles=1 txs=3951 gas=149746851 fees=1.49746851e-10 elapsed=211.618ms\r\n```\r\n\r\nNode B & Node C:\r\nLog Excerpt:\r\n```\r\nINFO [07-01|15:36:03.822] Looking for peers                        peercount=3 tried=1 static=0\r\n```\r\nI can confirm there is no Nonce gap in the network.\r\n\r\nBut I think there is the problem of synchronisation between Nodes in case of Block Period 0\r\n\r\nThanks for your help\r\n\r\nCheers,\r\nCyril\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/652424133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677476079",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21189#issuecomment-677476079",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189",
    "id": 677476079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzQ3NjA3OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T09:07:23Z",
    "updated_at": "2020-08-20T09:07:23Z",
    "author_association": "MEMBER",
    "body": "This is a bit odd. I suspect that it's `B`'s turn to mine, and `B` knows no transactions. In order to figure this out, I think we don't have sufficient logs (the logs from C for example). Sorry it's taken so long to respond. \r\nDo you have a script to repro this? Could you publish it as a gist or repository? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677476079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/694087633",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21189#issuecomment-694087633",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21189",
    "id": 694087633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDA4NzYzMw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-17T08:39:48Z",
    "updated_at": "2020-09-17T08:39:48Z",
    "author_association": "MEMBER",
    "body": "Without more information sadly there's no way to continue. Please open a new PR if it happens again with a bit more information and logs from various nodes.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/694087633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15697",
  "id": 282820544,
  "node_id": "MDU6SXNzdWUyODI4MjA1NDQ=",
  "number": 15697,
  "title": "Failed to close database too many open files",
  "user": {
    "login": "abraham1901",
    "id": 1135925,
    "node_id": "MDQ6VXNlcjExMzU5MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1135925?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abraham1901",
    "html_url": "https://github.com/abraham1901",
    "followers_url": "https://api.github.com/users/abraham1901/followers",
    "following_url": "https://api.github.com/users/abraham1901/following{/other_user}",
    "gists_url": "https://api.github.com/users/abraham1901/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abraham1901/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abraham1901/subscriptions",
    "organizations_url": "https://api.github.com/users/abraham1901/orgs",
    "repos_url": "https://api.github.com/users/abraham1901/repos",
    "events_url": "https://api.github.com/users/abraham1901/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abraham1901/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-12-18T09:54:51Z",
  "updated_at": "2019-03-02T03:17:49Z",
  "closed_at": "2019-03-02T03:17:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\n\r\n#### System information\r\n\r\nGeth version: Version: 1.7.3-stable\r\nGit Commit: 4bb3c89d44e372e6a9ab85a8be0c9345265c763a\r\nOS & Version: Ununtu 16.04\r\nRepo: ppa http://ppa.launchpad.net/ethereum/ethereum/ubuntu \r\nPackage: 1.7.3+build11486+xenial\r\n\r\n\r\n#### Actual behaviour\r\ngeth --rinkeby\r\nAfter ctrl+C always files limit:\r\nERROR[12-18|12:44:29] Failed to close database                 database=/home/eth/.ethereum/rinkeby/geth/chaindata err=\"open /home/eth/.ethereum/rinkeby/geth/chaindata/160748.ldb: too many open files\"\r\n\r\nI'm cannot change system limit, because it's hardcoded:\r\nflag.go:\r\n        if limit > 2048 { // cap database file descriptors even if more is available\r\n                limit = 2048\r\n        }\r\n\r\nWhy?\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/356842462",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15697#issuecomment-356842462",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697",
    "id": 356842462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Njg0MjQ2Mg==",
    "user": {
      "login": "hege-li",
      "id": 22166225,
      "node_id": "MDQ6VXNlcjIyMTY2MjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/22166225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hege-li",
      "html_url": "https://github.com/hege-li",
      "followers_url": "https://api.github.com/users/hege-li/followers",
      "following_url": "https://api.github.com/users/hege-li/following{/other_user}",
      "gists_url": "https://api.github.com/users/hege-li/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hege-li/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hege-li/subscriptions",
      "organizations_url": "https://api.github.com/users/hege-li/orgs",
      "repos_url": "https://api.github.com/users/hege-li/repos",
      "events_url": "https://api.github.com/users/hege-li/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hege-li/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-11T06:50:00Z",
    "updated_at": "2018-01-11T08:52:42Z",
    "author_association": "NONE",
    "body": "Yeah this is crazy, why is there a hardcoded 2048 limit?? I have 24000 .ldb files that it's trying to open. Geth is not even reporting all the open file errors and it's silently \"doing nothing\". This could be also one of the reasons some are having hard time syncing.\r\n\r\nOr is the bug itself trying to open too many db files?\r\n\r\nI suppose it should atleast handle the error somehow when receiving EMFILE.\r\n\r\n[pid 11598] openat(AT_FDCWD, \"/home/xxx/.ethereum/geth/chaindata/188219.ldb\", O_RDONLY|O_CLOEXEC) = 2047\r\n[pid 11598] openat(AT_FDCWD, \"/home/xxx/.ethereum/geth/chaindata/188218.ldb\", O_RDONLY|O_CLOEXEC) = -1 EMFILE (Too many open files)\r\n\r\nThis is going on when starting geth, I guess it's scanning all the database.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/356842462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/455743657",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15697#issuecomment-455743657",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15697",
    "id": 455743657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTc0MzY1Nw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-01-19T03:00:20Z",
    "updated_at": "2019-01-19T03:00:20Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/455743657/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16449",
  "id": 311578247,
  "node_id": "MDU6SXNzdWUzMTE1NzgyNDc=",
  "number": 16449,
  "title": "fatal error: Concurrent map iteration and map write on super fast chain.",
  "user": {
    "login": "reckter",
    "id": 1771450,
    "node_id": "MDQ6VXNlcjE3NzE0NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1771450?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/reckter",
    "html_url": "https://github.com/reckter",
    "followers_url": "https://api.github.com/users/reckter/followers",
    "following_url": "https://api.github.com/users/reckter/following{/other_user}",
    "gists_url": "https://api.github.com/users/reckter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/reckter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/reckter/subscriptions",
    "organizations_url": "https://api.github.com/users/reckter/orgs",
    "repos_url": "https://api.github.com/users/reckter/repos",
    "events_url": "https://api.github.com/users/reckter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/reckter/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2018-04-05T11:47:53Z",
  "updated_at": "2019-01-29T09:55:15Z",
  "closed_at": "2018-12-04T10:04:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version:\r\nVersion: 1.8.3-unstable\r\nGit Commit: 6deb98636e240cc51f1bf81ae57286682018379c\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nGo Version: go1.9.2\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/local/go\r\nOS & Version: Linux/OSX (tested on both, crashed on both)\r\nnote: \r\nthis is from reckter/go-ethereum (please excuse the fast-net folder being commited, this was never intended to be released in any way, it's purely for testing huge amounts of block creation in a timely manner)\r\n\r\nI modified Geth to always use a fixed difficulty and ignore the usual block time. This enabled sup second block time for testing. (250 blocks ps being my record)\r\n\r\nI then use javascript with web3 to deploy a contract and interact with it. Sadly shortly (3-20 minutes)  after starting the chain it crashes.\r\n#### Expected behaviour\r\nNo Crash, mining the blocks and including transactions as usual.\r\n\r\n#### Actual behaviour\r\n\r\nAfter a while geth crashes with a go panic with the fatal error: \" concurrent map iteration and map write\".\r\nThis problem can be delayed, by slowing down the block speed and transaction pushing to the chain. \r\n\r\n#### Steps to reproduce the behaviour\r\ncheck out reckter/go-ethereum, use the following as init:\r\n``` json\r\n{\r\n        \"config\": {\r\n            \"chainId\": 148,\r\n            \"homesteadBlock\": 0,\r\n            \"eip155Block\": 0,\r\n            \"eip158Block\": 0,\r\n            \"ethash\": {\r\n                \"FixedDifficulty\": \"14000\"\r\n            }\r\n        },\r\n        \"difficulty\": \"14000\",\r\n        \"gasLimit\": \"207199254740991\",\r\n        \"nonce\": \"0x0000000000000001\",\r\n        \"extraData\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"alloc\": {}\r\n    }\r\n``` \r\nand then interact heavily using web3  with the chain. After a while, it crashes.\r\nNote that only mining the chain without actually sending transaction works fine at all speeds.\r\n\r\n#### Backtrace\r\n\r\n```\r\nfatal error: concurrent map iteration and map write\r\n\r\ngoroutine 399472 [running]:\r\nruntime.throw(0xf9d0a8, 0x26)\r\n\t/usr/local/go/src/runtime/panic.go:605 +0x95 fp=0xc46a071f68 sp=0xc46a071f48 pc=0x441315\r\nruntime.mapiternext(0xc46a072298)\r\n\t/usr/local/go/src/runtime/hashmap.go:778 +0x6f1 fp=0xc46a072000 sp=0xc46a071f68 pc=0x41f5b1\r\ngithub.com/ethereum/go-ethereum/core/state.(*StateDB).Copy(0xc50ab28e10, 0x0)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/state/statedb.go:477 +0x388 fp=0xc46a072308 sp=0xc46a072000 pc=0x71c088\r\ngithub.com/ethereum/go-ethereum/miner.(*worker).pending(0xc420336000, 0x0, 0x0)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/miner/worker.go:185 +0x158 fp=0xc46a072380 sp=0xc46a072308 pc=0xa65ee8\r\ngithub.com/ethereum/go-ethereum/miner.(*Miner).Pending(0xc4201b8960, 0xc46a0723f8, 0x43fbe9)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/miner/miner.go:167 +0x2f fp=0xc46a0723a8 sp=0xc46a072380 pc=0xa630af\r\ngithub.com/ethereum/go-ethereum/eth.(*EthApiBackend).StateAndHeaderByNumber(0xc42031ce80, 0x18462e0, 0xc472134300, 0xfffffffffffffffe, 0x1b97c40, 0x0, 0x0, 0x5bd8)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/eth/api_backend.go:87 +0x12e fp=0xc46a072408 sp=0xc46a0723a8 pc=0xac52be\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).doCall(0xc4384ee790, 0x18462e0, 0xc472134300, 0xd31fe63fb1a465ff, 0x84bd886564458524, 0x102466ec, 0xc42b2eb260, 0x3b9fc16, 0x0, 0x0, ...)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:617 +0x163 fp=0xc46a074f40 sp=0xc46a072408 pc=0xa77cb3\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).EstimateGas.func1(0x3b9fc16, 0x1)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:708 +0xbe fp=0xc46a077850 sp=0xc46a074f40 pc=0xa819de\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).EstimateGas(0xc4384ee790, 0x18462e0, 0xc472134300, 0xd31fe63fb1a465ff, 0x84bd886564458524, 0x102466ec, 0xc42b2eb260, 0x3b9fc16, 0x0, 0x0, ...)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:717 +0xf9 fp=0xc46a0778e0 sp=0xc46a077850 pc=0xa78709\r\nruntime.call256(0xc420f0d290, 0xc420f1af18, 0xc4200a8370, 0x98000000b0)\r\n\t/usr/local/go/src/runtime/asm_amd64.s:512 +0x55 fp=0xc46a0779f0 sp=0xc46a0778e0 pc=0x4701e5\r\nreflect.Value.call(0xc420348680, 0xc420f1af18, 0x13, 0xf79b94, 0x4, 0xc46ad6c000, 0x3, 0x4, 0xc4bfa47510, 0xc46ad6c000, ...)\r\n\t/usr/local/go/src/reflect/value.go:434 +0x905 fp=0xc46a077cc8 sp=0xc46a0779f0 pc=0x4d0b05\r\nreflect.Value.Call(0xc420348680, 0xc420f1af18, 0x13, 0xc46ad6c000, 0x3, 0x4, 0x1, 0x1, 0xc420f9d020)\r\n\t/usr/local/go/src/reflect/value.go:302 +0xa4 fp=0xc46a077d30 sp=0xc46a077cc8 pc=0x4d00e4\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).handle(0xc420f3fd40, 0x18462e0, 0xc472134300, 0x184af80, 0xc4201b83c0, 0xc421181200, 0x1009d58, 0x558b5678b19e1e63, 0x838823)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:311 +0x6ce fp=0xc46a077ed8 sp=0xc46a077d30 pc=0x831e5e\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).exec(0xc420f3fd40, 0x18462e0, 0xc472134300, 0x184af80, 0xc4201b83c0, 0xc421181200)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:333 +0x1ba fp=0xc46a077f48 sp=0xc46a077ed8 pc=0x832a5a\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).serveRequest.func2(0xc4b672a370, 0xc420f3fd40, 0xc5219960a0, 0x184af80, 0xc4201b83c0, 0xc4201c61c8, 0x1, 0x1, 0xc46f678c00)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:206 +0xad fp=0xc46a077f98 sp=0xc46a077f48 pc=0x83888d\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc46a077fa0 sp=0xc46a077f98 pc=0x472881\r\ncreated by github.com/ethereum/go-ethereum/rpc.(*Server).serveRequest\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:201 +0x2ab\r\n\r\ngoroutine 1 [chan receive, 10 minutes]:\r\ngithub.com/ethereum/go-ethereum/node.(*Node).Wait(0xc4201fa780)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/node/node.go:539 +0x7f\r\nmain.geth(0xc42023a840, 0x1007df0, 0xb2d05e00)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:219 +0x51\r\ngithub.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.HandleAction(0xe088a0, 0x10092c0, 0xc42023a840, 0xc42023a840, 0xc4204b9f40)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:490 +0xd2\r\ngithub.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.(*App).Run(0xc420258000, 0xc4200100a0, 0xa, 0xa, 0x0, 0x0)\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:264 +0x635\r\nmain.main()\r\n\t/home/reckter/ether/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:207 +0x55\r\n\r\n[...] Can deliver full stacktrace as needed, but as it is over 1000 lines long, I opted to cut out a lot here\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/380366117",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-380366117",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 380366117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDM2NjExNw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T08:10:05Z",
    "updated_at": "2018-04-11T08:10:05Z",
    "author_association": "MEMBER",
    "body": "Good catch, will look into ti, thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/380366117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/381461832",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-381461832",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 381461832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTQ2MTgzMg==",
    "user": {
      "login": "3h-william",
      "id": 6056559,
      "node_id": "MDQ6VXNlcjYwNTY1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6056559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3h-william",
      "html_url": "https://github.com/3h-william",
      "followers_url": "https://api.github.com/users/3h-william/followers",
      "following_url": "https://api.github.com/users/3h-william/following{/other_user}",
      "gists_url": "https://api.github.com/users/3h-william/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3h-william/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3h-william/subscriptions",
      "organizations_url": "https://api.github.com/users/3h-william/orgs",
      "repos_url": "https://api.github.com/users/3h-william/repos",
      "events_url": "https://api.github.com/users/3h-william/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3h-william/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T02:21:49Z",
    "updated_at": "2018-04-16T02:21:49Z",
    "author_association": "NONE",
    "body": "hi guys ,  The same  problems happened  in my test network , is there any update ? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/381461832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/388327820",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-388327820",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 388327820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODMyNzgyMA==",
    "user": {
      "login": "610265158",
      "id": 20919004,
      "node_id": "MDQ6VXNlcjIwOTE5MDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20919004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/610265158",
      "html_url": "https://github.com/610265158",
      "followers_url": "https://api.github.com/users/610265158/followers",
      "following_url": "https://api.github.com/users/610265158/following{/other_user}",
      "gists_url": "https://api.github.com/users/610265158/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/610265158/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/610265158/subscriptions",
      "organizations_url": "https://api.github.com/users/610265158/orgs",
      "repos_url": "https://api.github.com/users/610265158/repos",
      "events_url": "https://api.github.com/users/610265158/events{/privacy}",
      "received_events_url": "https://api.github.com/users/610265158/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T10:37:48Z",
    "updated_at": "2018-05-11T10:37:48Z",
    "author_association": "NONE",
    "body": "hi guys,  i got the same problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/388327820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/389025860",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-389025860",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 389025860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTAyNTg2MA==",
    "user": {
      "login": "zone-a",
      "id": 39287110,
      "node_id": "MDQ6VXNlcjM5Mjg3MTEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/39287110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zone-a",
      "html_url": "https://github.com/zone-a",
      "followers_url": "https://api.github.com/users/zone-a/followers",
      "following_url": "https://api.github.com/users/zone-a/following{/other_user}",
      "gists_url": "https://api.github.com/users/zone-a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zone-a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zone-a/subscriptions",
      "organizations_url": "https://api.github.com/users/zone-a/orgs",
      "repos_url": "https://api.github.com/users/zone-a/repos",
      "events_url": "https://api.github.com/users/zone-a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zone-a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T02:48:47Z",
    "updated_at": "2018-05-15T02:48:47Z",
    "author_association": "NONE",
    "body": "i got the same problem too",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/389025860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/389479514",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-389479514",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 389479514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTQ3OTUxNA==",
    "user": {
      "login": "xindebug",
      "id": 4002096,
      "node_id": "MDQ6VXNlcjQwMDIwOTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4002096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xindebug",
      "html_url": "https://github.com/xindebug",
      "followers_url": "https://api.github.com/users/xindebug/followers",
      "following_url": "https://api.github.com/users/xindebug/following{/other_user}",
      "gists_url": "https://api.github.com/users/xindebug/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xindebug/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xindebug/subscriptions",
      "organizations_url": "https://api.github.com/users/xindebug/orgs",
      "repos_url": "https://api.github.com/users/xindebug/repos",
      "events_url": "https://api.github.com/users/xindebug/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xindebug/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T11:00:30Z",
    "updated_at": "2018-05-16T11:07:25Z",
    "author_association": "NONE",
    "body": "`fatal error: concurrent map iteration and map write\r\n\r\ngoroutine 102778 [running]:\r\nruntime.throw(0xfdd57f, 0x26)\r\n\t/usr/lib/golang/src/runtime/panic.go:596 +0x95 fp=0xc422d659a0 sp=0xc422d65980\r\nruntime.mapiternext(0xc422d65cd8)\r\n\t/usr/lib/golang/src/runtime/hashmap.go:737 +0x7ee fp=0xc422d65a50 sp=0xc422d659a0\r\ngithub.com/ethereum/go-ethereum/core/state.(*StateDB).Copy(0xc42b0130e0, 0x0)\r\n\t/root/eth/go-ethereum-1.8.2/build/_workspace/src/github.com/ethereum/go-ethereum/core/state/statedb.go:477 +0x4fd fp=0xc422d65d48 sp=0xc422d65a50\r\ngithub.com/ethereum/go-ethereum/miner.(*worker).pending(0xc420092a00, 0x0, 0x0)`\r\n\r\n1.8.2-stable\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/389479514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390101486",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-390101486",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 390101486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDEwMTQ4Ng==",
    "user": {
      "login": "zone-a",
      "id": 39287110,
      "node_id": "MDQ6VXNlcjM5Mjg3MTEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/39287110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zone-a",
      "html_url": "https://github.com/zone-a",
      "followers_url": "https://api.github.com/users/zone-a/followers",
      "following_url": "https://api.github.com/users/zone-a/following{/other_user}",
      "gists_url": "https://api.github.com/users/zone-a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zone-a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zone-a/subscriptions",
      "organizations_url": "https://api.github.com/users/zone-a/orgs",
      "repos_url": "https://api.github.com/users/zone-a/repos",
      "events_url": "https://api.github.com/users/zone-a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zone-a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T05:49:35Z",
    "updated_at": "2018-05-18T05:50:03Z",
    "author_association": "NONE",
    "body": "I am not familiar with the code and try to modify it based on the crash information. Fortunately, it is useful.\r\n\r\nVERSION:\r\n   1.8.9-unstable-f6bc65fc\r\n\r\nline 315：\r\n\r\n\tself.dbwMu.Lock()\r\n\tstat, err := self.chain.WriteBlockWithState(block, work.receipts, work.state)\r\n\tself.dbwMu.Unlock()\r\n\r\nline 525：\r\n\r\n\tself.dbwMu.Lock()\r\n\tself.snapshotState = self.current.state.Copy()\r\n\tself.dbwMu.Unlock()\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390101486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390151091",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-390151091",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 390151091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDE1MTA5MQ==",
    "user": {
      "login": "xindebug",
      "id": 4002096,
      "node_id": "MDQ6VXNlcjQwMDIwOTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4002096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xindebug",
      "html_url": "https://github.com/xindebug",
      "followers_url": "https://api.github.com/users/xindebug/followers",
      "following_url": "https://api.github.com/users/xindebug/following{/other_user}",
      "gists_url": "https://api.github.com/users/xindebug/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xindebug/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xindebug/subscriptions",
      "organizations_url": "https://api.github.com/users/xindebug/orgs",
      "repos_url": "https://api.github.com/users/xindebug/repos",
      "events_url": "https://api.github.com/users/xindebug/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xindebug/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T09:29:33Z",
    "updated_at": "2018-05-18T09:29:33Z",
    "author_association": "NONE",
    "body": "@karalabe we need you",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390151091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390152936",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-390152936",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 390152936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDE1MjkzNg==",
    "user": {
      "login": "xindebug",
      "id": 4002096,
      "node_id": "MDQ6VXNlcjQwMDIwOTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4002096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xindebug",
      "html_url": "https://github.com/xindebug",
      "followers_url": "https://api.github.com/users/xindebug/followers",
      "following_url": "https://api.github.com/users/xindebug/following{/other_user}",
      "gists_url": "https://api.github.com/users/xindebug/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xindebug/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xindebug/subscriptions",
      "organizations_url": "https://api.github.com/users/xindebug/orgs",
      "repos_url": "https://api.github.com/users/xindebug/repos",
      "events_url": "https://api.github.com/users/xindebug/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xindebug/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T09:36:39Z",
    "updated_at": "2018-05-18T10:07:15Z",
    "author_association": "NONE",
    "body": "self.dbwMu undefined   in  miner/worker.go \r\n\r\n@zone-a  can you post more info?     such as the whole file.  tks!\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390152936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390274325",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-390274325",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 390274325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI3NDMyNQ==",
    "user": {
      "login": "benbjohnson",
      "id": 118015,
      "node_id": "MDQ6VXNlcjExODAxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/118015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benbjohnson",
      "html_url": "https://github.com/benbjohnson",
      "followers_url": "https://api.github.com/users/benbjohnson/followers",
      "following_url": "https://api.github.com/users/benbjohnson/following{/other_user}",
      "gists_url": "https://api.github.com/users/benbjohnson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benbjohnson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benbjohnson/subscriptions",
      "organizations_url": "https://api.github.com/users/benbjohnson/orgs",
      "repos_url": "https://api.github.com/users/benbjohnson/repos",
      "events_url": "https://api.github.com/users/benbjohnson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benbjohnson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T17:17:46Z",
    "updated_at": "2018-05-18T17:17:46Z",
    "author_association": "NONE",
    "body": "I pushed a fix: https://github.com/ethereum/go-ethereum/pull/16754",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/390274325/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/394154643",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-394154643",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 394154643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE1NDY0Mw==",
    "user": {
      "login": "reckter",
      "id": 1771450,
      "node_id": "MDQ6VXNlcjE3NzE0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1771450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reckter",
      "html_url": "https://github.com/reckter",
      "followers_url": "https://api.github.com/users/reckter/followers",
      "following_url": "https://api.github.com/users/reckter/following{/other_user}",
      "gists_url": "https://api.github.com/users/reckter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reckter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reckter/subscriptions",
      "organizations_url": "https://api.github.com/users/reckter/orgs",
      "repos_url": "https://api.github.com/users/reckter/repos",
      "events_url": "https://api.github.com/users/reckter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reckter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-03T11:11:39Z",
    "updated_at": "2018-06-03T11:11:39Z",
    "author_association": "NONE",
    "body": "I tested this with the fix of #16754 And it seems to work now.\r\nI did not let it run for multiple hours, as my pc gets quite unusable after a while running this setup, but it happily runs this scenario for about 40 minutes now. Before the fix it would never reach more then 15.\r\n\r\nThanks @benbjohnson!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/394154643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/444043303",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16449#issuecomment-444043303",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16449",
    "id": 444043303,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDA0MzMwMw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-04T10:04:53Z",
    "updated_at": "2018-12-04T10:04:53Z",
    "author_association": "MEMBER",
    "body": "Fixed a while back Please open a new issue if you still see this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/444043303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

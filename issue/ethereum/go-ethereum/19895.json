{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19895",
  "id": 473404211,
  "node_id": "MDU6SXNzdWU0NzM0MDQyMTE=",
  "number": 19895,
  "title": "Feature: add absolute-time based disk flushing",
  "user": {
    "login": "prd-fox",
    "id": 31221824,
    "node_id": "MDQ6VXNlcjMxMjIxODI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/31221824?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prd-fox",
    "html_url": "https://github.com/prd-fox",
    "followers_url": "https://api.github.com/users/prd-fox/followers",
    "following_url": "https://api.github.com/users/prd-fox/following{/other_user}",
    "gists_url": "https://api.github.com/users/prd-fox/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prd-fox/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prd-fox/subscriptions",
    "organizations_url": "https://api.github.com/users/prd-fox/orgs",
    "repos_url": "https://api.github.com/users/prd-fox/repos",
    "events_url": "https://api.github.com/users/prd-fox/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prd-fox/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-07-26T15:04:33Z",
  "updated_at": "2020-08-27T08:59:29Z",
  "closed_at": "2019-08-06T09:00:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Feature request\r\n\r\nWhen `geth` runs with `--gcmode=full`, there is a timeout condition that, if reached, will flush the current in-memory data to disk.\r\n\r\nIf I read the code correctly, the timeout is based on the cumulative execution time of block processing, rather than an absolute time period.\r\nFor private networks under variable load (a period of lots of full blocks followed by a period of lots of empty blocks), this can be tricky to gauge a good value to use for the timeout.\r\n\r\nIt would be simpler for users to specify an absolute time period that flushing could happen, so they are never out of sync by a period of more than the time they specify. (In addition to the block execution time timeout).",
  "closed_by": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518575695",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19895#issuecomment-518575695",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895",
    "id": 518575695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODU3NTY5NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T08:50:40Z",
    "updated_at": "2019-08-06T08:57:51Z",
    "author_association": "MEMBER",
    "body": "> It would be simpler for users to specify an absolute time period that flushing could happen, so they are never out of sync by a period of more than the time they specify.\r\n\r\nThat's the exact point of the current system. When you execute blocks in real time, you only get one block every 14 seconds (on mainnet). Thus, going through old blocks (back-to-back, without waiting those 14s) goes much faster, so absolute time does not tell you how much time it will take to re-execute. \r\n\r\nSame goes for private networks, actually. A `timeout` of 1 hour means that your computer will take about one hour to get back to up head (in the worst case) ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518575695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518579825",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19895#issuecomment-518579825",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895",
    "id": 518579825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODU3OTgyNQ==",
    "user": {
      "login": "adamschmideg",
      "id": 208822,
      "node_id": "MDQ6VXNlcjIwODgyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamschmideg",
      "html_url": "https://github.com/adamschmideg",
      "followers_url": "https://api.github.com/users/adamschmideg/followers",
      "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
      "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
      "repos_url": "https://api.github.com/users/adamschmideg/repos",
      "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T09:00:59Z",
    "updated_at": "2019-08-06T09:00:59Z",
    "author_association": "MEMBER",
    "body": "To be fixed by #19920",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518579825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518596013",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19895#issuecomment-518596013",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19895",
    "id": 518596013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODU5NjAxMw==",
    "user": {
      "login": "prd-fox",
      "id": 31221824,
      "node_id": "MDQ6VXNlcjMxMjIxODI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/31221824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prd-fox",
      "html_url": "https://github.com/prd-fox",
      "followers_url": "https://api.github.com/users/prd-fox/followers",
      "following_url": "https://api.github.com/users/prd-fox/following{/other_user}",
      "gists_url": "https://api.github.com/users/prd-fox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prd-fox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prd-fox/subscriptions",
      "organizations_url": "https://api.github.com/users/prd-fox/orgs",
      "repos_url": "https://api.github.com/users/prd-fox/repos",
      "events_url": "https://api.github.com/users/prd-fox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prd-fox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T09:44:57Z",
    "updated_at": "2019-08-06T09:44:57Z",
    "author_association": "NONE",
    "body": "Yeah that makes sense. I guess I was thinking about flushing every X blocks, which would equal some time period, regardless of the size of the blocks. Still, I think what is there now is sufficient. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/518596013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

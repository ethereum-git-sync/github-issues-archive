{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16160",
  "id": 299215598,
  "node_id": "MDU6SXNzdWUyOTkyMTU1OTg=",
  "number": 16160,
  "title": "Crash - panic: gas pool pushed above uint64",
  "user": {
    "login": "zincoshine",
    "id": 1627026,
    "node_id": "MDQ6VXNlcjE2MjcwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1627026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zincoshine",
    "html_url": "https://github.com/zincoshine",
    "followers_url": "https://api.github.com/users/zincoshine/followers",
    "following_url": "https://api.github.com/users/zincoshine/following{/other_user}",
    "gists_url": "https://api.github.com/users/zincoshine/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zincoshine/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zincoshine/subscriptions",
    "organizations_url": "https://api.github.com/users/zincoshine/orgs",
    "repos_url": "https://api.github.com/users/zincoshine/repos",
    "events_url": "https://api.github.com/users/zincoshine/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zincoshine/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-02-22T04:09:51Z",
  "updated_at": "2018-03-02T13:55:15Z",
  "closed_at": "2018-03-02T13:55:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have had this crash thrice in the past 24 hours.\r\n\r\n#### System information\r\n\r\nGeth version: `1.8.1`\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nSync should complete normally\r\n\r\n#### Actual behaviour\r\nSync crashes on Ropsten with the following error\r\n\r\n```\r\nINFO [02-22|01:47:01] Imported new chain segment               blocks=1   txs=15   mgas=3.324   elapsed=108.376ms mgasps=30.668  number=2699390 hash=7e3850â€¦be6e9d cache=65.40mB\r\npanic: gas pool pushed above uint64\r\n\r\n```#### Steps to reproduce the behaviour\r\nRun geth under testnet\r\n\r\n#### Backtrace\r\nThis is the error dump\r\n```\r\ngoroutine 555458 [running]:\r\ngithub.com/ethereum/go-ethereum/core.(*GasPool).AddGas(0xc4847e3ad0, 0x75da968, 0x0)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/core/gaspool.go:31 +0x6a\r\ngithub.com/ethereum/go-ethereum/core.(*StateTransition).refundGas(0xc44d2ff810)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/core/state_transition.go:270 +0x1e2\r\ngithub.com/ethereum/go-ethereum/core.(*StateTransition).TransitionDb(0xc44d2ff810, 0x1879a80, 0xc46d8253e0, 0xc4847e3ad0, 0xc44d2ff810, 0xc46d8253e0, 0xc46d8253e0, 0xf6ece0)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/core/state_transition.go:248 +0x58c\r\ngithub.com/ethereum/go-ethereum/core.ApplyMessage(0xc4583cd500, 0x1879a80, 0xc46d8253e0, 0xc4847e3ad0, 0xc4583cd500, 0xc447149a40, 0xc46fc566c0, 0x0, 0x0, 0x0, ...)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/core/state_transition.go:132 +0x5b\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).doCall(0xc4239b7130, 0x1874f80, 0xc46d825320, 0x0, 0x0, 0x0, 0xc472e30c80, 0x0, 0x0, 0x0, ...)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:669 +0x651\r\ngithub.com/ethereum/go-ethereum/internal/ethapi.(*PublicBlockChainAPI).Call(0xc4239b7130, 0x1874fc0, 0xc46ae86690, 0x0, 0x0, 0x0, 0xc472e30c80, 0x0, 0x0, 0x0, ...)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/internal/ethapi/api.go:679 +0xba\r\nreflect.Value.call(0xc423c86680, 0xc423e725f8, 0x13, 0xf979ab, 0x4, 0xc46d8252c0, 0x4, 0x4, 0x1446e2c616210437, 0xc46d8252c0, ...)\r\n\t/usr/lib/go-1.9/src/reflect/value.go:434 +0x905\r\nreflect.Value.Call(0xc423c86680, 0xc423e725f8, 0x13, 0xc46d8252c0, 0x4, 0x4, 0x2, 0x2, 0xc441be2d98)\r\n\t/usr/lib/go-1.9/src/reflect/value.go:302 +0xa4\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).handle(0xc423e9cfe0, 0x1874fc0, 0xc46ae86690, 0x1879ce0, 0xc44d5db400, 0xc46d825260, 0xc426448380, 0x0, 0x83ad23)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:311 +0x6ce\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).exec(0xc423e9cfe0, 0x1874fc0, 0xc46ae86690, 0x1879ce0, 0xc44d5db400, 0xc46d825260)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:333 +0x1ba\r\ngithub.com/ethereum/go-ethereum/rpc.(*Server).serveRequest.func2(0xc4244a6710, 0xc423e9cfe0, 0xc479d315c0, 0x1879ce0, 0xc44d5db400, 0xc43eb61c98, 0x1, 0x1, 0x0)\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:206 +0xad\r\ncreated by github.com/ethereum/go-ethereum/rpc.(*Server).serveRequest\r\n\t/build/ethereum-Fzpoys/ethereum-1.8.1+build12537+xenial/build/_workspace/src/github.com/ethereum/go-ethereum/rpc/server.go:201 +0x2ab\r\n```````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/367692249",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16160#issuecomment-367692249",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160",
    "id": 367692249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzY5MjI0OQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-22T14:11:37Z",
    "updated_at": "2018-02-22T14:11:37Z",
    "author_association": "MEMBER",
    "body": "Apparently you did a contract call via RPC with some insanely high gas allowance?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/367692249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/367695441",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16160#issuecomment-367695441",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16160",
    "id": 367695441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzY5NTQ0MQ==",
    "user": {
      "login": "codehakase",
      "id": 9336187,
      "node_id": "MDQ6VXNlcjkzMzYxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9336187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codehakase",
      "html_url": "https://github.com/codehakase",
      "followers_url": "https://api.github.com/users/codehakase/followers",
      "following_url": "https://api.github.com/users/codehakase/following{/other_user}",
      "gists_url": "https://api.github.com/users/codehakase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codehakase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codehakase/subscriptions",
      "organizations_url": "https://api.github.com/users/codehakase/orgs",
      "repos_url": "https://api.github.com/users/codehakase/repos",
      "events_url": "https://api.github.com/users/codehakase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codehakase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-22T14:22:22Z",
    "updated_at": "2018-02-22T14:22:22Z",
    "author_association": "NONE",
    "body": "This appears to be an RPC call that failed",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/367695441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

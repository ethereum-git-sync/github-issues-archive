{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17032",
  "id": 333902119,
  "node_id": "MDU6SXNzdWUzMzM5MDIxMTk=",
  "number": 17032,
  "title": "Development environment: Transaction stuck in pending status in txpool.",
  "user": {
    "login": "kartiksirigeri",
    "id": 6739357,
    "node_id": "MDQ6VXNlcjY3MzkzNTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6739357?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kartiksirigeri",
    "html_url": "https://github.com/kartiksirigeri",
    "followers_url": "https://api.github.com/users/kartiksirigeri/followers",
    "following_url": "https://api.github.com/users/kartiksirigeri/following{/other_user}",
    "gists_url": "https://api.github.com/users/kartiksirigeri/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kartiksirigeri/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kartiksirigeri/subscriptions",
    "organizations_url": "https://api.github.com/users/kartiksirigeri/orgs",
    "repos_url": "https://api.github.com/users/kartiksirigeri/repos",
    "events_url": "https://api.github.com/users/kartiksirigeri/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kartiksirigeri/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-06-20T02:26:56Z",
  "updated_at": "2019-08-02T02:48:52Z",
  "closed_at": "2019-08-02T02:48:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\"geth\":\t1.8.11\r\n\"truffle-hdwallet-provider\": \"0.0.5\",\r\n\"web3\": \"^1.0.0-beta.26\",\r\n\"OS: \"windows 7\"\r\n\r\n#### Expected behaviour\r\nGeth should throw error in case for any errors and should not put the transaction in pending state for ever.\r\n\r\n#### Actual behaviour\r\nTransactions are stuck in pending status if 'chainId' is mentioned in transaction object.\r\n\r\n#### Steps to reproduce the behaviour\r\nI have setup a single geth node for my development.\r\nGeth started as,\r\ngeth --datadir \"/C/dev/ethereum/geth/data/04\" --ipcpath geth04 --port 30304 --nodiscover --networkid 1234 --ws --wsport 8547 --wsapi=\"db,eth,net,web3,personal,account\" --wsorigins='*' --wsaddr=\"localhost\" --rpc --rpcport 8546 --rpccorsdomain \"*\" --rpcapi=\"db,eth,net,web3,personal,account\" --mine --minerthreads=1 --vmdebug --debug --verbosity 4 console 2> \"/C/dev/ethereum/geth/data/04/console.log\"\r\n\r\nCreate a tx object, signed it and submitted using the below code in my app,\r\nvar chainId = await web3I.eth.net.getId();\r\nvar gPrice  = 18000000000;\r\nvar txCount = await web3I.eth.getTransactionCount(<fromAddr>);\r\nvar tx = {};\r\ntx.from     = <fromAddr>;\r\ntx.to       = <toAddr>;\r\ntx.value    = web3.utils.toHex(value);\r\ntx.chainId  = web3.utils.toHex(chainId);\r\ntx.gasPrice = web3.utils.toHex(gPrice);\r\ntx.gas      = web3.utils.toHex(2000000);\r\ntx.nonce    = web3.utils.toHex(txCount);\r\nvar signedTrans = await web3.eth.signTransaction(tx);\r\nvar receipt     = await web3.eth.sendSignedTransaction(signedTrans.raw);\r\n\r\nThis put my transaction into pending state always and was never committed. \r\nOn removing tx.chainId the transaction got committed successfully.\r\nI have made sure the chainId is same as mentioned in genesis block and the same was passed as 'networkid' parameter to geth.\r\n\r\nI have tried to transfer from 'coinbase' account to account created by truffle-hd-wallet.\r\n\r\n#### Backtrace\r\nNFO [06-19|07:24:12|internal/ethapi/api.go:1192]        Submitted transaction                    fullhash=0x44d0fd4dac2e6ad78a7a839d1074b874784ccb1ec202d445691fe1dcc026674d recipient=0xEc4019E32b32Ca1274a35Dc0439E726C2e682539\r\nDEBUG[06-19|07:24:12|accounts/keystore/file_cache.go:87] FS scan times                            list=0s       set=0s       diff=0s\r\nINFO [06-19|07:24:12|miner/agent.go:104]                 Successfully sealed new block            number=4056 hash=a16da6â¦3e83f9\r\nDEBUG[06-19|07:24:12|core/state/statedb.go:626]          Trie cache stats after commit            misses=0 unloads=0\r\nINFO [06-19|07:24:12|miner/unconfirmed.go:104]           ð block reached canonical chain          number=4051 hash=e4ca14â¦cd46ad\r\nINFO [06-19|07:24:12|miner/unconfirmed.go:82]            ð¨ mined potential block                  number=4056 hash=a16da6â¦3e83f9\r\nDEBUG[06-19|07:24:12|core/tx_pool.go:413]                Reinjecting stale transactions           count=0\r\nINFO [06-19|07:24:12|miner/worker.go:486]                Commit new mining work                   number=4057 txs=0 uncles=0 elapsed=0s\r\nDEBUG[06-19|07:24:15|core/tx_pool.go:306]                Transaction pool status report           executable=1 queued=0 stales=0\r\nDEBUG[06-19|07:24:15|accounts/keystore/file_cache.go:87] FS scan times                            list=0s       set=0s       diff=0s\r\nINFO [06-19|07:24:18|miner/agent.go:104]                 Successfully sealed new block            number=4057 hash=b9f8ebâ¦fb0654\r\nDEBUG[06-19|07:24:18|core/state/statedb.go:626]          Trie cache stats after commit            misses=0 unloads=0\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/504268728",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17032#issuecomment-504268728",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17032",
    "id": 504268728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDI2ODcyOA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-06-21T02:48:17Z",
    "updated_at": "2019-06-21T02:48:17Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/504268728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

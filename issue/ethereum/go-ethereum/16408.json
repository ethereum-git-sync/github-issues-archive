{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16408",
  "id": 309580171,
  "node_id": "MDU6SXNzdWUzMDk1ODAxNzE=",
  "number": 16408,
  "title": "tracing:callTracer not showing nested trace info",
  "user": {
    "login": "bitrocks",
    "id": 7197352,
    "node_id": "MDQ6VXNlcjcxOTczNTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7197352?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bitrocks",
    "html_url": "https://github.com/bitrocks",
    "followers_url": "https://api.github.com/users/bitrocks/followers",
    "following_url": "https://api.github.com/users/bitrocks/following{/other_user}",
    "gists_url": "https://api.github.com/users/bitrocks/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bitrocks/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bitrocks/subscriptions",
    "organizations_url": "https://api.github.com/users/bitrocks/orgs",
    "repos_url": "https://api.github.com/users/bitrocks/repos",
    "events_url": "https://api.github.com/users/bitrocks/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bitrocks/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-03-29T00:39:34Z",
  "updated_at": "2019-09-15T01:42:09Z",
  "closed_at": "2019-09-15T01:42:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I read this wiki:<br>\r\n[Tracing:-Introduction](https://github.com/ethereum/go-ethereum/wiki/Tracing:-Introduction)\r\n\r\n```\r\nAlthough the raw opcode traces we've generated above have their use, this basic way of tracing is problematic in the real world. Having an individual log entry for every single opcode is too low level for most use cases, and will require developers to create additional tools to post-process the traces. Additionally, a full opcode trace can easily go into the hundreds of megabytes, making them very resource intensive to get out of the node and process externally.\r\n\r\nTo avoid all of the previously mentioned issues, go-ethereum supports running custom JavaScript tracers within the Ethereum node, which have full access to the EVM stack, memory and contract storage. This permits developers to only gather the data they need, and do any processing at the data. Please see the next section for our custom in-node tracers.\r\n```\r\n\r\nBut I failed to find the **next section for our custom in-node tracers**.\r\n\r\nI want something like [parity tracer](https://etherscan.io/vmtrace?txhash=0x1ad00328f8ed6563f966e5f7af8686b54afd7cf2c4a5ffd74ddecb173a28068a&type=parity). Will Geth support it?\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/377114930",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-377114930",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 377114930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzExNDkzMA==",
    "user": {
      "login": "bitrocks",
      "id": 7197352,
      "node_id": "MDQ6VXNlcjcxOTczNTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7197352?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitrocks",
      "html_url": "https://github.com/bitrocks",
      "followers_url": "https://api.github.com/users/bitrocks/followers",
      "following_url": "https://api.github.com/users/bitrocks/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitrocks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitrocks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitrocks/subscriptions",
      "organizations_url": "https://api.github.com/users/bitrocks/orgs",
      "repos_url": "https://api.github.com/users/bitrocks/repos",
      "events_url": "https://api.github.com/users/bitrocks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitrocks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-29T04:06:12Z",
    "updated_at": "2018-03-29T04:12:18Z",
    "author_association": "NONE",
    "body": "Update:<br>\r\nI finally found in [geth 1.8 iceberg](https://blog.ethereum.org/2018/02/14/geth-1-8-iceberg%C2%B9/), showing the use of callTracer. <br>\r\nWhen performing `debug.traceTransaction(txid,{tracer:\"callTracer\"})`, it returns nice output:<br>\r\n![](http://7xih5d.com1.z0.glb.clouddn.com/ethereum/evm/part-reverted-internal-call2.jpg)\r\nBut it doesn't show deeper/nested call trace, `calls:[{...}]`<br>\r\nCan anyone have idea about it?\r\n\r\n@karalabe ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/377114930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409761237",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-409761237",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 409761237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTc2MTIzNw==",
    "user": {
      "login": "Eric-Showers",
      "id": 24963520,
      "node_id": "MDQ6VXNlcjI0OTYzNTIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24963520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eric-Showers",
      "html_url": "https://github.com/Eric-Showers",
      "followers_url": "https://api.github.com/users/Eric-Showers/followers",
      "following_url": "https://api.github.com/users/Eric-Showers/following{/other_user}",
      "gists_url": "https://api.github.com/users/Eric-Showers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Eric-Showers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Eric-Showers/subscriptions",
      "organizations_url": "https://api.github.com/users/Eric-Showers/orgs",
      "repos_url": "https://api.github.com/users/Eric-Showers/repos",
      "events_url": "https://api.github.com/users/Eric-Showers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Eric-Showers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-01T23:51:02Z",
    "updated_at": "2018-08-01T23:51:02Z",
    "author_association": "NONE",
    "body": "I have run into this issue as well. Have you found a solution yet? I will read through the _callTracer_ source code tomorrow to see what I can find.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409761237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409763445",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-409763445",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 409763445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTc2MzQ0NQ==",
    "user": {
      "login": "Eric-Showers",
      "id": 24963520,
      "node_id": "MDQ6VXNlcjI0OTYzNTIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24963520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eric-Showers",
      "html_url": "https://github.com/Eric-Showers",
      "followers_url": "https://api.github.com/users/Eric-Showers/followers",
      "following_url": "https://api.github.com/users/Eric-Showers/following{/other_user}",
      "gists_url": "https://api.github.com/users/Eric-Showers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Eric-Showers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Eric-Showers/subscriptions",
      "organizations_url": "https://api.github.com/users/Eric-Showers/orgs",
      "repos_url": "https://api.github.com/users/Eric-Showers/repos",
      "events_url": "https://api.github.com/users/Eric-Showers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Eric-Showers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T00:04:14Z",
    "updated_at": "2018-08-02T00:04:14Z",
    "author_association": "NONE",
    "body": "Here's a good example [transaction](https://etherscan.io/tx/0x298d439128e4becf7b47d639fb213002de988f0ea029a047918e7309239efe9a) \r\n\r\nIf you look at the [parity raw trace](https://etherscan.io/vmtrace?txhash=0x298d439128e4becf7b47d639fb213002de988f0ea029a047918e7309239efe9a&type=parity#raw) you can see that it labels each action with `traceAddress` such that the first `call` action is given\r\n\r\n`traceAddress: [0]` \r\n\r\nand subsequent subtraces are labeled\r\n\r\n`traceAddress: [0, 0]` and `traceAddress: [0, 1]`\r\n\r\nGeth's callTracer however produces the following trace where the subtraces are missing:\r\n\r\n>{\r\n  calls: [{\r\n      calls: [{...}, {...}],\r\n      from: \"0xd48b633045af65ff636f3c6edd744748351e020d\",\r\n      gas: \"0xc8a4\",\r\n      gasUsed: \"0x418d\",\r\n      input: \"0xf2c7d331...\",\r\n      output: \"0x\",\r\n      to: \"0x5a1dbff1a772bc35f53c77509b4dc1624c65e6ec\",\r\n      type: \"CALL\",\r\n      value: \"0x470de4df820000\"\r\n  }],\r\n  from: \"0x8bcc49d93007629991f278120bf79ac0f8a49de8\",\r\n  gas: \"0x2a6ce\",\r\n  gasUsed: \"0x225e6\",\r\n  input: \"0x724fcd4c...\",\r\n  output: \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  time: \"289.871973ms\",\r\n  to: \"0xd48b633045af65ff636f3c6edd744748351e020d\",\r\n  type: \"CALL\",\r\n  value: \"0x1bc16d674ec80000\"\r\n}",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409763445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409829378",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-409829378",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 409829378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTgyOTM3OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T07:12:00Z",
    "updated_at": "2018-08-02T07:12:00Z",
    "author_association": "MEMBER",
    "body": "The JavaScript console truncates fields when they are deeper than 2-3 nesting. If you execute the trace from outside, you'll get a full correct dump. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/409829378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/410094660",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-410094660",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 410094660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDA5NDY2MA==",
    "user": {
      "login": "Eric-Showers",
      "id": 24963520,
      "node_id": "MDQ6VXNlcjI0OTYzNTIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24963520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eric-Showers",
      "html_url": "https://github.com/Eric-Showers",
      "followers_url": "https://api.github.com/users/Eric-Showers/followers",
      "following_url": "https://api.github.com/users/Eric-Showers/following{/other_user}",
      "gists_url": "https://api.github.com/users/Eric-Showers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Eric-Showers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Eric-Showers/subscriptions",
      "organizations_url": "https://api.github.com/users/Eric-Showers/orgs",
      "repos_url": "https://api.github.com/users/Eric-Showers/repos",
      "events_url": "https://api.github.com/users/Eric-Showers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Eric-Showers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T23:03:55Z",
    "updated_at": "2018-08-02T23:03:55Z",
    "author_association": "NONE",
    "body": "Thanks Peter! I had not tried tracing from the RPC interface before. This solves the issue for me 👍 \r\n\r\nIt would be helpful to have some more documentation on Geth's tracers to explain subtleties like this (I have only found the [tracing: intro](https://github.com/ethereum/go-ethereum/wiki/Tracing:-Introduction) doc). I am happy to write it out myself but I am not available to do so at the moment. \r\n\r\nIf you think that would be helpful then let me know here and I'll work on it in a few weeks from now.\r\n\r\n@hupengbuaa it's been a while, can we close this issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/410094660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/517964577",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16408#issuecomment-517964577",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16408",
    "id": 517964577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzk2NDU3Nw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-08-04T00:43:33Z",
    "updated_at": "2019-08-04T00:43:33Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/517964577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

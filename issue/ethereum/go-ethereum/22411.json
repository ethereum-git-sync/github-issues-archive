{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22411",
  "id": 819908622,
  "node_id": "MDU6SXNzdWU4MTk5MDg2MjI=",
  "number": 22411,
  "title": "BAD BLOCK error nonce too high",
  "user": {
    "login": "adu-web3",
    "id": 25078682,
    "node_id": "MDQ6VXNlcjI1MDc4Njgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/25078682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adu-web3",
    "html_url": "https://github.com/adu-web3",
    "followers_url": "https://api.github.com/users/adu-web3/followers",
    "following_url": "https://api.github.com/users/adu-web3/following{/other_user}",
    "gists_url": "https://api.github.com/users/adu-web3/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adu-web3/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adu-web3/subscriptions",
    "organizations_url": "https://api.github.com/users/adu-web3/orgs",
    "repos_url": "https://api.github.com/users/adu-web3/repos",
    "events_url": "https://api.github.com/users/adu-web3/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adu-web3/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-03-02T11:04:43Z",
  "updated_at": "2021-03-10T10:15:23Z",
  "closed_at": "2021-03-10T10:15:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth 1.9.25`\r\nOS & Version: ubuntu 18 \r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nnormally fast mode synchronization\r\n\r\n#### Actual behaviour\r\nsome errors like \"BAD BLOCK\" occured\r\n\r\n#### Steps to reproduce the behaviour\r\nentrypoint: [\"geth\",\"--ipcdisable\",\"--syncmode\",\"fast\",\"--cache\",\"8100\",\"--nat\",\"none\",\"--datadir\",\"/root\",\"--port\",\"38336\",\"--ws\",\"--wsaddr\",\"0.0.0.0\",\"--wsport\",\"8036\",\"--wsorigins\",\"*\",\"--rpc\",\"--rpcport\",\"8136\",\"--rpcaddr\",\"0.0.0.0\",\"--rpccorsdomain\",\"*\",\"--rpcvhosts\",\"*\",\"--verbosity\",\"3\"]\r\n\r\n#### Backtrace\r\n\r\n````\r\ngeth_1                | Error: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\r\ngeth_1                | ##############################\r\ngeth_1                |\r\ngeth_1                | WARN [03-02|08:29:16.514] Synchronisation failed, dropping peer    peer=d82e59ab16603659 err=\"retrieved hash chain is invalid: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\"\r\ngeth_1                | WARN [03-02|08:29:17.764] Synchronisation failed, dropping peer    peer=0fcfc7e87fb6784e err=\"action from bad peer ignored: returned headers 192 != requested 1\"\r\ngeth_1                | INFO [03-02|08:29:20.584] Downloader queue stats                   receiptTasks=0 blockTasks=363   itemSize=39.68KiB throttle=1652\r\ngeth_1                | ERROR[03-02|08:29:20.591]\r\ngeth_1                | ########## BAD BLOCK #########\r\ngeth_1                | Chain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, YOLO v2: <nil>, Engine: ethash}\r\ngeth_1                |\r\ngeth_1                | Number: 11805357\r\ngeth_1                | Hash: 0x0c4b66f6995728a524925c7b4dd2a4fa135f603d6a9c4c5c444837276e817d73\r\ngeth_1                |\r\ngeth_1                |\r\ngeth_1                | Error: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\r\ngeth_1                | ##############################\r\ngeth_1                |\r\ngeth_1                | WARN [03-02|08:29:20.591] Synchronisation failed, dropping peer    peer=918abd23d5ed85b1 err=\"retrieved hash chain is invalid: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\"\r\ngeth_1                | WARN [03-02|08:29:26.678] Synchronisation failed, dropping peer    peer=13982a9843c04021 err=timeout\r\ngeth_1                | ERROR[03-02|08:29:42.035]\r\ngeth_1                | ########## BAD BLOCK #########\r\ngeth_1                | Chain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, YOLO v2: <nil>, Engine: ethash}\r\ngeth_1                |\r\ngeth_1                | Number: 11805357\r\ngeth_1                | Hash: 0x0c4b66f6995728a524925c7b4dd2a4fa135f603d6a9c4c5c444837276e817d73\r\ngeth_1                |\r\ngeth_1                |\r\ngeth_1                | Error: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\r\ngeth_1                | ##############################\r\ngeth_1                |\r\ngeth_1                | WARN [03-02|08:29:42.035] Synchronisation failed, dropping peer    peer=11650e4339a669bb err=\"retrieved hash chain is invalid: could not apply tx 0 [0xdf14f7539574729fc7b00e7c3c35cc4adda83a8c4234d847aac10044962764d0]: nonce too high: address 0x5D9fE07813a260857Cf60639daC710EBb9531a20, tx: 74935 state: 0\"\r\ngeth_1                | INFO [03-02|08:47:07.572] Writing clean trie cache to disk         path=/root/geth/triecache threads=1\r\ngeth_1                | WARN [03-02|08:47:07.572] Failed to rotate local tx journal        err=\"open /root/geth/transactions.rlp.new: too many open files in system\"\r\ngeth_1                | ERROR[03-02|08:47:07.572] Failed to persist clean trie cache       error=\"cannot save cache data to temporary dir \\\"/root/geth/fastcache.tmp.66\r\n````\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/788919783",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22411#issuecomment-788919783",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411",
    "id": 788919783,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODkxOTc4Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-02T13:45:48Z",
    "updated_at": "2021-03-02T13:45:48Z",
    "author_association": "MEMBER",
    "body": "Seems your system ran out of file descriptors:\r\n\r\n```\r\ngeth_1                | WARN [03-02|08:47:07.572] Failed to rotate local tx journal        err=\"open /root/geth/transactions.rlp.new: too many open files in system\"\r\ngeth_1                | ERROR[03-02|08:47:07.572] Failed to persist clean trie cache       error=\"cannot save cache data to temporary dir \\\"/root/geth/fastcache.tmp.66\r\n```\r\n\r\nIf Geth cannot open files, it won't be able to read from the database and will start producing weird errors.\r\n\r\nThe issue is curious because Geth will only assign half of the permitted FDs to the database and leave half for everything else. In this case your OS is either refusing to honor it's fdlimts (are you using some strance cgroup limits?) or something is consuming an insane number of FDs (perhaps you have a huge number of network connections on the RPC)?\r\n\r\nBtw, please never open your RPC to the public internet (`0.0.0.0`) as bots are actively trying to connect to nodes and abuse them.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/788919783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/789373178",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22411#issuecomment-789373178",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411",
    "id": 789373178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4OTM3MzE3OA==",
    "user": {
      "login": "adu-web3",
      "id": 25078682,
      "node_id": "MDQ6VXNlcjI1MDc4Njgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25078682?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adu-web3",
      "html_url": "https://github.com/adu-web3",
      "followers_url": "https://api.github.com/users/adu-web3/followers",
      "following_url": "https://api.github.com/users/adu-web3/following{/other_user}",
      "gists_url": "https://api.github.com/users/adu-web3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adu-web3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adu-web3/subscriptions",
      "organizations_url": "https://api.github.com/users/adu-web3/orgs",
      "repos_url": "https://api.github.com/users/adu-web3/repos",
      "events_url": "https://api.github.com/users/adu-web3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adu-web3/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-03T02:16:14Z",
    "updated_at": "2021-03-03T02:40:06Z",
    "author_association": "NONE",
    "body": "thanks a lot, I will change rpc configuration right now.\r\nBesides , I'm using normal docker container to start geth with the above command\r\nThe  machine is is a private network so I think maybe \"\"--rpcaddr 0.0.0.0\" is ok？ ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/789373178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/790481597",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22411#issuecomment-790481597",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411",
    "id": 790481597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDQ4MTU5Nw==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T09:45:46Z",
    "updated_at": "2021-03-04T09:45:46Z",
    "author_association": "MEMBER",
    "body": "What do you mean with \"The machine is is a private network\"?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/790481597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/795198487",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22411#issuecomment-795198487",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22411",
    "id": 795198487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTE5ODQ4Nw==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-10T10:15:23Z",
    "updated_at": "2021-03-10T10:15:23Z",
    "author_association": "MEMBER",
    "body": "Issue is solved, will close now. Please use `--http.addr 127.0.0.1` instead ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/795198487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

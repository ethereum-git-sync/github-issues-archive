{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17162",
  "id": 340442849,
  "node_id": "MDU6SXNzdWUzNDA0NDI4NDk=",
  "number": 17162,
  "title": "geth node (mainnet) crashes every few days",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-07-11T23:46:05Z",
  "updated_at": "2018-08-13T02:26:43Z",
  "closed_at": "2018-08-13T02:26:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\n#### Geth version: \r\n```\r\nGeth\r\nVersion: 1.8.3-stable\r\nGit Commit: 329ac18ef617d0238f71637bffe78f028b0f13f7\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.10\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/home/travis/.gimme/versions/go1.10.linux.amd6\r\n```\r\n\r\n#### OS & Version: \r\n```\r\nUbuntu Server 16.04\r\n```\r\n\r\n#### System Specs : \r\n```\r\nEC2 Instance t2.medium - 2vcpu , 4 GB RAM, 4 GB SWAP , 300GB+ free on the /store volume consisting of geth data \r\n```\r\n\r\n#### Startup Parameters : \r\n```\r\nscreen -dmS \"GETH_MAINNET\" /store/geth-linux-amd64-1.8.3-329ac18e/geth --datadir=/store/mainnet --rpcapi \"personal,web3,eth,net,db,debug\" --rpc --rpcaddr \"0.0.0.0\" --rpccorsdomain \"10.10.0.0/16,172.21.0.0/24\"\r\n```\r\n\r\n#### Actual behaviour\r\nGeth crashes every few days when connected to mainnet. When connected to ropsten it runs fine. No sync issues on mainnet, once the node sync it mostly stays synced but every 4-6 days it crashes.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nLeave geth running without mining connected to mainnet. \r\n\r\nAnyone else facing this issue with geth 1.8.3 and did any version upgrade help ?\r\n\r\nWill append the logs shortly as i have just reran geth with --verbosity 4 and console 2 >>logfile.txt but just checking if someone with similar setup ran into this issue.\r\n\r\nThanks",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404427885",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-404427885",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 404427885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDQyNzg4NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T08:10:55Z",
    "updated_at": "2018-07-12T08:10:55Z",
    "author_association": "MEMBER",
    "body": "Please try running Gth 1.8.12. There have been many many issues fixed since 1.8.3. I can't say that any of those will fix the issue you are facing, but it doesn't make much sense to debug a release after which we've pushed out 9 more releases.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404427885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404676214",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-404676214",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 404676214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY3NjIxNA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T22:57:11Z",
    "updated_at": "2018-07-12T22:57:11Z",
    "author_association": "NONE",
    "body": "Thanks Peter , will do. \r\n\r\nI have tried upgrading to 1.8.11 recently before the 1.8.12 release but was getting a whole bunch of new errors intermittently  ('RemoteDisconnected('Remote end closed connection without response',)) that i wasnt getting with 1.8.3 henced rolled back to it.\r\n\r\nIm happy to give 1.8.12 a try and also provide the logs but in the meantime please find attached logs from 1.8.3 from the last crash. it would be great if someone could provide their thoughts on this and a possible reason why it has been terminating would be great.\r\n\r\n[gethlogs.zip](https://github.com/ethereum/go-ethereum/files/2190575/gethlogs.zip)\r\n\r\nPossible cause logs.\r\n\r\ntoor@TR:~$ grep -B10 -A10 -i \"fatal error\" gethlogs.txt \r\nDEBUG[07-12|17:26:43] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:26:51] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:27:31] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:28:16] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:29:01] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:29:21] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:30:06] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:30:08] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:30:32] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nDEBUG[07-12|17:31:48] Recalculated downloader QoS values       rtt=2s            confidence=1.000 ttl=6.000006s\r\nfatal error: runtime: out of memory\r\n\r\nruntime stack:\r\nruntime.throw(0xf10595, 0x16)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/panic.go:619 +0x81\r\nruntime.sysMap(0xc603940000, 0x100000, 0x0, 0x1af8f58)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/mem_linux.go:216 +0x20a\r\nruntime.(*mheap).sysAlloc(0x1adf560, 0x100000, 0x7fe67ca950a0)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/malloc.go:470 +0xd4\r\nruntime.(*mheap).grow(0x1adf560, 0x1, 0x0)\r\n\t/home/travis/.gimme/versions/go1.10.linux.amd64/src/runtime/mheap.go:907 +0x60\r\n\r\nAlso where is this GOROOT specifiable in geth , i dont have any /home/travis directory on my system , this seems to come from the 1.8.3 version as 1.8.7 version automatically defaults to GOROOT under /usr/lib/go-1.10\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404676214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404677501",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-404677501",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 404677501,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY3NzUwMQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T23:04:03Z",
    "updated_at": "2018-07-12T23:04:03Z",
    "author_association": "NONE",
    "body": "also is there a better/alternate way to log geth output than ./geth console 2>> logs.txt , this mandates geth console be run and also creates issues running it through screen where you might want to run geth and be able to switch to it anytime. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/404677501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/405167759",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-405167759",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 405167759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTE2Nzc1OQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-16T07:31:16Z",
    "updated_at": "2018-07-16T07:31:16Z",
    "author_association": "MEMBER",
    "body": "> I have tried upgrading to 1.8.11 recently before the 1.8.12 release but was getting a whole bunch of new errors intermittently ('RemoteDisconnected('Remote end closed connection without response',)) that i wasnt getting with 1.8.3 henced rolled back to it.\r\n\r\nThere are many bad nodes in the network, just don't run with that high verbosity, these are usual messages. Just run without specifying `--verbosity` explicitly. Do you see any errors like that?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/405167759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/406927700",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-406927700",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 406927700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjkyNzcwMA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T03:16:05Z",
    "updated_at": "2018-07-23T03:16:05Z",
    "author_association": "NONE",
    "body": "Okay issue persists with 1.8.12 as well. Attached Logs. Have run it without specifying verbosity explicitly.\r\n\r\nThis is the part captured in the log where it crashes.\r\n\r\ngrep -A10 -B10 -i \"fatal error\" gethlogs.0\r\nWARN [07-20|14:39:47.117] Synchronisation failed, dropping peer    peer=00b257ddd0883b23 err=\"no peers available or all tried for download\"\r\nWARN [07-20|14:40:27.028] Synchronisation failed, dropping peer    peer=1c0b30af8b9497da err=timeout\r\nWARN [07-20|14:40:38.187] Synchronisation failed, dropping peer    peer=15167044ca2e6d71 err=timeout\r\nWARN [07-20|14:40:56.749] Synchronisation failed, dropping peer    peer=1c0b30af8b9497da err=timeout\r\nWARN [07-20|14:41:27.762] Synchronisation failed, retrying         err=\"block body download canceled (requested)\"\r\nINFO [07-20|14:43:15.994] Imported new chain segment               blocks=1  txs=273  mgas=7.997   elapsed=1m11.335s  mgasps=0.112  number=5996012 hash=d96c6e…eb2cdd cache=267.65mB\r\nINFO [07-20|14:43:59.663] Imported new chain segment               blocks=1  txs=172  mgas=7.980   elapsed=43.668s    mgasps=0.183  number=5996013 hash=67ee0c…d8346c cache=268.19mB\r\nINFO [07-20|15:02:19.658] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [07-20|16:15:56.450] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [07-20|17:01:19.087] Regenerated local transaction journal    transactions=0 accounts=0\r\nfatal error: runtime: out of memory\r\n\r\nruntime stack:\r\nruntime.throw(0xf4bfcb, 0x16)\r\n        /home/travis/.gimme/versions/go1.10.3.linux.amd64/src/runtime/panic.go:616 +0x81\r\nruntime.sysMap(0xc5f6ef0000, 0x1100000, 0xc420134d00, 0x1b52758)\r\n        /home/travis/.gimme/versions/go1.10.3.linux.amd64/src/runtime/mem_linux.go:216 +0x20a\r\nruntime.(*mheap).sysAlloc(0x1b38e00, 0x1100000, 0xc41fffd33f)\r\n        /home/travis/.gimme/versions/go1.10.3.linux.amd64/src/runtime/malloc.go:470 +0xd4\r\nruntime.(*mheap).grow(0x1b38e00, 0x879, 0x0)\r\n        /home/travis/.gimme/versions/go1.10.3.linux.amd64/src/runtime/mheap.go:907 +0x60\r\n\r\nAlso attached the logs. \r\n\r\n[gethlogs.zip](https://github.com/ethereum/go-ethereum/files/2217821/gethlogs.zip)\r\n\r\nWhat do you suggest ?\r\n\r\nThanks\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/406927700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412393152",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17162#issuecomment-412393152",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17162",
    "id": 412393152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjM5MzE1Mg==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-13T02:26:30Z",
    "updated_at": "2018-08-13T02:26:30Z",
    "author_association": "NONE",
    "body": "after increasing RAM to 8GB , swap to 16GB this issue does not happen any more. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/412393152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14361",
  "id": 223202493,
  "node_id": "MDU6SXNzdWUyMjMyMDI0OTM=",
  "number": 14361,
  "title": "JSON RPC sendTransaction returns transactionHash but tx not broadcasted",
  "user": {
    "login": "vogelito",
    "id": 1325863,
    "node_id": "MDQ6VXNlcjEzMjU4NjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vogelito",
    "html_url": "https://github.com/vogelito",
    "followers_url": "https://api.github.com/users/vogelito/followers",
    "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
    "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
    "organizations_url": "https://api.github.com/users/vogelito/orgs",
    "repos_url": "https://api.github.com/users/vogelito/repos",
    "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vogelito/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2017-04-20T21:14:25Z",
  "updated_at": "2018-03-23T18:56:18Z",
  "closed_at": "2017-04-25T08:47:41Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version:\r\n```\r\nGeth\r\nVersion: 1.6.0-stable\r\nGit Commit: facc47cb5cec97b22c815a0a6118816a98f39876\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.7\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/local/go\r\n```\r\nOS & Version: `Ubuntu 14.04.5 LTS`\r\nCommit hash : NA\r\n\r\n#### Expected behaviour\r\nTransaction should be broadcasted if `sendTransaction` returns a transaction hash.\r\n\r\n#### Actual behaviour\r\n`sendTransaction` returns a transaction hash but transaction is not broadcasted or at least it doesn't end up in the eth blockchain in the future.\r\n\r\n#### Steps to reproduce the behaviour\r\nWe have a hard time reproducing this behavior but open to try ideas to help debug. We have a single-threaded process that sends many transactions in a while loop. Through this method we send roughly 50 transactions daily but the issue seems to only happen once every 2 weeks.\r\n\r\nThis is the pseudo code:\r\n```\r\nfor (txData in transactions) {\r\n    if (!personal_unlockAccount(account, password, 10)) {\r\n        // alert\r\n        return;\r\n    }\r\n    transactionId = sendTransaction(txData);\r\n    if (!transactionId) {\r\n        // alert\r\n        continue;\r\n    }\r\n    // Mark the tx as successful and record transactionId in DB\r\n}\r\n```\r\n\r\nWhat we see is transactionIds in the database that are not in the blockchain. Here's such a transaction hash returned by geth connected on mainnet:\r\n`0x6aa45ddf908211ebdba65489815ec423ca26648ee5af94d89075866d4da2289f`\r\n\r\nWe can confirm that geth didn't restart during that time, although suspect that the problem might arise when the sending account is low on funds.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296160617",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296160617",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296160617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjE2MDYxNw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-21T10:53:27Z",
    "updated_at": "2017-04-21T10:53:27Z",
    "author_association": "MEMBER",
    "body": "Two questions\r\n\r\n1. The account `account` - is that also used by any other caller making transactions, in any separate processes, by any chance? \r\n2. Just to confirm; when the error occurs, the `alert` does not trigger at all ?\r\n\r\nSo, hypothesing a bit here.. \r\n\r\nThis is a fully sequential process, so can't be explained by race conditions. Off the top of my head, I could imagine the following scenario: \r\n\r\n* Transactions 1.. 20 get added in `sendTransaction`.  Added to `pending`. \r\n* A new block arrives.  \r\n* Transactions 20.. 40 get added in `sendTransaction`.  Added to `pending`. \r\n* A new block arrives, with higher `gasPrice` than the earlier transactions. Transactions `20..40` get dropped, due to too-low `gasPrice`.\r\n* Transactions 40..60 get added (with better gasPrices). \r\n\r\nIf it does _not_ have anything to do with incoming blocks, it should be easy to replicate with an instance on a private net without any peers, by submitting transactions in a loop and then counting `pending`. I'll test it. \r\n \r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296160617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296187252",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296187252",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296187252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjE4NzI1Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-21T13:14:55Z",
    "updated_at": "2017-04-21T13:15:05Z",
    "author_association": "MEMBER",
    "body": "I ran the following script on a geth-instance: \r\n\r\n```javascript\r\nids = [];\r\nfunction getTx(){\r\n\treturn { from : eth.accounts[0], \r\n\t\tto:\"0x0000000000000000000000000000000000001337\", value:1000};\r\n}\r\nfunction doTest()\r\n{\r\n\tfor(var i =0; i < 10000; i++){\r\n\t\tpersonal.unlockAccount(eth.accounts[0],\"test\",10);\r\n\t\tids.push(eth.sendTransaction(getTx()))\r\n\t\tif( i % 10 == 0){\r\n\t\t\tconsole.log(\"Pending: \"+eth.pendingTransactions.length)\r\n\t\t\tconsole.log(\"Sent: \"+ids.length)\r\n\t\t}\r\n\t}\t\r\n}\r\n```\r\nStill going after 3500+ transactions added, no errors. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296187252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296266974",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296266974",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296266974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjI2Njk3NA==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-21T18:24:48Z",
    "updated_at": "2017-04-21T18:24:48Z",
    "author_association": "NONE",
    "body": "Thanks for your reply.\r\n\r\n1. I confirm that the account `account` is not used anywhere else.\r\n2. Correct, the `alert` doesn't trigger at all.\r\n\r\nYour hypothesis got me thinking and realize there's a part of the code that might be at fault here, so I'll extend my pseudo code a bit:\r\n\r\n```\r\nbalance = eth_getBalance(account, \"latest\");\r\ntotal = 0;\r\nfor (txData in transactions) {\r\n    if (total + txData.value > balance) {\r\n        // alert that account balance is low\r\n        continue;\r\n    }\r\n\r\n    total += txData.value;\r\n\r\n    tx = { from: account,\r\n            destination: txData.toAccount,\r\n            value: txData.value,\r\n            gas: dex2hex(21000),\r\n            gasPrice: eth_gasPrice(),\r\n            value: txData.value\r\n        }\r\n    \r\n    if (!personal_unlockAccount(account, password, 10)) {\r\n        // alert unable to unlock account\r\n        return;\r\n    }\r\n    transactionId = sendTransaction(tx);\r\n    if (!transactionId) {\r\n        // alert that some error in sendTransaction happened\r\n        continue;\r\n    }\r\n    // Mark the tx as successful and record transactionId in DB\r\n}\r\n```\r\n\r\nI revised the time of the last 3 times we've seen this and can confirm that at all those times, the balance in the account was low and could in fact find *some* tx's not being relayed due to the \"low balance\" alert.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296266974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296588425",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296588425",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296588425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjU4ODQyNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-24T09:09:51Z",
    "updated_at": "2017-04-24T09:09:51Z",
    "author_association": "MEMBER",
    "body": "I can see another potential error here. \r\n\r\n* You're using `total` as a javascript number. This has quite bad precision. \r\n\r\n```javascript\r\n>  x = eth.getBalance(\"0x2a50613a76a4c2c58d052d5ebf3b03ed3227eae9\")\r\n1e+24\r\n> a = x - 1000\r\n1e+24\r\n> x.sub(1000)\r\n9.99999999999999999999e+23\r\n> typeof(a)\r\n\"number\"\r\n> typeof(x)\r\n\"object\"\r\n```\r\n\r\nSo if you're keeping a record of the `balance` on the side, you should make sure to use bignums, not number. \r\n\r\n> I revised the time of the last 3 times we've seen this and can confirm that at all those times, the balance in the account was low and could in fact find some tx's not being relayed due to the \"low balance\" alert.\r\n\r\nI'm not sure I follow.. So you're saying that the missing tx:s can be explained as not submitted at all? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296588425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296729424",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296729424",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296729424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjcyOTQyNA==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-24T16:26:45Z",
    "updated_at": "2017-04-24T16:26:45Z",
    "author_association": "NONE",
    "body": "> You're using total as a javascript number\r\n\r\nOh, no, sorry, what I posted is pseudocode. We do use bignums on our side and you can assume that all mathematical operations are done on immutable, arbitrary-precision signed decimal numbers.\r\n\r\nRegarding the lack of clarity in my last reply, what I meant is that I have *some* evidence that would suggest that this problem happens when the balance of `account` is low. E.g. that it might be the case that if the balance is low, `sendTransaction` returns a tx hash but that tx is never relayed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296729424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296732854",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296732854",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296732854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjczMjg1NA==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-24T16:34:36Z",
    "updated_at": "2017-04-24T16:34:36Z",
    "author_association": "NONE",
    "body": "So let's say this:\r\nAccount balance is 10\r\nA tx cost 0.001\r\nI'm trying to send 10 transactions, each of value 1\r\n\r\nI don't think my code takes into consideration the cost of sending a transaction. Could it be the case that:\r\n1. `sendTransaction` is called for 9 tx's\r\n2. Those 9 transactions are relayed and get into a block, but my geth doesn't know about it\r\n2. `sendTransaction` is called one last time for the last tx, returning a hash\r\n3. Before it relays the last tx, it realizes it's invalid and it doesn't even broadcast it\r\n\r\nOr something like that? Sorry, i don't know the insides of geth so I'm completely speculating",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296732854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296797893",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296797893",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296797893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Njc5Nzg5Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-24T19:30:17Z",
    "updated_at": "2017-04-24T19:30:17Z",
    "author_association": "MEMBER",
    "body": "Hm.. \r\n\r\nSending with too low balance should, if the node detects it, result in no hash:\r\n\r\n```\r\n> eth.sendTransaction(getTx2(), eth.accounts[0])\r\nError: Insufficient funds for gas * price + value\r\n    at web3.js:3119:20\r\n    at web3.js:6023:15\r\n    at web3.js:4995:36\r\n    at <anonymous>:1:1\r\n```\r\n\r\nHowever: \r\n\r\n```\r\n> web3.fromWei(eth.getBalance(eth.accounts[0]),\"ether\")\r\n1000000\r\n> web3.fromWei(getTx3().value,\"ether\")\r\n\"800000\"\r\n> eth.sendTransaction(getTx3())\r\n\"0xe6dea67ad5c6e6cf101b66b9cf95867a38e468eb3e8e537cf06373092534e25e\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x7143fef614420a8336b541e18061da71c76626d87f522d2fd0652d2e03e8db3a\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x958a603a12837fd12c9dd84d67d3fca918fed7de4227a2f30ffe77952344d2ff\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x6d19aaa3326e4c8aa2ea9f48448ab28e88c69b20aee52c4bfde30eb5d7528ed5\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x11eb5bdd7802dd34bf8f88ebfc936095b8b09d1beeb681af70888118391da241\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x7ade365c9bc9b148b7690ef5c08818aa02468766f27c82f72ef2c1db831aa3d0\"\r\n> eth.sendTransaction(getTx3())\r\n\"0xa87f1104f7b58c894ffba3f3e6fbeda6034b54534f4bb906a3b0adaf924569cd\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x6ff02e1e438e046fdf64fd3f0105dfe831c91bc5fbd547e06b7c3eb1e3493452\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x20d31533b3b4ca7168e6003959a899924d08cd424e10938525eb566ba03b6e3b\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x7a6ebc5c5f6976b2034ce093f7b35809b8335ec3c921b744f6b8cbb25b4b7347\"\r\n> eth.sendTransaction(getTx3())\r\n\"0x808bb7cbb74dc21e3cba4c3fa4d495c5d4a68ffd326d3d8980b2cb8aba80b23e\"\r\n> eth.sendTransaction(getTx3())\r\n\"0xe67f663996224874fc1c6f527fe46d7a9fa18f7ad802772e369fc9d6533e7502\"\r\n> eth.sendTransaction(getTx3())\r\n\"0xf6b74ef2922e9c1ac4c727b0ac38c1be03412b7e51049cbc1a48019d67cf8c97\"\r\n```\r\n\r\nAbove, I have the balance `1000`, and send as many `800`-ether transactions as I want. These wind up in `pending`, and are broadcast on the network. As soon as the first of these is included into a block, however (and the local node becomes aware of it), the remaining ones will be flagged as out-of-funds, and dropped. \r\n\r\nSo what I think is happening is: \r\n\r\n* The transactions are accepted, even though the sum total of them would exceed the balance\r\n* Most transactions are included, but some dropped due to out-of-funds, once a few of them (the bulk?) become accepted. \r\n* And yes, if you only count `value` and not total cost (including gas), then that might be why your local count differs from the actual `balance`.\r\nYou could do something like this: \r\n```\r\nvar tx = eth.getTransaction(\"0xf6b74ef2922e9c1ac4c727b0ac38c1be03412b7e51049cbc1a48019d67cf8c97\")\r\n> var totalValue = tx.value.add(tx.gasPrice*tx.gas)\r\n8.000000019620018e+23\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296797893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296829305",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296829305",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296829305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjgyOTMwNQ==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-24T21:36:08Z",
    "updated_at": "2017-04-24T21:36:08Z",
    "author_association": "NONE",
    "body": "Thanks, that must be it. We just added something to take into account transaction costs to our code, which should go into production in the next few days.\r\n\r\nI will let you know if we see the problem again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296829305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296962716",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-296962716",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 296962716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Njk2MjcxNg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-25T08:47:41Z",
    "updated_at": "2017-04-25T08:47:41Z",
    "author_association": "MEMBER",
    "body": "Great, I'll close this for now, please reopen if you find evidence of anything else going on.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/296962716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/337856971",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-337856971",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 337856971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzg1Njk3MQ==",
    "user": {
      "login": "CockyCat",
      "id": 4004100,
      "node_id": "MDQ6VXNlcjQwMDQxMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4004100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CockyCat",
      "html_url": "https://github.com/CockyCat",
      "followers_url": "https://api.github.com/users/CockyCat/followers",
      "following_url": "https://api.github.com/users/CockyCat/following{/other_user}",
      "gists_url": "https://api.github.com/users/CockyCat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CockyCat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CockyCat/subscriptions",
      "organizations_url": "https://api.github.com/users/CockyCat/orgs",
      "repos_url": "https://api.github.com/users/CockyCat/repos",
      "events_url": "https://api.github.com/users/CockyCat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CockyCat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-19T09:46:15Z",
    "updated_at": "2017-10-19T09:46:15Z",
    "author_association": "NONE",
    "body": "Do you resolved it?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/337856971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355255988",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-355255988",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 355255988,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTI1NTk4OA==",
    "user": {
      "login": "seangell",
      "id": 35095251,
      "node_id": "MDQ6VXNlcjM1MDk1MjUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35095251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seangell",
      "html_url": "https://github.com/seangell",
      "followers_url": "https://api.github.com/users/seangell/followers",
      "following_url": "https://api.github.com/users/seangell/following{/other_user}",
      "gists_url": "https://api.github.com/users/seangell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seangell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seangell/subscriptions",
      "organizations_url": "https://api.github.com/users/seangell/orgs",
      "repos_url": "https://api.github.com/users/seangell/repos",
      "events_url": "https://api.github.com/users/seangell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seangell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-04T11:07:07Z",
    "updated_at": "2018-01-04T11:07:07Z",
    "author_association": "NONE",
    "body": "Im using Windows 10 64bit, running GETH --fast but give me synchronization failed, dropping peer. If I inquire my ETH balance, it display available ETH but I cant able to transfer the ETH to my other ETH wallet. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/355255988/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/375725878",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14361#issuecomment-375725878",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14361",
    "id": 375725878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTcyNTg3OA==",
    "user": {
      "login": "CryptoAlphaOne",
      "id": 37546733,
      "node_id": "MDQ6VXNlcjM3NTQ2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/37546733?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptoAlphaOne",
      "html_url": "https://github.com/CryptoAlphaOne",
      "followers_url": "https://api.github.com/users/CryptoAlphaOne/followers",
      "following_url": "https://api.github.com/users/CryptoAlphaOne/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptoAlphaOne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptoAlphaOne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptoAlphaOne/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptoAlphaOne/orgs",
      "repos_url": "https://api.github.com/users/CryptoAlphaOne/repos",
      "events_url": "https://api.github.com/users/CryptoAlphaOne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptoAlphaOne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T16:37:34Z",
    "updated_at": "2018-03-23T16:41:02Z",
    "author_association": "NONE",
    "body": "I do not have a GETH installed on my server, so all I can do is call webservice, so I opted for https://infura.io/ but they do not sign a transaction to send coins, so how do I sign a transaction etherium using JSON-RPC to call eth_sendRawTransaction Without using web3 or geth, go, and so on. etc. etc.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/375725878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

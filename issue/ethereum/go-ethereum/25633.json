{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25633",
  "id": 1355436653,
  "node_id": "I_kwDOAOvK985QylJt",
  "number": 25633,
  "title": "Contract creation for private network hangs",
  "user": {
    "login": "claravanstaden",
    "id": 1788149,
    "node_id": "MDQ6VXNlcjE3ODgxNDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1788149?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/claravanstaden",
    "html_url": "https://github.com/claravanstaden",
    "followers_url": "https://api.github.com/users/claravanstaden/followers",
    "following_url": "https://api.github.com/users/claravanstaden/following{/other_user}",
    "gists_url": "https://api.github.com/users/claravanstaden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/claravanstaden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/claravanstaden/subscriptions",
    "organizations_url": "https://api.github.com/users/claravanstaden/orgs",
    "repos_url": "https://api.github.com/users/claravanstaden/repos",
    "events_url": "https://api.github.com/users/claravanstaden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/claravanstaden/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-08-30T09:12:50Z",
  "updated_at": "2022-08-31T14:24:54Z",
  "closed_at": "2022-08-31T14:24:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.23-stable`\r\nOS & Version: Linux\r\nCommit hash : N/A\r\n\r\n#### Expected behaviour\r\nWhen deploying a smart contract to the local geth node in a private network, contract creation succeeded. Last tested successfully with 1.10.18.\r\n\r\n#### Actual behaviour\r\nWith Geth 1.10.23, contract creation just hangs and never completes.\r\n\r\n#### Steps to reproduce the behaviour\r\nGenesis.json\r\n```\r\n{\r\n  \"config\": {\r\n    \"chainId\": 15,\r\n    \"homesteadBlock\": 0,\r\n    \"eip150Block\": 0,\r\n    \"eip155Block\": 0,\r\n    \"eip158Block\": 0,\r\n    \"byzantiumBlock\": 0,\r\n    \"constantinopleBlock\": 0,\r\n    \"petersburgBlock\": 0,\r\n    \"istanbulBlock\": 0,\r\n    \"muirGlacierBlock\": 0,\r\n    \"berlinBlock\": 0,\r\n    \"londonBlock\": 0,\r\n    \"ethash\": {},\r\n    \"terminalTotalDifficulty\": 0\r\n  },\r\n  \"difficulty\": \"0x9FFE0\",\r\n  \"gasLimit\": \"80000000\",\r\n  \"alloc\": {\r\n    \"90A987B944Cb1dCcE5564e5FDeCD7a54D3de27Fe\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"Be68fC2d8249eb60bfCf0e71D5A0d2F2e292c4eD\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"89b4AB1eF20763630df9743ACF155865600daFF2\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"04E00e6D2e9Ea1E2AF553De02A5172120BFA5c3e\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"a255dC78C1510e2c1332fBAC2de848058f479CEE\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"ACbd24742b87c34dED607FB87b22401B2Ede167E\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"01F6749035e02205768f97e6f1d394Fb6769EC20\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"8b66D5499F52D6F1857084A61743dFCB9a712859\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"13e16C4e5787f878f98a610EB321170512b134D4\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"eEBFA6B9242A19f91a0463291A937a20e3355681\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    },\r\n    \"87D987206180B8f3807Dd90455606eEa85cdB87a\": {\r\n      \"balance\": \"100000000000000000000\"\r\n    }\r\n  }\r\n}\r\n```\r\nGeth command\r\n```\r\n        geth init --datadir \"$data_dir\" \"$output_dir/genesis.json\"\r\n        geth account import --datadir \"$data_dir\" --password /dev/null config/dev-example-key0.prv\r\n        geth account import --datadir \"$data_dir\" --password /dev/null config/dev-example-key1.prv\r\n        geth --vmdebug --datadir \"$data_dir\" --networkid 15 \\\r\n            --http --http.api debug,personal,eth,net,web3,txpool,engine,miner --ws --ws.api debug,eth,net,web3 \\\r\n            --rpc.allow-unprotected-txs --mine --miner.threads=1 \\\r\n            --miner.etherbase=0x0000000000000000000000000000000000000000 \\\r\n            --allow-insecure-unlock \\\r\n            --authrpc.jwtsecret config/jwtsecret \\\r\n            --unlock 0xBe68fC2d8249eb60bfCf0e71D5A0d2F2e292c4eD,0x89b4AB1eF20763630df9743ACF155865600daFF2 \\\r\n            --password /dev/null \\\r\n            --rpc.gascap 100000000 \\\r\n            --trace \"$data_dir/trace\" \\\r\n            --gcmode archive \\\r\n            --miner.gasprice=0 \\\r\n            > \"$output_dir/geth.log\" 2>&1 &\r\n```\r\nStart Geth `1.10.23` up with the following command and deploy any smart contract. Contract creation doesn't complete.",
  "closed_by": {
    "login": "claravanstaden",
    "id": 1788149,
    "node_id": "MDQ6VXNlcjE3ODgxNDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1788149?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/claravanstaden",
    "html_url": "https://github.com/claravanstaden",
    "followers_url": "https://api.github.com/users/claravanstaden/followers",
    "following_url": "https://api.github.com/users/claravanstaden/following{/other_user}",
    "gists_url": "https://api.github.com/users/claravanstaden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/claravanstaden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/claravanstaden/subscriptions",
    "organizations_url": "https://api.github.com/users/claravanstaden/orgs",
    "repos_url": "https://api.github.com/users/claravanstaden/repos",
    "events_url": "https://api.github.com/users/claravanstaden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/claravanstaden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1231394358",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25633#issuecomment-1231394358",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
    "id": 1231394358,
    "node_id": "IC_kwDOAOvK985JZZY2",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T09:16:34Z",
    "updated_at": "2022-08-30T09:16:34Z",
    "author_association": "MEMBER",
    "body": "You'll have to provide an example as to what doesn't succeed and logs as to what's happening. Your reports is much to vague to reasonable assess. Not for other reasons, but this surely works, so something seems to be off in your setup, that's what we need to find.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1231394358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1231401550",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25633#issuecomment-1231401550",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
    "id": 1231401550,
    "node_id": "IC_kwDOAOvK985JZbJO",
    "user": {
      "login": "claravanstaden",
      "id": 1788149,
      "node_id": "MDQ6VXNlcjE3ODgxNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1788149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/claravanstaden",
      "html_url": "https://github.com/claravanstaden",
      "followers_url": "https://api.github.com/users/claravanstaden/followers",
      "following_url": "https://api.github.com/users/claravanstaden/following{/other_user}",
      "gists_url": "https://api.github.com/users/claravanstaden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/claravanstaden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/claravanstaden/subscriptions",
      "organizations_url": "https://api.github.com/users/claravanstaden/orgs",
      "repos_url": "https://api.github.com/users/claravanstaden/repos",
      "events_url": "https://api.github.com/users/claravanstaden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/claravanstaden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T09:22:42Z",
    "updated_at": "2022-08-30T09:22:42Z",
    "author_association": "NONE",
    "body": "Thanks for the response @karalabe! I compared the two version's logs but couldn't see anything useful there, both logs just show the contract was submitted for creation but nothing about it afterwards.\r\n\r\n```\r\nINFO [08-30|09:07:31.281] Submitted contract creation              hash=0x5f0e7e500d834c8a0d37bd9c3732a8a54948bc4eb21360406ae2490be55c45bf from=0xBe68fC2d8249eb60bfCf0e71D5A0d2F2e292c4eD nonce=0 contract=0x86D9aC0Bab011917f57B9E9607833b4340F9D4F8 value=0\r\n```\r\n\r\nI had a look at the release logs to see if there is something configuation-wise that could have affected this, but couldn't see anything relevant. Do you know if anything that could possibly affect this? Then I can debug it and get out of your hair. 😄 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1231401550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232965339",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25633#issuecomment-1232965339",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
    "id": 1232965339,
    "node_id": "IC_kwDOAOvK985JfY7b",
    "user": {
      "login": "claravanstaden",
      "id": 1788149,
      "node_id": "MDQ6VXNlcjE3ODgxNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1788149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/claravanstaden",
      "html_url": "https://github.com/claravanstaden",
      "followers_url": "https://api.github.com/users/claravanstaden/followers",
      "following_url": "https://api.github.com/users/claravanstaden/following{/other_user}",
      "gists_url": "https://api.github.com/users/claravanstaden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/claravanstaden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/claravanstaden/subscriptions",
      "organizations_url": "https://api.github.com/users/claravanstaden/orgs",
      "repos_url": "https://api.github.com/users/claravanstaden/repos",
      "events_url": "https://api.github.com/users/claravanstaden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/claravanstaden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T13:49:33Z",
    "updated_at": "2022-08-31T13:50:16Z",
    "author_association": "NONE",
    "body": "After some further digging, it looks there is a problem between the consensus client and the execution client for my specific case. I am using Lodestar, and seeing some errors in their logs. I am chatting to them about it, but it looks like Lodestar gets invalid updates from `engine_forkchoiceUpdatedV1`.\r\n\r\nIt looks like [this condition](https://github.com/ChainSafe/lodestar/blob/db9450ba2ee4ac90469999450a16d143f6127961/packages/beacon-node/src/execution/engine/http.ts#L248) is triggered. Did anything change in the `engine_forkchoiceUpdatedV1` `SYNCING` API spec implementation, by any chance?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232965339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232976006",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25633#issuecomment-1232976006",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
    "id": 1232976006,
    "node_id": "IC_kwDOAOvK985JfbiG",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T13:57:57Z",
    "updated_at": "2022-08-31T13:57:57Z",
    "author_association": "MEMBER",
    "body": "I have a hunch. Start Geth with `--syncmode=full`. By default it wants to snap sync and will refuse to mine a block until a sync cycle completes. But in your case, a brand new network, there's nothing to sync, so you'll have to nudge it to start processing/making blocks immediately.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1232976006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1233009673",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25633#issuecomment-1233009673",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25633",
    "id": 1233009673,
    "node_id": "IC_kwDOAOvK985JfjwJ",
    "user": {
      "login": "claravanstaden",
      "id": 1788149,
      "node_id": "MDQ6VXNlcjE3ODgxNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1788149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/claravanstaden",
      "html_url": "https://github.com/claravanstaden",
      "followers_url": "https://api.github.com/users/claravanstaden/followers",
      "following_url": "https://api.github.com/users/claravanstaden/following{/other_user}",
      "gists_url": "https://api.github.com/users/claravanstaden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/claravanstaden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/claravanstaden/subscriptions",
      "organizations_url": "https://api.github.com/users/claravanstaden/orgs",
      "repos_url": "https://api.github.com/users/claravanstaden/repos",
      "events_url": "https://api.github.com/users/claravanstaden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/claravanstaden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T14:24:54Z",
    "updated_at": "2022-08-31T14:24:54Z",
    "author_association": "NONE",
    "body": "🙌 Amazing! It worked! Much appreciated, Peter.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1233009673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

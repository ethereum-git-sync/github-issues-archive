{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23574",
  "id": 995687370,
  "node_id": "I_kwDOAOvK9847WPvK",
  "number": 23574,
  "title": "Enhancing subscription processing to be able to work with transaction data",
  "user": {
    "login": "ochaloup",
    "id": 1104559,
    "node_id": "MDQ6VXNlcjExMDQ1NTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1104559?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ochaloup",
    "html_url": "https://github.com/ochaloup",
    "followers_url": "https://api.github.com/users/ochaloup/followers",
    "following_url": "https://api.github.com/users/ochaloup/following{/other_user}",
    "gists_url": "https://api.github.com/users/ochaloup/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ochaloup/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ochaloup/subscriptions",
    "organizations_url": "https://api.github.com/users/ochaloup/orgs",
    "repos_url": "https://api.github.com/users/ochaloup/repos",
    "events_url": "https://api.github.com/users/ochaloup/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ochaloup/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-09-14T07:30:04Z",
  "updated_at": "2022-02-17T07:20:25Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I would like having a geth \"extension\" that would be working with Geth subscriptions. The main part of filtering would be over pending transactions.\r\n\r\nWhen I'm searching in the Geth code I can see that I can create a `PendingTransactionsSubscription` (https://github.com/ethereum/go-ethereum/blob/v1.10.8/eth/filters/filter_system.go#L345) but that returns me only hashes.\r\n\r\nI would like to be able to work with transaction object within the subscription. I'm thinking in way I adjusted here: https://github.com/ochaloup/go-ethereum/commit/2805c6ef52a1aedb917666c3b1d83d9b932da115\r\n(https://github.com/ethereum/go-ethereum/compare/master...ochaloup:hash-to-transaction)\r\n\r\nWould the official Geth consider to use the `types.Transaction` object instead of `common.Hash` for `PendingTransactionsSubscription` in the `filter_system.go`?\r\nShould be used a different best practice for binding the subscription and search through the pending transactions to filter them?\r\n\r\nThank you for feedback.\r\n\r\n(Not sure about the correct place where to ask this type of question. I tried stackoverflow but no response there at all.)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/924039029",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23574#issuecomment-924039029",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574",
    "id": 924039029,
    "node_id": "IC_kwDOAOvK9843E7d1",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T14:22:29Z",
    "updated_at": "2021-09-21T14:22:29Z",
    "author_association": "MEMBER",
    "body": "I'm not sure I fully understood but can't you use `getTransactionByHash` to get the transaction objects for the txhashes which you receive through the subscription? Or are you suggesting for geth to also filter the pending txes based on some fields like `from`, `to` before returning?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/924039029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932687784",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23574#issuecomment-932687784",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574",
    "id": 932687784,
    "node_id": "IC_kwDOAOvK9843l6-o",
    "user": {
      "login": "ochaloup",
      "id": 1104559,
      "node_id": "MDQ6VXNlcjExMDQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1104559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ochaloup",
      "html_url": "https://github.com/ochaloup",
      "followers_url": "https://api.github.com/users/ochaloup/followers",
      "following_url": "https://api.github.com/users/ochaloup/following{/other_user}",
      "gists_url": "https://api.github.com/users/ochaloup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ochaloup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ochaloup/subscriptions",
      "organizations_url": "https://api.github.com/users/ochaloup/orgs",
      "repos_url": "https://api.github.com/users/ochaloup/repos",
      "events_url": "https://api.github.com/users/ochaloup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ochaloup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-02T05:46:24Z",
    "updated_at": "2021-10-02T05:46:24Z",
    "author_association": "NONE",
    "body": "hi @s1na thanks for looking at this (and sorry for my delay in response).\r\nYes, my point was the later. I would like to have a chance to filter txns before returning from geth subscription.\r\n\r\nWhen you mention the `getTransactionByHash` you mean to connect with client and talk via rpc, right? That was not my intention.\r\n\r\nI was searching for a way to use the same method (i.e., `getTransactionByHash`) from within the `eth/filters/api.go` code (i.e., from filter in geth before returning). I haven't understood if there is a way how to retrieve the eth internal structures from the `filter` code. When I'm now looking at the `eth/client` and then internal API (https://github.com/ethereum/go-ethereum/blob/master/internal/ethapi/api.go#L1565) I cannot deduct how to get to `Transaction pool API` instance as in the filter code (https://github.com/ethereum/go-ethereum/blob/master/eth/filters/filter_system.go#L295).\r\nWould that be possible to work `getTransactionByHash` from the filter code.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/932687784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/995930033",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23574#issuecomment-995930033",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574",
    "id": 995930033,
    "node_id": "IC_kwDOAOvK9847XK-x",
    "user": {
      "login": "senthilsamrat",
      "id": 84476042,
      "node_id": "MDQ6VXNlcjg0NDc2MDQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/84476042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/senthilsamrat",
      "html_url": "https://github.com/senthilsamrat",
      "followers_url": "https://api.github.com/users/senthilsamrat/followers",
      "following_url": "https://api.github.com/users/senthilsamrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/senthilsamrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/senthilsamrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/senthilsamrat/subscriptions",
      "organizations_url": "https://api.github.com/users/senthilsamrat/orgs",
      "repos_url": "https://api.github.com/users/senthilsamrat/repos",
      "events_url": "https://api.github.com/users/senthilsamrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/senthilsamrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-16T15:36:02Z",
    "updated_at": "2021-12-16T15:36:02Z",
    "author_association": "NONE",
    "body": "> I would like having a geth \"extension\" that would be working with Geth subscriptions. The main part of filtering would be over pending transactions.\r\n> \r\n> When I'm searching in the Geth code I can see that I can create a `PendingTransactionsSubscription` (https://github.com/ethereum/go-ethereum/blob/v1.10.8/eth/filters/filter_system.go#L345) but that returns me only hashes.\r\n> \r\n> I would like to be able to work with transaction object within the subscription. I'm thinking in way I adjusted here: [ochaloup@9e4aa46](https://github.com/ochaloup/go-ethereum/commit/9e4aa4699726ff7a38486d7ba8329cb7e37ff596)\r\n> \r\n> Would the official Geth consider to use the `types.Transaction` object instead of `common.Hash` for `PendingTransactionsSubscription` in the `filter_system.go`? Should be used a different best practice for binding the subscription and search through the pending transactions to filter them?\r\n> \r\n> Thank you for feedback.\r\n> \r\n> (Not sure about the correct place where to ask this type of question. I tried stackoverflow but no response there at all.)\r\n\r\nCan you post a sample script how to subscribe for pending transaction. I am new to go lang and geth. thanks in advance",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/995930033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/996246712",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23574#issuecomment-996246712",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23574",
    "id": 996246712,
    "node_id": "IC_kwDOAOvK9847YYS4",
    "user": {
      "login": "ochaloup",
      "id": 1104559,
      "node_id": "MDQ6VXNlcjExMDQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1104559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ochaloup",
      "html_url": "https://github.com/ochaloup",
      "followers_url": "https://api.github.com/users/ochaloup/followers",
      "following_url": "https://api.github.com/users/ochaloup/following{/other_user}",
      "gists_url": "https://api.github.com/users/ochaloup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ochaloup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ochaloup/subscriptions",
      "organizations_url": "https://api.github.com/users/ochaloup/orgs",
      "repos_url": "https://api.github.com/users/ochaloup/repos",
      "events_url": "https://api.github.com/users/ochaloup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ochaloup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-16T22:35:57Z",
    "updated_at": "2021-12-16T22:35:57Z",
    "author_association": "NONE",
    "body": "@senthilsamrat we have prepared a workshop for one conference, maybe this could be helpful https://github.com/chainkeepers/20211009_workshop_geth_pending_logs\r\nWhen you want to code the client in golang then I would recommend to read this: https://goethereumbook.org/en/",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/996246712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2937",
  "id": 172839706,
  "node_id": "MDU6SXNzdWUxNzI4Mzk3MDY=",
  "number": 2937,
  "title": "DELEGATECALL not working on private chain",
  "user": {
    "login": "kevinday",
    "id": 1254665,
    "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinday",
    "html_url": "https://github.com/kevinday",
    "followers_url": "https://api.github.com/users/kevinday/followers",
    "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinday/orgs",
    "repos_url": "https://api.github.com/users/kevinday/repos",
    "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinday/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2016-08-24T00:38:40Z",
  "updated_at": "2016-08-24T07:17:49Z",
  "closed_at": "2016-08-24T07:17:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\n\n```\nGeth\nVersion: 1.5.0-unstable\nProtocol Versions: [63 62]\nNetwork Id: 1\nGo Version: go1.5.1\nOS: linux\nGOPATH=\nGOROOT=/usr/lib/go\n```\n\nOn a brand new VM, I am doing:\n\n`geth init genesis.json`\n\nwith the following genesis.json\n\n```\n{\n  \"nonce\": \"0x0000000000000021\",\n  \"difficulty\": \"0x00\",\n  \"config\": {\n    \"homesteadBlock\": 0,\n    \"daoForkBlock\" : 0,\n    \"daoForkSupport\" : true\n  },\n  \"alloc\": {\n    \"7fbe93bc104ac4bcae5d643fd3747e1866f1ece4\": {\n      \"balance\": \"1000000000000000000000000000000\"\n    }\n  },\n  \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n  \"coinbase\": \"0x0000000000000000000000000000000000000000\",\n  \"timestamp\": \"0x00\",\n  \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n  \"extraData\": \"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa\",\n  \"gasLimit\": \"0x2fefd8\"\n}\n```\n\nRunning geth by doing `/usr/bin/geth --password /home/auguruser/pw.txt --unlock 0 --maxpeers 0 --networkid 1101011 --rpcaddr \"0.0.0.0\" --rpc --rpccorsdomain \"*\" --ws --wsapi \"eth,net,web3,txpool\" --wsport 8546 --wsaddr \"0.0.0.0\" --wsorigins \"*\"`\n\nMining is turned on. All of the other contracts that I have loaded seem to work fine, except for those that make use of DELEGATECALL. (https://github.com/AugurProject/augur-core/blob/master/src/functions/createMarket.se#L38, for example).\n\nUnfortunately attempting to trace the failing transaction is failing.\n\n```\n\ndebug.traceTransaction(\"0x38a08e4eae300464e25c14ea32d6f33f41927a77f2288268bcbc00cc91e7d989\")\n\nInvalid JSON RPC response: {\"error\":{\"EOF\":\"EOF\",\"code\":-32603},\"id\":8,\"version\":\"2.0\"}\n    at web3.js:3119:20\n    at web3.js:6023:15\n    at web3.js:4995:36\n    at <anonymous>:1:1\n```\n\nHere is the block the transaction that is failing is in\n\n```\neth.getBlock(53)\n{\n  difficulty: 131072,\n  extraData: \"0xd783010500844765746887676f312e352e31856c696e7578\",\n  gasLimit: 24872238750,\n  gasUsed: 3135000,\n  hash: \"0x7ebbc1f08e00996fd8b14ee39c7ba069f9e3d137b044a0a8fe320b46c107e042\",\n  logsBloom: \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n  miner: \"0x7fbe93bc104ac4bcae5d643fd3747e1866f1ece4\",\n  nonce: \"0x60c1296dc375efb5\",\n  number: 53,\n  parentHash: \"0x9007e26f513cca1c91c50871b47af5b0cad78643d5d48c89c61dabfa27a59af5\",\n  receiptRoot: \"0x2616ec74e34c22f223dc20ddb38930a7c19980b3f6c505dad710350252c50dfd\",\n  sha3Uncles: \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\n  size: 1267,\n  stateRoot: \"0x4a351d0ca1914b0b8b6eaf7413613fd360f83ea403a625a7cb686182311af957\",\n  timestamp: 1471994576,\n  totalDifficulty: 6953216,\n  transactions: [\"0x38a08e4eae300464e25c14ea32d6f33f41927a77f2288268bcbc00cc91e7d989\"],\n  transactionsRoot: \"0x692fdca5283f5213f4636ef10da88072a08da5f7b7c576e2dea336286651ab55\",\n  uncles: []\n}\n```\n\nIs there an easy way to determine if my private chain is homestead enabled? Does that genesis.json look valid?\n",
  "closed_by": {
    "login": "kevinday",
    "id": 1254665,
    "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinday",
    "html_url": "https://github.com/kevinday",
    "followers_url": "https://api.github.com/users/kevinday/followers",
    "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinday/orgs",
    "repos_url": "https://api.github.com/users/kevinday/repos",
    "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinday/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/241977858",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2937#issuecomment-241977858",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2937",
    "id": 241977858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTk3Nzg1OA==",
    "user": {
      "login": "kevinday",
      "id": 1254665,
      "node_id": "MDQ6VXNlcjEyNTQ2NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinday",
      "html_url": "https://github.com/kevinday",
      "followers_url": "https://api.github.com/users/kevinday/followers",
      "following_url": "https://api.github.com/users/kevinday/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinday/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinday/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinday/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinday/orgs",
      "repos_url": "https://api.github.com/users/kevinday/repos",
      "events_url": "https://api.github.com/users/kevinday/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinday/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-24T07:17:49Z",
    "updated_at": "2016-08-24T07:17:49Z",
    "author_association": "NONE",
    "body": "Ok, after a bunch more digging I don't think this is a problem with geth. After disassembling the byteCode of my contract I noticed that it doesn't include `DELEGATECALL` anywhere.\n\nInstalling serpent as instructed by the serpent docs: `sudo pip install ethereum-serpent` apparently gives you a version of serpent that doesn't support DELEGATECALL, and instead just ignores the `call=delegate` bit of the contract.\n\nThat `pip install ethereum-serpent` doesn't do the right thing is a problem that should be fixed, but it isn't a problem with geth or this repo. Closing.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/241977858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27957",
  "id": 1858885451,
  "node_id": "I_kwDOAOvK985uzFdL",
  "number": 27957,
  "title": "NAF representation in bn256",
  "user": {
    "login": "Raneet10",
    "id": 35629432,
    "node_id": "MDQ6VXNlcjM1NjI5NDMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/35629432?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Raneet10",
    "html_url": "https://github.com/Raneet10",
    "followers_url": "https://api.github.com/users/Raneet10/followers",
    "following_url": "https://api.github.com/users/Raneet10/following{/other_user}",
    "gists_url": "https://api.github.com/users/Raneet10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Raneet10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Raneet10/subscriptions",
    "organizations_url": "https://api.github.com/users/Raneet10/orgs",
    "repos_url": "https://api.github.com/users/Raneet10/repos",
    "events_url": "https://api.github.com/users/Raneet10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Raneet10/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-08-21T08:36:55Z",
  "updated_at": "2023-08-22T09:58:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hey folks!\r\nIn `bn256/cloudflare`, one thing that caught my eye was the NAF representation of `6u + 2 (u = 4965661367192848881)` : https://github.com/ethereum/go-ethereum/blob/5976e58415a633c24a0d903e8a60a3780abdfe59/crypto/bn256/cloudflare/optate.go#L115-L118\r\nNow , in the NAF representation aren't the non zero values not supposed to be adjacent ? Is this a different representation than NAF that's maybe faster ? Or I am interpreting it wrong (most likely) ?\r\nBtw by using this https://github.com/Consensys/gnark-crypto/blob/30ae949dd2311dceba5069585b9b324d53dccf15/ecc/utils.go#L12 ,it came out to be `[0 0 0 1 0 1 0 -1 0 0 -1 0 0 0 1 0 0 -1 0 -1 0 0 0 1 0 -1 0 0 0 0 -1 0 0 1 0 -1 0 0 1 0 0 0 0 0 -1 0 0 -1 0 1 0 -1 0 0 0 -1 0 -1 0 0 0 1 0 -1 0 1]`  on my end.\r\n\r\nApologies if this has already been discussed/answered!\r\n\r\nEDIT: Probably this shouldn't be under docs type",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1687802412",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27957#issuecomment-1687802412",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957",
    "id": 1687802412,
    "node_id": "IC_kwDOAOvK985kmdIs",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-22T09:18:37Z",
    "updated_at": "2023-08-22T09:28:07Z",
    "author_association": "MEMBER",
    "body": "We're just using bn256/cloudflare as a vendored in library, so all questions regarding the lib should be better asked here: https://github.com/cloudflare/bn256\r\n\r\nI tried a few online naf calculators with `29793968203157093288 = 6u + 2 (u = 4965661367192848881)` and they returned different naf representations (e.g. https://ngn.bitbucket.io/k/#eJxLs9LVVzeK0TVSNFYw1OICgjQFI0tzS2NLMwsjA2NDU3MDS2MjCwsuAKUCB70=)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1687802412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1687870719",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27957#issuecomment-1687870719",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27957",
    "id": 1687870719,
    "node_id": "IC_kwDOAOvK985kmtz_",
    "user": {
      "login": "Raneet10",
      "id": 35629432,
      "node_id": "MDQ6VXNlcjM1NjI5NDMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35629432?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Raneet10",
      "html_url": "https://github.com/Raneet10",
      "followers_url": "https://api.github.com/users/Raneet10/followers",
      "following_url": "https://api.github.com/users/Raneet10/following{/other_user}",
      "gists_url": "https://api.github.com/users/Raneet10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Raneet10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Raneet10/subscriptions",
      "organizations_url": "https://api.github.com/users/Raneet10/orgs",
      "repos_url": "https://api.github.com/users/Raneet10/repos",
      "events_url": "https://api.github.com/users/Raneet10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Raneet10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-22T09:57:38Z",
    "updated_at": "2023-08-22T09:58:20Z",
    "author_association": "NONE",
    "body": "I see but isn't the cloudflare's lib using a different value for u ( `u = 6518589491078791937` given [here](https://github.com/cloudflare/bn256/blob/673829d98a2d5240c951e3f477b025406cb44e80/constants.go#L13C24-L13C43) ; the NAF form also looks correct) than what we use ?\r\n\r\nI guess the NAF representation might differ based on the algorithm used. Though my understanding was that in general in NAF the non-zero values can't be adjacent to each other (https://hackmd.io/@drouyang/S1GgWQvoj). \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1687870719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2882",
  "id": 168663766,
  "node_id": "MDU6SXNzdWUxNjg2NjM3NjY=",
  "number": 2882,
  "title": "[BUG] geth contract cannot return types in state changing contract methods",
  "user": {
    "login": "SethVgr",
    "id": 19685073,
    "node_id": "MDQ6VXNlcjE5Njg1MDcz",
    "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SethVgr",
    "html_url": "https://github.com/SethVgr",
    "followers_url": "https://api.github.com/users/SethVgr/followers",
    "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
    "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
    "organizations_url": "https://api.github.com/users/SethVgr/orgs",
    "repos_url": "https://api.github.com/users/SethVgr/repos",
    "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SethVgr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-08-01T14:46:32Z",
  "updated_at": "2016-08-05T18:25:17Z",
  "closed_at": "2016-08-05T18:25:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Checklist\n- [done ] built geth 1.4.10\n- [done ] installed it over previous version (1.3.5.) (`sudo cp geth /usr/bin/geth`)\n- [done ] compiled  and deployed the following contract:\n\n```\ncontract C {\n\n     uint[] numbers;\n\n     function initNumbers() {\n         numbers.push(1);\n         numbers.push(2);\n     }\n\n     function stateChanger(uint a) returns (bool) {\n         for(uint i = 0; i < numbers.length; i++) {\n             if(numbers[i] == a)\n             return false;\n         }\n         numbers.push(a);\n         return true;\n     }\n\n     function getNumber(uint index) constant returns (uint) {\n         if(index >= numbers.length)\n            return 0;\n         else\n            return numbers[index];\n     }\n}\n```\n\nThe contract was compiled using [browser solidity](https://ethereum.github.io/browser-solidity/#version=soljson-latest.js) and deployed on a private test net running a single **geth** node of version 1.4.10\n## System/environment\n- OS: debian 8.3 Jessie x64, kernel version 3.16.0-4-amd64, virtual machine, running on VirtualBox, host machine Win7 x64, NAT network settings used\n## Expected behaviour\n\nAfter deployment, upon calling method **stateChanger()** a true or false value should be returned after each call.\n## Observed behaviour\n\nInstead of the expected boolean values the transaction hash is returned:\n\n```\n> c.initNumbers({from:web3.eth.accounts[0],gas:4000000000});\n\"0xdf82b0204b2c5151ce909d63a3d68314a0c8e4d7204ee5b52c5753212943c020\"\n> c.stateChanger(3, {from:web3.eth.accounts[0],gas:4000000000});\n\"0x714e13b11c41144036334b38b144d81f05c7b9e8d22703153e0de6b6a3a9ec45\"\n> c.stateChanger(4, {from:web3.eth.accounts[0],gas:4000000000});\n\"0x4f2fa772a7bfd39f419e001e73827f95f21034618febc44f99731bd353f493e7\"\n> c.stateChanger(5, {from:web3.eth.accounts[0],gas:4000000000});\n\"0xf28bff66ce439c4f05eea1629131750efaba4e115ea30b610f1404dde9c94fed\"\n> c.getNumber(0);\n1\n> c.getNumber(1);\n2\n> c.getNumber(2);\n3\n> c.getNumber(3);\n4\n> c.stateChanger(2, {from:web3.eth.accounts[0],gas:4000000000});\n\"0x68e3c169b2a063764888a42da92dd0bdd3aaa3dd70f25be089a1c4811d416d59\"\n\n```\n\nFor the first calls of **stateChanger()** true should have been returned while on the last call false. \n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237498428",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2882#issuecomment-237498428",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882",
    "id": 237498428,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzQ5ODQyOA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T09:15:27Z",
    "updated_at": "2016-08-04T09:15:27Z",
    "author_association": "MEMBER",
    "body": "`getNumber` is marked as constant. Therefore it cannot change the state and sending a transaction to it doesn't make sense. If you load the ABI into web3 (I assume you did in you example) and execute a constant function web3 will send a `eth_call` to the node and the node will send the results back. In this case an uint256.\n\nThe other functions are not marked as constant. If you execute one of these function web3 sends a transaction. Therefore you will receive a transaction hash. Since it outcome of the function cannot be known until it is mined you don't get a result back.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237498428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237853782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2882#issuecomment-237853782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882",
    "id": 237853782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzg1Mzc4Mg==",
    "user": {
      "login": "SethVgr",
      "id": 19685073,
      "node_id": "MDQ6VXNlcjE5Njg1MDcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19685073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SethVgr",
      "html_url": "https://github.com/SethVgr",
      "followers_url": "https://api.github.com/users/SethVgr/followers",
      "following_url": "https://api.github.com/users/SethVgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/SethVgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SethVgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SethVgr/subscriptions",
      "organizations_url": "https://api.github.com/users/SethVgr/orgs",
      "repos_url": "https://api.github.com/users/SethVgr/repos",
      "events_url": "https://api.github.com/users/SethVgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SethVgr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T13:44:08Z",
    "updated_at": "2016-08-05T13:44:08Z",
    "author_association": "NONE",
    "body": "Thanks. I did manage to get passed the transaction/call issue. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237853782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237926141",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2882#issuecomment-237926141",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2882",
    "id": 237926141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkyNjE0MQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T18:25:17Z",
    "updated_at": "2016-08-05T18:25:17Z",
    "author_association": "MEMBER",
    "body": "I'm closing this because it is working as intended. The return value of the top level call of a transaction is always discarded. Note that you can call stateChanger from another contract in a transaction and use the return value.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/237926141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

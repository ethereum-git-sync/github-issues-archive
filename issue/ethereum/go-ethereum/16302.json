{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16302",
  "id": 304323539,
  "node_id": "MDU6SXNzdWUzMDQzMjM1Mzk=",
  "number": 16302,
  "title": "wallet import should allow to import a specific presale account only once",
  "user": {
    "login": "philsmd",
    "id": 921533,
    "node_id": "MDQ6VXNlcjkyMTUzMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/921533?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/philsmd",
    "html_url": "https://github.com/philsmd",
    "followers_url": "https://api.github.com/users/philsmd/followers",
    "following_url": "https://api.github.com/users/philsmd/following{/other_user}",
    "gists_url": "https://api.github.com/users/philsmd/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/philsmd/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/philsmd/subscriptions",
    "organizations_url": "https://api.github.com/users/philsmd/orgs",
    "repos_url": "https://api.github.com/users/philsmd/repos",
    "events_url": "https://api.github.com/users/philsmd/events{/privacy}",
    "received_events_url": "https://api.github.com/users/philsmd/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-03-12T10:54:26Z",
  "updated_at": "2019-05-01T06:06:40Z",
  "closed_at": "2019-05-01T06:06:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.8.2\r\nOS & Version: Windows/Linux/OSX\r\nCommit hash : b8b9f7f4476a30a0aaf6077daade6ae77f969960\r\n\r\n#### Expected behaviour\r\n\r\nThe wallet import command should only import new accounts if they are not already present.\r\n\r\n#### Actual behaviour\r\n\r\nThe wallet import command does create multiple UTC files and therefore multiple accounts even if the presale account was already imported beforehand.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nrun \"geth import wallet presale.json\" multiple times and you will see something like this (file list under the keystore directory):\r\n\r\n![ethereum_wallet_import_problem](https://user-images.githubusercontent.com/921533/37279738-f2bc6c16-25eb-11e8-83b8-ad58dbaef064.jpg)\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372289900",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16302#issuecomment-372289900",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
    "id": 372289900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjI4OTkwMA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T12:15:35Z",
    "updated_at": "2018-03-12T12:16:17Z",
    "author_association": "MEMBER",
    "body": "> The wallet import command should only import new accounts if they are not already present.\r\n\r\nI'm not sure that's really desired behaviour. What if a user had already imported his presale account, but has forgotten the password, and wants to reimport?\r\n\r\nIn that case, there would be two alternatives, both of which are error-prone\r\n\r\n1. Geth deletes the old json-file (danger!)\r\n2. Geth tells the user to delete the old json-file. Also dangerous.\r\n\r\nA third alternative would be a much more complicated flow, where the user is prompted about what to do -- but that doesn't work well as an API, only in CLI usage.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372289900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372298532",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16302#issuecomment-372298532",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
    "id": 372298532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjI5ODUzMg==",
    "user": {
      "login": "philsmd",
      "id": 921533,
      "node_id": "MDQ6VXNlcjkyMTUzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/921533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philsmd",
      "html_url": "https://github.com/philsmd",
      "followers_url": "https://api.github.com/users/philsmd/followers",
      "following_url": "https://api.github.com/users/philsmd/following{/other_user}",
      "gists_url": "https://api.github.com/users/philsmd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philsmd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philsmd/subscriptions",
      "organizations_url": "https://api.github.com/users/philsmd/orgs",
      "repos_url": "https://api.github.com/users/philsmd/repos",
      "events_url": "https://api.github.com/users/philsmd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philsmd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T12:50:37Z",
    "updated_at": "2018-03-12T12:50:37Z",
    "author_association": "NONE",
    "body": "I do not agree.\r\nIf the user provides the password while importing the pre-sale wallet file, geth can easily find out if the other wallets match exactly (same address + same password for instance). Geth could even try to quickly unlock and lock all the other matching accounts with the same ethaddr and see if the present accounts are valid and can be unlocked with that password.\r\ngeth should definitely warn the user if s/he tries to import the same wallet again and again and if it tries to import exactly the same file it should tell the user that the account wasn't imported because the exact same wallet is already present:\r\n\r\nthis is what I currently see, if I run personal.listAccounts:\r\n```\r\n[\"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\", \"0xf9438b7121a15fd127ec0d8a72ee2b3e8da04a5a\"]\r\n```\r\n\r\nI think it's not a good idea to have and list the same account multiple times.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372298532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372331921",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16302#issuecomment-372331921",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
    "id": 372331921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjMzMTkyMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T14:38:10Z",
    "updated_at": "2018-03-12T14:38:10Z",
    "author_association": "MEMBER",
    "body": "Hmmm, Geth should have deduplicated any accounts before listing. This seems like a different issue. Wasn't the original behavior that duplicated accounts get merged together @fjl?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/372331921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/373993548",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16302#issuecomment-373993548",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
    "id": 373993548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mzk5MzU0OA==",
    "user": {
      "login": "philsmd",
      "id": 921533,
      "node_id": "MDQ6VXNlcjkyMTUzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/921533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philsmd",
      "html_url": "https://github.com/philsmd",
      "followers_url": "https://api.github.com/users/philsmd/followers",
      "following_url": "https://api.github.com/users/philsmd/following{/other_user}",
      "gists_url": "https://api.github.com/users/philsmd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philsmd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philsmd/subscriptions",
      "organizations_url": "https://api.github.com/users/philsmd/orgs",
      "repos_url": "https://api.github.com/users/philsmd/repos",
      "events_url": "https://api.github.com/users/philsmd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philsmd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-18T12:11:44Z",
    "updated_at": "2018-03-18T12:31:22Z",
    "author_association": "NONE",
    "body": "I do not fully agree. For a user it is kind of the same problem: s/he tried to add an existing wallet file and geth didn't warn that this account was already present.\r\nOf course, for a geth dev this could mean that there are actually various parts in code where this needs to be tested: not only shouldn't there be multiple UTC files for the identical address (and using the same password, private key etc), but also the API calls shouldn't display the \"duplicated\" accounts multiple times.\r\n\r\nFurthermore, I just realized that you couldn't really work with these accounts at all: this happens when I run personal.unlockAccount ():\r\n```\r\nError: multiple keys match address\r\n```\r\n\r\nand I'm completely blocked now. I can't do anything and the warning doesn't really guide me on how to fix this (of course, I myself know that I need to manually move some of those files such that no more duplicates are within the keystore folder)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/373993548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474686899",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16302#issuecomment-474686899",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16302",
    "id": 474686899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDY4Njg5OQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-03-20T05:10:44Z",
    "updated_at": "2019-03-20T05:10:44Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/474686899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

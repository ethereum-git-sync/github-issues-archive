{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27260",
  "id": 1708417542,
  "node_id": "I_kwDOAOvK985l1GIG",
  "number": 27260,
  "title": "node crash with fatal error: thread exhaustion runtime: program exceeds 10000-thread limit and rewound 26K blocks",
  "user": {
    "login": "zimbabao",
    "id": 171239,
    "node_id": "MDQ6VXNlcjE3MTIzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/171239?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zimbabao",
    "html_url": "https://github.com/zimbabao",
    "followers_url": "https://api.github.com/users/zimbabao/followers",
    "following_url": "https://api.github.com/users/zimbabao/following{/other_user}",
    "gists_url": "https://api.github.com/users/zimbabao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zimbabao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zimbabao/subscriptions",
    "organizations_url": "https://api.github.com/users/zimbabao/orgs",
    "repos_url": "https://api.github.com/users/zimbabao/repos",
    "events_url": "https://api.github.com/users/zimbabao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zimbabao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-05-13T03:50:29Z",
  "updated_at": "2023-06-22T09:08:57Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version 1.11.7-unstable-8f373227`\r\nCL client & version: e.g. lighthouse:v4.1.0\r\nOS & Version: Windows/Linux/OSX: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nAfter a crash node restart and syncs from last known state.\r\n\r\n#### Actual behaviour\r\nCrashed with following msg and rewound 26K blocks. Node fell behind.\r\n\r\n```\r\nfatal error: thread exhaustion\r\nruntime: program exceeds 10000-thread limit\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\nn/a\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547223433",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1547223433",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1547223433,
    "node_id": "IC_kwDOAOvK985cOMGJ",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-15T05:42:20Z",
    "updated_at": "2023-05-15T05:42:20Z",
    "author_association": "MEMBER",
    "body": "Do you have sone more logs from the crash? This is very strange since Go only uses a handful of OS threads and multiplexes everything on top. The only time Go needs to spin up a new thread is if the old one is blocked on IO, which would mean that you have 10K threads blocks on IO... shouldn't ever happen.\r\n\r\nDid you massively rase some parameter in Geth? What's your usage? Is this stock Geth or some modified version?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547223433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547237319",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1547237319",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1547237319,
    "node_id": "IC_kwDOAOvK985cOPfH",
    "user": {
      "login": "zimbabao",
      "id": 171239,
      "node_id": "MDQ6VXNlcjE3MTIzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/171239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zimbabao",
      "html_url": "https://github.com/zimbabao",
      "followers_url": "https://api.github.com/users/zimbabao/followers",
      "following_url": "https://api.github.com/users/zimbabao/following{/other_user}",
      "gists_url": "https://api.github.com/users/zimbabao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zimbabao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zimbabao/subscriptions",
      "organizations_url": "https://api.github.com/users/zimbabao/orgs",
      "repos_url": "https://api.github.com/users/zimbabao/repos",
      "events_url": "https://api.github.com/users/zimbabao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zimbabao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-15T06:01:49Z",
    "updated_at": "2023-05-15T06:02:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have been running the same config for 1.5 years. The node has been running fine since the crash on Friday.\r\nI use the node for indexing. So make lots of eth_* calls.\r\n\r\nI am running a stock image, and no custom changes are added.\r\n\r\nMore logs.\r\n```\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc0d0789fe8 sp=0xc0d0789fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc0d0789fe0 sp=0xc0d0789fc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc0d0789fc8 sp=0xc0d0789f68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc0d0789f68 sp=0xc0d0789f40 pc=0x407c98\r\nruntime.chanrecv2(0x36bc576808d30e5d?, 0x71c3c8103140aff6?)\r\n\truntime/chan.go:583 +0x49d fp=0xc0d0789f40 sp=0xc0d0789eb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc0d0789fb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc0d0789eb0 sp=0xc0d0789e90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc0fec69a10?, 0xe?, 0x17?, 0x2?)\r\ngoroutine 14 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc01ee2cfe8 sp=0xc01ee2cfe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc01ee2cfe0 sp=0xc01ee2cfc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc01ee2cfc8 sp=0xc01ee2cf68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc01ee2cf68 sp=0xc01ee2cf40 pc=0x407c98\r\nruntime.chanrecv2(0xde95aaaf9dfc77da?, 0x3a732bd65978d416?)\r\n\truntime/chan.go:583 +0x49d fp=0xc01ee2cf40 sp=0xc01ee2ceb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc01ee2cfb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc01ee2ceb0 sp=0xc01ee2ce90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc06a9a6810?, 0x64?, 0x1?, 0x44cca7fef19600f9?)\r\ngoroutine 13 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00014afe8 sp=0xc00014afe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc00014afe0 sp=0xc00014afc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc00014afc8 sp=0xc00014af68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc00014af68 sp=0xc00014af40 pc=0x407c98\r\nruntime.chanrecv2(0xe814d941198a5113?, 0xc005f80019651c31?)\r\n\truntime/chan.go:583 +0x49d fp=0xc00014af40 sp=0xc00014aeb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc00014afb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc00014aeb0 sp=0xc00014ae90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc0cd5f7bf0?, 0x0?, 0x97?, 0xc0aaf9ab40?)\r\ngoroutine 12 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc020084fe8 sp=0xc020084fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc020084fe0 sp=0xc020084fc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc020084fc8 sp=0xc020084f68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc020084f68 sp=0xc020084f40 pc=0x407c98\r\nruntime.chanrecv2(0x42480df9f820d50f?, 0x8209d95e65513966?)\r\n\truntime/chan.go:583 +0x49d fp=0xc020084f40 sp=0xc020084eb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc020084fb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc020084eb0 sp=0xc020084e90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc114d4abd0?, 0xe?, 0x17?, 0x2?)\r\ngoroutine 11 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc01ee30fe8 sp=0xc01ee30fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc01ee30fe0 sp=0xc01ee30fc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc01ee30fc8 sp=0xc01ee30f68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc01ee30f68 sp=0xc01ee30f40 pc=0x407c98\r\nruntime.chanrecv2(0x493e20bc2e83d6cb?, 0xe3fc67708971b7e2?)\r\n\truntime/chan.go:583 +0x49d fp=0xc01ee30f40 sp=0xc01ee30eb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc01ee30fb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc01ee30eb0 sp=0xc01ee30e90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc0bcf9c030?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 10 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc020220fe8 sp=0xc020220fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc020220fe0 sp=0xc020220fc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc020220fc8 sp=0xc020220f68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc020220f68 sp=0xc020220f40 pc=0x407c98\r\nruntime.chanrecv2(0x969d1d10e2e720ac?, 0x4bd2ed2224fa958e?)\r\n\truntime/chan.go:583 +0x49d fp=0xc020220f40 sp=0xc020220eb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc020220fb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc020220eb0 sp=0xc020220e90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc0d7211140?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 9 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00aa90fe8 sp=0xc00aa90fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc00aa90fe0 sp=0xc00aa90fc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc00aa90fc8 sp=0xc00aa90f68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc00aa90f68 sp=0xc00aa90f40 pc=0x407c98\r\nruntime.chanrecv2(0xbb0b43ee16e8ad91?, 0xf65146b29fe3a52f?)\r\n\truntime/chan.go:583 +0x49d fp=0xc00aa90f40 sp=0xc00aa90eb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc00aa90fb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc00aa90eb0 sp=0xc00aa90e90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc09426a8a0?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 8 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x75\r\ncreated by github.com/ethereum/go-ethereum/core.newTxSenderCacher\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc01c38ffe8 sp=0xc01c38ffe0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:55 +0x26 fp=0xc01c38ffe0 sp=0xc01c38ffc8 pc=0xcd5ea6\r\ngithub.com/ethereum/go-ethereum/core.newTxSenderCacher.func1()\r\n\tgithub.com/ethereum/go-ethereum/core/sender_cacher.go:63 +0x3b fp=0xc01c38ffc8 sp=0xc01c38ff68 pc=0xcd5f1b\r\ngithub.com/ethereum/go-ethereum/core.(*txSenderCacher).cache(0x0?)\r\n\truntime/chan.go:447 +0x18 fp=0xc01c38ff68 sp=0xc01c38ff40 pc=0x407c98\r\nruntime.chanrecv2(0x601b55206bb8eae7?, 0x234136230ee2f0bc?)\r\n\truntime/chan.go:583 +0x49d fp=0xc01c38ff40 sp=0xc01c38feb0 pc=0x40815d\r\nruntime.chanrecv(0xc00016a9c0, 0xc01c38ffb0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc01c38feb0 sp=0xc01c38fe90 pc=0x43d016\r\nruntime.gopark(0x1781b80?, 0xc1191382d0?, 0xda?, 0x9a?, 0x0?)\r\ngoroutine 7 [chan receive]:\r\n\tgithub.com/ethereum/go-ethereum/metrics/meter.go:56 +0xd3\r\ncreated by github.com/ethereum/go-ethereum/metrics.NewMeter\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc0001387e8 sp=0xc0001387e0 pc=0x4711e1\r\nruntime.goexit()\r\n\tgithub.com/ethereum/go-ethereum/metrics/meter.go:56 +0x26 fp=0xc0001387e0 sp=0xc0001387c8 pc=0x6e9d46\r\ngithub.com/ethereum/go-ethereum/metrics.NewMeter.func2()\r\n\tgithub.com/ethereum/go-ethereum/metrics/meter.go:293 +0x65 fp=0xc0001387c8 sp=0xc000138788 pc=0x6eb0c5\r\ngithub.com/ethereum/go-ethereum/metrics.(*meterArbiter).tick(0x293c160)\r\n\truntime/chan.go:447 +0x18 fp=0xc000138788 sp=0xc000138760 pc=0x407c98\r\nruntime.chanrecv2(0x293c160?, 0xc000308930?)\r\n\truntime/chan.go:583 +0x49d fp=0xc000138760 sp=0xc0001386d0 pc=0x40815d\r\nruntime.chanrecv(0xc00023e7e0, 0xc0001387a0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc0001386d0 sp=0xc0001386b0 pc=0x43d016\r\nruntime.gopark(0xc000138778?, 0x6eb1f7?, 0x10?, 0x87?, 0xc00019b1a0?)\r\ngoroutine 6 [chan receive]:\r\n\truntime/mfinal.go:163 +0x45\r\ncreated by runtime.createfing\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00013c7e8 sp=0xc00013c7e0 pc=0x4711e1\r\nruntime.goexit()\r\n\truntime/mfinal.go:193 +0x107 fp=0xc00013c7e0 sp=0xc00013c628 pc=0x41b2c7\r\nruntime.runfinq()\r\n\truntime/proc.go:381 +0xd6 fp=0xc00013c628 sp=0xc00013c608 pc=0x43d016\r\nruntime.gopark(0x1a0?, 0x293d880?, 0xe0?, 0x24?, 0xc00013c770?)\r\ngoroutine 18 [finalizer wait, 6205 minutes]:\r\n\truntime/mgc.go:179 +0xaa\r\ncreated by runtime.gcenable\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00013dfe8 sp=0xc00013dfe0 pc=0x4711e1\r\nruntime.goexit()\r\n\truntime/mgc.go:179 +0x26 fp=0xc00013dfe0 sp=0xc00013dfc8 pc=0x41c226\r\nruntime.gcenable.func2()\r\n\truntime/mgcscavenge.go:633 +0x65 fp=0xc00013dfc8 sp=0xc00013dfa0 pc=0x4255a5\r\nruntime.bgscavenge(0x0?)\r\n\truntime/mgcscavenge.go:400 +0x53 fp=0xc00013dfa0 sp=0xc00013df70 pc=0x424fb3\r\nruntime.(*scavengerState).park(0x293c9c0)\r\n\truntime/proc.go:387\r\nruntime.goparkunlock(...)\r\n\truntime/proc.go:381 +0xd6 fp=0xc00013df70 sp=0xc00013df50 pc=0x43d016\r\nruntime.gopark(0x465355bad9dea?, 0xae4d?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 4 [GC scavenge wait]:\r\n\truntime/mgc.go:178 +0x6b\r\ncreated by runtime.gcenable\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00013d7e8 sp=0xc00013d7e0 pc=0x4711e1\r\nruntime.goexit()\r\n\truntime/mgc.go:178 +0x26 fp=0xc00013d7e0 sp=0xc00013d7c8 pc=0x41c286\r\nruntime.gcenable.func1()\r\n\truntime/mgcsweep.go:319 +0xde fp=0xc00013d7c8 sp=0xc00013d780 pc=0x4270be\r\nruntime.bgsweep(0x0?)\r\n\truntime/proc.go:387\r\nruntime.goparkunlock(...)\r\n\truntime/proc.go:381 +0xd6 fp=0xc00013d780 sp=0xc00013d760 pc=0x43d016\r\nruntime.gopark(0x293c001?, 0x0?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 3 [GC sweep wait]:\r\n\truntime/proc.go:293 +0x25\r\ncreated by runtime.init.6\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc00013cfe8 sp=0xc00013cfe0 pc=0x4711e1\r\nruntime.goexit()\r\n\truntime/proc.go:305 +0xb0 fp=0xc00013cfe0 sp=0xc00013cfb0 pc=0x43ce50\r\nruntime.forcegchelper()\r\n\truntime/proc.go:387\r\nruntime.goparkunlock(...)\r\n\truntime/proc.go:381 +0xd6 fp=0xc00013cfb0 sp=0xc00013cf90 pc=0x43d016\r\nruntime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)\r\ngoroutine 2 [force gc (idle), 6205 minutes]:\r\n\truntime/asm_amd64.s:1598 +0x1 fp=0xc021153fe8 sp=0xc021153fe0 pc=0x4711e1\r\nruntime.goexit()\r\n\truntime/proc.go:250 +0x207 fp=0xc021153fe0 sp=0xc021153f80 pc=0x43cbe7\r\nruntime.main()\r\n\tgithub.com/ethereum/go-ethereum/cmd/geth/main.go:265 +0x47 fp=0xc021153f80 sp=0xc021153f30 pc=0x147d807\r\nmain.main()\r\n\tgithub.com/urfave/cli/v2@v2.17.2-0.20221006022127-8f469abc00aa/app.go:252\r\ngithub.com/urfave/cli/v2.(*App).Run(...)\r\n\tgithub.com/urfave/cli/v2@v2.17.2-0.20221006022127-8f469abc00aa/app.go:395 +0x1070 fp=0xc021153f30 sp=0xc021153c50 pc=0xe982f0\r\ngithub.com/urfave/cli/v2.(*App).RunContext(0xc0001f8e00, {0x1c84d30?, 0xc0001b2000}, {0xc0001b0000, 0x13, 0x14})\r\n\tgithub.com/ethereum/go-ethereum/cmd/geth/main.go:344 +0x14a fp=0xc021153c50 sp=0xc021153bb8 pc=0x147df4a\r\nmain.geth(0xc00097a2c0)\r\n\tgithub.com/ethereum/go-ethereum/node/node.go:541\r\ngithub.com/ethereum/go-ethereum/node.(*Node).Wait(...)\r\n\truntime/chan.go:442 +0x18 fp=0xc021153bb8 sp=0xc021153b90 pc=0x407c58\r\nruntime.chanrecv1(0xc000a55c20?, 0xc000205340?)\r\n\truntime/chan.go:583 +0x49d fp=0xc021153b90 sp=0xc021153b00 pc=0x40815d\r\nruntime.chanrecv(0xc00018e6c0, 0x0, 0x1)\r\n\truntime/proc.go:381 +0xd6 fp=0xc021153b00 sp=0xc021153ae0 pc=0x43d016\r\nruntime.gopark(0xc0160f9b28?, 0xea381c?, 0x22?, 0x65?, 0x1926522?)\r\ngoroutine 1 [chan receive, 6205 minutes]:\r\n\truntime/asm_amd64.s:452 +0x43 fp=0x7f6d084f1a48 sp=0x7f6d084f1a38 pc=0x46efa3\r\nruntime.mcall()\r\n\truntime/proc.go:3511 +0x12d fp=0x7f6d084f1a38 sp=0x7f6d084f1a08 pc=0x443a8d\r\nruntime.park_m(0xc051e65380?)\r\n\truntime/proc.go:3366 +0xd1 fp=0x7f6d084f1a08 sp=0x7f6d084f19d0 pc=0x443591\r\nruntime.schedule()\r\n\truntime/proc.go:3244 +0x49 fp=0x7f6d084f19d0 sp=0x7f6d084f19b0 pc=0x4431a9\r\nruntime.resetspinning()\r\n\truntime/proc.go:2541 +0xf6 fp=0x7f6d084f19b0 sp=0x7f6d084f1980 pc=0x441676\r\nruntime.wakep()\r\n\truntime/proc.go:2403 +0xac fp=0x7f6d084f1980 sp=0x7f6d084f1930 pc=0x44104c\r\nruntime.startm(0xc00007d900, 0x1)\r\n\truntime/proc.go:805 +0x36 fp=0x7f6d084f1930 sp=0x7f6d084f1908 pc=0x43e176\r\nruntime.mReserveID()\r\n\truntime/proc.go:789 +0x8c fp=0x7f6d084f1908 sp=0x7f6d084f18e0 pc=0x43e12c\r\nruntime.checkmcount()\r\n\truntime/panic.go:1047 +0x5d fp=0x7f6d084f18e0 sp=0x7f6d084f18b0 pc=0x43a2fd\r\nruntime.throw({0x1938c67?, 0x1?})\r\nruntime stack:\r\nfatal error: thread exhaustion\r\nruntime: program exceeds 10000-thread limit\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547237319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547246251",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1547246251",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1547246251,
    "node_id": "IC_kwDOAOvK985cORqr",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-15T06:11:26Z",
    "updated_at": "2023-05-15T06:11:26Z",
    "author_association": "MEMBER",
    "body": "Can you paste / upload us the entire crash dump? If something's spinning up threads like crazy, those should be visible in the goroutine dump, but we need the entire thing to find what's so many and stuck that it piled unbounded.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1547246251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1548577353",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1548577353",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1548577353,
    "node_id": "IC_kwDOAOvK985cTWpJ",
    "user": {
      "login": "zimbabao",
      "id": 171239,
      "node_id": "MDQ6VXNlcjE3MTIzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/171239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zimbabao",
      "html_url": "https://github.com/zimbabao",
      "followers_url": "https://api.github.com/users/zimbabao/followers",
      "following_url": "https://api.github.com/users/zimbabao/following{/other_user}",
      "gists_url": "https://api.github.com/users/zimbabao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zimbabao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zimbabao/subscriptions",
      "organizations_url": "https://api.github.com/users/zimbabao/orgs",
      "repos_url": "https://api.github.com/users/zimbabao/repos",
      "events_url": "https://api.github.com/users/zimbabao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zimbabao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-15T21:05:42Z",
    "updated_at": "2023-05-15T21:05:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I am attaching more logs. This is what I could retrieve from my logs storage.\r\n[geth-crash.log](https://github.com/ethereum/go-ethereum/files/11481931/geth-crash.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1548577353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1602256762",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1602256762",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1602256762,
    "node_id": "IC_kwDOAOvK985fgH96",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T08:48:57Z",
    "updated_at": "2023-06-22T08:50:13Z",
    "author_association": "MEMBER",
    "body": "```\r\n$ more geth-crash.log | grep handleCall\\( | wc -l \r\n1185\r\n```\r\n```\r\n$ more geth-crash.log | grep ethapi.DoCall.func2 | wc -l \r\n1127\r\n```\r\nLots of RPC calls going on",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1602256762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1602286226",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27260#issuecomment-1602286226",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27260",
    "id": 1602286226,
    "node_id": "IC_kwDOAOvK985fgPKS",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T09:08:57Z",
    "updated_at": "2023-06-22T09:08:57Z",
    "author_association": "MEMBER",
    "body": "One theory here is that this crash happens because too many goroutines get stuck in I/O. When a goroutine blocks in a syscall for long enough, the scheduler will create a new thread to keep running. Overloading the node with requests can result in this condition.\r\n\r\nWe could try to prevent this by limiting the number of concurrent requests, either in the database, or in the RPC layer.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1602286226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

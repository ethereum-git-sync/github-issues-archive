{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28175",
  "id": 1907076937,
  "node_id": "I_kwDOAOvK985xq69J",
  "number": 28175,
  "title": "Use next block's context for eth_estimateGas",
  "user": {
    "login": "s1na",
    "id": 1591639,
    "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/s1na",
    "html_url": "https://github.com/s1na",
    "followers_url": "https://api.github.com/users/s1na/followers",
    "following_url": "https://api.github.com/users/s1na/following{/other_user}",
    "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
    "organizations_url": "https://api.github.com/users/s1na/orgs",
    "repos_url": "https://api.github.com/users/s1na/repos",
    "events_url": "https://api.github.com/users/s1na/events{/privacy}",
    "received_events_url": "https://api.github.com/users/s1na/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-09-21T14:09:23Z",
  "updated_at": "2023-10-11T06:33:17Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Nethermind is using the next block's context for eth_estimateGas which seems to be a sane default. This is particularly important because block number and timestamp are exposed to EVM. They merged a PR which increases the timestamp by 12s: https://github.com/NethermindEth/nethermind/pull/6037.\r\n\r\nWe could add the block overrides and have users set this explicitly even if we don't do the defaults.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1729709625",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28175#issuecomment-1729709625",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
    "id": 1729709625,
    "node_id": "IC_kwDOAOvK985nGUY5",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-21T14:33:37Z",
    "updated_at": "2023-09-21T14:33:37Z",
    "author_association": "MEMBER",
    "body": "I'm unsure if that makes much sense/difference. If you're tx relies on the timestamp, then the latest block or the next block will both be wrong, because by the time the tx executes, it will again change timestamps.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1729709625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1729960414",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28175#issuecomment-1729960414",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
    "id": 1729960414,
    "node_id": "IC_kwDOAOvK985nHRne",
    "user": {
      "login": "joohhnnn",
      "id": 68833933,
      "node_id": "MDQ6VXNlcjY4ODMzOTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/68833933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joohhnnn",
      "html_url": "https://github.com/joohhnnn",
      "followers_url": "https://api.github.com/users/joohhnnn/followers",
      "following_url": "https://api.github.com/users/joohhnnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/joohhnnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joohhnnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joohhnnn/subscriptions",
      "organizations_url": "https://api.github.com/users/joohhnnn/orgs",
      "repos_url": "https://api.github.com/users/joohhnnn/repos",
      "events_url": "https://api.github.com/users/joohhnnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joohhnnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-21T16:56:09Z",
    "updated_at": "2023-09-21T16:56:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "How about introducing a new method, like eth_estimateGasCustom, where we can manually set the block number and timestamp?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1729960414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1730872718",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28175#issuecomment-1730872718",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
    "id": 1730872718,
    "node_id": "IC_kwDOAOvK985nKwWO",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T06:28:25Z",
    "updated_at": "2023-09-22T06:28:25Z",
    "author_association": "MEMBER",
    "body": "What's the point? If it's gonna be \"incorrect\" anyway?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1730872718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1730882772",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28175#issuecomment-1730882772",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
    "id": 1730882772,
    "node_id": "IC_kwDOAOvK985nKyzU",
    "user": {
      "login": "joohhnnn",
      "id": 68833933,
      "node_id": "MDQ6VXNlcjY4ODMzOTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/68833933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joohhnnn",
      "html_url": "https://github.com/joohhnnn",
      "followers_url": "https://api.github.com/users/joohhnnn/followers",
      "following_url": "https://api.github.com/users/joohhnnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/joohhnnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joohhnnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joohhnnn/subscriptions",
      "organizations_url": "https://api.github.com/users/joohhnnn/orgs",
      "repos_url": "https://api.github.com/users/joohhnnn/repos",
      "events_url": "https://api.github.com/users/joohhnnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joohhnnn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T06:39:10Z",
    "updated_at": "2023-09-22T06:39:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "> What's the point? If it's gonna be \"incorrect\" anyway?\r\n\r\nThe point is that you can estimate how much gas is needed under the correct conditions, rather than constantly failing to get an accurate gas estimate due to issues like the timestamp or block number. For example, let's say the current block number is 100, and the contract specifies that the block number must be greater than 200. With a custom estimate, you can overwrite the block number so that you don't have to wait until block 200 to get an accurate gas estimate.\r\n\r\nThen, I believe using the estimate of the next block as the default value for the point could be highly effective for scenarios like MEV, which have a strong demand for gas estimation for the next block, and where transactions are likely to be executed in the very next block?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1730882772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1756915543",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28175#issuecomment-1756915543",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28175",
    "id": 1756915543,
    "node_id": "IC_kwDOAOvK985ouGdX",
    "user": {
      "login": "bnovil",
      "id": 22814963,
      "node_id": "MDQ6VXNlcjIyODE0OTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/22814963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bnovil",
      "html_url": "https://github.com/bnovil",
      "followers_url": "https://api.github.com/users/bnovil/followers",
      "following_url": "https://api.github.com/users/bnovil/following{/other_user}",
      "gists_url": "https://api.github.com/users/bnovil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bnovil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bnovil/subscriptions",
      "organizations_url": "https://api.github.com/users/bnovil/orgs",
      "repos_url": "https://api.github.com/users/bnovil/repos",
      "events_url": "https://api.github.com/users/bnovil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bnovil/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T06:33:17Z",
    "updated_at": "2023-10-11T06:33:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "It seems useful in some cases. I'd like to make a PR.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1756915543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

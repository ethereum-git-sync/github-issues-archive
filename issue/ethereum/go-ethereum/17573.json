{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17573",
  "id": 356399363,
  "node_id": "MDU6SXNzdWUzNTYzOTkzNjM=",
  "number": 17573,
  "title": "feature request: remove invalid proposal from memory in clique",
  "user": {
    "login": "manxiaqu",
    "id": 11518633,
    "node_id": "MDQ6VXNlcjExNTE4NjMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11518633?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/manxiaqu",
    "html_url": "https://github.com/manxiaqu",
    "followers_url": "https://api.github.com/users/manxiaqu/followers",
    "following_url": "https://api.github.com/users/manxiaqu/following{/other_user}",
    "gists_url": "https://api.github.com/users/manxiaqu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/manxiaqu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/manxiaqu/subscriptions",
    "organizations_url": "https://api.github.com/users/manxiaqu/orgs",
    "repos_url": "https://api.github.com/users/manxiaqu/repos",
    "events_url": "https://api.github.com/users/manxiaqu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/manxiaqu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-09-03T08:08:47Z",
  "updated_at": "2019-10-25T11:59:04Z",
  "closed_at": "2019-10-25T11:59:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Clique will check proposal and add a valid one to header randomly during prepare. But do nothing if proposal is invalid. \r\nConsidering the normal situation below:\r\n* A propose to remove B from sealer lists, and passed in few days. But the node will keep **checking** the proposals which became invalid ever since the B is already removed from sealer list. \r\n* A propose to add B to sealer lists, but failed. In this situation, A will try to propose this proposal **all the time** since it is always valid. But the decision made by poa sealers may not changed in few days. So A's working on keeping proposing to add B is meaningless.\r\n\r\nI have two thoughts about this:\r\n1. removing proposal once included in header: but this may come with the problem that the proposal may be included in the block of side chain, so will not be calculated.\r\n2. removing proposal once the proposal is not valid, it may do some meaningless proposal but will not face the problem 1 \r\n\r\nSo i suggest removing the invalid proposal during prepare in clique.",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/418038569",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17573#issuecomment-418038569",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573",
    "id": 418038569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODAzODU2OQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-03T08:20:23Z",
    "updated_at": "2018-09-03T08:20:23Z",
    "author_association": "MEMBER",
    "body": "Might be meaningful to clear invalid proposals at certain times, e.g. after an epoch-interval or something",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/418038569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/420598104",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17573#issuecomment-420598104",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573",
    "id": 420598104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDU5ODEwNA==",
    "user": {
      "login": "manxiaqu",
      "id": 11518633,
      "node_id": "MDQ6VXNlcjExNTE4NjMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11518633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/manxiaqu",
      "html_url": "https://github.com/manxiaqu",
      "followers_url": "https://api.github.com/users/manxiaqu/followers",
      "following_url": "https://api.github.com/users/manxiaqu/following{/other_user}",
      "gists_url": "https://api.github.com/users/manxiaqu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/manxiaqu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/manxiaqu/subscriptions",
      "organizations_url": "https://api.github.com/users/manxiaqu/orgs",
      "repos_url": "https://api.github.com/users/manxiaqu/repos",
      "events_url": "https://api.github.com/users/manxiaqu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/manxiaqu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-12T10:31:44Z",
    "updated_at": "2018-09-12T10:31:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "i'm agree with you basically, since the proposal may not be included in a block in canonical chain. But the time interval should not be too long. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/420598104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/531197406",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17573#issuecomment-531197406",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17573",
    "id": 531197406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMTE5NzQwNg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-09-13T11:12:17Z",
    "updated_at": "2019-09-13T11:12:17Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/531197406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28173",
  "id": 1906997334,
  "node_id": "I_kwDOAOvK985xqnhW",
  "number": 28173,
  "title": "Geth 1.13.1 - Two WebSockets opening with --ws flag",
  "user": {
    "login": "tomryan01",
    "id": 69367638,
    "node_id": "MDQ6VXNlcjY5MzY3NjM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/69367638?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tomryan01",
    "html_url": "https://github.com/tomryan01",
    "followers_url": "https://api.github.com/users/tomryan01/followers",
    "following_url": "https://api.github.com/users/tomryan01/following{/other_user}",
    "gists_url": "https://api.github.com/users/tomryan01/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tomryan01/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tomryan01/subscriptions",
    "organizations_url": "https://api.github.com/users/tomryan01/orgs",
    "repos_url": "https://api.github.com/users/tomryan01/repos",
    "events_url": "https://api.github.com/users/tomryan01/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tomryan01/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-09-21T13:32:18Z",
  "updated_at": "2023-09-21T13:32:18Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.13.1-stable`\r\nCL client & version: geth@v1.13.1\r\nOS & Version: WSL Debian GNU/Linux 12 (bookworm)\r\n\r\n#### Expected behaviour\r\n\r\n`geth --ws=false` or `geth` should run without WebSocket enabled\r\n`geth --ws --ws.port 8555` should run geth with WebSocket enabled on port 8555\r\n\r\n#### Actual behaviour\r\n`geth --ws=false` or `geth`\r\n\r\n````\r\nINFO [09-21|14:27:38.470] WebSocket enabled                        url=ws://127.0.0.1:8551\r\nINFO [09-21|14:27:38.471] HTTP server started                      endpoint=127.0.0.1:8551 auth=true prefix= cors=localhost vhosts=localhost\r\n````\r\n\r\nand for `geth --ws --ws.port 8555` \r\n\r\n````\r\nINFO [09-21|14:29:16.665] WebSocket enabled                        url=ws://127.0.0.1:8555\r\nINFO [09-21|14:29:16.665] WebSocket enabled                        url=ws://127.0.0.1:8551\r\nINFO [09-21|14:29:16.665] HTTP server started                      endpoint=127.0.0.1:8551 auth=true prefix= cors=localhost vhosts=localhost\r\n````\r\n\r\n#### Steps to reproduce the behaviour\r\n- Install fresh geth version 1.13.1 \r\n- Run `geth --ws=false`\r\n- Run `geth --ws --ws.port 8555`\r\n\r\nI have also tried removing the contents of my `.ethereum` with the same results \r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO [09-21|14:29:16.517] Starting Geth on Ethereum mainnet... \r\nINFO [09-21|14:29:16.518] Bumping default cache on mainnet         provided=1024 updated=4096\r\nINFO [09-21|14:29:16.519] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [09-21|14:29:16.522] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nWARN [09-21|14:29:16.524] Sanitizing cache to Go's GC limits       provided=4096 updated=1980\r\nINFO [09-21|14:29:16.526] Using pebble as the backing database\r\nINFO [09-21|14:29:16.526] Allocated cache and file handles         database=/home/tomryan01/.ethereum/geth/chaindata cache=990.00MiB handles=2048\r\nINFO [09-21|14:29:16.527] Opened ancient database                  database=/home/tomryan01/.ethereum/geth/chaindata/ancient/chain readonly=true\r\nINFO [09-21|14:29:16.527] State scheme set to already existing     scheme=hash\r\nINFO [09-21|14:29:16.528] Set global gas cap                       cap=50,000,000\r\nINFO [09-21|14:29:16.528] Initializing the KZG library             backend=gokzg\r\nINFO [09-21|14:29:16.568] Allocated trie memory caches             clean=297.00MiB dirty=495.00MiB\r\nINFO [09-21|14:29:16.568] Using pebble as the backing database \r\nINFO [09-21|14:29:16.568] Allocated cache and file handles         database=/home/tomryan01/.ethereum/geth/chaindata cache=990.00MiB handles=2048\r\nINFO [09-21|14:29:16.600] Opened ancient database                  database=/home/tomryan01/.ethereum/geth/chaindata/ancient/chain readonly=false\r\nINFO [09-21|14:29:16.602] Initialising Ethereum protocol           network=1 dbversion=8\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.603] ---------------------------------------------------------------------------------------------------------------------------------------------------------\r\nINFO [09-21|14:29:16.603] Chain ID:  1 (mainnet)\r\nINFO [09-21|14:29:16.603] Consensus: Beacon (proof-of-stake), merged from Ethash (proof-of-work)\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.603] Pre-Merge hard forks (block based):\r\nINFO [09-21|14:29:16.603]  - Homestead:                   #1150000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/homestead.md)\r\nINFO [09-21|14:29:16.603]  - DAO Fork:                    #1920000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/dao-fork.md)\r\nINFO [09-21|14:29:16.603]  - Tangerine Whistle (EIP 150): #2463000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/tangerine-whistle.md)\r\nINFO [09-21|14:29:16.603]  - Spurious Dragon/1 (EIP 155): #2675000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/spurious-dragon.md)\r\nINFO [09-21|14:29:16.603]  - Spurious Dragon/2 (EIP 158): #2675000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/spurious-dragon.md)\r\nINFO [09-21|14:29:16.603]  - Byzantium:                   #4370000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/byzantium.md)\r\nINFO [09-21|14:29:16.603]  - Constantinople:              #7280000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/constantinople.md)\r\nINFO [09-21|14:29:16.603]  - Petersburg:                  #7280000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/petersburg.md)\r\nINFO [09-21|14:29:16.603]  - Istanbul:                    #9069000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/istanbul.md)\r\nINFO [09-21|14:29:16.603]  - Muir Glacier:                #9200000  (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/muir-glacier.md)\r\nINFO [09-21|14:29:16.603]  - Berlin:                      #12244000 (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/berlin.md)\r\nINFO [09-21|14:29:16.603]  - London:                      #12965000 (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/london.md)\r\nINFO [09-21|14:29:16.603]  - Arrow Glacier:               #13773000 (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md)\r\nINFO [09-21|14:29:16.603]  - Gray Glacier:                #15050000 (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md)\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.603] Merge configured: \r\nINFO [09-21|14:29:16.603]  - Hard-fork specification:    https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/paris.md\r\nINFO [09-21|14:29:16.603]  - Network known to be merged: true\r\nINFO [09-21|14:29:16.603]  - Total terminal difficulty:  58750000000000000000000\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.603] Post-Merge hard forks (timestamp based):\r\nINFO [09-21|14:29:16.603]  - Shanghai:                    @1681338455 (https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md)\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.603] ---------------------------------------------------------------------------------------------------------------------------------------------------------\r\nINFO [09-21|14:29:16.603]\r\nINFO [09-21|14:29:16.604] Loaded most recent local block           number=0 hash=d4e567..cb8fa3 td=17,179,869,184 age=54y6mo1d\r\nINFO [09-21|14:29:16.606] Initialized transaction indexer          limit=2,350,000\r\nINFO [09-21|14:29:16.606] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [09-21|14:29:16.606] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [09-21|14:29:16.627] Chain post-merge, sync via beacon client \r\nINFO [09-21|14:29:16.627] Gasprice oracle is ignoring threshold set threshold=2\r\nWARN [09-21|14:29:16.632] Engine API enabled                       protocol=eth\r\nINFO [09-21|14:29:16.633] Starting peer-to-peer node               instance=Geth/v1.13.1-stable-3f40e65c/linux-amd64/go1.19.8\r\nINFO [09-21|14:29:16.662] New local node record                    seq=1,695,302,151,789 id=24b116c154e4b046 ip=127.0.0.1 udp=30303 tcp=30303\r\nINFO [09-21|14:29:16.662] Started P2P networking                   self=enode://d680337000c60a6834a3cb936cd4012b6d3b3592b2a4a1ecc6f76ad045e281c01828d3701ca67c5048456b2715c6f29c9c8f5c5cef419f159787079c86edfe4c@127.0.0.1:30303\r\nINFO [09-21|14:29:16.664] IPC endpoint opened                      url=/home/tomryan01/.ethereum/geth.ipc\r\nINFO [09-21|14:29:16.664] Loaded JWT secret file                   path=/home/tomryan01/.ethereum/geth/jwtsecret crc32=0xdd8ac813\r\nINFO [09-21|14:29:16.665] WebSocket enabled                        url=ws://127.0.0.1:8555\r\nINFO [09-21|14:29:16.665] WebSocket enabled                        url=ws://127.0.0.1:8551\r\nINFO [09-21|14:29:16.665] HTTP server started                      endpoint=127.0.0.1:8551 auth=true prefix= cors=localhost vhosts=localhost\r\nINFO [09-21|14:29:25.751] New local node record                    seq=1,695,302,151,790 id=24b116c154e4b046 ip=82.12.77.19 udp=53343 tcp=30303\r\nINFO [09-21|14:29:26.735] Looking for peers                        peercount=1 tried=10 static=0\r\nINFO [09-21|14:29:36.761] Looking for peers                        peercount=1 tried=28 static=0\r\nINFO [09-21|14:29:46.841] Looking for peers                        peercount=1 tried=30 static=0\r\nWARN [09-21|14:29:51.634] Post-merge network, but no beacon client seen. Please launch one to follow the chain! \r\nINFO [09-21|14:29:56.971] Looking for peers                        peercount=1 tried=31 static=0\r\nINFO [09-21|14:30:07.064] Looking for peers                        peercount=1 tried=23 static=0\r\nINFO [09-21|14:30:37.119] Looking for peers                        peercount=2 tried=37 static=0\r\n````\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28173/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

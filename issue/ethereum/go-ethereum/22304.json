{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22304",
  "id": 806019458,
  "node_id": "MDU6SXNzdWU4MDYwMTk0NTg=",
  "number": 22304,
  "title": "Running geth results in a dropped Ethernet connection ",
  "user": {
    "login": "aydwi",
    "id": 29029116,
    "node_id": "MDQ6VXNlcjI5MDI5MTE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aydwi",
    "html_url": "https://github.com/aydwi",
    "followers_url": "https://api.github.com/users/aydwi/followers",
    "following_url": "https://api.github.com/users/aydwi/following{/other_user}",
    "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions",
    "organizations_url": "https://api.github.com/users/aydwi/orgs",
    "repos_url": "https://api.github.com/users/aydwi/repos",
    "events_url": "https://api.github.com/users/aydwi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aydwi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-11T01:53:55Z",
  "updated_at": "2021-05-20T01:06:29Z",
  "closed_at": "2021-03-04T08:59:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: \r\n\r\nVersion: 1.9.25-stable\r\nGit Commit: e7872729012a4871397307b12cc3f4772ffcbec6\r\nGit Commit Date: 20201211\r\nArchitecture: amd64\r\nProtocol Versions: [65 64 63]\r\nGo Version: go1.15.6\r\nOperating System: windows\r\nGOPATH=C:\\Users\\username\\go\r\nGOROOT=go\r\n\r\nOS & Version: Windows\r\n\r\n![Capture](https://user-images.githubusercontent.com/29029116/107594191-56313a80-6c37-11eb-97fd-48512b678c6a.PNG)\r\n\r\n\r\n#### Expected behaviour\r\n\r\n`geth` should not cause the Ethernet connection to drop.\r\n\r\n#### Actual behaviour\r\n\r\nAfter `geth` has been running for, say a few minutes, Windows reports \"No Internet\" on the Ethernet adapter in use.\r\n\r\n![Capture](https://user-images.githubusercontent.com/29029116/107594523-161e8780-6c38-11eb-9b7d-546df0323143.PNG)\r\n\r\nRunning the Windows Network Troubleshooter resolves the problem **temporarily** with the following message - _\"The default gateway is not available\"_\r\n\r\n![image](https://user-images.githubusercontent.com/29029116/107595012-7eba3400-6c39-11eb-8d29-0f6e49088d1a.png)\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nStart geth to sync the Ethereum blockchain locally.\r\n\r\n`geth --datadir <dir> --http --etherbase <ethereum_address>`\r\n\r\nWait for a few minutes, the network connection on the current Ethernet adapter should drop.\r\n\r\n\r\n#### Hardware Details\r\n\r\n```\r\nDescription . . . . . . . . . . : Realtek Gaming 2.5GbE Family Controller\r\nManufacturer  . . . . . . . . . : Realtek\r\nProvider  . . . . . . . . . . . : Realtek\r\nVersion . . . . . . . . . . . . : 10.39.212.2020\r\n```\r\n\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781154612",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-781154612",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 781154612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTE1NDYxMg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-18T08:28:01Z",
    "updated_at": "2021-02-18T08:28:01Z",
    "author_association": "MEMBER",
    "body": "I've seen issues like this from time to time, when the file descriptors run out -- that's on unix systems though, where sockets and files are \"same same\", so opening too many files causes networking to start failing. Don't know if it's analoguous to Windows. \r\n\r\n1. Could you check what geth says during startup, about how many fine descriptors it allocates? \r\n2. Could you check what the OS reports as available filedescriptors when this happens? (I'm not sure how to check that on windows, so can't help you there)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781154612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781250022",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-781250022",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 781250022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTI1MDAyMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-18T10:38:50Z",
    "updated_at": "2021-02-18T10:38:50Z",
    "author_association": "MEMBER",
    "body": "For what it's worth, I personally managed to reliably crash certain routers with IPFS when it made a few thousand connections. How do you fix the issue when it happens? Stop Geth? Restart windows? Restart the router?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/781250022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/813104617",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-813104617",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 813104617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzEwNDYxNw==",
    "user": {
      "login": "aydwi",
      "id": 29029116,
      "node_id": "MDQ6VXNlcjI5MDI5MTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aydwi",
      "html_url": "https://github.com/aydwi",
      "followers_url": "https://api.github.com/users/aydwi/followers",
      "following_url": "https://api.github.com/users/aydwi/following{/other_user}",
      "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions",
      "organizations_url": "https://api.github.com/users/aydwi/orgs",
      "repos_url": "https://api.github.com/users/aydwi/repos",
      "events_url": "https://api.github.com/users/aydwi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aydwi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-04T21:50:14Z",
    "updated_at": "2021-04-04T21:50:14Z",
    "author_association": "NONE",
    "body": "@holiman I will look into the descriptor situation and update here.\r\n\r\n@karalabe Doing any of the following fixed it - Restarting the router; rebooting Windows; running the in-built network troubleshooter. I am not sure if simply stopping Geth will eventually restore the connection later on, but it might be worth investigating.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/813104617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/826787520",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-826787520",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 826787520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNjc4NzUyMA==",
    "user": {
      "login": "01zaporozhets",
      "id": 49445034,
      "node_id": "MDQ6VXNlcjQ5NDQ1MDM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/49445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/01zaporozhets",
      "html_url": "https://github.com/01zaporozhets",
      "followers_url": "https://api.github.com/users/01zaporozhets/followers",
      "following_url": "https://api.github.com/users/01zaporozhets/following{/other_user}",
      "gists_url": "https://api.github.com/users/01zaporozhets/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/01zaporozhets/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/01zaporozhets/subscriptions",
      "organizations_url": "https://api.github.com/users/01zaporozhets/orgs",
      "repos_url": "https://api.github.com/users/01zaporozhets/repos",
      "events_url": "https://api.github.com/users/01zaporozhets/events{/privacy}",
      "received_events_url": "https://api.github.com/users/01zaporozhets/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-26T12:15:22Z",
    "updated_at": "2021-04-26T12:15:22Z",
    "author_association": "NONE",
    "body": "Hi @aydwi , just wondering if you ever managed to figure out what was causing this in the end ? I am building a new PC and have started observing the same issue. Weirdest thing being that it's almost certainly not the router, as it's plugged into exactly the same router and ethernet cable as my old PC was, and that runs geth just fine for days on end.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/826787520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/827183791",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-827183791",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 827183791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNzE4Mzc5MQ==",
    "user": {
      "login": "aydwi",
      "id": 29029116,
      "node_id": "MDQ6VXNlcjI5MDI5MTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aydwi",
      "html_url": "https://github.com/aydwi",
      "followers_url": "https://api.github.com/users/aydwi/followers",
      "following_url": "https://api.github.com/users/aydwi/following{/other_user}",
      "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions",
      "organizations_url": "https://api.github.com/users/aydwi/orgs",
      "repos_url": "https://api.github.com/users/aydwi/repos",
      "events_url": "https://api.github.com/users/aydwi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aydwi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-26T22:29:27Z",
    "updated_at": "2021-04-26T22:29:37Z",
    "author_association": "NONE",
    "body": "@01zaporozhets Unfortunately, I could not find time to investigate this further.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/827183791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844603488",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22304#issuecomment-844603488",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22304",
    "id": 844603488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDYwMzQ4OA==",
    "user": {
      "login": "scripples",
      "id": 61815629,
      "node_id": "MDQ6VXNlcjYxODE1NjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/61815629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scripples",
      "html_url": "https://github.com/scripples",
      "followers_url": "https://api.github.com/users/scripples/followers",
      "following_url": "https://api.github.com/users/scripples/following{/other_user}",
      "gists_url": "https://api.github.com/users/scripples/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scripples/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scripples/subscriptions",
      "organizations_url": "https://api.github.com/users/scripples/orgs",
      "repos_url": "https://api.github.com/users/scripples/repos",
      "events_url": "https://api.github.com/users/scripples/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scripples/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T01:06:29Z",
    "updated_at": "2021-05-20T01:06:29Z",
    "author_association": "NONE",
    "body": "Just wanted to pop in to comment that I'm having the same issue. Shortly after syncing my ethernet connection drops, and I'm not able to connect again until I do one of the above fixes. It's also worth noting that swapping to wifi (without restarting the router) does not resolve the issue. I'm trying a couple of other things, including attempting to connect through a VPN, just to see what happens. I'd happily pursue the descriptor situation if someone could point me in the right direction; I don't know how to begin looking for that sort of thing.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/844603488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

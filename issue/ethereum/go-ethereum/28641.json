{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28641",
  "id": 2025125148,
  "node_id": "I_kwDOAOvK9854tPUc",
  "number": 28641,
  "title": "Geth stucking at synchronizing",
  "user": {
    "login": "Xardesso",
    "id": 112291196,
    "node_id": "U_kgDOBrFtfA",
    "avatar_url": "https://avatars.githubusercontent.com/u/112291196?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Xardesso",
    "html_url": "https://github.com/Xardesso",
    "followers_url": "https://api.github.com/users/Xardesso/followers",
    "following_url": "https://api.github.com/users/Xardesso/following{/other_user}",
    "gists_url": "https://api.github.com/users/Xardesso/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Xardesso/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Xardesso/subscriptions",
    "organizations_url": "https://api.github.com/users/Xardesso/orgs",
    "repos_url": "https://api.github.com/users/Xardesso/repos",
    "events_url": "https://api.github.com/users/Xardesso/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Xardesso/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-12-05T01:57:02Z",
  "updated_at": "2023-12-05T12:14:46Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I trying to run my eth mainnet node using Geth and prysm but synchronizing process still stucking.And when I stopping and restarting again this start form point when this started earlier and this everything goes into loop and I can't sync this.\n\nHardware \nRyzen 5 3600 \n16GB 3200 mhz ram \nOs \nWindows 11\n\nEverything goes:\n```\nINFO [12-05|02:29:14.015] Syncing: state download in progress synced=0.36% state=961.17MiB accounts=828,468@197.22MiB slots=3,547,812@720.93MiB codes=13712@43.02MiB eta=5h39m55.204s \n```\n\nBut at some point:\n```\nINFO [12-05|02:29:14.329] Forkchoice requested sync to new head number=18,716,880 hash=6f3350..44c33b finalized=18,716,804 runtime: out of memory: cannot allocate 4194304-byte block (1434615808 in use) fatal error: out of memory goroutine 69976 [running]: runtime.throw({0x2372da2, 0xd}) runtime/panic.go:1077 +0x4d fp=0x51ee3658 sp=0x51ee3644 pc=0xd31a9d runtime.(*mcache).allocLarge(0x60109c8, 0x100000, 0x1) runtime/mcache.go:236 +0x1c5 fp=0x51ee3684 sp=0x51ee3658 pc=0xd093a5 runtime.mallocgc(0x100000, 0x0, 0x0) runtime/malloc.go:1123 +0x5bd fp=0x51ee36d8 sp=0x51ee3684 pc=0xd00edd github.com/cockroachdb/pebble/internal/rawalloc.New(...) github.com/cockroachdb/pebble@v0.0.0-20230928194634-aa077af62593/internal/rawalloc/rawalloc.go:22 github.com/cockroachdb/pebble.(*Batch).grow(0x7ab550e0, 0x4f) github.com/cockroachdb/pebble@v0.0.0-20230928194634-aa077af62593/batch.go:1392 +0x9b fp=0x51ee36fc sp=0x51ee36d8 pc=0x146069b\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840069263",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28641#issuecomment-1840069263",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
    "id": 1840069263,
    "node_id": "IC_kwDOAOvK985trTqP",
    "user": {
      "login": "weiihann",
      "id": 47109095,
      "node_id": "MDQ6VXNlcjQ3MTA5MDk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47109095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/weiihann",
      "html_url": "https://github.com/weiihann",
      "followers_url": "https://api.github.com/users/weiihann/followers",
      "following_url": "https://api.github.com/users/weiihann/following{/other_user}",
      "gists_url": "https://api.github.com/users/weiihann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/weiihann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/weiihann/subscriptions",
      "organizations_url": "https://api.github.com/users/weiihann/orgs",
      "repos_url": "https://api.github.com/users/weiihann/repos",
      "events_url": "https://api.github.com/users/weiihann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/weiihann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T06:04:51Z",
    "updated_at": "2023-12-05T06:04:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the maintainers would appreciate it if you can provide the following details:\r\n1. Available disk space\r\n2. Geth version \r\n3. Geth startup command\r\n4. Memory usage logs\r\n\r\nMy guess is that you are trying to run a node on your regular laptop machine, which has a bunch of other processes running at the same time, then they all compete for the same limited RAM, causing geth to produce out-of-memory (OOM) error.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840069263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840343347",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28641#issuecomment-1840343347",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
    "id": 1840343347,
    "node_id": "IC_kwDOAOvK985tsWkz",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T09:18:01Z",
    "updated_at": "2023-12-05T09:18:01Z",
    "author_association": "MEMBER",
    "body": "> And when I stopping and restarting again\r\n\r\nStopping and restarting _during_ sync is _very_ bad for performance, since it may take quite some time to amass a good set of peers, and the chain progresses while you restart, so the local data you have is getting stale. \r\n\r\n> this everything goes into loop\r\n\r\nSo it may seem - how long has it been syncing? \r\n\r\n> ` Syncing: state download in progress synced=0.36% state=961.17MiB accounts=828,468@197.22MiB slots=3,547,812@720.93MiB codes=13712@43.02MiB eta=5h39m55.204s `\r\n\r\nIt gave you and eta of ~6 hours. \r\n\r\n> `Forkchoice requested sync to`\r\n\r\nThat's not an error, it's informing you that according to the CL node, the chain is progressing. That is to be expected. \r\n\r\nSo far nothing you have described indicates an error. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840343347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840653366",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28641#issuecomment-1840653366",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
    "id": 1840653366,
    "node_id": "IC_kwDOAOvK985ttiQ2",
    "user": {
      "login": "Xardesso",
      "id": 112291196,
      "node_id": "U_kgDOBrFtfA",
      "avatar_url": "https://avatars.githubusercontent.com/u/112291196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Xardesso",
      "html_url": "https://github.com/Xardesso",
      "followers_url": "https://api.github.com/users/Xardesso/followers",
      "following_url": "https://api.github.com/users/Xardesso/following{/other_user}",
      "gists_url": "https://api.github.com/users/Xardesso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Xardesso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Xardesso/subscriptions",
      "organizations_url": "https://api.github.com/users/Xardesso/orgs",
      "repos_url": "https://api.github.com/users/Xardesso/repos",
      "events_url": "https://api.github.com/users/Xardesso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Xardesso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T11:58:41Z",
    "updated_at": "2023-12-05T11:58:41Z",
    "author_association": "NONE",
    "body": "> I think the maintainers would appreciate it if you can provide the following details:\r\n> \r\n> 1. Available disk space\r\n> 2. Geth version\r\n> 3. Geth startup command\r\n> 4. Memory usage logs\r\n> \r\n\r\n> My guess is that you are trying to run a node on your regular laptop machine, which has a bunch of other processes running at the same time, then they all compete for the same limited RAM, causing geth to produce out-of-memory (OOM) error.\r\n\r\nAvilable disk space 74GB\r\nVersion: 1.13.5-stable\r\n\r\nGeth startup command \r\ngeth --mainnet --http --http.api eth,net,engine,admin --authrpc.jwtsecret=\"E:\\geth\\etherum\\jwt.hex\"\r\n\r\nPrysm startup command \r\nprysm.bat beacon-chain --execution-endpoint=http://localhost:8551 --mainnet --jwt-secret=\"E:\\geth\\etherum\\jwt.hex\" --accept-terms-of-use\r\n\r\nI created logs but i got this in .blg file which i cannot attach so i converted it into csv format \r\n[logfile.csv](https://github.com/ethereum/go-ethereum/files/13559679/logfile.csv)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840653366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840659491",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28641#issuecomment-1840659491",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
    "id": 1840659491,
    "node_id": "IC_kwDOAOvK985ttjwj",
    "user": {
      "login": "Xardesso",
      "id": 112291196,
      "node_id": "U_kgDOBrFtfA",
      "avatar_url": "https://avatars.githubusercontent.com/u/112291196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Xardesso",
      "html_url": "https://github.com/Xardesso",
      "followers_url": "https://api.github.com/users/Xardesso/followers",
      "following_url": "https://api.github.com/users/Xardesso/following{/other_user}",
      "gists_url": "https://api.github.com/users/Xardesso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Xardesso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Xardesso/subscriptions",
      "organizations_url": "https://api.github.com/users/Xardesso/orgs",
      "repos_url": "https://api.github.com/users/Xardesso/repos",
      "events_url": "https://api.github.com/users/Xardesso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Xardesso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T12:02:38Z",
    "updated_at": "2023-12-05T12:02:38Z",
    "author_association": "NONE",
    "body": "> > And when I stopping and restarting again\r\n> \r\n> Stopping and restarting _during_ sync is _very_ bad for performance, since it may take quite some time to amass a good set of peers, and the chain progresses while you restart, so the local data you have is getting stale.\r\n> \r\n> > this everything goes into loop\r\n> \r\n> So it may seem - how long has it been syncing?\r\n> \r\n> > `Syncing: state download in progress synced=0.36% state=961.17MiB accounts=828,468@197.22MiB slots=3,547,812@720.93MiB codes=13712@43.02MiB eta=5h39m55.204s`\r\n> \r\n> It gave you and eta of ~6 hours.\r\n> \r\n> > `Forkchoice requested sync to`\r\n> \r\n> That's not an error, it's informing you that according to the CL node, the chain is progressing. That is to be expected.\r\n> \r\n> So far nothing you have described indicates an error.\r\n\r\nBut I don't stop it manually, the program itself displays an error, so I reset it and turn it on again\r\ni can paste you screenshot from cmd \r\n\r\n![image](https://github.com/ethereum/go-ethereum/assets/112291196/2f561abc-4c7d-4bd6-8eee-9a97ef0ea84d)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840659491/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840676664",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28641#issuecomment-1840676664",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28641",
    "id": 1840676664,
    "node_id": "IC_kwDOAOvK985ttn84",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T12:13:16Z",
    "updated_at": "2023-12-05T12:14:46Z",
    "author_association": "MEMBER",
    "body": "The logfile is something else entirely, I have no idea what it is that you attached. The thing that you took a screenshot of, that is the log that would be interesting. \r\n\r\nYou seem to be running into out of memory, after allocating 1_297_448_960 bytes, or `1.3GB`. How much ram do you have? \r\n\r\nEDIT: Saw now, `16GB` ram reported from the get-go. It's a bit odd that you run out of it so early... \r\n\r\nAlso `74GB` is far too little, you need quite a lot more than that, particularly with `scheme=hash` (which is default) ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1840676664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15223",
  "id": 261852782,
  "node_id": "MDU6SXNzdWUyNjE4NTI3ODI=",
  "number": 15223,
  "title": "sar -q runq-sz > 2 should always be < 2",
  "user": {
    "login": "zbuckholz",
    "id": 5184426,
    "node_id": "MDQ6VXNlcjUxODQ0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5184426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zbuckholz",
    "html_url": "https://github.com/zbuckholz",
    "followers_url": "https://api.github.com/users/zbuckholz/followers",
    "following_url": "https://api.github.com/users/zbuckholz/following{/other_user}",
    "gists_url": "https://api.github.com/users/zbuckholz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zbuckholz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zbuckholz/subscriptions",
    "organizations_url": "https://api.github.com/users/zbuckholz/orgs",
    "repos_url": "https://api.github.com/users/zbuckholz/repos",
    "events_url": "https://api.github.com/users/zbuckholz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zbuckholz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-09-30T15:59:39Z",
  "updated_at": "2018-11-13T17:48:10Z",
  "closed_at": "2018-11-13T17:48:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version`\r\ngeth-linux-amd64-1.7.0-6c6c7b2a/geth version\r\nGeth\r\nVersion: 1.7.0-stable\r\nGit Commit: 6c6c7b2af3efdad4d2f64f70f3a724af434bbcd2\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.7.4\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/local/go\r\n\r\nOS & Version: Amazon Linux\r\nLinux x.x.x.x 4.9.43-17.39.amzn1.x86_64 #1 SMP Fri Sep 15 23:39:41 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n\r\nsar -q should always show runq-sz < 2 anything > 2 shows system processes (geth) stuck waiting for something and causing backup.\r\n\r\n#### Actual behaviour\r\n\r\n02:10:01 PM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15\r\n02:20:01 PM         2       142      3.38      3.46      3.02\r\n02:30:01 PM         4       142      4.19      3.72      3.31\r\n02:40:01 PM         3       142      3.62      3.71      3.53\r\n02:50:01 PM         1       142      3.76      3.76      3.65\r\n03:00:01 PM         0       142      0.70      1.52      2.54\r\n03:10:01 PM         2       142      2.64      2.25      2.35\r\n03:20:01 PM         5       142      3.53      2.98      2.62\r\n03:30:01 PM         4       141      3.23      2.95      2.70\r\n03:40:01 PM         0       142      0.68      1.36      2.02\r\n03:50:01 PM         2       142      0.81      0.90      1.44\r\nAverage:            2       142      2.65      2.66      2.72\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nyum -y install sysstat\r\nbake for an hour while running geth initial import\r\nsar -q\r\n\r\n\r\nCPU is idle because it's waiting for something to do, geth is blocking while waiting. \r\n\r\n\r\ntop - 15:55:37 up  2:22,  4 users,  load average: 0.81, 0.73, 1.17\r\nTasks: 119 total,   1 running, 118 sleeping,   0 stopped,   0 zombie\r\nCpu(s):  6.4%us,  0.7%sy,  0.0%ni, 92.8%id,  0.1%wa,  0.0%hi,  0.1%si,  0.0%st\r\nMem:  62882944k total, 28947816k used, 33935128k free,   157912k buffers\r\nSwap:        0k total,        0k used,        0k free, 26499960k cached\r\n\r\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                     \r\n 5784 root      20   0 5644m 1.0g  84m S 29.9  1.7 287:08.44 geth        \r\n\r\n\r\nWhat other information can I provide to help find cause?\r\n\r\nThanks\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333387366",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15223#issuecomment-333387366",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223",
    "id": 333387366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM4NzM2Ng==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-01T16:14:16Z",
    "updated_at": "2017-10-01T16:14:16Z",
    "author_association": "MEMBER",
    "body": "> bake for an hour while running geth initial import\r\n\r\nWith initial import you mean that geth is catching up with the chain through a network sync? Or do you load the chain from a file with `geth import <dump>`? Currently syncing from scratch over the network will take much longer than 1 hour in my experience. \r\n\r\nThe first way to determine what geth is doing is to check the logs. If you don't see any import activity you could check if geth is connected with the network and syncing. From the shell `geth attach -exec admin.peers` dumps a list of peers that geth is connected to. And `geth attach -exec eth.syncing` shows if geth is currently importing blocks/state.\r\n\r\nIf you don't now where to look for copy the last 20 lines of the log together with the output of the above commands in a gist and link it here.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333387366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426349259",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15223#issuecomment-426349259",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15223",
    "id": 426349259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjM0OTI1OQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-10-02T16:54:10Z",
    "updated_at": "2018-10-02T16:54:10Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/426349259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

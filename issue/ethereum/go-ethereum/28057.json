{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28057",
  "id": 1879609209,
  "node_id": "I_kwDOAOvK985wCI95",
  "number": 28057,
  "title": "background error: pebble/table: invalid table (bad magic number)",
  "user": {
    "login": "sundafa",
    "id": 24621599,
    "node_id": "MDQ6VXNlcjI0NjIxNTk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sundafa",
    "html_url": "https://github.com/sundafa",
    "followers_url": "https://api.github.com/users/sundafa/followers",
    "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
    "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
    "organizations_url": "https://api.github.com/users/sundafa/orgs",
    "repos_url": "https://api.github.com/users/sundafa/repos",
    "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sundafa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-09-04T06:37:08Z",
  "updated_at": "2023-09-05T08:05:15Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: geth version 1.12.2-stable-bed84606\r\nCL client & version: e.g. lighthouse@v4.3.0-dfcb336\r\nOS & Version: Linux\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nNormal sync\r\n\r\n#### Actual behaviour\r\n1. At around block height 8619871, the node seems to stop syncing, the lighthouse looks broken, when I resync the lighthouse, the goerli log is not synced and keeps printing this error\r\n2. Before using debug.setHead(hex) to set to 1000 blocks and after restarting, the node still prints this error, but at the synchronization block height\r\n\r\n#### Steps to reproduce the behaviour\r\nRun this command to sync the goerli archive node from scratch\r\n```\r\nserviceName=goerli-archive\r\nlisteningAddr='0.0.0.0'\r\nserviceCmd=\"/node/archive/goerli/bin/geth --datadir /node/archive/goerli/geth --goerli --syncmode='full' --gcmode=archive --rpc.evmtimeout='10s' --txlookuplimit=0 --rpc.gascap=600000000 --light.maxpeers=0 --http.vhosts=* --http.corsdomain=* --http --http.addr ${listeningAddr} --http.api eth,net,web3,debug,trace,txpool --ws.api=eth,net,web3,debug,trace,txpool --ws --ws.addr ${listeningAddr} --port 21030 --http.port 21031 --ws.port 21032 --authrpc.port 21033\"\r\n\r\n\r\nserviceName=goerli-archive-bn\r\nserviceCmd=\"/node/archive/goerli/bin/lighthouse bn -d /node/archive/goerli/lighthouse --network goerli --execution-endpoint 'http://127.0.0.1:21033' --execution-jwt '/node/archive/goerli/geth/geth/jwtsecret' --checkpoint-sync-url=https://sync-goerli.beaconcha.in --port 21039 --http --http-port 21037\"\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\nSep 04 07:31:10 geth[2006631]: 2023/09/04 07:31:10 background error: pebble/table: invalid table (bad magic number)\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1705801330",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28057#issuecomment-1705801330",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057",
    "id": 1705801330,
    "node_id": "IC_kwDOAOvK985lrHZy",
    "user": {
      "login": "jsvisa",
      "id": 3627395,
      "node_id": "MDQ6VXNlcjM2MjczOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3627395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsvisa",
      "html_url": "https://github.com/jsvisa",
      "followers_url": "https://api.github.com/users/jsvisa/followers",
      "following_url": "https://api.github.com/users/jsvisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsvisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsvisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsvisa/subscriptions",
      "organizations_url": "https://api.github.com/users/jsvisa/orgs",
      "repos_url": "https://api.github.com/users/jsvisa/repos",
      "events_url": "https://api.github.com/users/jsvisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsvisa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T00:45:45Z",
    "updated_at": "2023-09-05T00:46:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems like one or more sstables in pebble were corrupted, ref https://github.com/cockroachdb/pebble/issues/181\r\n\r\nDid this issue arise after you forced geth to restart(eg: `kill -9`)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1705801330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1705828862",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28057#issuecomment-1705828862",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057",
    "id": 1705828862,
    "node_id": "IC_kwDOAOvK985lrOH-",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T01:40:32Z",
    "updated_at": "2023-09-05T01:40:32Z",
    "author_association": "NONE",
    "body": "Maybe, look at the service status, there is an error log in ln, but the goerli data is damaged first\r\nIt may be that it takes up too much memory and is killed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1705828862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1706107995",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28057#issuecomment-1706107995",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057",
    "id": 1706107995,
    "node_id": "IC_kwDOAOvK985lsSRb",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T07:44:43Z",
    "updated_at": "2023-09-05T07:44:43Z",
    "author_association": "MEMBER",
    "body": "> Maybe, look at the service status, there is an error log in ln, but the goerli data is damaged first\r\n\r\nHave you made the log files available somewhere? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1706107995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1706138738",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28057#issuecomment-1706138738",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28057",
    "id": 1706138738,
    "node_id": "IC_kwDOAOvK985lsZxy",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T08:05:14Z",
    "updated_at": "2023-09-05T08:05:14Z",
    "author_association": "NONE",
    "body": "After checking the system situation, it seems that the system is stuck and then automatically restarts the system, causing data corruption.\r\n@holiman ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1706138738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

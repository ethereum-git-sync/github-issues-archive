{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26446",
  "id": 1522920712,
  "node_id": "I_kwDOAOvK985axe0I",
  "number": 26446,
  "title": "geth gets killed with OOM",
  "user": {
    "login": "geomad",
    "id": 7707517,
    "node_id": "MDQ6VXNlcjc3MDc1MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7707517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/geomad",
    "html_url": "https://github.com/geomad",
    "followers_url": "https://api.github.com/users/geomad/followers",
    "following_url": "https://api.github.com/users/geomad/following{/other_user}",
    "gists_url": "https://api.github.com/users/geomad/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/geomad/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/geomad/subscriptions",
    "organizations_url": "https://api.github.com/users/geomad/orgs",
    "repos_url": "https://api.github.com/users/geomad/repos",
    "events_url": "https://api.github.com/users/geomad/events{/privacy}",
    "received_events_url": "https://api.github.com/users/geomad/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-01-06T17:40:23Z",
  "updated_at": "2023-01-06T17:40:23Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.26-stable\r\nGit Commit: e5eb32acee19cc9fca6a03b10283b7484246b15a\r\nOS & Version: Linux\r\nMachine specs: 64 GB ram, AMD 3900x, Gen4 ssd\r\n\r\nSince 2-3 months geth is crashing with OOM every few days. Same behaviour happens on master.\r\n\r\nRevelant startup arguments:\r\n`--cache 21412`\r\n\r\nOOM log:\r\n````\r\nJan 06 20:22:58 server kernel: atopacctd invoked oom-killer: gfp_mask=0x140cca(GFP_HIGHUSER_MOVABLE|__GFP_COMP), order=0, oom_score_adj=0\r\nJan 06 20:22:58 server kernel: CPU: 6 PID: 731 Comm: atopacctd Not tainted 6.0.0-4-amd64 #1  Debian 6.0.8-1\r\nJan 06 20:22:58 server kernel: Hardware name: Gigabyte Technology Co., Ltd. X570 I AORUS PRO WIFI/X570 I AORUS PRO WIFI, BIOS F35 01/04/2022\r\nJan 06 20:22:58 server kernel: Call Trace:\r\nJan 06 20:22:58 server kernel:  <TASK>\r\nJan 06 20:22:58 server kernel:  dump_stack_lvl+0x44/0x5c\r\nJan 06 20:22:58 server kernel:  dump_header+0x4a/0x1ff\r\nJan 06 20:22:58 server kernel:  oom_kill_process.cold+0xb/0x10\r\nJan 06 20:22:58 server kernel:  out_of_memory+0x1fd/0x4d0\r\nJan 06 20:22:58 server kernel:  __alloc_pages_slowpath.constprop.0+0xc6c/0xdb0\r\nJan 06 20:22:58 server kernel:  __alloc_pages+0x305/0x330\r\nJan 06 20:22:58 server kernel:  folio_alloc+0x17/0x50\r\nJan 06 20:22:58 server kernel:  __filemap_get_folio+0x155/0x340\r\nJan 06 20:22:58 server kernel:  filemap_fault+0x13c/0x930\r\nJan 06 20:22:58 server kernel:  ? filemap_map_pages+0x153/0x7b0\r\nJan 06 20:22:58 server kernel:  __do_fault+0x36/0x110\r\nJan 06 20:22:58 server kernel:  do_fault+0x1c2/0x420\r\nJan 06 20:22:58 server kernel:  __handle_mm_fault+0x665/0xf50\r\nJan 06 20:22:58 server kernel:  handle_mm_fault+0xae/0x290\r\nJan 06 20:22:58 server kernel:  do_user_addr_fault+0x1cd/0x690\r\nJan 06 20:22:58 server kernel:  exc_page_fault+0x70/0x170\r\nJan 06 20:22:58 server kernel:  asm_exc_page_fault+0x22/0x30\r\nJan 06 20:22:58 server kernel: RIP: 0033:0x557be747655b\r\nJan 06 20:22:58 server kernel: Code: Unable to access opcode bytes at RIP 0x557be7476531.\r\nJan 06 20:22:58 server kernel: RSP: 002b:00007ffeefaa5f60 EFLAGS: 00010207\r\nJan 06 20:22:58 server kernel: RAX: 0000000000000000 RBX: 0000000000000007 RCX: 00007fb87449c0ed\r\nJan 06 20:22:58 server kernel: RDX: 0000000000003e80 RSI: 00007ffeefaa5fa0 RDI: 0000000000000000\r\nJan 06 20:22:58 server kernel: RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000\r\nJan 06 20:22:58 server kernel: R10: 0000000000000000 R11: 0000000000000246 R12: 00007ffeefaa5fa0\r\nJan 06 20:22:58 server kernel: R13: 00007ffeefaa5f90 R14: 0000000000000000 R15: 0000000000000000\r\nJan 06 20:22:58 server kernel:  </TASK>\r\nJan 06 20:22:58 server kernel: Mem-Info:\r\nJan 06 20:22:58 server kernel: active_anon:1040592 inactive_anon:12825374 isolated_anon:654\r\n                                active_file:68 inactive_file:132 isolated_file:285\r\n                                unevictable:2855 dirty:0 writeback:204\r\n                                slab_reclaimable:768312 slab_unreclaimable:100297\r\n                                mapped:1189 shmem:173 pagetables:1483799 bounce:0\r\n                                kernel_misc_reclaimable:0\r\n                                free:136995 free_pcp:468 free_cma:0\r\nJan 06 20:22:58 server kernel: Node 0 active_anon:4162368kB inactive_anon:51301496kB active_file:272kB inactive_file:528kB unevictable:11420kB isolated(anon):2616kB isolated(file):1140kB mapped:4756kB dirty:0kB writeback:816kB shmem:692kB shmem_thp: 0kB shmem_pmdmapped: 0kB anon_thp: 12414976kB writeback_tmp:0kB kernel_stack:13376kB pagetables:5935196kB all_unreclaimable? no\r\nJan 06 20:22:58 server kernel: Node 0 DMA free:11276kB boost:0kB min:12kB low:24kB high:36kB reserved_highatomic:0KB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB writepending:0kB present:15996kB managed:15372kB mlocked:0kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\r\nJan 06 20:22:58 server kernel: lowmem_reserve[]: 0 2897 64180 64180 64180\r\nJan 06 20:22:58 server kernel: Node 0 DMA32 free:248144kB boost:0kB min:3048kB low:6012kB high:8976kB reserved_highatomic:0KB active_anon:102220kB inactive_anon:1928584kB active_file:112kB inactive_file:0kB unevictable:0kB writepending:248kB present:3064240kB managed:2998684kB mlocked:0kB bounce:0kB free_pcp:280kB local_pcp:0kB free_cma:0kB\r\nJan 06 20:22:58 server kernel: lowmem_reserve[]: 0 0 61283 61283 61283\r\nJan 06 20:22:58 server kernel: Node 0 Normal free:288560kB boost:285028kB min:349544kB low:412296kB high:475048kB reserved_highatomic:2048KB active_anon:4059660kB inactive_anon:49372632kB active_file:1080kB inactive_file:2408kB unevictable:11420kB writepending:1016kB present:63949824kB managed:62762176kB mlocked:11420kB bounce:0kB free_pcp:1592kB local_pcp:0kB free_cma:0kB\r\nJan 06 20:22:58 server kernel: lowmem_reserve[]: 0 0 0 0 0\r\nJan 06 20:22:58 server kernel: Node 0 DMA: 1*4kB (U) 1*8kB (U) 0*16kB 0*32kB 0*64kB 0*128kB 0*256kB 0*512kB 1*1024kB (U) 1*2048kB (M) 2*4096kB (M) = 11276kB\r\nJan 06 20:22:58 server kernel: Node 0 DMA32: 74*4kB (UE) 164*8kB (UME) 4353*16kB (UME) 704*32kB (UME) 281*64kB (UME) 260*128kB (UME) 135*256kB (UM) 96*512kB (UM) 19*1024kB (M) 0*2048kB 0*4096kB = 248216kB\r\nJan 06 20:22:58 server kernel: Node 0 Normal: 5232*4kB (ME) 1814*8kB (UME) 9123*16kB (ME) 1924*32kB (UME) 31*64kB (M) 43*128kB (M) 47*256kB (M) 61*512kB (M) 0*1024kB 0*2048kB 0*4096kB = 293728kB\r\nJan 06 20:22:58 server kernel: Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=1048576kB\r\nJan 06 20:22:58 server kernel: Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB\r\nJan 06 20:22:58 server kernel: 244420 total pagecache pages\r\nJan 06 20:22:58 server kernel: 242305 pages in swap cache\r\nJan 06 20:22:58 server kernel: Free swap  = 15737340kB\r\nJan 06 20:22:58 server kernel: Total swap = 17825788kB\r\nJan 06 20:22:58 server kernel: 16757515 pages RAM\r\nJan 06 20:22:58 server kernel: 0 pages HighMem/MovableOnly\r\nJan 06 20:22:58 server kernel: 313457 pages reserved\r\nJan 06 20:22:58 server kernel: 0 pages hwpoisoned\r\nJan 06 20:22:58 server kernel: Tasks state (memory values in pages):\r\nJan 06 20:22:58 server kernel: [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name\r\nJan 06 20:22:58 server kernel: [    731]     0   731      618        6    40960       24             0 atopacctd\r\nJan 06 20:22:58 server kernel: [    733]   104   733     2335       22    53248      197          -900 dbus-daemon\r\nJan 06 20:22:58 server kernel: [    748]  1003   748  2947664     7944  1335296     2900             0 node\r\nJan 06 20:22:58 server kernel: [    752]  1003   752   226190     1978  2646016     9405             0 node\r\nJan 06 20:22:58 server kernel: [    756]     0   756     2862        8    53248      333             0 smartd\r\nJan 06 20:22:58 server kernel: [    760]     0   760    12466       10    90112      287             0 systemd-logind\r\nJan 06 20:22:58 server kernel: [    765]     0   765      895        5    45056       38             0 atd\r\nJan 06 20:22:58 server kernel: [   1047]     0  1047   100226     2565   147456     1594             0 fail2ban-server\r\nJan 06 20:22:58 server kernel: [   1060]     0  1060    40672        3    69632      104             0 apcupsd\r\nJan 06 20:22:58 server kernel: [   1067]     0  1067     1468        0    49152       32             0 agetty\r\nJan 06 20:22:58 server kernel: [   1091]     0  1091     3837       12    69632      322         -1000 sshd\r\nJan 06 20:22:58 server kernel: [   3377]  1004  3377  1450023     5378   823296     7970             0 lighthouse\r\nJan 06 20:22:58 server kernel: [ 696434]  1000 696434    19569        1    53248       82             0 gpg-agent\r\nJan 06 20:22:58 server kernel: [ 997453]     0 997453     1652        6    49152       57             0 cron\r\nJan 06 20:22:58 server kernel: [1693040]  1003 1693040   679839     1446   409600     5018             0 mev-boost\r\nJan 06 20:22:58 server kernel: [1913678]     0 1913678    54673       31   417792      383          -250 systemd-journal\r\nJan 06 20:22:58 server kernel: [1914639]   101 1914639    22511        0    73728      240             0 systemd-timesyn\r\nJan 06 20:22:58 server kernel: [1914677]     0 1914677     6227        5    73728      249         -1000 systemd-udevd\r\nJan 06 20:22:58 server kernel: [1914724]     0 1914724   725115     3851   471040     4345          -999 containerd\r\nJan 06 20:22:58 server kernel: [1914742]     0 1914742   731357     3184   552960     6304          -500 dockerd\r\nJan 06 20:22:58 server kernel: [1927639]  1002 1927639 3032109018   548556 1505775616    69561             0 rpcdaemon\r\nJan 06 20:22:58 server kernel: [1981975]   112 1981975   274090       23   163840     3747             0 prometheus-node\r\nJan 06 20:22:58 server kernel: [2072077]     0 2072077    55448       75    73728      852             0 rsyslogd\r\nJan 06 20:22:58 server kernel: [2278813]  1002 2278813 12183393  8825916 77631488    21680             0 geth\r\nJan 06 20:22:58 server kernel: [2304970]  1001 2304970  3740924   802378 90570752    11480             0 node\r\nJan 06 20:22:58 server kernel: [2305096]  1002 2305096 3912468962  2735732 4379918336   159535             0 erigon\r\nJan 06 20:22:58 server kernel: [2477100]  1002 2477100  3674959   850186 14254080     4300             0 lighthouse\r\nJan 06 20:22:58 server kernel: [2487620]  1003 2487620  5596916    37047  3715072     1404             0 node\r\nJan 06 20:22:58 server kernel: [2499515]     0 2499515     3062     2856    65536        0         -1000 atop\r\nJan 06 20:22:58 server kernel: oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=atopacct.service,mems_allowed=0,global_oom,task_memcg=/system.slice/geth.service,task=geth,pid=2278813,uid=1002\r\nJan 06 20:22:58 server kernel: Out of memory: Killed process 2278813 (geth) total-vm:48733572kB, anon-rss:35303640kB, file-rss:0kB, shmem-rss:0kB, UID:1002 pgtables:75812kB oom_score_adj:0\r\n\r\n````",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26446/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18214",
  "id": 385802067,
  "node_id": "MDU6SXNzdWUzODU4MDIwNjc=",
  "number": 18214,
  "title": "Puppeth ceased working for new Clique chain deployment from 1.8.12 (works) to 1.8.13+ (broken)",
  "user": {
    "login": "collincusce",
    "id": 6778681,
    "node_id": "MDQ6VXNlcjY3Nzg2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6778681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/collincusce",
    "html_url": "https://github.com/collincusce",
    "followers_url": "https://api.github.com/users/collincusce/followers",
    "following_url": "https://api.github.com/users/collincusce/following{/other_user}",
    "gists_url": "https://api.github.com/users/collincusce/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/collincusce/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/collincusce/subscriptions",
    "organizations_url": "https://api.github.com/users/collincusce/orgs",
    "repos_url": "https://api.github.com/users/collincusce/repos",
    "events_url": "https://api.github.com/users/collincusce/events{/privacy}",
    "received_events_url": "https://api.github.com/users/collincusce/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-11-29T15:53:36Z",
  "updated_at": "2018-12-11T11:56:41Z",
  "closed_at": "2018-12-11T11:56:41Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I tossed up a new clique network using puppeth several times over the past few weeks and am seeing issues. Faucet Offline error. Also block times were set to 5 but they seem to average around 14 and there is hashpower being registered in ethstats. From what I can tell, my genesis is configured properly, with a period of 5 and an epoc of 3000 on clique, plus I'm getting errors when I try to toss up a explorer saying it only works for ethhash (as it should). \r\n\r\nThese are the exact instructions I followed... and I wrote the article too. :-P\r\n\r\nhttps://medium.com/@collin.cusce/using-puppeth-to-manually-create-an-ethereum-proof-of-authority-clique-network-on-aws-ae0d7c906cce\r\n\r\nMy article was on Ubuntu 16.04 and go-eth release 1.8.12.\r\n\r\nRecent install is Ubuntu 18.04 and go-eth release 1.8.18.\r\n\r\nMy team has stepped through these instructions from 1.8.18 (broken, Ubuntu 16.04/18.04) down to 1.8.12 (operational, Ubuntu 16.04/18.04) and found that deploying a clique network breaks using my instructions from 1.8.12 to 1.8.13. \r\n\r\nI have looked at my instructions, as have a few other colleagues, and we are unable to see anything specific in my instructions which may be incorrect... but that possibility isn't out of the question. \r\n\r\nThe more likely answer is that there's a breaking change between 1.8.12 and 1.8.13 that prevents puppeth from launching clique networks properly. \r\n\r\n![screenshot from 2018-11-21 16-31-32](https://user-images.githubusercontent.com/6778681/48869389-02627e80-edab-11e8-8cad-a438fc2f2518.png)\r\n\r\n![screenshot from 2018-11-21 16-34-41](https://user-images.githubusercontent.com/6778681/48869487-66854280-edab-11e8-8ddb-7dd1ba91967b.png)\r\n\r\n[setup_healthcheck.txt](https://github.com/ethereum/go-ethereum/files/2605855/setup_healthcheck.txt)\r\n\r\n[pinecone.txt](https://github.com/ethereum/go-ethereum/files/2605859/pinecone.txt)\r\n\r\n_Originally posted by @collincusce in https://github.com/ethereum/go-ethereum/issue_comments#issuecomment-440818925_",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442966227",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18214#issuecomment-442966227",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214",
    "id": 442966227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Mjk2NjIyNw==",
    "user": {
      "login": "collincusce",
      "id": 6778681,
      "node_id": "MDQ6VXNlcjY3Nzg2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6778681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/collincusce",
      "html_url": "https://github.com/collincusce",
      "followers_url": "https://api.github.com/users/collincusce/followers",
      "following_url": "https://api.github.com/users/collincusce/following{/other_user}",
      "gists_url": "https://api.github.com/users/collincusce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/collincusce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/collincusce/subscriptions",
      "organizations_url": "https://api.github.com/users/collincusce/orgs",
      "repos_url": "https://api.github.com/users/collincusce/repos",
      "events_url": "https://api.github.com/users/collincusce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/collincusce/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-29T19:40:26Z",
    "updated_at": "2018-11-29T19:40:26Z",
    "author_association": "NONE",
    "body": "So I chatted up my team. The problem was specifically puppeth. You can still use 1.8.18 geth nodes, but the puppeth deployments wouldn't work correctly past 1.8.12.\r\n\r\n@karalabe :-)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442966227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446150154",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18214#issuecomment-446150154",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214",
    "id": 446150154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE1MDE1NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-11T10:24:03Z",
    "updated_at": "2018-12-11T10:24:03Z",
    "author_association": "MEMBER",
    "body": "I don't really see how this would be possible. 1.8.18 geth nodes use `admin.nodeInfo.enode` to advertise their enode IDs, whereas `puppeth` 1.8.12 accesses it from the old `admin.nodeInfo.id` endpoint. Are you sure you are not deploying old nodes from old docker instances?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446150154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446151739",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18214#issuecomment-446151739",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214",
    "id": 446151739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE1MTczOQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-11T10:28:59Z",
    "updated_at": "2018-12-11T10:28:59Z",
    "author_association": "MEMBER",
    "body": "Could you please provide some details on your network setup? Are you deploying to internal mahcines, or external ones? Are you using internal IPs, or external ones, or domains, etc? My hunch is that this issue boils down to Geth reporting a certain external IP address, which is not reachable by the faucet (firewall or nat).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446151739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446177100",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18214#issuecomment-446177100",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18214",
    "id": 446177100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE3NzEwMA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-11T11:56:41Z",
    "updated_at": "2018-12-11T11:56:41Z",
    "author_association": "MEMBER",
    "body": "Fixed by https://github.com/ethereum/go-ethereum/pull/18281. The issue was a regression at https://github.com/karalabe/go-ethereum/commit/30cd5c18549f645002aedb4c00e5bab683cb0835#diff-ff207ab75e75547b60446dd050e7e8dbR259.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/446177100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

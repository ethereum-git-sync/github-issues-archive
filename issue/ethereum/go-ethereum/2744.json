{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2744",
  "id": 162565826,
  "node_id": "MDU6SXNzdWUxNjI1NjU4MjY=",
  "number": 2744,
  "title": "Quick-Fix for the potential Dao Soft-Fork Ddos",
  "user": {
    "login": "infamousrev",
    "id": 16310390,
    "node_id": "MDQ6VXNlcjE2MzEwMzkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/16310390?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/infamousrev",
    "html_url": "https://github.com/infamousrev",
    "followers_url": "https://api.github.com/users/infamousrev/followers",
    "following_url": "https://api.github.com/users/infamousrev/following{/other_user}",
    "gists_url": "https://api.github.com/users/infamousrev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/infamousrev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/infamousrev/subscriptions",
    "organizations_url": "https://api.github.com/users/infamousrev/orgs",
    "repos_url": "https://api.github.com/users/infamousrev/repos",
    "events_url": "https://api.github.com/users/infamousrev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/infamousrev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2016-06-27T22:48:20Z",
  "updated_at": "2016-06-30T09:45:33Z",
  "closed_at": "2016-06-30T09:45:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I read some concerned posts by people who believe the softfork introduces a way for an attacker to drain the CPU resources of the miner censoring Dao-balance altering transactions.\n\nThis because the transactions still have to be processed and if they are found to alter the dao balance they will be rejected. However the attacker will not pay gas for having the miner do this work.\n\nI have not read any responce of the dev community regarding the feasability of this attack vector, maybe it is not a concern under reallife circumstances. But if it is a concern then a quickfix may be required.\n\nA quickfix for this problem would be that the miner would blacklist the sender address of this dao-balance-altering transaction for 24 hours.\n\nThis way this behaviour will again be contained by the amount of gas required to create a new account.\n\nWhile not perfect it is probably already enough to make the attack ineffective, because I suspect most miners have a lot of spare CPU power with the current network load. So we will be able to censor the network for long enough to initiate the planned whitehat actions.\n\nThis could be futher enhanced if relaying nodes are encouraged to do the same.\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/228900138",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2744#issuecomment-228900138",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744",
    "id": 228900138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODkwMDEzOA==",
    "user": {
      "login": "infamousrev",
      "id": 16310390,
      "node_id": "MDQ6VXNlcjE2MzEwMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16310390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/infamousrev",
      "html_url": "https://github.com/infamousrev",
      "followers_url": "https://api.github.com/users/infamousrev/followers",
      "following_url": "https://api.github.com/users/infamousrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/infamousrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/infamousrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/infamousrev/subscriptions",
      "organizations_url": "https://api.github.com/users/infamousrev/orgs",
      "repos_url": "https://api.github.com/users/infamousrev/repos",
      "events_url": "https://api.github.com/users/infamousrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/infamousrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-27T22:54:06Z",
    "updated_at": "2016-06-27T22:54:06Z",
    "author_association": "NONE",
    "body": "Attack scenario:\n\nAttacker makes 4000000 gas transactions that alter the dao balance in the last call.\n\nResult:\nAttack is free but makes miner spend 4000000 gas equivelant CPU power.\n\nModified Result with quickfix:\nIt will cost miners/relay node 4000000 gas equivelant CPU power at the cost of creating a new account.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/228900138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/228904673",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2744#issuecomment-228904673",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744",
    "id": 228904673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODkwNDY3Mw==",
    "user": {
      "login": "infamousrev",
      "id": 16310390,
      "node_id": "MDQ6VXNlcjE2MzEwMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16310390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/infamousrev",
      "html_url": "https://github.com/infamousrev",
      "followers_url": "https://api.github.com/users/infamousrev/followers",
      "following_url": "https://api.github.com/users/infamousrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/infamousrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/infamousrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/infamousrev/subscriptions",
      "organizations_url": "https://api.github.com/users/infamousrev/orgs",
      "repos_url": "https://api.github.com/users/infamousrev/repos",
      "events_url": "https://api.github.com/users/infamousrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/infamousrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-27T23:19:17Z",
    "updated_at": "2016-06-27T23:19:17Z",
    "author_association": "NONE",
    "body": "Another temporary trick to reduce the impact of this attack is to prioritise low gas transactions and include them in the block first, in ascending order to gas usage. This will minimize the impact on the legitimate transactions in the network. Since attack transactions are likely to be high gas usage transactions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/228904673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/229257520",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2744#issuecomment-229257520",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744",
    "id": 229257520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTI1NzUyMA==",
    "user": {
      "login": "infamousrev",
      "id": 16310390,
      "node_id": "MDQ6VXNlcjE2MzEwMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16310390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/infamousrev",
      "html_url": "https://github.com/infamousrev",
      "followers_url": "https://api.github.com/users/infamousrev/followers",
      "following_url": "https://api.github.com/users/infamousrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/infamousrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/infamousrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/infamousrev/subscriptions",
      "organizations_url": "https://api.github.com/users/infamousrev/orgs",
      "repos_url": "https://api.github.com/users/infamousrev/repos",
      "events_url": "https://api.github.com/users/infamousrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/infamousrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-29T05:06:50Z",
    "updated_at": "2016-06-29T05:06:50Z",
    "author_association": "NONE",
    "body": "Hello, thinking about it I think the best fix for the soft-fork ddos problem is: instead of filtering based on code analysis we should simply blacklist/censor the wallet addresses of the known malicious actors in the darkdao's and whitehatDao, this will allow the whitehats to do a exploit-drain-split without the attackers being able to join the split\n\nThis method will not create the ddos problem, is still a softfork and still allow us to secure the dao funds.\nThink about it: miners already have to verify if a transaction is made by the real owner of the private key,\nAnd only the people with the attackers private key can execute the blackhat attack\nWhy dont we interfere in that stage of the process, and say, attacker private key != valid, from the softforked miner point of view, it should not introduce additional ddos problems\n\nThey can only execute a DAO operation from the address that currently holds their DAO tokens.\n\nThe whole reason the dao attacker can steal the funds, but not some random bystander, is because the Dao attacker has the privatekey to the wallet address controlling the dao tokens in the darkdao. If we make a softfork that temporarily ignores all transactions made by this wallet address it prevents them from doing the attack. And the whitehats can now use the same exploit against them to recover the funds (Because the whitehats also have dao tokens in those daos).\n\nThis will not introduce the same ddos attack vector because it does not require the validator to parse the code before rejecting the signature. It will have the same result as when a transaction with a genuinely invalid signature is broadcasted, such a transaction also removes no gas from any wallet.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/229257520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/229612750",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2744#issuecomment-229612750",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2744",
    "id": 229612750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTYxMjc1MA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-30T09:45:33Z",
    "updated_at": "2016-06-30T09:45:33Z",
    "author_association": "MEMBER",
    "body": "Thanks for your enthusiasm in proposing fixes to the soft-fork, but I think at this point it is deemed too dangerous to attempt it again. It was a fair attempt to sort it out the less intrusive way but with all the DOS vectors we've uncovered I don't think anyone's willing to put another soft-fork onto the table :)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/229612750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

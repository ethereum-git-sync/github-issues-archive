{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19590",
  "id": 445173904,
  "node_id": "MDU6SXNzdWU0NDUxNzM5MDQ=",
  "number": 19590,
  "title": "geth crash with [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x23e04]",
  "user": {
    "login": "aboutlo",
    "id": 1236268,
    "node_id": "MDQ6VXNlcjEyMzYyNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aboutlo",
    "html_url": "https://github.com/aboutlo",
    "followers_url": "https://api.github.com/users/aboutlo/followers",
    "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
    "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
    "organizations_url": "https://api.github.com/users/aboutlo/orgs",
    "repos_url": "https://api.github.com/users/aboutlo/repos",
    "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aboutlo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-05-16T21:45:54Z",
  "updated_at": "2019-05-20T02:30:12Z",
  "closed_at": "2019-05-16T23:13:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: \r\n```\r\npi@raspberrypi:~/go-ethereum $ geth version\r\nINFO [05-16|22:40:21.792] Bumping default cache on mainnet         provided=1024 updated=4096\r\nWARN [05-16|22:40:21.793] Sanitizing cache to Go's GC limits       provided=4096 updated=309\r\nGeth\r\nVersion: 1.9.0-unstable\r\nGit Commit: f5d89cdb72c1e82e9deb54754bef8dd20bf12591\r\nGit Commit Date: 20190516\r\nArchitecture: arm\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.12.4\r\nOperating System: linux\r\nGOPATH=/home/pi/go\r\nGOROOT=/home/pi/.go\r\n```\r\nOS & Version: Raspberry Pi\r\n\r\n#### Expected behaviour\r\nThe client start to sync\r\n\r\n#### Actual behaviour\r\nthe client crash as for below logs\r\n\r\n#### Steps to reproduce the behaviour\r\nThe client run as systemd service with this options:\r\n```\r\n[Unit]\r\nDescription=Geth Node\r\nAfter=network.target auditd.service\r\nWants=network.target\r\n[Service]\r\nWorkingDirectory=/home/pi\r\nExecStart=/home/pi/go-ethereum/build/bin/geth --cache=512 --rpc --rpcaddr 0.0.0.0 --rpccorsdomain \"*\" --rpcapi \"eth,personal,net,admin\"\r\nUser=pi\r\nGroup=pi\r\nRestart=always\r\nRestartSec=5s\r\n#StandardOutput=syslog\r\n#StandardError=syslog\r\n#SyslogIdentifier=geth\r\n#Type=simple\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\nAlias=geth.service\r\n```\r\n\r\nbefore I was able to sync using this version `1.9.0-unstable-504f88b6`\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\nMay 16 22:38:09 raspberrypi systemd[1]: Started Geth Node.\r\nMay 16 22:38:10 raspberrypi geth[20271]: WARN [05-16|22:38:10.140] Sanitizing cache to Go's GC limits       provided=512 updated=309\r\nMay 16 22:38:10 raspberrypi geth[20271]: INFO [05-16|22:38:10.147] Maximum peer count                       ETH=50 LES=0 total=50\r\nMay 16 22:38:10 raspberrypi geth[20271]: WARN [05-16|22:38:10.149] Failed to start smart card hub, disabling: dial unix /run/pcscd/pcscd.comm: connect: no such file or directory\r\nMay 16 22:38:10 raspberrypi geth[20271]: INFO [05-16|22:38:10.152] Starting peer-to-peer node               instance=Geth/v1.9.0-unstable-f5d89cdb-20190516/linux-arm/go1.12.4\r\nMay 16 22:38:10 raspberrypi geth[20271]: INFO [05-16|22:38:10.152] Allocated trie memory caches             clean=77.00MiB dirty=77.00MiB\r\nMay 16 22:38:10 raspberrypi geth[20271]: INFO [05-16|22:38:10.152] Allocated cache and file handles         database=/home/pi/.ethereum/geth/chaindata cache=154.00MiB handles=2048\r\nMay 16 22:38:13 raspberrypi geth[20271]: panic: runtime error: invalid memory address or nil pointer dereference\r\nMay 16 22:38:13 raspberrypi geth[20271]: [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x23e04]\r\nMay 16 22:38:13 raspberrypi geth[20271]: goroutine 1 [running]:\r\nMay 16 22:38:13 raspberrypi geth[20271]: runtime/internal/atomic.goLoad64(0x39a26bc, 0x465d7c0, 0x3ccaf94)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/.go/src/runtime/internal/atomic/atomic_arm.go:127 +0x1c\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/core/rawdb.(*freezer).repair(0x465d7e0, 0x465d7c0, 0xadc0b1)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/rawdb/freezer.go:370 +0x90\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/core/rawdb.newFreezer(0x3b88a50, 0x29, 0xae95ba, 0x11, 0x39c6060, 0x39f4120, 0x4664000)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/rawdb/freezer.go:111 +0x3d8\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/core/rawdb.NewDatabaseWithFreezer(0xd6c7f0, 0x39c6060, 0x3b88a50, 0x29, 0xae95ba, 0x11, 0x39c6060, 0x0, 0x0, 0x29)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/rawdb/database.go:109 +0x38\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/core/rawdb.NewLevelDBDatabaseWithFreezer(0x3b88a20, 0x21, 0x9a, 0x800, 0x3b88a50, 0x29, 0xae95ba, 0x11, 0x4, 0x6fe2d8, ...)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/rawdb/database.go:214 +0x8c\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/node.(*ServiceContext).OpenDatabaseWithFreezer(0x3abb4f0, 0xae10e0, 0x9, 0x9a, 0x800, 0x0, 0x0, 0xae95ba, 0x11, 0x0, ...)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/node/service.go:68 +0x15c\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/eth.New(0x3abb4f0, 0x3938600, 0x20, 0xa8e050, 0x690958)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/eth/backend.go:123 +0x210\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/cmd/utils.RegisterEthService.func2(0x3abb4f0, 0x3ad20c0, 0x3ccfd60, 0x3abb4d0, 0x2)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/utils/flags.go:1482 +0x28\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/node.(*Node).Start(0x38a7040, 0x0, 0x0)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/node/node.go:206 +0x328\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/cmd/utils.StartNode(0x38a7040)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/utils/cmd.go:67 +0x1c\r\nMay 16 22:38:13 raspberrypi geth[20271]: main.startNode(0x39a44d0, 0x38a7040)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:314 +0x48\r\nMay 16 22:38:13 raspberrypi geth[20271]: main.geth(0x39a44d0, 0x0, 0x0)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:302 +0x14c\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.HandleAction(0x9c1af0, 0xb9aa68, 0x39a44d0, 0x39a44d0, 0x3ccffac)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:490 +0xac\r\nMay 16 22:38:13 raspberrypi geth[20271]: github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli%2ev1.(*App).Run(0x394fce0, 0x3826050, 0x9, 0xa, 0x0, 0x0)\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/vendor/gopkg.in/urfave/cli.v1/app.go:264 +0x410\r\nMay 16 22:38:13 raspberrypi geth[20271]: main.main()\r\nMay 16 22:38:13 raspberrypi geth[20271]: #011/home/pi/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/cmd/geth/main.go:287 +0x44\r\nMay 16 22:38:13 raspberrypi systemd[1]: geth.service: Main process exited, code=exited, status=2/INVALIDARGUMENT\r\nMay 16 22:38:13 raspberrypi systemd[1]: geth.service: Unit entered failed state.\r\nMay 16 22:38:13 raspberrypi systemd[1]: geth.service: Failed with result 'exit-code'.\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493250845",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19590#issuecomment-493250845",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590",
    "id": 493250845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzI1MDg0NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-16T22:17:22Z",
    "updated_at": "2019-05-16T22:17:22Z",
    "author_association": "MEMBER",
    "body": "This seems to be a Go quirk https://github.com/golang/go/issues/9959. The compiler requires the programmer to manually align atomic fields to 64bit boundaries. Lame. Should be solvable by rearranging the fields a bit in the freezer table.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493250845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493339648",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19590#issuecomment-493339648",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590",
    "id": 493339648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzMzOTY0OA==",
    "user": {
      "login": "aboutlo",
      "id": 1236268,
      "node_id": "MDQ6VXNlcjEyMzYyNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aboutlo",
      "html_url": "https://github.com/aboutlo",
      "followers_url": "https://api.github.com/users/aboutlo/followers",
      "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
      "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
      "organizations_url": "https://api.github.com/users/aboutlo/orgs",
      "repos_url": "https://api.github.com/users/aboutlo/repos",
      "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aboutlo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-17T06:39:57Z",
    "updated_at": "2019-05-17T06:39:57Z",
    "author_association": "NONE",
    "body": "I tested the new version from master and I can confirm that it works 🙌 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493339648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493819496",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19590#issuecomment-493819496",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19590",
    "id": 493819496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzgxOTQ5Ng==",
    "user": {
      "login": "liuhuanhui",
      "id": 10370625,
      "node_id": "MDQ6VXNlcjEwMzcwNjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10370625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuhuanhui",
      "html_url": "https://github.com/liuhuanhui",
      "followers_url": "https://api.github.com/users/liuhuanhui/followers",
      "following_url": "https://api.github.com/users/liuhuanhui/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuhuanhui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuhuanhui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuhuanhui/subscriptions",
      "organizations_url": "https://api.github.com/users/liuhuanhui/orgs",
      "repos_url": "https://api.github.com/users/liuhuanhui/repos",
      "events_url": "https://api.github.com/users/liuhuanhui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuhuanhui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-20T02:30:12Z",
    "updated_at": "2019-05-20T02:30:12Z",
    "author_association": "NONE",
    "body": "mee to",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/493819496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

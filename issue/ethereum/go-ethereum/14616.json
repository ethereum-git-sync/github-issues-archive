{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14616",
  "id": 235488949,
  "node_id": "MDU6SXNzdWUyMzU0ODg5NDk=",
  "number": 14616,
  "title": "[private chain] miner.start ",
  "user": {
    "login": "leiletea",
    "id": 23230111,
    "node_id": "MDQ6VXNlcjIzMjMwMTEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/23230111?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leiletea",
    "html_url": "https://github.com/leiletea",
    "followers_url": "https://api.github.com/users/leiletea/followers",
    "following_url": "https://api.github.com/users/leiletea/following{/other_user}",
    "gists_url": "https://api.github.com/users/leiletea/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leiletea/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leiletea/subscriptions",
    "organizations_url": "https://api.github.com/users/leiletea/orgs",
    "repos_url": "https://api.github.com/users/leiletea/repos",
    "events_url": "https://api.github.com/users/leiletea/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leiletea/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-06-13T09:19:53Z",
  "updated_at": "2017-06-13T11:06:30Z",
  "closed_at": "2017-06-13T11:06:30Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.6.5-stable-cf87713d`\r\nOS & Version: Ubuntu 5.4.0-6ubuntu1~16.04.4\r\nCommit hash : \r\n\r\n#### Expected behaviour\r\nminer.start\r\n\r\n#### Actual behaviour\r\nCan not mine\r\n\r\n#### Steps to reproduce the behaviour\r\n1、root@ubuntu:/opt# cat ethereum/genesis.json \r\n{\r\n  \"config\": {\r\n        \"chainId\": 0,\r\n        \"homesteadBlock\": 0,\r\n        \"eip155Block\": 0,\r\n        \"eip158Block\": 0\r\n    },\r\n  \"alloc\"      : {},\r\n  \"coinbase\"   : \"0x0000000000000000000000000000000000000000\",\r\n  \"difficulty\" : \"0x1\",\r\n  \"extraData\"  : \"\",\r\n  \"gasLimit\"   : \"0x2fefd8\",\r\n  \"nonce\"      : \"0x0000000000000042\",\r\n  \"mixhash\"    : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"parentHash\" : \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  \"timestamp\"  : \"0x00\"\r\n}\r\n\r\n2、root@ubuntu:/opt/ethereum# geth --datadir /opt/ethereum init genesis.json\r\nWARN [06-13|16:53:57] No etherbase set and no accounts found as default \r\nINFO [06-13|16:53:57] Allocated cache and file handles         database=/opt/ethereum/geth/chaindata cache=16 handles=16\r\nINFO [06-13|16:53:57] Writing custom genesis block \r\nINFO [06-13|16:53:57] Successfully wrote genesis state         database=chaindata                    hash=c626d8…b99ce5\r\nINFO [06-13|16:53:57] Allocated cache and file handles         database=/opt/ethereum/geth/lightchaindata cache=16 handles=16\r\nINFO [06-13|16:53:57] Writing custom genesis block \r\nINFO [06-13|16:53:57] Successfully wrote genesis state         database=lightchaindata                    hash=c626d8…b99ce5\r\n\r\n3、root@ubuntu:/opt/ethereum# geth  --datadir /opt/ethereum --rpc  --networkid 15 console\r\nWARN [06-13|16:53:57] No etherbase set and no accounts found as default \r\nINFO [06-13|16:53:57] Allocated cache and file handles         database=/opt/ethereum/geth/chaindata cache=16 handles=16\r\nINFO [06-13|16:53:57] Writing custom genesis block \r\nINFO [06-13|16:53:57] Successfully wrote genesis state         database=chaindata                    hash=c626d8…b99ce5\r\nINFO [06-13|16:53:57] Allocated cache and file handles         database=/opt/ethereum/geth/lightchaindata cache=16 handles=16\r\nINFO [06-13|16:53:57] Writing custom genesis block \r\nINFO [06-13|16:53:57] Successfully wrote genesis state         database=lightchaindata                    hash=c626d8…b99ce5\r\nroot@ubuntu:/opt/ethereum# geth  --datadir /opt/ethereum --rpc  --networkid 15 console\r\nWARN [06-13|16:54:27] No etherbase set and no accounts found as default \r\nINFO [06-13|16:54:27] Starting peer-to-peer node               instance=Geth/v1.6.5-stable-cf87713d/linux-amd64/go1.8.1\r\nINFO [06-13|16:54:27] Allocated cache and file handles         database=/opt/ethereum/geth/chaindata cache=128 handles=1024\r\nWARN [06-13|16:54:28] Upgrading chain database to use sequential keys \r\nINFO [06-13|16:54:28] Initialised chain configuration          config=\"{ChainID: 0 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: 0 EIP158: 0 Metropolis: <nil> Engine: unknown}\"\r\nINFO [06-13|16:54:28] Disk storage enabled for ethash caches   dir=/opt/ethereum/geth/ethash count=3\r\nINFO [06-13|16:54:28] Disk storage enabled for ethash DAGs     dir=/root/.ethash             count=2\r\nWARN [06-13|16:54:28] Upgrading db log bloom bins \r\nINFO [06-13|16:54:28] Bloom-bin upgrade completed              elapsed=1.376ms\r\nINFO [06-13|16:54:28] Initialising Ethereum protocol           versions=\"[63 62]\" network=15\r\nINFO [06-13|16:54:28] Loaded most recent local header          number=0 hash=c626d8…b99ce5 td=1\r\nINFO [06-13|16:54:28] Loaded most recent local full block      number=0 hash=c626d8…b99ce5 td=1\r\nINFO [06-13|16:54:28] Loaded most recent local fast block      number=0 hash=c626d8…b99ce5 td=1\r\nINFO [06-13|16:54:28] Database conversion successful \r\nINFO [06-13|16:54:28] Starting P2P networking \r\nINFO [06-13|16:54:30] UDP listener up                          self=enode://5eca5b20ed6b64b84d3ed94c1bd7d895cd33d5e6e3facb5dd7617030c070aa3c99cf556a289e640b16d872a48a383c5e93fe4d5d244cbc9c6585714e0f6b5504@[::]:30303\r\nINFO [06-13|16:54:30] HTTP endpoint opened: http://127.0.0.1:8545 \r\nINFO [06-13|16:54:30] RLPx listener up                         self=enode://5eca5b20ed6b64b84d3ed94c1bd7d895cd33d5e6e3facb5dd7617030c070aa3c99cf556a289e640b16d872a48a383c5e93fe4d5d244cbc9c6585714e0f6b5504@[::]:30303\r\nINFO [06-13|16:54:30] IPC endpoint opened: /opt/ethereum/geth.ipc \r\nWelcome to the Geth JavaScript console!\r\n\r\ninstance: Geth/v1.6.5-stable-cf87713d/linux-amd64/go1.8.1\r\n modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0\r\n\r\n4、Execute the following script in the console\r\n> personal.newAccount(\"123456\")\r\n\"0x260933a46681f627bb0489e5ffbe60527b2988f8\"\r\n> INFO [06-13|16:55:25] New wallet appeared                      url=keystore:///opt/ethereum/keysto… status=Locked\r\n> personal.listAccounts\r\n[\"0x260933a46681f627bb0489e5ffbe60527b2988f8\"]\r\n> miner.setEtherbase(eth.accounts[0])\r\ntrue\r\n> miner.start(4)\r\nINFO [06-13|16:56:37] Updated mining threads                   threads=4\r\nINFO [06-13|16:56:37] Transaction pool price threshold updated price=18000000000\r\nnullINFO [06-13|16:56:37] Starting mining operation \r\nINFO [06-13|16:56:37] Commit new mining work                   number=1 txs=0 uncles=0 elapsed=337.229µs\r\n\r\n> INFO [06-13|16:56:42] Generating DAG in progress               epoch=0 percentage=0 elapsed=4.548s\r\nINFO [06-13|16:56:47] Generating DAG in progress               epoch=0 percentage=1 elapsed=9.311s\r\n.......................\r\nINFO [06-13|17:04:18] Generating DAG in progress               epoch=0 percentage=98 elapsed=7m40.301s\r\nINFO [06-13|17:04:23] Generating DAG in progress               epoch=0 percentage=99 elapsed=7m44.900s\r\nINFO [06-13|17:04:23] Generated ethash verification cache      epoch=0 elapsed=7m44.922s\r\nINFO [06-13|17:04:29] Generating ethash verification cache     epoch=1 percentage=1  elapsed=4.335s\r\nINFO [06-13|17:04:32] Generating ethash verification cache     epoch=1 percentage=5  elapsed=7.941s\r\n.......................\r\nINFO [06-13|17:07:39] Generating ethash verification cache     epoch=1 percentage=98 elapsed=3m14.041s\r\nWaiting for a long time\r\nINFO [06-13|17:16:36] Generating DAG in progress               epoch=1 percentage=0  elapsed=8m50.835s\r\n\r\n\r\n\r\nWhy it will be generated    DAG in progress  again？\r\n\r\nWhether there are documents that can guide me to achieve a private chain and normal mining?\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/308079009",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14616#issuecomment-308079009",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14616",
    "id": 308079009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODA3OTAwOQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-13T10:48:48Z",
    "updated_at": "2017-06-13T10:48:48Z",
    "author_association": "MEMBER",
    "body": "They are different DAGs. The first one was for epoch 0, which is good for blocks 0-30000. The second one was for epoch 1, which will be switched over to when you reach block 30000. The reason it pre-generates it is that it doesn't \"hang\" mining when it reaches block 30000, rather the DAG is already available and usable.\r\n\r\nYou can use `puppeth` to make a nice starting genesis block.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/308079009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

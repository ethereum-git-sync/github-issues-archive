{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24891",
  "id": 1237719180,
  "node_id": "I_kwDOAOvK985JxhiM",
  "number": 24891,
  "title": "--dev.period seems to ignore non-0 values",
  "user": {
    "login": "jmhickman",
    "id": 6581761,
    "node_id": "MDQ6VXNlcjY1ODE3NjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6581761?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmhickman",
    "html_url": "https://github.com/jmhickman",
    "followers_url": "https://api.github.com/users/jmhickman/followers",
    "following_url": "https://api.github.com/users/jmhickman/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmhickman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmhickman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmhickman/subscriptions",
    "organizations_url": "https://api.github.com/users/jmhickman/orgs",
    "repos_url": "https://api.github.com/users/jmhickman/repos",
    "events_url": "https://api.github.com/users/jmhickman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmhickman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-05-16T21:05:17Z",
  "updated_at": "2022-05-17T14:40:50Z",
  "closed_at": "2022-05-17T07:04:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.17-stable-25c9b49f\r\nOS & Version: Linux\r\n\r\n\r\n#### Expected behaviour\r\nsetting --dev.period to a number greater than 0 should cause blocks to be mined continuously, even if a transaction isn't submitted/pending\r\n\r\n#### Actual behaviour\r\nSame as `--dev.period 0`: blocks are only mined on-demand. Normal \"sealing paused while waiting for transactions\" log message as when the value is 0 or omitted from the invocation.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI invoke `geth` from a systemd service file with the following command:\r\n\r\n`geth --dev --dev.period 14 --datadir /chaindata/dev/ --http --http.addr 192.168.10.210 --http.vhosts geth.private --http.port 9545 --http.corsdomain \"http://remix.private\"`\r\n\r\n```\r\nMay 16 20:42:14 geth-nodes systemd[1]: Started Geth set for local dev.\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.675] Starting Geth in ephemeral dev mode...\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.676] Maximum peer count                       ETH=50 LES=0 total=50\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.676] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.678] Set global gas cap                       cap=50,000,000\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.740] Using developer account                  address=0xFbc54BA169C6bD9ca47CD0BC39BB5cb5c0367459\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.740] Allocated cache and file handles         database=/chaindata/dev/geth/chaindata cache=512.00MiB handles=524,288 readonly=true\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.744] Opened ancient database                  database=/chaindata/dev/geth/chaindata/ancient readonly=true\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.744] Allocated trie memory caches             clean=154.00MiB dirty=256.00MiBMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.744] Allocated cache and file handles         database=/chaindata/dev/geth/chaindata         cache=512.00MiB handles=524,288\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.865] Opened ancient database                  database=/chaindata/dev/geth/chaindata/ancient readonly=false\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.867] Initialised chain configuration          config=\"{ChainID: 1337 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: 0 Petersburg: 0 Istanbul: 0, Muir Glacier: 0, Berlin: 0, London: 0, Arrow Glacier: <nil>, MergeFork: <nil>, Terminal TD: <nil>, Engine: clique}\"\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.868] Initialising Ethereum protocol           network=1337 dbversion=8\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.882] Loaded most recent local header          number=131 hash=fc7cce..2e8a8e\r\ntd=263 age=10m39s\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.882] Loaded most recent local full block      number=131 hash=fc7cce..2e8a8e\r\ntd=263 age=10m39s\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.882] Loaded most recent local fast block      number=131 hash=fc7cce..2e8a8e\r\ntd=263 age=10m39s\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.907] Loaded local transaction journal         transactions=0 dropped=0\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.907] Regenerated local transaction journal    transactions=0 accounts=0\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.908] Gasprice oracle is ignoring threshold set threshold=2\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.909] Starting peer-to-peer node               instance=Geth/v1.10.17-stable-25c9b49f/linux-amd64/go1.18\r\nMay 16 20:42:14 geth-nodes geth[5276]: WARN [05-16|20:42:14.909] P2P server will be useless, neither dialing nor listening\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.921] New local node record                    seq=1,652,134,499,941 id=c517937e6af13361 ip=127.0.0.1 udp=0 tcp=0\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.921] Started P2P networking                   self=enode://5b80a2c3d69f483925ddd5fea99332ee2b3617388e43c2465dbfc4488a26bcd8566bb68bf12b24c66ea2fb4eef910cb2a968406ae5a9c91950446d26ed06ce35@127.0.0.1:0\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.921] IPC endpoint opened                      url=/chaindata/dev/geth.ipc\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] HTTP server started                      endpoint=192.168.10.210:9545 auth=false prefix= cors=http://remix.private vhosts=geth.private\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] Transaction pool price threshold updated price=1,000,000,000\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] Updated mining threads                   threads=0\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] Transaction pool price threshold updated price=1\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] Etherbase automatically configured       address=0xFbc54BA169C6bD9ca47CD0BC39BB5cb5c0367459\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.922] Commit new sealing work                  number=132 sealhash=7f2643..2928b4 uncles=0 txs=0 gas=0 fees=0 elapsed=\"133.363µs\"\r\nMay 16 20:42:14 geth-nodes geth[5276]: WARN [05-16|20:42:14.922] Block sealing failed                     err=\"sealing paused while waiting for transactions\"\r\nMay 16 20:42:14 geth-nodes geth[5276]: INFO [05-16|20:42:14.923] Commit new sealing work                  number=132 sealhash=7f2643..2928b4 uncles=0 txs=0 gas=0 fees=0 elapsed=\"326.901µs\"\r\n```\r\n\r\nNo blocks are added after this point, unless I perform a transaction.",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128148915",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24891#issuecomment-1128148915",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891",
    "id": 1128148915,
    "node_id": "IC_kwDOAOvK985DPi-z",
    "user": {
      "login": "jmhickman",
      "id": 6581761,
      "node_id": "MDQ6VXNlcjY1ODE3NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6581761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmhickman",
      "html_url": "https://github.com/jmhickman",
      "followers_url": "https://api.github.com/users/jmhickman/followers",
      "following_url": "https://api.github.com/users/jmhickman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmhickman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmhickman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmhickman/subscriptions",
      "organizations_url": "https://api.github.com/users/jmhickman/orgs",
      "repos_url": "https://api.github.com/users/jmhickman/repos",
      "events_url": "https://api.github.com/users/jmhickman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmhickman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-16T21:20:50Z",
    "updated_at": "2022-05-16T21:20:50Z",
    "author_association": "NONE",
    "body": "` --dev.period value    Block period to use in developer mode (0 = mine only if transaction pending)`\r\n\r\nI'm assuming from this reading that the intended behavior is that blocks appear on a delay based on the number entered.\r\n\r\nEven if the intended behavior is that the block production stops when there aren't pending transactions, and a delay is merely simulated, I'm not seeing that happen either:\r\n\r\n```\r\nMay 16 21:19:40 geth-nodes geth[5322]: INFO [05-16|21:19:40.004] Submitted transaction                    hash=0x32cf8e1d4cc69badfc48411e1144556c0952944d29e693fa66f82dbbe4c7e514 from=0x33651c5492a5353e78d6ADA9EB025c9DdE18F4d2 nonce=36 recipient=0x05D796d358651C4d63dB2b2fdd11719a347c58aE value=100,000,000,000,000,000\r\nMay 16 21:19:40 geth-nodes geth[5322]: INFO [05-16|21:19:40.005] Commit new sealing work                  number=132 sealhash=303048..584df2 uncles=0 txs=1 gas=21000 fees=2.1e-05 elapsed=\"360.989µs\"\r\nMay 16 21:19:40 geth-nodes geth[5322]: INFO [05-16|21:19:40.006] Successfully sealed new block            number=132 sealhash=303048..584df2 hash=acaade..8e1289 elapsed=1.420ms\r\nMay 16 21:19:40 geth-nodes geth[5322]: INFO [05-16|21:19:40.006] 🔨 mined potential block                  number=132 hash=acaade..8e1289May 16 21:19:40 geth-nodes geth[5322]: INFO [05-16|21:19:40.007] Commit new sealing work                  number=133 sealhash=993d6c..59e9d7 uncles=0 txs=0 gas=0     fees=0       elapsed=\"306.779µs\"\r\nMay 16 21:19:40 geth-nodes geth[5322]: WARN [05-16|21:19:40.007] Block sealing failed                     err=\"sealing paused while waiting for transactions\"\r\n```\r\n\r\nNo delay is observed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128148915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128492265",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24891#issuecomment-1128492265",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891",
    "id": 1128492265,
    "node_id": "IC_kwDOAOvK985DQ2zp",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-17T07:04:35Z",
    "updated_at": "2022-05-17T07:04:35Z",
    "author_association": "MEMBER",
    "body": "You are using an existing data directory. That will already contain a genesis json specifying the Clique period. You can't change it on the fly. You'll need to start a network from zero if you ant to change the parameters.\r\n\r\nE.g. Without a datadir it works fine for me: `geth --dev --dev.period 14`, so the issue is not the period flag, rather it's conflicting with your existing chain.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128492265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128956916",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24891#issuecomment-1128956916",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24891",
    "id": 1128956916,
    "node_id": "IC_kwDOAOvK985DSoP0",
    "user": {
      "login": "jmhickman",
      "id": 6581761,
      "node_id": "MDQ6VXNlcjY1ODE3NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6581761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmhickman",
      "html_url": "https://github.com/jmhickman",
      "followers_url": "https://api.github.com/users/jmhickman/followers",
      "following_url": "https://api.github.com/users/jmhickman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmhickman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmhickman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmhickman/subscriptions",
      "organizations_url": "https://api.github.com/users/jmhickman/orgs",
      "repos_url": "https://api.github.com/users/jmhickman/repos",
      "events_url": "https://api.github.com/users/jmhickman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmhickman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-17T14:40:16Z",
    "updated_at": "2022-05-17T14:40:50Z",
    "author_association": "NONE",
    "body": "Thank you.\r\n\r\nI feel this should be made more obvious in the `--help` blurb for `--dev.period`. As a user I rely on the documentation to guide me, and this nuance wasn't listed anywhere. Perhaps the binary should log something to the effect of \r\n\r\n`Dev Period not applied because provided value is in conflict with genesis block. Delete data directory contents to apply a new value`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1128956916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

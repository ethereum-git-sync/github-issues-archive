{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23596",
  "id": 999881011,
  "node_id": "I_kwDOAOvK9847mPkz",
  "number": 23596,
  "title": "Intranet machines use intranet ip to communicate",
  "user": {
    "login": "kaolula",
    "id": 11549225,
    "node_id": "MDQ6VXNlcjExNTQ5MjI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/11549225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kaolula",
    "html_url": "https://github.com/kaolula",
    "followers_url": "https://api.github.com/users/kaolula/followers",
    "following_url": "https://api.github.com/users/kaolula/following{/other_user}",
    "gists_url": "https://api.github.com/users/kaolula/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kaolula/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kaolula/subscriptions",
    "organizations_url": "https://api.github.com/users/kaolula/orgs",
    "repos_url": "https://api.github.com/users/kaolula/repos",
    "events_url": "https://api.github.com/users/kaolula/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kaolula/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-09-18T03:25:39Z",
  "updated_at": "2021-10-20T07:55:23Z",
  "closed_at": "2021-10-20T07:55:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have three Amazon EC2,they are all synchronized with Ethereum node data.\r\nThe machine information\r\n|  Machine Name   | External network ip  | Internal network ip  |\r\n|  ----  | ----  |----  |\r\n| EC2-A  | 70.122.90.94 |192.168.1.1 |\r\n| EC2-B  | 70.122.91.95 |192.168.1.2 |\r\n| EC2-C  | 70.122.92.96|192.168.1.3|\r\n> The i.P. information on the extranet is fake,Just for better description\r\nEC2-A machine start script\r\n```\r\n./geth --config ./config.toml --nat=extip:192.168.1.1 --maxpeers 10000 \r\n```\r\nEC2-B machine start script\r\n```\r\n./geth --config ./config.toml --nat=extip:192.168.1.2--maxpeers 10000 \r\n```\r\nEC2-C machine start script\r\n```\r\n./geth --config ./config.toml --nat=extip:192.168.1.3--maxpeers 10000 \r\n```\r\n\r\n**Information for each node** \r\nEC2-A nodeino\r\n```\r\n  enode: \"enode://f2b359dc15a673145c491474c2e7830fb5a3a5d652c770ab5d8d8ab96c58f483acc8b17e31f33926c77894ee1fc7560d5f6f65c99a75687fd3eb24716f51c2ee@192.168.1.1:30311\",\r\n  enr: \"enr:-J24QLPie002uZ8ootd9oDOkaCGJoEd0eJwNV231Bm3idtM5FFqkTvuJxPxMbeWkv5Je16uV-ZpspB5K1I1-XstE7lUDg2V0aMfGhPw8preAgmlkgnY0gmlwhMCoARqJc2VjcDI1NmsxoQLys1ncFaZzFFxJFHTC54MPtaOl1lLHcKtdjYq5bFj0g4RzbmFwwIN0Y3CCdmeDdWRwgnZn\",\r\n  id: \"b6fe3c28cc6a3eabd9ad5eab9047611faaea3a9650e9a2237b4f654bd89f6d7e\",\r\n  ip: \"192.168.1.1\",\r\n  listenAddr: \"[::]:30311\",\r\n```\r\n\r\nEC2-B nodeino\r\n```\r\n  enode: \"enode://4da3f4aa20ff15276c1faef532cf796f93f10d85164bf4ce16a73c8eaaab96e3d6f6af6581d9cf01410d717b9fd5b22ae4bc81706b53f252006bd9ba19a20567@192.168.1.2:30311\",\r\n  enr: \"enr:-J24QOoMf8CjLdpcBNBbTAqVfNySlXdbXN8An2LikjJPKwDMfiSnVP1flxDc3jLnhI8DRb_TG_CUNn2ucr0IFdeZn3sDg2V0aMfGhPw8preAgmlkgnY0gmlwhMCoAR6Jc2VjcDI1NmsxoQNNo_SqIP8VJ2wfrvUyz3lvk_ENhRZL9M4WpzyOqquW44RzbmFwwIN0Y3CCdmeDdWRwgnZn\",\r\n  id: \"8b87239184918b94013e32cb43b86a0458a4b7f3df8516af56629112fa48797e\",\r\n  ip: \"192.168.1.2\",\r\n  listenAddr: \"[::]:30311\",\r\n```\r\n\r\n\r\nEC2-C nodeino\r\n```\r\n  enode: \"enode://c86df17a43d969edd5c72d6709cbbd8af04899fc7da5ecd97dc7f9863be2edc6c3d32a0c14d1451114b3d328b3d11c9836ec136e9a32e08e00f4f38d09b6e03f@192.168.1.3:30311\",\r\n  enr: \"enr:-J24QGn4cFBGMiTFjZlls83jCGz0woy1XU9DCgX9uZ292SqSU59gjd-W8ZUlYRTkIGxMiqqm8WNrpuxI_z64Od1BNhMDg2V0aMfGhPw8preAgmlkgnY0gmlwhMCoAQiJc2VjcDI1NmsxoQPIbfF6Q9lp7dXHLWcJy72K8EiZ_H2l7Nl9x_mGO-LtxoRzbmFwwIN0Y3CCdmeDdWRwgnZn\",\r\n  id: \"073e9fe8072d90178f347a95bb65176ec017a9a6d6bc9af113afde480d118560\",\r\n  ip: \"192.168.1.3\",\r\n  listenAddr: \"[::]:30311\",\r\n```\r\n![image](https://user-images.githubusercontent.com/11549225/133870947-1c6fcd8d-ff77-420c-bb5f-950a79f602d9.png)\r\nThese three machines can broadcast transactions on the intranet machine p2p.But I found that the node identity is the intranet ip, will this prevent other machines from connecting to our machine?\r\n\r\nCan other nodes of the network be unable to link to my intranet node, but my intranet node can link to other nodes?\r\nI found that my node connected to hundreds of peers.\r\n\r\n\r\n_Originally posted by @wemem in https://github.com/ethereum/go-ethereum/issues/23583#issuecomment-922170771_",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922489891",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-922489891",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 922489891,
    "node_id": "IC_kwDOAOvK9842_BQj",
    "user": {
      "login": "verheesj",
      "id": 3089457,
      "node_id": "MDQ6VXNlcjMwODk0NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3089457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/verheesj",
      "html_url": "https://github.com/verheesj",
      "followers_url": "https://api.github.com/users/verheesj/followers",
      "following_url": "https://api.github.com/users/verheesj/following{/other_user}",
      "gists_url": "https://api.github.com/users/verheesj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/verheesj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/verheesj/subscriptions",
      "organizations_url": "https://api.github.com/users/verheesj/orgs",
      "repos_url": "https://api.github.com/users/verheesj/repos",
      "events_url": "https://api.github.com/users/verheesj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/verheesj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-19T15:14:42Z",
    "updated_at": "2021-09-19T15:14:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "**EC2-A, EC2-B, EC2-C**\r\nIf Internet connectivity is not required or all member nodes connect using well-known IPs, we strongly recommend setting up Geth to restrict peer-to-peer connectivity to an IP subnet. Doing so will further isolate your network and prevents cross-connecting with other blockchain networks in case your nodes are reachable from the Internet. Use the --netrestrict flag to configure a whitelist of IP networks:\r\n\r\n> `geth <other-flags> --netrestrict 192.168.1.0/24`\r\n> \r\nWith the above setting, Geth will only allow connections from the 192.168.1.0/24 subnet (range: 192.168.1.1-192.168.1.255), and will not attempt to connect to other nodes outside of the set IP range.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922489891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922764841",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-922764841",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 922764841,
    "node_id": "IC_kwDOAOvK9843AEYp",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-20T09:27:53Z",
    "updated_at": "2021-09-20T09:27:53Z",
    "author_association": "MEMBER",
    "body": "@wemem It's not relaly clear what you're trying to do. Whether you're trying to make your nodes not discoverable, or discoverable.\r\n\r\nIf you specify which IP to use as the `external IP` (`--nat=extip:192.168.1.1`), then Geth will advertise that. Outside nodes might have a harder time finding you, but if you at the same time ping other nodes you know about on your public interface, that information will leak out even if you don't explicitly advertise that (AFAIK). If you want others not to find you, you need to firewall the ports. If you want others to find you, advertising internal IPs as the external just makes things messy.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922764841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922769316",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-922769316",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 922769316,
    "node_id": "IC_kwDOAOvK9843AFek",
    "user": {
      "login": "kaolula",
      "id": 11549225,
      "node_id": "MDQ6VXNlcjExNTQ5MjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11549225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaolula",
      "html_url": "https://github.com/kaolula",
      "followers_url": "https://api.github.com/users/kaolula/followers",
      "following_url": "https://api.github.com/users/kaolula/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaolula/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaolula/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaolula/subscriptions",
      "organizations_url": "https://api.github.com/users/kaolula/orgs",
      "repos_url": "https://api.github.com/users/kaolula/repos",
      "events_url": "https://api.github.com/users/kaolula/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaolula/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-20T09:35:38Z",
    "updated_at": "2021-09-20T09:38:14Z",
    "author_association": "NONE",
    "body": "> @wemem It's not relaly clear what you're trying to do. Whether you're trying to make your nodes not discoverable, or discoverable.\r\n> \r\n> If you specify which IP to use as the `external IP` (`--nat=extip:192.168.1.1`), then Geth will advertise that. Outside nodes might have a harder time finding you, but if you at the same time ping other nodes you know about on your public interface, that information will leak out even if you don't explicitly advertise that (AFAIK). If you want others not to find you, you need to firewall the ports. If you want others to find you, advertising internal IPs as the external just makes things messy.\r\n\r\nI set --nat as the intranet ip, just to allow my machine to broadcast transactions through the intranet and receives transaction fast over the Intranet.\r\nIn fact, I found out that I can’t do it this way.Setting up an intranet may cause the transactions I accept to become slower",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/922769316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/923809880",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-923809880",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 923809880,
    "node_id": "IC_kwDOAOvK9843EDhY",
    "user": {
      "login": "verheesj",
      "id": 3089457,
      "node_id": "MDQ6VXNlcjMwODk0NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3089457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/verheesj",
      "html_url": "https://github.com/verheesj",
      "followers_url": "https://api.github.com/users/verheesj/followers",
      "following_url": "https://api.github.com/users/verheesj/following{/other_user}",
      "gists_url": "https://api.github.com/users/verheesj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/verheesj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/verheesj/subscriptions",
      "organizations_url": "https://api.github.com/users/verheesj/orgs",
      "repos_url": "https://api.github.com/users/verheesj/repos",
      "events_url": "https://api.github.com/users/verheesj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/verheesj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T09:39:50Z",
    "updated_at": "2021-09-21T09:39:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > @wemem It's not relaly clear what you're trying to do. Whether you're trying to make your nodes not discoverable, or discoverable.\r\n> > If you specify which IP to use as the `external IP` (`--nat=extip:192.168.1.1`), then Geth will advertise that. Outside nodes might have a harder time finding you, but if you at the same time ping other nodes you know about on your public interface, that information will leak out even if you don't explicitly advertise that (AFAIK). If you want others not to find you, you need to firewall the ports. If you want others to find you, advertising internal IPs as the external just makes things messy.\r\n> \r\n> I set --nat as the intranet ip, just to allow my machine to broadcast transactions through the intranet and receives transaction fast over the Intranet.\r\n> In fact, I found out that I can’t do it this way.Setting up an intranet may cause the transactions I accept to become slower\r\n\r\nTo prevent external connections you would use `--netrestrict 192.168.1.0/24` this would then restrict peers to your local network, preventing peers from the internet from connecting to them.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/923809880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/923941232",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-923941232",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 923941232,
    "node_id": "IC_kwDOAOvK9843Ejlw",
    "user": {
      "login": "verheesj",
      "id": 3089457,
      "node_id": "MDQ6VXNlcjMwODk0NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3089457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/verheesj",
      "html_url": "https://github.com/verheesj",
      "followers_url": "https://api.github.com/users/verheesj/followers",
      "following_url": "https://api.github.com/users/verheesj/following{/other_user}",
      "gists_url": "https://api.github.com/users/verheesj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/verheesj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/verheesj/subscriptions",
      "organizations_url": "https://api.github.com/users/verheesj/orgs",
      "repos_url": "https://api.github.com/users/verheesj/repos",
      "events_url": "https://api.github.com/users/verheesj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/verheesj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T12:32:42Z",
    "updated_at": "2021-09-21T12:32:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "duplicate issue #23583",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/923941232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/947419184",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23596#issuecomment-947419184",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23596",
    "id": 947419184,
    "node_id": "IC_kwDOAOvK9844eHgw",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-20T07:55:23Z",
    "updated_at": "2021-10-20T07:55:23Z",
    "author_association": "MEMBER",
    "body": "Closing this, the issue description of what op is trying to achieve is vague, and answers have been given",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/947419184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

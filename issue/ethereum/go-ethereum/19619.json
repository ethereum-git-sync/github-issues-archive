{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/19619",
  "id": 447663947,
  "node_id": "MDU6SXNzdWU0NDc2NjM5NDc=",
  "number": 19619,
  "title": "Very Slow State Sync on 1.9 Master",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-05-23T13:29:50Z",
  "updated_at": "2019-05-27T17:18:35Z",
  "closed_at": "2019-05-27T17:03:22Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I've been testing out the Geth 1.9 from master and it took my nodes over 3 days (maybe 4?) to actually sync all of the states.\r\n\r\nI was chatting with @karalabe about it on Twitter and I've just now got back to my PC to open this ticket. I did a `grep \"05-20|0[12]\"` against the logs so as to give an hour worth of log data during the middle of the slow sync process.\r\n\r\nI ran 2 nodes at the same time and both nodes displayed the same behavior. The node stats are:\r\nhttps://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc5i7ryh.html\r\n\r\nThe data drive was an SSD and was a 256GB Samsung 840 EVO. My internet speed is 100Mb/100Mb and there is/was a static PAT and open incoming firewall rules in place.\r\n\r\n#### System information\r\n\r\nGeth version:\r\n```\r\nGeth\r\nVersion: 1.9.0-unstable\r\nGit Commit: 97d3615612a49488d02807944696d001b88f9e0d\r\nGit Commit Date: 20190517\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.12\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/lib/go-1.12\r\n```\r\nOS & Version: `Ubuntu 18.04.2`\r\n\r\nI run with the following interesting flags:\r\n```\r\n--datadir /data/ethereum\r\n--nousb\r\n--lightserv 100\r\n--lightpeers 75\r\n--maxpeers 100\r\n--nat extip:$(curl -s ipinfo.io/ip)\r\n--shh\r\n--rpc\r\n--ws\r\n--graphql \r\n```\r\n\r\n[05-20-1am-2am.log](https://github.com/ethereum/go-ethereum/files/3212324/05-20-1am-2am.log)",
  "closed_by": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495646808",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-495646808",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 495646808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTY0NjgwOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T14:11:35Z",
    "updated_at": "2019-05-24T14:11:35Z",
    "author_association": "MEMBER",
    "body": "Your Geth version dump is 1.8.27 :P ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495646808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495648318",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-495648318",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 495648318,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTY0ODMxOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T14:15:13Z",
    "updated_at": "2019-05-24T14:15:13Z",
    "author_association": "MEMBER",
    "body": "That said, I'm not sure what the light server's performance hit on initial sync is. Neither am I aware how Whisper influences things. If you indeed ran 1.9 (and not 1.8.27 as you wrote above), could you try again with default parameters, without extra services?\r\n\r\nWe used the default 50 peers, light server disabled, whisper disabled in our experiments.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495648318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495651567",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-495651567",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 495651567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTY1MTU2Nw==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T14:22:46Z",
    "updated_at": "2019-05-24T14:30:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh, my bad, I had the ppt geth installed too and I didn't do `./geth` 😄  fixed above.\r\n\r\nSure, I'll wipe one of them and start fresh with more default params",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495651567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495923760",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-495923760",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 495923760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTkyMzc2MA==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-25T14:45:30Z",
    "updated_at": "2019-05-25T23:19:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, it's been 24 hours...\r\n\r\n```\r\n> eth.syncing\r\n{\r\n  currentBlock: 7829323,\r\n  highestBlock: 7829392,\r\n  knownStates: 155300226,\r\n  pulledStates: 155273957,\r\n  startingBlock: 0\r\n}\r\n```\r\n\r\nI've only turned on the --rpc flag so I could query it\r\n\r\nLogs: \r\n[05-25_1am-2am.log](https://github.com/ethereum/go-ethereum/files/3219835/05-25_1am-2am.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495923760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495955368",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-495955368",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 495955368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTk1NTM2OA==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-25T23:20:01Z",
    "updated_at": "2019-05-25T23:20:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm going to attempt to sync from scratch with the latest release (1.8.27) and see how long that takes for a reference point...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/495955368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/496267245",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-496267245",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 496267245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjI2NzI0NQ==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-27T17:03:22Z",
    "updated_at": "2019-05-27T17:03:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, I'm guessing that this is just something to do with my nodes and/or environment because 1.8.27-stable after ~36 hours of syncing is basically at the same place 1.9 was after 24 hours...\r\n\r\n```\r\n{\r\n  currentBlock: 7842850,\r\n  highestBlock: 7842915,\r\n  knownStates: 155794393,\r\n  pulledStates: 155794392,\r\n  startingBlock: 0\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/496267245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/496269773",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/19619#issuecomment-496269773",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/19619",
    "id": 496269773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjI2OTc3Mw==",
    "user": {
      "login": "lrgeoemtry",
      "id": 25958096,
      "node_id": "MDQ6VXNlcjI1OTU4MDk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/25958096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lrgeoemtry",
      "html_url": "https://github.com/lrgeoemtry",
      "followers_url": "https://api.github.com/users/lrgeoemtry/followers",
      "following_url": "https://api.github.com/users/lrgeoemtry/following{/other_user}",
      "gists_url": "https://api.github.com/users/lrgeoemtry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lrgeoemtry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lrgeoemtry/subscriptions",
      "organizations_url": "https://api.github.com/users/lrgeoemtry/orgs",
      "repos_url": "https://api.github.com/users/lrgeoemtry/repos",
      "events_url": "https://api.github.com/users/lrgeoemtry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lrgeoemtry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-27T17:18:34Z",
    "updated_at": "2019-05-27T17:18:34Z",
    "author_association": "NONE",
    "body": "Im subscribed to this repo,\nI almost get triggered everytime you commit Mr. Wright ;P\n\nOn Thu, 23 May 2019, 08:31 Chase Wright, <notifications@github.com> wrote:\n\n> I've been testing out the Geth 1.9 from master and it took my nodes over 3\n> days (maybe 4?) to actually sync all of the states.\n>\n> I was chatting with @karalabe <https://github.com/karalabe> about it on\n> Twitter and I've just now got back to my PC to open this ticket. I did a grep\n> \"05-20|0[12]\" against the logs so as to give an hour worth of log data\n> during the middle of the slow sync process.\n>\n> I ran 2 nodes at the same time and both nodes displayed the same behavior.\n> The node stats are:\n>\n> https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc5i7ryh.html\n>\n> The data drive was an SSD and was a 256GB Samsung 840 EVO. My internet\n> speed is 100Mb/100Mb and there is/was a static PAT and open incoming\n> firewall rules in place.\n> System information\n>\n> Geth version:\n>\n> Geth\n> Version: 1.8.27-stable\n> Git Commit: 4bcc0a37ab70cb79b16893556cffdaad6974e7d8\n> Architecture: amd64\n> Protocol Versions: [63 62]\n> Network Id: 1\n> Go Version: go1.10.4\n> Operating System: linux\n> GOPATH=\n> GOROOT=/usr/lib/go-1.10\n>\n> OS & Version: Ubuntu 18.04.2\n>\n> I run with the following interesting flags:\n>\n> --datadir /data/ethereum\n> --nousb\n> --lightserv 100\n> --lightpeers 75\n> --maxpeers 100\n> --nat extip:$(curl -s ipinfo.io/ip)\n> --shh\n> --rpc\n> --ws\n> --graphql\n>\n> 05-20-1am-2am.log\n> <https://github.com/ethereum/go-ethereum/files/3212324/05-20-1am-2am.log>\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/19619?email_source=notifications&email_token=AGGBNUERTNBOMVVZAHRVJNTPW2MC7A5CNFSM4HPEICWKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4GVOZ5FQ>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGBNUFQYZSWTHJFHLSWQI3PW2MC7ANCNFSM4HPEICWA>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/496269773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

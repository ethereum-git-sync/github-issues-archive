{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3590",
  "id": 201766289,
  "node_id": "MDU6SXNzdWUyMDE3NjYyODk=",
  "number": 3590,
  "title": "Error: Difficulty check failed for header",
  "user": {
    "login": "awesomehimanshu",
    "id": 16804408,
    "node_id": "MDQ6VXNlcjE2ODA0NDA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16804408?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/awesomehimanshu",
    "html_url": "https://github.com/awesomehimanshu",
    "followers_url": "https://api.github.com/users/awesomehimanshu/followers",
    "following_url": "https://api.github.com/users/awesomehimanshu/following{/other_user}",
    "gists_url": "https://api.github.com/users/awesomehimanshu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/awesomehimanshu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/awesomehimanshu/subscriptions",
    "organizations_url": "https://api.github.com/users/awesomehimanshu/orgs",
    "repos_url": "https://api.github.com/users/awesomehimanshu/repos",
    "events_url": "https://api.github.com/users/awesomehimanshu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/awesomehimanshu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-01-19T05:10:49Z",
  "updated_at": "2017-03-22T07:31:54Z",
  "closed_at": "2017-01-20T09:01:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version` 1.5.7\r\nOS & Version: Ubuntu 14.10\r\n\r\n#### Actual behaviour\r\n\r\n```text\r\nError: Difficulty check failed for header (remote: 131072 local: 16384)\r\n##############################\r\nE0119 10:39:44.709328 core/blockchain.go:1232] \r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 0 Homestead: <nil> DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: <nil> EIP158: <nil>}\r\n\r\nNumber: 1\r\nHash: 0x2e5345be979fb360c693eed39107d2a4eb56314b6f66f66f385849d17c51b6d2\r\n\r\n\r\nError: Difficulty check failed for header (remote: 131072 local: 16384)\r\n##############################\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/274015508",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-274015508",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 274015508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDAxNTUwOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-20T09:01:25Z",
    "updated_at": "2017-01-20T09:01:25Z",
    "author_association": "MEMBER",
    "body": "You may never go with the difficulty below 131072 as specified by the protocol parameters. https://github.com/ethereum/go-ethereum/blob/master/params/protocol_params.go#L59 . Please make sure your genesis block's difficulty is at least this large.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/274015508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/274017048",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-274017048",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 274017048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDAxNzA0OA==",
    "user": {
      "login": "awesomehimanshu",
      "id": 16804408,
      "node_id": "MDQ6VXNlcjE2ODA0NDA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16804408?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/awesomehimanshu",
      "html_url": "https://github.com/awesomehimanshu",
      "followers_url": "https://api.github.com/users/awesomehimanshu/followers",
      "following_url": "https://api.github.com/users/awesomehimanshu/following{/other_user}",
      "gists_url": "https://api.github.com/users/awesomehimanshu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/awesomehimanshu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/awesomehimanshu/subscriptions",
      "organizations_url": "https://api.github.com/users/awesomehimanshu/orgs",
      "repos_url": "https://api.github.com/users/awesomehimanshu/repos",
      "events_url": "https://api.github.com/users/awesomehimanshu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/awesomehimanshu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-20T09:07:41Z",
    "updated_at": "2017-01-20T09:07:41Z",
    "author_association": "NONE",
    "body": "I solved that ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/274017048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276030388",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-276030388",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 276030388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjAzMDM4OA==",
    "user": {
      "login": "kevinaquick",
      "id": 4312083,
      "node_id": "MDQ6VXNlcjQzMTIwODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4312083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinaquick",
      "html_url": "https://github.com/kevinaquick",
      "followers_url": "https://api.github.com/users/kevinaquick/followers",
      "following_url": "https://api.github.com/users/kevinaquick/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinaquick/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinaquick/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinaquick/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinaquick/orgs",
      "repos_url": "https://api.github.com/users/kevinaquick/repos",
      "events_url": "https://api.github.com/users/kevinaquick/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinaquick/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-30T10:42:02Z",
    "updated_at": "2017-01-30T10:42:02Z",
    "author_association": "NONE",
    "body": "We are getting something similar on our private network of 5 nodes. 4 are quite happy and are syncing and mining away but the 5th drops nodes and has got stuck at block 1149999. With the error:\r\n\r\nError: Difficulty check failed for header (remote: 5469336 local: 5466666)\r\n##############################\r\nE0130 10:29:06.915614 core/blockchain.go:1249] \r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 0 Homestead: <nil> DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: <nil> EIP158: <nil>}\r\n\r\nNumber: 1150000\r\nHash: 0x7ff9f6b81f63e0c80ac57718239c71aef69c1a48d0ff73d9f3ab080a40d596b3\r\n\r\n\r\nAny ideas why that should be the case!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276030388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276034845",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-276034845",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 276034845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjAzNDg0NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-30T11:04:15Z",
    "updated_at": "2017-01-30T11:04:15Z",
    "author_association": "MEMBER",
    "body": "1150000 is the homestead transition number. Apparently some of your nodes were configured to transition into homestead, while other not. Looking at the report above, the node that's failing is not configured to do so.\r\n\r\nIs your private network old? Strange that you are running one with Frontier specs. You'll need to `geth init` your 5th node to the same chain configuration as the remainder of the nodes are using. Take your genesis json that you run your network with, add a `config` field to it containing the chain configuration of your majority nodes, and do a `geth init genesis.json` on your minority node to update it's rules according to the majority one.\r\n\r\nPS: Please make a backup of your data directory before doing this just in case something goes wrong.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276034845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276036144",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-276036144",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 276036144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjAzNjE0NA==",
    "user": {
      "login": "kevinaquick",
      "id": 4312083,
      "node_id": "MDQ6VXNlcjQzMTIwODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4312083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinaquick",
      "html_url": "https://github.com/kevinaquick",
      "followers_url": "https://api.github.com/users/kevinaquick/followers",
      "following_url": "https://api.github.com/users/kevinaquick/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinaquick/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinaquick/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinaquick/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinaquick/orgs",
      "repos_url": "https://api.github.com/users/kevinaquick/repos",
      "events_url": "https://api.github.com/users/kevinaquick/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinaquick/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-30T11:11:22Z",
    "updated_at": "2017-01-30T11:11:22Z",
    "author_association": "NONE",
    "body": "Wow thanks for the very fast feedback - I will start investigating as you suggest!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276036144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276067100",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-276067100",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 276067100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjA2NzEwMA==",
    "user": {
      "login": "kevinaquick",
      "id": 4312083,
      "node_id": "MDQ6VXNlcjQzMTIwODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4312083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinaquick",
      "html_url": "https://github.com/kevinaquick",
      "followers_url": "https://api.github.com/users/kevinaquick/followers",
      "following_url": "https://api.github.com/users/kevinaquick/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinaquick/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinaquick/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinaquick/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinaquick/orgs",
      "repos_url": "https://api.github.com/users/kevinaquick/repos",
      "events_url": "https://api.github.com/users/kevinaquick/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinaquick/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-30T13:51:02Z",
    "updated_at": "2017-01-30T13:51:02Z",
    "author_association": "NONE",
    "body": "We now have the troublesome node back in sync with the rest of our private network. \r\n\r\nJust in case it helps anyone else...\r\n\r\nYes the network has been running for quite a while i.e. 1 year. The genesis.json is identical on all the nodes of the network. The machine that had the problem was the most recent to be added (2 or 3 months ago?). The genesis.json did not specify a blocknumber for the homestead transition (and as identical on all nodes this is the case across our private network). For whatever reason our chain had the transition block set as 1150000 (a default set in the code? which from what Peter said was the blocknumber set on the live public network?) this number was reached for our chain just a week or two ago and presumably triggered the problem on our troublesome node.\r\n\r\nWhat has seemed to solve the issue was to add the following to the genesis.json on the node that would not sync\r\n\r\n    \"config\": {\r\n        \"homesteadBlock\": 1150000\r\n    }\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/276067100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/288319782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3590#issuecomment-288319782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3590",
    "id": 288319782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODMxOTc4Mg==",
    "user": {
      "login": "amitOodles",
      "id": 20085459,
      "node_id": "MDQ6VXNlcjIwMDg1NDU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20085459?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitOodles",
      "html_url": "https://github.com/amitOodles",
      "followers_url": "https://api.github.com/users/amitOodles/followers",
      "following_url": "https://api.github.com/users/amitOodles/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitOodles/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitOodles/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitOodles/subscriptions",
      "organizations_url": "https://api.github.com/users/amitOodles/orgs",
      "repos_url": "https://api.github.com/users/amitOodles/repos",
      "events_url": "https://api.github.com/users/amitOodles/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitOodles/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-22T07:31:54Z",
    "updated_at": "2017-03-22T07:31:54Z",
    "author_association": "NONE",
    "body": "Peter, firstly i got this issue \r\n\r\n> ########## BAD BLOCK #########\r\nChain config: {ChainID: 0 Homestead: <nil> DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: <nil> EIP158: <nil>}\r\nNumber: 5\r\nHash: 0x1664247a1df06d9652c9fdc2792c7ce72172cbf951ac3bcb44975256df37124e\r\nError: Difficulty check failed for header (remote: 131264 local: 131200)\r\n\r\nthen made changes to the genesis file and set the minimum difficulty to \r\n\r\n> \"difficulty\": \"0x020001\",\r\n\r\nso the minimum difficulty became 131073 and created new data directories with the new Genesis file. But even after that at a certain block number , i got the following issue -\r\n\r\n> Chain config: {ChainID: 0 Homestead: <nil> DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: <nil> EIP158: <nil>}\r\nNumber: 17\r\nHash: 0x34b647515dc62878d916b0fd72bbd1f0fb35b32ea1a19cd9611c8fab8a754463\r\nError: Difficulty check failed for header (remote: 132032 local: 131968)\r\n\r\nWhat am i doing wrong now ?\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/288319782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25557",
  "id": 1344986674,
  "node_id": "I_kwDOAOvK985QKt4y",
  "number": 25557,
  "title": "Geth returning no data for random uncle blocks;  method `eth_getBlockByHash`",
  "user": {
    "login": "rx294",
    "id": 17052944,
    "node_id": "MDQ6VXNlcjE3MDUyOTQ0",
    "avatar_url": "https://avatars.githubusercontent.com/u/17052944?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rx294",
    "html_url": "https://github.com/rx294",
    "followers_url": "https://api.github.com/users/rx294/followers",
    "following_url": "https://api.github.com/users/rx294/following{/other_user}",
    "gists_url": "https://api.github.com/users/rx294/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rx294/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rx294/subscriptions",
    "organizations_url": "https://api.github.com/users/rx294/orgs",
    "repos_url": "https://api.github.com/users/rx294/repos",
    "events_url": "https://api.github.com/users/rx294/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rx294/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-08-19T23:57:57Z",
  "updated_at": "2022-08-24T21:33:55Z",
  "closed_at": "2022-08-22T06:39:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.21-stable and 1.10.19-stable\r\nOS & Version: Ubuntu 20.04\r\n\r\n#### Expected behaviour\r\n\r\n`eth_getBlockByHash` returns all uncle blocks correctly by hash\r\n\r\n#### Actual behaviour\r\n\r\nGeth nodes randomly misses uncle blocks by method `eth_getBlockByHash`\r\n\r\nBehavior seems random; different blocks are missed on different nodes.\r\nIssue happening on full, archive nodes\r\n\r\nNethermind client seems to be only one able to handle all uncle hashes I have tried.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nThe following is a full node that has completed syncing\r\n\r\n```\r\ncurl -s -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_getBlockByHash\",\"params\":[\"0x43dcef55b1eb2ceb6dd975190812dcc5c1a77598ac4c9325c6ad9b29cff065bf\",false],\"id\":1,\"jsonrpc\":\"2.0\"}' http://150.136.140.196:8545\r\n\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}\r\n```\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1221914780",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25557#issuecomment-1221914780",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557",
    "id": 1221914780,
    "node_id": "IC_kwDOAOvK985I1PCc",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T06:39:02Z",
    "updated_at": "2022-08-22T06:39:19Z",
    "author_association": "MEMBER",
    "body": "Uncle blocks are \"side chains\". Some may never propagate through the network if a miner includes its own late uncle, but they can still add it as an uncle header. Once the chain progresses enough forward, even propagated side chains get deleted.\r\n\r\nTL;DR: Don't rely on the availability of uncle blocks, they will not be available long term and many might not ever be available even in the short term. The header is all you'll have available guaranteed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1221914780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1222307471",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25557#issuecomment-1222307471",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557",
    "id": 1222307471,
    "node_id": "IC_kwDOAOvK985I2u6P",
    "user": {
      "login": "rx294",
      "id": 17052944,
      "node_id": "MDQ6VXNlcjE3MDUyOTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/17052944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rx294",
      "html_url": "https://github.com/rx294",
      "followers_url": "https://api.github.com/users/rx294/followers",
      "following_url": "https://api.github.com/users/rx294/following{/other_user}",
      "gists_url": "https://api.github.com/users/rx294/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rx294/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rx294/subscriptions",
      "organizations_url": "https://api.github.com/users/rx294/orgs",
      "repos_url": "https://api.github.com/users/rx294/repos",
      "events_url": "https://api.github.com/users/rx294/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rx294/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T12:43:59Z",
    "updated_at": "2022-08-22T12:43:59Z",
    "author_association": "NONE",
    "body": "@karalabe \r\nUncle blocks are rewarded ETH. How do we validate that the uncle blocks existed and were correct and are being rewarded to the miner appropriately if we cannot validate the uncle block?\r\n\r\nAlso, our Nethermind nodes return every single uncle block we've tested.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1222307471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1222325249",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25557#issuecomment-1222325249",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557",
    "id": 1222325249,
    "node_id": "IC_kwDOAOvK985I2zQB",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T12:59:28Z",
    "updated_at": "2022-08-22T12:59:28Z",
    "author_association": "MEMBER",
    "body": "> Uncle blocks are rewarded ETH. How do we validate that the uncle blocks existed and were correct and are being rewarded to the miner appropriately if we cannot validate the uncle block?\r\n\r\nUncle (ommers) are `header`s, not `block`s. A client does not validate the transactions in an ommer body. There are no guarantees about that. As long as the ommer proof of work is correct, then it's fine. The stateroot and transactionsroot are not validated and may be totally invalid. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1222325249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1226408381",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25557#issuecomment-1226408381",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25557",
    "id": 1226408381,
    "node_id": "IC_kwDOAOvK985JGYG9",
    "user": {
      "login": "Danyalkasiri",
      "id": 101438812,
      "node_id": "U_kgDOBgvVXA",
      "avatar_url": "https://avatars.githubusercontent.com/u/101438812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Danyalkasiri",
      "html_url": "https://github.com/Danyalkasiri",
      "followers_url": "https://api.github.com/users/Danyalkasiri/followers",
      "following_url": "https://api.github.com/users/Danyalkasiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/Danyalkasiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Danyalkasiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Danyalkasiri/subscriptions",
      "organizations_url": "https://api.github.com/users/Danyalkasiri/orgs",
      "repos_url": "https://api.github.com/users/Danyalkasiri/repos",
      "events_url": "https://api.github.com/users/Danyalkasiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Danyalkasiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T21:33:55Z",
    "updated_at": "2022-08-24T21:33:55Z",
    "author_association": "NONE",
    "body": "در تاریخ دوشنبه ۲۲ اوت ۲۰۲۲،‏ ۱۱:۱۱ Péter Szilágyi ***@***.***>\nنوشت:\n\n> Uncle blocks are \"side chains\". Some may never propagate through the\n> network is a miner includes its own late uncle, but they can still add it\n> as an uncle header. Once the chain progresses enough forward, even\n> propagated side chains get deleted.\n>\n> TL;DR: Don't rely on the availability of uncle blocks, they will not be\n> available long term and many might not ever be available even in the short\n> term. The header is all you'll have available guaranteed.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/25557#issuecomment-1221914780>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AYF5KXEIFVTWGRY6UPF4TPLV2MOIFANCNFSM57CIXEBQ>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1226408381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

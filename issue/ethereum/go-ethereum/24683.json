{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24683",
  "id": 1201181863,
  "node_id": "I_kwDOAOvK985HmJSn",
  "number": 24683,
  "title": "\"unexpected type float64 for Long\" error when run graphql with parameters of type Long",
  "user": {
    "login": "ngugcx",
    "id": 44153489,
    "node_id": "MDQ6VXNlcjQ0MTUzNDg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/44153489?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ngugcx",
    "html_url": "https://github.com/ngugcx",
    "followers_url": "https://api.github.com/users/ngugcx/followers",
    "following_url": "https://api.github.com/users/ngugcx/following{/other_user}",
    "gists_url": "https://api.github.com/users/ngugcx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ngugcx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ngugcx/subscriptions",
    "organizations_url": "https://api.github.com/users/ngugcx/orgs",
    "repos_url": "https://api.github.com/users/ngugcx/repos",
    "events_url": "https://api.github.com/users/ngugcx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ngugcx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "s1na",
    "id": 1591639,
    "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/s1na",
    "html_url": "https://github.com/s1na",
    "followers_url": "https://api.github.com/users/s1na/followers",
    "following_url": "https://api.github.com/users/s1na/following{/other_user}",
    "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
    "organizations_url": "https://api.github.com/users/s1na/orgs",
    "repos_url": "https://api.github.com/users/s1na/repos",
    "events_url": "https://api.github.com/users/s1na/events{/privacy}",
    "received_events_url": "https://api.github.com/users/s1na/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-04-12T06:24:40Z",
  "updated_at": "2022-05-12T19:10:09Z",
  "closed_at": "2022-05-12T19:10:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version`\r\n```\r\n/ # geth version\r\nGeth\r\nVersion: 1.10.17-stable\r\nGit Commit: 25c9b49fdb74931137431c24cf28d3c65f9420d2\r\nArchitecture: amd64\r\nGo Version: go1.18\r\nOperating System: linux\r\n```\r\nOS & Version: Windows/Linux/OSX\r\n```\r\n/ # uname -a\r\nLinux 69c4dda6023d 5.4.0-81-generic #91-Ubuntu SMP Thu Jul 15 19:09:17 UTC 2021 x86_64 Linux\r\n```\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\n```\r\ncurl 'http://localhost:8545/graphql' --data-raw $'{\"query\":\"query blocks($from_: Long!, $to_: Long!) {  blocks(from: $from_, to: $to_) {    number    hash    timestamp  }}\",\"variables\":{\"from_\":14000000,\"to_\":14000001},\"operationName\":\"blocks\"}'\r\n```\r\nIt should return the specified block info.\r\n\r\n#### Actual behaviour\r\nIt returns:\r\n```\r\n{\"errors\":[{\"message\":\"unexpected type float64 for Long\"}],\"data\":{}}\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\nRun geth as below:\r\n```\r\ngeth --txlookuplimit=1000000 --http --http.addr=0.0.0.0 --http.api eth,net,web3 --http.corsdomain=\"*\" --http.vhosts=\"*\" --graphql --graphql.corsdomain=\"*\" --graphql.vhosts=\"*\" --ws --ws.addr=0.0.0.0 --ws.api eth,net,web3\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096219631",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24683#issuecomment-1096219631",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683",
    "id": 1096219631,
    "node_id": "IC_kwDOAOvK985BVvvv",
    "user": {
      "login": "Kantitad",
      "id": 67541803,
      "node_id": "MDQ6VXNlcjY3NTQxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67541803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kantitad",
      "html_url": "https://github.com/Kantitad",
      "followers_url": "https://api.github.com/users/Kantitad/followers",
      "following_url": "https://api.github.com/users/Kantitad/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kantitad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kantitad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kantitad/subscriptions",
      "organizations_url": "https://api.github.com/users/Kantitad/orgs",
      "repos_url": "https://api.github.com/users/Kantitad/repos",
      "events_url": "https://api.github.com/users/Kantitad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kantitad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T07:11:18Z",
    "updated_at": "2022-04-12T07:11:18Z",
    "author_association": "NONE",
    "body": ":[25c9b49fdb74931137431c24cf28d3c65f9420d2]\n\n\nเมื่อ วันอังคารที่ 12 เมษายน ค.ศ. 2022, ngugcx ***@***.***>\nเขียนว่า:\n\n> System information\n>\n> Geth version: geth version\n>\n> / # geth version\n> Geth\n> Version: 1.10.17-stable\n> Git Commit: 25c9b49fdb74931137431c24cf28d3c65f9420d2\n> Architecture: amd64\n> Go Version: go1.18\n> Operating System: linux\n>\n> OS & Version: Windows/Linux/OSX\n>\n> / # uname -a\n> Linux 69c4dda6023d 5.4.0-81-generic #91-Ubuntu SMP Thu Jul 15 19:09:17 UTC 2021 x86_64 Linux\n>\n> Commit hash : (if develop)\n> Expected behaviour\n>\n> curl 'http://localhost:8545/graphql' --data-raw $'{\"query\":\"query blocks($from_: Long!, $to_: Long!) {  blocks(from: $from_, to: $to_) {    number    hash    timestamp  }}\",\"variables\":{\"from_\":14000000,\"to_\":14000001},\"operationName\":\"blocks\"}'\n>\n> It should return the specified block info.\n> Actual behaviour\n>\n> It returns:\n>\n> {\"errors\":[{\"message\":\"unexpected type float64 for Long\"}],\"data\":{}}\n>\n> Steps to reproduce the behaviour\n>\n> Run geth as below:\n>\n> geth --txlookuplimit=1000000 --http --http.addr=0.0.0.0 --http.api eth,net,web3 --http.corsdomain=\"*\" --http.vhosts=\"*\" --graphql --graphql.corsdomain=\"*\" --graphql.vhosts=\"*\" --ws --ws.addr=0.0.0.0 --ws.api eth,net,web3\n>\n> Backtrace\n>\n> [backtrace]\n>\n> When submitting logs: please submit them as text and not screenshots.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/24683>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AQDJWKYUIHYH4HVDDTENJPDVEUJU3ANCNFSM5TFPUGRA>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096219631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096319404",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24683#issuecomment-1096319404",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683",
    "id": 1096319404,
    "node_id": "IC_kwDOAOvK985BWIGs",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T08:09:17Z",
    "updated_at": "2022-04-12T08:09:17Z",
    "author_association": "MEMBER",
    "body": "Try sending the values as strings, i.e.:\r\n\r\n`\"variables\":{\"from_\":\"14000000\",\"to_\":\"14000001\"}`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096319404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096407169",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24683#issuecomment-1096407169",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683",
    "id": 1096407169,
    "node_id": "IC_kwDOAOvK985BWdiB",
    "user": {
      "login": "ngugcx",
      "id": 44153489,
      "node_id": "MDQ6VXNlcjQ0MTUzNDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44153489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ngugcx",
      "html_url": "https://github.com/ngugcx",
      "followers_url": "https://api.github.com/users/ngugcx/followers",
      "following_url": "https://api.github.com/users/ngugcx/following{/other_user}",
      "gists_url": "https://api.github.com/users/ngugcx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ngugcx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ngugcx/subscriptions",
      "organizations_url": "https://api.github.com/users/ngugcx/orgs",
      "repos_url": "https://api.github.com/users/ngugcx/repos",
      "events_url": "https://api.github.com/users/ngugcx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ngugcx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T09:05:07Z",
    "updated_at": "2022-04-12T09:05:07Z",
    "author_association": "NONE",
    "body": "> Try sending the values as strings, i.e.:\r\n> \r\n> `\"variables\":{\"from_\":\"14000000\",\"to_\":\"14000001\"}`\r\n\r\nYes, strings work.\r\nWhy integers are always parsed as float? JSON has integer type.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096407169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1097986606",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24683#issuecomment-1097986606",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24683",
    "id": 1097986606,
    "node_id": "IC_kwDOAOvK985BcfIu",
    "user": {
      "login": "s1na",
      "id": 1591639,
      "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s1na",
      "html_url": "https://github.com/s1na",
      "followers_url": "https://api.github.com/users/s1na/followers",
      "following_url": "https://api.github.com/users/s1na/following{/other_user}",
      "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
      "organizations_url": "https://api.github.com/users/s1na/orgs",
      "repos_url": "https://api.github.com/users/s1na/repos",
      "events_url": "https://api.github.com/users/s1na/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s1na/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-13T12:22:23Z",
    "updated_at": "2022-04-13T12:33:39Z",
    "author_association": "MEMBER",
    "body": "So interestingly this only happens when using variables. Embedding the value in the query itself works fine, e.g. `query block(num: 14000000) { hash }` works ok.\r\n\r\nEdit: created an issue upstream https://github.com/graph-gophers/graphql-go/issues/514",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1097986606/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

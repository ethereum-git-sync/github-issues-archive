{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1308",
  "id": 89953126,
  "node_id": "MDU6SXNzdWU4OTk1MzEyNg==",
  "number": 1308,
  "title": " Block's parent unknown",
  "user": {
    "login": "kvhnuke",
    "id": 10602065,
    "node_id": "MDQ6VXNlcjEwNjAyMDY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10602065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kvhnuke",
    "html_url": "https://github.com/kvhnuke",
    "followers_url": "https://api.github.com/users/kvhnuke/followers",
    "following_url": "https://api.github.com/users/kvhnuke/following{/other_user}",
    "gists_url": "https://api.github.com/users/kvhnuke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kvhnuke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kvhnuke/subscriptions",
    "organizations_url": "https://api.github.com/users/kvhnuke/orgs",
    "repos_url": "https://api.github.com/users/kvhnuke/repos",
    "events_url": "https://api.github.com/users/kvhnuke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kvhnuke/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2015-06-21T19:52:40Z",
  "updated_at": "2015-06-21T23:49:16Z",
  "closed_at": "2015-06-21T23:49:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "This is the second time this happened, on the exact same block number, after this it seems like there is no way to start syncing from block #640967.\nlast time I did removedb and started to sync from the beginning but it gave me the same error at the same block. \n\nversion: latest developer\n\nI0621 19:46:10.786913   30032 chain_manager.go:690] imported 1 block(s) (0 queued 0 ignored) including 60 txs in 5.496449553s. #640966 [47233985 / 47233985]\nI0621 19:46:10.806794   30032 chain_manager.go:801] Bad block #640967 (905f44ee8670a3f910df1f927d11a412b2e85fe3c8894cacd06f16ef4bcc5b3e)\nI0621 19:46:10.806866   30032 chain_manager.go:802] Block's parent unknown 472339850948350e541cfcbe69ea6390a1523e436011d31f1c564e8a2e8037ab\nI0621 19:46:10.822569   30032 downloader.go:224] Synchronisation failed: block downloading canceled (requested)\n^CI0621 19:47:01.645109   30032 cmd.go:60] Shutting down (interrupt) ...\nI0621 19:47:01.758768   30032 downloader.go:224] Synchronisation failed: no peers to keep download active\nI0621 19:47:02.481046   30032 chain_manager.go:690] imported 1 block(s) (0 queued 0 ignored) including 60 txs in 1.878685734s. #640966 [47233985 / 47233985]\nI0621 19:47:02.481252   30032 chain_manager.go:518] Chain manager stopped\nI0621 19:47:02.481314   30032 handler.go:141] Stopping ethereum protocol handler...\nI0621 19:47:02.481376   30032 handler.go:151] Ethereum protocol handler stopped\nI0621 19:47:02.481435   30032 transaction_pool.go:122] TX Pool stopped\nI0621 19:47:02.516510   30032 backend.go:635] Automatic pregeneration of ethash DAG OFF (ethash dir: /root/.ethash)\nI0621 19:47:02.518630   30032 database.go:78] flushed and closed db: /root/.ethereum/blockchain\nI0621 19:47:02.627267   30032 database.go:78] flushed and closed db: /root/.ethereum/state\nI0621 19:47:02.631073   30032 database.go:78] flushed and closed db: /root/.ethereum/extra\nroot@localhost:/home# geth\nI0621 19:47:06.965512   15441 backend.go:269] Protocol Version: 60, Network Id: 0\nI0621 19:47:06.965728   15441 backend.go:279] Blockchain DB Version: 3\nF0621 19:47:07.018681   15441 chain_manager.go:238] Fatal. LastBlock not found. Please run removedb and resync\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113956031",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1308#issuecomment-113956031",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
    "id": 113956031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk1NjAzMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-21T20:50:40Z",
    "updated_at": "2015-06-21T20:51:10Z",
    "author_association": "MEMBER",
    "body": "Did you by any chance run out of disk space? We've noticed a similar issue with database corruption when the disk was full (there were some missing write error checks). I've managed to screw up my chain at least 3-5 times in the last few days, turned out only due to the disk... (the check/fix is pending, maybe it will be merged tomorrow).\n\nIf you are sure you indeed have enough space (my chain is currently at 24.3GB), you can try **temporarily** replacing this line: https://github.com/ethereum/go-ethereum/blob/develop/core/chain_manager.go#L233 with `block := bc.GetBlockByNumber(640900)`. This should force geth to revert to a previous block instead of trying to access the latest (which seems to gone missing).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113956031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113962677",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1308#issuecomment-113962677",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
    "id": 113962677,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk2MjY3Nw==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-21T21:38:36Z",
    "updated_at": "2015-06-21T21:38:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Or a system crash?\n\nMissing parent is not a corruption. You shouldn't give this block to the chain manager of it doesn't exist. Is this perhaps the case Peter?\n\n> On 21 Jun 2015, at 22:50, Péter Szilágyi notifications@github.com wrote:\n> \n> Did you by any chance run out of disk space? We've noticed a similar issue with database corruption when the disk was full (there were some missing write error checks). I've managed to screw up my chain at least 3-5 times in the last few days, turned out only due to the disk...\n> \n> If you are sure you indeed have enough space (my chain is currently at 24.3GB), you can try temporarily replacing this line: https://github.com/ethereum/go-ethereum/blob/develop/core/chain_manager.go#L233 with block := bc.GetBlockByNumber(640900). This should force geth to revert to a previous block instead of trying to access the latest (which seems to gone missing).\n> \n> —\n> Reply to this email directly or view it on GitHub.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113962677/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113962853",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1308#issuecomment-113962853",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
    "id": 113962853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk2Mjg1Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-21T21:43:15Z",
    "updated_at": "2015-06-21T21:43:15Z",
    "author_association": "MEMBER",
    "body": "The log does contain:\n\n```\nI0621 19:46:10.786913 30032 chain_manager.go:690] imported 1 block(s) (0 queued 0 ignored) including 60 txs in 5.496449553s. #640966 [47233985 / 47233985]\nI0621 19:46:10.806794 30032 chain_manager.go:801] Bad block #640967 (905f44ee8670a3f910df1f927d11a412b2e85fe3c8894cacd06f16ef4bcc5b3e)\nI0621 19:46:10.806866 30032 chain_manager.go:802] Block's parent unknown 472339850948350e541cfcbe69ea6390a1523e436011d31f1c564e8a2e8037ab\n```\n\nSo it doesn't look like a crash. As far as I know we check for parents before any insert.\n\nHowever, I think the most important part is the last log entry:\n\n```\nF0621 19:47:07.018681 15441 chain_manager.go:238] Fatal. LastBlock not found. Please run removedb and resync\n```\n\nwhich seems to suggest, that at least writing LastBlock failed, so I'm betting writing out the block itself too, that's why it's missing from the db.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113962853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113963171",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1308#issuecomment-113963171",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
    "id": 113963171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk2MzE3MQ==",
    "user": {
      "login": "kvhnuke",
      "id": 10602065,
      "node_id": "MDQ6VXNlcjEwNjAyMDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10602065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kvhnuke",
      "html_url": "https://github.com/kvhnuke",
      "followers_url": "https://api.github.com/users/kvhnuke/followers",
      "following_url": "https://api.github.com/users/kvhnuke/following{/other_user}",
      "gists_url": "https://api.github.com/users/kvhnuke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kvhnuke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kvhnuke/subscriptions",
      "organizations_url": "https://api.github.com/users/kvhnuke/orgs",
      "repos_url": "https://api.github.com/users/kvhnuke/repos",
      "events_url": "https://api.github.com/users/kvhnuke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kvhnuke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-21T21:49:05Z",
    "updated_at": "2015-06-21T21:49:05Z",
    "author_association": "NONE",
    "body": "yes indeed!!! it did run out of disk space, Thank you!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113963171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113969012",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1308#issuecomment-113969012",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1308",
    "id": 113969012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk2OTAxMg==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-21T23:40:37Z",
    "updated_at": "2015-06-21T23:40:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "cool. should be fixed in https://github.com/ethereum/go-ethereum/pull/1305. At least for the reporting :)\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/113969012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

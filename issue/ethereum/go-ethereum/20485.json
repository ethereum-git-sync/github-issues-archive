{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20485",
  "id": 542578035,
  "node_id": "MDU6SXNzdWU1NDI1NzgwMzU=",
  "number": 20485,
  "title": "Full Sync: BAD BLOCK: gas limit reached ",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-12-26T14:59:22Z",
  "updated_at": "2020-08-27T08:56:19Z",
  "closed_at": "2020-01-23T10:05:16Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.9.10-unstable-3bb6815f-20191224`\r\nOS & Version: `18.04.3 LTS`\r\nGo Version: `go1.13.4`\r\n\r\n#### Expected behaviour\r\nProcess all blocks\r\n\r\n#### Actual behaviour\r\nBAD BLOCK gas limit reached\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI did not import DB this time, just straight `--syncmode full` with an empty chaindata and empty ancients folder. It's been syncing for days, now it's stuck.\r\n\r\n`/opt/go-ethereum/build/bin/geth --datadir /data/ethereum --datadir.ancient /archive/ancient --nousb --ethstats=MysticRyuujin-geth01:<redacted>@ethstats.net --identity MysticRyuujin-geth01 --light.serve 100 --port 30301 --maxpeers 100 --nat extip:$(curl -s ipinfo.io/ip) --shh --rpc --rpcapi db,eth,net,web3,admin,txpool,shh --rpcaddr 192.168.15.31 --rpccorsdomain \"*\" --rpcvhosts \"*\" --ws --wsaddr 192.168.15.31 --wsapi db,eth,net,web3,admin,txpool,shh --wsorigins \"*\" --graphql --graphql.addr 192.168.15.31 --graphql.corsdomain \"*\" --graphql.vhosts \"*\" --syncmode full --cache 8192'`\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO [12-26|05:20:50.251] Imported new chain segment               blocks=35   txs=3815  mgas=265.118 elapsed=8.049s    mgasps=32.934  number=6027931 hash=5f1980…78c01b age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:20:58.472] Imported new chain segment               blocks=33   txs=4912  mgas=250.937 elapsed=8.220s    mgasps=30.526  number=6027964 hash=17fc22…1087c6 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:06.527] Imported new chain segment               blocks=46   txs=6061  mgas=330.144 elapsed=8.054s    mgasps=40.987  number=6028010 hash=b3be70…599233 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:14.606] Imported new chain segment               blocks=36   txs=4547  mgas=279.135 elapsed=8.079s    mgasps=34.550  number=6028046 hash=8d8a56…8f431a age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:22.738] Imported new chain segment               blocks=43   txs=4750  mgas=315.514 elapsed=8.131s    mgasps=38.800  number=6028089 hash=e60b0d…906389 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:31.064] Imported new chain segment               blocks=50   txs=5918  mgas=357.989 elapsed=8.326s    mgasps=42.992  number=6028139 hash=849bb2…1c2a6a age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:39.111] Imported new chain segment               blocks=43   txs=5768  mgas=323.721 elapsed=8.046s    mgasps=40.229  number=6028182 hash=204b24…5b1a31 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:47.303] Imported new chain segment               blocks=39   txs=5920  mgas=279.217 elapsed=8.191s    mgasps=34.087  number=6028221 hash=578ccf…2f51d3 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:21:53.364] Deep froze chain segment                 blocks=331  elapsed=7.488s    number=5938216 hash=d65678…0c6945\r\nINFO [12-26|05:21:55.341] Imported new chain segment               blocks=40   txs=4671  mgas=272.158 elapsed=8.038s    mgasps=33.858  number=6028261 hash=58e974…70e3e7 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:03.417] Imported new chain segment               blocks=50   txs=6084  mgas=344.484 elapsed=8.076s    mgasps=42.654  number=6028311 hash=1959e1…579fa6 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:11.498] Imported new chain segment               blocks=44   txs=5884  mgas=311.827 elapsed=8.081s    mgasps=38.587  number=6028355 hash=061266…8510da age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:19.612] Imported new chain segment               blocks=48   txs=5668  mgas=352.428 elapsed=8.113s    mgasps=43.436  number=6028403 hash=19b30d…a834b6 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:27.948] Imported new chain segment               blocks=38   txs=3656  mgas=258.823 elapsed=8.335s    mgasps=31.049  number=6028441 hash=fa3221…379ee7 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:36.055] Imported new chain segment               blocks=43   txs=4468  mgas=316.000 elapsed=8.107s    mgasps=38.977  number=6028484 hash=5d01d2…f45164 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:44.153] Imported new chain segment               blocks=45   txs=5832  mgas=300.300 elapsed=8.097s    mgasps=37.085  number=6028529 hash=d7112a…611588 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:52.250] Imported new chain segment               blocks=57   txs=6409  mgas=386.113 elapsed=8.097s    mgasps=47.684  number=6028586 hash=c482ff…f49023 age=1y5mo1w  dirty=1.29GiB\r\nINFO [12-26|05:22:56.541] Deep froze chain segment                 blocks=371  elapsed=3.175s    number=5938587 hash=72f456…00820b\r\nINFO [12-26|05:23:00.384] Imported new chain segment               blocks=38   txs=4477  mgas=251.341 elapsed=8.134s    mgasps=30.898  number=6028624 hash=11c93c…07aae6 age=1y5mo1w  dirty=1.29GiB\r\nERROR[12-26|05:23:03.191] \r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Engine: ethash}\r\n\r\nNumber: 6028634\r\nHash: 0xc227169cbd2593fa7e371170f8a89e95c4840f674e32c9e7f36c90627993e18f\r\n\r\n\r\nError: gas limit reached\r\n##############################\r\n \r\nWARN [12-26|05:23:03.193] Synchronisation failed, dropping peer    peer=f12c2406387fe178 err=\"retrieved hash chain is invalid\"\r\nINFO [12-26|05:23:03.369] message loop                             peer=40f97c9725dff51e err=EOF\r\nERROR[12-26|05:23:08.714] \r\n########## BAD BLOCK #########\r\nChain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Engine: ethash}\r\n\r\nNumber: 6028634\r\nHash: 0xc227169cbd2593fa7e371170f8a89e95c4840f674e32c9e7f36c90627993e18f\r\n\r\n\r\nError: gas limit reached\r\n##############################\r\n \r\nWARN [12-26|05:23:08.718] Synchronisation failed, dropping peer    peer=39b3de1b8057c000 err=\"retrieved hash chain is invalid\"\r\nERROR[12-26|05:23:13.346] \r\n########## BAD BLOCK #########\r\n````\r\n\r\nError repeats itself over and over.\r\n\r\nAs far as I can tell this is a valid block from etherscan:\r\n[6028634](https://etherscan.io/block/6028634)\r\n`0xc227169cbd2593fa7e371170f8a89e95c4840f674e32c9e7f36c90627993e18f`",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569396957",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20485#issuecomment-569396957",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
    "id": 569396957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTM5Njk1Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-28T08:06:38Z",
    "updated_at": "2019-12-28T08:06:38Z",
    "author_association": "MEMBER",
    "body": "That's no good. However, I'm just doing a benchmarking full sync for https://github.com/ethereum/go-ethereum/pull/20481 , and both `master` and that PR have successfully completed past block 7M, so it does not appear to be something 'chronic'. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569396957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569435599",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20485#issuecomment-569435599",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
    "id": 569435599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTQzNTU5OQ==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-28T17:25:03Z",
    "updated_at": "2019-12-28T17:39:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Anything I can do/try to get the sync to resume or get past this error? Build with that pull request included? Tell Geth to start over from a previous block? Or am I just stuck starting from 0?\r\n\r\nProvide more logs?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569435599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569436916",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20485#issuecomment-569436916",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
    "id": 569436916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTQzNjkxNg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-28T17:38:18Z",
    "updated_at": "2019-12-28T17:38:18Z",
    "author_association": "MEMBER",
    "body": "No I didn't mean that that particular PR was of any use to you, just that it demonstrates that there's no inherent reproducible bug on master (at least not the commit that one is based on). I don't think you can go forward from here. Theoretically, it would be interesting to determine how your data went corrupt, but that's a pretty major undertaking and I'm not sure anyone is up for doing that. So it's probably a resync :(",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569436916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569437111",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20485#issuecomment-569437111",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
    "id": 569437111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTQzNzExMQ==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-28T17:40:58Z",
    "updated_at": "2019-12-28T17:40:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm happy to provide SSH access to the box. But if you feel like it's just a fluke/corruption somewhere. I'll just resync. This is the same node as before having other issues. I guess it could have a bad SSD or something?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/569437111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/577611804",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20485#issuecomment-577611804",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20485",
    "id": 577611804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NzYxMTgwNA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-23T10:05:16Z",
    "updated_at": "2020-01-23T10:05:16Z",
    "author_association": "MEMBER",
    "body": "This is the same linux box as in https://github.com/ethereum/go-ethereum/issues/20478 ? I suggest we close this one, to have one ticket for the linux box and one issue for the windows-box. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/577611804/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

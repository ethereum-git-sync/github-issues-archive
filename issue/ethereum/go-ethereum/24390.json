{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24390",
  "id": 1138216487,
  "node_id": "I_kwDOAOvK985D184n",
  "number": 24390,
  "title": "Fresh install with 2TB external SSD giving `Low disk space` warning",
  "user": {
    "login": "humblecoder",
    "id": 913539,
    "node_id": "MDQ6VXNlcjkxMzUzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/913539?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/humblecoder",
    "html_url": "https://github.com/humblecoder",
    "followers_url": "https://api.github.com/users/humblecoder/followers",
    "following_url": "https://api.github.com/users/humblecoder/following{/other_user}",
    "gists_url": "https://api.github.com/users/humblecoder/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/humblecoder/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/humblecoder/subscriptions",
    "organizations_url": "https://api.github.com/users/humblecoder/orgs",
    "repos_url": "https://api.github.com/users/humblecoder/repos",
    "events_url": "https://api.github.com/users/humblecoder/events{/privacy}",
    "received_events_url": "https://api.github.com/users/humblecoder/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-02-15T05:50:54Z",
  "updated_at": "2022-02-15T08:08:10Z",
  "closed_at": "2022-02-15T08:08:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.15-stable`\r\nOS & Version: `Ubuntu Server 21.10` `aarch64`\r\nHardware: `Raspberry Pi 4 (4GB)`\r\n\r\n#### Expected behaviour\r\nNo warning\r\n\r\n#### Actual behaviour\r\n```Low disk space. Gracefully shutting down Geth to prevent database corruption.```\r\n\r\n#### GETH launch command\r\n```geth --datadir /media/ext2tb --nat=extip:$IP_ADDRESS --port 54123 --syncmode snap --cache=1024 --ws --ws.api eth,web3,debug,txpool,net,admin,debug --ws.origins \"*\"  --http.api eth,web3,debug,txpool,net,admin,debug --http --metrics --maxpeers 30 --light.maxpeers 30 --http.corsdomain \"*\" --http.vhosts \"*\" --mainnet```\r\n\r\n#### Steps to reproduce the behaviour\r\n- Install GETH on Raspberry Pi 4 (4GB), 32GB microSD\r\n- Configure external 2TB SSD\r\n- Mount SSD and adjust permissions accordingly\r\n- GETH runs as expected and writes to external SSD until it hits seemingly random (very low `16GB, 30GB, 17GB`) storage amounts, eventually receiving the error:  ```Low disk space. Gracefully shutting down Geth to prevent database corruption.```\r\n\r\nI've completely wiped and reconfigured 3 times today without resolution.  I've also tested multiple SSDs.  My hope is I'm simply missing a configuration piece.  Please advise.",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1039976285",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24390#issuecomment-1039976285",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24390",
    "id": 1039976285,
    "node_id": "IC_kwDOAOvK9849_Mdd",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-15T08:07:47Z",
    "updated_at": "2022-02-15T08:07:47Z",
    "author_association": "MEMBER",
    "body": "What does `df -h` tell you? \r\nI suspect that `/media` is a folder on your root, and the disk low-space detector thus incorrectly bases the judgement on the remaining size of the root partition, regardless of the size on the ext2b partition.  \r\nThe detector isn't perfect (other problems may occur if your datadir is a network-attached partition, or softlinked), so if you just want to disable this functionality, use this: \r\n```\r\n$ geth -h | grep .minfreedisk\r\n  --datadir.minfreedisk value         Minimum free disk space in MB, once reached triggers auto shut down (default = --cache.gc converted to MB, 0 = disabled)\r\n```\r\nso just `geth ..args... --datadir.minfreedisk=0` and it should be ok.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1039976285/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

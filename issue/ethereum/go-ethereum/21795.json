{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21795",
  "id": 738223451,
  "node_id": "MDU6SXNzdWU3MzgyMjM0NTE=",
  "number": 21795,
  "title": "Add `--mainnet` no-op flag for easier tooling",
  "user": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-11-07T11:22:35Z",
  "updated_at": "2021-01-05T13:31:24Z",
  "closed_at": "2021-01-05T13:31:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.9.23`\r\nOS & Version: Linux\r\n\r\n#### Suggested change\r\n\r\nI'd like to offer a PR to add a `--mainnet` no-op flag to geth, similar to Nethermind and Besu options. This would be a true no-op boolean, specifying it or leaving it out would have the same effect. To be clear, running geth without that parameter will still start it on main net.\r\n\r\nMy main ask is for geth; I am happy to add this to other tools in the same PR if desired.\r\n\r\n#### Rationale\r\n\r\nI have created docker tooling for eth2. The same tooling handles testnet and main net. Currently, I need to special case geth in `.env` like this:\r\n\r\n```\r\n# Network to use for eth1. If using Nethermind or Besu and main net, set to mainnet.\r\nETH1_NETWORK=goerli\r\n# If using Geth as the eth1 node and main net, comment out.\r\nGETH1_NETWORK=--goerli\r\n```\r\n\r\nWith a `--mainnet` no-op flag, I can remove GETH1_NETWORK, instruct users to set ETH1_NETWORK to `mainnet` when on main, and it will work for Geth as well as other clients. The Geth docker-compose entrypoint could then simply use `--${ETH1_NETWORK}` for both test and main net.\r\n\r\n#### Impact\r\n\r\nLow for either project. \r\n\r\nOn the Geth side, having the no-op will not be a change that needs a lot of maintenance. If there's code that currently checks that only one network flag has been specified, please point me at where that is, and I can adjust it as part of the proposed PR.\r\n\r\nOn the eth2-docker side, not having the no-op is slightly inconvenient for the user, but not breaking by any means.\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/730254574",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21795#issuecomment-730254574",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21795",
    "id": 730254574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDI1NDU3NA==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T09:46:15Z",
    "updated_at": "2020-11-19T09:47:56Z",
    "author_association": "MEMBER",
    "body": "This is a good idea. But it should not just be a no-op flag. It should behave the same as the testnet flags. E.g. detecting if you have both --goerli and --mainnet and error then. And refuse to start when you did not init with a non mainnet genesis.\r\nWould you still be willing to do the PR?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/730254574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

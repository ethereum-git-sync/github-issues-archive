{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28234",
  "id": 1921397341,
  "node_id": "I_kwDOAOvK985yhjJd",
  "number": 28234,
  "title": "Unable to start geth Fatal  Could not open database",
  "user": {
    "login": "langubtc",
    "id": 43126361,
    "node_id": "MDQ6VXNlcjQzMTI2MzYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/43126361?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/langubtc",
    "html_url": "https://github.com/langubtc",
    "followers_url": "https://api.github.com/users/langubtc/followers",
    "following_url": "https://api.github.com/users/langubtc/following{/other_user}",
    "gists_url": "https://api.github.com/users/langubtc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/langubtc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/langubtc/subscriptions",
    "organizations_url": "https://api.github.com/users/langubtc/orgs",
    "repos_url": "https://api.github.com/users/langubtc/repos",
    "events_url": "https://api.github.com/users/langubtc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/langubtc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-10-02T07:35:56Z",
  "updated_at": "2023-10-09T10:13:15Z",
  "closed_at": "2023-10-04T00:20:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I encountered a problem with the server during the synchronization process, and then used docker-compose to rebuild geth and encountered this problem.\r\n\r\n```\r\nINFO [10-02|07:31:54.115] Starting Geth on Ethereum mainnet... \r\nINFO [10-02|07:31:54.115] Bumping default cache on mainnet         provided=1024 updated=4096\r\nINFO [10-02|07:31:54.117] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [10-02|07:31:54.118] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nINFO [10-02|07:31:54.469] Using pebble as the backing database \r\nINFO [10-02|07:31:54.469] Allocated cache and file handles         database=/root/.ethereum/geth/chaindata cache=2.00GiB handles=524,288\r\nChain metadata\r\n  databaseVersion: 8 (0x8)\r\n  headBlockHash: 0xd23a9331459df1f74c280aa4601bf9c228ecf2798ac547096d7431d64ab8c941\r\n  headFastBlockHash: 0xd23a9331459df1f74c280aa4601bf9c228ecf2798ac547096d7431d64ab8c941\r\n  headHeaderHash: 0xd23a9331459df1f74c280aa4601bf9c228ecf2798ac547096d7431d64ab8c941\r\n  lastPivotNumber: 18260931 (0x116a3c3)\r\n  len(snapshotSyncStatus): 284 bytes\r\n  snapshotDisabled: false\r\n  snapshotJournal: 355215 bytes\r\n  snapshotRecoveryNumber: <nil>\r\n  snapshotRoot: 0x591b6752a7cec03698e18c9a41a6e29dbbecfa1733bce073f801b81a7e0ab2cd\r\n  txIndexTail: 0 (0x0)\r\n  fastTxLookupLimit: <nil>\r\n  SkeletonSyncStatus: {\"Subchains\":[{\"Head\":18261105,\"Tail\":18260970,\"Next\":\"0x6b8512beb652277cdbfe105b005ddce020eada03c6f5d9df4b3cc385be7c0bc9\"}],\"Finalized\":18260986}\r\n\r\n\r\nFatal: Could not open database: freezer tables headers and hashes have differing head: 17665438 != 17654466\r\nFatal: Could not open database: freezer tables headers and hashes have differing head: 17665438 != 17654466\r\n```",
  "closed_by": {
    "login": "langubtc",
    "id": 43126361,
    "node_id": "MDQ6VXNlcjQzMTI2MzYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/43126361?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/langubtc",
    "html_url": "https://github.com/langubtc",
    "followers_url": "https://api.github.com/users/langubtc/followers",
    "following_url": "https://api.github.com/users/langubtc/following{/other_user}",
    "gists_url": "https://api.github.com/users/langubtc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/langubtc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/langubtc/subscriptions",
    "organizations_url": "https://api.github.com/users/langubtc/orgs",
    "repos_url": "https://api.github.com/users/langubtc/repos",
    "events_url": "https://api.github.com/users/langubtc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/langubtc/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1745717549",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28234#issuecomment-1745717549",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234",
    "id": 1745717549,
    "node_id": "IC_kwDOAOvK985oDYkt",
    "user": {
      "login": "theghostmac",
      "id": 83423188,
      "node_id": "MDQ6VXNlcjgzNDIzMTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/83423188?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theghostmac",
      "html_url": "https://github.com/theghostmac",
      "followers_url": "https://api.github.com/users/theghostmac/followers",
      "following_url": "https://api.github.com/users/theghostmac/following{/other_user}",
      "gists_url": "https://api.github.com/users/theghostmac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theghostmac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theghostmac/subscriptions",
      "organizations_url": "https://api.github.com/users/theghostmac/orgs",
      "repos_url": "https://api.github.com/users/theghostmac/repos",
      "events_url": "https://api.github.com/users/theghostmac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theghostmac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-03T20:59:50Z",
    "updated_at": "2023-10-03T20:59:50Z",
    "author_association": "NONE",
    "body": "@langubtc can you be a bit more clear, I want to attempt a fix. How can I reproduce this error?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1745717549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1745927851",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28234#issuecomment-1745927851",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234",
    "id": 1745927851,
    "node_id": "IC_kwDOAOvK985oEL6r",
    "user": {
      "login": "langubtc",
      "id": 43126361,
      "node_id": "MDQ6VXNlcjQzMTI2MzYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43126361?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/langubtc",
      "html_url": "https://github.com/langubtc",
      "followers_url": "https://api.github.com/users/langubtc/followers",
      "following_url": "https://api.github.com/users/langubtc/following{/other_user}",
      "gists_url": "https://api.github.com/users/langubtc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/langubtc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/langubtc/subscriptions",
      "organizations_url": "https://api.github.com/users/langubtc/orgs",
      "repos_url": "https://api.github.com/users/langubtc/repos",
      "events_url": "https://api.github.com/users/langubtc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/langubtc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-04T00:20:40Z",
    "updated_at": "2023-10-04T00:20:40Z",
    "author_association": "NONE",
    "body": "The synchronization has not been completed, and then the server restarts abnormally, causing the service to fail to start. I have deleted geth's data directory and synchronized it for a day and now it is normal.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1745927851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1752727141",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/28234#issuecomment-1752727141",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28234",
    "id": 1752727141,
    "node_id": "IC_kwDOAOvK985oeH5l",
    "user": {
      "login": "happyNariman",
      "id": 3024716,
      "node_id": "MDQ6VXNlcjMwMjQ3MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3024716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/happyNariman",
      "html_url": "https://github.com/happyNariman",
      "followers_url": "https://api.github.com/users/happyNariman/followers",
      "following_url": "https://api.github.com/users/happyNariman/following{/other_user}",
      "gists_url": "https://api.github.com/users/happyNariman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/happyNariman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/happyNariman/subscriptions",
      "organizations_url": "https://api.github.com/users/happyNariman/orgs",
      "repos_url": "https://api.github.com/users/happyNariman/repos",
      "events_url": "https://api.github.com/users/happyNariman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/happyNariman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-09T10:13:14Z",
    "updated_at": "2023-10-09T10:13:14Z",
    "author_association": "NONE",
    "body": "I have the same problem.\r\nGeth used all the swap and the server froze, after restarting the server I can’t start geth.\r\n@theghostmac Is it possible to reset the last blocks without deleting the entire database? I've been synchronizing a full node for almost a month.\r\n\r\n```INFO [10-09|11:51:48.161] Logging configured                       rotate=true format=terminal location=/tmp/geth-lumberjack.log\r\nINFO [10-09|11:51:48.181] Starting Geth on Ethereum mainnet... \r\nINFO [10-09|11:51:48.181] Bumping default cache on mainnet         provided=1024 updated=4096\r\nINFO [10-09|11:51:48.183] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [10-09|11:51:48.184] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nINFO [10-09|11:51:49.321] Using pebble as the backing database \r\nINFO [10-09|11:51:49.321] Allocated cache and file handles         database=/root/.ethereum/geth/chaindata cache=2.00GiB handles=524,288\r\nChain metadata\r\n  databaseVersion: 8 (0x8)\r\n  headBlockHash: 0xe58eb5e1327a7b0b34629dc598c51432df4a9a307be7ca5332901cbcb38be9b6\r\n  headFastBlockHash: 0xe58eb5e1327a7b0b34629dc598c51432df4a9a307be7ca5332901cbcb38be9b6\r\n  headHeaderHash: 0xe58eb5e1327a7b0b34629dc598c51432df4a9a307be7ca5332901cbcb38be9b6\r\n  lastPivotNumber: <nil>\r\n  len(snapshotSyncStatus): 0 bytes\r\n  snapshotDisabled: false\r\n  snapshotJournal: 34 bytes\r\n  snapshotRecoveryNumber: 11323955 (0xacca33)\r\n  snapshotRoot: 0x657a381cafd20db4beb6f9020ad7fd011a9b7d91bc21e5b0b57d09e35ee0d369\r\n  txIndexTail: 6609620 (0x64dad4)\r\n  fastTxLookupLimit: <nil>\r\n  SkeletonSyncStatus: {\"Subchains\":[{\"Head\":18290416,\"Tail\":14185576,\"Next\":\"0x5df719e7f8df2f927564984f0d8285a06a5e826b8c6b78cc63fdb7ce3b56039b\"}],\"Finalized\":18290339}\r\n\r\n\r\nFatal: Could not open database: freezer tables bodies and headers have differing head: 14745785 != 14745687\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1752727141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

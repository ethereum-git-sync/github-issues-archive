{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23845",
  "id": 1041947057,
  "node_id": "I_kwDOAOvK984-Gtmx",
  "number": 23845,
  "title": "Client's SubscribeFilterLogs stops reporting events after some time",
  "user": {
    "login": "beeb",
    "id": 703631,
    "node_id": "MDQ6VXNlcjcwMzYzMQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/703631?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/beeb",
    "html_url": "https://github.com/beeb",
    "followers_url": "https://api.github.com/users/beeb/followers",
    "following_url": "https://api.github.com/users/beeb/following{/other_user}",
    "gists_url": "https://api.github.com/users/beeb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/beeb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/beeb/subscriptions",
    "organizations_url": "https://api.github.com/users/beeb/orgs",
    "repos_url": "https://api.github.com/users/beeb/repos",
    "events_url": "https://api.github.com/users/beeb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/beeb/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2021-11-02T07:03:51Z",
  "updated_at": "2022-10-12T05:13:24Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\ngo-ethereum v1.10.8\r\nOS & Version: linux\r\n\r\n#### Expected behaviour\r\n\r\nWhen using `ethclient.Client.SubscribeFilterLogs`, all events matching the filter are caught.\r\n\r\n#### Actual behaviour\r\n\r\nAfter some time, the script stops reporting new events and it needs to be restarted to start working again.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```go\r\nvar EthClient *ethclient.Client\r\n// ...\r\ncurrentBlock, _ := EthClient.BlockNumber(context.Background())\r\nquery := ethereum.FilterQuery{\r\n\tAddresses: []common.Address{myAddress},\r\n\tTopics:    [][]common.Hash{{myTopic}},\r\n\tFromBlock: big.NewInt(int64(currentBlock)),\r\n}\r\nlogs := make(chan types.Log)\r\nsub, err := EthClient.SubscribeFilterLogs(context.Background(), query, logs)\r\nif err != nil {\r\n\tlog.Fatal(err)\r\n\treturn\r\n}\r\n\r\nfor {\r\n\tselect {\r\n\tcase err := <-sub.Err():\r\n\t\tlog.Error(err)\r\n\t\tcontinue\r\n\tcase vLog := <-logs:\r\n\t\tevent, err := MyContract.ParseSomeEvent(vLog)\r\n\t\tif err != nil {\r\n\t\t\tlog.Error(err)\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\t// do something here with event\r\n\r\n\t}\r\n}\r\n```\r\n\r\nHard for me to convey what needs to be done. I guess try to leave a script running for days and see if it stops catching new events after a while.\r\n\r\nI'm not sure what could cause this issue. I automated script restart with cron to try to mitigate this issue but it still happens that the `SubscribeFilterLogs` stops reporting new events.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959135349",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-959135349",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 959135349,
    "node_id": "IC_kwDOAOvK9845Kz51",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T13:53:50Z",
    "updated_at": "2021-11-03T13:53:50Z",
    "author_association": "MEMBER",
    "body": "Any chance you could provide some of the geth log around the time it happens?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959135349/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/964035070",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-964035070",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 964035070,
    "node_id": "IC_kwDOAOvK9845dgH-",
    "user": {
      "login": "beeb",
      "id": 703631,
      "node_id": "MDQ6VXNlcjcwMzYzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703631?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beeb",
      "html_url": "https://github.com/beeb",
      "followers_url": "https://api.github.com/users/beeb/followers",
      "following_url": "https://api.github.com/users/beeb/following{/other_user}",
      "gists_url": "https://api.github.com/users/beeb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/beeb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/beeb/subscriptions",
      "organizations_url": "https://api.github.com/users/beeb/orgs",
      "repos_url": "https://api.github.com/users/beeb/repos",
      "events_url": "https://api.github.com/users/beeb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/beeb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T10:53:37Z",
    "updated_at": "2021-11-09T10:53:37Z",
    "author_association": "NONE",
    "body": "Hard for me to identify when it starts failing as I monitor for a few events a day only... Might try to find something by finding events that were missed manually and looking at the time.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/964035070/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/971906011",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-971906011",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 971906011,
    "node_id": "IC_kwDOAOvK98457hvb",
    "user": {
      "login": "Vanclief",
      "id": 13844339,
      "node_id": "MDQ6VXNlcjEzODQ0MzM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13844339?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Vanclief",
      "html_url": "https://github.com/Vanclief",
      "followers_url": "https://api.github.com/users/Vanclief/followers",
      "following_url": "https://api.github.com/users/Vanclief/following{/other_user}",
      "gists_url": "https://api.github.com/users/Vanclief/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Vanclief/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Vanclief/subscriptions",
      "organizations_url": "https://api.github.com/users/Vanclief/orgs",
      "repos_url": "https://api.github.com/users/Vanclief/repos",
      "events_url": "https://api.github.com/users/Vanclief/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Vanclief/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T19:31:36Z",
    "updated_at": "2021-11-17T21:09:52Z",
    "author_association": "NONE",
    "body": "Having the same issue. \r\n\r\nCould it be related to a disconnection and the function is not notified? Maybe keep making a ping to the WS to avoid disconnection?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/971906011/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/971926325",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-971926325",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 971926325,
    "node_id": "IC_kwDOAOvK98457ms1",
    "user": {
      "login": "beeb",
      "id": 703631,
      "node_id": "MDQ6VXNlcjcwMzYzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703631?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beeb",
      "html_url": "https://github.com/beeb",
      "followers_url": "https://api.github.com/users/beeb/followers",
      "following_url": "https://api.github.com/users/beeb/following{/other_user}",
      "gists_url": "https://api.github.com/users/beeb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/beeb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/beeb/subscriptions",
      "organizations_url": "https://api.github.com/users/beeb/orgs",
      "repos_url": "https://api.github.com/users/beeb/repos",
      "events_url": "https://api.github.com/users/beeb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/beeb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T20:00:34Z",
    "updated_at": "2021-11-17T20:00:34Z",
    "author_association": "NONE",
    "body": "> Having the same issue.\r\n> \r\n> Could it be related to a disconnection and the function is not notified? Maybe keep making a ping to the WS to avoid disconnection?\r\n\r\nNot for me as I'm connected through IPC. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/971926325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/972039638",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-972039638",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 972039638,
    "node_id": "IC_kwDOAOvK98458CXW",
    "user": {
      "login": "Vanclief",
      "id": 13844339,
      "node_id": "MDQ6VXNlcjEzODQ0MzM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13844339?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Vanclief",
      "html_url": "https://github.com/Vanclief",
      "followers_url": "https://api.github.com/users/Vanclief/followers",
      "following_url": "https://api.github.com/users/Vanclief/following{/other_user}",
      "gists_url": "https://api.github.com/users/Vanclief/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Vanclief/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Vanclief/subscriptions",
      "organizations_url": "https://api.github.com/users/Vanclief/orgs",
      "repos_url": "https://api.github.com/users/Vanclief/repos",
      "events_url": "https://api.github.com/users/Vanclief/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Vanclief/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T21:14:48Z",
    "updated_at": "2021-11-17T21:14:48Z",
    "author_association": "NONE",
    "body": "Weird, I am connecting over an Alchemy/Infura websocket and it will intermittently drop events after some time. \r\n\r\nI redeployed my service today while including the Subscription call inside the for, to see if by recreating the subscription on each loop, it would not drop. I am not sure if it works on the long term but so far it hasn't given me an issue.\r\n\r\n```\r\nvar EthClient *ethclient.Client\r\n// ...\r\ncurrentBlock, _ := EthClient.BlockNumber(context.Background())\r\nquery := ethereum.FilterQuery{\r\n\tAddresses: []common.Address{myAddress},\r\n\tTopics:    [][]common.Hash{{myTopic}},\r\n\tFromBlock: big.NewInt(int64(currentBlock)),\r\n}\r\nlogs := make(chan types.Log)\r\n\r\nfor {\r\n        sub, err := EthClient.SubscribeFilterLogs(context.Background(), query, logs)\r\n        if err != nil {\r\n\t        log.Fatal(err)\r\n\t        return\r\n        }\r\n\tselect {\r\n\tcase err := <-sub.Err():\r\n\t\tlog.Error(err)\r\n\t\tcontinue\r\n\tcase vLog := <-logs:\r\n\t\tevent, err := MyContract.ParseSomeEvent(vLog)\r\n\t\tif err != nil {\r\n\t\t\tlog.Error(err)\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\t// do something here with event\r\n\r\n\t}\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/972039638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/972593740",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-972593740",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 972593740,
    "node_id": "IC_kwDOAOvK9845-JpM",
    "user": {
      "login": "beeb",
      "id": 703631,
      "node_id": "MDQ6VXNlcjcwMzYzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703631?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beeb",
      "html_url": "https://github.com/beeb",
      "followers_url": "https://api.github.com/users/beeb/followers",
      "following_url": "https://api.github.com/users/beeb/following{/other_user}",
      "gists_url": "https://api.github.com/users/beeb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/beeb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/beeb/subscriptions",
      "organizations_url": "https://api.github.com/users/beeb/orgs",
      "repos_url": "https://api.github.com/users/beeb/repos",
      "events_url": "https://api.github.com/users/beeb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/beeb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-18T07:07:11Z",
    "updated_at": "2021-11-18T07:07:11Z",
    "author_association": "NONE",
    "body": "Thanks @Vanclief , looks like it could be a helpful workaround if the subscription ends up in a bad state somehow after an event is picked up.\r\n\r\nI have for now abandonned the project that was using the code above so I won't be able to test it immediately, but I plan on running it again at some point.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/972593740/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/974593242",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-974593242",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 974593242,
    "node_id": "IC_kwDOAOvK9846Fxza",
    "user": {
      "login": "yelhouti",
      "id": 5471639,
      "node_id": "MDQ6VXNlcjU0NzE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5471639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yelhouti",
      "html_url": "https://github.com/yelhouti",
      "followers_url": "https://api.github.com/users/yelhouti/followers",
      "following_url": "https://api.github.com/users/yelhouti/following{/other_user}",
      "gists_url": "https://api.github.com/users/yelhouti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yelhouti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yelhouti/subscriptions",
      "organizations_url": "https://api.github.com/users/yelhouti/orgs",
      "repos_url": "https://api.github.com/users/yelhouti/repos",
      "events_url": "https://api.github.com/users/yelhouti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yelhouti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-20T04:43:21Z",
    "updated_at": "2021-11-20T04:43:21Z",
    "author_association": "NONE",
    "body": "@Vanclief i am facing a similar issue, and it seems to me that the when an error happen, the subscription get stuck in an infinite look emit and error to the channel with null and logging error happened",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/974593242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1035800486",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-1035800486",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 1035800486,
    "node_id": "IC_kwDOAOvK9849vQ-m",
    "user": {
      "login": "xiezm",
      "id": 6783500,
      "node_id": "MDQ6VXNlcjY3ODM1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xiezm",
      "html_url": "https://github.com/xiezm",
      "followers_url": "https://api.github.com/users/xiezm/followers",
      "following_url": "https://api.github.com/users/xiezm/following{/other_user}",
      "gists_url": "https://api.github.com/users/xiezm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xiezm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xiezm/subscriptions",
      "organizations_url": "https://api.github.com/users/xiezm/orgs",
      "repos_url": "https://api.github.com/users/xiezm/repos",
      "events_url": "https://api.github.com/users/xiezm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xiezm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-11T02:35:05Z",
    "updated_at": "2022-02-11T02:35:05Z",
    "author_association": "NONE",
    "body": "https://github.com/hydroscan/hydroscan-api/blob/a8882653a5aaf2dd2f9fa397400c160cef0488b3/task/event_subscriber.go\r\n\r\nhttps://github.com/SmartMeshFoundation/photon-mobile/blob/2641db709d0aad553a8e46d406c4aa6539c16627/network/helper/safeethclient.go\r\n\r\nHere's a solution that , hope will help you",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1035800486/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1035963259",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-1035963259",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 1035963259,
    "node_id": "IC_kwDOAOvK9849v4t7",
    "user": {
      "login": "yelhouti",
      "id": 5471639,
      "node_id": "MDQ6VXNlcjU0NzE2Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5471639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yelhouti",
      "html_url": "https://github.com/yelhouti",
      "followers_url": "https://api.github.com/users/yelhouti/followers",
      "following_url": "https://api.github.com/users/yelhouti/following{/other_user}",
      "gists_url": "https://api.github.com/users/yelhouti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yelhouti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yelhouti/subscriptions",
      "organizations_url": "https://api.github.com/users/yelhouti/orgs",
      "repos_url": "https://api.github.com/users/yelhouti/repos",
      "events_url": "https://api.github.com/users/yelhouti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yelhouti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-11T08:08:01Z",
    "updated_at": "2022-02-11T08:08:01Z",
    "author_association": "NONE",
    "body": "@xiezm thanks a lot, this could definitely help.\r\n\r\nI still think that this issue should be fixed here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1035963259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1043003090",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-1043003090",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 1043003090,
    "node_id": "IC_kwDOAOvK984-KvbS",
    "user": {
      "login": "Vanclief",
      "id": 13844339,
      "node_id": "MDQ6VXNlcjEzODQ0MzM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13844339?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Vanclief",
      "html_url": "https://github.com/Vanclief",
      "followers_url": "https://api.github.com/users/Vanclief/followers",
      "following_url": "https://api.github.com/users/Vanclief/following{/other_user}",
      "gists_url": "https://api.github.com/users/Vanclief/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Vanclief/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Vanclief/subscriptions",
      "organizations_url": "https://api.github.com/users/Vanclief/orgs",
      "repos_url": "https://api.github.com/users/Vanclief/repos",
      "events_url": "https://api.github.com/users/Vanclief/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Vanclief/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-17T14:23:40Z",
    "updated_at": "2022-02-17T14:23:40Z",
    "author_association": "NONE",
    "body": "@xiezm Thanks for sharing, that definitely looks like the correct way to do it instead of just spamming new ws connections.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1043003090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1268915091",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-1268915091",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 1268915091,
    "node_id": "IC_kwDOAOvK985LohuT",
    "user": {
      "login": "lalexgap",
      "id": 1620336,
      "node_id": "MDQ6VXNlcjE2MjAzMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1620336?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lalexgap",
      "html_url": "https://github.com/lalexgap",
      "followers_url": "https://api.github.com/users/lalexgap/followers",
      "following_url": "https://api.github.com/users/lalexgap/following{/other_user}",
      "gists_url": "https://api.github.com/users/lalexgap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lalexgap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lalexgap/subscriptions",
      "organizations_url": "https://api.github.com/users/lalexgap/orgs",
      "repos_url": "https://api.github.com/users/lalexgap/repos",
      "events_url": "https://api.github.com/users/lalexgap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lalexgap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-05T20:07:57Z",
    "updated_at": "2022-10-05T20:13:35Z",
    "author_association": "NONE",
    "body": "I did a little spelunking around the `go-ethereum` code base and found that the filter system config seems to [default to 5 minutes](https://github.com/ethereum/go-ethereum/blob/e14164d516600e9ac66f9060892e078f5c076229/eth/filters/filter_system.go#L43): \r\n```\r\n// Config represents the configuration of the filter system.\r\ntype Config struct {\r\n\tLogCacheSize int           // maximum number of cached blocks (default: 32)\r\n\tTimeout      time.Duration // how long filters stay active (default: 5min)\r\n}\r\n```\r\nCould that be the underlying cause? The duration of 5 minutes seems to roughly match when we stop receiving events.  \r\n\r\nIt looks like the `LogCacheSize` can be set using [configuration](https://github.com/ethereum/go-ethereum/blob/e14164d516600e9ac66f9060892e078f5c076229/cmd/utils/flags.go#L2052) but not `Timeout`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1268915091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1275598959",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23845#issuecomment-1275598959",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23845",
    "id": 1275598959,
    "node_id": "IC_kwDOAOvK985MCBhv",
    "user": {
      "login": "beeb",
      "id": 703631,
      "node_id": "MDQ6VXNlcjcwMzYzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703631?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beeb",
      "html_url": "https://github.com/beeb",
      "followers_url": "https://api.github.com/users/beeb/followers",
      "following_url": "https://api.github.com/users/beeb/following{/other_user}",
      "gists_url": "https://api.github.com/users/beeb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/beeb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/beeb/subscriptions",
      "organizations_url": "https://api.github.com/users/beeb/orgs",
      "repos_url": "https://api.github.com/users/beeb/repos",
      "events_url": "https://api.github.com/users/beeb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/beeb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-12T05:13:24Z",
    "updated_at": "2022-10-12T05:13:24Z",
    "author_association": "NONE",
    "body": "@lalexgap the duration was much longer for me, and I think this timeout is only triggered if you do not poll for the duration. As long as you poll the filter, it should stay alive.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1275598959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1131",
  "id": 81533135,
  "node_id": "MDU6SXNzdWU4MTUzMzEzNQ==",
  "number": 1131,
  "title": "eth_getCode seems broken",
  "user": {
    "login": "frozeman",
    "id": 232662,
    "node_id": "MDQ6VXNlcjIzMjY2Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/232662?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frozeman",
    "html_url": "https://github.com/frozeman",
    "followers_url": "https://api.github.com/users/frozeman/followers",
    "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
    "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
    "organizations_url": "https://api.github.com/users/frozeman/orgs",
    "repos_url": "https://api.github.com/users/frozeman/repos",
    "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frozeman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1157707837,
      "node_id": "MDU6TGFiZWwxMTU3NzA3ODM3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:rpc",
      "name": "area:rpc",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2015-05-27T17:01:28Z",
  "updated_at": "2018-12-14T14:23:42Z",
  "closed_at": "2015-05-27T17:07:49Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "`eth_getCode` always returns `0x`, even if there is code at an address. I also got that reported from konstantin.\n\nI can't run the rpc tests because of https://github.com/ethereum/go-ethereum/issues/1130, otherwise i could verify that its really the case.\n\n```\n{\"jsonrpc\":\"2.0\",\"method\":\"eth_getCode\",\"params\":[\"0x1cd9f24705efb8323a18d1931aab5cc16a39d678\",\"latest\"],\"id\":28015}\n```\n\nResult:\n\n```\n{\n    \"id\": 28015,\n    \"jsonrpc\": \"2.0\",\n    \"result\": \"0x\" // <- should contain code on the testnet\n}\n```\n\nKeeping this as a placeholder (maybe somebody wants already to look into this)\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/105999096",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-105999096",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 105999096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTk5OTA5Ng==",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-27T17:07:49Z",
    "updated_at": "2015-05-27T17:07:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Not broken:\n\n```\n> admin.miner.start()\ntrue\n> {ffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209081540190819060000155505b505056\"\nundefined\n> eth.sendTransaction({from: eth.accounts[0], data:d, gas: \"1000000\"})\nPlease unlock account 18a991c7b2bc05ba2bb364eb6e7238ae3cf09c85.\nPassphrase:\nAccount is now unlocked for this session.\n'0x633ac115c55b5e661b5592538f91e193559dcbec'\n> admin.miner.stop()\ntrue\n> eth.pendingTransactions()\n[ ]\n> eth.getCode(\"0x633ac115c55b5e661b5592538f91e193559dcbec\")\n'0x6000357c0100000000000000000000000000000000000000000000000000000000900480633284fd791461004557806370a0823114610059578063ccb767ae1461006e57005b610053600435602435610082565b60006000f35b6100646004356100f8565b8060005260206000f35b61007c600435602435610136565b60006000f35b60015473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146100bc576100f3565b80600060008473ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209081540190819060000155505b5b5050565b6000600060008373ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205463ffffffff169050610131565b919050565b8063ffffffff16600060003373ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205463ffffffff16106101775761017c565b6101e9565b80600060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090815403908190600001555080600060008473ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209081540190819060000155505b505056'\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/105999096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106004076",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106004076",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106004076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjAwNDA3Ng==",
    "user": {
      "login": "jesuscript",
      "id": 1161241,
      "node_id": "MDQ6VXNlcjExNjEyNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1161241?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jesuscript",
      "html_url": "https://github.com/jesuscript",
      "followers_url": "https://api.github.com/users/jesuscript/followers",
      "following_url": "https://api.github.com/users/jesuscript/following{/other_user}",
      "gists_url": "https://api.github.com/users/jesuscript/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jesuscript/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jesuscript/subscriptions",
      "organizations_url": "https://api.github.com/users/jesuscript/orgs",
      "repos_url": "https://api.github.com/users/jesuscript/repos",
      "events_url": "https://api.github.com/users/jesuscript/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jesuscript/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-27T17:25:26Z",
    "updated_at": "2015-05-27T17:25:26Z",
    "author_association": "MEMBER",
    "body": "indeed. This works perfectly fine in geth console. However exactly the same steps fail when using web3. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106004076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106024261",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106024261",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106024261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjAyNDI2MQ==",
    "user": {
      "login": "alexvandesande",
      "id": 112898,
      "node_id": "MDQ6VXNlcjExMjg5OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/112898?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexvandesande",
      "html_url": "https://github.com/alexvandesande",
      "followers_url": "https://api.github.com/users/alexvandesande/followers",
      "following_url": "https://api.github.com/users/alexvandesande/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexvandesande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexvandesande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexvandesande/subscriptions",
      "organizations_url": "https://api.github.com/users/alexvandesande/orgs",
      "repos_url": "https://api.github.com/users/alexvandesande/repos",
      "events_url": "https://api.github.com/users/alexvandesande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexvandesande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-27T18:25:32Z",
    "updated_at": "2015-05-27T18:25:32Z",
    "author_association": "NONE",
    "body": "Fabian, maybe your blockchain was simply out of sync? This I had the same\nproblem but turned out that simply I was pinging a very old blockchain. It\nhas since caught up.\n\nOn Wed, May 27, 2015 at 2:25 PM, Konstantin notifications@github.com\nwrote:\n\n> indeed. This works perfectly fine in geth console. However exactly the\n> same steps fail when using web3.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106004076\n> .\n\n## \n\nAlex Van de Sande\nUX Designer\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106024261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106035900",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106035900",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106035900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjAzNTkwMA==",
    "user": {
      "login": "frozeman",
      "id": 232662,
      "node_id": "MDQ6VXNlcjIzMjY2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/232662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-27T18:55:56Z",
    "updated_at": "2015-05-27T18:55:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "i will run the rpc test again, once #1130 is fixed for me.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106035900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106244150",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106244150",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106244150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjI0NDE1MA==",
    "user": {
      "login": "frozeman",
      "id": 232662,
      "node_id": "MDQ6VXNlcjIzMjY2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/232662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-28T09:16:07Z",
    "updated_at": "2015-05-28T09:16:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "So i'm now on my private chain and i still get `0x` for mined contracts.. and i'm alone so there is for sure no fork :) Will look into this...\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106244150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106244362",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106244362",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106244362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjI0NDM2Mg==",
    "user": {
      "login": "frozeman",
      "id": 232662,
      "node_id": "MDQ6VXNlcjIzMjY2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/232662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-28T09:17:50Z",
    "updated_at": "2015-05-28T09:17:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "It might have to do with changes marek did in web3.js contract creation, will talk to him.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106244362/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106245533",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1131#issuecomment-106245533",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1131",
    "id": 106245533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjI0NTUzMw==",
    "user": {
      "login": "frozeman",
      "id": 232662,
      "node_id": "MDQ6VXNlcjIzMjY2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/232662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-28T09:24:05Z",
    "updated_at": "2015-05-28T09:27:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok as it seems, the gas was to low, which i provided.\n\nBut for some reason it has fired the contract creation log.\nI guess what happened is that the log was fired and after the gas run out, so it couldn't store the contract.\n\nIs that intended behaviour @obscuren ?\nOr can we somehow fire the logs only, if the code is actually fully running.\n\nThis opens the question, whether or not contracts or contract  method which sendMoney, do send money even though the function is running out of gas at some point, not executing the rest of the method??\n\nIf thats the case, we should definitely let people know about that behaviour.\n\nEdit: I talked to arkady and you also told me once, that the state is rolled back, if the gas was not enough. But when we roll back the state, but we store the log (forever), than in history it looked like the method was actually executed, when it never was. \nI would say thats a bug, as the log should always clearly represent the sate actions, right?!\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/106245533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

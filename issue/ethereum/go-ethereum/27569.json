{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27569",
  "id": 1773222230,
  "node_id": "I_kwDOAOvK985psTlW",
  "number": 27569,
  "title": "Loose peers every 5 to 7 days",
  "user": {
    "login": "tunerooster",
    "id": 13290146,
    "node_id": "MDQ6VXNlcjEzMjkwMTQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/13290146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tunerooster",
    "html_url": "https://github.com/tunerooster",
    "followers_url": "https://api.github.com/users/tunerooster/followers",
    "following_url": "https://api.github.com/users/tunerooster/following{/other_user}",
    "gists_url": "https://api.github.com/users/tunerooster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tunerooster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tunerooster/subscriptions",
    "organizations_url": "https://api.github.com/users/tunerooster/orgs",
    "repos_url": "https://api.github.com/users/tunerooster/repos",
    "events_url": "https://api.github.com/users/tunerooster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tunerooster/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-06-25T11:12:08Z",
  "updated_at": "2023-07-08T09:48:44Z",
  "closed_at": "2023-07-08T09:48:44Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `geth version`\r\n\r\nVersion: 1.12.0-stable\r\nArchitecture: amd64\r\nGo Version: go1.19\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=\r\n\r\nCL client & version: e.g. lighthouse/nimbus/prysm@v1.0.0\r\n\r\nprysm - beacon-chain-v4.0.6-linux-amd64\r\n\r\nOS & Version: Windows/Linux/OSX\r\n\r\nLinux u59 5.15.7-gentoo #7 SMP Tue Jan 25 20:44:26 MST 2022 x86_64 Intel(R) Celeron(R) N5095 @ 2.00GHz GenuineIntel GNU/Linux\r\n\r\n#### Expected behaviour\r\n\r\nKeep peer count normal.\r\n\r\n#### Actual behaviour\r\n\r\nI loose peers after geth runs for 5 to 7 days and reboot to fix.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nJust start geth and wait.\r\n\r\n**DESCRIPTION:** \r\n\r\nEvery 5 to 7 days I discover (through my grafana dashboard) that my peer count is too low (like under 10).  It is usually around 45 when operating normally.\r\n\r\nI usually just reboot to fix it.  This causes \"Slots behind\" to go up and it takes 10 - 15 minutes to recover.  I would like to determine what is causing the loss of peers.  Can you suggest how I might troubleshoot this?\r\n\r\nThis has been happening for months, but I am only now posting this, hoping it would be fixed in the several releases I have installed since it started happening.  I do not recall exactly when it first started happening (i.e., what version).  It was running for almost a year without this happening.\r\n\r\nPlease advise...  THANKS!\r\n\r\n",
  "closed_by": {
    "login": "tunerooster",
    "id": 13290146,
    "node_id": "MDQ6VXNlcjEzMjkwMTQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/13290146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tunerooster",
    "html_url": "https://github.com/tunerooster",
    "followers_url": "https://api.github.com/users/tunerooster/followers",
    "following_url": "https://api.github.com/users/tunerooster/following{/other_user}",
    "gists_url": "https://api.github.com/users/tunerooster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tunerooster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tunerooster/subscriptions",
    "organizations_url": "https://api.github.com/users/tunerooster/orgs",
    "repos_url": "https://api.github.com/users/tunerooster/repos",
    "events_url": "https://api.github.com/users/tunerooster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tunerooster/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1607440877",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27569#issuecomment-1607440877",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569",
    "id": 1607440877,
    "node_id": "IC_kwDOAOvK985fz5nt",
    "user": {
      "login": "lightclient",
      "id": 14004106,
      "node_id": "MDQ6VXNlcjE0MDA0MTA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14004106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lightclient",
      "html_url": "https://github.com/lightclient",
      "followers_url": "https://api.github.com/users/lightclient/followers",
      "following_url": "https://api.github.com/users/lightclient/following{/other_user}",
      "gists_url": "https://api.github.com/users/lightclient/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lightclient/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lightclient/subscriptions",
      "organizations_url": "https://api.github.com/users/lightclient/orgs",
      "repos_url": "https://api.github.com/users/lightclient/repos",
      "events_url": "https://api.github.com/users/lightclient/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lightclient/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-26T13:10:18Z",
    "updated_at": "2023-06-26T13:10:18Z",
    "author_association": "MEMBER",
    "body": "Could you share some logs of your client? Ideally showing your client going from more than enough peers to below the threshold of peers to print the msg \"Looking for peers\". If you could also enable debug logging for p2p with the flag `--log.vmodule=\"p2p=4\"`, that may help us figure out why it is failing to connect to peers. And a screenshot of your grafana dashboard if you have it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1607440877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1608556202",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27569#issuecomment-1608556202",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569",
    "id": 1608556202,
    "node_id": "IC_kwDOAOvK985f4J6q",
    "user": {
      "login": "tunerooster",
      "id": 13290146,
      "node_id": "MDQ6VXNlcjEzMjkwMTQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13290146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tunerooster",
      "html_url": "https://github.com/tunerooster",
      "followers_url": "https://api.github.com/users/tunerooster/followers",
      "following_url": "https://api.github.com/users/tunerooster/following{/other_user}",
      "gists_url": "https://api.github.com/users/tunerooster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tunerooster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tunerooster/subscriptions",
      "organizations_url": "https://api.github.com/users/tunerooster/orgs",
      "repos_url": "https://api.github.com/users/tunerooster/repos",
      "events_url": "https://api.github.com/users/tunerooster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tunerooster/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-27T01:11:36Z",
    "updated_at": "2023-06-28T01:09:33Z",
    "author_association": "NONE",
    "body": "OK.  Should I restart geth **_now_** like this?\r\n```\r\n/usr/bin/geth --log.vmodule=\"p2p=4\" --http --datadir /mnt/crypto/.ethereum --authrpc.jwtsecret=/mnt/crypto/.ethereum/keystore/jwt.hex\r\n```\r\nIt will mean waiting a week or so before it happens again.  I will get the logs and screen shot at that time.\r\n\r\nThanks for your help!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1608556202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1611435783",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27569#issuecomment-1611435783",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569",
    "id": 1611435783,
    "node_id": "IC_kwDOAOvK985gDI8H",
    "user": {
      "login": "lightclient",
      "id": 14004106,
      "node_id": "MDQ6VXNlcjE0MDA0MTA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14004106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lightclient",
      "html_url": "https://github.com/lightclient",
      "followers_url": "https://api.github.com/users/lightclient/followers",
      "following_url": "https://api.github.com/users/lightclient/following{/other_user}",
      "gists_url": "https://api.github.com/users/lightclient/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lightclient/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lightclient/subscriptions",
      "organizations_url": "https://api.github.com/users/lightclient/orgs",
      "repos_url": "https://api.github.com/users/lightclient/repos",
      "events_url": "https://api.github.com/users/lightclient/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lightclient/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-28T13:40:42Z",
    "updated_at": "2023-06-28T13:40:42Z",
    "author_association": "MEMBER",
    "body": "You can actually activate a higher log level using `geth attach`\r\n\r\n```console\r\n$ geth attach --datadir /mnt/crypto/.ethereum\r\n\r\nWelcome to the Geth JavaScript console!\r\n> debug.vmodule(\"p2p=4\")\r\n\r\n--\r\n\r\nbut yes, if you can update this issue with more information when you have it we can take a look. Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1611435783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1627000787",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27569#issuecomment-1627000787",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27569",
    "id": 1627000787,
    "node_id": "IC_kwDOAOvK985g-g_T",
    "user": {
      "login": "tunerooster",
      "id": 13290146,
      "node_id": "MDQ6VXNlcjEzMjkwMTQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13290146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tunerooster",
      "html_url": "https://github.com/tunerooster",
      "followers_url": "https://api.github.com/users/tunerooster/followers",
      "following_url": "https://api.github.com/users/tunerooster/following{/other_user}",
      "gists_url": "https://api.github.com/users/tunerooster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tunerooster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tunerooster/subscriptions",
      "organizations_url": "https://api.github.com/users/tunerooster/orgs",
      "repos_url": "https://api.github.com/users/tunerooster/repos",
      "events_url": "https://api.github.com/users/tunerooster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tunerooster/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-08T09:48:44Z",
    "updated_at": "2023-07-08T09:48:44Z",
    "author_association": "NONE",
    "body": "Well, it's been 2 weeks and the problem has not recurred.  I have made changes to my firewall, like a updated kernel, for other purposes, but I have no idea if that is what fixed it.  In any case, I am closing this issue.  If it happens again, I will reopen it.\r\n\r\nThanks for your willingness to help!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1627000787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

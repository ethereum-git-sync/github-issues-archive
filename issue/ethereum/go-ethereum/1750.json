{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1750",
  "id": 104127516,
  "node_id": "MDU6SXNzdWUxMDQxMjc1MTY=",
  "number": 1750,
  "title": "geth displaying wrong value for return uint from published contract",
  "user": {
    "login": "cyrusadkisson",
    "id": 2284720,
    "node_id": "MDQ6VXNlcjIyODQ3MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2284720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cyrusadkisson",
    "html_url": "https://github.com/cyrusadkisson",
    "followers_url": "https://api.github.com/users/cyrusadkisson/followers",
    "following_url": "https://api.github.com/users/cyrusadkisson/following{/other_user}",
    "gists_url": "https://api.github.com/users/cyrusadkisson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cyrusadkisson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cyrusadkisson/subscriptions",
    "organizations_url": "https://api.github.com/users/cyrusadkisson/orgs",
    "repos_url": "https://api.github.com/users/cyrusadkisson/repos",
    "events_url": "https://api.github.com/users/cyrusadkisson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cyrusadkisson/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2015-08-31T20:24:36Z",
  "updated_at": "2018-04-16T19:37:22Z",
  "closed_at": "2018-04-16T19:37:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "For the contract:\n\n``` js\ncontract creatorBalanceChecker {\n\n    address creator;\n    uint creatorbalance;\n\n    function creatorBalanceChecker() public \n    {\n        creator = msg.sender;                                // msg is a global variable\n        creatorbalance = creator.balance;\n    }\n\n    function getContractAddress() constant returns (address) \n    {\n        return this;\n    }\n\n    function getCreatorBalance() constant returns (uint)     // Will return the creator's balance AT THE TIME THIS CONTRACT WAS CREATED\n    {\n        return creatorbalance;\n    }\n\n    function getCreatorDotBalance() constant returns (uint)  // Will return creator's balance NOW\n    {\n        return creator.balance;\n    }\n\n    /**********\n     Standard kill() function to recover funds \n     **********/\n\n    function kill() returns (bool) \n    { \n        if (msg.sender == creator)\n        {\n            suicide(creator);  // kills this contract and sends remaining funds back to creator\n            return true;\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n}\n```\n\n...published with ABI...\n\n``` js\n[{\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"getContractAddress\",\n    \"outputs\": [{\n        \"name\": \"\",\n        \"type\": \"address\"\n    }],\n    \"type\": \"function\"\n}, {\n    \"constant\": false,\n    \"inputs\": [],\n    \"name\": \"kill\",\n    \"outputs\": [{\n        \"name\": \"\",\n        \"type\": \"bool\"\n    }],\n    \"type\": \"function\"\n}, {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"getCreatorBalance\",\n    \"outputs\": [{\n        \"name\": \"\",\n        \"type\": \"uint256\"\n    }],\n    \"type\": \"function\"\n}, {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"getCreatorDotBalance\",\n    \"outputs\": [{\n        \"name\": \"\",\n        \"type\": \"uint256\"\n    }],\n    \"type\": \"function\"\n}, {\n    \"inputs\": [],\n    \"type\": \"constructor\"\n}]\n```\n\n... at address 0xb08076b2ae85cdc22ff4943ce101a86e48e61b80, I get two different values for getCreatorDotBalance(), depending upon which machine I'm using. Both machines are Linux 64-Bit ubuntu 14.04. \n\nOn the first machine, using \"geth\" from the PPA I get this result:\n\n``` js\ncyrus@okcomputer:~$ which geth\n/usr/bin/geth\ncyrus@okcomputer:~$ geth version\nGeth\nVersion: 1.1.0\nProtocol Versions: [62 61]\nNetwork Id: 1\nGo Version: go1.4.2\nOS: linux\nGOPATH=\nGOROOT=/usr/lib/go\ncyrus@okcomputer:~$ geth --verbosity \"2\" console\ninstance: Geth/v1.1.0/linux/go1.4.2\n datadir: /home/cyrus/.ethereum\ncoinbase: 0xcf684dfb8304729355b58315e8019b1aa2ad1bac\nat block: 169667 (Mon, 31 Aug 2015 15:47:24 EDT)\nmodules: admin:1.0 db:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 shh:1.0 txpool:1.0 web3:1.0\n> var abi = <see above>;\nundefined\n> var contract = web3.eth.contract(abi).at('0xb08076b2ae85cdc22ff4943ce101a86e48e61b80');\nundefined\n> contract.getContractAddress();\n\"0xb08076b2ae85cdc22ff4943ce101a86e48e61b80\"\n> contract.getCreatorBalance();\n10029653494179014840\n> contract.getCreatorDotBalance();\n-2500000000000000001\n```\n\nObviously the -2500000000000000001 is incorrect and weird. So I compiled geth from source on the same machine. \n\n``` js\ncyrus@okcomputer:~/go-ethereum$ /home/cyrus/go-ethereum/build/bin/geth --verbosity \"2\" console\ninstance: Geth/v1.1.0-fd512fa1/linux/go1.4.2\n datadir: /home/cyrus/.ethereum\ncoinbase: 0xcf684dfb8304729355b58315e8019b1aa2ad1bac\nat block: 169658 (Mon, 31 Aug 2015 15:42:35 EDT)\nmodules: admin:1.0 db:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 shh:1.0 txpool:1.0 web3:1.0\n> {\"constant\":true,\"inputs\":[],\"name\":\"getCreatorDotBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"type\":\"function\"},{\"inputs\":[],\"type\":\"constructor\"}];\nundefined\n> var contract = eth.contract(abi).at('0xb08076b2ae85cdc22ff4943ce101a86e48e61b80');\nundefined\n> contract.getContractAddress();\n\"0xb08076b2ae85cdc22ff4943ce101a86e48e61b80\"\n> contract.getCreatorBalance();\n10029653494179014840\n> contract.getCreatorDotBalance();\n-2500000000000000001\n```\n\nAnd got the same result.\n\nThen I switched computers. Same EXACT geth version. Both Ubuntu 14.04, 64-bit. And I get the correct result. contract.getCreatorDotBalance() is a normal value ~ 10 ETH.\n\n``` js\ncyrus@okcomputersandisk:~$ geth --verbosity \"2\" --rpc --rpcaddr \"127.0.0.1\" --rpcport \"8545\" console\ninstance: Geth/v1.1.0/linux/go1.4.2\n datadir: /home/cyrus/.ethereum\ncoinbase: 0x910561dc5921131ee5de1e9748976a4b9c8c1e80\nat block: 169780 (Mon, 31 Aug 2015 16:17:48 EDT)\nmodules: admin:1.0 db:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 shh:1.0 txpool:1.0 web3:1.0\n> var abi= [{\n..     \"constant\": true,\n..     \"inputs\": [],\n..     \"name\": \"getContractAddress\",\n..     \"outputs\": [{\n......         \"name\": \"\",\n......         \"type\": \"address\"\n......     }],\n..     \"type\": \"function\"\n.. }, {\n..     \"constant\": false,\n..     \"inputs\": [],\n..     \"name\": \"kill\",\n..     \"outputs\": [{\n......         \"name\": \"\",\n......         \"type\": \"bool\"\n......     }],\n..     \"type\": \"function\"\n.. }, {\n..     \"constant\": true,\n..     \"inputs\": [],\n..     \"name\": \"getCreatorBalance\",\n..     \"outputs\": [{\n......         \"name\": \"\",\n......         \"type\": \"uint256\"\n......     }],\n..     \"type\": \"function\"\n.. }, {\n..     \"constant\": true,\n..     \"inputs\": [],\n..     \"name\": \"getCreatorDotBalance\",\n..     \"outputs\": [{\n......         \"name\": \"\",\n......         \"type\": \"uint256\"\n......     }],\n..     \"type\": \"function\"\n.. }, {\n..     \"inputs\": [],\n..     \"type\": \"constructor\"\n.. }];\nundefined\n> var contract = web3.eth.contract(abi).at('0xb08076b2ae85cdc22ff4943ce101a86e48e61b80');\nundefined\n> contract.getContractAddress();\n\"0xb08076b2ae85cdc22ff4943ce101a86e48e61b80\"\n> contract.getCreatorDotBalance();\n10069422894179014840\n> contract.getCreatorBalance();\n10029653494179014840\n```\n\nI had another developer check the contract from his computer and he gets correct values as well. \n\nSo I think this is a bug? Any idea what would be causing it on two separate, but very, very similar machines?\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370520795",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1750#issuecomment-370520795",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1750",
    "id": 370520795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDUyMDc5NQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-03-05T18:44:29Z",
    "updated_at": "2018-03-05T18:44:29Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370520795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

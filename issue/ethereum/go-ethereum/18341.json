{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18341",
  "id": 392867450,
  "node_id": "MDU6SXNzdWUzOTI4Njc0NTA=",
  "number": 18341,
  "title": "Geth sync behind",
  "user": {
    "login": "larrtang",
    "id": 3711198,
    "node_id": "MDQ6VXNlcjM3MTExOTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3711198?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/larrtang",
    "html_url": "https://github.com/larrtang",
    "followers_url": "https://api.github.com/users/larrtang/followers",
    "following_url": "https://api.github.com/users/larrtang/following{/other_user}",
    "gists_url": "https://api.github.com/users/larrtang/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/larrtang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/larrtang/subscriptions",
    "organizations_url": "https://api.github.com/users/larrtang/orgs",
    "repos_url": "https://api.github.com/users/larrtang/repos",
    "events_url": "https://api.github.com/users/larrtang/events{/privacy}",
    "received_events_url": "https://api.github.com/users/larrtang/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-12-20T03:07:36Z",
  "updated_at": "2019-06-25T09:24:31Z",
  "closed_at": "2019-06-25T09:24:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nplease note that this is an issue tracker reserved for bug reports and feature requests.\r\n\r\nFor general questions please use the gitter channel or the Ethereum stack exchange at https://ethereum.stackexchange.com.\r\n\r\n#### System information\r\n\r\nGeth version: 1.8.19-stable\r\nOS & Version:  Ubuntu 16.04, 4 cores, 16GB of RAM, 200GB SSD storage\r\nCommit hash : dae82f098570e15d44584f0d7f350713f4774727\r\n\r\n#### Expected behaviour\r\nSyncing to finish and return false\r\nBlock number != 0\r\n\r\n#### Actual behaviour\r\nSyncing stays behind highest block by around 100 blocks, and eth.blockNumber returns 0.\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n```\r\n# geth --config config.toml --cache 8192\r\n```\r\nHere is my config file:\r\n\r\n````\r\n[Eth]\r\nNetworkId = 1\r\nSyncMode = \"full\"\r\nNoPruning = false\r\nLightPeers = 100\r\nDatabaseCache = 256\r\nTrieCleanCache = 128\r\nTrieDirtyCache = 128\r\nTrieTimeout = 3600000000000\r\nMinerGasFloor = 8000000\r\nMinerGasCeil = 8000000\r\nMinerGasPrice = 1000000000\r\nMinerRecommit = 3000000000\r\nMinerNoverify = false\r\nEnablePreimageRecording = false\r\nEWASMInterpreter = \"\"\r\nEVMInterpreter = \"\"\r\n\r\n[Eth.Ethash]\r\nCacheDir = \"ethash\"\r\nCachesInMem = 2\r\nCachesOnDisk = 3\r\nDatasetDir = \"/root/.ethash\"\r\nDatasetsInMem = 1\r\nDatasetsOnDisk = 2\r\nPowMode = 0\r\n\r\n[Eth.TxPool]\r\nLocals = []\r\nNoLocals = false\r\nJournal = \"transactions.rlp\"\r\nRejournal = 3600000000000\r\nPriceLimit = 1\r\nPriceBump = 10\r\nAccountSlots = 16\r\nGlobalSlots = 4096\r\nAccountQueue = 64\r\nGlobalQueue = 1024\r\nLifetime = 10800000000000\r\n\r\n[Eth.GPO]\r\nBlocks = 20\r\nPercentile = 60\r\n\r\n[Shh]\r\nMaxMessageSize = 1048576\r\nMinimumAcceptedPOW = 2e-01\r\nRestrictConnectionBetweenLightClients = true\r\n\r\n[Node]\r\nDataDir = \"/root/.ethereum\"\r\nIPCPath = \"geth.ipc\"\r\nHTTPHost = \"0.0.0.0\"\r\nHTTPPort = 8545\r\nHTTPVirtualHosts = [\"localhost\"]\r\nHTTPModules = [\"eth\", \"personal\", \"net\", \"web3\", \"db\"]\r\nWSHost = \"127.0.0.1\"\r\nWSPort = 8585\r\nWSOrigins = [\"geth.service\"]\r\nWSModules = [\"net\", \"web3\", \"eth\", \"shh\"]\r\n\r\n[Node.P2P]\r\nMaxPeers = 100\r\nNoDiscovery = false\r\nBootstrapNodes = [\"enode://a979fb575495b8d6db44f750317d0f4622bf4c2aa3365d6af7c284339968eef29b69ad0dce72a4d8db5ebb4968de0e3bec910127f134779fbcb0cb6d3331163c@52.16.188.185:30303\", \"enode://3f1d12044546b76342d59d4a05532c14b85aa669704bfe1f864fe079415aa2c02d743e03218e57a33fb94523adb54032871a6c51b2cc5514cb7c7e35b3ed0a99@13.93.211.84:30303\", \"enode://78de8a0916848093c73790ead81d1928bec737d565119932b98c6b100d944b7a95e94f847f689fc723399d2e31129d182f7ef3863f2b4c820abbf3ab2722344d@191.235.84.50:30303\", \"enode://158f8aab45f6d19c6cbf4a089c2670541a8da11978a2f90dbf6a502a4a3bab80d288afdbeb7ec0ef6d92de563767f3b1ea9e8e334ca711e9f8e2df5a0385e8e6@13.75.154.138:30303\", \"enode://1118980bf48b0a3640bdba04e0fe78b1add18e1cd99bf22d53daac1fd9972ad650df52176e7c7d89d1114cfef2bc23a2959aa54998a46afcf7d91809f0855082@52.74.57.123:30303\", \"enode://979b7fa28feeb35a4741660a16076f1943202cb72b6af70d327f053e248bab9ba81760f39d0701ef1d8f89cc1fbd2cacba0710a12cd5314d5e0c9021aa3637f9@5.1.83.226:30303\"]\r\nBootstrapNodesV5 = [\"enode://06051a5573c81934c9554ef2898eb13b33a34b94cf36b202b69fde139ca17a85051979867720d4bdae4323d4943ddf9aeeb6643633aa656e0be843659795007a@35.177.226.168:30303\", \"enode://0cc5f5ffb5d9098c8b8c62325f3797f56509bff942704687b6530992ac706e2cb946b90a34f1f19548cd3c7baccbcaea354531e5983c7d1bc0dee16ce4b6440b@40.118.3.223:30304\", \"enode://1c7a64d76c0334b0418c004af2f67c50e36a3be60b5e4790bdac0439d21603469a85fad36f2473c9a80eb043ae60936df905fa28f1ff614c3e5dc34f15dcd2dc@40.118.3.223:30306\", \"enode://85c85d7143ae8bb96924f2b54f1b3e70d8c4d367af305325d30a61385a432f247d2c75c45c6b4a60335060d072d7f5b35dd1d4c45f76941f62a4f83b6e75daaf@40.118.3.223:30307\"]\r\nStaticNodes = []\r\nTrustedNodes = []\r\nListenAddr = \":30303\"\r\nEnableMsgEvents = false\r\n\r\n[Node.HTTPTimeouts]\r\nReadTimeout = 30000000000\r\nWriteTimeout = 30000000000\r\nIdleTimeout = 120000000000\r\n\r\n[Dashboard]\r\nHost = \"localhost\"\r\nPort = 8080\r\nRefresh = 5000000000\r\n````\r\n#### Output\r\neth.syncing \r\n````\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":{\r\n\"currentBlock\":\"0x6990a3\",\r\n\"highestBlock\":\"0x699108\",\r\n\"knownStates\":\"0xa6e2934\",\r\n\"pulledStates\":\"0xa6d197f\",\r\n\"startingBlock\":\"0x698f8c\"}}\r\n````\r\neth.blockNumber\r\n````\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x0\"}\r\n````\r\n\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505363382",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18341#issuecomment-505363382",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18341",
    "id": 505363382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTM2MzM4Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T09:24:31Z",
    "updated_at": "2019-06-25T09:24:31Z",
    "author_association": "MEMBER",
    "body": "You need to complete the sync before `eth.blockNumber` will start returning anything meaningful. After fast-sync completes, it will return the block number it is at. Before it's done, it will have headers and bodies, but _not_ the actual state for that latest block, so does not report that block number when you query it. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/505363382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

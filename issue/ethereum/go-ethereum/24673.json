{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24673",
  "id": 1198773514,
  "node_id": "I_kwDOAOvK985Hc9UK",
  "number": 24673,
  "title": "Out of memory crash on 16 gb system ",
  "user": {
    "login": "giblfiz",
    "id": 264992,
    "node_id": "MDQ6VXNlcjI2NDk5Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/264992?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/giblfiz",
    "html_url": "https://github.com/giblfiz",
    "followers_url": "https://api.github.com/users/giblfiz/followers",
    "following_url": "https://api.github.com/users/giblfiz/following{/other_user}",
    "gists_url": "https://api.github.com/users/giblfiz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/giblfiz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/giblfiz/subscriptions",
    "organizations_url": "https://api.github.com/users/giblfiz/orgs",
    "repos_url": "https://api.github.com/users/giblfiz/repos",
    "events_url": "https://api.github.com/users/giblfiz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/giblfiz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-04-09T21:16:06Z",
  "updated_at": "2022-04-28T09:01:33Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "After upgrading from geth 1.10.16 I have started getting frequent spontaneous crashes due to OOM.\r\n\r\n\r\nfrom STDOUT it looks like this:\r\n```\r\nINFO [04-09|10:13:49.315] Imported new chain segment               blocks=5    txs=1011    mgas=64.453  elapsed=9.863s    mgasps=6.534  number=14,504,061 hash=351326..825318 age=1w8h15s  dirty=1018.69MiB\r\nKilled\r\n\r\n```\r\n\r\nWhen I run dmesg I see this:\r\n```\r\n[4529005.076833] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0,global_oom,task_memcg=/,task=geth-precompile,pid=23252,uid=1000\r\n[4529005.087037] Out of memory: Killed process 23252 (geth-precompile) total-vm:16806032kB, anon-rss:10360840kB, file-rss:0kB, shmem-rss:0kB, UID:1000 pgtables:26056kB oom_score_adj:0\r\n[4529007.078967] oom_reaper: reaped process 23252 (geth-precompile), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB\r\n\r\n```\r\n(note, I renamed this version \"geth-precompile\" and downloaded it from the website. I usually build from source but when this issue showed up I figured I would also try the precompiled distribution) \r\n\r\nThis has happened repeatedly during the sync process, about every 8 hours\r\n\r\nThe system it's running on is an AWS t3.xlarge, which has 16 gigs of memory. \r\nThe only other process of note running on the system is a teku beacon node. \r\n\r\nThanks for all the great work, and let me know if I can give you more information that is helpful. ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094303699",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1094303699",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1094303699,
    "node_id": "IC_kwDOAOvK985BOb_T",
    "user": {
      "login": "giblfiz",
      "id": 264992,
      "node_id": "MDQ6VXNlcjI2NDk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/264992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/giblfiz",
      "html_url": "https://github.com/giblfiz",
      "followers_url": "https://api.github.com/users/giblfiz/followers",
      "following_url": "https://api.github.com/users/giblfiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/giblfiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/giblfiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/giblfiz/subscriptions",
      "organizations_url": "https://api.github.com/users/giblfiz/orgs",
      "repos_url": "https://api.github.com/users/giblfiz/repos",
      "events_url": "https://api.github.com/users/giblfiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/giblfiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-10T16:04:40Z",
    "updated_at": "2022-04-10T16:04:40Z",
    "author_association": "NONE",
    "body": "Just a note: it seems to no longer crash since it has caught up to the head of the chain. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094303699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094480909",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1094480909",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1094480909,
    "node_id": "IC_kwDOAOvK985BPHQN",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-11T02:29:06Z",
    "updated_at": "2022-04-11T02:29:06Z",
    "author_association": "MEMBER",
    "body": "Can you provide the Geth version, the flags to setup Geth and your system environment information?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094480909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1095340897",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1095340897",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1095340897,
    "node_id": "IC_kwDOAOvK985BSZNh",
    "user": {
      "login": "giblfiz",
      "id": 264992,
      "node_id": "MDQ6VXNlcjI2NDk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/264992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/giblfiz",
      "html_url": "https://github.com/giblfiz",
      "followers_url": "https://api.github.com/users/giblfiz/followers",
      "following_url": "https://api.github.com/users/giblfiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/giblfiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/giblfiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/giblfiz/subscriptions",
      "organizations_url": "https://api.github.com/users/giblfiz/orgs",
      "repos_url": "https://api.github.com/users/giblfiz/repos",
      "events_url": "https://api.github.com/users/giblfiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/giblfiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-11T17:37:51Z",
    "updated_at": "2022-04-12T01:32:33Z",
    "author_association": "NONE",
    "body": "Geth v 1.17.0 (this build: https://gethstore.blob.core.windows.net/builds/geth-linux-amd64-1.10.17-25c9b49f.tar.gz ) \r\n\r\nThe only flag is \"--http\"\r\n\r\n\r\n```\r\n\r\n> uname -a\r\nLinux ip-##censored##.us-west-2.compute.internal 5.10.96-90.460.amzn2.x86_64 #1 SMP Fri Feb 4 17:12:04 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n```\r\n\r\n> sudo lshw -short\r\nH/W path    Device  Class          Description\r\n==============================================\r\n                    system         t3.xlarge\r\n/0                  bus            Motherboard\r\n/0/0                memory         64KiB BIOS\r\n/0/4                processor      Intel(R) Xeon(R) Platinum 8175M CPU @ 2.50GHz\r\n/0/4/5              memory         1536KiB L1 cache\r\n/0/4/6              memory         24MiB L2 cache\r\n/0/4/7              memory         33MiB L3 cache\r\n/0/8                memory         16GiB System Memory\r\n/0/8/0              memory         16GiB DIMM DDR4 Static column Pseudo-static Synchronous Window DRAM 2\r\n/0/100              bridge         440FX - 82441FX PMC [Natoma]\r\n/0/100/1            bridge         82371SB PIIX3 ISA [Natoma/Triton II]\r\n/0/100/1.3          generic        82371AB/EB/MB PIIX4 ACPI\r\n/0/100/3            display        Amazon.com, Inc.\r\n/0/100/4            storage        Amazon.com, Inc.\r\n/0/100/5    eth0    network        Elastic Network Adapter (ENA)\r\n/0/1                system         PnP device PNP0b00\r\n/0/2                input          PnP device PNP0303\r\n/0/3                input          PnP device PNP0f13\r\n/0/5                printer        PnP device PNP0400\r\n/0/6                communication  PnP device PNP0501\r\n\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1095340897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1098862032",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1098862032",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1098862032,
    "node_id": "IC_kwDOAOvK985Bf03Q",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-14T08:41:12Z",
    "updated_at": "2022-04-14T08:41:12Z",
    "author_association": "MEMBER",
    "body": "Could you do a `ps | aux` and provide the lines for Geth and Teku? Geth does eat up quite a bit of RAM from time to time and would be nice to know how much is Teku keeping hold of. Perhaps there's some scenario where the two just overload the machine beyond the available 16GB.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1098862032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1099472404",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1099472404",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1099472404,
    "node_id": "IC_kwDOAOvK985BiJ4U",
    "user": {
      "login": "giblfiz",
      "id": 264992,
      "node_id": "MDQ6VXNlcjI2NDk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/264992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/giblfiz",
      "html_url": "https://github.com/giblfiz",
      "followers_url": "https://api.github.com/users/giblfiz/followers",
      "following_url": "https://api.github.com/users/giblfiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/giblfiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/giblfiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/giblfiz/subscriptions",
      "organizations_url": "https://api.github.com/users/giblfiz/orgs",
      "repos_url": "https://api.github.com/users/giblfiz/repos",
      "events_url": "https://api.github.com/users/giblfiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/giblfiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-14T17:58:21Z",
    "updated_at": "2022-04-14T17:58:21Z",
    "author_association": "NONE",
    "body": "I'm assuming you meant `ps -aux` ? \r\n\r\n```\r\n$ ps -aux\r\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\r\nroot         1  0.0  0.0 191332  3284 ?        Ss   Feb16   2:10 /usr/lib/systemd/systemd --switched-roo\r\nroot         2  0.0  0.0      0     0 ?        S    Feb16   0:01 [kthreadd]\r\nroot         3  0.0  0.0      0     0 ?        I<   Feb16   0:00 [rcu_gp]\r\nroot         4  0.0  0.0      0     0 ?        I<   Feb16   0:00 [rcu_par_gp]\r\nroot         6  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kworker/0:0H-ev]\r\nroot         9  0.0  0.0      0     0 ?        I<   Feb16   0:00 [mm_percpu_wq]\r\nroot        10  0.0  0.0      0     0 ?        S    Feb16   0:00 [rcu_tasks_rude_]\r\nroot        11  0.0  0.0      0     0 ?        S    Feb16   0:00 [rcu_tasks_trace]\r\nroot        12  0.0  0.0      0     0 ?        S    Feb16   5:26 [ksoftirqd/0]\r\nroot        13  0.0  0.0      0     0 ?        I    Feb16  22:54 [rcu_sched]\r\nroot        14  0.0  0.0      0     0 ?        S    Feb16   0:25 [migration/0]\r\nroot        15  0.0  0.0      0     0 ?        S    Feb16   0:00 [cpuhp/0]\r\nroot        16  0.0  0.0      0     0 ?        S    Feb16   0:00 [cpuhp/1]\r\nroot        17  0.0  0.0      0     0 ?        S    Feb16   0:26 [migration/1]\r\nroot        18  0.0  0.0      0     0 ?        S    Feb16   5:23 [ksoftirqd/1]\r\nroot        20  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kworker/1:0H-ev]\r\nroot        21  0.0  0.0      0     0 ?        S    Feb16   0:00 [cpuhp/2]\r\nroot        22  0.0  0.0      0     0 ?        S    Feb16   0:14 [migration/2]\r\nroot        23  0.0  0.0      0     0 ?        S    Feb16   4:51 [ksoftirqd/2]\r\nroot        25  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kworker/2:0H-ev]\r\nroot        26  0.0  0.0      0     0 ?        S    Feb16   0:00 [cpuhp/3]\r\nroot        27  0.0  0.0      0     0 ?        S    Feb16   0:14 [migration/3]\r\nroot        28  0.0  0.0      0     0 ?        S    Feb16   4:55 [ksoftirqd/3]\r\nroot        30  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kworker/3:0H-ev]\r\nroot        35  0.0  0.0      0     0 ?        S    Feb16   0:00 [kdevtmpfs]\r\nroot        36  0.0  0.0      0     0 ?        I<   Feb16   0:00 [netns]\r\nroot        39  0.0  0.0      0     0 ?        S    Feb16   0:01 [kauditd]\r\nroot       284  0.0  0.0      0     0 ?        S    Feb16   0:02 [khungtaskd]\r\nroot       285  0.0  0.0      0     0 ?        S    Feb16   0:04 [oom_reaper]\r\nroot       286  0.0  0.0      0     0 ?        I<   Feb16   0:00 [writeback]\r\nroot       288  0.0  0.0      0     0 ?        S    Feb16  39:39 [kcompactd0]\r\nroot       289  0.0  0.0      0     0 ?        SN   Feb16   0:00 [ksmd]\r\nroot       290  0.0  0.0      0     0 ?        SN   Feb16   3:11 [khugepaged]\r\nroot       345  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kintegrityd]\r\nroot       346  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kblockd]\r\nroot       348  0.0  0.0      0     0 ?        I<   Feb16   0:00 [blkcg_punt_bio]\r\nroot       457  0.0  0.0      0     0 ?        I<   Feb16   0:00 [tpm_dev_wq]\r\nroot       464  0.0  0.0      0     0 ?        I<   Feb16   0:00 [md]\r\nroot       471  0.0  0.0      0     0 ?        I<   Feb16   0:00 [edac-poller]\r\nroot       476  0.0  0.0      0     0 ?        S    Feb16   0:00 [watchdogd]\r\nroot       567  0.0  0.0      0     0 ?        I<   Feb16   1:08 [kworker/2:1H-xf]\r\nroot       613  0.0  0.0      0     0 ?        S    Feb16  64:43 [kswapd0]\r\nroot       615  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfsalloc]\r\nroot       616  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs_mru_cache]\r\nroot       619  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kthrotld]\r\nroot       665  0.0  0.0      0     0 ?        I<   Feb16   0:00 [nvme-wq]\r\nroot       667  0.0  0.0      0     0 ?        I<   Feb16   0:00 [nvme-reset-wq]\r\nroot       668  0.0  0.0      0     0 ?        I<   Feb16   0:00 [nvme-delete-wq]\r\nroot       702  0.0  0.0      0     0 ?        I<   Feb16   0:00 [ipv6_addrconf]\r\nroot       703  0.0  0.0      0     0 ?        I<   Feb16   0:19 [kworker/1:1H-kb]\r\nroot       712  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kstrp]\r\nroot       725  0.0  0.0      0     0 ?        I<   Feb16   0:00 [zswap-shrink]\r\nroot       726  0.0  0.0      0     0 ?        I<   Feb16   0:00 [kworker/u9:0]\r\nroot       774  0.0  0.0      0     0 ?        I    17:42   0:00 [kworker/0:2-eve]\r\npostfix    943  0.0  0.0  90432  3532 ?        S    16:41   0:00 pickup -l -t unix -u\r\nroot      1283  0.0  0.0      0     0 ?        I<   Feb16   1:03 [kworker/3:1H-xf]\r\nroot      1293  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-buf/nvme0n1]\r\nroot      1294  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-conv/nvme0n]\r\nroot      1295  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-cil/nvme0n1]\r\nroot      1296  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-reclaim/nvm]\r\nroot      1297  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-eofblocks/n]\r\nroot      1298  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xfs-log/nvme0n1]\r\nroot      1299  0.0  0.0      0     0 ?        S    Feb16  10:54 [xfsaild/nvme0n1]\r\nroot      1300  0.0  0.0      0     0 ?        I<   Feb16   0:20 [kworker/0:1H-kb]\r\nroot      1363  0.0  0.0 186844 13040 ?        Ss   Feb16   2:01 /usr/lib/systemd/systemd-journald\r\nroot      1388  0.0  0.0 118804   276 ?        Ss   Feb16   0:00 /usr/sbin/lvmetad -f\r\nroot      1395  0.0  0.0      0     0 ?        I<   Feb16   0:00 [ena]\r\nroot      1412  0.0  0.0  46176   848 ?        Ss   Feb16   0:00 /usr/lib/systemd/systemd-udevd\r\nroot      1948  0.0  0.0      0     0 ?        I<   Feb16   0:00 [cryptd]\r\nroot      2051  0.0  0.0      0     0 ?        I<   Feb16   0:00 [rpciod]\r\nroot      2052  0.0  0.0      0     0 ?        I<   Feb16   0:00 [xprtiod]\r\nroot      2056  0.0  0.0  59740   468 ?        S<sl Feb16   0:05 /sbin/auditd\r\ndbus      2083  0.0  0.0  60480   716 ?        Ss   Feb16   2:04 /usr/bin/dbus-daemon --system --address\r\nrpc       2084  0.0  0.0  69352   552 ?        Ss   Feb16   0:04 /sbin/rpcbind -w\r\nroot      2085  0.0  0.0 101912   304 ?        Ssl  Feb16   1:32 /usr/sbin/irqbalance --foreground\r\nlibstor+  2086  0.0  0.0  12624   172 ?        Ss   Feb16   0:06 /usr/bin/lsmd -d\r\nroot      2090  0.0  0.0  28752  1044 ?        Ss   Feb16   0:38 /usr/lib/systemd/systemd-logind\r\nrngd      2103  0.0  0.0  94100   848 ?        Ss   Feb16   0:00 /sbin/rngd -f --fill-watermark=0 --excl\r\nroot      2126  0.0  0.0 101596   472 ?        Ssl  Feb16   0:00 /usr/sbin/gssproxy -D\r\nroot      2331  0.0  0.0 100724  3128 ?        Ss   Feb16   0:03 /sbin/dhclient -q -lf /var/lib/dhclient\r\nroot      2376  0.0  0.0 100724  2044 ?        Ss   Feb16   0:06 /sbin/dhclient -6 -nw -lf /var/lib/dhcl\r\nroot      2529  0.0  0.0  90348  1284 ?        Ss   Feb16   0:09 /usr/libexec/postfix/master -w\r\npostfix   2531  0.0  0.0  90512  1036 ?        S    Feb16   0:02 qmgr -l -t unix -u\r\nroot      2643  0.0  0.0  27888   208 ?        Ss   Feb16   0:00 /usr/sbin/atd -f\r\nroot      2659  0.0  0.0 121304   124 tty1     Ss+  Feb16   0:00 /sbin/agetty --noclear tty1 linux\r\nroot      2660  0.0  0.0  10552   128 ttyS0    Ss+  Feb16   0:00 /sbin/agetty --keep-baud 115200,38400,9\r\nroot      2662  0.0  0.0      0     0 ?        I    15:44   0:00 [kworker/u8:1-ev]\r\nroot      2716  0.0  0.0 152696  8668 ?        Ss   17:45   0:00 sshd: ec2-user [priv]\r\nroot      2844  0.0  0.0   4264   104 ?        Ss   Feb16   0:00 /usr/sbin/acpid\r\nec2-user  2860  0.0  0.0 152696  4432 ?        R    17:45   0:00 sshd: ec2-user@pts/0\r\nec2-user  2861  0.1  0.0 124860  4076 pts/0    Ss   17:45   0:00 -bash\r\nroot      3058  0.0  0.0   4240   736 ?        S    17:46   0:00 sleep 1\r\nec2-user  3060  0.0  0.0 164364  3768 pts/0    R+   17:46   0:00 ps -aux\r\nroot      3063  0.0  0.0 112916  1776 ?        Ss   Feb16   0:00 /usr/sbin/sshd -D\r\nroot      3698  0.0  0.0      0     0 ?        I    16:46   0:00 [kworker/0:0-eve]\r\nec2-user  7251  0.0  0.0 135068  1336 ?        Ss   Feb16   0:37 SCREEN -S geth\r\nec2-user  7252  0.0  0.0 125012  2240 pts/1    Ss+  Feb16   0:00 /bin/bash\r\nec2-user  8848  0.0  0.0 134772  1220 ?        Ss   Feb16   0:25 SCREEN -S teku\r\nec2-user  8849  0.0  0.0 125012  1220 pts/3    Ss   Feb16   0:00 /bin/bash\r\nec2-user  9090  172 31.5 8645616 5103308 pts/3 Sl+  Apr08 14319:54 java -Dvertx.disableFileCPResolving=t\r\nec2-user  9765 51.1 52.1 17116708 8438168 ?    Ssl  Apr09 3514:06 /home/ec2-user/geth-precompile --http\r\nroot     10239  0.0  0.0      0     0 ?        I    16:58   0:00 [kworker/3:1-eve]\r\nroot     15471  0.0  0.0      0     0 ?        I    17:08   0:00 [kworker/u8:2-ev]\r\nchrony   18968  0.0  0.0 105108   908 ?        S    Apr08   0:06 /usr/sbin/chronyd\r\nroot     20739  0.0  0.0  24688  1832 ?        Ss   Apr08   0:00 /usr/sbin/crond -n\r\nroot     21856  0.0  0.0 718888  8612 ?        Ssl  Apr08   0:27 /usr/bin/amazon-ssm-agent\r\nroot     21899  0.0  0.0 460800  1756 ?        Ssl  Apr08   0:33 /usr/sbin/rsyslogd -n\r\nroot     22053  0.0  0.0 731252 14780 ?        Sl   Apr08   0:20 /usr/bin/ssm-agent-worker\r\nroot     25390  0.0  0.0      0     0 ?        I    17:27   0:00 [kworker/3:2-eve]\r\nroot     25925  0.0  0.0      0     0 ?        I    17:28   0:00 [kworker/2:2-xfs]\r\nroot     26233  0.0  0.0  13776  2688 ?        Ss   17:29   0:00 /bin/bash /usr/bin/log4j-cve-2021-44228\r\nroot     26396  0.0  0.0      0     0 ?        I    17:29   0:00 [kworker/0:1-mm_]\r\nroot     32028  0.0  0.0      0     0 ?        I    17:40   0:00 [kworker/1:1]\r\nroot     32030  0.0  0.0      0     0 ?        I    17:40   0:00 [kworker/1:3-mm_]\r\nroot     32214  0.0  0.0      0     0 ?        I    17:40   0:00 [kworker/2:1-eve]\r\n```\r\n\r\nAlso worth mentioning again, once syncing completed it stopped having memory failures. So it has been up and stable in the current configuration for ~4 days now.  Sorry I didn't get a snapshot of that while it was having the issue. \r\n\r\nIf you really want to chase this hard, I can probably clone the instance and see if I can replicate it on the testnet. \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1099472404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1099799484",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1099799484",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1099799484,
    "node_id": "IC_kwDOAOvK985BjZu8",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-15T02:43:04Z",
    "updated_at": "2022-04-15T02:43:04Z",
    "author_association": "MEMBER",
    "body": "`ec2-user  9090  172 31.5 8645616 5103308 pts/3 Sl+  Apr08 14319:54 java -Dvertx.disableFileCPResolving=t`\r\n\r\nThis process also uses 31.5% memory resource. If you only run Geth in a 16GB machine, then it's enough and shouldn't be panic. While our hunch is that you are running something else in the same machine(let's say teku, we don't know how many memory it will use), so the available memory is less than 16GB. And normally for mainnet Geth will use around 10GB memory with default configs.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1099799484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1111914130",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24673#issuecomment-1111914130",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24673",
    "id": 1111914130,
    "node_id": "IC_kwDOAOvK985CRnaS",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-28T08:46:33Z",
    "updated_at": "2022-04-28T09:01:26Z",
    "author_association": "MEMBER",
    "body": "Please try setting the database cache amount. For example, this sets it to 2GB:\r\n\r\n```\r\ngeth --cache 2500\r\n```\r\n\r\nThe default cache on mainnet is 4GB and that might be too much. Geth generally uses more memory than the configured cache amount, it's just a hint.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1111914130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

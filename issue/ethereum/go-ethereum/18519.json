{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18519",
  "id": 402768139,
  "node_id": "MDU6SXNzdWU0MDI3NjgxMzk=",
  "number": 18519,
  "title": "Wrong gas estimation by eth_estimateGas ",
  "user": {
    "login": "ZumZoom",
    "id": 735355,
    "node_id": "MDQ6VXNlcjczNTM1NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/735355?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ZumZoom",
    "html_url": "https://github.com/ZumZoom",
    "followers_url": "https://api.github.com/users/ZumZoom/followers",
    "following_url": "https://api.github.com/users/ZumZoom/following{/other_user}",
    "gists_url": "https://api.github.com/users/ZumZoom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ZumZoom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ZumZoom/subscriptions",
    "organizations_url": "https://api.github.com/users/ZumZoom/orgs",
    "repos_url": "https://api.github.com/users/ZumZoom/repos",
    "events_url": "https://api.github.com/users/ZumZoom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ZumZoom/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2019-01-24T15:44:14Z",
  "updated_at": "2020-08-27T09:10:37Z",
  "closed_at": "2020-05-14T11:10:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.8.21\r\nOS & Version: Ubuntu 18.04.1\r\n\r\n#### Expected behaviour\r\n\r\n`eth_estimateGas` should return enough gas to execute transaction.\r\n\r\n#### Actual behaviour\r\n\r\n`eth_estimateGas` returns not enough gas to execute transaction.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nCall `eth_estimateGas` on fallback function of a [simple contract](https://ropsten.etherscan.io/address/0x2926d1c444ef19486881e7bcb72960bb62c5dcc6#code) compiled by Solidity 0.4.25.\r\n\r\n`eth_estimateGas` estimates required gas as 22370.\r\n\r\nHowever function requires 23104 gas to execute successfully.\r\n\r\nAlso I think it's worth noting that `eth_estimateGas` works correctly with the same contract compiled by Solidity 0.5.3 which can be found [here](https://ropsten.etherscan.io/address/0x48df4b3fddfc1d9ca57769c7ccf9444ed22905a1#code).\r\n\r\nIt returns 23137 gas which is exactly what is required for the execution.\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/457712617",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-457712617",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 457712617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzcxMjYxNw==",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-25T20:17:29Z",
    "updated_at": "2019-01-25T20:18:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "[Here](https://www.diffchecker.com/mRK5oD9v) is the opcode diff",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/457712617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460262977",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-460262977",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 460262977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDI2Mjk3Nw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T14:12:09Z",
    "updated_at": "2019-02-04T14:12:09Z",
    "author_association": "MEMBER",
    "body": "Thanks for the repro, will look into it, just need to sync a node.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460262977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/462169527",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-462169527",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 462169527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjE2OTUyNw==",
    "user": {
      "login": "jmooo",
      "id": 1500269,
      "node_id": "MDQ6VXNlcjE1MDAyNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmooo",
      "html_url": "https://github.com/jmooo",
      "followers_url": "https://api.github.com/users/jmooo/followers",
      "following_url": "https://api.github.com/users/jmooo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmooo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmooo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmooo/subscriptions",
      "organizations_url": "https://api.github.com/users/jmooo/orgs",
      "repos_url": "https://api.github.com/users/jmooo/repos",
      "events_url": "https://api.github.com/users/jmooo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmooo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-10T20:34:40Z",
    "updated_at": "2019-02-10T20:55:37Z",
    "author_association": "NONE",
    "body": "This looks similar to what I'm hitting with both Geth and Parity, I posted to a [Parity ticket](https://github.com/paritytech/parity-ethereum/issues/10147#issuecomment-460875799) a week ago. From the comments about Solidity possibly being the issue, some examples:\r\n\r\n-  [BeerCoin](https://etherscan.io/address/0x74c1e4b8cae59269ec1d85d3d4f324396048f4ac#code), Solidity v0.3.5, Success\r\n-  [USDCoin](https://etherscan.io/address/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48#code), Solidity v0.4.24, Failed\r\n- [Binance BNB](https://etherscan.io/address/0xB8c77482e45F1F44dE1745F52C74426C631bDD52#code), Solidity v0.4.12, Failed\r\n- [YANU](https://etherscan.io/address/0x8080b66e7505db9bd1d7bb44a7b9518754c8d26b#code), Solidity v0.4.23, Failed\r\n- [MakerDaoGateway](https://etherscan.io/address/0x85f66f5ee2435bdcbe12c115bfd592462ecbdb5c#code), Solidity v0.5.0, Success\r\n- [TokenTimelock](https://etherscan.io/address/0xcda3b86c000d910e30ddb32119cd182d8c983056#code), Solidity v0.5.2, Failed\r\n\r\ncross posting parity ticket because it has test commands:\r\n\r\n> I've been running into this on Parity v2.2.8, and Geth v1.8.22 and it seems to fail when `to` is set to certain contracts but not others? For example:\r\n> \r\n> BeerCoin: https://etherscan.io/address/0x74c1e4b8cae59269ec1d85d3d4f324396048f4ac\r\n> parity:\r\n> ```\r\n> curl -H \"Content-Type: application/json\" --request POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0x74c1e4b8cae59269ec1d85d3d4f324396048f4ac\",\"data\":\"0xa9059cbb0000000000000000000000007cb57b5a97eabe94205c07890be4c1ad31e486a80000000000000000000000000000000000000000000000000000000000000001\"}],\"id\":34}' http://localhost:8889\r\n> {\"jsonrpc\":\"2.0\",\"result\":\"0x1f159\",\"id\":34}\r\n> ```\r\n> geth:\r\n> ```\r\n> curl -H \"Content-Type: application/json\" --request POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0x74c1e4b8cae59269ec1d85d3d4f324396048f4ac\",\"data\":\"0xa9059cbb0000000000000000000000007cb57b5a97eabe94205c07890be4c1ad31e486a80000000000000000000000000000000000000000000000000000000000000001\"}],\"id\":34}' http://localhost:8889\r\n> {\"jsonrpc\":\"2.0\",\"id\":34,\"result\":\"0x1f159\"}\r\n> ```\r\n> \r\n> USDCoin: https://etherscan.io/address/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\r\n> parity:\r\n> ```\r\n> curl -H \"Content-Type: application/json\" --request POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\",\"data\":\"0xa9059cbb0000000000000000000000007cb57b5a97eabe94205c07890be4c1ad31e486a80000000000000000000000000000000000000000000000000000000000000001\"}],\"id\":34}' http://localhost:8889\r\n> {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32016,\"message\":\"The execution failed due to an exception.\"},\"id\":34}\r\n> ```\r\n> geth:\r\n> ```\r\n> curl -H \"Content-Type: application/json\" --request POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\",\"data\":\"0xa9059cbb0000000000000000000000007cb57b5a97eabe94205c07890be4c1ad31e486a80000000000000000000000000000000000000000000000000000000000000001\"}],\"id\":34}' http://localhost:8889\r\n> {\"jsonrpc\":\"2.0\",\"id\":34,\"error\":{\"code\":-32000,\"message\":\"gas required exceeds allowance or always failing transaction\"}}\r\n> ```\r\n> \r\n> Unfortunately even running parity with `--logging rpc=trace` doesn't give much more information:\r\n> ```\r\n> 2019-02-06 01:38:24 UTC jsonrpc-eventloop-2 TRACE rpc  Request: {\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\",\"data\":\"0xa9059cbb0000000000000000000000007cb57b5a97eabe94205c07890be4c1ad31e486a80000000000000000000000000000000000000000000000000000000000000001\"}],\"id\":34}.\r\n> 2019-02-06 01:38:24 UTC jsonrpc-eventloop-2 DEBUG rpc  [Some(Num(34))] Took 130ms\r\n> 2019-02-06 01:38:24 UTC jsonrpc-eventloop-2 DEBUG rpc  Response: {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32016,\"message\":\"The execution failed due to an exception.\"},\"id\":34}.\r\n> ```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/462169527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/462177048",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-462177048",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 462177048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjE3NzA0OA==",
    "user": {
      "login": "ZumZoom",
      "id": 735355,
      "node_id": "MDQ6VXNlcjczNTM1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/735355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZumZoom",
      "html_url": "https://github.com/ZumZoom",
      "followers_url": "https://api.github.com/users/ZumZoom/followers",
      "following_url": "https://api.github.com/users/ZumZoom/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZumZoom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZumZoom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZumZoom/subscriptions",
      "organizations_url": "https://api.github.com/users/ZumZoom/orgs",
      "repos_url": "https://api.github.com/users/ZumZoom/repos",
      "events_url": "https://api.github.com/users/ZumZoom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZumZoom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-10T21:42:24Z",
    "updated_at": "2019-02-10T21:54:35Z",
    "author_association": "NONE",
    "body": "@jmooo I do not think that this is relevant. The problem is that call to `estimateGas` produces not enough gas for call to succeed. In the issue that you've linked call to `estimateGas` produces expected result of \"always failing transaction\".\r\n\r\nSurely it is bad that neither Geth nor Parity provides you exception information but at least they both do work correctly in those examples. Not the case here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/462177048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/584874333",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-584874333",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 584874333,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDg3NDMzMw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-02-11T21:57:15Z",
    "updated_at": "2020-02-11T21:57:15Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/584874333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/584938106",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-584938106",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 584938106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDkzODEwNg==",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T00:21:57Z",
    "updated_at": "2020-02-12T00:21:57Z",
    "author_association": "NONE",
    "body": "But it is still the case if no-one fixed it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/584938106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628506177",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-628506177",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 628506177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODUwNjE3Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T09:13:05Z",
    "updated_at": "2020-05-14T09:13:05Z",
    "author_association": "MEMBER",
    "body": "Previously, parity used `0x00...0` as `from` if not explicitly set by caller, whereas geth used whatever backend coinbase it could find. So there would be differences in execution when `from` was not specified. \r\n\r\nNowadays, geth also uses `0x00` address as `from`, but also sets the gasPrice to zero -- to not cause failures due to the zero-account not having enough funds. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628506177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628511509",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-628511509",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 628511509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODUxMTUwOQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T09:22:21Z",
    "updated_at": "2020-05-14T09:22:21Z",
    "author_association": "MEMBER",
    "body": "I can repro this:\r\n\r\nA call to the old contract: https://ropsten.etherscan.io/tx/0x824fdac2a133a4a575f581acf7185fe67db837c0acec3dce5f9c29e7b481542c\r\n\r\nA call to the new contract: https://ropsten.etherscan.io/tx/0x08161e0c09542d508453ec8fa217318179e325bc1e0fd20d93bb80cf3f1afcb7\r\n\r\nBoth used internal gas estimation former failed, latter succeeded.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628511509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628562330",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-628562330",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 628562330,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODU2MjMzMA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T11:08:15Z",
    "updated_at": "2020-05-14T11:08:15Z",
    "author_association": "MEMBER",
    "body": "I think the gas estimation is ok.\r\n\r\nIf we look at the failing tx's opcodes: https://ropsten.etherscan.io/vmtrace?txhash=0x824fdac2a133a4a575f581acf7185fe67db837c0acec3dce5f9c29e7b481542c, the OOG is in an internal call, but the outer call continues, so this means Solidity explicitly swallowed the internal failure. From Geth's perspective, the (outer) call succeeded.\r\n\r\nActually, even Etherscan says that even though there were internal failures, the transaction itself succeeded.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628562330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628563227",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-628563227",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 628563227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODU2MzIyNw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T11:10:18Z",
    "updated_at": "2020-05-14T11:10:18Z",
    "author_association": "MEMBER",
    "body": "So this means that between Solidity 4 and Solidity 5, they've added an implicit check so that if an internal call fails and it's not explicitly ignored, it will implicitly propagate the failure.\r\n\r\nAll in all works as expected. Gas estimation can only ever take the outermost call into account, since internal ones could always be attacked by malicious contracts. It's up to the contract itself to handle internal failures in however it sees fit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628563227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628609983",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18519#issuecomment-628609983",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18519",
    "id": 628609983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODYwOTk4Mw==",
    "user": {
      "login": "ZumZoom",
      "id": 735355,
      "node_id": "MDQ6VXNlcjczNTM1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/735355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZumZoom",
      "html_url": "https://github.com/ZumZoom",
      "followers_url": "https://api.github.com/users/ZumZoom/followers",
      "following_url": "https://api.github.com/users/ZumZoom/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZumZoom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZumZoom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZumZoom/subscriptions",
      "organizations_url": "https://api.github.com/users/ZumZoom/orgs",
      "repos_url": "https://api.github.com/users/ZumZoom/repos",
      "events_url": "https://api.github.com/users/ZumZoom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZumZoom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T12:46:04Z",
    "updated_at": "2020-05-14T12:46:04Z",
    "author_association": "NONE",
    "body": "Just to confirm https://ropsten.etherscan.io/address/0xc85ffab92af69815ecb0085873009bc0d4532ae1\r\nAdding explicit require results in correct estimation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628609983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

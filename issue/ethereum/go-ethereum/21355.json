{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21355",
  "id": 663577197,
  "node_id": "MDU6SXNzdWU2NjM1NzcxOTc=",
  "number": 21355,
  "title": "Connect non bootstrap nodes on a private chain",
  "user": {
    "login": "danielescattaglia",
    "id": 12762165,
    "node_id": "MDQ6VXNlcjEyNzYyMTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/12762165?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/danielescattaglia",
    "html_url": "https://github.com/danielescattaglia",
    "followers_url": "https://api.github.com/users/danielescattaglia/followers",
    "following_url": "https://api.github.com/users/danielescattaglia/following{/other_user}",
    "gists_url": "https://api.github.com/users/danielescattaglia/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/danielescattaglia/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danielescattaglia/subscriptions",
    "organizations_url": "https://api.github.com/users/danielescattaglia/orgs",
    "repos_url": "https://api.github.com/users/danielescattaglia/repos",
    "events_url": "https://api.github.com/users/danielescattaglia/events{/privacy}",
    "received_events_url": "https://api.github.com/users/danielescattaglia/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-07-22T08:31:00Z",
  "updated_at": "2020-09-28T12:28:18Z",
  "closed_at": "2020-09-28T12:28:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi \r\n\r\nI'm working on a private chain but i've not so clear the discovery protocol. I'm using bootnodes to connect nodes on the chain but nodes seems to connect only to the bootnodes, they never get connected to other non-bootstrap nodes. I can connect manually all nodes using admin.addPeer, so it doesn't seem a network related problem. Is it the normal behaviour?\r\nThanks\r\n\r\nBye\r\n\r\nDaniele \r\n\r\n#### System information\r\n\r\nGeth version: `1.9.16-stable`\r\nOS & Version: `Linux Ubuntu 20.04`\r\nCommit hash : `ea3b00ad75aebaf1790fe0f8afc9fb7852c87716`\r\n\r\n#### Expected behaviour\r\nUsing a full fledged geth as a bootnode. A node running with --bootnodes parameter, connected to the geth acting as bootnode, should connect to some/all nodes that bootnode has as peers. \r\n\r\n#### Actual behaviour\r\nIn a 10 node chain, bootnode get connected to all other nodes, other nodes are connected only to bootnode and never try or get connected to other node of chain. All nodes are running in the same private network. Same behaviour running boostrap node as normal node or miner. Sometime I get a RPC Timeout, but connecting the node with addPeer I'm able to connect the node.\r\n\r\n#### Steps to reproduce the behaviour\r\n1. Run a node with --nodekey parameter and no --bootnodes parameter. \r\n2. Other nodes run with --bootnodes pointing to the node at point 1.\r\n\r\n`geth --mine --miner.threads=1 --allow-insecure-unlock --unlock 0 --password ./.accountpassword  --nodekey nodekey --networkid \"35\"  --datadir /ethereum --pprof --pprof.addr x.x.x.x --http --http.corsdomain \"*\"  --http.addr x.x.x.x --http.vhosts \"*\"  --http.api debug,net,admin,eth,web3 --ws --ws.origins \"*\" --ws.addr x.x.x.x  --ws.api eth,net,web3,personal  --metrics --metrics.expensive --nat=extip:x.x.x.x --nousb --verbosity 6 --trace /tmp/trace.txt --cpuprofile /tmp/cpu.txt --netrestrict x.x.x.x/y --cache 2048 --port 30303`\r\n\r\n`geth --bootnodes \"enode://z@x.x.x.x:30303\" --networkid 35 --datadir /ethereum --pprof --pprof.addr x.x.x.y  --http --http.corsdomain \"*\" --http.addr x.x.x.y --http.vhosts \"*\"  --http.api debug,net,admin,eth,web3 --ws --ws.origins \"*\"   --ws.addr x.x.x.y --ws.api eth,net,web3,personal --metrics --metrics.expensive --nat=extip:x.x.x.x --nousb  --verbosity 6  --trace /tmp/trace.txt  --cpuprofile /tmp/cpu.txt --netrestrict \"192.168.100.0/24\"   --cache 2048 --syncmode \"full\"  --port 30303`\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\nTRACE[07-22|07:33:01.633] Findnode failed                          id=c28134e93d2c425f failcount=1 results=0 err=\"RPC timeout\"\r\n````\r\n",
  "closed_by": {
    "login": "adamschmideg",
    "id": 208822,
    "node_id": "MDQ6VXNlcjIwODgyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamschmideg",
    "html_url": "https://github.com/adamschmideg",
    "followers_url": "https://api.github.com/users/adamschmideg/followers",
    "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
    "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
    "repos_url": "https://api.github.com/users/adamschmideg/repos",
    "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/665854761",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21355#issuecomment-665854761",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355",
    "id": 665854761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTg1NDc2MQ==",
    "user": {
      "login": "axon-consultancy",
      "id": 45140927,
      "node_id": "MDQ6VXNlcjQ1MTQwOTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/45140927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axon-consultancy",
      "html_url": "https://github.com/axon-consultancy",
      "followers_url": "https://api.github.com/users/axon-consultancy/followers",
      "following_url": "https://api.github.com/users/axon-consultancy/following{/other_user}",
      "gists_url": "https://api.github.com/users/axon-consultancy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axon-consultancy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axon-consultancy/subscriptions",
      "organizations_url": "https://api.github.com/users/axon-consultancy/orgs",
      "repos_url": "https://api.github.com/users/axon-consultancy/repos",
      "events_url": "https://api.github.com/users/axon-consultancy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axon-consultancy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-29T19:22:40Z",
    "updated_at": "2020-07-29T19:22:40Z",
    "author_association": "NONE",
    "body": "We have the same issue on what is currently latest master:\r\n\r\n```\r\nGeth\r\nVersion: 1.9.19-unstable\r\nGit Commit: 9e04c5ec83cbbb227e63e53d3cd08d97e5f2a874\r\nGit Commit Date: 20200729\r\n```\r\nI have created a batch script that starts a small Clique based private network with 1 geth full node that acts as bootnode and 3 signer nodes (clique) that can be used to reproduce the issue. Keys and script can be found here: https://gofile.io/d/xWSv6U\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/665854761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/686343107",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21355#issuecomment-686343107",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355",
    "id": 686343107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjM0MzEwNw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-03T08:37:11Z",
    "updated_at": "2020-09-03T08:37:40Z",
    "author_association": "MEMBER",
    "body": "Should be fixed in last release, 1.9.20",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/686343107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699975161",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21355#issuecomment-699975161",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21355",
    "id": 699975161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTk3NTE2MQ==",
    "user": {
      "login": "adamschmideg",
      "id": 208822,
      "node_id": "MDQ6VXNlcjIwODgyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/208822?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamschmideg",
      "html_url": "https://github.com/adamschmideg",
      "followers_url": "https://api.github.com/users/adamschmideg/followers",
      "following_url": "https://api.github.com/users/adamschmideg/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamschmideg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamschmideg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamschmideg/subscriptions",
      "organizations_url": "https://api.github.com/users/adamschmideg/orgs",
      "repos_url": "https://api.github.com/users/adamschmideg/repos",
      "events_url": "https://api.github.com/users/adamschmideg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamschmideg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-28T12:28:18Z",
    "updated_at": "2020-09-28T12:28:18Z",
    "author_association": "MEMBER",
    "body": "I assume this got fixed in the last release. If you face the same problem, please open a new issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699975161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

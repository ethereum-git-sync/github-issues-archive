{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25080",
  "id": 1270085792,
  "node_id": "I_kwDOAOvK985Ls_ig",
  "number": 25080,
  "title": "Chain data completely wiped out after unclean shutdown",
  "user": {
    "login": "nuliknol",
    "id": 1125368,
    "node_id": "MDQ6VXNlcjExMjUzNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1125368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nuliknol",
    "html_url": "https://github.com/nuliknol",
    "followers_url": "https://api.github.com/users/nuliknol/followers",
    "following_url": "https://api.github.com/users/nuliknol/following{/other_user}",
    "gists_url": "https://api.github.com/users/nuliknol/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nuliknol/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nuliknol/subscriptions",
    "organizations_url": "https://api.github.com/users/nuliknol/orgs",
    "repos_url": "https://api.github.com/users/nuliknol/repos",
    "events_url": "https://api.github.com/users/nuliknol/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nuliknol/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-06-13T23:58:45Z",
  "updated_at": "2022-06-15T16:30:06Z",
  "closed_at": "2022-06-15T15:42:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Another year, and another bug in database consistency. Every year I have to report a new bug because someone can't read a book on database design and specially at the operating system level because you can't just `open()` and then `append()` data to a file (like you are doing in geth), that's not consistent.\r\n\r\nThis time I created a local chain, worked with it for a few days, then on Friday I just closed the terminal window with geth. On Monday when I start `geth` process again, the database (I had 63 blocks so far) is just wiped out completely. The log says it all:\r\n\r\n![chainwipeout](https://user-images.githubusercontent.com/1125368/173465942-4e3f37f2-c24a-4246-960a-66793f65b57a.png)\r\n\r\nAfter it wipes out all existing blocks, it just starts making new blocks from genesis (block 0) , like nothing happened. \r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156634108",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25080#issuecomment-1156634108",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25080",
    "id": 1156634108,
    "node_id": "IC_kwDOAOvK985E8NX8",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T15:42:25Z",
    "updated_at": "2022-06-15T15:42:25Z",
    "author_association": "MEMBER",
    "body": "1. Drop the passive aggressive attitude if you want answers.\r\n2. It works as expected, Geth keeps the recent state in memory for pruning purposes. If you crash Geth (i.e. kill the terminal and not shut it down gracefully), then Geth will lose the state data kept in memory and will need to roll the local chain back to a block which had the state (i.e. a proper shutdown).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156634108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25092",
  "id": 1270934498,
  "node_id": "I_kwDOAOvK985LwOvi",
  "number": 25092,
  "title": "Why Geth choose merkle tree as the underlying structure for storing account state?",
  "user": {
    "login": "cryptocifer",
    "id": 4777457,
    "node_id": "MDQ6VXNlcjQ3Nzc0NTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4777457?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cryptocifer",
    "html_url": "https://github.com/cryptocifer",
    "followers_url": "https://api.github.com/users/cryptocifer/followers",
    "following_url": "https://api.github.com/users/cryptocifer/following{/other_user}",
    "gists_url": "https://api.github.com/users/cryptocifer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cryptocifer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cryptocifer/subscriptions",
    "organizations_url": "https://api.github.com/users/cryptocifer/orgs",
    "repos_url": "https://api.github.com/users/cryptocifer/repos",
    "events_url": "https://api.github.com/users/cryptocifer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cryptocifer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-06-14T14:53:49Z",
  "updated_at": "2022-06-15T14:13:54Z",
  "closed_at": "2022-06-15T12:38:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Hi I'm learning geth source code these days and a question keep lingering in my head: why geth use the merkle patricia tree as the underlying data structure for storing account state? As I known the merkle patricia tree is derived from merkle tree used in bitcoin to do efficient verification of a transaction against a block.\r\n\r\nWhile in geth, there's no such verification need for the account state right? At least no need to persisting also the intermediate node right? So why did we choose to use it as well? as a tree-like structure occupies much more disk space than a plain db structure, and entails more disk I/Os to get the leaf node, which furthur caused the slow syncing process.\r\n\r\nMaybe it's somewhat fundamental I didn't find much discussions on this topic in the community, I think a plain data structure is just for good, but may I know the initial consideration of the geth design and if I'm missing some important points?",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1155636249",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25092#issuecomment-1155636249",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092",
    "id": 1155636249,
    "node_id": "IC_kwDOAOvK985E4ZwZ",
    "user": {
      "login": "AusIV",
      "id": 977954,
      "node_id": "MDQ6VXNlcjk3Nzk1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/977954?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AusIV",
      "html_url": "https://github.com/AusIV",
      "followers_url": "https://api.github.com/users/AusIV/followers",
      "following_url": "https://api.github.com/users/AusIV/following{/other_user}",
      "gists_url": "https://api.github.com/users/AusIV/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AusIV/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AusIV/subscriptions",
      "organizations_url": "https://api.github.com/users/AusIV/orgs",
      "repos_url": "https://api.github.com/users/AusIV/repos",
      "events_url": "https://api.github.com/users/AusIV/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AusIV/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-14T19:36:13Z",
    "updated_at": "2022-06-14T19:36:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Geth does do verification of the account state trie. Every block includes the state root, and Geth verifies that its state root matches the state root of each block header after processing the transactions in it. Without storing the state trie, Geth would not be able to mine blocks, as it would not be able to determine the new state root after including transactions.\r\n\r\nAdditionally, light clients request state data from peers, and the responses include proofs of the data they've requested, which is only possible with the state trie.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1155636249/reactions",
      "total_count": 3,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156419147",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25092#issuecomment-1156419147",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092",
    "id": 1156419147,
    "node_id": "IC_kwDOAOvK985E7Y5L",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T12:38:04Z",
    "updated_at": "2022-06-15T12:38:04Z",
    "author_association": "MEMBER",
    "body": "^ :heavy_check_mark: ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156419147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156529077",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25092#issuecomment-1156529077",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25092",
    "id": 1156529077,
    "node_id": "IC_kwDOAOvK985E7zu1",
    "user": {
      "login": "cryptocifer",
      "id": 4777457,
      "node_id": "MDQ6VXNlcjQ3Nzc0NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4777457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptocifer",
      "html_url": "https://github.com/cryptocifer",
      "followers_url": "https://api.github.com/users/cryptocifer/followers",
      "following_url": "https://api.github.com/users/cryptocifer/following{/other_user}",
      "gists_url": "https://api.github.com/users/cryptocifer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cryptocifer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cryptocifer/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptocifer/orgs",
      "repos_url": "https://api.github.com/users/cryptocifer/repos",
      "events_url": "https://api.github.com/users/cryptocifer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cryptocifer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T14:13:53Z",
    "updated_at": "2022-06-15T14:13:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see, thanks a lot",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1156529077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

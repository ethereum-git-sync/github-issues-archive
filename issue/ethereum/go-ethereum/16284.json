{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16284",
  "id": 303384537,
  "node_id": "MDU6SXNzdWUzMDMzODQ1Mzc=",
  "number": 16284,
  "title": "Transaction having low gasPrice makes all the other transactions hang on the pending state.",
  "user": {
    "login": "avatar-lavventura",
    "id": 18537398,
    "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avatar-lavventura",
    "html_url": "https://github.com/avatar-lavventura",
    "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
    "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
    "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
    "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
    "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
    "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/64",
    "html_url": "https://github.com/ethereum/go-ethereum/milestone/64",
    "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/milestones/64/labels",
    "id": 3156513,
    "node_id": "MDk6TWlsZXN0b25lMzE1NjUxMw==",
    "number": 64,
    "title": "1.8.3",
    "description": "",
    "creator": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 35,
    "state": "closed",
    "created_at": "2018-03-02T15:54:26Z",
    "updated_at": "2018-03-27T07:09:31Z",
    "due_on": "2018-03-19T07:00:00Z",
    "closed_at": "2018-03-27T07:09:31Z"
  },
  "comments": 4,
  "created_at": "2018-03-08T07:40:50Z",
  "updated_at": "2018-03-08T10:54:18Z",
  "closed_at": "2018-03-08T10:52:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have a small private network that has a proof-of-authority engine created via `geth-clique` using `Geth Version: 1.8.3-unstable`, currently there are three signer nodes and two other non-signer nodes (lets call them `peer-A` and `peer-B`). `peer-A` and `peer-B` are connected to three signer nodes.\r\n\r\nFirst, I sent a transaction with very low `gasPrice` such as 200, on `peer-A` as shown below.\r\n\r\n    eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[1], value: web3.toWei(0,0000, \"ether\"), gasPrice: 200})\r\n\r\nLater when I sent more transactions on `peer-A` even with greater `gasPrice`, all of those transactions will remain on the pending state. As I understand submitted transactions work as FIFO queue and my upcoming transactions are stuck \r\nsince the first send transaction with very low `gasPrice` locks others.\r\n\r\nExample: (First `peer-A` and `peer-B` sent a Tx with low `gasPrice` and later their other Tx with high gasPrice stuck on their pending state.)\r\n[![enter image description here][1]][1]\r\n\r\nI have fix this situation by cleaning my `chaindata` on `peer-A`, which also cleans all pending transactions: `rm -rf private/geth`, and later I send my transactions with larger `gasPrice`. I assume this was a very inefficient solution for networks has a large chain.\r\n\r\nSo all sent transactions are provided as FIFO queue? Why not they selected based on which has the highest `gasPrice`? \r\n\r\nPlease note that I have tried: \r\n\r\n    eth.resend(eth.pendingTransactions[0], web3.toWei(1000, 'gwei'))\r\n\r\nbut faced with following error:\r\n\r\n `Error: intrinsic gas too low` or `Error: replacement transaction underpriced error.`\r\n\r\n**[Q]** How could I solve this problem, how could I remove the pending transaction on the system which has a low gasPrice or reject them or update their `gasPrice` value and `resend()` them? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JHptu.png",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371441999",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16284#issuecomment-371441999",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284",
    "id": 371441999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTQ0MTk5OQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T10:09:30Z",
    "updated_at": "2018-03-08T10:09:30Z",
    "author_association": "MEMBER",
    "body": "Every account and transaction in Ethereum has a nonce. At any given time, only the transaction with the correct nonce can be executed. If you submit a transaction with a low gas price, that will block all subsequent transactions since they are not executable nonce wise, only the next nonce is executable.\r\n\r\nYou don't need to clear your chain data folder, pending transactions are not stored there. There's a `transactions.rlp` file which saves the local transactions. However, that's also unneeded, you could just resubmit the same transaction with a higher gas price. Not sure why that doesn't work for you though, I'll try to repro it on Rinkeby.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371441999/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371446502",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16284#issuecomment-371446502",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284",
    "id": 371446502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTQ0NjUwMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T10:26:35Z",
    "updated_at": "2018-03-08T10:26:35Z",
    "author_association": "MEMBER",
    "body": "Ok, found the issue.\r\n\r\n`eth.resend` takes 3 parameters\r\n\r\n * The transaction to resend\r\n * The new gas price \r\n * The new gas limit\r\n\r\nNormally the gas limit is optional, however a refactor long ago broke it, so if it was not specified, resend tried to set it to 0, causing the intrinsic gas too low. You can solve it currently by explicitly specifying the gas limit too. I'll open a fix that makes it optional again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371446502/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371448959",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16284#issuecomment-371448959",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284",
    "id": 371448959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTQ0ODk1OQ==",
    "user": {
      "login": "avatar-lavventura",
      "id": 18537398,
      "node_id": "MDQ6VXNlcjE4NTM3Mzk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18537398?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avatar-lavventura",
      "html_url": "https://github.com/avatar-lavventura",
      "followers_url": "https://api.github.com/users/avatar-lavventura/followers",
      "following_url": "https://api.github.com/users/avatar-lavventura/following{/other_user}",
      "gists_url": "https://api.github.com/users/avatar-lavventura/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avatar-lavventura/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avatar-lavventura/subscriptions",
      "organizations_url": "https://api.github.com/users/avatar-lavventura/orgs",
      "repos_url": "https://api.github.com/users/avatar-lavventura/repos",
      "events_url": "https://api.github.com/users/avatar-lavventura/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avatar-lavventura/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T10:36:08Z",
    "updated_at": "2018-03-08T10:54:18Z",
    "author_association": "NONE",
    "body": "Thanks @karalabe . Adding gasLimit parameter solved it, example:\r\n`eth.resend(eth.pendingTransactions[0], web3.toWei(20, 'gwei'), 2000000)`\r\n\r\nBut after cleaning `transactions.rlp` (`rm ~/examplePOA/private/geth/transactions.rlp`), I still see the pending transactions.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371448959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371450865",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16284#issuecomment-371450865",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16284",
    "id": 371450865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTQ1MDg2NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-08T10:43:40Z",
    "updated_at": "2018-03-08T10:43:40Z",
    "author_association": "MEMBER",
    "body": "The transactions.rlp is only updated every hour + node start/shutdown. You'd need to stop your node, delete that file and restart.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/371450865/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

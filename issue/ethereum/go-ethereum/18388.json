{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18388",
  "id": 395578826,
  "node_id": "MDU6SXNzdWUzOTU1Nzg4MjY=",
  "number": 18388,
  "title": "panic: runtime error: invalid memory address or nil pointer dereference",
  "user": {
    "login": "FilipRy",
    "id": 22730510,
    "node_id": "MDQ6VXNlcjIyNzMwNTEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/22730510?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/FilipRy",
    "html_url": "https://github.com/FilipRy",
    "followers_url": "https://api.github.com/users/FilipRy/followers",
    "following_url": "https://api.github.com/users/FilipRy/following{/other_user}",
    "gists_url": "https://api.github.com/users/FilipRy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/FilipRy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/FilipRy/subscriptions",
    "organizations_url": "https://api.github.com/users/FilipRy/orgs",
    "repos_url": "https://api.github.com/users/FilipRy/repos",
    "events_url": "https://api.github.com/users/FilipRy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/FilipRy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2019-01-03T13:47:56Z",
  "updated_at": "2019-02-07T08:31:12Z",
  "closed_at": "2019-02-07T08:31:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there,\r\n\r\nI have a topology consisting of 48 docker containers. Each container runs its own geth node. (The docker containers are build from my custom docker image -> see below). Each geth node is a miner. After I create many transactions and ca 1500 blocks are generated. One geth node reports the runtime error mentioned below.\r\n\r\nMy dockerfile:\r\n```\r\nFROM ethereum/client-go:v1.8.20\r\nCOPY eth_common /eth_common\r\n\r\nRUN geth --rpc --rpcaddr 0.0.0.0 --rpcport 8545 --datadir /data --syncmode \"fast\" --cache \"1024\" --rpcapi=\"db,eth,net,web3,personal,web3\" --txpool.pricelimit \"0\" --miner.gasprice \"0\" --maxpeers \"80\" --nodiscover init eth_common/genesis.json\r\n\r\nENTRYPOINT [\"geth\"]\r\n```\r\n\r\nGenesis.json:\r\n```\r\n{\r\n    \"config\": {\r\n        \"chainId\": 33,\r\n        \"homesteadBlock\": 0,\r\n        \"eip155Block\": 0,\r\n        \"eip158Block\": 0\r\n    },\r\n    \"nonce\": \"0x0000000000000033\",\r\n    \"timestamp\": \"0x0\",\r\n    \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"gasLimit\": \"0x8000000\",\r\n    \"difficulty\": \"0x100\",\r\n    \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"coinbase\": \"0x3333333333333333333333333333333333333333\",\r\n    \"alloc\": { }\r\n}\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n1. Build the docker image\r\n2. Run geth in 48 dockers: `docker run -it -d -p ${enodePortNr}:30303 --network=\"eth\" --name ${client.name}_bc --net-alias=${client.name}_bc mygeth --rpc --rpcaddr 0.0.0.0 --rpcport 8545 --datadir /data --syncmode \"fast\" --cache \"1024\" --rpcapi=\"db,eth,net,web3,personal,web3\" --txpool.pricelimit \"0\" --miner.gasprice \"0\" --maxpeers \"80\" --nodiscover --verbosity 4'`\r\n3. Create personal accounts\r\n4. Start miners\r\n5. One geth node reports error.\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO [01-03|12:30:47.040] Commit new mining work                   number=1502 sealhash=4cad4d…5af5ef uncles=0 txs=11  gas=298540  fees=0           elapsed=19.790ms\r\nDEBUG[01-03|12:30:47.236] Executing EVM call finished              runtime=1.629426ms\r\nDEBUG[01-03|12:30:47.534] Fetching batch of headers                id=bf3d4dc0f09e0c8d conn=inbound count=192 fromnum=1502 skip=0   reverse=false\r\nDEBUG[01-03|12:30:48.645] Queued propagated block                  peer=bf3d4dc0f09e0c8d number=1505 hash=1d499f…43a93b queued=1\r\nDEBUG[01-03|12:30:48.646] Fetching single header                   id=bf3d4dc0f09e0c8d conn=inbound hash=110c16…a7ac37\r\nDEBUG[01-03|12:30:48.647] Fetching batch of headers                id=bf3d4dc0f09e0c8d conn=inbound count=192 fromnum=1506 skip=0   reverse=false\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x51736e]\r\n\r\ngoroutine 61284 [running]:\r\nmath/big.(*Int).Cmp(0xc018ba8fa0, 0x0, 0xb93457648fe46786)\r\n\t/usr/local/go/src/math/big/int.go:319 +0x2e\r\ngithub.com/ethereum/go-ethereum/core.(*BlockChain).insertSidechain(0xc0053ae000, 0xc0149e3530, 0xc0000c75c0, 0xc0000c7501, 0x1, 0x1, 0xc018b9dcd0, 0x1, 0x1, 0xc00592ed80, ...)\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/blockchain.go:1333 +0x10b2\r\ngithub.com/ethereum/go-ethereum/core.(*BlockChain).insertChain(0xc0053ae000, 0xc006ff46b8, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/blockchain.go:1139 +0x2e15\r\ngithub.com/ethereum/go-ethereum/core.(*BlockChain).InsertChain(0xc0053ae000, 0xc006ff46b8, 0x1, 0x1, 0x8, 0x8, 0xe03500)\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/core/blockchain.go:1088 +0xb89\r\ngithub.com/ethereum/go-ethereum/eth.NewProtocolManager.func6(0xc006ff46b8, 0x1, 0x1, 0x1e92401, 0xc015369830, 0xf072b3d137b959f8)\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/eth/handler.go:183 +0x30b\r\ngithub.com/ethereum/go-ethereum/eth/fetcher.(*Fetcher).insert.func1(0xc00028c000, 0x30d0f2620337c97e, 0xe9ad3862cafae1bd, 0xf072b3d137b959f8, 0xfa219c028ac451b, 0xc01f574510, 0xc023e581a0, 0x10)\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/eth/fetcher/fetcher.go:669 +0x53d\r\ncreated by github.com/ethereum/go-ethereum/eth/fetcher.(*Fetcher).insert\r\n\t/go-ethereum/build/_workspace/src/github.com/ethereum/go-ethereum/eth/fetcher/fetcher.go:643 +0x2ad\r\n````\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/453517425",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-453517425",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 453517425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzUxNzQyNQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-11T13:32:22Z",
    "updated_at": "2019-01-11T13:32:22Z",
    "author_association": "MEMBER",
    "body": "Could you try out https://github.com/ethereum/go-ethereum/pull/18436 if it fixes your issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/453517425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460315499",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460315499",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460315499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDMxNTQ5OQ==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T16:32:09Z",
    "updated_at": "2019-02-04T16:32:09Z",
    "author_association": "NONE",
    "body": "Hi. I also get this error. Here's my launch line.\r\n`geth --rpc --rpcaddr \"0.0.0.0\" --rpcport 8545 --rpccorsdomain \"*\" --rpcapi \"db,eth,net,web3,personal\" --cache 8192 --syncmode \"full\"\r\n`\r\nHere are the messages on the screen.\r\n\r\n`INFO [02-04|19:08:30.845] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [02-04|19:08:31.000] Starting peer-to-peer node               instance=Geth/v1.8.22-stable-7fa3509e/linux-amd64/go1.11.5\r\nINFO [02-04|19:08:31.001] Allocated cache and file handles         database=/home/t/tihonov9/.ethereum/geth/chaindata cache=4096 handles=519999\r\nINFO [02-04|19:08:35.030] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000  ConstantinopleFix: 7280000 Engine: ethash}\"\r\nINFO [02-04|19:08:35.030] Disk storage enabled for ethash caches   dir=/home/t/tihonov9/.ethereum/geth/ethash count=3\r\nINFO [02-04|19:08:35.030] Disk storage enabled for ethash DAGs     dir=/home/t/tihonov9/.ethash               count=2\r\nINFO [02-04|19:08:35.030] Initialising Ethereum protocol           versions=\"[63 62]\" network=1\r\nWARN [02-04|19:08:35.205] Head state missing, repairing chain      number=7155110 hash=7e38bc…30b877\r\nINFO [02-04|19:08:35.908] Rewound blockchain to past state         number=7154010 hash=00b374…5490bf\r\nINFO [02-04|19:08:35.909] Loaded most recent local header          number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=3d9h56m\r\nINFO [02-04|19:08:35.909] Loaded most recent local full block      number=7154010 hash=00b374…5490bf td=8955533262045259057180 age=4d2h21m\r\nINFO [02-04|19:08:35.909] Loaded most recent local fast block      number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=3d9h56m\r\nINFO [02-04|19:08:35.909] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [02-04|19:08:35.909] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [02-04|19:08:35.921] New local node record                    seq=3 id=d206b65a2f6abdc3 ip=127.0.0.1 udp=30303 tcp=30303\r\nINFO [02-04|19:08:35.921] Started P2P networking                   self=enode://2d25bbceafeb32652614f6e1f68a4f06aeed16db793db304fb0d0490e965d6c46822940b8411a23ae48da8b87c10702481b7d2151e26866fa153e61fe52f12d1@127.0.0.1:30303\r\nINFO [02-04|19:08:35.922] IPC endpoint opened                      url=/home/t/tihonov9/.ethereum/geth.ipc\r\nINFO [02-04|19:08:35.922] HTTP endpoint opened                     url=http://0.0.0.0:8545                 cors=* vhosts=localhost\r\nWARN [02-04|19:08:37.032] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:38.120] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:39.139] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:40.226] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:41.250] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:42.281] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:43.312] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:44.452] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:45.486] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:46.514] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:47.537] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:48.562] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:49.607] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:50.630] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:51.660] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:52.695] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nINFO [02-04|19:08:53.453] New local node record                    seq=4 id=d206b65a2f6abdc3 ip=5.101.156.182 udp=30303 tcp=30303\r\nWARN [02-04|19:08:53.724] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:54.753] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:55.779] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:56.817] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:57.868] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:58.894] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:59.943] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:00.840] Failed account unlock attempt            address=0xcCc1Bb3A253DC91b9585787f70f80bEEA078CFA5 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:00.979] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:02.048] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:03.195] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:04.253] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:04.983] Failed account unlock attempt            address=0xF736d28db97648F1C5aB329E44b4b71f5395F74c err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:09:05.284] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nINFO [02-04|19:09:05.921] Block synchronisation started\r\nWARN [02-04|19:09:06.309] Failed account unlock attempt            address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xa67753]\r\n\r\ngoroutine 11159 [running]:\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc094f66340, 0xc08ceda4b0, 0xc094452b40, 0x0, 0x0, 0xc000046f70)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:825 +0x15d3\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc094f66340, 0xc08ceda4b0, 0xf09afdf02b0baecb, 0x6c05906dccece85f, 0xc54f87c504a14fb0, 0xdb999058d1e11d3b, 0xc0481b9e00, 0x0, 0x0)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:437 +0x37d\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc094f66340, 0xc095793100, 0x10, 0xf09afdf02b0baecb, 0x6c05906dccece85f, 0xc54f87c504a14fb0, 0xdb999058d1e11d3b, 0xc0481b9e00, 0x0, 0x0, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:406 +0x362\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc094f66340, 0xc095793100, 0x10, 0xf09afdf02b0baecb, 0x6c05906dccece85f, 0xc54f87c504a14fb0, 0xdb999058d1e11d3b, 0xc0481b9e00, 0x0, 0x46f3b0, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:324 +0x91\r\ngithub.com/ethereum/go-ethereum/eth.(*ProtocolManager).synchronise(0xc045bc3790, 0xc047b70000)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:200 +0x313\r\ncreated by github.com/ethereum/go-ethereum/eth.(*ProtocolManager).syncer\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:155 +0x1df\r\n`\r\n(Sorry, I can't insert the log beautifully.)\r\n\r\nThis problem started from 2019-01-31",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460315499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460317175",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460317175",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460317175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDMxNzE3NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T16:36:27Z",
    "updated_at": "2019-02-04T16:36:27Z",
    "author_association": "MEMBER",
    "body": "@Lvovich2018 Before even diving into this crash, please immediately close your node's RPC port from the internet. Your logs are full of failed unlock attempts, pointing to someone remotely trying to brute force your password:\r\n\r\n```\r\nWARN [02-04|19:08:37.032] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:38.120] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:39.139] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:40.226] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:41.250] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:42.281] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:43.312] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:44.452] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:45.486] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:46.514] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:47.537] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:48.562] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:49.607] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:50.630] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:51.660] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\nWARN [02-04|19:08:52.695] Failed account unlock attempt address=0x93324FC20077F03B0112720020E300a10da33D51 err=\"could not decrypt key with given passphrase\"\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460317175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460321526",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460321526",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460321526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDMyMTUyNg==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T16:47:54Z",
    "updated_at": "2019-02-04T16:47:54Z",
    "author_association": "NONE",
    "body": "OK, closed. But the error remained.\r\n\r\n`INFO [02-04|19:44:34.464] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [02-04|19:44:34.618] Starting peer-to-peer node               instance=Geth/v1.8.22-stable-7fa3509e/linux-amd64/go1.11.5\r\nINFO [02-04|19:44:34.618] Allocated cache and file handles         database=/home/t/tihonov9/.ethereum/geth/chaindata cache=4096 handles=519999\r\nINFO [02-04|19:44:37.575] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000  ConstantinopleFix: 7280000 Engine: ethash}\"\r\nINFO [02-04|19:44:37.575] Disk storage enabled for ethash caches   dir=/home/t/tihonov9/.ethereum/geth/ethash count=3\r\nINFO [02-04|19:44:37.575] Disk storage enabled for ethash DAGs     dir=/home/t/tihonov9/.ethash               count=2\r\nINFO [02-04|19:44:37.575] Initialising Ethereum protocol           versions=\"[63 62]\" network=1\r\nWARN [02-04|19:44:38.011] Head state missing, repairing chain      number=7155110 hash=7e38bc…30b877\r\nINFO [02-04|19:44:38.745] Rewound blockchain to past state         number=7154010 hash=00b374…5490bf\r\nINFO [02-04|19:44:38.746] Loaded most recent local header          number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=3d10h32m\r\nINFO [02-04|19:44:38.746] Loaded most recent local full block      number=7154010 hash=00b374…5490bf td=8955533262045259057180 age=4d2h57m\r\nINFO [02-04|19:44:38.746] Loaded most recent local fast block      number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=3d10h32m\r\nINFO [02-04|19:44:38.746] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [02-04|19:44:38.746] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [02-04|19:44:38.758] New local node record                    seq=5 id=d206b65a2f6abdc3 ip=127.0.0.1 udp=30303 tcp=30303\r\nINFO [02-04|19:44:38.758] Started P2P networking                   self=enode://2d25bbceafeb32652614f6e1f68a4f06aeed16db793db304fb0d0490e965d6c46822940b8411a23ae48da8b87c10702481b7d2151e26866fa153e61fe52f12d1@127.0.0.1:30303\r\nINFO [02-04|19:44:38.760] IPC endpoint opened                      url=/home/t/tihonov9/.ethereum/geth.ipc\r\nINFO [02-04|19:44:38.760] HTTP endpoint opened                     url=http://127.0.0.1:8545               cors=* vhosts=localhost\r\nINFO [02-04|19:44:53.703] New local node record                    seq=6 id=d206b65a2f6abdc3 ip=5.101.156.182 udp=30303 tcp=30303\r\nINFO [02-04|19:44:58.758] Block synchronisation started\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xa67753]\r\n\r\ngoroutine 305 [running]:\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc000225520, 0xc08d499b30, 0xc08dd9e480, 0x0, 0x0, 0xc00003e070)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:825 +0x15d3\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc000225520, 0xc08d499b30, 0x9febcc36adda7512, 0x7be5f5b0e9821a04, 0xc9d350efa308c3cf, 0xe7a145033620a59, 0xc08f174ea0, 0x0, 0x0)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:437 +0x37d\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc000225520, 0xc08e6e8e30, 0x10, 0x9febcc36adda7512, 0x7be5f5b0e9821a04, 0xc9d350efa308c3cf, 0xe7a145033620a59, 0xc08f174ea0, 0x0, 0x0, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:406 +0x362\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc000225520, 0xc08e6e8e30, 0x10, 0x9febcc36adda7512, 0x7be5f5b0e9821a04, 0xc9d350efa308c3cf, 0xe7a145033620a59, 0xc08f174ea0, 0x0, 0xc0007c6f30, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:324 +0x91\r\ngithub.com/ethereum/go-ethereum/eth.(*ProtocolManager).synchronise(0xc0483981a0, 0xc0901660c0)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:200 +0x313\r\ncreated by github.com/ethereum/go-ethereum/eth.(*ProtocolManager).syncer\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:155 +0x1df\r\n`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460321526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460350287",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460350287",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460350287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDM1MDI4Nw==",
    "user": {
      "login": "fedecaccia",
      "id": 17413112,
      "node_id": "MDQ6VXNlcjE3NDEzMTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/17413112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedecaccia",
      "html_url": "https://github.com/fedecaccia",
      "followers_url": "https://api.github.com/users/fedecaccia/followers",
      "following_url": "https://api.github.com/users/fedecaccia/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedecaccia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedecaccia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedecaccia/subscriptions",
      "organizations_url": "https://api.github.com/users/fedecaccia/orgs",
      "repos_url": "https://api.github.com/users/fedecaccia/repos",
      "events_url": "https://api.github.com/users/fedecaccia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedecaccia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T18:06:05Z",
    "updated_at": "2019-02-04T18:06:05Z",
    "author_association": "NONE",
    "body": "I have the same error trying to re-synchronize a node. Only works deleting database and downloading it all again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460350287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460372918",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460372918",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460372918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDM3MjkxOA==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T19:11:01Z",
    "updated_at": "2019-02-04T19:11:01Z",
    "author_association": "NONE",
    "body": "> I have the same error trying to re-synchronize a node. Only works deleting database and downloading it all again.\r\n\r\nThank you for your advice. Unfortunately, I can't do that. And there is no guarantee that it will help.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460372918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460526554",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460526554",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460526554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDUyNjU1NA==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T06:19:27Z",
    "updated_at": "2019-02-05T06:19:27Z",
    "author_association": "NONE",
    "body": "Any recommendations on my problem?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460526554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460527200",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460527200",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460527200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDUyNzIwMA==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T06:23:07Z",
    "updated_at": "2019-02-05T06:23:07Z",
    "author_association": "NONE",
    "body": "`geth --rpc --rpcport 8545 --rpccorsdomain \"*\" --rpcapi \"db,eth,net,web3,personal\" --cache 8192 --syncmode \"full\"\r\n`\r\nand I get the same result:\r\n\r\n`INFO [02-05|09:19:50.099] Maximum peer count                       ETH=25 LES=0 total=25\r\nINFO [02-05|09:19:50.255] Starting peer-to-peer node               instance=Geth/v1.8.22-stable-7fa3509e/linux-amd64/go1.11.5\r\nINFO [02-05|09:19:50.255] Allocated cache and file handles         database=/home/t/tihonov9/.ethereum/geth/chaindata cache=4096 handles=519999\r\nINFO [02-05|09:19:54.226] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000  ConstantinopleFix: 7280000 Engine: ethash}\"\r\nINFO [02-05|09:19:54.226] Disk storage enabled for ethash caches   dir=/home/t/tihonov9/.ethereum/geth/ethash count=3\r\nINFO [02-05|09:19:54.226] Disk storage enabled for ethash DAGs     dir=/home/t/tihonov9/.ethash               count=2\r\nINFO [02-05|09:19:54.226] Initialising Ethereum protocol           versions=\"[63 62]\" network=1\r\nWARN [02-05|09:19:54.393] Head state missing, repairing chain      number=7155110 hash=7e38bc…30b877\r\nINFO [02-05|09:19:55.106] Rewound blockchain to past state         number=7154010 hash=00b374…5490bf\r\nINFO [02-05|09:19:55.107] Loaded most recent local header          number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=4d7m53s\r\nINFO [02-05|09:19:55.107] Loaded most recent local full block      number=7154010 hash=00b374…5490bf td=8955533262045259057180 age=4d16h32m\r\nINFO [02-05|09:19:55.107] Loaded most recent local fast block      number=7157401 hash=f797d4…32c8cd td=8963951431232627924909 age=4d7m53s\r\nINFO [02-05|09:19:55.107] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [02-05|09:19:55.107] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [02-05|09:19:55.130] New local node record                    seq=7 id=d206b65a2f6abdc3 ip=127.0.0.1 udp=30303 tcp=30303\r\nINFO [02-05|09:19:55.130] Started P2P networking                   self=enode://2d25bbceafeb32652614f6e1f68a4f06aeed16db793db304fb0d0490e965d6c46822940b8411a23ae48da8b87c10702481b7d2151e26866fa153e61fe52f12d1@127.0.0.1:30303\r\nINFO [02-05|09:19:55.131] IPC endpoint opened                      url=/home/t/tihonov9/.ethereum/geth.ipc\r\nINFO [02-05|09:19:55.131] HTTP endpoint opened                     url=http://127.0.0.1:8545               cors=* vhosts=localhost\r\nINFO [02-05|09:20:14.233] New local node record                    seq=8 id=d206b65a2f6abdc3 ip=5.101.156.182 udp=30303 tcp=30303\r\nINFO [02-05|09:20:25.130] Block synchronisation started\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xa67753]\r\n\r\ngoroutine 508 [running]:\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).findAncestor(0xc08ff7f520, 0xc08f7b2a50, 0xc0944b4240, 0x0, 0x0, 0xc00004e570)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:825 +0x15d3\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer(0xc08ff7f520, 0xc08f7b2a50, 0x2217595fecd5ce2b, 0x663214e84ed49888, 0xe654fec1f09cbe0f, 0xff77193375451257, 0xc0451e3380, 0x0, 0x0)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:437 +0x37d\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).synchronise(0xc08ff7f520, 0xc08b502720, 0x10, 0x2217595fecd5ce2b, 0x663214e84ed49888, 0xe654fec1f09cbe0f, 0xff77193375451257, 0xc0451e3380, 0x0, 0x0, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:406 +0x362\r\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).Synchronise(0xc08ff7f520, 0xc08b502720, 0x10, 0x2217595fecd5ce2b, 0x663214e84ed49888, 0xe654fec1f09cbe0f, 0xff77193375451257, 0xc0451e3380, 0x0, 0x41aac5, ...)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/downloader/downloader.go:324 +0x91\r\ngithub.com/ethereum/go-ethereum/eth.(*ProtocolManager).synchronise(0xc097ad3520, 0xc0458ce6c0)\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:200 +0x313\r\ncreated by github.com/ethereum/go-ethereum/eth.(*ProtocolManager).syncer\r\n        /home/travis/gopath/src/github.com/ethereum/go-ethereum/eth/sync.go:155 +0x1df\r\n`\r\n\r\nWhat am I to do?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460527200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460566250",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460566250",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460566250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDU2NjI1MA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T09:20:56Z",
    "updated_at": "2019-02-05T09:20:56Z",
    "author_association": "MEMBER",
    "body": "The original report has been fixed. The report by @Lvovich2018 is not fixed, and is a bit odd. \r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/release/1.8/eth/downloader/downloader.go#L824\r\n\r\n```golang\r\n\t\t\t\tvar known bool\r\n\t\t\t\tswitch d.mode {\r\n\t\t\t\tcase FullSync:\r\n\t\t\t\t\tknown = d.blockchain.HasBlock(h, n)\r\n\t\t\t\tcase FastSync:\r\n\t\t\t\t\tknown = d.blockchain.HasFastBlock(h, n)\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tknown = d.lightchain.HasHeader(h, n)\r\n\t\t\t\t}\r\n\t\t\t\tif !known {\r\n\t\t\t\t\tend = check\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\theader := d.lightchain.GetHeaderByHash(h) // Independent of sync mode, header surely exists\r\n```\r\nIt fails at the last line. @karalabe what's the reasoning behind that comment -- the chain is started in fullsync mode, it seems that the assumption that the lightchain has the header hash is not true. Could it be that the lightchain only has the canon blocks? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460566250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460971922",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460971922",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460971922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDk3MTkyMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-06T10:22:35Z",
    "updated_at": "2019-02-06T10:23:29Z",
    "author_association": "MEMBER",
    "body": "The odd thing in this code segment is that `d.blockchain.HasFastBlock(h, n)` returns true, which means that the header + block body + receipt exists and is retrievable. If `d.lightchain.GetHeaderByHash(h)` returns nil, the only fault that could cause it is if the `hash->number` mapping is missing from the database (`HasFastBlock` is provided the number too, so it doesn't need to access the `hash->number` mapping, rather can pull the data directly).\r\n\r\nWe need to figure out what could have caused the fast sync head block to be present in the database, but it's number mapping to be missing. Not sure yet.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460971922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460974463",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460974463",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460974463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDk3NDQ2Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-06T10:31:03Z",
    "updated_at": "2019-02-06T10:31:03Z",
    "author_association": "MEMBER",
    "body": "Looking at our data access methods, it's again a bit weird:\r\n\r\n```go\r\n// WriteHeader stores a block header into the database and also stores the hash-\r\n// to-number mapping.\r\nfunc WriteHeader(db DatabaseWriter, header *types.Header) {\r\n\t// Write the hash -> number mapping\r\n\tvar (\r\n\t\thash    = header.Hash()\r\n\t\tnumber  = header.Number.Uint64()\r\n\t\tencoded = encodeBlockNumber(number)\r\n\t)\r\n\tkey := headerNumberKey(hash)\r\n\tif err := db.Put(key, encoded); err != nil {\r\n\t\tlog.Crit(\"Failed to store hash to number mapping\", \"err\", err)\r\n\t}\r\n\t// Write the encoded header\r\n\tdata, err := rlp.EncodeToBytes(header)\r\n\tif err != nil {\r\n\t\tlog.Crit(\"Failed to RLP encode header\", \"err\", err)\r\n\t}\r\n\tkey = headerKey(number, hash)\r\n\tif err := db.Put(key, data); err != nil {\r\n\t\tlog.Crit(\"Failed to store header\", \"err\", err)\r\n\t}\r\n}\r\n\r\n// DeleteHeader removes all block header data associated with a hash.\r\nfunc DeleteHeader(db DatabaseDeleter, hash common.Hash, number uint64) {\r\n\tif err := db.Delete(headerKey(number, hash)); err != nil {\r\n\t\tlog.Crit(\"Failed to delete header\", \"err\", err)\r\n\t}\r\n\tif err := db.Delete(headerNumberKey(hash)); err != nil {\r\n\t\tlog.Crit(\"Failed to delete hash to number mapping\", \"err\", err)\r\n\t}\r\n}\r\n```\r\n\r\nI.e. We first write the `hash->number` mapping, and only then the header. Upon deletion, we first delete the header, and only then the `hash->number` mapping. Based on this, it should be impossible to have the header present, but the `hash->number` mapping missing.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460974463/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460977268",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460977268",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460977268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDk3NzI2OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-06T10:40:41Z",
    "updated_at": "2019-02-06T10:40:41Z",
    "author_association": "MEMBER",
    "body": "@Lvovich2018 Could you please run with `--vmodule=downloader=5` and paste the logs here? Would be nice to see exactly which blocks the downloader is attempting to process when it blows.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460977268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460982322",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-460982322",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 460982322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDk4MjMyMg==",
    "user": {
      "login": "Lvovich2018",
      "id": 47329053,
      "node_id": "MDQ6VXNlcjQ3MzI5MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47329053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lvovich2018",
      "html_url": "https://github.com/Lvovich2018",
      "followers_url": "https://api.github.com/users/Lvovich2018/followers",
      "following_url": "https://api.github.com/users/Lvovich2018/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lvovich2018/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lvovich2018/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lvovich2018/subscriptions",
      "organizations_url": "https://api.github.com/users/Lvovich2018/orgs",
      "repos_url": "https://api.github.com/users/Lvovich2018/repos",
      "events_url": "https://api.github.com/users/Lvovich2018/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lvovich2018/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-06T10:58:21Z",
    "updated_at": "2019-02-06T10:58:21Z",
    "author_association": "NONE",
    "body": "> @Lvovich2018 Could you please run with `--vmodule=downloader=5` and paste the logs here? Would be nice to see exactly which blocks the downloader is attempting to process when it blows.\r\n\r\n@karalabe, sorry, I can't do that right now. I only found a solution to my problem an hour ago. Helped downgrade geth on 1.8.19. Now the blocks are synchronizing, I can't stop the process. If on new versions this problem appears, I will surely insert logging. Thanks for your help.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/460982322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/461328448",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18388#issuecomment-461328448",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18388",
    "id": 461328448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTMyODQ0OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T08:31:12Z",
    "updated_at": "2019-02-07T08:31:12Z",
    "author_association": "MEMBER",
    "body": "Since original report is fixed, let's move over to https://github.com/ethereum/go-ethereum/issues/18994 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/461328448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21583",
  "id": 704843258,
  "node_id": "MDU6SXNzdWU3MDQ4NDMyNTg=",
  "number": 21583,
  "title": "Panic on invalid memory address or nil pointer dereference",
  "user": {
    "login": "yelsukov",
    "id": 6008238,
    "node_id": "MDQ6VXNlcjYwMDgyMzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6008238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yelsukov",
    "html_url": "https://github.com/yelsukov",
    "followers_url": "https://api.github.com/users/yelsukov/followers",
    "following_url": "https://api.github.com/users/yelsukov/following{/other_user}",
    "gists_url": "https://api.github.com/users/yelsukov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yelsukov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yelsukov/subscriptions",
    "organizations_url": "https://api.github.com/users/yelsukov/orgs",
    "repos_url": "https://api.github.com/users/yelsukov/repos",
    "events_url": "https://api.github.com/users/yelsukov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yelsukov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 841716348,
      "node_id": "MDU6TGFiZWw4NDE3MTYzNDg=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/area:les",
      "name": "area:les",
      "color": "c2e0c6",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-09-19T08:56:54Z",
  "updated_at": "2020-09-28T05:53:51Z",
  "closed_at": "2020-09-28T05:53:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `v1.9.21`\r\nOS & Version: `Ubuntu 16`\r\n\r\n#### Expected behaviour\r\nKeep calm and do not panic...\r\n\r\n#### Actual behaviour\r\n panic: runtime error: invalid memory address or nil pointer dereference\r\n\r\n#### Steps to reproduce the behaviour\r\nRun the geth v.1.9.21 client in light mode and give it a time to find peers.\r\n\r\nMy docker-compose.yml:\r\n```\r\nversion: '2'\r\n\r\nservices:\r\n  geth:\r\n    image: ethereum/client-go:v1.9.21\r\n    restart: on-failure\r\n    container_name: \"geth_client\"\r\n    command: '--syncmode \"light\" --datadir \"/var/data\" --ws --wsaddr \"0.0.0.0\" --wsorigins \"*\" --rpc --rpcaddr \"0.0.0.0\" --rpcvhosts \"*\" --cache 256 --nousb --verbosity 3 --maxpeers=20'\r\n    volumes:\r\n      - /var/data/ethereum:/var/data\r\n    logging:\r\n      driver: syslog\r\n    ports:\r\n      - 8545:8545\r\n      - 8546:8546\r\n      - 30303:30303\r\n      - 30303:30303/udp\r\n\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\nSep 19 12:57:43: INFO [09-19|05:57:43.138] Looking for peers                        peercount=0 tried=12 static=0\r\nSep 19 12:57:53: INFO [09-19|05:57:53.141] Looking for peers                        peercount=0 tried=6  static=0\r\nSep 19 12:58:03: INFO [09-19|05:58:03.947] Looking for peers                        peercount=1 tried=6  static=0\r\nSep 19 12:58:14: INFO [09-19|05:58:14.138] Looking for peers                        peercount=1 tried=15 static=0\r\nSep 19 12:58:24: INFO [09-19|05:58:24.143] Looking for peers                        peercount=1 tried=13 static=0\r\nSep 19 12:58:34: INFO [09-19|05:58:34.145] Looking for peers                        peercount=1 tried=15 static=0\r\nSep 19 12:58:44: INFO [09-19|05:58:44.147] Looking for peers                        peercount=1 tried=13 static=0\r\nSep 19 12:58:54: INFO [09-19|05:58:54.149] Looking for peers                        peercount=1 tried=6  static=0\r\nSep 19 12:59:02: INFO [09-19|05:59:02.946] Imported new block headers               count=192 elapsed=233.407ms number=10888958 hash=\"31a202â€¦e7bae2\" age=7h9m38s\r\nSep 19 12:59:02: panic: runtime error: invalid memory address or nil pointer dereference\r\nSep 19 12:59:02: [signal SIGSEGV: segmentation violation code=0x1 addr=0x1c0 pc=0xd49f50]\r\nSep 19 12:59:02: \r\nSep 19 12:59:02: goroutine 78 [running]:\r\nSep 19 12:59:02: github.com/ethereum/go-ethereum/eth/filters.(*EventSystem).lightFilterNewHead(0xc000145970, 0xc002e7c6c0, 0xc00d26db18)\r\nSep 19 12:59:02: \tgithub.com/ethereum/go-ethereum/eth/filters/filter_system.go:383 +0x250\r\nSep 19 12:59:02: github.com/ethereum/go-ethereum/eth/filters.(*EventSystem).handleChainEvent(0xc000145970, 0xc00d26dcf8, 0xc001084510, 0xaa4e70eeb06ee4e, 0x71f8a741572392f0, 0xfefa25aa7a4c1c16, 0x6a0edf1a93b04bd7, 0x0, 0x0, 0x0)\r\nSep 19 12:59:02: \tgithub.com/ethereum/go-ethereum/eth/filters/filter_system.go:359 +0x1de\r\nSep 19 12:59:02: github.com/ethereum/go-ethereum/eth/filters.(*EventSystem).eventLoop(0xc000145970)\r\nSep 19 12:59:02: \tgithub.com/ethereum/go-ethereum/eth/filters/filter_system.go:469 +0x9ba\r\nSep 19 12:59:02: created by github.com/ethereum/go-ethereum/eth/filters.NewEventSystem\r\nSep 19 12:59:02: \tgithub.com/ethereum/go-ethereum/eth/filters/filter_system.go:138 +0x345\r\n````\r\n",
  "closed_by": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/697214658",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21583#issuecomment-697214658",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583",
    "id": 697214658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzIxNDY1OA==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-23T08:26:17Z",
    "updated_at": "2020-09-23T08:26:17Z",
    "author_association": "MEMBER",
    "body": "Hi @yelsukov Can you test with the latest master? (We may also prepare a new release very soon). \r\nWe had a [fix](https://github.com/ethereum/go-ethereum/commit/367f12f73495b30c17c7d358cf71575f34f79757) for light client crashes I think it can also fix this issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/697214658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/698084121",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21583#issuecomment-698084121",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583",
    "id": 698084121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODA4NDEyMQ==",
    "user": {
      "login": "yelsukov",
      "id": 6008238,
      "node_id": "MDQ6VXNlcjYwMDgyMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6008238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yelsukov",
      "html_url": "https://github.com/yelsukov",
      "followers_url": "https://api.github.com/users/yelsukov/followers",
      "following_url": "https://api.github.com/users/yelsukov/following{/other_user}",
      "gists_url": "https://api.github.com/users/yelsukov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yelsukov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yelsukov/subscriptions",
      "organizations_url": "https://api.github.com/users/yelsukov/orgs",
      "repos_url": "https://api.github.com/users/yelsukov/repos",
      "events_url": "https://api.github.com/users/yelsukov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yelsukov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-24T03:08:37Z",
    "updated_at": "2020-09-24T03:08:37Z",
    "author_association": "NONE",
    "body": "Hi @rjl493456442 \r\n\r\nDone. I will watch for a few days and report the results.\r\n\r\nThank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/698084121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699783043",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21583#issuecomment-699783043",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583",
    "id": 699783043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTc4MzA0Mw==",
    "user": {
      "login": "yelsukov",
      "id": 6008238,
      "node_id": "MDQ6VXNlcjYwMDgyMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6008238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yelsukov",
      "html_url": "https://github.com/yelsukov",
      "followers_url": "https://api.github.com/users/yelsukov/followers",
      "following_url": "https://api.github.com/users/yelsukov/following{/other_user}",
      "gists_url": "https://api.github.com/users/yelsukov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yelsukov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yelsukov/subscriptions",
      "organizations_url": "https://api.github.com/users/yelsukov/orgs",
      "repos_url": "https://api.github.com/users/yelsukov/repos",
      "events_url": "https://api.github.com/users/yelsukov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yelsukov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-28T05:41:16Z",
    "updated_at": "2020-09-28T05:41:16Z",
    "author_association": "NONE",
    "body": "Hi @rjl493456442 \r\n\r\nThe issue seems to be fixed. Light client works stably for more than 4 days without incidents\r\n\r\nThank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699783043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699787810",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21583#issuecomment-699787810",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21583",
    "id": 699787810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTc4NzgxMA==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-28T05:53:51Z",
    "updated_at": "2020-09-28T05:53:51Z",
    "author_association": "MEMBER",
    "body": "@yelsukov Cool! I'll close this issue right now. Feel free to reopen if panic happens again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/699787810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18363",
  "id": 393950300,
  "node_id": "MDU6SXNzdWUzOTM5NTAzMDA=",
  "number": 18363,
  "title": "geth attach over SSL:certificate signed by unknown authority",
  "user": {
    "login": "dylanpoe",
    "id": 15873683,
    "node_id": "MDQ6VXNlcjE1ODczNjgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/15873683?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dylanpoe",
    "html_url": "https://github.com/dylanpoe",
    "followers_url": "https://api.github.com/users/dylanpoe/followers",
    "following_url": "https://api.github.com/users/dylanpoe/following{/other_user}",
    "gists_url": "https://api.github.com/users/dylanpoe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dylanpoe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dylanpoe/subscriptions",
    "organizations_url": "https://api.github.com/users/dylanpoe/orgs",
    "repos_url": "https://api.github.com/users/dylanpoe/repos",
    "events_url": "https://api.github.com/users/dylanpoe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dylanpoe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-12-25T02:40:41Z",
  "updated_at": "2019-06-19T19:13:54Z",
  "closed_at": "2019-06-19T19:13:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,I configured a nginx proxy for one of my wss ,here is my nginx \r\n```\r\n    upstream websocket {\r\n\t#ip_hash;\r\n\tserver 127.0.0.1:443;  \r\n       }\r\n    server {\r\n        listen       443 ssl http2 default_server;\r\n        listen       [::]:443 ssl http2 default_server;\r\n       server_name  ssl.eash.io;\r\n        root         /usr/share/nginx/html;\r\n         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA;\r\n        ssl_prefer_server_ciphers on;\r\n        ssl_session_timeout 5m;\r\n        ssl_session_cache shared:SSL:50m;\t\r\n\tssl_certificate      /etc/letsencrypt/live/ssl.eash.io/cert.pem; \r\n        ssl_certificate_key /etc/letsencrypt/live/ssl.eash.io/privkey.pem;\r\n        include /etc/nginx/default.d/*.conf;\r\n        location / {\r\n \t\tproxy_set_header        Host $host;\r\n    \t\tproxy_http_version      1.1;\r\n    \t\tproxy_set_header        Upgrade $http_upgrade;\r\n   \t\tproxy_set_header        Connection \"upgrade\";\r\n    \t\tproxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\r\n    \t\tproxy_set_header        X-Real-IP $remote_addr;\r\n    \t\tproxy_set_header        X-Forwarded-Proto $scheme;\r\n    \t\tproxy_pass              https://127.0.0.1:9647;\r\n        }\r\n\r\n        error_page 404 /404.html;\r\n            location = /40x.html {\r\n        }\r\n\r\n        error_page 500 502 503 504 /50x.html;\r\n            location = /50x.html {\r\n        }\r\n    }\r\n```\r\n,and when i try to connect ssl.eash.io ,it failed \r\n```\r\n~/go-etherzero/build/bin/geth   attach https://ssl.eash.io/\r\nFatal: Failed to start the JavaScript console: api modules: Post https://ssl.eash.io/: x509: certificate signed by unknown authority\r\n```\r\n,my crt is encrypted by https://letsencrypt.org ,my geth is 1.8.17",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/503699782",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18363#issuecomment-503699782",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18363",
    "id": 503699782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzY5OTc4Mg==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-19T19:13:54Z",
    "updated_at": "2019-06-19T19:13:54Z",
    "author_association": "MEMBER",
    "body": "This is pretty interesting. Your cert has expired, \r\n```\r\n[user@work go-ethereum]$ build/bin/geth attach https://ssl.eash.io/\r\nINFO [06-19|21:11:34.051] Bumping default cache on mainnet         provided=1024 updated=4096\r\nWARN [06-19|21:11:34.051] Sanitizing cache to Go's GC limits       provided=4096 updated=2571\r\nFatal: Failed to start the JavaScript console: api modules: Post https://ssl.eash.io/: x509: certificate has expired or is not yet valid\r\n```\r\n\r\nI tried some other ones\r\n```\r\n[user@work go-ethereum]$ build/bin/geth attach https://github.com/go-ethereum\r\nINFO [06-19|21:08:06.594] Bumping default cache on mainnet         provided=1024 updated=4096\r\nWARN [06-19|21:08:06.594] Sanitizing cache to Go's GC limits       provided=4096 updated=2571\r\nFatal: Failed to start the JavaScript console: api modules: 422 Unprocessable Entity <!DOCTYPE html>\r\n<html>\r\n  <head>\r\n... the entire page\r\n```\r\n\r\n```\r\n[user@work go-ethereum]$ build/bin/geth attach https://letsencrypt.org\r\nINFO [06-19|21:10:01.524] Bumping default cache on mainnet         provided=1024 updated=4096\r\nWARN [06-19|21:10:01.524] Sanitizing cache to Go's GC limits       provided=4096 updated=2571\r\nFatal: Failed to start the JavaScript console: api modules: 403 Forbidden <HTML><HEAD>\r\n<TITLE>Access Denied</TITLE>\r\n</HEAD><BODY>\r\n<H1>Access Denied</H1>\r\n \r\nYou don't have permission to access \"http&#58;&#47;&#47;letsencrypt&#46;org&#47;\" on this server.<P>\r\nReference&#32;&#35;18&#46;4ebe7a5c&#46;1560971402&#46;5968bf20\r\n</BODY>\r\n</HTML>\r\n```\r\n\r\nIt may have been fixed. Early on, letsencrypt was maybe not supported as a CA in your setup -- and I'm not sure if that's a golang-specific CA-store, or if it uses your local OS trusted CA store or something else. \r\n\r\nI'll close this, since I can't reproduce, but feel free to reopen if you see this again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/503699782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

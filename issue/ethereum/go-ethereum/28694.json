{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28694",
  "id": 2045785256,
  "node_id": "I_kwDOAOvK98558DSo",
  "number": 28694,
  "title": "Beacon backfilling failed. Retrieved hash chain is invalid: rename",
  "user": {
    "login": "amyboose",
    "id": 93859970,
    "node_id": "U_kgDOBZgwgg",
    "avatar_url": "https://avatars.githubusercontent.com/u/93859970?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amyboose",
    "html_url": "https://github.com/amyboose",
    "followers_url": "https://api.github.com/users/amyboose/followers",
    "following_url": "https://api.github.com/users/amyboose/following{/other_user}",
    "gists_url": "https://api.github.com/users/amyboose/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amyboose/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amyboose/subscriptions",
    "organizations_url": "https://api.github.com/users/amyboose/orgs",
    "repos_url": "https://api.github.com/users/amyboose/repos",
    "events_url": "https://api.github.com/users/amyboose/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amyboose/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-12-18T05:44:41Z",
  "updated_at": "2023-12-18T05:44:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.13.5\r\nCL client & version: prysm@v4.1.1\r\nOS & Version: Windows\r\nCommit hash : none\r\n\r\n#### Actual behaviour\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI've got an error \r\nBeacon backfilling failed                err=\"retrieved hash chain is invalid: rename\r\nA reload do nothing special. It's the second time for the month I've got the error. Just full resync helped me last time\r\n\r\n#### Backtrace\r\n```\r\nWARN [12-18|08:48:15.518] Ignoring already known beacon payload    number=18,809,844 hash=2d79a6..621bb5 age=1h31m52s\r\nWARN [12-18|08:48:15.541] Ignoring already known beacon payload    number=18,809,845 hash=a92a20..65761f age=1h31m40s\r\nWARN [12-18|08:48:15.603] Ignoring already known beacon payload    number=18,809,846 hash=de30a3..33088c age=1h31m28s\r\nWARN [12-18|08:48:15.624] State not available, ignoring new payload\r\nWARN [12-18|08:48:15.647] Ignoring payload with missing parent     number=18,809,848 hash=69d30b..6ef2cb parent=d80caf..5d1426\r\nWARN [12-18|08:48:15.664] Ignoring payload with missing parent     number=18,809,849 hash=8116c7..1ab871 parent=69d30b..6ef2cb\r\nWARN [12-18|08:48:15.676] Ignoring payload with missing parent     number=18,809,850 hash=57f42b..d9f90e parent=8116c7..1ab871\r\nWARN [12-18|08:48:15.688] Ignoring payload with missing parent     number=18,809,851 hash=1ea983..b71ff8 parent=57f42b..d9f90e\r\nINFO [12-18|08:48:15.718] Forkchoice requested sync to new head    number=18,809,851 hash=1ea983..b71ff8 finalized=unknown\r\nINFO [12-18|08:48:16.769] Syncing beacon headers                   downloaded=4 left=0 eta=0s\r\nINFO [12-18|08:48:16.769] Block synchronisation started\r\nWARN [12-18|08:48:16.770] Retrieved pivot header from local        number=18,809,787 hash=234f34..93c6ba latest=18,809,851 oldest=18,809,847\r\nINFO [12-18|08:48:55.324] Looking for peers                        peercount=17 tried=34 static=0\r\nINFO [12-18|08:49:05.586] Looking for peers                        peercount=15 tried=40 static=0\r\nINFO [12-18|08:49:15.663] Looking for peers                        peercount=16 tried=33 static=0\r\nINFO [12-18|08:49:17.578] Importing sidechain segment              start=18,809,844 end=18,809,851\r\nERROR[12-18|08:49:18.838] Beacon backfilling failed                err=\"retrieved hash chain is invalid: rename D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\1992345935 D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\storage.index.cidx: Access is denied.\"\r\nINFO [12-18|08:49:25.815] Looking for peers                        peercount=14 tried=46 static=0\r\nINFO [12-18|08:49:35.853] Looking for peers                        peercount=15 tried=39 static=0\r\nWARN [12-18|08:49:41.631] State not available, ignoring new payload\r\nWARN [12-18|08:49:41.640] Ignoring payload with missing parent     number=18,809,853 hash=9f9bc7..3d0a72 parent=73a040..6bd38d\r\nWARN [12-18|08:49:41.678] Ignoring payload with missing parent     number=18,809,854 hash=799a72..c04427 parent=9f9bc7..3d0a72\r\nWARN [12-18|08:49:41.699] Ignoring payload with missing parent     number=18,809,855 hash=7a7292..ad5ed0 parent=799a72..c04427\r\n. . . ignoring some blocks here\r\nWARN [12-18|08:49:43.349] Ignoring payload with missing parent     number=18,809,914 hash=dc34e7..068dd3 parent=c1f7a0..a930dd\r\nWARN [12-18|08:49:43.379] Ignoring payload with missing parent     number=18,809,915 hash=4117db..11b612 parent=dc34e7..068dd3\r\nINFO [12-18|08:49:43.422] Forkchoice requested sync to new head    number=18,809,915 hash=4117db..11b612 finalized=18,809,852\r\nWARN [12-18|08:49:43.424] Beacon chain gapped                      head=18,809,851 newHead=18,809,915\r\nERROR[12-18|08:49:43.424] Failed to clean stale beacon headers     err=\"filled header below beacon header tail: 18809844 < 18809847\"\r\nERROR[12-18|08:49:43.700] Cleaning spurious beacon sync leftovers  stale_head_1=18,809,851 stale_tail_1=18,809,847 stale_next_1=de30a3..33088c\r\nINFO [12-18|08:49:43.702] Syncing beacon headers                   downloaded=72 left=0 eta=0s\r\nERROR[12-18|08:49:43.702] Failed to clean stale beacon headers     err=\"filled header below beacon header tail: 18809844 < 18809847\"\r\nINFO [12-18|08:49:44.175] Importing sidechain segment              start=18,809,846 end=18,809,858\r\nERROR[12-18|08:49:44.548] Beacon backfilling failed                err=\"retrieved hash chain is invalid: rename D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\3487357301 D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\storage.index.cidx: Access is denied.\"\r\nINFO [12-18|08:49:45.911] Looking for peers                        peercount=14 tried=30 static=0\r\nWARN [12-18|08:49:49.457] Marked new chain head as invalid         hash=da1391..b84cf2 badnumber=18,809,847 badhash=d80caf..5d1426\r\nINFO [12-18|08:49:56.202] Looking for peers                        peercount=15 tried=34 static=0\r\nINFO [12-18|08:50:06.225] Looking for peers                        peercount=14 tried=34 static=0\r\n```\r\n\r\nAfter reload\r\n```\r\nWARN [12-18|08:53:44.432] Ignoring payload with missing parent     number=18,809,914 hash=dc34e7..068dd3 parent=c1f7a0..a930dd\r\nWARN [12-18|08:53:44.460] Ignoring payload with missing parent     number=18,809,915 hash=4117db..11b612 parent=dc34e7..068dd3\r\nINFO [12-18|08:53:44.508] Forkchoice requested sync to new head    number=18,809,915 hash=4117db..11b612 finalized=unknown\r\nINFO [12-18|08:53:44.511] Block synchronisation started\r\nINFO [12-18|08:53:44.878] Extend chain                             add=3 number=18,809,847 hash=d80caf..5d1426\r\nERROR[12-18|08:53:45.400] Beacon backfilling failed                err=\"retrieved hash chain is invalid: rename D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\1753740915 D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\storage.index.cidx: Access is denied.\"\r\nINFO [12-18|08:53:51.690] Looking for peers                        peercount=8 tried=33 static=0\r\nWARN [12-18|08:53:51.925] Marked new chain head as invalid         hash=da1391..b84cf2 badnumber=18,809,848 badhash=69d30b..6ef2cb\r\nINFO [12-18|08:55:22.300] Looking for peers                        peercount=12 tried=39 static=0\r\nINFO [12-18|08:55:32.314] Looking for peers                        peercount=13 tried=34 static=0\r\nWARN [12-18|08:55:55.861] Beacon client online, but no consensus updates received in a while. Please fix your beacon client to follow the chain!\r\nWARN [12-18|08:59:32.884] Ignoring already known beacon payload    number=18,809,821 hash=b0f171..2c349f age=1h47m45s\r\nWARN [12-18|08:59:32.891] Ignoring already known beacon payload    number=18,809,822 hash=cb2f92..0cd057 age=1h47m33s\r\nWARN [12-18|08:59:32.937] Ignoring already known beacon payload    number=18,809,823 hash=bac0f0..60990f age=1h47m21s\r\n. . . ignoring some blocks here\r\nWARN [12-18|08:59:33.478] Ignoring already known beacon payload    number=18,809,849 hash=8116c7..1ab871 age=1h42m10s\r\nWARN [12-18|08:59:33.483] Ignoring already known beacon payload    number=18,809,850 hash=57f42b..d9f90e age=1h41m58s\r\nWARN [12-18|08:59:33.488] Ignoring already known beacon payload    number=18,809,851 hash=1ea983..b71ff8 age=1h41m46s\r\nWARN [12-18|08:59:33.816] Served engine_forkchoiceUpdatedV2        conn=127.0.0.1:53633 reqid=45 duration=315.543ms  err=\"rename D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\2158743012 D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\storage.index.cidx: Access is denied.\"\r\nWARN [12-18|08:59:41.753] Ignoring already known beacon payload    number=18,809,856 hash=d1453e..9188cb age=1h40m54s\r\nWARN [12-18|08:59:41.761] Ignoring already known beacon payload    number=18,809,857 hash=1b3566..e7a91e age=1h40m42s\r\nWARN [12-18|08:59:41.791] Ignoring already known beacon payload    number=18,809,858 hash=b8071c..318958 age=1h40m30s\r\nWARN [12-18|08:59:41.797] State not available, ignoring new payload\r\nWARN [12-18|08:59:41.819] Retrieved pivot header from local        number=18,809,796 hash=e69c4c..41d1b6 latest=18,809,860 oldest=18,809,847\r\nWARN [12-18|08:59:42.629] Inserted known block                     number=18,809,849 hash=8116c7..1ab871 uncles=0 txs=193 gas=17,942,523 root=bea3d0..93bd23\r\nERROR[12-18|08:59:42.629] Please file an issue, skip known block execution without receipt hash=8116c7..1ab871 number=18,809,849\r\nERROR[12-18|08:59:42.922] Beacon backfilling failed                err=\"retrieved hash chain is invalid: rename D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\2475479740 D:\\\\Ethereum\\\\Data\\\\EL\\\\Geth2\\\\geth\\\\chaindata\\\\ancient\\\\state\\\\storage.index.cidx: Access is denied.\"\r\nWARN [12-18|08:59:43.361] Marked new chain head as invalid         hash=5d4338..efa740 badnumber=18,809,850 badhash=57f42b..d9f90e\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28694/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24669",
  "id": 1197440018,
  "node_id": "I_kwDOAOvK985HX3wS",
  "number": 24669,
  "title": "feeHistory returns one more entry for baseFeePerGas than the indicated range",
  "user": {
    "login": "seaona",
    "id": 54408225,
    "node_id": "MDQ6VXNlcjU0NDA4MjI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/54408225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/seaona",
    "html_url": "https://github.com/seaona",
    "followers_url": "https://api.github.com/users/seaona/followers",
    "following_url": "https://api.github.com/users/seaona/following{/other_user}",
    "gists_url": "https://api.github.com/users/seaona/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/seaona/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/seaona/subscriptions",
    "organizations_url": "https://api.github.com/users/seaona/orgs",
    "repos_url": "https://api.github.com/users/seaona/repos",
    "events_url": "https://api.github.com/users/seaona/events{/privacy}",
    "received_events_url": "https://api.github.com/users/seaona/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-04-08T15:07:47Z",
  "updated_at": "2022-04-12T09:00:14Z",
  "closed_at": "2022-04-11T07:58:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version:  the one that Infura is using atm\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\nWhen making a request to `eth_feeHistory` and passing a value of \"0x5\" for the `blockCount`, I expect to get `baseFeePerGas`, `gasUsedRatio` and `reward` for these indicated block range.\r\n\r\n#### Actual behaviour\r\nHowever, on the `baseFeePerGas` I get one more entry than expected (6), meanwhile, on the `gasUsedRatio` and `reward` I am getting 5.\r\n```\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1154511320665004,\r\n    \"result\": {\r\n        \"baseFeePerGas\": [\r\n            \"0xd\",\r\n            \"0xd\",\r\n            \"0xe\",\r\n            \"0xe\",\r\n            \"0xf\",\r\n            \"0xf\"\r\n        ],\r\n        \"gasUsedRatio\": [\r\n            0.3050173513495279,\r\n            0.5518528666666667,\r\n            0.21957763333333333,\r\n            0.5059045491255545,\r\n            0.3485550253180236\r\n        ],\r\n        \"oldestBlock\": \"0x9fbee6\",\r\n        \"reward\": [\r\n            [\r\n                \"0x3b9aca42\",\r\n                \"0x59682f00\",\r\n                \"0x59682f00\"\r\n            ],\r\n            [\r\n                \"0x3b9aca42\",\r\n                \"0x59682f00\",\r\n                \"0x9502f900\"\r\n            ],\r\n            [\r\n                \"0x3b9aca34\",\r\n                \"0x3b9aca42\",\r\n                \"0x59682ef2\"\r\n            ],\r\n            [\r\n                \"0x3b9aca35\",\r\n                \"0x3b9aca35\",\r\n                \"0x3b9aca35\"\r\n            ],\r\n            [\r\n                \"0x3b9aca43\",\r\n                \"0x59682f00\",\r\n                \"0x59682f00\"\r\n            ]\r\n        ]\r\n    }\r\n}\r\n```\r\nI am not sure if this is actually a bug, or is it the expected behaviour. If so, to which block is the extra entry referring to? \r\n\r\n#### Steps to reproduce the behaviour\r\n1. Make an RPC call to eth_feeHistory\r\n2. Indicate the range of blocks (i.e. 0x5) and the rest of arguments\r\n3. Send the request\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n\r\nWhen submitting logs: please submit them as text and not screenshots.",
  "closed_by": {
    "login": "s1na",
    "id": 1591639,
    "node_id": "MDQ6VXNlcjE1OTE2Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1591639?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/s1na",
    "html_url": "https://github.com/s1na",
    "followers_url": "https://api.github.com/users/s1na/followers",
    "following_url": "https://api.github.com/users/s1na/following{/other_user}",
    "gists_url": "https://api.github.com/users/s1na/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/s1na/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/s1na/subscriptions",
    "organizations_url": "https://api.github.com/users/s1na/orgs",
    "repos_url": "https://api.github.com/users/s1na/repos",
    "events_url": "https://api.github.com/users/s1na/events{/privacy}",
    "received_events_url": "https://api.github.com/users/s1na/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094491828",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24669#issuecomment-1094491828",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669",
    "id": 1094491828,
    "node_id": "IC_kwDOAOvK985BPJ60",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-11T02:57:45Z",
    "updated_at": "2022-04-11T02:57:45Z",
    "author_association": "MEMBER",
    "body": "Check the spec [here](https://playground.open-rpc.org/?schemaUrl=https://raw.githubusercontent.com/ethereum/execution-apis/assembled-spec/openrpc.json&uiSchema%5BappBar%5D%5Bui:splitView%5D=false&uiSchema%5BappBar%5D%5Bui:input%5D=false&uiSchema%5BappBar%5D%5Bui:examplesDropdown%5D=false) , the additional one more `baseFee` is expected.\r\n\r\nbaseFeePerGas: An array of block base fees per gas. This includes the next block after the newest of the returned range, because this value can be derived from the newest block. Zeroes are returned for pre-EIP-1559 blocks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094491828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094516383",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24669#issuecomment-1094516383",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669",
    "id": 1094516383,
    "node_id": "IC_kwDOAOvK985BPP6f",
    "user": {
      "login": "Danyalkasiri",
      "id": 101438812,
      "node_id": "U_kgDOBgvVXA",
      "avatar_url": "https://avatars.githubusercontent.com/u/101438812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Danyalkasiri",
      "html_url": "https://github.com/Danyalkasiri",
      "followers_url": "https://api.github.com/users/Danyalkasiri/followers",
      "following_url": "https://api.github.com/users/Danyalkasiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/Danyalkasiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Danyalkasiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Danyalkasiri/subscriptions",
      "organizations_url": "https://api.github.com/users/Danyalkasiri/orgs",
      "repos_url": "https://api.github.com/users/Danyalkasiri/repos",
      "events_url": "https://api.github.com/users/Danyalkasiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Danyalkasiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-11T03:55:53Z",
    "updated_at": "2022-04-11T03:55:53Z",
    "author_association": "NONE",
    "body": "Hi,thank you,I hope you're great and you're bored ľm bored ĺm sorry l\nanswered late.\n🥰💖\n\nدر تاریخ دوشنبه ۱۱ آوریل ۲۰۲۲،‏ ۰۷:۳۰ rjl493456442 ***@***.***>\nنوشت:\n\n> Check the spec here\n> <https://playground.open-rpc.org/?schemaUrl=https://raw.githubusercontent.com/ethereum/execution-apis/assembled-spec/openrpc.json&uiSchema%5BappBar%5D%5Bui:splitView%5D=false&uiSchema%5BappBar%5D%5Bui:input%5D=false&uiSchema%5BappBar%5D%5Bui:examplesDropdown%5D=false>\n> , the additional one more baseFee is expected.\n>\n> baseFeePerGas: An array of block base fees per gas. This includes the next\n> block after the newest of the returned range, because this value can be\n> derived from the newest block. Zeroes are returned for pre-EIP-1559 blocks.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/24669#issuecomment-1094491828>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AYF5KXDXWX64WQ544WBLSUDVEOITXANCNFSM5S425M2A>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1094516383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096400379",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24669#issuecomment-1096400379",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24669",
    "id": 1096400379,
    "node_id": "IC_kwDOAOvK985BWb37",
    "user": {
      "login": "seaona",
      "id": 54408225,
      "node_id": "MDQ6VXNlcjU0NDA4MjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/54408225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seaona",
      "html_url": "https://github.com/seaona",
      "followers_url": "https://api.github.com/users/seaona/followers",
      "following_url": "https://api.github.com/users/seaona/following{/other_user}",
      "gists_url": "https://api.github.com/users/seaona/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seaona/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seaona/subscriptions",
      "organizations_url": "https://api.github.com/users/seaona/orgs",
      "repos_url": "https://api.github.com/users/seaona/repos",
      "events_url": "https://api.github.com/users/seaona/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seaona/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T09:00:14Z",
    "updated_at": "2022-04-12T09:00:14Z",
    "author_association": "NONE",
    "body": "ohh I see, thank you very much @rjl493456442 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1096400379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

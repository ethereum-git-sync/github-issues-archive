{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24160",
  "id": 1089097664,
  "node_id": "I_kwDOAOvK985A6k_A",
  "number": 24160,
  "title": "Unregistering sync peer because \"message length >= 16MB\"",
  "user": {
    "login": "weippig",
    "id": 38755919,
    "node_id": "MDQ6VXNlcjM4NzU1OTE5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38755919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/weippig",
    "html_url": "https://github.com/weippig",
    "followers_url": "https://api.github.com/users/weippig/followers",
    "following_url": "https://api.github.com/users/weippig/following{/other_user}",
    "gists_url": "https://api.github.com/users/weippig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/weippig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/weippig/subscriptions",
    "organizations_url": "https://api.github.com/users/weippig/orgs",
    "repos_url": "https://api.github.com/users/weippig/repos",
    "events_url": "https://api.github.com/users/weippig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/weippig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-12-27T09:19:56Z",
  "updated_at": "2022-01-20T10:07:55Z",
  "closed_at": "2022-01-20T10:07:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**System information**\r\nVersion: 1.10.10-stable\r\nArchitecture: amd64\r\nGo Version: go1.17.2\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=go\r\n\r\nI run geth on AWS EC2(t3.large).\r\n\r\n**Expected behaviour**\r\nEvery node register each other and get sync.\r\n\r\n**Actual behaviour**\r\nRun\r\n```\r\nsudo geth --datadir \"/home/ubuntu/node\" --port \"30303\" --http.api \"db,eth,web3,personal,miner,admin,net\" --nat extip:10.0.0.\r\n73 --nodiscover --http --http.port \"8000\" --http.corsdomain \"*\" --ws --ws.origins '*' --networkid 15 --netrestrict=\"10.0.0.0/24\" --allow-insecure-unlock --gcmode archive --syncmode=fast --verbosity 5\r\n```\r\n\r\nThe longest node unregistering sync peer, and eth.peerCount=0.\r\n\r\n```\r\nTRACE[12-27|09:05:03.281] Starting protocol eth/66                 id=56dd6387fa2d352b conn=staticdial\r\nTRACE[12-27|09:05:03.281] Starting protocol snap/1                 id=56dd6387fa2d352b conn=staticdial\r\nDEBUG[12-27|09:05:03.280] Allowed origin(s) for WS RPC interface [*] \r\nINFO [12-27|09:05:03.281] HTTP server started                      endpoint=127.0.0.1:8000 prefix= cors=* vhosts=localhost\r\nINFO [12-27|09:05:03.281] WebSocket enabled                        url=ws://127.0.0.1:8546\r\nDEBUG[12-27|09:05:03.283] Ethereum peer connected                  id=56dd6387fa2d352b conn=staticdial name=Geth/v1.10.9-stable-...\r\nTRACE[12-27|09:05:03.283] Registering sync peer                    peer=56dd6387\r\nDEBUG[12-27|09:05:03.434] Message handling failed in `eth`         id=56dd6387fa2d352b conn=staticdial err=\"message length >= 16MB\"\r\nDEBUG[12-27|09:05:03.434] Removing Ethereum peer                   peer=56dd6387 snap=true\r\nTRACE[12-27|09:05:03.434] Unregistering sync peer                  peer=56dd6387\r\nTRACE[12-27|09:05:03.434] Protocol eth/66 failed                   id=56dd6387fa2d352b conn=staticdial err=\"message length >= 16MB\"\r\nDEBUG[12-27|09:05:03.434] Message handling failed in `snap`        peer=56dd6387 err=EOF\r\nDEBUG[12-27|09:05:03.434] Removing p2p peer                        peercount=0 id=56dd6387fa2d352b duration=153.932ms req=false err=\"message length\r\n >= 16MB\"\r\n```\r\n\r\n\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160/reactions",
    "total_count": 2,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1004660432",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1004660432",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1004660432,
    "node_id": "IC_kwDOAOvK98474ebQ",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-04T09:44:53Z",
    "updated_at": "2022-01-04T09:45:08Z",
    "author_association": "MEMBER",
    "body": "` --networkid 15 --netrestrict=\"10.0.0.0/24\"` -- is this your own private network? \r\n` --nodiscover` -- how does that peer find you? Do you manually add the peer? \r\nWhat are you doing to set this network up? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1004660432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1004662482",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1004662482",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1004662482,
    "node_id": "IC_kwDOAOvK98474e7S",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-04T09:47:56Z",
    "updated_at": "2022-01-04T09:47:56Z",
    "author_association": "MEMBER",
    "body": "Are you running with crazy high gas limit by any chance? Are you blocks larger than 2MB?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1004662482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013901131",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1013901131",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1013901131,
    "node_id": "IC_kwDOAOvK9848budL",
    "user": {
      "login": "weippig",
      "id": 38755919,
      "node_id": "MDQ6VXNlcjM4NzU1OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38755919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/weippig",
      "html_url": "https://github.com/weippig",
      "followers_url": "https://api.github.com/users/weippig/followers",
      "following_url": "https://api.github.com/users/weippig/following{/other_user}",
      "gists_url": "https://api.github.com/users/weippig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/weippig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/weippig/subscriptions",
      "organizations_url": "https://api.github.com/users/weippig/orgs",
      "repos_url": "https://api.github.com/users/weippig/repos",
      "events_url": "https://api.github.com/users/weippig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/weippig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-16T15:54:19Z",
    "updated_at": "2022-01-16T15:54:19Z",
    "author_association": "NONE",
    "body": "`--networkid 15 --netrestrict=\"10.0.0.0/24\"\r\n`\r\nyes, this is my private network. And I add \"static_nodes.json\" in the geth node folder so  I  add `--nodiscover ` flag ,nodes still can find each other.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013901131/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013901764",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1013901764",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1013901764,
    "node_id": "IC_kwDOAOvK9848bunE",
    "user": {
      "login": "weippig",
      "id": 38755919,
      "node_id": "MDQ6VXNlcjM4NzU1OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38755919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/weippig",
      "html_url": "https://github.com/weippig",
      "followers_url": "https://api.github.com/users/weippig/followers",
      "following_url": "https://api.github.com/users/weippig/following{/other_user}",
      "gists_url": "https://api.github.com/users/weippig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/weippig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/weippig/subscriptions",
      "organizations_url": "https://api.github.com/users/weippig/orgs",
      "repos_url": "https://api.github.com/users/weippig/repos",
      "events_url": "https://api.github.com/users/weippig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/weippig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-16T15:58:12Z",
    "updated_at": "2022-01-16T15:58:12Z",
    "author_association": "NONE",
    "body": "```\r\n{\r\n    \"config\": {\r\n        \"chainId\": 15,\r\n        \"homesteadBlock\": 0,\r\n        \"eip150Block\": 0,\r\n        \"eip155Block\": 0,\r\n        \"eip158Block\": 0,\r\n        \"byzantiumBlock\": 0,\r\n        \"constantinopleBlock\": 0,\r\n        \"constantinopleBlock\": 0,\r\n        \"petersburgBlock\": 0,\r\n        \"ethash\": {}\r\n    },\r\n    \"difficulty\": \"400000\",\r\n    \"gasLimit\": \"990000000000000\",\r\n    \"alloc\": {}\r\n}\r\n```\r\nThis is my genesis.json. Is  gas limit too high ?\r\nThis problem appear when I send transactions every 5 seconds.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013901764/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013902501",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1013902501",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1013902501,
    "node_id": "IC_kwDOAOvK9848buyl",
    "user": {
      "login": "weippig",
      "id": 38755919,
      "node_id": "MDQ6VXNlcjM4NzU1OTE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38755919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/weippig",
      "html_url": "https://github.com/weippig",
      "followers_url": "https://api.github.com/users/weippig/followers",
      "following_url": "https://api.github.com/users/weippig/following{/other_user}",
      "gists_url": "https://api.github.com/users/weippig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/weippig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/weippig/subscriptions",
      "organizations_url": "https://api.github.com/users/weippig/orgs",
      "repos_url": "https://api.github.com/users/weippig/repos",
      "events_url": "https://api.github.com/users/weippig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/weippig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-16T16:02:13Z",
    "updated_at": "2022-01-16T16:02:13Z",
    "author_association": "NONE",
    "body": "I solve the problem by deleting this node's db. Then make this node sync with other nodes. Everything is back to normal now.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1013902501/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017312321",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24160#issuecomment-1017312321",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24160",
    "id": 1017312321,
    "node_id": "IC_kwDOAOvK9848ovRB",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T10:07:55Z",
    "updated_at": "2022-01-20T10:07:55Z",
    "author_association": "MEMBER",
    "body": "So it looks like your node made blocks that were too large for the network and couldn't be propagated",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1017312321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/25404",
  "id": 1317616265,
  "node_id": "I_kwDOAOvK985OiTqJ",
  "number": 25404,
  "title": "CPU usage trippelt after upgrade to v1.10.20",
  "user": {
    "login": "bert2002",
    "id": 1042226,
    "node_id": "MDQ6VXNlcjEwNDIyMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1042226?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bert2002",
    "html_url": "https://github.com/bert2002",
    "followers_url": "https://api.github.com/users/bert2002/followers",
    "following_url": "https://api.github.com/users/bert2002/following{/other_user}",
    "gists_url": "https://api.github.com/users/bert2002/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bert2002/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bert2002/subscriptions",
    "organizations_url": "https://api.github.com/users/bert2002/orgs",
    "repos_url": "https://api.github.com/users/bert2002/repos",
    "events_url": "https://api.github.com/users/bert2002/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bert2002/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132687333,
      "node_id": "MDU6TGFiZWwxMTMyNjg3MzMz",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:check-with-current-version",
      "name": "need:check-with-current-version",
      "color": "d3b300",
      "default": false,
      "description": ""
    },
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-07-26T02:32:26Z",
  "updated_at": "2022-08-01T08:09:02Z",
  "closed_at": "2022-08-01T08:09:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\n```\r\n# geth version\r\nGeth\r\nVersion: 1.10.20-stable\r\nGit Commit: 8f2416a89a3def6ec2c749d5afafbf2c9a18e3c8\r\nGit Commit Date: 20220629\r\nArchitecture: amd64\r\nGo Version: go1.18.1\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=go\r\n```\r\n\r\nAfter the upgrade we are seeing the cpu usage increased threefold. Our `geth` nodes were running happily on 2-3 cores, but since the upgrade it is using more and more. It doubled the usage within a couple days which is odd. \r\n![Screenshot from 2022-07-26 10-00-56](https://user-images.githubusercontent.com/1042226/180909336-5ea3aa42-bb18-4668-aca6-7134637d1629.png)\r\nThis is the load average of 1m.\r\n\r\nPlease let me know what else I can provide to give more insights. This is a real problem for us :cry: \r\n\r\nThanks,\r\nbert",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1195384476",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25404#issuecomment-1195384476",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404",
    "id": 1195384476,
    "node_id": "IC_kwDOAOvK985HQB6c",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T11:53:38Z",
    "updated_at": "2022-07-26T11:53:38Z",
    "author_association": "MEMBER",
    "body": "There was a small regression in leveldb in 1.10.20, I'm unsure if this is caused by that or not. We're currently prepping to release 1.10.21, so you might want to check if that fixes it for you.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1195384476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1196178453",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25404#issuecomment-1196178453",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404",
    "id": 1196178453,
    "node_id": "IC_kwDOAOvK985HTDwV",
    "user": {
      "login": "bert2002",
      "id": 1042226,
      "node_id": "MDQ6VXNlcjEwNDIyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1042226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bert2002",
      "html_url": "https://github.com/bert2002",
      "followers_url": "https://api.github.com/users/bert2002/followers",
      "following_url": "https://api.github.com/users/bert2002/following{/other_user}",
      "gists_url": "https://api.github.com/users/bert2002/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bert2002/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bert2002/subscriptions",
      "organizations_url": "https://api.github.com/users/bert2002/orgs",
      "repos_url": "https://api.github.com/users/bert2002/repos",
      "events_url": "https://api.github.com/users/bert2002/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bert2002/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T01:53:02Z",
    "updated_at": "2022-07-27T01:53:02Z",
    "author_association": "NONE",
    "body": "Hi @karalabe, after ~5 days it normalized in mainnet now without any of our doing.\r\nOn ropsten we saw the same behavior, but downgraded after a couple of hours again and the load average was back to normal. A day later we upgraded ropsten to the latest again and we could not experience the same problem. It doesnt make sense to me, but maybe for you in regard to the regression?\r\nWe will try `1.20.21` on testnet when its out :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1196178453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1200862811",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/25404#issuecomment-1200862811",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/25404",
    "id": 1200862811,
    "node_id": "IC_kwDOAOvK985Hk7Zb",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-01T08:09:02Z",
    "updated_at": "2022-08-01T08:09:02Z",
    "author_association": "MEMBER",
    "body": "Please check with current versions and report if anything feels off. Note, initially it might be a bit wonky as 1.10.20 might have accumulated some junk that .21 needs to clean up. Shouldn't persist more than a couple mins IMO.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1200862811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

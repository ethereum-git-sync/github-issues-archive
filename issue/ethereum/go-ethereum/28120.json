{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/28120",
  "id": 1897120496,
  "node_id": "I_kwDOAOvK985xE8Lw",
  "number": 28120,
  "title": "v1.13.0 rewinds to block 0",
  "user": {
    "login": "geomad",
    "id": 7707517,
    "node_id": "MDQ6VXNlcjc3MDc1MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7707517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/geomad",
    "html_url": "https://github.com/geomad",
    "followers_url": "https://api.github.com/users/geomad/followers",
    "following_url": "https://api.github.com/users/geomad/following{/other_user}",
    "gists_url": "https://api.github.com/users/geomad/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/geomad/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/geomad/subscriptions",
    "organizations_url": "https://api.github.com/users/geomad/orgs",
    "repos_url": "https://api.github.com/users/geomad/repos",
    "events_url": "https://api.github.com/users/geomad/events{/privacy}",
    "received_events_url": "https://api.github.com/users/geomad/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-09-14T18:46:15Z",
  "updated_at": "2023-09-15T01:18:22Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `v1.13.0`\r\nCL client & version: `lighthouse v4.4.1`\r\nOS & Version: `Linux`\r\n\r\nI restarted geth while syncing from scratch with `--state.sceme=path` and this lead (I think) the chain to start rewinding to block zero. chaindata size started to decrease. after 2 hours and another restart I decided to `removedb` (without removing ancients) and the node resumed syncing again.\r\n\r\nLogs just before the restart:\r\n````\r\nINFO [09-14|09:46:16.398] IPC endpoint closed                      url=/chain/chain.ipc\r\nWARN [09-14|09:46:16.399] Rewinding blockchain to block            target=7,944,977\r\nINFO [09-14|09:46:24.487] Looking for peers                        peercount=0 tried=168 static=1\r\nINFO [09-14|09:46:34.522] Looking for peers                        peercount=0 tried=116 static=1\r\nINFO [09-14|09:46:41.793] Loaded most recent local header          number=7,944,977  hash=6ba207..e2dc1e td=10,579,629,261,200,387,371,986 age=4y3mo3w\r\nINFO [09-14|09:46:41.793] Loaded most recent local block           number=0\r\n        hash=d4e567..cb8fa3 td=17,179,869,184                 age=54y5mo3w\r\nINFO [09-14|09:46:41.793] Loaded most recent local snap block      number=7,906,288  hash=623ffe..808d51 td=10,500,012,474,221,072,800,842 age=4y4mo16h\r\nINFO [09-14|09:46:41.793] Loaded last snap-sync pivot marker       number=18,132,746\r\nWARN [09-14|09:46:41.793] Rolled back chain segment                header=7947026->7944977 snap=7906288->7906288 block=0->0 reason=\"syncing canceled (requested)\"\r\nINFO [09-14|09:46:41.812] Syncing: chain download in progress      synced=43.61% chain=82.92GiB headers=7,944,977@3.14GiB bodies=7,908,044@56.50GiB receipts=7,908,044@23.28GiB eta=28h9m18.490s\r\nINFO [09-14|09:46:41.812] Syncing: state download in progress      synced=54.81% state=152.61GiB accounts=126,154,895@24.40GiB slots=600,831,588@124.36GiB codes=616,171@3.85GiB eta=7h45m21.870s\r\nERROR[09-14|09:46:41.949] Beacon backfilling failed                err=\"content processing canceled (requested)\"\r\nINFO [09-14|09:46:41.957] Ethereum protocol stopped\r\nINFO [09-14|09:46:41.957] Transaction pool stopped\r\nERROR[09-14|09:46:41.961] Failed to journal state snapshot         err=\"snapshot [0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544] missing\"\r\nINFO [09-14|09:46:41.961] Persisting dirty state to disk           root=d7f897..0f0544 layers=0\r\nINFO [09-14|09:46:41.963] Persisted dirty state to disk            size=69.00B elapsed=2.252ms\r\nINFO [09-14|09:46:41.965] Blockchain stopped\r\ngeth.service: Deactivated successfully.\r\nStopped geth.service - Ethereum geth client daemon by The Ethereum Foundation.\r\n````\r\n\r\nLogs right after the restart:\r\n````\r\nINFO [09-14|09:46:53.751]\r\nINFO [09-14|09:46:53.752] Loaded most recent local header          number=7,944,977 hash=6ba207..e2dc1e td=10,579,629,261,200,387,371,986 age=4y3mo3w\r\nINFO [09-14|09:46:53.752] Loaded most recent local block           number=0\r\n       hash=d4e567..cb8fa3 td=17,179,869,184                 age=54y5mo3w\r\nINFO [09-14|09:46:53.752] Loaded most recent local snap block      number=7,908,044 hash=e8f41d..7dd8dd td=10,503,796,279,546,327,487,969 age=4y4mo9h\r\nINFO [09-14|09:46:53.752] Loaded last snap-sync pivot marker       number=18,132,746\r\nERROR[09-14|09:46:53.752] Unexpected trie node in disk             owner=000000..000000 path=[] expect=d7f897..0f0544 got=5d7a4d..b04697\r\nWARN [09-14|09:46:53.800] Head state missing, repairing            number=0\r\n        hash=d4e567..cb8fa3\r\nERROR[09-14|09:46:53.800] Unexpected trie node in disk             owner=000000..000000 path=[] expect=d7f897..0f0544 got=5d7a4d..b04697\r\nERROR[09-14|09:46:53.800] Unexpected trie node in disk             owner=000000..000000 path=[] expect=d7f897..0f0544 got=5d7a4d..b04697\r\nINFO [09-14|09:46:54.058] Opened ancient database                  database=/chain/geth/geth/chaindata/ancient/state readonly=false\r\nINFO [09-14|09:46:54.058] Rebuilt trie database                    root=56e81f..63b421\r\nINFO [09-14|09:46:54.627] Loaded most recent local header          number=7,944,977  hash=6ba207..e2dc1e td=10,579,629,261,200,387,371,986 age=4y3mo3w\r\nINFO [09-14|09:46:54.627] Loaded most recent local block           number=0\r\n        hash=d4e567..cb8fa3 td=17,179,869,184                 age=54y5mo3w\r\nINFO [09-14|09:46:54.627] Loaded last snap-sync pivot marker       number=18,132,746\r\nERROR[09-14|09:46:54.627] Truncating ancient chain                 from=7,944,977 to=0\r\nWARN [09-14|09:46:54.628] Rewinding blockchain to block            target=0\r\n````\r\n\r\nLogs after 2 hours where I attempted another restart (at this point chaindata was almost half the size, ancients decreased in size too)\r\n````\r\nINFO [09-14|10:36:32.740] Loaded most recent local header          number=7,664,518 hash=dd5b9a..9c5985 td=10,011,359,787,843,088,592,518 age=4y5mo1w\r\nINFO [09-14|10:36:32.740] Loaded most recent local block           number=0\r\n       hash=d4e567..cb8fa3 td=17,179,869,184                 age=54y5mo3w\r\nINFO [09-14|10:36:32.740] Loaded last snap-sync pivot marker       number=18,132,746\r\nERROR[09-14|10:36:32.740] Truncating ancient chain                 from=7,664,518 to=0\r\nWARN [09-14|10:36:32.740] Rewinding blockchain to block            target=0\r\nWARN [09-14|10:36:32.751] Truncating freezer table                 database=/chain/geth/geth/chaindata/ancient/chain table=diffs items=7,664,520 limit=7,664,518\r\n````\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/28120/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

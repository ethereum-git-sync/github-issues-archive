{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14810",
  "id": 243153659,
  "node_id": "MDU6SXNzdWUyNDMxNTM2NTk=",
  "number": 14810,
  "title": "personal.unlockAccount takes 5+ minutes and times out",
  "user": {
    "login": "richiela",
    "id": 928196,
    "node_id": "MDQ6VXNlcjkyODE5Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/richiela",
    "html_url": "https://github.com/richiela",
    "followers_url": "https://api.github.com/users/richiela/followers",
    "following_url": "https://api.github.com/users/richiela/following{/other_user}",
    "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
    "organizations_url": "https://api.github.com/users/richiela/orgs",
    "repos_url": "https://api.github.com/users/richiela/repos",
    "events_url": "https://api.github.com/users/richiela/events{/privacy}",
    "received_events_url": "https://api.github.com/users/richiela/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2017-07-15T05:05:35Z",
  "updated_at": "2018-11-11T09:34:50Z",
  "closed_at": "2018-11-11T09:34:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.6.7\r\nOS & Version: Ubuntu 16.04\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nunlock should take sub second\r\n\r\n#### Actual behaviour\r\npersonal.unlock takes 5+ minutes \r\n\r\n#### Steps to reproduce the behaviour\r\nI'm not sure how to repro, but opening a bug in hopes of getting more eyes on it.  Our system has 200k+ accounts.  Periodically through out the day, calling personal.unlockAccount times out and then takes minutes to complete.  It usually goes back to \"normal\" after 15 or so minutes.  During this time, blocks are still coming in, CLI is still responsive, but jsonrpc stops responding.  It almost feels like its rescanning disk for something and tying up the disk.  iotop output shows the process 99% waiting for disk I/O, but i'm only seeing read speeds of 2M/s.  Other geth threads still read from disk.\r\n\r\nHere is some custom debug log demonstrating the behavior (desc by date):\r\n\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 45 ms sendDuration 5418 ms\t0\t2017-07-15 04:56:35.500\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 38 ms sendDuration 7048 ms\t0\t2017-07-15 04:56:30.030\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 3892 ms\t0\t2017-07-15 04:56:22.923\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 308015 ms\t0\t2017-07-15 04:56:18.987\r\nEthereum.Deposit:  Send Failed :System.Net.WebException: The operation has timed out\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 49 ms sendDuration 309255 ms\t0\t2017-07-15 04:51:10.973\r\nEthereum.Deposit:  Send Failed :System.Net.WebException: The operation has timed out\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 37 ms sendDuration 310512 ms\t0\t2017-07-15 04:46:01.670\r\nEthereum.Deposit:  Send Failed :System.Net.WebException: The operation has timed out\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 249251 ms\t0\t2017-07-15 04:40:51.180\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 37 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.947\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.913\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 37 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.867\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 42 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.837\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.773\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.743\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.697\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.650\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.600\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 44 ms sendDuration 0 ms\t0\t2017-07-15 04:36:41.570\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 48 ms sendDuration 120853 ms\t0\t2017-07-15 04:36:41.510\r\nEthereum.Deposit finished block processing 18 addresses to sweep.\t0\t2017-07-15 04:34:40.617\r\nEthereum.Deposit starting block processing\t0\t2017-07-15 04:32:39.430\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 38 ms sendDuration 1300 ms\t0\t2017-07-15 04:30:33.903\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 38 ms sendDuration 1348 ms\t0\t2017-07-15 04:30:32.560\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 1308 ms\t0\t2017-07-15 04:30:31.153\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 1266 ms\t0\t2017-07-15 04:30:29.810\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 37 ms sendDuration 1363 ms\t0\t2017-07-15 04:30:28.483\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 1266 ms\t0\t2017-07-15 04:30:27.077\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 1268 ms\t0\t2017-07-15 04:30:25.750\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 1354 ms\t0\t2017-07-15 04:30:24.390\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 1327 ms\t0\t2017-07-15 04:30:22.937\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 43 ms sendDuration 1364 ms\t0\t2017-07-15 04:30:21.563\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 38 ms sendDuration 0 ms\t0\t2017-07-15 04:30:20.140\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 43 ms sendDuration 0 ms\t0\t2017-07-15 04:30:20.080\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 41 ms sendDuration 0 ms\t0\t2017-07-15 04:30:20.017\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 40 ms sendDuration 0 ms\t0\t2017-07-15 04:30:19.970\r\nEthereum.Deposit: swept 0xredactedaddressaaaaaaaaaaaaaaaaaaaaaaaaa : getBalanceDuration 39 ms sendDuration 0 ms\t0\t2017-07-15 04:30:19.923\r\nEthereum.Deposit finished block processing 15 addresses to sweep.\t0\t2017-07-15 04:30:19.860\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/317472274",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-317472274",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 317472274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzQ3MjI3NA==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-24T16:09:06Z",
    "updated_at": "2017-07-24T16:09:06Z",
    "author_association": "NONE",
    "body": "During the time of unresponsiveness, lsof reports over 37k file handles open as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/317472274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/318921764",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-318921764",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 318921764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODkyMTc2NA==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-30T18:55:47Z",
    "updated_at": "2017-07-30T18:59:11Z",
    "author_association": "NONE",
    "body": "More iotop information\r\n\r\n  TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO>    COMMAND\r\n22205 be/4 101001      2.37 M/s    0.00 B/s  0.00 % 96.74 % geth --datadir /wallets/ethcoin --fast --verbosity 3 --rpc --rpcaddr 0.0.0.0 ~ef42f520fbb98 --targetgaslimit 1000000 --cache 1024 --txpool.accountqueue 8192\r\n35313 be/4 101001     26.06 M/s   25.93 M/s  0.00 % 56.14 % geth --datadir /wallets/ethcoin --fast --verbosity 3 --rpc --rpcaddr 0.0.0.0 ~ef42f520fbb98 --targetgaslimit 1000000 --cache 1024 --txpool.accountqueue 8192\r\n59817 be/4 101001    321.70 K/s    0.00 B/s  0.00 %  7.83 % geth --datadir /wallets/ethcoin --fast --verbosity 3 --rpc --rpcaddr 0.0.0.0 ~ef42f520fbb98 --targetgaslimit 1000000 --cache 1024 --txpool.accountqueue 8192\r\n\r\n\r\nOne thread of geth reads @ only 2m/s even though other threads are reading at a much higher rate.  Its like a slow seek that the thread is waiting for that locks up the process",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/318921764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/320519366",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-320519366",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 320519366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDUxOTM2Ng==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-06T17:08:04Z",
    "updated_at": "2017-08-06T17:08:04Z",
    "author_association": "NONE",
    "body": "More data.  Recently, i copied a large amount of new key material into the geth keystore directory  (for ETC though).  On the first RPC call i observed the same behavior; the jsonrpc interface stops responding, and iotop shows 99% wait for disk io even though its only reading at 2M a sec.  Like a full rescan of the accounts directory.  Does geth, at any time, do a full rescan for key material?   if so what triggers it?  This behavior is sporadic.  It may not happen for 24-36 hours, but then lock up 3 times in 24 hours.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/320519366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321699120",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-321699120",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 321699120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY5OTEyMA==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T23:21:33Z",
    "updated_at": "2017-08-10T23:21:33Z",
    "author_association": "NONE",
    "body": "ok, this bug is tied directly to address generation.  We have over 250k of key material in keystore.  I disabled address generation for a couple hours to fix something else.   As soon as i turned on address generation, the daemon went on that slow scan and hung the daemon.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321699120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321854241",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-321854241",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 321854241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTg1NDI0MQ==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T16:09:21Z",
    "updated_at": "2017-08-11T16:09:21Z",
    "author_association": "NONE",
    "body": "Confirmed, with address generation turned off, daemons runs smoothly with no hiccups.  As soon as we create new addresses, the daemon goes into a weird rescan mode.  Once the daemon is in this state, it stays there indefinitely.  If you restart geth, address generation will work fine for a couple hours until it hits this rescan state.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321854241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322171866",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-322171866",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 322171866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjE3MTg2Ng==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-14T12:00:01Z",
    "updated_at": "2017-08-14T12:00:01Z",
    "author_association": "MEMBER",
    "body": "So, every fs event on the keystore folder will trigger the account cache to reload  https://github.com/ethereum/go-ethereum/blob/master/accounts/keystore/watch.go#L103 . \r\n\r\nBut it won't do it more often than every 2 seconds https://github.com/ethereum/go-ethereum/blob/master/accounts/keystore/account_cache.go#L39\r\n\r\nThe `reload` action holds a mutex, which probably explains why no signing can happen during this time (e.g. the `accounts()` method requires the same mutex: https://github.com/ethereum/go-ethereum/blob/master/accounts/keystore/account_cache.go#L88). \r\n\r\nIf it's simply the `scan` which takes time, it would be a simple fix to move the `scan` phase outside the mutex-protected area, and only take the mutex when we start meddling with  `ac.all`.\r\n\r\n@richiela , how many json-files are we talking about? I'd like to reproduce and do some measurement/experimentation.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322171866/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322183063",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-322183063",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 322183063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjE4MzA2Mw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-14T12:58:27Z",
    "updated_at": "2017-08-14T13:05:31Z",
    "author_association": "MEMBER",
    "body": "I tested with 250K account-files, the first `scan` operation takes about 45 seconds on my computer (ssd). But later scans, when things change on the fs takes about 5-10 seconds. \r\n\r\nAt least it appears that the brunt of time is definitely spent in the directory scanning phase\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322183063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322238725",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-322238725",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 322238725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjIzODcyNQ==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-14T16:28:49Z",
    "updated_at": "2017-08-14T16:28:49Z",
    "author_association": "NONE",
    "body": "We have a little over 250k.  Can you try unlocking the accounts on the fs (with and without timeouts) as well?  When I was testing this, if we started geth fresh, i could go into account creation mode, and it would work for a little while before locking up.  Usually between 300-900 accounts.\r\n\r\nHowever, if i started geth, left account creation off, but let the daemon work for a while;  meaning, it was sending transactions, unlocking accounts, reading transactions etc.  I couldn't even create one account without the daemon locking up.\r\n\r\nI'm thinking maybe its a combination of using the daemon and the number of json files as well since the behavior wouldn't reproduce on a newly started geth instance without \"work\" till much later.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322238725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322245610",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-322245610",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 322245610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjI0NTYxMA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-14T16:55:29Z",
    "updated_at": "2017-08-14T16:55:29Z",
    "author_association": "MEMBER",
    "body": "I can't really unlock them, it's not real accounts, just json-lookalikes. I can imagine that the effects vary wildly, with different caching on the actual disks. I also didn't connect to any peers, and didn't have several thousand chaindata files open, so I can imagine a production scenario where this has a lot worse effect. \r\n\r\nIf you're feeling adventurous, please try out the patch. But if you're not feeling adventurous, I'd wait until @fjl or @karalabe give it a :+1: ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/322245610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333068223",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-333068223",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 333068223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzA2ODIyMw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-29T08:42:27Z",
    "updated_at": "2017-09-29T08:42:27Z",
    "author_association": "MEMBER",
    "body": "Potential fix: https://github.com/ethereum/go-ethereum/pull/15171 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333068223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/425705297",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14810#issuecomment-425705297",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14810",
    "id": 425705297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTcwNTI5Nw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-09-30T08:49:27Z",
    "updated_at": "2018-09-30T08:49:27Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/425705297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

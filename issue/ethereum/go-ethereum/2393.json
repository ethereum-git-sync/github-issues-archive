{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2393",
  "id": 144795618,
  "node_id": "MDU6SXNzdWUxNDQ3OTU2MTg=",
  "number": 2393,
  "title": "personal_unlockAccount takes much time, expected?",
  "user": {
    "login": "hievan2016",
    "id": 18085443,
    "node_id": "MDQ6VXNlcjE4MDg1NDQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/18085443?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hievan2016",
    "html_url": "https://github.com/hievan2016",
    "followers_url": "https://api.github.com/users/hievan2016/followers",
    "following_url": "https://api.github.com/users/hievan2016/following{/other_user}",
    "gists_url": "https://api.github.com/users/hievan2016/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hievan2016/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hievan2016/subscriptions",
    "organizations_url": "https://api.github.com/users/hievan2016/orgs",
    "repos_url": "https://api.github.com/users/hievan2016/repos",
    "events_url": "https://api.github.com/users/hievan2016/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hievan2016/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2016-03-31T05:44:51Z",
  "updated_at": "2016-04-06T06:49:25Z",
  "closed_at": "2016-04-06T06:49:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\n\nGeth\nVersion: 1.3.5\nGit Commit: 34b622a24853e1cf550238e8c8be6dfa4178cd35\nProtocol Versions: [63 62 61]\nNetwork Id: 1\nGo Version: go1.6\nOS: linux\n#### Actual behaviour\n\nWe use personal_unlockAccount RPC API to unlock an account, seems the time used to finish this\noperations is somehow related to the number of miner threads started, that is, more time is used\nwhen more miner threads are started, is this expected?\n\nBelow is the time used (second) vs miners, \n\n1-2s          1  miner\n~20s         2  miners\n~50s         4 miners\n\nThe questions are:\n1. is it expected? \n2. And is any solution to reduced the time used to unlock an account (except using less miners)?\n#### Steps to reproduce the behaviour\n1. start geth using this cmd with --minerthreads  1/2/4/... separately\n\n./geth --rpc --rpcaddr=\"0.0.0.0\" --rpccorsdomain=\"*\" --rpcapi=\"db,eth,net,web3,personal,web3\"  --verbosity=3 --maxpeers=0  --networkid 482771 --genesis ~/test/genesis.json --nodiscover --datadir ~/.hdether --minerthreads=\"1\" --mine\n1. run this cmd to see the time used for each case\n\ndate; curl http://localhost:8545 -X post --data '{\"jsonrpc\":\"2.0\",\"method\":\"personal_unlockAccount\",\"params\":[\"0x2ba878e691f4fb6c934a7a4b8abc7022186a7a5a\", \"123456\", 30000000],\"id\":1}'; date\n\nIe. the outout for 4 miners is (51s)\n\nubuntu@VM-44-75-ubuntu:~$ date; curl http://localhost:8545 -X post --data '{\"jsonrpc\":\"2.0\",\"method\":\"personal_unlockAccount\",\"params\":[\"0x2ba878e691f4fb6c934a7a4b8abc7022186a7a5a\", \"123456\", 30000000],\"id\":1}'; date\nThu Mar 31 13:26:24 CST 2016\ncurl: (52) Empty reply from server\nThu Mar 31 13:27:15 CST 2016\n#### Backtrace\n\n```\n[backtrace]\n```\n",
  "closed_by": {
    "login": "bas-vk",
    "id": 4280775,
    "node_id": "MDQ6VXNlcjQyODA3NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bas-vk",
    "html_url": "https://github.com/bas-vk",
    "followers_url": "https://api.github.com/users/bas-vk/followers",
    "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
    "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
    "organizations_url": "https://api.github.com/users/bas-vk/orgs",
    "repos_url": "https://api.github.com/users/bas-vk/repos",
    "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bas-vk/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/205238417",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2393#issuecomment-205238417",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393",
    "id": 205238417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNTIzODQxNw==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-04T10:48:27Z",
    "updated_at": "2016-04-04T10:48:27Z",
    "author_association": "MEMBER",
    "body": "It is hard to determine if this is expected in your situation. It depends on free available cpu's. Unlocking an account takes significant cpu resources and if miners (or other processes) are using these cpu's then they will be shared. That will cause the unlock to take more time. Since you described a relation between the number of miners and the time it takes to unlock this is probably the scenario.\n\nYou have several options:\n1. don't use account management in geth but use external signing and submit transactions with [eth_sendRawTransaction](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sendrawtransaction). You can unlock/sign messages on a different computer which is not mining, or use a different algorithm to protect your keys which is lighter and secure enough for your situation. If you are using web3 Consensys made something that you might want to take a [look at](https://github.com/ConsenSys/hooked-web3-provider).\n2. Use the `lightkdf` parameter. This uses the same algorithm but with reduced security margin. It is up to you to determine if this is secure enough for your situation. Note, this is **not** recommended and only works with new keys.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/205238417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206098698",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2393#issuecomment-206098698",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2393",
    "id": 206098698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjA5ODY5OA==",
    "user": {
      "login": "hievan2016",
      "id": 18085443,
      "node_id": "MDQ6VXNlcjE4MDg1NDQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/18085443?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hievan2016",
      "html_url": "https://github.com/hievan2016",
      "followers_url": "https://api.github.com/users/hievan2016/followers",
      "following_url": "https://api.github.com/users/hievan2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/hievan2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hievan2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hievan2016/subscriptions",
      "organizations_url": "https://api.github.com/users/hievan2016/orgs",
      "repos_url": "https://api.github.com/users/hievan2016/repos",
      "events_url": "https://api.github.com/users/hievan2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hievan2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T03:23:30Z",
    "updated_at": "2016-04-06T03:23:30Z",
    "author_association": "NONE",
    "body": "Thanks for the reply, your are right, after increasing the # of CPU cores, the performance is improved.\n\nWill find some time to test the lightkdf option.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/206098698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21082",
  "id": 618121915,
  "node_id": "MDU6SXNzdWU2MTgxMjE5MTU=",
  "number": 21082,
  "title": "debug_traceTransaction no longer return the revert reason under 'returnValue'",
  "user": {
    "login": "ilyalesokhin-starkware",
    "id": 39232099,
    "node_id": "MDQ6VXNlcjM5MjMyMDk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/39232099?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilyalesokhin-starkware",
    "html_url": "https://github.com/ilyalesokhin-starkware",
    "followers_url": "https://api.github.com/users/ilyalesokhin-starkware/followers",
    "following_url": "https://api.github.com/users/ilyalesokhin-starkware/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilyalesokhin-starkware/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilyalesokhin-starkware/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilyalesokhin-starkware/subscriptions",
    "organizations_url": "https://api.github.com/users/ilyalesokhin-starkware/orgs",
    "repos_url": "https://api.github.com/users/ilyalesokhin-starkware/repos",
    "events_url": "https://api.github.com/users/ilyalesokhin-starkware/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilyalesokhin-starkware/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1153621723,
      "node_id": "MDU6TGFiZWwxMTUzNjIxNzIz",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:on-hold",
      "name": "status:on-hold",
      "color": "d89165",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-05-14T10:40:33Z",
  "updated_at": "2020-06-26T10:19:32Z",
  "closed_at": "2020-06-26T10:19:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "1.9.14 no longer return the revert reason under 'returnValue',\r\nThe last state returned by debug_traceTransaction is the same in both 1.9.14 and 1.9.13\r\n  AttributeDict({'pc': 1811,\r\n   'op': 'REVERT',\r\n   'gas': 976204,\r\n   'gasCost': 3,\r\n   'depth': 1,\r\n   'stack': ['00000000000000000000000000000000000000000000000000000000a9059cbb',\r\n    '00000000000000000000000000000000000000000000000000000000000000cf',\r\n    '0000000000000000000000000002851146112cef5d360033758c470689b72ea7',\r\n    '0000000000000000000000000000000000000000000000000000000000000011',\r\n    '0000000000000000000000000000000000000000000000000000000000000000',\r\n    '000000000000000000000000000000000000000000000000000000000000026c',\r\n    '0000000000000000000000000002851146112cef5d360033758c470689b72ea7',\r\n    '0000000000000000000000000002851146112cef5d360033758c470689b72ea7',\r\n    '0000000000000000000000000000000000000000000000000000000000000011',\r\n    '0000000000000000000000000000000000000000000000000000000000000000',\r\n    '0000000000000000000000000000000000000000000000000000000000000000',\r\n    '0000000000000000000000000000000000000000000000000000000000000084',\r\n    '0000000000000000000000000000000000000000000000000000000000000080'],\r\n   'memory': ['0000000000000000000000000002851146112cef5d360033758c470689b72ea7',\r\n    '0000000000000000000000000000000000000000000000000000000000000000',\r\n    '0000000000000000000000000000000000000000000000000000000000000080',\r\n    '0000000000000000000000000000000000000000000000000000000000000000',\r\n    '08c379a000000000000000000000000000000000000000000000000000000000',\r\n    '0000002000000000000000000000000000000000000000000000000000000000',\r\n    '0000002645524332303a207472616e7366657220616d6f756e74206578636565',\r\n    '64732062616c616e636500000000000000000000000000000000000000000000',\r\n    '0000000000000000000000000000000000000000000000000000000000000000'],\r\n   'storage': AttributeDict({})})]})\r\n\r\nbut returnValue in 1.9.14 is empty.\r\n\r\n#### System information\r\n\r\nGeth version: 1.9.14\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour (1.9.13 and earlier versions)\r\nw3.manager.request_blocking('debug_traceTransaction', [tx_hash])['returnValue']                                                                                                                                                                                                                                                                                \r\nOut[64]: '08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002645524332303a207472616e7366657220616d6f756e7420657863656564732062616c616e63650000000000000000000000000000000000000000000000000000'\r\n\r\n\r\n#### Actual behaviour (1.9.14)\r\nw3.manager.request_blocking('debug_traceTransaction', [tx_hash])['returnValue']                                                                                                                                                                                                                                                                                              \r\nOut[65]: ''\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\nRun a transaction with a failing assert.\r\ncall debug_traceTransaction and inspect the returnValue.\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628818532",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21082#issuecomment-628818532",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
    "id": 628818532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODgxODUzMg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T18:41:50Z",
    "updated_at": "2020-05-14T18:41:50Z",
    "author_association": "NONE",
    "body": "The reason data is also no longer being returned when running `eth_call` on methods which revert with a reason. (It's common for libraries like Web3.js to obtain the reason by replaying failed transactions as calls and decoding the return data.)\r\n\r\nFor code that executes `require(false, \"this is a revert reason...\")` the responses are:\r\n  \r\n**1.9.13**\r\n```json\r\n{\r\n \"jsonrpc\": \"2.0\",\r\n \"id\": 1000,\r\n \"result\": \"0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001a7468697320697320612072657665727420726561736f6e2e2e2e000000000000\"\r\n}\r\n```\r\n\r\n**1.9.14**\r\n```json\r\n{\r\n \"jsonrpc\": \"2.0\",\r\n \"id\": 1000,\r\n \"result\": \"0x\"\r\n}\r\n```\r\n\r\nHave made a reproduction case for this difference at: \r\n\r\nhttps://github.com/cgewecke/geth-revert-reason-repro\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/628818532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/629083785",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21082#issuecomment-629083785",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
    "id": 629083785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTA4Mzc4NQ==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-15T07:41:12Z",
    "updated_at": "2020-05-15T07:41:12Z",
    "author_association": "MEMBER",
    "body": "Yep that is a regression, probably introduced by https://github.com/ethereum/go-ethereum/pull/20830. However since we have 20830 in place, we can add error reasons rather easy now. This PR will add revert reasons to eth_call: https://github.com/ethereum/go-ethereum/pull/21083",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/629083785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/629090658",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21082#issuecomment-629090658",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
    "id": 629090658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTA5MDY1OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-15T07:56:58Z",
    "updated_at": "2020-05-15T07:56:58Z",
    "author_association": "MEMBER",
    "body": "it would be great if we could have some end-to-end test of these endpoints, which runs on travis... ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/629090658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640573106",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21082#issuecomment-640573106",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
    "id": 640573106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDU3MzEwNg==",
    "user": {
      "login": "ilyalesokhin-starkware",
      "id": 39232099,
      "node_id": "MDQ6VXNlcjM5MjMyMDk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/39232099?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilyalesokhin-starkware",
      "html_url": "https://github.com/ilyalesokhin-starkware",
      "followers_url": "https://api.github.com/users/ilyalesokhin-starkware/followers",
      "following_url": "https://api.github.com/users/ilyalesokhin-starkware/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilyalesokhin-starkware/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilyalesokhin-starkware/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilyalesokhin-starkware/subscriptions",
      "organizations_url": "https://api.github.com/users/ilyalesokhin-starkware/orgs",
      "repos_url": "https://api.github.com/users/ilyalesokhin-starkware/repos",
      "events_url": "https://api.github.com/users/ilyalesokhin-starkware/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilyalesokhin-starkware/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T12:30:16Z",
    "updated_at": "2020-06-08T12:30:16Z",
    "author_association": "NONE",
    "body": "w3.manager.request_blocking('debug_traceTransaction', [tx_hash])['returnValue'] is still empty in 1.9.15.\r\n\r\nHow should I extract the revert reason?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640573106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640638150",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21082#issuecomment-640638150",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21082",
    "id": 640638150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDYzODE1MA==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T14:11:55Z",
    "updated_at": "2020-06-08T14:11:55Z",
    "author_association": "MEMBER",
    "body": "hey @ilyalesokhin-starkware thanks for checking this again. It seems that my pr did not fix this issue unfortunately. But I know where to look and will provide the revert reason for debug_traceTransaction",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/640638150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

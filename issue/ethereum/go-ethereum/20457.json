{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20457",
  "id": 537488905,
  "node_id": "MDU6SXNzdWU1Mzc0ODg5MDU=",
  "number": 20457,
  "title": "GetModifiedAccountsByNumber is inconsistent. Doesn't indicate address which received tokens.",
  "user": {
    "login": "darklow",
    "id": 445304,
    "node_id": "MDQ6VXNlcjQ0NTMwNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/darklow",
    "html_url": "https://github.com/darklow",
    "followers_url": "https://api.github.com/users/darklow/followers",
    "following_url": "https://api.github.com/users/darklow/following{/other_user}",
    "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
    "organizations_url": "https://api.github.com/users/darklow/orgs",
    "repos_url": "https://api.github.com/users/darklow/repos",
    "events_url": "https://api.github.com/users/darklow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/darklow/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-12-13T11:07:14Z",
  "updated_at": "2019-12-13T15:31:31Z",
  "closed_at": "2019-12-13T15:31:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I get inconsistent behaviour on `GetModifiedAccountsByNumber`. There are occasions when it doesn't return address that received tokens at specific block. Here is such example:\r\n\r\nRelated address: https://etherscan.io/address/0x7A4b4E6179987341f5404EBCb04ed6134aBADA27#tokentxns\r\n\r\nAddress received USDT tokens in following TX: https://etherscan.io/tx/0xd0b492af0fc84eec7b38768a76f8abe8374e08d51b6e38ea4ca3b3f467a0eb53\r\n\r\nTX Block: **9099581**\r\n\r\nCalling for modified accounts\r\n```\r\nweb3.manager.request_blocking('debug_getModifiedAccountsByNumber', [9099580, 9099581])\r\n# Returns a list of 242 addresses, but there is no mention of 0x7A4b4E6179987341f5404EBCb04ed6134aBADA27\r\n```\r\n\r\n#### System information\r\n\r\nGeth version: `1.9.9-stable-0174499`\r\nOS & Version: Linux / Docker\r\nGeth params:\r\n```\r\n--nousb --port 30303 --cache 3072 --rpc --rpcaddr 0.0.0.0 --rpcapi eth,net,web3,debug,txpool\r\n```",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565460619",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20457#issuecomment-565460619",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457",
    "id": 565460619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTQ2MDYxOQ==",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-13T14:29:07Z",
    "updated_at": "2019-12-13T14:29:07Z",
    "author_association": "MEMBER",
    "body": "GetModifiedAccountsByNumber does only reflect ether transactions - not token (internal) transactions",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565460619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565480544",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20457#issuecomment-565480544",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457",
    "id": 565480544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTQ4MDU0NA==",
    "user": {
      "login": "darklow",
      "id": 445304,
      "node_id": "MDQ6VXNlcjQ0NTMwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darklow",
      "html_url": "https://github.com/darklow",
      "followers_url": "https://api.github.com/users/darklow/followers",
      "following_url": "https://api.github.com/users/darklow/following{/other_user}",
      "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
      "organizations_url": "https://api.github.com/users/darklow/orgs",
      "repos_url": "https://api.github.com/users/darklow/repos",
      "events_url": "https://api.github.com/users/darklow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darklow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-13T15:22:07Z",
    "updated_at": "2019-12-13T15:22:56Z",
    "author_association": "NONE",
    "body": "@ligi Thank you. Didn't found info indicating such behaviour. Function name makes you think it will detect any kind of modifications, not just ETH.\r\n\r\nI'm using debug trace for blocks and it is very inefficient and resourceful to do trace on every block if you know exact addresses you're looking for. Anyone knows any workarounds to be able to tell if account had any token modifications within block before doing full debug trace? Thank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565480544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565484117",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20457#issuecomment-565484117",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20457",
    "id": 565484117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTQ4NDExNw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-13T15:30:58Z",
    "updated_at": "2019-12-13T15:30:58Z",
    "author_association": "MEMBER",
    "body": "> Function name makes you think it will detect any kind of modifications, not just ETH.\r\n\r\nActually, it does. The thing is, a token is just a slot on the token-contract `C` that says `X` holds `Y` tokens. So the function _does_ detect that the storage root of `C` has changed. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565484117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

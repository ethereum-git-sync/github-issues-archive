{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/20418",
  "id": 531542775,
  "node_id": "MDU6SXNzdWU1MzE1NDI3NzU=",
  "number": 20418,
  "title": "cmd/abigen: Vyper issue",
  "user": {
    "login": "lmittmann",
    "id": 3458786,
    "node_id": "MDQ6VXNlcjM0NTg3ODY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3458786?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lmittmann",
    "html_url": "https://github.com/lmittmann",
    "followers_url": "https://api.github.com/users/lmittmann/followers",
    "following_url": "https://api.github.com/users/lmittmann/following{/other_user}",
    "gists_url": "https://api.github.com/users/lmittmann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lmittmann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lmittmann/subscriptions",
    "organizations_url": "https://api.github.com/users/lmittmann/orgs",
    "repos_url": "https://api.github.com/users/lmittmann/repos",
    "events_url": "https://api.github.com/users/lmittmann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lmittmann/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-12-02T21:14:19Z",
  "updated_at": "2019-12-16T12:38:19Z",
  "closed_at": "2019-12-16T12:38:18Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I tried to generate ABI bindings for a vyper contract using `abigen` an ran into an issue:\r\n\r\n```\r\n$ abigen -v\r\nabigen version 1.9.8-stable\r\n$ vyper --version\r\n0.1.0b14+commit.49b201c\r\n$ abigen --pkg main --type Uniswap --out uniswap.go --vy uniswap_exchange.vy\r\nFatal: Failed to generate ABI binding: 36:23: expected ';', found '.' (and 10 more errors)\r\n[...forward to line 36...]\r\n\t// UniswapExchange.vyABI is the input ABI used to generate the binding from.\r\n\tconst UniswapExchange.vyABI = \"[{...\r\n```\r\n\r\nIt seems like `abigen` is trying to use the full file name for variable and struct names, including the `.vy` suffix which of course is not allowed in Go. When renaming the file and striping the `.vy` suffix `abigen` works fine.",
  "closed_by": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561026477",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20418#issuecomment-561026477",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
    "id": 561026477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTAyNjQ3Nw==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T06:47:27Z",
    "updated_at": "2019-12-03T06:47:27Z",
    "author_association": "MEMBER",
    "body": "Would you mind sharing your version of `abigen` and `vyper`? Typing the commands you provided doesn't work:\r\n\r\n```\r\nΞ ./abigen --pkg main --type Uniswap --out uniswap.go --vy uniswap_exchange.vy\r\nContract ABI (--abi), bytecode (--bin) and type (--type) flags are mutually exclusive with the Solidity (--sol) and Vyper (--vy) flags\r\n```\r\n\r\nand\r\n\r\n```\r\nΞ ./abigen --pkg main --out uniswap.go --vy uniswap_exchange.vy        \r\nFailed to build Vyper contract: vyper: exit status 1\r\n/home/gballet/.local/lib/python3.6/site-packages/vyper/types/types.py:459: DeprecationWarning: Mapping definitions using subscript have deprecated (see VIP564). Use map(type1, type2) instead.\r\n  DeprecationWarning\r\n/usr/lib/python3/dist-packages/apport/report.py:13: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import fnmatch, glob, traceback, errno, sys, atexit, locale, imp\r\nvyper.exceptions.InvalidTypeException: line 24:10 Unknown list type.\r\n     23 totalSupply: public(uint256)                      # total number of UNI in existence\r\n---> 24 balances: uint256[address]                        # UNI balance of an address\r\n------------------^\r\n     25 allowances: (uint256[address])[address]           # UNI allowance of one address on another\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561026477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561028629",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20418#issuecomment-561028629",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
    "id": 561028629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTAyODYyOQ==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T06:55:32Z",
    "updated_at": "2019-12-03T06:55:32Z",
    "author_association": "MEMBER",
    "body": "I was able to confirm and reproduce the issue with `1.9.8-unstable` and vyper `0.1.0b14+commit.49b201c`. Working on a fix.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561028629/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561052316",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20418#issuecomment-561052316",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
    "id": 561052316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTA1MjMxNg==",
    "user": {
      "login": "lmittmann",
      "id": 3458786,
      "node_id": "MDQ6VXNlcjM0NTg3ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3458786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmittmann",
      "html_url": "https://github.com/lmittmann",
      "followers_url": "https://api.github.com/users/lmittmann/followers",
      "following_url": "https://api.github.com/users/lmittmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmittmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmittmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmittmann/subscriptions",
      "organizations_url": "https://api.github.com/users/lmittmann/orgs",
      "repos_url": "https://api.github.com/users/lmittmann/repos",
      "events_url": "https://api.github.com/users/lmittmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmittmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T08:19:03Z",
    "updated_at": "2019-12-03T08:19:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "for the sake of completeness: I used the `uniswap_exchange.vy` from the PR Uniswap/contracts-vyper/pull/44.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/561052316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565036366",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20418#issuecomment-565036366",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
    "id": 565036366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTAzNjM2Ng==",
    "user": {
      "login": "lmittmann",
      "id": 3458786,
      "node_id": "MDQ6VXNlcjM0NTg3ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3458786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmittmann",
      "html_url": "https://github.com/lmittmann",
      "followers_url": "https://api.github.com/users/lmittmann/followers",
      "following_url": "https://api.github.com/users/lmittmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmittmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmittmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmittmann/subscriptions",
      "organizations_url": "https://api.github.com/users/lmittmann/orgs",
      "repos_url": "https://api.github.com/users/lmittmann/repos",
      "events_url": "https://api.github.com/users/lmittmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmittmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-12T14:46:16Z",
    "updated_at": "2019-12-12T14:46:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "`abigen` also tries to include the files path in the variable and type names.\r\n\r\nIf you run\r\n```\r\nabigen --pkg main --type Uniswap --out uniswap.go --vy path/uniswap_exchange.vy\r\n```\r\n`aibgen` attempts to create variables like e.g., `Path/UniswapExchange.vyABI`.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/565036366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/566043795",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/20418#issuecomment-566043795",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/20418",
    "id": 566043795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjA0Mzc5NQ==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-16T12:38:18Z",
    "updated_at": "2019-12-16T12:38:18Z",
    "author_association": "MEMBER",
    "body": "Fixed in #20419 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/566043795/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

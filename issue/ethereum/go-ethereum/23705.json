{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/23705",
  "id": 1022604931,
  "node_id": "I_kwDOAOvK984887aD",
  "number": 23705,
  "title": "GETH responds {'code': -32000, 'message': 'replacement transaction underpriced'} after high volume of transactions & needs restart",
  "user": {
    "login": "justinf123",
    "id": 6662803,
    "node_id": "MDQ6VXNlcjY2NjI4MDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6662803?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/justinf123",
    "html_url": "https://github.com/justinf123",
    "followers_url": "https://api.github.com/users/justinf123/followers",
    "following_url": "https://api.github.com/users/justinf123/following{/other_user}",
    "gists_url": "https://api.github.com/users/justinf123/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/justinf123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/justinf123/subscriptions",
    "organizations_url": "https://api.github.com/users/justinf123/orgs",
    "repos_url": "https://api.github.com/users/justinf123/repos",
    "events_url": "https://api.github.com/users/justinf123/events{/privacy}",
    "received_events_url": "https://api.github.com/users/justinf123/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    },
    {
      "id": 1132754722,
      "node_id": "MDU6TGFiZWwxMTMyNzU0NzIy",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/need:more-information",
      "name": "need:more-information",
      "color": "db6fa3",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-10-11T11:46:07Z",
  "updated_at": "2021-11-13T08:12:13Z",
  "closed_at": "2021-11-13T08:12:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.10.8-stable-26675454\r\nOS & Version: Windows 10 Home 21H1 (64 Bit), 3Ghz, 32 GB RAM, multiple SSD's.\r\n\r\n#### Expected behaviour\r\n\r\nGETH process & propagate transactions, my balance to be depleted by the transaction amount + costs.\r\n\r\n#### Actual behaviour\r\n\r\nAfter about 8,000 - 10,000 transactions, on occasion, I start receiving:  {'code': -32000, 'message': 'replacement transaction underpriced'}\r\nIf I increase the gas price, I get a valid looking transaction hash back from GETH, though the transaction NEVER propagates off my node (can't see on Etherscan etc) & my balance does NOT decrease.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI am starting GETH with the following command:\r\n\r\n```\r\n\"c:\\Program Files\\Geth\\geth.exe\" --ropsten --http --http.api eth,net,web3,personal,miner,admin,txpool,debug --http.corsdomain '*' --http.addr 127.0.0.1 --http.port 8545 --metrics --mine --syncmode \"full\" --miner.etherbase { my account } --datadir d:\\Ethereum\\ropsten\\ --allow-insecure-unlock --maxpeers 9999 --maxpendpeers 9999 --whitelist 10920274=0xfd652086d220d506ae5b7cb80fde97d2f3f7028d346cc7d9d384a83d3d638532 --rpc.allow-unprotected-txs --txpool.globalslots=250000 --txpool.globalqueue=50000\r\n```\r\n\r\nI am retrieving the nonce via: web3.eth.getTransactionCount(address)\r\n\r\nThen processing transactions via:\r\n\r\n```\r\nweb3.toHex(web3.eth.sendRawTransaction(web3.eth.account.sign_transaction({\"nonce\" : transaction_nonce, \"to\" : receiver_account, \"value\" : web3.toWei(EthusedinGwei,'gwei'), \"gas\" : 21000, \"gasPrice\" : web3.toWei(5+extra_gas,'gwei')},private_key).rawTransaction))\r\n```\r\n\r\nAfter about 8,000 - 10,000 transactions, on occasion, I start receiving:  {'code': -32000, 'message': 'replacement transaction underpriced'}\r\n\r\nThese are new, not replacement transactions.  I should note, on occasion, GETH has processed more than 100k transactions without issue.\r\n\r\nOnce transactions start failing like this, _every_ transaction fails.  I have to restart GETH, wait a while, then start my applications again.\r\n\r\nThis is what the GETH console shows: (addresses removed)\r\n\r\nWARN [10-11|19:47:40.869] Served eth_sendRawTransaction conn=127.0.0.1:62940 reqid=137 t=0s err=\"replacement transaction underpriced\"\r\nINFO [10-11|19:47:41.097] Submitted transaction hash=0x1e957e98232a0b3e833e0e2968c40fc729db3439a38dc5578c20ab3998ae2f98 from=0x0000000000000000000000000000000000000000 nonce=396,884 recipient=0x0000000000000000000000000000000000000000 value=30,073,000,300,730\r\n\r\nWARN [10-11|19:47:41.244] Served eth_sendRawTransaction conn=127.0.0.1:62940 reqid=140 t=0s err=\"replacement transaction underpriced\"\r\nINFO [10-11|19:47:41.525] Submitted transaction hash=0x54e1406b8d1f46f1333230ba1b8e56a209fba005abb3868de42e2b2627ab8adc from=0x0000000000000000000000000000000000000000 nonce=396,886 recipient=0x0000000000000000000000000000000000000000 value=32,594,514,981,000\r\n\r\nWARN [10-11|19:47:41.577] Served eth_sendRawTransaction conn=127.0.0.1:62940 reqid=143 t=0s err=\"replacement transaction underpriced\"\r\nINFO [10-11|19:47:41.744] Submitted transaction hash=0xab0d98f4d7c04872f4f0cf527d48cda5b5f8d39237758a7b5dedf3d40ee9bc93 from=0x0000000000000000000000000000000000000000 nonce=396,888 recipient=0x0000000000000000000000000000000000000000 value=145,579,501,164,636\r\n\r\nIf you check on Etherscan, none of those \"submitted transactions\" ever got further than my own node.\r\n\r\nhttps://ropsten.etherscan.io/tx/0x7d67bbbfa23812f44b361232da2bf3a2f2b25b9e42343aae1da84868242966bc\r\n\r\nOn my local GETH I see the following: (addresses removed)\r\n\r\n>>> print (json.dumps(json.loads(Web3.toJSON(web3.eth.get_transaction('0x7d67bbbfa23812f44b361232da2bf3a2f2b25b9e42343aae1da84868242966bc'))),indent=4))\r\n{\r\n    \"blockHash\": null,\r\n    \"blockNumber\": null,\r\n    \"from\": \"0x0000000000000000000000000000000000000000\",\r\n    \"gas\": 21000,\r\n    \"gasPrice\": 6000000000,\r\n    \"hash\": \"0x7d67bbbfa23812f44b361232da2bf3a2f2b25b9e42343aae1da84868242966bc\",\r\n    \"input\": \"0x\",\r\n    \"nonce\": 411656,\r\n    \"to\": \"0x0000000000000000000000000000000000000000\",\r\n    \"transactionIndex\": null,\r\n    \"value\": 2588033813005314,\r\n    \"type\": \"0x0\",\r\n    \"v\": 28,\r\n    \"r\": \"0x8095bcfb8052eb62528d3b89bfc16c8929ee46bf6d32ff72f9ace0b11593cc43\",\r\n    \"s\": \"0x463482bdf483cffb4c10db0508cc4f77c030260bd8c031c97b71fc609a38d26a\"\r\n}\r\n\r\nIf verbose logs would be helpful, please advise how to generate & I will supply.",
  "closed_by": {
    "login": "no-response[bot]",
    "id": 32965360,
    "node_id": "MDM6Qm90MzI5NjUzNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/no-response%5Bbot%5D",
    "html_url": "https://github.com/apps/no-response",
    "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/942804722",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23705#issuecomment-942804722",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705",
    "id": 942804722,
    "node_id": "IC_kwDOAOvK9844Mg7y",
    "user": {
      "login": "ligi",
      "id": 111600,
      "node_id": "MDQ6VXNlcjExMTYwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/111600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ligi",
      "html_url": "https://github.com/ligi",
      "followers_url": "https://api.github.com/users/ligi/followers",
      "following_url": "https://api.github.com/users/ligi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ligi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ligi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ligi/subscriptions",
      "organizations_url": "https://api.github.com/users/ligi/orgs",
      "repos_url": "https://api.github.com/users/ligi/repos",
      "events_url": "https://api.github.com/users/ligi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ligi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T23:51:59Z",
    "updated_at": "2021-10-13T23:51:59Z",
    "author_association": "MEMBER",
    "body": "what is the code you create the transactions with? Are you trying to replace transactions?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/942804722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959196428",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23705#issuecomment-959196428",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705",
    "id": 959196428,
    "node_id": "IC_kwDOAOvK9845LC0M",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T14:14:46Z",
    "updated_at": "2021-11-03T14:14:46Z",
    "author_association": "MEMBER",
    "body": "@justinf123 we did fix some issues with the transaction pool recently (in v1.10.9) could you update to that version and report back if the issue still persists?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959196428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/967802832",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/23705#issuecomment-967802832",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/23705",
    "id": 967802832,
    "node_id": "IC_kwDOAOvK9845r3_Q",
    "user": {
      "login": "no-response[bot]",
      "id": 32965360,
      "node_id": "MDM6Qm90MzI5NjUzNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/no-response%5Bbot%5D",
      "html_url": "https://github.com/apps/no-response",
      "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-11-13T08:12:12Z",
    "updated_at": "2021-11-13T08:12:12Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed because there has been no response to our request for more information from the original author. With only the information that is currently in the issue, we don't have enough information to take action. Please reach out if you have more relevant information or answers to our questions so that we can investigate further.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/967802832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

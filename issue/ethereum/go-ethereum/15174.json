{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15174",
  "id": 259111324,
  "node_id": "MDU6SXNzdWUyNTkxMTEzMjQ=",
  "number": 15174,
  "title": "Geth does not sync to Byzantium in light syncmode",
  "user": {
    "login": "dstreppa",
    "id": 11214654,
    "node_id": "MDQ6VXNlcjExMjE0NjU0",
    "avatar_url": "https://avatars.githubusercontent.com/u/11214654?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dstreppa",
    "html_url": "https://github.com/dstreppa",
    "followers_url": "https://api.github.com/users/dstreppa/followers",
    "following_url": "https://api.github.com/users/dstreppa/following{/other_user}",
    "gists_url": "https://api.github.com/users/dstreppa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dstreppa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dstreppa/subscriptions",
    "organizations_url": "https://api.github.com/users/dstreppa/orgs",
    "repos_url": "https://api.github.com/users/dstreppa/repos",
    "events_url": "https://api.github.com/users/dstreppa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dstreppa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2017-09-20T10:13:21Z",
  "updated_at": "2017-12-26T21:23:15Z",
  "closed_at": "2017-10-12T10:51:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `Geth/v1.7.0-stable-6c6c7b2a/linux-arm/go1.7.4`\r\nOS & Version: Raspbian Jessie\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nI am trying to sync my geth nodes in `light` mode to Byzantium, but without result. I did the same in `fast` and \"normal\" mode and I had no problems (not on Raspbian, on Ubuntu 16.04).\r\n\r\n#### Actual behaviour\r\n<pre>\r\npi@smartpi:~ $ geth --testnet --syncmode light --rpc --rpcport 8545 --rpcaddr 0.0.0.0 --rpccorsdomain \"*\" --rpcapi \"eth,net,web3\" console\r\nWARN [09-20|09:41:07] No etherbase set and no accounts found as default \r\nINFO [09-20|09:41:07] Starting peer-to-peer node               instance=Geth/v1.7.0-stable-6c6c7b2a/linux-arm/go1.7.4\r\nINFO [09-20|09:41:07] Allocated cache and file handles         database=/home/pi/.ethereum/testnet/geth/lightchaindata cache=128 handles=1024\r\nINFO [09-20|09:41:12] Initialised chain configuration          config=\"{ChainID: 3 Homestead: 0 DAO: <nil> DAOSupport: true EIP150: 0 EIP155: 10 EIP158: 10 Byzantium: 1700000 Engine: ethash}\"\r\nINFO [09-20|09:41:12] Disk storage enabled for ethash caches   dir=/home/pi/.ethereum/testnet/geth/ethash count=3\r\nINFO [09-20|09:41:12] Disk storage enabled for ethash DAGs     dir=/home/pi/.ethash                       count=2\r\nINFO [09-20|09:41:12] Added trusted CHT for ropsten testnet \r\nINFO [09-20|09:41:12] Loaded most recent local header          number=1698879 hash=e647d8…33e300 td=2219844550310073\r\nINFO [09-20|09:41:12] Starting P2P networking \r\nINFO [09-20|09:41:16] UDP listener up                          self=enode://5ef57ecbc07e5c4218ebb95193a9b1ab957dbd5994f9bebf4aae20d99068018ef1136a555f8cbefa9ddbc4b459525a807ca8a644523962cf51b07ef98990aa15@[::]:30303\r\nWARN [09-20|09:41:16] Light client mode is an experimental feature \r\nINFO [09-20|09:41:16] RLPx listener up                         self=enode://5ef57ecbc07e5c4218ebb95193a9b1ab957dbd5994f9bebf4aae20d99068018ef1136a555f8cbefa9ddbc4b459525a807ca8a644523962cf51b07ef98990aa15@[::]:30303\r\nERROR[09-20|09:41:16] Failed to retrieve current release       err=\"can't fetch trie key 5380c7b7ae81a58eb98d9c78de4a1fd7fd9535fc953ed2be602daaa41767312a: no suitable peers available\"\r\nINFO [09-20|09:41:16] IPC endpoint opened: /home/pi/.ethereum/testnet/geth.ipc \r\nINFO [09-20|09:41:16] HTTP endpoint opened: http://0.0.0.0:8545 \r\nWelcome to the Geth JavaScript console!\r\n\r\ninstance: Geth/v1.7.0-stable-6c6c7b2a/linux-arm/go1.7.4\r\n modules: admin:1.0 debug:1.0 eth:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0\r\n\r\n#...after a lot of time (~1h)\r\n> net.peerCount\r\n0\r\n#...after another lot of time (~1h)\r\n> INFO [09-20|10:03:13] Block synchronisation started \r\nINFO [09-20|10:03:14] Imported new block headers               count=0 elapsed=98.765ms number=1699071 hash=999f9e…ea11f9 ignored=192\r\nINFO [09-20|10:03:15] Imported new block headers               count=0 elapsed=92.418ms number=1699263 hash=143fed…838a59 ignored=192\r\nINFO [09-20|10:03:15] Imported new block headers               count=0 elapsed=105.107ms number=1699455 hash=f95284…e50809 ignored=192\r\nINFO [09-20|10:03:16] Imported new block headers               count=0 elapsed=97.551ms  number=1699647 hash=af0195…6502d7 ignored=192\r\nINFO [09-20|10:03:17] Imported new block headers               count=0 elapsed=92.750ms  number=1699839 hash=8a4715…f88649 ignored=192\r\nWARN [09-20|10:03:17] Rolled back headers                      count=160 header=1698879->1698879 fast=0->0 block=0->0\r\nWARN [09-20|10:03:17] Synchronisation failed, dropping peer    peer=00ae60771d9815da err=\"retrieved hash chain is invalid\"\r\nINFO [09-20|10:05:27] Imported new block headers               count=0   elapsed=96.529ms  number=1699071 hash=999f9e…ea11f9 ignored=192\r\nINFO [09-20|10:05:27] Imported new block headers               count=0   elapsed=102.277ms number=1699263 hash=143fed…838a59 ignored=192\r\nINFO [09-20|10:05:28] Imported new block headers               count=0   elapsed=94.570ms  number=1699455 hash=f95284…e50809 ignored=192\r\nINFO [09-20|10:05:28] Imported new block headers               count=0   elapsed=95.965ms  number=1699647 hash=af0195…6502d7 ignored=192\r\nINFO [09-20|10:05:28] Imported new block headers               count=0   elapsed=88.746ms  number=1699839 hash=8a4715…f88649 ignored=192\r\nWARN [09-20|10:05:29] Rolled back headers                      count=160 header=1698879->1698879 fast=0->0 block=0->0\r\nWARN [09-20|10:05:29] Synchronisation failed, dropping peer    peer=e71ba996b923e475 err=\"retrieved hash chain is invalid\"\r\n\r\n> net.peerCount\r\n0\r\n\r\n</pre>\r\n\r\n#### Steps to reproduce the behaviour\r\nStart a geth client in `light` mode before the block `1700000` on Ropsten and try to sync the node to the last block.\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 1,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/331171442",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15174#issuecomment-331171442",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
    "id": 331171442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTE3MTQ0Mg==",
    "user": {
      "login": "dstreppa",
      "id": 11214654,
      "node_id": "MDQ6VXNlcjExMjE0NjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11214654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dstreppa",
      "html_url": "https://github.com/dstreppa",
      "followers_url": "https://api.github.com/users/dstreppa/followers",
      "following_url": "https://api.github.com/users/dstreppa/following{/other_user}",
      "gists_url": "https://api.github.com/users/dstreppa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dstreppa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dstreppa/subscriptions",
      "organizations_url": "https://api.github.com/users/dstreppa/orgs",
      "repos_url": "https://api.github.com/users/dstreppa/repos",
      "events_url": "https://api.github.com/users/dstreppa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dstreppa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-21T14:20:49Z",
    "updated_at": "2017-09-21T14:20:49Z",
    "author_association": "NONE",
    "body": "I think the problem is due to the fact that the found peers are always running geth 1.6.x, as in the example below:\r\n<pre>\r\n> admin.peers\r\n[{\r\n    caps: [\"eth/62\", \"eth/63\", \"les/1\"],\r\n    id: \"ceb6160d1c651a833702e117677ee9eb5d24ba9a311feaf0aa2ef7d9bb3b9628741e5f636d30eaa4680dce535017242bdf321b24085e4ed18151aff28463f3cd\",\r\n    name: \"Geth/v1.6.5-stable-cf87713d/linux-arm/go1.8.3\",\r\n    network: {\r\n      localAddress: \"195.176.65.228:46846\",\r\n      remoteAddress: \"80.108.195.55:30303\"\r\n    },\r\n    protocols: {\r\n      les: {\r\n        difficulty: 1933593126368367,\r\n        head: \"e9773c6ee1d81c9893190a7092244f267b4e0f15aeb08fab6ac31b26b87cc9bb\",\r\n        version: 1\r\n      }\r\n    }\r\n}]\r\n</pre>",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/331171442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/331909529",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15174#issuecomment-331909529",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
    "id": 331909529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTkwOTUyOQ==",
    "user": {
      "login": "dstreppa",
      "id": 11214654,
      "node_id": "MDQ6VXNlcjExMjE0NjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11214654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dstreppa",
      "html_url": "https://github.com/dstreppa",
      "followers_url": "https://api.github.com/users/dstreppa/followers",
      "following_url": "https://api.github.com/users/dstreppa/following{/other_user}",
      "gists_url": "https://api.github.com/users/dstreppa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dstreppa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dstreppa/subscriptions",
      "organizations_url": "https://api.github.com/users/dstreppa/orgs",
      "repos_url": "https://api.github.com/users/dstreppa/repos",
      "events_url": "https://api.github.com/users/dstreppa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dstreppa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-25T15:01:07Z",
    "updated_at": "2017-09-25T15:01:07Z",
    "author_association": "NONE",
    "body": "Friday geth started to find light peers, now it works.\r\n<pre>\r\n...\r\n{\r\n    caps: [\"eth/62\", \"eth/63\", \"les/1\", \"shh/5\"],\r\n    id: \"b2e71ac32168cc263a507125d11e0d34e1d530cbe8c9ae81c8bc76d01c94616d4beec41160885577222ac547fcc5f03db31c55e1a56c4351d5f47a6ec62a41cc\",\r\n    name: \"Geth/v1.7.0-stable/linux-amd64/go1.9\",\r\n    network: {\r\n      localAddress: \"195.176.65.217:41888\",\r\n      remoteAddress: \"51.15.218.125:30303\"\r\n    },\r\n    protocols: {\r\n      les: {\r\n        difficulty: 211358845068,\r\n        head: \"148a9dced4b3612df256de22586f3e1e339f1fac4b2a93eb180315f6af5dbbbb\",\r\n        version: 1\r\n      }\r\n    }\r\n}, {\r\n    caps: [\"eth/62\", \"eth/63\", \"les/1\"],\r\n    id: \"e0a1c578e6ad39e68ea5327a24c07a5f1b99602c7a41968861f4517f4233009854cbdff95bd0b9f659848525211c3ee99d640d8cfde41615585b467601c1db7a\",\r\n    name: \"Geth/v1.7.0-stable-6c6c7b2a/linux-amd64/go1.9\",\r\n    network: {\r\n      localAddress: \"195.176.65.217:36912\",\r\n      remoteAddress: \"52.208.46.161:30311\"\r\n    },\r\n    protocols: {\r\n      les: {\r\n        difficulty: 2834117325842971,\r\n        head: \"4d43ed52cef6dc065fb71090f6e8e7f8e1de7dfd45b34574a4667293c36e5522\",\r\n        version: 1\r\n      }\r\n    }\r\n},\r\n...\r\n</pre>",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/331909529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/336092890",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15174#issuecomment-336092890",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
    "id": 336092890,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjA5Mjg5MA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-12T10:51:42Z",
    "updated_at": "2017-10-12T10:51:42Z",
    "author_association": "MEMBER",
    "body": "Thanks for the confirm that it works, closing. Btw, it may have been light client bootnode issues. We'll try to set up a few more light bootnodes to ensure it doesn't happen again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/336092890/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353388518",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15174#issuecomment-353388518",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
    "id": 353388518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzM4ODUxOA==",
    "user": {
      "login": "nikita-fuchs",
      "id": 11761828,
      "node_id": "MDQ6VXNlcjExNzYxODI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11761828?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikita-fuchs",
      "html_url": "https://github.com/nikita-fuchs",
      "followers_url": "https://api.github.com/users/nikita-fuchs/followers",
      "following_url": "https://api.github.com/users/nikita-fuchs/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikita-fuchs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikita-fuchs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikita-fuchs/subscriptions",
      "organizations_url": "https://api.github.com/users/nikita-fuchs/orgs",
      "repos_url": "https://api.github.com/users/nikita-fuchs/repos",
      "events_url": "https://api.github.com/users/nikita-fuchs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikita-fuchs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T16:03:49Z",
    "updated_at": "2017-12-21T16:03:49Z",
    "author_association": "NONE",
    "body": "Issue seems to persist, running geth in lightmode will not sync, admin.peers returns nothing. Could anyone please provide boot nodes for light syncing ? Running 1.7.2. btw.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/353388518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/354014015",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15174#issuecomment-354014015",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15174",
    "id": 354014015,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDAxNDAxNQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-26T21:16:11Z",
    "updated_at": "2017-12-26T21:23:15Z",
    "author_association": "NONE",
    "body": "Upgraded an old VM from v1.7.1 to v1.7.3 and I couldn't sync in `\"light\"` mode.\r\n\r\nCould just do `geth removedb` and try again.\r\n\r\nI re-synced using `--syncmode=\"fast\"` mode instead.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/354014015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/26532",
  "id": 1552013390,
  "node_id": "I_kwDOAOvK985cgdhO",
  "number": 26532,
  "title": "Issue with Bytes32 implementation",
  "user": {
    "login": "jjstew50",
    "id": 110565552,
    "node_id": "U_kgDOBpcYsA",
    "avatar_url": "https://avatars.githubusercontent.com/u/110565552?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjstew50",
    "html_url": "https://github.com/jjstew50",
    "followers_url": "https://api.github.com/users/jjstew50/followers",
    "following_url": "https://api.github.com/users/jjstew50/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjstew50/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjstew50/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjstew50/subscriptions",
    "organizations_url": "https://api.github.com/users/jjstew50/orgs",
    "repos_url": "https://api.github.com/users/jjstew50/repos",
    "events_url": "https://api.github.com/users/jjstew50/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjstew50/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-01-22T05:50:59Z",
  "updated_at": "2023-01-30T08:31:24Z",
  "closed_at": "2023-01-30T08:31:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "https://github.com/ethereum/go-ethereum/blob/2b44ef5f93cc7479a77890917a29684b56e9167a/signer/core/apitypes/types.go#L387\r\n\r\nThis if statement makes it so all types if there is a type will fall into this statement. I am trying to encode a bytes32 array and I think it should go to the encodePrimitive function instead but the code is showing this is not possible. Can someone help me with this encoding?\r\n\r\n```\r\nsignerData := signer.TypedData{\r\nTypes: signer.Types{\r\n\t\"SignedMessage\": []signer.Type{\r\n\t\t{Name: \"key\", Type: \"bytes32\"},\r\n\t\t{Name: \"sender\", Type: \"address\"},\r\n\t\t{Name: \"amount\", Type: \"uint256\"},\r\n\t},\r\n\t\"EIP712Domain\": []signer.Type{\r\n\t\t{Name: \"name\", Type: \"string\"},\r\n\t\t{Name: \"version\", Type: \"string\"},\r\n\t\t{Name: \"chainId\", Type: \"uint256\"},\r\n\t},\r\n},\r\n// PrimaryType: \"SignedMessage\",\r\nDomain: signer.TypedDataDomain{\r\n\tName:    \"Neptune Bridge\",\r\n\tVersion: \"0.0.1\",\r\n\tChainId: chainId,\r\n},\r\nMessage: signer.TypedDataMessage{\r\n\t\"key\":    key,\r\n\t\"sender\": account,\r\n\t\"amount\": bridgedAmount,\r\n},\r\n}\r\n\r\ntypedDataHash, err := signerData.HashStruct(\"SignedMessage\", signerData.Message)\r\nif err != nil {\r\nlog.Fatal(err)\r\n}\r\nfmt.Println(\"\\nTypedDataHash: \",typedDataHash)\r\n```\r\n\r\nThis code snippet will return a different hash than in solidity:\r\n```\r\n        bytes32 hashToVerify = keccak256(\r\n            abi.encode(keccak256(\"SignedMessage(bytes32 key, address sender, uint256 amount)\"), key, sender, amount)\r\n        );\r\n\r\n        return hashToVerify;\r\n```\r\n\r\nI was able to verify my domainSeparatorHash were the same in solidity and go. But the message is now hashing the same between the two. Can someone help me with this? Thanks!",
  "closed_by": {
    "login": "jjstew50",
    "id": 110565552,
    "node_id": "U_kgDOBpcYsA",
    "avatar_url": "https://avatars.githubusercontent.com/u/110565552?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjstew50",
    "html_url": "https://github.com/jjstew50",
    "followers_url": "https://api.github.com/users/jjstew50/followers",
    "following_url": "https://api.github.com/users/jjstew50/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjstew50/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjstew50/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjstew50/subscriptions",
    "organizations_url": "https://api.github.com/users/jjstew50/orgs",
    "repos_url": "https://api.github.com/users/jjstew50/repos",
    "events_url": "https://api.github.com/users/jjstew50/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjstew50/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408135635",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26532#issuecomment-1408135635",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532",
    "id": 1408135635,
    "node_id": "IC_kwDOAOvK985T7nHT",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T07:51:28Z",
    "updated_at": "2023-01-30T07:51:28Z",
    "author_association": "MEMBER",
    "body": "Could you please provide the output that you obtain for the first snippet, and also solidity? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408135635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408182840",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/26532#issuecomment-1408182840",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/26532",
    "id": 1408182840,
    "node_id": "IC_kwDOAOvK985T7yo4",
    "user": {
      "login": "jjstew50",
      "id": 110565552,
      "node_id": "U_kgDOBpcYsA",
      "avatar_url": "https://avatars.githubusercontent.com/u/110565552?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jjstew50",
      "html_url": "https://github.com/jjstew50",
      "followers_url": "https://api.github.com/users/jjstew50/followers",
      "following_url": "https://api.github.com/users/jjstew50/following{/other_user}",
      "gists_url": "https://api.github.com/users/jjstew50/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jjstew50/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jjstew50/subscriptions",
      "organizations_url": "https://api.github.com/users/jjstew50/orgs",
      "repos_url": "https://api.github.com/users/jjstew50/repos",
      "events_url": "https://api.github.com/users/jjstew50/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jjstew50/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T08:31:05Z",
    "updated_at": "2023-01-30T08:31:24Z",
    "author_association": "NONE",
    "body": "Figured out my issue in solidity I was using:\r\n`        bytes32 hashToVerify = keccak256(\r\n            abi.encode(keccak256(\"SignedMessage(bytes32 key, address sender,uint256 amount)\"),nonce,sender,bridgedAmount)\r\n        );`\r\n\r\nWhen it shouldve been:\r\n`        bytes32 hashToVerify = keccak256(\r\n            abi.encode(keccak256(\"SignedMessage(bytes32 key,address sender,uint256 amount)\"),nonce,sender,bridgedAmount)\r\n        );`\r\n\r\nI had added in a space between `key,` and  `address` because this was a string input it encoded differently that the ethereum-go code. This was a pain in the butt to figure out the issue but the issue was in my solidity not go code. For anyone else out there, check that you don't have spaces if you are hardcoding values in solidity. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1408182840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

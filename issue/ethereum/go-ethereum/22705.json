{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22705",
  "id": 862644395,
  "node_id": "MDU6SXNzdWU4NjI2NDQzOTU=",
  "number": 22705,
  "title": "web3j.getGasPrice",
  "user": {
    "login": "msak222",
    "id": 19371846,
    "node_id": "MDQ6VXNlcjE5MzcxODQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/19371846?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/msak222",
    "html_url": "https://github.com/msak222",
    "followers_url": "https://api.github.com/users/msak222/followers",
    "following_url": "https://api.github.com/users/msak222/following{/other_user}",
    "gists_url": "https://api.github.com/users/msak222/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/msak222/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msak222/subscriptions",
    "organizations_url": "https://api.github.com/users/msak222/orgs",
    "repos_url": "https://api.github.com/users/msak222/repos",
    "events_url": "https://api.github.com/users/msak222/events{/privacy}",
    "received_events_url": "https://api.github.com/users/msak222/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2021-04-20T10:01:01Z",
  "updated_at": "2021-05-10T03:35:14Z",
  "closed_at": "2021-05-10T03:35:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The gasPrice of the main network is more than 300 Gwei, but web3j.getGasPrice is obtained from our latest version of the full node and occasionally returns 6 or 2. What is the problem?",
  "closed_by": {
    "login": "msak222",
    "id": 19371846,
    "node_id": "MDQ6VXNlcjE5MzcxODQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/19371846?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/msak222",
    "html_url": "https://github.com/msak222",
    "followers_url": "https://api.github.com/users/msak222/followers",
    "following_url": "https://api.github.com/users/msak222/following{/other_user}",
    "gists_url": "https://api.github.com/users/msak222/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/msak222/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msak222/subscriptions",
    "organizations_url": "https://api.github.com/users/msak222/orgs",
    "repos_url": "https://api.github.com/users/msak222/repos",
    "events_url": "https://api.github.com/users/msak222/events{/privacy}",
    "received_events_url": "https://api.github.com/users/msak222/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823168974",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823168974",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823168974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzE2ODk3NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T10:34:54Z",
    "updated_at": "2021-04-20T10:34:54Z",
    "author_association": "MEMBER",
    "body": "Just tried it on one of our nodes, returned 209 Gwei. Re you sure the node you're querying is in sync?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823168974/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823171515",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823171515",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823171515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzE3MTUxNQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T10:39:33Z",
    "updated_at": "2021-04-20T10:39:33Z",
    "author_association": "MEMBER",
    "body": "Ran it against all of our bootnodes, 6 returned 206 gwei, and one which is not synced returned 1 gwei.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823171515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823177029",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823177029",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823177029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzE3NzAyOQ==",
    "user": {
      "login": "msak222",
      "id": 19371846,
      "node_id": "MDQ6VXNlcjE5MzcxODQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19371846?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msak222",
      "html_url": "https://github.com/msak222",
      "followers_url": "https://api.github.com/users/msak222/followers",
      "following_url": "https://api.github.com/users/msak222/following{/other_user}",
      "gists_url": "https://api.github.com/users/msak222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msak222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msak222/subscriptions",
      "organizations_url": "https://api.github.com/users/msak222/orgs",
      "repos_url": "https://api.github.com/users/msak222/repos",
      "events_url": "https://api.github.com/users/msak222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msak222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T10:49:49Z",
    "updated_at": "2021-04-20T10:49:59Z",
    "author_association": "NONE",
    "body": "We found that occasionally a very low gasPrice will be returned at a very small stage. Our node is the latest version and synchronized to the latest block. We are also very confused, so we ask for your help.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823177029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823177954",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823177954",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823177954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzE3Nzk1NA==",
    "user": {
      "login": "msak222",
      "id": 19371846,
      "node_id": "MDQ6VXNlcjE5MzcxODQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19371846?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msak222",
      "html_url": "https://github.com/msak222",
      "followers_url": "https://api.github.com/users/msak222/followers",
      "following_url": "https://api.github.com/users/msak222/following{/other_user}",
      "gists_url": "https://api.github.com/users/msak222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msak222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msak222/subscriptions",
      "organizations_url": "https://api.github.com/users/msak222/orgs",
      "repos_url": "https://api.github.com/users/msak222/repos",
      "events_url": "https://api.github.com/users/msak222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msak222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T10:51:31Z",
    "updated_at": "2021-04-20T10:51:31Z",
    "author_association": "NONE",
    "body": "If you have the conditions, please monitor for a longer time, such as whether there is this problem in two days, we will continue to observe the problem",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823177954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823222671",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823222671",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823222671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzIyMjY3MQ==",
    "user": {
      "login": "bulgakovk",
      "id": 8983736,
      "node_id": "MDQ6VXNlcjg5ODM3MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8983736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bulgakovk",
      "html_url": "https://github.com/bulgakovk",
      "followers_url": "https://api.github.com/users/bulgakovk/followers",
      "following_url": "https://api.github.com/users/bulgakovk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bulgakovk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bulgakovk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bulgakovk/subscriptions",
      "organizations_url": "https://api.github.com/users/bulgakovk/orgs",
      "repos_url": "https://api.github.com/users/bulgakovk/repos",
      "events_url": "https://api.github.com/users/bulgakovk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bulgakovk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T12:11:18Z",
    "updated_at": "2021-04-20T12:11:18Z",
    "author_association": "NONE",
    "body": "Faced the same issue a few times. I have also found a correlation between extremely low fees and mined blocks with 0 transactions:\r\n<img width=\"907\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8983736/115389970-6856c880-a1e6-11eb-9bfb-a90fc8a22526.png\">\r\n\r\n<img width=\"1290\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8983736/115390063-815f7980-a1e6-11eb-803e-1baf4070d37c.png\">\r\n\r\nI do see this comment:\r\nhttps://github.com/ethereum/go-ethereum/blob/cc33398cef4d9faeaec1e68e13029e1a0e1d6e41/eth/gasprice/gasprice.go#L182-L185\r\n\r\nbut not sure where exactly the case with 0 length TXs blocks is handled in the function. Might it be the root reason for these random drops?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823222671/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823485060",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823485060",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823485060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzQ4NTA2MA==",
    "user": {
      "login": "leevlad",
      "id": 1399991,
      "node_id": "MDQ6VXNlcjEzOTk5OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1399991?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leevlad",
      "html_url": "https://github.com/leevlad",
      "followers_url": "https://api.github.com/users/leevlad/followers",
      "following_url": "https://api.github.com/users/leevlad/following{/other_user}",
      "gists_url": "https://api.github.com/users/leevlad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leevlad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leevlad/subscriptions",
      "organizations_url": "https://api.github.com/users/leevlad/orgs",
      "repos_url": "https://api.github.com/users/leevlad/repos",
      "events_url": "https://api.github.com/users/leevlad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leevlad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T17:58:10Z",
    "updated_at": "2021-04-20T17:58:10Z",
    "author_association": "NONE",
    "body": "I would like to chime in here and report that this has been an issue for us for months, and is still ongoing on the latest version of `geth`. We have not been able to find a good way to isolate the conditions under which this issue occurs as it seems rather sporadic.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823485060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823894538",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-823894538",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 823894538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzg5NDUzOA==",
    "user": {
      "login": "msak222",
      "id": 19371846,
      "node_id": "MDQ6VXNlcjE5MzcxODQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19371846?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msak222",
      "html_url": "https://github.com/msak222",
      "followers_url": "https://api.github.com/users/msak222/followers",
      "following_url": "https://api.github.com/users/msak222/following{/other_user}",
      "gists_url": "https://api.github.com/users/msak222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msak222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msak222/subscriptions",
      "organizations_url": "https://api.github.com/users/msak222/orgs",
      "repos_url": "https://api.github.com/users/msak222/repos",
      "events_url": "https://api.github.com/users/msak222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msak222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-21T08:48:29Z",
    "updated_at": "2021-04-21T08:48:29Z",
    "author_association": "NONE",
    "body": "> Ran it against all of our bootnodes, 6 returned 206 gwei, and one which is not synced returned 1 gwei.\r\n\r\n\r\n\r\n> Faced the same issue a few times. I have also found a correlation between extremely low fees and mined blocks with 0 transactions:\r\n> <img alt=\"image\" width=\"907\" src=\"https://user-images.githubusercontent.com/8983736/115389970-6856c880-a1e6-11eb-9bfb-a90fc8a22526.png\">\r\n> \r\n> <img alt=\"image\" width=\"1290\" src=\"https://user-images.githubusercontent.com/8983736/115390063-815f7980-a1e6-11eb-803e-1baf4070d37c.png\">\r\n> \r\n> I do see this comment:\r\n> https://github.com/ethereum/go-ethereum/blob/cc33398cef4d9faeaec1e68e13029e1a0e1d6e41/eth/gasprice/gasprice.go#L182-L185\r\n> \r\n> but not sure where exactly the case with 0 length TXs blocks is handled in the function. Might it be the root reason for these random drops?\r\n\r\nHi guys. A friend encountered a similar problem above, please verify the situation, please @karalabe ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/823894538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825227537",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825227537",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825227537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTIyNzUzNw==",
    "user": {
      "login": "junderw",
      "id": 11246316,
      "node_id": "MDQ6VXNlcjExMjQ2MzE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junderw",
      "html_url": "https://github.com/junderw",
      "followers_url": "https://api.github.com/users/junderw/followers",
      "following_url": "https://api.github.com/users/junderw/following{/other_user}",
      "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
      "organizations_url": "https://api.github.com/users/junderw/orgs",
      "repos_url": "https://api.github.com/users/junderw/repos",
      "events_url": "https://api.github.com/users/junderw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junderw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T22:39:41Z",
    "updated_at": "2021-04-22T22:39:41Z",
    "author_association": "NONE",
    "body": "Verification of this bug requires polling a geth node once every minute for a couple days until congestion occurs.\r\n\r\nI think it has to do with blocks, so maybe even polling / gathering data once every 15 seconds would be better to find any issues sooner.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825227537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825345619",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825345619",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825345619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTM0NTYxOQ==",
    "user": {
      "login": "junderw",
      "id": 11246316,
      "node_id": "MDQ6VXNlcjExMjQ2MzE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junderw",
      "html_url": "https://github.com/junderw",
      "followers_url": "https://api.github.com/users/junderw/followers",
      "following_url": "https://api.github.com/users/junderw/following{/other_user}",
      "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
      "organizations_url": "https://api.github.com/users/junderw/orgs",
      "repos_url": "https://api.github.com/users/junderw/repos",
      "events_url": "https://api.github.com/users/junderw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junderw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T02:41:07Z",
    "updated_at": "2021-04-23T02:42:29Z",
    "author_association": "NONE",
    "body": "@bulgakovk\r\n\r\nCan you share some recent \"dips\"... I think this is a constant issue among all instances. So it definitely has to do with the blocks.\r\n\r\nOur most recent dips that were consitent across all of our instances were\r\n\r\n2021/04/22 08:47:00 UTC (dip to 6 gwei from 112 gwei)\r\n2021/04/22 08:53:00 UTC (dip to 6 gwei from 112 gwei)\r\n\r\n(times in screenshot are JST (UTC+09:00))\r\n![スクリーンショット_2021-04-23_11-41-51](https://user-images.githubusercontent.com/11246316/115810475-ee625180-a428-11eb-91a5-a517a6443d95.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825345619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825347022",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825347022",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825347022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTM0NzAyMg==",
    "user": {
      "login": "junderw",
      "id": 11246316,
      "node_id": "MDQ6VXNlcjExMjQ2MzE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11246316?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/junderw",
      "html_url": "https://github.com/junderw",
      "followers_url": "https://api.github.com/users/junderw/followers",
      "following_url": "https://api.github.com/users/junderw/following{/other_user}",
      "gists_url": "https://api.github.com/users/junderw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/junderw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/junderw/subscriptions",
      "organizations_url": "https://api.github.com/users/junderw/orgs",
      "repos_url": "https://api.github.com/users/junderw/repos",
      "events_url": "https://api.github.com/users/junderw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/junderw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T02:45:07Z",
    "updated_at": "2021-04-23T02:45:07Z",
    "author_association": "NONE",
    "body": "I think you probably have similar dips.\r\n\r\nOur polling job polls all of the instances in sequence, but in general the requests should only be a few ms off for us... maybe if your jobs are off by 30 seconds etc. then maybe it won't be exactly the same but I am interested to see if you have dips at similar time.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825347022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825528635",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825528635",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825528635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTUyODYzNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T09:26:19Z",
    "updated_at": "2021-04-23T09:26:19Z",
    "author_association": "MEMBER",
    "body": "> Verification of this bug requires polling a geth node once every minute for a couple days until congestion occurs.\r\n\r\nNo, that should not be posslbe. Any given segment of blocks should lead to a totally deterministic gas oracle. If I'm wrong about this, it's a bug which needs to be fixed. I'm 99% certain that if I replay the GPO on the segment used in the charts above, looking only at the actual transactions that were included in the blocks, I would get an identical chart. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825528635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825539131",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825539131",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825539131,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTUzOTEzMQ==",
    "user": {
      "login": "bulgakovk",
      "id": 8983736,
      "node_id": "MDQ6VXNlcjg5ODM3MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8983736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bulgakovk",
      "html_url": "https://github.com/bulgakovk",
      "followers_url": "https://api.github.com/users/bulgakovk/followers",
      "following_url": "https://api.github.com/users/bulgakovk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bulgakovk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bulgakovk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bulgakovk/subscriptions",
      "organizations_url": "https://api.github.com/users/bulgakovk/orgs",
      "repos_url": "https://api.github.com/users/bulgakovk/repos",
      "events_url": "https://api.github.com/users/bulgakovk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bulgakovk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T09:44:59Z",
    "updated_at": "2021-04-23T09:44:59Z",
    "author_association": "NONE",
    "body": "> @bulgakovk\r\n> \r\n> Can you share some recent \"dips\"... I think this is a constant issue among all instances. So it definitely has to do with the blocks.\r\n\r\n\r\nConfirming one of our nodes had the same dip exactly at that time (UTC timezone):\r\n<img width=\"667\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8983736/115852424-bced8400-a430-11eb-98b5-870144d9e4b9.png\">\r\n\r\nHowever, it's not a case for the second node:\r\n<img width=\"670\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8983736/115852607-eefee600-a430-11eb-81e0-a7bc4698e4e1.png\">\r\n\r\nIt seems to depend on which exactly chain segment the node has used to predict the price (since the method returns some percentile of TX gas prices included in the recent blocks IIRC).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825539131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825944958",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22705#issuecomment-825944958",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22705",
    "id": 825944958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTk0NDk1OA==",
    "user": {
      "login": "Melraidin",
      "id": 1080952,
      "node_id": "MDQ6VXNlcjEwODA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1080952?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Melraidin",
      "html_url": "https://github.com/Melraidin",
      "followers_url": "https://api.github.com/users/Melraidin/followers",
      "following_url": "https://api.github.com/users/Melraidin/following{/other_user}",
      "gists_url": "https://api.github.com/users/Melraidin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Melraidin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Melraidin/subscriptions",
      "organizations_url": "https://api.github.com/users/Melraidin/orgs",
      "repos_url": "https://api.github.com/users/Melraidin/repos",
      "events_url": "https://api.github.com/users/Melraidin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Melraidin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T21:56:10Z",
    "updated_at": "2021-04-23T21:56:10Z",
    "author_association": "NONE",
    "body": "For instances of this occurring I walked the chain to get the gas price at each block. Here's a block where I saw an unusually low gas price:\r\n```\r\nBlock number: 12287282\r\nGas price: 1,000,000,000\r\nPrices used in gas calculation: [+0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +0 +1 +1 +1 +1 +1 +1 +1000000000\r\n +1000000000 +1000000000 +1000000000 +1000000000 +1000000000 +1000000000 +120000000000 +132000000000 +132000000000 +132000000000 +132000000000 +135000001561 +135300000000 +135300000000 +141015000000 +141075000262 +148000001459 +14900000\r\n0000 +149000000000 +150000000000 +150000000000 +150000000000 +150000000000 +150000000000 +150000000000 +161700000000 +162000000000 +164000000000]\r\n```\r\n\r\nThat's a lot of zero or one wei gas prices. It makes sense though, given we grab the cheapest transactions from the blocks instead of sampling a random set of transactions from the blocks we're using in the estimate: https://github.com/ethereum/go-ethereum/blob/34f3c9539b49396b17524ee72ea20498f96600b9/eth/gasprice/gasprice.go#L198\r\n\r\nHere's links to a few of these transactions to confirm I'm not misreading them and perhaps see how they ended up in a block to begin with:\r\nhttps://etherscan.io/tx/0xc370d0a480b477fe2465f4259e6cf21603d9cc4906aa1d86704292e6fa369e0a\r\nhttps://etherscan.io/tx/0xb11fb82fbbc8499bfc2d6c0e20ae5b358b5b3dd7ee91ff56afa773543a19da93\r\nhttps://etherscan.io/tx/0x939ef48c3bb73fc4b389496c573d77305d8ff1f8f4ed3221ef6d61add378fc80",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825944958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

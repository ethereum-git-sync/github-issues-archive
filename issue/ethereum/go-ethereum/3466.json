{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3466",
  "id": 196437643,
  "node_id": "MDU6SXNzdWUxOTY0Mzc2NDM=",
  "number": 3466,
  "title": "[LES] stalls with 'Unregister failed: peer is not registered'",
  "user": {
    "login": "luclu",
    "id": 10135872,
    "node_id": "MDQ6VXNlcjEwMTM1ODcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/10135872?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luclu",
    "html_url": "https://github.com/luclu",
    "followers_url": "https://api.github.com/users/luclu/followers",
    "following_url": "https://api.github.com/users/luclu/following{/other_user}",
    "gists_url": "https://api.github.com/users/luclu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luclu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luclu/subscriptions",
    "organizations_url": "https://api.github.com/users/luclu/orgs",
    "repos_url": "https://api.github.com/users/luclu/repos",
    "events_url": "https://api.github.com/users/luclu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luclu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2016-12-19T15:14:59Z",
  "updated_at": "2018-04-16T14:37:28Z",
  "closed_at": "2018-04-16T14:37:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.5.5`\r\nOS & Version: OSX 10.12.2\r\n\r\n#### Expected behaviour\r\n\r\n- Initial `--light` catch up\r\n- continuously syncing new blocks\r\n- RPC availability\r\n\r\n#### Actual behaviour\r\n\r\n- Initilal `--light` caught up to current block (2.837.612 at time of execution)\r\n- after that:\r\n  - syncing stops\r\n  - console log (*31.113 times* within 10.02s): `eth/downloader/downloader.go:269] Unregister failed: peer is not registered`\r\n- RPC partially stalls:\r\n  - `admin.peers.length` = 5\r\n  - `eth.blockNumber` = 2.837.612 (same as at time of stall)\r\n  - `eth.syncing` = false\r\n  - `eth.getBlock(X)` will won't return and lock (using `geth attach`, e.g. X = 1); reproducible on new console\r\n \r\n#### Steps to reproduce the behaviour\r\n\r\nNone found, though I was using `geth --light --cache 1024`.\r\n\r\n#### Backtrace\r\n\r\n````text\r\nI1219 15:35:18.566900 ethdb/database.go:83] Allotted 1024MB cache and 1024 file handles to /Users/ich/Library/Ethereum/geth/lightchaindata\r\nI1219 15:35:18.669898 ethdb/database.go:176] closed db:/Users/ich/Library/Ethereum/geth/lightchaindata\r\nI1219 15:35:18.670444 node/node.go:176] instance: Geth/v1.5.5-stable-ff07d548/darwin/go1.7.4\r\nI1219 15:35:18.670460 ethdb/database.go:83] Allotted 1024MB cache and 1024 file handles to /Users/ich/Library/Ethereum/geth/lightchaindata\r\nI1219 15:35:18.901578 light/lightchain.go:120] Added trusted CHT for mainnet\r\nI1219 15:35:18.901693 light/lightchain.go:172] Last header: #2761371 [4a40c552…] TD=99422336706368286136\r\nI1219 15:35:18.905723 p2p/server.go:342] Starting Server\r\nI1219 15:35:18.907833 les/backend.go:194] WARNING: light client mode is an experimental feature\r\nI1219 15:35:18.907860 p2p/server.go:610] Listening on [::]:30303\r\nI1219 15:35:18.909682 node/node.go:341] IPC endpoint opened: /Users/ich/Library/Ethereum/geth.ipc\r\nI1219 15:35:20.928578 eth/downloader/downloader.go:326] Block synchronisation started\r\nI1219 15:35:23.135212 core/headerchain.go:331] imported 192 headers in    1.546s. #2761563 [bcbea230… / 5d29397f…]\r\nI1219 15:35:23.184164 core/headerchain.go:331] imported 192 headers in  38.788ms. #2761755 [4e689bf7… / 7f341d19…]\r\nI1219 15:35:23.909040 contracts/release/release.go:134] Failed to retrieve current release: Missing trie node 59dee8e79ccf34c54eae10afec703c1144149dff95fd26f3b73a2bbf2ab8adb4\r\nI1219 15:36:08.544267 core/headerchain.go:331] imported 2048 headers in 248.221ms. #2763803 [8292bc90… / a4084231…]\r\nI1219 15:36:08.919802 core/headerchain.go:331] imported 2048 headers in 254.344ms. #2765851 [6e2937cf… / 5ea63e0c…]\r\nI1219 15:36:09.216629 core/headerchain.go:331] imported 2048 headers in 239.308ms. #2767899 [c2f8afed… / e0782e58…]\r\nI1219 15:36:09.509581 core/headerchain.go:331] imported 2048 headers in 239.083ms. #2769947 [fdb0f466… / d20babc8…]\r\nI1219 15:36:09.950219 core/headerchain.go:331] imported 2048 headers in 373.970ms. #2771995 [e0c1eb70… / be73bdc0…]\r\nI1219 15:36:10.356713 core/headerchain.go:331] imported 2048 headers in 306.369ms. #2774043 [9b3d540a… / 938d90ba…]\r\nI1219 15:36:10.784348 core/headerchain.go:331] imported 2048 headers in 317.560ms. #2776091 [e7ad7060… / ed5821dc…]\r\nI1219 15:36:11.260933 core/headerchain.go:331] imported 2048 headers in 383.472ms. #2778139 [57cf25b0… / c7f7a725…]\r\nI1219 15:36:11.728011 core/headerchain.go:331] imported 2048 headers in 355.706ms. #2780187 [aa3f0a6b… / 13009e39…]\r\nI1219 15:36:12.173504 core/headerchain.go:331] imported 2048 headers in 333.264ms. #2782235 [d58388c8… / 55bb3a9a…]\r\nI1219 15:36:12.562887 core/headerchain.go:331] imported 2048 headers in 309.746ms. #2784283 [2b68700c… / a33c7107…]\r\nI1219 15:36:12.900800 core/headerchain.go:331] imported 1664 headers in 250.657ms. #2785947 [a0922a4b… / 92b9e09a…]\r\nI1219 15:36:12.948299 core/headerchain.go:331] imported 192 headers in  38.155ms. #2786139 [f425d49d… / 08c51823…]\r\nI1219 15:36:13.182324 core/headerchain.go:331] imported 384 headers in 168.756ms. #2786523 [237269fc… / 9b80e391…]\r\nI1219 15:36:13.776254 core/headerchain.go:331] imported 2048 headers in 447.590ms. #2788571 [c73a7b12… / dfe0ab77…]\r\n[...]\r\nI1219 15:37:00.448769 core/headerchain.go:331] imported 1728 headers in 255.795ms. #2835099 [13aab6e5… / 2c95eeaa…]\r\nI1219 15:37:00.697495 core/headerchain.go:331] imported 192 headers in  28.424ms. #2835291 [0e7c7afd… / 5998913c…]\r\nI1219 15:37:00.739148 core/headerchain.go:331] imported 192 headers in  31.220ms. #2835483 [a4fbc943… / 5dde188e…]\r\nI1219 15:37:01.120713 core/headerchain.go:331] imported 192 headers in  41.084ms. #2835675 [65a4d0ac… / 5ff25a10…]\r\nI1219 15:37:04.401289 core/headerchain.go:331] imported 1920 headers in    1.468s. #2837595 [ed507970… / 196b1193…]\r\nI1219 15:37:04.425578 core/headerchain.go:331] imported 17 headers in  22.760ms. #2837612 [b0c6d9c7… / 7862e6a9…]\r\nI1219 15:37:14.932646 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.944793 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.950850 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.951991 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963303 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963328 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963342 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963349 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963466 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963567 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963638 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\nI1219 15:37:14.963658 eth/downloader/downloader.go:269] Unregister failed: peer is not registered\r\n[...line repeats 31.113 times]\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/268797848",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3466#issuecomment-268797848",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466",
    "id": 268797848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODc5Nzg0OA==",
    "user": {
      "login": "luclu",
      "id": 10135872,
      "node_id": "MDQ6VXNlcjEwMTM1ODcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10135872?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luclu",
      "html_url": "https://github.com/luclu",
      "followers_url": "https://api.github.com/users/luclu/followers",
      "following_url": "https://api.github.com/users/luclu/following{/other_user}",
      "gists_url": "https://api.github.com/users/luclu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luclu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luclu/subscriptions",
      "organizations_url": "https://api.github.com/users/luclu/orgs",
      "repos_url": "https://api.github.com/users/luclu/repos",
      "events_url": "https://api.github.com/users/luclu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luclu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T13:19:07Z",
    "updated_at": "2016-12-22T13:19:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "pinging @zsfelfoldi ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/268797848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/268810842",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3466#issuecomment-268810842",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466",
    "id": 268810842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODgxMDg0Mg==",
    "user": {
      "login": "zsfelfoldi",
      "id": 9884311,
      "node_id": "MDQ6VXNlcjk4ODQzMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9884311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zsfelfoldi",
      "html_url": "https://github.com/zsfelfoldi",
      "followers_url": "https://api.github.com/users/zsfelfoldi/followers",
      "following_url": "https://api.github.com/users/zsfelfoldi/following{/other_user}",
      "gists_url": "https://api.github.com/users/zsfelfoldi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zsfelfoldi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zsfelfoldi/subscriptions",
      "organizations_url": "https://api.github.com/users/zsfelfoldi/orgs",
      "repos_url": "https://api.github.com/users/zsfelfoldi/repos",
      "events_url": "https://api.github.com/users/zsfelfoldi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zsfelfoldi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T14:31:19Z",
    "updated_at": "2016-12-22T14:31:19Z",
    "author_association": "MEMBER",
    "body": "I think I found the issue, I'm currently working on it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/268810842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/269214202",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3466#issuecomment-269214202",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466",
    "id": 269214202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTIxNDIwMg==",
    "user": {
      "login": "RFV",
      "id": 1437122,
      "node_id": "MDQ6VXNlcjE0MzcxMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1437122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RFV",
      "html_url": "https://github.com/RFV",
      "followers_url": "https://api.github.com/users/RFV/followers",
      "following_url": "https://api.github.com/users/RFV/following{/other_user}",
      "gists_url": "https://api.github.com/users/RFV/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RFV/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RFV/subscriptions",
      "organizations_url": "https://api.github.com/users/RFV/orgs",
      "repos_url": "https://api.github.com/users/RFV/repos",
      "events_url": "https://api.github.com/users/RFV/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RFV/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-26T14:05:07Z",
    "updated_at": "2016-12-26T14:05:07Z",
    "author_association": "NONE",
    "body": "Same here",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/269214202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370422981",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3466#issuecomment-370422981",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3466",
    "id": 370422981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQyMjk4MQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-03-05T13:44:42Z",
    "updated_at": "2018-03-05T13:44:42Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/370422981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

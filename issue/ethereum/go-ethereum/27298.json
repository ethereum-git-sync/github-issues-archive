{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27298",
  "id": 1715484060,
  "node_id": "I_kwDOAOvK985mQDWc",
  "number": 27298,
  "title": "Private chain hangs out when volumes has been mapped in a docker.  ",
  "user": {
    "login": "Gelassen",
    "id": 426382,
    "node_id": "MDQ6VXNlcjQyNjM4Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gelassen",
    "html_url": "https://github.com/Gelassen",
    "followers_url": "https://api.github.com/users/Gelassen/followers",
    "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
    "organizations_url": "https://api.github.com/users/Gelassen/orgs",
    "repos_url": "https://api.github.com/users/Gelassen/repos",
    "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gelassen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-05-18T11:35:36Z",
  "updated_at": "2023-05-19T14:27:19Z",
  "closed_at": "2023-05-18T15:54:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.11.6-stable-ea9e62ca\r\nCL client & version: nope\r\nOS & Version: Ubuntu 22.04.2 LTS\r\nCommit hash : nope\r\n\r\n#### Expected behaviour\r\nMiner starts generate blocks\r\n```\r\ngeth-miner         | INFO [05-18|10:56:28.692] Generating DAG in progress               epoch=1 percentage=24 elapsed=15.332s\r\ngeth-miner         | INFO [05-18|10:56:29.292] Generating DAG in progress               epoch=1 percentage=25 elapsed=15.933s\r\ngeth-miner         | TRACE[05-18|10:56:29.457] Ethash nonce found and reported          miner=0 attempts=596833 nonce=1909703742858224521\r\ngeth-miner         | INFO [05-18|10:56:29.458] Successfully sealed new block            number=1 sealhash=\"dcc090â€¦a4c095\" hash=\"725f81â€¦54699e\" elapsed=1m12.399s\r\ngeth-miner         | INFO [05-18|10:56:29.458] ðŸ”¨ mined potential block                  number=1 hash=\"725f81â€¦54699e\"\r\ngeth-miner         | TRACE[05-18|10:56:29.459] Propagated block                         hash=\"725f81â€¦54699e\" recipients=1 duration=2562047h47m16.854s\r\ngeth-miner         | TRACE[05-18|10:56:29.459] Announced block                          hash=\"725f81â€¦54699e\" recipients=0 duration=2562047h47m16.854s\r\ngeth-miner         | TRACE[05-18|10:56:29.459] Propagated block                         id=db565fdaf0888786 conn=dyndial number=1 hash=\"725f81â€¦54699e\" td=131073\r\ngeth-miner         | INFO [05-18|10:56:29.460] Commit new mining work                   number=2 sealhash=\"580ab0â€¦212c2a\" uncles=0 txs=0 gas=0 fees=0 elapsed=\"180.76\r\n```\r\n\r\n#### Actual behaviour\r\nGenerating DAG finishes 0 and 1st epochs, but no block has been mined \r\n\r\n#### Steps to reproduce the behaviour\r\n1. Start eth private chain in docker containers ```over docker compose up --build```\r\n2. Wait when generating DAG will reach 1st epoch\r\n3. After generating DAG has finished 0 epoch and starts 1st epoch look for miner starts mining blocks\r\n\r\n#### Backtrace\r\n\r\nnope\r\n\r\n#### Additional information\r\nI wrote docker scripts to run private network in containers and it works. After that I added volume mapping to preserve chain state across containers launches, otherwise it started from scratch and chain is building since the beginning. When this volumes sections has been added, my chain stops work properly. Volumes mapping is done in this way for each of all my three nodes:\r\n```\r\n    volumes:\r\n      - ./eth-chain/miner/geth/chaindata:/tmp/geth/chaindata\r\n      - ./eth-chain/miner/geth/ethash:/tmp/geth/ethash\r\n      - ./eth-chain/miner/ethash:/root/.ethash\r\n```\r\nAdding this line cause my issue: ```- ./eth-chain/miner/geth/chaindata:/tmp/geth/chaindata```\r\n[docker-eth-private-chain.zip](https://github.com/ethereum/go-ethereum/files/11507314/docker-eth-private-chain.zip)\r\n\r\nI attach zip archive with all necessary code to reproduce this issue. ",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1553266658",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27298#issuecomment-1553266658",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298",
    "id": 1553266658,
    "node_id": "IC_kwDOAOvK985clPfi",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-18T15:54:59Z",
    "updated_at": "2023-05-18T15:54:59Z",
    "author_association": "MEMBER",
    "body": "You should perhaps check if the access performance takes a hit for some reason.\r\n\r\nThat said, we have already dropped ethash on master and will push it to stable very soon, so you really don't want to rely on PoW any more, it's going away for good. We can definitely check this issue if it still happens on Clique or a PoS network, but PoW is something unsupported from now on.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1553266658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554559939",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27298#issuecomment-1554559939",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298",
    "id": 1554559939,
    "node_id": "IC_kwDOAOvK985cqLPD",
    "user": {
      "login": "Gelassen",
      "id": 426382,
      "node_id": "MDQ6VXNlcjQyNjM4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gelassen",
      "html_url": "https://github.com/Gelassen",
      "followers_url": "https://api.github.com/users/Gelassen/followers",
      "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
      "organizations_url": "https://api.github.com/users/Gelassen/orgs",
      "repos_url": "https://api.github.com/users/Gelassen/repos",
      "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gelassen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T13:18:23Z",
    "updated_at": "2023-05-19T13:18:23Z",
    "author_association": "NONE",
    "body": "@karalabe, thank you, I am happy to hear you continue work to make ethereum better, but don't you think dropping support of PoW is a bit early? The only alternative I am familiar with is Clique, I tried it last month and almost immediately faced with [a quite severe issue](https://github.com/ethereum/go-ethereum/issues/18402) which has been opened 4 years ago and still relevant.  It totally blocks its usage for my project. \r\n\r\nIf you are open to help me further with this issue, could you please clarify what do you mean by \" access performance takes a hit\"?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554559939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554622567",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27298#issuecomment-1554622567",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298",
    "id": 1554622567,
    "node_id": "IC_kwDOAOvK985cqahn",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T14:02:27Z",
    "updated_at": "2023-05-19T14:02:27Z",
    "author_association": "MEMBER",
    "body": "Wrt PoW, no, it's not early. PoW is meaningless unless you have a global miner network. Anything smaller is just easy enough to attack with off the shelf resources. It just doens't make sense.\r\n\r\nWrt Clique, that was designed always as a quick hack on top of the PoW system to allow running PoA testnets that aren't non-stop attacked. Clique was never meant to be a production consensus system, rather a simple replacement for testnets. It served its purpose well, but at the end of the day it wasn't designed to be fool-proof robust, so an occasional manual resolution is kind of fine.\r\n\r\nFor production networks, you should really really **really** run a PoS chain. There's no getting around it, just bit the bullet and read up on it and how to launch one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554622567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554672002",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27298#issuecomment-1554672002",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27298",
    "id": 1554672002,
    "node_id": "IC_kwDOAOvK985cqmmC",
    "user": {
      "login": "Gelassen",
      "id": 426382,
      "node_id": "MDQ6VXNlcjQyNjM4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/426382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gelassen",
      "html_url": "https://github.com/Gelassen",
      "followers_url": "https://api.github.com/users/Gelassen/followers",
      "following_url": "https://api.github.com/users/Gelassen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gelassen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gelassen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gelassen/subscriptions",
      "organizations_url": "https://api.github.com/users/Gelassen/orgs",
      "repos_url": "https://api.github.com/users/Gelassen/repos",
      "events_url": "https://api.github.com/users/Gelassen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gelassen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T14:27:19Z",
    "updated_at": "2023-05-19T14:27:19Z",
    "author_association": "NONE",
    "body": "Thank you for sharing more info about Clique and the intent behind it. I will check PoS chain, but I would like to finish my PoC first: my project is going to leverage a private network and with authorized nodes it should close vector of attack from malicious user with higher computation resources. (please fix me, if it is not correct)    ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1554672002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

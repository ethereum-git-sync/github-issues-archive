{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/24441",
  "id": 1145511687,
  "node_id": "I_kwDOAOvK985ERx8H",
  "number": 24441,
  "title": "math.HexOrDecimal256 unmarshaling of chainId",
  "user": {
    "login": "frenkel26",
    "id": 96975048,
    "node_id": "U_kgDOBce4yA",
    "avatar_url": "https://avatars.githubusercontent.com/u/96975048?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frenkel26",
    "html_url": "https://github.com/frenkel26",
    "followers_url": "https://api.github.com/users/frenkel26/followers",
    "following_url": "https://api.github.com/users/frenkel26/following{/other_user}",
    "gists_url": "https://api.github.com/users/frenkel26/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frenkel26/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frenkel26/subscriptions",
    "organizations_url": "https://api.github.com/users/frenkel26/orgs",
    "repos_url": "https://api.github.com/users/frenkel26/repos",
    "events_url": "https://api.github.com/users/frenkel26/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frenkel26/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-02-21T09:06:14Z",
  "updated_at": "2022-06-25T10:19:38Z",
  "closed_at": "2022-02-24T10:11:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: v1.10.15\r\n\r\n#### Description\r\n\r\n`math.HexOrDecimal256.UnmarshalText` expects a string, If we pass a number in the json object (i.e. without quotes), the unmarshalling results with 0.\r\n`TypedDataDomain.ChainId` is `*math.HexOrDecimal256`, and it is common for applications to serialize the ChainId as a number rather than a bigInt string.\r\n\r\n#### Expected behaviour\r\n\r\nexpected chainId:\r\n`&{false [4]}`\r\n\r\n#### Actual behaviour\r\n\r\ngot 0 instead:\r\n`&{false []}`\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nusing this JSON as input to json.Unmarshal (notice the `\"chainId\":4`)\r\n`{\"types\":{\"EIP712Domain\":[{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"chainId\",\"type\":\"uint256\"},{\"name\":\"verifyingContract\",\"type\":\"address\"}],\"Permit\":[{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"spender\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"nonce\",\"type\":\"uint256\"},{\"name\":\"deadline\",\"type\":\"uint256\"}]},\"domain\":{\"name\":\"Uniswap\",\"verifyingContract\":\"0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"chainId\":4},\"primaryType\":\"Permit\",\"message\":{\"owner\":\"0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"spender\":\"0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"0\",\"nonce\":0,\"deadline\":0}}`\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1049693747",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24441#issuecomment-1049693747",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441",
    "id": 1049693747,
    "node_id": "IC_kwDOAOvK984-kQ4z",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-24T10:11:05Z",
    "updated_at": "2022-02-24T10:11:05Z",
    "author_association": "MEMBER",
    "body": "Due to the way our marshaling library works, we have to require strings for this.\r\nYou can always just cast your number into a string/hexstring (`4` to `\"4\"` or `\"0x4\"`)\r\nWe accept both decimal and hex strings",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1049693747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1166249453",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/24441#issuecomment-1166249453",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/24441",
    "id": 1166249453,
    "node_id": "IC_kwDOAOvK985Fg43t",
    "user": {
      "login": "Mewjaden",
      "id": 106319272,
      "node_id": "U_kgDOBlZNqA",
      "avatar_url": "https://avatars.githubusercontent.com/u/106319272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mewjaden",
      "html_url": "https://github.com/Mewjaden",
      "followers_url": "https://api.github.com/users/Mewjaden/followers",
      "following_url": "https://api.github.com/users/Mewjaden/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mewjaden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mewjaden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mewjaden/subscriptions",
      "organizations_url": "https://api.github.com/users/Mewjaden/orgs",
      "repos_url": "https://api.github.com/users/Mewjaden/repos",
      "events_url": "https://api.github.com/users/Mewjaden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mewjaden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-25T10:19:38Z",
    "updated_at": "2022-06-25T10:19:38Z",
    "author_association": "NONE",
    "body": "types\":{\"EIP712Domain\":[{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"version\",\"type\":\"string\"},{\"name\":\"chainId\",\"type\":\"uint256\"},{\"name\":\"verifyingContract\",\"type\":\"address\"}],\"Permit\":[{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"spender\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"nonce\",\"type\":\"uint256\"},{\"name\":\"deadline\",\"type\":\"uint256\"}]},\"primaryType\":\"Permit\",\"domain\":{\"name\":\"USD Coin\",\"chainId\":1,\"verifyingContract\":\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\",\"version\":\"2\"},\"message\":{\"deadline\":1656197119,\"nonce\":0,\"spender\":\"0x1111111254fb6c44bac0bed2854e76f90643097d\",\"owner\":\"0x1e4942b1a4fab51ec950e5cccc957497b37d1103\",\"value\":\"115792089237316195423570985008687907853269984665640564039457584007913129639935\"}}",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1166249453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/2837",
  "id": 166508905,
  "node_id": "MDU6SXNzdWUxNjY1MDg5MDU=",
  "number": 2837,
  "title": "What's the limitation of RPC call a geth client can handle",
  "user": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2016-07-20T06:52:53Z",
  "updated_at": "2016-08-18T02:04:21Z",
  "closed_at": "2016-08-18T02:04:21Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "i try to get blockchain information via rpc, while i got some ConnectionError when the concurrency is high\n\n```\nraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/site-packages/gevent/greenlet.py\", line 534, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"crawler.py\", line 84, in worker\n    self.parse_block(block_id)\n  File \"crawler.py\", line 96, in parse_block\n    self._parse_block_by_number(id)\n  File \"crawler.py\", line 99, in _parse_block_by_number\n    blk = self.client.call(METHOD_GET_BLOCK_BY_NUMBER, id, include_transaction)\n  File \"/usr/local/lib/python2.7/site-packages/pyethapp/rpc_client.py\", line 334, in call\n    reply = self.transport.send_message(request.serialize())\n  File \"/usr/local/lib/python2.7/site-packages/tinyrpc/transports/http.py\", line 28, in send_message\n    r = requests.post(self.endpoint, data=message, **self.request_kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/requests/api.py\", line 111, in post\n    return request('post', url, data=data, json=json, **kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/requests/api.py\", line 57, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/requests/sessions.py\", line 475, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/requests/sessions.py\", line 585, in send\n    r = adapter.send(request, **kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/requests/adapters.py\", line 467, in send\n    raise ConnectionError(e, request=request)\nConnectionError: HTTPConnectionPool(host='121.201.29.105', port=8545): Max retries exceeded with url: / (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x1031b4390>: Failed to establish a new connection: [Errno 60] Operation timed out',))\n<Greenlet at 0x1030eb190: <bound method Crawler.worker of <__main__.Crawler object at 0x104754110>>(4738)> failed with ConnectionError\n```\n\nhow can i fix it. Is there any RPC concurrency setting i can modify to increase the concurrency a client can handle?\n",
  "closed_by": {
    "login": "rjl493456442",
    "id": 5959481,
    "node_id": "MDQ6VXNlcjU5NTk0ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rjl493456442",
    "html_url": "https://github.com/rjl493456442",
    "followers_url": "https://api.github.com/users/rjl493456442/followers",
    "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
    "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
    "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
    "repos_url": "https://api.github.com/users/rjl493456442/repos",
    "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/233990322",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2837#issuecomment-233990322",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
    "id": 233990322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzk5MDMyMg==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-20T15:43:38Z",
    "updated_at": "2016-07-20T15:43:38Z",
    "author_association": "MEMBER",
    "body": "There are no RPC settings to configure RPC performance. Maybe you can boost performance a bit with some general go parameters but I doubt this will make a huge difference.\n\nCould you give some load numbers or share your test?\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/233990322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/234175772",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2837#issuecomment-234175772",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
    "id": 234175772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDE3NTc3Mg==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-21T07:16:19Z",
    "updated_at": "2016-07-21T07:16:19Z",
    "author_association": "MEMBER",
    "body": "i start 4 processes together and each of them has about 100 coroutines, the error mentioned above will occur, however , when i start 2 processes only, it can be much better(no error occur).\ni'm confused because a server writed by go it's performance should be great. \nSo i want konw is anybody else meet this problem \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/234175772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/234181132",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2837#issuecomment-234181132",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
    "id": 234181132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDE4MTEzMg==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-21T07:46:10Z",
    "updated_at": "2016-07-21T07:46:10Z",
    "author_association": "MEMBER",
    "body": "If 2 processes work and 4 not then there is a real change that you are hitting some kind of a limit. The question is, is it fair what you are demanding of the system? Based on the information you provided it's not possible to determine this. If all of the 400 coroutines can make concurrent requests this can cause quite a load and over-stress the system.\n\nThe RPC server doesn't enforce a connection limit. Any limits are imposed by the OS. If you hit these limits you should find something in the logs.\n\nTry to measure resource load (cpu, mem, disk usage) and check if the OS is limiting resources that geth requires. For instance, on linux you can use cgroups to limit the amount of resources a process can take.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/234181132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240453204",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2837#issuecomment-240453204",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
    "id": 240453204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDQ1MzIwNA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-17T15:41:25Z",
    "updated_at": "2016-08-17T15:41:25Z",
    "author_association": "MEMBER",
    "body": "@rjl493456442, if this is still an issue please give an update with more information.\nOtherwise I will close this (or feel free to close it yourself).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240453204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240603644",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/2837#issuecomment-240603644",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/2837",
    "id": 240603644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDYwMzY0NA==",
    "user": {
      "login": "rjl493456442",
      "id": 5959481,
      "node_id": "MDQ6VXNlcjU5NTk0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjl493456442",
      "html_url": "https://github.com/rjl493456442",
      "followers_url": "https://api.github.com/users/rjl493456442/followers",
      "following_url": "https://api.github.com/users/rjl493456442/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjl493456442/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjl493456442/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjl493456442/subscriptions",
      "organizations_url": "https://api.github.com/users/rjl493456442/orgs",
      "repos_url": "https://api.github.com/users/rjl493456442/repos",
      "events_url": "https://api.github.com/users/rjl493456442/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjl493456442/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-18T02:04:21Z",
    "updated_at": "2016-08-18T02:04:21Z",
    "author_association": "MEMBER",
    "body": "Actually, i didn't figure out the reason right now. But i think the OS performance might is the main reason.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/240603644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16793",
  "id": 325940703,
  "node_id": "MDU6SXNzdWUzMjU5NDA3MDM=",
  "number": 16793,
  "title": "Unable to access wallet using ethereum/client-go and --keystore *if* the wallet is a symbolic link",
  "user": {
    "login": "DazWilkin",
    "id": 1022400,
    "node_id": "MDQ6VXNlcjEwMjI0MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1022400?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DazWilkin",
    "html_url": "https://github.com/DazWilkin",
    "followers_url": "https://api.github.com/users/DazWilkin/followers",
    "following_url": "https://api.github.com/users/DazWilkin/following{/other_user}",
    "gists_url": "https://api.github.com/users/DazWilkin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DazWilkin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DazWilkin/subscriptions",
    "organizations_url": "https://api.github.com/users/DazWilkin/orgs",
    "repos_url": "https://api.github.com/users/DazWilkin/repos",
    "events_url": "https://api.github.com/users/DazWilkin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DazWilkin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-05-24T02:23:40Z",
  "updated_at": "2019-09-09T15:05:42Z",
  "closed_at": "2019-09-09T15:05:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: ```instance=Geth/v1.8.9-unstable-415969f5/linux-amd64/go1.10.2```\r\n\r\nOS & Version: Linux\r\n\r\n#### Summary\r\n\r\nIt appears (!) that symbolic links to wallets are treated differently (incorrectly). The reason this is an issue is that, when trying to run Ethereum on Kubernetes, it would be useful to represent wallet file(s) using Kubernetes Secrets|ConfigMaps. Secrets|ConfigMaps present encapsulated files as symbolic links. This is how I uncovered this issue. The repro works without Kubernetes, using Docker and flipping between underlying and symbolic links to a wallet.\r\n\r\n#### Expected behaviour\r\nUsing Console, I expect ```personal``` to list my wallet\r\n\r\n#### Actual behaviour\r\nIf the file in /keystore is a symbolic link to a wallet, it does not work:\r\n\r\n```\r\npersonal\r\n{\r\n  listAccounts: [],\r\n  listWallets: [],\r\n...\r\n}\r\n```\r\nif the single file in /keystore is the original file (backing the symbolic link), it works:\r\n\r\n```\r\npersonal\r\n{\r\n  listAccounts: [\"0x3df6...\"],\r\n  listWallets: [{\r\n      accounts: [{...}],\r\n      status: \"Locked\",\r\n      url: \"keystore:///keystore/UTC--2018-00-00T00-00-00.000000000Z--3df6...\"\r\n  }],\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\nls $PWD/keystore\r\nUTC--2018-00-00T00-00-00.000000000Z--3df6...\r\n\r\nmkdir $PWD/lnkeystore\r\nln -s $PWD/keystore/UTC--2018-00-00T00-00-00.000000000Z--3df6... $PWD/lnkeystore\r\n\r\nls $PWD/lnkeystore\r\nUTC--2018-00-00T00-00-00.000000000Z--3df6...\r\n```\r\n\r\nNode-1: Works with `$PWD/keystore`\r\n```\r\ndocker run \\\r\n--rm \\\r\n--interactive \\\r\n--net=host \\\r\n--tty \\\r\n--volume=$PWD/keystore:/keystore \\\r\nethereum/client-go \\\r\n  --rinkeby \\\r\n  --keystore=/keystore  \\\r\n  --rpc \\\r\n  --rpcaddr=0.0.0.0 \\\r\n  --rpcapi=\"db,eth,net,personal,web3\"\r\n```\r\n\r\nNode-1: Doesn't work with `$PWD/lnkeystore`\r\n```\r\ndocker run \\\r\n--rm \\\r\n--interactive \\\r\n--net=host \\\r\n--tty \\\r\n--volume=$PWD/lnkeystore:/keystore \\\r\nethereum/client-go \\\r\n  --rinkeby \\\r\n  --keystore=/keystore  \\\r\n  --rpc \\\r\n  --rpcaddr=0.0.0.0 \\\r\n  --rpcapi=\"db,eth,net,personal,web3\"\r\n```\r\n\r\n\r\nNode-2: Console\r\n```\r\ndocker run \\\r\n--rm \\\r\n--interactive \\\r\n--tty \\\r\nethereum/client-go \\\r\n  attach http://localhost:8545 \\\r\n  console\r\n```\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/391649517",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-391649517",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 391649517,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTY0OTUxNw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T09:26:30Z",
    "updated_at": "2018-05-24T09:26:30Z",
    "author_association": "MEMBER",
    "body": "Ping @fjl @holiman ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/391649517/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/392093455",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-392093455",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 392093455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjA5MzQ1NQ==",
    "user": {
      "login": "DazWilkin",
      "id": 1022400,
      "node_id": "MDQ6VXNlcjEwMjI0MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1022400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DazWilkin",
      "html_url": "https://github.com/DazWilkin",
      "followers_url": "https://api.github.com/users/DazWilkin/followers",
      "following_url": "https://api.github.com/users/DazWilkin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DazWilkin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DazWilkin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DazWilkin/subscriptions",
      "organizations_url": "https://api.github.com/users/DazWilkin/orgs",
      "repos_url": "https://api.github.com/users/DazWilkin/repos",
      "events_url": "https://api.github.com/users/DazWilkin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DazWilkin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T15:25:46Z",
    "updated_at": "2018-05-25T15:25:46Z",
    "author_association": "NONE",
    "body": "I have a workaround while this issue is repro'd/resolved:\r\n\r\nI am able to use a Kubernetes [init containers](https://kubernetes.io/docs/concepts/workloads/pods/init-containers/) to copy the wallet file(s) out of the [Secret](https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets)|ConfigMap (`/keystore`) into an [emptyDir](https://kubernetes.io/docs/concepts/storage/volumes/#emptydir) volume (`/cache`) *before* the Ethereum node starts.\r\n\r\nThen, when the Ethereum node starts, it is configured with `--keystore` to the copy and it works :-(\r\n\r\nIt would be preferable to access the wallet(s) directly (through symbolic links) but this hack permits me to continue working. Medium post \"[Ethereum on Google Cloud Platform](https://medium.com/google-cloud/ethereum-on-google-cloud-platform-8f10c82493ca)\" (feedback always welcome)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/392093455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408321739",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-408321739",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 408321739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODMyMTczOQ==",
    "user": {
      "login": "rawfalafel",
      "id": 202157,
      "node_id": "MDQ6VXNlcjIwMjE1Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/202157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawfalafel",
      "html_url": "https://github.com/rawfalafel",
      "followers_url": "https://api.github.com/users/rawfalafel/followers",
      "following_url": "https://api.github.com/users/rawfalafel/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawfalafel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawfalafel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawfalafel/subscriptions",
      "organizations_url": "https://api.github.com/users/rawfalafel/orgs",
      "repos_url": "https://api.github.com/users/rawfalafel/repos",
      "events_url": "https://api.github.com/users/rawfalafel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawfalafel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-27T06:11:34Z",
    "updated_at": "2018-07-27T06:11:34Z",
    "author_association": "NONE",
    "body": "hey @DazWilkin, can you try the fix in #17256 if you're still using the above workaround?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408321739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408608398",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-408608398",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 408608398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODYwODM5OA==",
    "user": {
      "login": "DazWilkin",
      "id": 1022400,
      "node_id": "MDQ6VXNlcjEwMjI0MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1022400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DazWilkin",
      "html_url": "https://github.com/DazWilkin",
      "followers_url": "https://api.github.com/users/DazWilkin/followers",
      "following_url": "https://api.github.com/users/DazWilkin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DazWilkin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DazWilkin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DazWilkin/subscriptions",
      "organizations_url": "https://api.github.com/users/DazWilkin/orgs",
      "repos_url": "https://api.github.com/users/DazWilkin/repos",
      "events_url": "https://api.github.com/users/DazWilkin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DazWilkin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-28T13:34:59Z",
    "updated_at": "2018-07-28T13:34:59Z",
    "author_association": "NONE",
    "body": "I will try this today!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408608398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408611823",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-408611823",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 408611823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODYxMTgyMw==",
    "user": {
      "login": "DazWilkin",
      "id": 1022400,
      "node_id": "MDQ6VXNlcjEwMjI0MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1022400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DazWilkin",
      "html_url": "https://github.com/DazWilkin",
      "followers_url": "https://api.github.com/users/DazWilkin/followers",
      "following_url": "https://api.github.com/users/DazWilkin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DazWilkin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DazWilkin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DazWilkin/subscriptions",
      "organizations_url": "https://api.github.com/users/DazWilkin/orgs",
      "repos_url": "https://api.github.com/users/DazWilkin/repos",
      "events_url": "https://api.github.com/users/DazWilkin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DazWilkin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-28T14:32:25Z",
    "updated_at": "2018-07-28T14:32:25Z",
    "author_association": "NONE",
    "body": "Yes, this appears to work for me. Thank you!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/408611823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/516027412",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16793#issuecomment-516027412",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16793",
    "id": 516027412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjAyNzQxMg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-07-29T14:57:18Z",
    "updated_at": "2019-07-29T14:57:18Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/516027412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

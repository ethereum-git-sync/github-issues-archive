{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/274",
  "id": 55611733,
  "node_id": "MDU6SXNzdWU1NTYxMTczMw==",
  "number": 274,
  "title": "Mining progress can possibly be stunted by determined attacker if difficulty gets high enough",
  "user": {
    "login": "ebuchman",
    "id": 2300911,
    "node_id": "MDQ6VXNlcjIzMDA5MTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2300911?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ebuchman",
    "html_url": "https://github.com/ebuchman",
    "followers_url": "https://api.github.com/users/ebuchman/followers",
    "following_url": "https://api.github.com/users/ebuchman/following{/other_user}",
    "gists_url": "https://api.github.com/users/ebuchman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ebuchman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ebuchman/subscriptions",
    "organizations_url": "https://api.github.com/users/ebuchman/orgs",
    "repos_url": "https://api.github.com/users/ebuchman/repos",
    "events_url": "https://api.github.com/users/ebuchman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ebuchman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2015-01-27T12:28:25Z",
  "updated_at": "2015-05-06T22:22:12Z",
  "closed_at": "2015-05-06T22:22:11Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Note this attack only works if the attacker can maintain himself as \"best peer\" for a number of nodes, which, with good standing and decent mining power, may not be unreasonable. He can then cause them to stop making progress in mining, causing him to have a greater share of the hash power, and making it possible for the attack to cascade into a 51% attack by crippling the network's hash rate.\n\nGiven a situation where the difficulty of the chain is considerably higher than at a previous point (say the difficulty is a few multiples of what it was at block 1), an attacker can halt mining progress by repeatedly mining and broadcasting NewBlocks at height 1. These blocks may have been mined in the past and kept secret, so there could be a large store of them.\n\nThis is possible because the go-eth miner resets every time a NewBlockEvent is received, whether or not the block has the highest TD. See: https://github.com/ethereum/go-ethereum/blob/develop/miner/miner.go#L153 (note it only resets if the block is already in the DB, but all forks are added to the DB)\n\nSo by continually sending new, low difficulty blocks at height 1, miners are continuously forced to reset before they find a valid pow, and hence block generation slows down and possibly stops, and the attacking miner can bootstrap himself into owning proportionately more hash power. \n\nI suppose the simplest fix is to check in the miner if the NewBlock is of the current height and only to reset if so (or to mine a bit longer for uncles). If the NewBlock is from way back, the miner should not reset.\n\nThis might be far fetched but it works in a network of two peers and I suspect would work if the attacker is clever and best peer for some number of nodes in a larger network (though I have not tested more than 2 peers). Block pool logic may avoid this already, but probably worth not resetting the miner on just any new block anyways.\n",
  "closed_by": {
    "login": "obscuren",
    "id": 6264126,
    "node_id": "MDQ6VXNlcjYyNjQxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/obscuren",
    "html_url": "https://github.com/obscuren",
    "followers_url": "https://api.github.com/users/obscuren/followers",
    "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
    "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
    "organizations_url": "https://api.github.com/users/obscuren/orgs",
    "repos_url": "https://api.github.com/users/obscuren/repos",
    "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
    "received_events_url": "https://api.github.com/users/obscuren/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/71665894",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/274#issuecomment-71665894",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274",
    "id": 71665894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjY1ODk0",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-27T15:26:06Z",
    "updated_at": "2015-01-27T15:26:06Z",
    "author_association": "MEMBER",
    "body": "The `miner` package will replaced once the C implementation of the pow is finished. \n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/71665894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/93091192",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/274#issuecomment-93091192",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274",
    "id": 93091192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMDkxMTky",
    "user": {
      "login": "zelig",
      "id": 769725,
      "node_id": "MDQ6VXNlcjc2OTcyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/769725?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zelig",
      "html_url": "https://github.com/zelig",
      "followers_url": "https://api.github.com/users/zelig/followers",
      "following_url": "https://api.github.com/users/zelig/following{/other_user}",
      "gists_url": "https://api.github.com/users/zelig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zelig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zelig/subscriptions",
      "organizations_url": "https://api.github.com/users/zelig/orgs",
      "repos_url": "https://api.github.com/users/zelig/repos",
      "events_url": "https://api.github.com/users/zelig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zelig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-14T22:20:28Z",
    "updated_at": "2015-04-14T22:20:28Z",
    "author_association": "MEMBER",
    "body": "@obscuren is this addressed?\nsee related #604 #563 #712 #706\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/93091192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/99628745",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/274#issuecomment-99628745",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/274",
    "id": 99628745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NjI4NzQ1",
    "user": {
      "login": "obscuren",
      "id": 6264126,
      "node_id": "MDQ6VXNlcjYyNjQxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6264126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obscuren",
      "html_url": "https://github.com/obscuren",
      "followers_url": "https://api.github.com/users/obscuren/followers",
      "following_url": "https://api.github.com/users/obscuren/following{/other_user}",
      "gists_url": "https://api.github.com/users/obscuren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obscuren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obscuren/subscriptions",
      "organizations_url": "https://api.github.com/users/obscuren/orgs",
      "repos_url": "https://api.github.com/users/obscuren/repos",
      "events_url": "https://api.github.com/users/obscuren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obscuren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-06T22:22:11Z",
    "updated_at": "2015-05-06T22:22:11Z",
    "author_association": "MEMBER",
    "body": "This has been fixed a long time ago. Closing.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/99628745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

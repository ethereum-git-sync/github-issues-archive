{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16345",
  "id": 306546979,
  "node_id": "MDU6SXNzdWUzMDY1NDY5Nzk=",
  "number": 16345,
  "title": "Flags SyncMode cannot be combined with LightServ in geth v1.8.2",
  "user": {
    "login": "rkeene",
    "id": 5068442,
    "node_id": "MDQ6VXNlcjUwNjg0NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5068442?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkeene",
    "html_url": "https://github.com/rkeene",
    "followers_url": "https://api.github.com/users/rkeene/followers",
    "following_url": "https://api.github.com/users/rkeene/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkeene/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkeene/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkeene/subscriptions",
    "organizations_url": "https://api.github.com/users/rkeene/orgs",
    "repos_url": "https://api.github.com/users/rkeene/repos",
    "events_url": "https://api.github.com/users/rkeene/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkeene/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1132689577,
      "node_id": "MDU6TGFiZWwxMTMyNjg5NTc3",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:triage",
      "name": "status:triage",
      "color": "6be514",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-03-19T16:55:52Z",
  "updated_at": "2019-09-24T08:24:42Z",
  "closed_at": "2019-09-24T08:24:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "See comment here:  https://github.com/ethereum/go-ethereum/pull/15514#issuecomment-374257744\r\n\r\n#### System information\r\n\r\nGeth version: v1.8.2\r\nOS & Version: All\r\n\r\n#### Expected behaviour\r\n`geth --syncmode=full --lightserv=80` should work\r\n\r\n\r\n#### Actual behaviour\r\n`geth --syncmode=full --lightserv=80` produces an error indicating that --syncmode and --lightserv cannot be combined\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\nRun: `geth --syncmode=full --lightserv=80`\r\n\r\n\r\nThere appears to be an issue with the `checkExclusive` function with respect to string arguments -- they're not really used in the way the comment described above that function suggests they might, this leads to a bug combining --syncmode=full and --lightserv, when it is intended to prevent --syncmode=light and --lightserv from being combined.\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345/reactions",
    "total_count": 7,
    "+1": 7,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/384124062",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16345#issuecomment-384124062",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
    "id": 384124062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDEyNDA2Mg==",
    "user": {
      "login": "jmooo",
      "id": 1500269,
      "node_id": "MDQ6VXNlcjE1MDAyNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmooo",
      "html_url": "https://github.com/jmooo",
      "followers_url": "https://api.github.com/users/jmooo/followers",
      "following_url": "https://api.github.com/users/jmooo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmooo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmooo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmooo/subscriptions",
      "organizations_url": "https://api.github.com/users/jmooo/orgs",
      "repos_url": "https://api.github.com/users/jmooo/repos",
      "events_url": "https://api.github.com/users/jmooo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmooo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-25T00:41:10Z",
    "updated_at": "2018-04-25T00:41:10Z",
    "author_association": "NONE",
    "body": "I just ran into this updating our systemd script which specifically defined `--syncmode \"fast\"`. Since that is the geth default I was able to just remove the line from all our systemd units to get around it, but not ideal",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/384124062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/393377555",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16345#issuecomment-393377555",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
    "id": 393377555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzM3NzU1NQ==",
    "user": {
      "login": "RaghavSood",
      "id": 903072,
      "node_id": "MDQ6VXNlcjkwMzA3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/903072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RaghavSood",
      "html_url": "https://github.com/RaghavSood",
      "followers_url": "https://api.github.com/users/RaghavSood/followers",
      "following_url": "https://api.github.com/users/RaghavSood/following{/other_user}",
      "gists_url": "https://api.github.com/users/RaghavSood/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RaghavSood/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RaghavSood/subscriptions",
      "organizations_url": "https://api.github.com/users/RaghavSood/orgs",
      "repos_url": "https://api.github.com/users/RaghavSood/repos",
      "events_url": "https://api.github.com/users/RaghavSood/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RaghavSood/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-31T02:02:12Z",
    "updated_at": "2018-05-31T02:02:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "`--syncmode=full` and `--lightserv` also produce the same error in 1.8.10",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/393377555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/423974465",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16345#issuecomment-423974465",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
    "id": 423974465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzk3NDQ2NQ==",
    "user": {
      "login": "ulope",
      "id": 55078,
      "node_id": "MDQ6VXNlcjU1MDc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/55078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ulope",
      "html_url": "https://github.com/ulope",
      "followers_url": "https://api.github.com/users/ulope/followers",
      "following_url": "https://api.github.com/users/ulope/following{/other_user}",
      "gists_url": "https://api.github.com/users/ulope/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ulope/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ulope/subscriptions",
      "organizations_url": "https://api.github.com/users/ulope/orgs",
      "repos_url": "https://api.github.com/users/ulope/repos",
      "events_url": "https://api.github.com/users/ulope/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ulope/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-24T13:29:08Z",
    "updated_at": "2018-09-24T13:29:08Z",
    "author_association": "MEMBER",
    "body": "This is unfortunate since it prevents a `--lightserv` node from running with `--syncmode full` which IMO would be desirable.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/423974465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/534450037",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16345#issuecomment-534450037",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
    "id": 534450037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDQ1MDAzNw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-24T08:23:43Z",
    "updated_at": "2019-09-24T08:23:43Z",
    "author_association": "MEMBER",
    "body": "Works for me\r\n\r\n```\r\n[user@work go-ethereum]$ build/bin/geth --datadir /tmp/blabla  --syncmode=full --lightserv=80 \r\nINFO [09-24|10:23:09.143] Bumping default cache on mainnet         provided=1024 updated=4096\r\nWARN [09-24|10:23:09.143] Sanitizing cache to Go's GC limits       provided=4096 updated=2590\r\nINFO [09-24|10:23:09.145] Maximum peer count                       ETH=50 LES=100 total=150\r\nINFO [09-24|10:23:09.145] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nERROR[09-24|10:23:09.145] Failed to enumerate USB devices          hub=ledger vendor=11415 failcount=1 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nERROR[09-24|10:23:09.146] Failed to enumerate USB devices          hub=trezor vendor=21324 failcount=1 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nERROR[09-24|10:23:09.146] Failed to enumerate USB devices          hub=trezor vendor=4617  failcount=1 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nERROR[09-24|10:23:09.146] Failed to enumerate USB devices          hub=ledger vendor=11415 failcount=2 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nERROR[09-24|10:23:09.146] Failed to enumerate USB devices          hub=trezor vendor=21324 failcount=2 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nERROR[09-24|10:23:09.146] Failed to enumerate USB devices          hub=trezor vendor=4617  failcount=2 err=\"failed to initialize libusb: libusb: unknown error [code -99]\"\r\nINFO [09-24|10:23:09.146] Starting peer-to-peer node               instance=Geth/v1.9.5-unstable-4ec5496c-20190923/linux-amd64/go1.11.2\r\nINFO [09-24|10:23:09.147] Allocated trie memory caches             clean=647.00MiB dirty=647.00MiB\r\nINFO [09-24|10:23:09.147] Allocated cache and file handles         database=/tmp/blabla/geth/chaindata cache=1.26GiB handles=2048\r\nINFO [09-24|10:23:09.153] Opened ancient database                  database=/tmp/blabla/geth/chaindata/ancient\r\nINFO [09-24|10:23:09.153] Writing default main-net genesis block \r\nINFO [09-24|10:23:09.402] Persisted trie from memory database      nodes=12356 size=1.79MiB time=51.490333ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B\r\nINFO [09-24|10:23:09.403] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: <nil> Engine: ethash}\"\r\nINFO [09-24|10:23:09.403] Disk storage enabled for ethash caches   dir=/tmp/blabla/geth/ethash count=3\r\nINFO [09-24|10:23:09.403] Disk storage enabled for ethash DAGs     dir=/home/user/.ethash      count=2\r\nINFO [09-24|10:23:09.403] Initialising Ethereum protocol           versions=[63] network=1 dbversion=<nil>\r\nWARN [09-24|10:23:09.403] Upgrade blockchain database version      from=<nil> to=7\r\nINFO [09-24|10:23:09.426] Loaded most recent local header          number=0 hash=d4e567…cb8fa3 td=17179869184 age=50y5mo1w\r\nINFO [09-24|10:23:09.427] Loaded most recent local full block      number=0 hash=d4e567…cb8fa3 td=17179869184 age=50y5mo1w\r\nINFO [09-24|10:23:09.427] Loaded most recent local fast block      number=0 hash=d4e567…cb8fa3 td=17179869184 age=50y5mo1w\r\nINFO [09-24|10:23:09.427] Regenerated local transaction journal    transactions=0 accounts=0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/534450037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/534450419",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16345#issuecomment-534450419",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16345",
    "id": 534450419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDQ1MDQxOQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-24T08:24:42Z",
    "updated_at": "2019-09-24T08:24:42Z",
    "author_association": "MEMBER",
    "body": "Fixed a while back by https://github.com/ethereum/go-ethereum/pull/17803.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/534450419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

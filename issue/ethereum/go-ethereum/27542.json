{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27542",
  "id": 1770480297,
  "node_id": "I_kwDOAOvK985ph2Kp",
  "number": 27542,
  "title": "Why is the expected recovery id for Bitcoin style signatures (<4) as opposed to ETH signatures (27 or 28)",
  "user": {
    "login": "CarsonCase",
    "id": 43460072,
    "node_id": "MDQ6VXNlcjQzNDYwMDcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/43460072?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CarsonCase",
    "html_url": "https://github.com/CarsonCase",
    "followers_url": "https://api.github.com/users/CarsonCase/followers",
    "following_url": "https://api.github.com/users/CarsonCase/following{/other_user}",
    "gists_url": "https://api.github.com/users/CarsonCase/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CarsonCase/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CarsonCase/subscriptions",
    "organizations_url": "https://api.github.com/users/CarsonCase/orgs",
    "repos_url": "https://api.github.com/users/CarsonCase/repos",
    "events_url": "https://api.github.com/users/CarsonCase/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CarsonCase/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-06-22T22:36:56Z",
  "updated_at": "2023-06-29T13:32:45Z",
  "closed_at": "2023-06-29T13:32:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "https://github.com/ethereum/go-ethereum/blob/699243f8ae870fa2ddbc5cb919fda85313e4684a/crypto/secp256k1/secp256.go#L171C15-L171C15\r\n\r\n\r\nI am working on validating a Metamask signature using Ecrecover and am confused as to why the Ecrecover function expects the v signature value to be <4. Perhaps I'm missing something but it seems that we would want it to be expecting 27 or 28? Maybe someone can help correct me or point me in the right direction, or let me know if this is a somehow overlooked problem.",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1613191465",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27542#issuecomment-1613191465",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27542",
    "id": 1613191465,
    "node_id": "IC_kwDOAOvK985gJ1kp",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T13:32:45Z",
    "updated_at": "2023-06-29T13:32:45Z",
    "author_association": "MEMBER",
    "body": "Geth uses the same library for signature recovery as bitcoin, so all signatures need to be modified to match the crypto library. You can see this step in the ecrecover precompile here: https://github.com/ethereum/go-ethereum/blob/8bbb16b70ef4a9e732745aac104525a6f16306d6/core/vm/contracts.go#L197\r\n\r\nFor the future, please address these questions to the ethereum stack exchange: https://ethereum.stackexchange.com/, we would like to keep the issue tracker focused on bugs in geth",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1613191465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

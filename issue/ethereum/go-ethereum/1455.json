{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/1455",
  "id": 94098744,
  "node_id": "MDU6SXNzdWU5NDA5ODc0NA==",
  "number": 1455,
  "title": "Double commit new work jobs after mining a block?",
  "user": {
    "login": "jzencore",
    "id": 12269017,
    "node_id": "MDQ6VXNlcjEyMjY5MDE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/12269017?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jzencore",
    "html_url": "https://github.com/jzencore",
    "followers_url": "https://api.github.com/users/jzencore/followers",
    "following_url": "https://api.github.com/users/jzencore/following{/other_user}",
    "gists_url": "https://api.github.com/users/jzencore/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jzencore/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jzencore/subscriptions",
    "organizations_url": "https://api.github.com/users/jzencore/orgs",
    "repos_url": "https://api.github.com/users/jzencore/repos",
    "events_url": "https://api.github.com/users/jzencore/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jzencore/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2015-07-09T16:46:22Z",
  "updated_at": "2015-09-17T21:41:51Z",
  "closed_at": "2015-09-17T21:41:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "On the current geth 0.9.36 I'm consistently seeing new work committed twice on same new block immediately following the mining of a previous block, causing the miner to reset work loop twice for the same new block.   Sometimes the double commits are the same, sometimes they differ only in the number of transactions. Are others seeing this behavior, is it a bug or is it a feature?\n\nFor example:\n\nI0709 02:59:41.768021   25556 worker.go:293] ðŸ”¨  Mined block (#837904 / 04fba687). Wait 5 blocks for confirmation\nI0709 02:59:41.970673   25556 worker.go:487] commit new work on block 837905 with 27 txs & 0 uncles. Took 202.617847ms\nI0709 02:59:42.109281   25556 worker.go:487] commit new work on block 837905 with 27 txs & 0 uncles. Took 136.876236ms\nI0709 02:59:50.314829   25556 chain_manager.go:671] imported 1 block(s) (0 queued 0 ignored) including 45 txs in 214.553523ms. #837905 [a436fb9a / a436fb9a]\nI0709 02:59:50.364360   25556 worker.go:487] commit new work on block 837906 with 11 txs & 0 uncles. Took 49.433694ms\nI0709 02:59:53.545131   25556 chain_manager.go:671] imported 1 block(s) (0 queued 0 ignored) including 3 txs in 17.423299ms. #837906 [2cd6604f / 2cd6604f]\nI0709 02:59:54.939527   25556 worker.go:487] commit new work on block 837907 with 135 txs & 0 uncles. Took 1.394284192s\nI0709 03:00:00.337730   25556 worker.go:293] ðŸ”¨  Mined block (#837907 / d3c238be). Wait 5 blocks for confirmation\nI0709 03:00:00.757117   25556 worker.go:487] commit new work on block 837908 with 65 txs & 0 uncles. Took 419.344846ms\nI0709 03:00:01.049974   25556 worker.go:487] commit new work on block 837908 with 65 txs & 0 uncles. Took 291.313109ms\n\nI see the same behavior in 0.9.39 too.\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/141235745",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/1455#issuecomment-141235745",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/1455",
    "id": 141235745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTIzNTc0NQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-17T21:41:50Z",
    "updated_at": "2015-09-17T21:41:50Z",
    "author_association": "MEMBER",
    "body": "Should be resolved in #1780 (likely earlier, given that this is an Olympic issue).\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/141235745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/21465",
  "id": 682330928,
  "node_id": "MDU6SXNzdWU2ODIzMzA5Mjg=",
  "number": 21465,
  "title": "panic: runtime error: invalid memory address or nil pointer dereference - go-ethereum@v1.9.19/accounts/abi/bind/base.go:151",
  "user": {
    "login": "enqack",
    "id": 1780472,
    "node_id": "MDQ6VXNlcjE3ODA0NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1780472?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/enqack",
    "html_url": "https://github.com/enqack",
    "followers_url": "https://api.github.com/users/enqack/followers",
    "following_url": "https://api.github.com/users/enqack/following{/other_user}",
    "gists_url": "https://api.github.com/users/enqack/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/enqack/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/enqack/subscriptions",
    "organizations_url": "https://api.github.com/users/enqack/orgs",
    "repos_url": "https://api.github.com/users/enqack/repos",
    "events_url": "https://api.github.com/users/enqack/events{/privacy}",
    "received_events_url": "https://api.github.com/users/enqack/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-08-20T02:42:37Z",
  "updated_at": "2020-08-24T01:51:51Z",
  "closed_at": "2020-08-24T01:51:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\nI'm using go-ethereum as a library for a project and have encountered an error I'm unable to resolve.  I'm attempting to interact with (read) Bancor's contract system.\r\n\r\nI have followed instructions to generate a Go package from the [abi and bin files](https://github.com/bancorprotocol/contracts-solidity/tree/master/solidity/build) that are supplied by Bancor. Generating the package with `solc` produced abi and bin files was failing; i.e. `solc --abi Store.sol`. Preliminary interaction with the (Contract Registry) smart contracts is working as expected but when calling the `ConversionPath` function of the \"network\" contract the panic is raised. \r\n\r\nThank you\r\n\r\n#### System information\r\n\r\nGeth version: 1.9.19\r\nOS & Version: Popos (Ubuntu) 18.04 LTS\r\ngo version go1.15 linux/amd64\r\n\r\n#### Expected behaviour\r\n\r\nReturn a conversion path used by the Bancor Network for rate data and token swapping.\r\n\r\n#### Actual behaviour\r\n\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x9ccf80]\r\n\r\n#### Steps to reproduce the behaviour\r\n````\r\n$ abigen --bin BancorNetwork.bin --abi BancorNetwork.abi --pkg bancorNetwork -out BancorNetwork.go\r\n$ abigen --bin ContractRegistry.bin --abi ContractRegistry.abi --pkg contractRegistry -out ContractRegistry.go\r\n````\r\n\r\n````\r\npackage main\r\n\r\n\r\nimport (\r\n    \"fmt\"\r\n    \"log\"\r\n    \"math/big\"\r\n\r\n    \"github.com/ethereum/go-ethereum/common\"\r\n    \"github.com/ethereum/go-ethereum/ethclient\"\r\n\r\n    \"bancor/src/contracts/contractRegistry\"\r\n    \"bancor/src/contracts/bancorNetwork\"\r\n)\r\n\r\nfunc main() {\r\n    var contractRegistryAdresss common.Address\r\n    var networkAddress common.Address\r\n    var inputAmount, _ = new(big.Int).SetString(\"154000000000\", 10)\r\n\r\n    client, err := ethclient.Dial(\"https://mainnet.infura.io/v3/<apikey>\")\r\n    if err != nil {\r\n        log.Fatal(err)\r\n    }\r\n\r\n    inputToken := common.HexToAddress(\"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\")\r\n    outputToken := common.HexToAddress(\"0x6b175474e89094c44da98b954eedeac495271d0f\")\r\n\r\n    contractRegistryAdresss = common.HexToAddress(\"0x52Ae12ABe5D8BD778BD5397F99cA900624CfADD4\")\r\n    contractRegistryContract, _ := contractRegistry.NewContractRegistry(contractRegistryAdresss, client)\r\n\r\n    value := [32]byte{}; copy(value[:], []byte(\"BancorNetwork\"))\r\n    networkAddress, _ = contractRegistryContract.AddressOf(nil, value)\r\n    fmt.Printf(\"BancorNetwork contract address: %s\\n\", networkAddress.Hex())\r\n\r\n    networkContract, _ := bancorNetwork.NewBancorNetwork(networkAddress, nil)\r\n\r\n    conversionPath, _ := networkContract.ConversionPath(nil, inputToken, outputToken)\r\n\r\n    bancorReturn, _ := networkContract.RateByPath(nil, conversionPath, inputAmount)\r\n    fmt.Println(bancorReturn)\r\n}\r\n````\r\n#### Backtrace\r\n\r\n````\r\nBancorNetwork contract address: 0x2F9EC37d6CcFFf1caB21733BdaDEdE11c823cCB0\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x9c0b80]\r\n\r\ngoroutine 1 [running]:\r\ngithub.com/ethereum/go-ethereum/accounts/abi/bind.(*BoundContract).Call(0xc0001a2780, 0xc00031f8f8, 0xa28740, 0xc0002e6060, 0xb3e98e, 0xe, 0xc00031fe20, 0x2, 0x2, 0x0, ...)\r\n\t/home/sysop/Projects/go/pkg/mod/github.com/ethereum/go-ethereum@v1.9.19/accounts/abi/bind/base.go:151 +0x520\r\nbancor/src/contracts/bancorNetwork.(*BancorNetworkCaller).ConversionPath(0xc0002e6040, 0x0, 0xeeeeeeeeeeeeeeee, 0xeeeeeeeeeeeeeeee, 0x7454176beeeeeeee, 0x958ba94dc49490e8, 0xf1d2795c4eaed4e, 0x0, 0x0, 0x0, ...)\r\n\t/home/sysop/Projects/go/src/github.com/enqack/bancor/src/contracts/bancorNetwork/BancorNetwork.go:199 +0x16d\r\nmain.main()\r\n\t/home/sysop/Projects/go/src/github.com/enqack/bancor/src/main.go:38 +0x3ba\r\nexit status 2\r\n\r\n````\r\n",
  "closed_by": {
    "login": "enqack",
    "id": 1780472,
    "node_id": "MDQ6VXNlcjE3ODA0NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1780472?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/enqack",
    "html_url": "https://github.com/enqack",
    "followers_url": "https://api.github.com/users/enqack/followers",
    "following_url": "https://api.github.com/users/enqack/following{/other_user}",
    "gists_url": "https://api.github.com/users/enqack/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/enqack/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/enqack/subscriptions",
    "organizations_url": "https://api.github.com/users/enqack/orgs",
    "repos_url": "https://api.github.com/users/enqack/repos",
    "events_url": "https://api.github.com/users/enqack/events{/privacy}",
    "received_events_url": "https://api.github.com/users/enqack/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677495214",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21465#issuecomment-677495214",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465",
    "id": 677495214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzQ5NTIxNA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T09:44:45Z",
    "updated_at": "2020-08-20T09:44:45Z",
    "author_association": "MEMBER",
    "body": "Please add proper error checking and see if anything fails. Something in your flow probably broke and you kept going, ignoring errors.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677495214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677769412",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21465#issuecomment-677769412",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465",
    "id": 677769412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Nzc2OTQxMg==",
    "user": {
      "login": "enqack",
      "id": 1780472,
      "node_id": "MDQ6VXNlcjE3ODA0NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1780472?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enqack",
      "html_url": "https://github.com/enqack",
      "followers_url": "https://api.github.com/users/enqack/followers",
      "following_url": "https://api.github.com/users/enqack/following{/other_user}",
      "gists_url": "https://api.github.com/users/enqack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enqack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enqack/subscriptions",
      "organizations_url": "https://api.github.com/users/enqack/orgs",
      "repos_url": "https://api.github.com/users/enqack/repos",
      "events_url": "https://api.github.com/users/enqack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enqack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T16:30:13Z",
    "updated_at": "2020-08-20T16:30:13Z",
    "author_association": "NONE",
    "body": "No errors; just an example.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/677769412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/678863620",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/21465#issuecomment-678863620",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/21465",
    "id": 678863620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODg2MzYyMA==",
    "user": {
      "login": "enqack",
      "id": 1780472,
      "node_id": "MDQ6VXNlcjE3ODA0NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1780472?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enqack",
      "html_url": "https://github.com/enqack",
      "followers_url": "https://api.github.com/users/enqack/followers",
      "following_url": "https://api.github.com/users/enqack/following{/other_user}",
      "gists_url": "https://api.github.com/users/enqack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enqack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enqack/subscriptions",
      "organizations_url": "https://api.github.com/users/enqack/orgs",
      "repos_url": "https://api.github.com/users/enqack/repos",
      "events_url": "https://api.github.com/users/enqack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enqack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-24T01:51:51Z",
    "updated_at": "2020-08-24T01:51:51Z",
    "author_association": "NONE",
    "body": "The following line needed the client:\r\n````\r\nnetworkContract, _ := bancorNetwork.NewBancorNetwork(networkAddress, nil)\r\n````\r\nCorrection:\r\n````\r\nnetworkContract, _ := bancorNetwork.NewBancorNetwork(networkAddress, client)\r\n````\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/678863620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

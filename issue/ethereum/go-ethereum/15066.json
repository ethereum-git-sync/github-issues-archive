{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15066",
  "id": 254390071,
  "node_id": "MDU6SXNzdWUyNTQzOTAwNzE=",
  "number": 15066,
  "title": "nonce reuse issue",
  "user": {
    "login": "richiela",
    "id": 928196,
    "node_id": "MDQ6VXNlcjkyODE5Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/richiela",
    "html_url": "https://github.com/richiela",
    "followers_url": "https://api.github.com/users/richiela/followers",
    "following_url": "https://api.github.com/users/richiela/following{/other_user}",
    "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
    "organizations_url": "https://api.github.com/users/richiela/orgs",
    "repos_url": "https://api.github.com/users/richiela/repos",
    "events_url": "https://api.github.com/users/richiela/events{/privacy}",
    "received_events_url": "https://api.github.com/users/richiela/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2017-08-31T16:14:01Z",
  "updated_at": "2017-09-29T08:27:07Z",
  "closed_at": "2017-09-29T08:27:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: \r\nGeth\r\nVersion: 1.6.7-stable\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.8\r\nOperating System: linux\r\n\r\nCONFIG options:\r\n```\r\ngeth  --fast --verbosity \"3\" --rpc --rpcaddr 0.0.0.0 --rpcport 8101 --rpccorsdomain \"*\" --rpcapi \"db,net,eth,web3,personal,admin\" --targetgaslimit 1000000 --cache 8192 --txpool.accountqueue 8192\r\n```\r\n\r\nOS & Version: Ubuntu 16.04\r\nCommit hash : (if `develop`)\r\n\r\n#### Expected behaviour\r\nnonce's dont get reused\r\n\r\n#### Actual behaviour\r\nnonce was rolled back 300ish and re-used\r\n\r\n#### Steps to reproduce the behaviour\r\nWe send out, at peak around 70-80tx's a min, and on avg around 40-50txs.  We use a gas price of 1.5x getGasPrice.  Whenever there is a spike in network traffic, and a quick increase in gasPrice, geth resets the nonce and overwrites entire blocks of transactions; in this case, about 300 nonces.  All sends are done via eth_sendTransaction json rpc.\r\n\r\nBroadcasted: 2017-08-31 14:58:50.2500000 UTC -- This is reusing an old nonce.  This was an assigned nonce but hadnt confirmed yet.\r\n```\r\n> eth.getTransaction(\"0x3c6a1d4b327f62751ad2e6f677e16662a0ac3b31e6aef2b4789aa824a5dc86f2\")\r\n{\r\n  blockHash: \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  blockNumber: null,\r\n  from: \"0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98\",\r\n  gas: 150334,\r\n  gasPrice: 75000000000,\r\n  hash: \"0x3c6a1d4b327f62751ad2e6f677e16662a0ac3b31e6aef2b4789aa824a5dc86f2\",\r\n  input: \"0x6ea056a900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e5d0f042e878000\",\r\n  nonce: 1266479,\r\n  r: \"0x408ea73265466b227c8a1c8ae50a077ac62609a1f378ed68cc6707ed8a981647\",\r\n  s: \"0x23ea18efc2a0dd32e65de252e75fddb8749592708fe8754456720cc900239046\",\r\n  to: \"0x6e58d22a0a60225ce9bea0abe63648596247f394\",\r\n  transactionIndex: 0,\r\n  v: \"0x26\",\r\n  value: 0\r\n}\r\n```\r\nBroadcasted: 2017-08-31 14:11:23.807 - this one confirms but not till Aug-31-2017 03:01:45 PM +UTC (according to etherscan)\r\n```\r\n> eth.getTransaction(\"0x73c9213e9c55b5e92d62d663fdd069c18a29c2ee3844f1e7ab4c08e7fdd140b2\")\r\n{\r\n  blockHash: \"0xc69ad32b41d4331a9396781171224375be32d53fe5ea6f13b4d68c5f436b8432\",\r\n  blockNumber: 4223742,\r\n  from: \"0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98\",\r\n  gas: 121001,\r\n  gasPrice: 90000000000,\r\n  hash: \"0x73c9213e9c55b5e92d62d663fdd069c18a29c2ee3844f1e7ab4c08e7fdd140b2\",\r\n  input: \"0x\",\r\n  nonce: 1266479,\r\n  r: \"0x8f75d1fae36287fd595c5da641e75b9712dcbf2000dce56ad700ab6b3a7637dd\",\r\n  s: \"0x36b3ae7e2a3fc60f95f24cd19489e993ab83a3e1355ccae311b83e57e0cb5c3\",\r\n  to: \"0xfb793c7af5c0e6d8d1250a9c74ebadfaf3967fb6\",\r\n  transactionIndex: 4,\r\n  v: \"0x26\",\r\n  value: 374543630000000000\r\n}\r\n```\r\nAnother tx from the same rollback period:\r\n\r\nBroadcasted: 2017-08-31 15:04:59.5430000\r\n```\r\n> eth.getTransaction(\"0x21c1956ad2b89326df750e550ce56cde25710550af2ec448b2520630856ff3f1\")\r\n{\r\n  blockHash: \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n  blockNumber: null,\r\n  from: \"0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98\",\r\n  gas: 150334,\r\n  gasPrice: 75000000000,\r\n  hash: \"0x21c1956ad2b89326df750e550ce56cde25710550af2ec448b2520630856ff3f1\",\r\n  input: \"0x6ea056a9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e5fcefaaf16c00\",\r\n  nonce: 1266540,\r\n  r: \"0x2f2f2f947a50f95617443a9da083ee762cddb3b03195650076800da9d522a9ee\",\r\n  s: \"0x3291186846a3b09ff332b73ec31e77b61d139fe87148d3f8b4b4abc09853dee\",\r\n  to: \"0x11fd1c5999acc7d5d83fd520f5b33b05807f1a85\",\r\n  transactionIndex: 0,\r\n  v: \"0x26\",\r\n  value: 0\r\n}\r\n```\r\nBroadcasted: 2017-08-31 14:16:31.910 - not confirmed till Aug-31-2017 03:14:28 PM +UTC\r\n```\r\n> eth.getTransaction(\"0xe919fb38f553b65dc4bd2602460d99b88e6986cba5eb0e42d730f516a80f5d87\")\r\n{\r\n  blockHash: \"0x78dc81e0579eb65bfc4edb42ad20879b29c032a19f12c94f3da3fc6190f75999\",\r\n  blockNumber: 4223769,\r\n  from: \"0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98\",\r\n  gas: 194064,\r\n  gasPrice: 90000000000,\r\n  hash: \"0xe919fb38f553b65dc4bd2602460d99b88e6986cba5eb0e42d730f516a80f5d87\",\r\n  input: \"0xa9059cbb000000000000000000000000df04eaf5fe642ab9fce3a9bb4957361f514bc6570000000000000000000000000000000000000000000000000000000f819c17c0\",\r\n  nonce: 1266540,\r\n  r: \"0x251be747647776f146c9bccd6cdc00cd6a9e83276c35e5ddf6072ece71a07b78\",\r\n  s: \"0x1abd960edb35228248b4a9fe588ed5c2ce7672a795aff3cf23960132afa34d26\",\r\n  to: \"0x419d0d8bdd9af5e606ae2232ed285aff190e711b\",\r\n  transactionIndex: 14,\r\n  v: \"0x25\",\r\n  value: 0\r\n}\r\n\r\n\r\n```\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326349558",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326349558",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326349558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjM0OTU1OA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-31T16:25:07Z",
    "updated_at": "2017-08-31T16:25:07Z",
    "author_association": "MEMBER",
    "body": ">  a quick increase in gasPrice\r\n\r\nI would guess that's it. The transactions laying in the pools are removed if they are under the gasPrice, so that could just drop 300 transactions. However, they _should_ be tagged as `local`s, and therefore retained anyway... cc @karalabe ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326349558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326352043",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326352043",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326352043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjM1MjA0Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-31T16:34:26Z",
    "updated_at": "2017-08-31T16:34:26Z",
    "author_association": "MEMBER",
    "body": "One thing we might need to take a look into are reorgs. If a block gets a transaction included, then a reorg happens, there might be a slight delay between reorging the \"stale block\" and getting the old transactions back into the tx pool. If a new transaction arrives in between, it will see the \"next nonce\" as low, as the previously included transactions haven't been rescheduled yet.\r\n\r\nThis is just a hunch btw, but I've seen some similar phenomenon on Rinkeby so it might be worth to investigate.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326352043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326356144",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326356144",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326356144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjM1NjE0NA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-31T16:50:05Z",
    "updated_at": "2017-08-31T16:50:56Z",
    "author_association": "MEMBER",
    "body": "So, just to make this clear: are the two `eth.getTransaction` -invocations made at the same time? As in, did the client hold both these transactions simultaneously @richiela ? \r\n\r\n... because if so, it means that a tx was removed from a pool, but not cleared from `tx.all`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326356144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326369853",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326369853",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326369853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjM2OTg1Mw==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-31T17:41:01Z",
    "updated_at": "2017-08-31T17:42:15Z",
    "author_association": "NONE",
    "body": "Correct... all the above tx's were retrieved at the same time from the geth daemon.  In fact, the orphan one still exists as of this posting.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326369853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326507997",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326507997",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326507997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjUwNzk5Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-01T07:13:21Z",
    "updated_at": "2017-09-01T07:13:21Z",
    "author_association": "MEMBER",
    "body": "@karalabe I'll use this ticket to collect paste any finding I make, and later collect them in a PR. First one: \r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/master/core/tx_list.go#L437\r\n\r\n* If `tx` is local, it won't be saved, since the loop will break before saving it. \r\n* Likely not the root cause here, because it would (afaict) still clean it from `all`, whereas in _this_ bug there's some flaw where a tx is left in `all` despite being removed from relevant pools.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326507997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326921331",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-326921331",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 326921331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjkyMTMzMQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-04T09:59:19Z",
    "updated_at": "2017-09-04T09:59:19Z",
    "author_association": "MEMBER",
    "body": "I think this was auto-closed due to my PR text (?). I'm reopening, because I'm not certain it's fixed. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/326921331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/327440030",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-327440030",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 327440030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzQ0MDAzMA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-06T10:14:50Z",
    "updated_at": "2017-09-06T10:15:12Z",
    "author_association": "MEMBER",
    "body": "@richiela We've found and fixed an ugly issue in the transaction pool. Hopefully that will make nonces a lot more reliable from now on. It will be part of the 1.7.0 release. It's already on master btw, though I assume you don't want to run unstable builds.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/327440030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/327994848",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-327994848",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 327994848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzk5NDg0OA==",
    "user": {
      "login": "richiela",
      "id": 928196,
      "node_id": "MDQ6VXNlcjkyODE5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/928196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richiela",
      "html_url": "https://github.com/richiela",
      "followers_url": "https://api.github.com/users/richiela/followers",
      "following_url": "https://api.github.com/users/richiela/following{/other_user}",
      "gists_url": "https://api.github.com/users/richiela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richiela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richiela/subscriptions",
      "organizations_url": "https://api.github.com/users/richiela/orgs",
      "repos_url": "https://api.github.com/users/richiela/repos",
      "events_url": "https://api.github.com/users/richiela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richiela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-08T04:18:22Z",
    "updated_at": "2017-09-08T04:19:05Z",
    "author_association": "NONE",
    "body": "Looking forward to it... do we have a timeline for 1.7.0?  You are correct, unstable builds is no beuno.  Can you describe the conditions in which this ugly issue reared its head?   Might be something i can do to mitigate if i understand it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/327994848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/329728335",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-329728335",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 329728335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTcyODMzNQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-15T09:17:55Z",
    "updated_at": "2017-09-15T09:17:55Z",
    "author_association": "MEMBER",
    "body": "@richiela We've released 1.7, but please take care with it, since it contains a significant number of updates and it's not possible to downgrade to 1.6.x from 1.7.\r\n\r\nThe error we found was that during reorgs (uncles, concurrent blocks, etc), the system fired two events: \"new head block\" and \"reorged transactions\". The pool updated its state (i.e. account nonces) based on the first event, and readded removed transactions based on the second event. But events are fired concurrently, so if the tx event arrived first, all txs were discarded as conflicting with the nonces tracked by the pool; and only afterwards were the nonces updated, when the head block event arrived.\r\n\r\nThere was a similar issue around mining too btw, as the miner also did some funky crap concurrently with the pool. In 1.7.0, we've reworked the pool to only ever have a single \"modification\" pathway and all updates to happen atomically, instead reactively to various system events.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/329728335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333064695",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15066#issuecomment-333064695",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15066",
    "id": 333064695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzA2NDY5NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-29T08:27:07Z",
    "updated_at": "2017-09-29T08:27:07Z",
    "author_association": "MEMBER",
    "body": "I suspect this is fixed now, closing",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333064695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

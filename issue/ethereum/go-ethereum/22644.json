{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22644",
  "id": 855008876,
  "node_id": "MDU6SXNzdWU4NTUwMDg4NzY=",
  "number": 22644,
  "title": "Light sync mode returns transaction receipts as null for synced block",
  "user": {
    "login": "rajesh1158",
    "id": 1697792,
    "node_id": "MDQ6VXNlcjE2OTc3OTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1697792?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rajesh1158",
    "html_url": "https://github.com/rajesh1158",
    "followers_url": "https://api.github.com/users/rajesh1158/followers",
    "following_url": "https://api.github.com/users/rajesh1158/following{/other_user}",
    "gists_url": "https://api.github.com/users/rajesh1158/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rajesh1158/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rajesh1158/subscriptions",
    "organizations_url": "https://api.github.com/users/rajesh1158/orgs",
    "repos_url": "https://api.github.com/users/rajesh1158/repos",
    "events_url": "https://api.github.com/users/rajesh1158/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rajesh1158/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-04-10T07:56:55Z",
  "updated_at": "2021-04-12T09:58:19Z",
  "closed_at": "2021-04-12T09:58:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.10.2-stable`\r\nOS & Version: linux (centos)\r\nCommit hash : `97d11b0187b4695ccf44e3b71b54155fe405a36f`\r\n\r\n#### Expected behaviour\r\nTransaction receipt should not be null for synced block\r\n\r\n#### Actual behaviour\r\nTransaction receipt is null\r\n\r\n#### Steps to reproduce the behaviour\r\nStart blockchain sync using geth in light mode\r\n\r\n\r\nI installed geth (v1.10.2-stable) on my server and started the sync in light mode, the exact command is below:\r\n\r\n`geth --http --http.api personal,eth,net,web3 --http.addr=0.0.0.0 --http.port 8545 --gcmode full --syncmode light --cache 1024`\r\n\r\nI have a nodejs script which gets the latest block synced and iterate over all the transactions in it and then get the receipt for each transaction. Randomly I get null value instead of the receipt object. I am using web3 package from npm to do all this work. I even added a delay of 60 seconds from the block timestamp and then try to read the transaction receipt, but I still get null values. It is all random and has no fixed pattern. In some cases, receipt for all transactions in a block return null while in other cases only a few return null. Any idea why could this be happening?\r\n\r\n",
  "closed_by": {
    "login": "rajesh1158",
    "id": 1697792,
    "node_id": "MDQ6VXNlcjE2OTc3OTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1697792?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rajesh1158",
    "html_url": "https://github.com/rajesh1158",
    "followers_url": "https://api.github.com/users/rajesh1158/followers",
    "following_url": "https://api.github.com/users/rajesh1158/following{/other_user}",
    "gists_url": "https://api.github.com/users/rajesh1158/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rajesh1158/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rajesh1158/subscriptions",
    "organizations_url": "https://api.github.com/users/rajesh1158/orgs",
    "repos_url": "https://api.github.com/users/rajesh1158/repos",
    "events_url": "https://api.github.com/users/rajesh1158/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rajesh1158/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817663213",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22644#issuecomment-817663213",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644",
    "id": 817663213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzY2MzIxMw==",
    "user": {
      "login": "lukerQuant",
      "id": 54838320,
      "node_id": "MDQ6VXNlcjU0ODM4MzIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/54838320?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukerQuant",
      "html_url": "https://github.com/lukerQuant",
      "followers_url": "https://api.github.com/users/lukerQuant/followers",
      "following_url": "https://api.github.com/users/lukerQuant/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukerQuant/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukerQuant/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukerQuant/subscriptions",
      "organizations_url": "https://api.github.com/users/lukerQuant/orgs",
      "repos_url": "https://api.github.com/users/lukerQuant/repos",
      "events_url": "https://api.github.com/users/lukerQuant/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukerQuant/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-12T09:48:07Z",
    "updated_at": "2021-04-12T09:48:07Z",
    "author_association": "NONE",
    "body": "Hi there. \r\n\r\nWe have also encountered this issue with geth release 1.10.1.\r\n\r\nWe are getting receipts for the latest txs but null for tx receipts of a certain time period ago (e.g. 2 years)\r\n\r\nWe retried with a full node fast synced and also experienced this issue. \r\n\r\nPlease advise",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817663213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817670741",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22644#issuecomment-817670741",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22644",
    "id": 817670741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzY3MDc0MQ==",
    "user": {
      "login": "rajesh1158",
      "id": 1697792,
      "node_id": "MDQ6VXNlcjE2OTc3OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1697792?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rajesh1158",
      "html_url": "https://github.com/rajesh1158",
      "followers_url": "https://api.github.com/users/rajesh1158/followers",
      "following_url": "https://api.github.com/users/rajesh1158/following{/other_user}",
      "gists_url": "https://api.github.com/users/rajesh1158/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rajesh1158/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rajesh1158/subscriptions",
      "organizations_url": "https://api.github.com/users/rajesh1158/orgs",
      "repos_url": "https://api.github.com/users/rajesh1158/repos",
      "events_url": "https://api.github.com/users/rajesh1158/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rajesh1158/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-12T09:58:09Z",
    "updated_at": "2021-04-12T09:58:09Z",
    "author_association": "NONE",
    "body": "I have an update for my issue. I realised I get null receipts because I was reading the blocks immediately once its synced and I was not waiting for a minimum block confirmation (say wait for 3 or 5 blocks), and due to that there is a very high chance of blocks or transactions inside a block getting dropped and replaced. I have changed my code to wait for 5 block confirmations for now and I no longer get null receipts.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817670741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/27788",
  "id": 1824090872,
  "node_id": "I_kwDOAOvK985suWr4",
  "number": 27788,
  "title": "I want to take transactions from a block and resubmit them after going back in the chain by using the debug_setHead",
  "user": {
    "login": "akefhabbal-qu",
    "id": 61380734,
    "node_id": "MDQ6VXNlcjYxMzgwNzM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/61380734?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/akefhabbal-qu",
    "html_url": "https://github.com/akefhabbal-qu",
    "followers_url": "https://api.github.com/users/akefhabbal-qu/followers",
    "following_url": "https://api.github.com/users/akefhabbal-qu/following{/other_user}",
    "gists_url": "https://api.github.com/users/akefhabbal-qu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/akefhabbal-qu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/akefhabbal-qu/subscriptions",
    "organizations_url": "https://api.github.com/users/akefhabbal-qu/orgs",
    "repos_url": "https://api.github.com/users/akefhabbal-qu/repos",
    "events_url": "https://api.github.com/users/akefhabbal-qu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/akefhabbal-qu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 268304226,
      "node_id": "MDU6TGFiZWwyNjgzMDQyMjY=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:docs",
      "name": "type:docs",
      "color": "fef2c0",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-27T10:32:49Z",
  "updated_at": "2023-07-31T05:14:27Z",
  "closed_at": "2023-07-31T05:14:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am following the IDChain  https://github.com/IDChain-eth/IDChain  solution for the deadlock problem in the PoA https://github.com/ethereum/go-ethereum/issues/18402. However, their script doesn't return the ignored blocks's transactions to the pool. So I want to do it manually by taking the transactions from each ignored block and resubmitted to the blockchain. However, I am able to get the transactions from the block. But the only rpc method to submit these transactions is eth_sendRawTransaction, but I don't know how to convert my signed transaction to raw transaction.\r\nI used the package ethereum-tx. However, when I serilaze my transaction and send it  to the blockchain I got the following error \"insufficient fund\"\r\n\r\nthe following is my code to convert a signed transaction that I extract from a block into raw transaction and submit it to the blockchain using the eth_sendRawTransaction rpc method:\r\n```\r\nconst tx1 = new Transaction(\r\n        {\r\n          from: transaction.from,\r\n          nonce: transaction.nonce,\r\n          gasPrice: transaction.gasPrice,\r\n          gasLimit: transaction.gasLimit,\r\n          to: transaction.to,\r\n          value: transaction.value,\r\n          data: transaction.data,\r\n          v: transaction.v,\r\n          r: transaction.r,\r\n          s: transaction.s,\r\n        },\r\n        { common: customCommon }\r\n      );\r\n      const serializedTrans = tx1.serialize();\r\n      const raw = \"0x\" + serializedTrans.toString(\"hex\");\r\n      \r\n      const payload = JSON.stringify({\r\n    jsonrpc: \"2.0\",\r\n    method: \"eth_sendRawTransaction\",\r\n    params: raw ,\r\n    id: 1,\r\n  });\r\n  const headers = {\r\n    \"Content-Type\": \"application/json\",\r\n    \"Cache-Control\": \"no-cache\",\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post(RPC_URL, payload, { headers });\r\n    return response.data.result;\r\n  } catch (error) {\r\n    return execute(cmd, params);\r\n  }\r\n```",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1653481984",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27788#issuecomment-1653481984",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788",
    "id": 1653481984,
    "node_id": "IC_kwDOAOvK985ijiIA",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T12:05:39Z",
    "updated_at": "2023-07-27T12:05:39Z",
    "author_association": "MEMBER",
    "body": "You don't need to setHead all signers to unblock them, only one. If that one starts building on the alternative chain that chain goes forward and there are no transactions lost (apart from maybe a couple that was in the setHead-ed miner's very last block), but that should also be in other's pool.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1653481984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1653500239",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27788#issuecomment-1653500239",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788",
    "id": 1653500239,
    "node_id": "IC_kwDOAOvK985ijmlP",
    "user": {
      "login": "akefhabbal-qu",
      "id": 61380734,
      "node_id": "MDQ6VXNlcjYxMzgwNzM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/61380734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akefhabbal-qu",
      "html_url": "https://github.com/akefhabbal-qu",
      "followers_url": "https://api.github.com/users/akefhabbal-qu/followers",
      "following_url": "https://api.github.com/users/akefhabbal-qu/following{/other_user}",
      "gists_url": "https://api.github.com/users/akefhabbal-qu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akefhabbal-qu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akefhabbal-qu/subscriptions",
      "organizations_url": "https://api.github.com/users/akefhabbal-qu/orgs",
      "repos_url": "https://api.github.com/users/akefhabbal-qu/repos",
      "events_url": "https://api.github.com/users/akefhabbal-qu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akefhabbal-qu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T12:17:02Z",
    "updated_at": "2023-07-27T13:08:37Z",
    "author_association": "NONE",
    "body": "I am running the following script on all miners\r\nhttps://github.com/IDChain-eth/IDChain/blob/release/1.9/deadlock_resolver.py\r\nif a deadlock happens all miners roll back some blocks and their transactions are lost. That is way I want to modify this script to extract all the transactions from the ignored blocks back to the pool.  @karalabe ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1653500239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1655325483",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/27788#issuecomment-1655325483",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/27788",
    "id": 1655325483,
    "node_id": "IC_kwDOAOvK985iqkMr",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T09:03:18Z",
    "updated_at": "2023-07-28T09:03:18Z",
    "author_association": "MEMBER",
    "body": "I doubt you will be able to reconstruct a transaction by setting it field by field in a constructor in some 3rd party library. There are many types of transactions that require different fields and even a single mismatch will result in an invalid signature.\r\n\r\nYou could use for example eth_getRawTransaction to retrieve the actual already encoded transaction and use that to feed it back via eth_sendRawTransaction.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/1655325483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

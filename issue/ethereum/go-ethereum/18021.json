{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/18021",
  "id": 376706528,
  "node_id": "MDU6SXNzdWUzNzY3MDY1Mjg=",
  "number": 18021,
  "title": "I find a bug in event/feed.go",
  "user": {
    "login": "liuzhijun23",
    "id": 31067893,
    "node_id": "MDQ6VXNlcjMxMDY3ODkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/liuzhijun23",
    "html_url": "https://github.com/liuzhijun23",
    "followers_url": "https://api.github.com/users/liuzhijun23/followers",
    "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
    "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
    "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
    "repos_url": "https://api.github.com/users/liuzhijun23/repos",
    "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 23,
  "created_at": "2018-11-02T08:05:28Z",
  "updated_at": "2019-07-12T13:15:16Z",
  "closed_at": "2019-01-29T11:22:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I read the resource code of event/feed.go in go-ethereum Version 1.8.17,I find there is a bug in Send function。Let me see the code about sendLock:\r\n`func (f *Feed) Send(value interface{}) (nsent int) {\r\n           .........\r\n          f.once.Do(f.init)\r\n         //1. read sendLock chan\r\n\t<-f.sendLock \r\n        \r\n       ............\r\n       if !f.typecheck(rvalue.Type()) {\r\n               //2. there is a panic,write sendLock chan\r\n\t\tf.sendLock <- struct{}{}\r\n\t\tpanic(feedTypeError{op: \"Send\", got: rvalue.Type(), want: f.etype})\r\n\t}\r\n\r\n       cases := f.sendCases\r\n        //do send operation in the for loop \r\n\tfor {\r\n                .............\r\n        }\r\n       //3. wire sendLock chan in the end\r\n       f.sendLock <- struct{}{}\r\n       return nsent\r\n}`\r\nThe bug is ,if the for loop is blocked，the step 3 would not excute, so the sendLock would result to \r\nthe next send operation blocked.Maybe there is no need to use sendLock chan in this function.",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436004306",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-436004306",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 436004306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAwNDMwNg==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T19:29:10Z",
    "updated_at": "2018-11-05T19:29:10Z",
    "author_association": "MEMBER",
    "body": "I think the send lock is correct because only one send should be running at any time. Send blocks until all channels have received the value. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436004306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436097204",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-436097204",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 436097204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjA5NzIwNA==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T01:21:35Z",
    "updated_at": "2018-11-06T01:21:35Z",
    "author_association": "NONE",
    "body": "> I think the send lock is correct because only one send should be running at any time. Send blocks until all channels have received the value.\r\n\r\nBut If one send is blocked,all the next send would be blocked.And I do not understand why the send should run in sequence but not in parallel.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436097204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436950245",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-436950245",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 436950245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjk1MDI0NQ==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-08T10:39:04Z",
    "updated_at": "2019-01-30T08:00:25Z",
    "author_association": "NONE",
    "body": "I have modify the send function as follow,it can solve the blocked problem.The code is as follow:\r\n```golang\r\n func (f *Feed) Send(value interface{}) (nsent int) {\r\n     rvalue := reflect.ValueOf(value)\r\n\r\n\tf.once.Do(f.init)\r\n\t//<-f.sendLock\r\n\r\n\tsendCases := caseList{{Chan: reflect.ValueOf(f.removeSub), Dir: reflect.SelectRecv}}\r\n\tsendCases = append(sendCases, f.inbox...)\r\n\r\n\t// Set the sent value on all channels.\r\n\tfor i := firstSubSendCase; i < len(sendCases); i++ {\r\n\t\tsendCases[i].Send = rvalue\r\n\t}\r\n\r\n\t// Send until all channels except removeSub have been chosen. 'cases' tracks a prefix\r\n\t// of sendCases. When a send succeeds, the corresponding case moves to the end of\r\n\t// 'cases' and it shrinks by one element.\r\n\tcases := sendCases\r\n\t//LOOP:\r\n\tfor {\r\n\t\t// Fast path: try sending without blocking before adding to the select set.\r\n\t\t// This should usually succeed if subscribers are fast enough and have free\r\n\t\t// buffer space.\r\n\t\tfor i := firstSubSendCase; i < len(cases); i++ {\r\n\t\t\tif cases[i].Chan.TrySend(rvalue) {\r\n\t\t\t\tnsent++\r\n\t\t\t\tcases = cases.deactivate(i)\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\tif len(cases) == firstSubSendCase {\r\n\t\t\tbreak\r\n\t\t}\r\n\t\t// Select on all the receivers, waiting for them to unblock.\r\n\t\tchosen, recv, _ := reflect.Select(cases)\r\n\t\t//<-f.removeSub\r\n\t\tif chosen == 0  {\r\n\t\t\tindex := f.sendCases.find(recv.Interface())\r\n\t\t\tf.sendCases = f.sendCases.delete(index)\r\n\t\t\tif index >= 0 && index < len(cases) {\r\n\t\t\t\t// Shrink 'cases' too because the removed case was still active.\r\n\t\t\t\tcases = f.sendCases[:len(cases)-1]\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcases = cases.deactivate(chosen)\r\n\t\t\tnsent++\r\n\t\t}\r\n\t}\r\n\r\n\t// Forget about the sent value and hand off the send lock.\r\n\tfor i := firstSubSendCase; i < len(f.sendCases); i++ {\r\n\t\tf.sendCases[i].Send = reflect.Value{}\r\n\t}\r\n\t//f.sendLock <- struct{}{}\r\n\treturn nsent\r\n}_\r\n```\r\nThe pre send maybe blocked,but it could not block the next send.And I make the public access as less as possible.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436950245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436951924",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-436951924",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 436951924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjk1MTkyNA==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-08T10:45:05Z",
    "updated_at": "2019-01-30T08:00:56Z",
    "author_association": "NONE",
    "body": "The way to call the send should also very careful.Let me see the function in blockchain.go:\r\n```golang\r\nfunc (bc *BlockChain) PostChainEvents(events []interface{}, logs []*types.Log) {\r\n\tlog.Info(\"lzj-log PostChainEvents\", \"events len\",len(events))\r\n\t// post event logs for further processing\r\n\tif logs != nil {\r\n\t\tbc.logsFeed.Send(logs)\r\n\t}\r\n\tfor _, event := range events {\r\n\t\tswitch ev := event.(type) {\r\n\t\tcase ChainEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainEvent\")\r\n\t\t\tbc.chainFeed.Send(ev)\r\n\r\n\t\tcase ChainHeadEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainHeadEvent\")\r\n\t\t\tbc.chainHeadFeed.Send(ev)\r\n\r\n\t\tcase ChainSideEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainSideEvent\")\r\n\t\t\tbc.chainSideFeed.Send(ev)\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThis function send three event in the for loop.If the pre send is blocked,the function would be blocked,and the next send would never be sent.We can modify the function as follow:\r\n```golang\r\nfunc (bc *BlockChain) PostChainEvents(events []interface{}, logs []*types.Log) {\r\n\tlog.Info(\"lzj-log PostChainEvents\", \"events len\",len(events))\r\n\t// post event logs for further processing\r\n\tif logs != nil {\r\n\t\tbc.logsFeed.Send(logs)\r\n\t}\r\n\tfor _, event := range events {\r\n\t\tswitch ev := event.(type) {\r\n\t\tcase ChainEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainEvent\")\r\n\t\t\tgo bc.chainFeed.Send(ev)//lzj add go\r\n\r\n\t\tcase ChainHeadEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainHeadEvent\")\r\n\t\t\tgo bc.chainHeadFeed.Send(ev)//lzj add go\r\n\r\n\t\tcase ChainSideEvent:\r\n\t\t\tlog.Info(\"lzj-log send ChainSideEvent\")\r\n\t\t\tgo bc.chainSideFeed.Send(ev)//lzj add go\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI just put the send function in a separate go routine.so,the event would be sent all.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/436951924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441179045",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441179045",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441179045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTE3OTA0NQ==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T08:30:18Z",
    "updated_at": "2018-11-23T08:30:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@liuzhijun23 Can you make a patch or PR then everyone can confirm your fix. Thank you!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441179045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441194791",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441194791",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441194791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTE5NDc5MQ==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T09:45:34Z",
    "updated_at": "2018-11-23T09:48:16Z",
    "author_association": "NONE",
    "body": "> @liuzhijun23 Can you make a patch or PR then everyone can confirm your fix. Thank you!\r\n@hadv \r\nThe bug can replay as follow:\r\n1. Build a POA private blockchain with two nodes,one miner and one normal nodes which just be responsible for submit transactions.\r\n2. Build a script to submit transactions in a for loop,with javascript or golang.\r\n3. Run the script in several terminals to produce a lot of transactions to the normal node,with 100+ tps.\r\n4. Wait for about half an hour,check the txpool.status to see if the pendding is became more and more.When there are several thousands of penddings in txpool,and the eth.getBlock(eth.blockNumber).transactions.length is zero,It means that the transactions has blocked.\r\n5. Do as above, you must can replay the problem.The key point is that the transactions should 100+ tps.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441194791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441212351",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441212351",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441212351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTIxMjM1MQ==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T11:02:59Z",
    "updated_at": "2018-11-23T11:02:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, I can reproduce sometimes but still dont know what is the reason. I try to fix the problem as your code but it didnot work properly. Can you make a pull request to summary your fix? @liuzhijun23 \r\n\r\nThank you!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441212351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441336126",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441336126",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441336126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNjEyNg==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T01:38:17Z",
    "updated_at": "2018-11-24T01:38:17Z",
    "author_association": "NONE",
    "body": "All my code change  is shown above.The normal node maybe produce three errors:1,Do not broadcast transaction to the miner.2. Do not synchronize block from miner. 3. Do not update pendding transactions state.The reason of all these problem is that the Feed event blocked.You can add logs in the source codes where you have doubt to trace the program execute.You can find the reason. @hadv ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441336126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441336494",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441336494",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441336494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNjQ5NA==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T01:47:14Z",
    "updated_at": "2018-11-24T01:47:14Z",
    "author_association": "NONE",
    "body": "This is one of my problem resolve records in Chinese:\r\n问题现象：在交易压力测试时通过txpool.pendding发现普通节点的pendding交易太多，交易停止时这些交易也不会清除。通过查询区块链发现这些交易已经被打包成功，只是交易池没有更新。\r\n问题分析：当有新区快来时都会发生pool.chainHeadCh消息，发现当pendding拥堵时没有得到这个消息。追踪源码，发现发生故障时虽然接收到区块头消息，但是没有发送chainHeadCh事件，在发生该事件的函数中堵塞了。\r\n解决方案：将发送函数PostChainEvents()中每个事件的发送单独放入协程，以免某个事件堵塞影响其它事件的发送。\r\n@hadv ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441336494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441338862",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441338862",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441338862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzODg2Mg==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T02:44:42Z",
    "updated_at": "2018-11-24T02:44:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you @liuzhijun23 \r\n\r\nI will investigate more. Even I use separate goroutine for sending events in the PostChainEvents() but I still face the problem when all the network cannot mine any new block. They just propagate the tnx between each others and the new block only be mined when the txpool reach the maximum pool size. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441338862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441341080",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441341080",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441341080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTM0MTA4MA==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T03:41:15Z",
    "updated_at": "2018-11-24T03:41:15Z",
    "author_association": "NONE",
    "body": "@hadv I use POA consensus and I set the block period 5s.The block would always be mined with 5s period.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441341080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441511652",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-441511652",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 441511652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTUxMTY1Mg==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-26T03:52:28Z",
    "updated_at": "2018-11-26T03:52:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @hadv I use POA consensus and I set the block period 5s.The block would always be mined with 5s period.\r\n\r\nI'm also using POA but with block period 2s. Yes, normally network will mint new block every ~2s but when making the loading there's a case that I mentioned above at which all the network stuck at a block number and only can continue mint new block when the total pending tnx reach txpool size or when stoping sending more tnx. it seems that all the node busy with tnx execution and postpone the block mining. I think there's bugs somewhere.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/441511652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442723068",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-442723068",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 442723068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjcyMzA2OA==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-29T06:37:35Z",
    "updated_at": "2018-11-29T07:08:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "tracing the geth log when the network is stuck, I found that all the miners re-submit mining work continuously at the same block number that means new block cannot be created\r\n\r\nrecommit block every 3s by default due to this PR #17413\r\n\r\n```\r\nINFO [11-29|06:33:24.128] Commit new mining work                   number=1047 sealhash=6bb9f4…4d42d1 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.603ms\r\nINFO [11-29|06:33:27.129] Commit new mining work                   number=1047 sealhash=e7593a…3a4932 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.724ms\r\nINFO [11-29|06:33:30.129] Commit new mining work                   number=1047 sealhash=e37ff7…4bfdd8 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.626ms\r\nINFO [11-29|06:33:33.129] Commit new mining work                   number=1047 sealhash=74986f…b86977 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.260ms\r\nINFO [11-29|06:33:36.156] Commit new mining work                   number=1047 sealhash=1002f4…a1efc4 uncles=0 txs=508 gas=13984224 fees=0 elapsed=52.010ms\r\nINFO [11-29|06:33:39.130] Commit new mining work                   number=1047 sealhash=e65bfd…ed2197 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.967ms\r\nINFO [11-29|06:33:42.131] Commit new mining work                   number=1047 sealhash=53f369…b9065a uncles=0 txs=508 gas=13984224 fees=0 elapsed=26.823ms\r\nINFO [11-29|06:33:45.130] Commit new mining work                   number=1047 sealhash=56f8ef…b3aa13 uncles=0 txs=508 gas=13984224 fees=0 elapsed=26.023ms\r\nINFO [11-29|06:33:48.130] Commit new mining work                   number=1047 sealhash=6dc3fa…34cd6f uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.824ms\r\nINFO [11-29|06:33:51.131] Commit new mining work                   number=1047 sealhash=ddbfa3…e564a0 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.852ms\r\nINFO [11-29|06:33:54.131] Commit new mining work                   number=1047 sealhash=4e9892…2fe0c1 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.951ms\r\nINFO [11-29|06:33:57.131] Commit new mining work                   number=1047 sealhash=c6daf3…3d3c7a uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.832ms\r\nINFO [11-29|06:34:00.131] Commit new mining work                   number=1047 sealhash=3335db…b6ebd9 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.861ms\r\nINFO [11-29|06:34:03.131] Commit new mining work                   number=1047 sealhash=e21273…679f02 uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.691ms\r\nINFO [11-29|06:34:06.132] Commit new mining work                   number=1047 sealhash=339171…683afb uncles=0 txs=508 gas=13984224 fees=0 elapsed=25.728ms\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442723068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442726415",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-442726415",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 442726415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjcyNjQxNQ==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-29T06:55:39Z",
    "updated_at": "2018-11-29T06:55:39Z",
    "author_association": "NONE",
    "body": "Are there many miners in your blockchain?You can make only one miner node and one normal node in your blockchain to make it simple.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442726415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442726850",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-442726850",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 442726850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjcyNjg1MA==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-29T06:57:49Z",
    "updated_at": "2018-11-29T06:57:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Are there many miners in your blockchain?You can make only one miner node and one normal node in your blockchain to make it simple.\r\n\r\nyes, I'm running on 54 miners. There should be problem make the miner stuck in `Commit new mining work`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442726850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442727264",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-442727264",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 442727264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjcyNzI2NA==",
    "user": {
      "login": "liuzhijun23",
      "id": 31067893,
      "node_id": "MDQ6VXNlcjMxMDY3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31067893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liuzhijun23",
      "html_url": "https://github.com/liuzhijun23",
      "followers_url": "https://api.github.com/users/liuzhijun23/followers",
      "following_url": "https://api.github.com/users/liuzhijun23/following{/other_user}",
      "gists_url": "https://api.github.com/users/liuzhijun23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liuzhijun23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liuzhijun23/subscriptions",
      "organizations_url": "https://api.github.com/users/liuzhijun23/orgs",
      "repos_url": "https://api.github.com/users/liuzhijun23/repos",
      "events_url": "https://api.github.com/users/liuzhijun23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liuzhijun23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-29T07:00:07Z",
    "updated_at": "2018-11-29T07:00:07Z",
    "author_association": "NONE",
    "body": "You can make it simple first to locate the bug.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/442727264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458409558",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-458409558",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 458409558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODQwOTU1OA==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-29T05:08:12Z",
    "updated_at": "2019-01-29T09:11:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@liuzhijun23 your fix still make goroutine leak on this line as I tested on my private chain\r\n\r\n```\r\n        // Select on all the receivers, waiting for them to unblock.\r\n\tchosen, recv, _ := reflect.Select(cases)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458409558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458504667",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-458504667",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 458504667,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODUwNDY2Nw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-29T11:22:49Z",
    "updated_at": "2019-01-29T11:22:49Z",
    "author_association": "MEMBER",
    "body": "The original issue is about event.Feed. The design of event.Feed is to send values sequentially like a go channel, but to all subscribers. If mining gets stuck for concurrency reasons, please open a new issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458504667/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458508407",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-458508407",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 458508407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODUwODQwNw==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-29T11:36:26Z",
    "updated_at": "2019-01-29T11:36:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "no mining rpc endpoint node have goroutine leak due to the event.Feed as I mentioned in https://github.com/ethereum/go-ethereum/issues/17450 @fjl ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458508407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458565306",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-458565306",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 458565306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODU2NTMwNg==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-29T14:43:57Z",
    "updated_at": "2019-01-29T14:47:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The original issue is about event.Feed. The design of event.Feed is to send values sequentially like a go channel, but to all subscribers. If mining gets stuck for concurrency reasons, please open a new issue.\r\n\r\n@fjl https://github.com/ethereum/go-ethereum/issues/18082 & https://github.com/ethereum/go-ethereum/issues/18062",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/458565306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/465042351",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-465042351",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 465042351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTA0MjM1MQ==",
    "user": {
      "login": "lutianzhou001",
      "id": 6642040,
      "node_id": "MDQ6VXNlcjY2NDIwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6642040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lutianzhou001",
      "html_url": "https://github.com/lutianzhou001",
      "followers_url": "https://api.github.com/users/lutianzhou001/followers",
      "following_url": "https://api.github.com/users/lutianzhou001/following{/other_user}",
      "gists_url": "https://api.github.com/users/lutianzhou001/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lutianzhou001/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lutianzhou001/subscriptions",
      "organizations_url": "https://api.github.com/users/lutianzhou001/orgs",
      "repos_url": "https://api.github.com/users/lutianzhou001/repos",
      "events_url": "https://api.github.com/users/lutianzhou001/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lutianzhou001/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-19T08:49:26Z",
    "updated_at": "2019-02-19T08:49:26Z",
    "author_association": "NONE",
    "body": "@liuzhijun23 我也遇到了同样的问题，但是我用了你的代码修改了，但是还是不起作用。",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/465042351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/510876216",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-510876216",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 510876216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDg3NjIxNg==",
    "user": {
      "login": "shikhars371",
      "id": 8435048,
      "node_id": "MDQ6VXNlcjg0MzUwNDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8435048?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shikhars371",
      "html_url": "https://github.com/shikhars371",
      "followers_url": "https://api.github.com/users/shikhars371/followers",
      "following_url": "https://api.github.com/users/shikhars371/following{/other_user}",
      "gists_url": "https://api.github.com/users/shikhars371/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shikhars371/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shikhars371/subscriptions",
      "organizations_url": "https://api.github.com/users/shikhars371/orgs",
      "repos_url": "https://api.github.com/users/shikhars371/repos",
      "events_url": "https://api.github.com/users/shikhars371/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shikhars371/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T12:56:53Z",
    "updated_at": "2019-07-12T12:56:53Z",
    "author_association": "NONE",
    "body": "transaction getting stuck in tx mining pool for more than 1/2 hour , its a private blockchain i am running, and a single node im doing mining, please help me",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/510876216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/510881983",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/18021#issuecomment-510881983",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/18021",
    "id": 510881983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDg4MTk4Mw==",
    "user": {
      "login": "hadv",
      "id": 941411,
      "node_id": "MDQ6VXNlcjk0MTQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/941411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hadv",
      "html_url": "https://github.com/hadv",
      "followers_url": "https://api.github.com/users/hadv/followers",
      "following_url": "https://api.github.com/users/hadv/following{/other_user}",
      "gists_url": "https://api.github.com/users/hadv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hadv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hadv/subscriptions",
      "organizations_url": "https://api.github.com/users/hadv/orgs",
      "repos_url": "https://api.github.com/users/hadv/repos",
      "events_url": "https://api.github.com/users/hadv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hadv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T13:15:15Z",
    "updated_at": "2019-07-12T13:15:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "> transaction getting stuck in tx mining pool for more than 1/2 hour , its a private blockchain i am running, and a single node im doing mining, please help me\r\n\r\ntry to use `1.9.0`, hope it can resolve the issue ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/510881983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/14872",
  "id": 246091900,
  "node_id": "MDU6SXNzdWUyNDYwOTE5MDA=",
  "number": 14872,
  "title": "swarm: more informative 404 pages when URL matches a manifest",
  "user": {
    "login": "cobordism",
    "id": 12838530,
    "node_id": "MDQ6VXNlcjEyODM4NTMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/12838530?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cobordism",
    "html_url": "https://github.com/cobordism",
    "followers_url": "https://api.github.com/users/cobordism/followers",
    "following_url": "https://api.github.com/users/cobordism/following{/other_user}",
    "gists_url": "https://api.github.com/users/cobordism/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cobordism/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cobordism/subscriptions",
    "organizations_url": "https://api.github.com/users/cobordism/orgs",
    "repos_url": "https://api.github.com/users/cobordism/repos",
    "events_url": "https://api.github.com/users/cobordism/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cobordism/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233652,
      "node_id": "MDU6TGFiZWw3MjIzMzY1Mg==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:feature",
      "name": "type:feature",
      "color": "84b6eb",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-07-27T16:07:40Z",
  "updated_at": "2017-09-12T16:18:03Z",
  "closed_at": "2017-09-10T20:36:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### Manifest with / without default entry:\r\n\r\nWhen a manifest is loaded via bzz\r\n`bzz://Hash-or-Name-of-Manifest`\r\none of two things happen.\r\n\r\n1. The manifest contains a 'default entry' (i.e. it contains an entry for the empty path). In this case that entry is loaded\r\n2. The manifest does not contain a default entry. In this case we return a 404.\r\n\r\n#### ?list=true\r\n\r\nWe already have the ability to show the contents of a manifest by appending `?list=true` to the URL.\r\nThus if we have a manifest at `bzz://mysite.eth/i` containing entries for `ndex.html` and `mages/` then, \r\n- `bzz:// mysite.eth/i` gives a blank 404\r\n- `bzz:// mysite.eth/i?list=true` returns an html page with links to `ndex.html` and `mages/`\r\n\r\n\r\n#### suggested changes\r\nWhen a swarm resource could not be found, we should generate a blank 404, but when we loaded a valid manifest, but did not specify which entry we wanted, then the 404 page should be more helpful - offering links to the manifest entries:\r\n\r\n`did you mean index.html?` \r\n\r\n",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/320785380",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14872#issuecomment-320785380",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872",
    "id": 320785380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDc4NTM4MA==",
    "user": {
      "login": "cobordism",
      "id": 12838530,
      "node_id": "MDQ6VXNlcjEyODM4NTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/12838530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cobordism",
      "html_url": "https://github.com/cobordism",
      "followers_url": "https://api.github.com/users/cobordism/followers",
      "following_url": "https://api.github.com/users/cobordism/following{/other_user}",
      "gists_url": "https://api.github.com/users/cobordism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cobordism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cobordism/subscriptions",
      "organizations_url": "https://api.github.com/users/cobordism/orgs",
      "repos_url": "https://api.github.com/users/cobordism/repos",
      "events_url": "https://api.github.com/users/cobordism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cobordism/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-07T21:26:36Z",
    "updated_at": "2017-08-07T21:26:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, when the file not found is a manifest, apparently we return an HTTP 500 error instead of a 404.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/320785380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321914965",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14872#issuecomment-321914965",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872",
    "id": 321914965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTkxNDk2NQ==",
    "user": {
      "login": "holisticode",
      "id": 88287,
      "node_id": "MDQ6VXNlcjg4Mjg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/88287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holisticode",
      "html_url": "https://github.com/holisticode",
      "followers_url": "https://api.github.com/users/holisticode/followers",
      "following_url": "https://api.github.com/users/holisticode/following{/other_user}",
      "gists_url": "https://api.github.com/users/holisticode/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holisticode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holisticode/subscriptions",
      "organizations_url": "https://api.github.com/users/holisticode/orgs",
      "repos_url": "https://api.github.com/users/holisticode/repos",
      "events_url": "https://api.github.com/users/holisticode/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holisticode/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T20:47:17Z",
    "updated_at": "2017-08-11T20:48:17Z",
    "author_association": "MEMBER",
    "body": "Consider a manifest which contains \"readme.md\" and \"readit.md\". \r\nThe following behavior has been observed if there is no default entry:\r\n\r\n* `$hash/` returns `$hash/?list=true`\r\n* `$hash/r`, `$hash/re`, `$hash/rea` return json text with 2 entries: `me.md` and `it.md` (their filename minus the common part `read`)\r\n* `$hash/read` **returns 404 not found** (this is quite unexpected)\r\n* `$hash/readm`returns the `readme.md` file\r\n* `$hash/readi` returns the `readit.md`file\r\n\r\nThis doesn't suggest consistent behavior, rather that the trie and subtrie traversal and path resolution needs fixing?\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321914965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321998848",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14872#issuecomment-321998848",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872",
    "id": 321998848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTk5ODg0OA==",
    "user": {
      "login": "lmars",
      "id": 488515,
      "node_id": "MDQ6VXNlcjQ4ODUxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/488515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmars",
      "html_url": "https://github.com/lmars",
      "followers_url": "https://api.github.com/users/lmars/followers",
      "following_url": "https://api.github.com/users/lmars/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmars/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmars/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmars/subscriptions",
      "organizations_url": "https://api.github.com/users/lmars/orgs",
      "repos_url": "https://api.github.com/users/lmars/repos",
      "events_url": "https://api.github.com/users/lmars/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmars/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-12T18:45:52Z",
    "updated_at": "2017-08-12T18:45:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@holisticode the behaviour you are seeing is why this issue exists, we should be returning a 404 if the path doesn't match a valid file in the tree. The current behaviour is indeed inconsistent.\r\n\r\nFor your specific `readme.md` and `readit.md` case, the first 3 (i.e. specifying `/read` or any prefix of it) should return a 404 with a useful \"did you mean\" list containing both files (i.e. the same list as if `/?list=true` was given), and `readm` / `readi` should return the same but just with the single file in the list (i.e. the same as `/readm?list=true` or `/readi?list=true`).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/321998848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/328904562",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/14872#issuecomment-328904562",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/14872",
    "id": 328904562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODkwNDU2Mg==",
    "user": {
      "login": "holisticode",
      "id": 88287,
      "node_id": "MDQ6VXNlcjg4Mjg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/88287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holisticode",
      "html_url": "https://github.com/holisticode",
      "followers_url": "https://api.github.com/users/holisticode/followers",
      "following_url": "https://api.github.com/users/holisticode/following{/other_user}",
      "gists_url": "https://api.github.com/users/holisticode/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holisticode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holisticode/subscriptions",
      "organizations_url": "https://api.github.com/users/holisticode/orgs",
      "repos_url": "https://api.github.com/users/holisticode/repos",
      "events_url": "https://api.github.com/users/holisticode/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holisticode/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-12T16:18:03Z",
    "updated_at": "2017-09-12T16:18:03Z",
    "author_association": "MEMBER",
    "body": "The PR which actually fixes this issue is this one: \r\nhttps://github.com/ethereum/go-ethereum/pull/15139\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/328904562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

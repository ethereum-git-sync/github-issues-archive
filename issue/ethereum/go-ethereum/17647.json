{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/17647",
  "id": 359287843,
  "node_id": "MDU6SXNzdWUzNTkyODc4NDM=",
  "number": 17647,
  "title": "abigen fails to support the `--type` flag when data is piped to it.",
  "user": {
    "login": "pschlump",
    "id": 543809,
    "node_id": "MDQ6VXNlcjU0MzgwOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/543809?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pschlump",
    "html_url": "https://github.com/pschlump",
    "followers_url": "https://api.github.com/users/pschlump/followers",
    "following_url": "https://api.github.com/users/pschlump/following{/other_user}",
    "gists_url": "https://api.github.com/users/pschlump/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pschlump/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pschlump/subscriptions",
    "organizations_url": "https://api.github.com/users/pschlump/orgs",
    "repos_url": "https://api.github.com/users/pschlump/repos",
    "events_url": "https://api.github.com/users/pschlump/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pschlump/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-09-12T02:05:46Z",
  "updated_at": "2019-06-18T09:01:05Z",
  "closed_at": "2019-06-18T09:01:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.8.15\r\nOS & Version: Windows/Linux/OSX (all)\r\nCommit hash : n/a\r\n\r\n#### Expected behaviour\r\nWhen you pipe stuff from `solc` to `abigen` (example below) you should be able to\r\npipe more than 1 contract with a number of calls to the pair of commands.   The `--type`\r\nflag should allow you to keep the code in a single package and not have Go compilation \r\nerrors.\r\n\r\n#### Actual behaviour\r\nThe `--type` flag is ignored when you use a pipe.  This is different than with a file.\r\n\r\n#### Steps to reproduce the behaviour\r\n```\r\nmkdir -p ./gocode\r\n\r\ncd contracts\r\n\r\n solc --allow-paths . \\\r\n\t--combined-json abi,bin,devdoc,userdoc,metadata \\\r\n\tContract1.sol | \\\r\n\tabigen --abi - --pkg AbiCode -type Contract1 --out ../gocode/Contract1.go\r\n\t\r\n solc --allow-paths . \\\r\n\t--combined-json abi,bin,devdoc,userdoc,metadata \\\r\n\tContract2.sol | \\\r\n\tabigen --abi - --pkg AbiCode -type Contract1 --out ../gocode/Contract2.go\r\n\t\r\ncd ../gocode\r\ngo build\r\n\r\n```\r\n\r\n#### Solution\r\n\r\nI will create a PR with a fix - it is a very simple 15 or so lines of code to add to `abigen`.\r\n",
  "closed_by": {
    "login": "gballet",
    "id": 3272758,
    "node_id": "MDQ6VXNlcjMyNzI3NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gballet",
    "html_url": "https://github.com/gballet",
    "followers_url": "https://api.github.com/users/gballet/followers",
    "following_url": "https://api.github.com/users/gballet/following{/other_user}",
    "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
    "organizations_url": "https://api.github.com/users/gballet/orgs",
    "repos_url": "https://api.github.com/users/gballet/repos",
    "events_url": "https://api.github.com/users/gballet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gballet/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/443110907",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-443110907",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 443110907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzExMDkwNw==",
    "user": {
      "login": "vsbogd",
      "id": 983480,
      "node_id": "MDQ6VXNlcjk4MzQ4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983480?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsbogd",
      "html_url": "https://github.com/vsbogd",
      "followers_url": "https://api.github.com/users/vsbogd/followers",
      "following_url": "https://api.github.com/users/vsbogd/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsbogd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsbogd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsbogd/subscriptions",
      "organizations_url": "https://api.github.com/users/vsbogd/orgs",
      "repos_url": "https://api.github.com/users/vsbogd/repos",
      "events_url": "https://api.github.com/users/vsbogd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsbogd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T06:59:36Z",
    "updated_at": "2018-11-30T07:10:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "After PR https://github.com/ethereum/go-ethereum/pull/17648 it is not possible to use ```--pkg``` flag with JSON contract artifacts. \r\n\r\nPreviously execution of command \r\n```\r\ncat <contract.json> | abigen --abi -  --pkg <packagename> --out <output.go>\r\n```\r\nlead to execution of the ```contractsFromStdin()``` at https://github.com/ethereum/go-ethereum/blob/7e7781ffaa5c5486c5e7b66dea4986e063524f63/cmd/abigen/main.go#L94\r\n\r\nAnd after the PR ```pkgFlag == \"\"``` condition prevents falling into this branch:\r\nhttps://github.com/ethereum/go-ethereum/blob/7e7781ffaa5c5486c5e7b66dea4986e063524f63/cmd/abigen/main.go#L78\r\nAnd fails with the parse error.\r\n\r\nWas this condition made by intention? What is the reason of adding it?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/443110907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/464965285",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-464965285",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 464965285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NDk2NTI4NQ==",
    "user": {
      "login": "Shadowfiend",
      "id": 8245,
      "node_id": "MDQ6VXNlcjgyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shadowfiend",
      "html_url": "https://github.com/Shadowfiend",
      "followers_url": "https://api.github.com/users/Shadowfiend/followers",
      "following_url": "https://api.github.com/users/Shadowfiend/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shadowfiend/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shadowfiend/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shadowfiend/subscriptions",
      "organizations_url": "https://api.github.com/users/Shadowfiend/orgs",
      "repos_url": "https://api.github.com/users/Shadowfiend/repos",
      "events_url": "https://api.github.com/users/Shadowfiend/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shadowfiend/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-19T03:22:11Z",
    "updated_at": "2019-02-19T03:22:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "That seems like it may be an accidental check, since `*pkgFlag == \"\"` should exit earlier anyway:\r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/d88c6ce6b058ccd04b03d079d486b1d55fe5ef61/cmd/abigen/main.go#L56-L59\r\n\r\nSeems worth a PR to fix it?\r\n\r\nAlso maybe seems like this issue could be closed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/464965285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/469262021",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-469262021",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 469262021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTI2MjAyMQ==",
    "user": {
      "login": "vsbogd",
      "id": 983480,
      "node_id": "MDQ6VXNlcjk4MzQ4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983480?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsbogd",
      "html_url": "https://github.com/vsbogd",
      "followers_url": "https://api.github.com/users/vsbogd/followers",
      "following_url": "https://api.github.com/users/vsbogd/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsbogd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsbogd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsbogd/subscriptions",
      "organizations_url": "https://api.github.com/users/vsbogd/orgs",
      "repos_url": "https://api.github.com/users/vsbogd/repos",
      "events_url": "https://api.github.com/users/vsbogd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsbogd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T13:58:46Z",
    "updated_at": "2019-03-04T13:58:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Raised PR https://github.com/ethereum/go-ethereum/pull/19207",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/469262021/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/472749652",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-472749652",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 472749652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mjc0OTY1Mg==",
    "user": {
      "login": "vsbogd",
      "id": 983480,
      "node_id": "MDQ6VXNlcjk4MzQ4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/983480?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsbogd",
      "html_url": "https://github.com/vsbogd",
      "followers_url": "https://api.github.com/users/vsbogd/followers",
      "following_url": "https://api.github.com/users/vsbogd/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsbogd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsbogd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsbogd/subscriptions",
      "organizations_url": "https://api.github.com/users/vsbogd/orgs",
      "repos_url": "https://api.github.com/users/vsbogd/repos",
      "events_url": "https://api.github.com/users/vsbogd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsbogd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-14T08:24:40Z",
    "updated_at": "2019-03-14T08:24:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Shadowfiend, do you know how to get my PR merged? I am not able to assign reviewers and CI seems to be red for all PRs. I have asked help in `discordapp` go-ethereum/abigen channel, but have no answer.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/472749652/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/475043379",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-475043379",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 475043379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA0MzM3OQ==",
    "user": {
      "login": "Shadowfiend",
      "id": 8245,
      "node_id": "MDQ6VXNlcjgyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shadowfiend",
      "html_url": "https://github.com/Shadowfiend",
      "followers_url": "https://api.github.com/users/Shadowfiend/followers",
      "following_url": "https://api.github.com/users/Shadowfiend/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shadowfiend/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shadowfiend/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shadowfiend/subscriptions",
      "organizations_url": "https://api.github.com/users/Shadowfiend/orgs",
      "repos_url": "https://api.github.com/users/Shadowfiend/repos",
      "events_url": "https://api.github.com/users/Shadowfiend/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shadowfiend/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-20T21:54:06Z",
    "updated_at": "2019-03-20T21:54:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Nope, you're in the land of the maintainers :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/475043379/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/503015042",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/17647#issuecomment-503015042",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/17647",
    "id": 503015042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzAxNTA0Mg==",
    "user": {
      "login": "gballet",
      "id": 3272758,
      "node_id": "MDQ6VXNlcjMyNzI3NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3272758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gballet",
      "html_url": "https://github.com/gballet",
      "followers_url": "https://api.github.com/users/gballet/followers",
      "following_url": "https://api.github.com/users/gballet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gballet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gballet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gballet/subscriptions",
      "organizations_url": "https://api.github.com/users/gballet/orgs",
      "repos_url": "https://api.github.com/users/gballet/repos",
      "events_url": "https://api.github.com/users/gballet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gballet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-18T09:01:04Z",
    "updated_at": "2019-06-18T09:01:04Z",
    "author_association": "MEMBER",
    "body": "Merged the fix with #19207 last month, closing this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/503015042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

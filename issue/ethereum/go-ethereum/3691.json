{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/3691",
  "id": 208829650,
  "node_id": "MDU6SXNzdWUyMDg4Mjk2NTA=",
  "number": 3691,
  "title": "debug.setHead() expects a hex not dec",
  "user": {
    "login": "hrishikeshio",
    "id": 1659870,
    "node_id": "MDQ6VXNlcjE2NTk4NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1659870?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hrishikeshio",
    "html_url": "https://github.com/hrishikeshio",
    "followers_url": "https://api.github.com/users/hrishikeshio/followers",
    "following_url": "https://api.github.com/users/hrishikeshio/following{/other_user}",
    "gists_url": "https://api.github.com/users/hrishikeshio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hrishikeshio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hrishikeshio/subscriptions",
    "organizations_url": "https://api.github.com/users/hrishikeshio/orgs",
    "repos_url": "https://api.github.com/users/hrishikeshio/repos",
    "events_url": "https://api.github.com/users/hrishikeshio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hrishikeshio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 856638432,
      "node_id": "MDU6TGFiZWw4NTY2Mzg0MzI=",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/status:inactive",
      "name": "status:inactive",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2017-02-20T09:48:27Z",
  "updated_at": "2021-12-09T22:39:35Z",
  "closed_at": "2019-01-02T00:04:38Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: 1.5.6\r\nOS & Version: Ubuntu 16.04\r\nCommit hash : (if `develop`)\r\n1.5.6-stable release modified to change block-time\r\n\r\n#### Expected behaviour\r\nAccording to https://github.com/ethereum/go-ethereum/wiki/JavaScript-Console#debugsethead\r\nIt should accept dec and rollback blockchain to set number \r\n\r\n#### Actual behaviour\r\nError: invalid argument 0: cannot unmarshal non-string as hex data\r\n    at web3.js:3119:20\r\n    at web3.js:6023:15\r\n    at web3.js:4995:36\r\n    at <anonymous>:1:1\r\n\r\n#### Steps to reproduce the behaviour\r\n> debug.setHead(10000)\r\nError: invalid argument 0: cannot unmarshal non-string as hex data\r\n    at web3.js:3119:20\r\n    at web3.js:6023:15\r\n    at web3.js:4995:36\r\n    at <anonymous>:1:1\r\n\r\nSending a hex, however works\r\n\r\n> debug.setHead(\"0x2710\")\r\nnull\r\n\r\nSo either change function to accept dec, or modify the wiki to reflect latest changes\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281677560",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-281677560",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 281677560,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTY3NzU2MA==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T14:03:45Z",
    "updated_at": "2017-02-22T14:03:45Z",
    "author_association": "MEMBER",
    "body": "@fjl, this was changed with the introduction of the hexutil package. Other functions of the debug api still accept `uint64`. Did you had a specific reason for this change?\r\n\r\nOtherwise we can convert `uint64` arguments to `hexutil.Uint64` and define custom input formatters in web3ext. That way the rpc interface is compliant and users can still use decimal numbers in the console.\r\n\r\n@hrishikeshio note that rpc methods in the debug package are not considered safe for use. For instance the setHead method has a race condition in it that can cause database corruption. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281677560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281914936",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-281914936",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 281914936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTkxNDkzNg==",
    "user": {
      "login": "hrishikeshio",
      "id": 1659870,
      "node_id": "MDQ6VXNlcjE2NTk4NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1659870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hrishikeshio",
      "html_url": "https://github.com/hrishikeshio",
      "followers_url": "https://api.github.com/users/hrishikeshio/followers",
      "following_url": "https://api.github.com/users/hrishikeshio/following{/other_user}",
      "gists_url": "https://api.github.com/users/hrishikeshio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hrishikeshio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hrishikeshio/subscriptions",
      "organizations_url": "https://api.github.com/users/hrishikeshio/orgs",
      "repos_url": "https://api.github.com/users/hrishikeshio/repos",
      "events_url": "https://api.github.com/users/hrishikeshio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hrishikeshio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T07:20:06Z",
    "updated_at": "2017-02-23T07:20:06Z",
    "author_association": "NONE",
    "body": "Oh. I was using it to demonstrate how blockchain can recover if someone tries to deliberately rollback one of the nodes. Any alternative to this? @bas-vk ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281914936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281939089",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-281939089",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 281939089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTkzOTA4OQ==",
    "user": {
      "login": "bas-vk",
      "id": 4280775,
      "node_id": "MDQ6VXNlcjQyODA3NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4280775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bas-vk",
      "html_url": "https://github.com/bas-vk",
      "followers_url": "https://api.github.com/users/bas-vk/followers",
      "following_url": "https://api.github.com/users/bas-vk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bas-vk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bas-vk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bas-vk/subscriptions",
      "organizations_url": "https://api.github.com/users/bas-vk/orgs",
      "repos_url": "https://api.github.com/users/bas-vk/repos",
      "events_url": "https://api.github.com/users/bas-vk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bas-vk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T09:22:14Z",
    "updated_at": "2017-02-23T09:22:14Z",
    "author_association": "MEMBER",
    "body": "Not sure what you mean with recover the chain?\r\n\r\n`debug.setHead` sets the chain head to an older block. If you want to do such a thing the safest solution is to export the relevant part of the chain and import it into a fresh datadir.\r\n\r\n```\r\n> geth export /tmp/chain.dump 0 1000 (inclusive, this will export 1001 blocks)\r\n> geth import /tmp/chain.dump\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/281939089/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/345485027",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-345485027",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 345485027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQ4NTAyNw==",
    "user": {
      "login": "bill-mcgonigle",
      "id": 880256,
      "node_id": "MDQ6VXNlcjg4MDI1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/880256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-mcgonigle",
      "html_url": "https://github.com/bill-mcgonigle",
      "followers_url": "https://api.github.com/users/bill-mcgonigle/followers",
      "following_url": "https://api.github.com/users/bill-mcgonigle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-mcgonigle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-mcgonigle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-mcgonigle/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-mcgonigle/orgs",
      "repos_url": "https://api.github.com/users/bill-mcgonigle/repos",
      "events_url": "https://api.github.com/users/bill-mcgonigle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-mcgonigle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-19T01:41:08Z",
    "updated_at": "2017-11-19T01:41:08Z",
    "author_association": "NONE",
    "body": "Still only takes hex.  Updated API documentation [link](https://github.com/ethereum/go-ethereum/wiki/Management-APIs#debug_sethead) (still says decimal).\r\n```\r\n> debug.setHead('1910103')\r\nError: invalid argument 0: json: cannot unmarshal hex string without 0x prefix into Go value of type hexutil.Uint64\r\n    at web3.js:3104:20\r\n    at web3.js:6191:15\r\n    at web3.js:5004:36\r\n    at <anonymous>:1:1\r\n\r\n > debug.setHead('0x1D2557')\r\nWARN [11-18|20:38:21] Rewinding blockchain                     target=1910103\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/345485027/reactions",
      "total_count": 5,
      "+1": 4,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/440113215",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-440113215",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 440113215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDExMzIxNQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-20T02:21:58Z",
    "updated_at": "2018-11-20T02:21:58Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/440113215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/904700635",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/3691#issuecomment-904700635",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/3691",
    "id": 904700635,
    "node_id": "IC_kwDOAOvK98417KLb",
    "user": {
      "login": "jayboy-mabushi",
      "id": 60149478,
      "node_id": "MDQ6VXNlcjYwMTQ5NDc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/60149478?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jayboy-mabushi",
      "html_url": "https://github.com/jayboy-mabushi",
      "followers_url": "https://api.github.com/users/jayboy-mabushi/followers",
      "following_url": "https://api.github.com/users/jayboy-mabushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/jayboy-mabushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jayboy-mabushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jayboy-mabushi/subscriptions",
      "organizations_url": "https://api.github.com/users/jayboy-mabushi/orgs",
      "repos_url": "https://api.github.com/users/jayboy-mabushi/repos",
      "events_url": "https://api.github.com/users/jayboy-mabushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jayboy-mabushi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-24T14:37:46Z",
    "updated_at": "2021-08-24T14:37:46Z",
    "author_association": "NONE",
    "body": "@bill-mcgonigle how do you get the hex figures? I am getting the same error",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/904700635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/15186",
  "id": 259740559,
  "node_id": "MDU6SXNzdWUyNTk3NDA1NTk=",
  "number": 15186,
  "title": "Byzantium - `eth_estimateGas` call no longer provides correct estimates",
  "user": {
    "login": "LefterisJP",
    "id": 1658405,
    "node_id": "MDQ6VXNlcjE2NTg0MDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LefterisJP",
    "html_url": "https://github.com/LefterisJP",
    "followers_url": "https://api.github.com/users/LefterisJP/followers",
    "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
    "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
    "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
    "repos_url": "https://api.github.com/users/LefterisJP/repos",
    "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2017-09-22T08:29:23Z",
  "updated_at": "2017-10-03T13:37:08Z",
  "closed_at": "2017-10-03T13:37:08Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.7.0`\r\nOS & Version: Linux\r\n\r\n#### Expected behaviour\r\n\r\nRight before byzantium the [`eth_estimateGas`](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_estimategas) call provided reasonably accurate estimates for transactions with multiple stack frames containing a `REVERT`. Presumably because that used to be just an invalid operation equaling to a `throw`.\r\n\r\n#### Actual behaviour\r\n\r\nIn ropsten, after block 1.7 million, with Byzantium rules activated it no longer provides correct estimates.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nTry to estimate gas for a transaction with multiple calls, where one of the calls deeper in the stack frame does `REVERT` and reverts operation to its parent. Do that with pre-byzantium rules and then post-byzantium rules and you will see the difference.\r\n\r\nAs a live example on ropsten we can observe raiden's [channel manager](https://ropsten.etherscan.io/address/0x4ad65661f7390b3719d211f83ad38b1d6591531f) for a given token. Raiden used to set the gas limit of a transactions as `GAS_ESTIMATE * 2`.\r\n\r\nA [`newChannel()`](https://ropsten.etherscan.io/tx/0x69b8af38e57b97a63d581a2ee5daa0c65bfe6492d79e8f0a69b7b67db6d06b13) call before the byzantium fork. Raiden provided a gas limit of `2368060` and the gas used by the transaction was `1168023`. `1168023` is close to what `estimateGas` used to return.\r\n\r\nNow let's check a post-Byzantium fork [`newChannel`](https://ropsten.etherscan.io/tx/0xc47a839ac039302a8951d3d84f43b543bb31547bada1ca1ec5ff3c78c2619395) transaction where Raiden still relies on `estimateGas`. The gas limit provided by Raiden is `58070` which means the estimate was about `29035` for the same call which above took `1168023`.",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332438563",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332438563",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332438563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQzODU2Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T07:46:57Z",
    "updated_at": "2017-09-27T07:46:57Z",
    "author_association": "MEMBER",
    "body": "Hmmm, could you describe the timeline of events (call/reverts) that happen? Internal reverts/throws should not impact gas estimation, only the outermost. AFAIK a revert is a valid termination, so gas will not be increased if your code REVERTs.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332438563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332439373",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332439373",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332439373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQzOTM3Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T07:50:32Z",
    "updated_at": "2017-09-27T07:50:32Z",
    "author_association": "MEMBER",
    "body": "Looking at the opcode trace https://ropsten.etherscan.io/vmtrace?txhash=0xc47a839ac039302a8951d3d84f43b543bb31547bada1ca1ec5ff3c78c2619395, you are going OOG internally, but on the outside you just REVERT. \r\n\r\nIMHO revert should never be used for OOG cases, that should be throw if you want to handle it properly. REVERT just says some precondition failed (e.g. gas price is wrong), not that something blew up inside.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332439373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332440388",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332440388",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332440388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQ0MDM4OA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T07:54:56Z",
    "updated_at": "2017-09-27T07:54:56Z",
    "author_association": "MEMBER",
    "body": "We had quite a lot of internal debates about this exact topic with @Arachnid, whether gas estimation should take into consideration internal failures or not, and the consensus was that the smart contract needs to be smart enough to figure out how it wants to react to internal failures, and if it chooses to ignore internal failures, we should not try to override it from the outside.\r\n\r\nTL;DR I'd say there's a bug in your code :P",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332440388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332480591",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332480591",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332480591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQ4MDU5MQ==",
    "user": {
      "login": "LefterisJP",
      "id": 1658405,
      "node_id": "MDQ6VXNlcjE2NTg0MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LefterisJP",
      "html_url": "https://github.com/LefterisJP",
      "followers_url": "https://api.github.com/users/LefterisJP/followers",
      "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
      "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
      "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
      "repos_url": "https://api.github.com/users/LefterisJP/repos",
      "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T10:34:51Z",
    "updated_at": "2017-09-27T10:50:52Z",
    "author_association": "MEMBER",
    "body": "> Looking at the opcode trace https://ropsten.etherscan.io/vmtrace?txhash=0xc47a839ac039302a8951d3d84f43b543bb31547bada1ca1ec5ff3c78c2619395, you are going OOG internally, but on the outside you just REVERT.\r\n\r\nIt's a kind of a chicken and egg problem. We were using estimate gas in order to give a gas estimate for the entire transaction. So since estimate gas is wrong, giving a small value we gave it to the transaction and then the inner transaction failed due to running out of gas.\r\n\r\nCan we check if an internal call does revert?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332480591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332480941",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332480941",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332480941,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQ4MDk0MQ==",
    "user": {
      "login": "LefterisJP",
      "id": 1658405,
      "node_id": "MDQ6VXNlcjE2NTg0MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LefterisJP",
      "html_url": "https://github.com/LefterisJP",
      "followers_url": "https://api.github.com/users/LefterisJP/followers",
      "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
      "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
      "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
      "repos_url": "https://api.github.com/users/LefterisJP/repos",
      "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T10:36:34Z",
    "updated_at": "2017-09-27T10:36:34Z",
    "author_association": "MEMBER",
    "body": "Note that all `require()` in solidity are now `REVERT` in metropolis so this may change how contracts behave with dapps. This is how it happened in our case.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332480941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332482381",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-332482381",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 332482381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQ4MjM4MQ==",
    "user": {
      "login": "LefterisJP",
      "id": 1658405,
      "node_id": "MDQ6VXNlcjE2NTg0MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LefterisJP",
      "html_url": "https://github.com/LefterisJP",
      "followers_url": "https://api.github.com/users/LefterisJP/followers",
      "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
      "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
      "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
      "repos_url": "https://api.github.com/users/LefterisJP/repos",
      "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T10:43:56Z",
    "updated_at": "2017-09-27T10:43:56Z",
    "author_association": "MEMBER",
    "body": ">  that should be throw if you want to handle it properly.\r\n\r\n`throw` is deprecated in solidity but it also does a `REVERT` in newer solidity versions:\r\nhttp://solidity.readthedocs.io/en/develop/control-structures.html?highlight=revert#error-handling-assert-require-revert-and-exceptions",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/332482381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333521765",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333521765",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 333521765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzUyMTc2NQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T12:38:12Z",
    "updated_at": "2017-10-02T12:38:12Z",
    "author_association": "MEMBER",
    "body": "Hey @LefterisJP, could you try this PR? https://github.com/ethereum/go-ethereum/pull/15030",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333521765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333532973",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333532973",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 333532973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzUzMjk3Mw==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T13:23:58Z",
    "updated_at": "2017-10-02T13:23:58Z",
    "author_association": "MEMBER",
    "body": "This issue should be fixed with latest code on master. Please check Lefteris and report if you still see issues.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333532973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333553497",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333553497",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 333553497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzU1MzQ5Nw==",
    "user": {
      "login": "LefterisJP",
      "id": 1658405,
      "node_id": "MDQ6VXNlcjE2NTg0MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LefterisJP",
      "html_url": "https://github.com/LefterisJP",
      "followers_url": "https://api.github.com/users/LefterisJP/followers",
      "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
      "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
      "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
      "repos_url": "https://api.github.com/users/LefterisJP/repos",
      "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T14:35:44Z",
    "updated_at": "2017-10-02T14:35:44Z",
    "author_association": "MEMBER",
    "body": "Looking at it right now.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333553497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333586365",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333586365",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 333586365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzU4NjM2NQ==",
    "user": {
      "login": "LefterisJP",
      "id": 1658405,
      "node_id": "MDQ6VXNlcjE2NTg0MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1658405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LefterisJP",
      "html_url": "https://github.com/LefterisJP",
      "followers_url": "https://api.github.com/users/LefterisJP/followers",
      "following_url": "https://api.github.com/users/LefterisJP/following{/other_user}",
      "gists_url": "https://api.github.com/users/LefterisJP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LefterisJP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LefterisJP/subscriptions",
      "organizations_url": "https://api.github.com/users/LefterisJP/orgs",
      "repos_url": "https://api.github.com/users/LefterisJP/repos",
      "events_url": "https://api.github.com/users/LefterisJP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LefterisJP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T16:22:59Z",
    "updated_at": "2017-10-02T16:22:59Z",
    "author_association": "MEMBER",
    "body": "@karalabe With latest master (commit hash: f4c49bc0f03910f0caa16c4a067c0f201de293b7) I believe I can say the problem seems mitigated in byzantium code. \r\n\r\nFor a [`newChannel()`](https://ropsten.etherscan.io/tx/0x7c32ea26cc91666e3e0ded151b25f8c2b1407f9e1bddf987f2af812b1d7617c5) transaction which cost `1168023` gas, `estimateGas()` now returns: `1184030` which is a bit higher but still fine and closer to reality than `29035` was with geth 1.7.0\r\n\r\nI would say the issue is resolved.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333586365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333588689",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333588689",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/15186",
    "id": 333588689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzU4ODY4OQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T16:30:56Z",
    "updated_at": "2017-10-02T16:30:56Z",
    "author_association": "MEMBER",
    "body": "Note, that a CALL forwards 63/64 gas to the sub contract, so such txs will\nrequire more gas than consumed, hence the higher amount. Try sending with 1\ngas less than estimated and it should OOG somewhere internally.\n\nOn Oct 2, 2017 19:23, \"Lefteris Karapetsas\" <notifications@github.com>\nwrote:\n\n> @karalabe <https://github.com/karalabe> With latest master (commit hash:\n> f4c49bc\n> <https://github.com/ethereum/go-ethereum/commit/f4c49bc0f03910f0caa16c4a067c0f201de293b7>)\n> I believe I can say the problem seems mitigated in byzantium code.\n>\n> For a newChannel()\n> <https://ropsten.etherscan.io/tx/0x7c32ea26cc91666e3e0ded151b25f8c2b1407f9e1bddf987f2af812b1d7617c5>\n> transaction which cost 1168023 gas, estimateGas() now returns: 1184030\n> which is a bit higher but still fine and closer to reality than 29035 was\n> with geth 1.7.0\n>\n> I would say the issue is resolved.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/go-ethereum/issues/15186#issuecomment-333586365>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAH6GSv5dW6ruYAKcatY42ycfOi-Ikxpks5soQ3mgaJpZM4PgYo0>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/333588689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

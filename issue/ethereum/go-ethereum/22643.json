{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/22643",
  "id": 854651070,
  "node_id": "MDU6SXNzdWU4NTQ2NTEwNzA=",
  "number": 22643,
  "title": "high memory consume after upgrading from 1.9.25 to 1.10.1 and 1.10.2 system crashes",
  "user": {
    "login": "wagnerspirigoni-mb",
    "id": 45392733,
    "node_id": "MDQ6VXNlcjQ1MzkyNzMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/45392733?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wagnerspirigoni-mb",
    "html_url": "https://github.com/wagnerspirigoni-mb",
    "followers_url": "https://api.github.com/users/wagnerspirigoni-mb/followers",
    "following_url": "https://api.github.com/users/wagnerspirigoni-mb/following{/other_user}",
    "gists_url": "https://api.github.com/users/wagnerspirigoni-mb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wagnerspirigoni-mb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wagnerspirigoni-mb/subscriptions",
    "organizations_url": "https://api.github.com/users/wagnerspirigoni-mb/orgs",
    "repos_url": "https://api.github.com/users/wagnerspirigoni-mb/repos",
    "events_url": "https://api.github.com/users/wagnerspirigoni-mb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wagnerspirigoni-mb/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 72233650,
      "node_id": "MDU6TGFiZWw3MjIzMzY1MA==",
      "url": "https://api.github.com/repos/ethereum/go-ethereum/labels/type:bug",
      "name": "type:bug",
      "color": "FF5E5E",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2021-04-09T15:55:49Z",
  "updated_at": "2021-11-03T14:03:37Z",
  "closed_at": "2021-11-03T14:03:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nVersion: 1.10.2-stable\r\nGit Commit: 97d11b0187b4695ccf44e3b71b54155fe405a36f\r\nGit Commit Date: 20210408\r\nArchitecture: amd64\r\nGo Version: go1.16\r\nOperating System: linux\r\n64 GB memory\r\n\r\n#### Expected behaviour\r\n\r\nrun geth without consuming all the instance memory\r\n\r\n#### Actual behaviour\r\n\r\ngeth runs for a few hours, consumes all instance memory, then freezes instance, needs hard reset on instance to be able to access it again\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI've been running a software that subscribe for new blocks and then it calls a debug_traceTransaction for every transaction since geth 1.8 and have been upgrading every major version, yesterday I've upgraded for 1.10.1 and then 1.10.2 in both I've seen a high memory consume, way more than before, and then the instance crashes\r\n\r\nhere are the last geth logs when the client crashes the instance:\r\n```\r\nApr  9 05:11:46 eth1 geth[1071]: DEBUG[04-09|05:11:46.292] Served eth_getCode                       conn=127.0.0.1:37992 reqid=608407 t=116.488312ms\r\nApr  9 05:11:46 eth1 geth[1071]: DEBUG[04-09|05:11:46.338] Dereferenced trie from memory database   nodes=1669     size=693.85KiB  time=4.968523ms  gcnodes=37846   gcsize=15.36MiB   gctime=\r\n105.174712ms  livenodes=56997   livesize=18.70MiB\r\nApr  9 05:11:46 eth1 geth[1071]: INFO [04-09|05:11:46.362] Regenerating historical state            block=12201654 target=12201709 remaining=55 elapsed=2m51.483434765s\r\nApr  9 05:11:48 eth1 geth[1071]: DEBUG[04-09|05:11:48.406] Transaction pool status report           executable=4093 queued=1027 stales=933\r\nApr  9 05:11:52 eth1 geth[1071]: DEBUG[04-09|05:11:51.541] Recalculated downloader QoS values       rtt=6.109868885s  confidence=1.000 ttl=18.329624982s\r\nApr  9 05:11:53 eth1 geth[1071]: DEBUG[04-09|05:11:52.442] Removed dead node                        b=5  id=87b5fa4fa4f27565 ip=167.86.125.46   checks=1\r\nApr  9 05:12:01 eth1 geth[1071]: DEBUG[04-09|05:11:59.405] Recalculated downloader QoS values       rtt=6.109866935s  confidence=1.000 ttl=18.329619132s\r\nApr  9 05:12:04 eth1 geth[1071]: DEBUG[04-09|05:12:03.377] Fetching single header                   id=1b47f0378da89e09 conn=dyndial         hash=\"61d894â€¦45e9c8\"\r\nApr  9 05:12:06 eth1 geth[1071]: DEBUG[04-09|05:12:05.573] Replaced dead node                       b=14 id=a185bc0dbdb1ec61 ip=176.9.122.147   checks=24 r=b563a8659cd5b51c rip=104.248.207.\r\n3\r\nApr  9 05:14:54 eth1 geth[1071]: DEBUG[04-09|05:12:06.747] Failed to deliver headers                err=\"no sync active\"\r\n```\r\n\r\nhere are the `debug.stacks()` \r\nhttps://pastebin.com/uTuXcnxn\r\n\r\nand the memory dump both just a couple of minutes before system crashed another time\r\n[memory_dump.zip](https://github.com/ethereum/go-ethereum/files/6286992/memory_dump.zip)\r\n\r\n\r\nand the memory consumption graph\r\n<img width=\"719\" alt=\"memory graph\" src=\"https://user-images.githubusercontent.com/45392733/114206646-ee932500-9931-11eb-89ed-498b5e494cfa.png\">\r\n\r\ncli parameters:\r\n`geth --datadir /opt/geth/.ethereum --syncmode 'fast' --rpc --rpcvhosts 'localhost' --rpcapi web3,eth,personal,txpool,debug --rpcaddr 'localhost' --rpcport 8544 --verbosity 4 --ws --nousb --allow-insecure-unlock --cache 2048 --rpc.gascap 300000`\r\n\r\n\r\n",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/816914027",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-816914027",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 816914027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjkxNDAyNw==",
    "user": {
      "login": "evertonfraga",
      "id": 47108,
      "node_id": "MDQ6VXNlcjQ3MTA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/47108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/evertonfraga",
      "html_url": "https://github.com/evertonfraga",
      "followers_url": "https://api.github.com/users/evertonfraga/followers",
      "following_url": "https://api.github.com/users/evertonfraga/following{/other_user}",
      "gists_url": "https://api.github.com/users/evertonfraga/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/evertonfraga/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/evertonfraga/subscriptions",
      "organizations_url": "https://api.github.com/users/evertonfraga/orgs",
      "repos_url": "https://api.github.com/users/evertonfraga/repos",
      "events_url": "https://api.github.com/users/evertonfraga/events{/privacy}",
      "received_events_url": "https://api.github.com/users/evertonfraga/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T19:22:03Z",
    "updated_at": "2021-04-09T19:22:03Z",
    "author_association": "MEMBER",
    "body": "Trying to contribute to the bug report:\r\n\r\n1) it might be generating the snapshot. you can disable it with the flag `--snapshot=false`\r\n\r\n2) side-effects of trace for block numbers you don't hold the entire state of.\r\n\r\nThe third line of your log shows that the node is trying to reconstruct a past state, which is the default behavior for running tracers on blocks for which tries were already pruned. I don't know the specifics, but it is certainly not a trivial task.\r\n\r\n```\r\nApr  9 05:11:46 eth1 geth[1071]: INFO [04-09|05:11:46.362] Regenerating historical state            block=12201654 target=12201709 remaining=55 elapsed=2m51.483434765s\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/816914027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/816928729",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-816928729",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 816928729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjkyODcyOQ==",
    "user": {
      "login": "wagnerspirigoni-mb",
      "id": 45392733,
      "node_id": "MDQ6VXNlcjQ1MzkyNzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/45392733?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wagnerspirigoni-mb",
      "html_url": "https://github.com/wagnerspirigoni-mb",
      "followers_url": "https://api.github.com/users/wagnerspirigoni-mb/followers",
      "following_url": "https://api.github.com/users/wagnerspirigoni-mb/following{/other_user}",
      "gists_url": "https://api.github.com/users/wagnerspirigoni-mb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wagnerspirigoni-mb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wagnerspirigoni-mb/subscriptions",
      "organizations_url": "https://api.github.com/users/wagnerspirigoni-mb/orgs",
      "repos_url": "https://api.github.com/users/wagnerspirigoni-mb/repos",
      "events_url": "https://api.github.com/users/wagnerspirigoni-mb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wagnerspirigoni-mb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T19:47:00Z",
    "updated_at": "2021-04-09T19:47:00Z",
    "author_association": "NONE",
    "body": "I'll try disabling the snapshot and post updates here\r\n\r\nyeah sometimes we do have to query some old blocks, but mostly inside the 128 historical range, we are taking a look in ways to reduce it, but as far as we noticed, haven't been a big issue in older versions",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/816928729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817055132",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-817055132",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 817055132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzA1NTEzMg==",
    "user": {
      "login": "wagnerspirigoni-mb",
      "id": 45392733,
      "node_id": "MDQ6VXNlcjQ1MzkyNzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/45392733?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wagnerspirigoni-mb",
      "html_url": "https://github.com/wagnerspirigoni-mb",
      "followers_url": "https://api.github.com/users/wagnerspirigoni-mb/followers",
      "following_url": "https://api.github.com/users/wagnerspirigoni-mb/following{/other_user}",
      "gists_url": "https://api.github.com/users/wagnerspirigoni-mb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wagnerspirigoni-mb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wagnerspirigoni-mb/subscriptions",
      "organizations_url": "https://api.github.com/users/wagnerspirigoni-mb/orgs",
      "repos_url": "https://api.github.com/users/wagnerspirigoni-mb/repos",
      "events_url": "https://api.github.com/users/wagnerspirigoni-mb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wagnerspirigoni-mb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-10T01:59:10Z",
    "updated_at": "2021-04-10T01:59:10Z",
    "author_association": "NONE",
    "body": "disabling snapshots were not effective, I'm attaching new memory dumps, stacks and memStats maybe it can help\r\n[dumps.zip](https://github.com/ethereum/go-ethereum/files/6289094/dumps.zip)\r\n\r\n\r\nit took around 6 hours to go from 3% of memory usage to 99% (around 60GB)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817055132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817749434",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-817749434",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 817749434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzc0OTQzNA==",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-12T11:57:52Z",
    "updated_at": "2021-04-12T11:57:52Z",
    "author_association": "MEMBER",
    "body": "Hmm I can't really see the issue in the memdumps. They both show ~ 2.6GB of RAM usage.  Maybe the tx-unindexing becomes an issue here? Can you provide some examples for the types of queries that you execute?\r\nI can't find anything in the stack trace either, it correctly shows ~5TB of alloced and deallocd memory and a heap alloc of ~2GB.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/817749434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/819799834",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-819799834",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 819799834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTc5OTgzNA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-14T20:09:43Z",
    "updated_at": "2021-04-14T20:09:43Z",
    "author_association": "MEMBER",
    "body": "Could it be linked to the tracer? Gary did some refactors there for 1.10.0. does it happen with your node if you don't trace transactions too?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/819799834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/820417955",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-820417955",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 820417955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDQxNzk1NQ==",
    "user": {
      "login": "wagnerspirigoni-mb",
      "id": 45392733,
      "node_id": "MDQ6VXNlcjQ1MzkyNzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/45392733?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wagnerspirigoni-mb",
      "html_url": "https://github.com/wagnerspirigoni-mb",
      "followers_url": "https://api.github.com/users/wagnerspirigoni-mb/followers",
      "following_url": "https://api.github.com/users/wagnerspirigoni-mb/following{/other_user}",
      "gists_url": "https://api.github.com/users/wagnerspirigoni-mb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wagnerspirigoni-mb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wagnerspirigoni-mb/subscriptions",
      "organizations_url": "https://api.github.com/users/wagnerspirigoni-mb/orgs",
      "repos_url": "https://api.github.com/users/wagnerspirigoni-mb/repos",
      "events_url": "https://api.github.com/users/wagnerspirigoni-mb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wagnerspirigoni-mb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-15T13:22:06Z",
    "updated_at": "2021-04-15T13:22:06Z",
    "author_association": "NONE",
    "body": "@MariusVanDerWijden what we do is get all txs from a block, and then trace every transaction.\r\n\r\n@karalabe we do heavy use of the traceTransaction, so it may be possible, I've tried some different confs, flags, etc and have noticed that if after geth finishs syncing, we waited like 10 minutes, and then started our app that consumes geth API, looks like everything runs fine, but if we start our app, right when geth finishs syncing, the memory gets all consumed, at first I thought was a coincidence, but we were able to reproduce it three times",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/820417955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/824119149",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-824119149",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 824119149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNDExOTE0OQ==",
    "user": {
      "login": "charlie-paxos",
      "id": 61745898,
      "node_id": "MDQ6VXNlcjYxNzQ1ODk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/61745898?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charlie-paxos",
      "html_url": "https://github.com/charlie-paxos",
      "followers_url": "https://api.github.com/users/charlie-paxos/followers",
      "following_url": "https://api.github.com/users/charlie-paxos/following{/other_user}",
      "gists_url": "https://api.github.com/users/charlie-paxos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charlie-paxos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charlie-paxos/subscriptions",
      "organizations_url": "https://api.github.com/users/charlie-paxos/orgs",
      "repos_url": "https://api.github.com/users/charlie-paxos/repos",
      "events_url": "https://api.github.com/users/charlie-paxos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charlie-paxos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-21T14:45:07Z",
    "updated_at": "2021-04-21T14:45:07Z",
    "author_association": "NONE",
    "body": "Also seeing a similar issue. Had OOMs initially but bumped max memory from 8GB to 25GB and that has helped mitigate, although we're still seeing usage around the cap. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/824119149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825317944",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-825317944",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 825317944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTMxNzk0NA==",
    "user": {
      "login": "cncr04s",
      "id": 1477466,
      "node_id": "MDQ6VXNlcjE0Nzc0NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1477466?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cncr04s",
      "html_url": "https://github.com/cncr04s",
      "followers_url": "https://api.github.com/users/cncr04s/followers",
      "following_url": "https://api.github.com/users/cncr04s/following{/other_user}",
      "gists_url": "https://api.github.com/users/cncr04s/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cncr04s/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cncr04s/subscriptions",
      "organizations_url": "https://api.github.com/users/cncr04s/orgs",
      "repos_url": "https://api.github.com/users/cncr04s/repos",
      "events_url": "https://api.github.com/users/cncr04s/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cncr04s/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T01:26:00Z",
    "updated_at": "2021-04-23T01:26:00Z",
    "author_association": "NONE",
    "body": "I'm having a problem with crashes as well. I've started a resync, same problem. Different hardware too, so don't blame that. Problem only started with 1.10.1, I tried 1.10.1 and 1.10.2 same crashes. Didn't occur with previous versions. \r\nHow there is a problem, I don't know but, there should be some sort of bounds checking against corrupt data and or a repair process to identify these problems. Its getting to be a problem. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/825317944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/841734010",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-841734010",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 841734010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTczNDAxMA==",
    "user": {
      "login": "charlie-paxos",
      "id": 61745898,
      "node_id": "MDQ6VXNlcjYxNzQ1ODk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/61745898?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charlie-paxos",
      "html_url": "https://github.com/charlie-paxos",
      "followers_url": "https://api.github.com/users/charlie-paxos/followers",
      "following_url": "https://api.github.com/users/charlie-paxos/following{/other_user}",
      "gists_url": "https://api.github.com/users/charlie-paxos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charlie-paxos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charlie-paxos/subscriptions",
      "organizations_url": "https://api.github.com/users/charlie-paxos/orgs",
      "repos_url": "https://api.github.com/users/charlie-paxos/repos",
      "events_url": "https://api.github.com/users/charlie-paxos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charlie-paxos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-15T22:28:32Z",
    "updated_at": "2021-05-15T22:28:32Z",
    "author_association": "NONE",
    "body": "Hi all, we're still seeing a similar problem in 1.10.1. We're playing around with running the official docker image in K8s so it could be an issue with that. Any thoughts on this one?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/841734010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959157436",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/22643#issuecomment-959157436",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/22643",
    "id": 959157436,
    "node_id": "IC_kwDOAOvK9845K5S8",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T14:03:36Z",
    "updated_at": "2021-11-03T14:03:36Z",
    "author_association": "MEMBER",
    "body": "This issue is getting quite stale now, we think we\"ve found an issue where the txpool retained more transactions than necessary (a memleak). This was fixed quite a while ago. Will close this issue. Please open a new issue if the same high memory consumption still happens with v.1.10.11.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/959157436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
  "repository_url": "https://api.github.com/repos/ethereum/go-ethereum",
  "labels_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092/comments",
  "events_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092/events",
  "html_url": "https://github.com/ethereum/go-ethereum/issues/16092",
  "id": 297133614,
  "node_id": "MDU6SXNzdWUyOTcxMzM2MTQ=",
  "number": 16092,
  "title": "Simple ETH sendTransaction fails in --dev mode with new 1.8.0 release",
  "user": {
    "login": "cryptophonic",
    "id": 409166,
    "node_id": "MDQ6VXNlcjQwOTE2Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/409166?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cryptophonic",
    "html_url": "https://github.com/cryptophonic",
    "followers_url": "https://api.github.com/users/cryptophonic/followers",
    "following_url": "https://api.github.com/users/cryptophonic/following{/other_user}",
    "gists_url": "https://api.github.com/users/cryptophonic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cryptophonic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cryptophonic/subscriptions",
    "organizations_url": "https://api.github.com/users/cryptophonic/orgs",
    "repos_url": "https://api.github.com/users/cryptophonic/repos",
    "events_url": "https://api.github.com/users/cryptophonic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cryptophonic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2018-02-14T15:18:55Z",
  "updated_at": "2018-02-28T11:40:18Z",
  "closed_at": "2018-02-28T11:40:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nGeth version: `1.8.0`\r\nOS & Version: Linux 64-bit\r\nCommit hash : downloaded release version\r\n\r\n#### Expected behaviour\r\nTransaction receipt is returned when requested.\r\n\r\n#### Actual behaviour\r\neth_getTransactionReceipt returns \"unknown transaction\" in dev mode.\r\n\r\n#### Steps to reproduce the behaviour\r\nRun geth in --dev --dev.period=1 mode.  Execute a simple send transaction of ETH from one account to another using web3 1.0.\r\n\r\nweb3.eth.sendTransaction({from:accounts[0],to:accounts[1],value:web3.utils.toWei('10')})\r\n\r\nJSON RPC trace:\r\n\r\n{\"jsonrpc\":\"2.0\",\"id\":15,\"method\":\"eth_sendTransaction\",\"params\":[{\"from\":\"0x494ffe3c7e8bd95833d60cd1a3722efef3e8c246\",\"to\":\"0xd6793d4f4ae1c88065578d0b097d016118128321\",\"value\":\"0x3635c9adc5dea00000\",\"gasPrice\":\"0x1\"}]}\r\n{\"jsonrpc\":\"2.0\",\"id\":15,\"result\":\"0x5acc370a3517ed67951a7525fccc1c2e0fd394f4e6796ebbbf98ae1a1cc50384\"}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":16,\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0x5acc370a3517ed67951a7525fccc1c2e0fd394f4e6796ebbbf98ae1a1cc50384\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":16,\"error\":{\"code\":-32000,\"message\":\"unknown transaction\"}}\\n\r\n\r\n",
  "closed_by": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365645101",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365645101",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365645101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY0NTEwMQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T15:37:03Z",
    "updated_at": "2018-02-14T15:37:03Z",
    "author_association": "MEMBER",
    "body": "Hmmm, seems to work for me https://gist.github.com/karalabe/ed1ca7128f75e1f7d694dbd4a5b7e7cd.\r\n\r\nCould you detail a bit more about your setup? Perhaps you're simply not waiting for the transaction to be mined and that's why it returns \"unknown\"?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365645101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365650546",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365650546",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365650546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY1MDU0Ng==",
    "user": {
      "login": "cryptophonic",
      "id": 409166,
      "node_id": "MDQ6VXNlcjQwOTE2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/409166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptophonic",
      "html_url": "https://github.com/cryptophonic",
      "followers_url": "https://api.github.com/users/cryptophonic/followers",
      "following_url": "https://api.github.com/users/cryptophonic/following{/other_user}",
      "gists_url": "https://api.github.com/users/cryptophonic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cryptophonic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cryptophonic/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptophonic/orgs",
      "repos_url": "https://api.github.com/users/cryptophonic/repos",
      "events_url": "https://api.github.com/users/cryptophonic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cryptophonic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T15:52:55Z",
    "updated_at": "2018-02-14T16:11:20Z",
    "author_association": "NONE",
    "body": "Hmm, interesting.  I'm running code that works on 1.7.3 and consistently breaks on 1.8.0.  I thought that would be enough to reproduce.  Let me try to create a script and attach it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365650546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365656746",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365656746",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365656746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY1Njc0Ng==",
    "user": {
      "login": "cryptophonic",
      "id": 409166,
      "node_id": "MDQ6VXNlcjQwOTE2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/409166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptophonic",
      "html_url": "https://github.com/cryptophonic",
      "followers_url": "https://api.github.com/users/cryptophonic/followers",
      "following_url": "https://api.github.com/users/cryptophonic/following{/other_user}",
      "gists_url": "https://api.github.com/users/cryptophonic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cryptophonic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cryptophonic/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptophonic/orgs",
      "repos_url": "https://api.github.com/users/cryptophonic/repos",
      "events_url": "https://api.github.com/users/cryptophonic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cryptophonic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T16:11:07Z",
    "updated_at": "2018-02-14T16:11:07Z",
    "author_association": "NONE",
    "body": "Ok, the following script reproduces the issue on my machine:\r\n\r\n```\r\n(async () => {\r\n  const Web3 = require('web3')\r\n  const web3 = new Web3('ws://localhost:8546')\r\n\r\n  const accounts = await web3.eth.getAccounts()\r\n  \r\n  if (accounts.length == 1) {\r\n    // Create new account\r\n    const newAccount = await web3.eth.personal.newAccount(\"password\")\r\n    accounts.push(newAccount)\r\n  }\r\n  \r\n  console.log(\"accounts=\" + accounts)\r\n  \r\n  const tx = await web3.eth.sendTransaction({\r\n    from: accounts[0],\r\n    to: accounts[1],\r\n    value: web3.utils.toWei('1000')\r\n  })\r\n  \r\n  console.log(\"tx=\" + tx)\r\n  \r\n})()\r\n```\r\nThis happens running geth using the following command line options, on an Ubuntu Linux box using the 1.8.0 x64 release.\r\n\r\n```\r\ngeth --dev -dev.period 1 --networkid 1001 --ws --wsapi web3,eth,net,admin,personal,debug --wsaddr \"0.0.0.0\" --wsport 8546 --wsorigins \"*\" --targetgaslimit 7500000 console\r\n```\r\n\r\nThe only package dependency is web3.  The script simply creates a new account if there's only the single dev account, then does a send transaction.  The variable tx is never returned, web3 throws an error waiting for the Tx receipt.  The output I get is:\r\n\r\n```\r\n$ node script.js \r\naccounts=0xf89C75381ECb3f173D9Bed88b607fD4D5dE1A086,0x91666A5DF6022A2eb305180F7c07463fac720eAb\r\n(node:19598) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): Error: Failed to check for transaction receipt:\r\n{}\r\n```\r\nThe JSON RPC capture is:\r\n\r\n```\r\n$ ./monitor.sh \r\nCapturing on 'Loopback'\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"eth_accounts\",\"params\":[]}\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":[\"0xe7daaa0d61fd45280ef8bd39f9d566226fe198ce\"]}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":2,\"method\":\"personal_newAccount\",\"params\":[\"password\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":2,\"result\":\"0x6481a7128bc66ce03184ddbfe1ddd6a12bb0eb08\"}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":3,\"method\":\"eth_gasPrice\",\"params\":[]}\r\n{\"jsonrpc\":\"2.0\",\"id\":3,\"result\":\"0x1\"}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":4,\"method\":\"eth_sendTransaction\",\"params\":[{\"from\":\"0xe7daaa0d61fd45280ef8bd39f9d566226fe198ce\",\"to\":\"0x6481a7128bc66ce03184ddbfe1ddd6a12bb0eb08\",\"value\":\"0x3635c9adc5dea00000\",\"gasPrice\":\"0x1\"}]}\r\n{\"jsonrpc\":\"2.0\",\"id\":4,\"result\":\"0x55375b2a82edcaf43f76250e1f356c0eb8ea11454ac3c86d283d84f720176c6b\"}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":5,\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0x55375b2a82edcaf43f76250e1f356c0eb8ea11454ac3c86d283d84f720176c6b\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":5,\"error\":{\"code\":-32000,\"message\":\"unknown transaction\"}}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":6,\"method\":\"eth_subscribe\",\"params\":[\"newHeads\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":6,\"result\":\"0x90cec22a723fcc725fb2462733c2880f\"}\\n\r\n [truncated]{\"jsonrpc\":\"2.0\",\"method\":\"eth_subscription\",\"params\":{\"subscription\":\"0x90cec22a723fcc725fb2462733c2880f\",\"result\":{\"parentHash\":\"0xb3203b0bf1d8ec4f8bb3e2c7961b6c2a2f117c1c595d11c587acf4dcc7452782\",\"sha3Uncles\":\"0x1dcc4de8dec7\r\n{\"jsonrpc\":\"2.0\",\"id\":7,\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0x55375b2a82edcaf43f76250e1f356c0eb8ea11454ac3c86d283d84f720176c6b\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":7,\"error\":{\"code\":-32000,\"message\":\"unknown transaction\"}}\\n\r\n{\"jsonrpc\":\"2.0\",\"id\":8,\"method\":\"eth_unsubscribe\",\"params\":[\"0x90cec22a723fcc725fb2462733c2880f\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":8,\"result\":true}\\n\r\n```\r\nThis is the output running the identical script using geth 1.7.3 from the command line with the identical options:\r\n\r\n```\r\n$ node script\r\naccounts=0x8224FCb942d79d6803217ABF88084c204E797139,0xeC67e0996ade626204C17f1e10f5612175f5603e\r\ntx={\"blockHash\":\"0xb75dd1d1e75baaad97823334c25b4ba7e16c2fa5e3a91604d55060228069ff71\",\"blockNumber\":22,\"contractAddress\":null,\"cumulativeGasUsed\":21000,\"from\":\"0x8224fcb942d79d6803217abf88084c204e797139\",\"gasUsed\":21000,\"logs\":[],\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"status\":\"0x1\",\"to\":\"0xec67e0996ade626204c17f1e10f5612175f5603e\",\"transactionHash\":\"0x4cbdabc9d0c3c4b0613b6781aeeab5dcbaf8babf4a44873bf1200ac4e833b163\",\"transactionIndex\":0}\r\n```\r\n\r\nHope that helps reproduce there.  Let me know if you have any additional questions.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365656746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365691297",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365691297",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365691297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY5MTI5Nw==",
    "user": {
      "login": "sachin-chauhan-dev",
      "id": 27669973,
      "node_id": "MDQ6VXNlcjI3NjY5OTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/27669973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sachin-chauhan-dev",
      "html_url": "https://github.com/sachin-chauhan-dev",
      "followers_url": "https://api.github.com/users/sachin-chauhan-dev/followers",
      "following_url": "https://api.github.com/users/sachin-chauhan-dev/following{/other_user}",
      "gists_url": "https://api.github.com/users/sachin-chauhan-dev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sachin-chauhan-dev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sachin-chauhan-dev/subscriptions",
      "organizations_url": "https://api.github.com/users/sachin-chauhan-dev/orgs",
      "repos_url": "https://api.github.com/users/sachin-chauhan-dev/repos",
      "events_url": "https://api.github.com/users/sachin-chauhan-dev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sachin-chauhan-dev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T17:57:02Z",
    "updated_at": "2018-02-14T17:57:02Z",
    "author_association": "NONE",
    "body": "System information\r\nGeth version: 1.8.0\r\nOS & Version: MAC OS X \r\n\r\nFacing same issue for geth api sendTransaction,\r\napi returning error\r\n\r\n`Error: Failed to check for transaction receipt:\r\n{}\r\n    at Object._fireError (/Users/Sachin/openst-platform/node_modules/web3-utils/src/index.js:56:17)\r\n    at /Users/Sachin/openst-platform/node_modules/web3-core-method/src/index.js:259:23\r\n    at tryCatcher (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/util.js:16:23)\r\n    at Promise._settlePromiseFromHandler (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/promise.js:497:31)\r\n    at Promise._settlePromise (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/promise.js:555:18)\r\n    at Promise._settlePromise0 (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/promise.js:600:10)\r\n    at Promise._settlePromises (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/promise.js:679:18)\r\n    at Async._drainQueue (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/async.js:125:16)\r\n    at Async._drainQueues (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/async.js:135:10)\r\n    at Immediate.Async.drainQueues (/Users/Sachin/openst-platform/node_modules/web3-core-promievent/node_modules/bluebird/js/release/async.js:16:14)\r\n    at runCallback (timers.js:800:20)\r\n    at tryOnImmediate (timers.js:762:5)\r\n    at processImmediate [as _immediateCallback] (timers.js:733:5)`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365691297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365715356",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365715356",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365715356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcxNTM1Ng==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:18:52Z",
    "updated_at": "2018-02-14T19:18:52Z",
    "author_association": "MEMBER",
    "body": "Can repro it locally too, looking into it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365715356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365721912",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365721912",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365721912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcyMTkxMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:41:16Z",
    "updated_at": "2018-02-14T19:41:16Z",
    "author_association": "MEMBER",
    "body": "Hmmm, this may be a bug in web3 actually, or a combo bug. I've printed some detailed logs, about what Geth is doing while web3 is poking it:\r\n\r\nGeth starts mining block 6, which is empty at this point:\r\n\r\n```\r\nINFO [02-14|21:29:18] Commit new mining work                   number=6 txs=0 uncles=0 elapsed=359.345µs\r\n```\r\n\r\nWeb3 submits the transaction and Geth acknowledges it.\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"id\":4,\"method\":\"eth_sendTransaction\",\"params\":[{\"from\":\"0x6bca31e6c211c21e0d95033230660f6f623c31f4\",\"to\":\"0x3603ea324d3b4ebf581869d647ef90e1f52d7d15\",\"value\":\"0x3635c9adc5dea00000\",\"gasPrice\":\"0x1\"}]}\r\nINFO [02-14|21:29:18] Submitted transaction                    fullhash=0xb4a9f0b9f3b1e03a561f35f3e3095b45ba5519496dfc6e678c0d9338d5648d17 recipient=0x3603EA324D3b4EBF581869D647Ef90e1F52D7D15\r\n```\r\n\r\nWeb3 tries to instantly retrieve the receipt, it cannot be found, so it subscribes to new blocks:\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"id\":5,\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0xb4a9f0b9f3b1e03a561f35f3e3095b45ba5519496dfc6e678c0d9338d5648d17\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":6,\"method\":\"eth_subscribe\",\"params\":[\"newHeads\"]}\r\n```\r\n\r\nGeth finishes mining the empty block 6, announces it to web3 and starts mining block 7 with the transaction in it:\r\n\r\n```\r\nINFO [02-14|21:29:19] Successfully sealed new block            number=6 hash=f0db33…60af0d\r\nTRACE[02-14|21:29:19] Announced block                          hash=f0db33…60af0d recipients=0 duration=2562047h47m16.854s\r\nINFO [02-14|21:29:19] Commit new mining work                   number=7 txs=1 uncles=0 elapsed=1.343ms\r\n```\r\n\r\nWeb3 tries to retrieve the receipt, which is not yet ready (being mined), so it aborts:\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"id\":7,\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0xb4a9f0b9f3b1e03a561f35f3e3095b45ba5519496dfc6e678c0d9338d5648d17\"]}\r\n{\"jsonrpc\":\"2.0\",\"id\":8,\"method\":\"eth_unsubscribe\",\"params\":[\"0xc02d3086f920ccd7c84386ecd76e58d7\"]}\r\n```\r\n\r\nGeth finishes mining the block with the transaction.\r\n\r\n```\r\nINFO [02-14|21:29:20] Successfully sealed new block            number=7 hash=f46a90…91e7ef\r\n```\r\n\r\n---\r\n\r\nGeth's fault: While a transaction is pooled up but not yet mined, it doesn't return any receipt for it. Question is, should it?\r\n\r\nWeb3's fault: Why does it stop fetching receipts after the first block (which doesn't contain said transaction)?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365721912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365722325",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365722325",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365722325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcyMjMyNQ==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:42:45Z",
    "updated_at": "2018-02-14T19:42:45Z",
    "author_association": "MEMBER",
    "body": "According to https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactionreceipt:\r\n\r\n> Note That the receipt is not available for pending transactions.\r\n\r\nWhich would mean Geth is correct in its behavior.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365722325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365722418",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365722418",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365722418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcyMjQxOA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:43:08Z",
    "updated_at": "2018-02-14T19:43:08Z",
    "author_association": "MEMBER",
    "body": "@evertonfraga @frozeman ?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365722418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365758598",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-365758598",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 365758598,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTc1ODU5OA==",
    "user": {
      "login": "cryptophonic",
      "id": 409166,
      "node_id": "MDQ6VXNlcjQwOTE2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/409166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptophonic",
      "html_url": "https://github.com/cryptophonic",
      "followers_url": "https://api.github.com/users/cryptophonic/followers",
      "following_url": "https://api.github.com/users/cryptophonic/following{/other_user}",
      "gists_url": "https://api.github.com/users/cryptophonic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cryptophonic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cryptophonic/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptophonic/orgs",
      "repos_url": "https://api.github.com/users/cryptophonic/repos",
      "events_url": "https://api.github.com/users/cryptophonic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cryptophonic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T21:58:41Z",
    "updated_at": "2018-02-14T21:58:41Z",
    "author_association": "NONE",
    "body": "i wonder if this might be related to another issue I've seen with dev.period=0 (instaseal).  intermittently, an event will not be returned synchronously with the transaction.  it causes the communication to lock up (web3 waiting) and geth won't deliver the event until you prod it with another sendTransaction().  fairly easy to reproduce and similar feel.  just thinking aloud, have not been in the code at all...",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/365758598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366408730",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-366408730",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 366408730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjQwODczMA==",
    "user": {
      "login": "OniReimu",
      "id": 22544855,
      "node_id": "MDQ6VXNlcjIyNTQ0ODU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/22544855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/OniReimu",
      "html_url": "https://github.com/OniReimu",
      "followers_url": "https://api.github.com/users/OniReimu/followers",
      "following_url": "https://api.github.com/users/OniReimu/following{/other_user}",
      "gists_url": "https://api.github.com/users/OniReimu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/OniReimu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/OniReimu/subscriptions",
      "organizations_url": "https://api.github.com/users/OniReimu/orgs",
      "repos_url": "https://api.github.com/users/OniReimu/repos",
      "events_url": "https://api.github.com/users/OniReimu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/OniReimu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-17T02:23:34Z",
    "updated_at": "2018-02-17T02:23:34Z",
    "author_association": "NONE",
    "body": "facing exactly the same issue. A very simple basic web3.eth.sendTransaction() leads to this failure.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366408730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366871447",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-366871447",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 366871447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Njg3MTQ0Nw==",
    "user": {
      "login": "swaldman",
      "id": 1733981,
      "node_id": "MDQ6VXNlcjE3MzM5ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1733981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swaldman",
      "html_url": "https://github.com/swaldman",
      "followers_url": "https://api.github.com/users/swaldman/followers",
      "following_url": "https://api.github.com/users/swaldman/following{/other_user}",
      "gists_url": "https://api.github.com/users/swaldman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swaldman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swaldman/subscriptions",
      "organizations_url": "https://api.github.com/users/swaldman/orgs",
      "repos_url": "https://api.github.com/users/swaldman/repos",
      "events_url": "https://api.github.com/users/swaldman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swaldman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-20T05:32:29Z",
    "updated_at": "2018-02-20T05:36:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "There's been a change in geth's behavior when a receipt for an unknown transaction hash is requested between 1.7.x and 1.8.0. Previously, calling `eth_getTransactionReceipt` simply returned 'null' (as success jsonrpc response, not an error).\r\n\r\nIn 1.8.0, geth returns a (nowhere-documented) jsonrpc error response (with a generic -32000 error code).\r\n\r\nPlease see the following curl transcripts:\r\n\r\n* Old Behavior\r\n\r\n```\r\n$ curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[],\"id\":1}' https://mainnet.infura.io/XXXXXXXXXXX\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"Geth/v1.7.3-stable-8c95ba44/linux-amd64/go1.9.2\"}\r\n\r\n$ curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0xb903239f8543d04b5dc1ba6579132b143087c68db1b2168786408fcbce568238\"],\"id\":1}' https://mainnet.infura.io/XXXXXXXXXXX\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}\r\n```\r\n\r\n* New behavior\r\n\r\n```\r\n$ curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[],\"id\":1}' http://ethjsonrpc.mchange.com:8545/\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"Geth/v1.8.0-stable/linux-amd64/go1.9.3\"}\r\n\r\n$ curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0xb903239f8543d04b5dc1ba6579132b143087c68db1b2168786408fcbce568238\"],\"id\":1}' http://ethjsonrpc.mchange.com:8545/\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32000,\"message\":\"unknown transaction\"}}\r\n```\r\n\r\nThis change breaks other applications expecting the old behavior, not just the Javascript web3 library. Whichever way it is ultimately handled, this case (asking for a transaction receipt of an unknown or pending transaction) should be specified and documented in the Ethereum jsonrpc spec somewhere, I think.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366871447/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366878069",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-366878069",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 366878069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Njg3ODA2OQ==",
    "user": {
      "login": "swaldman",
      "id": 1733981,
      "node_id": "MDQ6VXNlcjE3MzM5ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1733981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swaldman",
      "html_url": "https://github.com/swaldman",
      "followers_url": "https://api.github.com/users/swaldman/followers",
      "following_url": "https://api.github.com/users/swaldman/following{/other_user}",
      "gists_url": "https://api.github.com/users/swaldman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swaldman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swaldman/subscriptions",
      "organizations_url": "https://api.github.com/users/swaldman/orgs",
      "repos_url": "https://api.github.com/users/swaldman/repos",
      "events_url": "https://api.github.com/users/swaldman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swaldman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-20T06:21:52Z",
    "updated_at": "2018-02-20T06:21:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm guessing this is the change what done it... https://github.com/ethereum/go-ethereum/commit/e9971d356bf977d2a3f63e50296d7410ade2d075#diff-607ee6300c766df112070d851a1661c9",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/366878069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/369202342",
    "html_url": "https://github.com/ethereum/go-ethereum/issues/16092#issuecomment-369202342",
    "issue_url": "https://api.github.com/repos/ethereum/go-ethereum/issues/16092",
    "id": 369202342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTIwMjM0Mg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-28T10:51:27Z",
    "updated_at": "2018-02-28T10:51:27Z",
    "author_association": "MEMBER",
    "body": "https://github.com/ethereum/go-ethereum/pull/16217 should fix this issue (pending review). We didn't realize that the changed linked above violated an API behavioral expectancy.\r\n\r\nWhilst I can't unilaterally say the old behavior is the good one and the new is the bad one, there's obviously problems in the RPC spec that it does not specify any error handling whatsoever, so people grew to the current behavior. Not happy about it, but I agree that we shouldn't break it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/go-ethereum/issues/comments/369202342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

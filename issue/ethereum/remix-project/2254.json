{
  "url": "https://api.github.com/repos/ethereum/remix-project/issues/2254",
  "repository_url": "https://api.github.com/repos/ethereum/remix-project",
  "labels_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254/comments",
  "events_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254/events",
  "html_url": "https://github.com/ethereum/remix-project/issues/2254",
  "id": 1190779087,
  "node_id": "I_kwDODtLRw85G-djP",
  "number": 2254,
  "title": "Hardhat: cannot send transaction that fails",
  "user": {
    "login": "yzhou61",
    "id": 1254973,
    "node_id": "MDQ6VXNlcjEyNTQ5NzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1254973?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yzhou61",
    "html_url": "https://github.com/yzhou61",
    "followers_url": "https://api.github.com/users/yzhou61/followers",
    "following_url": "https://api.github.com/users/yzhou61/following{/other_user}",
    "gists_url": "https://api.github.com/users/yzhou61/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yzhou61/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yzhou61/subscriptions",
    "organizations_url": "https://api.github.com/users/yzhou61/orgs",
    "repos_url": "https://api.github.com/users/yzhou61/repos",
    "events_url": "https://api.github.com/users/yzhou61/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yzhou61/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-04-03T01:08:05Z",
  "updated_at": "2022-04-12T10:32:38Z",
  "closed_at": "2022-04-12T10:32:38Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Using the hardhat plugin, I used to be able to send a transaction that fails on chain. The gas estimate would tell me that the transaction is likely to fail, ask me to confirm, and then proceed to the transaction sending page.\r\n\r\nStarting with v0.21.0, I can no longer do that. When the gas estimation fails, the provider automatically jumps back to javascript, causing the subsequent transaction send to fail with \"invalid address\".",
  "closed_by": {
    "login": "yann300",
    "id": 6940742,
    "node_id": "MDQ6VXNlcjY5NDA3NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6940742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yann300",
    "html_url": "https://github.com/yann300",
    "followers_url": "https://api.github.com/users/yann300/followers",
    "following_url": "https://api.github.com/users/yann300/following{/other_user}",
    "gists_url": "https://api.github.com/users/yann300/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yann300/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yann300/subscriptions",
    "organizations_url": "https://api.github.com/users/yann300/orgs",
    "repos_url": "https://api.github.com/users/yann300/repos",
    "events_url": "https://api.github.com/users/yann300/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yann300/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/remix-project/issues/2254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/remix-project/issues/comments/1088274263",
    "html_url": "https://github.com/ethereum/remix-project/issues/2254#issuecomment-1088274263",
    "issue_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254",
    "id": 1088274263,
    "node_id": "IC_kwDODtLRw85A3b9X",
    "user": {
      "login": "Aniket-Engg",
      "id": 30843294,
      "node_id": "MDQ6VXNlcjMwODQzMjk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/30843294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aniket-Engg",
      "html_url": "https://github.com/Aniket-Engg",
      "followers_url": "https://api.github.com/users/Aniket-Engg/followers",
      "following_url": "https://api.github.com/users/Aniket-Engg/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aniket-Engg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aniket-Engg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aniket-Engg/subscriptions",
      "organizations_url": "https://api.github.com/users/Aniket-Engg/orgs",
      "repos_url": "https://api.github.com/users/Aniket-Engg/repos",
      "events_url": "https://api.github.com/users/Aniket-Engg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aniket-Engg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-05T05:11:23Z",
    "updated_at": "2022-04-05T05:11:23Z",
    "author_association": "MEMBER",
    "body": "@yzhou61 Can you please add steps to reproduce and related screenshot to understand the issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/remix-project/issues/comments/1088274263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/remix-project/issues/comments/1094105053",
    "html_url": "https://github.com/ethereum/remix-project/issues/2254#issuecomment-1094105053",
    "issue_url": "https://api.github.com/repos/ethereum/remix-project/issues/2254",
    "id": 1094105053,
    "node_id": "IC_kwDODtLRw85BNrfd",
    "user": {
      "login": "yzhou61",
      "id": 1254973,
      "node_id": "MDQ6VXNlcjEyNTQ5NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yzhou61",
      "html_url": "https://github.com/yzhou61",
      "followers_url": "https://api.github.com/users/yzhou61/followers",
      "following_url": "https://api.github.com/users/yzhou61/following{/other_user}",
      "gists_url": "https://api.github.com/users/yzhou61/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yzhou61/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yzhou61/subscriptions",
      "organizations_url": "https://api.github.com/users/yzhou61/orgs",
      "repos_url": "https://api.github.com/users/yzhou61/repos",
      "events_url": "https://api.github.com/users/yzhou61/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yzhou61/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-09T18:45:38Z",
    "updated_at": "2022-04-09T18:45:38Z",
    "author_association": "NONE",
    "body": "@Aniket-Engg sure thing. Steps to repro:\r\n\r\n```\r\ngit checkout v0.22.2\r\nnpm install\r\n# current: { node: 'v16.14.2', npm: '8.5.0' }\r\nnpm run build\r\nnpm run serve\r\n```\r\nThen in Remix:\r\n- Enable hardhat provider plugin\r\n- Launch a local hardhat node\r\n- Switch the Remix environment to hardhat and connect to the node\r\n- Deploy a contract\r\n- Send a tx that fails\r\n\r\nHere's what I see. The following 3 images are from the same screenshot.\r\n![image](https://user-images.githubusercontent.com/1254973/162587250-ad60f131-e766-49cc-be40-864bcaccf367.png)\r\n![image](https://user-images.githubusercontent.com/1254973/162587541-29773a36-3099-4441-bbfe-69f4afa64ec0.png)\r\n![image](https://user-images.githubusercontent.com/1254973/162587271-cb99d9e1-6015-46aa-829e-1ab4fa46b7a9.png)\r\n\r\nAs you can see, as soon as the \"gas estimation failed\" dialog pops up, the environment switches back to JS.\r\n\r\nNow if I hit the \"Send Transaction\" button, the console shows the following:\r\n```\r\ntransact to Test.(fallback) errored: Invalid account selected\r\n```\r\n\r\nIn v0.20.3, when the gas estimation fails, the environment doesn't automatically switch back the JS, allowing me to send the tx even if it's going to fail.\r\n\r\nThanks for looking into this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/remix-project/issues/comments/1094105053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

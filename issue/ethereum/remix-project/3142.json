{
  "url": "https://api.github.com/repos/ethereum/remix-project/issues/3142",
  "repository_url": "https://api.github.com/repos/ethereum/remix-project",
  "labels_url": "https://api.github.com/repos/ethereum/remix-project/issues/3142/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/remix-project/issues/3142/comments",
  "events_url": "https://api.github.com/repos/ethereum/remix-project/issues/3142/events",
  "html_url": "https://github.com/ethereum/remix-project/issues/3142",
  "id": 1455134607,
  "node_id": "I_kwDODtLRw85Wu5eP",
  "number": 3142,
  "title": "Block.number issue",
  "user": {
    "login": "javierdeveloping",
    "id": 25368218,
    "node_id": "MDQ6VXNlcjI1MzY4MjE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/25368218?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/javierdeveloping",
    "html_url": "https://github.com/javierdeveloping",
    "followers_url": "https://api.github.com/users/javierdeveloping/followers",
    "following_url": "https://api.github.com/users/javierdeveloping/following{/other_user}",
    "gists_url": "https://api.github.com/users/javierdeveloping/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/javierdeveloping/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/javierdeveloping/subscriptions",
    "organizations_url": "https://api.github.com/users/javierdeveloping/orgs",
    "repos_url": "https://api.github.com/users/javierdeveloping/repos",
    "events_url": "https://api.github.com/users/javierdeveloping/events{/privacy}",
    "received_events_url": "https://api.github.com/users/javierdeveloping/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-11-18T13:35:38Z",
  "updated_at": "2022-11-18T13:35:38Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello.\r\n\r\nI have been doing some test using a contract called Timer (code can be found at the end of this post) in Remix Web IDE.\r\nI tested it using different tools (remix web IDE, ganache, hardhat) and remix web IDE provides different result regarding the calculation of block.number.\r\n\r\n**Basic test:**\r\n\r\n1 -> deploy contract\r\n2 -> immediately check creationBlock \r\n3 -> call getBlock view function\r\n4 -> call lastBlock view -> its value is 0\r\n5 -> call blockAdvance\r\n6 -> check lastBlockAdvance value\r\n7 -> call getBlock view function\r\n\r\n**Possible problem:**\r\n\r\nWhen calling getBlock view function, the contract checks global variable block and gets block.number property value.\r\n\r\nIn Hardhat and Ganache, when lastBlock variable is updated after calling blockAdvanced method:\r\n\r\n1. when getBlock method is called, block.number value in Remix differs from the value we would get in Hardhat and Ganache\r\n2. in Hardhat and ganache, after calling the above mentioned method, block.number == lastblock but in remix, block.number is not equal to lastblock.\r\n\r\n\r\nPlease, find below the code and an image that could provide more details about this possible error.\r\n\r\n![hardhat_ganache_remix_blockNumber](https://user-images.githubusercontent.com/25368218/202716784-92cadd7e-71cf-46c9-9db7-49c4cc8abc9c.png)\r\n\r\n```\r\n\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.9;\r\n\r\ncontract Timer {\r\n  constructor() {\r\n    creationBlock = block.number;\r\n  }\r\n\r\n  uint public lastblock;\r\n  uint public creationBlock;\r\n\r\n  function getBlock() public view returns (uint, uint) {\r\n    return (block.timestamp, block.number);\r\n  }\r\n\r\n  function blockAdvanced() public {\r\n    lastblock = block.number;\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nThanks for your time.\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/remix-project/issues/3142/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/remix-project/issues/3142/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
  "repository_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography",
  "labels_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13/comments",
  "events_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13/events",
  "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13",
  "id": 1055698180,
  "node_id": "I_kwDODJLAss4-7K0E",
  "number": 13,
  "title": "Question on expected time for browser computation",
  "user": {
    "login": "alanorwick",
    "id": 14866363,
    "node_id": "MDQ6VXNlcjE0ODY2MzYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/14866363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alanorwick",
    "html_url": "https://github.com/alanorwick",
    "followers_url": "https://api.github.com/users/alanorwick/followers",
    "following_url": "https://api.github.com/users/alanorwick/following{/other_user}",
    "gists_url": "https://api.github.com/users/alanorwick/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alanorwick/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alanorwick/subscriptions",
    "organizations_url": "https://api.github.com/users/alanorwick/orgs",
    "repos_url": "https://api.github.com/users/alanorwick/repos",
    "events_url": "https://api.github.com/users/alanorwick/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alanorwick/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2021-11-17T04:41:20Z",
  "updated_at": "2022-06-15T10:42:53Z",
  "closed_at": "2022-06-15T10:42:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When running MetaMask and attempting to create a bulk group of secp256k1 addresses, my browser is spending a lot of time computing the comb10MulTo (10 seconds on 123 addresses / ~50% total runtime)  that is downstream of the getPublicKey used in the ethereum-cryptography package.\r\n\r\nApologies if this is the wrong place to ask but is this expected when doing this sort of computation? Running the program outside of the browser is near instant. Feel free to close this issue if it is not intended to be opened here.\r\n\r\nCallTrace for reference:\r\n![Screen Shot 2021-11-16 at 10 24 34 PM](https://user-images.githubusercontent.com/14866363/142136050-6e6297e7-3d70-4975-b7ae-3c4eda6c1b5f.png)\r\n\r\n\r\n",
  "closed_by": {
    "login": "paulmillr",
    "id": 574696,
    "node_id": "MDQ6VXNlcjU3NDY5Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/574696?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulmillr",
    "html_url": "https://github.com/paulmillr",
    "followers_url": "https://api.github.com/users/paulmillr/followers",
    "following_url": "https://api.github.com/users/paulmillr/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulmillr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulmillr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulmillr/subscriptions",
    "organizations_url": "https://api.github.com/users/paulmillr/orgs",
    "repos_url": "https://api.github.com/users/paulmillr/repos",
    "events_url": "https://api.github.com/users/paulmillr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulmillr/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971394943",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971394943",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971394943,
    "node_id": "IC_kwDODJLAss455k9_",
    "user": {
      "login": "holgerd77",
      "id": 931137,
      "node_id": "MDQ6VXNlcjkzMTEzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/931137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holgerd77",
      "html_url": "https://github.com/holgerd77",
      "followers_url": "https://api.github.com/users/holgerd77/followers",
      "following_url": "https://api.github.com/users/holgerd77/following{/other_user}",
      "gists_url": "https://api.github.com/users/holgerd77/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holgerd77/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holgerd77/subscriptions",
      "organizations_url": "https://api.github.com/users/holgerd77/orgs",
      "repos_url": "https://api.github.com/users/holgerd77/repos",
      "events_url": "https://api.github.com/users/holgerd77/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holgerd77/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T09:28:21Z",
    "updated_at": "2021-11-17T09:28:21Z",
    "author_association": "MEMBER",
    "body": "Circling myself in here, Holger from EthereumJS. MetaMask is using our [Wallet](https://github.com/ethereumjs/ethereumjs-wallet/) library under the hood, did a quick search, I guess it's in this [eth-hd-keyring](https://github.com/MetaMask/eth-hd-keyring) package.\r\n\r\nWe are still on `^0.1.3` (and since this is below v1 this would mean that caret here includes all versions below v0.2) - see e.g. [this article for context](https://nodesource.com/blog/semver-tilde-and-caret/) (needed to reread to be sure myself). For the moment we wouldn't want to update to `v0.2` yet, since an audit is still outstanding.\r\n\r\nWe will consider though switching to `v1.0` (audited version of v0.2) though once released, we are a bit unsure though if we would give up too much on backwards compatibility with the BigInt integration, we'll carefully read the [announced upgrade guide](https://github.com/ethereum/js-ethereum-cryptography/releases/tag/v0.2.0).\r\n\r\nJust to confirm - maybe from @paulmillr: an update n v1.0 should make this use case from above substantially faster, right? Is this roughly quantifiable what a gain would be achieved here, as some decision helper?\r\n\r\nAll right. 😄",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971394943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971508929",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971508929",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971508929,
    "node_id": "IC_kwDODJLAss456AzB",
    "user": {
      "login": "paulmillr",
      "id": 574696,
      "node_id": "MDQ6VXNlcjU3NDY5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/574696?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulmillr",
      "html_url": "https://github.com/paulmillr",
      "followers_url": "https://api.github.com/users/paulmillr/followers",
      "following_url": "https://api.github.com/users/paulmillr/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulmillr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulmillr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulmillr/subscriptions",
      "organizations_url": "https://api.github.com/users/paulmillr/orgs",
      "repos_url": "https://api.github.com/users/paulmillr/repos",
      "events_url": "https://api.github.com/users/paulmillr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulmillr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T11:54:45Z",
    "updated_at": "2021-11-17T12:03:31Z",
    "author_association": "COLLABORATOR",
    "body": "@holgerd77 it could be faster after upgrade, but the main question here is how the hd keyring / pubkeys are derived through the app. If this persists, there can be some ways of optimizing the logic.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971508929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971514617",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971514617",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971514617,
    "node_id": "IC_kwDODJLAss456CL5",
    "user": {
      "login": "paulmillr",
      "id": 574696,
      "node_id": "MDQ6VXNlcjU3NDY5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/574696?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulmillr",
      "html_url": "https://github.com/paulmillr",
      "followers_url": "https://api.github.com/users/paulmillr/followers",
      "following_url": "https://api.github.com/users/paulmillr/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulmillr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulmillr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulmillr/subscriptions",
      "organizations_url": "https://api.github.com/users/paulmillr/orgs",
      "repos_url": "https://api.github.com/users/paulmillr/repos",
      "events_url": "https://api.github.com/users/paulmillr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulmillr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T12:03:12Z",
    "updated_at": "2021-11-17T12:03:12Z",
    "author_association": "COLLABORATOR",
    "body": "For the record, calculating 123 public keys from privates in noble-secp takes 20 milliseconds on M1. Which is 500x faster. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971514617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971786441",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971786441",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971786441,
    "node_id": "IC_kwDODJLAss457EjJ",
    "user": {
      "login": "alanorwick",
      "id": 14866363,
      "node_id": "MDQ6VXNlcjE0ODY2MzYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14866363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alanorwick",
      "html_url": "https://github.com/alanorwick",
      "followers_url": "https://api.github.com/users/alanorwick/followers",
      "following_url": "https://api.github.com/users/alanorwick/following{/other_user}",
      "gists_url": "https://api.github.com/users/alanorwick/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alanorwick/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alanorwick/subscriptions",
      "organizations_url": "https://api.github.com/users/alanorwick/orgs",
      "repos_url": "https://api.github.com/users/alanorwick/repos",
      "events_url": "https://api.github.com/users/alanorwick/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alanorwick/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T17:14:06Z",
    "updated_at": "2021-11-17T17:14:06Z",
    "author_association": "NONE",
    "body": "@holgerd77 correct on the eth-hd-keyring, that's where I was doing the address generation.\r\n\r\n@paulmillr what do you mean by how the hd keyring / pubkeys are derived? Would this be a symptom of MetaMask, the wallet library (ethereumjs-wallet), or something else? Is the 20 millisecond calculation done in browser for M1? My calculation even on Intel Mac chip locally is in the milliseconds, i.e whenever I do `yarn test` in the eth-hd-keyring for 100+ address generations.\r\n\r\nThank you both for your assistance, still learning a lot of the downstream packages.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971786441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971789609",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971789609",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971789609,
    "node_id": "IC_kwDODJLAss457FUp",
    "user": {
      "login": "paulmillr",
      "id": 574696,
      "node_id": "MDQ6VXNlcjU3NDY5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/574696?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulmillr",
      "html_url": "https://github.com/paulmillr",
      "followers_url": "https://api.github.com/users/paulmillr/followers",
      "following_url": "https://api.github.com/users/paulmillr/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulmillr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulmillr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulmillr/subscriptions",
      "organizations_url": "https://api.github.com/users/paulmillr/orgs",
      "repos_url": "https://api.github.com/users/paulmillr/repos",
      "events_url": "https://api.github.com/users/paulmillr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulmillr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T17:17:52Z",
    "updated_at": "2021-11-17T17:17:52Z",
    "author_association": "COLLABORATOR",
    "body": "@alanorwick browser perf should not differ much. It could be 3x slower, but not 50x. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971789609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971811625",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-971811625",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 971811625,
    "node_id": "IC_kwDODJLAss457Ksp",
    "user": {
      "login": "alanorwick",
      "id": 14866363,
      "node_id": "MDQ6VXNlcjE0ODY2MzYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14866363?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alanorwick",
      "html_url": "https://github.com/alanorwick",
      "followers_url": "https://api.github.com/users/alanorwick/followers",
      "following_url": "https://api.github.com/users/alanorwick/following{/other_user}",
      "gists_url": "https://api.github.com/users/alanorwick/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alanorwick/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alanorwick/subscriptions",
      "organizations_url": "https://api.github.com/users/alanorwick/orgs",
      "repos_url": "https://api.github.com/users/alanorwick/repos",
      "events_url": "https://api.github.com/users/alanorwick/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alanorwick/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T17:45:01Z",
    "updated_at": "2021-11-17T17:46:09Z",
    "author_association": "NONE",
    "body": "Agreed on that it shouldn't differ too much although I'm curious as to why it is. Just reran the MetaMask code for 100 wallets and it came out to 10 seconds. Locally it's 2.43ms for 100 addresses. Do you have any resources on other ways to test the browser performance? I'll ask in the MetaMask repos as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/971811625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/991879259",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-991879259",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 991879259,
    "node_id": "IC_kwDODJLAss47HuBb",
    "user": {
      "login": "hugomrdias",
      "id": 314190,
      "node_id": "MDQ6VXNlcjMxNDE5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/314190?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hugomrdias",
      "html_url": "https://github.com/hugomrdias",
      "followers_url": "https://api.github.com/users/hugomrdias/followers",
      "following_url": "https://api.github.com/users/hugomrdias/following{/other_user}",
      "gists_url": "https://api.github.com/users/hugomrdias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hugomrdias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hugomrdias/subscriptions",
      "organizations_url": "https://api.github.com/users/hugomrdias/orgs",
      "repos_url": "https://api.github.com/users/hugomrdias/repos",
      "events_url": "https://api.github.com/users/hugomrdias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hugomrdias/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-12T11:19:55Z",
    "updated_at": "2021-12-12T11:19:55Z",
    "author_association": "NONE",
    "body": "You can run benchmark js with https://github.com/hugomrdias/playwright-test in all browsers, main thread, worker, service worker and extension contexts.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/991879259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/1156310545",
    "html_url": "https://github.com/ethereum/js-ethereum-cryptography/issues/13#issuecomment-1156310545",
    "issue_url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/13",
    "id": 1156310545,
    "node_id": "IC_kwDODJLAss5E6-YR",
    "user": {
      "login": "paulmillr",
      "id": 574696,
      "node_id": "MDQ6VXNlcjU3NDY5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/574696?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulmillr",
      "html_url": "https://github.com/paulmillr",
      "followers_url": "https://api.github.com/users/paulmillr/followers",
      "following_url": "https://api.github.com/users/paulmillr/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulmillr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulmillr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulmillr/subscriptions",
      "organizations_url": "https://api.github.com/users/paulmillr/orgs",
      "repos_url": "https://api.github.com/users/paulmillr/repos",
      "events_url": "https://api.github.com/users/paulmillr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulmillr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T10:42:53Z",
    "updated_at": "2022-06-15T10:42:53Z",
    "author_association": "COLLABORATOR",
    "body": "v1.0 is out now, ethereumjs-util would be also upgraded to native bigints asap, so old issues related to third-party bigints are not relevant anymore 👍 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/js-ethereum-cryptography/issues/comments/1156310545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

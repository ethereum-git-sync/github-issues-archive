{
  "url": "https://api.github.com/repos/ethereum/devp2p/issues/52",
  "repository_url": "https://api.github.com/repos/ethereum/devp2p",
  "labels_url": "https://api.github.com/repos/ethereum/devp2p/issues/52/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/devp2p/issues/52/comments",
  "events_url": "https://api.github.com/repos/ethereum/devp2p/issues/52/events",
  "html_url": "https://github.com/ethereum/devp2p/issues/52",
  "id": 377043951,
  "node_id": "MDU6SXNzdWUzNzcwNDM5NTE=",
  "number": 52,
  "title": "Consider alternatives to XOR distance metric",
  "user": {
    "login": "polarker",
    "id": 295279,
    "node_id": "MDQ6VXNlcjI5NTI3OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/295279?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/polarker",
    "html_url": "https://github.com/polarker",
    "followers_url": "https://api.github.com/users/polarker/followers",
    "following_url": "https://api.github.com/users/polarker/following{/other_user}",
    "gists_url": "https://api.github.com/users/polarker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/polarker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/polarker/subscriptions",
    "organizations_url": "https://api.github.com/users/polarker/orgs",
    "repos_url": "https://api.github.com/users/polarker/repos",
    "events_url": "https://api.github.com/users/polarker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/polarker/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-11-03T10:50:06Z",
  "updated_at": "2020-08-20T12:23:56Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "As far as I know, Ethereum uses a variant of Kademlia protocol. The distance of two node is based on the common prefixes of node ids (hashed actually).\r\n\r\nIn this way, the whole space of node ids are divided into two branches, one branch ids starting with 0 and another branch ids starting with 1. In theory, the nodes in branch 0 have near neighbors only from branch 0 and nodes in branch 1 have near neighbors from branch 1. Therefore, there is no neighbor connections between branch 0 and branch 1. In practice, bootstrap nodes have eased this problem probably.\r\n\r\nI found this issue when I was designing my own blockchain algorithm/protocol. My fix is pretty simple as well, replacing xor metric by hamming distance, i.e. changing from `distance = id1 xor id2` to `distance = sum bits of(id1 xor id2)`. With hamming distance, the network has the same diameter as xor metric, but not partitioned.\r\n\r\nP.S. I post this on ethresear.ch yesterday, but maybe here is a better place for it.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/52/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/devp2p/issues/52/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/435894976",
    "html_url": "https://github.com/ethereum/devp2p/issues/52#issuecomment-435894976",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/52",
    "id": 435894976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTg5NDk3Ng==",
    "user": {
      "login": "ChihChengLiang",
      "id": 3391420,
      "node_id": "MDQ6VXNlcjMzOTE0MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3391420?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChihChengLiang",
      "html_url": "https://github.com/ChihChengLiang",
      "followers_url": "https://api.github.com/users/ChihChengLiang/followers",
      "following_url": "https://api.github.com/users/ChihChengLiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChihChengLiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChihChengLiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChihChengLiang/subscriptions",
      "organizations_url": "https://api.github.com/users/ChihChengLiang/orgs",
      "repos_url": "https://api.github.com/users/ChihChengLiang/repos",
      "events_url": "https://api.github.com/users/ChihChengLiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChihChengLiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T14:30:05Z",
    "updated_at": "2018-11-05T14:30:05Z",
    "author_association": "MEMBER",
    "body": "Let me post the reference to the [research post](https://ethresear.ch/t/kademlia-leads-to-network-partition-for-ethereum-in-theory/4088) here",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/435894976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/436009312",
    "html_url": "https://github.com/ethereum/devp2p/issues/52#issuecomment-436009312",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/52",
    "id": 436009312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAwOTMxMg==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T19:43:42Z",
    "updated_at": "2018-11-05T19:43:42Z",
    "author_association": "MEMBER",
    "body": "As Jannik explained on ethresear.ch, Kademlia is not used to determine connections between nodes. The node discovery DHT is based on Kademlia, but the way nodes talk to each other in the DHT is unrelated to actual peer connections. \n\nYour hypothesis is not correct because bucket zero in the table contains nodes from both 'branch 0' and 'branch 1'. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/436009312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/436009811",
    "html_url": "https://github.com/ethereum/devp2p/issues/52#issuecomment-436009811",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/52",
    "id": 436009811,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAwOTgxMQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T19:45:17Z",
    "updated_at": "2018-11-05T19:45:17Z",
    "author_association": "MEMBER",
    "body": "I appreciate the tip to try hamming distance though. We need routing to work and I'm not sure it works properly with just hamming distance, but it's still a good idea to evaluate whether another distance metric would work better than xor. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/436009811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/677632042",
    "html_url": "https://github.com/ethereum/devp2p/issues/52#issuecomment-677632042",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/52",
    "id": 677632042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzYzMjA0Mg==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T12:23:24Z",
    "updated_at": "2020-08-20T12:23:56Z",
    "author_association": "MEMBER",
    "body": "It appears that Hamming distance based DHTs have been attempted in the past, the main goal being fast similarity search: http://ce-resd.facom.ufms.br/sbrc/2012/ST4_2.pdf ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/677632042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

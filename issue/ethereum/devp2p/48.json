{
  "url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
  "repository_url": "https://api.github.com/repos/ethereum/devp2p",
  "labels_url": "https://api.github.com/repos/ethereum/devp2p/issues/48/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/devp2p/issues/48/comments",
  "events_url": "https://api.github.com/repos/ethereum/devp2p/issues/48/events",
  "html_url": "https://github.com/ethereum/devp2p/issues/48",
  "id": 362794696,
  "node_id": "MDU6SXNzdWUzNjI3OTQ2OTY=",
  "number": 48,
  "title": "Specify Discovery v5",
  "user": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/devp2p/milestones/2",
    "html_url": "https://github.com/ethereum/devp2p/milestone/2",
    "labels_url": "https://api.github.com/repos/ethereum/devp2p/milestones/2/labels",
    "id": 4220807,
    "node_id": "MDk6TWlsZXN0b25lNDIyMDgwNw==",
    "number": 2,
    "title": "Discovery v5.1",
    "description": "",
    "creator": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 22,
    "state": "closed",
    "created_at": "2019-04-11T11:36:18Z",
    "updated_at": "2020-10-07T19:09:49Z",
    "due_on": null,
    "closed_at": "2020-10-07T19:09:49Z"
  },
  "comments": 13,
  "created_at": "2018-09-21T22:36:59Z",
  "updated_at": "2019-04-11T11:38:42Z",
  "closed_at": "2019-04-11T11:37:17Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The existing discovery protocol has been around for a long time and has it's shortcomings. Some of those are listed in the specification. \r\n\r\nThere are a few things we want in the next version of the discovery protocol:\r\n\r\n- Being independent of the clock\r\n- Making traffic amplification prevention less weird\r\n- Relaying more node metadata\r\n- Indexing nodes by their capabilities\r\n- Obfuscating discovery traffic\r\n\r\nSome of these things, specifically the 'node metadata' parts are solved by [ENR](https://github.com/ethereum/devp2p/issues/43). We can even fit them into the existing protocol using the [ENR extension](https://github.com/ethereum/devp2p/issues/44). \r\n\r\nWe also have a prototype implementation of the indexing mechanism in go-ethereum, and a pretty clear idea about the wire protocol. But nothing is set in stone yet.\r\n\r\nWhat remains to be done is:\r\n\r\n- Writing the wire protocol spec as an EIP.\r\n- Specifying the upgrade procedure. We will likely announce the version through ENR but need a document that says what the key/value pair for that is and how the protocols can coexist on the same UDP port.\r\n\r\nIf you want to start implementing discovery v5 now, it is best to start with ENR and the v4 extension. \r\n\r\n----------------------------------\r\n\r\nRemaining tasks for this tracking issue:\r\n\r\n- [x] Commit initial wire protocol draft\r\n- [x] Commit initial requirements document draft\r\n- [x] Commit topic table spec draft\r\n- [ ] Move ENR specification to this repo\r\n- [ ] Write short explainer document that ties all the specs together",
  "closed_by": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/48/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/devp2p/issues/48/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/423692429",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-423692429",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 423692429,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzY5MjQyOQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-21T23:00:50Z",
    "updated_at": "2018-09-21T23:06:10Z",
    "author_association": "MEMBER",
    "body": "Implementation-tracking issues I know of are:\r\n\r\n- EthereumJS: https://github.com/ethereumjs/ethereumjs-devp2p/pull/42\r\n- Trinity: https://github.com/ethereum/py-evm/issues/429\r\n- Nethermind: https://github.com/tkstanczak/nethermind/issues/86",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/423692429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427126644",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-427126644",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 427126644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzEyNjY0NA==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-04T18:40:28Z",
    "updated_at": "2018-10-04T18:40:47Z",
    "author_association": "MEMBER",
    "body": "@EBGToo [asked](https://github.com/ethereum/py-evm/issues/429#issuecomment-427070775):\r\n\r\n> I should expect current versions of Geth to continue to support v4?  Between v4 and v5 the UDP packet header has changed, incompatibly.  Currently, when connecting with the v4 UDP header (as `packet-header = hash || signature || packet-type`) I end up being thrown a `errBadPrefix` from the v5 code:\r\n>\r\n> ```\r\n>        /// v5\r\n>\tprefix, sig, sigdata := buf[:versionPrefixSize], buf[versionPrefixSize:headSize], buf[headSize:]\r\n>\tif !bytes.Equal(prefix, versionPrefix) {\r\n>\t\treturn errBadPrefix\r\n>\t}\r\n>\r\n>```\r\n>\r\n> (because `versionPrefix` is not a hash...).  I've not enabled v5 discovery on my Geth node.  How is this expected to work?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427126644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427284813",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-427284813",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 427284813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI4NDgxMw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T08:21:08Z",
    "updated_at": "2018-10-05T08:21:08Z",
    "author_association": "MEMBER",
    "body": "Yes, we support v4 discovery in geth and will continue to do so for a long time.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427284813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427462821",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-427462821",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 427462821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzQ2MjgyMQ==",
    "user": {
      "login": "EBGToo",
      "id": 673875,
      "node_id": "MDQ6VXNlcjY3Mzg3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/673875?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EBGToo",
      "html_url": "https://github.com/EBGToo",
      "followers_url": "https://api.github.com/users/EBGToo/followers",
      "following_url": "https://api.github.com/users/EBGToo/following{/other_user}",
      "gists_url": "https://api.github.com/users/EBGToo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EBGToo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EBGToo/subscriptions",
      "organizations_url": "https://api.github.com/users/EBGToo/orgs",
      "repos_url": "https://api.github.com/users/EBGToo/repos",
      "events_url": "https://api.github.com/users/EBGToo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EBGToo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T18:44:15Z",
    "updated_at": "2018-10-05T18:44:15Z",
    "author_association": "NONE",
    "body": "I'm not sure how that is.  I start Geth with --lightserv X --lightpeers Y and the initialization code sets the variable `srv.DiscoveryV5` to `true`.  If my mobile light client attempts to connect for discovery, using V4 with a packet header that starts with 'hash' (not 'versionPrefix') then I get instantly rejected with 'bad prefix'.  So, any LESv1 or LESv2 Geth peer that I connect to for block chain data is going to reject discovery?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427462821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427485831",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-427485831",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 427485831,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzQ4NTgzMQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T20:14:00Z",
    "updated_at": "2018-10-05T20:22:25Z",
    "author_association": "MEMBER",
    "body": "Can you clarify how your client gets rejected exactly? Geth full node with `--lightserv ...` runs both V4 and the prototype version of V5 on the same port. If a packet is deemed invalid by the V4 code, it is passed on to V5. You might be running into this problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427485831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427495351",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-427495351",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 427495351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzQ5NTM1MQ==",
    "user": {
      "login": "EBGToo",
      "id": 673875,
      "node_id": "MDQ6VXNlcjY3Mzg3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/673875?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EBGToo",
      "html_url": "https://github.com/EBGToo",
      "followers_url": "https://api.github.com/users/EBGToo/followers",
      "following_url": "https://api.github.com/users/EBGToo/following{/other_user}",
      "gists_url": "https://api.github.com/users/EBGToo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EBGToo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EBGToo/subscriptions",
      "organizations_url": "https://api.github.com/users/EBGToo/orgs",
      "repos_url": "https://api.github.com/users/EBGToo/repos",
      "events_url": "https://api.github.com/users/EBGToo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EBGToo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T20:52:03Z",
    "updated_at": "2018-10-05T20:52:03Z",
    "author_association": "NONE",
    "body": "Alas, my mistake.  I saw this in the log:\r\n`DEBUG[10-05|13:39:06.820] Bad packet from 127.0.0.1:49619: bad prefix`\r\nand assumed that only my other bootstrap nodes were producing peers.  I stripped down my client to a single bootstrap peer - I see the 'bad prefix' *and also* peers (as you described, via V4 apparently).  Thanks for the response.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/427495351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/434786316",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-434786316",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 434786316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDc4NjMxNg==",
    "user": {
      "login": "adambabik",
      "id": 277870,
      "node_id": "MDQ6VXNlcjI3Nzg3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/277870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adambabik",
      "html_url": "https://github.com/adambabik",
      "followers_url": "https://api.github.com/users/adambabik/followers",
      "following_url": "https://api.github.com/users/adambabik/following{/other_user}",
      "gists_url": "https://api.github.com/users/adambabik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adambabik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adambabik/subscriptions",
      "organizations_url": "https://api.github.com/users/adambabik/orgs",
      "repos_url": "https://api.github.com/users/adambabik/repos",
      "events_url": "https://api.github.com/users/adambabik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adambabik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-31T17:54:04Z",
    "updated_at": "2018-10-31T17:54:04Z",
    "author_association": "NONE",
    "body": "What's the state of Discovery V5 implementation in geth, that is https://github.com/ethereum/go-ethereum/tree/master/p2p/discv5 package? Is it considered ready or subject to refactor/rewrite?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/434786316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450692648",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-450692648",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 450692648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDY5MjY0OA==",
    "user": {
      "login": "cleishm",
      "id": 79651,
      "node_id": "MDQ6VXNlcjc5NjUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/79651?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cleishm",
      "html_url": "https://github.com/cleishm",
      "followers_url": "https://api.github.com/users/cleishm/followers",
      "following_url": "https://api.github.com/users/cleishm/following{/other_user}",
      "gists_url": "https://api.github.com/users/cleishm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cleishm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cleishm/subscriptions",
      "organizations_url": "https://api.github.com/users/cleishm/orgs",
      "repos_url": "https://api.github.com/users/cleishm/repos",
      "events_url": "https://api.github.com/users/cleishm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cleishm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-31T21:39:06Z",
    "updated_at": "2018-12-31T21:39:06Z",
    "author_association": "NONE",
    "body": "A small request for v5 (or later) - can we add a findNodeHash field to the Neighbors packet? Currently, it is impossible to correlate a Neighbors response from a peer to the FindNode request and associated target address. This results in the need to a) avoid any concurrent FindNode requests to a peer and b) use delays to try and ensure that all Neighbors packets have been received before a new FindNode request can be sent. Even then, there is no guarantee that a Neighbors packet responding to a previous request wasn't delayed on the network and received after a new FindNode request has been sent.\r\n\r\nAdding the hash of the FindNode request to the Neighbors response packet(s) would allow these issues to be avoided and simplify implementations.\r\n\r\nPlease let me know if there is a better place to offer this suggestion!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450692648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450848333",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-450848333",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 450848333,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDg0ODMzMw==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T12:08:21Z",
    "updated_at": "2019-01-02T12:08:21Z",
    "author_association": "MEMBER",
    "body": "@cleishm I agree, we need better request/response correlation for all packets.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450848333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450977861",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-450977861",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 450977861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDk3Nzg2MQ==",
    "user": {
      "login": "cleishm",
      "id": 79651,
      "node_id": "MDQ6VXNlcjc5NjUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/79651?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cleishm",
      "html_url": "https://github.com/cleishm",
      "followers_url": "https://api.github.com/users/cleishm/followers",
      "following_url": "https://api.github.com/users/cleishm/following{/other_user}",
      "gists_url": "https://api.github.com/users/cleishm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cleishm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cleishm/subscriptions",
      "organizations_url": "https://api.github.com/users/cleishm/orgs",
      "repos_url": "https://api.github.com/users/cleishm/repos",
      "events_url": "https://api.github.com/users/cleishm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cleishm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T20:37:22Z",
    "updated_at": "2019-01-02T20:37:22Z",
    "author_association": "NONE",
    "body": "@fjl: Right. I now see some work toward that in your p2p-drafts repo: https://github.com/fjl/p2p-drafts/blob/master/discv5-packets.md#neighbors-packet-0x03\r\n\r\nWhat is the state of these drafts? I see some of the implementation in go-ethereum already?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/450977861/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/468166117",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-468166117",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 468166117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODE2NjExNw==",
    "user": {
      "login": "FrankSzendzielarz",
      "id": 33515470,
      "node_id": "MDQ6VXNlcjMzNTE1NDcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/33515470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FrankSzendzielarz",
      "html_url": "https://github.com/FrankSzendzielarz",
      "followers_url": "https://api.github.com/users/FrankSzendzielarz/followers",
      "following_url": "https://api.github.com/users/FrankSzendzielarz/following{/other_user}",
      "gists_url": "https://api.github.com/users/FrankSzendzielarz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FrankSzendzielarz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FrankSzendzielarz/subscriptions",
      "organizations_url": "https://api.github.com/users/FrankSzendzielarz/orgs",
      "repos_url": "https://api.github.com/users/FrankSzendzielarz/repos",
      "events_url": "https://api.github.com/users/FrankSzendzielarz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FrankSzendzielarz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-28T07:23:41Z",
    "updated_at": "2019-02-28T07:23:41Z",
    "author_association": "MEMBER",
    "body": "@cleishm Please see discv5 folder. A test implementation is underway. Things are still in flux a bit because of Eth 2.0 requirements.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/468166117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/481657755",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-481657755",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 481657755,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTY1Nzc1NQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-10T11:49:45Z",
    "updated_at": "2019-04-10T11:49:45Z",
    "author_association": "MEMBER",
    "body": "WIP Go implementation is here: https://github.com/fjl/go-ethereum/tree/discover-v5/p2p/discover",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/481657755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/482079091",
    "html_url": "https://github.com/ethereum/devp2p/issues/48#issuecomment-482079091",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/48",
    "id": 482079091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MjA3OTA5MQ==",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-11T11:37:17Z",
    "updated_at": "2019-04-11T11:37:17Z",
    "author_association": "MEMBER",
    "body": "Closing this in favor of the [Discovery v5 issue milestone](https://github.com/ethereum/devp2p/milestone/2)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/482079091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

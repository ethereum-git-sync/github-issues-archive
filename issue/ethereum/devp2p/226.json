{
  "url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
  "repository_url": "https://api.github.com/repos/ethereum/devp2p",
  "labels_url": "https://api.github.com/repos/ethereum/devp2p/issues/226/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/devp2p/issues/226/comments",
  "events_url": "https://api.github.com/repos/ethereum/devp2p/issues/226/events",
  "html_url": "https://github.com/ethereum/devp2p/issues/226",
  "id": 1649010155,
  "node_id": "I_kwDOAcJRYs5iSeXr",
  "number": 226,
  "title": "discv5: protocol version v5.2",
  "user": {
    "login": "fjl",
    "id": 6915,
    "node_id": "MDQ6VXNlcjY5MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fjl",
    "html_url": "https://github.com/fjl",
    "followers_url": "https://api.github.com/users/fjl/followers",
    "following_url": "https://api.github.com/users/fjl/following{/other_user}",
    "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
    "organizations_url": "https://api.github.com/users/fjl/orgs",
    "repos_url": "https://api.github.com/users/fjl/repos",
    "events_url": "https://api.github.com/users/fjl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fjl/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/devp2p/milestones/3",
    "html_url": "https://github.com/ethereum/devp2p/milestone/3",
    "labels_url": "https://api.github.com/repos/ethereum/devp2p/milestones/3/labels",
    "id": 5938443,
    "node_id": "MDk6TWlsZXN0b25lNTkzODQ0Mw==",
    "number": 3,
    "title": "Discovery v5.2",
    "description": null,
    "creator": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 7,
    "closed_issues": 0,
    "state": "open",
    "created_at": "2020-10-01T12:45:21Z",
    "updated_at": "2023-03-31T09:19:42Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 6,
  "created_at": "2023-03-31T09:19:37Z",
  "updated_at": "2023-05-27T18:35:43Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "This is a tracking issue for the next discv5 protocol version.\r\n\r\nDevelopment of Discovery v5.2 will happen in the [discv5-v5.2 branch](https://github.com/ethereum/devp2p/pull/227). To contribute, please send PRs to that branch instead of the main branch.\r\n\r\n### Spec changes\r\n\r\nHere is the list of spec changes expected for the new protocol version:\r\n\r\n- [x] Update the protocol version number.\r\n- [x] Remove description of topic index and related messages. These will be brought back later (likely in v5.3), but should be removed for now, since they are not part of the actively-used protocol.\r\n- [ ] Add spec text to define handling of protocol version upgrades.\r\n   - It's not yet clear how the upgrade will work. The protocol version will increase, and some implementations might reject packets with a mismatching `version` even though the spec doesn't say they should. \r\n   - We could add spec text to the effect that protocol versions higher than the local version should be dealt with by responding with the local version (unless the packet can't be decoded).\r\n   - Might be best to handle this upgrade with an ENR key. I claim dibs on key `d5`.\r\n- [x] Add the NAT hole punching protocol messages. #225 #207\r\n- [ ] Define/explain the packet types (message packet, handshake packet, whoareyou packet etc.) better.\r\n   - Specifically, for the NAT hole punching scheme, there is a need to introduce a new packet type that does not trigger a handshake in case the packet cannot be decrypted. The new type can also be used for response messages like NODES, TALKRESP, etc.\r\n- [ ] Add more text around attack countermeasures #161\r\n   - The plan is to add this as an informational section, as a recommendation for implementers.\r\n- [ ] Change `id-nonce` handling in handshake packets. #164\r\n- [ ] Find a way to integrate Portal Network's use of the discv5 wire protocol in the spec. #192 #229\r\n   - There might not be any spec changes resulting from this, I just want to make sure Portal Network can work with v5.2 as-is without depending on spec/implementation mods.\r\n- [ ] Add a Changelog section to discv5.md.\r\n\r\n### Implementations\r\n\r\n*collect information about v5.2 implementation status here*\r\n\r\n### Interop testing\r\n\r\n- [ ] enable discv5 tests in [hive devp2p simulator](https://github.com/ethereum/hive/tree/master/simulators/devp2p)\r\n- [ ] add tests for protocol version upgrade\r\n- [ ] add tests for NAT hole punching messages\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/226/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/devp2p/issues/226/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1491633002",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1491633002",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1491633002,
    "node_id": "IC_kwDOAcJRYs5Y6INq",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-31T09:35:23Z",
    "updated_at": "2023-03-31T16:46:49Z",
    "author_association": "MEMBER",
    "body": "If implementers feel like it, we could also explore adding support for `ed25519` node identities in v5.2. It'd be great to have an alternative identity system just to test the pipeline of shipping new ones, in case it has to be done quickly someday.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1491633002/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1492258985",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1492258985",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1492258985,
    "node_id": "IC_kwDOAcJRYs5Y8hCp",
    "user": {
      "login": "ppopth",
      "id": 631508,
      "node_id": "MDQ6VXNlcjYzMTUwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/631508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppopth",
      "html_url": "https://github.com/ppopth",
      "followers_url": "https://api.github.com/users/ppopth/followers",
      "following_url": "https://api.github.com/users/ppopth/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppopth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppopth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppopth/subscriptions",
      "organizations_url": "https://api.github.com/users/ppopth/orgs",
      "repos_url": "https://api.github.com/users/ppopth/repos",
      "events_url": "https://api.github.com/users/ppopth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppopth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-31T16:50:49Z",
    "updated_at": "2023-03-31T16:50:49Z",
    "author_association": "MEMBER",
    "body": "Why not v5.1? Is the version number 5.1 used?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1492258985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1492264314",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1492264314",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1492264314,
    "node_id": "IC_kwDOAcJRYs5Y8iV6",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-31T16:55:53Z",
    "updated_at": "2023-03-31T16:55:53Z",
    "author_association": "MEMBER",
    "body": "Yes, v5.1 is the current protocol version.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1492264314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1558423717",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1558423717",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1558423717,
    "node_id": "IC_kwDOAcJRYs5c46il",
    "user": {
      "login": "uink45",
      "id": 79078981,
      "node_id": "MDQ6VXNlcjc5MDc4OTgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/79078981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/uink45",
      "html_url": "https://github.com/uink45",
      "followers_url": "https://api.github.com/users/uink45/followers",
      "following_url": "https://api.github.com/users/uink45/following{/other_user}",
      "gists_url": "https://api.github.com/users/uink45/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/uink45/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/uink45/subscriptions",
      "organizations_url": "https://api.github.com/users/uink45/orgs",
      "repos_url": "https://api.github.com/users/uink45/repos",
      "events_url": "https://api.github.com/users/uink45/events{/privacy}",
      "received_events_url": "https://api.github.com/users/uink45/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-23T02:50:29Z",
    "updated_at": "2023-05-23T02:50:29Z",
    "author_association": "NONE",
    "body": "Hey @fjl, we are currently in the process of implementing [Discv5 (v5.1) in C#](https://github.com/Pier-Two/Lantern.Discv5) and wanted to know if the components (advertisement, and message types) related to topics should be left out for now.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1558423717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1558795775",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1558795775",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1558795775,
    "node_id": "IC_kwDOAcJRYs5c6VX_",
    "user": {
      "login": "fjl",
      "id": 6915,
      "node_id": "MDQ6VXNlcjY5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjl",
      "html_url": "https://github.com/fjl",
      "followers_url": "https://api.github.com/users/fjl/followers",
      "following_url": "https://api.github.com/users/fjl/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjl/subscriptions",
      "organizations_url": "https://api.github.com/users/fjl/orgs",
      "repos_url": "https://api.github.com/users/fjl/repos",
      "events_url": "https://api.github.com/users/fjl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-23T08:30:38Z",
    "updated_at": "2023-05-23T08:30:38Z",
    "author_association": "MEMBER",
    "body": "Yes, they should be left out. The topic advertisement mechanism is not ready yet and I have removed it in v5.2",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1558795775/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1565639537",
    "html_url": "https://github.com/ethereum/devp2p/issues/226#issuecomment-1565639537",
    "issue_url": "https://api.github.com/repos/ethereum/devp2p/issues/226",
    "id": 1565639537,
    "node_id": "IC_kwDOAcJRYs5dUcNx",
    "user": {
      "login": "divagant-martian",
      "id": 26765164,
      "node_id": "MDQ6VXNlcjI2NzY1MTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/26765164?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/divagant-martian",
      "html_url": "https://github.com/divagant-martian",
      "followers_url": "https://api.github.com/users/divagant-martian/followers",
      "following_url": "https://api.github.com/users/divagant-martian/following{/other_user}",
      "gists_url": "https://api.github.com/users/divagant-martian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/divagant-martian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/divagant-martian/subscriptions",
      "organizations_url": "https://api.github.com/users/divagant-martian/orgs",
      "repos_url": "https://api.github.com/users/divagant-martian/repos",
      "events_url": "https://api.github.com/users/divagant-martian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/divagant-martian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-27T18:35:42Z",
    "updated_at": "2023-05-27T18:35:42Z",
    "author_association": "NONE",
    "body": "@fjl https://github.com/ethereum/devp2p/pull/231 should probably included in the task list",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/devp2p/issues/comments/1565639537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

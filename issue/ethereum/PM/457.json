{
  "url": "https://api.github.com/repos/ethereum/pm/issues/457",
  "repository_url": "https://api.github.com/repos/ethereum/pm",
  "labels_url": "https://api.github.com/repos/ethereum/pm/issues/457/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/pm/issues/457/comments",
  "events_url": "https://api.github.com/repos/ethereum/pm/issues/457/events",
  "html_url": "https://github.com/ethereum/pm/issues/457",
  "id": 1102612957,
  "node_id": "I_kwDOBCfO0M5BuInd",
  "number": 457,
  "title": "Tooling support for `DIFFICULTY` to `RANDOM` change",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-01-14T00:02:18Z",
  "updated_at": "2022-01-24T08:31:04Z",
  "closed_at": "2022-01-21T19:02:14Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "There's the question of how we can make sure that external tools such as disassemblers and debuggers can properly handle the change of opcode `0x44` from `DIFFICULTY` to `RANDOM` ([EIP-4399](https://eips.ethereum.org/EIPS/eip-4399)), as I mentioned [here](https://ethereum-magicians.org/t/eip-4399-supplant-difficulty-opcode-with-random/7368/12?u=haltman-at).",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/pm/issues/457/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/pm/issues/457/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1012835050",
    "html_url": "https://github.com/ethereum/pm/issues/457#issuecomment-1012835050",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/457",
    "id": 1012835050,
    "node_id": "IC_kwDOBCfO0M48XqLq",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-14T07:11:25Z",
    "updated_at": "2022-01-14T07:11:25Z",
    "author_association": "MEMBER",
    "body": "What potential issues with disassemblers related to this change do you see? Is this only a matter of representing the name of the opcode and the data it returns after the Merge? From my perspective representation of the return value should merely be the same.\r\n\r\ncc @axic",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1012835050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1012868879",
    "html_url": "https://github.com/ethereum/pm/issues/457#issuecomment-1012868879",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/457",
    "id": 1012868879,
    "node_id": "IC_kwDOBCfO0M48XycP",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-14T07:47:26Z",
    "updated_at": "2022-01-14T07:47:26Z",
    "author_association": "MEMBER",
    "body": "It should not pose any issue to compilers/disassemblers as long as the number of inputs/outputs do not change. It may be annoying to see `DIFFICULTY` as a text instead of `RANDOM`.\r\n\r\nIt can be changed similar to the `SHA3` renaming, where different tools changed it at different times.\r\n\r\nHowever it is slightly more annoying as now tools would need to know what EVM version (protocol update) is being used in order to display the correct name, so I would imagine tools choosing one or the other name.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1012868879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1015863756",
    "html_url": "https://github.com/ethereum/pm/issues/457#issuecomment-1015863756",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/457",
    "id": 1015863756,
    "node_id": "IC_kwDOBCfO0M48jNnM",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T21:46:59Z",
    "updated_at": "2022-01-18T21:46:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "As I see, the issues are as follows:\r\n\r\n1. Unlike the renaming of `SELFDESTRUCT`, and other similar proposed renamings, this is not merely a change of name but also a change of function.  As such, presenting the wrong name could be misleading; this is the reason I am somewhat uncomfortable with simply picking one of the two names, because it would not correctly describe the function in the other cases.\r\n2. Displaying the correct name requires knowing the EVM version, information which is not always available.\r\n3. If the output of such a tool is to be fed into something else, it may not be acceptable to use a hybrid like `DIFFICULTY/RANDOM`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1015863756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1018780183",
    "html_url": "https://github.com/ethereum/pm/issues/457#issuecomment-1018780183",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/457",
    "id": 1018780183,
    "node_id": "IC_kwDOBCfO0M48uVoX",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T19:02:14Z",
    "updated_at": "2022-01-21T19:02:14Z",
    "author_association": "MEMBER",
    "body": "We agreed on ACD130 to not make changes at the protocol level to address this issue. Closing for now. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1018780183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1019840509",
    "html_url": "https://github.com/ethereum/pm/issues/457#issuecomment-1019840509",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/457",
    "id": 1019840509,
    "node_id": "IC_kwDOBCfO0M48yYf9",
    "user": {
      "login": "mkalinin",
      "id": 1892772,
      "node_id": "MDQ6VXNlcjE4OTI3NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1892772?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalinin",
      "html_url": "https://github.com/mkalinin",
      "followers_url": "https://api.github.com/users/mkalinin/followers",
      "following_url": "https://api.github.com/users/mkalinin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalinin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalinin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalinin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalinin/orgs",
      "repos_url": "https://api.github.com/users/mkalinin/repos",
      "events_url": "https://api.github.com/users/mkalinin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalinin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T08:31:04Z",
    "updated_at": "2022-01-24T08:31:04Z",
    "author_association": "MEMBER",
    "body": "In addition:\r\n* Assuming there is a negligible number of cases where `DIFFICULTY` opcode is required to return `difficulty` property, this opcode may be renamed to `RANDOM` disregarding the context; the only change in this case would be the size of the return value, not the semantics. Though, not sure whether this assumption is held or not.\r\n* Theoretically, `RANDOM` may be discerned by the size of the output (> `2**64`). But it might be impractical as decompilers not necessarily execute the code and have access to the return value.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1019840509/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

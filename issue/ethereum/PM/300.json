{
  "url": "https://api.github.com/repos/ethereum/pm/issues/300",
  "repository_url": "https://api.github.com/repos/ethereum/pm",
  "labels_url": "https://api.github.com/repos/ethereum/pm/issues/300/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/pm/issues/300/comments",
  "events_url": "https://api.github.com/repos/ethereum/pm/issues/300/events",
  "html_url": "https://github.com/ethereum/pm/issues/300",
  "id": 857264142,
  "node_id": "MDU6SXNzdWU4NTcyNjQxNDI=",
  "number": 300,
  "title": "EIP-3436: Expanded Clique Block Choice Rule",
  "user": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-04-13T19:38:06Z",
  "updated_at": "2023-03-20T18:49:58Z",
  "closed_at": "2021-04-19T17:31:42Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "2-5 minutes to call for comments on EIP-3436, which proposes fork choice rules for clique.\r\n\r\nEIP - https://eips.ethereum.org/EIPS/eip-3436\r\n\r\nWithout these rules a clique network can deadlock with as few as 1 missing validator when all validators have seen all contested blocks. Goerli did so twice in early March prior to it's Berlin upgrade.\r\n\r\nGeth has the second rule already implemented (prefer the shorter chain) but that only addresses one of the early March deadlocks, as the second deadlock had equal height on both forks.  This proposes two more clique specific rules that should keep validators from deadlocking and provides an absolute ordering in the final case (lowest hash).\r\n\r\nThis does not impact any current or future hard fork for mainnet, so it can be prioritized appropriately.  The goal is to move it into final call if there are no counter-proposals.",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/pm/issues/300/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/pm/issues/300/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/819008967",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-819008967",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 819008967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTAwODk2Nw==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-13T19:49:56Z",
    "updated_at": "2021-04-13T19:49:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@timbeiko I cannot add the \"topic\" label or edit any of the stuff on the side.  Are the permissions cranked up for this?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/819008967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/819017949",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-819017949",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 819017949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTAxNzk0OQ==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-13T20:05:09Z",
    "updated_at": "2021-04-13T20:07:03Z",
    "author_association": "MEMBER",
    "body": "@shemnon added to the agenda. I don't think non-members of the repo can add labels. I'll update the README. Thanks! \r\n\r\nUpdate: [done](https://github.com/ethereum/pm/commit/51a55adeafe3c36551c7db01f96f8f39c94b76aa). ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/819017949/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/821128414",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-821128414",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 821128414,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTEyODQxNA==",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-16T12:06:41Z",
    "updated_at": "2021-04-16T12:06:41Z",
    "author_association": "NONE",
    "body": "makes sense, it is needed",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/821128414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/822646331",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-822646331",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 822646331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjY0NjMzMQ==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T17:31:42Z",
    "updated_at": "2021-04-19T17:31:42Z",
    "author_association": "MEMBER",
    "body": "Closing given this was discussed on ACD 110. @shemnon if you want to add links for further discussion here, I think that could be helpful. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/822646331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1476626494",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-1476626494",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 1476626494,
    "node_id": "IC_kwDOBCfO0M5YA4g-",
    "user": {
      "login": "TbLtzk",
      "id": 8383712,
      "node_id": "MDQ6VXNlcjgzODM3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8383712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TbLtzk",
      "html_url": "https://github.com/TbLtzk",
      "followers_url": "https://api.github.com/users/TbLtzk/followers",
      "following_url": "https://api.github.com/users/TbLtzk/following{/other_user}",
      "gists_url": "https://api.github.com/users/TbLtzk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TbLtzk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TbLtzk/subscriptions",
      "organizations_url": "https://api.github.com/users/TbLtzk/orgs",
      "repos_url": "https://api.github.com/users/TbLtzk/repos",
      "events_url": "https://api.github.com/users/TbLtzk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TbLtzk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-20T17:11:05Z",
    "updated_at": "2023-03-20T17:11:05Z",
    "author_association": "NONE",
    "body": "Is it possible to reopen and rediscuss this? We are using a modified clique consensus for our [Q blockchain](https://q.org). We would like to implement deterministic fork choice as proposed. We can do it in our client only, but\r\n1. we prefer to change it here as contribution, but also for peer review purpose\r\n2. also, the rationale for _not doing_ the proposed changed is not available. Maybe we overlook something, but deterministic fork choice appears very desireable",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1476626494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1476761324",
    "html_url": "https://github.com/ethereum/pm/issues/300#issuecomment-1476761324",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/300",
    "id": 1476761324,
    "node_id": "IC_kwDOBCfO0M5YBZbs",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-20T18:49:58Z",
    "updated_at": "2023-03-20T18:49:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Besu implements the EIP as written - https://github.com/hyperledger/besu/pull/2084 \r\n\r\nI see Q is a Geth derivitive.  Geth should implement the first and second steps already, so it's just an issue of step 3, which is intended to prevent \"hash mining\" for the final step.  (a dedicated forker could keep generating blocks to ensure their validator's block is the next, which may matter in competitive MEV environments).  Step 3 will be the most work of the 4 for geth because I don't think the validator and position in the validator list is wired into their fork choice logic.  I think step 4 is fairly easy for geth derivities to implement.\r\n\r\nGiven that, I would be open to alternatives for step 3 that reduce the off-chain gamification but make it more implementable for Geth.  If we finalized the EIP with an alterative rule I would go back and update Besu's implementation.\r\n\r\nThe eth-magicians forum is probably the best place to have this discussion - https://ethereum-magicians.org/t/eip-3436-expanded-clique-block-choice-rule/5809\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/1476761324/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

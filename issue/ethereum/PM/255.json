{
  "url": "https://api.github.com/repos/ethereum/pm/issues/255",
  "repository_url": "https://api.github.com/repos/ethereum/pm",
  "labels_url": "https://api.github.com/repos/ethereum/pm/issues/255/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/pm/issues/255/comments",
  "events_url": "https://api.github.com/repos/ethereum/pm/issues/255/events",
  "html_url": "https://github.com/ethereum/pm/issues/255",
  "id": 817386767,
  "node_id": "MDU6SXNzdWU4MTczODY3Njc=",
  "number": 255,
  "title": "Proposal to include EIP 3298 (removal of refunds) in London",
  "user": {
    "login": "vbuterin",
    "id": 2230894,
    "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vbuterin",
    "html_url": "https://github.com/vbuterin",
    "followers_url": "https://api.github.com/users/vbuterin/followers",
    "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
    "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
    "organizations_url": "https://api.github.com/users/vbuterin/orgs",
    "repos_url": "https://api.github.com/users/vbuterin/repos",
    "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vbuterin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-26T14:09:11Z",
  "updated_at": "2021-03-29T15:41:29Z",
  "closed_at": "2021-03-19T16:12:33Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "EIP here: https://github.com/ethereum/EIPs/pull/3298\r\n\r\n## Simple Summary\r\n\r\nRemove gas refunds for SSTORE and SELFDESTRUCT.\r\n\r\n## Motivation\r\n\r\nGas refunds for SSTORE and SELFDESTRUCT were originally introduced to motivate application developers to write applications that practice \"good state hygiene\", clearing storage slots and contracts that are no longer needed. However, they are not widely used for this, and poor state hygiene continues to be the norm. It is now widely accepted that the only solution to state growth is some form of [statelessness or state expiry](https://hackmd.io/@HWeNw8hNRimMm2m2GH56Cw/state_size_management), and if such a solution is implemented, then disused storage slots and contracts would start to be ignored automatically.\r\n\r\nGas refunds additionally have multiple harmful consequences:\r\n\r\n* Refunds give rise to [GasToken](https://gastoken.io/). GasToken has benefits in moving gas space from low-fee periods to high-fee periods, but it also has downsides to the network, particularly in exacerbating state size (as state slots are effectively used as a \"battery\" to save up gas) and inefficiently clogging blockchain gas usage\r\n* Refunds increase block size variance. The theoretical maximum amount of actual gas consumed in a block is nearly twice the on-paper gas limit (as refunds add gas space for subsequent transactions in a block, though refunds are capped at 50% of a transaction's gas used). This is [not fatal](https://notes.ethereum.org/@vbuterin/eip_1559_spikes), but is still undesirable, especially given that refunds can be used to maintain 2x usage spikes for far longer than EIP 1559 can.",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/pm/issues/255/reactions",
    "total_count": 25,
    "+1": 11,
    "-1": 0,
    "laugh": 0,
    "hooray": 2,
    "confused": 0,
    "heart": 3,
    "rocket": 2,
    "eyes": 7
  },
  "timeline_url": "https://api.github.com/repos/ethereum/pm/issues/255/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/789215301",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-789215301",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 789215301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4OTIxNTMwMQ==",
    "user": {
      "login": "vbuterin",
      "id": 2230894,
      "node_id": "MDQ6VXNlcjIyMzA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2230894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vbuterin",
      "html_url": "https://github.com/vbuterin",
      "followers_url": "https://api.github.com/users/vbuterin/followers",
      "following_url": "https://api.github.com/users/vbuterin/following{/other_user}",
      "gists_url": "https://api.github.com/users/vbuterin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vbuterin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vbuterin/subscriptions",
      "organizations_url": "https://api.github.com/users/vbuterin/orgs",
      "repos_url": "https://api.github.com/users/vbuterin/repos",
      "events_url": "https://api.github.com/users/vbuterin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vbuterin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-02T21:05:57Z",
    "updated_at": "2021-03-02T21:05:57Z",
    "author_association": "MEMBER",
    "body": "Some possible alternative options to try to address some people's concerns around breaking economics for within-transaction approvals and other situations.\r\n\r\n#### Simpler solution\r\n\r\nIn the case where `original = new = 0 != current`, SSTORE only deducts `SLOAD_GAS` (cold read costs would continue to be applied on top, so ~2200 gas would be charged in total). This adds some incentive to set a storage value back to zero instead of nonzero.\r\n\r\n#### More comprehensive solution\r\n\r\nReplace the \"refund\" counter with two counters: (i) a `new_storage_slots_filled` counter that increments every time a storage slot goes from zero to nonzero, and (ii) a `storage_slots_cleared` counter that increments every time a storage slot goes from nonzero to zero. At the end of a transaction, refund `15000 * max(storage_slots_cleared - new_storage_slots_filled, 0)` gas. So every 15000 gas refunded must be matched by 15000 gas storage-increase gas paid, and so the maximum amount of gas _spent on execution_ would not be able to exceed the gas limit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/789215301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/792970432",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-792970432",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 792970432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjk3MDQzMg==",
    "user": {
      "login": "Genysys",
      "id": 33553806,
      "node_id": "MDQ6VXNlcjMzNTUzODA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/33553806?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Genysys",
      "html_url": "https://github.com/Genysys",
      "followers_url": "https://api.github.com/users/Genysys/followers",
      "following_url": "https://api.github.com/users/Genysys/following{/other_user}",
      "gists_url": "https://api.github.com/users/Genysys/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Genysys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Genysys/subscriptions",
      "organizations_url": "https://api.github.com/users/Genysys/orgs",
      "repos_url": "https://api.github.com/users/Genysys/repos",
      "events_url": "https://api.github.com/users/Genysys/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Genysys/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-08T18:23:08Z",
    "updated_at": "2021-03-08T18:23:08Z",
    "author_association": "NONE",
    "body": "I think an under appreciate benefit of removing this opcode is that it would make gas easier to estimate with most clients / wallets.\r\n\r\nMy intuition behind this is that most clients do not check for refunds, as that context isnt available to the RPC endpoint.\r\n\r\nFor reference , [here is how Geth implements it](https://github.com/ethereum/go-ethereum/blob/bbfb1e4008a359a8b57ec654330c0e674623e52f/internal/ethapi/api.go#L944-L1051)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/792970432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/793028363",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-793028363",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 793028363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzAyODM2Mw==",
    "user": {
      "login": "saaqibz",
      "id": 2548078,
      "node_id": "MDQ6VXNlcjI1NDgwNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2548078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saaqibz",
      "html_url": "https://github.com/saaqibz",
      "followers_url": "https://api.github.com/users/saaqibz/followers",
      "following_url": "https://api.github.com/users/saaqibz/following{/other_user}",
      "gists_url": "https://api.github.com/users/saaqibz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saaqibz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saaqibz/subscriptions",
      "organizations_url": "https://api.github.com/users/saaqibz/orgs",
      "repos_url": "https://api.github.com/users/saaqibz/repos",
      "events_url": "https://api.github.com/users/saaqibz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saaqibz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-08T19:50:57Z",
    "updated_at": "2021-03-08T19:51:12Z",
    "author_association": "NONE",
    "body": "@Genysys That is a definitely a benefit, but I wonder if you could get that in a different way. E.g., defi gas futures contracts. The downsides from the gas token exploit seems to outweigh this benefit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/793028363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/793090735",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-793090735",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 793090735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzA5MDczNQ==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-08T21:26:14Z",
    "updated_at": "2021-03-08T21:26:14Z",
    "author_association": "MEMBER",
    "body": "@Genysys I'm not sure I understand your comment. This EIP doesn't remove the entire opcode, just the refund that gets sent back at the end of execution. It is a step in that direction, though. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/793090735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/796347128",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-796347128",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 796347128,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NjM0NzEyOA==",
    "user": {
      "login": "saaqibz",
      "id": 2548078,
      "node_id": "MDQ6VXNlcjI1NDgwNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2548078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saaqibz",
      "html_url": "https://github.com/saaqibz",
      "followers_url": "https://api.github.com/users/saaqibz/followers",
      "following_url": "https://api.github.com/users/saaqibz/following{/other_user}",
      "gists_url": "https://api.github.com/users/saaqibz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saaqibz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saaqibz/subscriptions",
      "organizations_url": "https://api.github.com/users/saaqibz/orgs",
      "repos_url": "https://api.github.com/users/saaqibz/repos",
      "events_url": "https://api.github.com/users/saaqibz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saaqibz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-11T01:16:29Z",
    "updated_at": "2021-03-11T01:16:29Z",
    "author_association": "NONE",
    "body": "I think @Genysys is talking about the economic incentive to remove opcode not the feature itself.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/796347128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/802946281",
    "html_url": "https://github.com/ethereum/pm/issues/255#issuecomment-802946281",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/255",
    "id": 802946281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMjk0NjI4MQ==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-19T16:12:33Z",
    "updated_at": "2021-03-19T16:12:33Z",
    "author_association": "MEMBER",
    "body": "Closing this as 3403 was noted as the prefered EIP on ACD108. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/802946281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

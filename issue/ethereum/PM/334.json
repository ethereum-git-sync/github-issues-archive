{
  "url": "https://api.github.com/repos/ethereum/pm/issues/334",
  "repository_url": "https://api.github.com/repos/ethereum/pm",
  "labels_url": "https://api.github.com/repos/ethereum/pm/issues/334/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/pm/issues/334/comments",
  "events_url": "https://api.github.com/repos/ethereum/pm/issues/334/events",
  "html_url": "https://github.com/ethereum/pm/issues/334",
  "id": 916378239,
  "node_id": "MDU6SXNzdWU5MTYzNzgyMzk=",
  "number": 334,
  "title": "London JSON RPC Specification",
  "user": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-06-09T16:08:05Z",
  "updated_at": "2021-06-11T15:43:59Z",
  "closed_at": "2021-06-11T15:43:59Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "There are a few outstanding things to figure out w.r.t. JSON RPC for London. [This document](https://notes.ethereum.org/@timbeiko/london-json-rpc) details them. \r\n\r\nSpecifically, the three things we need to get a common solution for are:\r\n  1. `eth_call` and how it deals with `BASEFEE` and `GASPRICE` \r\n  1. Adding `effectiveGasPrice` to `eth_getTransactionReceipt`, see https://github.com/ethereum/eth1.0-specs/pull/206\r\n  1. [`eth_maxPriorityFeePerGas`](https://github.com/ethereum/eth1.0-specs/pull/201) vs. [`feeHistory`](https://gist.github.com/zsfelfoldi/473e29106d38525de6b4413e2ebcddf1)\r\n     * Relevant: [Gas Price Oracle](https://github.com/ethereum/pm/issues/328#issuecomment-853234014) \r\n         \r\nIt would be great if clients can share their thoughts on this here prior to the call so that we can spend the call time going over the most contentious & hard to spec things. ",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/pm/issues/334/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/pm/issues/334/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/858515187",
    "html_url": "https://github.com/ethereum/pm/issues/334#issuecomment-858515187",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/334",
    "id": 858515187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODUxNTE4Nw==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-10T10:42:38Z",
    "updated_at": "2021-06-10T10:42:38Z",
    "author_association": "NONE",
    "body": "Somewhat minor, but it would also be great if we could agree on what to return for the `baseFeePerGas` fields when a pre-London block is fetched. In my opinion, it should return a block without that field, but notice that pre-Berlin legacy transactions include a `type` field with value 0 (at least in geth), so the behavior here is not obvious (you could argue that pre-London blocks should have a 0 `baseFeePerGas` instead of omitting that field).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/858515187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/859516067",
    "html_url": "https://github.com/ethereum/pm/issues/334#issuecomment-859516067",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/334",
    "id": 859516067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTUxNjA2Nw==",
    "user": {
      "login": "sunce86",
      "id": 19595624,
      "node_id": "MDQ6VXNlcjE5NTk1NjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19595624?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sunce86",
      "html_url": "https://github.com/sunce86",
      "followers_url": "https://api.github.com/users/sunce86/followers",
      "following_url": "https://api.github.com/users/sunce86/following{/other_user}",
      "gists_url": "https://api.github.com/users/sunce86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sunce86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sunce86/subscriptions",
      "organizations_url": "https://api.github.com/users/sunce86/orgs",
      "repos_url": "https://api.github.com/users/sunce86/repos",
      "events_url": "https://api.github.com/users/sunce86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sunce86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-11T11:30:00Z",
    "updated_at": "2021-06-11T11:30:00Z",
    "author_association": "NONE",
    "body": "For point 1: eth_call and how it deals with BASEFEE and GASPRICE\r\n\r\nI'm in favor of adding additional optional field called \"base fee\" to the eth_call parameter list. \r\n\r\nIn my opinion, eth_call should be used (by default) to analyze what would happen \"in reality\". Therefore, you need to:\r\n1. Define gas price/maxFeePerGas&maxPriorityFeePerGas because you do that in reality also.\r\n2. Expect that base fee is taken from the block header specified in parameter list (or from default block header if block is not specified in eth_call parameter list). \r\n\r\nIf you want to diverge from this and analyze tx under different conditions, you need to provide those different conditions in parameter list. In case of gas_price/maxFeePerGas&maxPriorityFeePerGas, if you want them to be 0, then omit them in parameter list or set to 0 explicitly. In case of base fee, if you want to ignore the base fee from block header, then specify that in parameter list (set base fee to 0).\r\n\r\nAdding base fee field is a clean way for users to intuitively better understand how the function works by looking only at the eth_call function signature.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/859516067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/pm/issues/comments/859670312",
    "html_url": "https://github.com/ethereum/pm/issues/334#issuecomment-859670312",
    "issue_url": "https://api.github.com/repos/ethereum/pm/issues/334",
    "id": 859670312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTY3MDMxMg==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-11T15:43:59Z",
    "updated_at": "2021-06-11T15:43:59Z",
    "author_association": "MEMBER",
    "body": "On ACD115, we agreed to the following: \r\n\r\n1. For `eth_call`, follow geth's behaviour as per [this PR](https://github.com/ethereum/go-ethereum/pull/23027) unless anyone finds an issue with it;\r\n2. Have the `effectiveGasPrice` in the transaction receipt as per ethereum/eth1.0-specs#206 \r\n3. Go with the `feeHistory` API by default, but add a cap to the amount of blocks it returns (to work better with light clients). @zsfelfoldi will modify the gist and open a PR against the JSON RPC spec once done. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/pm/issues/comments/859670312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

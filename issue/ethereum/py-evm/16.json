{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/16",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/16/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/16/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/16/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/16",
  "id": 238902574,
  "node_id": "MDU6SXNzdWUyMzg5MDI1NzQ=",
  "number": 16,
  "title": "Block and Header validation",
  "user": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-06-27T16:04:17Z",
  "updated_at": "2017-07-18T12:51:07Z",
  "closed_at": "2017-07-18T12:51:07Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The full validation rules from the yellow paper need to be added for blocks and headers.  Convention thus far for validation is as follows.\r\n\r\n1. Validation or RLP objects is separated into local validation and evm aware validation.\r\n    - local validation entails things that can be validated from within the context of the object such as making sure that all fields are of the correct type and within the established ranges.\r\n    - evm aware validation is for everything else, such as checking that a transaction's nonce is greater than the current nonce from the evm state.\r\n2. Local validation is done as a method on the object itself `RLPObject.validate()`\r\n3. EVM aware validation is done as a method on the `VM` class.  Typically the default implementation should throw a `NotImplementedError` and the *real* validation logic should be setup only for the mainnet VM classes.\r\n\r\nThe block and header validation rules should be pulled from the yellow paper: https://ethereum.github.io/yellowpaper/\r\n\r\nIn short they are:\r\n\r\n* All fields on the `BlockHeader` are of the appropriate type and within range.\r\n* All fields on the `Block` are of the appropriate type and within range.\r\n* `BlockHeader.state_root` exists within the `db` (evm aware)\r\n* `BlockHeader.uncles_hash` is equal to the rlp encoded list of uncles from the block (local)\r\n* `BlockHeader.transactions_hash` is equal to the root hash of the `Block.transaction_db`. (local)\r\n* `BlockHeader.receipts_hash` is equal to the root hash of the `Block.receipts_db`. (local)\r\n* `BlockHeader.bloom` is equal to the bloom filter containing all of the *bloomables* from all of the logs from all of the receipts in the block. (local)\r\n* `BlockHeader.difficulty` matches the expected difficulty computed from the timestamp of the previous header. (evm aware)\r\n* `BlockHeader.gas_limit` is within the allowed range. (evm aware)\r\n* `BlockHeader.gas_used` is less-than-or-equal to the `BlockHeader.gas_limit` (local)\r\n* `BlockHeader.nonce` and `BlockHeader.mix_hash` satisfy the proof of work rules (evm aware due to DAG)\r\n* `BlockHeader.timestamp` is greater-than the parent header timestamp. (local)\r\n* `BlockHeader.block_number` is equal-to the parent block number + 1\r\n* `BlockHeader.extra_data` is less-than-or-equal to 32 bytes in length.",
  "closed_by": {
    "login": "gsalgado",
    "id": 412274,
    "node_id": "MDQ6VXNlcjQxMjI3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/412274?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gsalgado",
    "html_url": "https://github.com/gsalgado",
    "followers_url": "https://api.github.com/users/gsalgado/followers",
    "following_url": "https://api.github.com/users/gsalgado/following{/other_user}",
    "gists_url": "https://api.github.com/users/gsalgado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gsalgado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gsalgado/subscriptions",
    "organizations_url": "https://api.github.com/users/gsalgado/orgs",
    "repos_url": "https://api.github.com/users/gsalgado/repos",
    "events_url": "https://api.github.com/users/gsalgado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gsalgado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/16/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/16/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/316053874",
    "html_url": "https://github.com/ethereum/py-evm/issues/16#issuecomment-316053874",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/16",
    "id": 316053874,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjA1Mzg3NA==",
    "user": {
      "login": "gsalgado",
      "id": 412274,
      "node_id": "MDQ6VXNlcjQxMjI3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/412274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsalgado",
      "html_url": "https://github.com/gsalgado",
      "followers_url": "https://api.github.com/users/gsalgado/followers",
      "following_url": "https://api.github.com/users/gsalgado/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsalgado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsalgado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsalgado/subscriptions",
      "organizations_url": "https://api.github.com/users/gsalgado/orgs",
      "repos_url": "https://api.github.com/users/gsalgado/repos",
      "events_url": "https://api.github.com/users/gsalgado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsalgado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-18T12:51:07Z",
    "updated_at": "2017-07-18T12:51:07Z",
    "author_association": "MEMBER",
    "body": "With https://github.com/pipermerriam/py-evm/commit/3516d196cdbad4ef14af0de3198be26d21018f97 I believe all of those checks are in place now",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/316053874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/772/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/772/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/772/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/772",
  "id": 326257036,
  "node_id": "MDU6SXNzdWUzMjYyNTcwMzY=",
  "number": 772,
  "title": "Changes to `Chain.import_block`",
  "user": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 631592722,
      "node_id": "MDU6TGFiZWw2MzE1OTI3MjI=",
      "url": "https://api.github.com/repos/ethereum/py-evm/labels/Good%20First%20Issue",
      "name": "Good First Issue",
      "color": "0e8a16",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2018-05-24T19:21:46Z",
  "updated_at": "2018-10-01T18:44:14Z",
  "closed_at": "2018-10-01T18:44:13Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Blocks: https://github.com/ethereum/py-evm/issues/733\r\n\r\n### What is wrong?\r\n\r\nCurrently `chain.import_block(..)` returns the block that was imported.  Sometimes, this will cause a chain re-org, but this API doesn't expose sufficient information to determine this.\r\n\r\n### How can it be fixed\r\n\r\nChange `Chain.import_block` to return two iterables:\r\n\r\n- blocks which are *new* to the canonical chain.\r\n- blocks which were *previously* part of the canonical chain (but no longer are).\r\n\r\nWith this, callers can inspect the return value and determine that a re-org happened when more than a single block is returned.\r\n\r\nThis will also require changing `ChainDB.persist_block` to return the same data format, an iterable of blocks which are part of the new canonical chain.",
  "closed_by": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/772/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/772/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/391831844",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-391831844",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 391831844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTgzMTg0NA==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T19:29:38Z",
    "updated_at": "2018-05-24T19:29:38Z",
    "author_association": "MEMBER",
    "body": "With HeaderDB, we ended up also returning a list of dropped headers on re-org, right? That might make sense here, too.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/391831844/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/391838946",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-391838946",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 391838946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTgzODk0Ng==",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T19:54:58Z",
    "updated_at": "2018-05-24T19:54:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "registering this for myself.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/391838946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/392676141",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-392676141",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 392676141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjY3NjE0MQ==",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T07:15:18Z",
    "updated_at": "2018-05-29T07:15:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "did not get time to work on this. If this is blocking anyone, I have no problem with anyone else picking this up!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/392676141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393760733",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-393760733",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 393760733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mzc2MDczMw==",
    "user": {
      "login": "glaksmono",
      "id": 286254,
      "node_id": "MDQ6VXNlcjI4NjI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaksmono",
      "html_url": "https://github.com/glaksmono",
      "followers_url": "https://api.github.com/users/glaksmono/followers",
      "following_url": "https://api.github.com/users/glaksmono/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaksmono/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaksmono/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaksmono/subscriptions",
      "organizations_url": "https://api.github.com/users/glaksmono/orgs",
      "repos_url": "https://api.github.com/users/glaksmono/repos",
      "events_url": "https://api.github.com/users/glaksmono/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaksmono/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-01T05:18:06Z",
    "updated_at": "2018-06-01T05:18:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Already confirmed with @voith that I will take on this task ðŸ´ ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393760733/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/400712680",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-400712680",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 400712680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDcxMjY4MA==",
    "user": {
      "login": "glaksmono",
      "id": 286254,
      "node_id": "MDQ6VXNlcjI4NjI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaksmono",
      "html_url": "https://github.com/glaksmono",
      "followers_url": "https://api.github.com/users/glaksmono/followers",
      "following_url": "https://api.github.com/users/glaksmono/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaksmono/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaksmono/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaksmono/subscriptions",
      "organizations_url": "https://api.github.com/users/glaksmono/orgs",
      "repos_url": "https://api.github.com/users/glaksmono/repos",
      "events_url": "https://api.github.com/users/glaksmono/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaksmono/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-27T15:18:10Z",
    "updated_at": "2018-06-27T15:18:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Haven't had a chance working on this. Would be ok if anyone could take on it",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/400712680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/400759572",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-400759572",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 400759572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDc1OTU3Mg==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-27T17:08:30Z",
    "updated_at": "2018-06-27T17:08:30Z",
    "author_association": "MEMBER",
    "body": "I expect this to be a common question, so wanted to add the conversation from chat:\r\n>  How can there be multiple blocks that are new? Because ChainDB.import_block is importing 1 block at a time\r\n\r\nIt's returning the blocks that are new to the canonical chain. Let's say you have chain:\r\n\r\n```\r\nA -- B - C\r\n  `- D\r\n```\r\n\r\nwhere C is the current canonical head.\r\n\r\nThen you import E with parent D, where the total difficulty of E is higher than C. Now, you have added D and E to the canonical chain, and removed B and C.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/400759572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/401538911",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-401538911",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 401538911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTUzODkxMQ==",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-30T12:43:17Z",
    "updated_at": "2018-06-30T12:43:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this issue still valid? It seems like logging when a re-org happens has been added in #974. So I assume that whatever logic was needed to resolve the blocker has been addressed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/401538911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/403661715",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-403661715",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 403661715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzY2MTcxNQ==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-10T00:34:17Z",
    "updated_at": "2018-07-10T00:34:17Z",
    "author_association": "MEMBER",
    "body": "> Is this issue still valid?\r\n\r\nYes, `import_block()` still only returns one block.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/403661715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/426018407",
    "html_url": "https://github.com/ethereum/py-evm/issues/772#issuecomment-426018407",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/772",
    "id": 426018407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjAxODQwNw==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-01T18:44:13Z",
    "updated_at": "2018-10-01T18:44:13Z",
    "author_association": "MEMBER",
    "body": "Closed by #1151 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/426018407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

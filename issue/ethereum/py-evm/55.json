{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/55",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/55/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/55/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/55/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/55",
  "id": 246387943,
  "node_id": "MDU6SXNzdWUyNDYzODc5NDM=",
  "number": 55,
  "title": "Architecture for block mining",
  "user": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-07-28T15:51:43Z",
  "updated_at": "2017-09-27T15:30:22Z",
  "closed_at": "2017-09-27T15:30:22Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### What is wrong?\r\n\r\nThe DAO fork rules require running some custom code prior to application of any transactions on the block in which the dao fork takes place.  Currently, this is implemented in a not-so-ideal way within the `configure_header` method.  Given the intention of the `configure_header` method, this is not the *right* place for this type of logic.\r\n\r\n\r\n### How can it be fixed\r\n\r\nIntroduce the following workflow for block mining.\r\n\r\n* When previous block is mined, new block is seeded (fully automated within `mine_block()`.\r\n* New block is initialized (currenty done in `configure_header()`).  This would transition the block into the initialized state after which it cannot be reconfigured.  Probably worth renaming to `initialize_block()`.\r\n* Transactions are applied to block.\r\n* Block is finalized. (can be called manually to finalize a block but not mine the next one)\r\n* Block is mined (if not already finalized, this would be automatically done)\r\n\r\nThis would introduce the following state machine `seeded > initialized > under_construction > finalized`.  This would also allow hooks to be put in place at the `initialized` and `finalized` steps which should provide cleaner ways to perform this type of logic.  My spider sense also suggests these will come in handy later.",
  "closed_by": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/55/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/55/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/318910961",
    "html_url": "https://github.com/ethereum/py-evm/issues/55#issuecomment-318910961",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/55",
    "id": 318910961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODkxMDk2MQ==",
    "user": {
      "login": "DavidKnott",
      "id": 17552858,
      "node_id": "MDQ6VXNlcjE3NTUyODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17552858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DavidKnott",
      "html_url": "https://github.com/DavidKnott",
      "followers_url": "https://api.github.com/users/DavidKnott/followers",
      "following_url": "https://api.github.com/users/DavidKnott/following{/other_user}",
      "gists_url": "https://api.github.com/users/DavidKnott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DavidKnott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DavidKnott/subscriptions",
      "organizations_url": "https://api.github.com/users/DavidKnott/orgs",
      "repos_url": "https://api.github.com/users/DavidKnott/repos",
      "events_url": "https://api.github.com/users/DavidKnott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DavidKnott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-30T15:58:11Z",
    "updated_at": "2017-07-30T15:58:11Z",
    "author_association": "MEMBER",
    "body": "@pipermerriam I'd like to take a crack at this",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/318910961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/320310461",
    "html_url": "https://github.com/ethereum/py-evm/issues/55#issuecomment-320310461",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/55",
    "id": 320310461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDMxMDQ2MQ==",
    "user": {
      "login": "DavidKnott",
      "id": 17552858,
      "node_id": "MDQ6VXNlcjE3NTUyODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17552858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DavidKnott",
      "html_url": "https://github.com/DavidKnott",
      "followers_url": "https://api.github.com/users/DavidKnott/followers",
      "following_url": "https://api.github.com/users/DavidKnott/following{/other_user}",
      "gists_url": "https://api.github.com/users/DavidKnott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DavidKnott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DavidKnott/subscriptions",
      "organizations_url": "https://api.github.com/users/DavidKnott/orgs",
      "repos_url": "https://api.github.com/users/DavidKnott/repos",
      "events_url": "https://api.github.com/users/DavidKnott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DavidKnott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-04T17:42:58Z",
    "updated_at": "2017-08-04T17:42:58Z",
    "author_association": "MEMBER",
    "body": "@pipermerriam I've been reading a lot of the VM code and it seems like `frontier` and `homestead` both fit into the same `VM.configure` API.   I'm thinking I should change not just `homestead` but the `VM` itself (starting in `evm.vm.base`).  e.g. instead of passing in: \r\n``` python\r\ncreate_header_from_parent=staticmethod(create_homestead_header_from_parent),\r\n````\r\nto `VM.configure`, passing in:\r\n``` python\r\ninitialize_block=staticmethod(homestead_initialize_block)\r\n```\r\nIs that what you have in mind for the new block mining workflow?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/320310461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/320356958",
    "html_url": "https://github.com/ethereum/py-evm/issues/55#issuecomment-320356958",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/55",
    "id": 320356958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDM1Njk1OA==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-04T21:26:43Z",
    "updated_at": "2017-08-04T21:26:43Z",
    "author_association": "MEMBER",
    "body": "Yes, this sounds right.  If you want to code up the initial method renaming and whatnot and have me look at it I'll be able to give you a more definitive answer as-to-whether it is going in the right direction.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/320356958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/332560485",
    "html_url": "https://github.com/ethereum/py-evm/issues/55#issuecomment-332560485",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/55",
    "id": 332560485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjU2MDQ4NQ==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T15:30:22Z",
    "updated_at": "2017-09-27T15:30:22Z",
    "author_association": "MEMBER",
    "body": "no longer thinking this is the right approach.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/332560485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

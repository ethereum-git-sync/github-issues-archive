{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/538",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/538/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/538/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/538/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/538",
  "id": 312625023,
  "node_id": "MDU6SXNzdWUzMTI2MjUwMjM=",
  "number": 538,
  "title": "Missing dependencies after fresh install",
  "user": {
    "login": "cburgdorf",
    "id": 521109,
    "node_id": "MDQ6VXNlcjUyMTEwOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cburgdorf",
    "html_url": "https://github.com/cburgdorf",
    "followers_url": "https://api.github.com/users/cburgdorf/followers",
    "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
    "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
    "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
    "repos_url": "https://api.github.com/users/cburgdorf/repos",
    "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-04-09T17:49:14Z",
  "updated_at": "2018-04-16T16:40:07Z",
  "closed_at": "2018-04-16T16:40:07Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "* py-evm Version: `0.2.0-alpha.14`\r\n* OS: linux\r\n* Python Version (python --version): `3.6.4`\r\n* Environment (output of `pip freeze`): \r\n\r\n```\r\naiohttp==2.3.10\r\napipkg==1.4\r\nasn1crypto==0.24.0\r\nasync-lru==0.1.0\r\nasync-timeout==2.0.1\r\nattrs==17.4.0\r\nbackcall==0.1.0\r\nbumpversion==0.5.3\r\ncffi==1.11.5\r\nchardet==3.0.4\r\ncoverage==4.5.1\r\ncryptography==2.2.2\r\ncytoolz==0.9.0.1\r\ndecorator==4.2.1\r\neth-bloom==1.0.0\r\neth-hash==0.1.2\r\neth-keys==0.2.0b3\r\neth-utils==1.0.2\r\nexecnet==1.5.0\r\nflake8==3.5.0\r\nhypothesis==3.44.26\r\nidna==2.6\r\nidna-ssl==1.0.1\r\nipython==6.3.1\r\nipython-genutils==0.2.0\r\njedi==0.11.1\r\nmccabe==0.6.1\r\nmultidict==4.1.0\r\nmypy==0.580\r\nparso==0.1.1\r\npexpect==4.4.0\r\npickleshare==0.7.4\r\npluggy==0.6.0\r\nprompt-toolkit==1.0.15\r\nptyprocess==0.5.2\r\npy==1.5.3\r\npy-ecc==1.4.2\r\n-e git+https://github.com/ethereum/py-evm.git@3cadfc739b469bb4c24324a32851eb5a7b28a9d2#egg=py_evm\r\npycodestyle==2.3.1\r\npycparser==2.18\r\npycryptodome==3.6.0\r\npyethash==0.1.27\r\npyflakes==1.6.0\r\nPygments==2.2.0\r\npytest==3.1.2\r\npytest-asyncio==0.8.0\r\npytest-cov==2.5.1\r\npytest-logging==2015.11.4\r\npytest-xdist==1.18.1\r\nrlp==0.6.0\r\nsimplegeneric==0.8.1\r\nsix==1.11.0\r\ntoolz==0.9.0\r\ntox==2.7.0\r\ntraitlets==4.3.2\r\ntrie==1.3.2\r\ntyped-ast==1.1.0\r\nvirtualenv==15.2.0\r\nwcwidth==0.1.7\r\nyarl==1.1.1\r\n```\r\n\r\n### What is wrong?\r\n\r\nI'm planning to improve the developer guide for py-evm / trinity. I noticed that when I do a fresh clone, create a fresh `virtualenv` and run `pip install -e . -r requirements-dev.txt` I'm left with a system that doesn't have all dependencies installed to run the entire test suite without failures.\r\n\r\nSo, the TLDR of that issue is that it seems that our current developer guide doesn't leave you with a system that can satisfy all tests and hence isn't complete from a developers perspective.\r\n\r\nIn particular, at this point we are missing the `leveldb`, `web3`, `pysha3` and potentially other libs.\r\n\r\nThis happens both on my local system as well as in a fresh `python:3.6` docker container.\r\n\r\nIt doesn't seem to be a problem on CI though. My naive guess is that the tox setup triggers different installs.\r\n\r\nThe shortest path (that I'm aware of) to get all tests green is to run:\r\n\r\n```\r\npip install -e .[trinity] -r requirements-dev.txt\r\npip install pysha3\r\n```\r\n\r\nAt this point one should have all dependencies installed. \r\n\r\nI just want to double check if running the two commands above is something that is by design and the developer guide should highlight this or if our setup should be adjusted in any way. \r\n\r\nOr, maybe, if I'm just doing it wrong (in which case I really hope I wouldn't be the only person on the planet to run into this).",
  "closed_by": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/538/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/538/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/379845026",
    "html_url": "https://github.com/ethereum/py-evm/issues/538#issuecomment-379845026",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/538",
    "id": 379845026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTg0NTAyNg==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T18:16:30Z",
    "updated_at": "2018-04-09T18:16:30Z",
    "author_association": "MEMBER",
    "body": "It looks like you can drop this down to a one-liner with `pip install -e .[trinity,p2p] -r requirements-dev.txt`\r\n\r\nIf we adopt the style that @carver is using now we could trim this down to `pip install -e .[trinity,p2p,dev]`.\r\n\r\nsee: https://github.com/ethereum/eth-account/blob/master/setup.py#L8-L35",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/379845026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/379868656",
    "html_url": "https://github.com/ethereum/py-evm/issues/538#issuecomment-379868656",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/538",
    "id": 379868656,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTg2ODY1Ng==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T19:35:31Z",
    "updated_at": "2018-04-09T19:35:31Z",
    "author_association": "MEMBER",
    "body": "Well, in fact if we adopt the [@carver pattern](https://github.com/ethereum/eth-account/blob/master/setup.py#L30-L35) (deliberately making up a new term) we get rid of the `requirements-dev.txt` and are down to just `pip install -e .[dev]` to set up a full dev environment. I like it. Happy to make the change if no one beats me to it.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/379868656/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/380337704",
    "html_url": "https://github.com/ethereum/py-evm/issues/538#issuecomment-380337704",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/538",
    "id": 380337704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDMzNzcwNA==",
    "user": {
      "login": "ldct",
      "id": 130362,
      "node_id": "MDQ6VXNlcjEzMDM2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/130362?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ldct",
      "html_url": "https://github.com/ldct",
      "followers_url": "https://api.github.com/users/ldct/followers",
      "following_url": "https://api.github.com/users/ldct/following{/other_user}",
      "gists_url": "https://api.github.com/users/ldct/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ldct/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ldct/subscriptions",
      "organizations_url": "https://api.github.com/users/ldct/orgs",
      "repos_url": "https://api.github.com/users/ldct/repos",
      "events_url": "https://api.github.com/users/ldct/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ldct/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T06:05:33Z",
    "updated_at": "2018-04-11T06:05:33Z",
    "author_association": "NONE",
    "body": "Not sure if this is related, but I did a `pip3 install -r requirements-dev.txt` and still had to install the following packages manually: py_ecc, pyethash, eth_bloom, eth_keys, trie, eth_utils, rlp. For each of them there is code in this repo importing it but I can't find any of these dependencies in `requirements.txt`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/380337704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/380338162",
    "html_url": "https://github.com/ethereum/py-evm/issues/538#issuecomment-380338162",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/538",
    "id": 380338162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDMzODE2Mg==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T06:08:05Z",
    "updated_at": "2018-04-11T06:08:05Z",
    "author_association": "MEMBER",
    "body": "Yes, that's related. I'm about to send a PR that fixes this and updates the\ndeveloper guide with instructions on how to set up the system.\n\nOn Wed, Apr 11, 2018, 08:05 Li Xuanji <notifications@github.com> wrote:\n\n> Not sure if this is related, but I did a pip3 install -r\n> requirements-dev.txt and still had to install the following packages\n> manually: py_ecc, pyethash, eth_bloom, eth_keys, trie, eth_utils, rlp. For\n> each of them there is code in this repo importing it but I can't find any\n> of these dependencies in requirements.txt.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ethereum/py-evm/issues/538#issuecomment-380337704>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAfzlUG3ud1g8D6pOS9B6wMfhuQMrdJdks5tnZ0vgaJpZM4TM86Q>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/380338162/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

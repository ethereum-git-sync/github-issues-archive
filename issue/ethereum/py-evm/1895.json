{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/1895",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/1895",
  "id": 535412160,
  "node_id": "MDU6SXNzdWU1MzU0MTIxNjA=",
  "number": 1895,
  "title": "Investigate other potential Istanbul bugs related to looking up value from start of block",
  "user": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-12-10T00:10:49Z",
  "updated_at": "2020-01-15T23:29:13Z",
  "closed_at": "2020-01-15T23:29:13Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "* py-evm Version: x.x.x\r\n* OS: osx/linux/win\r\n* Python Version (python --version):\r\n* Environment (output of `pip freeze`):\r\n\r\n### What is wrong?\r\n\r\nRelated to #1893 \r\n\r\nThe equivalent problem from net gas metering might pop up when looking up the account rlp from the start of the transaction (instead of the start of the block). There is almost certainly a consensus issue (or several) hiding in there.\r\n\r\n### How can it be fixed\r\n\r\nA very similar fix as the one to #1893 should work, but in `AccountDB`.",
  "closed_by": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/1895/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/574897445",
    "html_url": "https://github.com/ethereum/py-evm/issues/1895#issuecomment-574897445",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895",
    "id": 574897445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDg5NzQ0NQ==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T23:01:50Z",
    "updated_at": "2020-01-15T23:01:50Z",
    "author_association": "MEMBER",
    "body": "Hm, I can't find any code path that would trigger a lookup of an original account value (like balance) from the start of the transaction. But it's possible that we have a storage root lookup issue for net gas metering. Note that `self._get_address_store()` is called without a `from_journal` flag (in fact it doesn't even support that flag at the moment), even when called in order to look at an account's \"original\" storage.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/574897445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/574905668",
    "html_url": "https://github.com/ethereum/py-evm/issues/1895#issuecomment-574905668",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/1895",
    "id": 574905668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDkwNTY2OA==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-15T23:29:13Z",
    "updated_at": "2020-01-15T23:29:13Z",
    "author_association": "MEMBER",
    "body": "Nope, I couldn't find any straightforward path that could cause a problem. Even though `_get_address_store()` is called without `from_journal`, it doesn't matter, because we use the same store for journaled and un-journaled storage entries.  Closing this as resolved, and we can open a separate one for the Goerli bug mentioned in chat, that we thought might be related.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/574905668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

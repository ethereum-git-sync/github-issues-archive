{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/831/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/831/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/831/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/831",
  "id": 327842138,
  "node_id": "MDU6SXNzdWUzMjc4NDIxMzg=",
  "number": 831,
  "title": "Trinity Fails To Restart",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 630871939,
      "node_id": "MDU6TGFiZWw2MzA4NzE5Mzk=",
      "url": "https://api.github.com/repos/ethereum/py-evm/labels/type:%20bug",
      "name": "type: bug",
      "color": "eeeeee",
      "default": false,
      "description": ""
    },
    {
      "id": 815420353,
      "node_id": "MDU6TGFiZWw4MTU0MjAzNTM=",
      "url": "https://api.github.com/repos/ethereum/py-evm/labels/comp:%20trinity",
      "name": "comp: trinity",
      "color": "bfd4f2",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "carver",
    "id": 205327,
    "node_id": "MDQ6VXNlcjIwNTMyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carver",
    "html_url": "https://github.com/carver",
    "followers_url": "https://api.github.com/users/carver/followers",
    "following_url": "https://api.github.com/users/carver/following{/other_user}",
    "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
    "organizations_url": "https://api.github.com/users/carver/orgs",
    "repos_url": "https://api.github.com/users/carver/repos",
    "events_url": "https://api.github.com/users/carver/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carver/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ethereum/py-evm/milestones/3",
    "html_url": "https://github.com/ethereum/py-evm/milestone/3",
    "labels_url": "https://api.github.com/repos/ethereum/py-evm/milestones/3/labels",
    "id": 3420500,
    "node_id": "MDk6TWlsZXN0b25lMzQyMDUwMA==",
    "number": 3,
    "title": "Grace Hopper (Trinity Release)",
    "description": "Next publicised alpha release of Trinity",
    "creator": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 19,
    "state": "closed",
    "created_at": "2018-06-13T01:18:30Z",
    "updated_at": "2018-07-24T16:15:07Z",
    "due_on": "2018-06-14T07:00:00Z",
    "closed_at": "2018-07-24T16:15:07Z"
  },
  "comments": 14,
  "created_at": "2018-05-30T18:11:45Z",
  "updated_at": "2019-08-02T22:39:42Z",
  "closed_at": "2018-07-17T16:53:12Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "* py-evm Version: `Trinity v0.1.0-alpha.1 \"Valentina Tereshkova\"`\r\n* OS: `Ubuntu 17.10`\r\n* Python Version (python --version): `Python 3.6.3`\r\n* Environment (output of `pip freeze`):\r\n```\r\naiohttp==2.3.10\r\nasn1crypto==0.24.0\r\nasync-lru==0.1.0\r\nasync-timeout==3.0.0\r\nattrdict==2.0.0\r\nbackcall==0.1.0\r\ncertifi==2018.4.16\r\ncffi==1.11.5\r\nchardet==3.0.4\r\ncoincurve==7.1.0\r\ncommand-not-found==0.3\r\ncryptography==2.2.2\r\ncytoolz==0.9.0.1\r\ndecorator==4.3.0\r\ndistro-info==0.17\r\neth-abi==1.1.1\r\neth-account==0.2.3\r\neth-bloom==1.0.0\r\neth-hash==0.1.4\r\neth-keyfile==0.5.1\r\neth-keys==0.2.0b3\r\neth-rlp==0.1.2\r\neth-utils==1.0.3\r\nhexbytes==0.1.0\r\nidna==2.6\r\nidna-ssl==1.0.1\r\nipython==6.4.0\r\nipython-genutils==0.2.0\r\njedi==0.12.0\r\nkeyring==10.4.0\r\nkeyrings.alt==2.2\r\nlanguage-selector==0.1\r\nlru-dict==1.1.6\r\nlxml==4.2.1\r\nmultidict==4.3.1\r\nnetdisco==1.4.1\r\nnetifaces==0.10.7\r\nparsimonious==0.8.0\r\nparso==0.2.1\r\npexpect==4.6.0\r\npickleshare==0.7.4\r\nplyvel==1.0.4\r\nprompt-toolkit==1.0.15\r\nptyprocess==0.5.2\r\npy-ecc==1.4.2\r\npy-evm==0.2.0a19\r\npycparser==2.18\r\npycrypto==2.6.1\r\npycryptodome==3.6.1\r\npyethash==0.1.27\r\nPygments==2.2.0\r\npygobject==3.24.1\r\npysha3==1.0.2\r\npython-apt==1.4.0b3\r\npython-dateutil==2.7.3\r\npyxdg==0.25\r\nPyYAML==3.12\r\nrequests==2.18.4\r\nrlp==1.0.1\r\nSecretStorage==2.3.1\r\nsimplegeneric==0.8.1\r\nsix==1.11.0\r\nssh-import-id==5.7\r\ntoolz==0.9.0\r\ntraitlets==4.3.2\r\ntrie==1.3.7\r\ntrinity==0.1.0a3\r\nufw==0.35\r\nunattended-upgrades==0.1\r\nuPnPClient==0.0.8\r\nurllib3==1.22\r\nwcwidth==0.1.7\r\nweb3==4.2.1\r\nwebsockets==5.0.1\r\nyarl==1.2.4\r\nzeroconf==0.20.0\r\n```\r\n\r\n### What is wrong?\r\n\r\nAfter noting the Too many files error in #830 I stopped the process, cleaned up the logs, then attempted to restart the process, but it does not start, I just get these errors:\r\n\r\n```\r\nProcess SpawnProcess-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.6/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/utils/logging.py\", line 99, in inner\r\n    return fn(*args, **inner_kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/main.py\", line 136, in run_database_process\r\n    serve_chaindb(chain_config, base_db)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/chains/__init__.py\", line 180, in serve_chaindb\r\n    server = manager.get_server()  # type: ignore\r\n  File \"/usr/lib/python3.6/multiprocessing/managers.py\", line 482, in get_server\r\n    self._authkey, self._serializer)\r\n  File \"/usr/lib/python3.6/multiprocessing/managers.py\", line 139, in __init__\r\n    self.listener = Listener(address=address, backlog=16)\r\n  File \"/usr/lib/python3.6/multiprocessing/connection.py\", line 438, in __init__\r\n    self._listener = SocketListener(address, family, backlog)\r\n  File \"/usr/lib/python3.6/multiprocessing/connection.py\", line 576, in __init__\r\n    self._socket.bind(address)\r\nOSError: [Errno 98] Address already in use\r\nProcess SpawnProcess-2:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib/python3.6/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/utils/logging.py\", line 99, in inner\r\n    return fn(*args, **inner_kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/main.py\", line 158, in launch_node\r\n    node = NodeClass(chain_config)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/nodes/full.py\", line 19, in __init__\r\n    super().__init__(chain_config)\r\n  File \"/usr/local/lib/python3.6/dist-packages/trinity/nodes/base.py\", line 54, in __init__\r\n    self._db_manager.connect()  # type: ignore\r\n  File \"/usr/lib/python3.6/multiprocessing/managers.py\", line 489, in connect\r\n    conn = Client(self._address, authkey=self._authkey)\r\n  File \"/usr/lib/python3.6/multiprocessing/connection.py\", line 487, in Client\r\n    c = SocketClient(address)\r\n  File \"/usr/lib/python3.6/multiprocessing/connection.py\", line 614, in SocketClient\r\n    s.connect(address)\r\nConnectionRefusedError: [Errno 111] Connection refused\r\n```\r\n\r\n### How can it be fixed\r\n\r\nI don't know...",
  "closed_by": {
    "login": "pipermerriam",
    "id": 824194,
    "node_id": "MDQ6VXNlcjgyNDE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pipermerriam",
    "html_url": "https://github.com/pipermerriam",
    "followers_url": "https://api.github.com/users/pipermerriam/followers",
    "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
    "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
    "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
    "repos_url": "https://api.github.com/users/pipermerriam/repos",
    "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/831/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/831/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393286911",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-393286911",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 393286911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzI4NjkxMQ==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T19:25:27Z",
    "updated_at": "2018-05-30T19:25:27Z",
    "author_association": "MEMBER",
    "body": "This is likely from an unclean shutdown.  I've been experiencing this myself in a Trinity node being run by `supervisord`.  Here's the fix.\r\n\r\n- Kill any existing processes that didn't get cleanly shutdown.\r\n  - `pkill python3.6`  (this will kill **all** python3.6 processes).\r\n  - you may need to do `pkill python3` depending on how you have everything installed or even `pkill python`.\r\n- Release the lock on the leveldb database.\r\n  - `rm ~/.local/share/trinity/mainnet/chain/full/LOCK`\r\n  - replace `full` with `light` if you are running in `--light`\r\n  - replace `mainnet` with `ropsten` if you are running with `--ropsten`\r\n- remove dangling IPC sockets\r\n  - `rm ~/.local/share/trinity/mainnet/*.ipc`\r\n  - replace `mainnet` with `ropsten` if you are running with `--ropsten`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393286911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393288754",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-393288754",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 393288754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzI4ODc1NA==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T19:31:56Z",
    "updated_at": "2018-05-30T19:31:56Z",
    "author_association": "MEMBER",
    "body": "Related to https://github.com/ethereum/py-evm/issues/808",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393288754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393290566",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-393290566",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 393290566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzI5MDU2Ng==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T19:38:24Z",
    "updated_at": "2018-05-30T19:38:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I do indeed run with supervisor and those steps did indeed allow my node to start again. Thanks, feel free to close or leave open as you see fit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393290566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393291676",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-393291676",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 393291676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzI5MTY3Ng==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T19:41:33Z",
    "updated_at": "2018-05-30T19:41:33Z",
    "author_association": "MEMBER",
    "body": "Leaving open because we need to explore how we can shutdown gracefully in situations like this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/393291676/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/395705001",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-395705001",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 395705001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTcwNTAwMQ==",
    "user": {
      "login": "veox",
      "id": 3036030,
      "node_id": "MDQ6VXNlcjMwMzYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3036030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/veox",
      "html_url": "https://github.com/veox",
      "followers_url": "https://api.github.com/users/veox/followers",
      "following_url": "https://api.github.com/users/veox/following{/other_user}",
      "gists_url": "https://api.github.com/users/veox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/veox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/veox/subscriptions",
      "organizations_url": "https://api.github.com/users/veox/orgs",
      "repos_url": "https://api.github.com/users/veox/repos",
      "events_url": "https://api.github.com/users/veox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/veox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-08T09:27:00Z",
    "updated_at": "2018-07-09T13:24:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've experienced this without `supervisord`. Removing the dangling IPC socket files \"solved\" the issue for me. Forgot to check whether the `LOCK` file was still around.\r\n\r\n-----\r\n\r\nEDIT (a month later): the `LOCK` file is present, but `trinity` ignores it.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/395705001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/396847914",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-396847914",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 396847914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njg0NzkxNA==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T07:52:50Z",
    "updated_at": "2018-06-13T07:52:50Z",
    "author_association": "MEMBER",
    "body": "Here's a somewhat hackish proposal for an *interim solution* if we can't figure how to *prevent* this from happening *just now*.\r\n\r\nWrite a command such as `repair` that can be used as `trinity repair` and basically does all the things that @pipermerriam listed above to get the node unstuck.\r\n\r\nAny unresolved errors at startup such as the \"Address already in use\" error should then bring up a user friendly message that educate the user about the `trinity repair` command. I think invoking that command should always be a deliberate decision by the user and note done automatically because e.g. \"Adress already in use\" may be a totally legitimate thing in some situations and may not be necessarily caused by an unclean shutdown.\r\n\r\nThis is obviously more a workaround than a proper fix so I'm just throwing this idea in as an interim solution.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/396847914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/397639591",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-397639591",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 397639591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzYzOTU5MQ==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T14:31:32Z",
    "updated_at": "2018-06-15T14:31:32Z",
    "author_association": "MEMBER",
    "body": "ðŸ‘ \r\n\r\n```\r\n$ trinity fix_unclean_shutdown\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/397639591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/398652937",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-398652937",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 398652937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODY1MjkzNw==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-20T07:32:53Z",
    "updated_at": "2018-06-20T07:32:53Z",
    "author_association": "MEMBER",
    "body": "It just occurred to me that even if the underlying issue that causes these unclean shutdowns is solved, such a `fix-unclean-shutdown` command still seems valuable. There are still situations (such as power outages) would lead to left ipc pipe files etc.\r\n\r\nThe most critical part of this though seems to find a cleaner way for `pkill python3` because obviously that could affect other programs as well.\r\n\r\nIdeally, the Trinity processes would be labeled (e.g. `trinity-main`, `trinity-networking` and `trinity-database`) so that they can be identified accordingly. That said, labeling processes seems to be a messy business (also considering different OSes).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/398652937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/402468829",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-402468829",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 402468829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ2ODgyOQ==",
    "user": {
      "login": "cburgdorf",
      "id": 521109,
      "node_id": "MDQ6VXNlcjUyMTEwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/521109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cburgdorf",
      "html_url": "https://github.com/cburgdorf",
      "followers_url": "https://api.github.com/users/cburgdorf/followers",
      "following_url": "https://api.github.com/users/cburgdorf/following{/other_user}",
      "gists_url": "https://api.github.com/users/cburgdorf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cburgdorf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cburgdorf/subscriptions",
      "organizations_url": "https://api.github.com/users/cburgdorf/orgs",
      "repos_url": "https://api.github.com/users/cburgdorf/repos",
      "events_url": "https://api.github.com/users/cburgdorf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cburgdorf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-04T12:46:42Z",
    "updated_at": "2018-07-04T12:46:42Z",
    "author_association": "MEMBER",
    "body": "I don't think we have this specific issue anymore. Previously I was able to reproduce this quite consistently (using `trinity console`). Now, that doesn't seem to appear anymore (there have been some related fixes). \r\n\r\nI think we can close this issue but we may want to extract the proposed `fix-unclean-shutdown` command into a separate issue. That said, it seems more tricky than initially expected because it seems to be a pain to reliably name processes which in turn makes it quite hard to identify the processes that we want to kill.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/402468829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/402492654",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-402492654",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 402492654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ5MjY1NA==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-04T14:18:46Z",
    "updated_at": "2018-07-04T14:18:46Z",
    "author_association": "MEMBER",
    "body": "I think we can still create a `fix-unclean-shutdown` command that is useful without the pkill part.  Maybe  just add helpful logging output to instruct the user that they **might** have to kill a running process and some basic instructions on how to do that and a big fat warning that they should know what they are doing before running `pkill` commands.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/402492654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/404947516",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-404947516",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 404947516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDk0NzUxNg==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T20:39:10Z",
    "updated_at": "2018-07-13T21:02:10Z",
    "author_association": "MEMBER",
    "body": "> Removing the dangling IPC socket files \"solved\" the issue for me.\r\n\r\nThis is weird. The socket file isn't removed for me on shutdown, but that doesn't seem to be a problem for starting trinity back up. Maybe an OS-specific behavior?\r\n\r\n_Edit: oh, or a running process still had a lock on the socket. Removing it didn't stop the hung process, but did allow a second process to create a new IPC socket._",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/404947516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517832118",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-517832118",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 517832118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzgzMjExOA==",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-02T20:19:45Z",
    "updated_at": "2019-08-02T20:19:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just making a note here in case this helps anyone in the future:\r\n\r\nI faced this issue today while running trinity from master, when I accidentally closed my terminal.\r\nI got the following error:\r\n```\r\n   ERROR  08-03 01:39:05               asyncio  Task exception was never retrieved\r\nfuture: <Task finished coro=<AsyncioIsolatedPlugin._prepare_start() done, defined at /Users/voith/Projects/new-ethereum/trinity/trinity/extensibility/asyncio.py:29> exception=ConnectionRefusedError(61, 'Connection refused')>\r\nTraceback (most recent call last):\r\n  File \"/Users/voith/Projects/new-ethereum/trinity/trinity/extensibility/asyncio.py\", line 45, in _prepare_start\r\n    self.do_start()\r\n  File \"/Users/voith/Projects/new-ethereum/trinity/trinity/plugins/builtin/syncer/plugin.py\", line 296, in do_start\r\n    node = NodeClass(self.event_bus, trinity_config)\r\n  File \"/Users/voith/Projects/new-ethereum/trinity/trinity/nodes/full.py\", line 21, in __init__\r\n    super().__init__(event_bus, trinity_config)\r\n  File \"/Users/voith/Projects/new-ethereum/trinity/trinity/nodes/base.py\", line 58, in __init__\r\n    self._db_manager = create_db_consumer_manager(trinity_config.database_ipc_path)\r\n  File \"/Users/voith/Projects/new-ethereum/trinity/trinity/db/eth1/manager.py\", line 84, in create_db_consumer_manager\r\n    manager.connect()\r\n  File \"/usr/local/Cellar/python/3.7.4/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/managers.py\", line 532, in connect\r\n    conn = Client(self._address, authkey=self._authkey)\r\n  File \"/usr/local/Cellar/python/3.7.4/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/connection.py\", line 492, in Client\r\n    c = SocketClient(address)\r\n  File \"/usr/local/Cellar/python/3.7.4/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/connection.py\", line 619, in SocketClient\r\n    s.connect(address)\r\nConnectionRefusedError: [Errno 61] Connection refused\r\n```\r\n\r\n\r\n`trinity fix-unclean-shutdown` did not work for me.\r\n\r\nI had to do:\r\n`rm /Users/voith/.local/share/trinity/ropsten/ipcs-eth1/*.ipc`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517832118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517862374",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-517862374",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 517862374,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzg2MjM3NA==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-02T22:31:51Z",
    "updated_at": "2019-08-02T22:31:51Z",
    "author_association": "MEMBER",
    "body": "It should definitely clean those IPC files up for you. Master is pretty crashy right now, and I had to do the same thing earlier today.\r\n\r\nNote that you must run the `fix-unclean-shutdown` with the same command flags as you ran the original trinity with. For example, if your `trinity --ropsten` shell crashed, then you need to run `trinity --ropsten fix-unclean-shutdown`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517862374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517863756",
    "html_url": "https://github.com/ethereum/py-evm/issues/831#issuecomment-517863756",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/831",
    "id": 517863756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzg2Mzc1Ng==",
    "user": {
      "login": "voith",
      "id": 8171193,
      "node_id": "MDQ6VXNlcjgxNzExOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171193?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/voith",
      "html_url": "https://github.com/voith",
      "followers_url": "https://api.github.com/users/voith/followers",
      "following_url": "https://api.github.com/users/voith/following{/other_user}",
      "gists_url": "https://api.github.com/users/voith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/voith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/voith/subscriptions",
      "organizations_url": "https://api.github.com/users/voith/orgs",
      "repos_url": "https://api.github.com/users/voith/repos",
      "events_url": "https://api.github.com/users/voith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/voith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-02T22:39:42Z",
    "updated_at": "2019-08-02T22:39:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "> trinity --ropsten fix-unclean-shutdow\r\n\r\n@carver Missed the ropsten flag, Thanks. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/517863756/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

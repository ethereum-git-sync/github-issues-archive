{
  "url": "https://api.github.com/repos/ethereum/py-evm/issues/1656",
  "repository_url": "https://api.github.com/repos/ethereum/py-evm",
  "labels_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656/comments",
  "events_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656/events",
  "html_url": "https://github.com/ethereum/py-evm/issues/1656",
  "id": 393098607,
  "node_id": "MDU6SXNzdWUzOTMwOTg2MDc=",
  "number": 1656,
  "title": "Discussion : Remove support for multiple types in the EVM stack",
  "user": {
    "login": "Bhargavasomu",
    "id": 15922456,
    "node_id": "MDQ6VXNlcjE1OTIyNDU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/15922456?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Bhargavasomu",
    "html_url": "https://github.com/Bhargavasomu",
    "followers_url": "https://api.github.com/users/Bhargavasomu/followers",
    "following_url": "https://api.github.com/users/Bhargavasomu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Bhargavasomu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Bhargavasomu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Bhargavasomu/subscriptions",
    "organizations_url": "https://api.github.com/users/Bhargavasomu/orgs",
    "repos_url": "https://api.github.com/users/Bhargavasomu/repos",
    "events_url": "https://api.github.com/users/Bhargavasomu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Bhargavasomu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-12-20T15:38:14Z",
  "updated_at": "2018-12-20T20:19:04Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### What is wrong?\r\nAs part of issue #1398 this new issue arised from this https://github.com/ethereum/py-evm/issues/1398#issuecomment-432303381. It was proposed to remove the different types of elements in the `stack` (`bytes` and `int`), and put only one element type in the `Stack`\r\n\r\n### How can it be fixed\r\n\r\nFill this in if you know how to fix it.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/1656/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449042222",
    "html_url": "https://github.com/ethereum/py-evm/issues/1656#issuecomment-449042222",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656",
    "id": 449042222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTA0MjIyMg==",
    "user": {
      "login": "Bhargavasomu",
      "id": 15922456,
      "node_id": "MDQ6VXNlcjE1OTIyNDU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/15922456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bhargavasomu",
      "html_url": "https://github.com/Bhargavasomu",
      "followers_url": "https://api.github.com/users/Bhargavasomu/followers",
      "following_url": "https://api.github.com/users/Bhargavasomu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bhargavasomu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bhargavasomu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bhargavasomu/subscriptions",
      "organizations_url": "https://api.github.com/users/Bhargavasomu/orgs",
      "repos_url": "https://api.github.com/users/Bhargavasomu/repos",
      "events_url": "https://api.github.com/users/Bhargavasomu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bhargavasomu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-20T15:47:25Z",
    "updated_at": "2018-12-20T15:47:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cburgdorf @pipermerriam @carver I see a problem with this proposed approach. Previously (current live version scenario) we are storing both `bytes` and `int`, and most of the time, it is expected that if the user requests the popped data to be in the `bytes` format, the popped data would be in the `bytes` format. But now we are entirely converting the data stored in the `stack` into a single `type`, and hence if the user asks for the other `type`, we would have to convert it into that `type` and present it to the user. I believe that this would take a lot more time. Please correct me if I am wrong.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449042222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449116369",
    "html_url": "https://github.com/ethereum/py-evm/issues/1656#issuecomment-449116369",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656",
    "id": 449116369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTExNjM2OQ==",
    "user": {
      "login": "carver",
      "id": 205327,
      "node_id": "MDQ6VXNlcjIwNTMyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/205327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carver",
      "html_url": "https://github.com/carver",
      "followers_url": "https://api.github.com/users/carver/followers",
      "following_url": "https://api.github.com/users/carver/following{/other_user}",
      "gists_url": "https://api.github.com/users/carver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carver/subscriptions",
      "organizations_url": "https://api.github.com/users/carver/orgs",
      "repos_url": "https://api.github.com/users/carver/repos",
      "events_url": "https://api.github.com/users/carver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-20T19:51:42Z",
    "updated_at": "2018-12-20T19:51:42Z",
    "author_association": "MEMBER",
    "body": "Silly question inbound: is there any time that leading 0s matter in bytes? Like is there ever a difference between `b'\\0' and b'\\0' *32` on the stack? I assume not, if the EVM is simulating a fixed 32-byte instruction width.\r\n\r\nBut if so, converting all values to `int` would be problematic, of course. Having everything be `bytes` would be fine.\r\n\r\n> I believe that this would take a lot more time.\r\n\r\nYou're talking about the time to convert the value from `int` to `bytes`? Seems relatively small compared to other costs, but the only way to know for sure is to benchmark.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449116369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449123383",
    "html_url": "https://github.com/ethereum/py-evm/issues/1656#issuecomment-449123383",
    "issue_url": "https://api.github.com/repos/ethereum/py-evm/issues/1656",
    "id": 449123383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTEyMzM4Mw==",
    "user": {
      "login": "pipermerriam",
      "id": 824194,
      "node_id": "MDQ6VXNlcjgyNDE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pipermerriam",
      "html_url": "https://github.com/pipermerriam",
      "followers_url": "https://api.github.com/users/pipermerriam/followers",
      "following_url": "https://api.github.com/users/pipermerriam/following{/other_user}",
      "gists_url": "https://api.github.com/users/pipermerriam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pipermerriam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pipermerriam/subscriptions",
      "organizations_url": "https://api.github.com/users/pipermerriam/orgs",
      "repos_url": "https://api.github.com/users/pipermerriam/repos",
      "events_url": "https://api.github.com/users/pipermerriam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pipermerriam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-20T20:19:04Z",
    "updated_at": "2018-12-20T20:19:04Z",
    "author_association": "MEMBER",
    "body": "> and hence if the user asks for the other type, we would have to convert it into that type and present it to the user.\r\n\r\nPart of this change would be removing this type of conversion from the `Stack` API and requiring call sites to 1) expect to get an `int` back and 2) do any necessary conversions to `bytes` types locally.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum/py-evm/issues/comments/449123383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2426",
  "id": 419299545,
  "node_id": "MDU6SXNzdWU0MTkyOTk1NDU=",
  "number": 2426,
  "title": "MyCrypto Desktop nonce is mixed up across the different testnet networks",
  "user": {
    "login": "bokkypoobah",
    "id": 17121975,
    "node_id": "MDQ6VXNlcjE3MTIxOTc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/17121975?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bokkypoobah",
    "html_url": "https://github.com/bokkypoobah",
    "followers_url": "https://api.github.com/users/bokkypoobah/followers",
    "following_url": "https://api.github.com/users/bokkypoobah/following{/other_user}",
    "gists_url": "https://api.github.com/users/bokkypoobah/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bokkypoobah/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bokkypoobah/subscriptions",
    "organizations_url": "https://api.github.com/users/bokkypoobah/orgs",
    "repos_url": "https://api.github.com/users/bokkypoobah/repos",
    "events_url": "https://api.github.com/users/bokkypoobah/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bokkypoobah/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 633603096,
      "node_id": "MDU6TGFiZWw2MzM2MDMwOTY=",
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/labels/type:%20issue",
      "name": "type: issue",
      "color": "cc0000",
      "default": false,
      "description": "Items that document a problem or bug with an existing feature."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-03-11T05:25:21Z",
  "updated_at": "2019-03-21T20:22:09Z",
  "closed_at": "2019-03-21T20:22:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description of the Issue\r\n\r\nI'm using MyCrypto Desktop to deploy contracts from the same account across the Ropsten, Kovan, Rinkeby and Görli testnets. MyCrypto Desktop nonce is mixed up across the different testnet networks.\r\n\r\nIn the steps below, the latest transaction on Rinkeby has a nonce of 4 but MyCrypto Desktop calculates 1,460. This number remains the same after the nonce refresh button is clicked.\r\n\r\n### Steps to Reproduce\r\n\r\n1. Switch networks to Rinkeby\r\n\r\n2. Unlock my account 0x49D8621f8862c423AbbA0dfAe4916F838Cd264F6 using a JSON / UTC file. The following screen shows that the next nonce on Rinkeby is 1,460. \r\n\r\n<img width=\"1399\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17121975/54101688-04635280-4419-11e9-9661-4b3b4d5f6e07.png\">\r\n\r\nOn Ropsten, https://ropsten.etherscan.io/tx/0x6934fda843ffce1d66ef9b19f13ebc9edb55671a47a913b08f0d3a4448688d25 is my latest transaction from my 0x49D8 account, with a nonce of 1,454.\r\n\r\nOn Rinkeby, https://rinkeby.etherscan.io/tx/0xa0ffb0ae1bc73316437839542523751ba116a6fb8d7c0fe66ea159b78b0ab717 is my latest transaction from my 0x49D8 account, with a nonce of 4\r\n\r\nThe same happens with Kovan and Görli networks.\r\n\r\n### Description of Your Machine\r\n\r\nmac_1.6.0_MyCrypto.dmg on a MacBook Pro",
  "closed_by": {
    "login": "SharonManrique",
    "id": 25834495,
    "node_id": "MDQ6VXNlcjI1ODM0NDk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/25834495?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SharonManrique",
    "html_url": "https://github.com/SharonManrique",
    "followers_url": "https://api.github.com/users/SharonManrique/followers",
    "following_url": "https://api.github.com/users/SharonManrique/following{/other_user}",
    "gists_url": "https://api.github.com/users/SharonManrique/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SharonManrique/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SharonManrique/subscriptions",
    "organizations_url": "https://api.github.com/users/SharonManrique/orgs",
    "repos_url": "https://api.github.com/users/SharonManrique/repos",
    "events_url": "https://api.github.com/users/SharonManrique/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SharonManrique/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471485919",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2426#issuecomment-471485919",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426",
    "id": 471485919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTQ4NTkxOQ==",
    "user": {
      "login": "MrLuit",
      "id": 12037024,
      "node_id": "MDQ6VXNlcjEyMDM3MDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12037024?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrLuit",
      "html_url": "https://github.com/MrLuit",
      "followers_url": "https://api.github.com/users/MrLuit/followers",
      "following_url": "https://api.github.com/users/MrLuit/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrLuit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrLuit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrLuit/subscriptions",
      "organizations_url": "https://api.github.com/users/MrLuit/orgs",
      "repos_url": "https://api.github.com/users/MrLuit/repos",
      "events_url": "https://api.github.com/users/MrLuit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrLuit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T10:31:21Z",
    "updated_at": "2019-03-11T10:32:22Z",
    "author_association": "COLLABORATOR",
    "body": "Your nonce seems to be returned correctly from web3 to me:\r\n\r\n![](https://i.imgur.com/vcEPyT1.png)\r\n\r\nCould you please try opening the dev tools on our desktop app, switching to `Network`, and look for any web3-related eth_getTransactionCount calls? The result of these API calls will help us figure out whether its just a local rounding error, or if the node is actually returning incorrect information. Let me know if you need help with that!",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471485919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471494914",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2426#issuecomment-471494914",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426",
    "id": 471494914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTQ5NDkxNA==",
    "user": {
      "login": "bokkypoobah",
      "id": 17121975,
      "node_id": "MDQ6VXNlcjE3MTIxOTc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17121975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bokkypoobah",
      "html_url": "https://github.com/bokkypoobah",
      "followers_url": "https://api.github.com/users/bokkypoobah/followers",
      "following_url": "https://api.github.com/users/bokkypoobah/following{/other_user}",
      "gists_url": "https://api.github.com/users/bokkypoobah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bokkypoobah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bokkypoobah/subscriptions",
      "organizations_url": "https://api.github.com/users/bokkypoobah/orgs",
      "repos_url": "https://api.github.com/users/bokkypoobah/repos",
      "events_url": "https://api.github.com/users/bokkypoobah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bokkypoobah/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T11:00:42Z",
    "updated_at": "2019-03-11T11:00:42Z",
    "author_association": "NONE",
    "body": "The following shows that I am on the Rinkeby network, and the call to `getTransactionCount`\r\n\r\n<img width=\"1491\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17121975/54119059-9040a300-4448-11e9-9c20-07d6cd357716.png\">\r\n\r\nAnd here is the response to `getTransactionCount`:\r\n<img width=\"557\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17121975/54119099-ac444480-4448-11e9-858b-6c8f0ee3625b.png\">\r\n\r\nAnd my account's last tx on Rinkeby is https://rinkeby.etherscan.io/tx/0xc14776f433731dbe1f123c16e426672f7c017e2a6473231b22d33890d362294f - the nonce is 6, so the next is expected to be 7. However, the first screen above displays the nonce 1460. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471494914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471651071",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2426#issuecomment-471651071",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2426",
    "id": 471651071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTY1MTA3MQ==",
    "user": {
      "login": "blurpesec",
      "id": 29407814,
      "node_id": "MDQ6VXNlcjI5NDA3ODE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/29407814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blurpesec",
      "html_url": "https://github.com/blurpesec",
      "followers_url": "https://api.github.com/users/blurpesec/followers",
      "following_url": "https://api.github.com/users/blurpesec/following{/other_user}",
      "gists_url": "https://api.github.com/users/blurpesec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blurpesec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blurpesec/subscriptions",
      "organizations_url": "https://api.github.com/users/blurpesec/orgs",
      "repos_url": "https://api.github.com/users/blurpesec/repos",
      "events_url": "https://api.github.com/users/blurpesec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blurpesec/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T17:55:25Z",
    "updated_at": "2019-03-11T17:55:25Z",
    "author_association": "COLLABORATOR",
    "body": "Hey Bokky, thanks for the report - You're using the same pub/priv keypair across the networks, correct? \r\n\r\nThis is an issue with the way our nonces are calculated. \r\nWhen calculating we currently do two things: \r\n* We check `eth_getTransactionCount` and \r\n* We check the local cache for transactions from the same address\r\n\r\nThen, we pick the highest nonce between the two, allowing you to stack transactions and send back-to-back. Currently, we're not differentiating between networks, so that would explain this behavior. I'll look into a fix for this :D",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/471651071/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/4347",
  "id": 1447907784,
  "node_id": "I_kwDOBIA0fM5WTVHI",
  "number": 4347,
  "title": "Can't run `yarn start` on Mac OS X: Module not found: Error: Can't resolve fs",
  "user": {
    "login": "byforcesunseen",
    "id": 34702085,
    "node_id": "MDQ6VXNlcjM0NzAyMDg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/34702085?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/byforcesunseen",
    "html_url": "https://github.com/byforcesunseen",
    "followers_url": "https://api.github.com/users/byforcesunseen/followers",
    "following_url": "https://api.github.com/users/byforcesunseen/following{/other_user}",
    "gists_url": "https://api.github.com/users/byforcesunseen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/byforcesunseen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/byforcesunseen/subscriptions",
    "organizations_url": "https://api.github.com/users/byforcesunseen/orgs",
    "repos_url": "https://api.github.com/users/byforcesunseen/repos",
    "events_url": "https://api.github.com/users/byforcesunseen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/byforcesunseen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-11-14T11:42:57Z",
  "updated_at": "2022-11-16T14:14:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description of Issue\r\n\r\nCan't run latest `MyCrypto` source locally on Mac OS X due to missing `fs` dependency:\r\n\r\n```shell\r\n$ yarn start\r\n\r\nyarn run v1.22.19\r\n$  yarn run dev\r\n...\r\n\r\nERROR  Failed to compile with 1 errors\r\n\r\nThis dependency was not found:\r\n\r\n* fs in ./node_modules/dotenv/lib/main.js\r\n\r\nTo install it, you can run: npm install --save fs\r\n```\r\n\r\n### What exactly were you doing when you encountered this issue?\r\n\r\n1. Clone repo\r\n\r\n   ```shell\r\n   $ git clone https://github.com/MyCryptoHQ/MyCrypto.git\r\n   $ git rev-parse HEAD\r\n   \r\n   457ec2f0a1cce537275c3b67d7e871f1ae3ae162\r\n   ```\r\n\r\n1. <details><summary>Run <code>yarn</code>, no errors occur:</summary>\r\n\r\n   ```shell\r\n   $ yarn\r\n\r\n   yarn install v1.22.19\r\n   [1/5] 🔍  Validating package.json...\r\n   [2/5] 🔍  Resolving packages...\r\n   warning Resolution field \"@emotion/sheet@1.0.1\" is incompatible with requested version \"@emotion/sheet@0.9.4\"\r\n   warning Resolution field \"@emotion/sheet@1.0.1\" is incompatible with requested version \"@emotion/sheet@0.9.4\"\r\n   [3/5] 🚚  Fetching packages...\r\n   [4/5] 🔗  Linking dependencies...\r\n   warning \" > @mycrypto/ui@0.24.1\" has incorrect peer dependency \"react@^16.8.0\".\r\n   warning \" > @mycrypto/ui@0.24.1\" has incorrect peer dependency \"react-dom@^16.8.0\".\r\n   warning \"@mycrypto/ui > react-popper-tooltip@2.11.1\" has incorrect peer dependency \"react@^16.6.0\".\r\n   warning \"@mycrypto/ui > react-popper-tooltip@2.11.1\" has incorrect peer dependency \"react-dom@^16.6.0\".\r\n   warning \"@mycrypto/ui > react-popper-tooltip > react-popper > create-react-context@0.3.0\" has incorrect peer dependency \"react@^0.14.0 || ^15.0.0 || ^16.0.0\".\r\n   warning \" > apollo-boost@0.4.7\" has incorrect peer dependency \"graphql@^0.11.0 || ^0.12.0 || ^0.13.0 || ^14.0.0\".\r\n   warning \" > recharts@1.8.5\" has incorrect peer dependency \"react@^15.0.0 || ^16.0.0\".\r\n   warning \" > recharts@1.8.5\" has incorrect peer dependency \"react-dom@^15.0.0 || ^16.0.0\".\r\n   warning \"recharts > react-resize-detector@2.3.0\" has incorrect peer dependency \"react@^0.14.7 || ^15.0.0 || ^16.0.0\".\r\n   warning \"recharts > react-smooth@1.0.6\" has incorrect peer dependency \"react@^15.0.0 || ^16.0.0\".\r\n   warning \"recharts > react-smooth@1.0.6\" has incorrect peer dependency \"react-dom@^15.0.0 || ^16.0.0\".\r\n   warning \" > toasted-notes@3.2.0\" has incorrect peer dependency \"react@^16.8.4\".\r\n   warning \" > toasted-notes@3.2.0\" has incorrect peer dependency \"react-dom@^16.8.4\".\r\n   warning \"toasted-notes > @reach/alert@0.1.5\" has incorrect peer dependency \"react@^16.8.0\".\r\n   warning \"toasted-notes > @reach/alert@0.1.5\" has incorrect peer dependency \"react-dom@^16.8.0\".\r\n   warning \"toasted-notes > @reach/alert > @reach/component-component@0.1.3\" has unmet peer dependency \"prop-types@^15.6.2\".\r\n   warning \"toasted-notes > @reach/alert > @reach/component-component@0.1.3\" has incorrect peer dependency \"react@^16.4.0\".\r\n   warning \"toasted-notes > @reach/alert > @reach/component-component@0.1.3\" has incorrect peer dependency \"react-dom@^16.4.0\".\r\n   warning \"toasted-notes > @reach/alert > @reach/visually-hidden@0.1.4\" has incorrect peer dependency \"react@^16.8.0\".\r\n   warning \"toasted-notes > @reach/alert > @reach/visually-hidden@0.1.4\" has incorrect peer dependency \"react-dom@^16.8.0\".\r\n   warning \" > @nomiclabs/hardhat-ethers@2.0.2\" has unmet peer dependency \"ethers@^5.0.0\".\r\n   warning \" > @phenomnomnominal/tsquery@4.0.0\" has incorrect peer dependency \"typescript@^3\".\r\n   warning \" > @pmmmwh/react-refresh-webpack-plugin@0.4.3\" has incorrect peer dependency \"react-refresh@>=0.8.3 <0.10.0\".\r\n   warning \"@storybook/addon-actions > @storybook/api > @reach/router@1.3.4\" has incorrect peer dependency \"react@15.x || 16.x || 16.4.0-alpha.0911da3\".\r\n   warning \"@storybook/addon-actions > @storybook/api > @reach/router@1.3.4\" has incorrect peer dependency \"react-dom@15.x || 16.x || 16.4.0-alpha.0911da3\".\r\n   warning \" > @storybook/addon-storyshots@6.2.9\" has unmet peer dependency \"svelte@*\".\r\n   warning \" > @storybook/addon-storyshots@6.2.9\" has unmet peer dependency \"vue-jest@*\".\r\n   warning \"@storybook/addon-storyshots > react-test-renderer@17.0.1\" has incorrect peer dependency \"react@17.0.1\".\r\n   warning \" > react-inlinesvg@2.0.1\" has incorrect peer dependency \"react@^16.8.0\".\r\n   warning \"react-inlinesvg > react-from-dom@0.4.2\" has incorrect peer dependency \"react@^15.0.0 || ^16.0.0\".\r\n   [5/5] 🔨  Building fresh packages...\r\n   Done in 110.08s.\r\n   ```\r\n\r\n   </details>\r\n\r\n1. <details><summary>Run <code>yarn start</code>, receive <code>Module not found</code> error:</summary>\r\n\r\n   ```shell\r\n   yarn start\r\n   \r\n   yarn run v1.22.19\r\n   $  yarn run dev\r\n   $ check-node-version --package\r\n   $ cross-env NODE_ENV=development TARGET_ENV=local webpack-dev-server --config webpack_config/development.js\r\n   Failed to load ./.env.example.\r\n   Starting type checking service...\r\n   Using 1 worker with 2048MB memory limit\r\n   ℹ ｢wds｣: Generating SSL Certificate\r\n   ℹ ｢wds｣: Project is running at https://localhost:3000/\r\n   ℹ ｢wds｣: webpack output is served from /\r\n   ℹ ｢wds｣: Content not from webpack is served from /Volumes/My HD/Users/some-user/Documents/MyCrypto\r\n   ℹ ｢wds｣: 404s will fallback to /index.html\r\n   Browserslist: caniuse-lite is outdated. Please run:\r\n   npx browserslist@latest --update-db\r\n   \r\n   Why you should do it regularly:\r\n   https://github.com/browserslist/browserslist#browsers-data-updating\r\n   Type checking in progress...\r\n    ERROR  Failed to compile with 1 errors                                                                                                                                                             10:16:42 PM\r\n   \r\n   This dependency was not found:\r\n   \r\n   * fs in ./node_modules/dotenv/lib/main.js\r\n   \r\n   To install it, you can run: npm install --save fs\r\n   Webpack Bundle Analyzer is started at http://127.0.0.1:8888\r\n   Use Ctrl+C to close it\r\n   ✖ ｢wdm｣:\r\n   ERROR in ./node_modules/dotenv/lib/main.js\r\n   Module not found: Error: Can't resolve 'fs' in '/Volumes/My HD/Users/some-user/Documents/MyCrypto/node_modules/dotenv/lib'\r\n    @ ./node_modules/dotenv/lib/main.js 24:11-24\r\n    @ ./node_modules/gridplus-sdk/dist/index.js\r\n    @ ./node_modules/@mycrypto/wallets/lib/es/implementations/deterministic/gridplus.js\r\n    @ ./node_modules/@mycrypto/wallets/lib/es/implementations/deterministic/index.js\r\n    @ ./node_modules/@mycrypto/wallets/lib/es/implementations/index.js\r\n    @ ./node_modules/@mycrypto/wallets/lib/es/index.js\r\n    @ ./src/services/Store/store/persist.config.ts\r\n    @ ./src/services/Store/store/root.reducer.ts\r\n    @ ./src/services/Store/store/asset.slice.ts\r\n    @ ./src/services/Store/store/account.slice.ts\r\n    @ ./src/services/Store/store/nft.slice.ts\r\n    @ ./src/services/Store/store/index.ts\r\n    @ ./src/index.tsx\r\n    @ multi ./node_modules/@pmmmwh/react-refresh-webpack-plugin/client/ReactRefreshEntry.js ./node_modules/@pmmmwh/react-refresh-webpack-plugin/client/ErrorOverlayEntry.js ./src/index.tsx\r\n   ℹ ｢wdm｣: Failed to compile.\r\n   No type errors found\r\n   Version: typescript 4.1.2\r\n   Time: 81352ms\r\n   ```\r\n\r\n   </details>\r\n\r\n1. Try to access `http://localhost:3000`, receive error:\r\n\r\n   <img width=\"438\" alt=\"image\" src=\"https://user-images.githubusercontent.com/34702085/201651176-b6f4e919-d6b3-4d63-b0bd-043de663aeef.png\">\r\n\r\n### Description of Your Machine\r\n\r\n- Browser: `Chrome 103.0.5060.134`\r\n- Operating system: `Mac OS Catalina 10.15.7`\r\n- MyCrypto.com: `Running from source`\r\n- MyCrypto Version Number: `457ec2f0a1cce537275c3b67d7e871f1ae3ae162`\r\n- Node version: `12.14.1`",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/1317064683",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/4347#issuecomment-1317064683",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/4347",
    "id": 1317064683,
    "node_id": "IC_kwDOBIA0fM5OgM_r",
    "user": {
      "login": "byforcesunseen",
      "id": 34702085,
      "node_id": "MDQ6VXNlcjM0NzAyMDg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/34702085?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/byforcesunseen",
      "html_url": "https://github.com/byforcesunseen",
      "followers_url": "https://api.github.com/users/byforcesunseen/followers",
      "following_url": "https://api.github.com/users/byforcesunseen/following{/other_user}",
      "gists_url": "https://api.github.com/users/byforcesunseen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/byforcesunseen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/byforcesunseen/subscriptions",
      "organizations_url": "https://api.github.com/users/byforcesunseen/orgs",
      "repos_url": "https://api.github.com/users/byforcesunseen/repos",
      "events_url": "https://api.github.com/users/byforcesunseen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/byforcesunseen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T13:57:23Z",
    "updated_at": "2022-11-16T14:14:41Z",
    "author_association": "NONE",
    "body": "Looks like this issue is caused by the same problem reported here: https://github.com/motdotla/dotenv/issues/692.\r\n\r\nI was able to fix it by appending the following JSON block to the end of `MyCrypto/node_modules/dotenv/package.json`:\r\n\r\n```diff\r\n--- node_modules/dotenv/package.json\t2022-11-17 00:56:23.000000000 +1100\r\n+++ node_modules/dotenv/package.json\t2022-11-16 22:17:08.000000000 +1100\r\n@@ -47,5 +47,9 @@\r\n     \"ignore\": [\r\n       \"flow-typed/\"\r\n     ]\r\n+  },\r\n+  \"browser\": {\r\n+    \"fs\": false,\r\n+    \"os\": false\r\n   }\r\n }\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/1317064683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

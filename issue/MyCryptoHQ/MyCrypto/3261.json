{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/3261",
  "id": 613776787,
  "node_id": "MDU6SXNzdWU2MTM3NzY3ODc=",
  "number": 3261,
  "title": "Access to \"node\" functions in the desktop application despite \"nodeIntegration\" set to \"false\" in window.ts ",
  "user": {
    "login": "Flyy-yu",
    "id": 25512004,
    "node_id": "MDQ6VXNlcjI1NTEyMDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/25512004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Flyy-yu",
    "html_url": "https://github.com/Flyy-yu",
    "followers_url": "https://api.github.com/users/Flyy-yu/followers",
    "following_url": "https://api.github.com/users/Flyy-yu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Flyy-yu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Flyy-yu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Flyy-yu/subscriptions",
    "organizations_url": "https://api.github.com/users/Flyy-yu/orgs",
    "repos_url": "https://api.github.com/users/Flyy-yu/repos",
    "events_url": "https://api.github.com/users/Flyy-yu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Flyy-yu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "409H",
    "id": 2313704,
    "node_id": "MDQ6VXNlcjIzMTM3MDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2313704?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/409H",
    "html_url": "https://github.com/409H",
    "followers_url": "https://api.github.com/users/409H/followers",
    "following_url": "https://api.github.com/users/409H/following{/other_user}",
    "gists_url": "https://api.github.com/users/409H/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/409H/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/409H/subscriptions",
    "organizations_url": "https://api.github.com/users/409H/orgs",
    "repos_url": "https://api.github.com/users/409H/repos",
    "events_url": "https://api.github.com/users/409H/events{/privacy}",
    "received_events_url": "https://api.github.com/users/409H/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "409H",
      "id": 2313704,
      "node_id": "MDQ6VXNlcjIzMTM3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2313704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/409H",
      "html_url": "https://github.com/409H",
      "followers_url": "https://api.github.com/users/409H/followers",
      "following_url": "https://api.github.com/users/409H/following{/other_user}",
      "gists_url": "https://api.github.com/users/409H/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/409H/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/409H/subscriptions",
      "organizations_url": "https://api.github.com/users/409H/orgs",
      "repos_url": "https://api.github.com/users/409H/repos",
      "events_url": "https://api.github.com/users/409H/events{/privacy}",
      "received_events_url": "https://api.github.com/users/409H/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-05-07T05:10:58Z",
  "updated_at": "2020-05-21T14:43:40Z",
  "closed_at": "2020-05-21T14:43:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description of Issue\r\n\r\nI am not sure what's the build process is or why, but \"node\" is enabled in the desktop application despite \"nodeIntegration\" set to \"false\" in window.ts: https://github.com/MyCryptoHQ/MyCrypto/blob/ad07f406970c8850eeb8c3738e9cdd053f06cf4a/electron-app/main/window.ts#L30\r\n\r\n...\r\n\r\n### What exactly were you doing when you encountered this issue?\r\n\r\n0. Open the latest version(1.7.9) of MyCrypto Desktop application\r\n1. Open the console(option+command+i in macOS)\r\n2. type \"require\" in the console. Notice the function is found\r\n3. Turn on computer sound, type \"require('child_process').exec('say hello')\" in the console. Notice the system command \"say hello\" is executed and you hear the voice \"hello\".\r\n\r\n<img width=\"1397\" alt=\"Screen Shot 2020-05-07 at 12 50 22 AM\" src=\"https://user-images.githubusercontent.com/25512004/81255862-cf429800-8ffc-11ea-9c03-e1e93025ce9c.png\">\r\n\r\n\r\n#### More info:\r\nDecompile the app.asar file located at  `/Applications/MyCrypto.app/Contents/Resources/app.asar`\r\nwith command `npx asar extract app.asar destfolder`\r\n\r\nSearch for string \"nodeIntegration\" with the command `grep -inr 'nodeIntegration' .` in the destfolder folder.\r\n\r\n<img width=\"835\" alt=\"Screen Shot 2020-05-07 at 12 59 36 AM\" src=\"https://user-images.githubusercontent.com/25512004/81256293-0c5b5a00-8ffe-11ea-8578-c1aba0debe8c.png\">\r\n\r\n\r\nin the decompiled file \"destfolder/main.js\", \"nodeIntegration\" is set to \"true\"\r\n<img width=\"1118\" alt=\"Screen Shot 2020-05-07 at 12 56 01 AM\" src=\"https://user-images.githubusercontent.com/25512004/81256123-8b03c780-8ffd-11ea-85ed-8d8bb86289cd.png\">\r\n\r\n#### What suppose to happen if \"node\" is disabled:\r\n\r\nThis is from a different electron wallet, you should see \"require is not defined\":\r\n<img width=\"846\" alt=\"Screen Shot 2020-05-07 at 1 00 58 AM\" src=\"https://user-images.githubusercontent.com/25512004/81256351-3e6cbc00-8ffe-11ea-864a-c3a5a2bb2e4a.png\">\r\n\r\n\r\n### How were you accessing your wallet?\r\n\r\n...Ledger, Trezor, MetaMask, Private Key, Keystore File, Mnemonic Phrase?...\r\n\r\n### Description of Your Machine\r\n\r\n- Browser: N/A\r\n- Browser version: N/A\r\n- Operating system: macOS Catalina 10.15.3\r\n- Device: MacBook Pro\r\n- MyCrypto.com vs Desktop Application? Desktop Application\r\n- MyCrypto Version Number: 1.7.9\r\n\r\n### Console Logs / Screenshots\r\n\r\n...\r\n",
  "closed_by": {
    "login": "vilsbole",
    "id": 2429708,
    "node_id": "MDQ6VXNlcjI0Mjk3MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2429708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vilsbole",
    "html_url": "https://github.com/vilsbole",
    "followers_url": "https://api.github.com/users/vilsbole/followers",
    "following_url": "https://api.github.com/users/vilsbole/following{/other_user}",
    "gists_url": "https://api.github.com/users/vilsbole/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vilsbole/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vilsbole/subscriptions",
    "organizations_url": "https://api.github.com/users/vilsbole/orgs",
    "repos_url": "https://api.github.com/users/vilsbole/repos",
    "events_url": "https://api.github.com/users/vilsbole/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vilsbole/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/627022558",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/3261#issuecomment-627022558",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261",
    "id": 627022558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzAyMjU1OA==",
    "user": {
      "login": "LuckyLuker",
      "id": 42247465,
      "node_id": "MDQ6VXNlcjQyMjQ3NDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/42247465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LuckyLuker",
      "html_url": "https://github.com/LuckyLuker",
      "followers_url": "https://api.github.com/users/LuckyLuker/followers",
      "following_url": "https://api.github.com/users/LuckyLuker/following{/other_user}",
      "gists_url": "https://api.github.com/users/LuckyLuker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LuckyLuker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LuckyLuker/subscriptions",
      "organizations_url": "https://api.github.com/users/LuckyLuker/orgs",
      "repos_url": "https://api.github.com/users/LuckyLuker/repos",
      "events_url": "https://api.github.com/users/LuckyLuker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LuckyLuker/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T23:39:39Z",
    "updated_at": "2020-05-11T23:39:39Z",
    "author_association": "COLLABORATOR",
    "body": "[ch6072]",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/627022558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/628021070",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/3261#issuecomment-628021070",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261",
    "id": 628021070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODAyMTA3MA==",
    "user": {
      "login": "vilsbole",
      "id": 2429708,
      "node_id": "MDQ6VXNlcjI0Mjk3MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2429708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vilsbole",
      "html_url": "https://github.com/vilsbole",
      "followers_url": "https://api.github.com/users/vilsbole/followers",
      "following_url": "https://api.github.com/users/vilsbole/following{/other_user}",
      "gists_url": "https://api.github.com/users/vilsbole/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vilsbole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vilsbole/subscriptions",
      "organizations_url": "https://api.github.com/users/vilsbole/orgs",
      "repos_url": "https://api.github.com/users/vilsbole/repos",
      "events_url": "https://api.github.com/users/vilsbole/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vilsbole/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-13T14:19:19Z",
    "updated_at": "2020-05-13T14:19:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Flyy-yu Thanks for reaching out! @409H fixed this issue with #3272.\r\nIt will be included in the next release.\r\nWe'll close this issue when at that moment.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/628021070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/628048766",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/3261#issuecomment-628048766",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261",
    "id": 628048766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODA0ODc2Ng==",
    "user": {
      "login": "Flyy-yu",
      "id": 25512004,
      "node_id": "MDQ6VXNlcjI1NTEyMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25512004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Flyy-yu",
      "html_url": "https://github.com/Flyy-yu",
      "followers_url": "https://api.github.com/users/Flyy-yu/followers",
      "following_url": "https://api.github.com/users/Flyy-yu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Flyy-yu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Flyy-yu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Flyy-yu/subscriptions",
      "organizations_url": "https://api.github.com/users/Flyy-yu/orgs",
      "repos_url": "https://api.github.com/users/Flyy-yu/repos",
      "events_url": "https://api.github.com/users/Flyy-yu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Flyy-yu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-13T14:59:26Z",
    "updated_at": "2020-05-13T15:02:43Z",
    "author_association": "NONE",
    "body": "Wait, I am confused. \r\n\r\nWhy \"nodeIntegration\" set to `true` in  the \"enhancement/electron-sandbox\" branch https://github.com/MyCryptoHQ/MyCrypto/blob/e360082f956586ff6be75571450fcc43bef0a9c8/electron-app/main/window.ts#L28 \r\n\r\nWhile In the master branch, it states\r\n```\r\n      // For security reasons the following params should not be modified\r\n      // https://electronjs.org/docs/tutorial/security#isolation-for-untrusted-content\r\n      nodeIntegration: false,\r\n```\r\nhttps://github.com/MyCryptoHQ/MyCrypto/blob/32804506c77b3e2401ae803c5e3477ba6c7a050b/electron-app/main/window.ts#L30\r\n\r\n\r\nDo you guys use the code from the `Legacy` branch to build the electron desktop app?",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/628048766/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/632122537",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/3261#issuecomment-632122537",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/3261",
    "id": 632122537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjEyMjUzNw==",
    "user": {
      "login": "vilsbole",
      "id": 2429708,
      "node_id": "MDQ6VXNlcjI0Mjk3MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2429708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vilsbole",
      "html_url": "https://github.com/vilsbole",
      "followers_url": "https://api.github.com/users/vilsbole/followers",
      "following_url": "https://api.github.com/users/vilsbole/following{/other_user}",
      "gists_url": "https://api.github.com/users/vilsbole/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vilsbole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vilsbole/subscriptions",
      "organizations_url": "https://api.github.com/users/vilsbole/orgs",
      "repos_url": "https://api.github.com/users/vilsbole/repos",
      "events_url": "https://api.github.com/users/vilsbole/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vilsbole/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-21T14:37:46Z",
    "updated_at": "2020-05-21T14:43:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for calling attention to this. During the initial review I didn't see that we were using two ipcMain calls and it allowed us to remove one of them!\r\n\r\n> Do you guys use the code from the Legacy branch to build the electron desktop app?\r\n\r\nYes, atm the Releases are done through the Legacy branch while we complete the new features. \r\n\r\nPreviously the flag was set to `true` to enable the integration with shapeshift (the only external code that we would run). Now that this integration is deprecated we can set the flag back to false.\r\n\r\nSince #3272 has been merged I'm closing this issue now. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/632122537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/704",
  "id": 285332620,
  "node_id": "MDU6SXNzdWUyODUzMzI2MjA=",
  "number": 704,
  "title": "Token Conflict Resolution",
  "user": {
    "login": "dternyak",
    "id": 7861465,
    "node_id": "MDQ6VXNlcjc4NjE0NjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7861465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dternyak",
    "html_url": "https://github.com/dternyak",
    "followers_url": "https://api.github.com/users/dternyak/followers",
    "following_url": "https://api.github.com/users/dternyak/following{/other_user}",
    "gists_url": "https://api.github.com/users/dternyak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dternyak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dternyak/subscriptions",
    "organizations_url": "https://api.github.com/users/dternyak/orgs",
    "repos_url": "https://api.github.com/users/dternyak/repos",
    "events_url": "https://api.github.com/users/dternyak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dternyak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "wbobeirne",
    "id": 649992,
    "node_id": "MDQ6VXNlcjY0OTk5Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wbobeirne",
    "html_url": "https://github.com/wbobeirne",
    "followers_url": "https://api.github.com/users/wbobeirne/followers",
    "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
    "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
    "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
    "repos_url": "https://api.github.com/users/wbobeirne/repos",
    "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/milestones/7",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/milestone/7",
    "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/milestones/7/labels",
    "id": 3018110,
    "node_id": "MDk6TWlsZXN0b25lMzAxODExMA==",
    "number": 7,
    "title": "Sprint 7",
    "description": "",
    "creator": {
      "login": "dternyak",
      "id": 7861465,
      "node_id": "MDQ6VXNlcjc4NjE0NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7861465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dternyak",
      "html_url": "https://github.com/dternyak",
      "followers_url": "https://api.github.com/users/dternyak/followers",
      "following_url": "https://api.github.com/users/dternyak/following{/other_user}",
      "gists_url": "https://api.github.com/users/dternyak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dternyak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dternyak/subscriptions",
      "organizations_url": "https://api.github.com/users/dternyak/orgs",
      "repos_url": "https://api.github.com/users/dternyak/repos",
      "events_url": "https://api.github.com/users/dternyak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dternyak/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 11,
    "state": "closed",
    "created_at": "2018-01-08T01:29:18Z",
    "updated_at": "2018-01-25T02:42:30Z",
    "due_on": "2018-01-15T08:00:00Z",
    "closed_at": "2018-01-19T05:23:30Z"
  },
  "comments": 3,
  "created_at": "2018-01-01T22:12:52Z",
  "updated_at": "2018-01-11T06:50:31Z",
  "closed_at": "2018-01-11T06:50:31Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### NOTE: This issue is largely a request for comment, as we need to develop a spec on how we should override / resolve conflicts before proceeding with the implementation. \r\n\r\n\r\nIn cases where custom tokens and the default token list conflict with each other, we need to determine a conflict resolution process and override with either the custom token or the default token.\r\n\r\nHow should we handle conflicts between default/custom tokens when the default list updates with an existing custom token?\r\n         - New token launches (TOKN)\r\n         - MEW does not yet include TOKN in the default list\r\n         - User inputs TOKN as a custom token\r\n         - Later, MEW updates the default token list to include TOKN\r\n\r\n\r\n- [ ] Do we clear the custom token in this case (and clear from LS)?\r\n- [ ] What if the symbols are identical, but the contract addresses differ?\r\n- [ ] What if the contract addresses are identical, but the symbols differ?\r\n- [ ] What if the decimals differ?\r\n",
  "closed_by": {
    "login": "dternyak",
    "id": 7861465,
    "node_id": "MDQ6VXNlcjc4NjE0NjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7861465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dternyak",
    "html_url": "https://github.com/dternyak",
    "followers_url": "https://api.github.com/users/dternyak/followers",
    "following_url": "https://api.github.com/users/dternyak/following{/other_user}",
    "gists_url": "https://api.github.com/users/dternyak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dternyak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dternyak/subscriptions",
    "organizations_url": "https://api.github.com/users/dternyak/orgs",
    "repos_url": "https://api.github.com/users/dternyak/repos",
    "events_url": "https://api.github.com/users/dternyak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dternyak/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/354706056",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/704#issuecomment-354706056",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704",
    "id": 354706056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDcwNjA1Ng==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-02T05:42:50Z",
    "updated_at": "2018-01-02T05:42:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think in the future, we'll end up expanding tokens with more metadata. Icons, full names, links, etc. So I think it's worthwhile to replace custom tokens users add with the real deal, if we end up adding them.\r\n\r\nHowever, I think the way we use ticker as a unique ID right now is bad. It's very likely that we'll end up with a sizable conflict and some point, and there are plenty of small conflicts today. So here's what I'm thinking:\r\n\r\n* If a custom token matches the address & decimal of a hard coded token, we remove it. Even if the ticker is wrong, some tokens change tickers if there's a conflict.\r\n* Anywhere we enforce uniqueness (dictionaries, react element keys) we need to use a more unique thing than ticker. Perhaps something like ticker + address + decimal.\r\n* Anywhere that we store token information long-term, we need to consider what things are possible to change. Tickers can definitely change, but it may even be possible for addresses and decimals to change too, assuming something catastrophic happens and the original contract is replaced or something like that.\r\n\r\nThe third one is the only thing that stumps me. If we can't be sure a token keeps its info, how else can we store and identify it?",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/354706056/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/355871134",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/704#issuecomment-355871134",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704",
    "id": 355871134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTg3MTEzNA==",
    "user": {
      "login": "dternyak",
      "id": 7861465,
      "node_id": "MDQ6VXNlcjc4NjE0NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7861465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dternyak",
      "html_url": "https://github.com/dternyak",
      "followers_url": "https://api.github.com/users/dternyak/followers",
      "following_url": "https://api.github.com/users/dternyak/following{/other_user}",
      "gists_url": "https://api.github.com/users/dternyak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dternyak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dternyak/subscriptions",
      "organizations_url": "https://api.github.com/users/dternyak/orgs",
      "repos_url": "https://api.github.com/users/dternyak/repos",
      "events_url": "https://api.github.com/users/dternyak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dternyak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T01:48:45Z",
    "updated_at": "2018-01-08T01:48:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "To your third point - this can largely be handled by maintainers of the token lists, unless I'm misunderstanding your statement.\r\n\r\nI think between your first two points, we have enough of a spec for robust token conflict management. However, I favor amending the first point to remove the check for identical decimal and rely only on contract address. \r\n\r\nTo summarize:\r\n- Default token list is taken as the source of truth\r\n- If a custom token matches the **contract address** of an existing default token, remove the custom token.\r\n- If a custom token matches the **symbol** of an existing default token, remove the custom token.\r\n    - NOTE: Users will still be able to have multiple tokens with similar symbols by adding a SYMB (2) or otherwise mutating the symbol name. \r\n\r\n\r\nWe'll also need to ensure that we aren't listing multiple tokens with identical symbols in our own default token list. I'm not sure if this is an issue today, but I wanted to make a note of it. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/355871134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/356082281",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/704#issuecomment-356082281",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/704",
    "id": 356082281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjA4MjI4MQ==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T20:12:38Z",
    "updated_at": "2018-01-08T20:12:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "> this can largely be handled by maintainers of the token lists, unless I'm misunderstanding your statement.\r\n\r\nI'm talking about local storage. Right now we store ticker for which tokens a wallet tracks, but that could be a problem if a token changes their ticker. Maybe it's minor enough to ignore though, users can always re-scan. I say we punt on this until we're told it's a problem by somebody.\r\n\r\nThe rest of that sounds good though. We can run a quick de-dupe every time someone unlocks their wallet, before we request token balances. Should be a fast enough process.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/356082281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

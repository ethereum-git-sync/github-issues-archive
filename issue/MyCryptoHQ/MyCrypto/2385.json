{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385",
  "id": 410448918,
  "node_id": "MDU6SXNzdWU0MTA0NDg5MTg=",
  "number": 2385,
  "title": "Bad calculation of nonce",
  "user": {
    "login": "jonathansmirnoff",
    "id": 7558841,
    "node_id": "MDQ6VXNlcjc1NTg4NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7558841?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jonathansmirnoff",
    "html_url": "https://github.com/jonathansmirnoff",
    "followers_url": "https://api.github.com/users/jonathansmirnoff/followers",
    "following_url": "https://api.github.com/users/jonathansmirnoff/following{/other_user}",
    "gists_url": "https://api.github.com/users/jonathansmirnoff/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jonathansmirnoff/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jonathansmirnoff/subscriptions",
    "organizations_url": "https://api.github.com/users/jonathansmirnoff/orgs",
    "repos_url": "https://api.github.com/users/jonathansmirnoff/repos",
    "events_url": "https://api.github.com/users/jonathansmirnoff/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jonathansmirnoff/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 654893566,
      "node_id": "MDU6TGFiZWw2NTQ4OTM1NjY=",
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/labels/type:%20enhancement",
      "name": "type: enhancement",
      "color": "008080",
      "default": false,
      "description": "Items that improve overall user experience and/or expand on existing features."
    },
    {
      "id": 1173965230,
      "node_id": "MDU6TGFiZWwxMTczOTY1MjMw",
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/labels/cat:%20sending",
      "name": "cat: sending",
      "color": "663980",
      "default": false,
      "description": "Issues or features related to sending transactions, including nonce, gas, etc."
    },
    {
      "id": 2208577035,
      "node_id": "MDU6TGFiZWwyMjA4NTc3MDM1",
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/labels/wontfix",
      "name": "wontfix",
      "color": "ffffff",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-02-14T19:13:00Z",
  "updated_at": "2020-07-23T14:53:42Z",
  "closed_at": "2020-07-23T14:53:42Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description of the Issue\r\n\r\nIf a transaction is not mined, this transaction it's considering in the nonce count. So it's posible to corrupt the local db and not allow to do any transfer from this account. The only solution to this is to force a particular nonce or clean the db.\r\n\r\n### Steps to Reproduce\r\n\r\n1. Get a new account with gas.\r\n2. Create a tx and force a high nonce for example 150. (You need to click in *+Advance*).\r\n3. Check that the transaction appears in *Recent Transaction* and never is confirmed or failed.\r\n4. Create a new tx and review that the suggested nonce is 151.\r\n\r\n### Workaround\r\n\r\nIt is important to use the method [eth_getTransactionCount](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactioncount) to get the correct value of the nonce and avoid to use local db transaction count.\r\nAlso if the local cache is cleaned MyCrypto checks the nonce using eth_getTransactionCount.",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/465606761",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-465606761",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 465606761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTYwNjc2MQ==",
    "user": {
      "login": "aeidelman",
      "id": 15142042,
      "node_id": "MDQ6VXNlcjE1MTQyMDQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/15142042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aeidelman",
      "html_url": "https://github.com/aeidelman",
      "followers_url": "https://api.github.com/users/aeidelman/followers",
      "following_url": "https://api.github.com/users/aeidelman/following{/other_user}",
      "gists_url": "https://api.github.com/users/aeidelman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aeidelman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aeidelman/subscriptions",
      "organizations_url": "https://api.github.com/users/aeidelman/orgs",
      "repos_url": "https://api.github.com/users/aeidelman/repos",
      "events_url": "https://api.github.com/users/aeidelman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aeidelman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-20T14:46:45Z",
    "updated_at": "2019-02-20T14:46:45Z",
    "author_association": "NONE",
    "body": "Hi MC team, if you confirm the above we'll be happy to work on this ourselves.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/465606761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/465626070",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-465626070",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 465626070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTYyNjA3MA==",
    "user": {
      "login": "blurpesec",
      "id": 29407814,
      "node_id": "MDQ6VXNlcjI5NDA3ODE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/29407814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blurpesec",
      "html_url": "https://github.com/blurpesec",
      "followers_url": "https://api.github.com/users/blurpesec/followers",
      "following_url": "https://api.github.com/users/blurpesec/following{/other_user}",
      "gists_url": "https://api.github.com/users/blurpesec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blurpesec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blurpesec/subscriptions",
      "organizations_url": "https://api.github.com/users/blurpesec/orgs",
      "repos_url": "https://api.github.com/users/blurpesec/repos",
      "events_url": "https://api.github.com/users/blurpesec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blurpesec/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-20T15:30:00Z",
    "updated_at": "2019-02-20T15:32:50Z",
    "author_association": "COLLABORATOR",
    "body": "Hey guys, relying on only `eth_getTransactionCount` makes it so that you cannot send back-to-back transactions on the interface, because you have to wait for them to be confirmed on-chain before the nonce will update correctly. This is not acceptable because it inhibits the usability of the interface when users want to send multiple transactions in the same block, or when they want to send back-to-back transactions. We would be open to working out an alternative solution, if you have any suggestions on how to provide this functionality without handicapping back-to-back transactions or stacking of transactions into the same block.\r\n\r\nIdeally, the interface would make it so that no one ever has to manually enter a nonce to send a transaction, unless they want to overwrite an existing \"stuck\" transaction.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/465626070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/466128198",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-466128198",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 466128198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjEyODE5OA==",
    "user": {
      "login": "jonathansmirnoff",
      "id": 7558841,
      "node_id": "MDQ6VXNlcjc1NTg4NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7558841?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathansmirnoff",
      "html_url": "https://github.com/jonathansmirnoff",
      "followers_url": "https://api.github.com/users/jonathansmirnoff/followers",
      "following_url": "https://api.github.com/users/jonathansmirnoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathansmirnoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathansmirnoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathansmirnoff/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathansmirnoff/orgs",
      "repos_url": "https://api.github.com/users/jonathansmirnoff/repos",
      "events_url": "https://api.github.com/users/jonathansmirnoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathansmirnoff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-21T19:13:45Z",
    "updated_at": "2019-02-21T19:13:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @blurpesec we appreciate your response. \r\nWe think we can use [eth_getTransactionCount](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactioncount) passing `pending` parameter (for the pending state/transactions). If we relay on `eth_getTransactionCount` we can send multiple transactions without waiting to be confirme because the `eth_getTransactionCount` returns the count of the pending transactions and we can avoid to use the storage.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/466128198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/466168596",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-466168596",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 466168596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjE2ODU5Ng==",
    "user": {
      "login": "blurpesec",
      "id": 29407814,
      "node_id": "MDQ6VXNlcjI5NDA3ODE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/29407814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blurpesec",
      "html_url": "https://github.com/blurpesec",
      "followers_url": "https://api.github.com/users/blurpesec/followers",
      "following_url": "https://api.github.com/users/blurpesec/following{/other_user}",
      "gists_url": "https://api.github.com/users/blurpesec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blurpesec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blurpesec/subscriptions",
      "organizations_url": "https://api.github.com/users/blurpesec/orgs",
      "repos_url": "https://api.github.com/users/blurpesec/repos",
      "events_url": "https://api.github.com/users/blurpesec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blurpesec/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-21T21:13:08Z",
    "updated_at": "2019-02-21T21:24:17Z",
    "author_association": "COLLABORATOR",
    "body": "This is a step in the right direction but this only works if the person is sending to a node that contains the tx in it's transaction pool. Functionality may not always be referring to even the same cluster of nodes due to the way our client-side node balancer works. I'm not too sure how fast pending transactions propagate between our nodes, and across all nodes of external clusters that we work with.. I'll try and find out more about this though.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/466168596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/472853670",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-472853670",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 472853670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mjg1MzY3MA==",
    "user": {
      "login": "jonathansmirnoff",
      "id": 7558841,
      "node_id": "MDQ6VXNlcjc1NTg4NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7558841?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathansmirnoff",
      "html_url": "https://github.com/jonathansmirnoff",
      "followers_url": "https://api.github.com/users/jonathansmirnoff/followers",
      "following_url": "https://api.github.com/users/jonathansmirnoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathansmirnoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathansmirnoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathansmirnoff/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathansmirnoff/orgs",
      "repos_url": "https://api.github.com/users/jonathansmirnoff/repos",
      "events_url": "https://api.github.com/users/jonathansmirnoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathansmirnoff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-14T13:28:25Z",
    "updated_at": "2019-03-14T13:28:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@blurpesec, did you have the chance to review this issue? We still thinking that the best option is to use `eth_getTransactionCount`. ",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/472853670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/659435495",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/2385#issuecomment-659435495",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/2385",
    "id": 659435495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTQzNTQ5NQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-07-16T14:06:01Z",
    "updated_at": "2020-07-16T14:06:01Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/659435495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

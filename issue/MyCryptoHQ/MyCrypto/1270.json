{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270",
  "id": 302587113,
  "node_id": "MDU6SXNzdWUzMDI1ODcxMTM=",
  "number": 1270,
  "title": "SCAN for coins on a Trezor",
  "user": {
    "login": "CryptoToit",
    "id": 36384396,
    "node_id": "MDQ6VXNlcjM2Mzg0Mzk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/36384396?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CryptoToit",
    "html_url": "https://github.com/CryptoToit",
    "followers_url": "https://api.github.com/users/CryptoToit/followers",
    "following_url": "https://api.github.com/users/CryptoToit/following{/other_user}",
    "gists_url": "https://api.github.com/users/CryptoToit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CryptoToit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CryptoToit/subscriptions",
    "organizations_url": "https://api.github.com/users/CryptoToit/orgs",
    "repos_url": "https://api.github.com/users/CryptoToit/repos",
    "events_url": "https://api.github.com/users/CryptoToit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CryptoToit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-03-06T07:07:22Z",
  "updated_at": "2018-03-07T22:51:17Z",
  "closed_at": "2018-03-07T22:51:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "After login with a TREZOR > View Account > Scan for Tokens\r\n\r\nFound:\r\nSNM\r\nZRX\r\n\r\nHowever I have the following on my Trezor:\r\nAST\r\nBPT\r\nENJ\r\nKNC\r\nNULS\r\nSNM\r\nUTK\r\nZRX\r\ncV\r\n\r\nWhen I try for the second time (after logging in again) I get the following error msg: \r\n\r\nToken Balances\r\nFailed to fetch token values\r\n\r\n\r\n",
  "closed_by": {
    "login": "wbobeirne",
    "id": 649992,
    "node_id": "MDQ6VXNlcjY0OTk5Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wbobeirne",
    "html_url": "https://github.com/wbobeirne",
    "followers_url": "https://api.github.com/users/wbobeirne/followers",
    "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
    "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
    "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
    "repos_url": "https://api.github.com/users/wbobeirne/repos",
    "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370695140",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270#issuecomment-370695140",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
    "id": 370695140,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY5NTE0MA==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T07:58:17Z",
    "updated_at": "2018-03-06T07:58:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "The majority of your missing tokens simply aren't on our list of tokens over here: https://github.com/MyCryptoHQ/MyCrypto/blob/develop/common/config/tokens/eth.json. We're currently working on expanding that.\r\n\r\nAs for the second failed load, would you be able to open up your Javascript console and copy / paste whatever error is in there? There are many reasons that a load might fail.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370695140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370756835",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270#issuecomment-370756835",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
    "id": 370756835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDc1NjgzNQ==",
    "user": {
      "login": "CryptoToit",
      "id": 36384396,
      "node_id": "MDQ6VXNlcjM2Mzg0Mzk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36384396?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptoToit",
      "html_url": "https://github.com/CryptoToit",
      "followers_url": "https://api.github.com/users/CryptoToit/followers",
      "following_url": "https://api.github.com/users/CryptoToit/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptoToit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptoToit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptoToit/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptoToit/orgs",
      "repos_url": "https://api.github.com/users/CryptoToit/repos",
      "events_url": "https://api.github.com/users/CryptoToit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptoToit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T11:49:11Z",
    "updated_at": "2018-03-06T11:50:41Z",
    "author_association": "NONE",
    "body": "Once Wallet is open and it displays the coins (the 2 it picks up from the original post) and I then do a \"scan for new tokens\":\r\n\r\n\"Failed to fetch token values\"\r\n\r\nclient.1be3dddc.js:11 Failed to scan for tokens Error: unsupported value conversion\r\n    at handleValues (client.1be3dddc.js:1)\r\n    at TokenValue (client.1be3dddc.js:1)\r\n    at response.map.item (client.1be3dddc.js:1)\r\n    at Array.map (<anonymous>)\r\n    at client.batch.then.response (client.1be3dddc.js:1)\r\n    at <anonymous>\r\nscanWalletForTokens @ client.1be3dddc.js:11\r\n\r\nPS - I also have two custom Tokens linked to my account",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370756835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370886828",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270#issuecomment-370886828",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
    "id": 370886828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDg4NjgyOA==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T18:49:36Z",
    "updated_at": "2018-03-06T18:49:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks, that's extremely helpful and narrows down where this is happening to https://github.com/MyCryptoHQ/MyCrypto/blob/develop/common/components/BalanceSidebar/EquivalentValues.tsx#L261\r\n\r\nThe presence of custom tokens definitely seems like it could be related. Would you mind sending me the following information in an email (for your privacy):\r\n* Your ETH address (_NOT_ your private key)\r\n* The two custom tokens info:\r\n  * Symbol\r\n  * Contract address\r\n  * Decimal\r\n\r\nYou can email me at will(at)mycrypto.com. That should be enough info to replicate the issue so that we can solve it. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370886828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370927504",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270#issuecomment-370927504",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
    "id": 370927504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDkyNzUwNA==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T21:04:09Z",
    "updated_at": "2018-03-06T21:04:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "My previous comment was wrong, it's actually happening here: https://github.com/MyCryptoHQ/MyCrypto/blob/develop/common/libs/nodes/rpc/index.ts#L80 It looks like this happens when the balance checks error out. Here's an example of one of them erroring:\r\n\r\n#### Request\r\n```\r\n{\r\n  \"method\": \"eth_call\",\r\n  \"params\": [\r\n    {\r\n      \"to\": \"0x983f6d60db79ea8ca4eb9968c6aff8cfa04b3c63\",\r\n      \"data\": \"0x70a0823100000000000000000000000030cf8aa72c4e69e35e0e48e785176704d6d70c7d\"\r\n    },\r\n    \"pending\"\r\n  ],\r\n  \"id\": \"ccd3f8a83671b8c23dc33a7085eaf5e3\",\r\n  \"jsonrpc\": \"2.0\"\r\n}\r\n```\r\n#### Response\r\n```\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"error\": {\r\n    \"code\": -32015,\r\n    \"message\": \"Transaction execution error.\",\r\n    \"data\": \"Internal(\\\"Database missing expected key: e1b9…75a7\\\")\"\r\n  },\r\n  \"id\": \"ccd3f8a83671b8c23dc33a7085eaf5e3\"\r\n}\r\n```\r\n\r\nIt looks like whatever we're doing to verify the balances are OK isn't working quite right. This ends up going to the success case, where it errors out because response.result is `undefined`.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/370927504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/371314004",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1270#issuecomment-371314004",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1270",
    "id": 371314004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTMxNDAwNA==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-07T22:51:17Z",
    "updated_at": "2018-03-07T22:51:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this in favor of the more focused #1293.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/371314004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

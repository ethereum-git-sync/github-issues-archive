{
  "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120",
  "repository_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto",
  "labels_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120/labels{/name}",
  "comments_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120/comments",
  "events_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120/events",
  "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1120",
  "id": 297935268,
  "node_id": "MDU6SXNzdWUyOTc5MzUyNjg=",
  "number": 1120,
  "title": "Issue Adding Custom Nodes (OPTIONS vs POST) (Parity vs Geth)",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-02-16T22:09:40Z",
  "updated_at": "2018-02-16T23:06:37Z",
  "closed_at": "2018-02-16T23:06:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When trying to add custom Parity nodes sometimes my browser seems to sends \"OPTIONS\" w/o any data instead of  a \"POST\" asking for the eth_blockNumber which results in a 403... Here's an example from FireFox Developer Tools:\r\n\r\n![image](https://user-images.githubusercontent.com/8877131/36330549-b03e0850-132f-11e8-8544-c902600b0489.png)\r\n\r\nI click Add Custom Node, and I enter my node information, it's exactly the same config for both nodes...\r\n\r\nUsing the developer tools to \"Copy as cURL\" results in this:\r\n\r\n```\r\ncurl \"https://paritynodes.mydomain.lan/\" -X OPTIONS -H \"Host: paritynodes.mydomain.lan\" -H \"User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:58.0) Gecko/20100101 Firefox/58.0\" -H \"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\" -H \"Accept-Language: en-US,en;q=0.5\" --compressed -H \"Access-Control-Request-Method: POST\" -H \"Access-Control-Request-Headers: content-type\" -H \"Origin: https://mycrypto.com\" -H \"DNT: 1\" -H \"Connection: keep-alive\"\r\n```\r\n\r\nand this:\r\n\r\n```\r\ncurl \"https://gethnodes.mydomain.lan/\" -H \"Host: gethnodes.mydomain.lan\" -H \"User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:58.0) Gecko/20100101 Firefox/58.0\" -H \"Accept: application/json, text/plain, */*\" -H \"Accept-Language: en-US,en;q=0.5\" --compressed -H \"Referer: https://mycrypto.com/\" -H \"Content-Type: application/json; charset=UTF-8\" -H \"Origin: https://mycrypto.com\" -H \"DNT: 1\" -H \"Connection: keep-alive\" --data \"{\"\"method\"\":\"\"eth_blockNumber\"\",\"\"id\"\":\"\"735664f04248b13270b0baf996e4a2f2\"\",\"\"jsonrpc\"\":\"\"2.0\"\"}\"\r\n```\r\n\r\nI have no idea why the first one is of method \"OPTIONS\" nor does it contain any data being sent to the node. And this isn't a FireFox issue because Chrome seems to do the same thing...\r\n\r\nThese nodes work perfectly fine using HTTPS if I query them manually...\r\n\r\nHere is in in Chrome Developer Tools too:\r\n![image](https://user-images.githubusercontent.com/8877131/36330895-62048644-1331-11e8-937f-86306dbd2ef3.png)\r\n\r\n![image](https://user-images.githubusercontent.com/8877131/36331485-99e13d08-1333-11e8-8538-17336df38c71.png)\r\n\r\n\r\nIn case there's a question about NGINX, the configs for the nodes are identical...\r\n\r\nLiterally the only difference is that one is Parity and the other is Geth (and their FQDNs).",
  "closed_by": {
    "login": "wbobeirne",
    "id": 649992,
    "node_id": "MDQ6VXNlcjY0OTk5Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wbobeirne",
    "html_url": "https://github.com/wbobeirne",
    "followers_url": "https://api.github.com/users/wbobeirne/followers",
    "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
    "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
    "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
    "repos_url": "https://api.github.com/users/wbobeirne/repos",
    "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/366384292",
    "html_url": "https://github.com/MyCryptoHQ/MyCrypto/issues/1120#issuecomment-366384292",
    "issue_url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/1120",
    "id": 366384292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjM4NDI5Mg==",
    "user": {
      "login": "wbobeirne",
      "id": 649992,
      "node_id": "MDQ6VXNlcjY0OTk5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbobeirne",
      "html_url": "https://github.com/wbobeirne",
      "followers_url": "https://api.github.com/users/wbobeirne/followers",
      "following_url": "https://api.github.com/users/wbobeirne/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbobeirne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbobeirne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbobeirne/subscriptions",
      "organizations_url": "https://api.github.com/users/wbobeirne/orgs",
      "repos_url": "https://api.github.com/users/wbobeirne/repos",
      "events_url": "https://api.github.com/users/wbobeirne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbobeirne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-16T23:06:37Z",
    "updated_at": "2018-02-16T23:06:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is what's known as a CORS preflight request, an innocuous request to make sure that the cross-origin receiver will be OK with our request https://developer.mozilla.org/en-US/docs/Glossary/Preflight_request.\r\n\r\nDoes this look similar to your issue? https://github.com/paritytech/jsonrpc/issues/114 Either way, this is browser behavior that we can't override, so unfortunately I think Parity will have to work this one out for their RPC servers.",
    "reactions": {
      "url": "https://api.github.com/repos/MyCryptoHQ/MyCrypto/issues/comments/366384292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

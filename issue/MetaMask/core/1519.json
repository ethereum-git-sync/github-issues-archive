{
  "url": "https://api.github.com/repos/MetaMask/core/issues/1519",
  "repository_url": "https://api.github.com/repos/MetaMask/core",
  "labels_url": "https://api.github.com/repos/MetaMask/core/issues/1519/labels{/name}",
  "comments_url": "https://api.github.com/repos/MetaMask/core/issues/1519/comments",
  "events_url": "https://api.github.com/repos/MetaMask/core/issues/1519/events",
  "html_url": "https://github.com/MetaMask/core/issues/1519",
  "id": 1808405792,
  "node_id": "I_kwDOCBB0Cc5ryhUg",
  "number": 1519,
  "title": "Update Token List Controller to use new API endpoint",
  "user": {
    "login": "hesterbruikman",
    "id": 35233054,
    "node_id": "MDQ6VXNlcjM1MjMzMDU0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35233054?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hesterbruikman",
    "html_url": "https://github.com/hesterbruikman",
    "followers_url": "https://api.github.com/users/hesterbruikman/followers",
    "following_url": "https://api.github.com/users/hesterbruikman/following{/other_user}",
    "gists_url": "https://api.github.com/users/hesterbruikman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hesterbruikman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hesterbruikman/subscriptions",
    "organizations_url": "https://api.github.com/users/hesterbruikman/orgs",
    "repos_url": "https://api.github.com/users/hesterbruikman/repos",
    "events_url": "https://api.github.com/users/hesterbruikman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hesterbruikman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5330766523,
      "node_id": "LA_kwDOCBB0Cc8AAAABPb0Kuw",
      "url": "https://api.github.com/repos/MetaMask/core/labels/team-shared-libraries",
      "name": "team-shared-libraries",
      "color": "c5def5",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-07-17T19:01:40Z",
  "updated_at": "2023-11-02T15:24:23Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Background\r\nOn the token list controller, there is an endpoint used to fetch a list of tokens. Download of the total list is 2.2 Mb of data. After fetching this list, the Mobile app filters this list by duplicate symbols. This process is increasing app load time.\r\n\r\n### Proposed solution\r\nRemove the tokens filter logic from the core repo side. The codefi team has added parameters to enable this. Resulting in a total list of 1000 tokens for 66 kb. This will result in a more performative app but also will reduce server costs and less need for bandwidth for our mobile users.\r\n\r\n### Technical Details\r\nCore repo changes:\r\n\r\nOn token-service.ts changegetTokensURL for the new endpoint\r\nOn TokenListController.ts delete line 280 filteredTokenList to line 297 (this logic is on the api side now)\r\nDo the necessary changes for this to work as with the previous endpoint\r\nMobile changes:\r\nSuggestion (We should aim to instead of creating a patch, update the assets-controller version instead):\r\n\r\nCreate a patch with the changes above\r\n\r\n### Acceptance Criteria\r\n- [ ] Update endpoint (https://token-api.metaswap.codefi.network/tokens/1?occurrenceFloor=3&includeNativeAssets=false&includeDuplicateSymbolAssets=false&includeTokenFees=false&includeAssetType=false)\r\n- [ ] Remove logic to filter tokens\r\n\r\nThe token list should be working the exact same way as it was.\r\nScenario: Token list on token detection feature\r\n\r\nGIVEN a user is in wallet view\r\nWHEN a user does have tokens to import\r\nTHEN it should show those tokens (Token detection feature)\r\nScenario: Token list on token detection feature\r\n\r\nGIVEN a user is in wallet view\r\nWHEN a user tries to import a token manually\r\nTHEN it should be able to find the token by the name\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/MetaMask/core/issues/1519/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MetaMask/core/issues/1519/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1638711510",
    "html_url": "https://github.com/MetaMask/core/issues/1519#issuecomment-1638711510",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1519",
    "id": 1638711510,
    "node_id": "IC_kwDOCBB0Cc5hrMDW",
    "user": {
      "login": "hesterbruikman",
      "id": 35233054,
      "node_id": "MDQ6VXNlcjM1MjMzMDU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35233054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hesterbruikman",
      "html_url": "https://github.com/hesterbruikman",
      "followers_url": "https://api.github.com/users/hesterbruikman/followers",
      "following_url": "https://api.github.com/users/hesterbruikman/following{/other_user}",
      "gists_url": "https://api.github.com/users/hesterbruikman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hesterbruikman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hesterbruikman/subscriptions",
      "organizations_url": "https://api.github.com/users/hesterbruikman/orgs",
      "repos_url": "https://api.github.com/users/hesterbruikman/repos",
      "events_url": "https://api.github.com/users/hesterbruikman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hesterbruikman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-17T19:03:24Z",
    "updated_at": "2023-07-17T19:03:24Z",
    "author_association": "NONE",
    "body": "@tommasini could you please add any details as needed?\r\n\r\ncc @Gudahtt ",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1638711510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1639543763",
    "html_url": "https://github.com/MetaMask/core/issues/1519#issuecomment-1639543763",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1519",
    "id": 1639543763,
    "node_id": "IC_kwDOCBB0Cc5huXPT",
    "user": {
      "login": "tommasini",
      "id": 46944231,
      "node_id": "MDQ6VXNlcjQ2OTQ0MjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/46944231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tommasini",
      "html_url": "https://github.com/tommasini",
      "followers_url": "https://api.github.com/users/tommasini/followers",
      "following_url": "https://api.github.com/users/tommasini/following{/other_user}",
      "gists_url": "https://api.github.com/users/tommasini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tommasini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tommasini/subscriptions",
      "organizations_url": "https://api.github.com/users/tommasini/orgs",
      "repos_url": "https://api.github.com/users/tommasini/repos",
      "events_url": "https://api.github.com/users/tommasini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tommasini/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-18T06:02:07Z",
    "updated_at": "2023-07-18T06:06:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Forgot that this issue was already created here https://github.com/MetaMask/metamask-mobile/issues/6030, should we close this one or the other one?",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1639543763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644096319",
    "html_url": "https://github.com/MetaMask/core/issues/1519#issuecomment-1644096319",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1519",
    "id": 1644096319,
    "node_id": "IC_kwDOCBB0Cc5h_us_",
    "user": {
      "login": "hesterbruikman",
      "id": 35233054,
      "node_id": "MDQ6VXNlcjM1MjMzMDU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35233054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hesterbruikman",
      "html_url": "https://github.com/hesterbruikman",
      "followers_url": "https://api.github.com/users/hesterbruikman/followers",
      "following_url": "https://api.github.com/users/hesterbruikman/following{/other_user}",
      "gists_url": "https://api.github.com/users/hesterbruikman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hesterbruikman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hesterbruikman/subscriptions",
      "organizations_url": "https://api.github.com/users/hesterbruikman/orgs",
      "repos_url": "https://api.github.com/users/hesterbruikman/repos",
      "events_url": "https://api.github.com/users/hesterbruikman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hesterbruikman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T15:05:41Z",
    "updated_at": "2023-07-20T15:05:41Z",
    "author_association": "NONE",
    "body": "@Gudahtt Is this issue still on your radar? Is it helpful to have this separate ticket in this core repo?",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644096319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644136343",
    "html_url": "https://github.com/MetaMask/core/issues/1519#issuecomment-1644136343",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1519",
    "id": 1644136343,
    "node_id": "IC_kwDOCBB0Cc5h_4eX",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T15:27:35Z",
    "updated_at": "2023-07-20T15:27:35Z",
    "author_association": "MEMBER",
    "body": "Thanks for the reminder! This had slipped my mind. I will add it to this upcoming sprint, and I will close the other duplicate ticket",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644136343/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644186108",
    "html_url": "https://github.com/MetaMask/core/issues/1519#issuecomment-1644186108",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1519",
    "id": 1644186108,
    "node_id": "IC_kwDOCBB0Cc5iAEn8",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T15:57:36Z",
    "updated_at": "2023-07-20T15:57:36Z",
    "author_association": "MEMBER",
    "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Shared-Libraries-621e46b4d7103800171d1b02/issues/MetaMask/core/1519?planning-poker) with Zenhub @cryptodev-2s @mcmire",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1644186108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

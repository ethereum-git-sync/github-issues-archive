{
  "url": "https://api.github.com/repos/MetaMask/core/issues/971",
  "repository_url": "https://api.github.com/repos/MetaMask/core",
  "labels_url": "https://api.github.com/repos/MetaMask/core/issues/971/labels{/name}",
  "comments_url": "https://api.github.com/repos/MetaMask/core/issues/971/comments",
  "events_url": "https://api.github.com/repos/MetaMask/core/issues/971/events",
  "html_url": "https://github.com/MetaMask/core/issues/971",
  "id": 1454128146,
  "node_id": "I_kwDOCBB0Cc5WrDwS",
  "number": 971,
  "title": "Normalize the API between each network controller",
  "user": {
    "login": "Gudahtt",
    "id": 2459287,
    "node_id": "MDQ6VXNlcjI0NTkyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gudahtt",
    "html_url": "https://github.com/Gudahtt",
    "followers_url": "https://api.github.com/users/Gudahtt/followers",
    "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
    "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
    "repos_url": "https://api.github.com/users/Gudahtt/repos",
    "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 948148996,
      "node_id": "MDU6TGFiZWw5NDgxNDg5OTY=",
      "url": "https://api.github.com/repos/MetaMask/core/labels/enhancement",
      "name": "enhancement",
      "color": "a2eeef",
      "default": true,
      "description": "New feature or request"
    },
    {
      "id": 3884427940,
      "node_id": "LA_kwDOCBB0Cc7nh6qk",
      "url": "https://api.github.com/repos/MetaMask/core/labels/Epic",
      "name": "Epic",
      "color": "4660F9",
      "default": false,
      "description": null
    },
    {
      "id": 5108738713,
      "node_id": "LA_kwDOCBB0Cc8AAAABMIEqmQ",
      "url": "https://api.github.com/repos/MetaMask/core/labels/team-devex",
      "name": "team-devex",
      "color": "BFB144",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "Gudahtt",
    "id": 2459287,
    "node_id": "MDQ6VXNlcjI0NTkyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gudahtt",
    "html_url": "https://github.com/Gudahtt",
    "followers_url": "https://api.github.com/users/Gudahtt/followers",
    "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
    "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
    "repos_url": "https://api.github.com/users/Gudahtt/repos",
    "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2022-11-17T22:58:35Z",
  "updated_at": "2023-05-04T11:02:46Z",
  "closed_at": "2023-01-05T20:00:27Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "We should make the API for each network controller more similar, to make merging them simpler.\r\n\r\nLets evaluate each method on a case-by-case basis, and evaluate what makes the most sense for the merged controller. Then we can migrate each controller to match whatever we think is best for that method/use-case.\r\n\r\n## Summary\r\n\r\n### Changes needed in `@metamask/network-controller`:\r\n\r\n- [x] Implement `getProviderAndBlockTracker`, which will return a proxied provider and block tracker (https://github.com/MetaMask/controllers/issues/1018)\r\n- [x] Rename `properties` state to `networkDetails` (https://github.com/MetaMask/controllers/issues/1019)\r\n- [x] Replace `network` and  `isCustomNetwork` state with `currentNetworkType` state (https://github.com/MetaMask/controllers/issues/1020)\r\n- [x] Replace `providerConfig` setter with an async `initializeProvider` method (https://github.com/MetaMask/controllers/issues/1021)\r\n- [x] Add async `getEIP1559Compatibility` method that populates the `networkDetails` state if it's not set yet (https://github.com/MetaMask/controllers/issues/1022)\r\n- [x] Add `resetConnection` method (https://github.com/MetaMask/controllers/issues/1023)\r\n- [x] Add `rollbackToPreviousProvider` method (https://github.com/MetaMask/controllers/issues/1024)\r\n\r\n### Changes needed in `metamask-extension`:\r\n\r\n- [x] Add Infura project ID to constructor and remove `setInfuraProjectId` method (https://github.com/MetaMask/metamask-extension/pull/16884)\r\n- [x] Stop extending `EventEmitter` (https://github.com/MetaMask/metamask-extension/issues/16945)\r\n- [x] Replace `network` state with `currentNetworkType` state (https://github.com/MetaMask/metamask-extension/issues/16946)\r\n- [x] Make `initializeProvider` and `lookupNetwork` async (https://github.com/MetaMask/metamask-extension/pull/16881)\r\n- [x] Make `setProviderType` synchronous (https://github.com/MetaMask/metamask-extension/pull/16879)\r\n- [x] Make these methods private: (https://github.com/MetaMask/metamask-extension/pull/16882 and https://github.com/MetaMask/metamask-extension/pull/16883)\r\n  - `getLatestBlock`\r\n  - `verifyNetwork`\r\n  - `setNetworkState`\r\n  - `setNetworkEIPSupport`\r\n  - `clearNetworkDetails`\r\n  - `setProviderConfig`\r\n- [x] Remove these methods, instead using state to get this information (https://github.com/MetaMask/metamask-extension/issues/16947)\r\n  - `getNetworkState`\r\n  - `isNetworkLoading`\r\n  - `getCurrentChainId`\r\n  - `getCurrentRpcUrl`\r\n  - `getProviderConfig`\r\n  - `getNetworkIdentifier`\r\n\r\n",
  "closed_by": {
    "login": "Gudahtt",
    "id": 2459287,
    "node_id": "MDQ6VXNlcjI0NTkyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gudahtt",
    "html_url": "https://github.com/Gudahtt",
    "followers_url": "https://api.github.com/users/Gudahtt/followers",
    "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
    "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
    "repos_url": "https://api.github.com/users/Gudahtt/repos",
    "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/MetaMask/core/issues/971/reactions",
    "total_count": 2,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 1,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MetaMask/core/issues/971/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343096915",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343096915",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343096915,
    "node_id": "IC_kwDOCBB0Cc5QDghT",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T18:01:30Z",
    "updated_at": "2022-12-08T18:01:30Z",
    "author_association": "MEMBER",
    "body": "I'll start to go over the differences.\r\n\r\nThe constructors are effectively the same except that the mobile network controller accepts the infura project ID, whereas on the extension that gets set later. Both accept initial state. The extension controller calls its constructor parameter `opts`, but it is effectively just the state despite the confusing name. We can update the extension controller to use a more sensible name for that parameter, and to support setting the Infura RPC URL directly. This would also let us get rid of the `setInfuraProjectId` method, which only exists on the extension, and is only called immediately upon construction.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343096915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343100832",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343100832",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343100832,
    "node_id": "IC_kwDOCBB0Cc5QDheg",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T18:04:33Z",
    "updated_at": "2022-12-08T18:04:33Z",
    "author_association": "MEMBER",
    "body": "The extension network controller extends `EventEmitter`, but the mobile controller does not. We don't need this, we have our own messaging system that we can use for events instead.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343100832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343115121",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343115121",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343115121,
    "node_id": "IC_kwDOCBB0Cc5QDk9x",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T18:11:40Z",
    "updated_at": "2022-12-08T22:03:46Z",
    "author_association": "MEMBER",
    "body": "Mobile has a `provider` property, which is the provider for the current selected network. On extension we have the `getProviderAndBlockTracker` method, which returns a _proxy_ to the provider for the current selected network. The proxy ensures we don't keep using a provider after we've switched away from it.\r\n\r\nWe'll be getting rid of the proxy soon once we add multi-network support, but until then I think we should keep using a proxy. It's too easy to mess up and keep a stale reference to the wrong provider. That means we'll have to migrate the proxy logic to mobile.\r\n\r\nRelated to this, the extension exposes a block tracker whereas mobile doesn't (they don't even use one internally). We need this, so we'll have to add that to mobile as well.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343115121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343423506",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343423506",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343423506,
    "node_id": "IC_kwDOCBB0Cc5QEwQS",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T21:56:01Z",
    "updated_at": "2022-12-08T23:03:58Z",
    "author_association": "MEMBER",
    "body": "The stores have a few differences. The mobile controller has just one store with the following contents:\r\n\r\n* `network` - The \"network type\", set to \"loading\" while loading, or to \"RPC\" when using a custom RPC, but is otherwise set to the current selected Infura network.\r\n* `isCustomNetwork` - A redundant boolean\r\n* `providerConfig` - The provider configuration for the current network\r\n* `properties` - Properties for the current selected network. Currently just tracks whether the current network is EIP1559 compatible or not.\r\n\r\nThe extension state is split into four parts:\r\n* `provider` - The provider config\r\n* `previousProviderStore` - The previous provider config\r\n* `network` - Either \"loading\", or the network ID for the current selected network\r\n* `networkDetails` - the same as `properties` on the mobile store\r\n\r\n\r\nBoth have provider config, that's good. `properties` and `networkDetails` are essentially interchangeable, all we need to do there is decide upon which name to use. `isCustomNetwork` seems easy to get rid of.\r\n\r\nWe need some way to track whether a network switch is in progress. The other details tracked by `network` on the extension are redundant, it's just the loading state we need to keep. And similarly, `network` on mobile is redundant with the provider config, except for the loading state. Maybe we'll still find it convenient to track whether the current selected network is Infura or custom, but the network ID part is totally useless.\r\n\r\nWe use the previous provider store on the extension to switch back to the previous choice if we can't connect, so we'll need to keep that.\r\n\r\nSo here's my proposed unified state, roughly:\r\n* `providerConfig` - self explanatory\r\n* `previousProviderConfig` - Self-explanatory.\r\n* `currentNetworkType`  - Either \"loading\", \"Infura\", or \"custom\"; something like that\r\n* `networkDetails` - The same as the current `networkDetails`/`properties`",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343423506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343430506",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343430506",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343430506,
    "node_id": "IC_kwDOCBB0Cc5QEx9q",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:01:21Z",
    "updated_at": "2022-12-08T23:21:59Z",
    "author_association": "MEMBER",
    "body": "Provider initialization is performed via the `providerConfig` setter on mobile, and the `initializeProvider` function on extension. Both of these are \"synchronous\" actions that trigger async work. We should migrate both to use `initializeProvider`, and make the function properly async so we can test it more easily.\r\n\r\n`initializeProvider` calls `lookupNetwork` which is also \"synchronous\" but doing async work, so that'll need to be made async as well.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343430506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343438670",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343438670",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343438670,
    "node_id": "IC_kwDOCBB0Cc5QEz9O",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:08:28Z",
    "updated_at": "2022-12-08T22:08:28Z",
    "author_association": "MEMBER",
    "body": "The extension method `getEIP1559Compatibility` seems redundant at first (this information is already in state!), except that it allows you to _block_ on retrieving this information if we don't have it yet. We make use of that in the transaction controller.\r\n\r\nWe could roll this into the \"loading\" state potentially, but I'm not sure whether we want to. For now it seems easier to keep this.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343438670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343452061",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343452061",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343452061,
    "node_id": "IC_kwDOCBB0Cc5QE3Od",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:22:14Z",
    "updated_at": "2022-12-08T22:22:14Z",
    "author_association": "MEMBER",
    "body": "Seemingly `setProviderType` is async on the extension for no reason. It does nothing asynchronously. Making this synchronous would bring it in-line with mobile.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343452061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343452589",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343452589",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343452589,
    "node_id": "IC_kwDOCBB0Cc5QE3Wt",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:22:55Z",
    "updated_at": "2022-12-08T22:22:55Z",
    "author_association": "MEMBER",
    "body": "The extension method `resetConnection` is used in the extension for the \"Reset Account\" button, useful for development to reset the network connection and all related caches in middleware. We'll need to keep this for now.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343452589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343453550",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343453550",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343453550,
    "node_id": "IC_kwDOCBB0Cc5QE3lu",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:23:51Z",
    "updated_at": "2022-12-08T22:23:51Z",
    "author_association": "MEMBER",
    "body": "On the extension, `rollbackToPreviousProvider` is needed to restore the previous network configuration. I think we need this too, for the same reason we need to keep the previous provider state.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343453550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343455171",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343455171",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343455171,
    "node_id": "IC_kwDOCBB0Cc5QE3_D",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:25:48Z",
    "updated_at": "2022-12-08T22:25:48Z",
    "author_association": "MEMBER",
    "body": "The following methods are present in the extension network controller API but never used externally:\r\n\r\n- `getLatestBlock`\r\n- `verifyNetwork`\r\n- `setNetworkState`\r\n- `setNetworkEIPSupport`\r\n- `clearNetworkDetails`\r\n- `setProviderConfig`\r\n\r\nThe following methods are present in the extension network controller API but are redundant (replacable by accessing state instead):\r\n\r\n- `getNetworkState`\r\n- `isNetworkLoading`\r\n- `getCurrentChainId`\r\n- `getCurrentRpcUrl`\r\n- `getProviderConfig`\r\n- `getNetworkIdentifier`",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343455171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343459513",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1343459513",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1343459513,
    "node_id": "IC_kwDOCBB0Cc5QE5C5",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T22:30:53Z",
    "updated_at": "2022-12-08T23:07:30Z",
    "author_association": "MEMBER",
    "body": "That covers all of the differences! The remaining API is:\r\n\r\n* constructor (accepts messenger, state, and infuraProjectId)\r\n* async `initializeProvider`\r\n* async `lookupNetwork`\r\n* async `getEIP1559Compatibility`\r\n* `resetConnection`\r\n* `rollbackToPreviousProvider`\r\n* `getProviderAndBlockTracker`\r\n* `setProviderType`\r\n* `setRpcTarget`\r\n\r\nWe can unify the state to be a single `state` property as well. We don't need any other properties.\r\n\r\nAt some point in the future we should consider unifying `setProviderType` and `setRpcTarget` into a single method (e.g. `switchNetwork`), but we don't need to do that before the merge.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1343459513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1372671020",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1372671020",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1372671020,
    "node_id": "IC_kwDOCBB0Cc5R0Uws",
    "user": {
      "login": "Gudahtt",
      "id": 2459287,
      "node_id": "MDQ6VXNlcjI0NTkyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2459287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gudahtt",
      "html_url": "https://github.com/Gudahtt",
      "followers_url": "https://api.github.com/users/Gudahtt/followers",
      "following_url": "https://api.github.com/users/Gudahtt/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gudahtt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gudahtt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gudahtt/subscriptions",
      "organizations_url": "https://api.github.com/users/Gudahtt/orgs",
      "repos_url": "https://api.github.com/users/Gudahtt/repos",
      "events_url": "https://api.github.com/users/Gudahtt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gudahtt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-05T20:00:27Z",
    "updated_at": "2023-01-05T20:00:27Z",
    "author_association": "MEMBER",
    "body": "Closing because the work has been broken into separate issues",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1372671020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1534566525",
    "html_url": "https://github.com/MetaMask/core/issues/971#issuecomment-1534566525",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/971",
    "id": 1534566525,
    "node_id": "IC_kwDOCBB0Cc5bd6B9",
    "user": {
      "login": "kumavis",
      "id": 1474978,
      "node_id": "MDQ6VXNlcjE0NzQ5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1474978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kumavis",
      "html_url": "https://github.com/kumavis",
      "followers_url": "https://api.github.com/users/kumavis/followers",
      "following_url": "https://api.github.com/users/kumavis/following{/other_user}",
      "gists_url": "https://api.github.com/users/kumavis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kumavis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kumavis/subscriptions",
      "organizations_url": "https://api.github.com/users/kumavis/orgs",
      "repos_url": "https://api.github.com/users/kumavis/repos",
      "events_url": "https://api.github.com/users/kumavis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kumavis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T11:02:46Z",
    "updated_at": "2023-05-04T11:02:46Z",
    "author_association": "MEMBER",
    "body": "congrats on merge :tada: ",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1534566525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

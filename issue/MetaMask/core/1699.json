{
  "url": "https://api.github.com/repos/MetaMask/core/issues/1699",
  "repository_url": "https://api.github.com/repos/MetaMask/core",
  "labels_url": "https://api.github.com/repos/MetaMask/core/issues/1699/labels{/name}",
  "comments_url": "https://api.github.com/repos/MetaMask/core/issues/1699/comments",
  "events_url": "https://api.github.com/repos/MetaMask/core/issues/1699/events",
  "html_url": "https://github.com/MetaMask/core/issues/1699",
  "id": 1908064131,
  "node_id": "I_kwDOCBB0Cc5xur-D",
  "number": 1699,
  "title": "Migrate `accounts-controller` to snaps repo",
  "user": {
    "login": "legobeat",
    "id": 109787230,
    "node_id": "U_kgDOBos4Xg",
    "avatar_url": "https://avatars.githubusercontent.com/u/109787230?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/legobeat",
    "html_url": "https://github.com/legobeat",
    "followers_url": "https://api.github.com/users/legobeat/followers",
    "following_url": "https://api.github.com/users/legobeat/following{/other_user}",
    "gists_url": "https://api.github.com/users/legobeat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/legobeat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/legobeat/subscriptions",
    "organizations_url": "https://api.github.com/users/legobeat/orgs",
    "repos_url": "https://api.github.com/users/legobeat/repos",
    "events_url": "https://api.github.com/users/legobeat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/legobeat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "danroc",
    "id": 68558152,
    "node_id": "MDQ6VXNlcjY4NTU4MTUy",
    "avatar_url": "https://avatars.githubusercontent.com/u/68558152?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/danroc",
    "html_url": "https://github.com/danroc",
    "followers_url": "https://api.github.com/users/danroc/followers",
    "following_url": "https://api.github.com/users/danroc/following{/other_user}",
    "gists_url": "https://api.github.com/users/danroc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/danroc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danroc/subscriptions",
    "organizations_url": "https://api.github.com/users/danroc/orgs",
    "repos_url": "https://api.github.com/users/danroc/repos",
    "events_url": "https://api.github.com/users/danroc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/danroc/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "danroc",
      "id": 68558152,
      "node_id": "MDQ6VXNlcjY4NTU4MTUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/68558152?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danroc",
      "html_url": "https://github.com/danroc",
      "followers_url": "https://api.github.com/users/danroc/followers",
      "following_url": "https://api.github.com/users/danroc/following{/other_user}",
      "gists_url": "https://api.github.com/users/danroc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danroc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danroc/subscriptions",
      "organizations_url": "https://api.github.com/users/danroc/orgs",
      "repos_url": "https://api.github.com/users/danroc/repos",
      "events_url": "https://api.github.com/users/danroc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danroc/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "montelaidev",
      "id": 96463427,
      "node_id": "U_kgDOBb_qQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/96463427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/montelaidev",
      "html_url": "https://github.com/montelaidev",
      "followers_url": "https://api.github.com/users/montelaidev/followers",
      "following_url": "https://api.github.com/users/montelaidev/following{/other_user}",
      "gists_url": "https://api.github.com/users/montelaidev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/montelaidev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/montelaidev/subscriptions",
      "organizations_url": "https://api.github.com/users/montelaidev/orgs",
      "repos_url": "https://api.github.com/users/montelaidev/repos",
      "events_url": "https://api.github.com/users/montelaidev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/montelaidev/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-09-22T02:01:04Z",
  "updated_at": "2023-09-25T08:31:36Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "`@metamask/accounts-controller` (#1637) has started pulling in dependencies from https://github.com/MetaMask/snaps, which in their turn go back for packages from this repo.\r\n\r\nTo avoid dependency cycles and release churn arising from this dynamic, I propose migrating the package to the snaps monorepo - at least as long as the relationships look like they currently do.\r\n\r\nHand-drawn ASCII art is the dependency tree limited to packages in MetaMask core and snaps monorepos:\r\n\r\n```\r\n@metamask/accounts-controller(core) -> @metamask/keyring-api ----------> @metamask/rpc-methods(snaps) ---------> @metamask/key-tree\r\n                                   |                                 |                                       |-> @metamask/permission-controller(core)*\r\n                                   |                                 |                                       |-> @metamask/snaps-ui(snaps)*\r\n                                   |                                 |                                       |-> @metamask/snaps-utils(snaps)*\r\n                                   |                                 |\r\n                                   |                                 |-> @metamask/snaps-controllers(snaps) ---> @metamask/approval-controller(core) ------------> @metamask/base-controller(core)*\r\n                                   |                                 |                                       |-> @metamask/base-controller(core)*\r\n                                   |                                 |                                       |-> @metamask/permission-controller(core)*\r\n                                   |                                 |                                       |-> @metamask/rpc-methods(snaps) -------------------> @metamask/key-tree*\r\n                                   |                                 |                                       |                                                 |-> @metamask/permission-controller(core)*\r\n                                   |                                 |                                       |                                                 |-> @metamask/snaps-ui(snaps)*\r\n                                   |                                 |                                       |                                                 |-> @metamask/snaps-utils(snaps)*\r\n                                   |                                 |                                       |\r\n                                   |                                 |                                       |-> @metamask/snaps-execution-environments(snaps) --> @metamask/rpc-methods(snaps)*\r\n                                   |                                 |                                       |                                                 |-> @metamask/snaps-utils(snaps)*\r\n                                   |                                 |                                       |-> @metamask/snaps-utils(snaps)*\r\n                                   |                                 |-> @metamask/snaps-utils(snaps)*\r\n                                   |\r\n                                   |-> @metamask/eth-snap-keyring -----> @metamask/keyring-api*\r\n                                   |                                 |-> @metamask/snaps-controllers(snaps)*\r\n                                   |\r\n                                   |\r\n                                   |-> @metamask/snaps-utils (snaps) --> @metamask/base-controller(core)\r\n                                                                     |-> @metamask/key-tree\r\n                                                                     |-> @metamask/permission-controller(core) --> @metamask/approval-controller(core) --> @metamask/base-controller(core)\r\n                                                                     |                                         |-> @metamask/base-controller(core)\r\n                                                                     |                                         |-> @metamask/controller-utils(core)\r\n                                                                     |-> @metamask/snaps-ui(snaps)\r\n\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/MetaMask/core/issues/1699/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MetaMask/core/issues/1699/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1733163905",
    "html_url": "https://github.com/MetaMask/core/issues/1699#issuecomment-1733163905",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1699",
    "id": 1733163905,
    "node_id": "IC_kwDOCBB0Cc5nTfuB",
    "user": {
      "login": "montelaidev",
      "id": 96463427,
      "node_id": "U_kgDOBb_qQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/96463427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/montelaidev",
      "html_url": "https://github.com/montelaidev",
      "followers_url": "https://api.github.com/users/montelaidev/followers",
      "following_url": "https://api.github.com/users/montelaidev/following{/other_user}",
      "gists_url": "https://api.github.com/users/montelaidev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/montelaidev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/montelaidev/subscriptions",
      "organizations_url": "https://api.github.com/users/montelaidev/orgs",
      "repos_url": "https://api.github.com/users/montelaidev/repos",
      "events_url": "https://api.github.com/users/montelaidev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/montelaidev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-25T08:27:13Z",
    "updated_at": "2023-09-25T08:27:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Its the the usage of the types `SnapsGlobalObject` from `@metamask/rpc-methods` and `SnapController`  from `@metamask/snaps-controllers` thats importing all the other dependencies. I would prefer not to migrate this to the snaps repo because it isn't related to snaps, and this `AccountsController` is to be shared between the clients. \r\n\r\nPerhaps, a separate types package would be a better solution? ",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1733163905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1733168431",
    "html_url": "https://github.com/MetaMask/core/issues/1699#issuecomment-1733168431",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1699",
    "id": 1733168431,
    "node_id": "IC_kwDOCBB0Cc5nTg0v",
    "user": {
      "login": "legobeat",
      "id": 109787230,
      "node_id": "U_kgDOBos4Xg",
      "avatar_url": "https://avatars.githubusercontent.com/u/109787230?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/legobeat",
      "html_url": "https://github.com/legobeat",
      "followers_url": "https://api.github.com/users/legobeat/followers",
      "following_url": "https://api.github.com/users/legobeat/following{/other_user}",
      "gists_url": "https://api.github.com/users/legobeat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/legobeat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/legobeat/subscriptions",
      "organizations_url": "https://api.github.com/users/legobeat/orgs",
      "repos_url": "https://api.github.com/users/legobeat/repos",
      "events_url": "https://api.github.com/users/legobeat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/legobeat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-25T08:30:21Z",
    "updated_at": "2023-09-25T08:31:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Naming and exact scope aside, a third repo (poly- or mono) could also be appropriate\r\n\r\n\r\nOr maybe something like `keyrings`, which could potentially include `keyring-api`? :thinking: ",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1733168431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

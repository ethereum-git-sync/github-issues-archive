{
  "url": "https://api.github.com/repos/MetaMask/core/issues/1975",
  "repository_url": "https://api.github.com/repos/MetaMask/core",
  "labels_url": "https://api.github.com/repos/MetaMask/core/issues/1975/labels{/name}",
  "comments_url": "https://api.github.com/repos/MetaMask/core/issues/1975/comments",
  "events_url": "https://api.github.com/repos/MetaMask/core/issues/1975/events",
  "html_url": "https://github.com/MetaMask/core/issues/1975",
  "id": 1973140849,
  "node_id": "I_kwDOCBB0Cc51m71x",
  "number": 1975,
  "title": "Type incompatibilities with Ethers",
  "user": {
    "login": "mcmire",
    "id": 7371,
    "node_id": "MDQ6VXNlcjczNzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7371?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mcmire",
    "html_url": "https://github.com/mcmire",
    "followers_url": "https://api.github.com/users/mcmire/followers",
    "following_url": "https://api.github.com/users/mcmire/following{/other_user}",
    "gists_url": "https://api.github.com/users/mcmire/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mcmire/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mcmire/subscriptions",
    "organizations_url": "https://api.github.com/users/mcmire/orgs",
    "repos_url": "https://api.github.com/users/mcmire/repos",
    "events_url": "https://api.github.com/users/mcmire/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mcmire/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 948148992,
      "node_id": "MDU6TGFiZWw5NDgxNDg5OTI=",
      "url": "https://api.github.com/repos/MetaMask/core/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 948148996,
      "node_id": "MDU6TGFiZWw5NDgxNDg5OTY=",
      "url": "https://api.github.com/repos/MetaMask/core/labels/enhancement",
      "name": "enhancement",
      "color": "a2eeef",
      "default": true,
      "description": "New feature or request"
    },
    {
      "id": 5330766523,
      "node_id": "LA_kwDOCBB0Cc8AAAABPb0Kuw",
      "url": "https://api.github.com/repos/MetaMask/core/labels/team-shared-libraries",
      "name": "team-shared-libraries",
      "color": "c5def5",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-14T21:13:01Z",
  "updated_at": "2023-11-03T07:11:51Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "SafeEventEmitterProvider is not type-compatible with Ethers. Specify, when passing an instance of SafeEventEmitterProvider to Ethers v5's Web3Provider class, the following type error is produced:\r\n\r\n```\r\n[tsserver 2345] [E] Argument of type 'SafeEventEmitterProvider' is not assignable to parameter of type 'ExternalProvider | JsonRpcFetchFunc'.\r\n  Type 'SafeEventEmitterProvider' is not assignable to type 'ExternalProvider'.\r\n    Types of property 'sendAsync' are incompatible.\r\n      Type '(req: JsonRpcRequest<unknown>, callback: (error: unknown, providerRes?: any) => void) => void' is not assignable to type '(request: { method: string; params?: any[] | undefined; }, callback: (error: any, response: any) => void) => void'.\r\n        Types of parameters 'req' and 'request' are incompatible.\r\n          Type '{ method: string; params?: any[] | undefined; }' is missing the following properties from type 'JsonRpcRequest<unknown>': jsonrpc, id\r\n```\r\n\r\nWith Ethers v6's BrowserProvider class, the following type error occurs:\r\n\r\n```\r\n[tsserver 2345] [E] Argument of type 'SafeEventEmitterProvider' is not assignable to parameter of type 'Eip1193Provider'.\r\n  Property 'request' is missing in type 'SafeEventEmitterProvider' but required in type 'Eip1193Provider'.\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/MetaMask/core/issues/1975/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/MetaMask/core/issues/1975/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1789715000",
    "html_url": "https://github.com/MetaMask/core/issues/1975#issuecomment-1789715000",
    "issue_url": "https://api.github.com/repos/MetaMask/core/issues/1975",
    "id": 1789715000,
    "node_id": "IC_kwDOCBB0Cc5qrOI4",
    "user": {
      "login": "mcmire",
      "id": 7371,
      "node_id": "MDQ6VXNlcjczNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7371?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcmire",
      "html_url": "https://github.com/mcmire",
      "followers_url": "https://api.github.com/users/mcmire/followers",
      "following_url": "https://api.github.com/users/mcmire/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcmire/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcmire/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcmire/subscriptions",
      "organizations_url": "https://api.github.com/users/mcmire/orgs",
      "repos_url": "https://api.github.com/users/mcmire/repos",
      "events_url": "https://api.github.com/users/mcmire/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcmire/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T21:19:26Z",
    "updated_at": "2023-07-14T21:19:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "To fix compatibility with Ethers v5, we could modify `sendAsync` and `sync` to automatically fill in `id` and `jsonrpc` with appropriate values. However, I'm not sure that this effort is worth it considering that v5 will only get more and more obsolete over time.\r\n\r\nTo truly fix compatibility with Ethers v6 and up, we'd need SafeEventEmitterProvider to support `request`, and we'd need it to be EIP-1193-compatible.",
    "reactions": {
      "url": "https://api.github.com/repos/MetaMask/core/issues/comments/1789715000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4162",
  "id": 1654587984,
  "node_id": "I_kwDOA9tCBs5inwJQ",
  "number": 4162,
  "title": "4.8.2. broke \"ERC721:_beforeTokenTransfer\": TypeError: Function has override specified but does not override anything",
  "user": {
    "login": "honigkuchenbaer",
    "id": 50707097,
    "node_id": "MDQ6VXNlcjUwNzA3MDk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/50707097?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/honigkuchenbaer",
    "html_url": "https://github.com/honigkuchenbaer",
    "followers_url": "https://api.github.com/users/honigkuchenbaer/followers",
    "following_url": "https://api.github.com/users/honigkuchenbaer/following{/other_user}",
    "gists_url": "https://api.github.com/users/honigkuchenbaer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/honigkuchenbaer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/honigkuchenbaer/subscriptions",
    "organizations_url": "https://api.github.com/users/honigkuchenbaer/orgs",
    "repos_url": "https://api.github.com/users/honigkuchenbaer/repos",
    "events_url": "https://api.github.com/users/honigkuchenbaer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/honigkuchenbaer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-04-04T21:14:16Z",
  "updated_at": "2023-04-04T21:28:33Z",
  "closed_at": "2023-04-04T21:28:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\n\r\nI updated from <= 4.6 to 4.8.2 and on my ERC721-based contract, `beforeTokenTransfer`  is not compiling anymore.\r\n\r\nIf I don't overwrite `beforeTokenTransfer`, it complains that I have to override it. And if I overwrite it, it complains that it is _\"not override anything\"_.\r\n\r\nHere is my contract\r\n\r\n```\r\ncontract XYZAbc as\r\n    ERC721Enumerable,\r\n    ERC721Burnable,\r\n    ERC721Pausable,\r\n    ERC721URIStorage,\r\n    Ownable,\r\n    AccessControlEnumerable\r\n{\r\n}\r\n\r\nfunction _beforeTokenTransfer(\r\n        address from,\r\n        address to,\r\n        uint256 amount\r\n    ) internal virtual override (ERC721, ERC721Enumerable, ERC721Pausable) {\r\n        super._beforeTokenTransfer(from, to, amount);\r\n    }\r\n\r\n```\r\n\r\nMultiple Errors will ne logged now:\r\n\r\n>  Function has override specified but does not override anything.\r\n\r\n>  Invalid contracts specified in override list: \"ERC721\", \"ERC721Enumerable\" and \"ERC721Pausable\".\r\n\r\n> Derived contract must override function \"_beforeTokenTransfer\". Two or more base classes define function with same name and parameter types.\r\n\r\n\r\nRolling back from OZ 4.8 to 4.6 fixes this. But 4.6 is considered as being vulnerable so we have to upgrade to 4.8...\r\n\r\n<!-- Remember, this is not a place to ask for help debugging code. For that, we welcome you in the OpenZeppelin Community Forum: https://forum.openzeppelin.com/. -->\r\n\r\n**üíª Environment**\r\n\r\n<!-- Tell us what version of OpenZeppelin Contracts you're using, and how you're using it: Truffle, Remix, etc. -->\r\n\r\n4.8\r\n\r\n**üìù Details**\r\n\r\n<!-- Describe the problem you have been experiencing in more detail. Include as much information as you think is relevant. Keep in mind that transactions can fail for many reasons; context is key here. -->\r\n\r\nas written above\r\n\r\n**üî¢ Code to reproduce bug**\r\n\r\nsee above",
  "closed_by": {
    "login": "honigkuchenbaer",
    "id": 50707097,
    "node_id": "MDQ6VXNlcjUwNzA3MDk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/50707097?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/honigkuchenbaer",
    "html_url": "https://github.com/honigkuchenbaer",
    "followers_url": "https://api.github.com/users/honigkuchenbaer/followers",
    "following_url": "https://api.github.com/users/honigkuchenbaer/following{/other_user}",
    "gists_url": "https://api.github.com/users/honigkuchenbaer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/honigkuchenbaer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/honigkuchenbaer/subscriptions",
    "organizations_url": "https://api.github.com/users/honigkuchenbaer/orgs",
    "repos_url": "https://api.github.com/users/honigkuchenbaer/repos",
    "events_url": "https://api.github.com/users/honigkuchenbaer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/honigkuchenbaer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496622109",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4162#issuecomment-1496622109",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162",
    "id": 1496622109,
    "node_id": "IC_kwDOA9tCBs5ZNKQd",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T21:21:38Z",
    "updated_at": "2023-04-04T21:21:38Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @honigkuchenbaer \r\n\r\nSince 4.8, the signature of the hook changed. It is now\r\n```solidity\r\nfunction _beforeTokenTransfer(address from, address to, uint256 firstTokenId, uint256 batchSize) internal virtual {}\r\n```\r\n\r\nYou are missing the `uint256 batchSize` parameter",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496622109/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496623050",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4162#issuecomment-1496623050",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162",
    "id": 1496623050,
    "node_id": "IC_kwDOA9tCBs5ZNKfK",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T21:22:47Z",
    "updated_at": "2023-04-04T21:22:47Z",
    "author_association": "COLLABORATOR",
    "body": "This is documented [in the README](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/CHANGELOG.md#breaking-changes-2)",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496623050/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496628443",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4162#issuecomment-1496628443",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4162",
    "id": 1496628443,
    "node_id": "IC_kwDOA9tCBs5ZNLzb",
    "user": {
      "login": "honigkuchenbaer",
      "id": 50707097,
      "node_id": "MDQ6VXNlcjUwNzA3MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/50707097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/honigkuchenbaer",
      "html_url": "https://github.com/honigkuchenbaer",
      "followers_url": "https://api.github.com/users/honigkuchenbaer/followers",
      "following_url": "https://api.github.com/users/honigkuchenbaer/following{/other_user}",
      "gists_url": "https://api.github.com/users/honigkuchenbaer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/honigkuchenbaer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/honigkuchenbaer/subscriptions",
      "organizations_url": "https://api.github.com/users/honigkuchenbaer/orgs",
      "repos_url": "https://api.github.com/users/honigkuchenbaer/repos",
      "events_url": "https://api.github.com/users/honigkuchenbaer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/honigkuchenbaer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T21:28:33Z",
    "updated_at": "2023-04-04T21:28:33Z",
    "author_association": "NONE",
    "body": "Wow., this is heavy, as the 3 error messages together are totally misleading here (I know, that the mess of error messages has something to do with how Solidity compiler works)\r\n\r\nMany Thanks anyway! Next time I read README earlier when error messages make no sense :) ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496628443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

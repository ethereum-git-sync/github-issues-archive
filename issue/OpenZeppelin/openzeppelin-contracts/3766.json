{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766",
  "id": 1413019860,
  "node_id": "I_kwDOA9tCBs5UOPjU",
  "number": 3766,
  "title": "CountersUpgradeable.sol is not included in download",
  "user": {
    "login": "dcsan",
    "id": 514002,
    "node_id": "MDQ6VXNlcjUxNDAwMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/514002?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dcsan",
    "html_url": "https://github.com/dcsan",
    "followers_url": "https://api.github.com/users/dcsan/followers",
    "following_url": "https://api.github.com/users/dcsan/following{/other_user}",
    "gists_url": "https://api.github.com/users/dcsan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dcsan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dcsan/subscriptions",
    "organizations_url": "https://api.github.com/users/dcsan/orgs",
    "repos_url": "https://api.github.com/users/dcsan/repos",
    "events_url": "https://api.github.com/users/dcsan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dcsan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-10-18T11:06:08Z",
  "updated_at": "2022-10-19T08:16:27Z",
  "closed_at": "2022-10-19T08:16:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I buit a contract with the wizard\r\nhttps://docs.openzeppelin.com/contracts/4.x/wizard\r\n\r\nchecking `Enumerable` and the `UUPS upgradeable`\r\nthis generates download .sol files which have a link to \r\n\r\n`import \"./@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol\";`\r\n\r\nbut this import is not part of the downloaded bundle\r\n\r\n\r\n<img width=\"278\" alt=\"image\" src=\"https://user-images.githubusercontent.com/514002/196412492-9705cd72-cc57-478d-8db9-3f836ebd163a.png\">\r\n\r\n\r\n**ğŸ’» Environment**\r\n\r\nusing openzep with hardhat \r\n\r\n**ğŸ“ Details**\r\n\r\n```\r\ncontracts/\r\nâ”œâ”€â”€ @openzeppelin\r\nâ”‚Â Â  â””â”€â”€ contracts-upgradeable\r\nâ”‚Â Â      â”œâ”€â”€ README.md\r\nâ”‚Â Â      â”œâ”€â”€ access\r\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ AccessControlUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ IAccessControlUpgradeable.sol\r\nâ”‚Â Â      â”œâ”€â”€ interfaces\r\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ draft-IERC1822Upgradeable.sol\r\nâ”‚Â Â      â”œâ”€â”€ proxy\r\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ERC1967\r\nâ”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ ERC1967UpgradeUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ beacon\r\nâ”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ IBeaconUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ utils\r\nâ”‚Â Â      â”‚Â Â      â”œâ”€â”€ Initializable.sol\r\nâ”‚Â Â      â”‚Â Â      â””â”€â”€ UUPSUpgradeable.sol\r\nâ”‚Â Â      â”œâ”€â”€ security\r\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ PausableUpgradeable.sol\r\nâ”‚Â Â      â”œâ”€â”€ token\r\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ ERC721\r\nâ”‚Â Â      â”‚Â Â      â”œâ”€â”€ ERC721Upgradeable.sol\r\nâ”‚Â Â      â”‚Â Â      â”œâ”€â”€ IERC721ReceiverUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â      â”œâ”€â”€ IERC721Upgradeable.sol\r\nâ”‚Â Â      â”‚Â Â      â””â”€â”€ extensions\r\nâ”‚Â Â      â”‚Â Â          â”œâ”€â”€ ERC721BurnableUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â          â”œâ”€â”€ ERC721EnumerableUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â          â”œâ”€â”€ IERC721EnumerableUpgradeable.sol\r\nâ”‚Â Â      â”‚Â Â          â””â”€â”€ IERC721MetadataUpgradeable.sol\r\nâ”‚Â Â      â””â”€â”€ utils\r\nâ”‚Â Â          â”œâ”€â”€ AddressUpgradeable.sol\r\nâ”‚Â Â          â”œâ”€â”€ ContextUpgradeable.sol\r\nâ”‚Â Â          â”œâ”€â”€ StorageSlotUpgradeable.sol\r\nâ”‚Â Â          â”œâ”€â”€ StringsUpgradeable.sol\r\nâ”‚Â Â          â””â”€â”€ introspection\r\nâ”‚Â Â              â”œâ”€â”€ ERC165Upgradeable.sol\r\nâ”‚Â Â              â””â”€â”€ IERC165Upgradeable.sol\r\nâ””â”€â”€ MyNFT.sol\r\n```\r\n\r\nI notice there is `token/ERC721/extensions/ERC721EnumerableUpgradeable.sol`\r\n\r\nperhaps this is a bug, including the wrong item?\r\n\r\n**ğŸ”¢ Code to reproduce bug**\r\n\r\n",
  "closed_by": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282225204",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766#issuecomment-1282225204",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
    "id": 1282225204,
    "node_id": "IC_kwDOA9tCBs5MbTQ0",
    "user": {
      "login": "dcsan",
      "id": 514002,
      "node_id": "MDQ6VXNlcjUxNDAwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcsan",
      "html_url": "https://github.com/dcsan",
      "followers_url": "https://api.github.com/users/dcsan/followers",
      "following_url": "https://api.github.com/users/dcsan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcsan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcsan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcsan/subscriptions",
      "organizations_url": "https://api.github.com/users/dcsan/orgs",
      "repos_url": "https://api.github.com/users/dcsan/repos",
      "events_url": "https://api.github.com/users/dcsan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcsan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T11:19:14Z",
    "updated_at": "2022-10-18T11:19:14Z",
    "author_association": "NONE",
    "body": "specifically bringing in `auto increment IDs` will require the missing file.\r\n\r\n![image](https://user-images.githubusercontent.com/514002/196415512-9bf0d490-e531-40fa-a6c5-dce84b1bbf1c.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282225204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282233266",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766#issuecomment-1282233266",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
    "id": 1282233266,
    "node_id": "IC_kwDOA9tCBs5MbVOy",
    "user": {
      "login": "dcsan",
      "id": 514002,
      "node_id": "MDQ6VXNlcjUxNDAwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcsan",
      "html_url": "https://github.com/dcsan",
      "followers_url": "https://api.github.com/users/dcsan/followers",
      "following_url": "https://api.github.com/users/dcsan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcsan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcsan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcsan/subscriptions",
      "organizations_url": "https://api.github.com/users/dcsan/orgs",
      "repos_url": "https://api.github.com/users/dcsan/repos",
      "events_url": "https://api.github.com/users/dcsan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcsan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T11:25:48Z",
    "updated_at": "2022-10-18T11:26:02Z",
    "author_association": "NONE",
    "body": "basic utils/Counters exists when NOT using a proxy/upgradeable.\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Counters.sol\r\n\r\nand this is the missing contract in question:\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/utils/CountersUpgradeable.sol\r\n\r\nFor now I can just copy that into the build in the right place and hope it's actually the right thing...\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282233266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282265333",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766#issuecomment-1282265333",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
    "id": 1282265333,
    "node_id": "IC_kwDOA9tCBs5MbdD1",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T11:53:53Z",
    "updated_at": "2022-10-18T11:53:53Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @dcsan \r\n\r\n**I am unable to reproduce the issue.**\r\n\r\nWhen I go to the wizard, and check both \"mintable with auto increment Ids\" and \"upgrdeability uups\", I get the following code:\r\n\r\n```\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.4;\r\n\r\nimport \"[@openzeppelin/contracts-upgradeable/token/ERC721/ERC721Upgradeable.sol](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/token/ERC721/ERC721Upgradeable.sol)\";\r\nimport \"[@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/access/OwnableUpgradeable.sol)\";\r\nimport \"[@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/proxy/utils/Initializable.sol)\";\r\nimport \"[@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/proxy/utils/UUPSUpgradeable.sol)\";\r\nimport \"[@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/utils/CountersUpgradeable.sol)\";\r\n\r\ncontract MyToken is Initializable, ERC721Upgradeable, OwnableUpgradeable, UUPSUpgradeable {\r\n    using CountersUpgradeable for CountersUpgradeable.Counter;\r\n\r\n    CountersUpgradeable.Counter private _tokenIdCounter;\r\n\r\n    /// @custom:oz-upgrades-unsafe-allow constructor\r\n    constructor() {\r\n        _disableInitializers();\r\n    }\r\n\r\n    function initialize() initializer public {\r\n        __ERC721_init(\"MyToken\", \"MTK\");\r\n        __Ownable_init();\r\n        __UUPSUpgradeable_init();\r\n    }\r\n\r\n    function safeMint(address to) public onlyOwner {\r\n        uint256 tokenId = _tokenIdCounter.current();\r\n        _tokenIdCounter.increment();\r\n        _safeMint(to, tokenId);\r\n    }\r\n\r\n    function _authorizeUpgrade(address newImplementation)\r\n        internal\r\n        onlyOwner\r\n        override\r\n    {}\r\n}\r\n```\r\n\r\n**When exporting that to remix, the contract compiles correctly**\r\n\r\nPlease note that the import is \r\n```\r\nimport \"@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol\";\r\n```\r\nand not\r\n```\r\nimport \"./@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol\";\r\n```\r\n\r\n[This file is available in the upgradeable package](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/v4.7.3/contracts/utils/CountersUpgradeable.sol)",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282265333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282282959",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766#issuecomment-1282282959",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
    "id": 1282282959,
    "node_id": "IC_kwDOA9tCBs5MbhXP",
    "user": {
      "login": "dcsan",
      "id": 514002,
      "node_id": "MDQ6VXNlcjUxNDAwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcsan",
      "html_url": "https://github.com/dcsan",
      "followers_url": "https://api.github.com/users/dcsan/followers",
      "following_url": "https://api.github.com/users/dcsan/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcsan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcsan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcsan/subscriptions",
      "organizations_url": "https://api.github.com/users/dcsan/orgs",
      "repos_url": "https://api.github.com/users/dcsan/repos",
      "events_url": "https://api.github.com/users/dcsan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcsan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T12:08:57Z",
    "updated_at": "2022-10-18T12:08:57Z",
    "author_association": "NONE",
    "body": "I'm using the download files option as a vendored zip, which is using all relative paths such as:\r\n\r\nimport \"./@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol\";\r\n\r\n![image](https://user-images.githubusercontent.com/514002/196425090-a5584f4f-253b-44e4-a6a8-9bac90905be4.png)\r\n\r\nso I guess in this bundle not all the required files are included?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1282282959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1283611148",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3766#issuecomment-1283611148",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3766",
    "id": 1283611148,
    "node_id": "IC_kwDOA9tCBs5MgloM",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-19T08:16:26Z",
    "updated_at": "2022-10-19T08:16:26Z",
    "author_association": "COLLABORATOR",
    "body": "Ok, that is definitelly a bug on the wizard then.\r\n\r\nThanks for finding that out! I'll open an issue in the correct repo pointing to here.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1283611148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

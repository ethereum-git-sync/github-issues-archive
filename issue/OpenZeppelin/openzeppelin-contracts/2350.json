{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2350",
  "id": 695473898,
  "node_id": "MDU6SXNzdWU2OTU0NzM4OTg=",
  "number": 2350,
  "title": "Fix test on TokenVesting draft",
  "user": {
    "login": "hems",
    "id": 27327,
    "node_id": "MDQ6VXNlcjI3MzI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/27327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hems",
    "html_url": "https://github.com/hems",
    "followers_url": "https://api.github.com/users/hems/followers",
    "following_url": "https://api.github.com/users/hems/following{/other_user}",
    "gists_url": "https://api.github.com/users/hems/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hems/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hems/subscriptions",
    "organizations_url": "https://api.github.com/users/hems/orgs",
    "repos_url": "https://api.github.com/users/hems/repos",
    "events_url": "https://api.github.com/users/hems/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hems/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-09-08T01:22:08Z",
  "updated_at": "2020-09-08T17:20:17Z",
  "closed_at": "2020-09-08T08:44:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I just went through the tests on TokenVesting and figured out that this test isn't finished:\r\n\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/cdf655f770cf8412fbd4d6aef3c55194a1233ef1/test/drafts/TokenVesting.test.js#L146-L156\r\n\r\nWhat actually needs to be done in order for this test to be valuable is:\r\n\r\n1. Add the \"vested()\" method on TokenVesting.sol\r\n\r\n````js\r\n    /**\r\n     * @return the vested amount of the token vesting.\r\n     */\r\n    function vested(IERC20 token) public view returns (uint256) {\r\n        return _vestedAmount(token);\r\n    }\r\n````\r\n\r\n2. Call the vested() method on the test instead of using the `vestedAmount` function from the test file\r\n\r\n\r\n````js\r\n    expect(await this.vesting.vested()).to.equal(vestedPre);\r\n````\r\n\r\nOther than all the tests seems to be perfect, thanks a lot for all your work",
  "closed_by": {
    "login": "abcoathup",
    "id": 28278242,
    "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abcoathup",
    "html_url": "https://github.com/abcoathup",
    "followers_url": "https://api.github.com/users/abcoathup/followers",
    "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
    "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
    "organizations_url": "https://api.github.com/users/abcoathup/orgs",
    "repos_url": "https://api.github.com/users/abcoathup/repos",
    "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abcoathup/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/688718940",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2350#issuecomment-688718940",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350",
    "id": 688718940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODcxODk0MA==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T08:44:47Z",
    "updated_at": "2020-09-08T08:44:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @hems,\r\n\r\nThanks for the feedback.  The drafts directory was removed from OpenZeppelin Contracts 3.0.\r\nSee the documentation for details: https://docs.openzeppelin.com/contracts/3.x/drafts\r\n\r\nIf you look at OpenZeppelin/openzeppelin-contracts#1214 TokenVesting may not be aligned with traditional vesting.\r\n\r\nDepending on your use case, you could use [TokenTimelock](https://docs.openzeppelin.com/contracts/3.x/api/token/erc20#TokenTimelock)\r\n\r\nWhen creating token time locks or vesting you should consider prevention strategies for: [Bypassing Smart Contract Timelocks](https://blog.openzeppelin.com/bypassing-smart-contract-timelocks/)\r\n\r\nI will close this issue as TokenVesting has been removed but really appreciate the feedback on the test.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/688718940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/689021518",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2350#issuecomment-689021518",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2350",
    "id": 689021518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTAyMTUxOA==",
    "user": {
      "login": "hems",
      "id": 27327,
      "node_id": "MDQ6VXNlcjI3MzI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/27327?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hems",
      "html_url": "https://github.com/hems",
      "followers_url": "https://api.github.com/users/hems/followers",
      "following_url": "https://api.github.com/users/hems/following{/other_user}",
      "gists_url": "https://api.github.com/users/hems/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hems/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hems/subscriptions",
      "organizations_url": "https://api.github.com/users/hems/orgs",
      "repos_url": "https://api.github.com/users/hems/repos",
      "events_url": "https://api.github.com/users/hems/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hems/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T17:18:33Z",
    "updated_at": "2020-09-08T17:20:17Z",
    "author_association": "NONE",
    "body": "> Hi @hems,\r\n\r\nHello\r\n\r\n> Thanks for the feedback. The drafts directory was removed from OpenZeppelin Contracts 3.0.\r\n> See the documentation for details: https://docs.openzeppelin.com/contracts/3.x/drafts\r\n\r\nYes I noticed!\r\n\r\n> If you look at #1214 TokenVesting may not be aligned with traditional vesting.\r\n\r\nActually the linear vesting is the perfect implementation for me and to be frank, I believe to a lot more people, making it more \"feature-rich\" ( aka complicated ) seems to create a lot of room for discussion and bugs, so in a way I really think the linear lock it the perfect solution as it's very simple to understand and to test, by tweaking that test i posted here i was able to get 100% test coverage.\r\n\r\n> Depending on your use case, you could use [TokenTimelock](https://docs.openzeppelin.com/contracts/3.x/api/token/erc20#TokenTimelock)\r\n\r\nThanks for the link, I'll use the TokenVesting contract tough as it works just as we would like it to work.\r\n\r\n> When creating token time locks or vesting you should consider prevention strategies for: [Bypassing Smart Contract Timelocks](https://blog.openzeppelin.com/bypassing-smart-contract-timelocks/)\r\n\r\nvery interesting concept, thank you for pointing me out!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/689021518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3928",
  "id": 1519144872,
  "node_id": "I_kwDOA9tCBs5ajE-o",
  "number": 3928,
  "title": "Don't rename interfaces IWhatever -> IWhateverUpgradeable",
  "user": {
    "login": "gnarvaja",
    "id": 126963,
    "node_id": "MDQ6VXNlcjEyNjk2Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/126963?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnarvaja",
    "html_url": "https://github.com/gnarvaja",
    "followers_url": "https://api.github.com/users/gnarvaja/followers",
    "following_url": "https://api.github.com/users/gnarvaja/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnarvaja/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnarvaja/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnarvaja/subscriptions",
    "organizations_url": "https://api.github.com/users/gnarvaja/orgs",
    "repos_url": "https://api.github.com/users/gnarvaja/repos",
    "events_url": "https://api.github.com/users/gnarvaja/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnarvaja/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1000230196,
      "node_id": "MDU6TGFiZWwxMDAwMjMwMTk2",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/breaking%20change",
      "name": "breaking change",
      "color": "b60205",
      "default": false,
      "description": "Changes that break backwards compatibility of the public API."
    },
    {
      "id": 4972572147,
      "node_id": "LA_kwDOA9tCBs8AAAABKGNt8w",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/area:%20upgradeability",
      "name": "area: upgradeability",
      "color": "E7DA84",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/11",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11/labels",
    "id": 7990184,
    "node_id": "MI_kwDOA9tCBs4Aeeuo",
    "number": 11,
    "title": "5.0",
    "description": null,
    "creator": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 26,
    "closed_issues": 59,
    "state": "open",
    "created_at": "2022-05-17T19:52:44Z",
    "updated_at": "2023-09-28T21:31:51Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 4,
  "created_at": "2021-11-09T21:17:13Z",
  "updated_at": "2023-09-28T21:31:51Z",
  "closed_at": "2023-09-28T21:31:51Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Also reported some time ago in https://forum.openzeppelin.com/t/why-contracts-upgradeable-has-ierc721upgradeable-and-i-whatever-upgradeable/14793 \r\n\r\n\r\n**üíª Environment**\r\n\r\nopenzeppelin-contracts == 4.3.2\r\nopenzeppelin-contracts-upgradeable == 4.3.2\r\n\r\n**üìù Details**\r\n\r\n<!-- Describe the problem you have been experiencing in more detail. Include as much information as you think is relevant. Keep in mind that transactions can fail for many reasons; context is key here. -->\r\n\r\nThe package openzeppelin-contracts-upgradeable renames the interfaces when they are exactly the same as non-upgradeable (vanilla) versions. This isn't necessary and brings a lot of issues like this one\r\n\r\n**üî¢ Code to reproduce bug**\r\n\r\n<!-- We will be able to better help if you provide a minimal example that triggers the bug. -->\r\n```solidity\r\ninterface IMyContract is IERC721 {\r\n...\r\n}\r\n\r\ncontract MyContract is IMyContract, ERC721Upgradeable {\r\n...\r\n}\r\n```\r\n\r\n\r\nThen when I compile I get errors like these:\r\n\r\n```\r\n11 | contract PolicyNFT is IERC721,\r\n   | ^ (Relevant source part starts here and spans across multiple lines).\r\nNote: Definition in \"ERC721Upgradeable\": \r\n   --> @openzeppelin/contracts-upgradeable/token/ERC721/ERC721Upgradeable.sol:184:5:\r\n    |\r\n184 |     function safeTransferFrom(\r\n    |     ^ (Relevant source part starts here and spans across multiple lines).\r\nNote: Definition in \"IERC721\": \r\n   --> @openzeppelin/contracts/token/ERC721/IERC721.sol:136:5:\r\n    |\r\n136 |     function safeTransferFrom(\r\n    |     ^ (Relevant source part starts here and spans across multiple lines).\r\n\r\nTypeError: Derived contract must override function \"safeTransferFrom\". Two or more base classes define function with same name and parameter types.\r\n```\r\n\r\nI think XXXUpgradeable contracts shouldn't define new interfaces but instead implement the standard ones. Interfaces are the same between upgradeable and non-upgradeable contracts.\r\n\r\nIf name clashes are an issue when importing files from `contracts` and `contracts-upgradeable`, those can be easily avoided using explicit imports\r\n\r\n```solidity\r\nimport {IERC20Metadata} from \"@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol\";\r\nimport {ERC20Upgradeable} from \"@openzeppelin/contracts-upgradeable/token/ERC20/ERC20Upgradeable.sol\";\r\n```\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928/reactions",
    "total_count": 5,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053746",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3928#issuecomment-1371053746",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928",
    "id": 1371053746,
    "node_id": "IC_kwDOA9tCBs5RuJ6y",
    "user": {
      "login": "gnarvaja",
      "id": 126963,
      "node_id": "MDQ6VXNlcjEyNjk2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnarvaja",
      "html_url": "https://github.com/gnarvaja",
      "followers_url": "https://api.github.com/users/gnarvaja/followers",
      "following_url": "https://api.github.com/users/gnarvaja/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnarvaja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnarvaja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnarvaja/subscriptions",
      "organizations_url": "https://api.github.com/users/gnarvaja/orgs",
      "repos_url": "https://api.github.com/users/gnarvaja/repos",
      "events_url": "https://api.github.com/users/gnarvaja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnarvaja/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T22:17:43Z",
    "updated_at": "2021-11-09T22:17:43Z",
    "author_association": "NONE",
    "body": "Related to this issue, https://github.com/OpenZeppelin/openzeppelin-upgrades/issues/455, it's impossible to switch from SafeERC20 to using SafeERC20Upgradeable unless you change your variables from `IERC20` to `IERC20Upgradeable`. \r\n\r\nChanging this issue with the names of the interfaces will make contracts-upgradeable much more usable.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053746/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053750",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3928#issuecomment-1371053750",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928",
    "id": 1371053750,
    "node_id": "IC_kwDOA9tCBs5RuJ62",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-14T16:21:51Z",
    "updated_at": "2021-11-14T16:21:51Z",
    "author_association": "MEMBER",
    "body": "Thanks for reaching out about this. We're not going to make this breaking change in the near future but we'll consider it for the next major release.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053750/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053753",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3928#issuecomment-1371053753",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928",
    "id": 1371053753,
    "node_id": "IC_kwDOA9tCBs5RuJ65",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-01T22:21:26Z",
    "updated_at": "2022-06-01T22:21:26Z",
    "author_association": "MEMBER",
    "body": "There are no updates yet beyond my last comment but I want to provide some more context for why this was done this way initially.\r\n\r\nIdeally this package (`@openzeppelin/contracts-upgradeable`) would depend on `@openzeppelin/contracts` and simply import the interfaces that are already defined there. However, transitive dependencies in Solidity libraries are not common, it is unclear how the various tools (Truffle, Hardhat, etc.) would deal with them, and we should not expect it to work the same across them or even work at all. The reason for this is that these tools resolve dependencies from `node_modules` but likely do not implement the full Node resolution algorithm, which resolves relative to the file that has the import. This means that npm dependencies can't be used because they assume imported dependencies will be resolved according to Node's resolution algorithm. Note that, in fact, because of the way the Solidity compiler has defined its API, it is not possible to resolve transitive dependencies exactly like Node does in the general case. Regardless, it is arguable undesirable to use the same algorithm as Node because it can result in a mess of conflicting dependency versions installed alongside.\r\n\r\nThe only possible alternative to avoid all the mess I just described is to use npm peer dependencies. Until npm v7 these were not great because they were not installed automatically, so they resulted in a poor user experience.\r\n\r\nBecause we chose not to use dependencies, these interfaces need to be defined within the package, and we decided to apply the same rename (*Upgradeable) in order to avoid conflicts with the non-renamed versions in case they were used side by side.\r\n\r\nNow that peer dependencies have better usability, I think the next version of this package will declare OpenZeppelin Contracts as a peer dependency and import the interfaces from there.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371053753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371380321",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3928#issuecomment-1371380321",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3928",
    "id": 1371380321,
    "node_id": "IC_kwDOA9tCBs5RvZph",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-04T20:21:55Z",
    "updated_at": "2023-01-04T20:21:55Z",
    "author_association": "MEMBER",
    "body": "This needs a few changes in the transpiler to get fixed. See https://github.com/OpenZeppelin/openzeppelin-transpiler/issues/108.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1371380321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

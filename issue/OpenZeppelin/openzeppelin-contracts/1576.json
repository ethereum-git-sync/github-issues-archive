{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1576",
  "id": 394551196,
  "node_id": "MDU6SXNzdWUzOTQ1NTExOTY=",
  "number": 1576,
  "title": "SafeMath can no longer be used as a library for uints smaller than 256 bits",
  "user": {
    "login": "BrendanChou",
    "id": 3680392,
    "node_id": "MDQ6VXNlcjM2ODAzOTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3680392?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BrendanChou",
    "html_url": "https://github.com/BrendanChou",
    "followers_url": "https://api.github.com/users/BrendanChou/followers",
    "following_url": "https://api.github.com/users/BrendanChou/following{/other_user}",
    "gists_url": "https://api.github.com/users/BrendanChou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BrendanChou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BrendanChou/subscriptions",
    "organizations_url": "https://api.github.com/users/BrendanChou/orgs",
    "repos_url": "https://api.github.com/users/BrendanChou/repos",
    "events_url": "https://api.github.com/users/BrendanChou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BrendanChou/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/5",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/5",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/5/labels",
    "id": 3834755,
    "node_id": "MDk6TWlsZXN0b25lMzgzNDc1NQ==",
    "number": 5,
    "title": "v2.1",
    "description": "",
    "creator": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 36,
    "state": "closed",
    "created_at": "2018-11-20T14:51:38Z",
    "updated_at": "2019-01-05T18:43:33Z",
    "due_on": "2018-12-13T08:00:00Z",
    "closed_at": "2019-01-05T18:43:33Z"
  },
  "comments": 4,
  "created_at": "2018-12-28T05:31:14Z",
  "updated_at": "2019-01-05T05:25:28Z",
  "closed_at": "2019-01-04T18:33:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\n\r\nCan no longer use SafeMath as an in-line library for unsigned integers smaller than 256 bits.\r\n\r\n<!-- Remember, this is not a place to ask for help debugging code. For that, we welcome you in the OpenZeppelin Slack channel: https://slack.openzeppelin.org/. -->\r\n\r\n**üíª Environment**\r\n\r\n<!-- Tell us what version of OpenZeppelin you're using, and how you're using it: Truffle, Remix, etc. -->\r\n\r\nTruffle 5 and OpenZeppelin 2.1\r\n\r\n**üìù Details**\r\n\r\nThis is because there are **new functions for signed integers** in SafeMath. Recommend splitting into two different files so that both unsigned ints and signed ints of less than 256 bits can be used without first casting to uint256 or int256. Casting like this can result in hard-to-detect bugs.\r\n\r\n<!-- Describe the problem you have been experiencing in more detail. Include as much information as you think is relevant. Keep in mind that transactions can fail for many reasons; context is key here. -->\r\n\r\n**üî¢ Code to reproduce bug**\r\n```\r\nusing SafeMath for uint128;\r\nfunction failMath() public pure {\r\n    uint128 a = 1;\r\n    a.add(1);\r\n}\r\n```\r\nresults in the error:\r\n`Member \"add\" not unique after argument-dependent lookup in type(library SafeMath).`\r\n\r\n<!-- We will be able to better help if you provide a minimal example that triggers the bug. -->\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/450369861",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1576#issuecomment-450369861",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576",
    "id": 450369861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDM2OTg2MQ==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-28T14:44:11Z",
    "updated_at": "2018-12-28T14:44:41Z",
    "author_association": "MEMBER",
    "body": "Good catch @BrendanChou. +1 to splitting into two different libraries (`SafeMath` + `SafeSignedMath`?). We have to fix this for 2.1.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/450369861/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/450935233",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1576#issuecomment-450935233",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576",
    "id": 450935233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDkzNTIzMw==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T17:59:25Z",
    "updated_at": "2019-01-02T17:59:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey there @BrendanChou!\r\n\r\nI'm curious, what are you using the result of the `SafeMath` call for? I'm asking because the result of any operation will be an `uint256`, which needs casting down if working in `uin128`, but that casting is in itself an unsafe operation, since the original value may be out of the representable range.\r\n\r\nThat said, I do agree with your statement that we should provide mechanisms so that explicit casts can be avoided.\r\n\r\nI see a couple ways to move forward with this:\r\n\r\n1. As suggested, split `SafeMath` into two contracts, one with unsigned and one with signed operations. I'm not a fan of this approach mostly because it feels like limitations of the language shouldn't affect how we structure our code, but on a more pragmatic level, I worry we may run into a similar issue in the future (e.g. when providing support for `uint128`), and we won't be able to repeat this then.\r\n1. Provide support for all types that make sense (e.g. `uint128`), so that casts are never needed. This would probably mean some sort of template meta-programming.\r\n1. Go with the explicit casts, and provide safe downcasting functions so that the result is usable. Note that option 1 also requires downcasting.\r\n\r\nRegarding the immediate future, I'd get the signed operations into a `SignedSafeMath`contract in the `drafts` directory and release 2.1 that way, until we settle on a solution.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/450935233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/451528778",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1576#issuecomment-451528778",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576",
    "id": 451528778,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTUyODc3OA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-04T18:33:29Z",
    "updated_at": "2019-01-04T18:33:29Z",
    "author_association": "MEMBER",
    "body": "Fixed by https://github.com/OpenZeppelin/openzeppelin-solidity/pull/1588. Not sure why GitHub didn't close this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/451528778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/451629371",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1576#issuecomment-451629371",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1576",
    "id": 451629371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTYyOTM3MQ==",
    "user": {
      "login": "BrendanChou",
      "id": 3680392,
      "node_id": "MDQ6VXNlcjM2ODAzOTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3680392?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BrendanChou",
      "html_url": "https://github.com/BrendanChou",
      "followers_url": "https://api.github.com/users/BrendanChou/followers",
      "following_url": "https://api.github.com/users/BrendanChou/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrendanChou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BrendanChou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrendanChou/subscriptions",
      "organizations_url": "https://api.github.com/users/BrendanChou/orgs",
      "repos_url": "https://api.github.com/users/BrendanChou/repos",
      "events_url": "https://api.github.com/users/BrendanChou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BrendanChou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-05T05:25:28Z",
    "updated_at": "2019-01-05T05:25:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nventuro Afterwards, using my own simple library to do a safe down-cast to uint128",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/451629371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/992",
  "id": 330991771,
  "node_id": "MDU6SXNzdWUzMzA5OTE3NzE=",
  "number": 992,
  "title": "Convention around indexed string arguments in events (RBAC)",
  "user": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-06-10T18:36:35Z",
  "updated_at": "2019-05-25T00:00:04Z",
  "closed_at": "2019-05-24T23:59:32Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The `RBAC` events currently do not have indexed arguments.\r\n\r\nhttps://github.com/OpenZeppelin/openzeppelin-solidity/blob/b0292cf628d9f8d65615bc07dd8af4844eb5a6d6/contracts/ownership/rbac/RBAC.sol#L22-L23\r\n\r\nIn #981 @shrugs made the `address` argument indexed, and it made me think that `string roleName` should be indexed as well to efficiently look up all the activity around a specific role. The problem is that Solidity will not include the actual contents of an indexed string in the log data, but the hash of the string. This shouldn't stop us.\r\n\r\nI thought of two alternative (complementary?) workarounds for this issue, which basically enable clients to get a human-readable representation of the hash without having to do a preimage attack on KECCAK256.\r\n\r\n1. At deployment emit an event `RoleRegistered(string indexed role, string roleName)`.\r\n2. Provide an external getter `function roleName(bytes32 role) returns (string)`.\r\n\r\nPersonally I'm inclined for doing only 1, so as to not clutter the external inteface, but I would like to back that decision up with data on how efficient it would be for a client to get the role name given its hash emitted in one of the other events.\r\n\r\nSomething like this should probably be the convention for all Solidity programs that wish to use indexed strings in events. What do you think?",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/396087089",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/992#issuecomment-396087089",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992",
    "id": 396087089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjA4NzA4OQ==",
    "user": {
      "login": "shrugs",
      "id": 1535001,
      "node_id": "MDQ6VXNlcjE1MzUwMDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shrugs",
      "html_url": "https://github.com/shrugs",
      "followers_url": "https://api.github.com/users/shrugs/followers",
      "following_url": "https://api.github.com/users/shrugs/following{/other_user}",
      "gists_url": "https://api.github.com/users/shrugs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shrugs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shrugs/subscriptions",
      "organizations_url": "https://api.github.com/users/shrugs/orgs",
      "repos_url": "https://api.github.com/users/shrugs/repos",
      "events_url": "https://api.github.com/users/shrugs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shrugs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-10T22:28:05Z",
    "updated_at": "2018-06-10T22:28:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "I like the `RoleRegistered` approach, so I can just build an off-chain map of hash->human roles. imo the mapping of hash->human doesn't need to live on-chain. \r\n\r\nIt might be worth standardizing this as something like `WellKnownHashRegistered(string indexed hash, string humanReadable)` and then we can build an off-chain indexer (like with gnarly!) that just knows to look for that event on any contract it cares about, and can then auto-infer hashes to human readable forms.\r\n\r\nBut that could also be more effort than it's worth for now? Idk, I'm ok with making this an EIP proposal and then immediately applying it to OZ contracts.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/396087089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/495816522",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/992#issuecomment-495816522",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/992",
    "id": 495816522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTgxNjUyMg==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-24T23:59:32Z",
    "updated_at": "2019-05-25T00:00:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "RBAC no longer exists and Roles have dedicated events, so this doesn't apply anymore.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/495816522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

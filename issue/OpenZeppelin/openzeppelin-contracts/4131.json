{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131",
  "id": 1636018146,
  "node_id": "I_kwDOA9tCBs5hg6fi",
  "number": 4131,
  "title": "Multi vesting contract feature proposal",
  "user": {
    "login": "MerlinEgalite",
    "id": 44097430,
    "node_id": "MDQ6VXNlcjQ0MDk3NDMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/44097430?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MerlinEgalite",
    "html_url": "https://github.com/MerlinEgalite",
    "followers_url": "https://api.github.com/users/MerlinEgalite/followers",
    "following_url": "https://api.github.com/users/MerlinEgalite/following{/other_user}",
    "gists_url": "https://api.github.com/users/MerlinEgalite/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MerlinEgalite/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MerlinEgalite/subscriptions",
    "organizations_url": "https://api.github.com/users/MerlinEgalite/orgs",
    "repos_url": "https://api.github.com/users/MerlinEgalite/repos",
    "events_url": "https://api.github.com/users/MerlinEgalite/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MerlinEgalite/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-03-22T15:33:39Z",
  "updated_at": "2023-04-23T14:14:59Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**🧐 Motivation**\r\nThere is already a [`VestingWallet`](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/finance/VestingWallet.sol) contract allowing to deploy a vesting contract to a specific beneficiary address. However, when you must create vestings for tens of people, this is too restrictive as you need to deploy a contract per beneficiary, costing a lot of gas and it's hard to manage.\r\n\r\nIt would be nice to have a multi vesting contract, like the [dss-vest](https://github.com/makerdao/dss-vest) of Maker but with better naming and complementary features.\r\n\r\nThis is really needed for DAOs in general and having an OZ implementation would ease DAO's operational cost and reinforce trust between the DAO and their investors, advisors, contributors, etc.\r\n\r\n**📝 Details**\r\n\r\n- [ ] Create a MultiVesting contract allowing to create multiple vestings for multiple beneficiaries through the same contract\r\n- [ ] Implement all the available feature of the dss-vest\r\n- [ ] Add the ability to add or not a manager that can revoke a vesting contract\r\n- [ ] If a manager is set, add the possibility for the owner to change the manager\r\n\r\nHappy to help if needed!\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1479995733",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131#issuecomment-1479995733",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
    "id": 1479995733,
    "node_id": "IC_kwDOA9tCBs5YNvFV",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T17:38:25Z",
    "updated_at": "2023-03-22T17:40:35Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @MerlinEgalite \r\n\r\nI'll definitelly have a look a dss-vest, but in the meantime I'd like to point you to 2 options:\r\n\r\n### NFF\r\n\r\n> However, when you must create vestings for tens of people, this is too restrictive as you need to deploy a contract per beneficiary, costing a lot of gas and it's hard to manage.\r\n\r\nYou could do it for \"decently\" cheap using a factory. This is why I built NFF a while back:\r\n- [the github repo](https://github.com/Amxx/NonFungibleFinance)\r\n- [the frontend](https://nff.app.hadriencroubois.com/)\r\n- [the contract deployed on mainnet](https://etherscan.io/address/0xDE09B87e50F65031DF6A3C3AA0E2f0EfCE5E2Cf6)\r\n\r\nCreating a vault using this approach cost ~168k gas. Its not nothing, but its way less than deploying a new contract (and it comes with transferability)\r\n\r\n### VestedAirdrop\r\n\r\nAnother thing I build is the [VestedAirdrop](https://etherscan.io/address/0x9fD7B5BE060bD5961fB645B6A5F93c1C05f55AFa#code) contract. This contract is not trustless, so each project needs one of its own. The admin can register \"airdrop\" in merkle trees, and enable the airdrop by adding the merkle tree root to a whitelist. Anyone in the merkle tree can come and prove that they are part of the airdrop and claim the tokens. Obviously, the airdrop a vesting schedule. An airdrop could be reduced to a single entry, in which case there is no need to even build the merkle tree and provide a merkle proof. Just whitelisting the hash of the Schedule is enough to enable it.\r\n\r\n\r\nBoth these contract were built using OZ, but they are not actually part of OZ's library. Is there any chance either of these might fit your needs? If yes, we'd love to know which one. Otherwise, we'd also love to know why not.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1479995733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1480896952",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131#issuecomment-1480896952",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
    "id": 1480896952,
    "node_id": "IC_kwDOA9tCBs5YRLG4",
    "user": {
      "login": "MerlinEgalite",
      "id": 44097430,
      "node_id": "MDQ6VXNlcjQ0MDk3NDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/44097430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MerlinEgalite",
      "html_url": "https://github.com/MerlinEgalite",
      "followers_url": "https://api.github.com/users/MerlinEgalite/followers",
      "following_url": "https://api.github.com/users/MerlinEgalite/following{/other_user}",
      "gists_url": "https://api.github.com/users/MerlinEgalite/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MerlinEgalite/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MerlinEgalite/subscriptions",
      "organizations_url": "https://api.github.com/users/MerlinEgalite/orgs",
      "repos_url": "https://api.github.com/users/MerlinEgalite/repos",
      "events_url": "https://api.github.com/users/MerlinEgalite/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MerlinEgalite/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T09:55:14Z",
    "updated_at": "2023-03-23T09:55:14Z",
    "author_association": "NONE",
    "body": "I did not know about those options thx!\r\n\r\nSo for the 2 options I think there are some missing features that would have fit us:\r\n- **NFF**: It's not possible to revoke a vesting or end it prematurely as some \"real-world\" vesting contracts would allow.\r\n- **VestedAirdrop**: In my understanding, there's the same issue unless the admin disables the `root` and creates a new one, am I mistaken?\r\n\r\nFor context, we opted for the `dss-vest` for its modularity. However the verbosity of their contracts does not help non-technical persons to understand it nor technical persons to grasp quickly the code.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1480896952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1481331762",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131#issuecomment-1481331762",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
    "id": 1481331762,
    "node_id": "IC_kwDOA9tCBs5YS1Qy",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T14:48:32Z",
    "updated_at": "2023-03-23T14:48:32Z",
    "author_association": "COLLABORATOR",
    "body": "Yes \r\n- NFF is designed to be trustless. Nobody can alter a schedule once its deployed.\r\n- in VestedAidrop, the admin indeed must disable a schedule before possibly re-enable it in a different format.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1481331762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1519073163",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131#issuecomment-1519073163",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
    "id": 1519073163,
    "node_id": "IC_kwDOA9tCBs5aizeL",
    "user": {
      "login": "vachmara",
      "id": 55046446,
      "node_id": "MDQ6VXNlcjU1MDQ2NDQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/55046446?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vachmara",
      "html_url": "https://github.com/vachmara",
      "followers_url": "https://api.github.com/users/vachmara/followers",
      "following_url": "https://api.github.com/users/vachmara/following{/other_user}",
      "gists_url": "https://api.github.com/users/vachmara/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vachmara/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vachmara/subscriptions",
      "organizations_url": "https://api.github.com/users/vachmara/orgs",
      "repos_url": "https://api.github.com/users/vachmara/repos",
      "events_url": "https://api.github.com/users/vachmara/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vachmara/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-23T13:53:44Z",
    "updated_at": "2023-04-23T13:53:44Z",
    "author_association": "NONE",
    "body": "Hey @MerlinEgalite, \r\n\r\nIf you're still looking for a solution for creating vesting contracts for multiple beneficiaries through the same contract and reducing gas costs.\r\n\r\nI recommend checking out the [Token Vesting Contracts](https://github.com/abdelhamidbakhta/token-vesting-contracts) project. It seems to address the requirements you mentioned earlier and could be a good fit for your project.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1519073163/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1519077851",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4131#issuecomment-1519077851",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4131",
    "id": 1519077851,
    "node_id": "IC_kwDOA9tCBs5ai0nb",
    "user": {
      "login": "MerlinEgalite",
      "id": 44097430,
      "node_id": "MDQ6VXNlcjQ0MDk3NDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/44097430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MerlinEgalite",
      "html_url": "https://github.com/MerlinEgalite",
      "followers_url": "https://api.github.com/users/MerlinEgalite/followers",
      "following_url": "https://api.github.com/users/MerlinEgalite/following{/other_user}",
      "gists_url": "https://api.github.com/users/MerlinEgalite/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MerlinEgalite/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MerlinEgalite/subscriptions",
      "organizations_url": "https://api.github.com/users/MerlinEgalite/orgs",
      "repos_url": "https://api.github.com/users/MerlinEgalite/repos",
      "events_url": "https://api.github.com/users/MerlinEgalite/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MerlinEgalite/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-23T14:14:59Z",
    "updated_at": "2023-04-23T14:14:59Z",
    "author_association": "NONE",
    "body": "Interesting, I'll have a look! I've almost finished my own implementation [solvest](https://github.com/MerlinEgalite/solvest) meanwhile haha",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1519077851/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

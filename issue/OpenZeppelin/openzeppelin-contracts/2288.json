{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288",
  "id": 642380368,
  "node_id": "MDU6SXNzdWU2NDIzODAzNjg=",
  "number": 2288,
  "title": "Include mock contracts in NPM bundle",
  "user": {
    "login": "IstoraMandiri",
    "id": 1696942,
    "node_id": "MDQ6VXNlcjE2OTY5NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1696942?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IstoraMandiri",
    "html_url": "https://github.com/IstoraMandiri",
    "followers_url": "https://api.github.com/users/IstoraMandiri/followers",
    "following_url": "https://api.github.com/users/IstoraMandiri/following{/other_user}",
    "gists_url": "https://api.github.com/users/IstoraMandiri/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IstoraMandiri/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IstoraMandiri/subscriptions",
    "organizations_url": "https://api.github.com/users/IstoraMandiri/orgs",
    "repos_url": "https://api.github.com/users/IstoraMandiri/repos",
    "events_url": "https://api.github.com/users/IstoraMandiri/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IstoraMandiri/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-06-20T13:52:27Z",
  "updated_at": "2020-06-26T22:43:25Z",
  "closed_at": "2020-06-26T22:34:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Right now this is explicitly excluded from the NPM package:\r\n\r\n```\r\n  \"files\": [\r\n    \"!/contracts/mocks\",\r\n```\r\n\r\nWould it not be useful to include those mock contracts for testing?",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/647733225",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-647733225",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 647733225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzczMzIyNQ==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-22T19:43:03Z",
    "updated_at": "2020-06-22T19:43:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "The mocks are only used for the tests we run in this project for the library itself, I'm not sure why a user of the library would want to have them. Can you expand on what you're trying to achieve?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/647733225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648048057",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-648048057",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 648048057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0ODA0ODA1Nw==",
    "user": {
      "login": "IstoraMandiri",
      "id": 1696942,
      "node_id": "MDQ6VXNlcjE2OTY5NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1696942?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IstoraMandiri",
      "html_url": "https://github.com/IstoraMandiri",
      "followers_url": "https://api.github.com/users/IstoraMandiri/followers",
      "following_url": "https://api.github.com/users/IstoraMandiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/IstoraMandiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IstoraMandiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IstoraMandiri/subscriptions",
      "organizations_url": "https://api.github.com/users/IstoraMandiri/orgs",
      "repos_url": "https://api.github.com/users/IstoraMandiri/repos",
      "events_url": "https://api.github.com/users/IstoraMandiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IstoraMandiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-23T10:15:27Z",
    "updated_at": "2020-06-23T10:15:27Z",
    "author_association": "NONE",
    "body": "Let's say I've authored a contract that interacts with ERC20 tokens.\r\n\r\nIn my test suite, I'll usually deploy a Mock ERC20 token, with helper methods such as `approveInternal`.\r\n\r\nI could implement this logic myself in a Mock contract within my project, but it is more convenient to use the one provided: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/mocks/ERC20Mock.sol",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648048057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648306010",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-648306010",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 648306010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0ODMwNjAxMA==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-23T17:29:12Z",
    "updated_at": "2020-06-23T17:29:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, so what you want is a mock ERC20 you can use to simplify your testing setup? Unfortunately that's not really what our mocks are ('mock' is really not the right term for them): all they do is expose their internals so we can more easily test the OpenZeppelin Contracts themselves. \r\n\r\nThey are not really suitable to be used by other projects as they are part of our internal testing infrastructure. We often alter them extensively as we update our tests, so it would probably be very annoying to depend on them due to constant changes.\r\n\r\nThat said, you should be able to easily do any setup you need in a testing environment without needing to mock Contracts' functionality. Can you share examples of what you're using mocks for?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648306010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648645876",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-648645876",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 648645876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0ODY0NTg3Ng==",
    "user": {
      "login": "IstoraMandiri",
      "id": 1696942,
      "node_id": "MDQ6VXNlcjE2OTY5NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1696942?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IstoraMandiri",
      "html_url": "https://github.com/IstoraMandiri",
      "followers_url": "https://api.github.com/users/IstoraMandiri/followers",
      "following_url": "https://api.github.com/users/IstoraMandiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/IstoraMandiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IstoraMandiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IstoraMandiri/subscriptions",
      "organizations_url": "https://api.github.com/users/IstoraMandiri/orgs",
      "repos_url": "https://api.github.com/users/IstoraMandiri/repos",
      "events_url": "https://api.github.com/users/IstoraMandiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IstoraMandiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-24T07:26:31Z",
    "updated_at": "2020-06-24T07:44:17Z",
    "author_association": "NONE",
    "body": "> Ah, so what you want is a mock ERC20 you can use to simplify your testing setup?\r\n\r\nYep, exactly. It would go beyond just ERC20s though; you have a wide range that could be useful in other testing setups.\r\n\r\nRight now I am just duplicating the code from `ERC20Mock.sol` into my own project under `contracts/test` and deploying that in my test suite. It would be more convenient to just import it directly from OpenZeppelin.\r\n\r\nSample usage:\r\n\r\n```\r\nasync function setup() {\r\n  const MyContract = await ethers.getContractFactory(\"MyContract\");\r\n  const ERC20 = await ethers.getContractFactory(\"ERC20Mock\");\r\n  const contract = await MyContract.deploy();\r\n  const token = await ERC20.deploy(\"Mock Token\", \"TKN\", account, 100);\r\n  await contract.deployed();\r\n  await token.deployed();\r\n  await token.approveInternal(account, contract.address, 100);\r\n  return { token, contract };\r\n}\r\n```\r\n\r\nIf a project is already using OpenZeppelin contracts, it seems likely that those mock contracts could come in useful to test similar/extended interactions.\r\n\r\nSkimming over the OZ mocks, whilst some of them aren't useful, I can see that there are some that may be useful for testing external contract interactions:\r\n\r\n- Pausable/Owneable/etc\r\n- ReentrancyAttack.sol\r\n- EtherReceiverMock.sol\r\n- GSNxx.sol\r\n- Other Tokens",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/648645876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/650419722",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-650419722",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 650419722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDQxOTcyMg==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T21:52:18Z",
    "updated_at": "2020-06-26T21:52:18Z",
    "author_association": "CONTRIBUTOR",
    "body": ">`await token.approveInternal(account, contract.address, 100);`\r\n\r\nI'd advise you to avoid relying on mocks for this sort of operations. This test is hiding the fact that your contract should call `approve` on the token, which is a non-trivial matter.\r\n\r\nIt's important to understand the difference between the role the mocks play in testing the OpenZeppelin Contracts themselves, and how the library should be used and this usage tested by end users. We assume users trust the code in Contracts to be correct and don't need to test it themselves.\r\n\r\nIt this for this reason (plus what I mentioned before about there being no guarantees on the stability of the mocks) that they are not included in the package.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/650419722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/650435678",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2288#issuecomment-650435678",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2288",
    "id": 650435678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDQzNTY3OA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T22:43:25Z",
    "updated_at": "2020-06-26T22:43:25Z",
    "author_association": "MEMBER",
    "body": "For quick testing you could also consider using one of the [preset contracts](https://docs.openzeppelin.com/contracts/3.x/api/presets).",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/650435678/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2983",
  "id": 1060817655,
  "node_id": "I_kwDOA9tCBs4_Osr3",
  "number": 2983,
  "title": "MerkleProof verify any size limit",
  "user": {
    "login": "wenmoonsir",
    "id": 90743035,
    "node_id": "MDQ6VXNlcjkwNzQzMDM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/90743035?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wenmoonsir",
    "html_url": "https://github.com/wenmoonsir",
    "followers_url": "https://api.github.com/users/wenmoonsir/followers",
    "following_url": "https://api.github.com/users/wenmoonsir/following{/other_user}",
    "gists_url": "https://api.github.com/users/wenmoonsir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wenmoonsir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wenmoonsir/subscriptions",
    "organizations_url": "https://api.github.com/users/wenmoonsir/orgs",
    "repos_url": "https://api.github.com/users/wenmoonsir/repos",
    "events_url": "https://api.github.com/users/wenmoonsir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wenmoonsir/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-11-23T04:02:58Z",
  "updated_at": "2021-11-29T02:20:10Z",
  "closed_at": "2021-11-26T15:04:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, I'm using MerkleProof module to verify if a node belonging to the merkle tree. It's just the standard one.\r\nI couldn't find any docs or issues related to the size of the tree. So I would like to ask if we have done some benchmark on this.\r\nFor example, 1M nodes max or something like that.\r\n\r\nIn MerkleProof.verify, it takes in proof which is bytes32[]. Any size limit on this one, potentially?\r\n\r\nThank you!",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/976249694",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2983#issuecomment-976249694",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983",
    "id": 976249694,
    "node_id": "IC_kwDOA9tCBs46MGNe",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-23T08:21:55Z",
    "updated_at": "2021-11-23T08:24:32Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @wenmoonsir \r\n\r\nThe merkle trees we use are binary trees. Which, if balanced, have a height that is `log2(n)` with `n` the number of leafs. This means that even with 1 million nodes, the proofs would only be 20 entries long. 1 billion would be 30 entries. 1 trillion would be 40 entries.\r\n\r\nAs long as the software used to produce the merkle tree produce balanced trees, there is no real issue with proof length being to long (they should never be stored, and having that in calldata is not an issue.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/976249694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980024070",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2983#issuecomment-980024070",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983",
    "id": 980024070,
    "node_id": "IC_kwDOA9tCBs46afsG",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-26T14:35:38Z",
    "updated_at": "2021-11-26T14:35:38Z",
    "author_association": "MEMBER",
    "body": "To add some numbers to this, the cost of each nonzero calldata byte is 16 gas. Let's say for 1 million nodes, a proof is 20 32-byte words, a total of 640 bytes, for a total of about 10k gas (there is some extra overhead due to encoding the array for the proof but it's negligible). At current prices (130 gwei / gas, 4110 USD / ETH) we're talking about 5.5 USD cost for sending the proof in calldata.\r\n\r\nThere would be some additional cost for verifying the proof, and we should measure that, but calldata cost probably dominates at these proof sizes.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980024070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980044259",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2983#issuecomment-980044259",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983",
    "id": 980044259,
    "node_id": "IC_kwDOA9tCBs46aknj",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-26T15:04:02Z",
    "updated_at": "2021-11-26T15:04:02Z",
    "author_association": "MEMBER",
    "body": "In summary: the limit on tree size will be given by the gas limit of a block (and potentially total calldata limit as is being discussed for a future hard fork), but proof sizes grow logarithmically so we think in practice proof size is not a concern.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980044259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/981233673",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2983#issuecomment-981233673",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2983",
    "id": 981233673,
    "node_id": "IC_kwDOA9tCBs46fHAJ",
    "user": {
      "login": "wenmoonsir",
      "id": 90743035,
      "node_id": "MDQ6VXNlcjkwNzQzMDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/90743035?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wenmoonsir",
      "html_url": "https://github.com/wenmoonsir",
      "followers_url": "https://api.github.com/users/wenmoonsir/followers",
      "following_url": "https://api.github.com/users/wenmoonsir/following{/other_user}",
      "gists_url": "https://api.github.com/users/wenmoonsir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wenmoonsir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wenmoonsir/subscriptions",
      "organizations_url": "https://api.github.com/users/wenmoonsir/orgs",
      "repos_url": "https://api.github.com/users/wenmoonsir/repos",
      "events_url": "https://api.github.com/users/wenmoonsir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wenmoonsir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-29T02:20:10Z",
    "updated_at": "2021-11-29T02:20:10Z",
    "author_association": "NONE",
    "body": "@frangio  that's an interesting point. Thanks for bringing it up! I use another chain which costs way less than erc20 but same idea applies. \r\n\r\nCool. :) Was worried about the size but all seem good",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/981233673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

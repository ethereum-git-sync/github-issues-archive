{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4629",
  "id": 1915022056,
  "node_id": "I_kwDOA9tCBs5yJOro",
  "number": 4629,
  "title": "Unused class/interface in flattened code",
  "user": {
    "login": "vittominacori",
    "id": 8151143,
    "node_id": "MDQ6VXNlcjgxNTExNDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vittominacori",
    "html_url": "https://github.com/vittominacori",
    "followers_url": "https://api.github.com/users/vittominacori/followers",
    "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
    "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
    "organizations_url": "https://api.github.com/users/vittominacori/orgs",
    "repos_url": "https://api.github.com/users/vittominacori/repos",
    "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vittominacori/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2725623999,
      "node_id": "MDU6TGFiZWwyNzI1NjIzOTk5",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/idea",
      "name": "idea",
      "color": "5319e7",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/15",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/15",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/15/labels",
    "id": 9733996,
    "node_id": "MI_kwDOA9tCBs4AlIds",
    "number": 15,
    "title": "5.1",
    "description": null,
    "creator": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 7,
    "closed_issues": 0,
    "state": "open",
    "created_at": "2023-08-02T14:49:42Z",
    "updated_at": "2023-10-05T13:09:00Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 4,
  "created_at": "2023-09-27T08:52:33Z",
  "updated_at": "2023-10-05T13:09:00Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Using flattener (both truffle or hardhat) all the custom errors from `draft-IERC6093.sol` are imported into the flattened file also if unused.\r\nI mean using the ERC20 contract we will find also the `IERC721Errors` and `IERC1155Errors` into the code.\r\nIt should  import only the required (and necessary) file in `import {IERC20Errors} from \"../../interfaces/draft-IERC6093.sol\";` instead of importing the whole file.\r\n\r\nIs there a way to avoid this behavior? \r\nIs this a flattener issue and should we reference it there? \r\n\r\nTo reproduce simply run:\r\n\r\n`npx hardhat flatten contracts/token/ERC20/ERC20.sol > ERC20.flat.sol`\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1737058535",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4629#issuecomment-1737058535",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629",
    "id": 1737058535,
    "node_id": "IC_kwDOA9tCBs5niWjn",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T09:40:20Z",
    "updated_at": "2023-09-27T09:40:20Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @vittominacori \r\n\r\nThat is a flattener issue. Basically the flattener is not smart. Whenever any symbol is imported from a file, the flattener will get the entier file (and not just the symbols needed). \r\n\r\nHere, I see 3 options:\r\n- write a smart flattener \r\n- split the `draft-IERC6093.sol` in 3 distinct files\r\n- accept to have unecessary errors declared in your flattened file.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1737058535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1737079626",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4629#issuecomment-1737079626",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629",
    "id": 1737079626,
    "node_id": "IC_kwDOA9tCBs5nibtK",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T09:53:43Z",
    "updated_at": "2023-09-27T09:53:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @Amxx \r\n\r\nBasing on your list, right now I can accept having unused errors :)\r\n\r\nAs you are working on ERC6093, do you think OZ will keep all the custom errors into the same file or will we split them into distinct files? \r\nI'm also interested as I'm porting ERC1363 to v5 and I like your EIP approach. I'm writing an `IERC1363Errors` interface following that rationale. IMHO it could be better to have the `IERC20Errors`, `IERC721Errors`, etc, next to their standard interface instead of having a single file for all.\r\n\r\nRegarding the other point, it could be good to write a smart flattener to avoid other unwanted code in flattened files.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1737079626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1746986038",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4629#issuecomment-1746986038",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629",
    "id": 1746986038,
    "node_id": "IC_kwDOA9tCBs5oIOQ2",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-04T14:24:19Z",
    "updated_at": "2023-10-04T14:43:53Z",
    "author_association": "COLLABORATOR",
    "body": "Where to put custom errors in something we discussed a lot. \r\n- For our own (non standard) contracts, we put them in the interface (for example `IAccessControl`)\r\n- For standard interfaces, like ERC20 or ERC721, we don't want to put them in the interface, because the errors are not part of the standard. That is why we came up with ERC6093.\r\n- I'm not sure we will want to expand ERC6093. Maybe we will, or maybe we will use a different naming scheme. We may put `IERC20Errors` and `IERC721Errors` in dedicated files, and have `IERC6093` just be an import (some of) these files. That way, we could have an `IERC1363Errors` somewhere, and stay consistent with the other \"error files\" without necessarily including it in ERC6093.\r\n\r\nI guess we will want to make ERC6093 final at some point, which will prevent us from adding more into it. As a consequence, we should plan for error interfaces outside ERC6093",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1746986038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1747065638",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4629#issuecomment-1747065638",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4629",
    "id": 1747065638,
    "node_id": "IC_kwDOA9tCBs5oIhsm",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-04T15:02:04Z",
    "updated_at": "2023-10-04T15:02:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for your answer.\r\n\r\nI didn't mean to add `IERC1363Errors` in ERC6093 to expand it, but that I'm following that logic (naming, parameters...) to be consistent. You can check the PR #4631.\r\n\r\nAlso, when I said to keep `IERC*Errors` next to their interface, I was referring to the same folder.\r\nSo we could put `IERC20Errors` in the `token/ERC20` folder (or somewhere inside like `token/ERC20/errors`).",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1747065638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

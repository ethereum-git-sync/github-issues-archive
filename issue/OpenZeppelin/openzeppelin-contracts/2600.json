{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2600",
  "id": 836055872,
  "node_id": "MDU6SXNzdWU4MzYwNTU4NzI=",
  "number": 2600,
  "title": "Improve Cryptography test clarity to showcase how signatures are generated",
  "user": {
    "login": "crazyrabbitLTC",
    "id": 1938013,
    "node_id": "MDQ6VXNlcjE5MzgwMTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1938013?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/crazyrabbitLTC",
    "html_url": "https://github.com/crazyrabbitLTC",
    "followers_url": "https://api.github.com/users/crazyrabbitLTC/followers",
    "following_url": "https://api.github.com/users/crazyrabbitLTC/following{/other_user}",
    "gists_url": "https://api.github.com/users/crazyrabbitLTC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/crazyrabbitLTC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crazyrabbitLTC/subscriptions",
    "organizations_url": "https://api.github.com/users/crazyrabbitLTC/orgs",
    "repos_url": "https://api.github.com/users/crazyrabbitLTC/repos",
    "events_url": "https://api.github.com/users/crazyrabbitLTC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/crazyrabbitLTC/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-03-19T14:26:33Z",
  "updated_at": "2021-06-01T20:59:24Z",
  "closed_at": "2021-06-01T20:59:24Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\nMany people learn how some of the more exotic features of OpenZeppelin contracts work by reading the tests. Having clear tests has always been a hallmark of the OpenZeppelin library. \r\n\r\nIn the Cryptography tests (https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/test/utils/cryptography/ECDSA.test.js) the signature used is pre-generated. This opens an uncertainty for the reader who perhaps doesn't understand how to properly generate this signature. \r\n\r\n**üìù Details**\r\n\r\nI would like to ask that in the Cryptography tests (and other tests if this idea applies) that we don't use precomputed values, and instead, show the computation of these values as part of the tests so that users understand how to replicate the results on their own, and how to design Javascript code that will properly pass the tests. \r\n\r\nSee for [example](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/09e302384a3c77be1b482b18a4e30f88630cfd66/test/utils/cryptography/ECDSA.test.js#L37): \r\n\r\nThe pre-computation of this signature leaves the reader unsure how to properly create a signature on their own. \r\n\r\n[Here](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/09e302384a3c77be1b482b18a4e30f88630cfd66/test/utils/cryptography/ECDSA.test.js#L102) in the same test file, we have a different form of signature which is unexplained a \"high-s\" value. \r\n\r\nPrecomputing \"magic numbers\" without an explanation as to how or why this value was obtained makes the tests opaque to those unfamiliar with the subject. \r\n\r\nIMHO the OpenZeppelin tests should not only test the smart contract code, but also show the user HOW to test the smart contract code. \r\n\r\nThe accompanying OpenZeppelin [Documentation](https://docs.openzeppelin.com/contracts/3.x/api/cryptography) similarly does not describe how to create signatures so the user is left unsure how the tests created these values. \r\n\r\n<!-- Make sure that you have reviewed the OpenZeppelin Contributor Guidelines. -->\r\n<!-- https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/CONTRIBUTING.md -->\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/802981017",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2600#issuecomment-802981017",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600",
    "id": 802981017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMjk4MTAxNw==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-19T17:05:42Z",
    "updated_at": "2021-03-19T17:05:42Z",
    "author_association": "MEMBER",
    "body": "Thanks for bringing this up! I agree that we should not be using precomputed values in most of these cases, and the ones that can't be computed in the test should be better explained (it may be the case with the \"high-s\" value, I don't remember at the moment).\r\n\r\nI'll revert the issue title to keep it more actionable, but we're keeping test clarity as a general guideline.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/802981017/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/809311933",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2600#issuecomment-809311933",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600",
    "id": 809311933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTMxMTkzMw==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T11:44:06Z",
    "updated_at": "2021-03-29T11:44:06Z",
    "author_association": "COLLABORATOR",
    "body": "Note: there is already a test case where the signature is generated using `web3.eth.sign`: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/test/utils/cryptography/ECDSA.test.js#L110-L119\r\n\r\nI guess its mostly about adding documentation\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/809311933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/813393575",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2600#issuecomment-813393575",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2600",
    "id": 813393575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzM5MzU3NQ==",
    "user": {
      "login": "78051301012",
      "id": 37097169,
      "node_id": "MDQ6VXNlcjM3MDk3MTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/37097169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/78051301012",
      "html_url": "https://github.com/78051301012",
      "followers_url": "https://api.github.com/users/78051301012/followers",
      "following_url": "https://api.github.com/users/78051301012/following{/other_user}",
      "gists_url": "https://api.github.com/users/78051301012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/78051301012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/78051301012/subscriptions",
      "organizations_url": "https://api.github.com/users/78051301012/orgs",
      "repos_url": "https://api.github.com/users/78051301012/repos",
      "events_url": "https://api.github.com/users/78051301012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/78051301012/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-05T13:30:17Z",
    "updated_at": "2021-04-05T13:30:17Z",
    "author_association": "NONE",
    "body": "https://github.com/OpenZeppelin/openzeppelin-contracts/pull/2619",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/813393575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4137",
  "id": 1640557496,
  "node_id": "I_kwDOA9tCBs5hyOu4",
  "number": 4137,
  "title": "always give ERROR:  transferFrom function in ERC721.",
  "user": {
    "login": "vishrut66",
    "id": 108527286,
    "node_id": "U_kgDOBnf-tg",
    "avatar_url": "https://avatars.githubusercontent.com/u/108527286?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vishrut66",
    "html_url": "https://github.com/vishrut66",
    "followers_url": "https://api.github.com/users/vishrut66/followers",
    "following_url": "https://api.github.com/users/vishrut66/following{/other_user}",
    "gists_url": "https://api.github.com/users/vishrut66/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vishrut66/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vishrut66/subscriptions",
    "organizations_url": "https://api.github.com/users/vishrut66/orgs",
    "repos_url": "https://api.github.com/users/vishrut66/repos",
    "events_url": "https://api.github.com/users/vishrut66/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vishrut66/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-25T15:32:28Z",
  "updated_at": "2023-03-28T16:35:45Z",
  "closed_at": "2023-03-28T16:35:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am creating my NFT marketplace smart contract.\r\n\r\nin this, there is a function in which I need to transfer the owner's nft to the marketplace contract.\r\n\r\nI use this method : \r\n\r\n    function createSell(address _nft , uint256 _tokenId) external  {\r\n        IERC721 nft = IERC721(_nft);\r\n        require(nft.ownerOf(_tokenId) == msg.sender, \"not nft owner\");\r\n        nft.approve(address(this), _tokenId);\r\n        nft.transferFrom(msg.sender, address(this), _tokenId);\r\n    }\r\n\r\nso when I call this function it always gives me this error:\r\n\r\n![2023-03-25 (6)](https://user-images.githubusercontent.com/108527286/227724649-c2964aa0-fdf4-4f21-9814-43a71552d936.png)\r\n\r\n\r\nwhen I console log every required condition so I got these results:\r\n![image](https://user-images.githubusercontent.com/108527286/227725084-00d0e6c1-a52f-4d4b-94ef-30ebdae31112.png)\r\n\r\n\r\nhere it's code : \r\n\r\n![2023-03-25 (9)](https://user-images.githubusercontent.com/108527286/227725119-9a2650b5-bf73-41f1-a184-f1cacf2c7184.png)\r\n\r\n\r\nso I want to say that the nft is approved for marketplace contract but when i call the transferFrom  function it gives me ERROR that is message: \"execution reverted: ERC721: approve caller is not token owner or approved for all\"\r\n\r\nyou can also see the console log in that red portion's last line, all required condition is satisfied and it gives True. even i can't transfer Owner's nft to the marketplace.",
  "closed_by": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1485988712",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4137#issuecomment-1485988712",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137",
    "id": 1485988712,
    "node_id": "IC_kwDOA9tCBs5YkmNo",
    "user": {
      "login": "lhemerly",
      "id": 10237960,
      "node_id": "MDQ6VXNlcjEwMjM3OTYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10237960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lhemerly",
      "html_url": "https://github.com/lhemerly",
      "followers_url": "https://api.github.com/users/lhemerly/followers",
      "following_url": "https://api.github.com/users/lhemerly/following{/other_user}",
      "gists_url": "https://api.github.com/users/lhemerly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lhemerly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lhemerly/subscriptions",
      "organizations_url": "https://api.github.com/users/lhemerly/orgs",
      "repos_url": "https://api.github.com/users/lhemerly/repos",
      "events_url": "https://api.github.com/users/lhemerly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lhemerly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T23:20:54Z",
    "updated_at": "2023-03-27T23:20:54Z",
    "author_association": "NONE",
    "body": "The msg sender of the approve is the smart contract which does not own the NFT.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1485988712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1486247396",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4137#issuecomment-1486247396",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4137",
    "id": 1486247396,
    "node_id": "IC_kwDOA9tCBs5YllXk",
    "user": {
      "login": "vishrut66",
      "id": 108527286,
      "node_id": "U_kgDOBnf-tg",
      "avatar_url": "https://avatars.githubusercontent.com/u/108527286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vishrut66",
      "html_url": "https://github.com/vishrut66",
      "followers_url": "https://api.github.com/users/vishrut66/followers",
      "following_url": "https://api.github.com/users/vishrut66/following{/other_user}",
      "gists_url": "https://api.github.com/users/vishrut66/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vishrut66/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vishrut66/subscriptions",
      "organizations_url": "https://api.github.com/users/vishrut66/orgs",
      "repos_url": "https://api.github.com/users/vishrut66/repos",
      "events_url": "https://api.github.com/users/vishrut66/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vishrut66/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T05:37:12Z",
    "updated_at": "2023-03-28T05:37:12Z",
    "author_association": "NONE",
    "body": "after spending some hours trying to understand that, thank you for the response.\r\nthe approve function should be called externally not within the contract.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1486247396/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

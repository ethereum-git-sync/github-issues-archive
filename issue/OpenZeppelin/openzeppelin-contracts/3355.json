{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3355",
  "id": 1214458067,
  "node_id": "I_kwDOA9tCBs5IYyjT",
  "number": 3355,
  "title": "isContract() Implementation is no longer valid",
  "user": {
    "login": "tina1998612",
    "id": 19768276,
    "node_id": "MDQ6VXNlcjE5NzY4Mjc2",
    "avatar_url": "https://avatars.githubusercontent.com/u/19768276?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tina1998612",
    "html_url": "https://github.com/tina1998612",
    "followers_url": "https://api.github.com/users/tina1998612/followers",
    "following_url": "https://api.github.com/users/tina1998612/following{/other_user}",
    "gists_url": "https://api.github.com/users/tina1998612/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tina1998612/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tina1998612/subscriptions",
    "organizations_url": "https://api.github.com/users/tina1998612/orgs",
    "repos_url": "https://api.github.com/users/tina1998612/repos",
    "events_url": "https://api.github.com/users/tina1998612/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tina1998612/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-04-25T12:47:55Z",
  "updated_at": "2022-05-16T16:18:20Z",
  "closed_at": "2022-04-26T09:22:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "It was recently discovered that the `account.code.length > 0` assertion for checking if an account is EOA is not valid. It can be exploited as shown in here: https://github.com/0xKitsune/Ghost-Contract\r\n\r\n> As demonstrated in this repo, a contract can use the CREATE opcode and execute an arbitrary payload, which can call another contract, transfer funds or anything else that a normal contract can do. When using this approach to call another contract, because the execution of this logic is within the constructor, the codesize of the msg.sender is 0.\r\n\r\nOne can use `tx.origin == msg.sender` to check whether the `msg.sender` is EOA. The `isContract()` method may need to be removed to avoid confusion. \r\n\r\nCurrent implemetation: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/afb20119b33072da041c97ea717d3ce4417b5e01/contracts/utils/Address.sol#L41\r\n",
  "closed_by": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 3
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1108712975",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3355#issuecomment-1108712975",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355",
    "id": 1108712975,
    "node_id": "IC_kwDOA9tCBs5CFZ4P",
    "user": {
      "login": "StillFantastic",
      "id": 28007209,
      "node_id": "MDQ6VXNlcjI4MDA3MjA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28007209?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StillFantastic",
      "html_url": "https://github.com/StillFantastic",
      "followers_url": "https://api.github.com/users/StillFantastic/followers",
      "following_url": "https://api.github.com/users/StillFantastic/following{/other_user}",
      "gists_url": "https://api.github.com/users/StillFantastic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StillFantastic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StillFantastic/subscriptions",
      "organizations_url": "https://api.github.com/users/StillFantastic/orgs",
      "repos_url": "https://api.github.com/users/StillFantastic/repos",
      "events_url": "https://api.github.com/users/StillFantastic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StillFantastic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-25T15:19:05Z",
    "updated_at": "2022-04-25T15:19:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think it is mentioned in the document to be careful with that case.\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/c12076fb7e3dfe48ef1d9c3bb2a58bdd3ffc0cee/contracts/utils/Address.sol#L18-L24\r\n#1212 also discussed the drawback of `tx.origin` approach.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1108712975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1108758346",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3355#issuecomment-1108758346",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355",
    "id": 1108758346,
    "node_id": "IC_kwDOA9tCBs5CFk9K",
    "user": {
      "login": "tina1998612",
      "id": 19768276,
      "node_id": "MDQ6VXNlcjE5NzY4Mjc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19768276?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tina1998612",
      "html_url": "https://github.com/tina1998612",
      "followers_url": "https://api.github.com/users/tina1998612/followers",
      "following_url": "https://api.github.com/users/tina1998612/following{/other_user}",
      "gists_url": "https://api.github.com/users/tina1998612/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tina1998612/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tina1998612/subscriptions",
      "organizations_url": "https://api.github.com/users/tina1998612/orgs",
      "repos_url": "https://api.github.com/users/tina1998612/repos",
      "events_url": "https://api.github.com/users/tina1998612/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tina1998612/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-25T16:00:33Z",
    "updated_at": "2022-04-25T16:00:33Z",
    "author_association": "NONE",
    "body": "hmm I see, it's still a bit misleading with the naming.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1108758346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1126660022",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3355#issuecomment-1126660022",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355",
    "id": 1126660022,
    "node_id": "IC_kwDOA9tCBs5DJ3e2",
    "user": {
      "login": "frank890417",
      "id": 4727572,
      "node_id": "MDQ6VXNlcjQ3Mjc1NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4727572?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frank890417",
      "html_url": "https://github.com/frank890417",
      "followers_url": "https://api.github.com/users/frank890417/followers",
      "following_url": "https://api.github.com/users/frank890417/following{/other_user}",
      "gists_url": "https://api.github.com/users/frank890417/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frank890417/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frank890417/subscriptions",
      "organizations_url": "https://api.github.com/users/frank890417/orgs",
      "repos_url": "https://api.github.com/users/frank890417/repos",
      "events_url": "https://api.github.com/users/frank890417/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frank890417/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-14T07:09:16Z",
    "updated_at": "2022-05-14T07:09:16Z",
    "author_association": "NONE",
    "body": "Agree with @tina1998612 that isContract should consider cases like \"a **contract** in construction\", or it is not aligned with its function name and cannot help developers to avoid ghost contract calls.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1126660022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1127871667",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3355#issuecomment-1127871667",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3355",
    "id": 1127871667,
    "node_id": "IC_kwDOA9tCBs5DOfSz",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-16T16:18:20Z",
    "updated_at": "2022-05-16T16:18:20Z",
    "author_association": "COLLABORATOR",
    "body": "This as been discussed numerous times already:\r\n\r\n- The `isContract` function is necessary for some operation such as ERC721 & ERC1155 safeTransfer hooks.\r\n- Limitation of the `isConstract` function are clearly and extensively documented.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1127871667/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

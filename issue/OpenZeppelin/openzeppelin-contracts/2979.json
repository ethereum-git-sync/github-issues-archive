{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2979",
  "id": 1058930449,
  "node_id": "I_kwDOA9tCBs4_Hf8R",
  "number": 2979,
  "title": "ERC1967Upgrade.sol does not compile using Solidity 0.8.2",
  "user": {
    "login": "DaigaroCota",
    "id": 32775237,
    "node_id": "MDQ6VXNlcjMyNzc1MjM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/32775237?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DaigaroCota",
    "html_url": "https://github.com/DaigaroCota",
    "followers_url": "https://api.github.com/users/DaigaroCota/followers",
    "following_url": "https://api.github.com/users/DaigaroCota/following{/other_user}",
    "gists_url": "https://api.github.com/users/DaigaroCota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DaigaroCota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DaigaroCota/subscriptions",
    "organizations_url": "https://api.github.com/users/DaigaroCota/orgs",
    "repos_url": "https://api.github.com/users/DaigaroCota/repos",
    "events_url": "https://api.github.com/users/DaigaroCota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DaigaroCota/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-11-19T21:28:03Z",
  "updated_at": "2021-12-20T20:49:02Z",
  "closed_at": "2021-12-20T20:49:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi OZ team, \r\n\r\nThe following contract:\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/52d42d6e03ba7940b78a4940ce13bca70aa4dacc/contracts/proxy/ERC1967/ERC1967Upgrade.sol#L16\r\n\r\nDoes not compile when using Solidity 0.8.2. The following error shows:\r\n\r\n```\r\nDocstringParsingError: Documentation tag @custom:oz-upgrades-unsafe-allow not valid for contracts.\r\n --> @openzeppelin/contracts/proxy/ERC1967/ERC1967Upgrade.sol:9:1:\r\n  |\r\n9 | /**\r\n  | ^ (Relevant source part starts here and spans across multiple lines).\r\nError HH600: Compilation failed\r\n```\r\n\r\nThe error seems to have been reported, refer to this link: [Issue reported](https://github.com/ethereum/solidity/issues/11152)\r\n\r\nI tried using Solidity 0.8.4 and compilation worked fine. \r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980067959",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2979#issuecomment-980067959",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979",
    "id": 980067959,
    "node_id": "IC_kwDOA9tCBs46aqZ3",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-26T15:45:12Z",
    "updated_at": "2021-11-26T15:45:12Z",
    "author_association": "MEMBER",
    "body": "Thank you @DaigaroCota. It seems we need to bump the pragma to 0.8.4.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/980067959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998083601",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2979#issuecomment-998083601",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979",
    "id": 998083601,
    "node_id": "IC_kwDOA9tCBs47fYwR",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-20T16:30:05Z",
    "updated_at": "2021-12-20T16:30:05Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @DaigaroCota \r\n\r\nWhile working on a fix for that, I was not able to replicate this issue. I am compiling using 0.8.2 on remix, and I'm not seeing any issue. Can you confirm this issue ?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998083601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998220366",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2979#issuecomment-998220366",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979",
    "id": 998220366,
    "node_id": "IC_kwDOA9tCBs47f6JO",
    "user": {
      "login": "DaigaroCota",
      "id": 32775237,
      "node_id": "MDQ6VXNlcjMyNzc1MjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/32775237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DaigaroCota",
      "html_url": "https://github.com/DaigaroCota",
      "followers_url": "https://api.github.com/users/DaigaroCota/followers",
      "following_url": "https://api.github.com/users/DaigaroCota/following{/other_user}",
      "gists_url": "https://api.github.com/users/DaigaroCota/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DaigaroCota/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DaigaroCota/subscriptions",
      "organizations_url": "https://api.github.com/users/DaigaroCota/orgs",
      "repos_url": "https://api.github.com/users/DaigaroCota/repos",
      "events_url": "https://api.github.com/users/DaigaroCota/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DaigaroCota/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-20T19:46:32Z",
    "updated_at": "2021-12-20T19:46:32Z",
    "author_association": "NONE",
    "body": "Hi @Amxx,\r\n\r\nI confirm it is an issue, though, perhaps it is specific to Hardhat. I tried compiling on Remix and it worked as you indicated. This makes me believe the issue is Hardhat specific then.\r\n\r\nI set-up here: https://github.com/DaigaroCota/hardhat-playground/tree/test/issue/oz-erc1967-contract\r\n\r\nGreeter.sol contract does not compile, displaying the error below:\r\n\r\n![image](https://user-images.githubusercontent.com/32775237/146823194-be86201e-a289-4b52-ada8-7715bb314690.png)\r\n\r\nFeel free to close issue here. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998220366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998258767",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2979#issuecomment-998258767",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2979",
    "id": 998258767,
    "node_id": "IC_kwDOA9tCBs47gDhP",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-20T20:49:01Z",
    "updated_at": "2021-12-20T20:49:01Z",
    "author_association": "MEMBER",
    "body": "@DaigaroCota Thanks for the reproduction, but there is no dependency on `@openzeppelin/contracts` in that repository so we don't know what version you're using. I would recommend against installing the package globally if you've done that.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/998258767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

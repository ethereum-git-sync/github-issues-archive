{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3304",
  "id": 1186924196,
  "node_id": "I_kwDOA9tCBs5Gvwak",
  "number": 3304,
  "title": "royaltyInfo() should/could be public",
  "user": {
    "login": "mcIovin",
    "id": 60447858,
    "node_id": "MDQ6VXNlcjYwNDQ3ODU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/60447858?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mcIovin",
    "html_url": "https://github.com/mcIovin",
    "followers_url": "https://api.github.com/users/mcIovin/followers",
    "following_url": "https://api.github.com/users/mcIovin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mcIovin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mcIovin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mcIovin/subscriptions",
    "organizations_url": "https://api.github.com/users/mcIovin/orgs",
    "repos_url": "https://api.github.com/users/mcIovin/repos",
    "events_url": "https://api.github.com/users/mcIovin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mcIovin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-03-30T20:00:01Z",
  "updated_at": "2022-03-31T18:01:23Z",
  "closed_at": "2022-03-31T18:01:23Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\n\r\nI want to inherit ERC2981.sol, then I  want to override the royaltyInfo() function in order to add a 'require' statement before calling the the inherited ERC2981 royaltyInfo() function (using the super. syntax.)\r\nThis creates the following compiler error\r\n\r\nTypeError: Member \"royaltyInfo\" not found or not visible after argument-dependent lookup in type(contract super ...\r\n\r\nand I believe this is caused because in ERC2981.sol, royaltyInfo() is declared as external rather than public.\r\n\r\n<!-- Remember, this is not a place to ask for help debugging code. For that, we welcome you in the OpenZeppelin Community Forum: https://forum.openzeppelin.com/. -->\r\n\r\nethereum testing environments\r\n\r\n<!-- Tell us what version of OpenZeppelin Contracts you're using, and how you're using it: Truffle, Remix, etc. -->\r\n\r\nopenzeppeling 4.5\r\nRemix IDE\r\nsolidity 0.8.4\r\n\r\n<!-- Describe the problem you have been experiencing in more detail. Include as much information as you think is relevant. Keep in mind that transactions can fail for many reasons; context is key here. -->\r\n\r\nI would like to add a bit of functionality to the openzeppelin implementation of ERC2981. Specifically, I want to check that a token exists before asking for its royalty information, but the way the code is currently written I don't this can be done.\r\nI think this can be solved by making the function in ERC2981.sol public instead of virtual.\r\nPerhaps there was deliberate reasoning for making this function external, but if not, then it would be useful to have the ability to override royaltyInfo()\r\n\r\n\r\n<!-- We will be able to better help if you provide a minimal example that triggers the bug. -->\r\n\r\n// Trying to compile the code below triggers the error.\r\n\r\n\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.4;\r\n\r\nimport \"@openzeppelin/contracts@4.5.0/token/ERC721/ERC721.sol\";\r\nimport \"@openzeppelin/contracts@4.5.0/access/Ownable.sol\";\r\nimport \"@openzeppelin/contracts@4.5.0/utils/Counters.sol\";\r\nimport \"@openzeppelin/contracts@4.5.0/token/common/ERC2981.sol\";\r\n\r\ncontract MyToken is ERC721, ERC2981, Ownable {\r\n    using Counters for Counters.Counter;\r\n\r\n    Counters.Counter private _tokenIdCounter;\r\n\r\n    constructor() ERC721(\"MyToken\", \"MTK\") {}\r\n\r\n    function _baseURI() internal pure override returns (string memory) {\r\n        return \"http://some.url/\";\r\n    }\r\n\r\n    function safeMint(address to) public onlyOwner {\r\n        uint256 tokenId = _tokenIdCounter.current();\r\n        _tokenIdCounter.increment();\r\n        _safeMint(to, tokenId);\r\n    }\r\n\r\n    function royaltyInfo(uint256 tokenId, uint256 salePrice)\r\n        external\r\n        view\r\n        override\r\n        returns (address, uint256)\r\n    {\r\n        // require(_exists(tokenId), \"Requested royalty for non-existing token.\");    //  <-- This line is why I want to override the function.\r\n        return super.royaltyInfo(tokenId, salePrice);\r\n    }\r\n\r\n    // The following functions are overrides required by Solidity.\r\n\r\n    function supportsInterface(bytes4 interfaceId)\r\n        public\r\n        view\r\n        override(ERC721, ERC2981)\r\n        returns (bool)\r\n    {\r\n        return super.supportsInterface(interfaceId);\r\n    }\r\n}\r\n\r\n\r\n",
  "closed_by": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1084254508",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3304#issuecomment-1084254508",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304",
    "id": 1084254508,
    "node_id": "IC_kwDOA9tCBs5AoGks",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-31T08:22:11Z",
    "updated_at": "2022-03-31T08:22:11Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @ATI00 \r\n\r\nYou are right, `royaltyInfo` should be public.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1084254508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1084718589",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3304#issuecomment-1084718589",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3304",
    "id": 1084718589,
    "node_id": "IC_kwDOA9tCBs5Ap339",
    "user": {
      "login": "mcIovin",
      "id": 60447858,
      "node_id": "MDQ6VXNlcjYwNDQ3ODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/60447858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcIovin",
      "html_url": "https://github.com/mcIovin",
      "followers_url": "https://api.github.com/users/mcIovin/followers",
      "following_url": "https://api.github.com/users/mcIovin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcIovin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcIovin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcIovin/subscriptions",
      "organizations_url": "https://api.github.com/users/mcIovin/orgs",
      "repos_url": "https://api.github.com/users/mcIovin/repos",
      "events_url": "https://api.github.com/users/mcIovin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcIovin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-31T15:04:00Z",
    "updated_at": "2022-03-31T15:05:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @Amxx,\r\nThank you so much for taking the time to read my submission and for acting on it so fast!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1084718589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

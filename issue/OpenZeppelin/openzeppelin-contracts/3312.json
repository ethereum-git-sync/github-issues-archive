{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3312",
  "id": 1190049156,
  "node_id": "I_kwDOA9tCBs5G7rWE",
  "number": 3312,
  "title": "Missing \"require\" implementation in ERC2981 ?",
  "user": {
    "login": "mcIovin",
    "id": 60447858,
    "node_id": "MDQ6VXNlcjYwNDQ3ODU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/60447858?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mcIovin",
    "html_url": "https://github.com/mcIovin",
    "followers_url": "https://api.github.com/users/mcIovin/followers",
    "following_url": "https://api.github.com/users/mcIovin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mcIovin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mcIovin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mcIovin/subscriptions",
    "organizations_url": "https://api.github.com/users/mcIovin/orgs",
    "repos_url": "https://api.github.com/users/mcIovin/repos",
    "events_url": "https://api.github.com/users/mcIovin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mcIovin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-04-01T16:50:16Z",
  "updated_at": "2022-04-07T23:34:53Z",
  "closed_at": "2022-04-07T23:34:53Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\n\r\nIn most of the contracts whenever the @dev comments mention a 'requirement' - the requirement is then implemented in the following function. However, this seems to be missing in contract ERC2981 at line 91\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/69c3781043b9671012c5b19fdea81784a70a5289/contracts/token/common/ERC2981.sol#L91\r\n\r\nShould the _setTokenRoyalty() function have the following line of code?\r\n`require(_exists(tokenId), \"ERC2981: URI query for nonexistent token\");`\r\n\r\nI'm still wrapping my head around solidity inheritance when it comes to storage, so maybe the line above cannot be included (like for example it is included in other places like ERC721SURIStorage) because ERC2981 does not inherit ERC721...therefore maybe _exists won't be accessible to in.\r\nIf that is the case, should the 'requirement' in the comment be removed?\r\n\r\nApologies in advance if I'm misunderstanding the 'requirement' in the @dev section. Maybe what those comments mean is that the developer should ensure those requirements are met before calling the function; however, in most other cases I've seen the function implement the requirements, so I thought I would just point out that in this case the 'requirement' of existence is not implemented in the function.\r\n\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1086729536",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3312#issuecomment-1086729536",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312",
    "id": 1086729536,
    "node_id": "IC_kwDOA9tCBs5Axi1A",
    "user": {
      "login": "mw2000",
      "id": 11898068,
      "node_id": "MDQ6VXNlcjExODk4MDY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11898068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mw2000",
      "html_url": "https://github.com/mw2000",
      "followers_url": "https://api.github.com/users/mw2000/followers",
      "following_url": "https://api.github.com/users/mw2000/following{/other_user}",
      "gists_url": "https://api.github.com/users/mw2000/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mw2000/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mw2000/subscriptions",
      "organizations_url": "https://api.github.com/users/mw2000/orgs",
      "repos_url": "https://api.github.com/users/mw2000/repos",
      "events_url": "https://api.github.com/users/mw2000/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mw2000/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-02T21:44:23Z",
    "updated_at": "2022-04-02T21:44:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is a pretty good issue brought up. I'm new to the repo, so please take this with a grain of salt, but I think the requirement is more of a soft requirement than a hard one.\r\n\r\nTechnically, there is a niche use case to having royalty of a non-minted NFT be set before it is minted. In my opinion, there's no need for this requirement to exist in the first place, especially since it's not enforced. In my opinion, the comment should be removed.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1086729536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1089361091",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3312#issuecomment-1089361091",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312",
    "id": 1089361091,
    "node_id": "IC_kwDOA9tCBs5A7lTD",
    "user": {
      "login": "mcIovin",
      "id": 60447858,
      "node_id": "MDQ6VXNlcjYwNDQ3ODU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/60447858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcIovin",
      "html_url": "https://github.com/mcIovin",
      "followers_url": "https://api.github.com/users/mcIovin/followers",
      "following_url": "https://api.github.com/users/mcIovin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcIovin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcIovin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcIovin/subscriptions",
      "organizations_url": "https://api.github.com/users/mcIovin/orgs",
      "repos_url": "https://api.github.com/users/mcIovin/repos",
      "events_url": "https://api.github.com/users/mcIovin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcIovin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-05T21:16:21Z",
    "updated_at": "2022-04-05T21:16:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "That makes sense to me tooo.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1089361091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092301326",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3312#issuecomment-1092301326",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3312",
    "id": 1092301326,
    "node_id": "IC_kwDOA9tCBs5BGzIO",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-07T23:34:53Z",
    "updated_at": "2022-04-07T23:34:53Z",
    "author_association": "MEMBER",
    "body": "This was a requirement we had at one point in the pull request but we removed the check and forgot to delete the documentation.\r\n\r\nThanks for pointing it out! Fixed in dd01889.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092301326/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

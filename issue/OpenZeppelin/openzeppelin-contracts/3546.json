{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546",
  "id": 1303801478,
  "node_id": "I_kwDOA9tCBs5Ntm6G",
  "number": 3546,
  "title": "Possible change:  block.number to block.timestamp in Governance contracts",
  "user": {
    "login": "Julian-dev28",
    "id": 73849597,
    "node_id": "MDQ6VXNlcjczODQ5NTk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/73849597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Julian-dev28",
    "html_url": "https://github.com/Julian-dev28",
    "followers_url": "https://api.github.com/users/Julian-dev28/followers",
    "following_url": "https://api.github.com/users/Julian-dev28/following{/other_user}",
    "gists_url": "https://api.github.com/users/Julian-dev28/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Julian-dev28/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Julian-dev28/subscriptions",
    "organizations_url": "https://api.github.com/users/Julian-dev28/orgs",
    "repos_url": "https://api.github.com/users/Julian-dev28/repos",
    "events_url": "https://api.github.com/users/Julian-dev28/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Julian-dev28/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/11",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11/labels",
    "id": 7990184,
    "node_id": "MI_kwDOA9tCBs4Aeeuo",
    "number": 11,
    "title": "5.0",
    "description": null,
    "creator": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 31,
    "closed_issues": 45,
    "state": "open",
    "created_at": "2022-05-17T19:52:44Z",
    "updated_at": "2023-06-29T16:00:39Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 5,
  "created_at": "2022-07-13T18:37:57Z",
  "updated_at": "2022-07-22T19:28:40Z",
  "closed_at": "2022-07-14T21:05:30Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hey all,\r\n\r\nDuring a [conversation on discord](https://discord.com/channels/578992315641626624/578992911991963648/996455819593924618), the Avalanche team discovered that there may be an opportunity to contribute to a [Governance contract](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/governance/Governor.sol) from OpenZeppelin in a way that would benefit our developers.\r\n\r\nThe contract above uses `block.number` as a timestamp which is unsuitable for users on networks such as Avalanche due to its volatile block production.\r\n\r\n[summary here](https://medium.com/avalancheavax/avalanche-consensus-101-99c68a3e3159)\r\n> ...Avalanche nodes only work when there is work to be done. Thereâ€™s no mining or polling to get new blocks. Transactions are broadcast to the wider network, who then hears them and begins voting. If there are no transactions to vote on, the nodes in the network donâ€™t do anything except listen until new transactions are heard. \r\n\r\nAside from allowing our users to implement this contract into their projects, we find that using `block.timestamp` will benefit Open Zeppelin's Smart Contract users by reducing the possible security risk posed by using `block.number`. \r\n\r\n[Consensys has stated](https://consensys.github.io/smart-contract-best-practices/development-recommendations/solidity-specific/timestamp-dependence/) the following regarding `block.number`\r\n> If the scale of your time-dependent event can vary by 15 seconds and maintain integrity, it is safe to use a block.timestamp.\r\n\r\n>Avoid using block.number as a timestamp\r\n\r\n> It is possible to estimate a time delta using the `block.number` property and [average block time](https://etherscan.io/chart/blocktime), however this is not future proof as block times may change (such as [fork reorganisations](https://blog.ethereum.org/2015/08/08/chain-reorganisation-depth-expectations/) and the [difficulty bomb](https://github.com/ethereum/EIPs/issues/649)). In a sale spanning days, the 15-second rule allows one to achieve a more reliable estimate of time.\r\n\r\n\r\n**ðŸ“ Details**\r\nThank you for taking the time to read this.\r\n\r\nFirst, I would like to understand the logic behind using `block.number `> `block.timestamp` in this case, and then verify that there is an opportunity to make this change.\r\n\r\nTo implement this change we would replace all `block.number` values with `block.timestamp` where applicable and with special attention to Governance related contracts.\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1183650920",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546#issuecomment-1183650920",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
    "id": 1183650920,
    "node_id": "IC_kwDOA9tCBs5GjRRo",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T20:33:57Z",
    "updated_at": "2022-07-13T20:33:57Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @Julian-dev28 \r\n\r\nThis was discussed many times, and it is on our roadmap. Unfortunatelly, its not as simple as you make it look. Changing the governor alone is not enough, you also need the voting token to move to timestamps.\r\n\r\nHaving a timestamp governor query a block.number token would be catastrophic. \r\n\r\nI'm working on a draft ERC. I'll try to remember to share it here so you can provide feedback.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1183650920/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1183698513",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546#issuecomment-1183698513",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
    "id": 1183698513,
    "node_id": "IC_kwDOA9tCBs5Gjc5R",
    "user": {
      "login": "Julian-dev28",
      "id": 73849597,
      "node_id": "MDQ6VXNlcjczODQ5NTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73849597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Julian-dev28",
      "html_url": "https://github.com/Julian-dev28",
      "followers_url": "https://api.github.com/users/Julian-dev28/followers",
      "following_url": "https://api.github.com/users/Julian-dev28/following{/other_user}",
      "gists_url": "https://api.github.com/users/Julian-dev28/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Julian-dev28/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Julian-dev28/subscriptions",
      "organizations_url": "https://api.github.com/users/Julian-dev28/orgs",
      "repos_url": "https://api.github.com/users/Julian-dev28/repos",
      "events_url": "https://api.github.com/users/Julian-dev28/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Julian-dev28/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T21:31:26Z",
    "updated_at": "2022-07-13T22:17:30Z",
    "author_association": "NONE",
    "body": "Understandable\r\nThank you for the reply. \r\n\r\nYeah, I agree. There are some dependencies that gave me a bit of trouble when I tried to make this change locally so I get what you mean when you say it's not as easy as it may seem.\r\n\r\nAwesome. Looking forward to it!\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1183698513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1184895961",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546#issuecomment-1184895961",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
    "id": 1184895961,
    "node_id": "IC_kwDOA9tCBs5GoBPZ",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T21:05:27Z",
    "updated_at": "2022-07-14T21:05:27Z",
    "author_association": "MEMBER",
    "body": "Closing this as a duplicate of https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3081.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1184895961/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1184896587",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546#issuecomment-1184896587",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
    "id": 1184896587,
    "node_id": "IC_kwDOA9tCBs5GoBZL",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T21:06:19Z",
    "updated_at": "2022-07-14T21:06:19Z",
    "author_association": "MEMBER",
    "body": ">First, I would like to understand the logic behind using block.number > block.timestamp\r\n\r\nThe reason was to have out of the box compatibility with the tooling that was built around Compound's GovernorAlpha and GovernorBravo.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1184896587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1192874259",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3546#issuecomment-1192874259",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3546",
    "id": 1192874259,
    "node_id": "IC_kwDOA9tCBs5HGdET",
    "user": {
      "login": "Julian-dev28",
      "id": 73849597,
      "node_id": "MDQ6VXNlcjczODQ5NTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73849597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Julian-dev28",
      "html_url": "https://github.com/Julian-dev28",
      "followers_url": "https://api.github.com/users/Julian-dev28/followers",
      "following_url": "https://api.github.com/users/Julian-dev28/following{/other_user}",
      "gists_url": "https://api.github.com/users/Julian-dev28/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Julian-dev28/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Julian-dev28/subscriptions",
      "organizations_url": "https://api.github.com/users/Julian-dev28/orgs",
      "repos_url": "https://api.github.com/users/Julian-dev28/repos",
      "events_url": "https://api.github.com/users/Julian-dev28/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Julian-dev28/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-22T19:28:40Z",
    "updated_at": "2022-07-22T19:28:40Z",
    "author_association": "NONE",
    "body": "Thanks for the update.\r\n\r\nLooking forward to the new implementation.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1192874259/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

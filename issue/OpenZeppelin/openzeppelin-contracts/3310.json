{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310",
  "id": 1189592388,
  "node_id": "I_kwDOA9tCBs5G571E",
  "number": 3310,
  "title": "Unable to initialize proxy contracts deployed by another contract",
  "user": {
    "login": "ivanzhelyazkov",
    "id": 18243849,
    "node_id": "MDQ6VXNlcjE4MjQzODQ5",
    "avatar_url": "https://avatars.githubusercontent.com/u/18243849?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ivanzhelyazkov",
    "html_url": "https://github.com/ivanzhelyazkov",
    "followers_url": "https://api.github.com/users/ivanzhelyazkov/followers",
    "following_url": "https://api.github.com/users/ivanzhelyazkov/following{/other_user}",
    "gists_url": "https://api.github.com/users/ivanzhelyazkov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ivanzhelyazkov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ivanzhelyazkov/subscriptions",
    "organizations_url": "https://api.github.com/users/ivanzhelyazkov/orgs",
    "repos_url": "https://api.github.com/users/ivanzhelyazkov/repos",
    "events_url": "https://api.github.com/users/ivanzhelyazkov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ivanzhelyazkov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-04-01T10:30:39Z",
  "updated_at": "2022-04-08T09:02:13Z",
  "closed_at": "2022-04-07T22:50:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\nI have a contract which deploys proxies pointing to a implementation. \r\nThe implementation contains a `initialize` function which triggers the `initializer` modifier of the `Initializable` contract. \r\nAfter the deployment, in the same contract function, I call `initialize`. \r\nThe error I get is `reverted with reason string 'Initializable: contract is already initialized'`.\r\nThe contract hasn't been initialized beforehand and the function shouldn't revert.\r\n**The expected behavior is for the contract to be initialized.**\r\n\r\n**ðŸ’» Environment**\r\n\r\nUsing latest version of Hardhat (`^2.9.2`) and latest versions of Openzeppelin contracts (`^4.5.0`).\r\n\r\nReverting to Openzeppelin contracts `^4.4.0` solves the issue.\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1086608867",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1086608867",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1086608867,
    "node_id": "IC_kwDOA9tCBs5AxFXj",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-02T10:16:39Z",
    "updated_at": "2022-04-02T10:16:39Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @ivanzhelyazkov \n\nHave you checked ou the changelog for 4.4.1 and the associated breaking changes ?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1086608867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1088448755",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1088448755",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1088448755,
    "node_id": "IC_kwDOA9tCBs5A4Gjz",
    "user": {
      "login": "ivanzhelyazkov",
      "id": 18243849,
      "node_id": "MDQ6VXNlcjE4MjQzODQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18243849?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ivanzhelyazkov",
      "html_url": "https://github.com/ivanzhelyazkov",
      "followers_url": "https://api.github.com/users/ivanzhelyazkov/followers",
      "following_url": "https://api.github.com/users/ivanzhelyazkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/ivanzhelyazkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ivanzhelyazkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ivanzhelyazkov/subscriptions",
      "organizations_url": "https://api.github.com/users/ivanzhelyazkov/orgs",
      "repos_url": "https://api.github.com/users/ivanzhelyazkov/repos",
      "events_url": "https://api.github.com/users/ivanzhelyazkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ivanzhelyazkov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-05T09:00:21Z",
    "updated_at": "2022-04-05T09:00:21Z",
    "author_association": "NONE",
    "body": "Yes - so the breaking changes in 4.4.1 are stated as follows:\r\n`It is no longer possible to call an initializer-protected function from within another initializer function outside the context of a constructor.`\r\nBut, the function from which I'm calling the initializer-protected function isn't an initializer function.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1088448755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1090245520",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1090245520",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1090245520,
    "node_id": "IC_kwDOA9tCBs5A-9OQ",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-06T13:05:03Z",
    "updated_at": "2022-04-06T13:05:03Z",
    "author_association": "COLLABORATOR",
    "body": "> function from which I'm calling the initializer-protected function isn't an initializer function.\r\n\r\nCould you please prove a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that showcases what you are trying to do and what is not working?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1090245520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1091780656",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1091780656",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1091780656,
    "node_id": "IC_kwDOA9tCBs5BE0Aw",
    "user": {
      "login": "ivanzhelyazkov",
      "id": 18243849,
      "node_id": "MDQ6VXNlcjE4MjQzODQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18243849?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ivanzhelyazkov",
      "html_url": "https://github.com/ivanzhelyazkov",
      "followers_url": "https://api.github.com/users/ivanzhelyazkov/followers",
      "following_url": "https://api.github.com/users/ivanzhelyazkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/ivanzhelyazkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ivanzhelyazkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ivanzhelyazkov/subscriptions",
      "organizations_url": "https://api.github.com/users/ivanzhelyazkov/orgs",
      "repos_url": "https://api.github.com/users/ivanzhelyazkov/repos",
      "events_url": "https://api.github.com/users/ivanzhelyazkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ivanzhelyazkov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-07T14:03:54Z",
    "updated_at": "2022-04-07T14:03:54Z",
    "author_association": "NONE",
    "body": "> > function from which I'm calling the initializer-protected function isn't an initializer function.\r\n> \r\n> Could you please prove a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that showcases what you are trying to do and what is not working?\r\n\r\n@Amxx Uploaded a repo with the example. Let me know if you have any questions.\r\nhttps://github.com/ivanzhelyazkov/openzeppelin-initialize-bug-example",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1091780656/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092279386",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1092279386",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1092279386,
    "node_id": "IC_kwDOA9tCBs5BGtxa",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-07T22:50:13Z",
    "updated_at": "2022-04-07T22:50:13Z",
    "author_association": "MEMBER",
    "body": "@ivanzhelyazkov In the code that you shared I'm getting a different error: \"function returned an unexpected amount of data\". This is because `Core` expects `initialize` to return an address as specified in [`IDeployed`](https://github.com/ivanzhelyazkov/openzeppelin-initialize-bug-example/blob/56fbf52ce64150de3c38c7305ff11d6e9078167b/contracts/IDeployed.sol#L7), but your `Deployed` implementation doesn't return anything so decoding fails. Fixing this mismatch the initializer works fine.\r\n\r\nWhenever you use an interface you should add the interface to the inheritance list so that the compiler can check you're implementing it correctly: `contract Deployed is IDeployed` will show the error.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092279386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092624810",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3310#issuecomment-1092624810",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3310",
    "id": 1092624810,
    "node_id": "IC_kwDOA9tCBs5BICGq",
    "user": {
      "login": "ivanzhelyazkov",
      "id": 18243849,
      "node_id": "MDQ6VXNlcjE4MjQzODQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18243849?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ivanzhelyazkov",
      "html_url": "https://github.com/ivanzhelyazkov",
      "followers_url": "https://api.github.com/users/ivanzhelyazkov/followers",
      "following_url": "https://api.github.com/users/ivanzhelyazkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/ivanzhelyazkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ivanzhelyazkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ivanzhelyazkov/subscriptions",
      "organizations_url": "https://api.github.com/users/ivanzhelyazkov/orgs",
      "repos_url": "https://api.github.com/users/ivanzhelyazkov/repos",
      "events_url": "https://api.github.com/users/ivanzhelyazkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ivanzhelyazkov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-08T09:02:13Z",
    "updated_at": "2022-04-08T09:02:13Z",
    "author_association": "NONE",
    "body": "Apologies for this. Looks like the problem is deeper and will require more time to reproduce - it doesn't appear to be related to a script, but to `deployments` plugin of hardhat, when creating a fixture.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092624810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

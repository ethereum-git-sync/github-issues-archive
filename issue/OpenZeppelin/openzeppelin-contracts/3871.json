{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3871",
  "id": 1492690814,
  "node_id": "I_kwDOA9tCBs5Y-Kd-",
  "number": 3871,
  "title": "TransparentUpgradeableProxy not transparent",
  "user": {
    "login": "gerben-stavenga",
    "id": 54682677,
    "node_id": "MDQ6VXNlcjU0NjgyNjc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/54682677?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gerben-stavenga",
    "html_url": "https://github.com/gerben-stavenga",
    "followers_url": "https://api.github.com/users/gerben-stavenga/followers",
    "following_url": "https://api.github.com/users/gerben-stavenga/following{/other_user}",
    "gists_url": "https://api.github.com/users/gerben-stavenga/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gerben-stavenga/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gerben-stavenga/subscriptions",
    "organizations_url": "https://api.github.com/users/gerben-stavenga/orgs",
    "repos_url": "https://api.github.com/users/gerben-stavenga/repos",
    "events_url": "https://api.github.com/users/gerben-stavenga/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gerben-stavenga/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/14",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/14",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/14/labels",
    "id": 8383880,
    "node_id": "MI_kwDOA9tCBs4Af-2I",
    "number": 14,
    "title": "4.9",
    "description": "",
    "creator": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 24,
    "state": "closed",
    "created_at": "2022-09-05T16:36:05Z",
    "updated_at": "2023-05-16T01:45:32Z",
    "due_on": null,
    "closed_at": "2023-05-16T01:45:32Z"
  },
  "comments": 1,
  "created_at": "2022-12-12T20:24:06Z",
  "updated_at": "2023-01-19T21:34:17Z",
  "closed_at": "2023-01-19T21:34:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "TUP is designed to be transparent ie. that the logic contract ABI is the only and exact ABI you see when interacting with the contract other than the proxy admin. This is unfortunately not true.\r\n\r\n**üíª Environment**\r\n\r\nAny environment\r\n\r\n**üìù Details**\r\n\r\nThe functions used by the proxy admin, namely\r\n\r\n```\r\nfunction changeAdmin(address newAdmin) external virtual ifAdmin {\r\n    _changeAdmin(newAdmin);\r\n}\r\n\r\n/**\r\n * @dev Upgrade the implementation of the proxy.\r\n *\r\n * NOTE: Only the admin can call this function. See {ProxyAdmin-upgrade}.\r\n */\r\nfunction upgradeTo(address newImplementation) external ifAdmin {\r\n    _upgradeToAndCall(newImplementation, bytes(\"\"), false);\r\n}\r\n```\r\n\r\nare not marked payable and thus a logic contract with these functions but payable will fail. Now these functions itself on the logic contract are not likely to be payable, but due to only 4 billion signature hashes it's not inconceivable a hash collision could happen with another signature. Or someone malicious could design a signature that hashes to one of these and make a apparently correct contract that would opaquely break when used as a logic contract with TUP.\r\n\r\n**üî¢ Code to reproduce bug**\r\n\r\nTrivial, solution trivial by making them payable and just require msg.value ==0 manually",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1369208128",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3871#issuecomment-1369208128",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3871",
    "id": 1369208128,
    "node_id": "IC_kwDOA9tCBs5RnHVA",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T21:13:43Z",
    "updated_at": "2023-01-02T21:13:43Z",
    "author_association": "MEMBER",
    "body": "Great point. Agree we should make the suggested change.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1369208128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

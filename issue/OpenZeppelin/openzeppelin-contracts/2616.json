{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616",
  "id": 842806521,
  "node_id": "MDU6SXNzdWU4NDI4MDY1MjE=",
  "number": 2616,
  "title": "GetCode",
  "user": {
    "login": "SilentCicero",
    "id": 9806174,
    "node_id": "MDQ6VXNlcjk4MDYxNzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9806174?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SilentCicero",
    "html_url": "https://github.com/SilentCicero",
    "followers_url": "https://api.github.com/users/SilentCicero/followers",
    "following_url": "https://api.github.com/users/SilentCicero/following{/other_user}",
    "gists_url": "https://api.github.com/users/SilentCicero/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SilentCicero/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SilentCicero/subscriptions",
    "organizations_url": "https://api.github.com/users/SilentCicero/orgs",
    "repos_url": "https://api.github.com/users/SilentCicero/repos",
    "events_url": "https://api.github.com/users/SilentCicero/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SilentCicero/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2021-03-28T19:03:16Z",
  "updated_at": "2021-09-14T07:46:20Z",
  "closed_at": "2021-04-09T22:21:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\nI'd like OpenZepplin to add and audit a secure simple library for contracts to get code from a contract and return a bytes. It could easily be a standalone library. There is one suggested by the Solidity developers in the docs. But it hasn't been formally reviewed and tested. \r\n\r\n**üìù Details**\r\n\r\n```solidity\r\n\r\nlibrary GetCode {\r\n    function at(address _addr) public view returns (bytes memory o_code) {\r\n        assembly {\r\n            // retrieve the size of the code, this needs assembly\r\n            let size := extcodesize(_addr)\r\n            // allocate output byte array - this could also be done without assembly\r\n            // by using o_code = new bytes(size)\r\n            o_code := mload(0x40)\r\n            // new \"memory end\" including padding\r\n            mstore(0x40, add(o_code, and(add(add(size, 0x20), 0x1f), not(0x1f))))\r\n            // store length in memory\r\n            mstore(o_code, size)\r\n            // actually retrieve the code, this needs assembly\r\n            extcodecopy(_addr, add(o_code, 0x20), 0, size)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTo start, this is a good place. I'd also add a GetCode size as well. This way inline assembly doesn't need to be used which is safer for everyone.",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/808995375",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-808995375",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 808995375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwODk5NTM3NQ==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T00:45:22Z",
    "updated_at": "2021-03-29T00:45:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @SilentCicero!  Thanks for the suggestion, it is really appreciated.\r\n\r\nCan you provide more information on the use case for such a library?\r\n\r\nOnce we have more information, the project owner will then review your suggestion as soon as they can.  \r\n\r\nPlease wait until we have discussed this idea before writing any code or submitting a Pull Request, so we can go through the design beforehand.  We don‚Äôt want you to waste your time!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/808995375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816972180",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-816972180",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 816972180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjk3MjE4MA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T21:07:07Z",
    "updated_at": "2021-04-09T21:07:07Z",
    "author_association": "MEMBER",
    "body": "@SilentCicero I second the request for more details about what you would do with this feature.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816972180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816980186",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-816980186",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 816980186,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjk4MDE4Ng==",
    "user": {
      "login": "SilentCicero",
      "id": 9806174,
      "node_id": "MDQ6VXNlcjk4MDYxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9806174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SilentCicero",
      "html_url": "https://github.com/SilentCicero",
      "followers_url": "https://api.github.com/users/SilentCicero/followers",
      "following_url": "https://api.github.com/users/SilentCicero/following{/other_user}",
      "gists_url": "https://api.github.com/users/SilentCicero/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SilentCicero/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SilentCicero/subscriptions",
      "organizations_url": "https://api.github.com/users/SilentCicero/orgs",
      "repos_url": "https://api.github.com/users/SilentCicero/repos",
      "events_url": "https://api.github.com/users/SilentCicero/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SilentCicero/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T21:24:25Z",
    "updated_at": "2021-04-09T21:24:25Z",
    "author_association": "NONE",
    "body": "There are many cases where you want to study or grab portions of code from\na contract.\n\nNamely around factories that don‚Äôt use create2 for example.\n\nSo I‚Äôd just say, getting code and managing it is a normal function of the\nevm and a library to help manage that and turn it into bytes would be\nhelpful and useful.\n\n\n\nOn Fri, Apr 9, 2021 at 2:07 PM Francisco Giordano ***@***.***>\nwrote:\n\n> @SilentCicero <https://github.com/SilentCicero> I second the request for\n> more details about what you would do with this feature.\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-816972180>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ACK2CXSC2AFAKLS66VNHFW3TH5UAZANCNFSM4Z6KH5NA>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816980186/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816997954",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-816997954",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 816997954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjk5Nzk1NA==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T22:09:49Z",
    "updated_at": "2021-04-09T22:10:59Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @SilentCicero \r\n\r\nThis is already [natively supported by solidity](https://docs.soliditylang.org/en/v0.8.3/units-and-global-variables.html). No need for assembly or for a dedicated library.\r\n\r\n```\r\ncontract Test {\r\n    function getcode(address a) public view returns (bytes memory) {\r\n        return a.code;\r\n    }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/816997954/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/909044346",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-909044346",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 909044346,
    "node_id": "IC_kwDOA9tCBs42Lup6",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-31T09:03:23Z",
    "updated_at": "2021-08-31T09:03:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "> This is already natively supported by solidity. No need for assembly or for a dedicated library.\r\n\r\nPerhaps the Solidity docs should be updated then? The [Inline Assembly](https://docs.soliditylang.org/en/v0.8.7/assembly.html) page (which refers to the code shared by @SilentCicero) says this:\r\n\r\n> This is not possible with ‚Äúplain Solidity‚Äù and the idea is that reusable assembly libraries can enhance the Solidity language without a compiler change.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/909044346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/918739466",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-918739466",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 918739466,
    "node_id": "IC_kwDOA9tCBs42wtoK",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T02:20:47Z",
    "updated_at": "2021-09-14T02:20:58Z",
    "author_association": "MEMBER",
    "body": "The [latest docs](https://docs.soliditylang.org/en/latest/assembly.html#example) have been updated and say:\r\n>This is possible with ‚Äúplain Solidity‚Äù too, by using \\<address>.code.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/918739466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/918898460",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2616#issuecomment-918898460",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2616",
    "id": 918898460,
    "node_id": "IC_kwDOA9tCBs42xUcc",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T07:46:10Z",
    "updated_at": "2021-09-14T07:46:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Indeed: https://github.com/ethereum/solidity/pull/11897 üòÖ\n\nAnyway, glad we can use high-level Solidity for this now.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/918898460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

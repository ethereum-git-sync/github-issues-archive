{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534",
  "id": 815125552,
  "node_id": "MDU6SXNzdWU4MTUxMjU1NTI=",
  "number": 2534,
  "title": "pragma experimental SMTChecker;",
  "user": {
    "login": "vporton",
    "id": 2900574,
    "node_id": "MDQ6VXNlcjI5MDA1NzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2900574?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vporton",
    "html_url": "https://github.com/vporton",
    "followers_url": "https://api.github.com/users/vporton/followers",
    "following_url": "https://api.github.com/users/vporton/following{/other_user}",
    "gists_url": "https://api.github.com/users/vporton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vporton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vporton/subscriptions",
    "organizations_url": "https://api.github.com/users/vporton/orgs",
    "repos_url": "https://api.github.com/users/vporton/repos",
    "events_url": "https://api.github.com/users/vporton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vporton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-24T05:49:51Z",
  "updated_at": "2021-03-01T19:33:23Z",
  "closed_at": "2021-03-01T19:33:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\n```solidity\r\n//SPDX-License-Identifier: UNLICENSED\r\npragma solidity ^0.8.0;\r\npragma experimental SMTChecker;\r\n\r\nimport {Ownable} from \"@openzeppelin/contracts/access/Ownable.sol\";\r\n\r\ncontract GameToken is Ownable {}\r\n```\r\ncompiles with warnings:\r\n```\r\nCompiling 6 files with 0.8.1\r\nWarning: CHC: Overflow (resulting value larger than 2**256 - 1) might happen here.\r\n   --> @openzeppelin/contracts/token/ERC20/ERC20.sol:219:9:\r\n    |\r\n219 |         _balances[recipient] += amount;\r\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\n\r\nWarning: CHC: Overflow (resulting value larger than 2**256 - 1) might happen here.\r\n   --> @openzeppelin/contracts/token/ERC20/ERC20.sol:219:9:\r\n    |\r\n219 |         _balances[recipient] += amount;\r\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\n\r\nWarning: CHC: Overflow (resulting value larger than 2**256 - 1) might happen here.\r\n   --> @openzeppelin/contracts/token/ERC20/ERC20.sol:170:41:\r\n    |\r\n170 |         _approve(_msgSender(), spender, _allowances[_msgSender()][spender] + addedValue);\r\n    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n```\r\n\r\n**üìù Details**\r\nAdd \r\n```solidity\r\npragma experimental SMTChecker;\r\n```\r\nto each `.sol` file in this repo.\r\n\r\n<!-- Make sure that you have reviewed the OpenZeppelin Contributor Guidelines. -->\r\n<!-- https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/CONTRIBUTING.md -->\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/784827988",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-784827988",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 784827988,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDgyNzk4OA==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-24T06:34:50Z",
    "updated_at": "2021-02-24T06:34:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @vporton!  \r\n\r\nThanks for the suggestion, it is really appreciated.\r\n\r\nThe project owner will review your suggestion as soon as they can. \r\n\r\nPlease wait until we have discussed this idea before writing any code or submitting a Pull Request, so we can go through the design beforehand.  We don‚Äôt want you to waste your time!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/784827988/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/784989711",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-784989711",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 784989711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDk4OTcxMQ==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-24T10:52:08Z",
    "updated_at": "2021-02-24T10:52:34Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @vporton, and thank you for the proposition.\r\nThe additional security information given by SMTChecker could definitelly be usefull to openzeppelin/contracts, and we will investigate enabling it in all files at some point...\r\n\r\n... however, in this case SMTChecker doesn't seem to realize that we are using solidity ^0.8.0, which comes with safemath built in by default. In the cases were these operation overflow, panic code are emitted. This protects against math errors that would correspond to forbidden transfers, or that would result in inconsistencies.\r\n\r\nThis kind of false positive makes me think we should not use SMTChecker for now.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/784989711/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/785379258",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-785379258",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 785379258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTM3OTI1OA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-24T20:57:23Z",
    "updated_at": "2021-02-24T20:57:40Z",
    "author_association": "MEMBER",
    "body": "I agree with @Amxx's comment.\r\n\r\nThe SMTChecker is apparently aware that we are using Solidity ^0.8, and it seems it was a decision to keep the warning anyway. There doesn't seem to be consensus on this within the Solidity team itself. See https://github.com/ethereum/solidity/issues/10717.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/785379258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/787427679",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-787427679",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 787427679,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzQyNzY3OQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-28T10:08:34Z",
    "updated_at": "2021-02-28T10:08:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the main point against adding it by default is that some queries may take a really long time to finish, and false positives are rather common and might be confusing for someone who doesn't know what it's talking about and where it's coming from.\r\nAs @Amxx mentioned, the security hints could be useful for the writers of the OZ contracts, but I feel like the libraries should *not* be shipped with default smtchecker.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/787427679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/787428069",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-787428069",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 787428069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzQyODA2OQ==",
    "user": {
      "login": "leonardoalt",
      "id": 504195,
      "node_id": "MDQ6VXNlcjUwNDE5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/504195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leonardoalt",
      "html_url": "https://github.com/leonardoalt",
      "followers_url": "https://api.github.com/users/leonardoalt/followers",
      "following_url": "https://api.github.com/users/leonardoalt/following{/other_user}",
      "gists_url": "https://api.github.com/users/leonardoalt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leonardoalt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leonardoalt/subscriptions",
      "organizations_url": "https://api.github.com/users/leonardoalt/orgs",
      "repos_url": "https://api.github.com/users/leonardoalt/repos",
      "events_url": "https://api.github.com/users/leonardoalt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leonardoalt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-28T10:12:21Z",
    "updated_at": "2021-02-28T10:12:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "In this specific case, as @frangio pointed out, the SMTChecker is aware of default revert on overflow, but the warning is kept for now (it is under discussion). Note also that when it says `might happen` it means that it actually *couldn't* solve the query, so it's more like a \"dunno\" than an actual false positive.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/787428069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/788212458",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2534#issuecomment-788212458",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2534",
    "id": 788212458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODIxMjQ1OA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-01T19:33:22Z",
    "updated_at": "2021-03-01T19:33:22Z",
    "author_association": "MEMBER",
    "body": "Got it, thanks for the input @leonardoalt. Closing this issue since we will not add the pragma.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/788212458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

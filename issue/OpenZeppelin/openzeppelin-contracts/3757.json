{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757",
  "id": 1403598462,
  "node_id": "I_kwDOA9tCBs5TqTZ-",
  "number": 3757,
  "title": "ERC1155Votes",
  "user": {
    "login": "toledoroy",
    "id": 5618090,
    "node_id": "MDQ6VXNlcjU2MTgwOTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5618090?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/toledoroy",
    "html_url": "https://github.com/toledoroy",
    "followers_url": "https://api.github.com/users/toledoroy/followers",
    "following_url": "https://api.github.com/users/toledoroy/following{/other_user}",
    "gists_url": "https://api.github.com/users/toledoroy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/toledoroy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/toledoroy/subscriptions",
    "organizations_url": "https://api.github.com/users/toledoroy/orgs",
    "repos_url": "https://api.github.com/users/toledoroy/repos",
    "events_url": "https://api.github.com/users/toledoroy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/toledoroy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4953777396,
      "node_id": "LA_kwDOA9tCBs8AAAABJ0Sk9A",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/area:%20governance",
      "name": "area: governance",
      "color": "E7DA84",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-10-10T19:08:47Z",
  "updated_at": "2023-09-01T21:10:21Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "What about ERC1155Votes? \r\n\r\n\r\n**ðŸ§ Motivation**\r\n1. seems to be the natural next step\r\n2. DAOs are looking for ways to separate themselves into smaller groups (guild/pods/etc), each with it's own responsibilities and power. The ERC1155 multi-token standard can help with that.\r\n\r\n**ðŸ“ Details**\r\nAn implementation of Votes for the ERC1155 contract that will allow different voting weight for different tokens.\r\n\r\nMy thoughts is that this should be possible to implement in much the same method used here\r\nhttps://github.com/toledoroy/openzeppelin-contracts_NFVotes/blob/master/contracts/token/ERC721/extensions/ERC721VotesNF.sol\r\n\r\nPlease share your thoughts ðŸ™\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 2,
    "rocket": 1,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1287414975",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1287414975",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1287414975,
    "node_id": "IC_kwDOA9tCBs5MvGS_",
    "user": {
      "login": "toledoroy",
      "id": 5618090,
      "node_id": "MDQ6VXNlcjU2MTgwOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5618090?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toledoroy",
      "html_url": "https://github.com/toledoroy",
      "followers_url": "https://api.github.com/users/toledoroy/followers",
      "following_url": "https://api.github.com/users/toledoroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/toledoroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toledoroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toledoroy/subscriptions",
      "organizations_url": "https://api.github.com/users/toledoroy/orgs",
      "repos_url": "https://api.github.com/users/toledoroy/repos",
      "events_url": "https://api.github.com/users/toledoroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toledoroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-21T20:38:42Z",
    "updated_at": "2022-10-21T20:38:42Z",
    "author_association": "NONE",
    "body": "I see this doesn't have nearly as much appeal as I've imagined. \r\nAnyway, I did go ahead and put some of my thoughts down in code, so I'll go ahead and share some of the possible implementation:\r\n\r\n1. Treat NFT voting power as fungible voting power. [units = total token amount]\r\nhttps://github.com/toledoroy/openzeppelin-contracts_NFVotes/blob/1155Votes/contracts/token/ERC1155/extensions/ERC1155VotesF.sol\r\n2. Treat tokens as different and assign each token a different voting power. [units = tokenId*token power*amount]\r\nhttps://github.com/toledoroy/openzeppelin-contracts_NFVotes/blob/1155Votes/contracts/token/ERC1155/extensions/ERC1155VotesNF.sol\r\n3. Treat tokens as different and allow changing their value retroactively. (I don't have that figured out yet. still working out the design) \r\nhttps://github.com/toledoroy/openzeppelin-contracts_NFVotes/blob/1155Votes/contracts/token/ERC1155/extensions/ERC1155VotesRetro.sol",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1287414975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1291497003",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1291497003",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1291497003,
    "node_id": "IC_kwDOA9tCBs5M-q4r",
    "user": {
      "login": "jaketimothy",
      "id": 2130930,
      "node_id": "MDQ6VXNlcjIxMzA5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2130930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaketimothy",
      "html_url": "https://github.com/jaketimothy",
      "followers_url": "https://api.github.com/users/jaketimothy/followers",
      "following_url": "https://api.github.com/users/jaketimothy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaketimothy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaketimothy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaketimothy/subscriptions",
      "organizations_url": "https://api.github.com/users/jaketimothy/orgs",
      "repos_url": "https://api.github.com/users/jaketimothy/repos",
      "events_url": "https://api.github.com/users/jaketimothy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaketimothy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-26T04:50:38Z",
    "updated_at": "2022-10-27T16:20:45Z",
    "author_association": "NONE",
    "body": "~~Example built on solmate/base https://github.com/z0r0z/zolidity/blob/main/src/gov/ERC1155Votes.sol~~",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1291497003/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293456771",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1293456771",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1293456771,
    "node_id": "IC_kwDOA9tCBs5NGJWD",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-27T12:31:20Z",
    "updated_at": "2022-10-27T12:31:20Z",
    "author_association": "COLLABORATOR",
    "body": "> Example built on solmate/base https://github.com/z0r0z/zolidity/blob/main/src/gov/ERC1155Votes.sol\r\n\r\nThis example doesn't move update votes when token are transfered. This by itself is a critical bug. Be carefull before using or even advertising this.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293456771/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1347855369",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1347855369",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1347855369,
    "node_id": "IC_kwDOA9tCBs5QVqQJ",
    "user": {
      "login": "jaketimothy",
      "id": 2130930,
      "node_id": "MDQ6VXNlcjIxMzA5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2130930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaketimothy",
      "html_url": "https://github.com/jaketimothy",
      "followers_url": "https://api.github.com/users/jaketimothy/followers",
      "following_url": "https://api.github.com/users/jaketimothy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaketimothy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaketimothy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaketimothy/subscriptions",
      "organizations_url": "https://api.github.com/users/jaketimothy/orgs",
      "repos_url": "https://api.github.com/users/jaketimothy/repos",
      "events_url": "https://api.github.com/users/jaketimothy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaketimothy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T07:27:09Z",
    "updated_at": "2022-12-13T07:27:09Z",
    "author_association": "NONE",
    "body": "@toledoroy Would love your thoughts on my proposed direction. \r\n\r\nI have a need for multi-token voting - think multi-class shares.  The voting power for any one token needs to be configurable by a higher level auth - the parent org.  \r\n\r\nMy intention is to create the base voting unit tracking and then build a governor on top of this that handles the voting weights.\r\n\r\nWould this serve your needs as well?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1347855369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1349539056",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1349539056",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1349539056,
    "node_id": "IC_kwDOA9tCBs5QcFTw",
    "user": {
      "login": "toledoroy",
      "id": 5618090,
      "node_id": "MDQ6VXNlcjU2MTgwOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5618090?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toledoroy",
      "html_url": "https://github.com/toledoroy",
      "followers_url": "https://api.github.com/users/toledoroy/followers",
      "following_url": "https://api.github.com/users/toledoroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/toledoroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toledoroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toledoroy/subscriptions",
      "organizations_url": "https://api.github.com/users/toledoroy/orgs",
      "repos_url": "https://api.github.com/users/toledoroy/repos",
      "events_url": "https://api.github.com/users/toledoroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toledoroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T19:08:47Z",
    "updated_at": "2022-12-13T19:08:47Z",
    "author_association": "NONE",
    "body": "Hi @jaketimothy \r\nYes, definitely. \r\nThe current solution is good because it works with the same gov contracts. So it's simple.\r\nThough, for better management of voting power, and to make changes to power after token creation, it seems the best way is to handle voting power on the governor contract side. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1349539056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1411921785",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1411921785",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1411921785,
    "node_id": "IC_kwDOA9tCBs5UKDd5",
    "user": {
      "login": "kwizzn",
      "id": 119017,
      "node_id": "MDQ6VXNlcjExOTAxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/119017?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwizzn",
      "html_url": "https://github.com/kwizzn",
      "followers_url": "https://api.github.com/users/kwizzn/followers",
      "following_url": "https://api.github.com/users/kwizzn/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwizzn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwizzn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwizzn/subscriptions",
      "organizations_url": "https://api.github.com/users/kwizzn/orgs",
      "repos_url": "https://api.github.com/users/kwizzn/repos",
      "events_url": "https://api.github.com/users/kwizzn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwizzn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-01T11:42:19Z",
    "updated_at": "2023-02-01T11:42:19Z",
    "author_association": "NONE",
    "body": "@jaketimothy, I support your approach. We also have a use case where it makes a lot of sense to configure the voting power of individual tokens on the parent level. In fact, ERC1155 voting would provide even more utility than ERC721.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1411921785/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1703018849",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1703018849",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1703018849,
    "node_id": "IC_kwDOA9tCBs5lggFh",
    "user": {
      "login": "z0r0z",
      "id": 92001561,
      "node_id": "U_kgDOBXvVGQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/92001561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/z0r0z",
      "html_url": "https://github.com/z0r0z",
      "followers_url": "https://api.github.com/users/z0r0z/followers",
      "following_url": "https://api.github.com/users/z0r0z/following{/other_user}",
      "gists_url": "https://api.github.com/users/z0r0z/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/z0r0z/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/z0r0z/subscriptions",
      "organizations_url": "https://api.github.com/users/z0r0z/orgs",
      "repos_url": "https://api.github.com/users/z0r0z/repos",
      "events_url": "https://api.github.com/users/z0r0z/events{/privacy}",
      "received_events_url": "https://api.github.com/users/z0r0z/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T16:33:03Z",
    "updated_at": "2023-09-01T16:37:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > Example built on solmate/base https://github.com/z0r0z/zolidity/blob/main/src/gov/ERC1155Votes.sol\r\n> \r\n> This example doesn't move update votes when token are transfered. This by itself is a critical bug. Be carefull before using or even advertising this.\r\n\r\nHi â€” quick comments from zauthor: I am opinionated to treating each ID like an ERC20 with own accounting. The example ERC1155Votes @jaketimothy linked was just that, an example, and an abstract contract, that should be inherited. I have a few contracts in production that do that just, but will make a note in code comments. Not sure why it should not be linked here.\r\n\r\nAnyways ~~ I think an ERC1155Votes would be a great addition to Governor toolkit!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1703018849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1703317126",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3757#issuecomment-1703317126",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3757",
    "id": 1703317126,
    "node_id": "IC_kwDOA9tCBs5lho6G",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T21:03:24Z",
    "updated_at": "2023-09-01T21:10:21Z",
    "author_association": "MEMBER",
    "body": "A simple ERC-1155 token where one of the token ids can be used for voting is very simple to implement using `Votes.sol`:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.9;\r\n\r\nimport \"@openzeppelin/contracts/governance/utils/Votes.sol\";\r\nimport \"@openzeppelin/contracts/token/ERC1155/ERC1155.sol\";\r\nimport \"@openzeppelin/contracts/access/Ownable.sol\";\r\n\r\n// WARNING: UNTESTED\r\nabstract contract ERC1155Votes is ERC1155, Votes {\r\n    uint256 constant public VOTING_TOKEN_ID = 42;\r\n\r\n    function _getVotingUnits(address account) internal view virtual override returns (uint256) {\r\n        return balanceOf(account, VOTING_TOKEN_ID);\r\n    }\r\n\r\n    function _afterTokenTransfer(\r\n        address operator,\r\n        address from,\r\n        address to,\r\n        uint256[] memory ids,\r\n        uint256[] memory amounts,\r\n        bytes memory data\r\n    ) internal virtual override {\r\n        for (uint256 i = 0; i < amounts.length; i++) {\r\n            if (ids[i] == VOTING_TOKEN_ID) {\r\n                _transferVotingUnits(from, to, amounts[i]);\r\n            }\r\n        }\r\n        super._afterTokenTransfer(operator, from, to, ids, amounts, data);\r\n    }\r\n}\r\n\r\ncontract MyToken is ERC1155, ERC1155Votes {\r\n    constructor() ERC1155(\"\") EIP712(\"MyToken\", \"1\") {}\r\n\r\n    function _afterTokenTransfer(\r\n        address operator,\r\n        address from,\r\n        address to,\r\n        uint256[] memory ids,\r\n        uint256[] memory amounts,\r\n        bytes memory data\r\n    ) internal virtual override(ERC1155, ERC1155Votes) {\r\n        super._afterTokenTransfer(operator, from, to, ids, amounts, data);\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nIf instead you want all token ids to count towards voting power, this is not as easy, there's a difficulty that comes from not having a `balanceOf` function across all ids.\r\n\r\nHere's an incomplete skeleton and some comments showing this:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.9;\r\n\r\nimport \"@openzeppelin/contracts/governance/utils/Votes.sol\";\r\nimport \"@openzeppelin/contracts/token/ERC1155/ERC1155.sol\";\r\nimport \"@openzeppelin/contracts/access/Ownable.sol\";\r\n\r\n// WARNING: INCOMPLETE IMPLEMENTATION\r\nabstract contract ERC1155Votes is ERC1155, Votes {\r\n    function _getVotingUnits(address account) internal view virtual override returns (uint256) {\r\n        // TODO: This function should return total balance across all ids.\r\n        // This value is not available in standard ERC1155 so it requires\r\n        // an additional storage variable to track it.\r\n        revert();\r\n    }\r\n\r\n    function _afterTokenTransfer(\r\n        address operator,\r\n        address from,\r\n        address to,\r\n        uint256[] memory ids,\r\n        uint256[] memory amounts,\r\n        bytes memory data\r\n    ) internal virtual override {\r\n        for (uint256 i = 0; i < amounts.length; i++) {\r\n            _transferVotingUnits(from, to, amounts[i]);\r\n        }\r\n        super._afterTokenTransfer(operator, from, to, ids, amounts, data);\r\n    }\r\n}\r\n\r\ncontract MyToken is ERC1155, ERC1155Votes {\r\n    constructor() ERC1155(\"\") EIP712(\"MyToken\", \"1\") {}\r\n\r\n    function _afterTokenTransfer(\r\n        address operator,\r\n        address from,\r\n        address to,\r\n        uint256[] memory ids,\r\n        uint256[] memory amounts,\r\n        bytes memory data\r\n    ) internal virtual override(ERC1155, ERC1155Votes) {\r\n        super._afterTokenTransfer(operator, from, to, ids, amounts, data);\r\n    }\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1703317126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

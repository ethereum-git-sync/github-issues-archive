{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3843",
  "id": 1471921532,
  "node_id": "I_kwDOA9tCBs5Xu718",
  "number": 3843,
  "title": "Annotate MulticallUpgradeable to allow delegatecall for Upgrades Plugins",
  "user": {
    "login": "ericglau",
    "id": 29640130,
    "node_id": "MDQ6VXNlcjI5NjQwMTMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/29640130?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ericglau",
    "html_url": "https://github.com/ericglau",
    "followers_url": "https://api.github.com/users/ericglau/followers",
    "following_url": "https://api.github.com/users/ericglau/following{/other_user}",
    "gists_url": "https://api.github.com/users/ericglau/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ericglau/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ericglau/subscriptions",
    "organizations_url": "https://api.github.com/users/ericglau/orgs",
    "repos_url": "https://api.github.com/users/ericglau/repos",
    "events_url": "https://api.github.com/users/ericglau/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ericglau/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/14",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/14",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/14/labels",
    "id": 8383880,
    "node_id": "MI_kwDOA9tCBs4Af-2I",
    "number": 14,
    "title": "4.9",
    "description": "",
    "creator": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 24,
    "state": "closed",
    "created_at": "2022-09-05T16:36:05Z",
    "updated_at": "2023-05-16T01:45:32Z",
    "due_on": null,
    "closed_at": "2023-05-16T01:45:32Z"
  },
  "comments": 0,
  "created_at": "2022-12-01T20:31:27Z",
  "updated_at": "2023-01-18T19:40:38Z",
  "closed_at": "2023-01-18T19:40:38Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\nWhen MulticallUpgradeable is inherited in an upgradeable contract, using the contract with [Upgrades Plugins](https://docs.openzeppelin.com/upgrades-plugins/1.x/) would cause a validation error with\r\n```\r\n@openzeppelin/contracts-upgradeable/utils/MulticallUpgradeable.sol:41: Use of delegatecall is not allowed\r\n    https://zpl.in/upgrades/error-002\r\n```\r\nHowever, the delegatecall in this context is not necessarily unsafe.\r\n\r\nTo get around this, users would currently need to provide an option to allow delegatecalls for the entire validation run, which could hide issues elsewhere.\r\n\r\n**üìù Details**\r\n[MulticallUpgradeable](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/blob/master/contracts/utils/MulticallUpgradeable.sol) contains a `delegatecall`, but the target of that `delegatecall` is always `address(this)`.  This delegatecall can be considered safe as long as the contract including its dependencies does not have any exposed functions with `selfdestruct`.\r\n\r\nConsider annotating MulticallUpgradeable with `@custom:oz-upgrades-unsafe-allow delegatecall` so that Upgrades Plugins will not raise a validation error for the delegatecall.  Note that the Upgrades Plugins will still perform validations to ensure that the contract does not have selfdestructs.\r\n\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3843/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/729",
  "id": 296225876,
  "node_id": "MDU6SXNzdWUyOTYyMjU4NzY=",
  "number": 729,
  "title": "ERC20 standard implementation bug.",
  "user": {
    "login": "Dexaran",
    "id": 26142412,
    "node_id": "MDQ6VXNlcjI2MTQyNDEy",
    "avatar_url": "https://avatars.githubusercontent.com/u/26142412?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Dexaran",
    "html_url": "https://github.com/Dexaran",
    "followers_url": "https://api.github.com/users/Dexaran/followers",
    "following_url": "https://api.github.com/users/Dexaran/following{/other_user}",
    "gists_url": "https://api.github.com/users/Dexaran/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Dexaran/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Dexaran/subscriptions",
    "organizations_url": "https://api.github.com/users/Dexaran/orgs",
    "repos_url": "https://api.github.com/users/Dexaran/repos",
    "events_url": "https://api.github.com/users/Dexaran/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Dexaran/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-02-11T21:10:25Z",
  "updated_at": "2018-02-17T18:46:35Z",
  "closed_at": "2018-02-14T19:21:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## üéâ Description\r\n\r\nERC20 token standard implementation assumes two ways of token transferring: (1) `transfer` function and (2) `approve + transferFrom` pattern. \r\n\r\nIt should be noted that [event handling](https://en.wikipedia.org/wiki/Event_(computing)) is a well-known and standard practice in programming. In case of token standard, a token transfer should be considered as an event. `transfer` function of ERC20 does not provide any opportunity to handle the transfer, i.e. it is silently increasing balance of the receiver. It is impossible for the receiver to recognize that `transfer` occurs if the receiver is a contract. As the result, the only correct way to make a token deposit to a contract is `approve + transferFrom` pattern.\r\n\r\nIt is obvious that in case of a mistake, the `transfer` function **MUST** throw an error and revert a wrong transaction. Otherwise it will cause negative consequences (lost tokens) for end user. This is a very common and default practice in programming, called Exception Handling: https://en.wikipedia.org/wiki/Exception_handling\r\n\r\nThis has already led to the loss of millions of dollars for the whole Ethereum ecosystem at the moment. For more information on money loss read [Lost Tokens](https://gist.github.com/Dexaran/09fe87d6a6a0a89467bc22e3bef54c25#lost-tokens-computed-at-27-dec-2017) section.\r\n\r\n- [x] üêõ This is a bug report.\r\n- [ ] üìà This is a feature request.\r\n\r\n## üíª Environment\r\n\r\nAny version, any compiler, any environment, any network.\r\n\r\n## üìù Details\r\n\r\nFor more information: https://gist.github.com/Dexaran/ddb3e89fe64bf2e06ed15fbd5679bd20\r\n\r\n## üëç Other Information\r\n\r\nBoth [ERC827](https://github.com/OpenZeppelin/zeppelin-solidity/tree/master/contracts/token/ERC827) and [ERC721](https://github.com/OpenZeppelin/zeppelin-solidity/tree/master/contracts/token/ERC721) inherit ERC20 bug.\r\n",
  "closed_by": {
    "login": "spalladino",
    "id": 429604,
    "node_id": "MDQ6VXNlcjQyOTYwNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/429604?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/spalladino",
    "html_url": "https://github.com/spalladino",
    "followers_url": "https://api.github.com/users/spalladino/followers",
    "following_url": "https://api.github.com/users/spalladino/following{/other_user}",
    "gists_url": "https://api.github.com/users/spalladino/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/spalladino/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/spalladino/subscriptions",
    "organizations_url": "https://api.github.com/users/spalladino/orgs",
    "repos_url": "https://api.github.com/users/spalladino/repos",
    "events_url": "https://api.github.com/users/spalladino/events{/privacy}",
    "received_events_url": "https://api.github.com/users/spalladino/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 1,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365716212",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/729#issuecomment-365716212",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729",
    "id": 365716212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcxNjIxMg==",
    "user": {
      "login": "spalladino",
      "id": 429604,
      "node_id": "MDQ6VXNlcjQyOTYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spalladino",
      "html_url": "https://github.com/spalladino",
      "followers_url": "https://api.github.com/users/spalladino/followers",
      "following_url": "https://api.github.com/users/spalladino/following{/other_user}",
      "gists_url": "https://api.github.com/users/spalladino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spalladino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spalladino/subscriptions",
      "organizations_url": "https://api.github.com/users/spalladino/orgs",
      "repos_url": "https://api.github.com/users/spalladino/repos",
      "events_url": "https://api.github.com/users/spalladino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spalladino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:21:37Z",
    "updated_at": "2018-02-14T19:21:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Dexaran, as you mention in the comments of the gist, standards such as 223 and 777 do not suffer from this issue. Actually, 223 was specifically designed to address this problem. We are in discussions on whether to include either (or both) standards to OpenZeppelin, but regardless of what decision we make, we will not be modifying the current ERC20 standard, which is already finalized. \r\n\r\nIn other words, the solution for this problem is not to change the current standard, but to promote and adapt a new standard without this problem.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365716212/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/366462592",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/729#issuecomment-366462592",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/729",
    "id": 366462592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjQ2MjU5Mg==",
    "user": {
      "login": "Dexaran",
      "id": 26142412,
      "node_id": "MDQ6VXNlcjI2MTQyNDEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/26142412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Dexaran",
      "html_url": "https://github.com/Dexaran",
      "followers_url": "https://api.github.com/users/Dexaran/followers",
      "following_url": "https://api.github.com/users/Dexaran/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dexaran/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Dexaran/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dexaran/subscriptions",
      "organizations_url": "https://api.github.com/users/Dexaran/orgs",
      "repos_url": "https://api.github.com/users/Dexaran/repos",
      "events_url": "https://api.github.com/users/Dexaran/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Dexaran/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-17T18:46:35Z",
    "updated_at": "2018-02-17T18:46:35Z",
    "author_association": "NONE",
    "body": "@spalladino Yes, but this does not negate the fact that the above contracts are insecure, thus are not recommended to use.\r\n\r\nI mean this contracts in [token](https://github.com/OpenZeppelin/zeppelin-solidity/tree/master/contracts/token) folder in case of OpenZeppelin.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/366462592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478",
  "id": 373017781,
  "node_id": "MDU6SXNzdWUzNzMwMTc3ODE=",
  "number": 1478,
  "title": "Publish a cheat-sheet of upgrading from v1.x to v.2.0.0",
  "user": {
    "login": "barakman",
    "id": 7003246,
    "node_id": "MDQ6VXNlcjcwMDMyNDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barakman",
    "html_url": "https://github.com/barakman",
    "followers_url": "https://api.github.com/users/barakman/followers",
    "following_url": "https://api.github.com/users/barakman/following{/other_user}",
    "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
    "organizations_url": "https://api.github.com/users/barakman/orgs",
    "repos_url": "https://api.github.com/users/barakman/repos",
    "events_url": "https://api.github.com/users/barakman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barakman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 503650860,
      "node_id": "MDU6TGFiZWw1MDM2NTA4NjA=",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/feature",
      "name": "feature",
      "color": "b9db64",
      "default": false,
      "description": "New contracts, functions, or helpers."
    },
    {
      "id": 1000190804,
      "node_id": "MDU6TGFiZWwxMDAwMTkwODA0",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/documentation",
      "name": "documentation",
      "color": "1d76db",
      "default": true,
      "description": "Inline comments, guides, and examples."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-10-23T14:03:35Z",
  "updated_at": "2020-01-14T21:44:17Z",
  "closed_at": "2020-01-14T21:44:17Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**ðŸ§ Motivation**\r\nDue to API-breaking changes introduced in v.2.0.0, make it easier for OZ users to upgrade their system (on-chain code and off-chain code) to this version.\r\n\r\n**ðŸ“ Details**\r\nI am using only a small subset of OZ infrastructure, so I've encountered only a few required changes, and was able to complete the process pretty fast.\r\n\r\nSo I shall post these changes below, and hopefully others can extend it in order to provide a good-enough guide for upgrading:\r\n\r\n1. Find/Replace `Claimable` to `Ownable`\r\n2. Find/Replace `StandardToken` / `BurnableToken` / `MintableToken` to `ERC20`\r\n3. Instead of calling `burn(value)`, call `_burn(msg.sender, value)`\r\n4. Instead of calling `mint(to, value)`, call `_mint(to, value)`\r\n5. Instead of calling `super.transfer(to, value)`, call `_transfer(msg.sender, to, value)`\r\n6. Instead of updating `totalSupply_` and `balances` directly, update them via `_burn` and `_mint`\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/432907013",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-432907013",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 432907013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjkwNzAxMw==",
    "user": {
      "login": "kennblvnp",
      "id": 34265732,
      "node_id": "MDQ6VXNlcjM0MjY1NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34265732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kennblvnp",
      "html_url": "https://github.com/kennblvnp",
      "followers_url": "https://api.github.com/users/kennblvnp/followers",
      "following_url": "https://api.github.com/users/kennblvnp/following{/other_user}",
      "gists_url": "https://api.github.com/users/kennblvnp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kennblvnp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kennblvnp/subscriptions",
      "organizations_url": "https://api.github.com/users/kennblvnp/orgs",
      "repos_url": "https://api.github.com/users/kennblvnp/repos",
      "events_url": "https://api.github.com/users/kennblvnp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kennblvnp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-25T04:03:07Z",
    "updated_at": "2018-10-25T04:03:07Z",
    "author_association": "NONE",
    "body": "Yeah what is the replacement of StandardToken.sol? I am using ERC20.sol for the meantime",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/432907013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440397657",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-440397657",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 440397657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDM5NzY1Nw==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-20T19:18:32Z",
    "updated_at": "2018-11-20T19:18:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @barakman! We'll include such a guide in the revamped docsite (as well as documenting how `ERC20` is supposed to be used).\r\n\r\nI'm wondering though, why did you replace `MintableToken` for `ERC20`? We created `ERC20Mintable` as its replacement, since they're not equivalent: the `Mintable` variant allows external accounts (that have the proper permissions) to mint tokens, while the barebones `ERC20` only has the `internal` `_mint` function.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440397657/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440648048",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-440648048",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 440648048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDY0ODA0OA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-21T12:37:22Z",
    "updated_at": "2018-11-21T12:37:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nventuro: Hi.\r\n\r\nOn our system, minting is internal by the definition of our product, meaning that we are the only ones with minting-permission, and moreover, we perform it internally as a result of some specific conditions (i.e., not even from the off-chain).\r\nTherefore, not only do we not need the functionality of `ERC20Mintable` as you describe it, we also need to override the functionality of `MintableToken` in order to ensure that it is internal to us (well, we needed that in the previous OZ version, where it was public if I remember correctly).\r\n\r\nI have assumed this to be the case on every system, so I posted it as one of the steps in the proposed cheat-sheet.\r\n\r\nI now understand that there may be other use-cases, so I guess that this step can be omitted (or rephrased if you find it useful in some way).\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440648048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/445115999",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-445115999",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 445115999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTExNTk5OQ==",
    "user": {
      "login": "interfect",
      "id": 752054,
      "node_id": "MDQ6VXNlcjc1MjA1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/752054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/interfect",
      "html_url": "https://github.com/interfect",
      "followers_url": "https://api.github.com/users/interfect/followers",
      "following_url": "https://api.github.com/users/interfect/following{/other_user}",
      "gists_url": "https://api.github.com/users/interfect/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/interfect/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/interfect/subscriptions",
      "organizations_url": "https://api.github.com/users/interfect/orgs",
      "repos_url": "https://api.github.com/users/interfect/repos",
      "events_url": "https://api.github.com/users/interfect/events{/privacy}",
      "received_events_url": "https://api.github.com/users/interfect/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T04:04:02Z",
    "updated_at": "2018-12-07T04:04:02Z",
    "author_association": "NONE",
    "body": "On-chain token code obviously can't be upgraded to the new `ERC20` contracts---at least, not without changing the addresses of all the contracts and making everybody trade in their old tokens for new ones.\r\n\r\nWhat's the recommended practice for upgrading a project's OpenZeppelin version, for new contract development, with minimal changes to the source of contracts that are already deployed? Any upgrade-to-2.0 guide ought to address this issue, beyond listing the source changes that are required.\r\n\r\nIn novakdistributed/macroverse I have a deployed token written against `StandardToken`, and I'm now wanting to upgrade to the latest OpenZeppelin to add some new contracts to the project that use new features. But when I upgrade from `zeppelin-solidity@1.3.0` to `openzeppelin-solidity@2.0.0`, I need to replace `StandardToken`-using code in my source tree with code that uses one of the new `ERC20` variants, with different internal APIs.\r\n\r\nI can go ahead and rewrite my token code in my source tree, but that won't change what's on chain, so it's possible I'll see different gas usage and even different behavior between the token contract I use for testing future contracts and the token contract my future contracts will actually have to talk to on mainnet.\r\n\r\nI can also copy in bits of the old OpenZeppelin into my codebase, but that could result in hard-to-debug contract name collisions.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/445115999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/445178003",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-445178003",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 445178003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTE3ODAwMw==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T09:44:51Z",
    "updated_at": "2018-12-07T09:44:51Z",
    "author_association": "CONTRIBUTOR",
    "body": ">On-chain token code obviously can't be upgraded to the new ERC20 contracts---at least, not without changing the addresses of all the contracts and making everybody trade in their old tokens for new ones.\r\n\r\nNot unless you use an upgradeability solution, such as [ZeppelinOS](https://zeppelinos.org/) ;) The [`openzeppelin-eth`](https://github.com/OpenZeppelin/openzeppelin-eth/) EVM package can be used for precisely this (documentation is a bit lacking at the moment, but feel free to ask questions or open issues and we'll promptly give you a hand!).\r\n\r\n>What's the recommended practice for upgrading a project's OpenZeppelin version, for new contract development, with minimal changes to the source of contracts that are already deployed?\r\n\r\nI take it you want to use the latest OpenZeppelin release to develop new contracts, while keeping the source of the ones you've already deployed to continue interacting with them. The short answer is that you shouldn't have two versions of OpenZeppelin installed at the same time, and will therefore 'lose' the original source code if you upgrade. Note however that this isn't exclusive to OpenZeppelin: if you were to upgrade your Solidity compiler you'd run into a similar issue, with the source code matching but the generated bytecode being different. \r\n\r\nFor such a scenario, what I recommend is keeping not the original source code but the original _artifacts_ (the .json files in `build/contracts` if you're using truffle), which have all of the information required to interact with your deployed contracts (the ABI, original source code, bytecode, compiler version and setings, etc.).\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/445178003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/574388418",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1478#issuecomment-574388418",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1478",
    "id": 574388418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDM4ODQxOA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-14T21:44:17Z",
    "updated_at": "2020-01-14T21:44:17Z",
    "author_association": "MEMBER",
    "body": "More than a year later, I doubt anyone needs this guide anymore. We really should've published it along with the release.\r\n\r\nWe've since learnt to always include a \"how to upgrade\" guide for all non-trivial releases of OpenZeppelin projects. Thanks for chiming in everyone!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/574388418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

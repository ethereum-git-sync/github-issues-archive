{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611",
  "id": 282493359,
  "node_id": "MDU6SXNzdWUyODI0OTMzNTk=",
  "number": 611,
  "title": "Unnecessary use of require checks while using SafeMath",
  "user": {
    "login": "rmi7",
    "id": 15264239,
    "node_id": "MDQ6VXNlcjE1MjY0MjM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/15264239?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rmi7",
    "html_url": "https://github.com/rmi7",
    "followers_url": "https://api.github.com/users/rmi7/followers",
    "following_url": "https://api.github.com/users/rmi7/following{/other_user}",
    "gists_url": "https://api.github.com/users/rmi7/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rmi7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rmi7/subscriptions",
    "organizations_url": "https://api.github.com/users/rmi7/orgs",
    "repos_url": "https://api.github.com/users/rmi7/repos",
    "events_url": "https://api.github.com/users/rmi7/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rmi7/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2017-12-15T17:18:09Z",
  "updated_at": "2018-06-03T23:08:32Z",
  "closed_at": "2018-05-28T19:53:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When looking through the contracts I notice usage of `require` statements that are not really needed because of using `SafeMath`. Basically the same check as in the preceding `require` is implicitly executed when using the `SafeMath` operation.\r\n\r\nFor example here: [BasicToken Line 24](https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/token/BasicToken.sol#L24), which can be removed because the usage of `SafeMath.sub` on line 27 will implicitly check if `_value <= balances[msg.sender]`.\r\n\r\nSo shouldn't these `require` statements be removed, or am I missing something?",
  "closed_by": {
    "login": "come-maiz",
    "id": 617831,
    "node_id": "MDQ6VXNlcjYxNzgzMQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/come-maiz",
    "html_url": "https://github.com/come-maiz",
    "followers_url": "https://api.github.com/users/come-maiz/followers",
    "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
    "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
    "organizations_url": "https://api.github.com/users/come-maiz/orgs",
    "repos_url": "https://api.github.com/users/come-maiz/repos",
    "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/come-maiz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/352259523",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-352259523",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 352259523,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjI1OTUyMw==",
    "user": {
      "login": "shrugs",
      "id": 1535001,
      "node_id": "MDQ6VXNlcjE1MzUwMDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shrugs",
      "html_url": "https://github.com/shrugs",
      "followers_url": "https://api.github.com/users/shrugs/followers",
      "following_url": "https://api.github.com/users/shrugs/following{/other_user}",
      "gists_url": "https://api.github.com/users/shrugs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shrugs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shrugs/subscriptions",
      "organizations_url": "https://api.github.com/users/shrugs/orgs",
      "repos_url": "https://api.github.com/users/shrugs/repos",
      "events_url": "https://api.github.com/users/shrugs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shrugs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-17T14:28:58Z",
    "updated_at": "2017-12-17T14:28:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm pretty ambivalent to whether or not these stay, but the devils advocate argument is that clarity and readability (rather than implied assumptions) is worth the extra gas usage and duplicative check.\r\n\r\nBut again, I don't really have a strong opinion. Open to others.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/352259523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388269562",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-388269562",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 388269562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODI2OTU2Mg==",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T06:07:05Z",
    "updated_at": "2018-05-11T06:07:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rmi7 It would be nice to discuss this over a PR, with some calculations of the gas being saved. Would you like to work on that?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388269562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388290313",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-388290313",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 388290313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODI5MDMxMw==",
    "user": {
      "login": "rmi7",
      "id": 15264239,
      "node_id": "MDQ6VXNlcjE1MjY0MjM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/15264239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmi7",
      "html_url": "https://github.com/rmi7",
      "followers_url": "https://api.github.com/users/rmi7/followers",
      "following_url": "https://api.github.com/users/rmi7/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmi7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmi7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmi7/subscriptions",
      "organizations_url": "https://api.github.com/users/rmi7/orgs",
      "repos_url": "https://api.github.com/users/rmi7/repos",
      "events_url": "https://api.github.com/users/rmi7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmi7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T07:55:51Z",
    "updated_at": "2018-05-11T07:55:51Z",
    "author_association": "NONE",
    "body": "@elopio sounds good to me, I'll make a PR tomorrow",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388290313/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388795407",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-388795407",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 388795407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODc5NTQwNw==",
    "user": {
      "login": "rmi7",
      "id": 15264239,
      "node_id": "MDQ6VXNlcjE1MjY0MjM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/15264239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmi7",
      "html_url": "https://github.com/rmi7",
      "followers_url": "https://api.github.com/users/rmi7/followers",
      "following_url": "https://api.github.com/users/rmi7/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmi7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmi7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmi7/subscriptions",
      "organizations_url": "https://api.github.com/users/rmi7/orgs",
      "repos_url": "https://api.github.com/users/rmi7/repos",
      "events_url": "https://api.github.com/users/rmi7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmi7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-14T12:13:08Z",
    "updated_at": "2018-05-14T12:13:08Z",
    "author_association": "NONE",
    "body": "I tested it locally on `master`,\r\n\r\nif we remove the `require(_value <= balances[msg.sender])` line, and we trigger an under/overflow, `assert` will be triggered inside `SafeMath`, this will use up all the gas of the transaction instead of just using what was used up until now when using `require`.\r\n\r\nSo I say keep it as is, and close this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388795407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388796948",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-388796948",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 388796948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODc5Njk0OA==",
    "user": {
      "login": "roschler",
      "id": 4660487,
      "node_id": "MDQ6VXNlcjQ2NjA0ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4660487?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roschler",
      "html_url": "https://github.com/roschler",
      "followers_url": "https://api.github.com/users/roschler/followers",
      "following_url": "https://api.github.com/users/roschler/following{/other_user}",
      "gists_url": "https://api.github.com/users/roschler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/roschler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/roschler/subscriptions",
      "organizations_url": "https://api.github.com/users/roschler/orgs",
      "repos_url": "https://api.github.com/users/roschler/repos",
      "events_url": "https://api.github.com/users/roschler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/roschler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-14T12:19:14Z",
    "updated_at": "2018-05-14T12:19:14Z",
    "author_association": "NONE",
    "body": "What would be the harm in creating a clone of SafeMath that used require() everywhere instead of assert()?  ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388796948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388801834",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-388801834",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 388801834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODgwMTgzNA==",
    "user": {
      "login": "rmi7",
      "id": 15264239,
      "node_id": "MDQ6VXNlcjE1MjY0MjM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/15264239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmi7",
      "html_url": "https://github.com/rmi7",
      "followers_url": "https://api.github.com/users/rmi7/followers",
      "following_url": "https://api.github.com/users/rmi7/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmi7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmi7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmi7/subscriptions",
      "organizations_url": "https://api.github.com/users/rmi7/orgs",
      "repos_url": "https://api.github.com/users/rmi7/repos",
      "events_url": "https://api.github.com/users/rmi7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmi7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-14T12:38:18Z",
    "updated_at": "2018-05-14T12:38:18Z",
    "author_association": "NONE",
    "body": "I think with the adding of error messages in recent solidity, as in:\r\n\r\n`require(_value <= balances[msg.sender], \"not enough balance\")`\r\n\r\nit makes sense to keep the original `require`.\r\n\r\nIf we were to remove it and rely on the checks inside `SafeMath`, we will have no ability to return a message with `\"not enough balance\"`, since `SafeMath` does not know it's doing a calculation on an erc20 balance, as far as it knows it's just doing a math calculation on 2 `uint`.\r\n\r\nSo even though the check happens twice if we keep it this way, and we could get the same result with 1 check, it still makes sense to keep the two because of the context (=contract) in which the check is performed.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/388801834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392594219",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-392594219",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 392594219,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjU5NDIxOQ==",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T19:53:36Z",
    "updated_at": "2018-05-28T19:53:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "As I see it, SafeMath uses assert to encourage callers to pass correct values. So the situation where BasicToken uses require and SafeMath uses assert seems good to me. Of course, that is my interpretation coming late to the game, there might be some good reasons to replace the SafeMath `assert`s with `require`s, but in that case, it's still good to have a require with a nicer user message. \r\n\r\nI'm closing this one, and we can discuss SafeMath updates in a separate bug, if somebody is interested on that.\r\n\r\n@rmi7 would you mind making a PR to add the require message?\r\n\r\nThanks for the nice discussion here.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392594219/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/394199195",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/611#issuecomment-394199195",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/611",
    "id": 394199195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE5OTE5NQ==",
    "user": {
      "login": "rmi7",
      "id": 15264239,
      "node_id": "MDQ6VXNlcjE1MjY0MjM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/15264239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmi7",
      "html_url": "https://github.com/rmi7",
      "followers_url": "https://api.github.com/users/rmi7/followers",
      "following_url": "https://api.github.com/users/rmi7/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmi7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmi7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmi7/subscriptions",
      "organizations_url": "https://api.github.com/users/rmi7/orgs",
      "repos_url": "https://api.github.com/users/rmi7/repos",
      "events_url": "https://api.github.com/users/rmi7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmi7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-03T23:08:32Z",
    "updated_at": "2018-06-03T23:08:32Z",
    "author_association": "NONE",
    "body": "@elopio \r\n\r\nI think we should add error messages to all requires in 1 PR, not just this one.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/394199195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278",
  "id": 638287455,
  "node_id": "MDU6SXNzdWU2MzgyODc0NTU=",
  "number": 2278,
  "title": "Remove _setBaseURI from Initialize",
  "user": {
    "login": "EvilJordan",
    "id": 1364262,
    "node_id": "MDQ6VXNlcjEzNjQyNjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1364262?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EvilJordan",
    "html_url": "https://github.com/EvilJordan",
    "followers_url": "https://api.github.com/users/EvilJordan/followers",
    "following_url": "https://api.github.com/users/EvilJordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/EvilJordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EvilJordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EvilJordan/subscriptions",
    "organizations_url": "https://api.github.com/users/EvilJordan/orgs",
    "repos_url": "https://api.github.com/users/EvilJordan/repos",
    "events_url": "https://api.github.com/users/EvilJordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EvilJordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-06-14T05:27:41Z",
  "updated_at": "2020-06-16T20:02:45Z",
  "closed_at": "2020-06-16T20:02:45Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\nThe Upgradeable presets are amazing. Thank you so much!\r\nHowever, one item in particular when it comes to ERC721s is the `tokenURI` and its **lack** of change-ability.  \r\n\r\n**üìù Details**\r\nMove the `_setBaseURI` method away from inside the `initialize` method, and into its own `public virtual` method, with a check for the `MINTER_ROLE`.\r\n\r\nThis would mean a new token would need to have `setBaseURI` called separately from the `initialize` method (üëé ), but it would allow for future changes (üëç ) if so desired.\r\n",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644061696",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644061696",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644061696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDA2MTY5Ng==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T11:06:10Z",
    "updated_at": "2020-06-15T11:06:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @EvilJordan,\r\n\r\nThanks for the suggestion, it is really appreciated.\r\n\r\nThe project owner will review your suggestion as soon as they can. \r\n\r\nPlease wait until we have discussed this idea before writing any code or submitting a Pull Request, so we can go through the design beforehand.  We don‚Äôt want you to waste your time!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644061696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644064057",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644064057",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644064057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDA2NDA1Nw==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T11:10:50Z",
    "updated_at": "2020-06-15T11:10:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "My thoughts are that to allow for future changes, developers wanting to use `baseURI` for automatic token URI generation can either use a URI that they control such as `https://mydomain.com/api/token/` which can be pointed to the implementation of their choice or they can add a mechanism in the smart contract (with appropriate access control) to allow changing it.  This may or may not be the `MINTER_ROLE`.\r\n\r\nIn the two ERC721's I have been involved in, one was designed to use a domain approach, the other had a function with access control to change the base URI.\r\n\r\nPlease note that `baseURI` can be set in the constructor/initializer or it can be set to an empty string `\"\"`.  OpenZeppelin Contracts Ethereum Package (upgradeable version) is generated from OpenZeppelin Contracts.\r\n   \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644064057/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644247574",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644247574",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644247574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDI0NzU3NA==",
    "user": {
      "login": "EvilJordan",
      "id": 1364262,
      "node_id": "MDQ6VXNlcjEzNjQyNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1364262?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EvilJordan",
      "html_url": "https://github.com/EvilJordan",
      "followers_url": "https://api.github.com/users/EvilJordan/followers",
      "following_url": "https://api.github.com/users/EvilJordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/EvilJordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EvilJordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EvilJordan/subscriptions",
      "organizations_url": "https://api.github.com/users/EvilJordan/orgs",
      "repos_url": "https://api.github.com/users/EvilJordan/repos",
      "events_url": "https://api.github.com/users/EvilJordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EvilJordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T16:47:14Z",
    "updated_at": "2020-06-15T16:47:14Z",
    "author_association": "CONTRIBUTOR",
    "body": ">one was designed to use a domain approach\r\n\r\nThis means a redirect on the domain side, correct? If so, while convenient, I think that puts a lot of trust in DNS. What happens if Project X gets bought by Project Y? I would, personally, like to rebrand everything to Project Y, and that would include a divestment of all Project X references.\r\n\r\n>a function with access control to change the base URI\r\n\r\nI think this is what I'm proposing, but it's currently not possible with the upgradeable preset... one can't override the `_baseURI` state because it's private to the inherited token contract.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644247574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644530055",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644530055",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644530055,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDUzMDA1NQ==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T04:53:41Z",
    "updated_at": "2020-06-16T04:53:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @EvilJordan,\r\n\r\nWe can inherit from the preset contract and call `_setBaseURI`.\r\n\r\nUsing the OpenZeppelin Contracts Ethereum Package version it could look like the following:\r\n\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.6.0;\r\n\r\nimport \"@openzeppelin/contracts-ethereum-package/contracts/Initializable.sol\";\r\nimport \"@openzeppelin/contracts-ethereum-package/contracts/presets/ERC721PresetMinterPauserAutoId.sol\";\r\n\r\ncontract MyNFT is Initializable, ERC721PresetMinterPauserAutoIdUpgradeSafe {\r\n    bytes32 public constant BASEURI_CHANGER_ROLE = keccak256(\r\n        \"BASEURI_CHANGER_ROLE\"\r\n    );\r\n\r\n    function initialize() public initializer {\r\n        __ERC721PresetMinterPauserAutoId_init(\"My NFT\", \"NFT\", \"https://example.com/api/token/\");\r\n\r\n        _setupRole(BASEURI_CHANGER_ROLE, _msgSender());\r\n    }\r\n\r\n    function changeBaseURI(string memory baseURI) public {\r\n        require(\r\n            hasRole(BASEURI_CHANGER_ROLE, _msgSender()),\r\n            \"MyNFT: must have baseuri changer role to change\"\r\n        );\r\n\r\n        _setBaseURI(baseURI);\r\n    }\r\n}\r\n```\r\n\r\nIt is whether functionality (including a role) should be included in the preset contract or whether the preset doesn't need to include this and the community can add this if required.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644530055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644929660",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644929660",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644929660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDkyOTY2MA==",
    "user": {
      "login": "EvilJordan",
      "id": 1364262,
      "node_id": "MDQ6VXNlcjEzNjQyNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1364262?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EvilJordan",
      "html_url": "https://github.com/EvilJordan",
      "followers_url": "https://api.github.com/users/EvilJordan/followers",
      "following_url": "https://api.github.com/users/EvilJordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/EvilJordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EvilJordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EvilJordan/subscriptions",
      "organizations_url": "https://api.github.com/users/EvilJordan/orgs",
      "repos_url": "https://api.github.com/users/EvilJordan/repos",
      "events_url": "https://api.github.com/users/EvilJordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EvilJordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T18:19:35Z",
    "updated_at": "2020-06-16T18:19:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "You are totally right, @abcoathup. Also, this code sample works perfectly. Thank you so much for all you do!!!\r\n\r\nI'll leave this open for you to close if you feel like it.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644929660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644983108",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2278#issuecomment-644983108",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2278",
    "id": 644983108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDk4MzEwOA==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T20:02:45Z",
    "updated_at": "2020-06-16T20:02:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hello @EvilJordan, thanks for suggesting this!\r\n\r\nThe Presets are meant to be usable as-is and ready to deploy to mainnet, but they naturally don't cover for all possible use cases. The idea is to provide a working initial version that can be extended by users to develop their custom solution (like @abcoathup showed in the comment above).\r\n\r\nWe often say that Contracts' code should not be copy-pasted, and Presets might be the only exception. If you find you want to be able to change the base URI, but also have different roles for pausing and pausing, the sensible thing to do is to grab the Preset's code and modify it to suit your particular use-case. In that sense, they are also acting as a sort of example of how to put different modules together.\r\n\r\nHope that helps! I'm closing the issue since we won't be alterting the Preset's code.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/644983108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

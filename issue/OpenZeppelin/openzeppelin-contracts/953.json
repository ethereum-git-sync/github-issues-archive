{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953",
  "id": 325744767,
  "node_id": "MDU6SXNzdWUzMjU3NDQ3Njc=",
  "number": 953,
  "title": "Invalid token amount in Crowdsale buyTokens function",
  "user": {
    "login": "vittominacori",
    "id": 8151143,
    "node_id": "MDQ6VXNlcjgxNTExNDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vittominacori",
    "html_url": "https://github.com/vittominacori",
    "followers_url": "https://api.github.com/users/vittominacori/followers",
    "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
    "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
    "organizations_url": "https://api.github.com/users/vittominacori/orgs",
    "repos_url": "https://api.github.com/users/vittominacori/repos",
    "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vittominacori/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2018-05-23T14:55:41Z",
  "updated_at": "2018-06-04T23:38:54Z",
  "closed_at": "2018-06-04T23:38:54Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## üéâ Description\r\n\r\nInvalid token amount in Crowdsale buyTokens function.\r\n\r\n- [x] üêõ This is a bug report.\r\n- [ ] üìà This is a feature request.\r\n\r\n## üíª Environment\r\n\r\nIt is for all OpenZeppelin versions, using all networks and all deployment tools.\r\n\r\n## üìù Details\r\n\r\nHi guys, I don't know if this could be considered as an issue or not.\r\n\r\nMy question is: \r\nif token has not 18 decimals (but for instance 10), how the **[_getTokenAmount](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/crowdsale/Crowdsale.sol#L186)** function should work?\r\n\r\nIt is using **_weiAmount** to multiply with **rate** and it means that we are using a 18 decimals number to calculate the token amount to transfer or mint to the beneficiary. \r\nSo if my token has 10 decimals (instead of 18 like the weiAmount) I will transfer about 8 decimals less of tokens than expected. And 8 decimal less means 10^8 tokens more than expected...\r\n\r\nIt is as described or am I missing something?\r\n\r\n## üî¢ Code To Reproduce Issue\r\n\r\nDeploy a MintableToken with 10 decimals.\r\nStart a MintedCrowdsale with a rate of 1.\r\nThen send 0.5 ETH to the Crowdsale.\r\n**It returns 50,000,000 of tokens instead of 0.5.**\r\n\r\nFunction to investigate is:\r\n\r\n```\r\nfunction _getTokenAmount(uint256 _weiAmount)\r\n    internal view returns (uint256)\r\n{\r\n    return _weiAmount.mul(rate);\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "shrugs",
    "id": 1535001,
    "node_id": "MDQ6VXNlcjE1MzUwMDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1535001?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shrugs",
    "html_url": "https://github.com/shrugs",
    "followers_url": "https://api.github.com/users/shrugs/followers",
    "following_url": "https://api.github.com/users/shrugs/following{/other_user}",
    "gists_url": "https://api.github.com/users/shrugs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shrugs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shrugs/subscriptions",
    "organizations_url": "https://api.github.com/users/shrugs/orgs",
    "repos_url": "https://api.github.com/users/shrugs/repos",
    "events_url": "https://api.github.com/users/shrugs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shrugs/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391514473",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391514473",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391514473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxNDQ3Mw==",
    "user": {
      "login": "Heph789",
      "id": 20362850,
      "node_id": "MDQ6VXNlcjIwMzYyODUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20362850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Heph789",
      "html_url": "https://github.com/Heph789",
      "followers_url": "https://api.github.com/users/Heph789/followers",
      "following_url": "https://api.github.com/users/Heph789/following{/other_user}",
      "gists_url": "https://api.github.com/users/Heph789/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Heph789/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Heph789/subscriptions",
      "organizations_url": "https://api.github.com/users/Heph789/orgs",
      "repos_url": "https://api.github.com/users/Heph789/repos",
      "events_url": "https://api.github.com/users/Heph789/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Heph789/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:17:22Z",
    "updated_at": "2018-05-23T22:17:22Z",
    "author_association": "NONE",
    "body": "Did you send .5 wei to the crowdsale or .5 ETH? Because the crowdsale operates in wei. So if you set the rate to 1, you're really saying 1 token for 1 wei. So if .5 ETH is put in, the amount of tokens returned should be way more than .5. 1 ETH = 10^18 wei. The amount of tokens returned should be .5 * 10^18 or 5 * 10^17. But the amount of tokens actually returned was 5 * 10^7. There's still a problem here, but there are too little tokens instead of too many I think.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391514473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391524623",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391524623",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391524623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUyNDYyMw==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:49:58Z",
    "updated_at": "2018-05-23T23:04:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I sent .5 Ether to a crowdsale with a rate of 1.\r\nAnd crowdsale mints for me 50,000,000 of tokens.\r\nNote that when I say 50M I mean 50,000,000.0000000000 so 50M plus 10 decimals.\r\n\r\nYes **rate** is for wei but when the token amount is calculated here `_weiAmount.mul(rate);` it uses 10^18 (the wei dimension) and not 10^10 as in my sample.\r\n\r\nThe problem is that weiAmount is N * 10^18 and when crowdsale [transfers](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/crowdsale/Crowdsale.sol#L147) or [mints](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/crowdsale/emission/MintedCrowdsale.sol#L25) the numbers of token is passed to mint or transfer function and that number has not the same decimals of a token with 10 decimals.\r\n\r\nSo .5 * 10^18 is greater than .5 * 10^10.\r\n\r\nI think that the _getTokenAmount function doesn't apply if token decimals are not equal to 18. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391524623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391557437",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391557437",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391557437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU1NzQzNw==",
    "user": {
      "login": "Heph789",
      "id": 20362850,
      "node_id": "MDQ6VXNlcjIwMzYyODUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20362850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Heph789",
      "html_url": "https://github.com/Heph789",
      "followers_url": "https://api.github.com/users/Heph789/followers",
      "following_url": "https://api.github.com/users/Heph789/following{/other_user}",
      "gists_url": "https://api.github.com/users/Heph789/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Heph789/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Heph789/subscriptions",
      "organizations_url": "https://api.github.com/users/Heph789/orgs",
      "repos_url": "https://api.github.com/users/Heph789/repos",
      "events_url": "https://api.github.com/users/Heph789/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Heph789/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T01:22:47Z",
    "updated_at": "2018-05-24T01:23:50Z",
    "author_association": "NONE",
    "body": "I tested it with MintableCrowdsale.sol and MintableToken, and rate is for wei. ERC20.sol and StandardToken.sol don't have support for setting the decimal. I think in order to solve this problem, there should be a getDecimal() function in ERC20.sol and StandardToken.sol. Then in Crowdsale.sol, getTokenAmount() could look something like this:\r\n\r\n```\r\nfunction _getTokenAmount(uint256 _weiAmount)\r\n    internal view returns (uint256)\r\n{\r\n    return _weiAmount.mul(rate).div(10^token.getDecimal());\r\n}\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391557437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391575435",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391575435",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391575435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU3NTQzNQ==",
    "user": {
      "login": "Heph789",
      "id": 20362850,
      "node_id": "MDQ6VXNlcjIwMzYyODUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20362850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Heph789",
      "html_url": "https://github.com/Heph789",
      "followers_url": "https://api.github.com/users/Heph789/followers",
      "following_url": "https://api.github.com/users/Heph789/following{/other_user}",
      "gists_url": "https://api.github.com/users/Heph789/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Heph789/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Heph789/subscriptions",
      "organizations_url": "https://api.github.com/users/Heph789/orgs",
      "repos_url": "https://api.github.com/users/Heph789/repos",
      "events_url": "https://api.github.com/users/Heph789/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Heph789/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T03:21:08Z",
    "updated_at": "2018-05-24T03:21:22Z",
    "author_association": "NONE",
    "body": "I think I'm kind of getting what you're trying to say. Let me run a hypothetical by you and see if I understand what you're saying.\r\n    GenericToken (GT) sets up a crowdsale with a rate of 1 wei per GT. GenericToken has 3 decimals. The creators of GenericToken sets up the crowdsale using Crowdsale.sol with a rate of 1 without realizing that Crowdsale.sol does not account for decimals.\r\n    A man named \"Bob\" spends 5 wei and expects to receive 5 GT in return. Bob looks in his Mist wallet and instead finds that he only has .005 GT, or 5 of the smallest unit of GT.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391575435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391615786",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391615786",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391615786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTYxNTc4Ng==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T07:24:47Z",
    "updated_at": "2018-05-24T07:24:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Check this on Rinkeby.\r\n\r\nGenericToken (GT) is a MintableToken and I'm using MintedCrowdsale.\r\n\r\nGenericToken has [3 decimals](https://rinkeby.etherscan.io/token/0x28e482306f0b930bd9a71fbbbff18d01c751ab1b#readContract).\r\nMintedCrowdsale has a [rate of 1](https://rinkeby.etherscan.io/address/0x4e52614a07c1807f471cfd9efc413736771c798b#readContract);\r\n\r\nI'm sending 1ETH (more realistic than send 5 wei).\r\nI'm expecting to receive 1 GT, so 1 * 10^3 units.\r\n\r\nI'm receiving a lot more tokens instead (about 1 * 10^15 GT, so 1 * 10^18 units).\r\n\r\nCheck the transaction.\r\nhttps://rinkeby.etherscan.io/tx/0xa6c8cd7b3aefe1f5fdc28827c7899bfe253fd56a401edb2c7c85f5b966c7da7b\r\n\r\nNote that I can't set a rate less than 1 so I can't handle the decimals difference by decreasing rate.\r\n\r\nThe opposite problem will appear if I set more than 18 decimals. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391615786/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391678388",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391678388",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391678388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTY3ODM4OA==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T11:18:42Z",
    "updated_at": "2018-05-24T11:18:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the below function can help in some cases.\r\n\r\n```\r\npragma solidity ^0.4.24;\r\n\r\nimport \"openzeppelin-solidity/contracts/crowdsale/emission/MintedCrowdsale.sol\";\r\nimport \"openzeppelin-solidity/contracts/token/ERC20/DetailedERC20.sol\";\r\n\r\n\r\ncontract MyCrowdsale is MintedCrowdsale {\r\n    constructor(\r\n        uint256 _rate,\r\n        address _wallet,\r\n        ERC20 _token\r\n    )\r\n    Crowdsale(_rate, _wallet, _token)\r\n    public\r\n    {\r\n\r\n    }\r\n\r\n    function _getTokenAmount(uint256 _weiAmount) internal view returns (uint256) {\r\n        uint256 tokenDecimals = DetailedERC20(token).decimals();\r\n        uint256 etherDecimals = 18;\r\n\r\n        if (tokenDecimals < etherDecimals) {\r\n            return _weiAmount.mul(rate).div(10 ** (etherDecimals.sub(tokenDecimals)));\r\n        }\r\n\r\n        if (tokenDecimals > etherDecimals) {\r\n            return _weiAmount.mul(rate).mul(10 ** (tokenDecimals.sub(etherDecimals)));\r\n        }\r\n\r\n        return _weiAmount.mul(rate);\r\n    }\r\n}\r\n```\r\n\r\nWith low decimals amount (like 1), solidity will approximate the generated token amount.\r\nFor instance with 1 decimal, sending 0.099999 ETH, will generate 0 tokens.\r\nSo it is not a definitive solution.\r\n\r\nIf this could be a starting point I could try to write tests and a way to understand if token is a DetailedERC20. In the real world any ERC20 should have decimals, but this is a lib and should cover all the cases.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391678388/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391817550",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-391817550",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 391817550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTgxNzU1MA==",
    "user": {
      "login": "Heph789",
      "id": 20362850,
      "node_id": "MDQ6VXNlcjIwMzYyODUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20362850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Heph789",
      "html_url": "https://github.com/Heph789",
      "followers_url": "https://api.github.com/users/Heph789/followers",
      "following_url": "https://api.github.com/users/Heph789/following{/other_user}",
      "gists_url": "https://api.github.com/users/Heph789/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Heph789/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Heph789/subscriptions",
      "organizations_url": "https://api.github.com/users/Heph789/orgs",
      "repos_url": "https://api.github.com/users/Heph789/repos",
      "events_url": "https://api.github.com/users/Heph789/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Heph789/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T18:38:53Z",
    "updated_at": "2018-05-24T18:38:53Z",
    "author_association": "NONE",
    "body": "But if you send 1 ether, with a rate of 1, the expected GT units received should be 10^18, or 10^15 GT. It just needs to be made clear that the rate is how many units of token per wei.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/391817550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392600226",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392600226",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392600226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYwMDIyNg==",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T20:40:15Z",
    "updated_at": "2018-05-28T20:40:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just like on ethereum, where you have a unit called ether, but all the transaccions are done using the smaller undivisible unit, called wei; on Tokens we have an undivisible unit. The standard token adds the decimals and a name for the token, that would be similar to what we do with ether, mostly to have a way to show it nicely without that many zeroes. But the rate is a correspondence between wei and the smallest token unit.\r\n\r\nDoes this make sense? I'm relatively new here, so please let me know if not.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392600226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392600982",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392600982",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392600982,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYwMDk4Mg==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T20:46:39Z",
    "updated_at": "2018-05-28T20:46:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes it is. \r\nIssue happens when token hasn't 18 decimals like Ether because of the mul between wei and rate returns a number that is intended to have 18 decimals but, token may have not them, so we can't show nicely.\r\nDo you think that the `_getTokenAmount` I designed above could help solve this issue?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392600982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392606562",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392606562",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392606562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYwNjU2Mg==",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T21:34:02Z",
    "updated_at": "2018-05-28T21:34:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure I follow you there.\r\nI don't see how the decimals affect the multiplication. You pay an amount of wei. In exchange, you receive an amount of tokens on the smallest unit they have. You can then convert this amount of tokens to the token unit you want. \r\n\r\nI'm failing to see what do you mean with \"can't show nicely\". Sorry if I'm being dense, feel free to jump into the openzeppelin slack if you think that will make communication easier.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392606562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392608828",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392608828",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392608828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYwODgyOA==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T21:56:11Z",
    "updated_at": "2018-05-28T21:56:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The [getTokenAmount](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/crowdsale/Crowdsale.sol#L186) function multiply weiAmount and rate.\r\n\r\nIf token has not 18 decimals the number of units will be considered to have 18 decimals (like the ether because of we are multiplying for the wei amount) but token can have a different numbers of decimals and we can have this issue:\r\n\r\nhttps://rinkeby.etherscan.io/tx/0xa6c8cd7b3aefe1f5fdc28827c7899bfe253fd56a401edb2c7c85f5b966c7da7b\r\n\r\nIn this transaction token has 3 decimals and crowdsale has a rate of 1.\r\nI know that rate is for the smaller token unit but I can't set a rate less than 1 to adjust the token decimals.\r\nIdeally if I send 1 Ether I should expect 1 token (not a unit but a token with 3 zero units) but I receive 10^15 that is 18 - 3 (ether decimals - token decimals). \r\nSo 1,000,000,000,000,000 token received.\r\nIs that right?\r\n\r\nIf I would receive 1 token (so in this example 1000 units) how can I set a rate that can handle also the right amount of decimals?\r\nI will join slack but it's night in Italy so tomorrow :)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392608828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392610848",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392610848",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392610848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYxMDg0OA==",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T22:16:04Z",
    "updated_at": "2018-05-28T22:16:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Ideally if I send 1 Ether I should expect 1 token (not a unit but a token with 3 zero units)\r\n\r\nHere is where I disagree. If you send 1 ether = 1000000000000000000 wei, and the rate is 1, you should get 1000000000000000000 of the smallest unit of the token. This is how it is supposed to work. \r\n\r\nThe concepts of Ether and token decimals are just syntactic sugar if you don't want to use that many zeroes. But they shouldn't be involved in the implementation of the code.\r\n\r\nTalk to you tomorrow. I'm elopio in slack too.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392610848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392852438",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-392852438",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 392852438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mjg1MjQzOA==",
    "user": {
      "login": "vittominacori",
      "id": 8151143,
      "node_id": "MDQ6VXNlcjgxNTExNDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8151143?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vittominacori",
      "html_url": "https://github.com/vittominacori",
      "followers_url": "https://api.github.com/users/vittominacori/followers",
      "following_url": "https://api.github.com/users/vittominacori/following{/other_user}",
      "gists_url": "https://api.github.com/users/vittominacori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vittominacori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vittominacori/subscriptions",
      "organizations_url": "https://api.github.com/users/vittominacori/orgs",
      "repos_url": "https://api.github.com/users/vittominacori/repos",
      "events_url": "https://api.github.com/users/vittominacori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vittominacori/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-29T16:56:24Z",
    "updated_at": "2018-05-29T16:56:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Definitely we shouldn't build the code thinking about Ether but only about Wei.\r\nSo be careful when you choose your decimals amount.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/392852438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/393048538",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/953#issuecomment-393048538",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/953",
    "id": 393048538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzA0ODUzOA==",
    "user": {
      "login": "sebastien-kr",
      "id": 36612453,
      "node_id": "MDQ6VXNlcjM2NjEyNDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/36612453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebastien-kr",
      "html_url": "https://github.com/sebastien-kr",
      "followers_url": "https://api.github.com/users/sebastien-kr/followers",
      "following_url": "https://api.github.com/users/sebastien-kr/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebastien-kr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebastien-kr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebastien-kr/subscriptions",
      "organizations_url": "https://api.github.com/users/sebastien-kr/orgs",
      "repos_url": "https://api.github.com/users/sebastien-kr/repos",
      "events_url": "https://api.github.com/users/sebastien-kr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebastien-kr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T06:45:20Z",
    "updated_at": "2018-05-30T06:45:20Z",
    "author_association": "NONE",
    "body": "This non-issue should be closed.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/393048538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/748",
  "id": 297601913,
  "node_id": "MDU6SXNzdWUyOTc2MDE5MTM=",
  "number": 748,
  "title": "Extension to allow recovery of lost tokens",
  "user": {
    "login": "k06a",
    "id": 702124,
    "node_id": "MDQ6VXNlcjcwMjEyNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/k06a",
    "html_url": "https://github.com/k06a",
    "followers_url": "https://api.github.com/users/k06a/followers",
    "following_url": "https://api.github.com/users/k06a/following{/other_user}",
    "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
    "organizations_url": "https://api.github.com/users/k06a/orgs",
    "repos_url": "https://api.github.com/users/k06a/repos",
    "events_url": "https://api.github.com/users/k06a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/k06a/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-02-15T21:26:00Z",
  "updated_at": "2023-03-03T18:43:24Z",
  "closed_at": "2019-03-08T21:57:37Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## üéâ Description\r\n\r\nI think it will be great to allow some smart contracts to recover tokens, mistakenly sent to them. For example, some people send tokens to the token smart contracts directly, or to smart contracts that just do not support any tokens handling.\r\n\r\n- [ ] üêõ This is a bug report.\r\n- [x] üìà This is a feature request.\r\n\r\n## üìù Details\r\n\r\nI personally extend my token contract with the following method:\r\n```\r\nfunction recoverLost(ERC20Basic token, address loser) public onlyOwner {\r\n    token.transfer(loser, token.balanceOf(this));\r\n}\r\n```\r\nThis method can be implemented in `RecoverLostTokens.sol` and extend `Ownable` smart contract.\r\n\r\nAlso contract that support tokens with `transferFrom` method should track the number of received tokens, to determine if some funds were mistakenly sent:\r\n```\r\nmapping (address => uint) depositedBalanceOf;\r\n\r\nfunction depositToken(ERC20 token, uint amount) public {\r\n    token.transferFrom(msg.sender, this, amount);\r\n    depositedBalanceOf[token] += amount;\r\n}\r\n\r\nfunction spendToken(ERC20 token, address receiver, uint amount) public {\r\n    require(depositedBalanceOf[token] >= amount);\r\n    token.transfer(receiver, amount);\r\n    depositedBalanceOf[token] -= amount;\r\n}\r\n\r\nfunction recoverLost(ERC20 token, address loser) public onlyOwner {\r\n    token.transfer(loser, token.balanceOf(this) - depositedBalanceOf[token]);\r\n}\r\n```\r\n\r\n## üëç Other Information\r\n\r\nAfter publishing this article I am getting multiple requests on Facebook, Twitter, Medium about lost funds **every day**: https://medium.com/bitclave/how-we-sent-eth-to-the-wrong-address-and-successfully-recovered-them-2fc18e09d8f6",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/375213323",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/748#issuecomment-375213323",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748",
    "id": 375213323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTIxMzMyMw==",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T08:15:27Z",
    "updated_at": "2018-03-22T08:15:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like already implemented?\r\nhttps://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/ownership/CanReclaimToken.sol",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/375213323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/375504670",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/748#issuecomment-375504670",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748",
    "id": 375504670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTUwNDY3MA==",
    "user": {
      "login": "shrugs",
      "id": 1535001,
      "node_id": "MDQ6VXNlcjE1MzUwMDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shrugs",
      "html_url": "https://github.com/shrugs",
      "followers_url": "https://api.github.com/users/shrugs/followers",
      "following_url": "https://api.github.com/users/shrugs/following{/other_user}",
      "gists_url": "https://api.github.com/users/shrugs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shrugs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shrugs/subscriptions",
      "organizations_url": "https://api.github.com/users/shrugs/orgs",
      "repos_url": "https://api.github.com/users/shrugs/repos",
      "events_url": "https://api.github.com/users/shrugs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shrugs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T00:54:20Z",
    "updated_at": "2018-03-23T00:54:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "CanReclaimToken only allows the owner of a contract to reclaim tokens (and perhaps manually distribute to someone that accidentally sent them there).\r\n\r\nI feel like I've seen this functionality around before, although I'm not sure where.\r\n\r\nThe primary issue is that it's hard for a contract to know that a user has sent funds to it with ERC20. Even if it did know, it'd difficult to know how many tokens belong to the user, since they all go into the same \"pot\" that owned by the contract.\r\n\r\nOne option would be providing a merkle proof that you'd transferred the tokens to the contract accidentally and then validating that, but it's a bit complicated. I don't think I'm the right person to own this issue, actually, since the correct solution isn't really clear to me off the bat.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/375504670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/471089957",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/748#issuecomment-471089957",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/748",
    "id": 471089957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTA4OTk1Nw==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-08T21:57:37Z",
    "updated_at": "2019-03-08T21:57:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing for the same reasons #1109 was closed, see [here](https://github.com/OpenZeppelin/openzeppelin-solidity/pull/1109#issuecomment-416706208).",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/471089957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740",
  "id": 297192888,
  "node_id": "MDU6SXNzdWUyOTcxOTI4ODg=",
  "number": 740,
  "title": "Test helpers reusability issue",
  "user": {
    "login": "danutavadanei",
    "id": 13782979,
    "node_id": "MDQ6VXNlcjEzNzgyOTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13782979?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/danutavadanei",
    "html_url": "https://github.com/danutavadanei",
    "followers_url": "https://api.github.com/users/danutavadanei/followers",
    "following_url": "https://api.github.com/users/danutavadanei/following{/other_user}",
    "gists_url": "https://api.github.com/users/danutavadanei/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/danutavadanei/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danutavadanei/subscriptions",
    "organizations_url": "https://api.github.com/users/danutavadanei/orgs",
    "repos_url": "https://api.github.com/users/danutavadanei/repos",
    "events_url": "https://api.github.com/users/danutavadanei/events{/privacy}",
    "received_events_url": "https://api.github.com/users/danutavadanei/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-02-14T18:07:28Z",
  "updated_at": "2018-02-14T19:03:19Z",
  "closed_at": "2018-02-14T18:42:44Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## üéâ Description\r\n\r\nI try to reuse the helper functions from test/helpers (which are great by the way) and for some of them (the ones that use ES6 syntax) fail beautifully.\r\n\r\n## üíª Environment\r\n\r\nI use:\r\n- zeppelin-solidity v1.6.0\r\n- node v9.5.0\r\n- truffle v4.0.6\r\n\r\nI register babel dependencies in truffle-config.js.\r\n\r\n## üìù Details\r\n\r\nPieces of code that work as expected:\r\n```js\r\nimport assertJump from 'zeppelin-solidity/test/helpers/assertJump';\r\nimport expectEvent from 'zeppelin-solidity/test/helpers/expectEvent';\r\nimport transactionMined from 'zeppelin-solidity/test/helpers/transactionMined';\r\n```\r\n\r\nPieces of code that fail:\r\n```js\r\nimport assertRevert from 'zeppelin-solidity/test/helpers/assertRevert';\r\nimport decodeLogs from 'zeppelin-solidity/test/helpers/decodeLogs';\r\nimport hashMessage from 'zeppelin-solidity/test/helpers/hashMessage';\r\n```\r\nor\r\n```js\r\nconst assertRevert = require('zeppelin-solidity/test/helpers/assertRevert');\r\nconst decodeLogs = require('zeppelin-solidity/test/helpers/decodeLogs');\r\nconst hashMessage = require('zeppelin-solidity/test/helpers/hashMessage');\r\n```\r\n\r\nBoth formats throw the same exception:\r\n```\r\nhome/danut/testing/node_modules/zeppelin-solidity/test/helpers/decodeLogs.js:3\r\nexport default function decodeLogs (logs, contract, address) {\r\n^^^^^^\r\n\r\nSyntaxError: Unexpected token export\r\n    at new Script (vm.js:51:7)\r\n    at createScript (vm.js:138:10)\r\n    at Object.runInThisContext (vm.js:199:10)\r\n    at Module._compile (module.js:624:28)\r\n    at Module._extensions..js (module.js:671:10)\r\n    at Object.require.extensions.(anonymous function) [as .js] (home/danut/testing/node_modules/babel-register/lib/node.js:152:7)\r\n    at Module.load (module.js:573:32)\r\n    at tryModuleLoad (module.js:513:12)\r\n    at Function.Module._load (module.js:505:3)\r\n    at Module.require (module.js:604:17)\r\n```\r\n\r\nI'll appreciate any idea on how to fix this because I am required to copy the files into my project's test/helpers directory which is a workaround. After I copy them I can do\r\n```js\r\nimport assertRevert from './helpers/assertRevert';\r\n```\r\nwithout any problems.",
  "closed_by": {
    "login": "danutavadanei",
    "id": 13782979,
    "node_id": "MDQ6VXNlcjEzNzgyOTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13782979?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/danutavadanei",
    "html_url": "https://github.com/danutavadanei",
    "followers_url": "https://api.github.com/users/danutavadanei/followers",
    "following_url": "https://api.github.com/users/danutavadanei/following{/other_user}",
    "gists_url": "https://api.github.com/users/danutavadanei/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/danutavadanei/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danutavadanei/subscriptions",
    "organizations_url": "https://api.github.com/users/danutavadanei/orgs",
    "repos_url": "https://api.github.com/users/danutavadanei/repos",
    "events_url": "https://api.github.com/users/danutavadanei/events{/privacy}",
    "received_events_url": "https://api.github.com/users/danutavadanei/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365697233",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740#issuecomment-365697233",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
    "id": 365697233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY5NzIzMw==",
    "user": {
      "login": "spalladino",
      "id": 429604,
      "node_id": "MDQ6VXNlcjQyOTYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spalladino",
      "html_url": "https://github.com/spalladino",
      "followers_url": "https://api.github.com/users/spalladino/followers",
      "following_url": "https://api.github.com/users/spalladino/following{/other_user}",
      "gists_url": "https://api.github.com/users/spalladino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spalladino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spalladino/subscriptions",
      "organizations_url": "https://api.github.com/users/spalladino/orgs",
      "repos_url": "https://api.github.com/users/spalladino/repos",
      "events_url": "https://api.github.com/users/spalladino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spalladino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T18:17:52Z",
    "updated_at": "2018-02-14T18:17:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "As far as I understand, the issue is that Babel does not parse `node_modules` by default, so if we want to make test helpers available, we'd need to preprocess them before publishing the package.\r\n\r\nAs a workaround, you should be able to instruct Babel to parse the test helpers from Zeppelin (see [here](https://github.com/webpack/webpack/issues/2031#issuecomment-183378107) for an example on how to do it on webpack). But we should modify the package mechanism. I think @martriay had been looking into this some time ago...?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365697233/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365704532",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740#issuecomment-365704532",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
    "id": 365704532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcwNDUzMg==",
    "user": {
      "login": "danutavadanei",
      "id": 13782979,
      "node_id": "MDQ6VXNlcjEzNzgyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13782979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danutavadanei",
      "html_url": "https://github.com/danutavadanei",
      "followers_url": "https://api.github.com/users/danutavadanei/followers",
      "following_url": "https://api.github.com/users/danutavadanei/following{/other_user}",
      "gists_url": "https://api.github.com/users/danutavadanei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danutavadanei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danutavadanei/subscriptions",
      "organizations_url": "https://api.github.com/users/danutavadanei/orgs",
      "repos_url": "https://api.github.com/users/danutavadanei/repos",
      "events_url": "https://api.github.com/users/danutavadanei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danutavadanei/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T18:42:44Z",
    "updated_at": "2018-02-14T18:42:44Z",
    "author_association": "NONE",
    "body": "@spalladino Thanks for the hints.\r\n\r\nI've added this to the `truffle-config.js` file and it did the trick.\r\n```js\r\nrequire('babel-register')({\r\n  ignore: /node_modules\\/(?!zeppelin-solidity\\/test\\/helpers)/\r\n});\r\n```\r\nAnd the `truffle-config.js` file now looks like:\r\n```js\r\nrequire('babel-register')({\r\n  ignore: /node_modules\\/(?!zeppelin-solidity\\/test\\/helpers)/\r\n});\r\nrequire('babel-polyfill');\r\n\r\nmodule.exports = {\r\n  // networks\r\n};\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365704532/reactions",
      "total_count": 3,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365705911",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740#issuecomment-365705911",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
    "id": 365705911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcwNTkxMQ==",
    "user": {
      "login": "spalladino",
      "id": 429604,
      "node_id": "MDQ6VXNlcjQyOTYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spalladino",
      "html_url": "https://github.com/spalladino",
      "followers_url": "https://api.github.com/users/spalladino/followers",
      "following_url": "https://api.github.com/users/spalladino/following{/other_user}",
      "gists_url": "https://api.github.com/users/spalladino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spalladino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spalladino/subscriptions",
      "organizations_url": "https://api.github.com/users/spalladino/orgs",
      "repos_url": "https://api.github.com/users/spalladino/repos",
      "events_url": "https://api.github.com/users/spalladino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spalladino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T18:47:19Z",
    "updated_at": "2018-02-14T18:47:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Good to hear!\n\nOn Wed, Feb 14, 2018 at 3:42 PM, Avadanei Danut <notifications@github.com>\nwrote:\n\n> @spalladino <https://github.com/spalladino> Thanks for the hints.\n>\n> I've added this to the truffle-config.js file and it did the trick.\n>\n> require('babel-register')({\n>   ignore: /node_modules\\/(?!zeppelin-solidity\\/test\\/helpers)/\n> });\n>\n> And the truffle-config.js file now looks like:\n>\n> require('babel-register')({\n>   ignore: /node_modules\\/(?!zeppelin-solidity\\/test\\/helpers)/\n> });require('babel-polyfill');\n> module.exports = {\n>   // networks\n> };\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/OpenZeppelin/zeppelin-solidity/issues/740#issuecomment-365704532>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAaOJJ_QVwAo1F7uLR6nSmyrhznDXNTwks5tUykvgaJpZM4SFvXW>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365705911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365708945",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740#issuecomment-365708945",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
    "id": 365708945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcwODk0NQ==",
    "user": {
      "login": "danutavadanei",
      "id": 13782979,
      "node_id": "MDQ6VXNlcjEzNzgyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13782979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danutavadanei",
      "html_url": "https://github.com/danutavadanei",
      "followers_url": "https://api.github.com/users/danutavadanei/followers",
      "following_url": "https://api.github.com/users/danutavadanei/following{/other_user}",
      "gists_url": "https://api.github.com/users/danutavadanei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danutavadanei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danutavadanei/subscriptions",
      "organizations_url": "https://api.github.com/users/danutavadanei/orgs",
      "repos_url": "https://api.github.com/users/danutavadanei/repos",
      "events_url": "https://api.github.com/users/danutavadanei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danutavadanei/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T18:57:30Z",
    "updated_at": "2018-02-14T18:57:30Z",
    "author_association": "NONE",
    "body": "@spalladino Maybe it will be nice to be a separated package for testing. I could benefit from that and I think a lot of people will.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365708945/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365710752",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/740#issuecomment-365710752",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/740",
    "id": 365710752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTcxMDc1Mg==",
    "user": {
      "login": "spalladino",
      "id": 429604,
      "node_id": "MDQ6VXNlcjQyOTYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spalladino",
      "html_url": "https://github.com/spalladino",
      "followers_url": "https://api.github.com/users/spalladino/followers",
      "following_url": "https://api.github.com/users/spalladino/following{/other_user}",
      "gists_url": "https://api.github.com/users/spalladino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spalladino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spalladino/subscriptions",
      "organizations_url": "https://api.github.com/users/spalladino/orgs",
      "repos_url": "https://api.github.com/users/spalladino/repos",
      "events_url": "https://api.github.com/users/spalladino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spalladino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-14T19:03:18Z",
    "updated_at": "2018-02-14T19:03:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Indeed. It is being discussed in issue #326, though it has become somewhat\ninactive.\n\nOn Wed, Feb 14, 2018 at 3:57 PM, Avadanei Danut <notifications@github.com>\nwrote:\n\n> @spalladino <https://github.com/spalladino> Maybe it will be nice to be a\n> separated package for testing. I could benefit from that and I think a lot\n> of people will.\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/OpenZeppelin/zeppelin-solidity/issues/740#issuecomment-365708945>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAaOJMt6g_HWyg0AwlCzvydV5Gbd5u49ks5tUyyigaJpZM4SFvXW>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/365710752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

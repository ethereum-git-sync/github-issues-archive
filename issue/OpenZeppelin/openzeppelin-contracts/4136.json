{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136",
  "id": 1640213748,
  "node_id": "I_kwDOA9tCBs5hw6z0",
  "number": 4136,
  "title": "Move `to != owner` check from `ERC721.approval` to `ERC721._approval`",
  "user": {
    "login": "Amxx",
    "id": 2432299,
    "node_id": "MDQ6VXNlcjI0MzIyOTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Amxx",
    "html_url": "https://github.com/Amxx",
    "followers_url": "https://api.github.com/users/Amxx/followers",
    "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
    "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
    "organizations_url": "https://api.github.com/users/Amxx/orgs",
    "repos_url": "https://api.github.com/users/Amxx/repos",
    "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Amxx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 503650966,
      "node_id": "MDU6TGFiZWw1MDM2NTA5NjY=",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "0e8a16",
      "default": true,
      "description": "Low hanging fruit for new contributors to get involved!"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/milestone/11",
    "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/milestones/11/labels",
    "id": 7990184,
    "node_id": "MI_kwDOA9tCBs4Aeeuo",
    "number": 11,
    "title": "5.0",
    "description": null,
    "creator": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 31,
    "closed_issues": 45,
    "state": "open",
    "created_at": "2022-05-17T19:52:44Z",
    "updated_at": "2023-06-29T16:00:39Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 8,
  "created_at": "2023-03-25T00:03:08Z",
  "updated_at": "2023-06-01T13:06:14Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "In `ERC721.approve` (public) we do\r\n```solidity\r\nrequire(to != owner, \"ERC721: approval to current owner\");\r\n```\r\nwe don't do it in `ERC721._approve` (internal)\r\n\r\nThat means its not ok to approve the owner, unless you do it internally ? IMO the check should move from the public to the internal function. (note that there is already a call to `ERC721.ownerOf` inside the internal version, so its not like we are saving an `sload` anyway)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1483686566",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1483686566",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1483686566,
    "node_id": "IC_kwDOA9tCBs5Yb0Km",
    "user": {
      "login": "boxingcoder00",
      "id": 111091683,
      "node_id": "U_kgDOBp8f4w",
      "avatar_url": "https://avatars.githubusercontent.com/u/111091683?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boxingcoder00",
      "html_url": "https://github.com/boxingcoder00",
      "followers_url": "https://api.github.com/users/boxingcoder00/followers",
      "following_url": "https://api.github.com/users/boxingcoder00/following{/other_user}",
      "gists_url": "https://api.github.com/users/boxingcoder00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boxingcoder00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boxingcoder00/subscriptions",
      "organizations_url": "https://api.github.com/users/boxingcoder00/orgs",
      "repos_url": "https://api.github.com/users/boxingcoder00/repos",
      "events_url": "https://api.github.com/users/boxingcoder00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boxingcoder00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-25T02:26:27Z",
    "updated_at": "2023-03-25T02:26:27Z",
    "author_association": "NONE",
    "body": "This may be a foolish question(very new to the space) but what exactly would be the benefit? gas or optimization ?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1483686566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1487910501",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1487910501",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1487910501,
    "node_id": "IC_kwDOA9tCBs5Yr7Zl",
    "user": {
      "login": "ernestognw",
      "id": 33379285,
      "node_id": "MDQ6VXNlcjMzMzc5Mjg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/33379285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ernestognw",
      "html_url": "https://github.com/ernestognw",
      "followers_url": "https://api.github.com/users/ernestognw/followers",
      "following_url": "https://api.github.com/users/ernestognw/following{/other_user}",
      "gists_url": "https://api.github.com/users/ernestognw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ernestognw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ernestognw/subscriptions",
      "organizations_url": "https://api.github.com/users/ernestognw/orgs",
      "repos_url": "https://api.github.com/users/ernestognw/repos",
      "events_url": "https://api.github.com/users/ernestognw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ernestognw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-29T03:58:30Z",
    "updated_at": "2023-03-29T03:58:30Z",
    "author_association": "MEMBER",
    "body": "> This may be a foolish question(very new to the space) but what exactly would be the benefit? gas or optimization ?\r\n\r\nIt's just a matter of interface consistency, we expect developers to have reasonable guarantees when they use the library. I think it's reasonable to expect this same check in both the public and internal interface.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1487910501/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1495925978",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1495925978",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1495925978,
    "node_id": "IC_kwDOA9tCBs5ZKgTa",
    "user": {
      "login": "rupak21",
      "id": 76142871,
      "node_id": "MDQ6VXNlcjc2MTQyODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/76142871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rupak21",
      "html_url": "https://github.com/rupak21",
      "followers_url": "https://api.github.com/users/rupak21/followers",
      "following_url": "https://api.github.com/users/rupak21/following{/other_user}",
      "gists_url": "https://api.github.com/users/rupak21/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rupak21/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rupak21/subscriptions",
      "organizations_url": "https://api.github.com/users/rupak21/orgs",
      "repos_url": "https://api.github.com/users/rupak21/repos",
      "events_url": "https://api.github.com/users/rupak21/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rupak21/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T12:56:54Z",
    "updated_at": "2023-04-04T12:56:54Z",
    "author_association": "NONE",
    "body": "hey i want to work on this issue`\r\n\r\nfunction _approval(address owner, address to, uint256 tokenId) internal virtual {\r\n    require(to != owner, \"ERC721: approval to current owner\");\r\n    _tokenApprovals[tokenId] = to;\r\n    emit Approval(owner, to, tokenId);\r\n}\r\n`",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1495925978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496001544",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1496001544",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1496001544,
    "node_id": "IC_kwDOA9tCBs5ZKywI",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T13:43:51Z",
    "updated_at": "2023-04-04T13:43:51Z",
    "author_association": "COLLABORATOR",
    "body": "> hey i want to work on this issue`\r\n> \r\n> function _approval(address owner, address to, uint256 tokenId) internal virtual { require(to != owner, \"ERC721: approval to current owner\"); _tokenApprovals[tokenId] = to; emit Approval(owner, to, tokenId); } `\r\n\r\nThere are already 2 PRs for this issue.\r\n\r\nAlso, the code you shared above changes the internal interface, which is not something we want.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1496001544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1500139540",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1500139540",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1500139540,
    "node_id": "IC_kwDOA9tCBs5ZalAU",
    "user": {
      "login": "Saksham010",
      "id": 56692835,
      "node_id": "MDQ6VXNlcjU2NjkyODM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/56692835?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Saksham010",
      "html_url": "https://github.com/Saksham010",
      "followers_url": "https://api.github.com/users/Saksham010/followers",
      "following_url": "https://api.github.com/users/Saksham010/following{/other_user}",
      "gists_url": "https://api.github.com/users/Saksham010/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Saksham010/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Saksham010/subscriptions",
      "organizations_url": "https://api.github.com/users/Saksham010/orgs",
      "repos_url": "https://api.github.com/users/Saksham010/repos",
      "events_url": "https://api.github.com/users/Saksham010/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Saksham010/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-07T10:01:11Z",
    "updated_at": "2023-04-07T10:01:11Z",
    "author_association": "NONE",
    "body": "> > hey i want to work on this issue`\r\n> > function _approval(address owner, address to, uint256 tokenId) internal virtual { require(to != owner, \"ERC721: approval to current owner\"); _tokenApprovals[tokenId] = to; emit Approval(owner, to, tokenId); } `\r\n> \r\n> There are already 2 PRs for this issue.\r\n> \r\n> Also, the code you shared above changes the internal interface, which is not something we want.\r\n\r\nMade a PR, it passes all required test",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1500139540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1571988624",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1571988624",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1571988624,
    "node_id": "IC_kwDOA9tCBs5dsqSQ",
    "user": {
      "login": "kr-meet",
      "id": 123370512,
      "node_id": "U_kgDOB1p8EA",
      "avatar_url": "https://avatars.githubusercontent.com/u/123370512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kr-meet",
      "html_url": "https://github.com/kr-meet",
      "followers_url": "https://api.github.com/users/kr-meet/followers",
      "following_url": "https://api.github.com/users/kr-meet/following{/other_user}",
      "gists_url": "https://api.github.com/users/kr-meet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kr-meet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kr-meet/subscriptions",
      "organizations_url": "https://api.github.com/users/kr-meet/orgs",
      "repos_url": "https://api.github.com/users/kr-meet/repos",
      "events_url": "https://api.github.com/users/kr-meet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kr-meet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-01T12:46:24Z",
    "updated_at": "2023-06-01T12:46:24Z",
    "author_association": "NONE",
    "body": "@Amxx I want to work on this issue, will you give me an overview",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1571988624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1572005370",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1572005370",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1572005370,
    "node_id": "IC_kwDOA9tCBs5dsuX6",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-01T12:57:25Z",
    "updated_at": "2023-06-01T12:57:25Z",
    "author_association": "COLLABORATOR",
    "body": "@kr-meet There is a big refactor of ERC721 that is going on internally right now. IMO we should wait for that refactor to be done before changing other things, otherwize we'll multiply conflicts",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1572005370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1572020794",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4136#issuecomment-1572020794",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4136",
    "id": 1572020794,
    "node_id": "IC_kwDOA9tCBs5dsyI6",
    "user": {
      "login": "kr-meet",
      "id": 123370512,
      "node_id": "U_kgDOB1p8EA",
      "avatar_url": "https://avatars.githubusercontent.com/u/123370512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kr-meet",
      "html_url": "https://github.com/kr-meet",
      "followers_url": "https://api.github.com/users/kr-meet/followers",
      "following_url": "https://api.github.com/users/kr-meet/following{/other_user}",
      "gists_url": "https://api.github.com/users/kr-meet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kr-meet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kr-meet/subscriptions",
      "organizations_url": "https://api.github.com/users/kr-meet/orgs",
      "repos_url": "https://api.github.com/users/kr-meet/repos",
      "events_url": "https://api.github.com/users/kr-meet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kr-meet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-01T13:06:14Z",
    "updated_at": "2023-06-01T13:06:14Z",
    "author_association": "NONE",
    "body": "> @kr-meet There is a big refactor of ERC721 that is going on internally right now. IMO we should wait for that refactor to be done before changing other things, otherwize we'll multiply conflicts\r\n\r\nno worries, we can wait. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1572020794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

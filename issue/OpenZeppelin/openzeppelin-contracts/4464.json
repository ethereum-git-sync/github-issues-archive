{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4464",
  "id": 1809454258,
  "node_id": "I_kwDOA9tCBs5r2hSy",
  "number": 4464,
  "title": "AccessControlDefaultAdminRules implements IERC5313 but does not handle it in supportsInterface()",
  "user": {
    "login": "RobertOttBS",
    "id": 119598357,
    "node_id": "U_kgDOByDtFQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/119598357?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RobertOttBS",
    "html_url": "https://github.com/RobertOttBS",
    "followers_url": "https://api.github.com/users/RobertOttBS/followers",
    "following_url": "https://api.github.com/users/RobertOttBS/following{/other_user}",
    "gists_url": "https://api.github.com/users/RobertOttBS/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RobertOttBS/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RobertOttBS/subscriptions",
    "organizations_url": "https://api.github.com/users/RobertOttBS/orgs",
    "repos_url": "https://api.github.com/users/RobertOttBS/repos",
    "events_url": "https://api.github.com/users/RobertOttBS/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RobertOttBS/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-18T08:41:09Z",
  "updated_at": "2023-07-28T03:36:11Z",
  "closed_at": "2023-07-28T03:36:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The contract AccessControlDefaultAdminRules implements the interface IERC5313. One would expect that if we call supportsInterface() it would signal true with the interfaceId of IERC5313. However, it currently returns false.\r\n\r\n**üíª Environment**\r\n\r\nUsed with hardhat and OpenZeppelin Version 4.9\r\n\r\n**üìù Details**\r\n\r\nThe current implementation of supportsInterface only handles IAccessControlDefaultAdminRules and IAccessControl but does not handle IERC5313 (even though it implements the interface).\r\n\r\n```\r\n    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\r\n        return interfaceId == type(IAccessControlDefaultAdminRules).interfaceId || interfaceId == type(IERC5313).interfaceId || super.supportsInterface(interfaceId);\r\n    }\r\n```\r\n\r\n**üî¢ Code to reproduce bug**\r\n\r\nCall of supportsInterface('0x8da5cb5b') returns false (0x8da5cb5b is the interfaceId of IERC5313)\r\n",
  "closed_by": {
    "login": "ernestognw",
    "id": 33379285,
    "node_id": "MDQ6VXNlcjMzMzc5Mjg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/33379285?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ernestognw",
    "html_url": "https://github.com/ernestognw",
    "followers_url": "https://api.github.com/users/ernestognw/followers",
    "following_url": "https://api.github.com/users/ernestognw/following{/other_user}",
    "gists_url": "https://api.github.com/users/ernestognw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ernestognw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ernestognw/subscriptions",
    "organizations_url": "https://api.github.com/users/ernestognw/orgs",
    "repos_url": "https://api.github.com/users/ernestognw/repos",
    "events_url": "https://api.github.com/users/ernestognw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ernestognw/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1640644987",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4464#issuecomment-1640644987",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464",
    "id": 1640644987,
    "node_id": "IC_kwDOA9tCBs5hykF7",
    "user": {
      "login": "ernestognw",
      "id": 33379285,
      "node_id": "MDQ6VXNlcjMzMzc5Mjg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/33379285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ernestognw",
      "html_url": "https://github.com/ernestognw",
      "followers_url": "https://api.github.com/users/ernestognw/followers",
      "following_url": "https://api.github.com/users/ernestognw/following{/other_user}",
      "gists_url": "https://api.github.com/users/ernestognw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ernestognw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ernestognw/subscriptions",
      "organizations_url": "https://api.github.com/users/ernestognw/orgs",
      "repos_url": "https://api.github.com/users/ernestognw/repos",
      "events_url": "https://api.github.com/users/ernestognw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ernestognw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-18T17:17:25Z",
    "updated_at": "2023-07-18T17:17:25Z",
    "author_association": "MEMBER",
    "body": "We've previously discussed how much ERC165 support we would like to guarantee for the users, especially because we have some interfaces (eg. Governor) whose interface id changes quite often, and it's becoming difficult to keep backward compatibility.\r\n\r\nIn any case, I think this is a valid issue and we should report the IERC5313 interface in the contract because DefaultAdminRules doesn't change as often as governor does.\r\n\r\nI'll open a PR for this but some folks are in Paris right now, perhaps we'd need to wait for approval. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1640644987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1640684098",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4464#issuecomment-1640684098",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464",
    "id": 1640684098,
    "node_id": "IC_kwDOA9tCBs5hytpC",
    "user": {
      "login": "RobertOttBS",
      "id": 119598357,
      "node_id": "U_kgDOByDtFQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/119598357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertOttBS",
      "html_url": "https://github.com/RobertOttBS",
      "followers_url": "https://api.github.com/users/RobertOttBS/followers",
      "following_url": "https://api.github.com/users/RobertOttBS/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertOttBS/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertOttBS/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertOttBS/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertOttBS/orgs",
      "repos_url": "https://api.github.com/users/RobertOttBS/repos",
      "events_url": "https://api.github.com/users/RobertOttBS/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertOttBS/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-18T17:46:51Z",
    "updated_at": "2023-07-18T17:46:51Z",
    "author_association": "NONE",
    "body": "@ernestognw thanks a lot. I agree, the Interface IERC5313 only defines one method called 'owner()' and I don't think there is a reason to change future implementations of IERC5313 (in comparison to other, more complex interfaces like that you mentioned). I am looking forward for the PR to be processed as supporting it would be the straight forward consequence to implement the ERC5313 interface in the first place. Thanks a lot!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1640684098/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1654940625",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4464#issuecomment-1654940625",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4464",
    "id": 1654940625,
    "node_id": "IC_kwDOA9tCBs5ipGPR",
    "user": {
      "login": "ernestognw",
      "id": 33379285,
      "node_id": "MDQ6VXNlcjMzMzc5Mjg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/33379285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ernestognw",
      "html_url": "https://github.com/ernestognw",
      "followers_url": "https://api.github.com/users/ernestognw/followers",
      "following_url": "https://api.github.com/users/ernestognw/following{/other_user}",
      "gists_url": "https://api.github.com/users/ernestognw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ernestognw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ernestognw/subscriptions",
      "organizations_url": "https://api.github.com/users/ernestognw/orgs",
      "repos_url": "https://api.github.com/users/ernestognw/repos",
      "events_url": "https://api.github.com/users/ernestognw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ernestognw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T03:36:10Z",
    "updated_at": "2023-07-28T03:36:10Z",
    "author_association": "MEMBER",
    "body": "Hey @RobertOttBS, we decided not to support this, you can find the rationale in [this comment.](https://github.com/OpenZeppelin/openzeppelin-contracts/pull/4469#issuecomment-1654937404)\r\n\r\nThe TLDR is that ERC5313 doesn't require EIP165 and we generally think there's no reason for using it if it's specified to not rely on it.\r\n\r\nClosing because we're strong on this opinion, but feel free to continue the conversation if there's something we're missing.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1654940625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

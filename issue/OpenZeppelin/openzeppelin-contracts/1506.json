{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1506",
  "id": 382462157,
  "node_id": "MDU6SXNzdWUzODI0NjIxNTc=",
  "number": 1506,
  "title": "SafeMath - failed assert reason.",
  "user": {
    "login": "robertmagier",
    "id": 34715949,
    "node_id": "MDQ6VXNlcjM0NzE1OTQ5",
    "avatar_url": "https://avatars.githubusercontent.com/u/34715949?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/robertmagier",
    "html_url": "https://github.com/robertmagier",
    "followers_url": "https://api.github.com/users/robertmagier/followers",
    "following_url": "https://api.github.com/users/robertmagier/following{/other_user}",
    "gists_url": "https://api.github.com/users/robertmagier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/robertmagier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/robertmagier/subscriptions",
    "organizations_url": "https://api.github.com/users/robertmagier/orgs",
    "repos_url": "https://api.github.com/users/robertmagier/repos",
    "events_url": "https://api.github.com/users/robertmagier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/robertmagier/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-11-20T01:35:30Z",
  "updated_at": "2018-11-20T20:20:02Z",
  "closed_at": "2018-11-20T20:20:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I would like to propose changing SafeMath library to use require instead of assert and also describe the reason why require failed.  It will make testing in truffle much easier. \r\n\r\nFor example current sub function is using assert. \r\n\r\n```\r\n    function sub(uint256 _a, uint256 _b) internal pure returns (uint256) {\r\n        assert(_b <= _a);\r\n        return _a - _b;\r\n    }\r\n\r\n```\r\nWe can change it to require and provide error description which will be then displayed truffle test. \r\n\r\n```\r\n    function sub(uint256 _a, uint256 _b) internal pure returns (uint256) {\r\n        require(_b <= _a,\"SafeMath library subtraction error\");\r\n        return _a - _b;\r\n    }\r\n```\r\n",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440138698",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1506#issuecomment-440138698",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506",
    "id": 440138698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDEzODY5OA==",
    "user": {
      "login": "maxsam4",
      "id": 7436022,
      "node_id": "MDQ6VXNlcjc0MzYwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxsam4",
      "html_url": "https://github.com/maxsam4",
      "followers_url": "https://api.github.com/users/maxsam4/followers",
      "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
      "organizations_url": "https://api.github.com/users/maxsam4/orgs",
      "repos_url": "https://api.github.com/users/maxsam4/repos",
      "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxsam4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-20T04:59:41Z",
    "updated_at": "2018-11-20T04:59:41Z",
    "author_association": "NONE",
    "body": "A) `internal` functions of libraries are inlined in the implementing smart contract. \r\nB) Strings cannot be compressed and hence take a good chunk of allowed bytecode size for deployment.\r\n\r\nAs a result, Adding error strings to SafeMath will considerably increase the size of contracts implementing it. I would avoid making such basic functions so heavy. \r\n\r\nI won't mind a separate `SafeMathWithReasonStrings` library though. Just don't add reason strings to the default one.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440138698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440141989",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1506#issuecomment-440141989",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506",
    "id": 440141989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDE0MTk4OQ==",
    "user": {
      "login": "robertmagier",
      "id": 34715949,
      "node_id": "MDQ6VXNlcjM0NzE1OTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/34715949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robertmagier",
      "html_url": "https://github.com/robertmagier",
      "followers_url": "https://api.github.com/users/robertmagier/followers",
      "following_url": "https://api.github.com/users/robertmagier/following{/other_user}",
      "gists_url": "https://api.github.com/users/robertmagier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robertmagier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robertmagier/subscriptions",
      "organizations_url": "https://api.github.com/users/robertmagier/orgs",
      "repos_url": "https://api.github.com/users/robertmagier/repos",
      "events_url": "https://api.github.com/users/robertmagier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robertmagier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-20T05:16:53Z",
    "updated_at": "2018-11-20T05:16:53Z",
    "author_association": "NONE",
    "body": "I think libraries address is inlined in the contract using it. Implementing\nreason will of course increase size of library and cost of its deployment,\nbut will not increase size of contract using this library.\n\nPlease correct me if I am wrong.\n\n\nNvertheless I think size argument is pretty important and it might be a\ngood reason no to implement this change. It would however help me in\ndebugging.\n\nOn Tue, Nov 20, 2018, 00:00 Mudit Gupta <notifications@github.com wrote:\n\n> A) internal functions of libraries are inlined in the implementing smart\n> contract.\n> B) Strings cannot be compressed and hence take a good chunk of allowed\n> bytecode size for deployment.\n>\n> As a result, Adding error strings to SafeMath will considerably increase\n> the size of contracts implementing it. I would avoid making such basic\n> functions so heavy.\n>\n> I won't mind a separate SafeMathWithReasonStrings library though. Just\n> don't add reason strings to the default one.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/OpenZeppelin/openzeppelin-solidity/issues/1506#issuecomment-440138698>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AhG5LSVIilGICw8vEXcXlPf2fMaF6GOnks5uw4xTgaJpZM4YqNVU>\n> .\n>\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440141989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440144491",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1506#issuecomment-440144491",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506",
    "id": 440144491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDE0NDQ5MQ==",
    "user": {
      "login": "maxsam4",
      "id": 7436022,
      "node_id": "MDQ6VXNlcjc0MzYwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7436022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxsam4",
      "html_url": "https://github.com/maxsam4",
      "followers_url": "https://api.github.com/users/maxsam4/followers",
      "following_url": "https://api.github.com/users/maxsam4/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxsam4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxsam4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxsam4/subscriptions",
      "organizations_url": "https://api.github.com/users/maxsam4/orgs",
      "repos_url": "https://api.github.com/users/maxsam4/repos",
      "events_url": "https://api.github.com/users/maxsam4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxsam4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-20T05:27:01Z",
    "updated_at": "2018-11-20T05:27:01Z",
    "author_association": "NONE",
    "body": "> I think libraries address is inlined in the contract using it. \r\n\r\nLibrary address is used for `public` functions. \r\n`internal` functions are directly inlined.\r\n\r\nAs address cannot be compressed either, making SafeMath functions public will increase deployment cost as well as (more importantly) execution cost as everytime the contract will have to make an external call.\r\n\r\nAs I said earlier, I won't mind a separate `SafeMathWithReasonStrings` library. Just don't add reason strings to the default one.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440144491/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440416061",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1506#issuecomment-440416061",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1506",
    "id": 440416061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDQxNjA2MQ==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-20T20:20:02Z",
    "updated_at": "2018-11-20T20:20:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@maxsam4 is right in that `SafeMath` is intended to be used as an `internal` library, and will be inlined in your source code (it'd be way too expensive to use otherwise). We are considering adding revert reasons, but we're not yet sure on how they should look like (there was some discussion in #888), and lack tooling to make sure they've been correctly implemented.\r\n\r\nRegarding `require`, that's already part of OpenZeppelin! It was added in https://github.com/OpenZeppelin/openzeppelin-solidity/pull/1187.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/440416061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202",
  "id": 1144710543,
  "node_id": "I_kwDOA9tCBs5EOuWP",
  "number": 3202,
  "title": "Consider adding a Dutch Auction implementation",
  "user": {
    "login": "Dentrax",
    "id": 16493751,
    "node_id": "MDQ6VXNlcjE2NDkzNzUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/16493751?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Dentrax",
    "html_url": "https://github.com/Dentrax",
    "followers_url": "https://api.github.com/users/Dentrax/followers",
    "following_url": "https://api.github.com/users/Dentrax/following{/other_user}",
    "gists_url": "https://api.github.com/users/Dentrax/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Dentrax/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Dentrax/subscriptions",
    "organizations_url": "https://api.github.com/users/Dentrax/orgs",
    "repos_url": "https://api.github.com/users/Dentrax/repos",
    "events_url": "https://api.github.com/users/Dentrax/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Dentrax/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-02-19T13:37:56Z",
  "updated_at": "2022-04-08T00:37:13Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\n \r\nTL;DR: Price starts at _X_ reduces by _Y_ every _Z_ _minutes_ until it reaches W.\r\n\r\n**üìù Details**\r\n\r\nFound this PR https://github.com/OpenZeppelin/openzeppelin-contracts/pull/989, but it's way too complex and closed due to staleness.\r\n\r\nExample: https://github.com/divergencetech/ethier/blob/main/contracts/sales/LinearDutchAuction.sol (I'm not sure if it's production-ready)\r\n\r\nIt would be pretty straightforward to implement, as follows:\r\n\r\n```solidity\r\nuint256 public constant startPrice = 1 ether;\r\nuint256 public constant endPrice = 0.5 ether;\r\nuint256 public constant priceCurveLength = 120 minutes;\r\nuint256 public constant dropInterval = 40 minutes;\r\nuint256 public constant dropPerStep = (startPrice - endPrice) / (priceCurveLength / dropInterval);\r\n\r\nfunction getAuctionPrice() public view returns (uint256) {\r\n    if (block.timestamp < startTime) {\r\n        return startPrice;\r\n    }\r\n    if (block.timestamp - startTime >= priceCurveLength) {\r\n        return endPrice;\r\n    }\r\n    uint256 steps = (block.timestamp - startTime) / dropInterval;\r\n    return startPrice - (steps * dropPerStep);\r\n}\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1055971663",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1055971663",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1055971663,
    "node_id": "IC_kwDOA9tCBs4-8NlP",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-01T23:36:00Z",
    "updated_at": "2022-03-01T23:36:00Z",
    "author_association": "MEMBER",
    "body": "Thank you for the suggestion. Can you clarify exactly what contract or functionality are you suggesting to add?\r\n\r\nIf this is as simple to implement as the code shared in the issue, what value does a standard implementation in OpenZeppelin Contracts provide to the user?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1055971663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1056542945",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1056542945",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1056542945,
    "node_id": "IC_kwDOA9tCBs4--ZDh",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-02T08:20:16Z",
    "updated_at": "2022-03-02T10:18:25Z",
    "author_association": "COLLABORATOR",
    "body": "Maybe we should have a `math/CommonFunction.sol` library, with things like \r\n- [Heaviside](https://en.wikipedia.org/wiki/Heaviside_step_function)\r\n- [Ramp](https://en.wikipedia.org/wiki/Ramp_function)\r\n- [Rectangular](https://en.wikipedia.org/wiki/Rectangular_function)\r\n- [Triangular](https://en.wikipedia.org/wiki/Triangular_function)\r\n\r\nIt could include\r\n```\r\nfunction needToFindAGoodName(int256 x0, int256 x1, int256 y0, int256 y1, int256 x) internal pure returns (int256) {\r\n    return x <= x0 ? y0\r\n         : x >= x1 ? y1\r\n         : y0 + (y1-y0) * (x-x0) / (x1-x0);\r\n}\r\n``` \r\nAnd possibly a stepped version as well\r\n\r\nEDIT: something like [this](https://github.com/Amxx/amxx-hre/blob/0.1.0-alpha/contracts/math/CommonFunctions.sol)",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1056542945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1066182283",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1066182283",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1066182283,
    "node_id": "IC_kwDOA9tCBs4_jKaL",
    "user": {
      "login": "StEvUgnIn",
      "id": 7686916,
      "node_id": "MDQ6VXNlcjc2ODY5MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7686916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StEvUgnIn",
      "html_url": "https://github.com/StEvUgnIn",
      "followers_url": "https://api.github.com/users/StEvUgnIn/followers",
      "following_url": "https://api.github.com/users/StEvUgnIn/following{/other_user}",
      "gists_url": "https://api.github.com/users/StEvUgnIn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StEvUgnIn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StEvUgnIn/subscriptions",
      "organizations_url": "https://api.github.com/users/StEvUgnIn/orgs",
      "repos_url": "https://api.github.com/users/StEvUgnIn/repos",
      "events_url": "https://api.github.com/users/StEvUgnIn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StEvUgnIn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-13T21:07:38Z",
    "updated_at": "2022-03-13T21:07:38Z",
    "author_association": "NONE",
    "body": "It could be interesting to implement (dutch) auction mechanisms for Non Fungible Tokens (both ERC721 and ERC1155). ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1066182283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1079762515",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1079762515",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1079762515,
    "node_id": "IC_kwDOA9tCBs5AW95T",
    "user": {
      "login": "mw2000",
      "id": 11898068,
      "node_id": "MDQ6VXNlcjExODk4MDY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11898068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mw2000",
      "html_url": "https://github.com/mw2000",
      "followers_url": "https://api.github.com/users/mw2000/followers",
      "following_url": "https://api.github.com/users/mw2000/following{/other_user}",
      "gists_url": "https://api.github.com/users/mw2000/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mw2000/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mw2000/subscriptions",
      "organizations_url": "https://api.github.com/users/mw2000/orgs",
      "repos_url": "https://api.github.com/users/mw2000/repos",
      "events_url": "https://api.github.com/users/mw2000/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mw2000/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-26T19:46:03Z",
    "updated_at": "2022-03-26T19:46:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@frangio @Amxx do you think we should proceed with building a potential dutch auction mechanism? To answer @frangio's question, many NFT drops today are happening via Dutch Auction, and by having a standard mechanism to do so, a lot of devs would benefit since they wouldn't have to write code for it that is more susceptible to having issues.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1079762515/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1079913033",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1079913033",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1079913033,
    "node_id": "IC_kwDOA9tCBs5AXipJ",
    "user": {
      "login": "StEvUgnIn",
      "id": 7686916,
      "node_id": "MDQ6VXNlcjc2ODY5MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7686916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StEvUgnIn",
      "html_url": "https://github.com/StEvUgnIn",
      "followers_url": "https://api.github.com/users/StEvUgnIn/followers",
      "following_url": "https://api.github.com/users/StEvUgnIn/following{/other_user}",
      "gists_url": "https://api.github.com/users/StEvUgnIn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StEvUgnIn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StEvUgnIn/subscriptions",
      "organizations_url": "https://api.github.com/users/StEvUgnIn/orgs",
      "repos_url": "https://api.github.com/users/StEvUgnIn/repos",
      "events_url": "https://api.github.com/users/StEvUgnIn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StEvUgnIn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-27T11:45:28Z",
    "updated_at": "2022-03-27T11:45:28Z",
    "author_association": "NONE",
    "body": "LooksRare is the first NFT auction platform conducting Dutch Auction on chain on Ethereum:\r\nhttps://docs.looksrare.org/developers/contract-documentation/StrategyDutchAuction",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1079913033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092328460",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3202#issuecomment-1092328460",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3202",
    "id": 1092328460,
    "node_id": "IC_kwDOA9tCBs5BG5wM",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-08T00:36:54Z",
    "updated_at": "2022-04-08T00:36:54Z",
    "author_association": "MEMBER",
    "body": "So far I don't think we should implement a dutch auction. I think the problem of NFT drops is more about mechanism design rather than secure implementation. As far as I can tell, dutch auctions are not necessarily the best way to sell NFTs, and it is an active research area. [This](https://twitter.com/FrankieIsLost/status/1511011123683741698) is an example of a post from just a few days ago proposing a variation on the mechanism.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1092328460/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

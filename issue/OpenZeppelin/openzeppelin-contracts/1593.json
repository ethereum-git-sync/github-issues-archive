{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593",
  "id": 396430729,
  "node_id": "MDU6SXNzdWUzOTY0MzA3Mjk=",
  "number": 1593,
  "title": "Update ether.js helper (web3.toWei is not a function, BigNumber is not a constructor)",
  "user": {
    "login": "JohannesMayerConda",
    "id": 39550558,
    "node_id": "MDQ6VXNlcjM5NTUwNTU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/39550558?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JohannesMayerConda",
    "html_url": "https://github.com/JohannesMayerConda",
    "followers_url": "https://api.github.com/users/JohannesMayerConda/followers",
    "following_url": "https://api.github.com/users/JohannesMayerConda/following{/other_user}",
    "gists_url": "https://api.github.com/users/JohannesMayerConda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JohannesMayerConda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JohannesMayerConda/subscriptions",
    "organizations_url": "https://api.github.com/users/JohannesMayerConda/orgs",
    "repos_url": "https://api.github.com/users/JohannesMayerConda/repos",
    "events_url": "https://api.github.com/users/JohannesMayerConda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JohannesMayerConda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-01-07T10:28:50Z",
  "updated_at": "2019-01-18T19:00:12Z",
  "closed_at": "2019-01-18T18:57:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I'm currently upgrading to solidity v0.5 and have it compiling already but my tests don't run through because of a test helper I use from openzeppelin. Concretely the file /test/helpers/ether.js\r\n\r\n**💻 Environment**\r\nopenzeppelin-solidity (package.json): ^2.1.1\r\nweb3 (package.json): ^1.0.0-beta.37\r\ntruffle (package.json and global): v5.0.1 with solc-js v0.5.0\r\n\r\n**🔢 Code to reproduce bug**\r\nIn a test file (stripped down version that should do essentially the same, didn't try it tough)\r\nimport { ether } from 'openzeppelin-solidity/test/helpers/ether'\r\ncontract('TEST', (accounts) => {\r\n        it('will fail', async () => {\r\n                const cap = ether(\"30\") //fails\r\n        })\r\n}\r\n\r\n\r\nI can fix it changing the ether.js file to:\r\nfunction ether (n) {\r\n  return new web3.utils.BN(web3.utils.toWei(n, 'ether'));\r\n}\r\n\r\nmodule.exports = {\r\n  ether,\r\n};\r\n\r\nI could contribute this fix but I guess there might be a reason this is still in the old syntax and the team is aware of the \"problem\"... Or am I doing something wrong?\r\n\r\nPS: constants.js same problem\r\n\r\nPPS: Also noticed in time.js all web3.currentProvider.sendAsync should be just web3.currentProvider.send",
  "closed_by": {
    "login": "nventuro",
    "id": 2530770,
    "node_id": "MDQ6VXNlcjI1MzA3NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nventuro",
    "html_url": "https://github.com/nventuro",
    "followers_url": "https://api.github.com/users/nventuro/followers",
    "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
    "organizations_url": "https://api.github.com/users/nventuro/orgs",
    "repos_url": "https://api.github.com/users/nventuro/repos",
    "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nventuro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454165849",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-454165849",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 454165849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDE2NTg0OQ==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-14T21:21:10Z",
    "updated_at": "2019-01-14T21:21:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey there @JohannesMayerConda! During our own migration to Solidity 0.5.0, I actually started on these helpers: there are indeed many web3 1.0 and truffle 5 changes that break them.\r\n\r\nNow that they're fixed, I migrated them to a separate repository and created an npm package with them, so that they can be used by everyone without having to extract the code from OpenZeppelin's test suite: https://github.com/OpenZeppelin/openzeppelin-test-helpers.\r\n\r\nIt is still an early effort, and some improvement is due on the API, error messages, etc., but it does work, and will hopefully be useful to you!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454165849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454312123",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-454312123",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 454312123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDMxMjEyMw==",
    "user": {
      "login": "JohannesMayerConda",
      "id": 39550558,
      "node_id": "MDQ6VXNlcjM5NTUwNTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/39550558?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JohannesMayerConda",
      "html_url": "https://github.com/JohannesMayerConda",
      "followers_url": "https://api.github.com/users/JohannesMayerConda/followers",
      "following_url": "https://api.github.com/users/JohannesMayerConda/following{/other_user}",
      "gists_url": "https://api.github.com/users/JohannesMayerConda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JohannesMayerConda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JohannesMayerConda/subscriptions",
      "organizations_url": "https://api.github.com/users/JohannesMayerConda/orgs",
      "repos_url": "https://api.github.com/users/JohannesMayerConda/repos",
      "events_url": "https://api.github.com/users/JohannesMayerConda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JohannesMayerConda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-15T08:49:22Z",
    "updated_at": "2019-01-15T08:49:22Z",
    "author_association": "NONE",
    "body": "Haha, oh nose I needed this a few days ago... Meanwhile I copied and adapted the helpers myself. \r\n\r\nBut I will switch to the new helpers in the future! Anyway - thanks, good work! This helps a lot 👍 ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454312123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454764414",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-454764414",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 454764414,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDc2NDQxNA==",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T12:38:17Z",
    "updated_at": "2019-01-16T12:38:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "`openzeppelin-solidity 2.1.1` still contains old `constants.js`:\r\n```\r\nconst BigNumber = web3.BigNumber;\r\n\r\nmodule.exports = {\r\n  ZERO_ADDRESS: '0x0000000000000000000000000000000000000000',\r\n  MAX_UINT256: new BigNumber(2).pow(256).minus(1),\r\n  MAX_INT256: new BigNumber(2).pow(255).minus(1),\r\n  MIN_INT256: new BigNumber(2).pow(255).times(-1),\r\n};\r\n```\r\n\r\nTests in my project contains the following lines:\r\n```\r\nconst { shouldBehaveLikePublicRole } = require('openzeppelin-solidity/test/access/roles/PublicRole.behavior');\r\n\r\n...\r\n\r\nshouldBehaveLikePublicRole(manager, otherManager, otherAccounts, 'manager');\r\n```\r\n\r\nAnd internally it requires `constants.js`, so I need `2.1.2` with this fix ASAP :)",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454764414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454784357",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-454784357",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 454784357,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDc4NDM1Nw==",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T13:47:51Z",
    "updated_at": "2019-01-16T13:47:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nventuro are you planning to ship `2.1.2` from current `master`?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454784357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454827643",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-454827643",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 454827643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDgyNzY0Mw==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T15:47:19Z",
    "updated_at": "2019-01-16T15:47:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Normally I'd say that you shouldn't use our tests in your project, since we have no stability guarantees on those (in fact, I don't think we should be publishing them), though we _do_ have plans to make it so. However, `PublicRole.behavior` is a rather special case, a 2.1.2 may be due for that. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/454827643/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/455651135",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-455651135",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 455651135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTY1MTEzNQ==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-18T18:57:32Z",
    "updated_at": "2019-01-18T18:57:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@k06a I've just released a v2.1.2 package, in which only that behavior is published, using the new test helpers. Keep in mind this is an initiative we're only now starting out, so there may be some changes in future releases, but we'll try to keep them to a minimum.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/455651135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/455652017",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1593#issuecomment-455652017",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/1593",
    "id": 455652017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTY1MjAxNw==",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-18T19:00:12Z",
    "updated_at": "2019-01-18T19:00:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nventuro special thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/455652017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743",
  "id": 1392770786,
  "node_id": "I_kwDOA9tCBs5TA_7i",
  "number": 3743,
  "title": "Multiproof stops working starting with 9 leaves",
  "user": {
    "login": "tsudmi",
    "id": 6001614,
    "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tsudmi",
    "html_url": "https://github.com/tsudmi",
    "followers_url": "https://api.github.com/users/tsudmi/followers",
    "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
    "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
    "organizations_url": "https://api.github.com/users/tsudmi/orgs",
    "repos_url": "https://api.github.com/users/tsudmi/repos",
    "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tsudmi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 417782817,
      "node_id": "MDU6TGFiZWw0MTc3ODI4MTc=",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/bug",
      "name": "bug",
      "color": "b60205",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 20,
  "created_at": "2022-09-30T17:53:43Z",
  "updated_at": "2022-11-01T17:20:45Z",
  "closed_at": "2022-11-01T17:20:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The following test reverts\r\n```typescript\r\nit('multiproof', async () => {\r\n  const leaves = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'].map(keccak256).sort(Buffer.compare)\r\n  const merkleTree = new MerkleTree(leaves, keccak256, { sort: true })\r\n  const root = merkleTree.getRoot()\r\n  const proof = merkleTree.getMultiProof(leaves)\r\n  const proofFlags = merkleTree.getProofFlags(leaves, proof)\r\n  await merkleProof.multiProofVerifyCalldata(proof, proofFlags, root, leaves)\r\n})\r\n```\r\n\r\nVersions:\r\n- merkletreejs: `0.2.32`\r\n- keccak256: `1.0.6`\r\n- @openzeppelin/contracts: `4.7.3`",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264113148",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1264113148",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1264113148,
    "node_id": "IC_kwDOA9tCBs5LWNX8",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-30T22:53:26Z",
    "updated_at": "2022-09-30T22:54:00Z",
    "author_association": "MEMBER",
    "body": "I can't reproduce this. I set this up with the dependency versions that you said, but the test passes for me. Can you share a full repo where the test fails?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264113148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264339364",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1264339364",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1264339364,
    "node_id": "IC_kwDOA9tCBs5LXEmk",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-01T11:48:08Z",
    "updated_at": "2022-10-01T11:48:08Z",
    "author_association": "NONE",
    "body": "Hi @frangio, thanks for the reply!\r\n\r\nI've created a repo where the test fails for me: https://github.com/tsudmi/multiproof\r\n\r\nMaybe some additional context about my env would be useful:\r\nOS: Mac OS Monterey 12.4 (M1)\r\nNode: v14.20.0",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264339364/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265120903",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265120903",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265120903,
    "node_id": "IC_kwDOA9tCBs5LaDaH",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T08:42:19Z",
    "updated_at": "2022-10-03T08:42:19Z",
    "author_association": "COLLABORATOR",
    "body": "I managed to replicate it. It doesn't affect all size >9.\r\n\r\nWhat I've noticed:\r\n- for some tree shapes, the test always pass.\r\n- for some tree shapes, the result depend on the leafs selected",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265120903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265128806",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265128806",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265128806,
    "node_id": "IC_kwDOA9tCBs5LaFVm",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T08:49:56Z",
    "updated_at": "2022-10-03T08:49:56Z",
    "author_association": "COLLABORATOR",
    "body": "- Given a tree shape for which there are issues, the more leaves are in the proof, the more likely the test fail.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265128806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265142185",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265142185",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265142185,
    "node_id": "IC_kwDOA9tCBs5LaImp",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T09:02:02Z",
    "updated_at": "2022-10-03T09:02:02Z",
    "author_association": "COLLABORATOR",
    "body": "To reproduce:\r\n\r\n```\r\n  it('test', async function () {\r\n    const leaves = 'abcdefghi'.split('').map(keccak256).sort(Buffer.compare);\r\n    const merkleTree = new MerkleTree(leaves, keccak256, { sort: true });\r\n\r\n    // This reverts with \"MerkleProof: invalid multiproof\"\r\n    {\r\n      const proofLeaves = leaves.slice(-1);\r\n      const root = merkleTree.getHexRoot();\r\n      const proof = merkleTree.getMultiProof(proofLeaves);\r\n      const proofFlags = merkleTree.getProofFlags(proofLeaves, proof);\r\n      expect(await this.merkleProof.multiProofVerifyCalldata(proof, proofFlags, root, proofLeaves)).to.be.equal(true)\r\n    }\r\n    // This returns false, but doesn't revert\r\n    {\r\n      const proofLeaves = leaves;\r\n      const root = merkleTree.getHexRoot();\r\n      const proof = merkleTree.getMultiProof(proofLeaves);\r\n      const proofFlags = merkleTree.getProofFlags(proofLeaves, proof);\r\n      expect(await this.merkleProof.multiProofVerifyCalldata(proof, proofFlags, root, proofLeaves)).to.be.equal(true)\r\n    }\r\n  });\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265142185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265158344",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265158344",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265158344,
    "node_id": "IC_kwDOA9tCBs5LaMjI",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T09:15:12Z",
    "updated_at": "2022-10-03T09:18:01Z",
    "author_association": "COLLABORATOR",
    "body": "With 9 leaves, The tree looks like this:\r\n\r\n```mermaid\r\ngraph TD;\r\n    subgraph leafs\r\n    L1;L2;L3;L4;L5;L6;L7;L8;L9;\r\n    end\r\n    Root-->N1; \r\n    N1-->N2; N1-->N3;\r\n    N2-->N4; N2-->N5;\r\n    N3-->N6; N3-->N7;\r\n    N4-->L1;\r\n    N4-->L2;\r\n    N5-->L3;\r\n    N5-->L4;\r\n    N6-->L5;\r\n    N6-->L6;\r\n    N7-->L7;\r\n    N7-->L8;\r\n    Root-->L9;\r\n```\r\n\r\nProving L9 is part of the tree, the code expects:\r\n- the leaf `L9`\r\n- the internal node `N1` (that should be in the proof array)\r\n- a flag telling it that the values should be hashed together, and not passed trough the branch merging algorithm. (in the proofFlags array)\r\n\r\nHowever, when running `merkleTree.getProofFlags(proofLeaves, proof)`, the array is empty. This causes the sanity check \r\n```\r\nrequire(leavesLen + proof.length - 1 == totalHashes, \"MerkleProof: invalid multiproof\");\r\n```\r\nto fail.\r\n\r\nWhile this is not exactly @tsudmi 's issue, I believe they are related.\r\n\r\n\r\nThat is using `merkletreejs@0.2.32`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265158344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265197673",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265197673",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265197673,
    "node_id": "IC_kwDOA9tCBs5LaWJp",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T09:49:21Z",
    "updated_at": "2022-10-03T12:42:04Z",
    "author_association": "COLLABORATOR",
    "body": "Upon further investigation, it turns out @tsudmi's issue is mostly unrelated.\r\n\r\n--- \r\n\r\nTLDR: the shape of the trees produced by the library are (sometimes) not compatible with the verification algorithm.\r\n\r\n---\r\n\r\nTaking our example above, if the leaves are selected, we get no internal node as part of the proof. What the algorithm then does is\r\n```\r\nhash(L1,L2) → temp1 (N4)\r\nhash(L3,L4) → temp2 (N5)\r\nhash(L5,L6) → temp3 (N6)\r\nhash(L7,L8) → temp4 (N7)\r\n... so far so good ...\r\nhash(L9,temp1) → temp5\r\n... this is bad\r\n```\r\nthis is because of the rule that is \"unless the flag tells us to read from the proof nodes, we process leaves then internally reconstructed nodes, in order\"\r\n\r\nAFAIK, it should possible to organize the tree so that it is possible to produce an arbitrary multiproof but it is not that simple, and the library doesn't do it.\r\n\r\n```mermaid\r\ngraph TD;\r\n    subgraph leafs\r\n    L1;L2;L3;L4;L5;L6;L7;L8;L9;\r\n    end\r\n    Root-->N7; Root-->N6; \r\n    N7-->N5; N7-->N4;\r\n    N6-->N2; N6-->N3;\r\n    N5-->N1;\r\n    \r\n    N4-->L7;\r\n    N4-->L8;\r\n    N2-->L3;\r\n    N2-->L4;\r\n    N3-->L5;\r\n    N3-->L6;\r\n    N5-->L9;\r\n    N1-->L1;\r\n    N1-->L2;\r\n```\r\n\r\nThe main issue, IMO, is that the order of leaves is really important. I'm worried that there might not exist a tree space such that there is an easy to produce the leaf ordering for which there always exist a proof.\r\n\r\nSaid differently:\r\n- given a set of leaves `L`, (offchain)\r\n- we want to organize them in a tree `Tree`, (offchain)\r\n- and a leaves ordering algorithm `Sort`, (onchain)\r\n- such that for any subset of the leaves `L'`, (onchain)\r\n- there exist a proof `P` that passes `Tree.verify(Sort(L'), P)` (produced offchain, verified onchain)",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265197673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265332194",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265332194",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265332194,
    "node_id": "IC_kwDOA9tCBs5La2_i",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T11:55:41Z",
    "updated_at": "2022-10-03T11:55:41Z",
    "author_association": "NONE",
    "body": "Hi @Amxx, thanks for diving into this. Seems like it really depends on the tree shape here, as I was also unable to verify with the last element and specific subsets. Does it mean that the fix should be in the `merkletreejs` library, or is it the verifying contract that should be modified?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265332194/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265348516",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265348516",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265348516,
    "node_id": "IC_kwDOA9tCBs5La6-k",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T12:10:19Z",
    "updated_at": "2022-10-03T12:10:19Z",
    "author_association": "COLLABORATOR",
    "body": "Modifying merkletreejs could cause many issues as would would be a breaking change with significant impact. I don't think that should happen. Also, changing the tree generation process would affect \"single\" proofs.\r\n\r\nIMO, the verification algorithm needs to be fixed. \r\n\r\nThe one we have is a cleaned and slightly improved version of another code ... but the original code was also susceptible to this issue, and we missed that completely. That is a big miss on our part. Rewriting the multiproof from scratch might be needed.\r\n\r\nWe'll have to discuss to see how we address this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265348516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265383625",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1265383625",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1265383625,
    "node_id": "IC_kwDOA9tCBs5LbDjJ",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T12:41:47Z",
    "updated_at": "2022-10-03T12:43:57Z",
    "author_association": "COLLABORATOR",
    "body": "Note: one of the assumption the current multiproof verification algorithm makes, which is not verified is that:\r\n\r\n- For a tree of depth N\r\n- Leaves are either at depth N or N-1.\r\n\r\nThe tree of width 9 does not verify this assumption.\r\n\r\nThis is a weak version of the assumption, as shown above there are more assumption about the order in which leaves are processed during reconstruction.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1265383625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1266341733",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1266341733",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1266341733,
    "node_id": "IC_kwDOA9tCBs5Letdl",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T03:18:08Z",
    "updated_at": "2022-10-04T03:18:08Z",
    "author_association": "MEMBER",
    "body": "We have made progress with this issue and have a good idea for how to move forward. Will share more details soon.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1266341733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1266519726",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1266519726",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1266519726,
    "node_id": "IC_kwDOA9tCBs5LfY6u",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T07:26:28Z",
    "updated_at": "2022-10-04T07:26:28Z",
    "author_association": "NONE",
    "body": "Thanks, @frangio @Amxx , looking forward to the fix. Let me know if there is anything I can help with.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1266519726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1267903435",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1267903435",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1267903435,
    "node_id": "IC_kwDOA9tCBs5LkqvL",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-05T03:57:35Z",
    "updated_at": "2022-10-06T18:50:31Z",
    "author_association": "MEMBER",
    "body": "The algorithm for multiproofs doesn't allow the construction of multiproofs for trees with particularly unbalanced shapes. The merkletree.js library can currently easily produce such trees, as in the example above. Unfortunately this is not something we knew of before.\r\n\r\n**It's important to note that it is always possible to produce a multiproof for a single leaf.**\r\n\r\nThe problem for multiple leaves is solved by better balancing the merkle tree. The tree should be a complete (not perfect) full binary tree (definitions [in Wikipedia](https://en.wikipedia.org/wiki/Binary_tree)). This kind of tree exists for any needed total number of leaves.\r\n\r\nAdditionally, the array of leaves that will be proven with a multiproof needs to be sorted in a particular way to be able to produce a multiproof. The ordering should be the reverse of the \"general indices\" defined in [this document](https://github.com/ethereum/consensus-specs/blob/6b9e65fab6c2cf1f8973b3dee29173ed6cb6130b/ssz/merkle-proofs.md#generalized-merkle-tree-index). The proof array will be sorted in the same way.\r\n\r\nThe plan I propose is:\r\n1. Document that in order to use multiproofs there are requirements on the tree shape and the leaves array. (Note: This kind of requirement is not entirely new, because even for single proofs you want the tree to be well balanced as well.)\r\n2. Add a flag in merkletree.js to build trees of this shape, add a warning if a multiproof is requested for a tree that was built without this flag, and verify that leaves are properly ordered when a multiproof is requested.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1267903435/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 3,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1271564849",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1271564849",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1271564849,
    "node_id": "IC_kwDOA9tCBs5Lyoox",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-07T13:03:05Z",
    "updated_at": "2022-10-07T13:03:05Z",
    "author_association": "NONE",
    "body": "@frangio Would it make sense to add a test case for that?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1271564849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1272036636",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1272036636",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1272036636,
    "node_id": "IC_kwDOA9tCBs5L0b0c",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-07T19:53:27Z",
    "updated_at": "2022-10-07T19:53:27Z",
    "author_association": "MEMBER",
    "body": "Yes we will want to add a test case. At the moment the next step we're working on is to modify the merkletreejs library to construct the tree as needed.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1272036636/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293153425",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1293153425",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1293153425,
    "node_id": "IC_kwDOA9tCBs5NE_SR",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-27T08:11:03Z",
    "updated_at": "2022-10-27T08:11:03Z",
    "author_association": "NONE",
    "body": "Hi @frangio, I've tested the `complete` parameter added in https://github.com/merkletreejs/merkletreejs/pull/68. It looks like the complete tree does not pass the proof validity here: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/MerkleProof.sol#L183",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293153425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293446115",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1293446115",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1293446115,
    "node_id": "IC_kwDOA9tCBs5NGGvj",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-27T12:22:53Z",
    "updated_at": "2022-10-27T12:22:53Z",
    "author_association": "COLLABORATOR",
    "body": "Yes @tsudmi that is something we are aware of. Just having a complete tree is not enough, there additional constrain that consider when constructing the tree. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293446115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293864383",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1293864383",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1293864383,
    "node_id": "IC_kwDOA9tCBs5NHs2_",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-27T17:44:47Z",
    "updated_at": "2022-10-27T17:44:47Z",
    "author_association": "MEMBER",
    "body": "The merkletreejs library has a large scope and we were not able or comfortable enough with all aspects of it to fix multiproof generation in all situations... We understand that the `complete` parameter is not enough to make it generate valid multiproofs, but we know that it is at the very least required to give the tree that shape.\r\n\r\nTo fully fix this issue with multiproofs, we've decided to release our own JavaScript merkle tree library, with a smaller scope. It will be our recommended companion JavaScript library moving forward and essentially a successor to merkletreejs. It's already being developed and we want to release it as soon as possible but we need to make sure it is well tested first. @tsudmi If you're interested we can give you early access.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1293864383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1295018038",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1295018038",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1295018038,
    "node_id": "IC_kwDOA9tCBs5NMGg2",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-28T13:43:36Z",
    "updated_at": "2022-10-28T13:43:36Z",
    "author_association": "NONE",
    "body": "Hi, @frangio it would be great to get early access. I have some tests that I could run with it.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1295018038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1298860914",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3743#issuecomment-1298860914",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3743",
    "id": 1298860914,
    "node_id": "IC_kwDOA9tCBs5Nawty",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-01T17:20:45Z",
    "updated_at": "2022-11-01T17:20:45Z",
    "author_association": "MEMBER",
    "body": "The library is released now. Multiproofs generated by this library can be successfully validated by the Solidity code.\r\n\r\nhttps://github.com/OpenZeppelin/merkle-tree",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1298860914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

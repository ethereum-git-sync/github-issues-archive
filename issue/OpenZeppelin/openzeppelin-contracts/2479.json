{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479",
  "id": 791459274,
  "node_id": "MDU6SXNzdWU3OTE0NTkyNzQ=",
  "number": 2479,
  "title": "Extending `balanceOf` function for the ERC20 smart contract.",
  "user": {
    "login": "ChinmayPatel",
    "id": 684063,
    "node_id": "MDQ6VXNlcjY4NDA2Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/684063?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChinmayPatel",
    "html_url": "https://github.com/ChinmayPatel",
    "followers_url": "https://api.github.com/users/ChinmayPatel/followers",
    "following_url": "https://api.github.com/users/ChinmayPatel/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChinmayPatel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChinmayPatel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChinmayPatel/subscriptions",
    "organizations_url": "https://api.github.com/users/ChinmayPatel/orgs",
    "repos_url": "https://api.github.com/users/ChinmayPatel/repos",
    "events_url": "https://api.github.com/users/ChinmayPatel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChinmayPatel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 503650860,
      "node_id": "MDU6TGFiZWw1MDM2NTA4NjA=",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/feature",
      "name": "feature",
      "color": "b9db64",
      "default": false,
      "description": "New contracts, functions, or helpers."
    },
    {
      "id": 1000207718,
      "node_id": "MDU6TGFiZWwxMDAwMjA3NzE4",
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/labels/contracts",
      "name": "contracts",
      "color": "1d76db",
      "default": false,
      "description": "Smart contract code."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-01-21T20:11:45Z",
  "updated_at": "2021-01-22T17:38:29Z",
  "closed_at": "2021-01-22T02:48:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**🧐 Motivation**\r\nExtending `balanceOf()` function for the purposes of manual calculation of balance.\r\n\r\n**📝 Details**\r\nIt's not possible to `override` the [ERC20's `balanceOf` function](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol) because it's not marked as virtual. How about marking it as both `overrider` and `virtual` so that we can extend the `balanceOf` functionality in the child contract. \r\n\r\nI'm currently using the \r\n* solidity version >=0.6.0 \r\n* \"@openzeppelin/contracts\": \"^3.3.0\"\r\n\r\nThoughts? ",
  "closed_by": {
    "login": "abcoathup",
    "id": 28278242,
    "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abcoathup",
    "html_url": "https://github.com/abcoathup",
    "followers_url": "https://api.github.com/users/abcoathup/followers",
    "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
    "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
    "organizations_url": "https://api.github.com/users/abcoathup/orgs",
    "repos_url": "https://api.github.com/users/abcoathup/repos",
    "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abcoathup/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/764919360",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479#issuecomment-764919360",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
    "id": 764919360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NDkxOTM2MA==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-21T20:33:03Z",
    "updated_at": "2021-01-21T20:33:03Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @ChinmayPatel, and thanks for raising this issue. I do believe that this was raised before by someone else in the community.\r\n\r\nWe are aware that having non-virtual function in our codebases limits the hability for developper like you to be creative with override. This is something that we are currently working on addressing.\r\n\r\nWe feel like the `balanceOf` function is a very sensitive one, and that overriding it might cause serious issues in the hability of users and Defi smart contracts to interract with your token. In particular, we are not sure how `transfer` should behave in such a case.\r\n\r\nCould you tell use more about your usecase ? Are you doing balance rebasing ? How are you planning to override it and do you plan to override other functions as well ? We are really curious about our users usage of our contracts.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/764919360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/764980816",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479#issuecomment-764980816",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
    "id": 764980816,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NDk4MDgxNg==",
    "user": {
      "login": "ChinmayPatel",
      "id": 684063,
      "node_id": "MDQ6VXNlcjY4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/684063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChinmayPatel",
      "html_url": "https://github.com/ChinmayPatel",
      "followers_url": "https://api.github.com/users/ChinmayPatel/followers",
      "following_url": "https://api.github.com/users/ChinmayPatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChinmayPatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChinmayPatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChinmayPatel/subscriptions",
      "organizations_url": "https://api.github.com/users/ChinmayPatel/orgs",
      "repos_url": "https://api.github.com/users/ChinmayPatel/repos",
      "events_url": "https://api.github.com/users/ChinmayPatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChinmayPatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-21T22:25:22Z",
    "updated_at": "2021-01-21T22:25:22Z",
    "author_association": "NONE",
    "body": "Thanks for the quick response. I completely agree with you that `balanceOf` is a very sensitive function. For now, I may simply fork the code and patch my updates, but this might be a handy feature for others, too.\r\n\r\nFor the use case, yes, you are right. We are trying to create a rebasing product. If you have any good reference implementations, I'm happy to look into them separately.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/764980816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765076989",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479#issuecomment-765076989",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
    "id": 765076989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NTA3Njk4OQ==",
    "user": {
      "login": "abcoathup",
      "id": 28278242,
      "node_id": "MDQ6VXNlcjI4Mjc4MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28278242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcoathup",
      "html_url": "https://github.com/abcoathup",
      "followers_url": "https://api.github.com/users/abcoathup/followers",
      "following_url": "https://api.github.com/users/abcoathup/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcoathup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcoathup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcoathup/subscriptions",
      "organizations_url": "https://api.github.com/users/abcoathup/orgs",
      "repos_url": "https://api.github.com/users/abcoathup/repos",
      "events_url": "https://api.github.com/users/abcoathup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcoathup/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-22T02:48:28Z",
    "updated_at": "2021-01-22T02:48:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @ChinmayPatel,\r\n\r\nThanks for the feedback and sharing your use case.  I am closing this issue as making `balanceOf` `virtual` is covered in the below issue.  \r\n\r\nDuplicate of https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2154",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765076989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765409725",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479#issuecomment-765409725",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
    "id": 765409725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NTQwOTcyNQ==",
    "user": {
      "login": "ChinmayPatel",
      "id": 684063,
      "node_id": "MDQ6VXNlcjY4NDA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/684063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChinmayPatel",
      "html_url": "https://github.com/ChinmayPatel",
      "followers_url": "https://api.github.com/users/ChinmayPatel/followers",
      "following_url": "https://api.github.com/users/ChinmayPatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChinmayPatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChinmayPatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChinmayPatel/subscriptions",
      "organizations_url": "https://api.github.com/users/ChinmayPatel/orgs",
      "repos_url": "https://api.github.com/users/ChinmayPatel/repos",
      "events_url": "https://api.github.com/users/ChinmayPatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChinmayPatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-22T13:49:26Z",
    "updated_at": "2021-01-22T13:49:26Z",
    "author_association": "NONE",
    "body": "Thanks @abcoathup . I'll follow #2154.\r\n\r\nIf you have any implementation reference on rebase tokens, can you please share a link or two? ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765409725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765575645",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2479#issuecomment-765575645",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2479",
    "id": 765575645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NTU3NTY0NQ==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-22T17:38:29Z",
    "updated_at": "2021-01-22T17:38:29Z",
    "author_association": "MEMBER",
    "body": "Here's an example, though we haven't reviewed it: [Ampleforth uFragments](https://github.com/ampleforth/uFragments/blob/master/contracts/UFragments.sol).",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/765575645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

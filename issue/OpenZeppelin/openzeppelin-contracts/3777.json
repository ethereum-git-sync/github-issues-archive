{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3777",
  "id": 1421275392,
  "node_id": "I_kwDOA9tCBs5UtvEA",
  "number": 3777,
  "title": "_quorumNumerator may not be initialized in GovernorVotesQuorumFraction.quorumNumerator() and quorumNumerator(uint256 blockNumber)",
  "user": {
    "login": "kristovatlas",
    "id": 7227529,
    "node_id": "MDQ6VXNlcjcyMjc1Mjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7227529?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kristovatlas",
    "html_url": "https://github.com/kristovatlas",
    "followers_url": "https://api.github.com/users/kristovatlas/followers",
    "following_url": "https://api.github.com/users/kristovatlas/following{/other_user}",
    "gists_url": "https://api.github.com/users/kristovatlas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kristovatlas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kristovatlas/subscriptions",
    "organizations_url": "https://api.github.com/users/kristovatlas/orgs",
    "repos_url": "https://api.github.com/users/kristovatlas/repos",
    "events_url": "https://api.github.com/users/kristovatlas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kristovatlas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-10-24T18:53:54Z",
  "updated_at": "2023-03-07T18:22:48Z",
  "closed_at": "2023-03-07T18:22:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Nitpick: `_quorumNumerator` is not initialized in GovernorVotesQuorumFraction and if not set first will default to Solidity's default integer value (currently zero). Consider setting the value explicitly to `0` in order to make the value properly documented. (Note: the variable has been marked as \"deprecated\" in a code comment, so alternatively just delete it and referencing functions if deprecated.)\r\n\r\n**ðŸ’» Environment**\r\n\r\nCurrent master branch\r\n\r\n**ðŸ”¢ Code to reproduce bug**\r\n\r\nN/A\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1290946687",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3777#issuecomment-1290946687",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3777",
    "id": 1290946687,
    "node_id": "IC_kwDOA9tCBs5M8kh_",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-25T18:00:29Z",
    "updated_at": "2022-10-25T18:00:29Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @kristovatlas \r\n\r\n> the variable has been marked as \"deprecated\" in a code comment, so alternatively just delete it and referencing functions if deprecated\r\n\r\nThat is something we can't do. \r\n\r\nYou noticed that we deprecated it in favor of `Checkpoints.History private _quorumNumeratorHistory;` which means we no longer write to it (we put a checkpoint in the history instead). We only read it if the history length is 0, which will never happen* has the constructor pushed a checkpoint.\r\n\r\nWhy do we keep it declared, and why do we have a `_quorumNumeratorHistory._checkpoints.length == 0` check ???\r\nFor the upgradeable version of the contract !!!\r\n\r\nThe upgradeable contracts are automatically generated from this non-upgradeable code. For the upgradeable version to remain compatible, we need to keep the storage layout. This is why we don't remove the slot declaration. \r\nAlso, if an upgradeable contract transitions from the previous implementation to this, the constructor is never run, and no initial checkpoint is inserted into the history. That is why we have the fallback, to read the old slot if the new structure is not initialized.\r\n\r\nI hope this clarify the reason why we keep the variable, but don't write to it, and don't bother setting it.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1290946687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

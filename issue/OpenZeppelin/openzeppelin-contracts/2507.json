{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507",
  "id": 801425243,
  "node_id": "MDU6SXNzdWU4MDE0MjUyNDM=",
  "number": 2507,
  "title": "private vs internal and public vs external",
  "user": {
    "login": "sorleone",
    "id": 30836325,
    "node_id": "MDQ6VXNlcjMwODM2MzI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/30836325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sorleone",
    "html_url": "https://github.com/sorleone",
    "followers_url": "https://api.github.com/users/sorleone/followers",
    "following_url": "https://api.github.com/users/sorleone/following{/other_user}",
    "gists_url": "https://api.github.com/users/sorleone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sorleone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sorleone/subscriptions",
    "organizations_url": "https://api.github.com/users/sorleone/orgs",
    "repos_url": "https://api.github.com/users/sorleone/repos",
    "events_url": "https://api.github.com/users/sorleone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sorleone/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-02-04T16:09:11Z",
  "updated_at": "2021-08-26T23:03:53Z",
  "closed_at": "2021-07-22T18:17:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "What's the reasoning behind the fact that you always use `private` properties instead of `internal`? By using `internal`, child contracts would be able to use the `internal` variables directly which would offer better control and it would also allow you to turn many `public` functions into `external` ones. This two things combined could offer a bit of a performance boost, due to a lesser number of function calls and to the external keyword.",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/773533797",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507#issuecomment-773533797",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
    "id": 773533797,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzUzMzc5Nw==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T18:59:53Z",
    "updated_at": "2021-02-04T18:59:53Z",
    "author_association": "COLLABORATOR",
    "body": "Having the \"internal\" variable `private` and not `internal` does prevent child contract from accessing them, which might be bothering in some cases, but also prevents users from writting to them by mistake. It is a security feature, that I understand you might not agree with.\r\n\r\nAs you may (or may not) have noticed, we made MANY internal function virtual, including the view ones. We believe this should help people overriding some mechanism and customize the contracts to your needs. Again, this might not be enough to you. \r\n\r\nI'd love to have @frangio view on that, and I'm sure he will love to know more about your usecase/",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/773533797/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/773538337",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507#issuecomment-773538337",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
    "id": 773538337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzUzODMzNw==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T19:07:41Z",
    "updated_at": "2021-02-04T19:07:41Z",
    "author_association": "MEMBER",
    "body": "Thanks for your suggestion @sorleone.\r\n\r\nState variables in OpenZeppelin Contracts are `private` because we want to control the way they are updated. For example, the ERC20 balances mapping should never be updated without also emitting a `Transfer` event. By keeping the mapping private and only exposing internal `_mint`, `_transfer`, and `_burn` functions we can guarantee that the event is properly emitted when the mapping is updated. There are also scenarios where we need to keep certain invariants between the state variables, the example that comes to mind is the many variables in `ERC20Snapshot`, which need to be used carefully in order to keep making sense.\r\n\r\nIt's true that this results in child contracts having to use internal functions to read variables, which might be slightly more expensive. On this note what I can say is that this extra cost is unlikely to be significant next to the actual cost of reading a variable from storage (which will soon be even more expensive). Additionally, I know the Solidity team is working on inlining optimizations that may erase these function calls from the final contract bytecode.\r\n\r\nRegarding `public` vs. `external` I would love to see some examples of functions that would be improved by using `external`. It's been a while since I've compared the cost of the two kinds of functions... From what I recall the main difference used to be whether strings or arrays were copied from calldata to memory, but this is no longer true because `public` functions can now accept `calldata` arrays as arguments.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/773538337/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/885132037",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507#issuecomment-885132037",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
    "id": 885132037,
    "node_id": "IC_kwDOA9tCBs40wgsF",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-22T18:17:18Z",
    "updated_at": "2021-07-22T18:17:18Z",
    "author_association": "MEMBER",
    "body": "Closing as stale discussion with no actionable item.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/885132037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/903318807",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507#issuecomment-903318807",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
    "id": 903318807,
    "node_id": "IC_kwDOA9tCBs41140X",
    "user": {
      "login": "5hanth",
      "id": 4287700,
      "node_id": "MDQ6VXNlcjQyODc3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4287700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/5hanth",
      "html_url": "https://github.com/5hanth",
      "followers_url": "https://api.github.com/users/5hanth/followers",
      "following_url": "https://api.github.com/users/5hanth/following{/other_user}",
      "gists_url": "https://api.github.com/users/5hanth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/5hanth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/5hanth/subscriptions",
      "organizations_url": "https://api.github.com/users/5hanth/orgs",
      "repos_url": "https://api.github.com/users/5hanth/repos",
      "events_url": "https://api.github.com/users/5hanth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/5hanth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-22T19:28:53Z",
    "updated_at": "2021-08-23T04:39:09Z",
    "author_association": "NONE",
    "body": "> this is no longer true because `public` functions can now accept `calldata` arrays as arguments.\r\n\r\n@frangio is this the reason for still having all OZ [ERC20](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol) contracts with functions such as `transfer()` `transferFrom()` `approve()` `increaseAllowance()` with `public` visibility instead `external` ? curious if its a default preference by solc now to use `calldata` on cases where the function is not modifying the variable present in the function argument so that changing `public` to `external` is no longer needed for sake of saving gas. \r\n\r\nI see there was another concern why OZ might have not upgraded its contracts replacing `public` with `external`, was it because only from `v.0.5.1` [compiler allows to override](https://github.com/ethereum/solidity/releases/tag/v0.5.1) `public` / `external` in derived contracts and to maintain backward compatibility so this is kept that way? ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/903318807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/906799419",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2507#issuecomment-906799419",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2507",
    "id": 906799419,
    "node_id": "IC_kwDOA9tCBs42DKk7",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-26T23:03:53Z",
    "updated_at": "2021-08-26T23:03:53Z",
    "author_association": "MEMBER",
    "body": "We need `public` visibility otherwise the function cannot be extended calling `super.transfer()`.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/906799419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

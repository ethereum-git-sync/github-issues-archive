{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/668",
  "id": 287856323,
  "node_id": "MDU6SXNzdWUyODc4NTYzMjM=",
  "number": 668,
  "title": "can't catch the error \"Error: VM Exception while processing transaction: revert\"",
  "user": {
    "login": "leochan007",
    "id": 1071537,
    "node_id": "MDQ6VXNlcjEwNzE1Mzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1071537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leochan007",
    "html_url": "https://github.com/leochan007",
    "followers_url": "https://api.github.com/users/leochan007/followers",
    "following_url": "https://api.github.com/users/leochan007/following{/other_user}",
    "gists_url": "https://api.github.com/users/leochan007/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leochan007/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leochan007/subscriptions",
    "organizations_url": "https://api.github.com/users/leochan007/orgs",
    "repos_url": "https://api.github.com/users/leochan007/repos",
    "events_url": "https://api.github.com/users/leochan007/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leochan007/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-01-11T17:08:31Z",
  "updated_at": "2018-01-16T14:31:30Z",
  "closed_at": "2018-01-16T14:31:30Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## The Problem\r\n\r\nthis error can't be caught by expectThrow  if execute \"web3.eth.sendTransaction\" (not contract'call or transaction)\r\n\r\ne.g.\r\nexpectThrow(web3.eth.sendTransaction({gas: gas_amt, from: accounts[1], to: AAA.address, \r\n      value: web3.toWei(\"1\", \"Ether\")}, \"\"))\r\n",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357520472",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/668#issuecomment-357520472",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668",
    "id": 357520472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzUyMDQ3Mg==",
    "user": {
      "login": "Stradivario",
      "id": 19847933,
      "node_id": "MDQ6VXNlcjE5ODQ3OTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19847933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stradivario",
      "html_url": "https://github.com/Stradivario",
      "followers_url": "https://api.github.com/users/Stradivario/followers",
      "following_url": "https://api.github.com/users/Stradivario/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stradivario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stradivario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stradivario/subscriptions",
      "organizations_url": "https://api.github.com/users/Stradivario/orgs",
      "repos_url": "https://api.github.com/users/Stradivario/repos",
      "events_url": "https://api.github.com/users/Stradivario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stradivario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-14T15:45:05Z",
    "updated_at": "2018-01-14T15:45:05Z",
    "author_association": "NONE",
    "body": "Having the same issue as you described....\r\n\r\n![screenshot from 2018-01-14 16-09-33](https://user-images.githubusercontent.com/19847933/34917700-a0b02d88-f952-11e7-997a-fd48b620b4b9.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357520472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357530366",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/668#issuecomment-357530366",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668",
    "id": 357530366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzUzMDM2Ng==",
    "user": {
      "login": "leochan007",
      "id": 1071537,
      "node_id": "MDQ6VXNlcjEwNzE1Mzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1071537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leochan007",
      "html_url": "https://github.com/leochan007",
      "followers_url": "https://api.github.com/users/leochan007/followers",
      "following_url": "https://api.github.com/users/leochan007/following{/other_user}",
      "gists_url": "https://api.github.com/users/leochan007/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leochan007/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leochan007/subscriptions",
      "organizations_url": "https://api.github.com/users/leochan007/orgs",
      "repos_url": "https://api.github.com/users/leochan007/repos",
      "events_url": "https://api.github.com/users/leochan007/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leochan007/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-14T18:13:40Z",
    "updated_at": "2018-01-14T18:13:40Z",
    "author_association": "NONE",
    "body": "@Stradivario yes. if the vm exception is from Contract's function call, it could be caught via expectThrow. and i don't know why.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357530366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357546237",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/668#issuecomment-357546237",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668",
    "id": 357546237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzU0NjIzNw==",
    "user": {
      "login": "Stradivario",
      "id": 19847933,
      "node_id": "MDQ6VXNlcjE5ODQ3OTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19847933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stradivario",
      "html_url": "https://github.com/Stradivario",
      "followers_url": "https://api.github.com/users/Stradivario/followers",
      "following_url": "https://api.github.com/users/Stradivario/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stradivario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stradivario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stradivario/subscriptions",
      "organizations_url": "https://api.github.com/users/Stradivario/orgs",
      "repos_url": "https://api.github.com/users/Stradivario/repos",
      "events_url": "https://api.github.com/users/Stradivario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stradivario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-14T22:02:03Z",
    "updated_at": "2018-01-14T22:02:03Z",
    "author_association": "NONE",
    "body": "Take a look here i create issue related with this bug https://github.com/trufflesuite/truffle/issues/748",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357546237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357977530",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/668#issuecomment-357977530",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/668",
    "id": 357977530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzk3NzUzMA==",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-16T14:31:30Z",
    "updated_at": "2018-01-16T14:31:30Z",
    "author_association": "MEMBER",
    "body": "Hello @Stradivario. The argument to [`expectThrow`](https://github.com/OpenZeppelin/zeppelin-solidity/blob/v1.5.0/test/helpers/expectThrow.js) should be a `Promise` as returned by truffle-contract function calls. The reason `expectThrow` is not working here is that [`web3.eth.sendTransaction`](https://github.com/ethereum/wiki/wiki/JavaScript-API#web3ethsendtransaction) returns a string containing the tx hash.\r\n\r\nIn order to use `expectThrow` here, you should probably do the following, as seen [in the Truffle documentation](http://truffleframework.com/docs/getting_started/contracts#sending-ether-to-a-contract).\r\n```\r\nexpectThrow(AAA.send(web3.toWei(1, \"ether\"), { gas: gas_amt, from: accounts[1] }))\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/357977530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

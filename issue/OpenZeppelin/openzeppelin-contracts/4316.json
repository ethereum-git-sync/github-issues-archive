{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4316",
  "id": 1742084600,
  "node_id": "I_kwDOA9tCBs5n1hn4",
  "number": 4316,
  "title": "Add `state` getter in TimelockController using `OperationState` enum",
  "user": {
    "login": "ernestognw",
    "id": 33379285,
    "node_id": "MDQ6VXNlcjMzMzc5Mjg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/33379285?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ernestognw",
    "html_url": "https://github.com/ernestognw",
    "followers_url": "https://api.github.com/users/ernestognw/followers",
    "following_url": "https://api.github.com/users/ernestognw/following{/other_user}",
    "gists_url": "https://api.github.com/users/ernestognw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ernestognw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ernestognw/subscriptions",
    "organizations_url": "https://api.github.com/users/ernestognw/orgs",
    "repos_url": "https://api.github.com/users/ernestognw/repos",
    "events_url": "https://api.github.com/users/ernestognw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ernestognw/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-06-05T16:00:38Z",
  "updated_at": "2023-06-16T09:20:13Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nWe introduced an enum of `OperationState`s for custom errors in #4261. However, it feels weird that such enum is only used for custom errors.\r\n\r\nWe should use the same enum for retrieving the state. We might also want to replace the state getters with this new `state(bytes32 id)` getter.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1594345585",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4316#issuecomment-1594345585",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316",
    "id": 1594345585,
    "node_id": "IC_kwDOA9tCBs5fB8hx",
    "user": {
      "login": "clauBv23",
      "id": 26546018,
      "node_id": "MDQ6VXNlcjI2NTQ2MDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/26546018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clauBv23",
      "html_url": "https://github.com/clauBv23",
      "followers_url": "https://api.github.com/users/clauBv23/followers",
      "following_url": "https://api.github.com/users/clauBv23/following{/other_user}",
      "gists_url": "https://api.github.com/users/clauBv23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clauBv23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clauBv23/subscriptions",
      "organizations_url": "https://api.github.com/users/clauBv23/orgs",
      "repos_url": "https://api.github.com/users/clauBv23/repos",
      "events_url": "https://api.github.com/users/clauBv23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clauBv23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T08:50:48Z",
    "updated_at": "2023-06-16T09:03:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi there, \r\n\r\nI have been taking a look at this task and, have some concerns regarding it.\r\nCurrently, the states are not restrictive, I mean, an operation could be in both the pending and ready state. Due to that, there are some places where this is taken as an advantage to check the minimal needed restrictions like in https://github.com/OpenZeppelin/openzeppelin-contracts/blob/cd48b3eab380254b08d7893a5a7bf568a33c5259/contracts/governance/extensions/GovernorTimelockControl.sol#L65-L66 where with a single check covers the pending and the ready state.\r\n\r\nA solution for that case using a state-getter could be to check if the operation is either pending or ready like is being done in the proposed PR, but by doing it more checks will be needed to do the same. \r\nAlso to check a specific operation state, will be needed to ensure it is not in other ones (to know if is ready should check if is not pending or vice-versa).\r\n\r\nSo in general, Even though I agree it will be more descriptive and clean, it will likely increase the amount of checks needed to do the same that is being done at this time.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1594345585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1594383181",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4316#issuecomment-1594383181",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4316",
    "id": 1594383181,
    "node_id": "IC_kwDOA9tCBs5fCFtN",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T09:19:54Z",
    "updated_at": "2023-06-16T09:20:13Z",
    "author_association": "COLLABORATOR",
    "body": "We could rename \"Pending\" into \"Waiting\" in the enum, and consider that `Pending == Waiting || Ready`. We would keepn the isOperationPending getter for compatibility (governor uses that)\r\n\r\n@ernestognw WDYT?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1594383181/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

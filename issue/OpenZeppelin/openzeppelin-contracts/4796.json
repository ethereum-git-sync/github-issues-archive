{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4796",
  "id": 2044326627,
  "node_id": "I_kwDOA9tCBs552fLj",
  "number": 4796,
  "title": "Change _checkedOnReceived to internal in NFT tokens.",
  "user": {
    "login": "DaigaroCota",
    "id": 32775237,
    "node_id": "MDQ6VXNlcjMyNzc1MjM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/32775237?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DaigaroCota",
    "html_url": "https://github.com/DaigaroCota",
    "followers_url": "https://api.github.com/users/DaigaroCota/followers",
    "following_url": "https://api.github.com/users/DaigaroCota/following{/other_user}",
    "gists_url": "https://api.github.com/users/DaigaroCota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DaigaroCota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DaigaroCota/subscriptions",
    "organizations_url": "https://api.github.com/users/DaigaroCota/orgs",
    "repos_url": "https://api.github.com/users/DaigaroCota/repos",
    "events_url": "https://api.github.com/users/DaigaroCota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DaigaroCota/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-12-15T20:23:53Z",
  "updated_at": "2023-12-16T21:03:44Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am requesting to change the visibility of the method: `_checkedOnERC721Received` from private to internal.\r\n\r\nShown below:\r\n\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/01ef448981be9d20ca85f2faf6ebdf591ce409f3/contracts/token/ERC721/ERC721.sol#L465\r\n\r\nThe reason why is that you may have cases in where you override the _safeTransfer(...) function to perform actions/checks on the `data` param in `safeTransferFrom(...)`. \r\nThe _beforeTransfer(...) hook is further down the logic and cannot be used to perform the checks on `data`.\r\nIn my particular case this `data` param is needed to be passed so that the receiving contract of the NFT emits some application specific events.\r\n\r\nThis also applies to 1155.\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/d155600d554d28b583a8ab36dee0849215d48a20/contracts/token/ERC1155/ERC1155.sol#L388\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1858929948",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4796#issuecomment-1858929948",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4796",
    "id": 1858929948,
    "node_id": "IC_kwDOA9tCBs5uzQUc",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-16T21:03:43Z",
    "updated_at": "2023-12-16T21:03:43Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @DaigaroCota \r\n\r\nI understand the usecase here is to be able to perform the check without actually calling the transfer logic.\r\n\r\nI'm curious however on the justification. Can you give details as to what the override of `_safeTransfer` looks like ? I'm thinking that would probably call super anyway (in particular because the balances and ownership mappings are private).\r\n\r\nAn interresting option would be to take the receive checks from ERC-721 (and ERC-1155), and implement them in libraries, instead of directly in the contracts. The contract would then fecth that logic from the library. That way, it would not be possible to override the logic (by overriding an internal function) ... but the logic would be available for everyone to use. @ernestognw WDYT?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1858929948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

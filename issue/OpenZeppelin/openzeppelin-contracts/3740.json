{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740",
  "id": 1390213575,
  "node_id": "I_kwDOA9tCBs5S3PnH",
  "number": 3740,
  "title": "redundent restrictions in ERC721Consecutive",
  "user": {
    "login": "TrejGun",
    "id": 185285,
    "node_id": "MDQ6VXNlcjE4NTI4NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/185285?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TrejGun",
    "html_url": "https://github.com/TrejGun",
    "followers_url": "https://api.github.com/users/TrejGun/followers",
    "following_url": "https://api.github.com/users/TrejGun/following{/other_user}",
    "gists_url": "https://api.github.com/users/TrejGun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TrejGun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TrejGun/subscriptions",
    "organizations_url": "https://api.github.com/users/TrejGun/orgs",
    "repos_url": "https://api.github.com/users/TrejGun/repos",
    "events_url": "https://api.github.com/users/TrejGun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TrejGun/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-09-29T03:52:46Z",
  "updated_at": "2023-01-06T13:03:07Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\nPlease remove 2 restrictions from ERC721Consecutive\r\n\r\n1 minting with the _mint function \r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.8.0-rc.1/contracts/token/ERC721/extensions/ERC721Consecutive.sol#L98\r\n\r\n2 minting in the constructor\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.8.0-rc.1/contracts/token/ERC721/extensions/ERC721Consecutive.sol#L72\r\n\r\nhttps://eips.ethereum.org/EIPS/eip-2309 says nothing about restrictions, only about event\r\n\r\nThese restrictions make it easy to mint 10_000 tokens on collection creation as OpenSea does. But it actually does not, it just creates 10_000 rows in DB and then mints on demand (lazy mint). However, this makes it impossible for me to sell items from the store one-by-one and in small batches (of say 10) like I can do with ERC1155\r\n\r\n<!-- Remember, this is not a place to ask for help debugging code. For that, we welcome you in the OpenZeppelin Community Forum: https://forum.openzeppelin.com/. -->\r\n\r\n**üíª Environment**\r\n\r\n<!-- Tell us what version of OpenZeppelin Contracts you're using, and how you're using it: Truffle, Remix, etc. -->\r\n\r\n**üìù Details**\r\n\r\n<!-- Describe the problem you have been experiencing in more detail. Include as much information as you think is relevant. Keep in mind that transactions can fail for many reasons; context is key here. -->\r\n\r\n**üî¢ Code to reproduce bug**\r\n\r\n<!-- We will be able to better help if you provide a minimal example that triggers the bug. -->\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262587291",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1262587291",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1262587291,
    "node_id": "IC_kwDOA9tCBs5LQY2b",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T17:27:38Z",
    "updated_at": "2022-09-29T17:27:59Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @TrejGun \r\n\r\n- Lets start with the second requirement. [ERC-721](https://eips.ethereum.org/EIPS/eip-721) says:\r\n\r\n> /// @dev This emits when ownership of any NFT changes by any mechanism.\r\n    ///  This event emits when NFTs are created (`from` == 0) and destroyed\r\n    ///  (`to` == 0). Exception: during contract creation, any number of NFTs\r\n    ///  may be created and assigned without emitting Transfer. At the time of\r\n    ///  any transfer, the approved address for that NFT (if any) is reset to none.\r\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);\r\n    \r\nThis means that batch minting, using ERC-2309, is only compatible with ERC-721 if its done during construction. Allowing batch minting after the construction would break ERC721, and this is in our opinion not acceptable. \r\n\r\n- Now the first check:\r\n\r\nIt would be nice to support minting single tokens during construction ... but the implementation we have would be susceptible to bugs if we allowed that. The issue would happen if someone first does one or multiple `_mint` and then `_mintConsecutive` a batch that overlaps with the mints done before that.\r\n\r\nThe `_mintConsecutive` cannot realistically check that none of the token already exists (that would be super inefficient, we are not going to do that), it will succeed, emit the ERC-2309 event, but some of the tokens in the batch will still be owner by the owner specified during the \"simple\" mint, which is in violation of what the dev intended, and what the events describe.\r\n\r\n---\r\n\r\nIf these restrictions don't match your usecase, then you should probably write a message on the forum to discuss your usecase. Maybe `ERC721Consecutive.sol` is not for you.\r\n\r\nIf you want these checks gone, also fill free to propose alternative implementations ... but if you do so, keep in mint that we would need something that is safe, cheap to run, and that abides by the ERCs. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262587291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262748243",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1262748243",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1262748243,
    "node_id": "IC_kwDOA9tCBs5LRAJT",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T19:58:35Z",
    "updated_at": "2022-09-29T20:03:15Z",
    "author_association": "MEMBER",
    "body": "@Amxx Could we allow `_mint` in the constructor for `tokenIds` that are outside the consecutive range? I suppose they would need to be greater than 2**96.\r\n\r\nCould we allow `_mint` in the constructor as long as it is not followed by `_consecutiveMint`?\r\n\r\nI think we actually discussed these options and decided against adding the complexity required to implement that. But it's something that we can consider again.\r\n\r\nPersonally I feel that the current tradeoffs are not bad. But it's something that users should also comment on.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262748243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262975243",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1262975243",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1262975243,
    "node_id": "IC_kwDOA9tCBs5LR3kL",
    "user": {
      "login": "TrejGun",
      "id": 185285,
      "node_id": "MDQ6VXNlcjE4NTI4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/185285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TrejGun",
      "html_url": "https://github.com/TrejGun",
      "followers_url": "https://api.github.com/users/TrejGun/followers",
      "following_url": "https://api.github.com/users/TrejGun/following{/other_user}",
      "gists_url": "https://api.github.com/users/TrejGun/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TrejGun/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TrejGun/subscriptions",
      "organizations_url": "https://api.github.com/users/TrejGun/orgs",
      "repos_url": "https://api.github.com/users/TrejGun/repos",
      "events_url": "https://api.github.com/users/TrejGun/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TrejGun/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-30T00:41:23Z",
    "updated_at": "2022-09-30T00:41:23Z",
    "author_association": "NONE",
    "body": "@Amxx I agree with your point about overlapping. Could this be combined with Enumerable to prevent overlapping?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1262975243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1263765809",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1263765809",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1263765809,
    "node_id": "IC_kwDOA9tCBs5LU4kx",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-30T16:14:55Z",
    "updated_at": "2022-09-30T16:14:55Z",
    "author_association": "MEMBER",
    "body": ">Could this be combined with Enumerable to prevent overlapping?\r\n\r\nI don't really see how that's relevant. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1263765809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1263777478",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1263777478",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1263777478,
    "node_id": "IC_kwDOA9tCBs5LU7bG",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-30T16:26:05Z",
    "updated_at": "2022-09-30T16:26:05Z",
    "author_association": "COLLABORATOR",
    "body": "- allowing mint above `type(uint96).max` during construction is safe and easy\r\n- I'm not exactly sure how we would \"allow _mint in the constructor as long as it is not followed by _consecutiveMint\" ... but if that is possible, then yes !\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1263777478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264177168",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1264177168",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1264177168,
    "node_id": "IC_kwDOA9tCBs5LWdAQ",
    "user": {
      "login": "TrejGun",
      "id": 185285,
      "node_id": "MDQ6VXNlcjE4NTI4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/185285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TrejGun",
      "html_url": "https://github.com/TrejGun",
      "followers_url": "https://api.github.com/users/TrejGun/followers",
      "following_url": "https://api.github.com/users/TrejGun/following{/other_user}",
      "gists_url": "https://api.github.com/users/TrejGun/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TrejGun/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TrejGun/subscriptions",
      "organizations_url": "https://api.github.com/users/TrejGun/orgs",
      "repos_url": "https://api.github.com/users/TrejGun/repos",
      "events_url": "https://api.github.com/users/TrejGun/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TrejGun/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-01T00:56:31Z",
    "updated_at": "2022-10-02T10:17:16Z",
    "author_association": "NONE",
    "body": "> > Could this be combined with Enumerable to prevent overlapping?\r\n> \r\n> I don't really see how that's relevant.\r\n\r\nbecause you don't pass tokenId and all numbers go in order",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1264177168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1373143994",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1373143994",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1373143994,
    "node_id": "IC_kwDOA9tCBs5R2IO6",
    "user": {
      "login": "TrejGun",
      "id": 185285,
      "node_id": "MDQ6VXNlcjE4NTI4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/185285?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TrejGun",
      "html_url": "https://github.com/TrejGun",
      "followers_url": "https://api.github.com/users/TrejGun/followers",
      "following_url": "https://api.github.com/users/TrejGun/following{/other_user}",
      "gists_url": "https://api.github.com/users/TrejGun/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TrejGun/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TrejGun/subscriptions",
      "organizations_url": "https://api.github.com/users/TrejGun/orgs",
      "repos_url": "https://api.github.com/users/TrejGun/repos",
      "events_url": "https://api.github.com/users/TrejGun/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TrejGun/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-06T04:55:32Z",
    "updated_at": "2023-01-06T04:55:45Z",
    "author_association": "NONE",
    "body": "Please advise, what should I do if I need to mint 10k of tokens on contract deployment and another 10k later?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1373143994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1373593152",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3740#issuecomment-1373593152",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3740",
    "id": 1373593152,
    "node_id": "IC_kwDOA9tCBs5R315A",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-06T13:03:07Z",
    "updated_at": "2023-01-06T13:03:07Z",
    "author_association": "COLLABORATOR",
    "body": "> Please advise, what should I do if I need to mint 10k of tokens on contract deployment and another 10k later?\r\n\r\nOptions:\r\n- have the second batch of tokens minted using a merkle drop, so that users pay the minting gas cost (one by one)\r\n- mint 20k and put half of them on a \"placeholder\" address so that users can come and claim them (one by one)\r\n- use 2 different contracts\r\n- use another standard beside EIP-721",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1373593152/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2743",
  "id": 931187210,
  "node_id": "MDU6SXNzdWU5MzExODcyMTA=",
  "number": 2743,
  "title": "How To Specify Amount To Send With \"SplitPayment\"",
  "user": {
    "login": "JimLynchCodes",
    "id": 5354163,
    "node_id": "MDQ6VXNlcjUzNTQxNjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5354163?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JimLynchCodes",
    "html_url": "https://github.com/JimLynchCodes",
    "followers_url": "https://api.github.com/users/JimLynchCodes/followers",
    "following_url": "https://api.github.com/users/JimLynchCodes/following{/other_user}",
    "gists_url": "https://api.github.com/users/JimLynchCodes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JimLynchCodes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JimLynchCodes/subscriptions",
    "organizations_url": "https://api.github.com/users/JimLynchCodes/orgs",
    "repos_url": "https://api.github.com/users/JimLynchCodes/repos",
    "events_url": "https://api.github.com/users/JimLynchCodes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JimLynchCodes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-06-28T05:31:20Z",
  "updated_at": "2021-06-28T14:05:05Z",
  "closed_at": "2021-06-28T13:16:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, I'm a bit confused by the wording of the \"SplitPayment\" contract and how it's supposed to be used.\r\n\r\nI have some solidity code that makes an instance of OpenZeppelin's \"SplitPayment\" contract. the idea is that the owner calls the \"initiateAirdrop\" function and then the other users call the \"pullPayment\" function.\r\n\r\nWhen I'm creating the SplitPayment instance I pass in an array of addresses that should receive the payments and an array with the same number of elements but all of them being the number 1 (which represents everyone having an equal share).\r\n\r\n```\r\nfunction initiateAirdrop() public {\r\n\r\n  uint equalShares = [];\r\n\r\n  for (i; i < attendeesCount; i++) {\r\n    equalShares.push(1);\r\n  }\r\n\r\n  paymentSplitter = PaymentSplitter(attendees, equalShares);\r\n\r\n}\r\n\r\nfunction pullPayment() public {\r\n  paymentSplitter.release(msg.sender);\r\n}\r\n```\r\n\r\n\r\nthe thing that I can't figure out though is how to specify how much ether you want to be given out. I would expect this to be part of the input arguments, or to somehow hook into the \"Escrow\" contract but I don't see anything like that in the docs\r\n\r\n\r\nI didn't see any mention or clarification of this in the docs, but I did actually find this interesting test that OpenZep wrote for the SplitPayment contract... at the end they are expecting the end balance for the \"this.contract.address\" to be zero... so maybe it just splits the entire eth balance for the owner address between all the address passed in?\r\n\r\nTo me it's very confusing though to have a \"payment\" with no specified amount... is it assuming the entire amount in the contract address is the payment amount? Also, what happens if the amount in the contract wallet changes after the \"initiateAirdrop\" function has been called and after the\"pullPayment\" function has been called by some users but before it has been called by some other users? ðŸ¤”\r\n\r\n\r\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/94797978bbab60155bdf7517c31c7488f7fbe6dc/test/payment/SplitPayment.test.js#L62_L92\r\n\r\n\r\n\r\nthanks!\r\n\r\n",
  "closed_by": {
    "login": "JimLynchCodes",
    "id": 5354163,
    "node_id": "MDQ6VXNlcjUzNTQxNjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5354163?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JimLynchCodes",
    "html_url": "https://github.com/JimLynchCodes",
    "followers_url": "https://api.github.com/users/JimLynchCodes/followers",
    "following_url": "https://api.github.com/users/JimLynchCodes/following{/other_user}",
    "gists_url": "https://api.github.com/users/JimLynchCodes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JimLynchCodes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JimLynchCodes/subscriptions",
    "organizations_url": "https://api.github.com/users/JimLynchCodes/orgs",
    "repos_url": "https://api.github.com/users/JimLynchCodes/repos",
    "events_url": "https://api.github.com/users/JimLynchCodes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JimLynchCodes/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869494355",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2743#issuecomment-869494355",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743",
    "id": 869494355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2OTQ5NDM1NQ==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-28T08:43:23Z",
    "updated_at": "2021-06-28T08:43:23Z",
    "author_association": "COLLABORATOR",
    "body": "Hello @JimLynchCodes \r\n\r\nThe payment splitter will split everything it ever received to the share-holders. Lets take your example with three users, Alice, Bob and Charles. All 3 have one share.\r\n\r\nAt any point in time, they can pull their share of the payment splitter's balance. Initialliy the payment splitter is empty, so they cannot reeem anything.\r\n\r\nImagine you then send 1eth to the payment splitter. They can decide to call the `pullPayment` function to get their share (0.3333... eth).\r\n\r\nNow imagine I send an additional 2 eth to the same payment splitter, now everyone should be able to redeem 1 eth (the total balance received by the payment splitter is 3 eth). If they have already redeemed the first 0.333 eth, they can call `pullPayment` to get the remaining 0.666 eth. If they didn't redeemed the initial 0.333 eth, calling `pullPayment` will send them the 1 eth they are entitled to.\r\n\r\nA PaymentSplitter contract is never done with ... it remains here in case any balance is sent to him. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869494355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869676261",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2743#issuecomment-869676261",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743",
    "id": 869676261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2OTY3NjI2MQ==",
    "user": {
      "login": "JimLynchCodes",
      "id": 5354163,
      "node_id": "MDQ6VXNlcjUzNTQxNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5354163?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JimLynchCodes",
      "html_url": "https://github.com/JimLynchCodes",
      "followers_url": "https://api.github.com/users/JimLynchCodes/followers",
      "following_url": "https://api.github.com/users/JimLynchCodes/following{/other_user}",
      "gists_url": "https://api.github.com/users/JimLynchCodes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JimLynchCodes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JimLynchCodes/subscriptions",
      "organizations_url": "https://api.github.com/users/JimLynchCodes/orgs",
      "repos_url": "https://api.github.com/users/JimLynchCodes/repos",
      "events_url": "https://api.github.com/users/JimLynchCodes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JimLynchCodes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-28T13:16:53Z",
    "updated_at": "2021-06-28T13:16:53Z",
    "author_association": "NONE",
    "body": "\r\nThanks @Amxx!\r\n\r\nThis seems like a logical way for it to behave to me, but I still feel like \"SplitPayment\" is kind of a misnomer... \r\n\r\nit's not just splitting one payment- it's splitting ownership of the contract wallet. there is no \"sale\" happening for which one party is giving a payment...  ðŸ¤”",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869676261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869713910",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2743#issuecomment-869713910",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/2743",
    "id": 869713910,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2OTcxMzkxMA==",
    "user": {
      "login": "Amxx",
      "id": 2432299,
      "node_id": "MDQ6VXNlcjI0MzIyOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2432299?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amxx",
      "html_url": "https://github.com/Amxx",
      "followers_url": "https://api.github.com/users/Amxx/followers",
      "following_url": "https://api.github.com/users/Amxx/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amxx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amxx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amxx/subscriptions",
      "organizations_url": "https://api.github.com/users/Amxx/orgs",
      "repos_url": "https://api.github.com/users/Amxx/repos",
      "events_url": "https://api.github.com/users/Amxx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amxx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-28T14:04:49Z",
    "updated_at": "2021-06-28T14:05:05Z",
    "author_association": "COLLABORATOR",
    "body": "It doesn't split one payment, it splits payments that are made to it. Also, at the point in the code are there any references to \"sales\"",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/869713910/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

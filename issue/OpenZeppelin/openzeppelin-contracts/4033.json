{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4033",
  "id": 1574783102,
  "node_id": "I_kwDOA9tCBs5d3Uh-",
  "number": 4033,
  "title": "Insecure example in ERC721 documentation",
  "user": {
    "login": "Alexander-Herranz",
    "id": 9007971,
    "node_id": "MDQ6VXNlcjkwMDc5NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9007971?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Alexander-Herranz",
    "html_url": "https://github.com/Alexander-Herranz",
    "followers_url": "https://api.github.com/users/Alexander-Herranz/followers",
    "following_url": "https://api.github.com/users/Alexander-Herranz/following{/other_user}",
    "gists_url": "https://api.github.com/users/Alexander-Herranz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Alexander-Herranz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Alexander-Herranz/subscriptions",
    "organizations_url": "https://api.github.com/users/Alexander-Herranz/orgs",
    "repos_url": "https://api.github.com/users/Alexander-Herranz/repos",
    "events_url": "https://api.github.com/users/Alexander-Herranz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Alexander-Herranz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-02-07T17:48:11Z",
  "updated_at": "2023-06-03T09:57:55Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Briefly describe the issue you're experiencing. Tell us what you were trying to do and what happened instead. -->\r\nHi,\r\n\r\nI noticed an insecure practice in the following example (_GameItem.sol_), from the documentation: https://docs.openzeppelin.com/contracts/4.x/erc721#constructing_an_erc721_token_contract\r\n\r\n```\r\n// contracts/GameItem.sol\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.0;\r\n\r\nimport \"@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol\";\r\nimport \"@openzeppelin/contracts/utils/Counters.sol\";\r\n\r\ncontract GameItem is ERC721URIStorage {\r\n    using Counters for Counters.Counter;\r\n    Counters.Counter private _tokenIds;\r\n\r\n    constructor() ERC721(\"GameItem\", \"ITM\") {}\r\n\r\n    function awardItem(address player, string memory tokenURI)\r\n        public\r\n        returns (uint256)\r\n    {\r\n        uint256 newItemId = _tokenIds.current();\r\n        _mint(player, newItemId);\r\n        _setTokenURI(newItemId, tokenURI);\r\n\r\n        _tokenIds.increment();\r\n        return newItemId;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**💻 Environment**\r\n\r\nAny\r\n\r\n**📝 Details**\r\n\r\nIn the provided example you use the **_mint** function, that is said to be discouraged in the documentation:\r\nhttps://docs.openzeppelin.com/contracts/4.x/api/token/erc721#ERC721-_mint-address-uint256-\r\n\r\nUsage of this method is discouraged, use [_safeMint](https://docs.openzeppelin.com/contracts/4.x/api/token/erc721#ERC721-_safeMint-address-uint256-bytes-)  whenever possible\r\n\r\nI think that  **_mint**  function should be changed to  **_safeMint** to encourage best practices. This practical example is the entry point for lots of new Solidity developers.\r\n\r\nThanks\r\n\r\n**🔢 Code to reproduce bug**\r\n\r\nYou can [find the code in the documentation](https://docs.openzeppelin.com/contracts/4.x/erc721#constructing_an_erc721_token_contract).",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1421441446",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4033#issuecomment-1421441446",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033",
    "id": 1421441446,
    "node_id": "IC_kwDOA9tCBs5UuXmm",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-07T21:00:28Z",
    "updated_at": "2023-02-07T21:00:28Z",
    "author_association": "MEMBER",
    "body": "I think I agree we should use `_safeMint`, but the `.increment()` line should be executed before minting.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1421441446/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1427028472",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4033#issuecomment-1427028472",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033",
    "id": 1427028472,
    "node_id": "IC_kwDOA9tCBs5VDrn4",
    "user": {
      "login": "Rassska",
      "id": 73281386,
      "node_id": "MDQ6VXNlcjczMjgxMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/73281386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rassska",
      "html_url": "https://github.com/Rassska",
      "followers_url": "https://api.github.com/users/Rassska/followers",
      "following_url": "https://api.github.com/users/Rassska/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rassska/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rassska/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rassska/subscriptions",
      "organizations_url": "https://api.github.com/users/Rassska/orgs",
      "repos_url": "https://api.github.com/users/Rassska/repos",
      "events_url": "https://api.github.com/users/Rassska/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rassska/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-12T13:05:24Z",
    "updated_at": "2023-02-12T13:07:31Z",
    "author_association": "NONE",
    "body": "It seems that the function `awardItem(address, string memory)` is supposed to be called by player, however the following is mentioned: \r\n> To restrict what accounts can mint items we can add [Access Control]\r\n\r\nHence there is a risk of unbounded gas consumption. It also opens some doors to re-entrancy. So, if you're planning to replace it, be sure to include all details. \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1427028472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1574822854",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4033#issuecomment-1574822854",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/4033",
    "id": 1574822854,
    "node_id": "IC_kwDOA9tCBs5d3ePG",
    "user": {
      "login": "Alexander-Herranz",
      "id": 9007971,
      "node_id": "MDQ6VXNlcjkwMDc5NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9007971?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Alexander-Herranz",
      "html_url": "https://github.com/Alexander-Herranz",
      "followers_url": "https://api.github.com/users/Alexander-Herranz/followers",
      "following_url": "https://api.github.com/users/Alexander-Herranz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Alexander-Herranz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Alexander-Herranz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Alexander-Herranz/subscriptions",
      "organizations_url": "https://api.github.com/users/Alexander-Herranz/orgs",
      "repos_url": "https://api.github.com/users/Alexander-Herranz/repos",
      "events_url": "https://api.github.com/users/Alexander-Herranz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Alexander-Herranz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-03T09:57:54Z",
    "updated_at": "2023-06-03T09:57:54Z",
    "author_association": "NONE",
    "body": "I think we can also replace the Counter with a regular uint++/uint--\r\n\r\nCounters library was designed to avoid overflows when managing numbers, but I think that we do not need it anymore from Solidity 8. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1574822854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

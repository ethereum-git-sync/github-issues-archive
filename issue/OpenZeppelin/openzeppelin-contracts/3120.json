{
  "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
  "repository_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts",
  "labels_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120/labels{/name}",
  "comments_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120/comments",
  "events_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120/events",
  "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120",
  "id": 1108026410,
  "node_id": "I_kwDOA9tCBs5CCyQq",
  "number": 3120,
  "title": "Improve clarity of error messages in functions checking token ownership",
  "user": {
    "login": "MarcelCutts",
    "id": 5721314,
    "node_id": "MDQ6VXNlcjU3MjEzMTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5721314?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MarcelCutts",
    "html_url": "https://github.com/MarcelCutts",
    "followers_url": "https://api.github.com/users/MarcelCutts/followers",
    "following_url": "https://api.github.com/users/MarcelCutts/following{/other_user}",
    "gists_url": "https://api.github.com/users/MarcelCutts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MarcelCutts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MarcelCutts/subscriptions",
    "organizations_url": "https://api.github.com/users/MarcelCutts/orgs",
    "repos_url": "https://api.github.com/users/MarcelCutts/repos",
    "events_url": "https://api.github.com/users/MarcelCutts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MarcelCutts/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-01-19T12:12:41Z",
  "updated_at": "2022-05-27T00:52:43Z",
  "closed_at": "2022-05-27T00:52:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**üßê Motivation**\r\nGood morning folks. I feel this somewhat walks the line between feature and bug.\r\n\r\nWhile extending some `.*transfer()` functionality in the OpenZeppelin contracts (thank you for providing them!) I found some of my tests failing due to an error reading:\r\n\r\n```\r\nERC721: transfer caller is not owner nor approved\r\n```\r\n\r\nAs a newcomer, most of the terminology of ownership in documentation and in the \"higher level\" contracts refers to the contract owner - with frequently used modifiers like `onlyOwner` and the `Ownable` contract reinforcing this. I spent quite some verifying that the test was indeed making calls with the owner's signature, and that signature matches the `.owner()` in the instance of the contract under test. \r\n\r\nAfter delving in a little more I found that the term \"owner\", in this context, refers to the _token_ owner. \r\n\r\n(A more dramatic reading of this experience as at the bottom for those interested in such things)\r\n\r\n\r\n**üìù Details**\r\nA small amount of clarification may go a long way to saving others the journey I went on myself, for example extending the error message to\r\n\r\n```\r\nERC721: transfer caller is not *token* owner nor approved\r\n```\r\n\r\nI have a PR ready with this, and for all similar instances of such messages. Thank you for your consideration.\r\n\r\n<!-- Make sure that you have reviewed the OpenZeppelin Contracts Contributor Guidelines. -->\r\n<!-- https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/CONTRIBUTING.md -->\r\n\r\n**Dramatic Reading**\r\n>\"But I am the owner\", I whinge at the test suite, exhausted. In red, emblazoned in the flickering terminal: \"'ERC721: transfer caller is not owner nor approved'\" stands its ground - repeatedly unconvinced of my ownership. I checksum, and I verify. The messages are signed with poise, grace, and cryptographic correctness. The deployer is requesting the transfer. The very deployer that is also the current owner of this fine establishment.\r\nSo I dig. I fear I'll dig too greedily and too deep, and awaken something in the darkness.\r\n\"Ah.\" I sigh. Owner can mean owner of the contract, but this \"owner\" refers to a check of owner of the token.\r\nSo let this fable guide you all - don't reuse curt terminology for something that is already overloaded. All this could have been avoided with a simple\r\n\"ERC721: transfer caller is not *token* owner nor approved\".",
  "closed_by": {
    "login": "frangio",
    "id": 481465,
    "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frangio",
    "html_url": "https://github.com/frangio",
    "followers_url": "https://api.github.com/users/frangio/followers",
    "following_url": "https://api.github.com/users/frangio/following{/other_user}",
    "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
    "organizations_url": "https://api.github.com/users/frangio/orgs",
    "repos_url": "https://api.github.com/users/frangio/repos",
    "events_url": "https://api.github.com/users/frangio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frangio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1020629256",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1020629256",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1020629256,
    "node_id": "IC_kwDOA9tCBs481ZEI",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T22:51:23Z",
    "updated_at": "2022-01-24T22:51:23Z",
    "author_association": "MEMBER",
    "body": "Hi @MarcelCutts! Thanks for the suggestion. Generally I think you have a point that the error messages could be clearer, but the trade off is that longer error messages make deployment more expensive. While I understand your frustration, I think that these errors are clear enough in this case.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1020629256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1022505034",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1022505034",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1022505034,
    "node_id": "IC_kwDOA9tCBs488jBK",
    "user": {
      "login": "MarcelCutts",
      "id": 5721314,
      "node_id": "MDQ6VXNlcjU3MjEzMTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5721314?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcelCutts",
      "html_url": "https://github.com/MarcelCutts",
      "followers_url": "https://api.github.com/users/MarcelCutts/followers",
      "following_url": "https://api.github.com/users/MarcelCutts/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcelCutts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcelCutts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcelCutts/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcelCutts/orgs",
      "repos_url": "https://api.github.com/users/MarcelCutts/repos",
      "events_url": "https://api.github.com/users/MarcelCutts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcelCutts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-26T19:07:12Z",
    "updated_at": "2022-01-26T19:07:12Z",
    "author_association": "NONE",
    "body": "No problem, thank you for replying and providing perspective. Perhaps one can minimise gas requirements while maximising detailed error messages through a system of error codes? It will add the unergonomic step of a user having to do the lookup, but honestly I often google the error messages I receive regardless, which amounts to the same thing with less structure.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1022505034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1028365419",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1028365419",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1028365419,
    "node_id": "IC_kwDOA9tCBs49S5xr",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T21:16:34Z",
    "updated_at": "2022-02-02T21:16:34Z",
    "author_association": "MEMBER",
    "body": "Yeah, error codes are not a bad idea. We really would like to move to Solidity custom errors instead of strings though.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1028365419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1028366064",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1028366064",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1028366064,
    "node_id": "IC_kwDOA9tCBs49S57w",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T21:17:27Z",
    "updated_at": "2022-02-02T21:17:27Z",
    "author_association": "MEMBER",
    "body": "Sorry closed accidentally. Keeping open because I agree the current wording can be confusing.",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1028366064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1059982675",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1059982675",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1059982675,
    "node_id": "IC_kwDOA9tCBs4_Lg1T",
    "user": {
      "login": "kanedaaaa",
      "id": 68785244,
      "node_id": "MDQ6VXNlcjY4Nzg1MjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/68785244?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanedaaaa",
      "html_url": "https://github.com/kanedaaaa",
      "followers_url": "https://api.github.com/users/kanedaaaa/followers",
      "following_url": "https://api.github.com/users/kanedaaaa/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanedaaaa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanedaaaa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanedaaaa/subscriptions",
      "organizations_url": "https://api.github.com/users/kanedaaaa/orgs",
      "repos_url": "https://api.github.com/users/kanedaaaa/repos",
      "events_url": "https://api.github.com/users/kanedaaaa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanedaaaa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-06T15:24:10Z",
    "updated_at": "2022-03-06T15:25:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "This might sound funny, but here is your alternative without making the message too long (in fact its 3 character shorter ;D), but keeping it more clear than what it was before:\r\n\r\n```\r\nERC721: caller is not token owner nor approved\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1059982675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1061246148",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1061246148",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1061246148,
    "node_id": "IC_kwDOA9tCBs4_QVTE",
    "user": {
      "login": "frangio",
      "id": 481465,
      "node_id": "MDQ6VXNlcjQ4MTQ2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/481465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frangio",
      "html_url": "https://github.com/frangio",
      "followers_url": "https://api.github.com/users/frangio/followers",
      "following_url": "https://api.github.com/users/frangio/following{/other_user}",
      "gists_url": "https://api.github.com/users/frangio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frangio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frangio/subscriptions",
      "organizations_url": "https://api.github.com/users/frangio/orgs",
      "repos_url": "https://api.github.com/users/frangio/repos",
      "events_url": "https://api.github.com/users/frangio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frangio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-07T23:27:00Z",
    "updated_at": "2022-03-07T23:27:00Z",
    "author_association": "MEMBER",
    "body": "@kanedaaaa I like that! Do you want to submit a PR?",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1061246148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1063036076",
    "html_url": "https://github.com/OpenZeppelin/openzeppelin-contracts/issues/3120#issuecomment-1063036076",
    "issue_url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/3120",
    "id": 1063036076,
    "node_id": "IC_kwDOA9tCBs4_XKSs",
    "user": {
      "login": "kanedaaaa",
      "id": 68785244,
      "node_id": "MDQ6VXNlcjY4Nzg1MjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/68785244?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanedaaaa",
      "html_url": "https://github.com/kanedaaaa",
      "followers_url": "https://api.github.com/users/kanedaaaa/followers",
      "following_url": "https://api.github.com/users/kanedaaaa/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanedaaaa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanedaaaa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanedaaaa/subscriptions",
      "organizations_url": "https://api.github.com/users/kanedaaaa/orgs",
      "repos_url": "https://api.github.com/users/kanedaaaa/repos",
      "events_url": "https://api.github.com/users/kanedaaaa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanedaaaa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-09T15:23:34Z",
    "updated_at": "2022-03-09T15:23:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Haha, yes I can send one. ",
    "reactions": {
      "url": "https://api.github.com/repos/OpenZeppelin/openzeppelin-contracts/issues/comments/1063036076/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

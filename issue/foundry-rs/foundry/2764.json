{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2764",
  "id": 1338110521,
  "node_id": "I_kwDOGBlvNc5PwfI5",
  "number": 2764,
  "title": "[Bug] `cast lookup-address`",
  "user": {
    "login": "brianleect",
    "id": 63389110,
    "node_id": "MDQ6VXNlcjYzMzg5MTEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/63389110?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brianleect",
    "html_url": "https://github.com/brianleect",
    "followers_url": "https://api.github.com/users/brianleect/followers",
    "following_url": "https://api.github.com/users/brianleect/following{/other_user}",
    "gists_url": "https://api.github.com/users/brianleect/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brianleect/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brianleect/subscriptions",
    "organizations_url": "https://api.github.com/users/brianleect/orgs",
    "repos_url": "https://api.github.com/users/brianleect/repos",
    "events_url": "https://api.github.com/users/brianleect/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brianleect/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3334394235,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjM1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "0052CC",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 3703752609,
      "node_id": "LA_kwDOGBlvNc7cwseh",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-cast",
      "name": "C-cast",
      "color": "5319E7",
      "default": false,
      "description": "Command: cast"
    },
    {
      "id": 3759720552,
      "node_id": "LA_kwDOGBlvNc7gGMho",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/D-easy",
      "name": "D-easy",
      "color": "0E8A16",
      "default": false,
      "description": "Difficulty: easy"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-08-14T02:11:35Z",
  "updated_at": "2022-09-18T07:46:22Z",
  "closed_at": "2022-09-18T07:46:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nCast\n\n### Have you ensured that all of these are up to date?\n\n- [ ] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\n0.2.0\n\n### What command(s) is the bug in?\n\ncast lookup-address 0x30c9223d9e3d23e0af1073a38e0834b055bf68ed\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nActual output\r\n```\r\nThe application panicked (crashed).\r\nMessage:  could not abi-decode bytes to address tokens: InvalidName(\"please ensure the contract and method you're calling exist! failed to decode empty bytes. if you're using jsonrpc this is likely due to jsonrpc returning `0x` in case contract or method don't exist\")\r\nLocation: /home/runner/.cargo/git/checkouts/ethers-rs-c3a7c0a0ae0fe6be/2c33acb/ethers-providers/src/provider.rs:1417\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\n  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\r\n   1: __libc_start_main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n\r\nRun with COLORBT_SHOW_HIDDEN=1 environment variable to disable frame filtering.\r\nAborted (core dumped)\r\n```\r\n\r\nExpected output\r\n`Error: ens name not found: 30c9223d9e3d23e0af1073a38e0834b055bf68ed.addr.reverse`\r\n\r\nSuspect issue is linked to https://ethereum.stackexchange.com/questions/72507/ens-name-reverse-is-not-working-on-ethereum-address. ",
  "closed_by": {
    "login": "brianleect",
    "id": 63389110,
    "node_id": "MDQ6VXNlcjYzMzg5MTEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/63389110?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brianleect",
    "html_url": "https://github.com/brianleect",
    "followers_url": "https://api.github.com/users/brianleect/followers",
    "following_url": "https://api.github.com/users/brianleect/following{/other_user}",
    "gists_url": "https://api.github.com/users/brianleect/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brianleect/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brianleect/subscriptions",
    "organizations_url": "https://api.github.com/users/brianleect/orgs",
    "repos_url": "https://api.github.com/users/brianleect/repos",
    "events_url": "https://api.github.com/users/brianleect/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brianleect/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1216475144",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2764#issuecomment-1216475144",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764",
    "id": 1216475144,
    "node_id": "IC_kwDOGBlvNc5IgfAI",
    "user": {
      "login": "joshieDo",
      "id": 93316087,
      "node_id": "U_kgDOBY_j9w",
      "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshieDo",
      "html_url": "https://github.com/joshieDo",
      "followers_url": "https://api.github.com/users/joshieDo/followers",
      "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
      "organizations_url": "https://api.github.com/users/joshieDo/orgs",
      "repos_url": "https://api.github.com/users/joshieDo/repos",
      "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshieDo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-16T10:53:04Z",
    "updated_at": "2022-08-16T10:53:24Z",
    "author_association": "COLLABORATOR",
    "body": "seems like the domain `ox63616e.eth` has its resolver set to the WETH contract, ultimately leading to decoding a '0x' address",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1216475144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1221551617",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2764#issuecomment-1221551617",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764",
    "id": 1221551617,
    "node_id": "IC_kwDOGBlvNc5Iz2YB",
    "user": {
      "login": "Tirthnp",
      "id": 19911354,
      "node_id": "MDQ6VXNlcjE5OTExMzU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19911354?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Tirthnp",
      "html_url": "https://github.com/Tirthnp",
      "followers_url": "https://api.github.com/users/Tirthnp/followers",
      "following_url": "https://api.github.com/users/Tirthnp/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tirthnp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Tirthnp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tirthnp/subscriptions",
      "organizations_url": "https://api.github.com/users/Tirthnp/orgs",
      "repos_url": "https://api.github.com/users/Tirthnp/repos",
      "events_url": "https://api.github.com/users/Tirthnp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Tirthnp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-21T13:57:58Z",
    "updated_at": "2022-08-21T13:57:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is it possible for me to try look at this issue ?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1221551617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1222794556",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2764#issuecomment-1222794556",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2764",
    "id": 1222794556,
    "node_id": "IC_kwDOGBlvNc5I4l08",
    "user": {
      "login": "joshieDo",
      "id": 93316087,
      "node_id": "U_kgDOBY_j9w",
      "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshieDo",
      "html_url": "https://github.com/joshieDo",
      "followers_url": "https://api.github.com/users/joshieDo/followers",
      "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
      "organizations_url": "https://api.github.com/users/joshieDo/orgs",
      "repos_url": "https://api.github.com/users/joshieDo/repos",
      "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshieDo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T19:05:29Z",
    "updated_at": "2022-08-22T19:16:33Z",
    "author_association": "COLLABORATOR",
    "body": "Imo, this is solved with the above fix on `ethers-rs`. Instead of panicking, it now returns:\r\n\r\n```\r\n$ cast lookup-address 0x30c9223d9e3d23e0af1073a38e0834b055bf68ed\r\nError: \r\nens name not found: `ox63616e.eth` resolver (0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2) is invalid.\r\n```\r\n\r\nFrom my poor understanding of the ENS system:\r\n`0x30c9223d9e3d23e0af1073a38e0834b055bf68ed` is resolving to `ox63616e.eth`. However, the `ox63616e.eth`'s resolver is actually set to the `WETH` address which is not a resolver at all... And `ethers-rs` requires that the resolver points to the queried address.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1222794556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

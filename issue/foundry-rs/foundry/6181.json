{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/6181",
  "id": 1971623087,
  "node_id": "I_kwDOGBlvNc51hJSv",
  "number": 6181,
  "title": "Setup failed: cannot call `deal` on precompile 0x0000000000000000000000000000000000000001",
  "user": {
    "login": "utx0",
    "id": 90531,
    "node_id": "MDQ6VXNlcjkwNTMx",
    "avatar_url": "https://avatars.githubusercontent.com/u/90531?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/utx0",
    "html_url": "https://github.com/utx0",
    "followers_url": "https://api.github.com/users/utx0/followers",
    "following_url": "https://api.github.com/users/utx0/following{/other_user}",
    "gists_url": "https://api.github.com/users/utx0/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/utx0/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/utx0/subscriptions",
    "organizations_url": "https://api.github.com/users/utx0/orgs",
    "repos_url": "https://api.github.com/users/utx0/repos",
    "events_url": "https://api.github.com/users/utx0/events{/privacy}",
    "received_events_url": "https://api.github.com/users/utx0/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-11-01T03:20:16Z",
  "updated_at": "2023-11-01T11:23:10Z",
  "closed_at": "2023-11-01T11:23:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [ ] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (799b820 2023-11-01T00:30:43.361383120Z)\n\n### What command(s) is the bug in?\n\nforge test\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nAs of today's versions;\r\n\r\n```\r\n❯ foundryup -v\r\n\r\n\r\n.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx\r\n\r\n ╔═╗ ╔═╗ ╦ ╦ ╔╗╔ ╔╦╗ ╦═╗ ╦ ╦         Portable and modular toolkit\r\n ╠╣  ║ ║ ║ ║ ║║║  ║║ ╠╦╝ ╚╦╝    for Ethereum Application Development\r\n ╚   ╚═╝ ╚═╝ ╝╚╝ ═╩╝ ╩╚═  ╩                 written in Rust.\r\n\r\n.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx\r\n\r\nRepo       : https://github.com/foundry-rs/\r\nBook       : https://book.getfoundry.sh/\r\nChat       : https://t.me/foundry_rs/\r\nSupport    : https://t.me/foundry_support/\r\nContribute : https://github.com/orgs/foundry-rs/projects/2/\r\n\r\n.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx.xOx\r\n\r\nfoundryup: installing foundry (version nightly, tag nightly)\r\nfoundryup: downloading latest forge, cast, anvil, and chisel\r\n############################################################################################################################################################################################################## 100.0%\r\nfoundryup: downloading manpages\r\n############################################################################################################################################################################################################## 100.0%\r\nfoundryup: installed - forge 0.2.0 (799b820 2023-11-01T00:30:43.361383120Z)\r\nfoundryup: installed - cast 0.2.0 (799b820 2023-11-01T00:30:43.352568039Z)\r\nfoundryup: installed - anvil 0.2.0 (799b820 2023-11-01T00:30:43.402555828Z)\r\nfoundryup: installed - chisel 0.2.0 (799b820 2023-11-01T00:30:43.369868501Z)\r\nfoundryup: done!\r\n\r\n```\r\n\r\nI am now getting this error when running my tests and am now sure what its about: \r\n\r\n```\r\n[FAIL. Reason: Setup failed: cannot call `deal` on precompile 0x0000000000000000000000000000000000000001] setUp() (gas: 0)\r\n```\r\n\r\nWhich is this line of code in the tests:\r\n```\r\naddress public constant userAddress = address(0x001); \r\n...\r\nvm.deal(testAddresses.userAddress, 100 ether);\r\n```\r\n\r\n",
  "closed_by": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788366195",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6181#issuecomment-1788366195",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181",
    "id": 1788366195,
    "node_id": "IC_kwDOGBlvNc5qmE1z",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-01T03:52:18Z",
    "updated_at": "2023-11-01T03:52:18Z",
    "author_association": "MEMBER",
    "body": "We restrict cheatcode calls to certain addresses as it's considered a bad practice—mainly the addresses 0 to 9 which are cheatcodes. You can use [`makeAddr`](https://book.getfoundry.sh/reference/forge-std/make-addr?highlight=makeaddr#makeaddr) to make a new address to do `deal` instead.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788366195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788367153",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6181#issuecomment-1788367153",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181",
    "id": 1788367153,
    "node_id": "IC_kwDOGBlvNc5qmFEx",
    "user": {
      "login": "utx0",
      "id": 90531,
      "node_id": "MDQ6VXNlcjkwNTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/90531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/utx0",
      "html_url": "https://github.com/utx0",
      "followers_url": "https://api.github.com/users/utx0/followers",
      "following_url": "https://api.github.com/users/utx0/following{/other_user}",
      "gists_url": "https://api.github.com/users/utx0/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/utx0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/utx0/subscriptions",
      "organizations_url": "https://api.github.com/users/utx0/orgs",
      "repos_url": "https://api.github.com/users/utx0/repos",
      "events_url": "https://api.github.com/users/utx0/events{/privacy}",
      "received_events_url": "https://api.github.com/users/utx0/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-01T03:54:02Z",
    "updated_at": "2023-11-01T03:54:02Z",
    "author_association": "NONE",
    "body": "> We restrict cheatcode calls to certain addresses as it's considered a bad practice—mainly the addresses 0 to 9 which are cheatcodes. You can use [`makeAddr`](https://book.getfoundry.sh/reference/forge-std/make-addr?highlight=makeaddr#makeaddr) to make a new address to do `deal` instead.\r\n\r\nCan you expand on why its bad practice, I'm not sure I follow the logic here? ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788367153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788795491",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6181#issuecomment-1788795491",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6181",
    "id": 1788795491,
    "node_id": "IC_kwDOGBlvNc5qntpj",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-01T11:23:10Z",
    "updated_at": "2023-11-01T11:23:10Z",
    "author_association": "COLLABORATOR",
    "body": "I think this was fixed by https://github.com/foundry-rs/foundry/pull/6182, so closing\r\n\r\nOriginally in https://github.com/foundry-rs/foundry/pull/4905 we considered disallowing deal since you typically won’t need to send ETH to precompiles, but you can so we ended up allowing it. Guessing it was accidentally changed in the recent refactor but should be fixed now",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1788795491/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

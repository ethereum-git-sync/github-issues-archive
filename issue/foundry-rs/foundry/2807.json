{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2807",
  "id": 1341296339,
  "node_id": "I_kwDOGBlvNc5P8o7T",
  "number": 2807,
  "title": "Verify can exit without any indication of issue",
  "user": {
    "login": "jordaniza",
    "id": 45881807,
    "node_id": "MDQ6VXNlcjQ1ODgxODA3",
    "avatar_url": "https://avatars.githubusercontent.com/u/45881807?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jordaniza",
    "html_url": "https://github.com/jordaniza",
    "followers_url": "https://api.github.com/users/jordaniza/followers",
    "following_url": "https://api.github.com/users/jordaniza/following{/other_user}",
    "gists_url": "https://api.github.com/users/jordaniza/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jordaniza/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jordaniza/subscriptions",
    "organizations_url": "https://api.github.com/users/jordaniza/orgs",
    "repos_url": "https://api.github.com/users/jordaniza/repos",
    "events_url": "https://api.github.com/users/jordaniza/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jordaniza/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3854218343,
      "node_id": "LA_kwDOGBlvNc7lurRn",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-verify",
      "name": "Cmd-forge-verify",
      "color": "006B75",
      "default": false,
      "description": "Command: forge verify-contract"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-08-17T07:16:46Z",
  "updated_at": "2022-08-17T13:18:59Z",
  "closed_at": "2022-08-17T13:18:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (ccb9aa5 2022-08-17T00:03:47.513943128Z)\n\n### What command(s) is the bug in?\n\nforge verify\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nAdding a few issues surrounding verify. This is a relatively minor one:\r\n\r\nSubmitting contracts for verify in `forge script --verify` or with the `verify` command can sometimes fail to find contracts for verification. A separate issue will be raised to keep the issue log clean, but the error messaging is a bit spartan.\r\n\r\nSpecifically:\r\n\r\n```rs\r\n// cli/src/cmd/forge/script/sequence.rs (217)\r\n// ... \r\n  println!(\"##\\nStart Contract Verification\");\r\n  for verification in future_verifications {\r\n      verification.await?;\r\n  }\r\n}\r\nOk(())\r\n```\r\n\r\nIn the event of `future_verifications` being an empty Vec, there is no messaging to indicate 'couldn't find contracts to verify' or something similar. The application instead will exit with no messaging to the user.\r\n\r\nIt would be helpful to display improved error messaging in this situtation:\r\n\r\n1) In the base case, if `future_verifications.len() == 0`, it might be useful to note to the user that no verification contracts were submitted - this at least gives a status of WHAT happened, not why.\r\n\r\n2) In the ideal case, we might compare expected verifications (for example, the number of CREATE transaction receipts) versus actual verifications. This could throw some warnings to the user to indicate that only a partial verification happened.   ",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1217911025",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2807#issuecomment-1217911025",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807",
    "id": 1217911025,
    "node_id": "IC_kwDOGBlvNc5Il9jx",
    "user": {
      "login": "rkrasiuk",
      "id": 25429261,
      "node_id": "MDQ6VXNlcjI1NDI5MjYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25429261?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkrasiuk",
      "html_url": "https://github.com/rkrasiuk",
      "followers_url": "https://api.github.com/users/rkrasiuk/followers",
      "following_url": "https://api.github.com/users/rkrasiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkrasiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkrasiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkrasiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/rkrasiuk/orgs",
      "repos_url": "https://api.github.com/users/rkrasiuk/repos",
      "events_url": "https://api.github.com/users/rkrasiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkrasiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-17T11:55:05Z",
    "updated_at": "2022-08-17T11:55:05Z",
    "author_association": "COLLABORATOR",
    "body": "Etherscan API is slow to pick up newly deployed contracts, that's why we have a retry logic implemented around it. There isn't much we could do to improve that. Open for suggestions.\r\n\r\nRegarding script verification UX, agree, good points",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1217911025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1217962202",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2807#issuecomment-1217962202",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2807",
    "id": 1217962202,
    "node_id": "IC_kwDOGBlvNc5ImKDa",
    "user": {
      "login": "jordaniza",
      "id": 45881807,
      "node_id": "MDQ6VXNlcjQ1ODgxODA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/45881807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jordaniza",
      "html_url": "https://github.com/jordaniza",
      "followers_url": "https://api.github.com/users/jordaniza/followers",
      "following_url": "https://api.github.com/users/jordaniza/following{/other_user}",
      "gists_url": "https://api.github.com/users/jordaniza/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jordaniza/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jordaniza/subscriptions",
      "organizations_url": "https://api.github.com/users/jordaniza/orgs",
      "repos_url": "https://api.github.com/users/jordaniza/repos",
      "events_url": "https://api.github.com/users/jordaniza/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jordaniza/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-17T12:45:27Z",
    "updated_at": "2022-08-17T12:45:27Z",
    "author_association": "NONE",
    "body": "> Etherscan API is slow to pick up newly deployed contracts, that's why we have a retry logic implemented around it. There isn't much we could do to improve that. Open for suggestions.\n> \n> Regarding script verification UX, agree, good points\n\n I think you're good, some indication would be good as you've already implemented. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1217962202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

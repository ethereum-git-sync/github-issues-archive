{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5764",
  "id": 1875861140,
  "node_id": "I_kwDOGBlvNc5vz16U",
  "number": 5764,
  "title": "Pure json serialization cheatcodes ",
  "user": {
    "login": "vdrg",
    "id": 3252614,
    "node_id": "MDQ6VXNlcjMyNTI2MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3252614?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vdrg",
    "html_url": "https://github.com/vdrg",
    "followers_url": "https://api.github.com/users/vdrg/followers",
    "following_url": "https://api.github.com/users/vdrg/following{/other_user}",
    "gists_url": "https://api.github.com/users/vdrg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vdrg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vdrg/subscriptions",
    "organizations_url": "https://api.github.com/users/vdrg/orgs",
    "repos_url": "https://api.github.com/users/vdrg/repos",
    "events_url": "https://api.github.com/users/vdrg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vdrg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-31T16:23:08Z",
  "updated_at": "2023-09-05T20:04:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nHi everyone!\r\n\r\nThe current approach to handling JSON feels somewhat suboptimal. Working with the id -> json map feels like an extra step, which, in my opinion, isn't entirely necessary. If the JSON serialization methods were made \"pure\", they could operate directly on a JSON string, which has the advantages of not modifying state and being more intuitive.\r\n\r\nConsider the current method:\r\n\r\n```solidity\r\nstring memory id = \"myObj\";\r\nvm.serializeString(id, \".foo\", \"bar\");\r\nvm.serializeString(id, \".hello\", \"world\");\r\nstring memory json = vm.serializeUint(id, \".someUint\", 123);\r\n```\r\n\r\nWith a direct JSON string approach, it could be simplified to:\r\n\r\n```solidity\r\nstring memory json = '{ \"foo\": \"bar\" }';\r\njson = vm.serializeString(json, \".hello\", \"world\");\r\njson = vm.serializeUint(json, \".someUint\", 123);\r\n```\r\n\r\nThis method offers more clarity in the way we work with JSON. Also, by the convention used by `forge-std`, in this case the functions could be declared as `pure`. Of course this would break a lot of things... an alternative would be to add these as new methods (not ideal as the vm interface is already pretty big).\r\n\r\nThoughts?\r\n\r\n\r\n### Additional context\r\n\r\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1707238150",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5764#issuecomment-1707238150",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5764",
    "id": 1707238150,
    "node_id": "IC_kwDOGBlvNc5lwmMG",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T20:04:20Z",
    "updated_at": "2023-09-05T20:04:20Z",
    "author_association": "COLLABORATOR",
    "body": "This does make sense to me and feels simpler. \r\n\r\n@odyslam any insight into why we went with the current approach? I feel like I recall expecting it to work in the way suggested here, and can't remember the rationale for the current approach.\r\n\r\nGiven scope of the change, if we do implement this, my suggestion would be to namespace the cheats behind a `_v2` or something and if everyone agrees this is better then at some point there can be a breaking change to remove the old version",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1707238150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1387",
  "id": 1212611309,
  "node_id": "I_kwDOGBlvNc5IRvrt",
  "number": 1387,
  "title": "Surface more information about revert reasons (Dapp/HEVM parity)",
  "user": {
    "login": "iamchrissmith",
    "id": 1408372,
    "node_id": "MDQ6VXNlcjE0MDgzNzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1408372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iamchrissmith",
    "html_url": "https://github.com/iamchrissmith",
    "followers_url": "https://api.github.com/users/iamchrissmith/followers",
    "following_url": "https://api.github.com/users/iamchrissmith/following{/other_user}",
    "gists_url": "https://api.github.com/users/iamchrissmith/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iamchrissmith/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iamchrissmith/subscriptions",
    "organizations_url": "https://api.github.com/users/iamchrissmith/orgs",
    "repos_url": "https://api.github.com/users/iamchrissmith/repos",
    "events_url": "https://api.github.com/users/iamchrissmith/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iamchrissmith/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3593644915,
      "node_id": "LA_kwDOGBlvNc7WMqtz",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-test",
      "name": "Cmd-forge-test",
      "color": "006B75",
      "default": false,
      "description": "Command: forge test"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3703753090,
      "node_id": "LA_kwDOGBlvNc7cwsmC",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/A-tracing",
      "name": "A-tracing",
      "color": "FBCA04",
      "default": false,
      "description": "Area: tracing"
    },
    {
      "id": 3759719580,
      "node_id": "LA_kwDOGBlvNc7gGMSc",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/P-normal",
      "name": "P-normal",
      "color": "D93F0B",
      "default": false,
      "description": "Priority: normal"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1",
    "html_url": "https://github.com/foundry-rs/foundry/milestone/1",
    "labels_url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1/labels",
    "id": 8140456,
    "node_id": "MI_kwDOGBlvNc4AfDao",
    "number": 1,
    "title": "v1.0.0",
    "description": "",
    "creator": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 10,
    "closed_issues": 125,
    "state": "open",
    "created_at": "2022-06-28T08:15:32Z",
    "updated_at": "2023-05-12T14:44:03Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 16,
  "created_at": "2022-04-22T17:31:34Z",
  "updated_at": "2022-07-28T15:23:04Z",
  "closed_at": "2022-07-24T01:29:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nCurrently when a call reverts during a test, we get limited reasons for the revert.  Dapp/HEVM test provides more information (see screen shots of the two outputs).\r\n\r\n![forge-failure](https://user-images.githubusercontent.com/1408372/164765002-292cc035-9e2d-41b8-90bf-531614451506.png)\r\n![dapp-failure](https://user-images.githubusercontent.com/1408372/164765003-81f735ff-c4b8-4883-bef4-5ce48600e4bc.png)\r\n\r\n\r\n### Additional context\r\n\r\nadjusting the verbosity of the tests did not seem to change this part of the output",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107472817",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107472817",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1107472817,
    "node_id": "IC_kwDOGBlvNc5CArGx",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-23T13:33:10Z",
    "updated_at": "2022-04-23T13:33:10Z",
    "author_association": "MEMBER",
    "body": "That's weird, what kind of errors are you using? I assume custom errors? Can you share an example of where this happens? The reverts should be decoded, so this is a bug (marking it as such)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107472817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107514233",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107514233",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1107514233,
    "node_id": "IC_kwDOGBlvNc5CA1N5",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-23T14:42:37Z",
    "updated_at": "2022-04-23T14:42:37Z",
    "author_association": "COLLABORATOR",
    "body": "I think there are at least a few revert edge cases that don't currently show any information except `()`, which should be handled better. Let me try to come up with a test file demonstrating these and I'll drop it here.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107514233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107515563",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107515563",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1107515563,
    "node_id": "IC_kwDOGBlvNc5CA1ir",
    "user": {
      "login": "iamchrissmith",
      "id": 1408372,
      "node_id": "MDQ6VXNlcjE0MDgzNzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1408372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamchrissmith",
      "html_url": "https://github.com/iamchrissmith",
      "followers_url": "https://api.github.com/users/iamchrissmith/followers",
      "following_url": "https://api.github.com/users/iamchrissmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamchrissmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamchrissmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamchrissmith/subscriptions",
      "organizations_url": "https://api.github.com/users/iamchrissmith/orgs",
      "repos_url": "https://api.github.com/users/iamchrissmith/repos",
      "events_url": "https://api.github.com/users/iamchrissmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamchrissmith/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-23T14:52:11Z",
    "updated_at": "2022-04-25T14:36:21Z",
    "author_association": "NONE",
    "body": "@onbjerg and @mds1 thanks for taking a look at this.  ~I created a basic and arbitrary example of how to recreate this specific issue in this branch~ edit: closed branch as it sounds like the issue is more than this one case.  Thanks!\r\n\r\nLet me know if that helps or if I can provide any more information",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107515563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107518351",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107518351",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1107518351,
    "node_id": "IC_kwDOGBlvNc5CA2OP",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-23T15:10:09Z",
    "updated_at": "2022-04-23T15:11:14Z",
    "author_association": "COLLABORATOR",
    "body": "Ok there are actually _a lot_ more cases than I realized, so maybe I won't be putting a POC together for each just yet 😅\r\n- [Here](https://github.com/dapphub/dapptools/blob/master/src/hevm/src/EVM.hs#L71) is the list of revert cases HEVM handles, you can see the `StateChangeWhileStatic` one that @iamchrissmith is looking for. \r\n- [Here](https://github.com/NomicFoundation/hardhat/blob/43dd1d5a519084529fedba411eb5d665405d28da/packages/hardhat-core/src/internal/hardhat-network/stack-traces/solidity-stack-trace.ts#L7) are the ones Hardhat looks for.\r\n\r\nAn additional one is deploying a contract to an address that already has code.\r\n\r\nI've encountered a few of those in testing and they usually just show `()` in the trace and `[FAIL. Reason: Revert]` as the revert reason.  For reference, some geth errors are [here](https://github.com/ethereum/go-ethereum/blob/f32feeb260054d7c90c1efd57dfec6b717717e18/core/error.go#L38), though not all would be applicable.\r\n\r\nThe ones that I think should be prioritized are based on what I've seen in foundry support:\r\n- ETH balance too low\r\n- State change while static\r\n- Function not payable\r\n- `fallback` not payable and no `receive`\r\n- Calling an address that has no code\r\n- No fallback method and function selector not found\r\n- Deploying a contract to an address that already has code",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107518351/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107533391",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107533391",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1107533391,
    "node_id": "IC_kwDOGBlvNc5CA55P",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-23T16:51:49Z",
    "updated_at": "2022-04-23T16:51:49Z",
    "author_association": "MEMBER",
    "body": "Ahh those, ok. I was under the impression that this was a custom revert, but these reverts are already on my todo list. It requires some changes in REVM - at a top level, REVM just turns all of this into a revert, so we need to catch the actual revert reason in `call_end`/`create_end` before this transformation. This is not currently the case for all code paths that can revert",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1107533391/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 3,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1158056609",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1158056609",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1158056609,
    "node_id": "IC_kwDOGBlvNc5FBoqh",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-16T19:29:50Z",
    "updated_at": "2022-06-16T19:29:50Z",
    "author_association": "MEMBER",
    "body": "@meetmangukiya is this something of interest to you?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1158056609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165321965",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165321965",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165321965,
    "node_id": "IC_kwDOGBlvNc5FdWbt",
    "user": {
      "login": "meetmangukiya",
      "id": 7620533,
      "node_id": "MDQ6VXNlcjc2MjA1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meetmangukiya",
      "html_url": "https://github.com/meetmangukiya",
      "followers_url": "https://api.github.com/users/meetmangukiya/followers",
      "following_url": "https://api.github.com/users/meetmangukiya/following{/other_user}",
      "gists_url": "https://api.github.com/users/meetmangukiya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meetmangukiya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meetmangukiya/subscriptions",
      "organizations_url": "https://api.github.com/users/meetmangukiya/orgs",
      "repos_url": "https://api.github.com/users/meetmangukiya/repos",
      "events_url": "https://api.github.com/users/meetmangukiya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meetmangukiya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T08:13:39Z",
    "updated_at": "2022-06-24T08:13:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, have been looking into this past few days. Most of these are solidity security features and no direct status from revm.\r\n\r\nHardhat does most of [these detections](https://github.com/NomicFoundation/hardhat/blob/master/packages/hardhat-core/src/internal/hardhat-network/stack-traces/error-inferrer.ts) by looking into last few steps / opcodes. Thinking how to maintain such state, can store steps history with current inspector's `step` / `step_end` and on a revert can peek that the same way hardhat does. `call_end` / `create_end` won't be of much help here because most of these inference require looking into past few steps. I think we want to be able to decode the reverts in [trace decoder too](https://github.com/gakonst/foundry/blob/f2b88826e9613948b96bbdd520c4d63cb43fc978/evm/src/trace/decoder.rs#L272-L279) but inspector context won't be available there even if we end up storing and collecting steps history in one of the inspectors. \r\n\r\nAny suggestions on a good way to share the steps history context with the trace decoder and in multiple other places where [`decode_revert`](https://github.com/gakonst/foundry/blob/6f2ce13208cde6f7241b2a3d97b3c8d79fb3a6c2/utils/src/lib.rs#L305) gets used?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165321965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165854643",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165854643",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165854643,
    "node_id": "IC_kwDOGBlvNc5FfYez",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T19:06:05Z",
    "updated_at": "2022-06-24T19:06:05Z",
    "author_association": "MEMBER",
    "body": "> won't be of much help here because most of these inference require looking into past few steps.\r\n\r\ncan we record them via `Inspector::step`?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165854643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165905157",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165905157",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165905157,
    "node_id": "IC_kwDOGBlvNc5Ffk0F",
    "user": {
      "login": "meetmangukiya",
      "id": 7620533,
      "node_id": "MDQ6VXNlcjc2MjA1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meetmangukiya",
      "html_url": "https://github.com/meetmangukiya",
      "followers_url": "https://api.github.com/users/meetmangukiya/followers",
      "following_url": "https://api.github.com/users/meetmangukiya/following{/other_user}",
      "gists_url": "https://api.github.com/users/meetmangukiya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meetmangukiya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meetmangukiya/subscriptions",
      "organizations_url": "https://api.github.com/users/meetmangukiya/orgs",
      "repos_url": "https://api.github.com/users/meetmangukiya/repos",
      "events_url": "https://api.github.com/users/meetmangukiya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meetmangukiya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T20:17:40Z",
    "updated_at": "2022-06-24T20:17:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, that seems like the only way to record the execution steps. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165905157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165980269",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165980269",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165980269,
    "node_id": "IC_kwDOGBlvNc5Ff3Jt",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T22:05:59Z",
    "updated_at": "2022-06-24T22:05:59Z",
    "author_association": "MEMBER",
    "body": "I don't think doing it in `step` is necessary - essentially it is a \"bug\"/incompleteness in REVM where the `call_end`/`create_end` method is *not* called in the correct places (e.g. when you're out of funds), so we'd need to redesign the call_inner/create_inner functions in REVM to *always* call `call_end`/`create_end` whenever it returns.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165980269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165981247",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165981247",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165981247,
    "node_id": "IC_kwDOGBlvNc5Ff3Y_",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T22:07:46Z",
    "updated_at": "2022-06-24T22:07:46Z",
    "author_association": "MEMBER",
    "body": "See for example here:\r\n\r\nIf we're too deep, we just return an error (which will unwind all execution so it's OK, but we don't catch this error):\r\n\r\nhttps://github.com/bluealloy/revm/blob/eb7af7080dd89d5d75e9438395d02ee623651135/crates/revm/src/evm_impl.rs#L467-L469\r\n\r\nSame for funds etc. These are then converted by REVM to just being a \"revert\". We only ever call `call_end` in the end after the interpreter has run: https://github.com/bluealloy/revm/blob/eb7af7080dd89d5d75e9438395d02ee623651135/crates/revm/src/evm_impl.rs#L552-L553\r\n\r\nOr if we short-circuit using an inspector: https://github.com/bluealloy/revm/blob/eb7af7080dd89d5d75e9438395d02ee623651135/crates/revm/src/evm_impl.rs#L451",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165981247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165985078",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1165985078",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1165985078,
    "node_id": "IC_kwDOGBlvNc5Ff4U2",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-24T22:15:41Z",
    "updated_at": "2022-06-24T22:15:41Z",
    "author_association": "MEMBER",
    "body": "Also ref #476 (same underlying issue)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1165985078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193338327",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1193338327",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1193338327,
    "node_id": "IC_kwDOGBlvNc5HIOXX",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-24T15:19:07Z",
    "updated_at": "2022-07-24T15:19:07Z",
    "author_association": "COLLABORATOR",
    "body": "> The ones that I think should be prioritized are based on what I've seen in foundry support:\r\n> \r\n> - ETH balance too low\r\n> - State change while static\r\n> - Function not payable\r\n> - fallback not payable and no receive\r\n> - Calling an address that has no code\r\n> - No fallback method and function selector not found\r\n> - Deploying a contract to an address that already has code\r\n\r\nJust to confirm, where all of the above implemented and now properly decoded in traces as part of #2130? There are also other revert reasons linked in https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1107518351 which we should track somewhere (maybe they are tracked somewhere, but this issue was the main one I'm aware of, so given that it's now closed I'm just checking status here) ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193338327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193374892",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1193374892",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1193374892,
    "node_id": "IC_kwDOGBlvNc5HIXSs",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-24T18:59:45Z",
    "updated_at": "2022-07-24T18:59:45Z",
    "author_association": "MEMBER",
    "body": "If they surface VM errors then they are covered by #2130, yes. If they require deeper analysis from our side then it was not implemented",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193374892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1195730396",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1195730396",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1195730396,
    "node_id": "IC_kwDOGBlvNc5HRWXc",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T16:49:40Z",
    "updated_at": "2022-07-26T16:49:40Z",
    "author_association": "COLLABORATOR",
    "body": "How do you/we know which error is which? For example I would have suspected https://github.com/foundry-rs/foundry/issues/2479 to be a VM error but I don't actually know.\r\n\r\nLack of clear error messages in traces has been a pain point IME, so I'm happy to help setup issues or something for tracking these if you need 🙂",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1195730396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1198304250",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1387#issuecomment-1198304250",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1387",
    "id": 1198304250,
    "node_id": "IC_kwDOGBlvNc5HbKv6",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-28T15:23:04Z",
    "updated_at": "2022-07-28T15:23:04Z",
    "author_association": "MEMBER",
    "body": "It is a VM error, so I'm unsure if the person that posted that issue did not update. They didn't post the version of Forge they are using",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1198304250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

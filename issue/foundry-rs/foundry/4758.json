{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4758",
  "id": 1672303180,
  "node_id": "I_kwDOGBlvNc5jrVJM",
  "number": 4758,
  "title": "Unable to run scripts on contracts with linked libraries",
  "user": {
    "login": "chlwys",
    "id": 40616911,
    "node_id": "MDQ6VXNlcjQwNjE2OTEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/40616911?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chlwys",
    "html_url": "https://github.com/chlwys",
    "followers_url": "https://api.github.com/users/chlwys/followers",
    "following_url": "https://api.github.com/users/chlwys/following{/other_user}",
    "gists_url": "https://api.github.com/users/chlwys/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chlwys/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chlwys/subscriptions",
    "organizations_url": "https://api.github.com/users/chlwys/orgs",
    "repos_url": "https://api.github.com/users/chlwys/repos",
    "events_url": "https://api.github.com/users/chlwys/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chlwys/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-18T03:54:10Z",
  "updated_at": "2023-06-20T13:54:29Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (4a0c8dc 2023-04-15T00:09:32.582313000Z)\n\n### What command(s) is the bug in?\n\nforge script\n\n### Operating System\n\nmacOS (Intel)\n\n### Describe the bug\n\nRunning scripts fails when including linked libraries. Removing the linked library or converting it to an internal library allows skips the bug. Fails on both solidity 0.8.13 and 0.8.17\r\n\r\nNeed to use linked libraries here because of contract space constraints.\r\n\r\nLogs:\r\n\r\n> stderr:\r\n> \r\n> tderr: 31\r\n> stderr: mThe application panicked (crashed).\r\n> Message:  called `Option::unwrap()` on a `None` value\r\n> Location: /Users/runner/work/foundry/foundry/cli/src/cmd/forge/script/executor.rs:48\r\n> \r\n> This is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n> \r\n>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\r\n>    1: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    2: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    3: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    4: __mh_execute_header\r\n> \r\n> tderr: 90m<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    5: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    6: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    7: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    8: __mh_execute_header\r\n> \r\n> tderr: 90m<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>    9: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   10: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   11: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   12: __mh_execute_header\r\n> \r\n> tderr: m<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   13: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   14: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n>   15: __mh_execute_header<unknown>\r\n>       at <unknown source file>:<unknown line>\r\n> stderr:\r\n> \r\n> Run with COLORBT_SHOW_HIDDEN=1 environment variable to disable frame filtering.\r\n> Run with RUST_BACKTRACE=full to include source snippets.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1515810521",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4758#issuecomment-1515810521",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758",
    "id": 1515810521,
    "node_id": "IC_kwDOGBlvNc5aWW7Z",
    "user": {
      "login": "chlwys",
      "id": 40616911,
      "node_id": "MDQ6VXNlcjQwNjE2OTEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/40616911?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chlwys",
      "html_url": "https://github.com/chlwys",
      "followers_url": "https://api.github.com/users/chlwys/followers",
      "following_url": "https://api.github.com/users/chlwys/following{/other_user}",
      "gists_url": "https://api.github.com/users/chlwys/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chlwys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chlwys/subscriptions",
      "organizations_url": "https://api.github.com/users/chlwys/orgs",
      "repos_url": "https://api.github.com/users/chlwys/repos",
      "events_url": "https://api.github.com/users/chlwys/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chlwys/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T06:59:23Z",
    "updated_at": "2023-04-20T06:59:23Z",
    "author_association": "NONE",
    "body": "update: we've fixed it by adding a test with incorrect import syntax (importing a contract that doesnt exist)\r\n\r\nno clue why this works. its just a load bearing test now. the bug still exists",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1515810521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598838760",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4758#issuecomment-1598838760",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4758",
    "id": 1598838760,
    "node_id": "IC_kwDOGBlvNc5fTFfo",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-20T13:54:29Z",
    "updated_at": "2023-06-20T13:54:29Z",
    "author_association": "MEMBER",
    "body": "Hey @chlwys — could you retry this and see if it's working now? We just fixed a major bug in linking would like to see if this tackled it.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598838760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

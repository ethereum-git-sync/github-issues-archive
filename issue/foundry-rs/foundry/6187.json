{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/6187",
  "id": 1972636061,
  "node_id": "I_kwDOGBlvNc51lAmd",
  "number": 6187,
  "title": "Ability to manually disable PUSH0 Support for Compiler Versions >=0.8.20",
  "user": {
    "login": "jhweintraub",
    "id": 26035072,
    "node_id": "MDQ6VXNlcjI2MDM1MDcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/26035072?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jhweintraub",
    "html_url": "https://github.com/jhweintraub",
    "followers_url": "https://api.github.com/users/jhweintraub/followers",
    "following_url": "https://api.github.com/users/jhweintraub/following{/other_user}",
    "gists_url": "https://api.github.com/users/jhweintraub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jhweintraub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jhweintraub/subscriptions",
    "organizations_url": "https://api.github.com/users/jhweintraub/orgs",
    "repos_url": "https://api.github.com/users/jhweintraub/repos",
    "events_url": "https://api.github.com/users/jhweintraub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jhweintraub/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-11-01T15:50:34Z",
  "updated_at": "2023-11-27T15:42:31Z",
  "closed_at": "2023-11-01T17:33:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nStarting in Solidity Version `0.8.20`, the `PUSH0` opcode was implemented in compiled bytecode. As it currently stands only Ethereum mainnet supports this opcode. Anyone wishing to deploy their solidity to an EVM-Chain that is not mainnet is forced to use Solidity Version `0.8.19`. Given as OpenZeppelin has released newer versions with 0.8.20, this can be a real headache for developers's compatibility problems when building contracts intended to be multi-chain or exclusively to L2.\r\n\r\nFeature Request: A new `foundry.toml` configuration option `USE_PUSH0` which can be toggled manually and will not compile with the opcode if set to false. This would allow users to take advantage of newer features of the language and associated common libraries without harming their ability to directly deploy such code to the network of their choice.\n\n### Additional context\n\n_No response_",
  "closed_by": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1789370160",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6187#issuecomment-1789370160",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187",
    "id": 1789370160,
    "node_id": "IC_kwDOGBlvNc5qp58w",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-01T17:33:31Z",
    "updated_at": "2023-11-01T17:33:31Z",
    "author_association": "COLLABORATOR",
    "body": "You can use the `evm_version` flag to control which EVM version solc generates bytecode for. Although solc defaults to shanghai, forge defaults to paris and therefore even with solc 0.8.20 and later PUSH0 is not used by default:\r\n- https://book.getfoundry.sh/reference/config/solidity-compiler#evm_version\r\n- https://docs.soliditylang.org/en/latest/using-the-compiler.html#setting-the-evm-version-to-target",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1789370160/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1827631544",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6187#issuecomment-1827631544",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187",
    "id": 1827631544,
    "node_id": "IC_kwDOGBlvNc5s73G4",
    "user": {
      "login": "dezzeus",
      "id": 1730846,
      "node_id": "MDQ6VXNlcjE3MzA4NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1730846?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dezzeus",
      "html_url": "https://github.com/dezzeus",
      "followers_url": "https://api.github.com/users/dezzeus/followers",
      "following_url": "https://api.github.com/users/dezzeus/following{/other_user}",
      "gists_url": "https://api.github.com/users/dezzeus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dezzeus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dezzeus/subscriptions",
      "organizations_url": "https://api.github.com/users/dezzeus/orgs",
      "repos_url": "https://api.github.com/users/dezzeus/repos",
      "events_url": "https://api.github.com/users/dezzeus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dezzeus/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-27T11:14:51Z",
    "updated_at": "2023-11-27T11:14:51Z",
    "author_association": "NONE",
    "body": "That's what I was looking and hoping for, but was not sure as your doc states _\"The EVM version to use during tests\"_ which seems to say that it's not the one generally used (e.g. for deployment).",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1827631544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1828081359",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6187#issuecomment-1828081359",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6187",
    "id": 1828081359,
    "node_id": "IC_kwDOGBlvNc5s9k7P",
    "user": {
      "login": "jhweintraub",
      "id": 26035072,
      "node_id": "MDQ6VXNlcjI2MDM1MDcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/26035072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhweintraub",
      "html_url": "https://github.com/jhweintraub",
      "followers_url": "https://api.github.com/users/jhweintraub/followers",
      "following_url": "https://api.github.com/users/jhweintraub/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhweintraub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhweintraub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhweintraub/subscriptions",
      "organizations_url": "https://api.github.com/users/jhweintraub/orgs",
      "repos_url": "https://api.github.com/users/jhweintraub/repos",
      "events_url": "https://api.github.com/users/jhweintraub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhweintraub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-27T15:42:29Z",
    "updated_at": "2023-11-27T15:42:29Z",
    "author_association": "NONE",
    "body": "> That's what I was looking and hoping for, but was not sure as your doc states _\"The EVM version to use during tests\"_ which seems to say that it's not the one generally used (e.g. for deployment).\r\n\r\nI have also encountered this and had issue with attempting to deploy to L2 networks despite specifying the EVM version in the config file. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1828081359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2915",
  "id": 1349254744,
  "node_id": "I_kwDOGBlvNc5Qa_5Y",
  "number": 2915,
  "title": "Could not read source code for analysis",
  "user": {
    "login": "fedealconada",
    "id": 4473536,
    "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fedealconada",
    "html_url": "https://github.com/fedealconada",
    "followers_url": "https://api.github.com/users/fedealconada/followers",
    "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
    "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
    "organizations_url": "https://api.github.com/users/fedealconada/orgs",
    "repos_url": "https://api.github.com/users/fedealconada/repos",
    "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fedealconada/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4233058229,
      "node_id": "LA_kwDOGBlvNc78T1e1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-coverage",
      "name": "Cmd-forge-coverage",
      "color": "006B75",
      "default": false,
      "description": "Command: forge coverage"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1",
    "html_url": "https://github.com/foundry-rs/foundry/milestone/1",
    "labels_url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1/labels",
    "id": 8140456,
    "node_id": "MI_kwDOGBlvNc4AfDao",
    "number": 1,
    "title": "v1.0.0",
    "description": "",
    "creator": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 10,
    "closed_issues": 125,
    "state": "open",
    "created_at": "2022-06-28T08:15:32Z",
    "updated_at": "2023-05-12T14:44:03Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 11,
  "created_at": "2022-08-24T10:57:46Z",
  "updated_at": "2023-01-04T08:03:43Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (4e11d1f 2022-08-24T00:12:55.883067Z)\n\n### What command(s) is the bug in?\n\nforge coverage\n\n### Operating System\n\nmacOS (Intel)\n\n### Describe the bug\n\nAfter running `forge coverage` on [this](https://github.com/sense-finance/sense-v1/tree/dev/pkg/core) directory I'm getting the following message:\r\n\r\n```\r\nAnalysing contracts...\r\nError:\r\nCould not read source code for analysis\r\n\r\nContext:\r\n- Error #0: failed to read from \"/src/Divider.sol\": No such file or directory (os error 2)\r\n- Error #1: No such file or directory (os error 2)\r\n```\r\n\r\nWe are using `yarn` as dependency manager and we are using `yarn workspaces` to handle multiple packages on the same repo.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1226390760",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1226390760",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1226390760,
    "node_id": "IC_kwDOGBlvNc5JGTzo",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T21:26:36Z",
    "updated_at": "2022-08-24T21:26:36Z",
    "author_association": "MEMBER",
    "body": "So it seems like it is because of the way the remappings are set up, but I'm still investigating exactly what happens.\r\n\r\nEssentially, each of your packages has a remapping for itself. I think this is because all the packages depend on each other somehow, so you need to have all of the remappings defined in case the dependency uses it, correct?\r\n\r\nIn any case, if you build e.g. the package `core`, then any source file in that package will end up having an invalid absolute path. You can verify this by just running `forge build` and inspecting the `.ast.absolutePath` field in the artifact for e.g. `Divider.sol`. All other paths are well-formed, which is interesting - if you instead compile e.g. `fuse`, then all paths are well-formed, except for any file in the `fuse` package, e.g. `PoolManager.sol`.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1226390760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1226439931",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1226439931",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1226439931,
    "node_id": "IC_kwDOGBlvNc5JGfz7",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T21:49:50Z",
    "updated_at": "2022-08-24T21:51:44Z",
    "author_association": "MEMBER",
    "body": "Changing up the remappings a bit makes it sort of work, but the report is very cluttered because none of the sub-packages are *actually* dependencies, it just looks at it as one big source tree.\r\n\r\nChanging `core/foundry.toml` to this:\r\n\r\n```toml\r\n[profile.default]\r\nroot = \".\"\r\nlibs = ['../../node_modules/', '../utils', '../fuse']\r\ntests = \"./src/tests\"\r\nffi = true\r\nverbosity = 3\r\nremappings = [\r\n    '@sense-finance/v1-utils=../utils',\r\n    '@sense-finance/v1-core/=../core',\r\n    '@sense-finance/v1-fuse/=../fuse',\r\n    '@rari-capital/solmate=../../node_modules/@rari-capital/solmate',\r\n    '@openzeppelin/contracts=../../node_modules/@openzeppelin/contracts',\r\n    'ds-test/=./src/tests/test-helpers/'\r\n]\r\n```\r\n\r\nMakes it get past the error. I couldn't get the tests to run without failing though so unsure how valid the report is",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1226439931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1227258354",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1227258354",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1227258354,
    "node_id": "IC_kwDOGBlvNc5JJnny",
    "user": {
      "login": "fedealconada",
      "id": 4473536,
      "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedealconada",
      "html_url": "https://github.com/fedealconada",
      "followers_url": "https://api.github.com/users/fedealconada/followers",
      "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
      "organizations_url": "https://api.github.com/users/fedealconada/orgs",
      "repos_url": "https://api.github.com/users/fedealconada/repos",
      "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedealconada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T13:26:36Z",
    "updated_at": "2022-08-25T13:26:36Z",
    "author_association": "NONE",
    "body": "Thanks so much for investigating the issue! \r\nI tried only changing the `core/foundry.toml` file as you suggested and got this error:\r\n```\r\n[â Š] Compiling...\r\nError:\r\nFailed to resolve file: \"/src/libs/Errors.sol\": No such file or directory (os error 2).\r\n    --> \"/Users/fedealconada/Development/sense-v1/pkg/core/src/Divider.sol\"\r\n        \"@sense-finance/v1-utils/src/libs/Errors.sol\"\r\n    Check configured remappings.\r\n```\r\n\r\nI have then \"fixed\" the other .toml files (following the same logic) and the error is gone but I got a new one:\r\n\r\n```\r\nforge coverage\r\n\r\nthread 'main' has overflowed its stack\r\nfatal runtime error: stack overflow\r\n[7]    43932 abort      forge coverage\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1227258354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1227673745",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1227673745",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1227673745,
    "node_id": "IC_kwDOGBlvNc5JLNCR",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T19:28:43Z",
    "updated_at": "2022-08-25T19:28:43Z",
    "author_association": "MEMBER",
    "body": "Can you post the tomls? Some parts of the toml are very important here since a misconfiguration leads to recursion in your repository",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1227673745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1229147381",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1229147381",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1229147381,
    "node_id": "IC_kwDOGBlvNc5JQ0z1",
    "user": {
      "login": "fedealconada",
      "id": 4473536,
      "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedealconada",
      "html_url": "https://github.com/fedealconada",
      "followers_url": "https://api.github.com/users/fedealconada/followers",
      "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
      "organizations_url": "https://api.github.com/users/fedealconada/orgs",
      "repos_url": "https://api.github.com/users/fedealconada/repos",
      "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedealconada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-27T08:05:51Z",
    "updated_at": "2022-09-12T10:22:33Z",
    "author_association": "NONE",
    "body": "Here they are!\r\n\r\n`core/foundry.toml`\r\n```\r\n[profile.default]\r\nroot = \".\"\r\nlibs = ['../../node_modules/', '../utils', '../fuse']\r\ntests = \"./src/tests\"\r\nffi = true\r\nverbosity = 3\r\nremappings = [\r\n    '@sense-finance/v1-utils=../utils',\r\n    '@sense-finance/v1-core/=./',\r\n    '@sense-finance/v1-fuse/=../fuse',\r\n    '@rari-capital/solmate=../../node_modules/@rari-capital/solmate',\r\n    '@openzeppelin/contracts=../../node_modules/@openzeppelin/contracts',\r\n    'ds-test/=./src/tests/test-helpers/'\r\n]\r\n```\r\n\r\n`fuse/foundry.toml`\r\n```\r\n[profile.default]\r\nroot = \".\"\r\nlibs = ['../../node_modules/', '../utils', '../core']\r\ntests = \"./src/tests\"\r\nffi = true\r\nverbosity = 3\r\n# Fork block mined on Apr 18 2022 at 12:00:10 AM UTC\r\nfork_block_number = 14605885\r\nremappings = [\r\n    '@sense-finance/v1-utils=../utils',\r\n    '@sense-finance/v1-core=../core',\r\n    '@sense-finance/v1-fuse=./',\r\n    '@rari-capital/solmate=../../node_modules/@rari-capital/solmate',\r\n    '@openzeppelin/contracts=../../node_modules/@openzeppelin/contracts'\r\n]\r\n```\r\n\r\n`utils/foundry.toml`\r\n```\r\n[profile.default]\r\nroot = \".\"\r\nlibs = ['../../node_modules/', '../fuse', '../core']\r\ntests = \"./src/tests\"\r\nffi = true\r\nverbosity = 3\r\nremappings = [\r\n    '@sense-finance/v1-utils=./',\r\n    '@sense-finance/v1-core=../core',\r\n    '@sense-finance/v1-fuse=../fuse',\r\n    '@rari-capital/solmate=../../node_modules/@rari-capital/solmate',\r\n    '@openzeppelin/contracts=../../node_modules/@openzeppelin/contracts'\r\n]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1229147381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1240710047",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1240710047",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1240710047,
    "node_id": "IC_kwDOGBlvNc5J87uf",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-08T13:21:02Z",
    "updated_at": "2022-09-08T13:21:02Z",
    "author_association": "MEMBER",
    "body": "@fedealconada sorry for taking so long,\r\n\r\nI had a look, and one thing that's obvious is that this setup uses circular dependencies, (core imports from fuse, fuse imports from core)\r\n\r\nI checked the solc compilerinput which looks ok, there's something weird with the output however because it contains duplicate entries for `Divider.sol`: `src/Divider.sol` and `/src/Divider.sol`, this is usually a sign that solc fails to look up an import of a file in the json compilerinput (which works like a virtual file system) and instead tries to find it on disk and also adds this to the compileroutput.\r\n\r\nI wasn't able to find the root cause for this but it's definitely related to the relative imports, perhaps in combination with circular setup there are some weird edge cases...\r\n\r\nhowever I was able to resolve this by tuning the remappings and point to the `src` dir instead, this is also the default dapptools style\r\n\r\n```text\r\n    '@sense-finance/v1-utils=../utils/src',\r\n    '@sense-finance/v1-core/=./src',\r\n    '@sense-finance/v1-fuse=../fuse/src',\r\n```\r\n\r\nafter I replaced the imports in the sol files, the issue was resolved\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1240710047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243536113",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1243536113",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1243536113,
    "node_id": "IC_kwDOGBlvNc5KHtrx",
    "user": {
      "login": "fedealconada",
      "id": 4473536,
      "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedealconada",
      "html_url": "https://github.com/fedealconada",
      "followers_url": "https://api.github.com/users/fedealconada/followers",
      "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
      "organizations_url": "https://api.github.com/users/fedealconada/orgs",
      "repos_url": "https://api.github.com/users/fedealconada/repos",
      "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedealconada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T10:29:43Z",
    "updated_at": "2022-09-12T10:30:07Z",
    "author_association": "NONE",
    "body": "Hey @mattsse , thanks a ton for the follow up! I've just tried what you suggested (changing the re-mappings and replacing imports on the sol files) but I'm getting the same error as before:\r\n\r\n```\r\nforge coverage\r\n\r\nthread 'main' has overflowed its stack\r\nfatal runtime error: stack overflow\r\n[68]    42352 abort      forge coverage\r\n```\r\n\r\nJust to double check, I pushed the changes on [this](https://github.com/sense-finance/sense-v1/tree/GEN-1377-coverage) branch. [This](https://github.com/sense-finance/sense-v1/commit/5fe829def35cf6a4ccc04e2cd556e6174a26f3ad) is the commit with the `.toml` files changes and [this](https://github.com/sense-finance/sense-v1/commit/b8208a3cd02829c3cc680c68509383effbd2adab) one the one where I'm replacing the .sol files.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243536113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1258087953",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1258087953",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1258087953,
    "node_id": "IC_kwDOGBlvNc5K_OYR",
    "user": {
      "login": "fedealconada",
      "id": 4473536,
      "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedealconada",
      "html_url": "https://github.com/fedealconada",
      "followers_url": "https://api.github.com/users/fedealconada/followers",
      "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
      "organizations_url": "https://api.github.com/users/fedealconada/orgs",
      "repos_url": "https://api.github.com/users/fedealconada/repos",
      "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedealconada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-26T14:00:56Z",
    "updated_at": "2022-09-26T14:00:56Z",
    "author_association": "NONE",
    "body": "Any follow up on this @mattsse ? :)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1258087953/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1261304905",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1261304905",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1261304905,
    "node_id": "IC_kwDOGBlvNc5LLfxJ",
    "user": {
      "login": "davidlaprade",
      "id": 7997618,
      "node_id": "MDQ6VXNlcjc5OTc2MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7997618?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidlaprade",
      "html_url": "https://github.com/davidlaprade",
      "followers_url": "https://api.github.com/users/davidlaprade/followers",
      "following_url": "https://api.github.com/users/davidlaprade/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidlaprade/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidlaprade/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidlaprade/subscriptions",
      "organizations_url": "https://api.github.com/users/davidlaprade/orgs",
      "repos_url": "https://api.github.com/users/davidlaprade/repos",
      "events_url": "https://api.github.com/users/davidlaprade/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidlaprade/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-28T18:22:47Z",
    "updated_at": "2022-09-28T18:29:53Z",
    "author_association": "NONE",
    "body": "Thanks for reporting this @fedealconada. Another data-point here.\r\n\r\nI'm working on a project that was seeing the same \"could not read source code\" error when I ran `forge coverage`. In our case, ~~there weren't circular dependencies~~ there were circular dependencies, but they didn't have to be resolved in order to get the coverage tool working. The real issue seemed to be a nested dependency tree. The project had one submodule (call it A), and A itself had a submodule (call it B). The project imported from both A and B, and thus had remappings to shorten imports from B.\r\n\r\nI eventually got `forge coverage` to work on a frankenstein branch by moving the two submodules directly into `src` and deleting the corresponding remappings. But it'd obviously be great if this didn't have to be done.\r\n\r\nEDIT: see above",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1261304905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1303176996",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1303176996",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1303176996,
    "node_id": "IC_kwDOGBlvNc5NrOck",
    "user": {
      "login": "fedealconada",
      "id": 4473536,
      "node_id": "MDQ6VXNlcjQ0NzM1MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4473536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fedealconada",
      "html_url": "https://github.com/fedealconada",
      "followers_url": "https://api.github.com/users/fedealconada/followers",
      "following_url": "https://api.github.com/users/fedealconada/following{/other_user}",
      "gists_url": "https://api.github.com/users/fedealconada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fedealconada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fedealconada/subscriptions",
      "organizations_url": "https://api.github.com/users/fedealconada/orgs",
      "repos_url": "https://api.github.com/users/fedealconada/repos",
      "events_url": "https://api.github.com/users/fedealconada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fedealconada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-04T09:37:40Z",
    "updated_at": "2022-11-04T09:37:40Z",
    "author_association": "NONE",
    "body": "@mattsse we finally got this fixed. Not sure exactly why, but seems like our remappings in the `foundry.toml` needed the `/src` (and I removed them from the contracts). The other way around was throwing an error.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1303176996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1370591992",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2915#issuecomment-1370591992",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2915",
    "id": 1370591992,
    "node_id": "IC_kwDOGBlvNc5RsZL4",
    "user": {
      "login": "xenide",
      "id": 5846427,
      "node_id": "MDQ6VXNlcjU4NDY0Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5846427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xenide",
      "html_url": "https://github.com/xenide",
      "followers_url": "https://api.github.com/users/xenide/followers",
      "following_url": "https://api.github.com/users/xenide/following{/other_user}",
      "gists_url": "https://api.github.com/users/xenide/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xenide/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xenide/subscriptions",
      "organizations_url": "https://api.github.com/users/xenide/orgs",
      "repos_url": "https://api.github.com/users/xenide/repos",
      "events_url": "https://api.github.com/users/xenide/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xenide/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-04T08:03:28Z",
    "updated_at": "2023-01-04T08:03:43Z",
    "author_association": "NONE",
    "body": "Another data point [here](https://github.com/vexchange/v3-periphery/actions/runs/3835683208/jobs/6529131243). In our case we don't have any circular dependencies, the repo imports dependencies from `lib/v3-core`. `forge test` works with no issues and it's only coverage that's complaining. \r\n\r\nfoundry.toml in the root directory: \r\n\r\n```toml\r\n[profile.default]\r\nsolc           = \"0.8.17\"\r\nbytecode_hash  = \"none\"\r\noptimizer_runs = 1_000_000\r\nremappings     = [\"@openzeppelin/=lib/openzeppelin-contracts/contracts/\", \"v3-core/=lib/v3-core\"]\r\nmatch_path     = \"test/unit/*.sol\"\r\nverbosity      = 3\r\n```\r\n\r\nAlso, doing `export RUST_LOG=trace` doesn't give much more helpful info.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1370591992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

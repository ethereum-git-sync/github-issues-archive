{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5458",
  "id": 1817824808,
  "node_id": "I_kwDOGBlvNc5sWc4o",
  "number": 5458,
  "title": "anvil cannot fork from https://ethereum-goerli.publicnode.com",
  "user": {
    "login": "aathan",
    "id": 24279435,
    "node_id": "MDQ6VXNlcjI0Mjc5NDM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/24279435?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aathan",
    "html_url": "https://github.com/aathan",
    "followers_url": "https://api.github.com/users/aathan/followers",
    "following_url": "https://api.github.com/users/aathan/following{/other_user}",
    "gists_url": "https://api.github.com/users/aathan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aathan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aathan/subscriptions",
    "organizations_url": "https://api.github.com/users/aathan/orgs",
    "repos_url": "https://api.github.com/users/aathan/repos",
    "events_url": "https://api.github.com/users/aathan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aathan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-24T07:35:16Z",
  "updated_at": "2023-07-24T16:17:13Z",
  "closed_at": "2023-07-24T13:53:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nAnvil\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nanvil 0.1.0 (6e09b4e 2023-07-24T00:19:12.456381803Z)\n\n### What command(s) is the bug in?\n\nanvil\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nThis should \"just work\" right? Repeated calls show a different (higher) `result` in the jsonrpc portion of the JsonRpcClientError, so this data does seem to indicate a proper response from publicnode.com.  hardhat is able to fork from that url without a problem.\r\n\r\n```\r\n$ RUST_LOG=\"info\" anvil --fork-url https://ethereum-goerli.publicnode.com\r\nthread 'main' panicked at 'Failed to get fork block number: JsonRpcClientError(SerdeJson { err: Error(\"response must be either a success/error or notification object\", line: 1, column: 71), text: \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"eth_blockNumber\\\",\\\"result\\\":\\\"0x8f696c\\\",\\\"id\\\":1}\" })', /home/runner/work/foundry/foundry/anvil/src/config.rs:841:30\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```",
  "closed_by": {
    "login": "Evalir",
    "id": 26014927,
    "node_id": "MDQ6VXNlcjI2MDE0OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Evalir",
    "html_url": "https://github.com/Evalir",
    "followers_url": "https://api.github.com/users/Evalir/followers",
    "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
    "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
    "organizations_url": "https://api.github.com/users/Evalir/orgs",
    "repos_url": "https://api.github.com/users/Evalir/repos",
    "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Evalir/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647458867",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5458#issuecomment-1647458867",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458",
    "id": 1647458867,
    "node_id": "IC_kwDOGBlvNc5iMjoz",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T08:31:19Z",
    "updated_at": "2023-07-24T08:31:19Z",
    "author_association": "MEMBER",
    "body": "for some reason this endpoint returns the method value itself in the response\r\n\r\n> {\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"eth_blockNumber\\\",\\\"result\\\":\\\"0x8f6a50\\\",\\\"id\\\":1}\r\n\r\nwhich is invalid json rpc",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647458867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647962213",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5458#issuecomment-1647962213",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458",
    "id": 1647962213,
    "node_id": "IC_kwDOGBlvNc5iOehl",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T13:53:00Z",
    "updated_at": "2023-07-24T13:53:00Z",
    "author_association": "MEMBER",
    "body": "Yep as mattsse said, this endpoint is returning invalid json rpc. It's a bit of a minor issue but we prefer to keep it strict\r\n\r\nclosing as reason is found",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647962213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1648216886",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5458#issuecomment-1648216886",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5458",
    "id": 1648216886,
    "node_id": "IC_kwDOGBlvNc5iPcs2",
    "user": {
      "login": "aathan",
      "id": 24279435,
      "node_id": "MDQ6VXNlcjI0Mjc5NDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/24279435?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aathan",
      "html_url": "https://github.com/aathan",
      "followers_url": "https://api.github.com/users/aathan/followers",
      "following_url": "https://api.github.com/users/aathan/following{/other_user}",
      "gists_url": "https://api.github.com/users/aathan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aathan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aathan/subscriptions",
      "organizations_url": "https://api.github.com/users/aathan/orgs",
      "repos_url": "https://api.github.com/users/aathan/repos",
      "events_url": "https://api.github.com/users/aathan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aathan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T16:16:08Z",
    "updated_at": "2023-07-24T16:17:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can we have a `--relaxed-rpc` option? It seems in other areas (I remember seeing a thread on this topic), foundry/anvil is looking to achieve parity with hardhat and it arguably should be possible to move a project between hardhat and foundry easily. This would allow devs to both test that two EVM emulators from different sources yield the same behaviors, as well as test the emulators themselves. Also, with problems stemming from upstream inaccuracies relative to standards, there's not much that users can do. Failing to process a response that returns a base 10 vs base 16, or without zero padding, for example, are problems I've reported in hardhat which were relaxed in cases deemed safe. Also relevant is that publicnode.com has a non-trivial user base.\r\n\r\nMeanwhile I'll patch my anvil and alert publicnode.com.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1648216886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4501",
  "id": 1614633760,
  "node_id": "I_kwDOGBlvNc5gPVsg",
  "number": 4501,
  "title": "Unable to build anvil following instructions",
  "user": {
    "login": "drewstone",
    "id": 13153687,
    "node_id": "MDQ6VXNlcjEzMTUzNjg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/13153687?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/drewstone",
    "html_url": "https://github.com/drewstone",
    "followers_url": "https://api.github.com/users/drewstone/followers",
    "following_url": "https://api.github.com/users/drewstone/following{/other_user}",
    "gists_url": "https://api.github.com/users/drewstone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/drewstone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/drewstone/subscriptions",
    "organizations_url": "https://api.github.com/users/drewstone/orgs",
    "repos_url": "https://api.github.com/users/drewstone/repos",
    "events_url": "https://api.github.com/users/drewstone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/drewstone/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-03-08T04:25:40Z",
  "updated_at": "2023-03-09T05:01:15Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Overview\r\nRunning the following script from anvil, fails with the linking error below.\r\n```\r\ngit clone https://github.com/foundry-rs/foundry.git\r\ncd foundry\r\ncargo install --path ./anvil --bins --locked --force\r\n```\r\n\r\n## Machine spec\r\n- Mac M1: Ventura 13.2.1 (updated today and on 12.6 it also didn't work)\r\n- nightly-aarch64-apple-darwin (default)\r\n- rustc 1.70.0-nightly (900c35403 2023-03-08)\r\n\r\n## Error\r\n```\r\n   Compiling anvil v0.1.0 (/Users/drew/webb/foundry/anvil)\r\nerror: linking with `cc` failed: exit status: 1\r\n  |\r\n  = note: LC_ALL=\"C\" PATH=\"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/bin:/opt/homebrew/opt/llvm/bin:/opt/homebrew/bin:/opt/homebrew/bin:/Users/drew/webb/protocol-substrate/bin:/usr/local/opt/openssl@1.1/bin:/Users/drew/webb/protocol-substrate/bin:/usr/local/opt/openssl@1.1/bin:/Users/drew/.nvm/versions/node/v14.17.0/bin:/Users/drew/solana/bin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/drew/.cargo/bin\" VSLANG=\"1033\" ZERO_AR_DATE=\"1\" \"cc\" \"-arch\" \"arm64\" \"/var/folders/wk/qcfly3h940s4cfmlpxbyf21w0000gn/T/rustciDUM4R/symbols.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.16e8s35ia2i7bkjt.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.286ism2h4ffyoify.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.34e9xih46t057y7j.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.3git4clld9qswtfi.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.3ktxlkphgewbtbis.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.3reikn72eh2ghme0.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.3rp80jp8kh0to8az.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.4qq4s3al2af1npem.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.61fltbrizd90ega.rcgu.o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5.p34rcj2k52b2il0.rcgu.o\" \"-L\" \"/Users/drew/webb/foundry/target/debug/deps\" \"-L\" \"/opt/homebrew/lib\" \"-L\" \"/Users/drew/webb/foundry/target/debug/build/libgit2-sys-81a78a84e48f1c8f/out/build\" \"-L\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib\" \"/Users/drew/webb/foundry/target/debug/deps/libvergen-e8cc5078e499aa07.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libthiserror-2a3b220ba0bc334b.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/librustc_version-aab875a0ed91d7f5.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libsemver-fbba6fbd37557550.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libserde-ea49d514283def2c.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libgit2-39c650ef38e7b9bd.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/liburl-2be2beeb7a0ba043.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libidna-46f25dd16c2137b1.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libunicode_normalization-449a22a4fd28a2b0.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libtinyvec-4c13d7ca5adaced2.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libtinyvec_macros-fe3eadf40effa2ef.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libunicode_bidi-9afe147ad1fb6bdf.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libform_urlencoded-6a49c0340c73b0c9.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libpercent_encoding-dfaa997a796ad540.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/liblog-9b318fef59459fea.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libcfg_if-bb0c6c7749b5845a.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/liblibgit2_sys-68f2570f96cb2968.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/liblibz_sys-b7140d300e0bad0c.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/liblibc-b5062bdc1e157500.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libbitflags-8ac280df335b3dc9.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libtime-1a543bed5c0bcf32.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libitoa-f7354bac3fb7d12e.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libtime_core-a1ea9ca08bde161e.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libenum_iterator-71674d3e70cf1e2d.rlib\" \"/Users/drew/webb/foundry/target/debug/deps/libanyhow-e2e7889ef320f647.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libstd-d5a3f57504f7a14f.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libpanic_unwind-aaf4ac3c521012c9.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libobject-cd42e1b658cd7f92.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libmemchr-0a8461be627e45e2.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libaddr2line-97072f876dfd4d7b.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libgimli-09fc9571a9cc504b.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/librustc_demangle-d1904e7690a7173c.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libstd_detect-9935599dae7bb88b.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libhashbrown-a56ab59688d684a4.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libminiz_oxide-cdb24b6480b438e1.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libadler-76654c2e9596f21f.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/librustc_std_workspace_alloc-868acc5dc881c98f.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libunwind-f2d65ef668c8a2cb.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libcfg_if-0116381dd066fd23.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/liblibc-5f66eee729a1c2a5.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/liballoc-6a2598ea62c3cf2b.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/librustc_std_workspace_core-a8a859a864856684.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libcore-908209eee60fb642.rlib\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libcompiler_builtins-8442c7e70a5ccb57.rlib\" \"-liconv\" \"-framework\" \"Security\" \"-framework\" \"CoreFoundation\" \"-lz\" \"-liconv\" \"-lSystem\" \"-lc\" \"-lm\" \"-L\" \"/Users/drew/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib\" \"-o\" \"/Users/drew/webb/foundry/target/debug/build/anvil-e3990f236d2a5ad5/build_script_build-e3990f236d2a5ad5\" \"-Wl,-dead_strip\" \"-nodefaultlibs\"\r\n  = note: Undefined symbols for architecture arm64:\r\n            \"_libssh2_exit\", referenced from:\r\n                _shutdown_ssh in liblibgit2_sys-68f2570f96cb2968.rlib(ssh.c.o)\r\n            \"_libssh2_init\", referenced from:\r\n                _git_transport_ssh_global_init in liblibgit2_sys-68f2570f96cb2968.rlib(ssh.c.o)\r\n          ld: symbol(s) not found for architecture arm64\r\n          clang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1461282006",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4501#issuecomment-1461282006",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4501",
    "id": 1461282006,
    "node_id": "IC_kwDOGBlvNc5XGWTW",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T05:01:15Z",
    "updated_at": "2023-03-09T05:01:15Z",
    "author_association": "MEMBER",
    "body": "Can you try compiling with stable instead of nightly?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1461282006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5780",
  "id": 1881888866,
  "node_id": "I_kwDOGBlvNc5wK1hi",
  "number": 5780,
  "title": "Foundry : cast storage slot argument length issue",
  "user": {
    "login": "blueh4mster",
    "id": 102573660,
    "node_id": "U_kgDOBh0mXA",
    "avatar_url": "https://avatars.githubusercontent.com/u/102573660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/blueh4mster",
    "html_url": "https://github.com/blueh4mster",
    "followers_url": "https://api.github.com/users/blueh4mster/followers",
    "following_url": "https://api.github.com/users/blueh4mster/following{/other_user}",
    "gists_url": "https://api.github.com/users/blueh4mster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/blueh4mster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/blueh4mster/subscriptions",
    "organizations_url": "https://api.github.com/users/blueh4mster/orgs",
    "repos_url": "https://api.github.com/users/blueh4mster/repos",
    "events_url": "https://api.github.com/users/blueh4mster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/blueh4mster/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-09-05T12:34:00Z",
  "updated_at": "2023-11-17T16:39:22Z",
  "closed_at": "2023-09-11T13:30:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nCast\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (2f4a77e 2023-08-31T00:32:46.319290372Z)\n\n### What command(s) is the bug in?\n\ncast storage\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nWhen I try to get the private variable stored at storage slot 0 of the contract storage using the cast storage command,\r\n\r\n```\r\ncast storage <my-contract-address> 0 --rpc-url <my-rpc-url>\r\n```\r\nI get this error\r\n\r\n```\r\nError: \r\n(code: -32602, message: Errors encountered in param 1: Storage slot argument must have a length of 66 (\"0x\" + 32 bytes), but '0x0' has a length of 3, data: Some(Object {\"message\": String(\"Errors encountered in param 1: Storage slot argument must have a length of 66 (\\\"0x\\\" + 32 bytes), but '0x0' has a length of 3\")}))\r\n```\r\n\r\nfor example,\r\n<img width=\"679\" alt=\"getit_1\" src=\"https://github.com/foundry-rs/foundry/assets/102573660/cb6f5f0a-7a30-4ee1-ad19-e03bd6617662\">\r\n\r\n\r\nI already tried to pad 0 as 0x000...0 (32 bytes) but still getting the same error.\r\n\r\n<img width=\"672\" alt=\"getit_2\" src=\"https://github.com/foundry-rs/foundry/assets/102573660/b2837fb9-0927-40e2-a9d6-dc2a0b0cdd72\">\r\n",
  "closed_by": {
    "login": "Evalir",
    "id": 26014927,
    "node_id": "MDQ6VXNlcjI2MDE0OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Evalir",
    "html_url": "https://github.com/Evalir",
    "followers_url": "https://api.github.com/users/Evalir/followers",
    "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
    "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
    "organizations_url": "https://api.github.com/users/Evalir/orgs",
    "repos_url": "https://api.github.com/users/Evalir/repos",
    "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Evalir/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1708106767",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5780#issuecomment-1708106767",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
    "id": 1708106767,
    "node_id": "IC_kwDOGBlvNc5lz6QP",
    "user": {
      "login": "iKausik",
      "id": 32932853,
      "node_id": "MDQ6VXNlcjMyOTMyODUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32932853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iKausik",
      "html_url": "https://github.com/iKausik",
      "followers_url": "https://api.github.com/users/iKausik/followers",
      "following_url": "https://api.github.com/users/iKausik/following{/other_user}",
      "gists_url": "https://api.github.com/users/iKausik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iKausik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iKausik/subscriptions",
      "organizations_url": "https://api.github.com/users/iKausik/orgs",
      "repos_url": "https://api.github.com/users/iKausik/repos",
      "events_url": "https://api.github.com/users/iKausik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iKausik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T10:45:43Z",
    "updated_at": "2023-09-06T10:45:43Z",
    "author_association": "NONE",
    "body": "@blueh4mster \r\nI think the problem is with the --rpc-url or the contract itself.\r\nBecause I did the same thing with another RPC URL and it works.\r\n\r\n![terminal1](https://github.com/foundry-rs/foundry/assets/32932853/2efd2c20-9b1f-44df-9075-464796f608dd)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1708106767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1708254892",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5780#issuecomment-1708254892",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
    "id": 1708254892,
    "node_id": "IC_kwDOGBlvNc5l0eas",
    "user": {
      "login": "blueh4mster",
      "id": 102573660,
      "node_id": "U_kgDOBh0mXA",
      "avatar_url": "https://avatars.githubusercontent.com/u/102573660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blueh4mster",
      "html_url": "https://github.com/blueh4mster",
      "followers_url": "https://api.github.com/users/blueh4mster/followers",
      "following_url": "https://api.github.com/users/blueh4mster/following{/other_user}",
      "gists_url": "https://api.github.com/users/blueh4mster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blueh4mster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blueh4mster/subscriptions",
      "organizations_url": "https://api.github.com/users/blueh4mster/orgs",
      "repos_url": "https://api.github.com/users/blueh4mster/repos",
      "events_url": "https://api.github.com/users/blueh4mster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blueh4mster/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T12:30:12Z",
    "updated_at": "2023-09-06T12:30:12Z",
    "author_association": "NONE",
    "body": "Thankful for your notice, however, I think there is rather some configuration issue with my system and all the other systems I've recieved the same error on because this rpc url belongs to a private blockchain of a ctf event and there are various solves on this challenge. So i think it is highly unlikely that the issue is with the rpc url.\r\n\r\nAlso other commands seem to work just fine with the same rpc-url.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1708254892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1713890239",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5780#issuecomment-1713890239",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
    "id": 1713890239,
    "node_id": "IC_kwDOGBlvNc5mJ-O_",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-11T13:30:58Z",
    "updated_at": "2023-09-11T13:30:58Z",
    "author_association": "MEMBER",
    "body": "Hey @blueh4mster this indeed seems like an RPC issue. It works in other ones. maybe try padding the storage slot with an even number of zeros?\r\n\r\nClosing as it's rpc-specific",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1713890239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1816705741",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5780#issuecomment-1816705741",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
    "id": 1816705741,
    "node_id": "IC_kwDOGBlvNc5sSLrN",
    "user": {
      "login": "Ethnical",
      "id": 23560242,
      "node_id": "MDQ6VXNlcjIzNTYwMjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/23560242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ethnical",
      "html_url": "https://github.com/Ethnical",
      "followers_url": "https://api.github.com/users/Ethnical/followers",
      "following_url": "https://api.github.com/users/Ethnical/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ethnical/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ethnical/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ethnical/subscriptions",
      "organizations_url": "https://api.github.com/users/Ethnical/orgs",
      "repos_url": "https://api.github.com/users/Ethnical/repos",
      "events_url": "https://api.github.com/users/Ethnical/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ethnical/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-17T16:13:31Z",
    "updated_at": "2023-11-17T16:14:45Z",
    "author_association": "NONE",
    "body": "After checking, foundry is compliant with https://eips.ethereum.org/EIPS/eip-1474#quantity\r\n![image](https://github.com/foundry-rs/foundry/assets/23560242/f1b23d09-994b-4faa-b30a-900d8d2cf2e7)\r\nUsing the trace on `cast` or `forge script` we can see that the padding value is cast to `U256` and complies with the EIP1474.\r\n\r\n![CleanShot 2023-11-17 at 16 51 58](https://github.com/foundry-rs/foundry/assets/23560242/af5c6102-e0ec-4539-bfd8-a3a6bc8ab316)\r\n\r\n`0x0000000000000000000000000000000000000000000000000000000000000001` converted to `0x1`\r\n\r\nBut seems this is not possible to not comply with the EIP with foundry because this will convert automatically.\r\n\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1816705741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1816742803",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5780#issuecomment-1816742803",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5780",
    "id": 1816742803,
    "node_id": "IC_kwDOGBlvNc5sSUuT",
    "user": {
      "login": "blueh4mster",
      "id": 102573660,
      "node_id": "U_kgDOBh0mXA",
      "avatar_url": "https://avatars.githubusercontent.com/u/102573660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blueh4mster",
      "html_url": "https://github.com/blueh4mster",
      "followers_url": "https://api.github.com/users/blueh4mster/followers",
      "following_url": "https://api.github.com/users/blueh4mster/following{/other_user}",
      "gists_url": "https://api.github.com/users/blueh4mster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blueh4mster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blueh4mster/subscriptions",
      "organizations_url": "https://api.github.com/users/blueh4mster/orgs",
      "repos_url": "https://api.github.com/users/blueh4mster/repos",
      "events_url": "https://api.github.com/users/blueh4mster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blueh4mster/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-17T16:39:21Z",
    "updated_at": "2023-11-17T16:39:21Z",
    "author_association": "NONE",
    "body": "So... I didn't notice the activity here but I did solve the issue through someone's help. \r\n\r\nAccording to him, it's some problem in the getStorageAt function of the web3js library, latest version of which ignores all zeroes(?). \r\n\r\nHe solved the issue by changing the getStorageAt function internally for his system after installing web3js library such that no matter what input param for storage slot you provide it will have some predefined storage slot (for example 0) and it will only give the value stored at that slot.\r\n\r\n![WhatsApp Image 2023-11-17 at 22 04 16](https://github.com/foundry-rs/foundry/assets/102573660/e8f22c75-9be0-4b55-848f-49dd90df2e36)\r\n\r\n![WhatsApp Image 2023-11-17 at 22 04 17](https://github.com/foundry-rs/foundry/assets/102573660/5ca2f4c7-dd46-4ec0-8d6a-d8e89866ca5a)\r\n\r\n\r\nSo apparently the issue is not with the rpc url or wirh foundry but the getStorageAt function.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1816742803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3703",
  "id": 1452770744,
  "node_id": "I_kwDOGBlvNc5Wl4W4",
  "number": 3703,
  "title": "erroneous state set when using vm.createFork",
  "user": {
    "login": "sprw121",
    "id": 4331652,
    "node_id": "MDQ6VXNlcjQzMzE2NTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4331652?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sprw121",
    "html_url": "https://github.com/sprw121",
    "followers_url": "https://api.github.com/users/sprw121/followers",
    "following_url": "https://api.github.com/users/sprw121/following{/other_user}",
    "gists_url": "https://api.github.com/users/sprw121/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sprw121/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sprw121/subscriptions",
    "organizations_url": "https://api.github.com/users/sprw121/orgs",
    "repos_url": "https://api.github.com/users/sprw121/repos",
    "events_url": "https://api.github.com/users/sprw121/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sprw121/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3703752960,
      "node_id": "LA_kwDOGBlvNc7cwskA",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/A-cheatcodes",
      "name": "A-cheatcodes",
      "color": "FBCA04",
      "default": false,
      "description": "Area: cheatcodes"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-11-17T06:09:03Z",
  "updated_at": "2022-11-18T08:52:53Z",
  "closed_at": "2022-11-17T19:12:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [ ] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (b65d58d 2022-11-17T00:05:05.963677Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge test\r\n\r\n### Operating System\r\n\r\nmacOS (Apple Silicon)\r\n\r\n### Describe the bug\r\n\r\nThis repo reproduces the issue: https://github.com/sprw121/create-fork-repro. \r\n\r\nNote the network in question is polygon, not ethereum mainnet.\r\n\r\nThe state set by createFork here is inconsistent with the logs emitted from the transaction prior to it. I have tried to delete the ~/.foundry/cache folder but this did not help. It looks like the transactions aren't getting replayed properly, as the state is consistent with the head of the block.\r\n\r\nThe transactions in question are:\r\n0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034 (the one that sets the state)\r\n0xbed0c8c1b9ff8bf0452979d170c52893bb8954f18a904aa5bcbd0f709be050b9 (the one immediately following)\r\n\r\nThe prior 2 transactions also change the state of the pools (I care more about this state), and the createFork is also inconsistent on those transactions. I choose these two as it's the first transaction after this sequence where the state does not change.\r\n\r\nYou can see the logs at https://polygonscan.com/tx/0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034#eventlog, the relevant ones are Topics 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67.\r\n\r\nUnfortunately in this UI, the logs for contracts  0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5 and 0x50eaedb835021e4a108b7290636d62e9765cc6d7 don't decode correctly.\r\n\r\nHere are the relevant decoded logs:\r\n\r\n```\r\n0x45dda9cb7c25131df268515131f647d726f50608:\r\nSwap (index_topic_1 address sender, index_topic_2 address recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)\r\nsender: 0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978\r\nrecipient: 0x200800030b0920400c0100b30bb0fd6bab300050\r\namount0 :\r\namount1 :19734536289101492745\r\nsqrtPriceX96 :2158492202962238680259690147925313\r\nliquidity :588702194510526627\r\ntick :204261\r\n```\r\n\r\n```\r\n0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5:\r\nSwap (index_topic_1 address sender, index_topic_2 address recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)\r\nsender: 0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978\r\nrecipient: 0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978\r\namount0 :\r\namount1 :26567416250\r\nsqrtPriceX96 :1076133273204200901840477866344\r\nliquidity :1221531661829\r\ntick :52178\r\n```\r\n\r\n```\r\n0x50eaedb835021e4a108b7290636d62e9765cc6d7\r\nSwap (index_topic_1 address sender, index_topic_2 address recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)\r\nsender: 0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978\r\nrecipient: 0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978\r\namount0 : 143802159\r\namount1 : \r\nsqrtPriceX96: 29344980527396021373083957193598046\r\nliquidity: 63106417987627857\r\ntick : 256458\r\n```",
  "closed_by": {
    "login": "gakonst",
    "id": 17802178,
    "node_id": "MDQ6VXNlcjE3ODAyMTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gakonst",
    "html_url": "https://github.com/gakonst",
    "followers_url": "https://api.github.com/users/gakonst/followers",
    "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
    "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
    "organizations_url": "https://api.github.com/users/gakonst/orgs",
    "repos_url": "https://api.github.com/users/gakonst/repos",
    "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gakonst/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318341249",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318341249",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318341249,
    "node_id": "IC_kwDOGBlvNc5OlEqB",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T09:30:21Z",
    "updated_at": "2022-11-17T09:30:21Z",
    "author_association": "MEMBER",
    "body": "> 0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034 (the one that sets the state)\r\n0xbed0c8c1b9ff8bf0452979d170c52893bb8954f18a904aa5bcbd0f709be050b9 (the one immediately following)\r\n\r\nthere's 1 tx in between, but unsure if relevant, looks like it isn't\r\n\r\nin any case, I debugged this.\r\n\r\nwhile the event includes the price after the swap. the pool's 0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5 state remained unchanged (empty changeset) after executing the 0x62b transaction, in other words, 0x62b appear to not modify the pool's state.\r\n\r\nI guess this has something to do with the fact that the slot0 price is only updated conditionally: https://github.com/Uniswap/v3-core/blob/main/contracts/UniswapV3Pool.sol#L750-L753\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318341249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318644996",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318644996",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318644996,
    "node_id": "IC_kwDOGBlvNc5OmO0E",
    "user": {
      "login": "sprw121",
      "id": 4331652,
      "node_id": "MDQ6VXNlcjQzMzE2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4331652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sprw121",
      "html_url": "https://github.com/sprw121",
      "followers_url": "https://api.github.com/users/sprw121/followers",
      "following_url": "https://api.github.com/users/sprw121/following{/other_user}",
      "gists_url": "https://api.github.com/users/sprw121/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sprw121/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sprw121/subscriptions",
      "organizations_url": "https://api.github.com/users/sprw121/orgs",
      "repos_url": "https://api.github.com/users/sprw121/repos",
      "events_url": "https://api.github.com/users/sprw121/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sprw121/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T13:33:19Z",
    "updated_at": "2022-11-17T13:41:59Z",
    "author_association": "NONE",
    "body": "> > 0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034 (the one that sets the state)\r\n> > 0xbed0c8c1b9ff8bf0452979d170c52893bb8954f18a904aa5bcbd0f709be050b9 (the one immediately following)\r\n> \r\n> there's 1 tx in between, but unsure if relevant, looks like it isn't\r\n> \r\n> in any case, I debugged this.\r\n> \r\n> while the event includes the price after the swap. the pool's 0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5 state remained unchanged (empty changeset) after executing the 0x62b transaction, in other words, 0x62b appear to not modify the pool's state.\r\n> \r\n> I guess this has something to do with the fact that the slot0 price is only updated conditionally: https://github.com/Uniswap/v3-core/blob/main/contracts/UniswapV3Pool.sol#L750-L753\r\n\r\nIf you look carefully, the price is updated in both branches: https://github.com/Uniswap/v3-core/blob/main/contracts/UniswapV3Pool.sol#L744-L745.\r\n\r\nI'm fairly sure this can't be the case, as I know that at least one of the pools changes ticks. The state is what the same as at the beginning of the block, and there are three transactions that modify the state of one of the pool, so it seems unlikely that none of them would cause a tick change.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318644996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318723674",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318723674",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318723674,
    "node_id": "IC_kwDOGBlvNc5OmiBa",
    "user": {
      "login": "sprw121",
      "id": 4331652,
      "node_id": "MDQ6VXNlcjQzMzE2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4331652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sprw121",
      "html_url": "https://github.com/sprw121",
      "followers_url": "https://api.github.com/users/sprw121/followers",
      "following_url": "https://api.github.com/users/sprw121/following{/other_user}",
      "gists_url": "https://api.github.com/users/sprw121/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sprw121/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sprw121/subscriptions",
      "organizations_url": "https://api.github.com/users/sprw121/orgs",
      "repos_url": "https://api.github.com/users/sprw121/repos",
      "events_url": "https://api.github.com/users/sprw121/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sprw121/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T14:30:22Z",
    "updated_at": "2022-11-17T14:30:22Z",
    "author_association": "NONE",
    "body": "@mattsse \r\n\r\nI have added 7 additional tests to my repo, of a different form than the first. Instead of testing expected state, we test that certain state is different than at the head of the block. \r\n\r\nThese are the token balances of the pools and calling contract. All of these should have their balance change during the execution of the state setting transaction. You can see this in the logs.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318723674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318782975",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318782975",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318782975,
    "node_id": "IC_kwDOGBlvNc5Omwf_",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T15:14:06Z",
    "updated_at": "2022-11-17T15:22:59Z",
    "author_association": "MEMBER",
    "body": "I see, what's weird is that there's no state change for the pool account after executing 0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034\r\n\r\nthese are the changed accounts:\r\n\r\n    0x49facffbd0c7643eb3ad9cdcb44b95d75d93a978,\r\n    0x54d36a7181421c4a2dfbf962610853364eb13f33,\r\n    0x200800030b0920400c0100b30bb0fd6bab300050,\r\n    0x50eaedb835021e4a108b7290636d62e9765cc6d7,\r\n    0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6,\r\n    0x0000000000000000000000000000000000000000, \r\n\r\n@rakita maybe I used revm transact + commit wrong, but after executing https://polygonscan.com/tx/0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034\r\nthe account for 0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5 does not appear in the changeset. Which is, weird since 0x847b64f9d3a95e977d157866447a5c0a5dfa0ee5 emits a swap event indicating the state was modified.\r\n\r\nI've added a check + dbg here: https://github.com/foundry-rs/foundry/pull/3705\r\n\r\nthis is how the tx is transacted:\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/93b0f61ec9210567338bd9977252c85b6574f779/evm/src/executor/backend/mod.rs#L1655-L1661\r\n\r\nand the State is committed afterward:\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/93b0f61ec9210567338bd9977252c85b6574f779/evm/src/executor/backend/mod.rs#L1684\r\n\r\n\r\nThis is for test `testStatePool1` of the linked repo.\r\n\r\nwhat's also weird is the execution result for that tx:\r\n\r\n```text\r\n[evm/src/executor/backend/mod.rs:1666] res = ExecutionResult {\r\n    exit_reason: Return,\r\n    out: Call(\r\n        b\"\",\r\n    ),\r\n    gas_used: 52690,\r\n    gas_refunded: 0,\r\n    logs: [],\r\n}\r\n```\r\nwhich does not have any logs, it looks like there's something wrong here, perhaps with the setup",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318782975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318849258",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318849258",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318849258,
    "node_id": "IC_kwDOGBlvNc5OnArq",
    "user": {
      "login": "sprw121",
      "id": 4331652,
      "node_id": "MDQ6VXNlcjQzMzE2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4331652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sprw121",
      "html_url": "https://github.com/sprw121",
      "followers_url": "https://api.github.com/users/sprw121/followers",
      "following_url": "https://api.github.com/users/sprw121/following{/other_user}",
      "gists_url": "https://api.github.com/users/sprw121/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sprw121/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sprw121/subscriptions",
      "organizations_url": "https://api.github.com/users/sprw121/orgs",
      "repos_url": "https://api.github.com/users/sprw121/repos",
      "events_url": "https://api.github.com/users/sprw121/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sprw121/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T15:57:40Z",
    "updated_at": "2022-11-17T15:57:40Z",
    "author_association": "NONE",
    "body": "If additional context is any help: Tx 0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034 requires state set earlier in the block to execute correctly. However, I'm not sure this is relevant since the state is all the same as at the head of block, indicated no transactions on this state are executing correctly.\r\n\r\nI've also used these accounts in other tests that use `vm.createFork`, so it's not (solely) related to the accounts involved.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318849258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318850883",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318850883",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318850883,
    "node_id": "IC_kwDOGBlvNc5OnBFD",
    "user": {
      "login": "rakita",
      "id": 13179220,
      "node_id": "MDQ6VXNlcjEzMTc5MjIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13179220?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rakita",
      "html_url": "https://github.com/rakita",
      "followers_url": "https://api.github.com/users/rakita/followers",
      "following_url": "https://api.github.com/users/rakita/following{/other_user}",
      "gists_url": "https://api.github.com/users/rakita/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rakita/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rakita/subscriptions",
      "organizations_url": "https://api.github.com/users/rakita/orgs",
      "repos_url": "https://api.github.com/users/rakita/repos",
      "events_url": "https://api.github.com/users/rakita/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rakita/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T15:58:50Z",
    "updated_at": "2022-11-17T15:58:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mattsse that is the same pattern used in revm. `transact` then `commit`:\r\nhttps://github.com/bluealloy/revm/blob/4ef7446f9c26d91702c349977567255624caabcb/crates/revm/src/evm.rs#L46-L47",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318850883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318856251",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318856251",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318856251,
    "node_id": "IC_kwDOGBlvNc5OnCY7",
    "user": {
      "login": "rakita",
      "id": 13179220,
      "node_id": "MDQ6VXNlcjEzMTc5MjIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13179220?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rakita",
      "html_url": "https://github.com/rakita",
      "followers_url": "https://api.github.com/users/rakita/followers",
      "following_url": "https://api.github.com/users/rakita/following{/other_user}",
      "gists_url": "https://api.github.com/users/rakita/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rakita/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rakita/subscriptions",
      "organizations_url": "https://api.github.com/users/rakita/orgs",
      "repos_url": "https://api.github.com/users/rakita/repos",
      "events_url": "https://api.github.com/users/rakita/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rakita/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T16:02:43Z",
    "updated_at": "2022-11-17T16:03:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this related to the newest revm?\r\nedit: I updated it recently. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318856251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318903657",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318903657",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318903657,
    "node_id": "IC_kwDOGBlvNc5OnN9p",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T16:37:06Z",
    "updated_at": "2022-11-17T16:37:06Z",
    "author_association": "MEMBER",
    "body": "same result with 2.2 and 2.3\r\n\r\n`cast run 0x62d76e970d9c1c1cc71b1b7063a74ffe80244de65b855bd5d3ea36889d6f4034` seems to be working so I think there's a bug in the setup for the cheatcode.\r\n\r\nchecking\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318903657/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318931763",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3703#issuecomment-1318931763",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3703",
    "id": 1318931763,
    "node_id": "IC_kwDOGBlvNc5OnU0z",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T16:58:53Z",
    "updated_at": "2022-11-17T16:58:53Z",
    "author_association": "MEMBER",
    "body": "oh I've found it -.- the env's block was not configured correctly\r\n\r\nsorry about that @sprw121 \r\n\r\nfixing rn",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1318931763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

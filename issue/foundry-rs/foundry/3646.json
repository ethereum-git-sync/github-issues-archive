{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3646",
  "id": 1440877459,
  "node_id": "I_kwDOGBlvNc5V4guT",
  "number": 3646,
  "title": "The application panicked (crash) -- forge script",
  "user": {
    "login": "aiwowo1",
    "id": 89056917,
    "node_id": "MDQ6VXNlcjg5MDU2OTE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aiwowo1",
    "html_url": "https://github.com/aiwowo1",
    "followers_url": "https://api.github.com/users/aiwowo1/followers",
    "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
    "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
    "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
    "repos_url": "https://api.github.com/users/aiwowo1/repos",
    "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-11-08T20:43:53Z",
  "updated_at": "2023-04-11T23:01:13Z",
  "closed_at": "2023-04-11T23:01:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [ ] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (28312e7 2022-10-13T00:10:05.477412592Z)\n\n### What command(s) is the bug in?\n\nnew ContractName()\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nI'm trying to use forge script to test deploying a contract with an external library. The script I use is: \r\n` forge script ForkDeploy.s.sol --broadcast -vvvv`\r\n\r\nI got the error message:\r\n\r\n```\r\nThe application panicked (crashed).\r\nMessage:  You must provide an RPC URL (see --fork-url) when broadcasting.\r\nLocation: cli/src/cmd/forge/script/cmd.rs:202\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\nBacktrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\nAborted\r\n```\r\n\r\nI have tried using the same script but given the RPC_URL as the error message suggested and it worked:\r\nforge script ForkDeploy.s.sol --broadcast -vvvv --fork-url $MAINNET_RPC_URL\r\n\r\nI would like to use the fork simulator instead of explicitly giving the RPC_URL. \r\n\r\nAlso the same `forge script ` would work if I don't use the external library. \r\n\r\n\r\nThe script:\r\n```\r\n        string memory MAINNET_RPC_URL = vm.envString('MAINNET_RPC_URL');\r\n        uint256 mainnetFork = vm.createFork(MAINNET_RPC_URL);\r\n        vm.selectFork(mainnetFork);\r\n        string memory mnemonic = vm.envString('MNEMONIC');\r\n        uint256 privateKey = vm.deriveKey(mnemonic, 0);\r\n        address deployer = vm.addr(privateKey);\r\n\r\n        vm.startBroadcast(deployer);\r\n     \r\n        AmmalgamFactory factory = new AmmalgamFactory(deployer);  <-- problem line\r\n        \r\n        vm.stopBroadcast();\r\n\r\n```\r\n\r\n",
  "closed_by": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311825709",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1311825709",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1311825709,
    "node_id": "IC_kwDOGBlvNc5OMN8t",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T15:29:28Z",
    "updated_at": "2022-11-11T15:29:28Z",
    "author_association": "MEMBER",
    "body": "you're forge version appears to be outdated\r\n\r\ndoes this also happen with the newest build?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311825709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312018430",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312018430",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312018430,
    "node_id": "IC_kwDOGBlvNc5OM8_-",
    "user": {
      "login": "aiwowo1",
      "id": 89056917,
      "node_id": "MDQ6VXNlcjg5MDU2OTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aiwowo1",
      "html_url": "https://github.com/aiwowo1",
      "followers_url": "https://api.github.com/users/aiwowo1/followers",
      "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
      "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
      "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
      "repos_url": "https://api.github.com/users/aiwowo1/repos",
      "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T18:11:33Z",
    "updated_at": "2022-11-11T18:11:33Z",
    "author_association": "NONE",
    "body": "Yes still broken with the latest forge version: \r\nfoundryup: installed - forge 0.2.0 (c5791f5 2022-11-11T00:07:57.448068674Z)\r\nforge 0.2.0 (c5791f5 2022-11-11T00:07:57.448068674Z)\r\n\r\nHere are my full script and command:\r\n\r\n```\r\n// SPDX-License-Identifier: GPL-3.0-only\r\npragma solidity ^0.8.13;\r\n\r\nimport 'forge-std/Script.sol';\r\nimport {AmmalgamFactory} from '../contracts/AmmalgamFactory.sol';\r\n\r\ncontract ForkDeploy is Script {\r\n    function run() external {\r\n        string memory MAINNET_RPC_URL = vm.envString('MAINNET_RPC_URL');\r\n        uint256 mainnetFork = vm.createFork(MAINNET_RPC_URL);\r\n        vm.selectFork(mainnetFork);\r\n        string memory mnemonic = vm.envString('MNEMONIC');\r\n        uint256 privateKey = vm.deriveKey(mnemonic, 0);\r\n        address deployer = vm.addr(privateKey);\r\n\r\n        vm.startBroadcast(deployer);\r\n\r\n        AmmalgamFactory factory = new AmmalgamFactory(deployer);\r\n        factory.setFeeTo(deployer);\r\n\r\n        vm.stopBroadcast();\r\n\r\n        console2.log('Factory Address:', address(factory));\r\n    }\r\n}\r\n```\r\n\r\nRun command in WSL (* Ubuntu-20.04  ):\r\n`  forge script ForkDeploy.s.sol -vvvv `\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312018430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312020519",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312020519",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312020519,
    "node_id": "IC_kwDOGBlvNc5OM9gn",
    "user": {
      "login": "aiwowo1",
      "id": 89056917,
      "node_id": "MDQ6VXNlcjg5MDU2OTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aiwowo1",
      "html_url": "https://github.com/aiwowo1",
      "followers_url": "https://api.github.com/users/aiwowo1/followers",
      "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
      "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
      "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
      "repos_url": "https://api.github.com/users/aiwowo1/repos",
      "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T18:12:30Z",
    "updated_at": "2022-11-11T18:12:30Z",
    "author_association": "NONE",
    "body": "update the crashing message: \r\n```\r\n[⠑] Compiling...\r\n[⠒] Compiling 20 files with 0.8.13\r\n[⠆] Solc 0.8.13 finished in 5.36s\r\nCompiler run successful\r\nThe application panicked (crashed).\r\nMessage:  You must provide an RPC URL (see --fork-url) when broadcasting.\r\nLocation: cli/src/cmd/forge/script/cmd.rs:302\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\nBacktrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\nAborted\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312020519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312103446",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312103446",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312103446,
    "node_id": "IC_kwDOGBlvNc5ONRwW",
    "user": {
      "login": "aiwowo1",
      "id": 89056917,
      "node_id": "MDQ6VXNlcjg5MDU2OTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aiwowo1",
      "html_url": "https://github.com/aiwowo1",
      "followers_url": "https://api.github.com/users/aiwowo1/followers",
      "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
      "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
      "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
      "repos_url": "https://api.github.com/users/aiwowo1/repos",
      "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T19:29:40Z",
    "updated_at": "2022-11-11T19:29:40Z",
    "author_association": "NONE",
    "body": "Do you have a working example with external library I can test on my end? ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312103446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312160510",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312160510",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312160510,
    "node_id": "IC_kwDOGBlvNc5ONfr-",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T20:17:58Z",
    "updated_at": "2022-11-11T20:17:58Z",
    "author_association": "MEMBER",
    "body": "oh there's a panic due to a massing fork URL.\r\n\r\n@joshieDo I'm not entirely sure what effect multifork should have here when broadcasting, given that there's no --fork-url set here",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312160510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312264049",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312264049",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312264049,
    "node_id": "IC_kwDOGBlvNc5ON49x",
    "user": {
      "login": "aiwowo1",
      "id": 89056917,
      "node_id": "MDQ6VXNlcjg5MDU2OTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aiwowo1",
      "html_url": "https://github.com/aiwowo1",
      "followers_url": "https://api.github.com/users/aiwowo1/followers",
      "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
      "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
      "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
      "repos_url": "https://api.github.com/users/aiwowo1/repos",
      "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T23:29:01Z",
    "updated_at": "2022-11-15T18:03:25Z",
    "author_association": "NONE",
    "body": "By providing the --fork-url $MAIN_RPC_URL I got different error:\r\n`Transaction failed when running the on-chain simulation. Check the trace above for more information.`\r\n\r\nLooked into the trace, it seems it using the external library (Validations) instead of the factory contract (AmmalgamFactory) to call the setFee() method. and the actual AmmalgamFactory contract is market as Unknown. \r\n\r\n```\r\n\r\n  [737795] → new Validations@0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n    └─ ← 3170 bytes of code\r\n\r\n  [4430496] → new <Unknown>@0x28a7AAEE9b65f00c69548403C6C56058aEBfF87f\r\n    └─ ← 20216 bytes of code\r\n\r\n  [21608] Validations::setFeeTo(0x7A153e26cc8ecDF57902c220481ea1c3636108c5)\r\n```\r\n\r\nThe full trace is here:\r\n\r\n```\r\nTraces:\r\n  [4687282] ForkDeploy::run()\r\n    ├─ [0] console::log(Deploying AmmalgamFactory...) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::envString(MAINNET_RPC_URL)\r\n    │   └─ ← <env var value>\r\n    ├─ [0] console::log(MAINNET_RPC_URL, https://mainnet.infura.io/v3/[my-project-key]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::createFork(https://mainnet.infura.io/v3/[my-project-key])\r\n    │   └─ ← 1\r\n    ├─ [0] VM::selectFork(1)\r\n    │   └─ ← ()\r\n    ├─ [0] VM::envString(MNEMONIC)\r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::deriveKey(<pk>)\r\n    │   └─ ← <pk>\r\n    ├─ [0] VM::addr(<pk>)\r\n    │   └─ ← 0x7A153e26cc8ecDF57902c220481ea1c3636108c5\r\n    ├─ [0] VM::startBroadcast(0x7A153e26cc8ecDF57902c220481ea1c3636108c5)\r\n    │   └─ ← ()\r\n    ├─ [4070172] → new Validations@0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n    │   └─ ← 20216 bytes of code\r\n    ├─ [22699] Validations::setFeeTo(0x7A153e26cc8ecDF57902c220481ea1c3636108c5)\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast()\r\n    │   └─ ← ()\r\n    ├─ [0] console::log(Factory Address:, Validations: [0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09]) [staticcall]\r\n    │   └─ ← ()\r\n    └─ ← ()\r\n\r\n\r\nScript ran successfully.\r\n\r\n== Logs ==\r\n  Deploying AmmalgamFactory...\r\n  MAINNET_RPC_URL https://mainnet.infura.io/v3/[my-project-key]\r\n  Factory Address: 0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n\r\n## Setting up (1) EVMs.\r\n==========================\r\nSimulated On-chain Traces:\r\n\r\n  [737795] → new Validations@0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n    └─ ← 3170 bytes of code\r\n\r\n  [4430496] → new <Unknown>@0x28a7AAEE9b65f00c69548403C6C56058aEBfF87f\r\n    └─ ← 20216 bytes of code\r\n\r\n  [21608] Validations::setFeeTo(0x7A153e26cc8ecDF57902c220481ea1c3636108c5)\r\n    └─ ← \"EvmError: Revert\"\r\n\r\nError:\r\n\r\nTransaction failed when running the on-chain simulation. Check the trace above for more information.\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312264049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312265005",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1312265005",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1312265005,
    "node_id": "IC_kwDOGBlvNc5ON5Mt",
    "user": {
      "login": "aiwowo1",
      "id": 89056917,
      "node_id": "MDQ6VXNlcjg5MDU2OTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/89056917?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aiwowo1",
      "html_url": "https://github.com/aiwowo1",
      "followers_url": "https://api.github.com/users/aiwowo1/followers",
      "following_url": "https://api.github.com/users/aiwowo1/following{/other_user}",
      "gists_url": "https://api.github.com/users/aiwowo1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aiwowo1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aiwowo1/subscriptions",
      "organizations_url": "https://api.github.com/users/aiwowo1/orgs",
      "repos_url": "https://api.github.com/users/aiwowo1/repos",
      "events_url": "https://api.github.com/users/aiwowo1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aiwowo1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T23:31:40Z",
    "updated_at": "2022-11-11T23:31:40Z",
    "author_association": "NONE",
    "body": "Just for comparison, this is the successful trace when I did not have the external library 'Validations.sol' added. You can see the setFeeTo is called by the AmmalgamFactory.\r\n\r\n```\r\n\r\n== Logs ==\r\n  Factory Address: 0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n\r\n## Setting up (1) EVMs.\r\n==========================\r\nSimulated On-chain Traces:\r\n\r\n  [4842299] → new AmmalgamFactory@0x415b2Cf4aB5E84DC60c2dc50295dCEFE91DBFd09\r\n    └─ ← 22122 bytes of code\r\n\r\n  [51897] AmmalgamFactory::setFeeTo(0x7A153e26cc8ecDF57902c220481ea1c3636108c5)\r\n    └─ ← ()\r\n\r\n\r\n==========================\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312265005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1504233513",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3646#issuecomment-1504233513",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3646",
    "id": 1504233513,
    "node_id": "IC_kwDOGBlvNc5ZqMgp",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-11T23:01:13Z",
    "updated_at": "2023-04-11T23:01:13Z",
    "author_association": "COLLABORATOR",
    "body": "@aiwowo1 it's not clear to me if this is still an issue, and how to reproduce it—I'm going to optimistically close this, but if you are still having this issue, can you provide a repo with steps to reproduce and we can reopen? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1504233513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

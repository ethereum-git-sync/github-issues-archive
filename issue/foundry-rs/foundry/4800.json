{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4800",
  "id": 1679395247,
  "node_id": "I_kwDOGBlvNc5kGYmv",
  "number": 4800,
  "title": "foundry symlinks issues",
  "user": {
    "login": "wighawag",
    "id": 790580,
    "node_id": "MDQ6VXNlcjc5MDU4MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/790580?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wighawag",
    "html_url": "https://github.com/wighawag",
    "followers_url": "https://api.github.com/users/wighawag/followers",
    "following_url": "https://api.github.com/users/wighawag/following{/other_user}",
    "gists_url": "https://api.github.com/users/wighawag/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wighawag/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wighawag/subscriptions",
    "organizations_url": "https://api.github.com/users/wighawag/orgs",
    "repos_url": "https://api.github.com/users/wighawag/repos",
    "events_url": "https://api.github.com/users/wighawag/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wighawag/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4444799654,
      "node_id": "LA_kwDOGBlvNc8AAAABCO5Cpg",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/A-compiler",
      "name": "A-compiler",
      "color": "FBCA04",
      "default": false,
      "description": "Area: compiler"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-22T07:33:32Z",
  "updated_at": "2023-05-07T09:22:44Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (e0afc7c 2023-04-22T00:03:37.411928847Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge compile\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nReproduction repo : https://github.com/bug-reproduction/foundry-symlinks\r\n\r\nBasically I am creating a symlinkd folder  into the lib folder and interestingly forge follow that link and can even import files from there as long as there is no import in these files that import from that lib subfoler\r\n\r\nMore details in the repo \r\n\r\nTo reproduce execute the following:\r\n\r\n```bash\r\ngit clone git@github.com:bug-reproduction/foundry-symlinks.git;\r\ncd foundry-symlinks;\r\n\r\n# working case\r\ncp -R project-to-link forge-project/lib;\r\ncd forge-project;\r\nforge test;\r\n\r\ncd ..;\r\nrm -Rf forge-project/lib/project-to-link;\r\n\r\n# failing case\r\nln -s `pwd`/project-to-link ./forge-project/lib/\r\ncd forge-project;\r\nforge test;\r\n\r\ncd ../..;\r\n```\r\n\r\nNote that as mentioned, if the imported project do not itself import files of its own there is no issue.\r\n\r\nif you remove that line from [project-to-link/src/AnotherCounter.sol](https://github.com/bug-reproduction/foundry-symlinks/blob/main/project-to-link/src/AnotherCounter.sol) it works\r\n\r\n```\r\nimport \"./TheIssueManifestItselfWhenTheLinkedProjectImportItself.sol\";\r\n```\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1536961134",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4800#issuecomment-1536961134",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800",
    "id": 1536961134,
    "node_id": "IC_kwDOGBlvNc5bnCpu",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-06T01:21:04Z",
    "updated_at": "2023-05-06T01:21:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "you may have to define the relative path for that dependency for forge to use git submodules to access the symlink path to the actual dir. Otherwise your outside the git dir",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1536961134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1537368117",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4800#issuecomment-1537368117",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4800",
    "id": 1537368117,
    "node_id": "IC_kwDOGBlvNc5bomA1",
    "user": {
      "login": "wighawag",
      "id": 790580,
      "node_id": "MDQ6VXNlcjc5MDU4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/790580?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wighawag",
      "html_url": "https://github.com/wighawag",
      "followers_url": "https://api.github.com/users/wighawag/followers",
      "following_url": "https://api.github.com/users/wighawag/following{/other_user}",
      "gists_url": "https://api.github.com/users/wighawag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wighawag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wighawag/subscriptions",
      "organizations_url": "https://api.github.com/users/wighawag/orgs",
      "repos_url": "https://api.github.com/users/wighawag/repos",
      "events_url": "https://api.github.com/users/wighawag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wighawag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-07T09:22:44Z",
    "updated_at": "2023-05-07T09:22:44Z",
    "author_association": "NONE",
    "body": "Not sure what you mean here. My setup is a mono repo and want to use symlink to link the project to other and I do not want to use git submodule for that\r\n\r\nNote that the lib is reachable via the symlink and the failure only happen if the file imported is itself referencing other file in its own lib. seems like a bug to me\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1537368117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

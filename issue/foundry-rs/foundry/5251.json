{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5251",
  "id": 1781183220,
  "node_id": "I_kwDOGBlvNc5qKrL0",
  "number": 5251,
  "title": "Forge verification multiple failures ",
  "user": {
    "login": "amp2122",
    "id": 138130975,
    "node_id": "U_kgDOCDu2Hw",
    "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amp2122",
    "html_url": "https://github.com/amp2122",
    "followers_url": "https://api.github.com/users/amp2122/followers",
    "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
    "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
    "organizations_url": "https://api.github.com/users/amp2122/orgs",
    "repos_url": "https://api.github.com/users/amp2122/repos",
    "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amp2122/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2023-06-29T16:43:21Z",
  "updated_at": "2023-08-29T17:29:58Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (f9fc929 2023-06-29T00:12:09.234859595Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge `verify-contract` and tied procedures (`--verify`) in `create` and `script`\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nReporting this here because it is possibly a bug and also I don't have the capabilities to use Telegram.\r\n\r\n### Errors\r\n\r\nForge verification via `verify-contract` or via the `--verify` flag using `create` is failing with the error:\r\n\r\n`Fail - Unable to verify. Compiled contract deployment bytecode does NOT match the transaction deployment bytecode.`\r\n\r\nIt also fails to verify the same contract when deploying via `forge script <...> --broadcast --verify`, but with the error:\r\n\r\n`Error: \r\nexpected value at line 1 column 1`\r\n\r\nThe errors are thrown for both mainnet and goerli deployments.\r\n\r\n### Project setup\r\n\r\nThe `foundry.toml` file:\r\n\r\n```\r\n[profile.default]\r\n# General\r\nsrc = 'src'\r\nout = 'out'\r\nlibs = [ \"lib\"]\r\n\r\n# Compiler\r\nevm_version = 'shanghai'\r\nauto_detect_solc = true\r\noptimizer-runs = 1_000_000\r\noptimizer = true\r\nvia_ir = false\r\n\r\n# Tests\r\nverbosity = 2\r\n\r\n[rpc_endpoints]\r\nmainnet = \"${MAINNET_RPC_URL}\"\r\ngoerli = \"${GOERLI_RPC_URL}\"\r\n\r\n[etherscan]\r\nmainnet = { key = \"${ETHERSCAN_KEY}\" }\r\ngoerli = { key = \"${ETHERSCAN_KEY\"}\r\n```\r\n\r\nI've also tried fixing `solc_version`, removing `evm_version`, turning the `optimizer` on and off. As you can note `via_ir` is stricly set to false. The compiler version being used is `0.6.12+commit.27d51765`.\r\n\r\nExample `create` call:\r\n\r\n`\r\nforge create --rpc-url \"$GOERLI_RPC_URL\" --constructor-args <address> --private-key <key> --etherscan-api-key \"$ETHERSCAN_KEY\" --verify src/v1/Contract.sol:Contract\r\n`\r\n\r\nExample `script` call:\r\n\r\n`\r\nforge script --rpc-url $GOERLI_RPC_URL --broadcast --verify -vvvv script/Deploys.sol:ContractDeployer\r\n`\r\n\r\nExample `verify-contract` call:\r\n\r\n`\r\nforge verify-contract --chain-id 5 --num-of-optimizations 1000000 --watch --constructor-args $(cast abi-encode \"constructor(address)\" <ADDRESS>) --etherscan-api-key $ETHERSCAN_KEY --compiler-version '0.6.12+commit.27d51765' <DEPLOYED ADDRESS> src/v1/Contract.sol:Contract\r\n`\r\n\r\nExample deployment script:\r\n\r\n```solidity\r\nabstract contract BaseDeployer is Addresses, Script {\r\n    function _createContract() internal virtual;\r\n\r\n    function run() external {\r\n        uint256 key = vm.envUint(\"PRIVATE_KEY\");\r\n\r\n        vm.startBroadcast(key);\r\n\r\n        _createContract();\r\n\r\n        vm.stopBroadcast();\r\n    }\r\n}\r\n\r\nimport { Contract } from \"../src/v1/Contract.sol\";\r\n\r\ncontract ContractDeployer is BaseDeployer {\r\n    function _createContract() internal virtual override {\r\n        new Contract(getSomeAddress());\r\n    }\r\n}\r\n```\r\n\r\n`Contract.sol` dependencies are only imported from files under `lib` or under `src`. A clean setup has also been tested (push the repo then clone it to another dir), and it fails too. The deployed contract by itself doesn't do anything weird, at most it inherits from `Initializable.sol`, and it uses a few other contracts which are imported into the file.\r\n\r\nI've also checked the compiler version. It is correct.\r\n\r\nNote that this issue also existed under `20230616`, but I attempted an upgrade, and it didn't help.\r\n\r\n### Other\r\n\r\nI've also attempted use Etherscan manually, then doing standard json input and then comparing the output of `verify-contract` when piped to a file. Essentially, for a chunk of say 200 bytes, within that chunk there is going to be maybe a 16 byte difference and these changes are all going to be on average in chunks of 1-2 bytes, but some also with larger difference. Some smaller chunks (1 and 2 bytes chunks) then map to the same byte length but with a different value.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613528457",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1613528457",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1613528457,
    "node_id": "IC_kwDOGBlvNc5gLH2J",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:53:53Z",
    "updated_at": "2023-06-29T16:53:53Z",
    "author_association": "MEMBER",
    "body": "> Essentially, for a chunk of say 200 bytes, within that chunk there is going to be maybe a 16 byte difference and these changes are all going to be on average in chunks of 1-2 bytes, but some also with larger difference. Most notably, the chunks then map to the same byte length but with a different value.\r\n\r\nsorry can you elaborate on this again, I don't follow, perhaps you can attach both variants",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613528457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613530378",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1613530378",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1613530378,
    "node_id": "IC_kwDOGBlvNc5gLIUK",
    "user": {
      "login": "amp2122",
      "id": 138130975,
      "node_id": "U_kgDOCDu2Hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amp2122",
      "html_url": "https://github.com/amp2122",
      "followers_url": "https://api.github.com/users/amp2122/followers",
      "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
      "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
      "organizations_url": "https://api.github.com/users/amp2122/orgs",
      "repos_url": "https://api.github.com/users/amp2122/repos",
      "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amp2122/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:55:32Z",
    "updated_at": "2023-06-29T17:05:02Z",
    "author_association": "NONE",
    "body": "I will split out a small example part, hold on for a second.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613530378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613541144",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1613541144",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1613541144,
    "node_id": "IC_kwDOGBlvNc5gLK8Y",
    "user": {
      "login": "amp2122",
      "id": 138130975,
      "node_id": "U_kgDOCDu2Hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amp2122",
      "html_url": "https://github.com/amp2122",
      "followers_url": "https://api.github.com/users/amp2122/followers",
      "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
      "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
      "organizations_url": "https://api.github.com/users/amp2122/orgs",
      "repos_url": "https://api.github.com/users/amp2122/repos",
      "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amp2122/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T17:03:40Z",
    "updated_at": "2023-06-29T17:05:28Z",
    "author_association": "NONE",
    "body": "Ok so that last statement (edited it now to be correct) wasn't fully right, for example, there are many small parts in bytecode like:\r\n\r\n`\r\n61169356\r\n`\r\n\r\nwhich then map to\r\n\r\n`\r\n6116ad56\r\n`\r\n\r\nBut I've just noticed that there are in fact some larger parts which don't map to the same length like that, so I don't think it matters too much.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613541144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613554743",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1613554743",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1613554743,
    "node_id": "IC_kwDOGBlvNc5gLOQ3",
    "user": {
      "login": "amp2122",
      "id": 138130975,
      "node_id": "U_kgDOCDu2Hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amp2122",
      "html_url": "https://github.com/amp2122",
      "followers_url": "https://api.github.com/users/amp2122/followers",
      "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
      "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
      "organizations_url": "https://api.github.com/users/amp2122/orgs",
      "repos_url": "https://api.github.com/users/amp2122/repos",
      "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amp2122/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T17:15:38Z",
    "updated_at": "2023-06-29T17:18:35Z",
    "author_association": "NONE",
    "body": "I've actually went ahead and disabled every option in the toml file and it still doesn't verify. Same errors as specified. It has got to be something with the contracts, but those compile and simply compile with different bytecode according to Etherscan.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613554743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613683882",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1613683882",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1613683882,
    "node_id": "IC_kwDOGBlvNc5gLtyq",
    "user": {
      "login": "amp2122",
      "id": 138130975,
      "node_id": "U_kgDOCDu2Hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amp2122",
      "html_url": "https://github.com/amp2122",
      "followers_url": "https://api.github.com/users/amp2122/followers",
      "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
      "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
      "organizations_url": "https://api.github.com/users/amp2122/orgs",
      "repos_url": "https://api.github.com/users/amp2122/repos",
      "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amp2122/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T19:28:11Z",
    "updated_at": "2023-06-29T19:56:34Z",
    "author_association": "NONE",
    "body": "So Hardhat manages to deploy and verify some of the contracts which I'm working with, but even it fails verifying one contract. EDIT: Seems the last contract verifies with Hardhat after optimizations are off. EDIT 2: It seems that either the entire contract history or a subset thereof has to have optimizations turned off it to deploy.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1613683882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1614549186",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1614549186",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1614549186,
    "node_id": "IC_kwDOGBlvNc5gPBDC",
    "user": {
      "login": "alxlacayo",
      "id": 6278734,
      "node_id": "MDQ6VXNlcjYyNzg3MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6278734?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alxlacayo",
      "html_url": "https://github.com/alxlacayo",
      "followers_url": "https://api.github.com/users/alxlacayo/followers",
      "following_url": "https://api.github.com/users/alxlacayo/following{/other_user}",
      "gists_url": "https://api.github.com/users/alxlacayo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alxlacayo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alxlacayo/subscriptions",
      "organizations_url": "https://api.github.com/users/alxlacayo/orgs",
      "repos_url": "https://api.github.com/users/alxlacayo/repos",
      "events_url": "https://api.github.com/users/alxlacayo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alxlacayo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-30T11:57:18Z",
    "updated_at": "2023-06-30T11:57:18Z",
    "author_association": "NONE",
    "body": "I just ran into this exact error:\r\n```Error:  expected value at line 1 column 1```\r\nand it was due to a bad etherscan api key.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1614549186/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1614602207",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1614602207",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1614602207,
    "node_id": "IC_kwDOGBlvNc5gPN_f",
    "user": {
      "login": "amp2122",
      "id": 138130975,
      "node_id": "U_kgDOCDu2Hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/138130975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amp2122",
      "html_url": "https://github.com/amp2122",
      "followers_url": "https://api.github.com/users/amp2122/followers",
      "following_url": "https://api.github.com/users/amp2122/following{/other_user}",
      "gists_url": "https://api.github.com/users/amp2122/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amp2122/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amp2122/subscriptions",
      "organizations_url": "https://api.github.com/users/amp2122/orgs",
      "repos_url": "https://api.github.com/users/amp2122/repos",
      "events_url": "https://api.github.com/users/amp2122/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amp2122/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-30T12:46:19Z",
    "updated_at": "2023-06-30T12:46:19Z",
    "author_association": "NONE",
    "body": "> I just ran into this exact error: `Error: expected value at line 1 column 1` and it was due to a bad etherscan api key.\r\n\r\nRight, for me the problem is though that I've used the same API key to verify properly and also it gives the bytecode difference error when `verify-contract` is used.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1614602207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1637169078",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1637169078",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1637169078,
    "node_id": "IC_kwDOGBlvNc5hlTe2",
    "user": {
      "login": "kazazor",
      "id": 1577655,
      "node_id": "MDQ6VXNlcjE1Nzc2NTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1577655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazazor",
      "html_url": "https://github.com/kazazor",
      "followers_url": "https://api.github.com/users/kazazor/followers",
      "following_url": "https://api.github.com/users/kazazor/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazazor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazazor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazazor/subscriptions",
      "organizations_url": "https://api.github.com/users/kazazor/orgs",
      "repos_url": "https://api.github.com/users/kazazor/repos",
      "events_url": "https://api.github.com/users/kazazor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazazor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-16T19:22:09Z",
    "updated_at": "2023-07-16T19:22:09Z",
    "author_association": "NONE",
    "body": "I can confirm I'm getting the same issue when trying to use `--verify`. Doesn't seem to work.\r\n\r\nAny news on that?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1637169078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1695150197",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1695150197",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1695150197,
    "node_id": "IC_kwDOGBlvNc5lCfB1",
    "user": {
      "login": "QYuQianchen",
      "id": 10935300,
      "node_id": "MDQ6VXNlcjEwOTM1MzAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10935300?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/QYuQianchen",
      "html_url": "https://github.com/QYuQianchen",
      "followers_url": "https://api.github.com/users/QYuQianchen/followers",
      "following_url": "https://api.github.com/users/QYuQianchen/following{/other_user}",
      "gists_url": "https://api.github.com/users/QYuQianchen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/QYuQianchen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/QYuQianchen/subscriptions",
      "organizations_url": "https://api.github.com/users/QYuQianchen/orgs",
      "repos_url": "https://api.github.com/users/QYuQianchen/repos",
      "events_url": "https://api.github.com/users/QYuQianchen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/QYuQianchen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-28T07:08:45Z",
    "updated_at": "2023-08-28T07:08:45Z",
    "author_association": "NONE",
    "body": "Hi team! Is there any update on this? I encountered similar issue as described in #5656 and unfortunately appending `\\?` doesn't help. I'd appreciate some update!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1695150197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1697862753",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5251#issuecomment-1697862753",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5251",
    "id": 1697862753,
    "node_id": "IC_kwDOGBlvNc5lM1Rh",
    "user": {
      "login": "albertov19",
      "id": 64150856,
      "node_id": "MDQ6VXNlcjY0MTUwODU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64150856?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/albertov19",
      "html_url": "https://github.com/albertov19",
      "followers_url": "https://api.github.com/users/albertov19/followers",
      "following_url": "https://api.github.com/users/albertov19/following{/other_user}",
      "gists_url": "https://api.github.com/users/albertov19/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/albertov19/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/albertov19/subscriptions",
      "organizations_url": "https://api.github.com/users/albertov19/orgs",
      "repos_url": "https://api.github.com/users/albertov19/repos",
      "events_url": "https://api.github.com/users/albertov19/events{/privacy}",
      "received_events_url": "https://api.github.com/users/albertov19/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T17:29:58Z",
    "updated_at": "2023-08-29T17:29:58Z",
    "author_association": "NONE",
    "body": "As per #5741 \r\n\r\n### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (bff4ed9 2023-08-29T00:16:15.395348141Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge verify-contract\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nI have a very simple contract that I was able to verify with the Hardhat Etherscan plugin. Consequently I was going to try verifying it with Foundry in Moonbase Alpha and I ran into the following error:\r\n\r\n```\r\nforge verify-contract --chain-id 1287 \\\r\n--verifier etherscan \\\r\n--verifier-url https://api-moonbase.moonscan.io/api \\\r\n0x06F789662F6a776BF1C551409985311b52C41a32 \\\r\n--constructor-args 0x0000000000000000000000000000000000000000000000000000000000000014 \\\r\nsrc/Number.sol:Number \\\r\n--etherscan-api-key MY_API_KEY\r\n\r\nStart verifying contract `0x06f789662f6a776bf1c551409985311b52c41a32` deployed on moonbase\r\n2023-08-29T12:31:35.427671Z ERROR etherscan: Failed to deserialize response: expected value at line 1 column 1 res=\"<!DOCTYPE html><html lang=\\\"en-US\\\"><head><title>Just a moment...</title><meta http-equiv=\\\"Content-Type\\\" content=\\\"t\r\n..... A LOT OF THINGS .......\r\nXzgw7a3gr5MEPQlJTp3M0-1693312295-0-gaNycGzNCrs\\\" + window._cf_chl_opt.cOgUHash);cpo.onload = function() {history.replaceState(null, null, ogU);};}document.getElementsByTagName('head')[0].appendChild(cpo);}());</script></body></html>\"\r\nError: \r\nexpected value at line 1 column 1\r\n```\r\n\r\nThen I was thinking this could be an issue with Etherscan's Moonbase Alpha API. Soooo, I went to test the same thing against Sepolia (changing API Key, endpoint, chain id, etc) and the same error message there as well. I know some of my inputs are not mandatory but I was just trying different things.\r\n\r\nThe basic contract I was trying to verify is this one:\r\n\r\n```\r\n// SPDX-License-Identifier: MIT\r\npragma solidity =0.8.0;\r\n\r\ncontract Number {\r\n    uint public number;\r\n\r\n    constructor (uint _input) {\r\n        number = _input;\r\n    }\r\n\r\n    function setNumberTest(uint _input) public {\r\n        number = _input;\r\n    }\r\n}\r\n```\r\n\r\n## Fix...?\r\n\r\nAdding `?` to the `--verifier-url` fixed the issue. I could not verify the contract but at least the communication via the API worked\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1697862753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

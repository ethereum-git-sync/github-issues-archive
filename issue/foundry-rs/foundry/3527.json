{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3527",
  "id": 1418958801,
  "node_id": "I_kwDOGBlvNc5Uk5fR",
  "number": 3527,
  "title": "--via-ir flag ignore when running `forge coverage`",
  "user": {
    "login": "colinnielsen",
    "id": 33375223,
    "node_id": "MDQ6VXNlcjMzMzc1MjIz",
    "avatar_url": "https://avatars.githubusercontent.com/u/33375223?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/colinnielsen",
    "html_url": "https://github.com/colinnielsen",
    "followers_url": "https://api.github.com/users/colinnielsen/followers",
    "following_url": "https://api.github.com/users/colinnielsen/following{/other_user}",
    "gists_url": "https://api.github.com/users/colinnielsen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/colinnielsen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/colinnielsen/subscriptions",
    "organizations_url": "https://api.github.com/users/colinnielsen/orgs",
    "repos_url": "https://api.github.com/users/colinnielsen/repos",
    "events_url": "https://api.github.com/users/colinnielsen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/colinnielsen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4233058229,
      "node_id": "LA_kwDOGBlvNc78T1e1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-coverage",
      "name": "Cmd-forge-coverage",
      "color": "006B75",
      "default": false,
      "description": "Command: forge coverage"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2022-10-21T23:28:27Z",
  "updated_at": "2023-10-25T08:56:03Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (d896050 2022-10-21T00:08:06.615745Z)\n\n### What command(s) is the bug in?\n\nforge coverage --via-ir --report lcov\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nLooks like `COMPILER OPTIONS` are listed when `forge coverage -h` is run, however it appears that the coverage command does not build through the YUL pipeline.\r\n![Screen Shot 2022-10-21 at 5 27 21 PM](https://user-images.githubusercontent.com/33375223/197304663-51924590-3d3b-4436-89f4-914b10a29b94.png)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527/reactions",
    "total_count": 5,
    "+1": 5,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1287536253",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1287536253",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1287536253,
    "node_id": "IC_kwDOGBlvNc5Mvj59",
    "user": {
      "login": "colinnielsen",
      "id": 33375223,
      "node_id": "MDQ6VXNlcjMzMzc1MjIz",
      "avatar_url": "https://avatars.githubusercontent.com/u/33375223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/colinnielsen",
      "html_url": "https://github.com/colinnielsen",
      "followers_url": "https://api.github.com/users/colinnielsen/followers",
      "following_url": "https://api.github.com/users/colinnielsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/colinnielsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/colinnielsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/colinnielsen/subscriptions",
      "organizations_url": "https://api.github.com/users/colinnielsen/orgs",
      "repos_url": "https://api.github.com/users/colinnielsen/repos",
      "events_url": "https://api.github.com/users/colinnielsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/colinnielsen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-21T23:37:35Z",
    "updated_at": "2022-10-21T23:37:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like `forge coverage` also ignores the `via_ir` flag in the `foundry.toml`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1287536253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1287669731",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1287669731",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1287669731,
    "node_id": "IC_kwDOGBlvNc5MwEfj",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-22T07:57:54Z",
    "updated_at": "2022-10-22T07:57:54Z",
    "author_association": "MEMBER",
    "body": "this is unfortunately a limitation, because --via-ir transforms the AST so there is no good way of keeping track afterwards.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1287669731/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1289187749",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1289187749",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1289187749,
    "node_id": "IC_kwDOGBlvNc5M13Gl",
    "user": {
      "login": "colinnielsen",
      "id": 33375223,
      "node_id": "MDQ6VXNlcjMzMzc1MjIz",
      "avatar_url": "https://avatars.githubusercontent.com/u/33375223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/colinnielsen",
      "html_url": "https://github.com/colinnielsen",
      "followers_url": "https://api.github.com/users/colinnielsen/followers",
      "following_url": "https://api.github.com/users/colinnielsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/colinnielsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/colinnielsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/colinnielsen/subscriptions",
      "organizations_url": "https://api.github.com/users/colinnielsen/orgs",
      "repos_url": "https://api.github.com/users/colinnielsen/repos",
      "events_url": "https://api.github.com/users/colinnielsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/colinnielsen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-24T15:11:17Z",
    "updated_at": "2022-10-24T15:11:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Shoot... Is there a way around this? I'm worried that this feature would be bricked once solidity moves to the IR pipeline.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1289187749/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302486465",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1302486465",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1302486465,
    "node_id": "IC_kwDOGBlvNc5Nol3B",
    "user": {
      "login": "Oighty",
      "id": 90539730,
      "node_id": "MDQ6VXNlcjkwNTM5NzMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/90539730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Oighty",
      "html_url": "https://github.com/Oighty",
      "followers_url": "https://api.github.com/users/Oighty/followers",
      "following_url": "https://api.github.com/users/Oighty/following{/other_user}",
      "gists_url": "https://api.github.com/users/Oighty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Oighty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Oighty/subscriptions",
      "organizations_url": "https://api.github.com/users/Oighty/orgs",
      "repos_url": "https://api.github.com/users/Oighty/repos",
      "events_url": "https://api.github.com/users/Oighty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Oighty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:04:42Z",
    "updated_at": "2022-11-03T18:04:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've been having this same error without using `--via-ir`. My project compiles fine with `forge build` and `forge test`, but throws `Stack too deep` when running `forge coverage`. Also on Apple Silicon with `forge 0.2.0 (7f4fb5 2022-11-02)`.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302486465/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302536476",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1302536476",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1302536476,
    "node_id": "IC_kwDOGBlvNc5NoyEc",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:52:56Z",
    "updated_at": "2022-11-03T18:52:56Z",
    "author_association": "MEMBER",
    "body": "> this is unfortunately a limitation, because --via-ir transforms the AST so there is no good way of keeping track of the original AST afterward right now.\r\n\r\nwe should make this clearer on the website.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302536476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1328802597",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1328802597",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1328802597,
    "node_id": "IC_kwDOGBlvNc5PM-sl",
    "user": {
      "login": "frank-lim-partior",
      "id": 103493560,
      "node_id": "U_kgDOBisvuA",
      "avatar_url": "https://avatars.githubusercontent.com/u/103493560?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frank-lim-partior",
      "html_url": "https://github.com/frank-lim-partior",
      "followers_url": "https://api.github.com/users/frank-lim-partior/followers",
      "following_url": "https://api.github.com/users/frank-lim-partior/following{/other_user}",
      "gists_url": "https://api.github.com/users/frank-lim-partior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frank-lim-partior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frank-lim-partior/subscriptions",
      "organizations_url": "https://api.github.com/users/frank-lim-partior/orgs",
      "repos_url": "https://api.github.com/users/frank-lim-partior/repos",
      "events_url": "https://api.github.com/users/frank-lim-partior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frank-lim-partior/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T09:51:36Z",
    "updated_at": "2022-11-28T09:51:36Z",
    "author_association": "NONE",
    "body": "> this is unfortunately a limitation, because --via-ir transforms the AST so there is no good way of keeping track afterwards.\r\n\r\nIs the need for tracking AST isolated to the test contracts? Or does it apply to the primary source code as well?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1328802597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1363778421",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1363778421",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1363778421,
    "node_id": "IC_kwDOGBlvNc5RSZt1",
    "user": {
      "login": "0xRusowsky",
      "id": 90208954,
      "node_id": "MDQ6VXNlcjkwMjA4OTU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/90208954?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xRusowsky",
      "html_url": "https://github.com/0xRusowsky",
      "followers_url": "https://api.github.com/users/0xRusowsky/followers",
      "following_url": "https://api.github.com/users/0xRusowsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xRusowsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xRusowsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xRusowsky/subscriptions",
      "organizations_url": "https://api.github.com/users/0xRusowsky/orgs",
      "repos_url": "https://api.github.com/users/0xRusowsky/repos",
      "events_url": "https://api.github.com/users/0xRusowsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xRusowsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T09:26:59Z",
    "updated_at": "2022-12-23T10:57:39Z",
    "author_association": "NONE",
    "body": "> this is unfortunately a limitation, because --via-ir transforms the AST so there is no good way of keeping track afterwards.\r\n\r\nI'm facing the same issue. Having this limitation in mind, do we have any alternative to see test coverage when getting `Stack too deep` error?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1363778421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1366189327",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1366189327",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1366189327,
    "node_id": "IC_kwDOGBlvNc5RbmUP",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-27T21:26:58Z",
    "updated_at": "2023-01-13T20:57:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> we should make this clearer on the website.\r\n\r\n@mattsse what do you mean by \"website\"? The Foundry Book? Because if yes, I don't see any documentation about coverage on there.\r\n\r\nI am not sufficiently experienced with test coverage software to understand why it is difficult (or impossible) to run coverage over IR-optimized code, but I agree with the commend made by @colinnielsen above - if coverage is not made to work with IR, it will not be as popular as it could be.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1366189327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1588572074",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1588572074",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1588572074,
    "node_id": "IC_kwDOGBlvNc5er6-q",
    "user": {
      "login": "haythemsellami",
      "id": 17862704,
      "node_id": "MDQ6VXNlcjE3ODYyNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/17862704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haythemsellami",
      "html_url": "https://github.com/haythemsellami",
      "followers_url": "https://api.github.com/users/haythemsellami/followers",
      "following_url": "https://api.github.com/users/haythemsellami/following{/other_user}",
      "gists_url": "https://api.github.com/users/haythemsellami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haythemsellami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haythemsellami/subscriptions",
      "organizations_url": "https://api.github.com/users/haythemsellami/orgs",
      "repos_url": "https://api.github.com/users/haythemsellami/repos",
      "events_url": "https://api.github.com/users/haythemsellami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haythemsellami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-13T05:28:32Z",
    "updated_at": "2023-06-13T05:50:44Z",
    "author_association": "NONE",
    "body": "My code compile without `--via-ir`, and tests works fine, but still getting stack too deep in coverage.\r\n```\r\nforge 0.2.0 (08a629a 2023-06-03T00:04:10.749254000Z)\r\n``` ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1588572074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1588587429",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1588587429",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1588587429,
    "node_id": "IC_kwDOGBlvNc5er-ul",
    "user": {
      "login": "haythemsellami",
      "id": 17862704,
      "node_id": "MDQ6VXNlcjE3ODYyNzA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/17862704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haythemsellami",
      "html_url": "https://github.com/haythemsellami",
      "followers_url": "https://api.github.com/users/haythemsellami/followers",
      "following_url": "https://api.github.com/users/haythemsellami/following{/other_user}",
      "gists_url": "https://api.github.com/users/haythemsellami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haythemsellami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haythemsellami/subscriptions",
      "organizations_url": "https://api.github.com/users/haythemsellami/orgs",
      "repos_url": "https://api.github.com/users/haythemsellami/repos",
      "events_url": "https://api.github.com/users/haythemsellami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haythemsellami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-13T05:50:00Z",
    "updated_at": "2023-06-13T05:50:00Z",
    "author_association": "NONE",
    "body": "> My code compile without `--via-ir`, but still getting stack too deep in coverage.\r\n> \r\n> ```\r\n> forge 0.2.0 (08a629a 2023-06-03T00:04:10.749254000Z)\r\n> ```\r\n\r\nThis is an annoying error and probably will be a big blocker for Foundry adoption.Also, how to get more output from the CLI command, it does not show to me where the stack too deep error exactly is:\r\n```\r\n[⠰] Compiling...\r\n[⠒] Compiling 100 files with 0.8.20\r\n[⠘] Solc 0.8.20 finished in 4.24s\r\nError:\r\nCompiler run failed:\r\nError: Compiler error (/solidity/libyul/backends/evm/AsmCodeGen.cpp:68):Stack too deep. Try compiling with `--via-ir` (cli) or the equivalent `viaIR: true` (standard JSON) while enabling the optimizer. Otherwise, try removing local variables. When compiling inline assembly: Variable headStart is 1 slot(s) too deep inside the stack. Stack too deep. Try compiling with `--via-ir` (cli) or the equivalent `viaIR: true` (standard JSON) while enabling the optimizer. Otherwise, try removing local variables.\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1588587429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1607106793",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1607106793",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1607106793,
    "node_id": "IC_kwDOGBlvNc5fyoDp",
    "user": {
      "login": "smak0v",
      "id": 26391964,
      "node_id": "MDQ6VXNlcjI2MzkxOTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/26391964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smak0v",
      "html_url": "https://github.com/smak0v",
      "followers_url": "https://api.github.com/users/smak0v/followers",
      "following_url": "https://api.github.com/users/smak0v/following{/other_user}",
      "gists_url": "https://api.github.com/users/smak0v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smak0v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smak0v/subscriptions",
      "organizations_url": "https://api.github.com/users/smak0v/orgs",
      "repos_url": "https://api.github.com/users/smak0v/repos",
      "events_url": "https://api.github.com/users/smak0v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smak0v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-26T09:49:31Z",
    "updated_at": "2023-06-26T09:49:31Z",
    "author_association": "NONE",
    "body": "I have the same issue with `forge coverage` command.\r\n\r\n<img width=\"1725\" alt=\"image\" src=\"https://github.com/foundry-rs/foundry/assets/26391964/a4770979-4f03-448a-8996-132122432be2\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1607106793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1771394654",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1771394654",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1771394654,
    "node_id": "IC_kwDOGBlvNc5plVZe",
    "user": {
      "login": "ethereumdegen",
      "id": 6249263,
      "node_id": "MDQ6VXNlcjYyNDkyNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6249263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethereumdegen",
      "html_url": "https://github.com/ethereumdegen",
      "followers_url": "https://api.github.com/users/ethereumdegen/followers",
      "following_url": "https://api.github.com/users/ethereumdegen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethereumdegen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethereumdegen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethereumdegen/subscriptions",
      "organizations_url": "https://api.github.com/users/ethereumdegen/orgs",
      "repos_url": "https://api.github.com/users/ethereumdegen/repos",
      "events_url": "https://api.github.com/users/ethereumdegen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethereumdegen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-19T17:08:03Z",
    "updated_at": "2023-10-19T17:08:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I've been having this same error without using `--via-ir`. My project compiles fine with `forge build` and `forge test`, but throws `Stack too deep` when running `forge coverage`. Also on Apple Silicon with `forge 0.2.0 (7f4fb5 2022-11-02)`.\r\n\r\ni have the exact same issue \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1771394654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1778814975",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3527#issuecomment-1778814975",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3527",
    "id": 1778814975,
    "node_id": "IC_kwDOGBlvNc5qBo__",
    "user": {
      "login": "golden-expiriensu",
      "id": 83108115,
      "node_id": "MDQ6VXNlcjgzMTA4MTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/83108115?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/golden-expiriensu",
      "html_url": "https://github.com/golden-expiriensu",
      "followers_url": "https://api.github.com/users/golden-expiriensu/followers",
      "following_url": "https://api.github.com/users/golden-expiriensu/following{/other_user}",
      "gists_url": "https://api.github.com/users/golden-expiriensu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/golden-expiriensu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/golden-expiriensu/subscriptions",
      "organizations_url": "https://api.github.com/users/golden-expiriensu/orgs",
      "repos_url": "https://api.github.com/users/golden-expiriensu/repos",
      "events_url": "https://api.github.com/users/golden-expiriensu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/golden-expiriensu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-25T08:56:02Z",
    "updated_at": "2023-10-25T08:56:02Z",
    "author_association": "NONE",
    "body": "Hi, I have the exact same issue, is this fix planned?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1778814975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

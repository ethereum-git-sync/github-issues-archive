{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4623",
  "id": 1635176061,
  "node_id": "I_kwDOGBlvNc5hds59",
  "number": 4623,
  "title": "Fuzzer calls functions other than given in targetSelector() after contract deployment",
  "user": {
    "login": "Teamo0",
    "id": 77360332,
    "node_id": "MDQ6VXNlcjc3MzYwMzMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/77360332?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Teamo0",
    "html_url": "https://github.com/Teamo0",
    "followers_url": "https://api.github.com/users/Teamo0/followers",
    "following_url": "https://api.github.com/users/Teamo0/following{/other_user}",
    "gists_url": "https://api.github.com/users/Teamo0/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Teamo0/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Teamo0/subscriptions",
    "organizations_url": "https://api.github.com/users/Teamo0/orgs",
    "repos_url": "https://api.github.com/users/Teamo0/repos",
    "events_url": "https://api.github.com/users/Teamo0/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Teamo0/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-22T06:56:51Z",
  "updated_at": "2023-03-22T14:30:30Z",
  "closed_at": "2023-03-22T14:24:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (da2392e 2023-03-22T00:04:12.437988019Z)\n\n### What command(s) is the bug in?\n\nforge test\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nFunctions to fuzz are restricted via targetSelector. One of the fuzzed functions deploys a proxy contract for user. After the proxy is deployed, the fuzzer starts calling all functions on the newly deployed contract, although not specified in targetSelectors.\r\n\r\nCode to specify functions to be called on handler:\r\n![image](https://user-images.githubusercontent.com/77360332/226824852-c3c9860a-8cb3-4692-a971-6735d9802afa.png)\r\n\r\nError message when running forge test shows that fuzzer is calling function 'transferAsset' on UserProxy Contract, which was deployed during function call 'botProcessRequests'.\r\n\r\n![image](https://user-images.githubusercontent.com/77360332/226825244-103c0227-c9ee-4a77-bfeb-45f07a097684.png)\r\n",
  "closed_by": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1479658137",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4623#issuecomment-1479658137",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623",
    "id": 1479658137,
    "node_id": "IC_kwDOGBlvNc5YMcqZ",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T14:24:19Z",
    "updated_at": "2023-03-22T14:24:19Z",
    "author_association": "COLLABORATOR",
    "body": "This is the expected behaviorâ€”contracts deployed during your invariant test are automatically added to the list of potential targets. To exclude them, you can use [`excludeArtifact`](https://github.com/foundry-rs/forge-std/blob/46264e9788017fc74f9f58b7efa0bc6e1df6d410/src/StdInvariant.sol#L34-L36)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1479658137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1479673581",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4623#issuecomment-1479673581",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4623",
    "id": 1479673581,
    "node_id": "IC_kwDOGBlvNc5YMgbt",
    "user": {
      "login": "Teamo0",
      "id": 77360332,
      "node_id": "MDQ6VXNlcjc3MzYwMzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/77360332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Teamo0",
      "html_url": "https://github.com/Teamo0",
      "followers_url": "https://api.github.com/users/Teamo0/followers",
      "following_url": "https://api.github.com/users/Teamo0/following{/other_user}",
      "gists_url": "https://api.github.com/users/Teamo0/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Teamo0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Teamo0/subscriptions",
      "organizations_url": "https://api.github.com/users/Teamo0/orgs",
      "repos_url": "https://api.github.com/users/Teamo0/repos",
      "events_url": "https://api.github.com/users/Teamo0/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Teamo0/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T14:30:30Z",
    "updated_at": "2023-03-22T14:30:30Z",
    "author_association": "NONE",
    "body": "Hey, thanks for clarifying!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1479673581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

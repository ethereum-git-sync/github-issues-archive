{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4540",
  "id": 1620483097,
  "node_id": "I_kwDOGBlvNc5glpwZ",
  "number": 4540,
  "title": "feat(doc): do not italicize the @dev NatSpec",
  "user": {
    "login": "PaulRBerg",
    "id": 8782666,
    "node_id": "MDQ6VXNlcjg3ODI2NjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PaulRBerg",
    "html_url": "https://github.com/PaulRBerg",
    "followers_url": "https://api.github.com/users/PaulRBerg/followers",
    "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
    "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
    "repos_url": "https://api.github.com/users/PaulRBerg/repos",
    "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4417718720,
      "node_id": "LA_kwDOGBlvNc8AAAABB1EJwA",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-doc",
      "name": "Cmd-forge-doc",
      "color": "006B75",
      "default": false,
      "description": "Command: forge doc"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-12T19:30:36Z",
  "updated_at": "2023-03-14T17:43:22Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\n## Issue\r\n\r\n`forge doc` adds an asterisk * to the Markdown paragraphs generated for the `@dev` NatSpec tag.\r\n\r\nThis is not great because it screws up the formatting for anything more complicated than a line, e.g.:\r\n\r\n```solidity\r\n/// @notice Creates a stream with the provided start time and end time as the range of the stream. The stream is\r\n/// funded by `msg.sender` and is wrapped in an ERC-721 NFT.\r\n///\r\n/// @dev Emits a {CreateLockupLinearStream} and a {Transfer} event.\r\n///\r\n/// Notes:\r\n/// - As long as they are ordered, it is not an error to set a range that is in the past.\r\n///\r\n/// Requirements:\r\n/// - `params.recipient` must not be the zero address.\r\n/// - `params.totalAmount` must not be zero.\r\n/// - `params.range.start` must not be greater than `params.range.cliff`.\r\n/// - `params.range.cliff` must not be greater than `params.range.end`.\r\n/// - `msg.sender` must have allowed this contract to spend at least `params.totalAmount` assets.\r\n/// - If set, `params.broker.fee` must not be greater than `MAX_FEE`.\r\n///\r\n/// @param params Struct that encapsulates the function parameters.\r\n/// @return streamId The id of the newly created stream.\r\nfunction createWithRange(LockupLinear.CreateWithRange calldata params) external returns (uint256 streamId);\r\n```\r\n\r\n`forge doc` generates the following Markdown for the function above:\r\n\r\n```md\r\n### createWithRange\r\n\r\nCreates a stream with the provided start time and end time as the range of the stream. The stream is\r\nfunded by `msg.sender` and is wrapped in an ERC-721 NFT.\r\n\r\n*Emits a {CreateLockupLinearStream} and a {Transfer} event.\r\nNotes:\r\n- As long as they are ordered, it is not an error to set a range that is in the past.\r\nRequirements:\r\n- `params.recipient` must not be the zero address.\r\n- `params.totalAmount` must not be zero.\r\n- `params.range.start` must not be greater than `params.range.cliff`.\r\n- `params.range.cliff` must not be greater than `params.range.end`.\r\n- `msg.sender` must have allowed this contract to spend at least `params.totalAmount` assets.\r\n- If set, `params.broker.fee` must not be greater than `MAX_FEE`.*\r\n```\r\n\r\nIt adds that extra `*`, which (i) doesn't work in this case because this is a paragraph with a list, and (ii) even for cases where it works (single lines), it looks ugly, IMO.\r\n\r\n## Solutions\r\n\r\n1. Completely remove this asterisk.\r\n2. Let users choose whether they want the asterisk via a config option under `[doc]`.\r\n\r\n### Additional context\r\n\r\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1466315045",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4540#issuecomment-1466315045",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540",
    "id": 1466315045,
    "node_id": "IC_kwDOGBlvNc5XZjEl",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-13T15:00:34Z",
    "updated_at": "2023-03-13T15:00:34Z",
    "author_association": "COLLABORATOR",
    "body": "Ah interesting. For context the rationale here was:\r\n- `@notice` and `@dev` are for different audiences, so it would be nice to distinguish them somehow so each type of reader knows what's relevant\r\n- The [primitive-dodoc](https://github.com/primitivefinance/primitive-dodoc#-usage) hardhat plugin puts `@dev` tags in italics as shown there, which is why we went that route (ref https://github.com/foundry-rs/foundry/pull/2701#issuecomment-1376009358). \r\n\r\nWonder if there's any alternative solutions that keep the visual separation but doesn't break formatting like this",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1466315045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1467000247",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4540#issuecomment-1467000247",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4540",
    "id": 1467000247,
    "node_id": "IC_kwDOGBlvNc5XcKW3",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-13T21:38:30Z",
    "updated_at": "2023-03-14T17:43:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the context.\r\n\r\n> @notice and @dev are for different audiences,\r\n\r\nWell, they get bundled together in the auto-generated Markdown content, so it's hard to disentangle them. It took me a few moments (the author of my NatSpec comments) to figure out what was happening; a third-party reader of the docs website wouldn't have a clue that one section is for general audience, and the other is for devs.\r\n\r\n> Wonder if there's any alternative solutions that keep the visual separation but doesn't break formatting like this\r\n\r\nAt a minimum, `forge doc` should handle the case when the content of the `@dev` tag is split into multiple lines. Adding asterisks doesn't work in this case.\r\n\r\nBut users should ideally be able to tweak this on and off either via an option in `foundry.toml`, or by a more robust templating functionality Ã  la [solidity-docgen](https://github.com/OpenZeppelin/solidity-docgen) (which can generate different Markdown based on a template provided by the user).\r\n\r\nGenerally speaking, I am in favor of `forge doc` making as few opinionated choices as possible, because a simpler Markdown is easier to customize later on.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1467000247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

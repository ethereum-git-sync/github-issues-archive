{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5423",
  "id": 1808668092,
  "node_id": "I_kwDOGBlvNc5rzhW8",
  "number": 5423,
  "title": "parseJson with invalid object name reports error in \"key\" when key parameter is fine",
  "user": {
    "login": "DavidOrchard",
    "id": 55760,
    "node_id": "MDQ6VXNlcjU1NzYw",
    "avatar_url": "https://avatars.githubusercontent.com/u/55760?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DavidOrchard",
    "html_url": "https://github.com/DavidOrchard",
    "followers_url": "https://api.github.com/users/DavidOrchard/followers",
    "following_url": "https://api.github.com/users/DavidOrchard/following{/other_user}",
    "gists_url": "https://api.github.com/users/DavidOrchard/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DavidOrchard/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DavidOrchard/subscriptions",
    "organizations_url": "https://api.github.com/users/DavidOrchard/orgs",
    "repos_url": "https://api.github.com/users/DavidOrchard/repos",
    "events_url": "https://api.github.com/users/DavidOrchard/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DavidOrchard/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-07-17T21:37:41Z",
  "updated_at": "2023-07-17T21:37:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (08a629a 2023-06-03T00:14:26.563741000Z)\n\n### What command(s) is the bug in?\n\nforge test\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nThe parseJson docs at https://book.getfoundry.sh/cheatcodes/parse-json#signature\r\ncontain\r\n```\r\n// Return the value(s) that correspond to 'key'\r\nvm.parseJson(string memory json, string memory key)\r\n```\r\nas well as\r\n```\r\n[JSON Encoding Rules](https://book.getfoundry.sh/cheatcodes/parse-json#json-encoding-rules)\r\nWe use the terms number, string, object, array, boolean as they are defined in the [JSON spec](https://www.w3schools.com/js/js_json_datatypes.asp).\r\n```\r\nA call to parseJson with json that has an object with an error in the object's name field, such as\r\n```\r\n        string memory json = '{\\'timestamp\": 1655140035}';\r\n```\r\ndemonstrated in https://github.com/foundry-rs/forge-std/pull/421\r\nerroneously reports this as\r\n```\r\nFAIL. Reason: key must be a string at line 1 column 2\r\n```\r\nThe 2nd parameter to parseJson is called key (but probably should be called something like JSONPath or jq).\r\n\r\nThe JSON spec reference erroneously links to W3Schools.com (which should never be the linked to authoritatively as it's poaching the official w3c) instead of a true JSON spec, such as the official ECMA spec at https://www.ecma-international.org/publications-and-standards/standards/ecma-404/.\r\n\r\nAn official JSON spec starts the object definition with\r\n```\r\nAn object structure is represented as a pair of curly bracket tokens surrounding zero or more name/value pairs.\r\nA name is a string. A single colon token follows each name, separating the name from the value.```\r\n\r\nThe error message returned should the term `name` or even better `json object name` instead of the overloaded and term `key`.  Ideally, the documentation link to JSON spec should be corrected & the parseJson function 2nd parameter name would be improved.\r\n\r\nI've forked and made a PR that adds the failing test. https://github.com/foundry-rs/forge-std/pull/421.\r\n\r\nI did the fork & branch against forge-std as I'm new to solidity/forge and couldn't get the foundry/forge solidity tests to run.\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5423/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

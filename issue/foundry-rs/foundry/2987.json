{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2987",
  "id": 1353405402,
  "node_id": "I_kwDOGBlvNc5Qq1Pa",
  "number": 2987,
  "title": "Consider renaming fields and changing types in the broadcast JSON output files",
  "user": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-08-28T16:34:44Z",
  "updated_at": "2023-06-16T22:38:05Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nRight now in the broadcast logs there are two fields with names we should consider changing due to conflicts with language keywords.\r\n1. `function` is a keyword in JS, solidity, and likely other languages. I'd suggest renaming this to `functionSig` since the full signature is shown\r\n2. `type` is also a keyword in many languages. I'd suggest renaming to `txType`\r\n\r\nThere are also fields where the output types should be changed (I recall discussing this in the past but not sure if we're tracking anywhere so figured I'd mention it here). First, in the `transactions` array:\r\n- `transaction.type` should be a number, currently it's a hex string\r\n- `transaction.gas` should be a number, currently it's a hex string\r\n- Addresses are not logged as checksummed but they should be (also tracked in https://github.com/foundry-rs/foundry/issues/2975)\r\n- When a function argument is an address, the arguments array omits the `0x` prefix but it should be included.\r\n- When a function argument is a boolean, the arguments array contains a string of `\"true\"` instead of a boolean of `true` (same for `false`)\r\n\r\nIn the `receipts` array:\r\n- `transactionIndex` can be a number, currently it's a hex string\r\n- `blockNumber` can be a number, currently it's a hex string\r\n- In the logs array, `transactionIndex`, `logIndex`, and `transactionLogIndex` can all be numbers, currently they are hex strings\r\n- `cumulativeGasUsed` can be a number, currently it's a hex string\r\n- `gasUsed` can be a number, currently it's a hex string\r\n- Addresses are not logged as checksummed but they should be\r\n- `status` is a hex string but should be either a boolean or a number of `1` or `0`\r\n\r\nThe above list is not comprehensive and there may be other fields that should have a more readable type.\r\n\r\nThese suggestions deviate from the ethereum JSON RPC spec in the sense that all numbers are \"quantities\" which means they're returned from the node as hex strings with as few leading zeros as possible. However, this makes the data less readable and harder to parse, and I don't think there's a reason why these log files need to strictly follow the spec.\n\n### Additional context\n\n_No response_",
  "closed_by": {
    "login": "Evalir",
    "id": 26014927,
    "node_id": "MDQ6VXNlcjI2MDE0OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Evalir",
    "html_url": "https://github.com/Evalir",
    "followers_url": "https://api.github.com/users/Evalir/followers",
    "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
    "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
    "organizations_url": "https://api.github.com/users/Evalir/orgs",
    "repos_url": "https://api.github.com/users/Evalir/repos",
    "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Evalir/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987/timeline",
  "performed_via_github_app": null,
  "state_reason": "reopened"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1594825939",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2987#issuecomment-1594825939",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987",
    "id": 1594825939,
    "node_id": "IC_kwDOGBlvNc5fDxzT",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T14:54:28Z",
    "updated_at": "2023-06-16T14:54:28Z",
    "author_association": "COLLABORATOR",
    "body": "I believe this has been done as @DaniPopes pointed out, and quickly checking recent broadcast logs it seems done. Feel free to reopen if it's not!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1594825939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1595398602",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2987#issuecomment-1595398602",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987",
    "id": 1595398602,
    "node_id": "IC_kwDOGBlvNc5fF9nK",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T22:32:25Z",
    "updated_at": "2023-06-16T22:34:44Z",
    "author_association": "COLLABORATOR",
    "body": "Hmm when was this done? I don't see a PR linked, and I just foundryup'd and ran a script, and I see none of these changes implemented except for the address arg now including the leading 0x 😅\r\n\r\n```json\r\n{\r\n  \"transactions\": [\r\n    {\r\n      \"hash\": \"0xba6f75b3d3197fb86d9c22d8e21cf223dfc65d77dd1450046f6658a8dad10f1a\",\r\n      \"transactionType\": \"CREATE\",\r\n      \"contractName\": \"Counter\",\r\n      \"contractAddress\": \"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512\",\r\n      \"function\": null,\r\n      \"arguments\": [\r\n        \"0x000000000000000000000000000000000000007B\",\r\n        \"true\"\r\n      ],\r\n      \"transaction\": {\r\n        \"type\": \"0x02\",\r\n        \"from\": \"0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\",\r\n        \"gas\": \"0x23494\",\r\n        \"value\": \"0x0\",\r\n        \"data\": \"0x608060405234801561001057600080fd5b5060405161018a38038061018a83398101604081905261002f9161003a565b505060008055610085565b6000806040838503121561004d57600080fd5b82516001600160a01b038116811461006457600080fd5b6020840151909250801515811461007a57600080fd5b809150509250929050565b60f7806100936000396000f3fe6080604052348015600f57600080fd5b5060043610603c5760003560e01c80633fb5c1cb1460415780638381f58a146053578063d09de08a14606d575b600080fd5b6051604c3660046083565b600055565b005b605b60005481565b60405190815260200160405180910390f35b6051600080549080607c83609b565b9190505550565b600060208284031215609457600080fd5b5035919050565b60006001820160ba57634e487b7160e01b600052601160045260246000fd5b506001019056fea264697066735822122072cde5e6bbd063dda2aca7fbf2547afa87257af5368206714e2af92cb926239b64736f6c63430008140033000000000000000000000000000000000000000000000000000000000000007b0000000000000000000000000000000000000000000000000000000000000001\",\r\n        \"nonce\": \"0x1\",\r\n        \"accessList\": []\r\n      },\r\n      \"additionalContracts\": [],\r\n      \"isFixedGasLimit\": false\r\n    }\r\n  ],\r\n  \"receipts\": [\r\n    {\r\n      \"transactionHash\": \"0xba6f75b3d3197fb86d9c22d8e21cf223dfc65d77dd1450046f6658a8dad10f1a\",\r\n      \"transactionIndex\": \"0x0\",\r\n      \"blockHash\": \"0xb8238f8936f15e7dc0d86898e487cce2c828d0e343dc68870cfc6c1d693c59da\",\r\n      \"blockNumber\": \"0x2\",\r\n      \"from\": \"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\",\r\n      \"to\": null,\r\n      \"cumulativeGasUsed\": \"0x1b269\",\r\n      \"gasUsed\": \"0x1b269\",\r\n      \"contractAddress\": \"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512\",\r\n      \"logs\": [],\r\n      \"status\": \"0x1\",\r\n      \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"type\": \"0x2\",\r\n      \"effectiveGasPrice\": \"0xe7056143\"\r\n    }\r\n  ],\r\n  \"libraries\": [],\r\n  \"pending\": [],\r\n  \"returns\": {},\r\n  \"timestamp\": 1686954856,\r\n  \"chain\": 31337,\r\n  \"multi\": false,\r\n  \"commit\": \"20a75e1\"\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1595398602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1595405965",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2987#issuecomment-1595405965",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2987",
    "id": 1595405965,
    "node_id": "IC_kwDOGBlvNc5fF_aN",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T22:38:05Z",
    "updated_at": "2023-06-16T22:38:05Z",
    "author_association": "COLLABORATOR",
    "body": "ahhh my bad, i might have closed this issue by mistake instead of a similar one 😅 this one's still on the todo list",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1595405965/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

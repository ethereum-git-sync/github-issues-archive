{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1738",
  "id": 1249121778,
  "node_id": "I_kwDOGBlvNc5KdBXy",
  "number": 1738,
  "title": "`--extra-output metadata` option outputs different metadata than the expected compilation JSON output with bytecode_hash = \"ipfs\"",
  "user": {
    "login": "joaquim-verges",
    "id": 3353417,
    "node_id": "MDQ6VXNlcjMzNTM0MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joaquim-verges",
    "html_url": "https://github.com/joaquim-verges",
    "followers_url": "https://api.github.com/users/joaquim-verges/followers",
    "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
    "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
    "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
    "repos_url": "https://api.github.com/users/joaquim-verges/repos",
    "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3777098561,
      "node_id": "LA_kwDOGBlvNc7hIfNB",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-build",
      "name": "Cmd-forge-build",
      "color": "006B75",
      "default": false,
      "description": "Command: forge build"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1",
    "html_url": "https://github.com/foundry-rs/foundry/milestone/1",
    "labels_url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1/labels",
    "id": 8140456,
    "node_id": "MI_kwDOGBlvNc4AfDao",
    "number": 1,
    "title": "v1.0.0",
    "description": "",
    "creator": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 10,
    "closed_issues": 125,
    "state": "open",
    "created_at": "2022-06-28T08:15:32Z",
    "updated_at": "2023-05-12T14:44:03Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 12,
  "created_at": "2022-05-26T05:36:12Z",
  "updated_at": "2022-08-03T15:40:04Z",
  "closed_at": "2022-08-03T15:40:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (4fcd7e0 2022-05-26T00:04:48.079145Z)\n\n### What command(s) is the bug in?\n\nforge build\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nWhen outputting the solc compilation metadata using `--extra-output metadata` or `--extra-output-files metadata` the resulting metadata is not matching the bytecode IPFS hash of the compiled contract.\r\n\r\nTo reproduce in a fresh project:\r\n\r\n```\r\nforge init\r\nforge build --extra-output metadata\r\n```\r\nthen inspect the json output in `out/Contract.sol/Contract.json`.\r\n\r\nI've done the same setup with hardhat and raw solcjs, both produce the expected metadata that matches exactly the IPFS hash appended to the bytecode.\r\n\r\nFor the same, empty contract, here's the metadata that `hardhat` outputs:\r\n\r\n```\r\n{\r\n  \"compiler\": { \"version\": \"0.8.13+commit.abaa5c0e\" },\r\n  \"language\": \"Solidity\",\r\n  \"output\": {\r\n    \"abi\": [],\r\n    \"devdoc\": { \"kind\": \"dev\", \"methods\": {}, \"version\": 1 },\r\n    \"userdoc\": { \"kind\": \"user\", \"methods\": {}, \"version\": 1 }\r\n  },\r\n  \"settings\": {\r\n    \"compilationTarget\": { \"contracts/Contract.sol\": \"Contract\" },\r\n    \"evmVersion\": \"london\",\r\n    \"libraries\": {},\r\n    \"metadata\": { \"bytecodeHash\": \"ipfs\" },\r\n    \"optimizer\": { \"enabled\": false, \"runs\": 200 },\r\n    \"remappings\": []\r\n  },\r\n  \"sources\": {\r\n    \"contracts/Contract.sol\": {\r\n      \"keccak256\": \"0x88c53f90b24a07c57711738987ddc81838a43c4ab7b6ce2986f1b470500ebe86\",\r\n      \"license\": \"UNLICENSED\",\r\n      \"urls\": [\r\n        \"bzz-raw://58178e99c552a2042318a4be96c35abdda48f5a1537a5c5c27c234b5dda43f2f\",\r\n        \"dweb:/ipfs/QmTgVWYsTQyBx7PsNtmUaryTF27cjLQseyk4sxYGChd5ui\"\r\n      ]\r\n    }\r\n  },\r\n  \"version\": 1\r\n}\r\n```\r\n\r\nand here's the metadata that `forge` outputs:\r\n\r\n```\r\n{\r\n    \"compiler\": { \"version\": \"0.8.13+commit.abaa5c0e\" },\r\n    \"language\": \"Solidity\",\r\n    \"output\": {\r\n      \"abi\": [],\r\n      \"devdoc\": { \"kind\": \"dev\", \"methods\": {}, \"version\": 1 },\r\n      \"userdoc\": { \"kind\": \"user\", \"methods\": {}, \"version\": 1 }\r\n    },\r\n    \"settings\": {\r\n      \"compilationTarget\": {\r\n        \"/Users/joaquim/solidity_projects/foundry_metadata_tests/src/Contract.sol\": \"Contract\"\r\n      },\r\n      \"remappings\": [\r\n        \":ds-test/=/Users/joaquim/solidity_projects/foundry_metadata_tests/lib/forge-std/lib/ds-test/src/\",\r\n        \":forge-std/=/Users/joaquim/solidity_projects/foundry_metadata_tests/lib/forge-std/src/\",\r\n        \":src/=/Users/joaquim/solidity_projects/foundry_metadata_tests/src/\"\r\n      ],\r\n      \"optimizer\": { \"enabled\": true, \"runs\": 200 },\r\n      \"metadata\": { \"bytecodeHash\": \"ipfs\" },\r\n      \"outputSelection\": {},\r\n      \"evmVersion\": \"london\"\r\n    },\r\n    \"sources\": {\r\n      \"/Users/joaquim/solidity_projects/foundry_metadata_tests/src/Contract.sol\": {\r\n        \"keccak256\": \"0x88c53f90b24a07c57711738987ddc81838a43c4ab7b6ce2986f1b470500ebe86\",\r\n        \"urls\": [\r\n          \"bzz-raw://58178e99c552a2042318a4be96c35abdda48f5a1537a5c5c27c234b5dda43f2f\",\r\n          \"dweb:/ipfs/QmTgVWYsTQyBx7PsNtmUaryTF27cjLQseyk4sxYGChd5ui\"\r\n        ],\r\n        \"license\": \"UNLICENSED\"\r\n      }\r\n    },\r\n    \"version\": 1\r\n  }\r\n  ```\r\n\r\nBoth hardhat and solcjs output metadata with **relative** paths, but forge outputs **absolute** paths. This seems strange to me as this metadata is supposed to be used to help re-compile the contracts on other machines, absolute paths make no sense to me here.\r\n\r\nI've looked at the ethers-rs source and have noticed the function: [with_stripped_file_prefixes](https://github.com/gakonst/ethers-rs/blob/master/ethers-solc/src/compile/output/mod.rs#L108)\r\n\r\nThis seems relevant to my problem, is it possible that forge is not calling this function to strip the base paths out of the compilation artifacts, therefore causing a mismatch between the IPFS hash of the metadata and the IPFS hash appended to the bytecode by the compiler?\r\n\r\nMight be totally wrong on this, but it's my best guess.\r\n\r\nAny help on figuring out this mystery would be greatly appreciated, I can provide sample test code to compare extracted IPFS hashes from bytecode and computed IPFS hashes from a file if it helps. \r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139353363",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1139353363",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1139353363,
    "node_id": "IC_kwDOGBlvNc5D6ScT",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T07:18:48Z",
    "updated_at": "2022-05-27T07:18:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Try bytecodehash: none",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139353363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139389331",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1139389331",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1139389331,
    "node_id": "IC_kwDOGBlvNc5D6bOT",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T08:17:14Z",
    "updated_at": "2022-05-27T08:17:14Z",
    "author_association": "MEMBER",
    "body": "thanks for reporting\r\n\r\nlooks like https://github.com/gakonst/ethers-rs/pull/1307 only fixed the problem partially.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139389331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139725167",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1139725167",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1139725167,
    "node_id": "IC_kwDOGBlvNc5D7tNv",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T15:29:36Z",
    "updated_at": "2022-05-27T15:29:36Z",
    "author_association": "MEMBER",
    "body": "Ref [#1315](https://github.com/gakonst/ethers-rs/issues/1315)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139725167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139734308",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1139734308",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1139734308,
    "node_id": "IC_kwDOGBlvNc5D7vck",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T15:41:01Z",
    "updated_at": "2022-05-27T15:41:01Z",
    "author_association": "MEMBER",
    "body": "should be fixed by [1317](https://github.com/gakonst/ethers-rs/pull/1317)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1139734308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140042450",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1140042450",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1140042450,
    "node_id": "IC_kwDOGBlvNc5D86rS",
    "user": {
      "login": "joaquim-verges",
      "id": 3353417,
      "node_id": "MDQ6VXNlcjMzNTM0MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joaquim-verges",
      "html_url": "https://github.com/joaquim-verges",
      "followers_url": "https://api.github.com/users/joaquim-verges/followers",
      "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
      "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
      "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
      "repos_url": "https://api.github.com/users/joaquim-verges/repos",
      "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T21:09:23Z",
    "updated_at": "2022-05-27T21:19:54Z",
    "author_association": "NONE",
    "body": "thanks for the quick turn around @mattsse ! Should I expect the `ether-rs` change to be pulled in the next forge nightly build?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140042450/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140292524",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1140292524",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1140292524,
    "node_id": "IC_kwDOGBlvNc5D93us",
    "user": {
      "login": "joaquim-verges",
      "id": 3353417,
      "node_id": "MDQ6VXNlcjMzNTM0MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joaquim-verges",
      "html_url": "https://github.com/joaquim-verges",
      "followers_url": "https://api.github.com/users/joaquim-verges/followers",
      "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
      "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
      "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
      "repos_url": "https://api.github.com/users/joaquim-verges/repos",
      "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-28T16:24:51Z",
    "updated_at": "2022-05-28T16:24:51Z",
    "author_association": "NONE",
    "body": "@mattsse what's the easiest way for me to test this fix?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140292524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140301111",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1140301111",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1140301111,
    "node_id": "IC_kwDOGBlvNc5D9503",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-28T17:23:49Z",
    "updated_at": "2022-05-28T17:23:49Z",
    "author_association": "MEMBER",
    "body": "we haven't bumped it yet on foundry\r\n\r\nthe easiest way would be to build it forge yourself with patched ethers is by following this: https://github.com/foundry-rs/foundry/blob/master/Cargo.toml#L52\r\n\r\nthen `cargo build --bin forge --release` and the binary will be in `target/release/forge`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140301111/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140386087",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1140386087",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1140386087,
    "node_id": "IC_kwDOGBlvNc5D-Okn",
    "user": {
      "login": "joaquim-verges",
      "id": 3353417,
      "node_id": "MDQ6VXNlcjMzNTM0MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joaquim-verges",
      "html_url": "https://github.com/joaquim-verges",
      "followers_url": "https://api.github.com/users/joaquim-verges/followers",
      "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
      "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
      "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
      "repos_url": "https://api.github.com/users/joaquim-verges/repos",
      "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-29T06:20:52Z",
    "updated_at": "2022-05-29T06:20:52Z",
    "author_association": "NONE",
    "body": "@mattsse Thank you! the metadata output now has relative paths has expected.\r\n\r\nHowever, I'm still not getting a match between the output metadata IPFS hash and the IPFS hash appended to the bytecode by solc. \r\n\r\nIn my investigation, I found a few issues in `ethers-rs` related to json serialization/deserialization. I'm going to create a new issue over there with my findings, to keep the conversation focused.\r\n\r\nThank you again for your hard work.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140386087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140389716",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1140389716",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1140389716,
    "node_id": "IC_kwDOGBlvNc5D-PdU",
    "user": {
      "login": "joaquim-verges",
      "id": 3353417,
      "node_id": "MDQ6VXNlcjMzNTM0MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joaquim-verges",
      "html_url": "https://github.com/joaquim-verges",
      "followers_url": "https://api.github.com/users/joaquim-verges/followers",
      "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
      "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
      "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
      "repos_url": "https://api.github.com/users/joaquim-verges/repos",
      "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-29T06:55:03Z",
    "updated_at": "2022-05-29T06:55:03Z",
    "author_association": "NONE",
    "body": "@mattsse FYI, opened https://github.com/gakonst/ethers-rs/issues/1325 - the serialization of the compiler metadata output is altering its original contents, resulting in a different IPFS hash than the one that gets appended to the bytecode.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1140389716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1161004458",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1161004458",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1161004458,
    "node_id": "IC_kwDOGBlvNc5FM4Wq",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-21T00:51:40Z",
    "updated_at": "2022-06-21T00:51:40Z",
    "author_association": "MEMBER",
    "body": "Is this solved?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1161004458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1161019252",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1161019252",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1161019252,
    "node_id": "IC_kwDOGBlvNc5FM790",
    "user": {
      "login": "joaquim-verges",
      "id": 3353417,
      "node_id": "MDQ6VXNlcjMzNTM0MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3353417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joaquim-verges",
      "html_url": "https://github.com/joaquim-verges",
      "followers_url": "https://api.github.com/users/joaquim-verges/followers",
      "following_url": "https://api.github.com/users/joaquim-verges/following{/other_user}",
      "gists_url": "https://api.github.com/users/joaquim-verges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joaquim-verges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joaquim-verges/subscriptions",
      "organizations_url": "https://api.github.com/users/joaquim-verges/orgs",
      "repos_url": "https://api.github.com/users/joaquim-verges/repos",
      "events_url": "https://api.github.com/users/joaquim-verges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joaquim-verges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-21T01:05:12Z",
    "updated_at": "2022-06-21T01:05:12Z",
    "author_association": "NONE",
    "body": "Just tested it today. The new rawMetadata field is now present in the output.\n\nI would suggest writing a test comparing the raw metadata and the parsed one. There's still some differences. Last one i noticed is a missing `settings.evmVersion` field.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1161019252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1204124134",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1738#issuecomment-1204124134",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1738",
    "id": 1204124134,
    "node_id": "IC_kwDOGBlvNc5HxXnm",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-03T15:40:04Z",
    "updated_at": "2022-08-03T15:40:04Z",
    "author_association": "MEMBER",
    "body": "closed by https://github.com/gakonst/ethers-rs/pull/1365 which added metadata string as raw string",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1204124134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

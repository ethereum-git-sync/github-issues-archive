{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1274",
  "id": 1201321857,
  "node_id": "I_kwDOGBlvNc5HmreB",
  "number": 1274,
  "title": "Clean up CLI commands and options",
  "user": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3703752609,
      "node_id": "LA_kwDOGBlvNc7cwseh",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-cast",
      "name": "C-cast",
      "color": "5319E7",
      "default": false,
      "description": "Command: cast"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3759719580,
      "node_id": "LA_kwDOGBlvNc7gGMSc",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/P-normal",
      "name": "P-normal",
      "color": "D93F0B",
      "default": false,
      "description": "Priority: normal"
    },
    {
      "id": 3759721040,
      "node_id": "LA_kwDOGBlvNc7gGMpQ",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/D-chore",
      "name": "D-chore",
      "color": "0E8A16",
      "default": false,
      "description": "Difficulty: chore"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-04-12T07:43:02Z",
  "updated_at": "2022-06-06T17:33:03Z",
  "closed_at": "2022-06-06T17:33:03Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The output of `cast help`/`forge help` and `-h/--help` is, in some cases, very large and not super helpful. I attempted to address some of it in #1268, but there are still improvements we can make:\r\n\r\n**Remove opts that are not used by commands**\r\n\r\nWe should try to split the opts structs more, so we only pull in what we need.\r\n\r\n- `forge run`\r\n  - Does not use the following from `BuildArgs`:\r\n    - `-d/--delay`\r\n    - `--extra-output`\r\n    - `--extra-output-files`\r\n    - `--force`\r\n    - `--ignored-error-codes`\r\n    - `--names`\r\n    - `--no-restart`\r\n    - `-o/--out`\r\n    - `--run-all`\r\n    - `--sizes`\r\n    - `-w/--watch`\r\n    - `-c/--contracts`(?)\r\n    - `--cache-path`(?)\r\n- `forge tree`\r\n  - Does not use the following from `BuildArgs`:\r\n    - `-d/--delay`\r\n    - `--evm-version`\r\n    - `--extra-output`\r\n    - `--extra-output-files`\r\n    - `--force`\r\n    - `--ignored-error-codes`\r\n    - `--libraries`\r\n    - `--names`\r\n    - `--no-auto-detect`\r\n    - `--no-restart`\r\n    - `-o/--out`\r\n    - `--offline`\r\n    - `--optimize`\r\n    - `--optimize-runs`\r\n    - `--run-all`\r\n    - `--sizes`\r\n    - `--use`\r\n    - `--via-ir`\r\n    - `-w/--watch`\r\n- `forge config`\r\n    - I'm not sure why there are so many options in this command (cc @mattsse)\r\n- `forge create`\r\n    - Does not use the following from `BuildArgs`:\r\n      - `-d/--delay`\r\n      - `--evm-version`\r\n      - `--extra-output`\r\n      - `--extra-output-files`\r\n      - `--ignored-error-codes`\r\n      - `--names`\r\n      - `--no-restart`\r\n      - `--run-all`\r\n      - `--sizes`\r\n      - `--use`\r\n      - `-w/--watch`\r\n- `forge test`\r\n    - Does not use the following from `BuildArgs`:\r\n      - `--extra-output`\r\n      - `--extra-output-files`\r\n      - `--names` (it can, but should it?)\r\n      - `--sizes` (it can, but should it?)\r\n- `cast estimate`\r\n    - Does not use the following from `EthereumOpts`:\r\n        - Any of the `Wallet` options\r\n- `cast access-list`\r\n    - Only uses `--etherscan-api-key` and `--chain` from `EthereumOpts`\r\n\r\n**Use `next_help_heading`**\r\n\r\nWe should use `next_help_heading` to logically group options. Since options are alphabetically sorted, some options you care about more (i.e. options for the specific command) might be placed next to options that you may not care about as much.\r\n\r\nAs an example, for `forge tree`, `--no-dedupe` is next to `--no-restart` and `--names` (two options we do not care about at all in this case).\r\n\r\n**Merge commands with common functionality**\r\n\r\n- `forge test --gas-report` and `forge snapshot` serve somewhat similar purposes. I know we've talked about potentially merging these, so I'm including it here.\r\n- `cast --calldata-decode` and `cast 4byte-decode` could be merged into `cast --calldata-decode --4byte` or similar\r\n- `cast --to-wei` and `cast --to-unit` should be merged since the default behavior for `cast --to-unit` is exactly what `cast --to-wei` is doing\r\n- `cast --concat-hex` duplicates functionality in `cast --to-hexdata`\r\n- `cast wallet vanity` could be merged into `cast wallet new --vanity`\r\n\r\nThese lists are non-exhaustive - I haven't checked everything",
  "closed_by": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1096276780",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1274#issuecomment-1096276780",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274",
    "id": 1096276780,
    "node_id": "IC_kwDOGBlvNc5BV9ss",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T07:43:24Z",
    "updated_at": "2022-04-12T07:43:24Z",
    "author_association": "MEMBER",
    "body": "cc @mattsse @gakonst @mds1 - do you have anything obvious not on the list? I recall @mds1 had some opinions on `cast` commands",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1096276780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1096293170",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1274#issuecomment-1096293170",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274",
    "id": 1096293170,
    "node_id": "IC_kwDOGBlvNc5BWBsy",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-12T07:53:30Z",
    "updated_at": "2022-04-12T07:53:30Z",
    "author_association": "MEMBER",
    "body": "I think the biggest offender is `BuildArgs`: We should consider splitting this into smaller pieces like `ProjectOpts` (paths, config etc.), `BuildOpts` (optimizer etc.), `BuildOutputOpts` (`--extra-output` etc), `BuildDisplayOpts` (`--names`, `--sizes`), `WatchOpts` (`-w/--watch`, `--no-restart` etc) or something along those lines",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1096293170/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1147703081",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1274#issuecomment-1147703081",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1274",
    "id": 1147703081,
    "node_id": "IC_kwDOGBlvNc5EaI8p",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-06T17:33:03Z",
    "updated_at": "2022-06-06T17:33:03Z",
    "author_association": "MEMBER",
    "body": "Should be addressed",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1147703081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

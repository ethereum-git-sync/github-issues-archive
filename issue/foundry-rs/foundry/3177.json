{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3177",
  "id": 1369731894,
  "node_id": "I_kwDOGBlvNc5RpHM2",
  "number": 3177,
  "title": "Forge script crashes when two script contracts have the same name.",
  "user": {
    "login": "Willyham",
    "id": 169475,
    "node_id": "MDQ6VXNlcjE2OTQ3NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/169475?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Willyham",
    "html_url": "https://github.com/Willyham",
    "followers_url": "https://api.github.com/users/Willyham/followers",
    "following_url": "https://api.github.com/users/Willyham/following{/other_user}",
    "gists_url": "https://api.github.com/users/Willyham/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Willyham/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Willyham/subscriptions",
    "organizations_url": "https://api.github.com/users/Willyham/orgs",
    "repos_url": "https://api.github.com/users/Willyham/repos",
    "events_url": "https://api.github.com/users/Willyham/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Willyham/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-12T11:33:18Z",
  "updated_at": "2023-01-10T05:47:12Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (63c71b4 2022-09-12T00:05:14.033477Z)\n\n### What command(s) is the bug in?\n\nforge script\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nWhen two 'script contracts' have the same name, and `forge script` is run for any function in the contract, forge crashes with this error:\r\n\r\n```\r\n➜  contracts git:(script-test) ✗ forge script src/deploy/Deploy.t.sol --sig \"deploy()\"--private-key <>\r\n[⠰] Compiling...\r\n[⠒] Compiling 1 files with 0.8.10\r\n[⠘] Solc 0.8.10 finished in 1.13s\r\nCompiler run successful\r\nThe application panicked (crashed).\r\nMessage:  called `Option::unwrap()` on a `None` value\r\nLocation: cli/src/cmd/forge/script/executor.rs:36\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\nBacktrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\n[1]    6716 abort      forge script src/deploy/Deploy.t.sol --sig \"deploy()\" --rpc-url  --private-ke\r\n```\r\n\r\nIt is likely that having two contracts with the same name in different files is not ideal (or possibly not valid, they compiled fine). However, if that is the case then forge should detect this and print a friendly error. \r\n\r\nThanks!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243874086",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3177#issuecomment-1243874086",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177",
    "id": 1243874086,
    "node_id": "IC_kwDOGBlvNc5KJAMm",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T15:01:42Z",
    "updated_at": "2022-09-12T15:01:42Z",
    "author_association": "MEMBER",
    "body": "are both contracts actually contracts or is one an interface?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243874086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1376764497",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3177#issuecomment-1376764497",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3177",
    "id": 1376764497,
    "node_id": "IC_kwDOGBlvNc5SD8JR",
    "user": {
      "login": "aewing",
      "id": 5033161,
      "node_id": "MDQ6VXNlcjUwMzMxNjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5033161?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aewing",
      "html_url": "https://github.com/aewing",
      "followers_url": "https://api.github.com/users/aewing/followers",
      "following_url": "https://api.github.com/users/aewing/following{/other_user}",
      "gists_url": "https://api.github.com/users/aewing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aewing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aewing/subscriptions",
      "organizations_url": "https://api.github.com/users/aewing/orgs",
      "repos_url": "https://api.github.com/users/aewing/repos",
      "events_url": "https://api.github.com/users/aewing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aewing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-10T05:46:22Z",
    "updated_at": "2023-01-10T05:47:12Z",
    "author_association": "NONE",
    "body": "I ran into this today. Basically what I did was clone a script (Deploy.s.sol) and renamed it (to Mint.s.sol), changed the content, but forgot to change the name of the new contract from `DeployScript` -- leading to the above error and no hint as to why I was seeing it.\r\n\r\nRenaming the contract in `Mint.s.sol` (and eliminating the duplicated script contract name) resolved the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1376764497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

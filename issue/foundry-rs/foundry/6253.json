{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/6253",
  "id": 1984058812,
  "node_id": "I_kwDOGBlvNc52QlW8",
  "number": 6253,
  "title": "Support MutliLayer Gas Fee reporting in Gas Reports and Deployment Scripts",
  "user": {
    "login": "dghelm",
    "id": 4205837,
    "node_id": "MDQ6VXNlcjQyMDU4Mzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4205837?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dghelm",
    "html_url": "https://github.com/dghelm",
    "followers_url": "https://api.github.com/users/dghelm/followers",
    "following_url": "https://api.github.com/users/dghelm/following{/other_user}",
    "gists_url": "https://api.github.com/users/dghelm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dghelm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dghelm/subscriptions",
    "organizations_url": "https://api.github.com/users/dghelm/orgs",
    "repos_url": "https://api.github.com/users/dghelm/repos",
    "events_url": "https://api.github.com/users/dghelm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dghelm/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-11-08T17:14:18Z",
  "updated_at": "2023-11-15T22:52:43Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nFor L2s that have \"total transaction fees\" that include both the L2 gas fee and an L1 Data Fee (also taken from L2 account, but depend on callData size and gas prices on L1), it'd be helpful for gas reports and deployment scripts to include L1 Data Fee context.\r\n\r\nMy own use case would be for helping developers understand the differences in optimizing for gas usage in an L2 environment, although I'm hopeful actual projects would be able to use it for better insight into how their contracts will perform on an L2.\r\n\r\nFor example:\r\n```\r\nChain 534351\r\n\r\nEstimated gas price: 7.6143807 gwei\r\n\r\nEstimated total gas used for script: 510867\r\n\r\nEstimated amount required: 0.0038899358250669 ETH\r\n```\r\n\r\nwould include an additional `Estimated L1 Data Fee` that would also be added into the amount of `Estimated amount required`.\r\n\r\n\r\nIn a Gas Report, this might be complicated, as the L1 Data fee will only really be useful for developers if the contract will be called by an EOA.\r\n\r\n### Additional context\r\n\r\nNot all L2s expose this fee to users. AFAIK, Linea and Arbitrum just adjust gas fees to account for this cost and abstract it from the user, maintaining `gas_estimate` as the full transaction cost.\r\n\r\nScroll and OpStack networks, however, do have this fee.\r\n\r\nThis is related to the bug at #4903 and feature request at #5733, but the solution there seems much more nuanced (and supportive of highly divergent gas schedules) than something more basic like what MetaMask implements for MultiLayer Gas Fee prediction (which essentially just calls the L1GasOracle if you're on a chain listed as \"MultiLayer Gas Fee\").\r\n\r\nMore context on L1 gas fees:\r\nhttps://docs.scroll.io/en/developers/transaction-fees-on-scroll/\r\nhttps://community.optimism.io/docs/developers/build/transaction-fees/#the-l1-data-fee",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1802346847",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6253#issuecomment-1802346847",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253",
    "id": 1802346847,
    "node_id": "IC_kwDOGBlvNc5rbaFf",
    "user": {
      "login": "dghelm",
      "id": 4205837,
      "node_id": "MDQ6VXNlcjQyMDU4Mzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4205837?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dghelm",
      "html_url": "https://github.com/dghelm",
      "followers_url": "https://api.github.com/users/dghelm/followers",
      "following_url": "https://api.github.com/users/dghelm/following{/other_user}",
      "gists_url": "https://api.github.com/users/dghelm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dghelm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dghelm/subscriptions",
      "organizations_url": "https://api.github.com/users/dghelm/orgs",
      "repos_url": "https://api.github.com/users/dghelm/repos",
      "events_url": "https://api.github.com/users/dghelm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dghelm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T17:31:17Z",
    "updated_at": "2023-11-08T17:31:17Z",
    "author_association": "NONE",
    "body": "Also, although slightly intimidated as I'm new to Rust, I'm happy to take a stab at a PR if pointed in the right direction (or even just implementing the Scroll fee calculation code).",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1802346847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1813393900",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6253#issuecomment-1813393900",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6253",
    "id": 1813393900,
    "node_id": "IC_kwDOGBlvNc5sFjHs",
    "user": {
      "login": "ankurdubey521",
      "id": 16562513,
      "node_id": "MDQ6VXNlcjE2NTYyNTEz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16562513?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ankurdubey521",
      "html_url": "https://github.com/ankurdubey521",
      "followers_url": "https://api.github.com/users/ankurdubey521/followers",
      "following_url": "https://api.github.com/users/ankurdubey521/following{/other_user}",
      "gists_url": "https://api.github.com/users/ankurdubey521/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ankurdubey521/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ankurdubey521/subscriptions",
      "organizations_url": "https://api.github.com/users/ankurdubey521/orgs",
      "repos_url": "https://api.github.com/users/ankurdubey521/repos",
      "events_url": "https://api.github.com/users/ankurdubey521/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ankurdubey521/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-15T22:52:43Z",
    "updated_at": "2023-11-15T22:52:43Z",
    "author_association": "NONE",
    "body": "@dghelm I'm interesting in working on this as well! I could look into implementing the Optimism Fee Calculation Logic",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1813393900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

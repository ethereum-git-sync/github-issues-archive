{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4485",
  "id": 1611215573,
  "node_id": "I_kwDOGBlvNc5gCTLV",
  "number": 4485,
  "title": "`forge coverage` doesn't fail on failing tests",
  "user": {
    "login": "0xGuybrush",
    "id": 457630,
    "node_id": "MDQ6VXNlcjQ1NzYzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/457630?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xGuybrush",
    "html_url": "https://github.com/0xGuybrush",
    "followers_url": "https://api.github.com/users/0xGuybrush/followers",
    "following_url": "https://api.github.com/users/0xGuybrush/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xGuybrush/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xGuybrush/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xGuybrush/subscriptions",
    "organizations_url": "https://api.github.com/users/0xGuybrush/orgs",
    "repos_url": "https://api.github.com/users/0xGuybrush/repos",
    "events_url": "https://api.github.com/users/0xGuybrush/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xGuybrush/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4233058229,
      "node_id": "LA_kwDOGBlvNc78T1e1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-coverage",
      "name": "Cmd-forge-coverage",
      "color": "006B75",
      "default": false,
      "description": "Command: forge coverage"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-06T11:34:21Z",
  "updated_at": "2023-04-04T09:55:49Z",
  "closed_at": "2023-04-04T09:55:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (28b2ae6 2023-03-06T00:04:30.253422Z)\n\n### What command(s) is the bug in?\n\nforge coverage\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\n## Description\r\n\r\nRunning `forge coverage` exits with code 0 even on test failures. This may be just a mismatch in my expections, but just used to running similar modes e.g. in JS testing tools where coverage would fail on any test failures.\r\n\r\nIf it's deliberate that coverage doesn't fail on failing tests (as in fairness the act of producing metric didn't fail), it could be nice to call it out in the Foundry book that it's a command to run coverage only, not to run tests with coverage.\r\n\r\n### Steps to reproduce:\r\n\r\n* Create a failing test:\r\n\r\n```\r\nfunction testThatFalseIsTrue() public {\r\n  assertEq(true, false, \"This will fail\");\r\n}\r\n```\r\n\r\n* Run `forge test` — test fails as expected\r\n* Run `forge coverage`\r\n\r\n#### Current outcome\r\n\r\n* `forge coverage` passes and prints coverage metrics. Returns 0 exit code\r\n\r\n#### Expected outcome\r\n\r\n* Highlights same test failures as `forge test` (or exits non-zero).\r\n\r\n",
  "closed_by": {
    "login": "0xGuybrush",
    "id": 457630,
    "node_id": "MDQ6VXNlcjQ1NzYzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/457630?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xGuybrush",
    "html_url": "https://github.com/0xGuybrush",
    "followers_url": "https://api.github.com/users/0xGuybrush/followers",
    "following_url": "https://api.github.com/users/0xGuybrush/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xGuybrush/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xGuybrush/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xGuybrush/subscriptions",
    "organizations_url": "https://api.github.com/users/0xGuybrush/orgs",
    "repos_url": "https://api.github.com/users/0xGuybrush/repos",
    "events_url": "https://api.github.com/users/0xGuybrush/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xGuybrush/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1485091743",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4485#issuecomment-1485091743",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485",
    "id": 1485091743,
    "node_id": "IC_kwDOGBlvNc5YhLOf",
    "user": {
      "login": "llllvvuu",
      "id": 5601392,
      "node_id": "MDQ6VXNlcjU2MDEzOTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5601392?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/llllvvuu",
      "html_url": "https://github.com/llllvvuu",
      "followers_url": "https://api.github.com/users/llllvvuu/followers",
      "following_url": "https://api.github.com/users/llllvvuu/following{/other_user}",
      "gists_url": "https://api.github.com/users/llllvvuu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/llllvvuu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/llllvvuu/subscriptions",
      "organizations_url": "https://api.github.com/users/llllvvuu/orgs",
      "repos_url": "https://api.github.com/users/llllvvuu/repos",
      "events_url": "https://api.github.com/users/llllvvuu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/llllvvuu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T13:27:46Z",
    "updated_at": "2023-03-27T13:28:08Z",
    "author_association": "NONE",
    "body": "Might this be related to #3900 ?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1485091743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495680894",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4485#issuecomment-1495680894",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4485",
    "id": 1495680894,
    "node_id": "IC_kwDOGBlvNc5ZJkd-",
    "user": {
      "login": "0xGuybrush",
      "id": 457630,
      "node_id": "MDQ6VXNlcjQ1NzYzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/457630?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xGuybrush",
      "html_url": "https://github.com/0xGuybrush",
      "followers_url": "https://api.github.com/users/0xGuybrush/followers",
      "following_url": "https://api.github.com/users/0xGuybrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xGuybrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xGuybrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xGuybrush/subscriptions",
      "organizations_url": "https://api.github.com/users/0xGuybrush/orgs",
      "repos_url": "https://api.github.com/users/0xGuybrush/repos",
      "events_url": "https://api.github.com/users/0xGuybrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xGuybrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T09:55:48Z",
    "updated_at": "2023-04-04T09:55:48Z",
    "author_association": "NONE",
    "body": "> Might this be related to #3900 ?\r\n\r\nsorry, you're right — I think it's a duplicate. I did try to search for an open issue, I'm not sure why I didn't see it. WIll close this one. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495680894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

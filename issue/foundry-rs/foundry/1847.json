{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1847",
  "id": 1261264813,
  "node_id": "I_kwDOGBlvNc5LLV-t",
  "number": 1847,
  "title": "`forge install --package` for supporting npm package.json manifest",
  "user": {
    "login": "sambacha",
    "id": 32783916,
    "node_id": "MDQ6VXNlcjMyNzgzOTE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sambacha",
    "html_url": "https://github.com/sambacha",
    "followers_url": "https://api.github.com/users/sambacha/followers",
    "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
    "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
    "organizations_url": "https://api.github.com/users/sambacha/orgs",
    "repos_url": "https://api.github.com/users/sambacha/repos",
    "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sambacha/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2022-06-06T02:28:49Z",
  "updated_at": "2022-08-01T20:46:27Z",
  "closed_at": "2022-08-01T20:46:26Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\n`forge install --package` for supporting installing by *version* via the npm package.json manifest `version` field\r\n\r\nmuch like you can use npm to install a package on github by giving the FQDN URL to the repo, this would do the same but have support for the versioning. Versioning support is naive in that it only reads the package.json manifest file and only update install on a value increase in the field for version.\n\n### Additional context\n\ntechnically you would have to do a partial clone (fetch --depth 0) to be able to construct the version field so this feature is kind of debatable really. ",
  "closed_by": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1146982647",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1146982647",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1146982647,
    "node_id": "IC_kwDOGBlvNc5EXZD3",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-06T02:57:52Z",
    "updated_at": "2022-06-06T02:57:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "or maybe generate a lockfile, that way you could also store submodules hash and compare if there are changes to the submodules possibly idk",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1146982647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1147336082",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1147336082",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1147336082,
    "node_id": "IC_kwDOGBlvNc5EYvWS",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-06T11:16:16Z",
    "updated_at": "2022-06-06T11:16:16Z",
    "author_association": "MEMBER",
    "body": "What is the use case for this feature? I don't fully understand",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1147336082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1151963807",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1151963807",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1151963807,
    "node_id": "IC_kwDOGBlvNc5EqZKf",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-10T05:35:36Z",
    "updated_at": "2022-06-10T05:35:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "> What is the use case for this feature? I don't fully understand\r\n\r\ndecouple dependency management from vcs ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1151963807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156433447",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1156433447",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1156433447,
    "node_id": "IC_kwDOGBlvNc5E7cYn",
    "user": {
      "login": "ufoscout",
      "id": 960885,
      "node_id": "MDQ6VXNlcjk2MDg4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/960885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ufoscout",
      "html_url": "https://github.com/ufoscout",
      "followers_url": "https://api.github.com/users/ufoscout/followers",
      "following_url": "https://api.github.com/users/ufoscout/following{/other_user}",
      "gists_url": "https://api.github.com/users/ufoscout/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ufoscout/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ufoscout/subscriptions",
      "organizations_url": "https://api.github.com/users/ufoscout/orgs",
      "repos_url": "https://api.github.com/users/ufoscout/repos",
      "events_url": "https://api.github.com/users/ufoscout/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ufoscout/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T12:51:53Z",
    "updated_at": "2022-06-15T12:52:47Z",
    "author_association": "NONE",
    "body": "> What is the use case for this feature? I don't fully understand\r\n\r\n@onbjerg in my company, we are migrating some of our projects to foundry and, while the overall experience is great, we found the submodules-based dependency management system quite bothersome. For example:\r\n- some repositories have more contracts in dedicated subfolders, each subfolder has its own package.json with nodejs dependencies. We did not find a good way to migrate those repositories because foundry pollutes the root git folder with submodules and we cannot easily separate the dependencies of each project\r\n- sometimes, people manually added dependencies in the foundry.toml file and the git submodules were not updated\r\n- we had issues due to the fact that the code in the git submodules was not exactly the same in different developer's machines\r\n- we often have to manually update the git submodules to fix \"strange\" issues\r\n\r\nI honestly believe that a dependency management system more similar to the one of `cargo` (using a `target` folder) or `npm` would alleviate lots of pain and feel more natural.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156433447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156484276",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1156484276",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1156484276,
    "node_id": "IC_kwDOGBlvNc5E7oy0",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T13:36:47Z",
    "updated_at": "2022-06-15T13:37:22Z",
    "author_association": "MEMBER",
    "body": ">some repositories have more contracts in dedicated subfolders, each subfolder has its own package.json with nodejs dependencies. We did not find a good way to migrate those repositories because foundry pollutes the root git folder with submodules and we cannot easily separate the dependencies of each project\r\n\r\nYou can add submodules anywhere you'd like and have a `foundry.toml` in each subfolder to alleviate this\r\n\r\n>sometimes, people manually added dependencies in the foundry.toml file and the git submodules were not updated\r\n\r\nIf they use `forge install` this should not be the case\r\n\r\n>we had issues due to the fact that the code in the git submodules was not exactly the same in different developer's machines\r\n\r\nIf they use `forge install` this should also not be an issue - it sounds like they are updating the ref when pulling instead of pulling what has been committed in the repository. If you run `forge install` with no arguments it will install what is committed in the repository instead of updating the submodule\r\n\r\n>I honestly believe that a dependency management system more similar to the one of cargo (using a target folder) or npm would alleviate lots of pain and feel more natural.\r\n\r\nI feel like this is an issue that is separate from this one, and would also be a breaking change of course. It's not super high priority for us right now, but I would encourage you to open up an issue with an outline of what you would want to see ideally and we can discuss there :smile: ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156484276/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156489755",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1156489755",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1156489755,
    "node_id": "IC_kwDOGBlvNc5E7qIb",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T13:41:14Z",
    "updated_at": "2022-06-15T13:41:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just nuke the submodules folder then run forge install. \n\nWay less complicated. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156489755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156495844",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1156495844",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1156495844,
    "node_id": "IC_kwDOGBlvNc5E7rnk",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-15T13:46:15Z",
    "updated_at": "2022-06-15T13:46:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here is an example \"solution\" for depopulating submodules into a nix derivation for foundry: https://github.com/sambacha/forge-nix\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1156495844/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1157538391",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1157538391",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1157538391,
    "node_id": "IC_kwDOGBlvNc5E_qJX",
    "user": {
      "login": "ufoscout",
      "id": 960885,
      "node_id": "MDQ6VXNlcjk2MDg4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/960885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ufoscout",
      "html_url": "https://github.com/ufoscout",
      "followers_url": "https://api.github.com/users/ufoscout/followers",
      "following_url": "https://api.github.com/users/ufoscout/following{/other_user}",
      "gists_url": "https://api.github.com/users/ufoscout/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ufoscout/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ufoscout/subscriptions",
      "organizations_url": "https://api.github.com/users/ufoscout/orgs",
      "repos_url": "https://api.github.com/users/ufoscout/repos",
      "events_url": "https://api.github.com/users/ufoscout/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ufoscout/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-16T11:14:26Z",
    "updated_at": "2022-06-16T11:14:26Z",
    "author_association": "NONE",
    "body": "> You can add submodules anywhere you'd like and have a `foundry.toml` in each subfolder to alleviate this\r\n\r\nMaybe I am doing something wrong, but I don't see how to make it work properly. Here an attempt at adding a foundry project in a new empty subfolder of an existing git repository, please note that there are no changes in the working/staging area contrarily to what was reported by the error:\r\n\r\n```bash\r\nufo@ufo-laptop-2:~/workspaces/foundry_test/lottery/contract\r\n$ forge init\r\nerror: `forge init` cannot be run on a non-empty directory.\r\n\r\n        run `forge init --force` to initialize regardless.\r\n\r\nufo@ufo-laptop-2:~/workspaces/foundry_test/lottery/contract\r\n$ forge init --force\r\nInitializing /home/ufo/workspaces/foundry_test/lottery/contract...\r\nInstalling forge-std in \"/home/ufo/workspaces/foundry_test/lottery/contract/lib/forge-std\" (url: Some(\"https://github.com/foundry-rs/forge-std\"), tag: None)\r\nError: \r\n   0: There are changes in your working/staging area. Commit them first or add the `--no-commit` option.\r\n\r\nLocation:\r\n   cli/src/cmd/forge/install.rs:116\r\n\r\nBacktrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\n\r\n```\r\n\r\n> > we had issues due to the fact that the code in the git submodules was not exactly the same in different developer's machines\r\n> \r\n> If they use `forge install` this should also not be an issue - it sounds like they are updating the ref when pulling instead of pulling what has been committed in the repository. If you run `forge install` with no arguments it will install what is committed in the repository instead of updating the submodule\r\n\r\nThe problem here is that, if the submodule point to the main branch, for example, due to the fact that foundry does not keep track of the exact commit ID, then the commit pushed on the developer machine depends on the moment he executed the \"forge install\" command and there's no way to guarantee a reproducible build. \r\nPlease note that sometimes we are forced to use the main branch and that git tags, anyway, are also not immutable.\r\n\r\n\r\n> > I honestly believe that a dependency management system more similar to the one of cargo (using a target folder) or npm would alleviate lots of pain and feel more natural.\r\n> \r\n> I feel like this is an issue that is separate from this one, and would also be a breaking change of course. It's not super high priority for us right now, but I would encourage you to open up an issue with an outline of what you would want to see ideally and we can discuss there smile\r\n\r\nI am not sure, I understood that this issue is proposing to decouple foundry and the vcs, so, it seems to me that this is the correct place. Anyway, I'll do as you propose if you think it's more appropriate.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1157538391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159537203",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1159537203",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1159537203,
    "node_id": "IC_kwDOGBlvNc5FHSIz",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-18T18:54:56Z",
    "updated_at": "2022-06-18T18:54:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > You can add submodules anywhere you'd like and have a `foundry.toml` in each subfolder to alleviate this\r\n> \r\n> Maybe I am doing something wrong, but I don't see how to make it work properly. Here an attempt at adding a foundry project in a new empty subfolder of an existing git repository, please note that there are no changes in the working/staging area contrarily to what was reported by the error:\r\n> \r\n> ```shell\r\n> ufo@ufo-laptop-2:~/workspaces/foundry_test/lottery/contract\r\n> $ forge init\r\n> error: `forge init` cannot be run on a non-empty directory.\r\n> \r\n>         run `forge init --force` to initialize regardless.\r\n> \r\n> ufo@ufo-laptop-2:~/workspaces/foundry_test/lottery/contract\r\n> $ forge init --force\r\n> Initializing /home/ufo/workspaces/foundry_test/lottery/contract...\r\n> Installing forge-std in \"/home/ufo/workspaces/foundry_test/lottery/contract/lib/forge-std\" (url: Some(\"https://github.com/foundry-rs/forge-std\"), tag: None)\r\n> Error: \r\n>    0: There are changes in your working/staging area. Commit them first or add the `--no-commit` option.\r\n> \r\n> Location:\r\n>    cli/src/cmd/forge/install.rs:116\r\n> \r\n> Backtrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\n> Run with RUST_BACKTRACE=full to include source snippets.\r\n> ```\r\n> \r\n>  > > we had issues due to the fact that the code in the git submodules was not exactly the same in different developer's machines\r\n> > \r\n> > \r\n> > If they use `forge install` this should also not be an issue - it sounds like they are updating the ref when pulling instead of pulling what has been committed in the repository. If you run `forge install` with no arguments it will install what is committed in the repository instead of updating the submodule\r\n> \r\n> The problem here is that, if the submodule point to the main branch, for example, due to the fact that foundry does not keep track of the exact commit ID, then the commit pushed on the developer machine depends on the moment he executed the \"forge install\" command and there's no way to guarantee a reproducible build. Please note that sometimes we are forced to use the main branch and that git tags, anyway, are also not immutable.\r\n> \r\n> > > I honestly believe that a dependency management system more similar to the one of cargo (using a target folder) or npm would alleviate lots of pain and feel more natural.\r\n> > \r\n> > \r\n> > I feel like this is an issue that is separate from this one, and would also be a breaking change of course. It's not super high priority for us right now, but I would encourage you to open up an issue with an outline of what you would want to see ideally and we can discuss there smile\r\n> \r\n> I am not sure, I understood that this issue is proposing to decouple foundry and the vcs, so, it seems to me that this is the correct place. Anyway, I'll do as you propose if you think it's more appropriate.\r\n\r\ngreat points. Foundry wont be able to decouple from git, so there has to be an external tool to manage external dependencies.\r\n\r\n Managing dependencies by git is ultimately an insecure by default proposition: git is part of the trusted computing base and was never designed to be cryptographically secure. Most people do not use tags to cut a release. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159537203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179883788",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1179883788",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1179883788,
    "node_id": "IC_kwDOGBlvNc5GU5kM",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T02:06:31Z",
    "updated_at": "2022-07-11T02:06:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "foundry now supports outputting its config as a json file\n\n\nmaybe supporting remappings as a json file instead of a txt file is more appropriate whenever foundryup gets replaced with a native version, as this format is a legacy of using shell scripts from dapptools\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179883788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179908339",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1179908339",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1179908339,
    "node_id": "IC_kwDOGBlvNc5GU_jz",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T02:53:49Z",
    "updated_at": "2022-07-11T02:53:49Z",
    "author_association": "MEMBER",
    "body": "remappings.txt is used by other solc tooling too, like the VSCode extension",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179908339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179922412",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1179922412",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1179922412,
    "node_id": "IC_kwDOGBlvNc5GVC_s",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T03:23:15Z",
    "updated_at": "2022-07-11T03:23:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "> remappings.txt is used by other solc tooling too, like the VSCode extension\r\n\r\ngood point, additionally remappings are also limited in that it only works in the context of a local filesystem (the typical use case). \r\n\r\ni couldn't as an example, do \r\n\r\n```ini\r\nlibdep=ipfs://${CIDv1}\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1179922412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1201703136",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1847#issuecomment-1201703136",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1847",
    "id": 1201703136,
    "node_id": "IC_kwDOGBlvNc5HoIjg",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-01T20:46:26Z",
    "updated_at": "2022-08-01T20:46:26Z",
    "author_association": "MEMBER",
    "body": "Going to close this as out of scope; I don't think supporting Node.js's package.json format makes sense, given we would need to implement an npm resolver just for this use case. If you want to use npm use npm.\r\n\r\nAs for decoupling from VCS, some exploration is being done in #2386",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1201703136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

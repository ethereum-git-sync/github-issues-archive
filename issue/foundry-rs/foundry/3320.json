{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3320",
  "id": 1383193168,
  "node_id": "I_kwDOGBlvNc5ScdpQ",
  "number": 3320,
  "title": "feat: Specify `forge coverage` targets",
  "user": {
    "login": "lucas-manuel",
    "id": 44272939,
    "node_id": "MDQ6VXNlcjQ0MjcyOTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/44272939?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucas-manuel",
    "html_url": "https://github.com/lucas-manuel",
    "followers_url": "https://api.github.com/users/lucas-manuel/followers",
    "following_url": "https://api.github.com/users/lucas-manuel/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucas-manuel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucas-manuel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucas-manuel/subscriptions",
    "organizations_url": "https://api.github.com/users/lucas-manuel/orgs",
    "repos_url": "https://api.github.com/users/lucas-manuel/repos",
    "events_url": "https://api.github.com/users/lucas-manuel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucas-manuel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4233058229,
      "node_id": "LA_kwDOGBlvNc78T1e1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-coverage",
      "name": "Cmd-forge-coverage",
      "color": "006B75",
      "default": false,
      "description": "Command: forge coverage"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-09-23T01:51:07Z",
  "updated_at": "2022-09-23T12:30:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nWhen running integration tests in a directory that imports contracts from multiple repos as submodules, (unless I'm missing something) there is currently no way to view the test coverage of the contracts that are imported, as they are not in the FOUNDRY_SRC directory.\r\n\r\nIt would be great to be able to specify a set of files to analyze for coverage using something like globs in the toml:\r\n\r\n```\r\ncoverage_targets = [\r\n    \"lib/repo1/src/*.sol\",\r\n    \"lib/repo1/src/proxy/*.sol\"\r\n    \"lib/repo2/src/*.sol\"\r\n]\r\n```\r\n\r\nThe main benefit is to be able to get coverage reports for contracts imported from submodules. Another benefit thought is that the total coverage report will provide a total percent coverage value in relation to specified files. This would be great for conditional branch protections based on coverage as it would not \"dilute\" the percent coverage with undesired contracts.\r\n    \r\n\r\n### Additional context\r\n\r\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1255720935",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3320#issuecomment-1255720935",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3320",
    "id": 1255720935,
    "node_id": "IC_kwDOGBlvNc5K2Mfn",
    "user": {
      "login": "lucas-manuel",
      "id": 44272939,
      "node_id": "MDQ6VXNlcjQ0MjcyOTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44272939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucas-manuel",
      "html_url": "https://github.com/lucas-manuel",
      "followers_url": "https://api.github.com/users/lucas-manuel/followers",
      "following_url": "https://api.github.com/users/lucas-manuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucas-manuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucas-manuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucas-manuel/subscriptions",
      "organizations_url": "https://api.github.com/users/lucas-manuel/orgs",
      "repos_url": "https://api.github.com/users/lucas-manuel/repos",
      "events_url": "https://api.github.com/users/lucas-manuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucas-manuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-23T01:52:14Z",
    "updated_at": "2022-09-23T01:52:14Z",
    "author_association": "NONE",
    "body": "I have a hunch that we could filter compiler output here using globs to achieve this:  https://github.com/foundry-rs/foundry/blob/c2816ca111beec6a33dd89a592bcae1af69800a8/cli/src/cmd/forge/coverage.rs#L121",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1255720935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/209",
  "id": 1077508913,
  "node_id": "I_kwDOGBlvNc5AOXsx",
  "number": 209,
  "title": "solc auto-detect not working as expected",
  "user": {
    "login": "moodmosaic",
    "id": 287532,
    "node_id": "MDQ6VXNlcjI4NzUzMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/moodmosaic",
    "html_url": "https://github.com/moodmosaic",
    "followers_url": "https://api.github.com/users/moodmosaic/followers",
    "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
    "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
    "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
    "repos_url": "https://api.github.com/users/moodmosaic/repos",
    "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-12-11T11:22:44Z",
  "updated_at": "2021-12-11T11:59:58Z",
  "closed_at": "2021-12-11T11:59:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "*Φοβερή δουλειά! Great job!*\r\n\r\nIt looks like `forge`'s solc auto-detect not working as expected(?)\r\n\r\nI just run\r\n\r\n```\r\ncargo install --git https://github.com/gakonst/foundry --bin forge --locked\r\n```\r\n\r\nfollowed by\r\n\r\n```\r\nforge init\r\n```\r\n\r\nthen\r\n\r\n```\r\nforge build\r\n```\r\n\r\nthen replaced what's inside `src/Contract.sol` with the following (notice `^0.4.0`)\r\n\r\n```\r\n// SPDX-License-Identifier: Unlicense\r\npragma solidity ^0.4.0;\r\n\r\ncontract Counter {\r\n    uint public count;\r\n\r\n    // Function to get the current count.\r\n    function get() public returns (uint) {\r\n        return count;\r\n    }\r\n\r\n    // Function to increment count by 1.\r\n    function inc() public {\r\n        count += 1;\r\n    }\r\n\r\n    // Function to decrement count by 1.\r\n    function dec() public {\r\n        count -= 1;\r\n    }\r\n}\r\n```\r\n\r\nand then on purpose I declared `get()` as `view` which I would expect to break with `^0.4.0`\r\n\r\n```diff\r\ndiff --git a/src/Contract.sol b/src/Contract.sol\r\nindex c116a9e..cdf66eb 100644\r\n--- a/src/Contract.sol\r\n+++ b/src/Contract.sol\r\n@@ -5,7 +5,7 @@ contract Counter {\r\n     uint public count;\r\n\r\n     // Function to get the current count\r\n-    function get() public returns (uint) {\r\n+    function get() public view returns (uint) {\r\n         return count;\r\n     }\r\n```\r\n\r\nrun\r\n\r\n```\r\nforge build\r\n```\r\n\r\nand got `success.` instead of a compilation error (e.g. Remix gives an error since `view` doesn't exist in `^0.4.0`.\r\n\r\n---\r\n\r\nExpected output:\r\n\r\n```\r\nsrc/Contract.sol:9:27: Error: Expected token LBrace got 'View'\r\n    function get() public view returns (uint) {\r\n                          ^\r\n```\r\n\r\nActual output:\r\n\r\n```\r\nsuccess.\r\n```",
  "closed_by": {
    "login": "moodmosaic",
    "id": 287532,
    "node_id": "MDQ6VXNlcjI4NzUzMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/moodmosaic",
    "html_url": "https://github.com/moodmosaic",
    "followers_url": "https://api.github.com/users/moodmosaic/followers",
    "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
    "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
    "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
    "repos_url": "https://api.github.com/users/moodmosaic/repos",
    "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/209/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991607827",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991607827",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991607827,
    "node_id": "IC_kwDOGBlvNc47GrwT",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:28:40Z",
    "updated_at": "2021-12-11T11:29:13Z",
    "author_association": "MEMBER",
    "body": "can you try running with `RUST_LOG=ethers=trace` this should show you the solc being used.\r\n\r\nAuto-detection is based on semver, and `^4.0.0` allows everything from 4.0.0 to <5.0.0.\r\n\r\nSo solc will try to find a compatible, already downloaded, solc install\r\n\r\nIt seems like that this doesn't necessarily hold for solc though",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991607827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991608523",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991608523",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991608523,
    "node_id": "IC_kwDOGBlvNc47Gr7L",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:30:52Z",
    "updated_at": "2021-12-11T11:30:52Z",
    "author_association": "NONE",
    "body": "@mattsse, thanks for the quick response. Here's the output:\r\n\r\n```\r\nDec 11 12:29:57.354 TRACE compile: ethers_solc: sources\r\nDec 11 12:29:57.356 TRACE compile: ethers_solc: done\r\nDec 11 12:29:57.356 TRACE compile: ethers_solc: auto-compile\r\nDec 11 12:29:57.357 TRACE compile:svm_compile: ethers_solc: detecting solc version for \"../forge/src/Contract.sol\"\r\nDec 11 12:29:57.395 TRACE compile:svm_compile: ethers_solc: found installed solc \"0.4.26\"\r\nDec 11 12:29:57.398 TRACE compile:svm_compile: ethers_solc: detecting solc version for \"../forge/src/test/Contract.t.sol\"\r\nDec 11 12:29:57.398 TRACE compile:svm_compile: ethers_solc: found installed solc \"0.8.10\"\r\nDec 11 12:29:57.400 TRACE compile:svm_compile: ethers_solc: compiling sources with viable solc versions\r\nDec 11 12:29:57.857 TRACE compile:svm_compile:solc{0.4.26}: ethers_solc: compiling_with_version\r\nDec 11 12:29:57.858 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: resolving libraries\r\nDec 11 12:29:57.859 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: resolved libraries\r\nDec 11 12:29:57.860 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: reading solfiles cache for incremental compilation\r\nDec 11 12:29:57.861 TRACE compile:svm_compile:solc{0.4.26}:compiling:sol-files-cache::read: ethers_solc::cache: reading solfiles cache at ../forge/cache/solidity-files-cache.json\r\nDec 11 12:29:57.862 TRACE compile:svm_compile:solc{0.4.26}:compiling:sol-files-cache::read: ethers_solc::cache: done\r\nDec 11 12:29:57.863 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: done reading solfiles cache for incremental compilation\r\nDec 11 12:29:57.864 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: reading artifacts from cache..\r\nDec 11 12:29:57.899 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: done reading artifacts from cache\r\nDec 11 12:29:57.900 TRACE compile:svm_compile:solc{0.4.26}:compiling: ethers_solc: no change\r\nDec 11 12:29:57.901 TRACE compile:svm_compile:solc{0.4.26}: ethers_solc: done compiling_with_version\r\nDec 11 12:29:58.041 TRACE compile:svm_compile:solc{0.8.10}: ethers_solc: compiling_with_version\r\nDec 11 12:29:58.042 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: resolving libraries\r\nDec 11 12:29:58.043 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: resolved libraries\r\nDec 11 12:29:58.046 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: reading solfiles cache for incremental compilation\r\nDec 11 12:29:58.047 TRACE compile:svm_compile:solc{0.8.10}:compiling:sol-files-cache::read: ethers_solc::cache: reading solfiles cache at ../forge/cache/solidity-files-cache.json\r\nDec 11 12:29:58.049 TRACE compile:svm_compile:solc{0.8.10}:compiling:sol-files-cache::read: ethers_solc::cache: done\r\nDec 11 12:29:58.050 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: done reading solfiles cache for incremental compilation\r\nDec 11 12:29:58.054 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: reading artifacts from cache..\r\nDec 11 12:29:58.097 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: done reading artifacts from cache\r\nDec 11 12:29:58.098 TRACE compile:svm_compile:solc{0.8.10}:compiling: ethers_solc: no change\r\nDec 11 12:29:58.099 TRACE compile:svm_compile:solc{0.8.10}: ethers_solc: done compiling_with_version\r\nDec 11 12:29:58.100 TRACE compile:svm_compile: ethers_solc: compiled sources with viable solc versions\r\nno files changed, compilation skippped.\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991608523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991608845",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991608845",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991608845,
    "node_id": "IC_kwDOGBlvNc47GsAN",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:31:56Z",
    "updated_at": "2021-12-11T11:31:56Z",
    "author_association": "NONE",
    "body": "Hmm... I guess it'll favor the solc used in the test(s)?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991608845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991611171",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991611171",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991611171,
    "node_id": "IC_kwDOGBlvNc47Gskj",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:39:37Z",
    "updated_at": "2021-12-11T11:39:37Z",
    "author_association": "MEMBER",
    "body": "yes, `forge test` only deploys contracts with `test*` functions.\r\nAnd it seems your `test/Contract.t.sol` allows 0.8.10?\r\n\r\nThere are currently some limitations when it comes to dependency graphs, so if you could share the imports and pragma of `test/Contract.t.sol`, that'd be helpful.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991611171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991613099",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991613099",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991613099,
    "node_id": "IC_kwDOGBlvNc47GtCr",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:46:12Z",
    "updated_at": "2021-12-11T11:46:31Z",
    "author_association": "NONE",
    "body": "```\r\n// SPDX-License-Identifier: Unlicense\r\npragma solidity 0.8.10;\r\n\r\nimport \"ds-test/test.sol\";\r\n```\r\n\r\nSomething tells me that `view` simply exists in `0.4.26` (which is the one that's picked up by `forge build` as per the above output). ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991613099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615119",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991615119",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991615119,
    "node_id": "IC_kwDOGBlvNc47GtiP",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:52:25Z",
    "updated_at": "2021-12-11T11:52:25Z",
    "author_association": "NONE",
    "body": "Yes! If I specify `pragma solidity 0.4.0;` then indeed it fails:\r\n\r\n```diff\r\ndiff --git a/src/Contract.sol b/src/Contract.sol\r\nindex c116a9e..3ee7dc0 100644\r\n--- a/src/Contract.sol\r\n+++ b/src/Contract.sol\r\n@@ -1,11 +1,11 @@\r\n // SPDX-License-Identifier: Unlicense\r\n-pragma solidity ^0.4.0;\r\n+pragma solidity 0.4.0;\r\n\r\n contract Counter {\r\n     uint public count;\r\n\r\n     // Function to get the current count\r\n-    function get() public returns (uint) {\r\n+    function get() public view returns (uint) {\r\n         return count;\r\n     }\r\n```\r\n\r\n---\r\n\r\nIt'd be nice if we could get the actual compiler error/output from `forge build` but I guess that's for a separate issue:\r\n\r\n```forge build\r\n\r\n$ RUST_LOG=ethers=trace forge build\r\nDec 11 12:50:30.638 TRACE compile: ethers_solc: sources\r\nDec 11 12:50:30.640 TRACE compile: ethers_solc: done\r\nDec 11 12:50:30.640 TRACE compile: ethers_solc: auto-compile\r\nDec 11 12:50:30.641 TRACE compile:svm_compile: ethers_solc: detecting solc version for \"../src/Contract.sol\"\r\nDec 11 12:50:30.698 TRACE compile:svm_compile: ethers_solc: found installed solc \"0.4.0\"\r\nDec 11 12:50:30.706 TRACE compile:svm_compile: ethers_solc: detecting solc version for \"../src/test/Contract.t.sol\"\r\nDec 11 12:50:30.708 TRACE compile:svm_compile: ethers_solc: found installed solc \"0.8.10\"\r\nDec 11 12:50:30.712 TRACE compile:svm_compile: ethers_solc: compiling sources with viable solc versions\r\nDec 11 12:50:31.340 TRACE compile:svm_compile:solc{0.4.0}: ethers_solc: compiling_with_version\r\nDec 11 12:50:31.341 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: resolving libraries\r\nDec 11 12:50:31.342 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: resolved libraries\r\nDec 11 12:50:31.343 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: reading solfiles cache for incremental compilation\r\nDec 11 12:50:31.344 TRACE compile:svm_compile:solc{0.4.0}:compiling:sol-files-cache::read: ethers_solc::cache: reading solfiles cache at ../cache/solidity-files-cache.json\r\nDec 11 12:50:31.345 TRACE compile:svm_compile:solc{0.4.0}:compiling:sol-files-cache::read: ethers_solc::cache: done\r\nDec 11 12:50:31.346 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: done reading solfiles cache for incremental compilation\r\nDec 11 12:50:31.347 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: reading artifacts from cache..\r\nDec 11 12:50:31.389 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: done reading artifacts from cache\r\nDec 11 12:50:31.421 TRACE compile:svm_compile:solc{0.4.0}:compiling: ethers_solc: calling solc\r\nError: EOF while parsing a value at line 1 column 0\r\n\r\nLocation:\r\n    /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/result.rs:1914:27\r\n```\r\n\r\nExpected output:\r\n\r\n```\r\nsrc/Contract.sol:9:27: Error: Expected token LBrace got 'View'\r\n    function get() public view returns (uint) {\r\n                          ^\r\n```\r\n\r\nActual output:\r\n\r\n```\r\nError: EOF while parsing a value at line 1 column 0\r\n\r\nLocation:\r\n    /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/result.rs:1914:27\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615524",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991615524",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991615524,
    "node_id": "IC_kwDOGBlvNc47Gtok",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:53:55Z",
    "updated_at": "2021-12-11T11:53:55Z",
    "author_association": "MEMBER",
    "body": "any chance you built with hardhat in the meantime?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615759",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991615759",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991615759,
    "node_id": "IC_kwDOGBlvNc47GtsP",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:54:43Z",
    "updated_at": "2021-12-11T11:54:43Z",
    "author_association": "NONE",
    "body": "> any chance you built with hardhat in the meantime?\r\n\r\nSure.\r\n\r\nHowever, on the expected/actual solc output above, do you think I should open an issue?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991615759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991616250",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991616250",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991616250,
    "node_id": "IC_kwDOGBlvNc47Gtz6",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:56:32Z",
    "updated_at": "2021-12-11T11:56:32Z",
    "author_association": "MEMBER",
    "body": "I think the root problem is, that solc not necessarily abide to semver rules.\r\nperhaps our auto detection is too optimistic in some scenarios, we're using https://github.com/roynalnaruto/svm-rs so you can also install `svm install \"0.4.0\"` manually which should then be picked up\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991616250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991616987",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991616987",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991616987,
    "node_id": "IC_kwDOGBlvNc47Gt_b",
    "user": {
      "login": "moodmosaic",
      "id": 287532,
      "node_id": "MDQ6VXNlcjI4NzUzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/moodmosaic",
      "html_url": "https://github.com/moodmosaic",
      "followers_url": "https://api.github.com/users/moodmosaic/followers",
      "following_url": "https://api.github.com/users/moodmosaic/following{/other_user}",
      "gists_url": "https://api.github.com/users/moodmosaic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/moodmosaic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/moodmosaic/subscriptions",
      "organizations_url": "https://api.github.com/users/moodmosaic/orgs",
      "repos_url": "https://api.github.com/users/moodmosaic/repos",
      "events_url": "https://api.github.com/users/moodmosaic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/moodmosaic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:59:07Z",
    "updated_at": "2021-12-11T11:59:07Z",
    "author_association": "NONE",
    "body": "I think I finally got `forge build` to error out, it's just that the error isn't the actual solc compiler output/error:\r\n\r\nExpected output:\r\n\r\n```\r\nsrc/Contract.sol:9:27: Error: Expected token LBrace got 'View'\r\n    function get() public view returns (uint) {\r\n                          ^\r\n```\r\n\r\nActual output:\r\n\r\n```\r\nError: EOF while parsing a value at line 1 column 0\r\n\r\nLocation:\r\n    /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/result.rs:1914:27\r\n```\r\n\r\nPing me and I'll make an issue for it. Closing this one for now.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991616987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991617158",
    "html_url": "https://github.com/foundry-rs/foundry/issues/209#issuecomment-991617158",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/209",
    "id": 991617158,
    "node_id": "IC_kwDOGBlvNc47GuCG",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-11T11:59:46Z",
    "updated_at": "2021-12-11T11:59:58Z",
    "author_association": "MEMBER",
    "body": "> > any chance you built with hardhat in the meantime?\r\n> \r\n> Sure.\r\n\r\nethers-solc uses a different artifact format by default, but the same cache format as hardhat, so this can happen, I think we should find a way around that\r\n\r\n> \r\n> However, on the expected/actual solc output above, do you think I should open an issue?\r\n\r\nI think It's worth discussing if we want to follow always semver or if we need some additional checks, +1",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/991617158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

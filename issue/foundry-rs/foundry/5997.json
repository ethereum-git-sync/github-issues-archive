{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5997",
  "id": 1929063226,
  "node_id": "I_kwDOGBlvNc5y-ys6",
  "number": 5997,
  "title": "Curve TricryptoUSDC `remove_liquidity_one_coin` method call not simulating on fork",
  "user": {
    "login": "mikeghen",
    "id": 5077880,
    "node_id": "MDQ6VXNlcjUwNzc4ODA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5077880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mikeghen",
    "html_url": "https://github.com/mikeghen",
    "followers_url": "https://api.github.com/users/mikeghen/followers",
    "following_url": "https://api.github.com/users/mikeghen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mikeghen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mikeghen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mikeghen/subscriptions",
    "organizations_url": "https://api.github.com/users/mikeghen/orgs",
    "repos_url": "https://api.github.com/users/mikeghen/repos",
    "events_url": "https://api.github.com/users/mikeghen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mikeghen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-05T21:09:18Z",
  "updated_at": "2023-10-06T15:39:23Z",
  "closed_at": "2023-10-06T15:39:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (b536f51 2023-08-20T18:33:44.948515000Z)\n\n### What command(s) is the bug in?\n\nforge test --fork-url <your-rpc> --etherscan-api-key <your-etherscan-api-key>\n\n### Operating System\n\nNone\n\n### Describe the bug\n\nI'm testing using a fork against the Curve TricryptoUSDC Liquidity pool and I can't seem to get it to `remove_liquidity_one_coin`. Regardless of the arguments I pass to the method, it is always successful but does no state changes. Any call simple returns:\r\n```\r\n    ‚îú‚îÄ [0] VM::prank(alice: [0x328809Bc894f92807417D2dAD6b7C998c1aFdac6]) \r\n    ‚îÇ   ‚îî‚îÄ ‚Üê ()\r\n    ‚îú‚îÄ [1849] CurveTricryptoOptimizedWETH::remove_liquidity_one_coin(465160497416623727543 [4.651e20], 0, 0) \r\n    ‚îÇ   ‚îî‚îÄ ‚Üê ()\r\n```\r\nEven when putting in arguments that should certainly revert, it sill has this same successful call with no state changes. \r\n\r\nI put together a simple proof of concept here: https://github.com/mikeghen/add-remove-tricrypto\r\n\r\nAlso wanted to add that making up a fake method like `remove_liquidity_does_not_exist(uint,uint,uint)` and calling it on that contract results in the same thing. \r\n\r\nI was expecting this method call would revert or make some state changes, but it doesn't seem to do anything. \r\n\r\nAny help would be appreciated üôè \r\n\r\n",
  "closed_by": {
    "login": "mikeghen",
    "id": 5077880,
    "node_id": "MDQ6VXNlcjUwNzc4ODA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5077880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mikeghen",
    "html_url": "https://github.com/mikeghen",
    "followers_url": "https://api.github.com/users/mikeghen/followers",
    "following_url": "https://api.github.com/users/mikeghen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mikeghen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mikeghen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mikeghen/subscriptions",
    "organizations_url": "https://api.github.com/users/mikeghen/orgs",
    "repos_url": "https://api.github.com/users/mikeghen/repos",
    "events_url": "https://api.github.com/users/mikeghen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mikeghen/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1750938464",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5997#issuecomment-1750938464",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5997",
    "id": 1750938464,
    "node_id": "IC_kwDOGBlvNc5oXTNg",
    "user": {
      "login": "mikeghen",
      "id": 5077880,
      "node_id": "MDQ6VXNlcjUwNzc4ODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5077880?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeghen",
      "html_url": "https://github.com/mikeghen",
      "followers_url": "https://api.github.com/users/mikeghen/followers",
      "following_url": "https://api.github.com/users/mikeghen/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeghen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeghen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeghen/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeghen/orgs",
      "repos_url": "https://api.github.com/users/mikeghen/repos",
      "events_url": "https://api.github.com/users/mikeghen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeghen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-06T15:39:23Z",
    "updated_at": "2023-10-06T15:39:23Z",
    "author_association": "NONE",
    "body": "I think it's safe to close this issue, worked with the Curve team to run down why this happens. It has to do with a fallback function that always returns.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1750938464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

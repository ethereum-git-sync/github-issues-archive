{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2289",
  "id": 1302624246,
  "node_id": "I_kwDOGBlvNc5NpHf2",
  "number": 2289,
  "title": "Ledger HW QoL",
  "user": {
    "login": "joleeee",
    "id": 24441708,
    "node_id": "MDQ6VXNlcjI0NDQxNzA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/24441708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joleeee",
    "html_url": "https://github.com/joleeee",
    "followers_url": "https://api.github.com/users/joleeee/followers",
    "following_url": "https://api.github.com/users/joleeee/following{/other_user}",
    "gists_url": "https://api.github.com/users/joleeee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joleeee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joleeee/subscriptions",
    "organizations_url": "https://api.github.com/users/joleeee/orgs",
    "repos_url": "https://api.github.com/users/joleeee/repos",
    "events_url": "https://api.github.com/users/joleeee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joleeee/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752609,
      "node_id": "LA_kwDOGBlvNc7cwseh",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-cast",
      "name": "C-cast",
      "color": "5319E7",
      "default": false,
      "description": "Command: cast"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3777109787,
      "node_id": "LA_kwDOGBlvNc7hIh8b",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-create",
      "name": "Cmd-forge-create",
      "color": "006B75",
      "default": false,
      "description": "Command: forge create"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-07-12T21:07:45Z",
  "updated_at": "2023-04-11T22:01:42Z",
  "closed_at": "2023-04-11T22:01:42Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nCast\r\n\r\n### Describe the bug\r\n\r\n# Check that signed transactions from hardware wallets have the correct --from\r\nThis would be a failsafe for when the hardware wallet signs a transaction from a different account than the one specifed with --from.\r\n\r\n*RE: talk in foundry telegram*\r\n\r\nI had an issue a while back where i specified a --from in `cast send` but the transaction was signed with another account. I don't think the ledger even shows what account you're using, only the target, but thats not something that can be fixed in foundry. My solution is to derive the sender from the signed message, and then assert it is the same as the --from.\r\n\r\nMoreover we spoke about some other QoL improvements. Here is the full list\r\n- cast sometimes (always when account is not the first idx?) signs/sends txs from the wrong account\r\n- missing linux udev rules (as with any program)\r\n- seth takes a while to iterate until it finds the wallet i think\r\n- explain --mnemonic-path in `cast send --help`,\r\n    - give an example? some nice frontend?\r\n\r\nAs for the udev rules, it would be nice if it would prompt you to copy a `curl | sudo tee /etc/udev/...`, or at the very least link you to [the ledger site](https://support.ledger.com/hc/en-us/articles/115005165269-Fix-USB-connection-issues-with-Ledger-Live), here is the [arch aur package](https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=ledger-udev) which has a script for it\r\n\r\n@gakonst let me know the issue with the wrong sender is because foundry doesn't iterate through the accounts until it finds the correct once, so assuming this would be added in the future, i left in the slightly unrelated point relating to seth. Maybe it could be cached or something :smile: \r\n",
  "closed_by": {
    "login": "mds1",
    "id": 17163988,
    "node_id": "MDQ6VXNlcjE3MTYzOTg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mds1",
    "html_url": "https://github.com/mds1",
    "followers_url": "https://api.github.com/users/mds1/followers",
    "following_url": "https://api.github.com/users/mds1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
    "organizations_url": "https://api.github.com/users/mds1/orgs",
    "repos_url": "https://api.github.com/users/mds1/repos",
    "events_url": "https://api.github.com/users/mds1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mds1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1182515260",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1182515260",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1182515260,
    "node_id": "IC_kwDOGBlvNc5Ge8A8",
    "user": {
      "login": "joshieDo",
      "id": 93316087,
      "node_id": "U_kgDOBY_j9w",
      "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshieDo",
      "html_url": "https://github.com/joshieDo",
      "followers_url": "https://api.github.com/users/joshieDo/followers",
      "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
      "organizations_url": "https://api.github.com/users/joshieDo/orgs",
      "repos_url": "https://api.github.com/users/joshieDo/repos",
      "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshieDo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T21:26:13Z",
    "updated_at": "2022-07-12T21:26:13Z",
    "author_association": "COLLABORATOR",
    "body": "Thanks!!\r\n\r\nSending from the wrong account might be related to:\r\n\r\n* `--trezor` and `--ledger` use a default derivation path if `--hd-path` is not provided. I'm guessing `--mnemonic-path` and `--mnemonic-index` work similarly.\r\n* Commands which use `--from` do not look for a pairing address in any of the foundry commands as far as I know. On `forge script` we match what we need against what we have. And fail, if we can't match. But I'm guessing that we don't make that check for `cast send`. \r\n\r\nI'd rather make the check and fail, than search for a valid address to be honest.\r\n\r\n--\r\n\r\nRegarding `udev` ... I'd rather handle the failure better, and tell the user to make sure `udev` rules are installed to be honest.\r\n\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1182515260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1182532253",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1182532253",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1182532253,
    "node_id": "IC_kwDOGBlvNc5GfAKd",
    "user": {
      "login": "joleeee",
      "id": 24441708,
      "node_id": "MDQ6VXNlcjI0NDQxNzA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/24441708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joleeee",
      "html_url": "https://github.com/joleeee",
      "followers_url": "https://api.github.com/users/joleeee/followers",
      "following_url": "https://api.github.com/users/joleeee/following{/other_user}",
      "gists_url": "https://api.github.com/users/joleeee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joleeee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joleeee/subscriptions",
      "organizations_url": "https://api.github.com/users/joleeee/orgs",
      "repos_url": "https://api.github.com/users/joleeee/repos",
      "events_url": "https://api.github.com/users/joleeee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joleeee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T21:49:48Z",
    "updated_at": "2022-07-12T21:49:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "If not automatically by --from then it would be nice if some other util existed for finding the derivation. Then just\r\n```sh\r\ncast send --hd-path $(cast somesubcmd --find-hd-path 0x12..34)\r\n```\r\nand maybe a shorthand `cast send --find-from`?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1182532253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1184061705",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1184061705",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1184061705,
    "node_id": "IC_kwDOGBlvNc5Gk1kJ",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T06:47:54Z",
    "updated_at": "2022-07-14T06:47:54Z",
    "author_association": "MEMBER",
    "body": "Was this fixed in #2290",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1184061705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1184192734",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1184192734",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1184192734,
    "node_id": "IC_kwDOGBlvNc5GlVje",
    "user": {
      "login": "joleeee",
      "id": 24441708,
      "node_id": "MDQ6VXNlcjI0NDQxNzA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/24441708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joleeee",
      "html_url": "https://github.com/joleeee",
      "followers_url": "https://api.github.com/users/joleeee/followers",
      "following_url": "https://api.github.com/users/joleeee/following{/other_user}",
      "gists_url": "https://api.github.com/users/joleeee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joleeee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joleeee/subscriptions",
      "organizations_url": "https://api.github.com/users/joleeee/orgs",
      "repos_url": "https://api.github.com/users/joleeee/repos",
      "events_url": "https://api.github.com/users/joleeee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joleeee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T09:06:23Z",
    "updated_at": "2022-07-14T09:06:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "The original problem was half-solved in that it now panics if there is a mismatch between --from and the actual hw sender, but thats more like a failsafe. Other half-related things were also brought up here",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1184192734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1212392412",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1212392412",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1212392412,
    "node_id": "IC_kwDOGBlvNc5IQ6Pc",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-11T19:20:10Z",
    "updated_at": "2022-08-11T19:20:10Z",
    "author_association": "MEMBER",
    "body": "Ping @joshieDo unsure if the rest of this issue was fixed?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1212392412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1212464859",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1212464859",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1212464859,
    "node_id": "IC_kwDOGBlvNc5IRL7b",
    "user": {
      "login": "joshieDo",
      "id": 93316087,
      "node_id": "U_kgDOBY_j9w",
      "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshieDo",
      "html_url": "https://github.com/joshieDo",
      "followers_url": "https://api.github.com/users/joshieDo/followers",
      "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
      "organizations_url": "https://api.github.com/users/joshieDo/orgs",
      "repos_url": "https://api.github.com/users/joshieDo/repos",
      "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshieDo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-11T20:31:35Z",
    "updated_at": "2022-08-11T20:31:35Z",
    "author_association": "COLLABORATOR",
    "body": "The main issue is solved afaik. Others are more like suggestions/feature requests\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1212464859/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1504174153",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2289#issuecomment-1504174153",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2289",
    "id": 1504174153,
    "node_id": "IC_kwDOGBlvNc5Zp-BJ",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-11T22:01:42Z",
    "updated_at": "2023-04-11T22:01:42Z",
    "author_association": "COLLABORATOR",
    "body": "Going to close this since the main issue was solved. I'm not sure if the other suggestions were implemented yet or not, but if those are still desired let's get each one into it's own issue so we can track/prioritize individually",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1504174153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

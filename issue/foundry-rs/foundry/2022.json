{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2022",
  "id": 1275870482,
  "node_id": "I_kwDOGBlvNc5MDD0S",
  "number": 2022,
  "title": "Debug aborting while testing giving out of bounds - Core dumped error",
  "user": {
    "login": "othernamesweretaken",
    "id": 47422838,
    "node_id": "MDQ6VXNlcjQ3NDIyODM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/47422838?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/othernamesweretaken",
    "html_url": "https://github.com/othernamesweretaken",
    "followers_url": "https://api.github.com/users/othernamesweretaken/followers",
    "following_url": "https://api.github.com/users/othernamesweretaken/following{/other_user}",
    "gists_url": "https://api.github.com/users/othernamesweretaken/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/othernamesweretaken/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/othernamesweretaken/subscriptions",
    "organizations_url": "https://api.github.com/users/othernamesweretaken/orgs",
    "repos_url": "https://api.github.com/users/othernamesweretaken/repos",
    "events_url": "https://api.github.com/users/othernamesweretaken/events{/privacy}",
    "received_events_url": "https://api.github.com/users/othernamesweretaken/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3776975605,
      "node_id": "LA_kwDOGBlvNc7hIBL1",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-debug",
      "name": "Cmd-forge-debug",
      "color": "006B75",
      "default": false,
      "description": "Command: forge run"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "joshieDo",
    "id": 93316087,
    "node_id": "U_kgDOBY_j9w",
    "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joshieDo",
    "html_url": "https://github.com/joshieDo",
    "followers_url": "https://api.github.com/users/joshieDo/followers",
    "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
    "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
    "organizations_url": "https://api.github.com/users/joshieDo/orgs",
    "repos_url": "https://api.github.com/users/joshieDo/repos",
    "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joshieDo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "joshieDo",
      "id": 93316087,
      "node_id": "U_kgDOBY_j9w",
      "avatar_url": "https://avatars.githubusercontent.com/u/93316087?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshieDo",
      "html_url": "https://github.com/joshieDo",
      "followers_url": "https://api.github.com/users/joshieDo/followers",
      "following_url": "https://api.github.com/users/joshieDo/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshieDo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshieDo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshieDo/subscriptions",
      "organizations_url": "https://api.github.com/users/joshieDo/orgs",
      "repos_url": "https://api.github.com/users/joshieDo/repos",
      "events_url": "https://api.github.com/users/joshieDo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshieDo/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-06-18T19:48:47Z",
  "updated_at": "2022-06-23T20:28:36Z",
  "closed_at": "2022-06-23T20:28:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (7b9d3ad 2022-06-18T00:06:55.933866068Z)\n\n### What command(s) is the bug in?\n\nforge test --debug <test-name>\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\n# Context \r\nDebugger failing with an unexpected error.\r\nSome of the files used in the foundry test are being imported out the source folder (i.e. src = 'contracts_forge' in foundry.toml). \r\nOn running \r\n`forge test --debug test_<test_name>`\r\nThe debug module aborts following with the below error :- \r\n`[тав] Compiling...\r\nNothing to compile\r\npanicked at 'byte index 3627 is out of bounds of // SPDX-License-Identifier: MIT OR Apache-2.0\r\npragma solidity >=0.6.11;\r\n// ============ External Imports ============\r\nimport {Home} from \"../../nomad-core/contracts/Home.sol\";\r\nimport {XAppConnectionManager} from \"../../nomad-core/contracts/XAppConnectionM[...]', library/core/src/str/mod.rs:107:9\r\nAborted (core dumped)\r\n`\r\n\r\n## Steps to reproduce:- \r\n1. Repo : https://github.com/code-423n4/2022-06-connext/tree/main/contracts\r\n2. Follow development steps mentioned there.\r\n3. run - forge test --debug test_BridgeFacet__xcall_worksWithPositiveSlippage\r\n\r\n\r\n### Things to note \r\n1. forge test (without debug) working perfectly fine \r\n2. Debug working upto test file only then suddenly aborts \r\n\r\n### My suspicion \r\nExternal imports outside source folder (i.e. src = 'contracts_forge') are causing the issue.\r\n`// ============ External Imports ============\r\nimport {Home} from \"../../nomad-core/contracts/Home.sol\";\r\nimport {XAppConnectionManager} from \"../../nomad-core/contracts/XAppConnectionM'[...]', library/core/src/str/mod.rs:107:9\r\nAborted (core dumped)\r\n`\r\n![image](https://user-images.githubusercontent.com/47422838/174455123-96c0b14c-9b55-4af6-a00d-2ecf1ea68d6f.png)\r\n\r\n",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159575001",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2022#issuecomment-1159575001",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
    "id": 1159575001,
    "node_id": "IC_kwDOGBlvNc5FHbXZ",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-18T22:22:56Z",
    "updated_at": "2022-06-18T22:22:56Z",
    "author_association": "MEMBER",
    "body": "Seems like we're trying to show a part of the source code that doesn't exist, making me suspect that we're accidentally mapping to the wrong file. Out of curiosity, do you use multiple solc versions in your project?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159575001/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159597410",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2022#issuecomment-1159597410",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
    "id": 1159597410,
    "node_id": "IC_kwDOGBlvNc5FHg1i",
    "user": {
      "login": "othernamesweretaken",
      "id": 47422838,
      "node_id": "MDQ6VXNlcjQ3NDIyODM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/47422838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/othernamesweretaken",
      "html_url": "https://github.com/othernamesweretaken",
      "followers_url": "https://api.github.com/users/othernamesweretaken/followers",
      "following_url": "https://api.github.com/users/othernamesweretaken/following{/other_user}",
      "gists_url": "https://api.github.com/users/othernamesweretaken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/othernamesweretaken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/othernamesweretaken/subscriptions",
      "organizations_url": "https://api.github.com/users/othernamesweretaken/orgs",
      "repos_url": "https://api.github.com/users/othernamesweretaken/repos",
      "events_url": "https://api.github.com/users/othernamesweretaken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/othernamesweretaken/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-19T01:43:09Z",
    "updated_at": "2022-06-19T01:43:09Z",
    "author_association": "NONE",
    "body": "Yes, there are multiple solc versions in the project.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1159597410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1160732967",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2022#issuecomment-1160732967",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
    "id": 1160732967,
    "node_id": "IC_kwDOGBlvNc5FL2En",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-20T18:24:53Z",
    "updated_at": "2022-06-20T18:24:53Z",
    "author_association": "MEMBER",
    "body": "Right, so this is probably related to the multiple source trees thing that was also an issue for coverage.\r\n\r\nBasically when you have multiple solc versions in a project then we compile multiple times (once for each version) and the source IDs and source maps across these compilations might not be compatible. This is for sure a bug we should handle like we do for coverage.\r\n\r\nIf no one else takes this I'll take a look at it after coverage :)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1160732967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1162161236",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2022#issuecomment-1162161236",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
    "id": 1162161236,
    "node_id": "IC_kwDOGBlvNc5FRSxU",
    "user": {
      "login": "othernamesweretaken",
      "id": 47422838,
      "node_id": "MDQ6VXNlcjQ3NDIyODM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/47422838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/othernamesweretaken",
      "html_url": "https://github.com/othernamesweretaken",
      "followers_url": "https://api.github.com/users/othernamesweretaken/followers",
      "following_url": "https://api.github.com/users/othernamesweretaken/following{/other_user}",
      "gists_url": "https://api.github.com/users/othernamesweretaken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/othernamesweretaken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/othernamesweretaken/subscriptions",
      "organizations_url": "https://api.github.com/users/othernamesweretaken/orgs",
      "repos_url": "https://api.github.com/users/othernamesweretaken/repos",
      "events_url": "https://api.github.com/users/othernamesweretaken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/othernamesweretaken/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-21T18:28:42Z",
    "updated_at": "2022-06-21T18:28:42Z",
    "author_association": "NONE",
    "body": "Okay got it. Makes sense. \n\nBtw just for knowledge, how hard is this issue for a complete rust beginner? Thinking of ways I can be helpful",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1162161236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1163231086",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2022#issuecomment-1163231086",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2022",
    "id": 1163231086,
    "node_id": "IC_kwDOGBlvNc5FVX9u",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-22T15:07:13Z",
    "updated_at": "2022-06-22T15:07:13Z",
    "author_association": "MEMBER",
    "body": "Ah, I think @joshieDo is already on it :smile: Otherwise it wouldn't be too hard, the hard part is mostly knowing how `ethers-solc` works in this respect :)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1163231086/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

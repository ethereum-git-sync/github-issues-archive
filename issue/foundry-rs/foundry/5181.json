{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5181",
  "id": 1763739347,
  "node_id": "I_kwDOGBlvNc5pIIbT",
  "number": 5181,
  "title": " etherscan: failed to deserialize response - invalid resource end point",
  "user": {
    "login": "codemedici",
    "id": 17223455,
    "node_id": "MDQ6VXNlcjE3MjIzNDU1",
    "avatar_url": "https://avatars.githubusercontent.com/u/17223455?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/codemedici",
    "html_url": "https://github.com/codemedici",
    "followers_url": "https://api.github.com/users/codemedici/followers",
    "following_url": "https://api.github.com/users/codemedici/following{/other_user}",
    "gists_url": "https://api.github.com/users/codemedici/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/codemedici/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/codemedici/subscriptions",
    "organizations_url": "https://api.github.com/users/codemedici/orgs",
    "repos_url": "https://api.github.com/users/codemedici/repos",
    "events_url": "https://api.github.com/users/codemedici/events{/privacy}",
    "received_events_url": "https://api.github.com/users/codemedici/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2023-06-19T15:09:14Z",
  "updated_at": "2023-06-22T13:58:36Z",
  "closed_at": "2023-06-22T13:58:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "              Yep I believe so—we did have some deserialization issues that we fixed. Closing!\r\n\r\n_Originally posted by @Evalir in https://github.com/foundry-rs/foundry/issues/3621#issuecomment-1576745932_\r\n\r\nIt is not a deserialization issue, it is a rate limit issue, as foundry exceeds 5 API requests x second!!\r\n\r\nThe monthly subscription for Etherscan is $200 a month for 10 API calls per second, this is a major issue for developers, I haven't been able to verify contracts manually either due to bytecode mismatch (I tried all I could), forcing me to pay for Etherscan; could you just lower the API calls rate on the Foundry side?",
  "closed_by": {
    "login": "Evalir",
    "id": 26014927,
    "node_id": "MDQ6VXNlcjI2MDE0OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Evalir",
    "html_url": "https://github.com/Evalir",
    "followers_url": "https://api.github.com/users/Evalir/followers",
    "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
    "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
    "organizations_url": "https://api.github.com/users/Evalir/orgs",
    "repos_url": "https://api.github.com/users/Evalir/repos",
    "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Evalir/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1597369851",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1597369851",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1597369851,
    "node_id": "IC_kwDOGBlvNc5fNe37",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-19T15:18:07Z",
    "updated_at": "2023-06-19T15:18:07Z",
    "author_association": "MEMBER",
    "body": "Hey, we'll be taking a look at this—no need to tag everyone.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1597369851/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598414594",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1598414594",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1598414594,
    "node_id": "IC_kwDOGBlvNc5fRd8C",
    "user": {
      "login": "codemedici",
      "id": 17223455,
      "node_id": "MDQ6VXNlcjE3MjIzNDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17223455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codemedici",
      "html_url": "https://github.com/codemedici",
      "followers_url": "https://api.github.com/users/codemedici/followers",
      "following_url": "https://api.github.com/users/codemedici/following{/other_user}",
      "gists_url": "https://api.github.com/users/codemedici/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codemedici/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codemedici/subscriptions",
      "organizations_url": "https://api.github.com/users/codemedici/orgs",
      "repos_url": "https://api.github.com/users/codemedici/repos",
      "events_url": "https://api.github.com/users/codemedici/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codemedici/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-20T09:16:00Z",
    "updated_at": "2023-06-20T09:16:00Z",
    "author_association": "NONE",
    "body": "UPDATE: I've tested using a proxy, apparently the problem is not rate limiting, as Forge fails upon hitting the first invalid endpoint.\r\n\r\nPoC:\r\n`curl -i -s -k -X $'GET' \\\r\n    -H $'Host: api.etherscan.io' -H $'Accept: application/json' -H $'Connection: close' \\\r\n    $'https://api.etherscan.io/?apikey=<yourAPIKey>&module=contract&action=getabi&address=0xd16246ba85912bd9c22fc87e956c5f3c0e57a461'`\r\n  ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598414594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598774371",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1598774371",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1598774371,
    "node_id": "IC_kwDOGBlvNc5fS1xj",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-20T13:20:36Z",
    "updated_at": "2023-06-20T13:20:36Z",
    "author_association": "MEMBER",
    "body": "This URL is wrong @codemedici — it should be https://api.etherscan.io/api and then all the endpoint parameters. Are you passing in this url directly to forge?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1598774371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601045725",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1601045725",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1601045725,
    "node_id": "IC_kwDOGBlvNc5fbgTd",
    "user": {
      "login": "codemedici",
      "id": 17223455,
      "node_id": "MDQ6VXNlcjE3MjIzNDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17223455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codemedici",
      "html_url": "https://github.com/codemedici",
      "followers_url": "https://api.github.com/users/codemedici/followers",
      "following_url": "https://api.github.com/users/codemedici/following{/other_user}",
      "gists_url": "https://api.github.com/users/codemedici/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codemedici/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codemedici/subscriptions",
      "organizations_url": "https://api.github.com/users/codemedici/orgs",
      "repos_url": "https://api.github.com/users/codemedici/repos",
      "events_url": "https://api.github.com/users/codemedici/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codemedici/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-21T15:21:38Z",
    "updated_at": "2023-06-21T15:21:38Z",
    "author_association": "NONE",
    "body": "I have changed the URL, now I'm getting the following error:\r\n`{\"status\":\"0\",\"message\":\"NOTOK\",\"result\":\"Contract source code not verified\"}`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601045725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601062304",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1601062304",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1601062304,
    "node_id": "IC_kwDOGBlvNc5fbkWg",
    "user": {
      "login": "codemedici",
      "id": 17223455,
      "node_id": "MDQ6VXNlcjE3MjIzNDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17223455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codemedici",
      "html_url": "https://github.com/codemedici",
      "followers_url": "https://api.github.com/users/codemedici/followers",
      "following_url": "https://api.github.com/users/codemedici/following{/other_user}",
      "gists_url": "https://api.github.com/users/codemedici/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codemedici/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codemedici/subscriptions",
      "organizations_url": "https://api.github.com/users/codemedici/orgs",
      "repos_url": "https://api.github.com/users/codemedici/repos",
      "events_url": "https://api.github.com/users/codemedici/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codemedici/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-21T15:31:09Z",
    "updated_at": "2023-06-21T15:31:09Z",
    "author_association": "NONE",
    "body": "FYI, here is the command I'm using:\r\n`forge verify-contract --chain-id 1 --num-of-optimizations 4294967295 --watch --constructor-args $(cast abi-encode \"constructor(address)\" 0x61b98ACbfc23326Cfe296f380B5aa3e5Adcc5238) --etherscan-api-key ${API_KEY_ETHERSCAN} --compiler-version v0.8.20+commit.a1b79de6 0xD16246bA85912BD9C22fc87E956C5f3c0e57a461 src/token/ERC721/presets/ERC721Sovreign.sol:ERC721Sovreign`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601062304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601131498",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1601131498",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1601131498,
    "node_id": "IC_kwDOGBlvNc5fb1Pq",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-21T16:09:14Z",
    "updated_at": "2023-06-21T16:09:14Z",
    "author_association": "MEMBER",
    "body": "Do not abi encode the constructor args—you can just pass them in like you would in solidity",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1601131498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1602690627",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5181#issuecomment-1602690627",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5181",
    "id": 1602690627,
    "node_id": "IC_kwDOGBlvNc5fhx5D",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T13:58:35Z",
    "updated_at": "2023-06-22T13:58:35Z",
    "author_association": "MEMBER",
    "body": "Closing—seems like user error at this point.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1602690627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1482",
  "id": 1224752878,
  "node_id": "I_kwDOGBlvNc5JAD7u",
  "number": 1482,
  "title": "Add `forge debug` subcommand which runs a transaction in the debugger using state from a different chain",
  "user": {
    "login": "lithp",
    "id": 466333,
    "node_id": "MDQ6VXNlcjQ2NjMzMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466333?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lithp",
    "html_url": "https://github.com/lithp",
    "followers_url": "https://api.github.com/users/lithp/followers",
    "following_url": "https://api.github.com/users/lithp/following{/other_user}",
    "gists_url": "https://api.github.com/users/lithp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lithp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lithp/subscriptions",
    "organizations_url": "https://api.github.com/users/lithp/orgs",
    "repos_url": "https://api.github.com/users/lithp/repos",
    "events_url": "https://api.github.com/users/lithp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lithp/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-05-03T23:05:59Z",
  "updated_at": "2022-05-05T05:49:18Z",
  "closed_at": "2022-05-05T05:49:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nThis is a request for design advice on a PR I would like to write. I've already written something hacky and want to get input on what the interface should look like before I start cleaning it up.\r\n\r\nI have an integration test suite which interacts with a private chain and recently the tests broke. I had a geth trace but no interactive debugger to inspect it with. I realized forge _already_ has all the necessary pieces to let me debug this transaction, they're just not wired up yet!\r\n\r\nI added a `forge debug` subcommand which accepts the parameters you would send `eth_call` and runs the transaction, backfilling state using a fork backend, then opens the trace in the tui. This works great!\r\n\r\nSome things I would like input on:\r\n\r\n- Is `forge debug` a good name for this command? Maybe you would prefer it be an extra flag passed to `forge run`, since this behavior is very similar to the existing `forge run`.\r\n\r\n- I had a hard time getting sourcemaps to work correctly. The \"right\" answer seems to be adding support in `ethers_solc::Project` for reading from an exsiting directory instead of doing a fresh compile every time. The user can run solc and deploy contracts using their existing process and forge will later load contracts and sourcemaps from those output directories. Does this sound like a reasonable approach? At this point you don't even really need to be in a local forge project directory, maybe it's better to do this as a cast command?\r\n\r\n- I had a hard time getting forge to recognize which addresses corresponded to which contracts. If I'm reading the code correctly `LocalTraceIdentifier` is supposed to compare the deployed bytecode with the known bytecodes and come up with the matching contract but that doesn'twork at all for me. Am I using it wrong or is this known to not work?\r\n\r\n- Are there any additional difficulties you foresee?\r\n\n\n### Additional context\n\n_No response_",
  "closed_by": {
    "login": "lithp",
    "id": 466333,
    "node_id": "MDQ6VXNlcjQ2NjMzMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466333?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lithp",
    "html_url": "https://github.com/lithp",
    "followers_url": "https://api.github.com/users/lithp/followers",
    "following_url": "https://api.github.com/users/lithp/following{/other_user}",
    "gists_url": "https://api.github.com/users/lithp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lithp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lithp/subscriptions",
    "organizations_url": "https://api.github.com/users/lithp/orgs",
    "repos_url": "https://api.github.com/users/lithp/repos",
    "events_url": "https://api.github.com/users/lithp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lithp/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1116741437",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1482#issuecomment-1116741437",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482",
    "id": 1116741437,
    "node_id": "IC_kwDOGBlvNc5CkB89",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-03T23:06:56Z",
    "updated_at": "2022-05-03T23:06:56Z",
    "author_association": "MEMBER",
    "body": "Check out `cast run` - is that what you're asking? :)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1116741437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1116744848",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1482#issuecomment-1116744848",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482",
    "id": 1116744848,
    "node_id": "IC_kwDOGBlvNc5CkCyQ",
    "user": {
      "login": "lithp",
      "id": 466333,
      "node_id": "MDQ6VXNlcjQ2NjMzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lithp",
      "html_url": "https://github.com/lithp",
      "followers_url": "https://api.github.com/users/lithp/followers",
      "following_url": "https://api.github.com/users/lithp/following{/other_user}",
      "gists_url": "https://api.github.com/users/lithp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lithp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lithp/subscriptions",
      "organizations_url": "https://api.github.com/users/lithp/orgs",
      "repos_url": "https://api.github.com/users/lithp/repos",
      "events_url": "https://api.github.com/users/lithp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lithp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-03T23:13:29Z",
    "updated_at": "2022-05-03T23:13:55Z",
    "author_association": "NONE",
    "body": "You have got to be kidding me, [added 12 days ago](https://github.com/foundry-rs/foundry/commit/92427e73b75e41c50d1d0afef85ae32454cd1cfe), all I had to do was run `foundryup`!? ðŸ˜… \r\n\r\nI'll take a look at it and come back to this issue, thanks for the tip!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1116744848/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1118191640",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1482#issuecomment-1118191640",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1482",
    "id": 1118191640,
    "node_id": "IC_kwDOGBlvNc5CpkAY",
    "user": {
      "login": "lithp",
      "id": 466333,
      "node_id": "MDQ6VXNlcjQ2NjMzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lithp",
      "html_url": "https://github.com/lithp",
      "followers_url": "https://api.github.com/users/lithp/followers",
      "following_url": "https://api.github.com/users/lithp/following{/other_user}",
      "gists_url": "https://api.github.com/users/lithp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lithp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lithp/subscriptions",
      "organizations_url": "https://api.github.com/users/lithp/orgs",
      "repos_url": "https://api.github.com/users/lithp/repos",
      "events_url": "https://api.github.com/users/lithp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lithp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-05T05:49:18Z",
    "updated_at": "2022-05-05T05:49:18Z",
    "author_association": "NONE",
    "body": "Thanks again, closing this, I'll open a more targeted issue against cast!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1118191640/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

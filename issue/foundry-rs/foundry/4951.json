{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4951",
  "id": 1712032281,
  "node_id": "I_kwDOGBlvNc5mC4oZ",
  "number": 4951,
  "title": "feat(forge): enable console logging in invariant handlers",
  "user": {
    "login": "PaulRBerg",
    "id": 8782666,
    "node_id": "MDQ6VXNlcjg3ODI2NjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PaulRBerg",
    "html_url": "https://github.com/PaulRBerg",
    "followers_url": "https://api.github.com/users/PaulRBerg/followers",
    "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
    "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
    "repos_url": "https://api.github.com/users/PaulRBerg/repos",
    "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3394554570,
      "node_id": "LA_kwDOGBlvNc7KVMrK",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/A-fuzzing",
      "name": "A-fuzzing",
      "color": "FBCA04",
      "default": false,
      "description": "Area: fuzzing"
    },
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3593644915,
      "node_id": "LA_kwDOGBlvNc7WMqtz",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-test",
      "name": "Cmd-forge-test",
      "color": "006B75",
      "default": false,
      "description": "Command: forge test"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "Evalir",
    "id": 26014927,
    "node_id": "MDQ6VXNlcjI2MDE0OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Evalir",
    "html_url": "https://github.com/Evalir",
    "followers_url": "https://api.github.com/users/Evalir/followers",
    "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
    "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
    "organizations_url": "https://api.github.com/users/Evalir/orgs",
    "repos_url": "https://api.github.com/users/Evalir/repos",
    "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Evalir/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1",
    "html_url": "https://github.com/foundry-rs/foundry/milestone/1",
    "labels_url": "https://api.github.com/repos/foundry-rs/foundry/milestones/1/labels",
    "id": 8140456,
    "node_id": "MI_kwDOGBlvNc4AfDao",
    "number": 1,
    "title": "v1.0.0",
    "description": "",
    "creator": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 29,
    "closed_issues": 135,
    "state": "open",
    "created_at": "2022-06-28T08:15:32Z",
    "updated_at": "2023-07-27T14:12:29Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 12,
  "created_at": "2023-05-16T13:27:58Z",
  "updated_at": "2023-07-27T14:47:50Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nIt would be useful to be able to use `console2.log` in invariant handlers, e.g.\r\n\r\n```solidity\r\nfunction MyInvariantTest is StdInvariant {\r\n    Handler internal handler = new Handler();\r\n    function setUp() public virtual {\r\n        targetContract(address(handler));\r\n    }\r\n}\r\n\r\ncontract Handler {\r\n    function doSomething() external {\r\n        console2.log(\"Hello World\");\r\n    }\r\n}\r\n```\r\n\r\nThis code does not console log \"Hello World\" at the moment.\r\n\r\n### Additional context\r\n\r\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1553178558",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1553178558",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1553178558,
    "node_id": "IC_kwDOGBlvNc5ck5--",
    "user": {
      "login": "lucas-manuel",
      "id": 44272939,
      "node_id": "MDQ6VXNlcjQ0MjcyOTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44272939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucas-manuel",
      "html_url": "https://github.com/lucas-manuel",
      "followers_url": "https://api.github.com/users/lucas-manuel/followers",
      "following_url": "https://api.github.com/users/lucas-manuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucas-manuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucas-manuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucas-manuel/subscriptions",
      "organizations_url": "https://api.github.com/users/lucas-manuel/orgs",
      "repos_url": "https://api.github.com/users/lucas-manuel/repos",
      "events_url": "https://api.github.com/users/lucas-manuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucas-manuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-18T14:48:47Z",
    "updated_at": "2023-05-18T14:48:47Z",
    "author_association": "NONE",
    "body": "Agreed would like to see this as well.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1553178558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646076482",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646076482",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646076482,
    "node_id": "IC_kwDOGBlvNc5iHSJC",
    "user": {
      "login": "0xfarhaan",
      "id": 59924029,
      "node_id": "MDQ6VXNlcjU5OTI0MDI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/59924029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xfarhaan",
      "html_url": "https://github.com/0xfarhaan",
      "followers_url": "https://api.github.com/users/0xfarhaan/followers",
      "following_url": "https://api.github.com/users/0xfarhaan/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xfarhaan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xfarhaan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xfarhaan/subscriptions",
      "organizations_url": "https://api.github.com/users/0xfarhaan/orgs",
      "repos_url": "https://api.github.com/users/0xfarhaan/repos",
      "events_url": "https://api.github.com/users/0xfarhaan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xfarhaan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T18:15:14Z",
    "updated_at": "2023-07-21T18:15:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "+1 would like to see this",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646076482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646102572",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646102572",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646102572,
    "node_id": "IC_kwDOGBlvNc5iHYgs",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T18:41:32Z",
    "updated_at": "2023-07-21T18:41:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "As brainstormed in person with @gakonst and @lucas-manuel, what we actually want here might be a new cheat `vm.exit` which exits the invariant campaign and console logs the user-provided message.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646102572/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646112027",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646112027",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646112027,
    "node_id": "IC_kwDOGBlvNc5iHa0b",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T18:51:21Z",
    "updated_at": "2023-07-21T18:51:21Z",
    "author_association": "MEMBER",
    "body": "Would love to flesh this out a tad more @PaulRBerg 👀 ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646112027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646132356",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646132356",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646132356,
    "node_id": "IC_kwDOGBlvNc5iHfyE",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T19:06:20Z",
    "updated_at": "2023-07-21T19:06:20Z",
    "author_association": "COLLABORATOR",
    "body": "> As brainstormed in person with @gakonst and @lucas-manuel \r\n\r\nbig fomo inducing sentence 😭\r\n\r\n--- \r\n\r\nAlso curious to hear more though, I don't think I understand the use case or suggestion—why is exiting the campaign early preferable over a standard console log?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646132356/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 3,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646205430",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646205430",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646205430,
    "node_id": "IC_kwDOGBlvNc5iHxn2",
    "user": {
      "login": "lucas-manuel",
      "id": 44272939,
      "node_id": "MDQ6VXNlcjQ0MjcyOTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44272939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucas-manuel",
      "html_url": "https://github.com/lucas-manuel",
      "followers_url": "https://api.github.com/users/lucas-manuel/followers",
      "following_url": "https://api.github.com/users/lucas-manuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucas-manuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucas-manuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucas-manuel/subscriptions",
      "organizations_url": "https://api.github.com/users/lucas-manuel/orgs",
      "repos_url": "https://api.github.com/users/lucas-manuel/repos",
      "events_url": "https://api.github.com/users/lucas-manuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucas-manuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T20:27:37Z",
    "updated_at": "2023-07-21T20:27:37Z",
    "author_association": "NONE",
    "body": "From what I remember in the earlier discussions about adding logs to invariant tests was that it had a big effect on performance, we were trying to think of ways around this.\r\n\r\nIs there any way to isolate just console.log output rather than the whole stack trace?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646205430/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646212255",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646212255",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646212255,
    "node_id": "IC_kwDOGBlvNc5iHzSf",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T20:36:01Z",
    "updated_at": "2023-07-21T20:36:01Z",
    "author_association": "COLLABORATOR",
    "body": "@Evalir @gakonst Would replacing the console.log solidity library with native `vm.print` cheats help with performance? The assumption being that intercepting cheat calls is cheaper than tracing the console calls ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646212255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646222999",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1646222999",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1646222999,
    "node_id": "IC_kwDOGBlvNc5iH16X",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T20:49:24Z",
    "updated_at": "2023-07-21T20:49:24Z",
    "author_association": "MEMBER",
    "body": "i've been fiddling with this issue today and I've observed this—doing this the \"obvious\" way (just preserving logs and decoding them later) introduces a huge performance hit. I'm not super sure how a native cheatcode would look, as in the end we've got to recover the logs from the last call and decode them. I might need to think about this a tad more, but I feel that \"rerouting\" log output might require redesigning how we retrieve logs/traces a bit cc @mattsse ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1646222999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647604605",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1647604605",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1647604605,
    "node_id": "IC_kwDOGBlvNc5iNHN9",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T10:03:32Z",
    "updated_at": "2023-07-24T10:03:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Would love to flesh this out a tad more @PaulRBerg 👀\r\n\r\nThe problem with the standard calls in invariant campaigns is two-fold:\r\n\r\n1. They produce a bunch of logs, whereas the Foundry user might be interested to debug only the first run that reverts. The lack of corpus saving and replay (ref https://github.com/foundry-rs/foundry/issues/2552) is a related issue.\r\n2. Performance issues (as @lucas-manuel said). In Sablier, we tried to use something like Lucas' [`invariant_call_summary`](https://github.com/lucas-manuel/invariant-examples/blob/ecca083dbda5419c3a6c3d09555938350944ba82/test/WrappedTests.t.sol#L85), but the performance hit in CI was so significant that we removed quickly afterward.\r\n\r\nHowever, implementing `vm.exit` is not mutually exclusive with supporting standard logs in invariants. It's just another way of debugging invariants.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1647604605/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1648526933",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1648526933",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1648526933,
    "node_id": "IC_kwDOGBlvNc5iQoZV",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T20:02:04Z",
    "updated_at": "2023-07-24T20:02:04Z",
    "author_association": "COLLABORATOR",
    "body": ">  whereas the Foundry user might be interested to debug only the first run that reverts.\r\n\r\nHm isn't this how console logs currently work for fuzz tests though? They only show up for a single run—the last run if all runs pass, or the failed run if a run failed\r\n\r\nPerformance issues make sense, though I'm still not understanding the UX/naming of `vm.exit`. Can you provide an example of what usage would look like? Is it calling `vm.exit(string)`, logging the string, and then exiting \"something\"? Is that \"something\" the single run and continue to the next run, the individual test so it has no more runs, or the entire test suite?\r\n\r\nIf that's correct, presumably you'd also want https://github.com/foundry-rs/foundry/issues/2985 support?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1648526933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1650301389",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1650301389",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1650301389,
    "node_id": "IC_kwDOGBlvNc5iXZnN",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-25T18:04:41Z",
    "updated_at": "2023-07-25T18:05:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> isn't this how console logs currently work for fuzz tests though? They only show up for a single run — the last run if all runs pass, or the failed run if a run failed\r\n\r\nYou are right. The actual scenario I had in my head was this:\r\n\r\nYou bumped into a failing invariant that you no longer observe, and you want to console log some state in a particular handler function, or at a particular depth.\r\n\r\n> Is it calling vm.exit(string), logging the string, and then exiting \"something\"?\r\n\r\nYes\r\n\r\n> Is that \"something\" the single run and continue to the next run\r\n\r\nNo, the invariants campaign will not move to the next run. As I've said above, you would add this `vm.exit` in a particular handler function, and potentially within an if block.\r\n\r\n> you'd also want https://github.com/foundry-rs/foundry/issues/2985 support?\r\n\r\nAbsolutely",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1650301389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1653772977",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4951#issuecomment-1653772977",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4951",
    "id": 1653772977,
    "node_id": "IC_kwDOGBlvNc5ikpKx",
    "user": {
      "login": "lucas-manuel",
      "id": 44272939,
      "node_id": "MDQ6VXNlcjQ0MjcyOTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44272939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucas-manuel",
      "html_url": "https://github.com/lucas-manuel",
      "followers_url": "https://api.github.com/users/lucas-manuel/followers",
      "following_url": "https://api.github.com/users/lucas-manuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucas-manuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucas-manuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucas-manuel/subscriptions",
      "organizations_url": "https://api.github.com/users/lucas-manuel/orgs",
      "repos_url": "https://api.github.com/users/lucas-manuel/repos",
      "events_url": "https://api.github.com/users/lucas-manuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucas-manuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T14:47:50Z",
    "updated_at": "2023-07-27T14:47:50Z",
    "author_association": "NONE",
    "body": "> Hm isn't this how console logs currently work for fuzz tests though?\r\n\r\nForgive my lack of low-level understanding here haha but want to understand where the performance hit is coming from because yeah I think this is true^\r\n\r\nAren't invariants always run without logs and then in the case that they do fail they are re-run on the `run` that caused the failure? I understand with a large `depth` it would generate a large sequence of logs and maybe that's what it is. In this case, would setting verbosity to 2 help in any way with performance? Just so concole.log gets output?\r\n\r\nAlso @mds1 @Evalir is there an issue yet for outputting a seed that causes a `run` failure? It would be extremely useful to be able to debug with `runs = 1` with that specific failing seed getting passed in.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1653772977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

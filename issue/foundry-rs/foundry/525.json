{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/525",
  "id": 1109655668,
  "node_id": "I_kwDOGBlvNc5CJAB0",
  "number": 525,
  "title": "Add support for Apple Silicon",
  "user": {
    "login": "pmuens",
    "id": 1606004,
    "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pmuens",
    "html_url": "https://github.com/pmuens",
    "followers_url": "https://api.github.com/users/pmuens/followers",
    "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
    "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
    "organizations_url": "https://api.github.com/users/pmuens/orgs",
    "repos_url": "https://api.github.com/users/pmuens/repos",
    "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pmuens/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2022-01-20T18:55:09Z",
  "updated_at": "2022-06-22T10:41:11Z",
  "closed_at": "2022-02-09T10:50:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "First of all: Thanks everyone involved for creating `foundry`.\r\n\r\nThis might not be the correct repository but I thought that I'd post it regardless in case others stumble upon the same issue.\r\n\r\nWhen I clone, compile and run `foundry` on an M1 Mac I get the following error message when running `foundry build` in the example scaffold that is generated via `foundry init`:\r\n\r\n```\r\n[1] philipp@MacBook-Pro-14> forge build\r\ncompiling...\r\nError: \r\n   0: \"/Users/philipp/.svm/0.8.11/solc-0.8.11\": Bad CPU type in executable (os error 86)\r\n\r\nLocation:\r\n   cli/src/cmd/mod.rs:49\r\n```\r\n\r\nOverall it looks like svm doesn't support Apple Silicon binaries as of yet. I found the following issue in the `svm-rs` repo that might be related to the problem: https://github.com/roynalnaruto/svm-rs/issues/12",
  "closed_by": {
    "login": "gakonst",
    "id": 17802178,
    "node_id": "MDQ6VXNlcjE3ODAyMTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gakonst",
    "html_url": "https://github.com/gakonst",
    "followers_url": "https://api.github.com/users/gakonst/followers",
    "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
    "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
    "organizations_url": "https://api.github.com/users/gakonst/orgs",
    "repos_url": "https://api.github.com/users/gakonst/repos",
    "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gakonst/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/525/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1017859367",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1017859367",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1017859367,
    "node_id": "IC_kwDOGBlvNc48q00n",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T19:43:09Z",
    "updated_at": "2022-01-20T19:43:09Z",
    "author_association": "MEMBER",
    "body": "Do you get the same issue if you use `foundryup`?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1017859367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1017916498",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1017916498",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1017916498,
    "node_id": "IC_kwDOGBlvNc48rCxS",
    "user": {
      "login": "transmissions11",
      "id": 26209401,
      "node_id": "MDQ6VXNlcjI2MjA5NDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26209401?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/transmissions11",
      "html_url": "https://github.com/transmissions11",
      "followers_url": "https://api.github.com/users/transmissions11/followers",
      "following_url": "https://api.github.com/users/transmissions11/following{/other_user}",
      "gists_url": "https://api.github.com/users/transmissions11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/transmissions11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/transmissions11/subscriptions",
      "organizations_url": "https://api.github.com/users/transmissions11/orgs",
      "repos_url": "https://api.github.com/users/transmissions11/repos",
      "events_url": "https://api.github.com/users/transmissions11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/transmissions11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T20:50:39Z",
    "updated_at": "2022-01-20T20:50:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you ru the compilation of the foundry in a rosetta terminal? im on an m1 as well and it works fine for me in alacritty run in rosetta mode",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1017916498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018047699",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1018047699",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1018047699,
    "node_id": "IC_kwDOGBlvNc48rizT",
    "user": {
      "login": "devanoneth",
      "id": 89424366,
      "node_id": "MDQ6VXNlcjg5NDI0MzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/89424366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devanoneth",
      "html_url": "https://github.com/devanoneth",
      "followers_url": "https://api.github.com/users/devanoneth/followers",
      "following_url": "https://api.github.com/users/devanoneth/following{/other_user}",
      "gists_url": "https://api.github.com/users/devanoneth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devanoneth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devanoneth/subscriptions",
      "organizations_url": "https://api.github.com/users/devanoneth/orgs",
      "repos_url": "https://api.github.com/users/devanoneth/repos",
      "events_url": "https://api.github.com/users/devanoneth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devanoneth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T00:29:55Z",
    "updated_at": "2022-01-21T00:29:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hm, that's weird, I have compiled, installed and used the forge binaries fine on an M1 Mac. No need for rosetta either.\r\n\r\nI just checked and Activity Monitor also says it's running under \"Apple\" architecture.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018047699/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018088746",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1018088746",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1018088746,
    "node_id": "IC_kwDOGBlvNc48rs0q",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T01:50:46Z",
    "updated_at": "2022-01-21T01:50:53Z",
    "author_association": "MEMBER",
    "body": "Same for me, I'm on M1 w/o Rosetta and it works. @pmuens can you try nuking the `~/.svm` directory and trying again? cc @roynalnaruto ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018088746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018251568",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1018251568",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1018251568,
    "node_id": "IC_kwDOGBlvNc48sUkw",
    "user": {
      "login": "pmuens",
      "id": 1606004,
      "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmuens",
      "html_url": "https://github.com/pmuens",
      "followers_url": "https://api.github.com/users/pmuens/followers",
      "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
      "organizations_url": "https://api.github.com/users/pmuens/orgs",
      "repos_url": "https://api.github.com/users/pmuens/repos",
      "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmuens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T07:28:47Z",
    "updated_at": "2022-01-21T09:53:04Z",
    "author_association": "NONE",
    "body": "Thanks everyone for jumping in!\r\n\r\n> Same for me, I'm on M1 w/o Rosetta and it works. @pmuens can you try nuking the ~/.svm directory and trying again?\r\n\r\nJust ran an `rm -r ~/.svm` and `forge build` without any luck, unfortunately. It seems like the same binary is downloaded again:\r\n\r\n```\r\n-rwxrwxrwx  1 philipp  staff  38493496 Jan 21 08:08 /Users/philipp/.svm/0.8.11/solc-0.8.11\r\n```\r\n\r\n> Do you get the same issue if you use foundryup?\r\n\r\nI wrote a script inspired by `foundryup` which takes just the parts to build Foundry directly via a clone / pull from this git repo.\r\n\r\nMy directory structure is the following (the script posted below is the `foundry.sh` one). You'd run the script via `./scripts/foundry.sh` from the project's root directory.\r\n\r\n```\r\n|__contracts\r\n    |__lib\r\n    |__src\r\n        |__test\r\n|__scripts\r\n     |__foundry.sh\r\n|__frontend\r\n```\r\n\r\n```sh\r\n#!/usr/bin/env bash\r\nset -e\r\n\r\n# NOTE: This script is an adaption of https://tinyurl.com/yxefjez5\r\n\r\necho Installing Foundry...\r\n\r\n# Adaption of https://stackoverflow.com/a/246128\r\nSCRIPT_DIR=$( cd -- \"$( dirname -- \"${BASH_SOURCE[0]}\" )\" &> /dev/null && pwd )\r\n\r\nROOT_DIR=\"$SCRIPT_DIR/../contracts\"\r\nTMP_DIR=\"$ROOT_DIR/tmp\"\r\nBIN_DIR=\"$ROOT_DIR/bin\"\r\n\r\nmkdir -p $TMP_DIR\r\nmkdir -p $BIN_DIR\r\n\r\nwhile [[ $1 ]]; do\r\n  case $1 in\r\n    --)               shift; break;;\r\n    -r|--repo)        shift; REPO=$1;;\r\n    -b|--branch)      shift; BRANCH=$1;;\r\n    -v|--version)     shift; VERSION=$1;;\r\n    *) printf \"internal error: %q\\\\n\" \"$1\"; exit 1\r\n  esac; shift\r\ndone\r\n\r\nREPO=${REPO-gakonst/foundry}\r\nBRANCH=${BRANCH-master}\r\nVERSION=${VERSION-nightly}\r\n\r\nif ! command -v cargo &> /dev/null ; then\r\n  echo Cargo is not installed...\r\n  exit 1\r\nfi\r\n\r\nREPO_PATH=\"${TMP_DIR}/${REPO}\"\r\n\r\nif [ -d $REPO_PATH ]; then\r\n  cd $REPO_PATH\r\n  git pull\r\n  git checkout ${BRANCH}\r\n  git pull\r\nelse\r\n  IFS=\"/\" read -ra AUTHOR <<< \"$REPO\"\r\n  mkdir -p \"$TMP_DIR/$AUTHOR\"\r\n  cd \"$TMP_DIR/$AUTHOR\"\r\n  git clone https://github.com/${REPO}\r\n  cd $REPO_PATH\r\n  git checkout ${BRANCH}\r\nfi\r\n\r\necho \"nightly\" > \"$REPO_PATH/rust-toolchain\"\r\n\r\ncargo build --release --locked\r\n\r\ncp \"$REPO_PATH/target/release/forge\" \"$BIN_DIR/forge\"\r\ncp \"$REPO_PATH/target/release/cast\" \"$BIN_DIR/cast\"\r\n\r\nchmod +x \"$BIN_DIR/forge\"\r\nchmod +x \"$BIN_DIR/cast\"\r\n\r\necho Successfully installed Foundry...\r\n```\r\n\r\nI re-ran the script in an empty project structure again this morning. Unfortunately I get the same result.\r\n\r\nI'm using this script to have `forge` and `cast` accessible in a project directory w/o installing it globally just yet (I'd love to install Foundry binaries via Nix eventually as I'm using Nix as my main package manager).\r\n\r\nIdeally I'd also love to run Foundry \"natively\" without Rosetta ðŸ˜¬\r\n\r\nThanks again everyone for providing help here!\r\n\r\n---\r\n\r\n**Edit:** I also pulled the recent `foundry_nightly_darwin_arm64.tar.gz` release from https://github.com/gakonst/foundry/releases/tag/nightly and re-ran `forge build` via the `forge` binary from this nightly release. Still getting the same error (I also removed `~/.svm` before running it) ðŸ¤”\r\n\r\n**Edit 2:** The interesting part is that `svm-rs` seems to be lacking support for darwin-arm as per [this `enum`](https://github.com/roynalnaruto/svm-rs/blob/5518296f756458f878958a76b985b6fe423acad4/src/platform.rs#L5-L10)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018251568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018372151",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1018372151",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1018372151,
    "node_id": "IC_kwDOGBlvNc48syA3",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T10:20:22Z",
    "updated_at": "2022-01-21T10:20:22Z",
    "author_association": "MEMBER",
    "body": "> I'm using this script to have forge and cast accessible in a project directory w/o installing it globally just yet.\r\n\r\nCurious as to why you don't want to do a global install?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018372151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018390192",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1018390192",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1018390192,
    "node_id": "IC_kwDOGBlvNc48s2aw",
    "user": {
      "login": "pmuens",
      "id": 1606004,
      "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmuens",
      "html_url": "https://github.com/pmuens",
      "followers_url": "https://api.github.com/users/pmuens/followers",
      "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
      "organizations_url": "https://api.github.com/users/pmuens/orgs",
      "repos_url": "https://api.github.com/users/pmuens/repos",
      "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmuens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T10:42:35Z",
    "updated_at": "2022-01-21T10:42:35Z",
    "author_association": "NONE",
    "body": "> Curious as to why you don't want to do a global install?\r\n\r\nA couple of years ago I switched from Homebrew to Nix for macOS package management. It definitely comes with a steep learning curve and a lot of times you have to fiddle around with the system yourself but I just love how everything is in `/nix` and installing new packages doesn't \"pollute\" the system (except for the dotfiles the packages create themselves in `~`).\r\n\r\nI looked through `foundryup` which is a great script to install Foundry but ideally I'd love to have Nix manage this for me (I want to build my own little package for this but haven't found the time to do that yet).\r\n\r\nThe other beautiful thing about the binaries is that they're \"portable\" so you can just move them around on your filesystem.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1018390192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1019364242",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1019364242",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1019364242,
    "node_id": "IC_kwDOGBlvNc48wkOS",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-22T21:52:20Z",
    "updated_at": "2022-01-22T21:58:22Z",
    "author_association": "MEMBER",
    "body": "So it seems like this is not a Foundry issue, nor an svm-rs issue, but a Solidity issue. There are no released binaries for Silicon. So in order to fix this (without asking people to use Rosetta), we would need to:\r\n\r\n- Help get M1 binaries for the Solidity compiler ([repo](https://github.com/ethereum/solc-bin), seems to be tracked here https://github.com/ethereum/solidity/issues/12291)\r\n- Update svm-rs to support this new target ([repo](https://github.com/roynalnaruto/svm-rs))\r\n- Bump our svm-rs dependency",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1019364242/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1019424812",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1019424812",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1019424812,
    "node_id": "IC_kwDOGBlvNc48wzAs",
    "user": {
      "login": "bretth18",
      "id": 955730,
      "node_id": "MDQ6VXNlcjk1NTczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bretth18",
      "html_url": "https://github.com/bretth18",
      "followers_url": "https://api.github.com/users/bretth18/followers",
      "following_url": "https://api.github.com/users/bretth18/following{/other_user}",
      "gists_url": "https://api.github.com/users/bretth18/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bretth18/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bretth18/subscriptions",
      "organizations_url": "https://api.github.com/users/bretth18/orgs",
      "repos_url": "https://api.github.com/users/bretth18/repos",
      "events_url": "https://api.github.com/users/bretth18/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bretth18/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T06:31:36Z",
    "updated_at": "2022-01-23T06:31:36Z",
    "author_association": "NONE",
    "body": "not sure what happened but i'm also having the same issue here after updating foundry. previously I was able to run things fine with the `--no-auto-detect` flag. tried updating w/ `foundryup`, removed `/.svm` but it's still downloading it. no rosetta, on a m1. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1019424812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1020106666",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1020106666",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1020106666,
    "node_id": "IC_kwDOGBlvNc48zZeq",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T13:33:47Z",
    "updated_at": "2022-01-24T13:33:47Z",
    "author_association": "MEMBER",
    "body": "@bretth18 I think that the `--no-auto-detect` flag may no longer be respected for some reason, so this seems unrelated to apple silicon binaries during the autodetection step?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1020106666/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1024962669",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1024962669",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1024962669,
    "node_id": "IC_kwDOGBlvNc49F7Bt",
    "user": {
      "login": "pmuens",
      "id": 1606004,
      "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmuens",
      "html_url": "https://github.com/pmuens",
      "followers_url": "https://api.github.com/users/pmuens/followers",
      "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
      "organizations_url": "https://api.github.com/users/pmuens/orgs",
      "repos_url": "https://api.github.com/users/pmuens/repos",
      "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmuens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-29T18:25:29Z",
    "updated_at": "2022-01-29T21:30:14Z",
    "author_association": "NONE",
    "body": "For those of you who got `foundry` up- and running natively on an M1 (without rosetta), how did you do it?\r\n\r\nDid you just pull the binary release via https://github.com/gakonst/foundry/releases? Did you use `foundryup`? Or maybe built it yourself?\r\n\r\nI did another attempt at installing `foundry` on my MacBook today and ran into the same issue I described above. My plan right now is to build `solc` and then use the `--no-auto-detect` flag in combination with `$PATH` to point foundry to the arm build of `solc`.\r\n\r\nIf anybody has another workaround, I would really appreciate it if you could chime in. Thanks again for looking into this.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1024962669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025002465",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1025002465",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1025002465,
    "node_id": "IC_kwDOGBlvNc49GEvh",
    "user": {
      "login": "bretth18",
      "id": 955730,
      "node_id": "MDQ6VXNlcjk1NTczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bretth18",
      "html_url": "https://github.com/bretth18",
      "followers_url": "https://api.github.com/users/bretth18/followers",
      "following_url": "https://api.github.com/users/bretth18/following{/other_user}",
      "gists_url": "https://api.github.com/users/bretth18/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bretth18/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bretth18/subscriptions",
      "organizations_url": "https://api.github.com/users/bretth18/orgs",
      "repos_url": "https://api.github.com/users/bretth18/repos",
      "events_url": "https://api.github.com/users/bretth18/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bretth18/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-29T22:58:14Z",
    "updated_at": "2022-01-29T22:58:14Z",
    "author_association": "NONE",
    "body": "> For those of you who got `foundry` up- and running natively on an M1 (without rosetta), how did you do it?\r\n> \r\n> Did you just pull the binary release via https://github.com/gakonst/foundry/releases? Did you use `foundryup`? Or maybe built it yourself?\r\n> \r\n> I did another attempt at installing `foundry` on my MacBook today and ran into the same issue I described above. My plan right now is to build `solc` and then use the `--no-auto-detect` flag in combination with `$PATH` to point foundry to the arm build of `solc`.\r\n> \r\n> If anybody has another workaround, I would really appreciate it if you could chime in. Thanks again for looking into this.\r\n\r\nhey, i was able to get everything working after realizing i wasn't using a `foundry.toml` config file. setting `auto_detect_solc = false` and have setup my `SOLC_PATH` to my arm build of `solc`. i've been using `foundryup` w/o problems. hope this helps!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025002465/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025169619",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1025169619",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1025169619,
    "node_id": "IC_kwDOGBlvNc49GtjT",
    "user": {
      "login": "pmuens",
      "id": 1606004,
      "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmuens",
      "html_url": "https://github.com/pmuens",
      "followers_url": "https://api.github.com/users/pmuens/followers",
      "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
      "organizations_url": "https://api.github.com/users/pmuens/orgs",
      "repos_url": "https://api.github.com/users/pmuens/repos",
      "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmuens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-30T15:39:07Z",
    "updated_at": "2022-01-30T15:39:07Z",
    "author_association": "NONE",
    "body": "> hey, i was able to get everything working after realizing i wasn't using a foundry.toml config file. setting auto_detect_solc = false and have setup my SOLC_PATH to my arm build of solc. i've been using foundryup w/o problems. hope this helps!\r\n\r\nThat's great. Thanks for getting back and providing useful insights here :+1:\r\n\r\nJust out of curiosity: which `solc` arm build are you using? I tried to compile `solc` myself yesterday but ran into a bunch of compiler errors ðŸ¤”",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025169619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025223445",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1025223445",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1025223445,
    "node_id": "IC_kwDOGBlvNc49G6sV",
    "user": {
      "login": "bretth18",
      "id": 955730,
      "node_id": "MDQ6VXNlcjk1NTczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bretth18",
      "html_url": "https://github.com/bretth18",
      "followers_url": "https://api.github.com/users/bretth18/followers",
      "following_url": "https://api.github.com/users/bretth18/following{/other_user}",
      "gists_url": "https://api.github.com/users/bretth18/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bretth18/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bretth18/subscriptions",
      "organizations_url": "https://api.github.com/users/bretth18/orgs",
      "repos_url": "https://api.github.com/users/bretth18/repos",
      "events_url": "https://api.github.com/users/bretth18/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bretth18/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-30T20:25:04Z",
    "updated_at": "2022-01-30T20:25:04Z",
    "author_association": "NONE",
    "body": "> > hey, i was able to get everything working after realizing i wasn't using a foundry.toml config file. setting auto_detect_solc = false and have setup my SOLC_PATH to my arm build of solc. i've been using foundryup w/o problems. hope this helps!\r\n> \r\n> That's great. Thanks for getting back and providing useful insights here ðŸ‘\r\n> \r\n> Just out of curiosity: which `solc` arm build are you using? I tried to compile `solc` myself yesterday but ran into a bunch of compiler errors ðŸ¤”\r\n\r\ni've been using homebrew without problems: https://formulae.brew.sh/formula/solidity\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1025223445/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1032878489",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1032878489",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1032878489,
    "node_id": "IC_kwDOGBlvNc49kHmZ",
    "user": {
      "login": "jrhe",
      "id": 4038905,
      "node_id": "MDQ6VXNlcjQwMzg5MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4038905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrhe",
      "html_url": "https://github.com/jrhe",
      "followers_url": "https://api.github.com/users/jrhe/followers",
      "following_url": "https://api.github.com/users/jrhe/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrhe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrhe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrhe/subscriptions",
      "organizations_url": "https://api.github.com/users/jrhe/orgs",
      "repos_url": "https://api.github.com/users/jrhe/repos",
      "events_url": "https://api.github.com/users/jrhe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrhe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-08T17:33:38Z",
    "updated_at": "2022-02-08T17:33:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Everything worked as expected for me on a fresh M1 mac using Homebrew's solidity bottle and foundryup. i.e.\r\n```\r\nbrew install solidity\r\ncurl -L https://foundry.paradigm.xyz | bash\r\nsource ~/.zshrc\r\nfoundryup\r\n```\r\n\r\n@pmuens brew is using 0.8.11 - commit d7f03943. Managed to get it to build with the following:\r\n```\r\ncmake . -DCMAKE_INSTALL_PREFIX=testbin -DCMAKE_INSTALL_LIBDIR=lib -DCMAKE_BUILD_TYPE=Release -DCMAKE_FIND_FRAMEWORK=LAST -DCMAKE_VERBOSE_MAKEFILE=ON -Wno-dev -DBUILD_TESTING=OFF -DCMAKE_OSX_SYSROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX12.sdk -DTESTS=OFF -DSTRICT_Z3_VERSION=OFFls\r\nmake\r\nmake install\r\n```\r\n\r\nAlready had the dependencies installed from brew - needs boost and z3.\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1032878489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1162938288",
    "html_url": "https://github.com/foundry-rs/foundry/issues/525#issuecomment-1162938288",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/525",
    "id": 1162938288,
    "node_id": "IC_kwDOGBlvNc5FUQew",
    "user": {
      "login": "pmuens",
      "id": 1606004,
      "node_id": "MDQ6VXNlcjE2MDYwMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmuens",
      "html_url": "https://github.com/pmuens",
      "followers_url": "https://api.github.com/users/pmuens/followers",
      "following_url": "https://api.github.com/users/pmuens/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmuens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmuens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmuens/subscriptions",
      "organizations_url": "https://api.github.com/users/pmuens/orgs",
      "repos_url": "https://api.github.com/users/pmuens/repos",
      "events_url": "https://api.github.com/users/pmuens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmuens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-22T10:41:11Z",
    "updated_at": "2022-06-22T10:41:11Z",
    "author_association": "NONE",
    "body": "FYI can confirm that the latest version works like a charm. Thanks a lot for fixing this ðŸ‘Œ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1162938288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

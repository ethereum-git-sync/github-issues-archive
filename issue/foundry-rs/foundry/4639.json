{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4639",
  "id": 1640140834,
  "node_id": "I_kwDOGBlvNc5hwpAi",
  "number": 4639,
  "title": "String error code, but data can't be decoded as bytes: DecodingError(InvalidData)",
  "user": {
    "login": "karmacoma-eth",
    "id": 85039585,
    "node_id": "MDQ6VXNlcjg1MDM5NTg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/85039585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karmacoma-eth",
    "html_url": "https://github.com/karmacoma-eth",
    "followers_url": "https://api.github.com/users/karmacoma-eth/followers",
    "following_url": "https://api.github.com/users/karmacoma-eth/following{/other_user}",
    "gists_url": "https://api.github.com/users/karmacoma-eth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karmacoma-eth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karmacoma-eth/subscriptions",
    "organizations_url": "https://api.github.com/users/karmacoma-eth/orgs",
    "repos_url": "https://api.github.com/users/karmacoma-eth/repos",
    "events_url": "https://api.github.com/users/karmacoma-eth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karmacoma-eth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-03-24T22:38:06Z",
  "updated_at": "2023-03-24T22:40:50Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (f2d0d83 2023-03-24T21:51:43.362828Z)\n\n### What command(s) is the bug in?\n\nforge test\n\n### Operating System\n\nmacOS (Intel)\n\n### Describe the bug\n\n- check out [this PR](https://github.com/showtime-xyz/SS2ERC721/pull/13)\r\n- run `RUST_BACKTRACE=full forge test --match test_mint_unsortedAddresses_reverts`\r\n\r\n```\r\n[⠑] Compiling...\r\nNo files changed, compilation skipped\r\nThe application panicked (crashed).\r\nMessage:  String error code, but data can't be decoded as bytes: DecodingError(InvalidData)\r\nLocation: evm/src/executor/inspector/cheatcodes/expect.rs:109\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\n  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\r\n                                ⋮ 13 frames hidden ⋮                              \r\n  14: core::result::Result<T,E>::expect::he0b104188fb8671c\r\n      at <unknown source file>:<unknown line>\r\n  15: foundry_evm::executor::inspector::cheatcodes::expect::handle_expect_revert::h73027d1adb592e06\r\n      at <unknown source file>:<unknown line>\r\n  16: <foundry_evm::executor::inspector::cheatcodes::Cheatcodes as revm::inspector::Inspector<DB>>::call_end::hf186f4a256a342d4\r\n      at <unknown source file>:<unknown line>\r\n  17: foundry_evm::executor::inspector::stack::InspectorStack::do_call_end::h15bfd140512ef3d7\r\n      at <unknown source file>:<unknown line>\r\n  18: <foundry_evm::executor::inspector::stack::InspectorStack as revm::inspector::Inspector<DB>>::call_end::h6d6901286c524721\r\n      at <unknown source file>:<unknown line>\r\n  19: <&mut T as revm::inspector::Inspector<DB>>::call_end::h74d310490befec71\r\n      at <unknown source file>:<unknown line>\r\n  20: revm::evm_impl::EVMImpl<GSPEC,DB,_>::call_inner::hd2102ee76bbbc6dc\r\n      at <unknown source file>:<unknown line>\r\n  21: <revm::evm_impl::EVMImpl<GSPEC,DB,_> as revm::evm_impl::Host>::call::hcfe0bc223ec24dee\r\n      at <unknown source file>:<unknown line>\r\n  22: revm::instructions::host::call::h136062a069100499\r\n      at <unknown source file>:<unknown line>\r\n  23: revm::interpreter::Interpreter::run::hf7e76a195ee2b66a\r\n      at <unknown source file>:<unknown line>\r\n  24: revm::evm_impl::EVMImpl<GSPEC,DB,_>::call_inner::hd2102ee76bbbc6dc\r\n      at <unknown source file>:<unknown line>\r\n  25: <revm::evm_impl::EVMImpl<GSPEC,DB,_> as revm::evm_impl::Transact>::transact::h39826c4106b59cf0\r\n      at <unknown source file>:<unknown line>\r\n  26: foundry_evm::executor::backend::Backend::inspect_ref::h62e2984a5c3ed75e\r\n      at <unknown source file>:<unknown line>\r\n  27: foundry_evm::executor::Executor::call_raw_with_env::hb06d350f509b242a\r\n      at <unknown source file>:<unknown line>\r\n  28: foundry_evm::executor::Executor::execute_test::hf60ee3720f84031c\r\n      at <unknown source file>:<unknown line>\r\n  29: forge::runner::ContractRunner::run_test::h5e30ad8643c270f8\r\n      at <unknown source file>:<unknown line>\r\n  30: forge::runner::ContractRunner::run_tests::{{closure}}::he653a45d3b624e77\r\n      at <unknown source file>:<unknown line>\r\n  31: <rayon::iter::flat_map::FlatMapFolder<C,F,<C as rayon::iter::plumbing::Consumer<<U as rayon::iter::IntoParallelIterator>::Item>>::Result> as rayon::iter::plumbing::Folder<T>>::consume::hf1457544cd605ae5\r\n      at <unknown source file>:<unknown line>\r\n  32: rayon::iter::plumbing::Folder::consume_iter::h998b7777e2c837f2\r\n      at <unknown source file>:<unknown line>\r\n  33: rayon::iter::plumbing::Producer::fold_with::h012078c8a93867bd\r\n      at <unknown source file>:<unknown line>\r\n  34: rayon::iter::plumbing::bridge_producer_consumer::helper::hd4c12c77142d004e\r\n      at <unknown source file>:<unknown line>\r\n  35: rayon::iter::plumbing::bridge_producer_consumer::h1a237239bc772cc8\r\n      at <unknown source file>:<unknown line>\r\n  36: <rayon::iter::plumbing::bridge::Callback<C> as rayon::iter::plumbing::ProducerCallback<I>>::callback::h6b7fa77f150b5f83\r\n      at <unknown source file>:<unknown line>\r\n  37: <rayon::slice::Iter<T> as rayon::iter::IndexedParallelIterator>::with_producer::h3a58b0bb92b30864\r\n      at <unknown source file>:<unknown line>\r\n  38: rayon::iter::plumbing::bridge::h17124ca9abb1677d\r\n      at <unknown source file>:<unknown line>\r\n  39: <rayon::slice::Iter<T> as rayon::iter::ParallelIterator>::drive_unindexed::hac83f564a3bb2b1e\r\n      at <unknown source file>:<unknown line>\r\n  40: <rayon::iter::flat_map::FlatMap<I,F> as rayon::iter::ParallelIterator>::drive_unindexed::hcb65ab3c6d3b294c\r\n      at <unknown source file>:<unknown line>\r\n  41: <rayon::iter::map::Map<I,F> as rayon::iter::ParallelIterator>::drive_unindexed::haf89c89ff121058c\r\n      at <unknown source file>:<unknown line>\r\n  42: <rayon::iter::while_some::WhileSome<I> as rayon::iter::ParallelIterator>::drive_unindexed::hf88c22edea9c203c\r\n      at <unknown source file>:<unknown line>\r\n  43: rayon::iter::extend::<impl rayon::iter::ParallelExtend<(K,V)> for alloc::collections::btree::map::BTreeMap<K,V>>::par_extend::h2bb80b52a7ec3ae4\r\n      at <unknown source file>:<unknown line>\r\n  44: rayon::iter::from_par_iter::collect_extended::h627b76907304c439\r\n      at <unknown source file>:<unknown line>\r\n  45: rayon::iter::from_par_iter::<impl rayon::iter::FromParallelIterator<(K,V)> for alloc::collections::btree::map::BTreeMap<K,V>>::from_par_iter::h988837292e97c2fd\r\n      at <unknown source file>:<unknown line>\r\n  46: rayon::iter::ParallelIterator::collect::h417a380fb0759719\r\n      at <unknown source file>:<unknown line>\r\n  47: rayon::result::<impl rayon::iter::FromParallelIterator<core::result::Result<T,E>> for core::result::Result<C,E>>::from_par_iter::h8fb9e0c7f2058e98\r\n      at <unknown source file>:<unknown line>\r\n  48: rayon::iter::ParallelIterator::collect::hb128446a6464bec0\r\n      at <unknown source file>:<unknown line>\r\n  49: forge::runner::ContractRunner::run_tests::ha1b23c17143fee32\r\n      at <unknown source file>:<unknown line>\r\n  50: forge::multi_runner::MultiContractRunner::run_tests::{{closure}}::hab76a5fc20e431ba\r\n      at <unknown source file>:<unknown line>\r\n  51: forge::multi_runner::MultiContractRunner::run_tests::hf928b959e3dfa158\r\n      at <unknown source file>:<unknown line>\r\n  52: forge::multi_runner::MultiContractRunner::test::{{closure}}::ha705ca9691bea13c\r\n      at <unknown source file>:<unknown line>\r\n  53: <rayon::iter::map::MapFolder<C,F> as rayon::iter::plumbing::Folder<T>>::consume::h2a596980f696ce92\r\n      at <unknown source file>:<unknown line>\r\n  54: <rayon::iter::filter::FilterFolder<C,P> as rayon::iter::plumbing::Folder<T>>::consume::hecf95d92fdec7578\r\n      at <unknown source file>:<unknown line>\r\n  55: <rayon::iter::filter::FilterFolder<C,P> as rayon::iter::plumbing::Folder<T>>::consume::hb541229134f21446\r\n      at <unknown source file>:<unknown line>\r\n  56: rayon::iter::plumbing::Folder::consume_iter::hf6e047e1b128a868\r\n      at <unknown source file>:<unknown line>\r\n  57: rayon::iter::plumbing::Producer::fold_with::h7363dfa2b5e8b540\r\n      at <unknown source file>:<unknown line>\r\n  58: rayon::iter::plumbing::bridge_producer_consumer::helper::h9bf2e4ae19aabea5\r\n      at <unknown source file>:<unknown line>\r\n  59: rayon::iter::plumbing::bridge_producer_consumer::helper::{{closure}}::h60dc295483a9f666\r\n      at <unknown source file>:<unknown line>\r\n  60: rayon_core::join::join_context::call_b::{{closure}}::hd26361c63f717b7b\r\n      at <unknown source file>:<unknown line>\r\n  61: rayon_core::job::JobResult<T>::call::{{closure}}::hd2e21c220e0b34d5\r\n      at <unknown source file>:<unknown line>\r\n  62: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h6ec60c858a647c02\r\n      at <unknown source file>:<unknown line>\r\n  63: std::panicking::try::do_call::h732bf7a0bb3e06d8\r\n      at <unknown source file>:<unknown line>\r\n  64: ___rust_try<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  65: std::panicking::try::he82310d669777b32\r\n      at <unknown source file>:<unknown line>\r\n  66: std::panic::catch_unwind::h3df9122675f751f7\r\n      at <unknown source file>:<unknown line>\r\n  67: rayon_core::unwind::halt_unwinding::h6824ab42aa737905\r\n      at <unknown source file>:<unknown line>\r\n  68: rayon_core::job::JobResult<T>::call::hcb04c134aa8911e8\r\n      at <unknown source file>:<unknown line>\r\n  69: <rayon_core::job::StackJob<L,F,R> as rayon_core::job::Job>::execute::h8a8f8eab29ffd628\r\n      at <unknown source file>:<unknown line>\r\n  70: rayon_core::job::JobRef::execute::h0a01d90e9e32fcd2\r\n      at <unknown source file>:<unknown line>\r\n  71: rayon_core::registry::WorkerThread::execute::he4df08e38a4ae524\r\n      at <unknown source file>:<unknown line>\r\n  72: rayon_core::registry::WorkerThread::wait_until_cold::hdf5f6fb72b023d60\r\n      at <unknown source file>:<unknown line>\r\n  73: rayon_core::registry::WorkerThread::wait_until::ha034ddba973ea065\r\n      at <unknown source file>:<unknown line>\r\n  74: rayon_core::registry::main_loop::ha7ef7640fdb13deb\r\n      at <unknown source file>:<unknown line>\r\n  75: rayon_core::registry::ThreadBuilder::run::hc3f8469d117c4811\r\n      at <unknown source file>:<unknown line>\r\n  76: <rayon_core::registry::DefaultSpawn as rayon_core::registry::ThreadSpawn>::spawn::{{closure}}::h76e8ad2cebb612b4\r\n      at <unknown source file>:<unknown line>\r\n  77: std::sys_common::backtrace::__rust_begin_short_backtrace::h7d47433eacd28c20\r\n      at <unknown source file>:<unknown line>\r\n  78: std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::h81c7c026d0cdca25\r\n      at <unknown source file>:<unknown line>\r\n  79: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::hb2b3cd4825b35d3e\r\n      at <unknown source file>:<unknown line>\r\n  80: std::panicking::try::do_call::hb7fd42016faa3ce1\r\n      at <unknown source file>:<unknown line>\r\n  81: ___rust_try<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  82: std::panicking::try::h3d43ecc650c553ef\r\n      at <unknown source file>:<unknown line>\r\n  83: std::panic::catch_unwind::h60dc47297ac1ce45\r\n      at <unknown source file>:<unknown line>\r\n  84: std::thread::Builder::spawn_unchecked_::{{closure}}::h8cadb59f535f64e8\r\n      at <unknown source file>:<unknown line>\r\n  85: core::ops::function::FnOnce::call_once{{vtable.shim}}::h95b2bd5647f3491b\r\n      at <unknown source file>:<unknown line>\r\n  86: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h29c40c4b4d757fec\r\n      at /rustc/900c3540378c8422b8087ffa3db60fa6c8abfcad/library/alloc/src/boxed.rs:1987\r\n  87: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hb8c24afeaacfe6bd\r\n      at /rustc/900c3540378c8422b8087ffa3db60fa6c8abfcad/library/alloc/src/boxed.rs:1987\r\n  88: std::sys::unix::thread::Thread::new::thread_start::habe434f21f22795f\r\n      at /rustc/900c3540378c8422b8087ffa3db60fa6c8abfcad/library/std/src/sys/unix/thread.rs:108\r\n  89: __pthread_start<unknown>\r\n      at <unknown source file>:<unknown line>\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1483525123",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4639#issuecomment-1483525123",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4639",
    "id": 1483525123,
    "node_id": "IC_kwDOGBlvNc5YbMwD",
    "user": {
      "login": "karmacoma-eth",
      "id": 85039585,
      "node_id": "MDQ6VXNlcjg1MDM5NTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85039585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karmacoma-eth",
      "html_url": "https://github.com/karmacoma-eth",
      "followers_url": "https://api.github.com/users/karmacoma-eth/followers",
      "following_url": "https://api.github.com/users/karmacoma-eth/following{/other_user}",
      "gists_url": "https://api.github.com/users/karmacoma-eth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karmacoma-eth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karmacoma-eth/subscriptions",
      "organizations_url": "https://api.github.com/users/karmacoma-eth/orgs",
      "repos_url": "https://api.github.com/users/karmacoma-eth/repos",
      "events_url": "https://api.github.com/users/karmacoma-eth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karmacoma-eth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-24T22:40:50Z",
    "updated_at": "2023-03-24T22:40:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I guess there's something wrong with the error encoding, but the forge error makes it very hard to debug.\r\n\r\nAdditional data:\r\n- this reproduces every time\r\n- I get the same error if I comment out `vm.expectRevert(\"ADDRESSES_NOT_SORTED\");`\r\n- I get the same error if I try to run `forge test --debug test_mint_unsortedAddresses_reverts`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1483525123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

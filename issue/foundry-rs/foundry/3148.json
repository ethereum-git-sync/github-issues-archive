{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3148",
  "id": 1368040513,
  "node_id": "I_kwDOGBlvNc5RiqRB",
  "number": 3148,
  "title": "[forge install] - install does not function the same as dapp install",
  "user": {
    "login": "The-Arbiter",
    "id": 103920908,
    "node_id": "U_kgDOBjG1DA",
    "avatar_url": "https://avatars.githubusercontent.com/u/103920908?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/The-Arbiter",
    "html_url": "https://github.com/The-Arbiter",
    "followers_url": "https://api.github.com/users/The-Arbiter/followers",
    "following_url": "https://api.github.com/users/The-Arbiter/following{/other_user}",
    "gists_url": "https://api.github.com/users/The-Arbiter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/The-Arbiter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/The-Arbiter/subscriptions",
    "organizations_url": "https://api.github.com/users/The-Arbiter/orgs",
    "repos_url": "https://api.github.com/users/The-Arbiter/repos",
    "events_url": "https://api.github.com/users/The-Arbiter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/The-Arbiter/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-09-09T16:12:12Z",
  "updated_at": "2022-10-19T21:10:17Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (fb78b6b 2022-09-07T00:04:15.763953Z)\n\n### What command(s) is the bug in?\n\nforge install\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nAs mentioned on Foundry Telegram Support.\r\n\r\nforge install does not do the same thing as dapp install, some library bits are out of sync with the desired commit.\r\n\r\nFor now, our fix is using 'git submodule update --init --recursive' rather than `forge install`. \r\n\r\nPinging @godsflaw for transparency.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242184051",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1242184051",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1242184051,
    "node_id": "IC_kwDOGBlvNc5KCjlz",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T16:20:21Z",
    "updated_at": "2022-09-09T16:20:54Z",
    "author_association": "MEMBER",
    "body": "> forge install does not do the same thing as dapp install, some library bits are out of sync with the desired commit.\r\n\r\ncould you please elaborate on this\r\nwhat are the differences?\r\n\r\n> some library bits are out of sync with the desired commit.\r\n\r\nwhat does that mean exactly? does forge pin a different commit than dapp by default if no `tag` is provided in `forge install org/repo@tag`?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242184051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242204927",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1242204927",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1242204927,
    "node_id": "IC_kwDOGBlvNc5KCor_",
    "user": {
      "login": "The-Arbiter",
      "id": 103920908,
      "node_id": "U_kgDOBjG1DA",
      "avatar_url": "https://avatars.githubusercontent.com/u/103920908?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/The-Arbiter",
      "html_url": "https://github.com/The-Arbiter",
      "followers_url": "https://api.github.com/users/The-Arbiter/followers",
      "following_url": "https://api.github.com/users/The-Arbiter/following{/other_user}",
      "gists_url": "https://api.github.com/users/The-Arbiter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/The-Arbiter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/The-Arbiter/subscriptions",
      "organizations_url": "https://api.github.com/users/The-Arbiter/orgs",
      "repos_url": "https://api.github.com/users/The-Arbiter/repos",
      "events_url": "https://api.github.com/users/The-Arbiter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/The-Arbiter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T16:37:25Z",
    "updated_at": "2022-09-09T16:37:25Z",
    "author_association": "NONE",
    "body": "@godsflaw to the rescue here for specifics when he has a minute (rare).\r\n\r\nOn my machine it had dss-exec-lib out of sync (it seems to have been using an older commit).",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242204927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242234344",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1242234344",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1242234344,
    "node_id": "IC_kwDOGBlvNc5KCv3o",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T17:06:56Z",
    "updated_at": "2022-09-09T17:06:56Z",
    "author_association": "MEMBER",
    "body": "after running `forge install makerdao/dss-exec-lib` I assume?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242234344/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242252682",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1242252682",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1242252682,
    "node_id": "IC_kwDOGBlvNc5KC0WK",
    "user": {
      "login": "The-Arbiter",
      "id": 103920908,
      "node_id": "U_kgDOBjG1DA",
      "avatar_url": "https://avatars.githubusercontent.com/u/103920908?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/The-Arbiter",
      "html_url": "https://github.com/The-Arbiter",
      "followers_url": "https://api.github.com/users/The-Arbiter/followers",
      "following_url": "https://api.github.com/users/The-Arbiter/following{/other_user}",
      "gists_url": "https://api.github.com/users/The-Arbiter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/The-Arbiter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/The-Arbiter/subscriptions",
      "organizations_url": "https://api.github.com/users/The-Arbiter/orgs",
      "repos_url": "https://api.github.com/users/The-Arbiter/repos",
      "events_url": "https://api.github.com/users/The-Arbiter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/The-Arbiter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T17:21:26Z",
    "updated_at": "2022-09-09T17:21:26Z",
    "author_association": "NONE",
    "body": "`git clone {repo}`\r\n`git pull`\r\n`git checkout {branch}`\r\n`forge install` <--- Here is where we use `git submodule update --init --recursive` instead\r\n`make test-forge`\r\n\r\nThere are four dependencies which turns into dependency hell as you'd imagine.\r\n\r\nHere are the four which are being used and their commit hashes.\r\n\r\n<img width=\"1207\" alt=\"Deps\" src=\"https://user-images.githubusercontent.com/103920908/189408384-b8ccb958-819b-453e-a223-fdbeb8465ada.png\">\r\n\r\n[Here is a link to the dependencies](https://github.com/makerdao/spells-goerli/tree/PE-1073/lib)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1242252682/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243956880",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1243956880",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1243956880,
    "node_id": "IC_kwDOGBlvNc5KJUaQ",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T16:03:22Z",
    "updated_at": "2022-09-12T16:03:43Z",
    "author_association": "MEMBER",
    "body": "hmm\r\n\r\n`forge install` does\r\n\r\n1. add/clone the new submodule\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/63c71b4f3e162c5ab7da696b865a74ba8eda80c1/cli/src/cmd/forge/install.rs#L252-L255\r\n\r\n2. run `git submodule update --init --recursive`\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/63c71b4f3e162c5ab7da696b865a74ba8eda80c1/cli/src/cmd/forge/install.rs#L279-L282\r\n\r\nand also `git submodule update --init --recursive` if only `forge install` is run:\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/63c71b4f3e162c5ab7da696b865a74ba8eda80c1/cli/src/cmd/forge/install.rs#L92-L102\r\n\r\nso unsure what we're missing",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243956880/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243976816",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1243976816",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1243976816,
    "node_id": "IC_kwDOGBlvNc5KJZRw",
    "user": {
      "login": "The-Arbiter",
      "id": 103920908,
      "node_id": "U_kgDOBjG1DA",
      "avatar_url": "https://avatars.githubusercontent.com/u/103920908?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/The-Arbiter",
      "html_url": "https://github.com/The-Arbiter",
      "followers_url": "https://api.github.com/users/The-Arbiter/followers",
      "following_url": "https://api.github.com/users/The-Arbiter/following{/other_user}",
      "gists_url": "https://api.github.com/users/The-Arbiter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/The-Arbiter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/The-Arbiter/subscriptions",
      "organizations_url": "https://api.github.com/users/The-Arbiter/orgs",
      "repos_url": "https://api.github.com/users/The-Arbiter/repos",
      "events_url": "https://api.github.com/users/The-Arbiter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/The-Arbiter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-12T16:18:20Z",
    "updated_at": "2022-09-12T16:18:20Z",
    "author_association": "NONE",
    "body": "hmmm, may be more of a linking issue on compile. Will dig a bit deeper after merge week and get back to you since moving over to foundry is the goal :) you can close the issue for now if you want to.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1243976816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1284577918",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3148#issuecomment-1284577918",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3148",
    "id": 1284577918,
    "node_id": "IC_kwDOGBlvNc5MkRp-",
    "user": {
      "login": "brianmcmichael",
      "id": 2374718,
      "node_id": "MDQ6VXNlcjIzNzQ3MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2374718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brianmcmichael",
      "html_url": "https://github.com/brianmcmichael",
      "followers_url": "https://api.github.com/users/brianmcmichael/followers",
      "following_url": "https://api.github.com/users/brianmcmichael/following{/other_user}",
      "gists_url": "https://api.github.com/users/brianmcmichael/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brianmcmichael/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brianmcmichael/subscriptions",
      "organizations_url": "https://api.github.com/users/brianmcmichael/orgs",
      "repos_url": "https://api.github.com/users/brianmcmichael/repos",
      "events_url": "https://api.github.com/users/brianmcmichael/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brianmcmichael/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-19T21:10:17Z",
    "updated_at": "2022-10-19T21:10:17Z",
    "author_association": "NONE",
    "body": "Unrelated, but I found this topic when searching.\r\n\r\nboth `dapp update` and `dapp install` were chattier and would display exactly what was happening under the hood. Forge operates silently, so it's hard to know what's happening. It's be nice to know which submodules were being updated when the command is run.\r\n\r\nWith regard to this issue in particular, I think the old workflow was:\r\n\r\n`dapp install [module]` to add a new submodule\r\n\r\n`dapp update` after clone to perform a recursive submodule download (forge does not download submodules recursively with `forge update`, but instead does it with `forge install`)\r\n\r\n`dapp upgrade` to upgrade all submodules to latest\r\n\r\n`dapp upgrade [module]` to upgrade a single submodule to latest\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1284577918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/6018",
  "id": 1934956947,
  "node_id": "I_kwDOGBlvNc5zVRmT",
  "number": 6018,
  "title": "`anvil_reset` does not work without forking",
  "user": {
    "login": "MOZGIII",
    "id": 265507,
    "node_id": "MDQ6VXNlcjI2NTUwNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/265507?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MOZGIII",
    "html_url": "https://github.com/MOZGIII",
    "followers_url": "https://api.github.com/users/MOZGIII/followers",
    "following_url": "https://api.github.com/users/MOZGIII/following{/other_user}",
    "gists_url": "https://api.github.com/users/MOZGIII/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MOZGIII/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MOZGIII/subscriptions",
    "organizations_url": "https://api.github.com/users/MOZGIII/orgs",
    "repos_url": "https://api.github.com/users/MOZGIII/repos",
    "events_url": "https://api.github.com/users/MOZGIII/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MOZGIII/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-10T10:04:36Z",
  "updated_at": "2023-10-11T23:32:34Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nAnvil\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (e0722a1 2023-10-10T00:28:23.851012000Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nanvil\r\n\r\n### Operating System\r\n\r\nmacOS (Apple Silicon)\r\n\r\n### Describe the bug\r\n\r\nThis is a regression, fixed previously at #2351.\r\n\r\nThe code in question is this:\r\n\r\nhttps://github.com/foundry-rs/foundry/blob/e0722a10b45859892ec3b998df958a9edc77c202/crates/anvil/src/eth/api.rs#L1520-L1532\r\n\r\nThis `Err(BlockchainError::RpcUnimplemented)` branch is what is getting executed, and, obviously, this does not work as expected.\r\n\r\nIt breaks when the forking is not enabled, but it is perfectly valid to reset the node state, for instance in the `beforeEach` hook of the RPC E2E tests.\r\n\r\nHow it is supposed to work:\r\n\r\n1. Node receives `{ \"jsonrpc\": \"2.0\", \"method\": \"anvil_reset\", \"params\": [] }`\r\n2. Node resets the internal state to genesis\r\n3. Node responds with success",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1758692012",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6018#issuecomment-1758692012",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6018",
    "id": 1758692012,
    "node_id": "IC_kwDOGBlvNc5o04Ks",
    "user": {
      "login": "MOZGIII",
      "id": 265507,
      "node_id": "MDQ6VXNlcjI2NTUwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/265507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MOZGIII",
      "html_url": "https://github.com/MOZGIII",
      "followers_url": "https://api.github.com/users/MOZGIII/followers",
      "following_url": "https://api.github.com/users/MOZGIII/following{/other_user}",
      "gists_url": "https://api.github.com/users/MOZGIII/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MOZGIII/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MOZGIII/subscriptions",
      "organizations_url": "https://api.github.com/users/MOZGIII/orgs",
      "repos_url": "https://api.github.com/users/MOZGIII/repos",
      "events_url": "https://api.github.com/users/MOZGIII/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MOZGIII/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T23:32:25Z",
    "updated_at": "2023-10-11T23:32:25Z",
    "author_association": "NONE",
    "body": "Actually, blame shows this was never implemented in the first place, so not a regression. I was confused because the issue that would be implementing this is closed as done.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1758692012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2444",
  "id": 1315490272,
  "node_id": "I_kwDOGBlvNc5OaMng",
  "number": 2444,
  "title": "Feature: support bespoke natspec for testing directives ",
  "user": {
    "login": "sambacha",
    "id": 32783916,
    "node_id": "MDQ6VXNlcjMyNzgzOTE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sambacha",
    "html_url": "https://github.com/sambacha",
    "followers_url": "https://api.github.com/users/sambacha/followers",
    "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
    "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
    "organizations_url": "https://api.github.com/users/sambacha/orgs",
    "repos_url": "https://api.github.com/users/sambacha/repos",
    "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sambacha/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-07-22T23:34:56Z",
  "updated_at": "2022-07-23T07:49:18Z",
  "closed_at": "2022-07-23T07:48:01Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Describe the feature you would like\r\n\r\nIt would be nice for a custom natspec directive support for testing purposes, e.g\r\n\r\n~~~javascript\r\n//! @emit <% func name > [ emit log for func name ]\r\n~~~\r\n\r\nas another example I use a custom natspec directive to label emission events  \r\nhttps://github.com/sambacha/dappspec/blob/master/hacking/RULES.txt\r\n\r\n\r\nThis would help potentially making code easier to audit and understand, especially if forge is able to read such directives and inject the behavior etc. \r\n\r\n\r\nthe custom comment directive is arbitrary: using an actual natspec custom directive with forge as the prefix would be another possibility, similar to how OpenZeppelin uses them for its upgradable contracts\r\n\r\npart of https://github.com/foundry-rs/foundry/issues/2396\r\n\r\n### Additional context\r\n\r\n~~~solidity\r\n    \r\n    abstract contract ERC2771Context is Context {\r\n    /// @custom:oz-upgrades-unsafe-allow state-variable-immutable\r\n    address private immutable _trustedForwarder;\r\n\r\n    /// @custom:oz-upgrades-unsafe-allow constructor\r\n    constructor(address trustedForwarder) {\r\n        _trustedForwarder = trustedForwarder;\r\n    }",
  "closed_by": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193081340",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2444#issuecomment-1193081340",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444",
    "id": 1193081340,
    "node_id": "IC_kwDOGBlvNc5HHPn8",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-23T07:48:01Z",
    "updated_at": "2022-07-23T07:48:01Z",
    "author_association": "MEMBER",
    "body": "Imo there is no real reason to add this when we already have cheatcodes and the natspec approach is probably more error prone (no editor integration) and less flexible (no setup, no complex logic). It would also overly fragment the approaches to testing requiring additional support + maintenance for something that would likely not be used that much. For those reasons I'll close this issue as \"not planned\" but @gakonst / @mattsse are free to reopen if they disagree",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193081340/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193081520",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2444#issuecomment-1193081520",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2444",
    "id": 1193081520,
    "node_id": "IC_kwDOGBlvNc5HHPqw",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-23T07:49:18Z",
    "updated_at": "2022-07-23T07:49:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Imo there is no real reason to add this when we already have cheatcodes and the natspec approach is probably more error prone (no editor integration) and less flexible (no setup, no complex logic). It would also overly fragment the approaches to testing requiring additional support + maintenance for something that would likely not be used that much. For those reasons I'll close this issue as \"not planned\" but @gakonst / @mattsse are free to reopen if they disagree\r\n\r\ngood points, appreciate the feedback ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1193081520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

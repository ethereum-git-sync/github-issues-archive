{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1570",
  "id": 1230188310,
  "node_id": "I_kwDOGBlvNc5JUy8W",
  "number": 1570,
  "title": "feat(anvil): add --host option",
  "user": {
    "login": "alephao",
    "id": 7674479,
    "node_id": "MDQ6VXNlcjc2NzQ0Nzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7674479?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alephao",
    "html_url": "https://github.com/alephao",
    "followers_url": "https://api.github.com/users/alephao/followers",
    "following_url": "https://api.github.com/users/alephao/following{/other_user}",
    "gists_url": "https://api.github.com/users/alephao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alephao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alephao/subscriptions",
    "organizations_url": "https://api.github.com/users/alephao/orgs",
    "repos_url": "https://api.github.com/users/alephao/repos",
    "events_url": "https://api.github.com/users/alephao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alephao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    },
    {
      "id": 3759720552,
      "node_id": "LA_kwDOGBlvNc7gGMho",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/D-easy",
      "name": "D-easy",
      "color": "0E8A16",
      "default": false,
      "description": "Difficulty: easy"
    },
    {
      "id": 4077188949,
      "node_id": "LA_kwDOGBlvNc7zBPdV",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-anvil",
      "name": "C-anvil",
      "color": "5319E7",
      "default": false,
      "description": "Command: anvil"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-05-09T20:02:06Z",
  "updated_at": "2023-08-05T08:49:32Z",
  "closed_at": "2022-05-10T12:53:12Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nAnvil\n\n### Describe the feature you would like\n\nWhen trying to run anvil on a docker container, the endpoint is not exposed outside of the container because it's binded to `127.0.0.1`, but docker requires `0.0.0.0`\r\n\r\nExample docker-compose file:\r\n\r\n```yml\r\nversion: \"3\"\r\nservices:\r\n  chain:\r\n    image: ghcr.io/foundry-rs/foundry:nightly-85f69d950505e92d2047f38c3ca69281fc0e000b\r\n    ports: \r\n      - \"8545:8545\"\r\n    entrypoint: anvil --accounts 20\r\n```\r\n\r\nWould be great to have a `--host` param or something similar so I could choose `--host 0.0.0.0` and be able to use anvil via docker.\n\n### Additional context\n\n_No response_",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666443884",
    "html_url": "https://github.com/foundry-rs/foundry/issues/1570#issuecomment-1666443884",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1570",
    "id": 1666443884,
    "node_id": "IC_kwDOGBlvNc5jU-ps",
    "user": {
      "login": "Rogalek",
      "id": 24922834,
      "node_id": "MDQ6VXNlcjI0OTIyODM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/24922834?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rogalek",
      "html_url": "https://github.com/Rogalek",
      "followers_url": "https://api.github.com/users/Rogalek/followers",
      "following_url": "https://api.github.com/users/Rogalek/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rogalek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rogalek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rogalek/subscriptions",
      "organizations_url": "https://api.github.com/users/Rogalek/orgs",
      "repos_url": "https://api.github.com/users/Rogalek/repos",
      "events_url": "https://api.github.com/users/Rogalek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rogalek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-05T08:47:43Z",
    "updated_at": "2023-08-05T08:49:32Z",
    "author_association": "NONE",
    "body": "is this working for you? how to use that?\r\nI am trying to do this:\r\n```\r\nservices:\r\n  redis:\r\n    image: redis:latest\r\n  foundry:\r\n    container_name: foundry\r\n    env_file: .env\r\n    image: ghcr.io/foundry-rs/foundry:latest\r\n    command: anvil -f $RPC_URL --no-rate-limit --gas-limit 30000000 --fork-block-number 106402958 --host 0.0.0.0\r\n    ports:\r\n      - \"8545:8545\"\r\n  tests:\r\n    env_file: .env\r\n    build:\r\n      dockerfile: \"./Dockerfile.test\"\r\n      context: .\r\n      args:\r\n        - CONFIG=$CONFIG\r\n    command: pytest . -c $CONFIG\r\n    volumes:\r\n      - .:/code\r\n    depends_on:\r\n      - redis\r\n      - foundry\r\n\r\n```\r\n\r\nbut still when I run docker-compose up I will get this message:\r\n```\r\n(repo-py3.11) rogal@rogal-Legion:~/Documents/repo/repo$ docker-compose -f docker-compose-test.yaml up\r\nStarting foundry           ... done\r\nStarting repo_redis_1 ... done\r\nStarting repo_tests_1 ... done\r\nAttaching to foundry, repo_redis_1, repo_tests_1\r\nredis_1        | 1:C 05 Aug 2023 08:43:36.928 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\nredis_1        | 1:C 05 Aug 2023 08:43:36.928 # Redis version=7.0.12, bits=64, commit=00000000, modified=0, pid=1, just started\r\nredis_1        | 1:C 05 Aug 2023 08:43:36.928 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\r\nredis_1        | 1:M 05 Aug 2023 08:43:36.929 * monotonic clock: POSIX clock_gettime\r\nredis_1        | 1:M 05 Aug 2023 08:43:36.931 * Running mode=standalone, port=6379.\r\nredis_1        | 1:M 05 Aug 2023 08:43:36.931 # Server initialized\r\nfoundry        | \r\nfoundry        | \r\nfoundry        |                              _   _\r\nfoundry        |                             (_) | |\r\nfoundry        |       __ _   _ __   __   __  _  | |\r\nfoundry        |      / _` | | '_ \\  \\ \\ / / | | | |\r\nfoundry        |     | (_| | | | | |  \\ V /  | | | |\r\nfoundry        |      \\__,_| |_| |_|   \\_/   |_| |_|\r\nfoundry        | \r\nfoundry        |     0.1.0 (114e69d 2023-07-25T11:50:55.419172631Z)\r\nfoundry        |     https://github.com/foundry-rs/foundry\r\nfoundry        | \r\nfoundry        | Available Accounts\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | (0) \"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\" (10000.000000000000000000 ETH)\r\nfoundry        | (1) \"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\" (10000.000000000000000000 ETH)\r\nfoundry        | (2) \"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC\" (10000.000000000000000000 ETH)\r\nfoundry        | (3) \"0x90F79bf6EB2c4f870365E785982E1f101E93b906\" (10000.000000000000000000 ETH)\r\nfoundry        | (4) \"0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65\" (10000.000000000000000000 ETH)\r\nfoundry        | (5) \"0x9965507D1a55bcC2695C58ba16FB37d819B0A4dc\" (10000.000000000000000000 ETH)\r\nfoundry        | (6) \"0x976EA74026E726554dB657fA54763abd0C3a0aa9\" (10000.000000000000000000 ETH)\r\nfoundry        | (7) \"0x14dC79964da2C08b23698B3D3cc7Ca32193d9955\" (10000.000000000000000000 ETH)\r\nfoundry        | (8) \"0x23618e81E3f5cdF7f54C3d65f7FBc0aBf5B21E8f\" (10000.000000000000000000 ETH)\r\nfoundry        | (9) \"0xa0Ee7A142d267C1f36714E4a8F75612F20a79720\" (10000.000000000000000000 ETH)\r\nfoundry        | \r\nfoundry        | Private Keys\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | (0) 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\r\nfoundry        | (1) 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d\r\nfoundry        | (2) 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a\r\nfoundry        | (3) 0x7c852118294e51e653712a81e05800f419141751be58f605c371e15141b007a6\r\nfoundry        | (4) 0x47e179ec197488593b187f80a00eb0da91f1b9d0b13f8733639f19c30a34926a\r\nfoundry        | (5) 0x8b3a350cf5c34c9194ca85829a2df0ec3153be0318b5e2d3348e872092edffba\r\nfoundry        | (6) 0x92db14e403b83dfe3df233f83dfa3a0d7096f21ca9b0d6d6b8d88b2b4ec1564e\r\nfoundry        | (7) 0x4bbbf85ce3377467afe5d46f804f221813b2bb87f24d81f60f1fcdbf7cbf4356\r\nfoundry        | (8) 0xdbda1821b80551c9d65939329250298aa3472ba22feea921c0cf5d620ea67b97\r\nfoundry        | (9) 0x2a871d0798f97d79848a013d4936a73bf4cc922c825d33c1cf7073dff6d409c6\r\nfoundry        | \r\nfoundry        | Wallet\r\nfoundry        | ==================\r\nfoundry        | Mnemonic:          test test test test test test test test test test test junk\r\nfoundry        | Derivation path:   m/44'/60'/0'/0/\r\nfoundry        | \r\n\r\nfoundry        | Chain ID\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | 31337\r\nfoundry        | \r\nfoundry        | Base Fee\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | 1000000000\r\nfoundry        | \r\nfoundry        | Gas Limit\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | 30000000\r\nfoundry        | \r\nfoundry        | Genesis Timestamp\r\nfoundry        | ==================\r\nfoundry        | \r\nfoundry        | 1691225016\r\nfoundry        | \r\nfoundry        | Listening on 127.0.0.1:8545\r\n\r\n```\r\n\r\nwhat am I doing wrong?\r\n\r\nand trying to access http://foundry:8545 will not work for me from tests container or I can't even access is from my host machine",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666443884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

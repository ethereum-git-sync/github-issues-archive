{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5965",
  "id": 1920463764,
  "node_id": "I_kwDOGBlvNc5yd_OU",
  "number": 5965,
  "title": "When comparing address with `assertEq` and address is displayed in error, checksum is not included",
  "user": {
    "login": "winor30",
    "id": 12413150,
    "node_id": "MDQ6VXNlcjEyNDEzMTUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/12413150?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/winor30",
    "html_url": "https://github.com/winor30",
    "followers_url": "https://api.github.com/users/winor30/followers",
    "following_url": "https://api.github.com/users/winor30/following{/other_user}",
    "gists_url": "https://api.github.com/users/winor30/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/winor30/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/winor30/subscriptions",
    "organizations_url": "https://api.github.com/users/winor30/orgs",
    "repos_url": "https://api.github.com/users/winor30/repos",
    "events_url": "https://api.github.com/users/winor30/events{/privacy}",
    "received_events_url": "https://api.github.com/users/winor30/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-10-01T00:58:02Z",
  "updated_at": "2023-10-01T01:00:45Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [ ] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (ddca274 2023-09-30T00:19:15.633264000Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge test\r\n\r\n### Operating System\r\n\r\nNone\r\n\r\n### Describe the bug\r\n\r\n## Description\r\n\r\nWhen comparing two Ethereum addresses using the `assertEq` function in tests, if there is a mismatch and the test fails, the error message displays the addresses without their checksums. However, when the addresses are logged using `console.log`, the checksums are present as expected.\r\n\r\n## Code to Reproduce\r\n\r\n```sol\r\n    function testEqAddress() public {\r\n        address a = address(0xa37F3eF79651b67FC3b642016C6347745A7545aa);\r\n        address b = address(0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266);\r\n        console.log(\"a: %s\", a);\r\n        console.log(\"b: %s\", b);\r\n        assertEq(a, b);\r\n    }\r\n```\r\n\r\n## Test Results\r\n```sh\r\n$ forge test -vv --match-test \"testEqAddress\"\r\n[⠢] Compiling...\r\n[⠒] Compiling 1 files with 0.8.19\r\n[⠑] Solc 0.8.19 finished in 1.29s\r\nCompiler run successful!\r\n\r\nRunning 1 test for test/Test.t.sol:Test\r\n[FAIL. Reason: Assertion failed.] testEqAddress() (gas: 18758)\r\nLogs:\r\n  a: 0xa37F3eF79651b67FC3b642016C6347745A7545aa\r\n  b: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\r\n  Error: a == b not satisfied [address]\r\n    Expected: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266  \r\n      Actual: 0xa37f3ef79651b67fc3b642016c6347745a7545aa\r\n\r\nTest result: FAILED. 0 passed; 1 failed; 0 skipped; finished in 6.31ms\r\n\r\nRan 1 test suites: 0 tests passed, 1 failed, 0 skipped (1 total tests)\r\n\r\nFailing tests:\r\nEncountered 1 failing test in test/Test.t.sol:Test\r\n[FAIL. Reason: Assertion failed.] testEqAddress() (gas: 18758)\r\n\r\nEncountered a total of 1 failing tests, 0 tests succeeded\r\n```\r\n\r\nThis behavior can cause confusion as the checksum provides an additional layer of assurance regarding the correctness of an Ethereum address. It would be helpful if the error message retained the checksum to maintain consistency with the console.log output.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5965/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

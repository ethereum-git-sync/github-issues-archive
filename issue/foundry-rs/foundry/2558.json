{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2558",
  "id": 1326253304,
  "node_id": "I_kwDOGBlvNc5PDQT4",
  "number": 2558,
  "title": "Anvil returning \"unable to complete request\" when called from bash script.",
  "user": {
    "login": "harsh-98",
    "id": 23700929,
    "node_id": "MDQ6VXNlcjIzNzAwOTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/23700929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/harsh-98",
    "html_url": "https://github.com/harsh-98",
    "followers_url": "https://api.github.com/users/harsh-98/followers",
    "following_url": "https://api.github.com/users/harsh-98/following{/other_user}",
    "gists_url": "https://api.github.com/users/harsh-98/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/harsh-98/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/harsh-98/subscriptions",
    "organizations_url": "https://api.github.com/users/harsh-98/orgs",
    "repos_url": "https://api.github.com/users/harsh-98/repos",
    "events_url": "https://api.github.com/users/harsh-98/events{/privacy}",
    "received_events_url": "https://api.github.com/users/harsh-98/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-08-02T18:41:10Z",
  "updated_at": "2022-08-02T21:08:53Z",
  "closed_at": "2022-08-02T21:08:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nAnvil\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [ ] Foundry\r\n- [ ] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (028e888 2022-07-30T00:12:28.524716Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\n./foundry/anvil -f $1 --fork-block-number $2 \r\n\r\n### Operating System\r\n\r\nmacOS (Apple Silicon)\r\n\r\n### Describe the bug\r\n\r\nGetting `Fork Error: JsonRpcClientError(ProviderError(JsonRpcError(JsonRpcError { code: -32000, message: \"Unable to complete request at this time.\", data: None })))` error for some of the requests. This only happens when the anvil binary is run in the bash script. \r\n\r\nWhen run in 2 separate terminals, it is working as expected. And this is happening every single time. \r\n\r\nAnother thing to note, it is always failing for the same RPC query. All other queries are returning responses as expected. ",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203190689",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2558#issuecomment-1203190689",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558",
    "id": 1203190689,
    "node_id": "IC_kwDOGBlvNc5Htzuh",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T20:37:24Z",
    "updated_at": "2022-08-02T20:37:39Z",
    "author_association": "MEMBER",
    "body": "this looks like an error response received from the provider used for forking\r\n\r\ncan you share some details please,\r\n\r\nwhat's the query?\r\nwhat's the bash script doing, launching anvil or executing the request?\r\ncan you share the command?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203190689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203209502",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2558#issuecomment-1203209502",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558",
    "id": 1203209502,
    "node_id": "IC_kwDOGBlvNc5Ht4Ue",
    "user": {
      "login": "harsh-98",
      "id": 23700929,
      "node_id": "MDQ6VXNlcjIzNzAwOTI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/23700929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/harsh-98",
      "html_url": "https://github.com/harsh-98",
      "followers_url": "https://api.github.com/users/harsh-98/followers",
      "following_url": "https://api.github.com/users/harsh-98/following{/other_user}",
      "gists_url": "https://api.github.com/users/harsh-98/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/harsh-98/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/harsh-98/subscriptions",
      "organizations_url": "https://api.github.com/users/harsh-98/orgs",
      "repos_url": "https://api.github.com/users/harsh-98/repos",
      "events_url": "https://api.github.com/users/harsh-98/events{/privacy}",
      "received_events_url": "https://api.github.com/users/harsh-98/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T21:00:33Z",
    "updated_at": "2022-08-02T21:00:33Z",
    "author_association": "NONE",
    "body": "You are indeed right. I tried with infura and it worked. \r\nIt was failing with alchemy. So, I checked if the quota for queries per minute was causing this or if some requests were failing. But on the alchemy dashboard, there aren't any errors and all requests are passing as usual.\r\nThanks again.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203209502/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203216461",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2558#issuecomment-1203216461",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2558",
    "id": 1203216461,
    "node_id": "IC_kwDOGBlvNc5Ht6BN",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T21:08:53Z",
    "updated_at": "2022-08-02T21:08:53Z",
    "author_association": "MEMBER",
    "body": "could just be a flake on alchemy's side",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1203216461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

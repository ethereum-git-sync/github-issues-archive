{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/1515",
  "id": 1227078625,
  "node_id": "I_kwDOGBlvNc5JI7vh",
  "number": 1515,
  "title": "Anvil `eth_getLogs` returns no logs",
  "user": {
    "login": "onbjerg",
    "id": 8862627,
    "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/onbjerg",
    "html_url": "https://github.com/onbjerg",
    "followers_url": "https://api.github.com/users/onbjerg/followers",
    "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
    "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
    "organizations_url": "https://api.github.com/users/onbjerg/orgs",
    "repos_url": "https://api.github.com/users/onbjerg/repos",
    "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/onbjerg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 4077188949,
      "node_id": "LA_kwDOGBlvNc7zBPdV",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-anvil",
      "name": "C-anvil",
      "color": "5319E7",
      "default": false,
      "description": "Command: anvil"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-05-05T19:16:21Z",
  "updated_at": "2022-05-08T23:05:42Z",
  "closed_at": "2022-05-08T23:05:42Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Component\n\nAnvil\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (eb4bfb2 2022-05-05T18:06:46.302249388+00:00)\n\n### What command(s) is the bug in?\n\nanvil\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\nThe [`get_past_events`](https://github.com/gakonst/ethers-rs/blob/2768a6b4d7dee812d7de0a1e336214bd46e9bacb/ethers-contract/tests/contract.rs#L98) test in `ethers-rs` fails when using Anvil because no logs are returned by `eth_getLogs`. Anvil is run with no parameters and no config, so all the defaults are used.\r\n\r\nThe transaction does result in a receipt and a block, and the blog does have logs:\r\n\r\n**`eth_getLogs` call trace**\r\n\r\n```\r\n2022-05-05T18:27:17.231067Z TRACE rpc: handling call RpcMethodCall { jsonrpc: V2, method: \"eth_getLogs\", params: Array([Object({\"address\": String(\"0x5fbdb2315678afecb367f032d93f642f64180aa3\"), \"fromBlock\": String(\"0x0\"), \"topics\": Array([String(\"0x999b6d464c4e3383c341bdd3a22b02dda8a7e1d69c069d252e35cb2ee2f4a3c3\"), String(\"0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65\")])})]), id: Number(12) }\r\n2022-05-05T18:27:17.231077Z TRACE rpc: received method call RpcMethodCall { jsonrpc: V2, method: \"eth_getLogs\", params: Array([Object({\"address\": String(\"0x5fbdb2315678afecb367f032d93f642f64180aa3\"), \"fromBlock\": String(\"0x0\"), \"topics\": Array([String(\"0x999b6d464c4e3383c341bdd3a22b02dda8a7e1d69c069d252e35cb2ee2f4a3c3\"), String(\"0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65\")])})]), id: Number(12) }\r\n2022-05-05T18:27:17.231091Z TRACE rpc: received handler request EthGetLogs(Filter { from_block: Some(Number(0)), to_block: None, block_hash: None, address: Some(Value(0x5fbdb2315678afecb367f032d93f642f64180aa3)), topics: Some(Value(Some(Array([Some(0x999b6d464c4e3383c341bdd3a22b02dda8a7e1d69c069d252e35cb2ee2f4a3c3), Some(0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65)])))) })\r\n2022-05-05T18:27:17.231099Z TRACE rpc::api: executing eth request EthGetLogs(Filter { from_block: Some(Number(0)), to_block: None, block_hash: None, address: Some(Value(0x5fbdb2315678afecb367f032d93f642f64180aa3)), topics: Some(Value(Some(Array([Some(0x999b6d464c4e3383c341bdd3a22b02dda8a7e1d69c069d252e35cb2ee2f4a3c3), Some(0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65)])))) })\r\n2022-05-05T18:27:17.231155Z TRACE rpc: prepared rpc result Success(Array([]))\r\n```\r\n\r\n**Receipt for transaction that generates the logs**\r\n\r\n```\r\n2022-05-05T18:27:17.230396Z TRACE rpc: prepared rpc result Success(Object({\"blockHash\": String(\"0xadfa16650cdc51587c00e887f273fd43d89d3cdd5a898af24227148d25b861ff\"), \"blockNumber\": String(\"0x2\"), \"contractAddress\": Null, \"cumulativeGasUsed\": String(\"0x0\"), \"effectiveGasPrice\": String(\"0x4a817c800\"), \"from\": String(\"0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\"), \"gasUsed\": String(\"0xdcf2\"), \"logs\": Array([Object({\"address\": String(\"0x5fbdb2315678afecb367f032d93f642f64180aa3\"), \"blockHash\": String(\"0xadfa16650cdc51587c00e887f273fd43d89d3cdd5a898af24227148d25b861ff\"), \"blockNumber\": String(\"0x2\"), \"data\": String(\"0x00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000d696e697469616c2076616c75650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000026869000000000000000000000000000000000000000000000000000000000000\"), \"logIndex\": String(\"0x0\"), \"removed\": Bool(false), \"topics\": Array([String(\"0x999b6d464c4e3383c341bdd3a22b02dda8a7e1d69c069d252e35cb2ee2f4a3c3\"), String(\"0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266\"), String(\"0x0000000000000000000000000000000000000000000000000000000000000000\")]), \"transactionHash\": String(\"0xce0152e34e73c7b054219e6b3f15a54f629f606b4eba9ad747b45e225efc597a\"), \"transactionIndex\": String(\"0x0\"), \"transactionLogIndex\": String(\"0x0\")})]), \"logsBloom\": String(\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040020000000000000100000800080000008000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000040000000200000000000000000000000002000000000000000000021000000000000000000000000000000000000000000000000000000000000000000\"), \"root\": Null, \"status\": String(\"0x1\"), \"to\": String(\"0x5fbdb2315678afecb367f032d93f642f64180aa3\"), \"transactionHash\": String(\"0xce0152e34e73c7b054219e6b3f15a54f629f606b4eba9ad747b45e225efc597a\"), \"transactionIndex\": String(\"0x0\")}))\r\n```",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/1515/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

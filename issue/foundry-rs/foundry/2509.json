{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/2509",
  "id": 1321809215,
  "node_id": "I_kwDOGBlvNc5OyTU_",
  "number": 2509,
  "title": "Add threshold levels to forge snapshot --check",
  "user": {
    "login": "devtooligan",
    "id": 71567643,
    "node_id": "MDQ6VXNlcjcxNTY3NjQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/71567643?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/devtooligan",
    "html_url": "https://github.com/devtooligan",
    "followers_url": "https://api.github.com/users/devtooligan/followers",
    "following_url": "https://api.github.com/users/devtooligan/following{/other_user}",
    "gists_url": "https://api.github.com/users/devtooligan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/devtooligan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/devtooligan/subscriptions",
    "organizations_url": "https://api.github.com/users/devtooligan/orgs",
    "repos_url": "https://api.github.com/users/devtooligan/repos",
    "events_url": "https://api.github.com/users/devtooligan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/devtooligan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-07-29T06:17:01Z",
  "updated_at": "2022-07-29T13:07:30Z",
  "closed_at": "2022-07-29T13:07:30Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nWe thought adding `forge snapshot --check` to our CI was a great idea.  It forces the dev to acknowledge and review any changes to the gas profile.  But it didn't turn out to be that helpful.  Pretty much every change affects the gas profile a little.  So what ended up happening was that devs never reviewed it, and it just became an annoyance solved by quickly running forge snapshot and pushing a new commit without even looking at it.\r\n\r\nOne idea to improve this feature might be to add some sort of thresholds.  For example, in foundry.toml user selects the minimum change (nominal or percentage) that must be met before the snapshot check fails.  example:\r\n\r\n```\r\n// foundry.toml\r\nminimum_snapshot_gas_increase_percent=5\r\nminimum_snapshot_gas_increase_value=500\r\nminimum_snapshot_gas_decrease_percent=5\r\nminimum_snapshot_gas_decrease_value=1000\r\n```\r\n\r\nAnyways, open to other ideas on how to solve the problem.  This is something that was mentioned on Twitter and gakonst asked for a ticket.\r\n\n\n### Additional context\n\n_No response_",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1199264721",
    "html_url": "https://github.com/foundry-rs/foundry/issues/2509#issuecomment-1199264721",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/2509",
    "id": 1199264721,
    "node_id": "IC_kwDOGBlvNc5He1PR",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-29T13:07:27Z",
    "updated_at": "2022-07-29T13:07:27Z",
    "author_association": "MEMBER",
    "body": "thanks, you already have an honorable mention here #2484 lol\r\n\r\n+1 on making this a config option\r\n\r\nclosing this here as this is a dup of #2484 \r\n\r\ntrying to get this over the line shortly.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1199264721/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

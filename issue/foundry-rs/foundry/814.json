{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/814",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/814",
  "id": 1151189267,
  "node_id": "I_kwDOGBlvNc5EncET",
  "number": 814,
  "title": "Forge fails to find successfully installed dependency",
  "user": {
    "login": "jmcph4",
    "id": 717268,
    "node_id": "MDQ6VXNlcjcxNzI2OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/717268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmcph4",
    "html_url": "https://github.com/jmcph4",
    "followers_url": "https://api.github.com/users/jmcph4/followers",
    "following_url": "https://api.github.com/users/jmcph4/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmcph4/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmcph4/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmcph4/subscriptions",
    "organizations_url": "https://api.github.com/users/jmcph4/orgs",
    "repos_url": "https://api.github.com/users/jmcph4/repos",
    "events_url": "https://api.github.com/users/jmcph4/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmcph4/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-02-26T04:17:04Z",
  "updated_at": "2022-02-26T23:49:33Z",
  "closed_at": "2022-02-26T23:49:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.1.0 (9ef25c2 2022-02-26T00:26:30.551716007+00:00)\n\n### What command(s) is the bug in?\n\nforge build\n\n### Operating System\n\nLinux\n\n### Describe the bug\n\n# Actual Behaviour #\r\n```\r\n$ pwd\r\n/home/foobar/path/to/my/project\r\n$ forge build\r\ncompiling...\r\nUnable to resolve imported file: \"set-protocol/protocol/modules/BasicIssuanceModule.sol\"\r\nCompiling 5 files with 0.8.12\r\nCompilation finished successfully\r\nError: \r\n   0: Compiler run failed\r\n      ParserError: Source \"set-protocol/protocol/modules/BasicIssuanceModule.sol\" not found: File not found. Searched the following locations: \"\".\r\n       --> /home/foobar/path/to/my/project/src/MyContract.sol:7:1:\r\n        |\r\n      7 | import \"set-protocol/protocol/modules/BasicIssuanceModule.sol\";\r\n        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\n      \r\n   0: \r\n\r\nLocation:\r\n   cli/src/cmd/mod.rs:87\r\n\r\nBacktrace omitted.\r\nRun with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\n```\r\n\r\n## Context ##\r\nInstalled dependencies via:\r\n\r\n```\r\n$ forge install SetProtocol/set-protocol-v2-contracts-legacy\r\n```\r\nRelevant state of filesystem after successful completion:\r\n\r\n```\r\n$ pwd\r\n/home/foobar/path/to/my/project\r\n$ ls lib\r\nds-test  openzeppelin-contracts  set-protocol-v2-contracts-legacy\r\n$ ls lib/set-protocol-v2-contracts-legacy\r\ncontracts  hardhat.config.ts  package-lock.json\t\tREADME.md  test\t\t      tsconfig.json  utils\r\nexternal   package.json       pull_request_template.md\tscripts    tsconfig.dist.json  tslint.json    yarn.lock\r\n$ stat lib/set-protocol-v2-contracts-legacy/contracts/protocol/modules/BasicIssuanceModule.sol \r\n  File: lib/set-protocol-v2-contracts-legacy/contracts/protocol/modules/BasicIssuanceModule.sol\r\n  Size: 9038      \tBlocks: 24         IO Block: 4096   regular file\r\nDevice: 24h/36d\tInode: 727178      Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/  foobar)   Gid: ( 1000/  foobar)\r\nAccess: 2022-02-26 13:26:33.435977916 +1000\r\nModify: 2022-02-26 13:26:33.435977916 +1000\r\nChange: 2022-02-26 13:26:33.435977916 +1000\r\n Birth: 2022-02-26 13:26:33.435977916 +1000\r\n```\r\n\r\nI then added a remapping manually, like so:\r\n\r\n```\r\n$ cat foundry.toml\r\n[default]\r\nsrc = 'src'\r\nout = 'out'\r\nlibs = ['lib']\r\nremappings = [\r\n    'ds-test/=lib/ds-test/src/',\r\n    'openzeppelin-contracts/=lib/openzeppelin-contracts/contracts',\r\n    'set-contracts/=lib/set-protocol-contracts-v2-legacy/contracts'\r\n]\r\n\r\n# See more config options https://github.com/gakonst/foundry/tree/master/config\r\n```\r\n\r\nThen I attempted a build and the error occurred.\r\n\r\n# Expected Behaviour #\r\n\r\nSpecified import to be found.\r\n",
  "closed_by": {
    "login": "jmcph4",
    "id": 717268,
    "node_id": "MDQ6VXNlcjcxNzI2OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/717268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmcph4",
    "html_url": "https://github.com/jmcph4",
    "followers_url": "https://api.github.com/users/jmcph4/followers",
    "following_url": "https://api.github.com/users/jmcph4/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmcph4/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmcph4/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmcph4/subscriptions",
    "organizations_url": "https://api.github.com/users/jmcph4/orgs",
    "repos_url": "https://api.github.com/users/jmcph4/repos",
    "events_url": "https://api.github.com/users/jmcph4/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmcph4/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/814/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1052120890",
    "html_url": "https://github.com/foundry-rs/foundry/issues/814#issuecomment-1052120890",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814",
    "id": 1052120890,
    "node_id": "IC_kwDOGBlvNc4-thc6",
    "user": {
      "login": "cleanunicorn",
      "id": 547012,
      "node_id": "MDQ6VXNlcjU0NzAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cleanunicorn",
      "html_url": "https://github.com/cleanunicorn",
      "followers_url": "https://api.github.com/users/cleanunicorn/followers",
      "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
      "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
      "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
      "repos_url": "https://api.github.com/users/cleanunicorn/repos",
      "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-26T13:10:28Z",
    "updated_at": "2022-02-26T13:10:28Z",
    "author_association": "NONE",
    "body": "Could it be the problem that you remap `set-contracts`\r\n\r\n```\r\n$ cat foundry.toml\r\n[default]\r\nsrc = 'src'\r\nout = 'out'\r\nlibs = ['lib']\r\nremappings = [\r\n    'ds-test/=lib/ds-test/src/',\r\n    'openzeppelin-contracts/=lib/openzeppelin-contracts/contracts',\r\n    'set-contracts/=lib/set-protocol-contracts-v2-legacy/contracts'\r\n]\r\n\r\n# See more config options https://github.com/gakonst/foundry/tree/master/config\r\n```\r\n\r\nBut try to import a different path `set-protocol`.\r\n\r\n```\r\n$ pwd\r\n/home/foobar/path/to/my/project\r\n$ forge build\r\ncompiling...\r\nUnable to resolve imported file: \"set-protocol/protocol/modules/BasicIssuanceModule.sol\"\r\nCompiling 5 files with 0.8.12\r\nCompilation finished successfully\r\nError: \r\n   0: Compiler run failed\r\n      ParserError: Source \"set-protocol/protocol/modules/BasicIssuanceModule.sol\" not found: File not found. Searched the following locations: \"\".\r\n       --> /home/foobar/path/to/my/project/src/MyContract.sol:7:1:\r\n        |\r\n      7 | import \"set-protocol/protocol/modules/BasicIssuanceModule.sol\";\r\n        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\n      \r\n   0: \r\n\r\nLocation:\r\n   cli/src/cmd/mod.rs:87\r\n\r\nBacktrace omitted.\r\nRun with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\n```\r\n\r\nI am saying you remap `set-contracts` but try to import `set-protocol`.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1052120890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1052805410",
    "html_url": "https://github.com/foundry-rs/foundry/issues/814#issuecomment-1052805410",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/814",
    "id": 1052805410,
    "node_id": "IC_kwDOGBlvNc4-wIki",
    "user": {
      "login": "jmcph4",
      "id": 717268,
      "node_id": "MDQ6VXNlcjcxNzI2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/717268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmcph4",
      "html_url": "https://github.com/jmcph4",
      "followers_url": "https://api.github.com/users/jmcph4/followers",
      "following_url": "https://api.github.com/users/jmcph4/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmcph4/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmcph4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmcph4/subscriptions",
      "organizations_url": "https://api.github.com/users/jmcph4/orgs",
      "repos_url": "https://api.github.com/users/jmcph4/repos",
      "events_url": "https://api.github.com/users/jmcph4/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmcph4/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-26T23:49:33Z",
    "updated_at": "2022-02-26T23:49:33Z",
    "author_association": "NONE",
    "body": "> Could it be the problem that you remap `set-contracts`\r\n> \r\n> ```\r\n> $ cat foundry.toml\r\n> [default]\r\n> src = 'src'\r\n> out = 'out'\r\n> libs = ['lib']\r\n> remappings = [\r\n>     'ds-test/=lib/ds-test/src/',\r\n>     'openzeppelin-contracts/=lib/openzeppelin-contracts/contracts',\r\n>     'set-contracts/=lib/set-protocol-contracts-v2-legacy/contracts'\r\n> ]\r\n> \r\n> # See more config options https://github.com/gakonst/foundry/tree/master/config\r\n> ```\r\n> \r\n> But try to import a different path `set-protocol`.\r\n> \r\n> ```\r\n> $ pwd\r\n> /home/foobar/path/to/my/project\r\n> $ forge build\r\n> compiling...\r\n> Unable to resolve imported file: \"set-protocol/protocol/modules/BasicIssuanceModule.sol\"\r\n> Compiling 5 files with 0.8.12\r\n> Compilation finished successfully\r\n> Error: \r\n>    0: Compiler run failed\r\n>       ParserError: Source \"set-protocol/protocol/modules/BasicIssuanceModule.sol\" not found: File not found. Searched the following locations: \"\".\r\n>        --> /home/foobar/path/to/my/project/src/MyContract.sol:7:1:\r\n>         |\r\n>       7 | import \"set-protocol/protocol/modules/BasicIssuanceModule.sol\";\r\n>         | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n> \r\n>       \r\n>    0: \r\n> \r\n> Location:\r\n>    cli/src/cmd/mod.rs:87\r\n> \r\n> Backtrace omitted.\r\n> Run with RUST_BACKTRACE=1 environment variable to display it.\r\n> Run with RUST_BACKTRACE=full to include source snippets.\r\n> ```\r\n> \r\n> I am saying you remap `set-contracts` but try to import `set-protocol`.\r\n\r\nDefinitely a huge facepalm moment for me!\r\n\r\n**TL;DR**: You're right.\r\n\r\nTwo issues:\r\n\r\n - In the contract itself, I'm trying to import from `set-protocol` when my remappings need `set-contracts`\r\n - The remappings themselves have a typo in the path: they say `lib/set-protocol-contracts-v2-legacy/contracts` when they **should** say `lib/set-protocol-v2-contracts-legacy/contracts/protocol/modules/BasicIssuanceModule.sol `\r\n\r\n---\r\n\r\nI suppose the initial error message threw me due to the search path reported by `forge` being empty, but I'm very hesitant to blame the error output when it was my own typo.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1052805410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

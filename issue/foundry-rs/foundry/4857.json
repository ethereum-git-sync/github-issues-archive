{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4857",
  "id": 1690836083,
  "node_id": "I_kwDOGBlvNc5kyBxz",
  "number": 4857,
  "title": "forge script CLI crashes",
  "user": {
    "login": "sourabhmarathe",
    "id": 10503417,
    "node_id": "MDQ6VXNlcjEwNTAzNDE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10503417?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sourabhmarathe",
    "html_url": "https://github.com/sourabhmarathe",
    "followers_url": "https://api.github.com/users/sourabhmarathe/followers",
    "following_url": "https://api.github.com/users/sourabhmarathe/following{/other_user}",
    "gists_url": "https://api.github.com/users/sourabhmarathe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sourabhmarathe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sourabhmarathe/subscriptions",
    "organizations_url": "https://api.github.com/users/sourabhmarathe/orgs",
    "repos_url": "https://api.github.com/users/sourabhmarathe/repos",
    "events_url": "https://api.github.com/users/sourabhmarathe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sourabhmarathe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 4182991461,
      "node_id": "LA_kwDOGBlvNc75U2Jl",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-script",
      "name": "Cmd-forge-script",
      "color": "006B75",
      "default": false,
      "description": "Command: forge script"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-05-01T13:53:18Z",
  "updated_at": "2023-05-10T13:54:07Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (91f69dd 2023-05-01T00:13:59.372319000Z)\n\n### What command(s) is the bug in?\n\nforge script\n\n### Operating System\n\nmacOS (Intel)\n\n### Describe the bug\n\nHey guys, I’m running into a CLI panic when I try to use `forge script`. In short, I run `forge script script/Script.s.sol --rpc-url $GOERLI_RPC_URL` and get the following error message: \r\n```\r\nThe application panicked (crashed).\r\nMessage:  called `Option::unwrap()` on a `None` value\r\nLocation: /Users/runner/work/foundry/foundry/cli/src/cmd/forge/script/executor.rs:49\r\n\r\nThis is a bug. Consider reporting it at https://github.com/foundry-rs/foundry\r\n\r\nBacktrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.\r\nRun with RUST_BACKTRACE=full to include source snippets.\r\n[1]    95623 abort      forge script script/tenderly/Strategy.s.sol:S\r\n```\r\n\r\nHere is the backtrace of the crash:\r\n```\r\n  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\r\n   1: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   2: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   3: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   4: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   5: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   6: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   7: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   8: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   9: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  10: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  11: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  12: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  13: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  14: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n  15: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n```\r\n\r\nI also have confirmed that $GOERLI_RPC_URL is set. In addition, when I use the same RPC URL (albeit on its respective mainnet URL) to run `forge test`, it works fine.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1540110938",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4857#issuecomment-1540110938",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857",
    "id": 1540110938,
    "node_id": "IC_kwDOGBlvNc5bzDpa",
    "user": {
      "login": "CJBangert",
      "id": 38147098,
      "node_id": "MDQ6VXNlcjM4MTQ3MDk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/38147098?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CJBangert",
      "html_url": "https://github.com/CJBangert",
      "followers_url": "https://api.github.com/users/CJBangert/followers",
      "following_url": "https://api.github.com/users/CJBangert/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJBangert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CJBangert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJBangert/subscriptions",
      "organizations_url": "https://api.github.com/users/CJBangert/orgs",
      "repos_url": "https://api.github.com/users/CJBangert/repos",
      "events_url": "https://api.github.com/users/CJBangert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CJBangert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-09T13:18:49Z",
    "updated_at": "2023-05-09T13:18:49Z",
    "author_association": "NONE",
    "body": "Hello,\r\nNot sure if this is _the_ solution, but a workaround I used that worked was simply specifying and renaming my deploy script, as I have several script files that all had the name DeployScript. For example, I was running\r\n```\r\nforge script script/anvil/DeployFactory.s.sol:DeployScript --fork-url http://localhost:8545 --broadcast --ffi\r\n```\r\nwhen I also had a `script/anvil/DeployXContract.sol:DeployScript` and a  `script/anvil/DeployYContract.sol:DeployScript` in the same folder. I changed the name of the script contract to `DeployFactoryScript` and it ran successfully: \r\n```\r\nforge script script/anvil/DeployFactoryToAnvil.s.sol:DeployFactoryScript --fork-url http://localhost:8545 --broadcast --ffi\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1540110938/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1542259323",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4857#issuecomment-1542259323",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4857",
    "id": 1542259323,
    "node_id": "IC_kwDOGBlvNc5b7QJ7",
    "user": {
      "login": "sourabhmarathe",
      "id": 10503417,
      "node_id": "MDQ6VXNlcjEwNTAzNDE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10503417?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sourabhmarathe",
      "html_url": "https://github.com/sourabhmarathe",
      "followers_url": "https://api.github.com/users/sourabhmarathe/followers",
      "following_url": "https://api.github.com/users/sourabhmarathe/following{/other_user}",
      "gists_url": "https://api.github.com/users/sourabhmarathe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sourabhmarathe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sourabhmarathe/subscriptions",
      "organizations_url": "https://api.github.com/users/sourabhmarathe/orgs",
      "repos_url": "https://api.github.com/users/sourabhmarathe/repos",
      "events_url": "https://api.github.com/users/sourabhmarathe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sourabhmarathe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-10T13:54:06Z",
    "updated_at": "2023-05-10T13:54:06Z",
    "author_association": "NONE",
    "body": "@CJBangert That was definitely it for me! Thanks for leaving this comment. It looks like this is the result of scripts sharing the same name. \r\n\r\nI'm prepared to close this issue if that's alright, unless the Foundry team feels this is worth addressing. (cc @mds1)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1542259323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

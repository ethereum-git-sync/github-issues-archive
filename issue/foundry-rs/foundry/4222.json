{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4222",
  "id": 1561444538,
  "node_id": "I_kwDOGBlvNc5dEcC6",
  "number": 4222,
  "title": "`forge update` on repos with forge deps does a recursive update",
  "user": {
    "login": "holic",
    "id": 508855,
    "node_id": "MDQ6VXNlcjUwODg1NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/508855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holic",
    "html_url": "https://github.com/holic",
    "followers_url": "https://api.github.com/users/holic/followers",
    "following_url": "https://api.github.com/users/holic/following{/other_user}",
    "gists_url": "https://api.github.com/users/holic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holic/subscriptions",
    "organizations_url": "https://api.github.com/users/holic/orgs",
    "repos_url": "https://api.github.com/users/holic/repos",
    "events_url": "https://api.github.com/users/holic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-01-29T20:20:26Z",
  "updated_at": "2023-09-01T15:00:37Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (3a15fe9 2023-01-29T00:06:04.108254Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge update\r\n\r\n### Operating System\r\n\r\nmacOS (Apple Silicon)\r\n\r\n### Describe the bug\r\n\r\nRunning `forge update` on a particular dependency seems to do a recursive update of all of its forge dependencies (git submodules), which keeps me from being able to commit the update/changes for the dep I wanted to update.\r\n\r\nI would expect `forge update` to bump the dependency version to the latest, and then follow the checked-in submodule git hashes to update its dependencies (rather than also bumping those to the latest).\r\n\r\nTo resolve this, I have to manually go in and check out each dependency's dependency to the submodule hash checked into the dependency's repo.\r\n\r\n```\r\nethfs/packages/contracts % git status\r\nOn branch main\r\nYour branch is up to date with 'origin/main'.\r\n\r\nnothing to commit, working tree clean\r\n\r\nethfs/packages/contracts % forge update lib/forge-std\r\n\r\nethfs/packages/contracts % git status\r\nOn branch main\r\nYour branch is up to date with 'origin/main'.\r\n\r\nChanges not staged for commit:\r\n  (use \"git add <file>...\" to update what will be committed)\r\n  (use \"git restore <file>...\" to discard changes in working directory)\r\n  (commit or discard the untracked or modified content in submodules)\r\n\tmodified:   lib/forge-std (new commits, modified content)\r\n\r\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\r\n\r\nethfs/packages/contracts % git add .\r\n\r\nethfs/packages/contracts % git status\r\nOn branch main\r\nYour branch is up to date with 'origin/main'.\r\n\r\nChanges to be committed:\r\n  (use \"git restore --staged <file>...\" to unstage)\r\n\tmodified:   lib/forge-std\r\n\r\nChanges not staged for commit:\r\n  (use \"git add <file>...\" to update what will be committed)\r\n  (use \"git restore <file>...\" to discard changes in working directory)\r\n  (commit or discard the untracked or modified content in submodules)\r\n\tmodified:   lib/forge-std (modified content)\r\n\r\nethfs/packages/contracts % cd lib/forge-std\r\n\r\ncontracts/lib/forge-std % git status\r\nHEAD detached at 4a79aca\r\nChanges not staged for commit:\r\n  (use \"git add <file>...\" to update what will be committed)\r\n  (use \"git restore <file>...\" to discard changes in working directory)\r\n\tmodified:   lib/ds-test (new commits)\r\n\r\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\r\n```\r\n\r\nSee also #2618",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666720415",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4222#issuecomment-1666720415",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222",
    "id": 1666720415,
    "node_id": "IC_kwDOGBlvNc5jWCKf",
    "user": {
      "login": "meetmangukiya",
      "id": 7620533,
      "node_id": "MDQ6VXNlcjc2MjA1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meetmangukiya",
      "html_url": "https://github.com/meetmangukiya",
      "followers_url": "https://api.github.com/users/meetmangukiya/followers",
      "following_url": "https://api.github.com/users/meetmangukiya/following{/other_user}",
      "gists_url": "https://api.github.com/users/meetmangukiya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meetmangukiya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meetmangukiya/subscriptions",
      "organizations_url": "https://api.github.com/users/meetmangukiya/orgs",
      "repos_url": "https://api.github.com/users/meetmangukiya/repos",
      "events_url": "https://api.github.com/users/meetmangukiya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meetmangukiya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-06T05:08:03Z",
    "updated_at": "2023-08-06T05:08:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Might look into fixing this, very annoying",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666720415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666727666",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4222#issuecomment-1666727666",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222",
    "id": 1666727666,
    "node_id": "IC_kwDOGBlvNc5jWD7y",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-06T05:38:49Z",
    "updated_at": "2023-08-06T05:38:49Z",
    "author_association": "MEMBER",
    "body": "@meetmangukiya lmk if you want me to assign it to you!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1666727666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1702796405",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4222#issuecomment-1702796405",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222",
    "id": 1702796405,
    "node_id": "IC_kwDOGBlvNc5lfpx1",
    "user": {
      "login": "0xfoobar",
      "id": 83792390,
      "node_id": "MDQ6VXNlcjgzNzkyMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/83792390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xfoobar",
      "html_url": "https://github.com/0xfoobar",
      "followers_url": "https://api.github.com/users/0xfoobar/followers",
      "following_url": "https://api.github.com/users/0xfoobar/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xfoobar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xfoobar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xfoobar/subscriptions",
      "organizations_url": "https://api.github.com/users/0xfoobar/orgs",
      "repos_url": "https://api.github.com/users/0xfoobar/repos",
      "events_url": "https://api.github.com/users/0xfoobar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xfoobar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T14:00:43Z",
    "updated_at": "2023-09-01T14:00:43Z",
    "author_association": "NONE",
    "body": "Any solutions?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1702796405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1702890316",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4222#issuecomment-1702890316",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4222",
    "id": 1702890316,
    "node_id": "IC_kwDOGBlvNc5lgAtM",
    "user": {
      "login": "meetmangukiya",
      "id": 7620533,
      "node_id": "MDQ6VXNlcjc2MjA1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meetmangukiya",
      "html_url": "https://github.com/meetmangukiya",
      "followers_url": "https://api.github.com/users/meetmangukiya/followers",
      "following_url": "https://api.github.com/users/meetmangukiya/following{/other_user}",
      "gists_url": "https://api.github.com/users/meetmangukiya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meetmangukiya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meetmangukiya/subscriptions",
      "organizations_url": "https://api.github.com/users/meetmangukiya/orgs",
      "repos_url": "https://api.github.com/users/meetmangukiya/repos",
      "events_url": "https://api.github.com/users/meetmangukiya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meetmangukiya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T14:57:34Z",
    "updated_at": "2023-09-01T15:00:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Last I checked `forge update` was actually updating the submodules to the correct commits and not checking out the latest master on each submodule. But its just git showing and needing you to add them anyway. `--recursive --checkout` is the correct way afaict.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1702890316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/832",
  "id": 1156104686,
  "node_id": "I_kwDOGBlvNc5E6MHu",
  "number": 832,
  "title": "\"Stack too deep\" error when compiling",
  "user": {
    "login": "thetechnocratic",
    "id": 69377900,
    "node_id": "MDQ6VXNlcjY5Mzc3OTAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/69377900?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thetechnocratic",
    "html_url": "https://github.com/thetechnocratic",
    "followers_url": "https://api.github.com/users/thetechnocratic/followers",
    "following_url": "https://api.github.com/users/thetechnocratic/following{/other_user}",
    "gists_url": "https://api.github.com/users/thetechnocratic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thetechnocratic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thetechnocratic/subscriptions",
    "organizations_url": "https://api.github.com/users/thetechnocratic/orgs",
    "repos_url": "https://api.github.com/users/thetechnocratic/repos",
    "events_url": "https://api.github.com/users/thetechnocratic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thetechnocratic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    },
    {
      "id": 3777098561,
      "node_id": "LA_kwDOGBlvNc7hIfNB",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-build",
      "name": "Cmd-forge-build",
      "color": "006B75",
      "default": false,
      "description": "Command: forge build"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2022-03-02T01:10:56Z",
  "updated_at": "2022-03-14T23:36:34Z",
  "closed_at": "2022-03-14T23:31:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.1.0 (d08a59e 2022-03-01T00:29:11.959377+00:00)\n\n### What command(s) is the bug in?\n\nforge build\n\n### Operating System\n\nmacOS (amd)\n\n### Describe the bug\n\nWhen attempting to compile, forge throws the following error:\r\n\r\n```\r\nCompiling...\r\nCompiling 1 files with 0.8.10\r\nCompiling 26 files with 0.8.11\r\nCompilation finished successfully\r\nCompilation finished successfully\r\nError: \r\n   0: Compiler run failed\r\n      CompilerError: Stack too deep when compiling inline assembly: Variable value0 is 3 slot(s) too deep inside the stack.\r\n\r\n      \r\n   0: \r\n\r\nLocation:\r\n   cli/src/cmd/mod.rs:87\r\n\r\n  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” BACKTRACE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\r\n   1: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   2: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   3: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   4: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   5: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   6: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   7: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   8: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   9: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n\r\nRun with COLORBT_SHOW_HIDDEN=1 environment variable to disable frame filtering.\r\nthetechnocratic:~/code/defi/os/alchemix/gelato-keepers/gelato-keepers$ forge --v\r\n```\r\n\r\nI have narrowed it down to a function that builds and saves a struct to a mapping.  The struct is of the format:\r\n```\r\n    struct MyStruct {\r\n        uint8 a;\r\n        address b;\r\n        address c;\r\n        uint256 d;\r\n        uint256 e;\r\n        uint256 f;\r\n        uint256 g;\r\n        uint256 h;\r\n        uint256 i;\r\n        uint256 j;\r\n        uint256 k;\r\n        uint256 l;\r\n        uint256 m;\r\n        uint256 n;\r\n        bool o;\r\n    }\r\n```\r\n\r\nWhen i set the optimizer to 1 or more runs, the error names 2 slots instead of 3:\r\n```\r\nCompiling...\r\nCompiling 1 files with 0.8.10\r\nCompiling 26 files with 0.8.11\r\nCompilation finished successfully\r\nCompilation finished successfully\r\nError: \r\n   0: Compiler run failed\r\n      CompilerError: Stack too deep when compiling inline assembly: Variable value0 is 2 slot(s) too deep inside the stack.\r\n\r\n      \r\n   0: \r\n\r\nLocation:\r\n   cli/src/cmd/mod.rs:87\r\n\r\n  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” BACKTRACE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\r\n   1: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   2: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   3: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   4: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   5: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   6: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   7: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   8: __mh_execute_header<unknown>\r\n      at <unknown source file>:<unknown line>\r\n   9: _main<unknown>\r\n      at <unknown source file>:<unknown line>\r\n\r\nRun with COLORBT_SHOW_HIDDEN=1 environment variable to disable frame filtering.\r\n```\r\n\r\nsimilar (and actually more complex / deeper stack) code compiles fine when i use hardhat.",
  "closed_by": {
    "login": "thetechnocratic",
    "id": 69377900,
    "node_id": "MDQ6VXNlcjY5Mzc3OTAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/69377900?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thetechnocratic",
    "html_url": "https://github.com/thetechnocratic",
    "followers_url": "https://api.github.com/users/thetechnocratic/followers",
    "following_url": "https://api.github.com/users/thetechnocratic/following{/other_user}",
    "gists_url": "https://api.github.com/users/thetechnocratic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thetechnocratic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thetechnocratic/subscriptions",
    "organizations_url": "https://api.github.com/users/thetechnocratic/orgs",
    "repos_url": "https://api.github.com/users/thetechnocratic/repos",
    "events_url": "https://api.github.com/users/thetechnocratic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thetechnocratic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/832/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1056293092",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1056293092",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1056293092,
    "node_id": "IC_kwDOGBlvNc4-9cDk",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-02T05:47:22Z",
    "updated_at": "2022-03-02T05:47:22Z",
    "author_association": "MEMBER",
    "body": "Could you please share the `forge` command you ran, as well as any `foundry.toml` in your repo?\r\n\r\nSame question on Hardhat, what does your `hardhat.config.js` look like?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1056293092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1057002925",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1057002925",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1057002925,
    "node_id": "IC_kwDOGBlvNc4_AJWt",
    "user": {
      "login": "thetechnocratic",
      "id": 69377900,
      "node_id": "MDQ6VXNlcjY5Mzc3OTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/69377900?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thetechnocratic",
      "html_url": "https://github.com/thetechnocratic",
      "followers_url": "https://api.github.com/users/thetechnocratic/followers",
      "following_url": "https://api.github.com/users/thetechnocratic/following{/other_user}",
      "gists_url": "https://api.github.com/users/thetechnocratic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thetechnocratic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thetechnocratic/subscriptions",
      "organizations_url": "https://api.github.com/users/thetechnocratic/orgs",
      "repos_url": "https://api.github.com/users/thetechnocratic/repos",
      "events_url": "https://api.github.com/users/thetechnocratic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thetechnocratic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-02T14:39:22Z",
    "updated_at": "2022-03-02T14:39:22Z",
    "author_association": "NONE",
    "body": "`export RUST_BACKTRACE=full; forge build`\r\n\r\nfoundry.toml:\r\n```\r\n[default]\r\nsrc = 'src'\r\nout = 'out'\r\nlibs = ['lib']\r\nremappings = ['ds-test/=lib/ds-test/src/']\r\noptimizer = false\r\noptimizer_runs = 0\r\nevm_version = 'london'\r\n```\r\n\r\nhardhat.config.ts:\r\n```\r\n{\r\n  solidity: {\r\n    version: \"0.8.11\",\r\n    settings: {\r\n      optimizer: {\r\n        enabled: true,\r\n        runs: 200,\r\n      },\r\n    },\r\n  },\r\n  contractSizer: {\r\n    alphaSort: true,\r\n    disambiguatePaths: false,\r\n    runOnCompile: false,\r\n  },\r\n  networks: {\r\n    coverage: {\r\n      url: \"http://localhost:8555\",\r\n      gas: 15000000000,\r\n      gasPrice: 80000000000,\r\n      baseFee: 1,\r\n    },\r\n    mainnet: {\r\n      chainId: 1,\r\n      hardfork: \"london\",\r\n      gasPrice: 100000000000,\r\n      url: `https://eth-mainnet.alchemyapi.io/v2/${process.env[\"ALCHEMY_API_KEY\"]}`,\r\n      timeout: 60000000,\r\n      accounts: [process.env.MAINNET_DEPLOYER_PK]\r\n    },\r\n    hardhat: {\r\n      chainId: 1337,\r\n      allowUnlimitedContractSize: false,\r\n      hardfork: \"london\",\r\n      accounts: [\r\n        {\r\n          privateKey: process.env.MAINNET_DEPLOYER_PK || generateRandomHex(64),\r\n          balance: \"1000000000000000000000000\",\r\n        },\r\n        {\r\n          generateRandomHex(64),\r\n          balance: \"2000000000000000000000000\",\r\n        },\r\n        {\r\n          generateRandomHex(64),\r\n          balance: \"3000000000000000000000000\",\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  gasReporter: {\r\n    enabled: process.env.REPORT_GAS !== undefined,\r\n    coinmarketcap: process.env.COINMARKETCAP_API_KEY || \"\",\r\n    currency: \"USD\",\r\n  },\r\n  etherscan: {\r\n    apiKey: process.env.ETHERSCAN_API_KEY,\r\n  },\r\n};```\r\n\r\nI can change the hardhat optimizer settings to whatever i want and it still works.\r\nWhen i change the optimizer settings in the foundry.toml, the only thing that's different is the error calls out 2 slots instead of 3.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1057002925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1059827570",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1059827570",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1059827570,
    "node_id": "IC_kwDOGBlvNc4_K69y",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-05T20:33:44Z",
    "updated_at": "2022-03-05T20:33:44Z",
    "author_association": "MEMBER",
    "body": "> I can change the hardhat optimizer settings to whatever i want and it still works.\r\nWhen i change the optimizer settings in the foundry.toml, the only thing that's different is the error calls out 2 slots instead of 3.\r\n\r\nboth `enabled` and `runs`?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1059827570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1059992230",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1059992230",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1059992230,
    "node_id": "IC_kwDOGBlvNc4_LjKm",
    "user": {
      "login": "thetechnocratic",
      "id": 69377900,
      "node_id": "MDQ6VXNlcjY5Mzc3OTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/69377900?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thetechnocratic",
      "html_url": "https://github.com/thetechnocratic",
      "followers_url": "https://api.github.com/users/thetechnocratic/followers",
      "following_url": "https://api.github.com/users/thetechnocratic/following{/other_user}",
      "gists_url": "https://api.github.com/users/thetechnocratic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thetechnocratic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thetechnocratic/subscriptions",
      "organizations_url": "https://api.github.com/users/thetechnocratic/orgs",
      "repos_url": "https://api.github.com/users/thetechnocratic/repos",
      "events_url": "https://api.github.com/users/thetechnocratic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thetechnocratic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-06T16:19:37Z",
    "updated_at": "2022-03-06T16:19:37Z",
    "author_association": "NONE",
    "body": "> > I can change the hardhat optimizer settings to whatever i want and it still works.\r\n> > When i change the optimizer settings in the foundry.toml, the only thing that's different is the error calls out 2 slots instead of 3.\r\n> \r\n> both `enabled` and `runs`?\r\n\r\nWhen the optimizer is enabled and runs > 0, the error calls out 2 slots instead of 3.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1059992230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063350004",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1063350004",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1063350004,
    "node_id": "IC_kwDOGBlvNc4_YW70",
    "user": {
      "login": "0xfoobar",
      "id": 83792390,
      "node_id": "MDQ6VXNlcjgzNzkyMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/83792390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xfoobar",
      "html_url": "https://github.com/0xfoobar",
      "followers_url": "https://api.github.com/users/0xfoobar/followers",
      "following_url": "https://api.github.com/users/0xfoobar/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xfoobar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xfoobar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xfoobar/subscriptions",
      "organizations_url": "https://api.github.com/users/0xfoobar/orgs",
      "repos_url": "https://api.github.com/users/0xfoobar/repos",
      "events_url": "https://api.github.com/users/0xfoobar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xfoobar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-09T20:39:23Z",
    "updated_at": "2022-03-09T20:43:20Z",
    "author_association": "NONE",
    "body": "Here's a complete reproducible example @onbjerg @gakonst \r\n\r\n```\r\npragma solidity ^0.8.11;\r\n\r\ncontract StackTooDeep {\r\n    struct MyStruct {\r\n        uint8 a;\r\n        address b;\r\n        address c;\r\n        uint256 d;\r\n        uint256 e;\r\n        uint256 f;\r\n        uint256 g;\r\n        uint256 h;\r\n        uint256 i;\r\n        uint256 j;\r\n        uint256 k;\r\n        uint256 l;\r\n        uint256 m;\r\n        uint256 n;\r\n        bool o;\r\n    }\r\n\r\n    mapping(uint => MyStruct) public map;\r\n}\r\n```\r\n\r\nThis fails on compilation with `forge build` with the error technocratic mentioned above. Interestingly enough, removing the mapping `map` (or just setting its visibility to internal/private) lets the compilation succeed, even though the map is not used anywhere. Any clue what's going on?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063350004/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063580340",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1063580340",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1063580340,
    "node_id": "IC_kwDOGBlvNc4_ZPK0",
    "user": {
      "login": "deomaius",
      "id": 29151088,
      "node_id": "MDQ6VXNlcjI5MTUxMDg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29151088?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deomaius",
      "html_url": "https://github.com/deomaius",
      "followers_url": "https://api.github.com/users/deomaius/followers",
      "following_url": "https://api.github.com/users/deomaius/following{/other_user}",
      "gists_url": "https://api.github.com/users/deomaius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deomaius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deomaius/subscriptions",
      "organizations_url": "https://api.github.com/users/deomaius/orgs",
      "repos_url": "https://api.github.com/users/deomaius/repos",
      "events_url": "https://api.github.com/users/deomaius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deomaius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-10T02:10:28Z",
    "updated_at": "2022-03-10T02:10:28Z",
    "author_association": "NONE",
    "body": "I was also facing this error - try compressing similar typed params into arrays and you should be able to resolve it, the error is accurate to the restraints of the compilation process using rust it seems. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063580340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063614436",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1063614436",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1063614436,
    "node_id": "IC_kwDOGBlvNc4_ZXfk",
    "user": {
      "login": "0xfoobar",
      "id": 83792390,
      "node_id": "MDQ6VXNlcjgzNzkyMzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/83792390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xfoobar",
      "html_url": "https://github.com/0xfoobar",
      "followers_url": "https://api.github.com/users/0xfoobar/followers",
      "following_url": "https://api.github.com/users/0xfoobar/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xfoobar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xfoobar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xfoobar/subscriptions",
      "organizations_url": "https://api.github.com/users/0xfoobar/orgs",
      "repos_url": "https://api.github.com/users/0xfoobar/repos",
      "events_url": "https://api.github.com/users/0xfoobar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xfoobar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-10T03:26:44Z",
    "updated_at": "2022-03-10T03:26:44Z",
    "author_association": "NONE",
    "body": "Appreciate the feedback, but this is an EVM compatibility error and our equivalence concerns mean we can't change the underlying code. If it comes with Hardhat, it should compile with Foundry. So trying to figure out the best way to fix the underlying compiler so it compiles valid Solidity code properly.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063614436/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063819442",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1063819442",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1063819442,
    "node_id": "IC_kwDOGBlvNc4_aJiy",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-10T08:59:41Z",
    "updated_at": "2022-03-10T08:59:41Z",
    "author_association": "MEMBER",
    "body": "this also fails in remix, can have a look at hardhat's settings.\r\nRefactoring this structure is a good call though :)",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1063819442/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1064205357",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1064205357",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1064205357,
    "node_id": "IC_kwDOGBlvNc4_bnwt",
    "user": {
      "login": "onbjerg",
      "id": 8862627,
      "node_id": "MDQ6VXNlcjg4NjI2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8862627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onbjerg",
      "html_url": "https://github.com/onbjerg",
      "followers_url": "https://api.github.com/users/onbjerg/followers",
      "following_url": "https://api.github.com/users/onbjerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/onbjerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onbjerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onbjerg/subscriptions",
      "organizations_url": "https://api.github.com/users/onbjerg/orgs",
      "repos_url": "https://api.github.com/users/onbjerg/repos",
      "events_url": "https://api.github.com/users/onbjerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onbjerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-10T15:48:56Z",
    "updated_at": "2022-03-10T15:48:56Z",
    "author_association": "MEMBER",
    "body": "> I was also facing this error - try compressing similar typed params into arrays and you should be able to resolve it, the error is accurate to the restraints of the compilation process using rust it seems.\r\n\r\nThis is not a Rust issue, the error is directly from solc\r\n\r\n> ```\r\n> pragma solidity ^0.8.11;\r\n> \r\n> contract StackTooDeep {\r\n>     struct MyStruct {\r\n>         // ..\r\n>     }\r\n> \r\n>     mapping(uint => MyStruct) public map;\r\n> }\r\n> ```\r\n> \r\n> This fails on compilation with `forge build` with the error technocratic mentioned above. Interestingly enough, removing the mapping `map` (or just setting its visibility to internal/private) lets the compilation succeed, even though the map is not used anywhere. Any clue what's going on?\r\n\r\nThe map *is* used because Solidity will generate getter functions for it unless it is internal/private ğŸ˜„ \r\n\r\nMy best guess is that it is some flag we set that Hardhat doesn't. I checked the Solidity issue tracker and most of the \"stack to deep\" issues are related to their new codegen backend, but I don't think that's enabled by default?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1064205357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1067409707",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1067409707",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1067409707,
    "node_id": "IC_kwDOGBlvNc4_n2Er",
    "user": {
      "login": "thetechnocratic",
      "id": 69377900,
      "node_id": "MDQ6VXNlcjY5Mzc3OTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/69377900?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thetechnocratic",
      "html_url": "https://github.com/thetechnocratic",
      "followers_url": "https://api.github.com/users/thetechnocratic/followers",
      "following_url": "https://api.github.com/users/thetechnocratic/following{/other_user}",
      "gists_url": "https://api.github.com/users/thetechnocratic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thetechnocratic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thetechnocratic/subscriptions",
      "organizations_url": "https://api.github.com/users/thetechnocratic/orgs",
      "repos_url": "https://api.github.com/users/thetechnocratic/repos",
      "events_url": "https://api.github.com/users/thetechnocratic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thetechnocratic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-14T23:31:29Z",
    "updated_at": "2022-03-14T23:31:29Z",
    "author_association": "NONE",
    "body": "After more time looking at this I don't think the failure is unique to foundry, so I'm going to close this issue.\r\n\r\nAs @0xfoobar mentioned, setting the map to internal/private fixes the compilation error, which is sufficient for what we need. That means that there is likely something in the auto-generated getter that is causing the \"stack too deep\" error.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1067409707/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1067413059",
    "html_url": "https://github.com/foundry-rs/foundry/issues/832#issuecomment-1067413059",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/832",
    "id": 1067413059,
    "node_id": "IC_kwDOGBlvNc4_n25D",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-14T23:36:34Z",
    "updated_at": "2022-03-14T23:36:34Z",
    "author_association": "MEMBER",
    "body": "sg! thanks! if you think there's some foundry-specific issue that causes extra stack slots to be allocated for whatever reason, please let us know",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1067413059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

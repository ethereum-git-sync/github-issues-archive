{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4693",
  "id": 1653350928,
  "node_id": "I_kwDOGBlvNc5ijCIQ",
  "number": 4693,
  "title": "The help comments for `--gas-limit` and `--block-gas-limit` are the same.",
  "user": {
    "login": "minaminao",
    "id": 20497787,
    "node_id": "MDQ6VXNlcjIwNDk3Nzg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/20497787?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/minaminao",
    "html_url": "https://github.com/minaminao",
    "followers_url": "https://api.github.com/users/minaminao/followers",
    "following_url": "https://api.github.com/users/minaminao/following{/other_user}",
    "gists_url": "https://api.github.com/users/minaminao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/minaminao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/minaminao/subscriptions",
    "organizations_url": "https://api.github.com/users/minaminao/orgs",
    "repos_url": "https://api.github.com/users/minaminao/repos",
    "events_url": "https://api.github.com/users/minaminao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/minaminao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-04T07:34:45Z",
  "updated_at": "2023-04-04T09:35:01Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [ ] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (0e7ff88 2023-04-04T00:11:28.439758000Z)\n\n### What command(s) is the bug in?\n\nforge test --help, forge script --help\n\n### Operating System\n\nmacOS (Intel)\n\n### Describe the bug\n\nThe help messages for `--gas-limit` and `--block-gas-limit` are confusing because they are the same.\r\n\r\n```\r\n$ forge test --help | grep gas-limit -A 1\r\n      --gas-limit <GAS_LIMIT>\r\n          The block gas limit\r\n--\r\n      --block-gas-limit <GAS_LIMIT>\r\n          The block gas limit\r\n```\r\n\r\nThe following code shows that the `--block-gas-limit` option is prioritized.\r\n\r\n```rust\r\n    pub fn gas_limit(&self) -> U256 {\r\n        self.env.block_gas_limit.unwrap_or(self.env.gas_limit).into()\r\n    }\r\n```\r\n\r\nWhen I actually specified both and got the value of `--block-gas-limit` for `block.gaslimit`. If only one was specified, that value was given.\r\n\r\nIf they are equivalent, it would be easier to understand if one or the other is deleted. If not, it would be better to change the help message.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495520864",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4693#issuecomment-1495520864",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693",
    "id": 1495520864,
    "node_id": "IC_kwDOGBlvNc5ZI9Zg",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T08:00:39Z",
    "updated_at": "2023-04-04T08:00:39Z",
    "author_association": "MEMBER",
    "body": "I'm not sure the `gas-limit` isn't actually intended for the transaction.\r\n\r\nbut this is redundant atm, but not sure what the ideal solution here is.\r\n\r\nwhat do you think?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495520864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495653101",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4693#issuecomment-1495653101",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4693",
    "id": 1495653101,
    "node_id": "IC_kwDOGBlvNc5ZJdrt",
    "user": {
      "login": "minaminao",
      "id": 20497787,
      "node_id": "MDQ6VXNlcjIwNDk3Nzg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20497787?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minaminao",
      "html_url": "https://github.com/minaminao",
      "followers_url": "https://api.github.com/users/minaminao/followers",
      "following_url": "https://api.github.com/users/minaminao/following{/other_user}",
      "gists_url": "https://api.github.com/users/minaminao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minaminao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minaminao/subscriptions",
      "organizations_url": "https://api.github.com/users/minaminao/orgs",
      "repos_url": "https://api.github.com/users/minaminao/repos",
      "events_url": "https://api.github.com/users/minaminao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minaminao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T09:35:00Z",
    "updated_at": "2023-04-04T09:35:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mattsse Thanks for your comment! Do you mean that `--gas-limit` may have been created as the gas limit for a transaction, but the option is redundant now because only one transaction is executed per block in the current test and script?\r\n\r\nCutting it short, I think it would be better to keep `gas_limit` and remove the `--gas-limit` option.\r\n\r\nIt's difficult for users to guess from the current help message if the `--gas-limit` was designed as a future role for the transaction gas limit, but now behaves as a block gas limit. In `cast`, `--gas-limit` is the transaction gas limit, and it's not trivial that specifying `--gas-limit` changes the `block.gaslimit`. I think the behavior of the `--gas-limit` option in `forge` and `cast` should be consistent.\r\n\r\nAlso, I don't currently need the transaction gas limit option in my tests and scripts. I think the block gas limit option is sufficient. I can think of cases where it's necessary to specify a block gas limit, but I can't think of any cases where it's necessary to specify a transaction gas limit using the option. This is because the function call option `{gas: <foo>}` can be used to specify the transaction gas limit. (related: #2627)\r\n\r\nHowever, I think the implementation with `gas_limit` and `block_gas_limit` should be left as is if there is even a slight possibility that the the roles of two vars will have differences in the future. The performance will not change if `gas_limit` and `block_gas_limit` are present. I think it would be a waste to reimplement them in the future.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1495653101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/6791",
  "id": 2080749371,
  "node_id": "I_kwDOGBlvNc58Bbc7",
  "number": 6791,
  "title": "Verbosity Level of 3 or higher makes forked tests 10-30x slower",
  "user": {
    "login": "Philogy",
    "id": 21957732,
    "node_id": "MDQ6VXNlcjIxOTU3NzMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/21957732?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Philogy",
    "html_url": "https://github.com/Philogy",
    "followers_url": "https://api.github.com/users/Philogy/followers",
    "following_url": "https://api.github.com/users/Philogy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Philogy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Philogy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Philogy/subscriptions",
    "organizations_url": "https://api.github.com/users/Philogy/orgs",
    "repos_url": "https://api.github.com/users/Philogy/repos",
    "events_url": "https://api.github.com/users/Philogy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Philogy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2024-01-14T14:23:49Z",
  "updated_at": "2024-01-15T13:24:37Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Have you ensured that all of these are up to date?\n\n- [X] Foundry\n- [X] Foundryup\n\n### What version of Foundry are you on?\n\nforge 0.2.0 (293fad7 2024-01-14T00:19:24.272194000Z)\n\n### What command(s) is the bug in?\n\nforge test\n\n### Operating System\n\nmacOS (Apple Silicon)\n\n### Describe the bug\n\nWhen running a forked foundry test (--fork-url and --fork-block-number flags set) the test has a certain runtime, in my situation it's 2-3s total (using `time forge ...` to measure). However as soon as you set the verbosity level to 3 or higher (-vvv and up) the test takes 15x-30x longer to run, *even if* no trace is actually shown (because e.g. verbosity level is 3 and the tests are passing).",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1890995387",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6791#issuecomment-1890995387",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791",
    "id": 1890995387,
    "node_id": "IC_kwDOGBlvNc5wtky7",
    "user": {
      "login": "Philogy",
      "id": 21957732,
      "node_id": "MDQ6VXNlcjIxOTU3NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/21957732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Philogy",
      "html_url": "https://github.com/Philogy",
      "followers_url": "https://api.github.com/users/Philogy/followers",
      "following_url": "https://api.github.com/users/Philogy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Philogy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Philogy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Philogy/subscriptions",
      "organizations_url": "https://api.github.com/users/Philogy/orgs",
      "repos_url": "https://api.github.com/users/Philogy/repos",
      "events_url": "https://api.github.com/users/Philogy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Philogy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-14T16:17:09Z",
    "updated_at": "2024-01-14T16:17:09Z",
    "author_association": "NONE",
    "body": "Note: Adding an etherscan key seems to speed this up considerably, I assume what's happening in the background is it's trying to resolve the name of contracts in the trace and not caching all those calls making it even slower when you're using the public etherscan end-points?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1890995387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1891006526",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6791#issuecomment-1891006526",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791",
    "id": 1891006526,
    "node_id": "IC_kwDOGBlvNc5wtng-",
    "user": {
      "login": "Philogy",
      "id": 21957732,
      "node_id": "MDQ6VXNlcjIxOTU3NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/21957732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Philogy",
      "html_url": "https://github.com/Philogy",
      "followers_url": "https://api.github.com/users/Philogy/followers",
      "following_url": "https://api.github.com/users/Philogy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Philogy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Philogy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Philogy/subscriptions",
      "organizations_url": "https://api.github.com/users/Philogy/orgs",
      "repos_url": "https://api.github.com/users/Philogy/repos",
      "events_url": "https://api.github.com/users/Philogy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Philogy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-14T17:04:45Z",
    "updated_at": "2024-01-14T17:04:45Z",
    "author_association": "NONE",
    "body": "As a note the running is \"only\" 3-4x slower upon improving the internet connection. Could be a separate issue but `--offline` doesn't seem to impact the speed at which traces are constructed and rendered",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1891006526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1892171011",
    "html_url": "https://github.com/foundry-rs/foundry/issues/6791#issuecomment-1892171011",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/6791",
    "id": 1892171011,
    "node_id": "IC_kwDOGBlvNc5wyD0D",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-15T13:23:43Z",
    "updated_at": "2024-01-15T13:24:37Z",
    "author_association": "MEMBER",
    "body": "hmm, this is odd.\r\n\r\ncould you perhaps share the etherscan related settings of `forge config`? and the logs if you run with `RUST_LOG=etherscanidentifier`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1892171011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

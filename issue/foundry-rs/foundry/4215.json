{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4215",
  "id": 1561007225,
  "node_id": "I_kwDOGBlvNc5dCxR5",
  "number": 4215,
  "title": "Remove git config --global requirements from forge",
  "user": {
    "login": "activate-glacier-instinct",
    "id": 101533082,
    "node_id": "U_kgDOBg1Fmg",
    "avatar_url": "https://avatars.githubusercontent.com/u/101533082?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/activate-glacier-instinct",
    "html_url": "https://github.com/activate-glacier-instinct",
    "followers_url": "https://api.github.com/users/activate-glacier-instinct/followers",
    "following_url": "https://api.github.com/users/activate-glacier-instinct/following{/other_user}",
    "gists_url": "https://api.github.com/users/activate-glacier-instinct/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/activate-glacier-instinct/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/activate-glacier-instinct/subscriptions",
    "organizations_url": "https://api.github.com/users/activate-glacier-instinct/orgs",
    "repos_url": "https://api.github.com/users/activate-glacier-instinct/repos",
    "events_url": "https://api.github.com/users/activate-glacier-instinct/events{/privacy}",
    "received_events_url": "https://api.github.com/users/activate-glacier-instinct/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-01-28T20:45:54Z",
  "updated_at": "2023-01-30T08:01:57Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nBeing able to run forge init on a system that does not have global git settings configured.\r\n\r\n# Requested behaviour\r\n\r\n1. Test git settings\r\n\r\n```\r\ngit config --list | grep 'user.'       // Outputs nothing\r\n\r\n```\r\n\r\n2. Forge init\r\n\r\n```\r\nforge init hello_foundry             // Creates the project\r\n\r\n```\r\n\r\n# Current behaviour\r\n\r\n1. Test git settings\r\n\r\n```\r\ngit config --list | grep 'user.'       // Outputs nothing\r\n\r\n```\r\n\r\n2. Forge init\r\n\r\n```\r\nforge init hello_foundry    \r\n\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nInitializing /home/USER/foundry/hello_foundry...\r\nError: \r\nAuthor identity unknown\r\n\r\n*** Please tell me who you are.\r\n\r\nRun\r\n\r\n  git config --global user.email \"you@example.com\"\r\n  git config --global user.name \"Your Name\"\r\n\r\nto set your account's default identity.\r\nOmit --global to set the identity only in this repository.\r\n\r\nfatal: unable to auto-detect e-mail address (got 'USER')\r\n\r\n\r\n```\n\n### Additional context\n\nBackground\r\nMost of my crypto work is anon, so I don't globally set my git credentials. I set them up per repo using scripts.\r\n\r\nThis is the reason why I'm running the above command in an empty folder. \r\n\r\nSetting up a foundry project within a pre-initialised repo also doesn't work. More on that here: https://github.com/foundry-rs/foundry/issues/4214",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1407764602",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4215#issuecomment-1407764602",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215",
    "id": 1407764602,
    "node_id": "IC_kwDOGBlvNc5T6Mh6",
    "user": {
      "login": "DaniPopes",
      "id": 57450786,
      "node_id": "MDQ6VXNlcjU3NDUwNzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/57450786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DaniPopes",
      "html_url": "https://github.com/DaniPopes",
      "followers_url": "https://api.github.com/users/DaniPopes/followers",
      "following_url": "https://api.github.com/users/DaniPopes/following{/other_user}",
      "gists_url": "https://api.github.com/users/DaniPopes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DaniPopes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DaniPopes/subscriptions",
      "organizations_url": "https://api.github.com/users/DaniPopes/orgs",
      "repos_url": "https://api.github.com/users/DaniPopes/repos",
      "events_url": "https://api.github.com/users/DaniPopes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DaniPopes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-29T20:41:18Z",
    "updated_at": "2023-01-29T20:46:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm assuming this error occurs when we try to commit, and since there are no local or global credentials the commit command fails.\r\nCan you please retry with the `--no-commit` flag, or by setting email environment variable (`EMAIL=\"...\" forge init ...`, commit author name [defaults to the system user/hostname](https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables))?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1407764602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1407827193",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4215#issuecomment-1407827193",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215",
    "id": 1407827193,
    "node_id": "IC_kwDOGBlvNc5T6bz5",
    "user": {
      "login": "activate-glacier-instinct",
      "id": 101533082,
      "node_id": "U_kgDOBg1Fmg",
      "avatar_url": "https://avatars.githubusercontent.com/u/101533082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/activate-glacier-instinct",
      "html_url": "https://github.com/activate-glacier-instinct",
      "followers_url": "https://api.github.com/users/activate-glacier-instinct/followers",
      "following_url": "https://api.github.com/users/activate-glacier-instinct/following{/other_user}",
      "gists_url": "https://api.github.com/users/activate-glacier-instinct/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/activate-glacier-instinct/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/activate-glacier-instinct/subscriptions",
      "organizations_url": "https://api.github.com/users/activate-glacier-instinct/orgs",
      "repos_url": "https://api.github.com/users/activate-glacier-instinct/repos",
      "events_url": "https://api.github.com/users/activate-glacier-instinct/events{/privacy}",
      "received_events_url": "https://api.github.com/users/activate-glacier-instinct/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T00:42:57Z",
    "updated_at": "2023-01-30T00:42:57Z",
    "author_association": "NONE",
    "body": "A. `forge init {PROJECT_NAME} --no-commit` was a pass for me.\r\n\r\nFor reference I created the project in an projects directory on a system with no global git configs.\r\n\r\n1, Check git config \r\n\r\n```\r\ngit config --list | grep 'user.'           // Outputs nothing\r\n\r\n```\r\n\r\n2. Location folder \r\n\r\n```\r\nls                                                  // Outputs folders within the, ie. not an empty folder \r\n\r\n```\r\n\r\n3. Forge init \r\n\r\n```\r\nforge init hello_foundry --no-commit  // Creates the project as expected\r\n\r\n```\r\n\r\n4. Check the project creation\r\n\r\n```\r\nls                                                       // contains `hello_foundry` folder\r\n\r\n```\r\n\r\n=======\r\n\r\nB. `forge init --template {TEMPLATE} {PROJECT_NAME} --no-commit` was a fail\r\n\r\nI also wanted to test project creation from a template. Feels like most users would want to use this scaffolding.\r\n\r\nGot the following error\r\n\r\n```\r\nerror: the argument '--template <TEMPLATE>' cannot be used with '--no-commit'\r\n\r\nUsage: forge init --template <TEMPLATE> <ROOT>\r\n\r\nFor more information, try '--help'.\r\n\r\n```\r\n\r\n=======\r\n\r\nC. Comments \r\n\r\nWhen purely looking at `forge-init` as a project scaffolding tool, the committing of the scaffold seems odd. \r\n\r\nI'm comparing it to other large scaffolding tools: create-react-app (98.7k stars on Github)\r\n\r\nFor example create-react-app doesn't init the repo for the user:\r\n\r\n0.1 Pre-requisites\r\n\r\n- Requires node to be installed on the system, best installed via [nvm](https://github.com/nvm-sh/nvm)  \r\n\r\n1. Run the create-react-app\r\n\r\n```\r\nnpx create-react-app test-react\r\n\r\n```\r\n\r\n2. List the created folder\r\n\r\n```\r\nls test-react                                       // Outputs project files\r\n\r\n```\r\n\r\n3. Check the project repo\r\n\r\n```\r\ncd test-react && git status \r\n\r\n```\r\n\r\nOutputs:\r\n\r\n```\r\nfatal: not a git repository (or any of the parent directories): .git\r\n\r\n``\r\n\r\n=======\r\n\r\nD. Thank you\r\n\r\nThanks a lot @DaniPopes I can move forward with the `--no-commit` workaround.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1407827193/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1408145043",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4215#issuecomment-1408145043",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4215",
    "id": 1408145043,
    "node_id": "IC_kwDOGBlvNc5T7paT",
    "user": {
      "login": "DaniPopes",
      "id": 57450786,
      "node_id": "MDQ6VXNlcjU3NDUwNzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/57450786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DaniPopes",
      "html_url": "https://github.com/DaniPopes",
      "followers_url": "https://api.github.com/users/DaniPopes/followers",
      "following_url": "https://api.github.com/users/DaniPopes/following{/other_user}",
      "gists_url": "https://api.github.com/users/DaniPopes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DaniPopes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DaniPopes/subscriptions",
      "organizations_url": "https://api.github.com/users/DaniPopes/orgs",
      "repos_url": "https://api.github.com/users/DaniPopes/repos",
      "events_url": "https://api.github.com/users/DaniPopes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DaniPopes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-30T08:01:57Z",
    "updated_at": "2023-01-30T08:01:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "A. great, I guess we could make the error clearer for future users\n\nB. that's definitely a bug, easy fix for anyone to implement: just remove the \"conflicts\" in the clap args and put the template commit under an if block\n\nC. It really depends on the framework as well. Rust projects initialized with Cargo also start with a vcs (like git). But also this is nice for Foundry since we are still using git submodules as dependencies",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1408145043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

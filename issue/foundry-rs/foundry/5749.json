{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5749",
  "id": 1873777722,
  "node_id": "I_kwDOGBlvNc5vr5Q6",
  "number": 5749,
  "title": "ethersjs deployment transactions via `eth_sendRawTransaction` fail with ECONNRESET",
  "user": {
    "login": "alvrs",
    "id": 89248902,
    "node_id": "MDQ6VXNlcjg5MjQ4OTAy",
    "avatar_url": "https://avatars.githubusercontent.com/u/89248902?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alvrs",
    "html_url": "https://github.com/alvrs",
    "followers_url": "https://api.github.com/users/alvrs/followers",
    "following_url": "https://api.github.com/users/alvrs/following{/other_user}",
    "gists_url": "https://api.github.com/users/alvrs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alvrs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alvrs/subscriptions",
    "organizations_url": "https://api.github.com/users/alvrs/orgs",
    "repos_url": "https://api.github.com/users/alvrs/repos",
    "events_url": "https://api.github.com/users/alvrs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alvrs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-08-30T14:15:35Z",
  "updated_at": "2023-08-30T16:37:15Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nAnvil\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (6c4c68a 2023-08-30T00:33:17.038213000Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\n_No response_\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nDeploy transactions (using ethersjs) in our CI suddenly started failing without any code changes with the following error: \r\n<details>\r\n<summary>Show error</summary>\r\n```\r\npackages/contracts test: Error: missing response (requestBody=\"{\\\"method\\\":\\\"eth_sendRawTransaction\\\",\\\"params\\\":[\\\"0x02f91285827a69058080830fff828080b91232608060405234801561001057600080fd5b50611212806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063469c811014610030575b600080fd5b61004361003e366004610daa565b610045565b005b61004e81610051565b50565b600061005c826100c9565b604080516000808252602082018352818301527f4d6573736167655461626c6500000000000000000000000000000000000000006050820152815180820383018152606082019092529192506100c4906100b590610e2a565b82846100bf610107565b61017f565b505050565b606060006100db8351603881901b1790565b905080836040516020016100f0929190610e7a565b604051602081830303815290604052915050919050565b6040805160018082528183019092526000918291906020808301908036833701905050905060c58160008151811061014157610141610ea0565b602002602001019060c581111561015a5761015a610eb6565b908160c581111561016d5761016d610eb6565b9052506101798161024b565b91505090565b60006101896103cf565b90503073ffffffffffffffffffffffffffffffffffffffff8216036101b9576101b48585858561041b565b610244565b6040517f8818929400000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff821690638818929490610211908890889088908890600401610f33565b600060405180830381600087803b15801561022b57600080fd5b505af115801561023f573d6000803e3d6000fd5b505050505b5050505050565b6000601c825111156102975781516040517f5318beb900000000000000000000000000000000000000000000000000000000815260040161028e91815260200190565b60405180910390fd5b60008080805b855181101561036f5760006102db8783815181106102bd576102bd610ea0565b602002602001015160c58111156102d6576102d6610eb6565b610526565b9050806000036102f057600190920191610328565b8215610328576040517ff1e56be400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b808401935081601b0360080287838151811061034657610346610ea0565b602002602001015160c581111561035f5761035f610eb6565b901b94909417935060010161029d565b5060058111156103ae576040517f5318beb90000000000000000000000000000000000000000000000000000000081526004810182905260240161028e565b935160e085901b94900360e81b60f09190911b919091171791909117919050565b7f629a4c26e296b22a8e0856e9f6ecb2d1008d7e00081111962cd175fa7488e1755460009073ffffffffffffffffffffffffffffffffffffffff1680610416573391505090565b919050565b6104258183610586565b50507f230ea578f076e518b96d8b1b4ca2e5dc4898fd02d11e43c9f067c22d1c391d3b84848460405161045a93929190610f70565b60405180910390a1600061046d85610620565b905060005b815181101561051e57600082828151811061048f5761048f610ea0565b602002602001015190508073ffffffffffffffffffffffffffffffffffffffff1663b08679bf888888886040518563ffffffff1660e01b81526004016104d89493929190610f33565b600060405180830381600087803b1580156104f257600080fd5b505af1158015610506573d6000803e3d6000fd5b5050505050808061051690610fbb565b915050610472565b505050505050565b6000808260c581111561053b5761053b610eb6565b60ff169050606181101561055557601f1660010192915050565b60618360c581111561056957610569610eb6565b036105775750601492915050565b50600092915050565b50919050565b6000806105938460f01c90565b91508160006105a186610705565b11156105d1578284016020015191506105c466ffffffffffffff83166020610fd5565b6105ce9082610fd5565b90505b835181146106185783516040517f521b3d3300000000000000000000000000000000000000000000000000000000815261028e918391600401918252602082015260400190565b509250929050565b6040805160018082528183019092526060916000919060208083019080368337019050509050828160008151811061065a5761065a610ea0565b602090810291909101810191909152604080517f6d756473746f7265000000000000000000000000000000000000000000000000818401527f486f6f6b73000000000000000000000000000000000000000000000000000000603082015281518082039093018352810190526000906106e6906106d690610e2a565b8360006106e1610716565b610750565b90506106fd6106f8826000845161082c565b6108bc565b949350505050565b600060e0825b60ff911c1692915050565b6040805160018082528183019092526000918291906020808301908036833701905050905060c38160008151811061014157610141610ea0565b6060600061075c6103cf565b90503073ffffffffffffffffffffffffffffffffffffffff82160361078f57610787868686866108d4565b9150506106fd565b6040517f05242d2f00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8216906305242d2f906107e7908990899089908990600401610fed565b600060405180830381865afa158015610804573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610787919081019061101c565b600081831115801561083f575083518211155b61087b578383836040517f23230fa300000000000000000000000000000000000000000000000000000000815260040161028e93929190611093565b602084016108898482610fd5565b9050600061089785856110b8565b6fffffffffffffffffffffffffffffffff1660809290921b9190911795945050505050565b606060006108cd8360146060610908565b9392505050565b60606108df82610a1a565b8360ff1610156108fc576108f585858585610a24565b90506106fd565b6108f585858585610a84565b606060006109168560801c90565b90506fffffffffffffffffffffffffffffffff8516600085828161093c5761093c6110cf565b04905061094986836110e5565b156109d6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603d60248201527f756e7061636b546f41727261793a207061636b65644c656e677468206d75737460448201527f2062652061206d756c7469706c65206f6620656c656d656e7453697a65000000606482015260840161028e565b60405193506020840160208202810160405281855260005b82811015610a0e578451871c8252938701936020909101906001016109ee565b50505050509392505050565b600060e88261070b565b60606000610a358360ff8616610aeb565b90506000610a4e8260c58111156102d6576102d6610eb6565b90506000610a5c8888610b11565b90506000610a6a8688610b67565b9050610a77828483610bbb565b9998505050505050505050565b60606000610a9183610a1a565b610a9b9085611107565b90506000610aaa878784610bde565b90506000610ad183610abc8a8a610c37565b9060ff166028026038011c64ffffffffff1690565b9050610adf82826000610bbb565b98975050505050505050565b600081601b03600802610afb8490565b60ff911c1660c58111156108cd576108cd610eb6565b60007f86425bff6b57326c7859e89024fe4f238ca327a1ae4a230180dd2f0e88aaa7d98383604051602001610b489392919061112a565b60408051601f1981840301815291905280516020909101209392505050565b600080805b8360ff16811015610bb357610b95610b848683610aeb565b60c58111156102d6576102d6610eb6565b610b9f9083610fd5565b915080610bab81610fbb565b915050610b6c565b509392505050565b60405160208101601f19603f8584010116604052838252610bb385858584610c4e565b60007f86425bff6b57326c7859e89024fe4f238ca327a1ae4a230180dd2f0e88aaa7d9848484604051602001610c179493929190611149565b60408051601f198184030181529190528051602090910120949350505050565b600080610c448484610d04565b90506106fd815490565b8115610cc05760208210610c7857602082048401935060208281610c7457610c746110cf565b0691505b8115610cc05760208290036000600019600883021c1990508554600885021b811984511682821617845250818511610cb1575050610cfe565b50600194909401939283900392015b5b60208310610ce25783548152600190930192601f1990920191602001610cc1565b8215610cfe5780518454600019600886021c9182169119161781525b50505050565b60007f86425bff6b57326c7859e89024fe4f238ca327a1ae4a230180dd2f0e88aaa7d98383604051602001610b489392919061117c565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610d7a57610d7a610d3b565b604052919050565b600067ffffffffffffffff821115610d9c57610d9c610d3b565b50601f01601f191660200190565b600060208284031215610dbc57600080fd5b813567ffffffffffffffff811115610dd357600080fd5b8201601f81018413610de457600080fd5b8035610df7610df282610d82565b610d51565b818152856020838501011115610e0c57600080fd5b81602084016020830137600091810160200191909152949350505050565b805160208083015191908110156105805760001960209190910360031b1b16919050565b60005b83811015610e69578181015183820152602001610e51565b83811115610cfe5750506000910152565b82815260008251610e92816020850160208701610e4e565b919091016020019392505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600081518084526020808501945080840160005b83811015610efc57815187529582019590820190600101610ee0565b509495945050505050565b60008151808452610f1f816020860160208601610e4e565b601f01601f19169290920160200192915050565b848152608060208201526000610f4c6080830186610ecc565b8281036040840152610f5e8186610f07565b91505082606083015295945050505050565b838152606060208201526000610f896060830185610ecc565b8281036040840152610f9b8185610f07565b9695505050505050565b634e487b7160e01b600052601160045260246000fd5b60006000198203610fce57610fce610fa5565b5060010190565b60008219821115610fe857610fe8610fa5565b500190565b8481526080602082015260006110066080830186610ecc565b60ff949094166040830152506060015292915050565b60006020828403121561102e57600080fd5b815167ffffffffffffffff81111561104557600080fd5b8201601f8101841361105657600080fd5b8051611064610df282610d82565b81815285602083850101111561107957600080fd5b61108a826020830160208601610e4e565b95945050505050565b6060815260006110a66060830186610f07565b60208301949094525060400152919050565b6000828210156110ca576110ca610fa5565b500390565b634e487b7160e01b600052601260045260246000fd5b60008261110257634e487b7160e01b600052601260045260246000fd5b500690565b600060ff821660ff84168082101561112157611121610fa5565b90039392505050565b83815282602082015260606040820152600061108a6060830184610ecc565b8481528360208201526080604082015260006111686080830185610ecc565b905060ff8316606083015295945050505050565b83815282602082015260806040820152600061119b6080830184610ecc565b8281036060840152600681527f6c656e677468000000000000000000000000000000000000000000000000000060208201526040810191505094935050505056fea264697066735822122097e97dd5665153c8fd3aa9cafeaa0ec4e9cd4315c226273b117a94acd8dd8cd364736f6c634300080d0033c001a056d41b2be4b92969e11385e620db6a6ccc574ce90765b77a01acb8e4b218300da048e28311d2e4f0f94c90e8b3b2e059e4ae45dd054abe4a0ede7e0ee3fe365683\\\"],\\\"id\\\":64,\\\"jsonrpc\\\":\\\"2.0\\\"}\", requestMethod=\"POST\", serverError={\"errno\":-104,\"code\":\"ECONNRESET\",\"syscall\":\"read\"}, url=\"http://127.0.0.1:4242/\", code=SERVER_ERROR, version=web/5.7.1)\r\n```\r\n</details>\r\n\r\nSee https://github.com/latticexyz/mud/actions/runs/6025236361/job/16345515615#step:9:45 for details.\r\n\r\nThe CI was running foundry on the latest `nightly`. Pinning it to `bff4ed912bb023d7bf9b20eda581aa4867a1cf70` solved it (see https://github.com/latticexyz/mud/pull/1372 for reference)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699458869",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5749#issuecomment-1699458869",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749",
    "id": 1699458869,
    "node_id": "IC_kwDOGBlvNc5lS681",
    "user": {
      "login": "varunsrin",
      "id": 528882,
      "node_id": "MDQ6VXNlcjUyODg4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/528882?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/varunsrin",
      "html_url": "https://github.com/varunsrin",
      "followers_url": "https://api.github.com/users/varunsrin/followers",
      "following_url": "https://api.github.com/users/varunsrin/following{/other_user}",
      "gists_url": "https://api.github.com/users/varunsrin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/varunsrin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/varunsrin/subscriptions",
      "organizations_url": "https://api.github.com/users/varunsrin/orgs",
      "repos_url": "https://api.github.com/users/varunsrin/repos",
      "events_url": "https://api.github.com/users/varunsrin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/varunsrin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T16:07:12Z",
    "updated_at": "2023-08-30T16:07:12Z",
    "author_association": "NONE",
    "body": "+1 we just started running into this ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699458869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699490073",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5749#issuecomment-1699490073",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749",
    "id": 1699490073,
    "node_id": "IC_kwDOGBlvNc5lTCkZ",
    "user": {
      "login": "Evalir",
      "id": 26014927,
      "node_id": "MDQ6VXNlcjI2MDE0OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26014927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Evalir",
      "html_url": "https://github.com/Evalir",
      "followers_url": "https://api.github.com/users/Evalir/followers",
      "following_url": "https://api.github.com/users/Evalir/following{/other_user}",
      "gists_url": "https://api.github.com/users/Evalir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Evalir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Evalir/subscriptions",
      "organizations_url": "https://api.github.com/users/Evalir/orgs",
      "repos_url": "https://api.github.com/users/Evalir/repos",
      "events_url": "https://api.github.com/users/Evalir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Evalir/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T16:24:33Z",
    "updated_at": "2023-08-30T16:24:33Z",
    "author_association": "MEMBER",
    "body": "interesting—@varunsrin / @alvrs any chance we can get a smaller repro? will make looking at this easier so we can fix asap",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699490073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699508351",
    "html_url": "https://github.com/foundry-rs/foundry/issues/5749#issuecomment-1699508351",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5749",
    "id": 1699508351,
    "node_id": "IC_kwDOGBlvNc5lTHB_",
    "user": {
      "login": "varunsrin",
      "id": 528882,
      "node_id": "MDQ6VXNlcjUyODg4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/528882?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/varunsrin",
      "html_url": "https://github.com/varunsrin",
      "followers_url": "https://api.github.com/users/varunsrin/followers",
      "following_url": "https://api.github.com/users/varunsrin/following{/other_user}",
      "gists_url": "https://api.github.com/users/varunsrin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/varunsrin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/varunsrin/subscriptions",
      "organizations_url": "https://api.github.com/users/varunsrin/orgs",
      "repos_url": "https://api.github.com/users/varunsrin/repos",
      "events_url": "https://api.github.com/users/varunsrin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/varunsrin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T16:37:15Z",
    "updated_at": "2023-08-30T16:37:15Z",
    "author_association": "NONE",
    "body": "Heads down on OP Mainnet migration today, will try to produce something after. \r\n\r\nIn the meantime here is a failing action in case helpful: https://github.com/farcasterxyz/hub-monorepo/actions/runs/6026502775/job/16349594251",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1699508351/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

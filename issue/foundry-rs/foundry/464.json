{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/464",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/464",
  "id": 1104635254,
  "node_id": "I_kwDOGBlvNc5B12V2",
  "number": 464,
  "title": "cast failing to compile",
  "user": {
    "login": "totlsota",
    "id": 3116579,
    "node_id": "MDQ6VXNlcjMxMTY1Nzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3116579?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/totlsota",
    "html_url": "https://github.com/totlsota",
    "followers_url": "https://api.github.com/users/totlsota/followers",
    "following_url": "https://api.github.com/users/totlsota/following{/other_user}",
    "gists_url": "https://api.github.com/users/totlsota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/totlsota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/totlsota/subscriptions",
    "organizations_url": "https://api.github.com/users/totlsota/orgs",
    "repos_url": "https://api.github.com/users/totlsota/repos",
    "events_url": "https://api.github.com/users/totlsota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/totlsota/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-01-15T08:15:03Z",
  "updated_at": "2022-01-15T16:04:18Z",
  "closed_at": "2022-01-15T16:04:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## OS: \r\nMac 11.5\r\n\r\n## Install command\r\n```\r\ncargo install --git https://github.com/gakonst/foundry --bin cast  \r\n```\r\n\r\n## Issue:\r\ncast fails to compile with error below\r\n\r\nforge binary builds and runs fine\r\n\r\n## Error trace\r\n***\r\n```\r\nCompiling ethers-solc v0.1.0 (https://github.com/gakonst/ethers-rs#77dcccb7)\r\nerror[E0023]: this pattern has 3 fields, but the corresponding tuple variant has 4 fields\r\n   --> .cargo/git/checkouts/ethers-rs-c3a7c0a0ae0fe6be/77dcccb/ethers-solc/src/resolver.rs:426:53\r\n    |\r\n426 |                     SourceUnitPart::PragmaDirective(_, pragma, value) => {\r\n    |                                                     ^  ^^^^^^  ^^^^^ expected 4 fields, found 3\r\n    |\r\n   ::: .cargo/git/checkouts/solang-98203f5abd7a90ef/747e524/solang-parser/src/pt.rs:58:21\r\n    |\r\n58  |     PragmaDirective(Loc, Vec<DocComment>, Identifier, StringLiteral),\r\n    |                     ---  ---------------  ----------  ------------- tuple variant has 4 fields\r\n    |\r\nhelp: use `_` to explicitly ignore each field\r\n    |\r\n426 |                     SourceUnitPart::PragmaDirective(_, pragma, value, _) => {\r\n    |                                                                     +++\r\n\r\nFor more information about this error, try `rustc --explain E0023`.\r\nerror: could not compile `ethers-solc` due to previous error\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: failed to compile `foundry-cli v0.1.0 (https://github.com/gakonst/foundry#c0e534c0)`, \r\n```",
  "closed_by": {
    "login": "gakonst",
    "id": 17802178,
    "node_id": "MDQ6VXNlcjE3ODAyMTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gakonst",
    "html_url": "https://github.com/gakonst",
    "followers_url": "https://api.github.com/users/gakonst/followers",
    "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
    "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
    "organizations_url": "https://api.github.com/users/gakonst/orgs",
    "repos_url": "https://api.github.com/users/gakonst/repos",
    "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gakonst/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/464/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1013673774",
    "html_url": "https://github.com/foundry-rs/foundry/issues/464#issuecomment-1013673774",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464",
    "id": 1013673774,
    "node_id": "IC_kwDOGBlvNc48a28u",
    "user": {
      "login": "youngkidwarrior",
      "id": 36084652,
      "node_id": "MDQ6VXNlcjM2MDg0NjUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/36084652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/youngkidwarrior",
      "html_url": "https://github.com/youngkidwarrior",
      "followers_url": "https://api.github.com/users/youngkidwarrior/followers",
      "following_url": "https://api.github.com/users/youngkidwarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/youngkidwarrior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/youngkidwarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/youngkidwarrior/subscriptions",
      "organizations_url": "https://api.github.com/users/youngkidwarrior/orgs",
      "repos_url": "https://api.github.com/users/youngkidwarrior/repos",
      "events_url": "https://api.github.com/users/youngkidwarrior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/youngkidwarrior/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-15T12:26:34Z",
    "updated_at": "2022-01-15T12:38:27Z",
    "author_association": "NONE",
    "body": "It seems this change to ethers-rs is the cause\r\n```\r\nAdd Location To Solidity Pragma Directive (#638)\r\n\r\nadd loc to pragma directive\r\n```\r\n```\r\nPragmaDirective(Loc, Vec<DocComment>, Identifier, StringLiteral),\r\n```\r\n----\r\n\r\nHere is a short term fix, until foundry guys release an official fix\r\n\r\n1. Open ethers-solc resolver for current install\r\n\r\n`/Users/$USER/.cargo/git/checkouts/ethers-rs-c3a7c0a0ae0fe6be/93878e4/ethers-solc/src/resolver.rs`\r\n\r\n2. Change Line 426:\r\n\r\n    `SourceUnitPart::PragmaDirective(_, pragma, value) => {`\r\n    \r\n    to \r\n    \r\n    `SourceUnitPart::PragmaDirective(_, _, pragma, value) => {`\r\n    \r\n3. Run cast install command\r\n\r\n    `cargo install --git https://github.com/gakonst/foundry --bin cast`",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1013673774/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1013686344",
    "html_url": "https://github.com/foundry-rs/foundry/issues/464#issuecomment-1013686344",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/464",
    "id": 1013686344,
    "node_id": "IC_kwDOGBlvNc48a6BI",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-15T13:54:43Z",
    "updated_at": "2022-01-15T13:54:43Z",
    "author_association": "MEMBER",
    "body": "there was a breaking change on [solang-parser](https://github.com/hyperledger-labs/solang)\r\n\r\nfixed on ethers-rs here, https://github.com/gakonst/ethers-rs/pull/796\r\n\r\nthen needs a `cargo update -p ethers` here",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1013686344/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

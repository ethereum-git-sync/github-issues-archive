{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4585",
  "id": 1629063752,
  "node_id": "I_kwDOGBlvNc5hGYpI",
  "number": 4585,
  "title": "no way to manually shutdown anvil without custom machine code",
  "user": {
    "login": "joshstevens19",
    "id": 18472422,
    "node_id": "MDQ6VXNlcjE4NDcyNDIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/18472422?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joshstevens19",
    "html_url": "https://github.com/joshstevens19",
    "followers_url": "https://api.github.com/users/joshstevens19/followers",
    "following_url": "https://api.github.com/users/joshstevens19/following{/other_user}",
    "gists_url": "https://api.github.com/users/joshstevens19/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joshstevens19/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joshstevens19/subscriptions",
    "organizations_url": "https://api.github.com/users/joshstevens19/orgs",
    "repos_url": "https://api.github.com/users/joshstevens19/repos",
    "events_url": "https://api.github.com/users/joshstevens19/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joshstevens19/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 4077188949,
      "node_id": "LA_kwDOGBlvNc7zBPdV",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-anvil",
      "name": "C-anvil",
      "color": "5319E7",
      "default": false,
      "description": "Command: anvil"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-03-17T10:23:58Z",
  "updated_at": "2023-03-21T20:12:57Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nAnvil\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\n0.2.0\r\n\r\n### What command(s) is the bug in?\r\n\r\n_No response_\r\n\r\n### Operating System\r\n\r\nmacOS (Apple Silicon)\r\n\r\n### Describe the bug\r\n\r\nClassing this as a bug, but it could be a feature either way; we can reassign it.\r\n\r\nIf you are running the anvil node in a child process alongside other code when the main code is shutdown, SIGINT or other codes would throw, but due to the node running in another process, that part does not get closed (understandable). You can listen to these events being emitted to handle these cases, which is fine, but to now clean up and shut down the node, you have to use a bespoke operating system code to kill the port process, aka mac:\r\n\r\n```\r\nlsof -t -i tcp:8545 | xargs kill\r\n```\r\n\r\nIt would be much better if we just had a:\r\n\r\n```\r\nanvil shutdown\r\n```\r\n\r\nThis shuts down the node and can be run on cleanup tasks supporting any OS with the same command. Also, note you may wish to spin up a node and then close it once you have used it and still have the main process running. It seems a handy thing to have. \r\n\r\nIt may exist, but I can not see it in the docs.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1473627085",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4585#issuecomment-1473627085",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585",
    "id": 1473627085,
    "node_id": "IC_kwDOGBlvNc5X1cPN",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T10:31:21Z",
    "updated_at": "2023-03-17T10:31:21Z",
    "author_association": "MEMBER",
    "body": "> anvil shutdown\r\n\r\nhow should this work? rpc call? file listener?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1473627085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1473628770",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4585#issuecomment-1473628770",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585",
    "id": 1473628770,
    "node_id": "IC_kwDOGBlvNc5X1cpi",
    "user": {
      "login": "joshstevens19",
      "id": 18472422,
      "node_id": "MDQ6VXNlcjE4NDcyNDIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/18472422?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshstevens19",
      "html_url": "https://github.com/joshstevens19",
      "followers_url": "https://api.github.com/users/joshstevens19/followers",
      "following_url": "https://api.github.com/users/joshstevens19/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshstevens19/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshstevens19/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshstevens19/subscriptions",
      "organizations_url": "https://api.github.com/users/joshstevens19/orgs",
      "repos_url": "https://api.github.com/users/joshstevens19/repos",
      "events_url": "https://api.github.com/users/joshstevens19/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshstevens19/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T10:33:02Z",
    "updated_at": "2023-03-17T10:33:12Z",
    "author_association": "NONE",
    "body": "Just straight up command `anvil --shutdown`, maybe? \r\n\r\n`anvil_shutdown` also works as an RPC call ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1473628770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1475049087",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4585#issuecomment-1475049087",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4585",
    "id": 1475049087,
    "node_id": "IC_kwDOGBlvNc5X63Z_",
    "user": {
      "login": "aathan",
      "id": 24279435,
      "node_id": "MDQ6VXNlcjI0Mjc5NDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/24279435?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aathan",
      "html_url": "https://github.com/aathan",
      "followers_url": "https://api.github.com/users/aathan/followers",
      "following_url": "https://api.github.com/users/aathan/following{/other_user}",
      "gists_url": "https://api.github.com/users/aathan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aathan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aathan/subscriptions",
      "organizations_url": "https://api.github.com/users/aathan/orgs",
      "repos_url": "https://api.github.com/users/aathan/repos",
      "events_url": "https://api.github.com/users/aathan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aathan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-19T00:36:18Z",
    "updated_at": "2023-03-19T00:37:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "If it does not already exist, a command line option to have anvil write a pid file would also be nice. This could then be used with scripts instead of a `pkill ...` or `lsof ...` to find the exact anvil process that must be killed. An RPC to report the same information could be useful too -- in which case I'd probably make that a generic \"getNodeInfo\" that returns json, and has various useful items, perhaps including internal state data.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1475049087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

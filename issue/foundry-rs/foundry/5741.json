{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5741",
  "id": 1871577951,
  "node_id": "I_kwDOGBlvNc5vjgNf",
  "number": 5741,
  "title": "Can't Verify Contracts in Either Sepolia or Moonbase Alpha/Moonbeam because of `Failed to deserialize response`",
  "user": {
    "login": "albertov19",
    "id": 64150856,
    "node_id": "MDQ6VXNlcjY0MTUwODU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64150856?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/albertov19",
    "html_url": "https://github.com/albertov19",
    "followers_url": "https://api.github.com/users/albertov19/followers",
    "following_url": "https://api.github.com/users/albertov19/following{/other_user}",
    "gists_url": "https://api.github.com/users/albertov19/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/albertov19/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/albertov19/subscriptions",
    "organizations_url": "https://api.github.com/users/albertov19/orgs",
    "repos_url": "https://api.github.com/users/albertov19/repos",
    "events_url": "https://api.github.com/users/albertov19/events{/privacy}",
    "received_events_url": "https://api.github.com/users/albertov19/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-08-29T12:34:36Z",
  "updated_at": "2023-08-29T13:17:46Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (bff4ed9 2023-08-29T00:16:15.395348141Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge verify-contract\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nI have a very simple contract that I was able to verify with the Hardhat Etherscan plugin. Consequently I was going to try verifying it with Foundry in Moonbase Alpha and I ran into the following error:\r\n\r\n```\r\nforge verify-contract --chain-id 1287 \\\r\n--verifier etherscan \\\r\n--verifier-url https://api-moonbase.moonscan.io/api \\\r\n0x06F789662F6a776BF1C551409985311b52C41a32 \\\r\n--constructor-args 0x0000000000000000000000000000000000000000000000000000000000000014 \\\r\nsrc/Number.sol:Number \\\r\n--etherscan-api-key MY_API_KEY\r\n\r\nStart verifying contract `0x06f789662f6a776bf1c551409985311b52c41a32` deployed on moonbase\r\n2023-08-29T12:31:35.427671Z ERROR etherscan: Failed to deserialize response: expected value at line 1 column 1 res=\"<!DOCTYPE html><html lang=\\\"en-US\\\"><head><title>Just a moment...</title><meta http-equiv=\\\"Content-Type\\\" content=\\\"t\r\n..... A LOT OF THINGS .......\r\nXzgw7a3gr5MEPQlJTp3M0-1693312295-0-gaNycGzNCrs\\\" + window._cf_chl_opt.cOgUHash);cpo.onload = function() {history.replaceState(null, null, ogU);};}document.getElementsByTagName('head')[0].appendChild(cpo);}());</script></body></html>\"\r\nError: \r\nexpected value at line 1 column 1\r\n```\r\n\r\nThen I was thinking this could be an issue with Etherscan's Moonbase Alpha API. Soooo, I went to test the same thing against Sepolia (changing API Key, endpoint, chain id, etc) and the same error message there as well. I know some of my inputs are not mandatory but I was just trying different things.\r\n\r\nThe basic contract I was trying to verify is this one:\r\n\r\n```\r\n// SPDX-License-Identifier: MIT\r\npragma solidity =0.8.0;\r\n\r\ncontract Number {\r\n    uint public number;\r\n\r\n    constructor (uint _input) {\r\n        number = _input;\r\n    }\r\n\r\n    function setNumberTest(uint _input) public {\r\n        number = _input;\r\n    }\r\n}\r\n```\r\n\r\nThanks for looking into it\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5741/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

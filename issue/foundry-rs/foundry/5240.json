{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/5240",
  "id": 1778426680,
  "node_id": "I_kwDOGBlvNc5qAKM4",
  "number": 5240,
  "title": "forge build --sizes ignores contents of at least one sol in the project",
  "user": {
    "login": "aathan",
    "id": 24279435,
    "node_id": "MDQ6VXNlcjI0Mjc5NDM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/24279435?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aathan",
    "html_url": "https://github.com/aathan",
    "followers_url": "https://api.github.com/users/aathan/followers",
    "following_url": "https://api.github.com/users/aathan/following{/other_user}",
    "gists_url": "https://api.github.com/users/aathan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aathan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aathan/subscriptions",
    "organizations_url": "https://api.github.com/users/aathan/orgs",
    "repos_url": "https://api.github.com/users/aathan/repos",
    "events_url": "https://api.github.com/users/aathan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aathan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-06-28T08:04:31Z",
  "updated_at": "2023-06-28T08:14:57Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (31d6498 2023-06-28T00:10:20.700537031Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge build\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nThere is a bug in `forge build` which prevents it from outputting at least `--sizes` info for a .sol files in my project. Dunno if the abi is valid (I'll try to figure that out tomorrow). No syntax errors or warnings are emitted. Is there a way for me to get forge to output the solc command line it's using so I can see if solc is emitting some console output that may be a hint?\r\n\r\n```\r\nlibrary { ... }\r\ncontract {\r\n erc20 stuff...\r\n other stuff...\r\n struct localVars {}\r\n function problemFunction(... calldata params ... ) public view returns (SomeOtherStruct memory ret) {\r\n    ... body that uses localVars / body may be removed...\r\n  }\r\n}\r\n```\r\n\r\n\r\nThe out/ directory contains abi for the affected file. I've tried removing parts of the file to see if it's something about the contents. I placed a certain function definition at the bottom of the contract. If that function appears, no output from `--sizes` occurs UNLESS it's the only function defined in the file (other than a few generic IERC20's at the top). I can remove the BODY of the function and it still causes problems with `--sizes` output if `other stuff...` is in the file. If `other stuff...` does not appear, then irrespective of the existence of the body, `--sizes` contains a line for the file.\r\n\r\nThis would seem to imply there is some interaction with what's in the body of the function and `other stuff...` , but what kind of interaction would cause NO warnings or errors to be emitted and `forge build --sizes` to not work? Again, the abi seems to exist, and it is too late right now for me to verify what's in it.\r\n\r\nLet me know what to look for. This sounds like a problem with forge interpreting the abi output.\r\n\r\nusing solc 8.19\r\n ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/5240/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

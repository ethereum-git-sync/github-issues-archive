{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/4577",
  "id": 1627752425,
  "node_id": "I_kwDOGBlvNc5hBYfp",
  "number": 4577,
  "title": "fileRoot cheatcode",
  "user": {
    "login": "sakulstra",
    "id": 4396533,
    "node_id": "MDQ6VXNlcjQzOTY1MzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4396533?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sakulstra",
    "html_url": "https://github.com/sakulstra",
    "followers_url": "https://api.github.com/users/sakulstra/followers",
    "following_url": "https://api.github.com/users/sakulstra/following{/other_user}",
    "gists_url": "https://api.github.com/users/sakulstra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sakulstra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sakulstra/subscriptions",
    "organizations_url": "https://api.github.com/users/sakulstra/orgs",
    "repos_url": "https://api.github.com/users/sakulstra/repos",
    "events_url": "https://api.github.com/users/sakulstra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sakulstra/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3593644820,
      "node_id": "LA_kwDOGBlvNc7WMqsU",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-feature",
      "name": "T-feature",
      "color": "BFD4F2",
      "default": false,
      "description": "Type: feature"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-03-16T15:31:35Z",
  "updated_at": "2023-11-30T11:50:00Z",
  "closed_at": "2023-11-30T11:49:36Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Component\n\nForge\n\n### Describe the feature you would like\n\nWhile there is currently [`vm.projectRoot`](https://github.com/foundry-rs/foundry/pull/2762/files) to receive the path to the project.\r\nIt would be nice to expose a `vm.fileRoot` (open for a better name) to receive the path to the current file.\n\n### Additional context\n\nForge is relatively limited, in regards to formatting etc. which is expected due to limitations inherited by solidity.\r\nSo naturally ppl build tooling around foundry e.g. in the form of shell scripts and execute them via ffi.\r\n\r\nWhen using a foundry project as a library dependency though, it's becoming complicated to access these scripts as they might end up in a deeply nested `lib` folder. Currently we resort to shipping these helper libraries via different venues (e.g. npmjs), but it would be great if a library could contain a ffi call to a relatively located script - instead of just being relative to the root.",
  "closed_by": {
    "login": "sakulstra",
    "id": 4396533,
    "node_id": "MDQ6VXNlcjQzOTY1MzM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4396533?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sakulstra",
    "html_url": "https://github.com/sakulstra",
    "followers_url": "https://api.github.com/users/sakulstra/followers",
    "following_url": "https://api.github.com/users/sakulstra/following{/other_user}",
    "gists_url": "https://api.github.com/users/sakulstra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sakulstra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sakulstra/subscriptions",
    "organizations_url": "https://api.github.com/users/sakulstra/orgs",
    "repos_url": "https://api.github.com/users/sakulstra/repos",
    "events_url": "https://api.github.com/users/sakulstra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sakulstra/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1472243862",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4577#issuecomment-1472243862",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577",
    "id": 1472243862,
    "node_id": "IC_kwDOGBlvNc5XwKiW",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T15:54:25Z",
    "updated_at": "2023-03-16T15:57:17Z",
    "author_association": "MEMBER",
    "body": "> to receive the path to the current file.\r\n\r\nthis should be the currently active contract?\r\n\r\nthis is a bit tricky and would not always be correct, due to inlined calls,inheritance etc...\r\n\r\nbut we should at least have the test/script contract path.\r\n\r\nI can't find it now, but we have an issue for adding the context (script,test) as cheatcode, so this could work similariy",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1472243862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1472577365",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4577#issuecomment-1472577365",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577",
    "id": 1472577365,
    "node_id": "IC_kwDOGBlvNc5Xxb9V",
    "user": {
      "login": "sakulstra",
      "id": 4396533,
      "node_id": "MDQ6VXNlcjQzOTY1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4396533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sakulstra",
      "html_url": "https://github.com/sakulstra",
      "followers_url": "https://api.github.com/users/sakulstra/followers",
      "following_url": "https://api.github.com/users/sakulstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sakulstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sakulstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sakulstra/subscriptions",
      "organizations_url": "https://api.github.com/users/sakulstra/orgs",
      "repos_url": "https://api.github.com/users/sakulstra/repos",
      "events_url": "https://api.github.com/users/sakulstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sakulstra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T18:52:36Z",
    "updated_at": "2023-03-16T18:53:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes it would need to be the currently active contract but i can see how this might get complicated with inheritance etc. I suppose one would need to have access to the build graph and replace with a const on build or sth.\r\n\r\nPerhaps I'm also overcomplicating stuff. I'm open to alternative ideas of solving this ðŸ˜…\r\n\r\nSo to give a more concrete example on what I want to archive: i created a library which essentially writes certain storage slot value to a JSON and then I have a simple shell script generating a human readable report interpreting these slot values.\r\n\r\nNow i want ppl to be able to use this as part of their test suite so they can generate such a report without a complex setup, but by simple importing my library and calling `Library.generateReport()`. Where generateReport would call the shell script via ffi.\r\nAs a dirty hack i could hardcode the path to `lib/my-package/scripts` but this would obviously break if someone doesn't follow default lib folder etc.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1472577365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1833614692",
    "html_url": "https://github.com/foundry-rs/foundry/issues/4577#issuecomment-1833614692",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/4577",
    "id": 1833614692,
    "node_id": "IC_kwDOGBlvNc5tSr1k",
    "user": {
      "login": "sakulstra",
      "id": 4396533,
      "node_id": "MDQ6VXNlcjQzOTY1MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4396533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sakulstra",
      "html_url": "https://github.com/sakulstra",
      "followers_url": "https://api.github.com/users/sakulstra/followers",
      "following_url": "https://api.github.com/users/sakulstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/sakulstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sakulstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sakulstra/subscriptions",
      "organizations_url": "https://api.github.com/users/sakulstra/orgs",
      "repos_url": "https://api.github.com/users/sakulstra/repos",
      "events_url": "https://api.github.com/users/sakulstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sakulstra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-30T11:49:58Z",
    "updated_at": "2023-11-30T11:49:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed as after some consideration seems a bit unnecessary and error prone.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1833614692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

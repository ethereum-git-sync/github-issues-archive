{
  "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
  "repository_url": "https://api.github.com/repos/foundry-rs/foundry",
  "labels_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596/labels{/name}",
  "comments_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596/comments",
  "events_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596/events",
  "html_url": "https://github.com/foundry-rs/foundry/issues/3596",
  "id": 1433502511,
  "node_id": "I_kwDOGBlvNc5VcYMv",
  "number": 3596,
  "title": "Foundry crashes with `arithmetic operation overflow`",
  "user": {
    "login": "benesjan",
    "id": 13470840,
    "node_id": "MDQ6VXNlcjEzNDcwODQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benesjan",
    "html_url": "https://github.com/benesjan",
    "followers_url": "https://api.github.com/users/benesjan/followers",
    "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
    "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
    "organizations_url": "https://api.github.com/users/benesjan/orgs",
    "repos_url": "https://api.github.com/users/benesjan/repos",
    "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benesjan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3334394228,
      "node_id": "MDU6TGFiZWwzMzM0Mzk0MjI4",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/T-bug",
      "name": "T-bug",
      "color": "d73a4a",
      "default": false,
      "description": "Type: bug"
    },
    {
      "id": 3593644915,
      "node_id": "LA_kwDOGBlvNc7WMqtz",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/Cmd-forge-test",
      "name": "Cmd-forge-test",
      "color": "006B75",
      "default": false,
      "description": "Command: forge test"
    },
    {
      "id": 3703752787,
      "node_id": "LA_kwDOGBlvNc7cwshT",
      "url": "https://api.github.com/repos/foundry-rs/foundry/labels/C-forge",
      "name": "C-forge",
      "color": "5319E7",
      "default": false,
      "description": "Command: forge"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 29,
  "created_at": "2022-11-02T17:11:08Z",
  "updated_at": "2022-12-06T18:35:45Z",
  "closed_at": "2022-11-18T19:38:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Component\r\n\r\nForge\r\n\r\n### Have you ensured that all of these are up to date?\r\n\r\n- [X] Foundry\r\n- [X] Foundryup\r\n\r\n### What version of Foundry are you on?\r\n\r\nforge 0.2.0 (70f4fb5 2022-11-02T00:05:06.592613Z)\r\n\r\n### What command(s) is the bug in?\r\n\r\nforge test\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Describe the bug\r\n\r\nHello, after updating `forge-std` dependency foundry started crashing with `arithmetic operation overflow` error. The issue is occuring locally on my M1 Macbook as well as in a linux docker container in CI. [Here](https://github.com/AztecProtocol/aztec-connect-bridges/pull/269) is the code and [here](https://app.circleci.com/pipelines/github/AztecProtocol/aztec-connect-bridges/1510/workflows/a62bbc0c-908b-42a6-a13e-8211bb4ecb96/jobs/1646) is the log of a failing CI pipeline.\r\n\r\n### Update\r\nThe bug is not related to `forge-std` (the `forge-std` update simply made it occur more frequently). The bug is caused by overflow in smart contract execution.",
  "closed_by": {
    "login": "mattsse",
    "id": 19890894,
    "node_id": "MDQ6VXNlcjE5ODkwODk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mattsse",
    "html_url": "https://github.com/mattsse",
    "followers_url": "https://api.github.com/users/mattsse/followers",
    "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
    "organizations_url": "https://api.github.com/users/mattsse/orgs",
    "repos_url": "https://api.github.com/users/mattsse/repos",
    "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mattsse/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1300959269",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1300959269",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1300959269,
    "node_id": "IC_kwDOGBlvNc5NixAl",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T17:19:15Z",
    "updated_at": "2022-11-02T17:19:15Z",
    "author_association": "MEMBER",
    "body": "I think this is a U256 overflow, @mds1 were there any changes re balance or similar?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1300959269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301029190",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1301029190",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1301029190,
    "node_id": "IC_kwDOGBlvNc5NjCFG",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T18:06:51Z",
    "updated_at": "2022-11-02T18:08:30Z",
    "author_association": "MEMBER",
    "body": "@benesjan I believe it's the deal cheatcode that overflows here https://github.com/AztecProtocol/aztec-connect-bridges/blob/f8ef3f8dc5a3c21046d20fa235de6271586cb1a1/src/test/bridges/erc4626/ERC4626.t.sol#L108\r\n\r\nor rather somewhere in that test",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301029190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301038497",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1301038497",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1301038497,
    "node_id": "IC_kwDOGBlvNc5NjEWh",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T18:15:45Z",
    "updated_at": "2022-11-02T18:15:45Z",
    "author_association": "COLLABORATOR",
    "body": "There's no changes in forge-std that I can think of that would cause. Though it seems to me like this is a forge error, not a forge-std error. From lines 87-89 of the linked CI job:\r\n\r\n```\r\nThe application panicked (crashed).\r\nMessage:  arithmetic operation overflow\r\nLocation: /home/runner/.cargo/registry/src/github.com-1ecc6299db9ec823/primitive-types-0.11.1/src/lib.rs:38\r\n```\r\n\r\nIf this was a solidity/EVM overflow it wouldn't panic",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301038497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301049036",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1301049036",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1301049036,
    "node_id": "IC_kwDOGBlvNc5NjG7M",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T18:25:41Z",
    "updated_at": "2022-11-02T18:48:51Z",
    "author_association": "MEMBER",
    "body": "~~okay it's the bound here~~\r\n\r\nhttps://github.com/AztecProtocol/aztec-connect-bridges/blob/f8ef3f8dc5a3c21046d20fa235de6271586cb1a1/src/test/bridges/erc4626/ERC4626.t.sol#L105\r\n\r\n~~if you change the max to `type(uint96).max` it succeeds, unclear why there's a U256 overflow,\r\nthere's no cheatcode involved perhaps this is an issue inside the evm~~\r\n\r\nnvm it's somewhere else\r\n\r\n\r\nI'm almost certain this is the call that's causing this \r\n\r\nhttps://github.com/AztecProtocol/aztec-connect-bridges/blob/f8ef3f8dc5a3c21046d20fa235de6271586cb1a1/src/test/bridges/erc4626/ERC4626.t.sol#L56\r\n\r\ncouldn't find the actual implementation of this, could you please provide the link to the function impl?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301049036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301098905",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1301098905",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1301098905,
    "node_id": "IC_kwDOGBlvNc5NjTGZ",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T19:13:35Z",
    "updated_at": "2022-11-02T19:13:35Z",
    "author_association": "NONE",
    "body": "@mattsse [Here](https://github.com/AztecProtocol/aztec-connect/blob/b0a71b01c5f1aa3b4b9a61d417aa4c479e01ef47/blockchain/contracts/RollupProcessor.sol#L519) is the function implementation. And [this](https://etherscan.io/address/0xFF1F2B4ADb9dF6FC8eAFecDcbF96A2B351680455) is the contract deployment on mainnet.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1301098905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302165336",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302165336",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302165336,
    "node_id": "IC_kwDOGBlvNc5NnXdY",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T14:05:06Z",
    "updated_at": "2022-11-03T14:05:06Z",
    "author_association": "NONE",
    "body": "It seems that the `ERC4626Test` is failing with overflow error and weirdly it causes forge to crash for me most of the time.  Tried to run it a few times and only once from ~8 runs forge didn't crash.\r\n\r\n<img width=\"1760\" alt=\"image\" src=\"https://user-images.githubusercontent.com/13470840/199741690-4498d228-0cec-46b3-a0a2-7ef7c6434b92.png\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302165336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302487803",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302487803",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302487803,
    "node_id": "IC_kwDOGBlvNc5NomL7",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:05:51Z",
    "updated_at": "2022-11-03T18:05:51Z",
    "author_association": "MEMBER",
    "body": "maybe related to the uint96 value fuzzing\r\n@joshieDo any ideas?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302487803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302502346",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302502346",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302502346,
    "node_id": "IC_kwDOGBlvNc5NopvK",
    "user": {
      "login": "mds1",
      "id": 17163988,
      "node_id": "MDQ6VXNlcjE3MTYzOTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17163988?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mds1",
      "html_url": "https://github.com/mds1",
      "followers_url": "https://api.github.com/users/mds1/followers",
      "following_url": "https://api.github.com/users/mds1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mds1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mds1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mds1/subscriptions",
      "organizations_url": "https://api.github.com/users/mds1/orgs",
      "repos_url": "https://api.github.com/users/mds1/repos",
      "events_url": "https://api.github.com/users/mds1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mds1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:19:02Z",
    "updated_at": "2022-11-03T18:19:02Z",
    "author_association": "COLLABORATOR",
    "body": "@benesjan have you narrowed down the cause of this, i.e. are you sure it's the forge-std update as mentioned in the original description vs. a certain forge release that introduced this?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302502346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302508851",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302508851",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302508851,
    "node_id": "IC_kwDOGBlvNc5NorUz",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:25:10Z",
    "updated_at": "2022-11-03T18:25:10Z",
    "author_association": "MEMBER",
    "body": "I've narrowed this down to these lines\r\n\r\nhttps://github.com/AztecProtocol/aztec-connect-bridges/blob/f8ef3f8dc5a3c21046d20fa235de6271586cb1a1/src/test/bridges/erc4626/ERC4626.t.sol#L56-L57\r\n\r\nat least if I comment out the entire `testFullFlow` test and those two lines then the panic goes away.\r\n\r\n```\r\n forge test --match-test \"testFullFlow\" --match-contract \"ERC4626\"\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302508851/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302509396",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302509396",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302509396,
    "node_id": "IC_kwDOGBlvNc5NordU",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:25:41Z",
    "updated_at": "2022-11-03T18:39:21Z",
    "author_association": "NONE",
    "body": "@mds1 it's not caused by the update but it seems the update makes it more frequent. I think that the tests are simply failing with the overflow error and for some reason it causes forge to crash. Sometimes forge doesn't crash and I see that the tests fail with the overflow error. I tried compiling an older forge version (from October 17) and the issue occurs there as well.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302509396/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302543202",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1302543202",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1302543202,
    "node_id": "IC_kwDOGBlvNc5Nozti",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T18:59:42Z",
    "updated_at": "2022-11-03T18:59:42Z",
    "author_association": "MEMBER",
    "body": "the randomness of this is likely related to the fuzz test function's inputs.\r\n\r\nMe guess at this point is, that the state changes inside the prank are picked up by the fuzzer (which looks at state) and perhaps the uint96 strategy has a problem with those values. ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1302543202/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311941129",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1311941129",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1311941129,
    "node_id": "IC_kwDOGBlvNc5OMqIJ",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T16:51:39Z",
    "updated_at": "2022-11-11T16:53:08Z",
    "author_association": "NONE",
    "body": "Hello, this bug is still occurring. I have a new example. I introduced a bug in test in [this commit](https://github.com/AztecProtocol/aztec-connect-bridges/pull/281/commits/608eb366563511d1b86b14339fc8740674b082b0) which caused overflow in the tested smart contract. This overflow caused `forge` to crash. Log can be seen in our [CI pipeline](https://app.circleci.com/pipelines/github/AztecProtocol/aztec-connect-bridges/1590/workflows/e4b5f958-2305-4b64-969d-bb617f766c21/jobs/1731).",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311941129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311944592",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1311944592",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1311944592,
    "node_id": "IC_kwDOGBlvNc5OMq-Q",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T16:55:46Z",
    "updated_at": "2022-11-11T16:55:46Z",
    "author_association": "MEMBER",
    "body": "is it still the same test?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311944592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311945430",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1311945430",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1311945430,
    "node_id": "IC_kwDOGBlvNc5OMrLW",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T16:56:46Z",
    "updated_at": "2022-11-11T16:56:46Z",
    "author_association": "NONE",
    "body": "No, it's a different test. Previously it was an ERC4626 bridge test and now it is a TroveBridge test. They are unrelated and don't share basically any code.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311945430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311947845",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1311947845",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1311947845,
    "node_id": "IC_kwDOGBlvNc5OMrxF",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T16:59:35Z",
    "updated_at": "2022-11-11T16:59:35Z",
    "author_association": "MEMBER",
    "body": "sorry, I meant test function",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1311947845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312051192",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1312051192",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1312051192,
    "node_id": "IC_kwDOGBlvNc5ONE_4",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T18:26:45Z",
    "updated_at": "2022-11-11T18:26:45Z",
    "author_association": "NONE",
    "body": "It's a different test function. I run locally the following command and it fails:\r\n`forge test --fork-block-number 14970000 -m 'testRedistributionSuccessfulSwap' --fork-url https://mainnet.infura.io/v3/9928b52099854248b3a096be07a6b23c`\r\n\r\nIt is on [this PR](https://github.com/AztecProtocol/aztec-connect-bridges/pull/281)'s branch.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312051192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312055798",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1312055798",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1312055798,
    "node_id": "IC_kwDOGBlvNc5ONGH2",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T18:32:40Z",
    "updated_at": "2022-11-11T18:32:40Z",
    "author_association": "MEMBER",
    "body": "thanks,\r\n\r\nno fuzz test this time, makes it easier to debug, will have a closer look.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312055798/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312456647",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1312456647",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1312456647,
    "node_id": "IC_kwDOGBlvNc5OOn_H",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-12T11:14:49Z",
    "updated_at": "2022-11-12T11:14:49Z",
    "author_association": "MEMBER",
    "body": "@benesjan found it after I spent some time debugging the test.\r\n\r\nthere was an edge with deal+transfer that was triggered on revert. fixed in #3767",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312456647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312500872",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1312500872",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1312500872,
    "node_id": "IC_kwDOGBlvNc5OOyyI",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-12T15:00:58Z",
    "updated_at": "2022-11-13T17:49:29Z",
    "author_association": "NONE",
    "body": "@mattsse Thanks a ton! This was haunting us for a while",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1312500872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315525399",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315525399",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315525399,
    "node_id": "IC_kwDOGBlvNc5OaVMX",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T16:03:58Z",
    "updated_at": "2022-11-15T16:03:58Z",
    "author_association": "NONE",
    "body": "@mattsse Unfortunately it seems that the issue was not eliminated. The bug [occured](https://app.circleci.com/pipelines/github/AztecProtocol/aztec-connect-bridges/1600/workflows/e64aaa7b-a051-4919-88ac-e54887d6e62f/jobs/1745) in our CI pipeline again and there we always install the newest release.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315525399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315628415",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315628415",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315628415,
    "node_id": "IC_kwDOGBlvNc5OauV_",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T17:15:21Z",
    "updated_at": "2022-11-15T17:15:21Z",
    "author_association": "MEMBER",
    "body": "pushed two related fixes today, \r\n\r\nIf you could narrow this down to the failing test, I'd be happy to give it another try.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315628415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315777014",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315777014",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315777014,
    "node_id": "IC_kwDOGBlvNc5ObSn2",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T19:35:10Z",
    "updated_at": "2022-11-15T19:35:10Z",
    "author_association": "NONE",
    "body": "Hello @mattsse, while trying to reproduce the bug I've stumbled upon another one:\r\n<img width=\"899\" alt=\"image\" src=\"https://user-images.githubusercontent.com/13470840/202009104-01b79b82-c04d-471f-b197-1f819e6ee916.png\">\r\n\r\nAfter dealing 5 ETH to an address owner's balance suddenly drops to 1 wei.\r\n\r\nThis is how you should be able to reproduce it:\r\n\r\nCheckout the `janb/foundry-bug` branch and run:\r\n`forge test -m testLiquidationFlowWithCollateralToClaim --fork-url https://mainnet.infura.io/v3/9928b52099854248b3a096be07a6b23c --fork-block-number 15977385 -vv`\r\n\r\nI just executed foundryup so I am using the newest version.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315777014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315812334",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315812334",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315812334,
    "node_id": "IC_kwDOGBlvNc5ObbPu",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T20:12:08Z",
    "updated_at": "2022-11-15T20:12:08Z",
    "author_association": "MEMBER",
    "body": "> @mattsse\r\n> \r\n> I believe I maybe suffering from the same issue. I have it narrowed down to a much smaller, very simple example. Would it be useful to post that information here? I don't want to clog up the thread unnecessarily.\r\n\r\nyes please, ty!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315812334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315849108",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315849108",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315849108,
    "node_id": "IC_kwDOGBlvNc5ObkOU",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T20:51:50Z",
    "updated_at": "2022-11-15T20:52:28Z",
    "author_association": "MEMBER",
    "body": "@benesjan it appears either #3688 or #3687 has fixed that, couldn't reproduce on master, but present on nightly\r\n\r\nwill land in nightly in a couple hours, sorry about these hiccups ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315849108/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315851302",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315851302",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315851302,
    "node_id": "IC_kwDOGBlvNc5Obkwm",
    "user": {
      "login": "mattsse",
      "id": 19890894,
      "node_id": "MDQ6VXNlcjE5ODkwODk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattsse",
      "html_url": "https://github.com/mattsse",
      "followers_url": "https://api.github.com/users/mattsse/followers",
      "following_url": "https://api.github.com/users/mattsse/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions",
      "organizations_url": "https://api.github.com/users/mattsse/orgs",
      "repos_url": "https://api.github.com/users/mattsse/repos",
      "events_url": "https://api.github.com/users/mattsse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattsse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T20:54:00Z",
    "updated_at": "2022-11-15T20:54:00Z",
    "author_association": "MEMBER",
    "body": "@sprw121 does your code make use of `deal` cheatcode? of not then this is unrelated, could you please open a separate issue for this, and ideally create a repro repo so I can reproduce this more easily?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315851302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315855411",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1315855411",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1315855411,
    "node_id": "IC_kwDOGBlvNc5Oblwz",
    "user": {
      "login": "sprw121",
      "id": 4331652,
      "node_id": "MDQ6VXNlcjQzMzE2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4331652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sprw121",
      "html_url": "https://github.com/sprw121",
      "followers_url": "https://api.github.com/users/sprw121/followers",
      "following_url": "https://api.github.com/users/sprw121/following{/other_user}",
      "gists_url": "https://api.github.com/users/sprw121/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sprw121/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sprw121/subscriptions",
      "organizations_url": "https://api.github.com/users/sprw121/orgs",
      "repos_url": "https://api.github.com/users/sprw121/repos",
      "events_url": "https://api.github.com/users/sprw121/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sprw121/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T20:57:53Z",
    "updated_at": "2022-11-15T20:57:53Z",
    "author_association": "NONE",
    "body": "> @sprw121 does your code make use of `deal` cheatcode? of not then this is unrelated, could you please open a separate issue for this, and ideally create a repro repo so I can reproduce this more easily?\r\n\r\nNo cheat code. Yes I can try to put up a repro repo. Let me know if you want me to delete / clean up the comments in this thread.",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1315855411/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1320445957",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1320445957",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1320445957,
    "node_id": "IC_kwDOGBlvNc5OtGgF",
    "user": {
      "login": "benesjan",
      "id": 13470840,
      "node_id": "MDQ6VXNlcjEzNDcwODQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/13470840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benesjan",
      "html_url": "https://github.com/benesjan",
      "followers_url": "https://api.github.com/users/benesjan/followers",
      "following_url": "https://api.github.com/users/benesjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/benesjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benesjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benesjan/subscriptions",
      "organizations_url": "https://api.github.com/users/benesjan/orgs",
      "repos_url": "https://api.github.com/users/benesjan/repos",
      "events_url": "https://api.github.com/users/benesjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benesjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-18T19:33:36Z",
    "updated_at": "2022-11-18T19:33:36Z",
    "author_association": "NONE",
    "body": "Hello @mattsse, our CI is now passing without any crashes so you can probably close this issue. Thank you for fixing this  ",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1320445957/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1339805827",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1339805827",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1339805827,
    "node_id": "IC_kwDOGBlvNc5P29CD",
    "user": {
      "login": "chrismin",
      "id": 9753941,
      "node_id": "MDQ6VXNlcjk3NTM5NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9753941?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrismin",
      "html_url": "https://github.com/chrismin",
      "followers_url": "https://api.github.com/users/chrismin/followers",
      "following_url": "https://api.github.com/users/chrismin/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrismin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrismin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrismin/subscriptions",
      "organizations_url": "https://api.github.com/users/chrismin/orgs",
      "repos_url": "https://api.github.com/users/chrismin/repos",
      "events_url": "https://api.github.com/users/chrismin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrismin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T18:35:10Z",
    "updated_at": "2022-12-06T18:35:10Z",
    "author_association": "NONE",
    "body": "Hi @mattsse  wanted to share that I'm unfortunately running into a similar issue. As far as I can tell, if a test combines the following, it leads to intermittent crashing of foundry:\r\n- using a fuzzed uint256 value with the `deal` cheatcode\r\n- `expectRevert`\r\n\r\nWhen I get a chance, I will try to create a small repro example!",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1339805827/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1339806567",
    "html_url": "https://github.com/foundry-rs/foundry/issues/3596#issuecomment-1339806567",
    "issue_url": "https://api.github.com/repos/foundry-rs/foundry/issues/3596",
    "id": 1339806567,
    "node_id": "IC_kwDOGBlvNc5P29Nn",
    "user": {
      "login": "chrismin",
      "id": 9753941,
      "node_id": "MDQ6VXNlcjk3NTM5NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9753941?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrismin",
      "html_url": "https://github.com/chrismin",
      "followers_url": "https://api.github.com/users/chrismin/followers",
      "following_url": "https://api.github.com/users/chrismin/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrismin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrismin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrismin/subscriptions",
      "organizations_url": "https://api.github.com/users/chrismin/orgs",
      "repos_url": "https://api.github.com/users/chrismin/repos",
      "events_url": "https://api.github.com/users/chrismin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrismin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T18:35:45Z",
    "updated_at": "2022-12-06T18:35:45Z",
    "author_association": "NONE",
    "body": "@benesjan, I'm curious if you had to do anything specific to resolve the issue in your code?",
    "reactions": {
      "url": "https://api.github.com/repos/foundry-rs/foundry/issues/comments/1339806567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/3629",
  "id": 1059904423,
  "node_id": "I_kwDOBggaLc4_LNun",
  "number": 3629,
  "title": "Better timeout indication on streaming json rpc requests",
  "user": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1124483401,
      "node_id": "MDU6TGFiZWwxMTI0NDgzNDAx",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/rpc",
      "name": "rpc",
      "color": "efe37a",
      "default": false,
      "description": ""
    },
    {
      "id": 2019353920,
      "node_id": "MDU6TGFiZWwyMDE5MzUzOTIw",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/low%20priority",
      "name": "low priority",
      "color": "C2E0C6",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "rubo",
    "id": 337518,
    "node_id": "MDQ6VXNlcjMzNzUxOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/337518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rubo",
    "html_url": "https://github.com/rubo",
    "followers_url": "https://api.github.com/users/rubo/followers",
    "following_url": "https://api.github.com/users/rubo/following{/other_user}",
    "gists_url": "https://api.github.com/users/rubo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rubo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rubo/subscriptions",
    "organizations_url": "https://api.github.com/users/rubo/orgs",
    "repos_url": "https://api.github.com/users/rubo/repos",
    "events_url": "https://api.github.com/users/rubo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rubo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rubo",
      "id": 337518,
      "node_id": "MDQ6VXNlcjMzNzUxOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/337518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rubo",
      "html_url": "https://github.com/rubo",
      "followers_url": "https://api.github.com/users/rubo/followers",
      "following_url": "https://api.github.com/users/rubo/following{/other_user}",
      "gists_url": "https://api.github.com/users/rubo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rubo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rubo/subscriptions",
      "organizations_url": "https://api.github.com/users/rubo/orgs",
      "repos_url": "https://api.github.com/users/rubo/repos",
      "events_url": "https://api.github.com/users/rubo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rubo/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-11-22T09:29:49Z",
  "updated_at": "2022-08-31T18:06:17Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Some JSON RPC requests are streamed, lazy evaluated (eth_getLogs for example). If the response becomes too large it is send through multiple http responses in chunks. If the timeout occurs it just abruptly stops sending data.\r\n\r\nIt would be good to handle timeouts better (http codes?) for those scenarios. But I am not sure if its possible.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/975472432",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3629#issuecomment-975472432",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629",
    "id": 975472432,
    "node_id": "IC_kwDOBggaLc46JIcw",
    "user": {
      "login": "ice09",
      "id": 2828581,
      "node_id": "MDQ6VXNlcjI4Mjg1ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2828581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ice09",
      "html_url": "https://github.com/ice09",
      "followers_url": "https://api.github.com/users/ice09/followers",
      "following_url": "https://api.github.com/users/ice09/following{/other_user}",
      "gists_url": "https://api.github.com/users/ice09/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ice09/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ice09/subscriptions",
      "organizations_url": "https://api.github.com/users/ice09/orgs",
      "repos_url": "https://api.github.com/users/ice09/repos",
      "events_url": "https://api.github.com/users/ice09/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ice09/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-22T12:28:03Z",
    "updated_at": "2021-11-22T12:28:03Z",
    "author_association": "NONE",
    "body": "For reference: \r\n\r\nI am querying the CirclesUBI Hub contract on the xDai Mainnet for all \"TRUST\" events (contract address: 0x29b9a7fBb8995b2423a71cC17cf9810798F6C543), the code is (in Java with web3j):\r\n\r\n```\r\nEthFilter eventFilter = new EthFilter(DefaultBlockParameter.valueOf(index), DefaultBlockParameter.valueOf(currentBlock), hub.getContractAddress());\r\nString encodedEventSignature = EventEncoder.encode(Hub.TRUST_EVENT);\r\n```\r\n\r\nand I am going from the deploy block (about 12000000) to LATEST (currently around 19000000) and expect around 1mio events, so \"a lot\".\r\n\r\nWithout high enough Timeout, I get back different indeterministic number of events, but no indicator that events are missing.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/975472432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/994631514",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3629#issuecomment-994631514",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629",
    "id": 994631514,
    "node_id": "IC_kwDOBggaLc47SN9a",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-15T10:23:10Z",
    "updated_at": "2021-12-15T10:23:10Z",
    "author_association": "MEMBER",
    "body": "@ice09 recommended solution is to split this filter into multiple by using some block numbers ranges.\r\n\r\nFor example in the merge when consensus client syncs deposit contract it uses block ranges of 1000.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/994631514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/994719846",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3629#issuecomment-994719846",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629",
    "id": 994719846,
    "node_id": "IC_kwDOBggaLc47Sjhm",
    "user": {
      "login": "ice09",
      "id": 2828581,
      "node_id": "MDQ6VXNlcjI4Mjg1ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2828581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ice09",
      "html_url": "https://github.com/ice09",
      "followers_url": "https://api.github.com/users/ice09/followers",
      "following_url": "https://api.github.com/users/ice09/following{/other_user}",
      "gists_url": "https://api.github.com/users/ice09/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ice09/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ice09/subscriptions",
      "organizations_url": "https://api.github.com/users/ice09/orgs",
      "repos_url": "https://api.github.com/users/ice09/repos",
      "events_url": "https://api.github.com/users/ice09/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ice09/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-15T11:56:13Z",
    "updated_at": "2021-12-15T11:57:03Z",
    "author_association": "NONE",
    "body": "Yes, thanks, that's what I did (for a on-site running node I used 10000) and it works very well. Still the behaviour could be more user/developer-friendly.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/994719846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/995084795",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3629#issuecomment-995084795",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3629",
    "id": 995084795,
    "node_id": "IC_kwDOBggaLc47T8n7",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-15T18:50:52Z",
    "updated_at": "2021-12-15T18:50:52Z",
    "author_association": "MEMBER",
    "body": "we will still look into it",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/995084795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5553",
  "id": 1662646333,
  "node_id": "I_kwDOBggaLc5jGfg9",
  "number": 5553,
  "title": "Nethermind Prometheus metrics improvements",
  "user": {
    "login": "cbermudez97",
    "id": 43155355,
    "node_id": "MDQ6VXNlcjQzMTU1MzU1",
    "avatar_url": "https://avatars.githubusercontent.com/u/43155355?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cbermudez97",
    "html_url": "https://github.com/cbermudez97",
    "followers_url": "https://api.github.com/users/cbermudez97/followers",
    "following_url": "https://api.github.com/users/cbermudez97/following{/other_user}",
    "gists_url": "https://api.github.com/users/cbermudez97/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cbermudez97/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cbermudez97/subscriptions",
    "organizations_url": "https://api.github.com/users/cbermudez97/orgs",
    "repos_url": "https://api.github.com/users/cbermudez97/repos",
    "events_url": "https://api.github.com/users/cbermudez97/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cbermudez97/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1437279887,
      "node_id": "MDU6TGFiZWwxNDM3Mjc5ODg3",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/metrics",
      "name": "metrics",
      "color": "d62655",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "deffrian",
    "id": 19891475,
    "node_id": "MDQ6VXNlcjE5ODkxNDc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19891475?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/deffrian",
    "html_url": "https://github.com/deffrian",
    "followers_url": "https://api.github.com/users/deffrian/followers",
    "following_url": "https://api.github.com/users/deffrian/following{/other_user}",
    "gists_url": "https://api.github.com/users/deffrian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/deffrian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/deffrian/subscriptions",
    "organizations_url": "https://api.github.com/users/deffrian/orgs",
    "repos_url": "https://api.github.com/users/deffrian/repos",
    "events_url": "https://api.github.com/users/deffrian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/deffrian/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "deffrian",
      "id": 19891475,
      "node_id": "MDQ6VXNlcjE5ODkxNDc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19891475?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deffrian",
      "html_url": "https://github.com/deffrian",
      "followers_url": "https://api.github.com/users/deffrian/followers",
      "following_url": "https://api.github.com/users/deffrian/following{/other_user}",
      "gists_url": "https://api.github.com/users/deffrian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deffrian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deffrian/subscriptions",
      "organizations_url": "https://api.github.com/users/deffrian/orgs",
      "repos_url": "https://api.github.com/users/deffrian/repos",
      "events_url": "https://api.github.com/users/deffrian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deffrian/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-11T14:40:15Z",
  "updated_at": "2023-04-26T09:08:52Z",
  "closed_at": "2023-04-26T09:08:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\nRight now Nethermind does have metrics exported in the Prometheus format but there are some other metrics that could be useful as well that are not exported right now. Also including some of the existing metrics will be useful as well.\r\n\r\n**Describe the solution you'd like**\r\nWill like to have new metrics and tags for information like this ones:\r\n* `nethermind_network`: This metric can be used to store some general metadata about the network a Nethermind node is running. Like for example the network name and other configuration values. This information could be added as tags to this metric, a gauge probably, and have its value always set to one.\r\n* `nethermind_sync_time`: It could contain the number of milliseconds needed for the node to sync or how much time it has been in a sync state.\r\n* `nethermind_db_size`: The size of the existing database size in bytes.\r\n* `nethermind_state_db_size`: The size of the current, or all, states dbs in bytes. Mentioned having different since it could keep track of the new state created by a Full prune and differentiate them with tags.\r\n* Add general tags for all variables like the `node_name` if defined.\r\n\r\nAdded here the ones that have been used the most by me but I think there may be other cases of metrics that could be very helpful as well.\r\n\r\n**Describe alternatives you've considered**\r\nCurrently, I had to add most of these metrics and tags manually by either adding manually some of the tags to the Prometheus configuration or configuring the Prometheus Node Exporter to collect some of them as well via Text collector.\r\n\r\n**Additional context**\r\nHaving these metrics and tags could improve the monitoring and performance analysis done over the nodes. Also, having them could contribute to keeping an updated source of info from where to update the existing Docs.\r\n",
  "closed_by": {
    "login": "deffrian",
    "id": 19891475,
    "node_id": "MDQ6VXNlcjE5ODkxNDc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19891475?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/deffrian",
    "html_url": "https://github.com/deffrian",
    "followers_url": "https://api.github.com/users/deffrian/followers",
    "following_url": "https://api.github.com/users/deffrian/following{/other_user}",
    "gists_url": "https://api.github.com/users/deffrian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/deffrian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/deffrian/subscriptions",
    "organizations_url": "https://api.github.com/users/deffrian/orgs",
    "repos_url": "https://api.github.com/users/deffrian/repos",
    "events_url": "https://api.github.com/users/deffrian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/deffrian/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1503575812",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5553#issuecomment-1503575812",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553",
    "id": 1503575812,
    "node_id": "IC_kwDOBggaLc5Znr8E",
    "user": {
      "login": "MarekM25",
      "id": 9356351,
      "node_id": "MDQ6VXNlcjkzNTYzNTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarekM25",
      "html_url": "https://github.com/MarekM25",
      "followers_url": "https://api.github.com/users/MarekM25/followers",
      "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
      "organizations_url": "https://api.github.com/users/MarekM25/orgs",
      "repos_url": "https://api.github.com/users/MarekM25/repos",
      "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarekM25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-11T15:11:49Z",
    "updated_at": "2023-04-11T15:11:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would love to see nethermind_db_size, nethermind_state_db_size or even metrics for others DBs like receipts, blocks, headers ",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1503575812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1503612506",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5553#issuecomment-1503612506",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5553",
    "id": 1503612506,
    "node_id": "IC_kwDOBggaLc5Zn05a",
    "user": {
      "login": "dceleda",
      "id": 26231116,
      "node_id": "MDQ6VXNlcjI2MjMxMTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/26231116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dceleda",
      "html_url": "https://github.com/dceleda",
      "followers_url": "https://api.github.com/users/dceleda/followers",
      "following_url": "https://api.github.com/users/dceleda/following{/other_user}",
      "gists_url": "https://api.github.com/users/dceleda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dceleda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dceleda/subscriptions",
      "organizations_url": "https://api.github.com/users/dceleda/orgs",
      "repos_url": "https://api.github.com/users/dceleda/repos",
      "events_url": "https://api.github.com/users/dceleda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dceleda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-11T15:27:22Z",
    "updated_at": "2023-04-11T15:37:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarekM25 very simple to implement. Probably by using a timer and the FileInfo class.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1503612506/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

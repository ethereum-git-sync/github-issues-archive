{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/1836",
  "id": 612078028,
  "node_id": "MDU6SXNzdWU2MTIwNzgwMjg=",
  "number": 1836,
  "title": "FR: Sync over network",
  "user": {
    "login": "cerealkill",
    "id": 2923413,
    "node_id": "MDQ6VXNlcjI5MjM0MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2923413?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cerealkill",
    "html_url": "https://github.com/cerealkill",
    "followers_url": "https://api.github.com/users/cerealkill/followers",
    "following_url": "https://api.github.com/users/cerealkill/following{/other_user}",
    "gists_url": "https://api.github.com/users/cerealkill/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cerealkill/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cerealkill/subscriptions",
    "organizations_url": "https://api.github.com/users/cerealkill/orgs",
    "repos_url": "https://api.github.com/users/cerealkill/repos",
    "events_url": "https://api.github.com/users/cerealkill/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cerealkill/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1370676628,
      "node_id": "MDU6TGFiZWwxMzcwNjc2NjI4",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/database",
      "name": "database",
      "color": "30c19d",
      "default": false,
      "description": ""
    },
    {
      "id": 1907291687,
      "node_id": "MDU6TGFiZWwxOTA3MjkxNjg3",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/configs",
      "name": "configs",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-05-04T18:29:25Z",
  "updated_at": "2020-05-14T15:47:06Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Feature request\r\n### Intro/Problem\r\nHi Nethermind team, first of all, thanks for the great work. I run Nethermind on a VPS and my instance has run out of storage. Unfo the provider doesn't offer larger instances but offers storage instances that I can connect over NFS/SMB or any other network-file-system.\r\n### Feature\r\nExecute the client with recent blocks on one store and use a remote database to scale. Best if the user can determine when the database starts storing on execution. i.e. \r\n`mainnet.cfg`\r\n```json\r\n{\r\n...\r\n\"RemoteDBURL\": \"192.168.2.43:134\",\r\n\"RemoteDBFromLatest\": 50,\r\n...\r\n}\r\n```\r\nThis would start storing blocks on this second, remote, slower database.\r\n### Dream feature\r\nThe best scaling scenario would be to have multiple storages that can be added later, as chains get larger, and benefit from parallelism, maybe even redundancy, HDFS-style.\r\ni.e. \r\n`mainnet.cfg`\r\n```json\r\n{\r\n...\r\n\"RemoteDBEnabled\": true,\r\n\"RemoteDBFromLatest\": 50\r\n\"RemoteDBConfig: [\r\n  {\"RemoteDBIndex\": 0,\r\n    \"RemoteDBURL\": \"192.168.2.43:134\",\r\n    \"RemoteDBCapacity\": 10001337\r\n  },\r\n  {\"RemoteDBIndex\": 1,\r\n    \"RemoteDBURL\": \"192.168.2.45:134\",\r\n    \"RemoteDBCapacity\": 1337\r\n  }],\r\n...\r\n}\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/623806294",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-623806294",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 623806294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzgwNjI5NA==",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-05T02:48:41Z",
    "updated_at": "2020-05-05T02:48:41Z",
    "author_association": "MEMBER",
    "body": "This is a cool idea. We can experiment with it soon (although need to close some high priority items, one of which is pruning which may also address your issue).\r\n\r\nI think this would be relatively easy done but not sure yet how much it would slow the block execution (but I assume this would be not an issue for you?)",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/623806294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/623806547",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-623806547",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 623806547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzgwNjU0Nw==",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-05T02:50:21Z",
    "updated_at": "2020-05-05T02:50:21Z",
    "author_association": "MEMBER",
    "body": "Actually, I think the biggest issue will be ensuring that the DB does not go beyond capacity on a given drive so it may be a bit more of a challenge.\r\n\r\nIdeally each database would have a ladder of locations.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/623806547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/624069880",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-624069880",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 624069880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDA2OTg4MA==",
    "user": {
      "login": "cerealkill",
      "id": 2923413,
      "node_id": "MDQ6VXNlcjI5MjM0MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2923413?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cerealkill",
      "html_url": "https://github.com/cerealkill",
      "followers_url": "https://api.github.com/users/cerealkill/followers",
      "following_url": "https://api.github.com/users/cerealkill/following{/other_user}",
      "gists_url": "https://api.github.com/users/cerealkill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cerealkill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cerealkill/subscriptions",
      "organizations_url": "https://api.github.com/users/cerealkill/orgs",
      "repos_url": "https://api.github.com/users/cerealkill/repos",
      "events_url": "https://api.github.com/users/cerealkill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cerealkill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-05T13:54:28Z",
    "updated_at": "2020-05-05T13:54:28Z",
    "author_association": "NONE",
    "body": "Hi @tkstanczak ! Thanks for the reply, really appreciate you considering it!\r\n\r\nSure, block execution is not a big issue, if the user really needs it, we will wait for the Http timeout and/or use the WebSocket API for a fully async response.\r\n\r\nAbout the storage limit issue, that is why I suggested the user would set it manually under the kw`RemoteDBCapacity`, so if it gets bigger or smaller, it can be managed from outside, and if the user sets it falsely, the client can detect that the DB is read-only but did not reach size limit.\r\n\r\nI noticed I made a mistake, I wanted to say HDFS, not IPFS! Hadoop FS is a beautiful concept that could speed block search up, solve data indexing, and minimize chances of data corruption/unavailability.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/624069880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/624651222",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-624651222",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 624651222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDY1MTIyMg==",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-06T13:31:35Z",
    "updated_at": "2020-05-06T13:31:35Z",
    "author_association": "MEMBER",
    "body": "Sounds really cool, I think we just cannot pick it up at the moment but I will remember this as a potential improvement post pruning. I think we have the skills to deliver this now but it may take time to prioritize.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/624651222/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/625930759",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-625930759",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 625930759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTkzMDc1OQ==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-08T17:34:30Z",
    "updated_at": "2020-05-08T17:38:05Z",
    "author_association": "NONE",
    "body": "Wouldn't it be easier to simply mount the remote location in the VM?\r\n\r\nIn Linux you can modify your /etc/fstab - in Windows you can map a network drive.\r\n\r\nI have mounted SMB stores in Linux VMs successfully and NFS should be even easier.\r\n\r\nI also recently tested using symlinks for different folders in the database folder. Obviously it would be neat to be able to split it natively in the app but there are options.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/625930759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/628721939",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/1836#issuecomment-628721939",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1836",
    "id": 628721939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODcyMTkzOQ==",
    "user": {
      "login": "cerealkill",
      "id": 2923413,
      "node_id": "MDQ6VXNlcjI5MjM0MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2923413?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cerealkill",
      "html_url": "https://github.com/cerealkill",
      "followers_url": "https://api.github.com/users/cerealkill/followers",
      "following_url": "https://api.github.com/users/cerealkill/following{/other_user}",
      "gists_url": "https://api.github.com/users/cerealkill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cerealkill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cerealkill/subscriptions",
      "organizations_url": "https://api.github.com/users/cerealkill/orgs",
      "repos_url": "https://api.github.com/users/cerealkill/repos",
      "events_url": "https://api.github.com/users/cerealkill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cerealkill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T15:47:05Z",
    "updated_at": "2020-05-14T15:47:05Z",
    "author_association": "NONE",
    "body": "Hi @MysticRyuujin, That is what I did there and got locking issues. Were you able to successfully do it using Nethermind? If so, would you be so kind to share configuration details? That would really save me a great deal of trial and error I already spent on this. I tried both NFS and SMB, both failed with geth, parity and nethermind in the past.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/628721939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

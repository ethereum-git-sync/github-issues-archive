{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/2239",
  "id": 681011691,
  "node_id": "MDU6SXNzdWU2ODEwMTE2OTE=",
  "number": 2239,
  "title": "ReportGasUpdateForVmTrace not implemented for StateTestTxTracer",
  "user": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "SebastianDremo",
    "id": 33788961,
    "node_id": "MDQ6VXNlcjMzNzg4OTYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/33788961?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SebastianDremo",
    "html_url": "https://github.com/SebastianDremo",
    "followers_url": "https://api.github.com/users/SebastianDremo/followers",
    "following_url": "https://api.github.com/users/SebastianDremo/following{/other_user}",
    "gists_url": "https://api.github.com/users/SebastianDremo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SebastianDremo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SebastianDremo/subscriptions",
    "organizations_url": "https://api.github.com/users/SebastianDremo/orgs",
    "repos_url": "https://api.github.com/users/SebastianDremo/repos",
    "events_url": "https://api.github.com/users/SebastianDremo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SebastianDremo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "SebastianDremo",
      "id": 33788961,
      "node_id": "MDQ6VXNlcjMzNzg4OTYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33788961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SebastianDremo",
      "html_url": "https://github.com/SebastianDremo",
      "followers_url": "https://api.github.com/users/SebastianDremo/followers",
      "following_url": "https://api.github.com/users/SebastianDremo/following{/other_user}",
      "gists_url": "https://api.github.com/users/SebastianDremo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SebastianDremo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SebastianDremo/subscriptions",
      "organizations_url": "https://api.github.com/users/SebastianDremo/orgs",
      "repos_url": "https://api.github.com/users/SebastianDremo/repos",
      "events_url": "https://api.github.com/users/SebastianDremo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SebastianDremo/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-08-18T12:43:18Z",
  "updated_at": "2020-08-19T15:47:08Z",
  "closed_at": "2020-08-19T15:47:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I've been implementing a better fuzzer and ran into the following problem: \r\n\r\n\r\n\r\n>  ~/ethereum/nethermind/nethtest -i evmFuzz-294855360.json \r\n```\r\nUnhandled exception. System.NotImplementedException: The method or operation is not implemented.\r\n   at Nethermind.State.Test.Runner.StateTestTxTracer.ReportGasUpdateForVmTrace(Int64 refund, Int64 gasAvailable)\r\n   at Nethermind.Evm.VirtualMachine.ExecuteCall(EvmState vmState, Byte[] previousCallResult, ZeroPaddedSpan previousCallOutput, UInt256& previousCallOutputDestination, IReleaseSpec spec)\r\n   at Nethermind.Evm.VirtualMachine.Run(EvmState state, ITxTracer txTracer)\r\n   at Nethermind.Evm.TransactionProcessor.Execute(Transaction transaction, BlockHeader block, ITxTracer txTracer, Boolean isCall)\r\n   at Nethermind.Evm.TransactionProcessor.Execute(Transaction transaction, BlockHeader block, ITxTracer txTracer)\r\n   at Ethereum.Test.Base.GeneralStateTestBase.RunTest(GeneralStateTest test, ITxTracer txTracer)\r\n   at Nethermind.State.Test.Runner.StateTestsRunner.RunTests()\r\n   at Nethermind.State.Test.Runner.Program.RunSingleTest(String path, Func`2 testRunnerBuilder)\r\n   at Nethermind.State.Test.Runner.Program.Run(Options options)\r\n   at Nethermind.State.Test.Runner.Program.Main(String[] args)\r\n```\r\n> cat evmFuzz-294855360.json \r\n```\r\n{\"evmFuzz-294855360\":{\"env\":{\"currentCoinbase\":\"b94f5374fce5edbc8e2a8697c15331677e6ebf0b\",\"currentDifficulty\":\"0x20000\",\"currentGasLimit\":\"0x26e1f476fe1e22\",\"currentNumber\":\"0x1\",\"currentTimestamp\":\"0x3e8\",\"previousHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"},\"pre\":{\"0x00000000000000000000000000000ca1100b1a7e\":{\"code\":\"0x600060006000f06000600060006000845a7a5050632debcf556379f6e55e635901b134632ac1c2ad600060e25af169b7ea023db3aee44e0da95b63a6b8bc7063ce14626d6358a4c8c6634a61c801600060906000f160f3634a99bbec5360bb634a99bbed536076634a99bbee5360a2634a99bbef5360f6634a99bbf05360e3634a99bbf15360a9634a99bbf2535b63adb2a2bcebb932600760005360cd60015360a86002536000600360006000f56000600060006000845a2c5050603560005360cf60015360b260025360576003536030600453601960055360ed600653600760006000f06000600060006000845a675050691db8cc3c94d2419727f863b3e6956f631c857baff35b60e760005360ab600153604160025360676003536070600453609a60055360c2600653605a600753600660085360096000f347639cd7e9a263c58b7d19638bf840746301cf4d93600060fe6000f160f860005360c460015360c2600253606560035360c7600453600560006000f06000600060006000845a945050215b5b638e66452c637b832ebff3678a19e50a8e6bfe99668621e7fe463e9fb7\",\"storage\":{},\"balance\":\"0x0\",\"nonce\":\"0x0\"},\"0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b\":{\"code\":\"0x\",\"storage\":{},\"balance\":\"0xffffffff\",\"nonce\":\"0x0\"}},\"transaction\":{\"gasPrice\":\"0x1\",\"nonce\":\"0x0\",\"to\":\"0x00000000000000000000000000000Ca1100b1A7E\",\"data\":[\"0xbbeec5195cb1bbc6aedde3b02c150f744ebf7fe5b1be91ab9a8a716b4b82dc96\"],\"gasLimit\":[\"0x7a1200\"],\"value\":[\"0xff\"],\"secretKey\":\"0x45a915e4d060149eb4365960e6a7a45f334393093061116b197e3240065ff2d8\"},\"out\":\"0x\",\"post\":{\"Istanbul\":[{\"hash\":\"0000000000000000000000000000000000000000000000000000000000000000\",\"logs\":\"0000000000000000000000000000000000000000000000000000000000000000\",\"indexes\":{\"data\":0,\"gas\":0,\"value\":0}}]}}}\r\n```\r\nGeth for reference:\r\n\r\n> ~/go/src/github.com/ethereum/go-ethereum/build/bin/evm --json --nomemory statetest evmFuzz-294855360.json \r\n```\r\n{\"pc\":0,\"op\":96,\"gas\":\"0x79bdf8\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":2,\"op\":96,\"gas\":\"0x79bdf5\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":4,\"op\":96,\"gas\":\"0x79bdf2\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x0\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":6,\"op\":240,\"gas\":\"0x79bdef\",\"gasCost\":\"0x7d00\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x0\",\"0x0\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"CREATE\",\"error\":\"\"}\r\n{\"pc\":7,\"op\":96,\"gas\":\"0x7940ef\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":9,\"op\":96,\"gas\":\"0x7940ec\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":11,\"op\":96,\"gas\":\"0x7940e9\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":13,\"op\":96,\"gas\":\"0x7940e6\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":15,\"op\":132,\"gas\":\"0x7940e3\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\",\"0x0\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"DUP5\",\"error\":\"\"}\r\n{\"pc\":16,\"op\":90,\"gas\":\"0x7940e0\",\"gasCost\":\"0x2\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\",\"0x0\",\"0x0\",\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"GAS\",\"error\":\"\"}\r\n{\"pc\":17,\"op\":122,\"gas\":\"0x7940de\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\",\"0x0\",\"0x0\",\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x7940de\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH27\",\"error\":\"\"}\r\n{\"pc\":45,\"op\":241,\"gas\":\"0x7940db\",\"gasCost\":\"0x775df6\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0x0\",\"0x0\",\"0x0\",\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x7940de\",\"0x5050632debcf556379f6e55e635901b134632ac1c2ad600060e25a\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"CALL\",\"error\":\"\"}\r\n{\"pc\":46,\"op\":105,\"gas\":\"0x78c24b\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH10\",\"error\":\"\"}\r\n{\"pc\":57,\"op\":91,\"gas\":\"0x78c248\",\"gasCost\":\"0x1\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"JUMPDEST\",\"error\":\"\"}\r\n{\"pc\":58,\"op\":99,\"gas\":\"0x78c247\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH4\",\"error\":\"\"}\r\n{\"pc\":63,\"op\":99,\"gas\":\"0x78c244\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH4\",\"error\":\"\"}\r\n{\"pc\":68,\"op\":99,\"gas\":\"0x78c241\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH4\",\"error\":\"\"}\r\n{\"pc\":73,\"op\":99,\"gas\":\"0x78c23e\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\",\"0x58a4c8c6\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH4\",\"error\":\"\"}\r\n{\"pc\":78,\"op\":96,\"gas\":\"0x78c23b\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\",\"0x58a4c8c6\",\"0x4a61c801\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":80,\"op\":96,\"gas\":\"0x78c238\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\",\"0x58a4c8c6\",\"0x4a61c801\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":82,\"op\":96,\"gas\":\"0x78c235\",\"gasCost\":\"0x3\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\",\"0x58a4c8c6\",\"0x4a61c801\",\"0x0\",\"0x90\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\",\"error\":\"\"}\r\n{\"pc\":84,\"op\":241,\"gas\":\"0x78c232\",\"gasCost\":\"0x43dcbbb5ec70\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[\"0x805e0d3cde3764a4d0a02f33cf624c8b7cfd911a\",\"0x0\",\"0xb7ea023db3aee44e0da9\",\"0xa6b8bc70\",\"0xce14626d\",\"0x58a4c8c6\",\"0x4a61c801\",\"0x0\",\"0x90\",\"0x0\"],\"returnStack\":[],\"returnData\":null,\"depth\":1,\"refund\":0,\"opName\":\"CALL\",\"error\":\"out of gas\"}\r\n{\"output\":\"\",\"gasUsed\":\"0x79bdf8\",\"time\":641884,\"error\":\"out of gas\"}\r\n{\"stateRoot\": \"0bf6ff01ac1dba27858910abc044d88add0af6a7ea57c0d27d4c70303a743a18\"}\r\n[\r\n  {\r\n    \"name\": \"evmFuzz-294855360\",\r\n    \"pass\": false,\r\n    \"fork\": \"Istanbul\",\r\n    \"error\": \"post state root mismatch: got 0bf6ff01ac1dba27858910abc044d88add0af6a7ea57c0d27d4c70303a743a18, want 0000000000000000000000000000000000000000000000000000000000000000\"\r\n  }\r\n]\r\n```\r\nfound with goevmlab",
  "closed_by": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2239/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

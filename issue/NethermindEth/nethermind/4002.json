{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/4002",
  "id": 1224542519,
  "node_id": "I_kwDOBggaLc5I_Qk3",
  "number": 4002,
  "title": "StateProvider: System.InvalidOperationException: Operation is not valid due to the current state of the object.",
  "user": {
    "login": "rickyrombo",
    "id": 3690498,
    "node_id": "MDQ6VXNlcjM2OTA0OTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3690498?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rickyrombo",
    "html_url": "https://github.com/rickyrombo",
    "followers_url": "https://api.github.com/users/rickyrombo/followers",
    "following_url": "https://api.github.com/users/rickyrombo/following{/other_user}",
    "gists_url": "https://api.github.com/users/rickyrombo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rickyrombo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rickyrombo/subscriptions",
    "organizations_url": "https://api.github.com/users/rickyrombo/orgs",
    "repos_url": "https://api.github.com/users/rickyrombo/repos",
    "events_url": "https://api.github.com/users/rickyrombo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rickyrombo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4117342111,
      "node_id": "LA_kwDOBggaLc71aaef",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/high%20priority",
      "name": "high priority",
      "color": "D93F0B",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2022-05-03T19:48:23Z",
  "updated_at": "2022-05-28T12:19:14Z",
  "closed_at": "2022-05-26T13:44:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nRunning an RPC node. Seems like a race condition(?) of StateProvider, only seeing when under heavy load. This happens intermittently/nondeterministicly\r\n\r\nLooking into trying to reproduce more consistently and investigating what's putting the StateProvider in a bad state, will follow up.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nDon't have a good deterministic repro here.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nNo error on an `eth_call`\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\nFull log:\r\n```\r\n2022-05-03 19:33:42.2380|Error during method execution, request: ID 197, eth_call({\r\n  \"data\": \"0x69eea1d64400000000000000000000000000000000000000000000000000000000000000\",\r\n  \"to\": \"0x981c44040cb6150a2b8a7f63fb182760505bf666\"\r\n},latest) System.InvalidOperationException: Operation is not valid due to the current state of the object.\r\n   at Nethermind.State.StateProvider.get_StateRoot() in /src/Nethermind/Nethermind.State/StateProvider.cs:line 87\r\n   at Nethermind.Facade.BlockchainBridge.CallAndRestore(BlockHeader blockHeader, UInt256& timestamp, Transaction transaction, Boolean treatBlockHeaderAsParentBlock, ITxTracer tracer) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 283\r\n   at Nethermind.Facade.BlockchainBridge.TryCallAndRestore(BlockHeader blockHeader, UInt256& timestamp, Transaction transaction, Boolean treatBlockHeaderAsParentBlock, ITxTracer tracer) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 240\r\n   at Nethermind.Facade.BlockchainBridge.Call(BlockHeader header, Transaction tx, CancellationToken cancellationToken) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 173\r\n   at Nethermind.JsonRpc.Modules.Eth.EthRpcModule.CallTxExecutor.ExecuteTx(BlockHeader header, Transaction tx, CancellationToken token) in /src/Nethermind/Nethermind.JsonRpc/Modules/Eth/EthModule.TransactionExecutor.cs:line 93\r\n   at Nethermind.JsonRpc.Modules.Eth.EthRpcModule.TxExecutor`1.ExecuteTx(TransactionForRpc transactionCall, BlockParameter blockParameter) in /src/Nethermind/Nethermind.JsonRpc/Modules/Eth/EthModule.TransactionExecutor.cs:line 69\r\n2022-05-03 19:33:42.2380|Error when handling ID 197, eth_call({\r\n  \"data\": \"0x69eea1d64400000000000000000000000000000000000000000000000000000000000000\",\r\n  \"to\": \"0x981c44040cb6150a2b8a7f63fb182760505bf666\"\r\n},latest) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32603,\"message\":\"Internal error\",\"data\":\"System.InvalidOperationException: Operation is not valid due to the current state of the object.\\n   at Nethermind.State.StateProvider.get_StateRoot() in /src/Nethermind/Nethermind.State/StateProvider.cs:line 87\\n   at Nethermind.Facade.BlockchainBridge.CallAndRestore(BlockHeader blockHeader, UInt256& timestamp, Transaction transaction, Boolean treatBlockHeaderAsParentBlock, ITxTracer tracer) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 283\\n   at Nethermind.Facade.BlockchainBridge.TryCallAndRestore(BlockHeader blockHeader, UInt256& timestamp, Transaction transaction, Boolean treatBlockHeaderAsParentBlock, ITxTracer tracer) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 240\\n   at Nethermind.Facade.BlockchainBridge.Call(BlockHeader header, Transaction tx, CancellationToken cancellationToken) in /src/Nethermind/Nethermind.Facade/BlockchainBridge.cs:line 173\\n   at Nethermind.JsonRpc.Modules.Eth.EthRpcModule.CallTxExecutor.ExecuteTx(BlockHeader header, Transaction tx, CancellationToken token) in /src/Nethermind/Nethermind.JsonRpc/Modules/Eth/EthModule.TransactionExecutor.cs:line 93\\n   at Nethermind.JsonRpc.Modules.Eth.EthRpcModule.TxExecutor`1.ExecuteTx(TransactionForRpc transactionCall, BlockParameter blockParameter) in /src/Nethermind/Nethermind.JsonRpc/Modules/Eth/EthModule.TransactionExecutor.cs:line 69\"},\"id\":197} \r\n```",
  "closed_by": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002/reactions",
    "total_count": 12,
    "+1": 6,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 6
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1116532135",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1116532135",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1116532135,
    "node_id": "IC_kwDOBggaLc5CjO2n",
    "user": {
      "login": "dmanjunath",
      "id": 295938,
      "node_id": "MDQ6VXNlcjI5NTkzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/295938?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmanjunath",
      "html_url": "https://github.com/dmanjunath",
      "followers_url": "https://api.github.com/users/dmanjunath/followers",
      "following_url": "https://api.github.com/users/dmanjunath/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmanjunath/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmanjunath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmanjunath/subscriptions",
      "organizations_url": "https://api.github.com/users/dmanjunath/orgs",
      "repos_url": "https://api.github.com/users/dmanjunath/repos",
      "events_url": "https://api.github.com/users/dmanjunath/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmanjunath/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-03T20:06:28Z",
    "updated_at": "2022-05-03T20:06:28Z",
    "author_association": "NONE",
    "body": "Not very knowledgeable about this issue, but running into this problem as well so doing a little digging. From looking at the [file from the stack trace](https://github.com/NethermindEth/nethermind/blob/aec476d0689416dc89e66f59e317b4d1bb2a3b7d/src/Nethermind/Nethermind.State/StateProvider.cs#L85-L88), could it be a race condition where one tx sets _needsStateRootUpdate = true and before RecalculateStateRoot is called, another tx tries to interact with the same object?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1116532135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1121476861",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1121476861",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1121476861,
    "node_id": "IC_kwDOBggaLc5C2GD9",
    "user": {
      "login": "rickyrombo",
      "id": 3690498,
      "node_id": "MDQ6VXNlcjM2OTA0OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3690498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rickyrombo",
      "html_url": "https://github.com/rickyrombo",
      "followers_url": "https://api.github.com/users/rickyrombo/followers",
      "following_url": "https://api.github.com/users/rickyrombo/following{/other_user}",
      "gists_url": "https://api.github.com/users/rickyrombo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rickyrombo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rickyrombo/subscriptions",
      "organizations_url": "https://api.github.com/users/rickyrombo/orgs",
      "repos_url": "https://api.github.com/users/rickyrombo/repos",
      "events_url": "https://api.github.com/users/rickyrombo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rickyrombo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-09T19:14:16Z",
    "updated_at": "2022-05-09T19:14:16Z",
    "author_association": "NONE",
    "body": "@LukaszRozmej would you be able to shed some light on this maybe?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1121476861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1122477658",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1122477658",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1122477658,
    "node_id": "IC_kwDOBggaLc5C56Za",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-10T14:32:09Z",
    "updated_at": "2022-05-10T14:32:09Z",
    "author_association": "MEMBER",
    "body": "Hi we will prioritize that after we are merge ready.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1122477658/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1135249598",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1135249598",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1135249598,
    "node_id": "IC_kwDOBggaLc5Dqoi-",
    "user": {
      "login": "jamescarter-le",
      "id": 1643692,
      "node_id": "MDQ6VXNlcjE2NDM2OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1643692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamescarter-le",
      "html_url": "https://github.com/jamescarter-le",
      "followers_url": "https://api.github.com/users/jamescarter-le/followers",
      "following_url": "https://api.github.com/users/jamescarter-le/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamescarter-le/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamescarter-le/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamescarter-le/subscriptions",
      "organizations_url": "https://api.github.com/users/jamescarter-le/orgs",
      "repos_url": "https://api.github.com/users/jamescarter-le/repos",
      "events_url": "https://api.github.com/users/jamescarter-le/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamescarter-le/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-23T23:50:53Z",
    "updated_at": "2022-05-23T23:50:53Z",
    "author_association": "NONE",
    "body": "+1 With this happening to me on simple eth_Call queries, just getting some State from a contract.\r\nOdd I've not seen it before, but just started happening today, no change in application. Running 1.13.0",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1135249598/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136316849",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1136316849",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1136316849,
    "node_id": "IC_kwDOBggaLc5DutGx",
    "user": {
      "login": "raymondjacobson",
      "id": 2731362,
      "node_id": "MDQ6VXNlcjI3MzEzNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2731362?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/raymondjacobson",
      "html_url": "https://github.com/raymondjacobson",
      "followers_url": "https://api.github.com/users/raymondjacobson/followers",
      "following_url": "https://api.github.com/users/raymondjacobson/following{/other_user}",
      "gists_url": "https://api.github.com/users/raymondjacobson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/raymondjacobson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/raymondjacobson/subscriptions",
      "organizations_url": "https://api.github.com/users/raymondjacobson/orgs",
      "repos_url": "https://api.github.com/users/raymondjacobson/repos",
      "events_url": "https://api.github.com/users/raymondjacobson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/raymondjacobson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-24T18:51:18Z",
    "updated_at": "2022-05-24T18:51:18Z",
    "author_association": "NONE",
    "body": "@jamescarter-le  This is similar to what I've observed. This happens only when under a lot of RPC load, but it causes fairly large problems because we see responses return incorrect/empty data.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136316849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136397578",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1136397578",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1136397578,
    "node_id": "IC_kwDOBggaLc5DvA0K",
    "user": {
      "login": "jamescarter-le",
      "id": 1643692,
      "node_id": "MDQ6VXNlcjE2NDM2OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1643692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamescarter-le",
      "html_url": "https://github.com/jamescarter-le",
      "followers_url": "https://api.github.com/users/jamescarter-le/followers",
      "following_url": "https://api.github.com/users/jamescarter-le/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamescarter-le/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamescarter-le/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamescarter-le/subscriptions",
      "organizations_url": "https://api.github.com/users/jamescarter-le/orgs",
      "repos_url": "https://api.github.com/users/jamescarter-le/repos",
      "events_url": "https://api.github.com/users/jamescarter-le/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamescarter-le/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-24T20:25:27Z",
    "updated_at": "2022-05-24T20:26:51Z",
    "author_association": "NONE",
    "body": "> @jamescarter-le  This is similar to what I've observed. This happens only when under a lot of RPC load, but it causes fairly large problems because we see responses return incorrect/empty data.\n\nI have this happening under reasonably light load, covering live UniV2 and V3 swaps, nothing I would consider intense. I'll get some counter data to share.\n\nI had run master branch over this DB set, and before that had not experienced this issue. I am resyncing a new DB that should be finished tomorrow for me to check if that displays the same issue.\n\nI have implemented a retry, but main issue for me is eth_estimateGas failing. I am syncing Geth also to compare.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136397578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136557649",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1136557649",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1136557649,
    "node_id": "IC_kwDOBggaLc5Dvn5R",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T00:24:14Z",
    "updated_at": "2022-05-25T00:24:14Z",
    "author_association": "MEMBER",
    "body": "I might have found the root cause, but would be grateful for any feedback if it works for you. Packages are here: https://github.com/NethermindEth/nethermind/actions/runs/2381291605 I can build a docker image if needed.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136557649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136578504",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1136578504",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1136578504,
    "node_id": "IC_kwDOBggaLc5Dvs_I",
    "user": {
      "login": "raymondjacobson",
      "id": 2731362,
      "node_id": "MDQ6VXNlcjI3MzEzNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2731362?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/raymondjacobson",
      "html_url": "https://github.com/raymondjacobson",
      "followers_url": "https://api.github.com/users/raymondjacobson/followers",
      "following_url": "https://api.github.com/users/raymondjacobson/following{/other_user}",
      "gists_url": "https://api.github.com/users/raymondjacobson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/raymondjacobson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/raymondjacobson/subscriptions",
      "organizations_url": "https://api.github.com/users/raymondjacobson/orgs",
      "repos_url": "https://api.github.com/users/raymondjacobson/repos",
      "events_url": "https://api.github.com/users/raymondjacobson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/raymondjacobson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T01:00:18Z",
    "updated_at": "2022-05-25T01:00:18Z",
    "author_association": "NONE",
    "body": "> I might have found the root cause, but would be grateful for any feedback if it works for you. Packages are here: https://github.com/NethermindEth/nethermind/actions/runs/2381291605 I can build a docker image if needed.\r\n\r\nThank you @LukaszRozmej ! Definitely happy to test. If you can build a docker image, that would be fantastic.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136578504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136972701",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1136972701",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1136972701,
    "node_id": "IC_kwDOBggaLc5DxNOd",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T08:50:05Z",
    "updated_at": "2022-05-25T08:50:05Z",
    "author_association": "MEMBER",
    "body": "@raymondjacobson please test  from: https://hub.docker.com/layers/nethermind/nethermindeth/nethermind/json-rpc-state-reset-fix/images/sha256-19486c4ec5a6a69dca5d1e6a86c0178076f0ad6401f3eaf28b83d18f02a1cd0c?context=explore",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1136972701/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137093260",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1137093260",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1137093260,
    "node_id": "IC_kwDOBggaLc5DxqqM",
    "user": {
      "login": "jamescarter-le",
      "id": 1643692,
      "node_id": "MDQ6VXNlcjE2NDM2OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1643692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamescarter-le",
      "html_url": "https://github.com/jamescarter-le",
      "followers_url": "https://api.github.com/users/jamescarter-le/followers",
      "following_url": "https://api.github.com/users/jamescarter-le/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamescarter-le/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamescarter-le/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamescarter-le/subscriptions",
      "organizations_url": "https://api.github.com/users/jamescarter-le/orgs",
      "repos_url": "https://api.github.com/users/jamescarter-le/repos",
      "events_url": "https://api.github.com/users/jamescarter-le/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamescarter-le/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T10:51:31Z",
    "updated_at": "2022-05-25T10:51:31Z",
    "author_association": "NONE",
    "body": "This looks like it has fixed my issue, will continue to monitor.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137093260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137124312",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1137124312",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1137124312,
    "node_id": "IC_kwDOBggaLc5DxyPY",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T11:27:52Z",
    "updated_at": "2022-05-25T11:27:52Z",
    "author_association": "MEMBER",
    "body": "@jamescarter-le keep me posted we would include it in next release if it works",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137124312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137646201",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1137646201",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1137646201,
    "node_id": "IC_kwDOBggaLc5Dzxp5",
    "user": {
      "login": "jamescarter-le",
      "id": 1643692,
      "node_id": "MDQ6VXNlcjE2NDM2OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1643692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamescarter-le",
      "html_url": "https://github.com/jamescarter-le",
      "followers_url": "https://api.github.com/users/jamescarter-le/followers",
      "following_url": "https://api.github.com/users/jamescarter-le/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamescarter-le/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamescarter-le/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamescarter-le/subscriptions",
      "organizations_url": "https://api.github.com/users/jamescarter-le/orgs",
      "repos_url": "https://api.github.com/users/jamescarter-le/repos",
      "events_url": "https://api.github.com/users/jamescarter-le/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamescarter-le/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T17:55:49Z",
    "updated_at": "2022-05-25T17:55:49Z",
    "author_association": "NONE",
    "body": "I've been running this version since this morning and had only 1 instance of this being thrown, but this was from my own Tracer plugin that uses BlockchainBridge, likely unrelated.\r\n\r\nBeen able to throw many RPC requests and hundreds of eth_estimateGas calls through with no issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137646201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137853772",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1137853772",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1137853772,
    "node_id": "IC_kwDOBggaLc5D0kVM",
    "user": {
      "login": "rickyrombo",
      "id": 3690498,
      "node_id": "MDQ6VXNlcjM2OTA0OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3690498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rickyrombo",
      "html_url": "https://github.com/rickyrombo",
      "followers_url": "https://api.github.com/users/rickyrombo/followers",
      "following_url": "https://api.github.com/users/rickyrombo/following{/other_user}",
      "gists_url": "https://api.github.com/users/rickyrombo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rickyrombo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rickyrombo/subscriptions",
      "organizations_url": "https://api.github.com/users/rickyrombo/orgs",
      "repos_url": "https://api.github.com/users/rickyrombo/repos",
      "events_url": "https://api.github.com/users/rickyrombo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rickyrombo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T21:13:26Z",
    "updated_at": "2022-05-25T21:13:26Z",
    "author_association": "NONE",
    "body": "Thank you so much @LukaszRozmej ! This seems super promising. Will test the docker image",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1137853772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1140080811",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1140080811",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1140080811,
    "node_id": "IC_kwDOBggaLc5D9ECr",
    "user": {
      "login": "csjiang",
      "id": 21266692,
      "node_id": "MDQ6VXNlcjIxMjY2Njky",
      "avatar_url": "https://avatars.githubusercontent.com/u/21266692?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/csjiang",
      "html_url": "https://github.com/csjiang",
      "followers_url": "https://api.github.com/users/csjiang/followers",
      "following_url": "https://api.github.com/users/csjiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/csjiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/csjiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/csjiang/subscriptions",
      "organizations_url": "https://api.github.com/users/csjiang/orgs",
      "repos_url": "https://api.github.com/users/csjiang/repos",
      "events_url": "https://api.github.com/users/csjiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/csjiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T22:30:54Z",
    "updated_at": "2022-05-27T22:30:54Z",
    "author_association": "NONE",
    "body": "Hey @LukaszRozmej - thanks for the fix! \r\n\r\nWe (Audius) were able to test this w one of our Nethermind nodes and rotate into load - it works! No `InvalidOperationException` so far in the 2~ hours it's been running. Will upgrade rest of nodes w this today and add them to load early next wk. I'll follow up here at that time if we encounter this issue again. ",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1140080811/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1140250218",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4002#issuecomment-1140250218",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4002",
    "id": 1140250218,
    "node_id": "IC_kwDOBggaLc5D9tZq",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-28T12:19:14Z",
    "updated_at": "2022-05-28T12:19:14Z",
    "author_association": "MEMBER",
    "body": "This was release on 1.13.1",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1140250218/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

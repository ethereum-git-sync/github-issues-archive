{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5035",
  "id": 1502752337,
  "node_id": "I_kwDOBggaLc5Zki5R",
  "number": 5035,
  "title": "[State Sync] On Mainnet on the same machine StateNodes stucked for 2 days where in past managed to sync 3 times very quickly",
  "user": {
    "login": "kamilchodola",
    "id": 43241881,
    "node_id": "MDQ6VXNlcjQzMjQxODgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kamilchodola",
    "html_url": "https://github.com/kamilchodola",
    "followers_url": "https://api.github.com/users/kamilchodola/followers",
    "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
    "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
    "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
    "repos_url": "https://api.github.com/users/kamilchodola/repos",
    "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-12-19T11:10:59Z",
  "updated_at": "2022-12-27T14:19:47Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nIn Smoke Tests I have a scenario which is resyncing node 10 times (wait until `eth_syncing` returns false and then stop node, remove nethermind_db directory and restart nethermind docker container).\r\nOn mainnet-prysm node with 1.15.0 RC I've noticed that on State Nodes it synced 3 times really quickly (info: highest time vs 00.00.00 means it is next sync and previous one took this amount of time):\r\n1. 17 minutes\r\n<img width=\"801\" alt=\"image\" src=\"https://user-images.githubusercontent.com/43241881/208412259-dc8eb284-54be-4205-ad21-42471af8d2db.png\">\r\n2. 12 minutes\r\n<img width=\"816\" alt=\"image\" src=\"https://user-images.githubusercontent.com/43241881/208412327-82e863b5-ce78-4a98-a4ac-7bbdd831b6af.png\">\r\n3. 31 minutes:\r\n<img width=\"797\" alt=\"image\" src=\"https://user-images.githubusercontent.com/43241881/208412376-06df6b77-f969-4f7b-bbe4-25ae85233eb2.png\">\r\n\r\n\r\nBut then on exactly the same machine on fourth run it is already syncing for more than 2 days:\r\n<img width=\"1033\" alt=\"image\" src=\"https://user-images.githubusercontent.com/43241881/208412498-ef182b8e-e8fb-4b39-9b6b-21075e117be6.png\">\r\n\r\n**THIS IS EXACTLY THE SAME MACHINE - just resyncs after nodes is fully synced.**\r\n\r\nI've checked IOPS of this machine and result is really good:\r\n![image](https://user-images.githubusercontent.com/43241881/208412622-0d278bcd-64d1-4892-90ff-695743190f21.png)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start syncing of mainnet node on a machine\r\n2. When node is fully synced (Old receipts completed and `eth_syncing` returns false) then stop docker container, remove db directory and restart docker container\r\n3. Repeat until it fails (on my node it happened after 4 syncs)\r\n\r\n**Expected behavior**\r\nEach time results should be quite similar and if it synced once well it should behave in the same way every time/\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu 22.04\r\n - Chain: Mainnet\r\n - Version: 1.15.0 RC1\r\n \r\nWill try to fetch some logs but DEBUG mode is enabled so will have small amount of them (will try to extrapolate from docker container).\r\nAs for now You can check this Seq:\r\nhttps://seq.nethermind.io/#/events?filter=Contains(NodeName,%20'Smoke-Tests-prerelease-150-resyncs-mainnet-prysm')\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1365936906",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5035#issuecomment-1365936906",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5035",
    "id": 1365936906,
    "node_id": "IC_kwDOBggaLc5RaosK",
    "user": {
      "login": "asdacap",
      "id": 1841324,
      "node_id": "MDQ6VXNlcjE4NDEzMjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asdacap",
      "html_url": "https://github.com/asdacap",
      "followers_url": "https://api.github.com/users/asdacap/followers",
      "following_url": "https://api.github.com/users/asdacap/following{/other_user}",
      "gists_url": "https://api.github.com/users/asdacap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asdacap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asdacap/subscriptions",
      "organizations_url": "https://api.github.com/users/asdacap/orgs",
      "repos_url": "https://api.github.com/users/asdacap/repos",
      "events_url": "https://api.github.com/users/asdacap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asdacap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-27T14:19:47Z",
    "updated_at": "2022-12-27T14:19:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could be related to #5043",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1365936906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

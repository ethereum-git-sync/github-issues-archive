{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/47",
  "id": 347002499,
  "node_id": "MDU6SXNzdWUzNDcwMDI0OTk=",
  "number": 47,
  "title": "State pruning",
  "user": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1217673486,
      "node_id": "MDU6TGFiZWwxMjE3NjczNDg2",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/difficult",
      "name": "difficult",
      "color": "d4c5f9",
      "default": false,
      "description": "It requires detailed knowledge of the codebase and changes can easily lead to severe issues. a"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-08-02T13:03:47Z",
  "updated_at": "2022-09-16T08:47:18Z",
  "closed_at": "2021-01-21T05:45:09Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "",
  "closed_by": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/574058371",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/47#issuecomment-574058371",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47",
    "id": 574058371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDA1ODM3MQ==",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-14T08:20:38Z",
    "updated_at": "2020-01-14T08:20:38Z",
    "author_association": "MEMBER",
    "body": "from @MicahZoltu\r\n\r\nI would like the ability to tell Nethermind to retain state for old blocks up to some limit. This feature request would not include retroactively fetching blocks from before my initial sync, it would just be for blocks received since my initial sync.\r\n\r\nFor example, if I start a new node that syncs up to block 9,000,000 and configure it to be partial_archive_block_count=5, then it would retain full state for block 9,000,000 but it would not try to generate complete state for block 8,999,999 (this was before my initial sync). Upon receiving a new block, it would retain state for block 9,000,000 while also maintaining state for block 9,000,001. This would repeat up until block 9,000,005 (so I have full state for blocks 9,000,000 through 9,000,005). Upon receiving block 9,000,006 it would drop state for block 9,000,000 (leaving me with full state for blocks 9,000,001 through 9,000,006) so I only have 5 blocks worth of full state history.\r\n\r\nThe use case for this is that I often want an archive node so I can retroactively see what happened, but I don't need to be able to do that for ancient events. An example is I might want to audit the recent deployment of some smart contract or investigate some odd behavior witnessed in a contract from earlier in the week. Currently, my options are to run a full archive node (which consumes a massive amount of disk space) or just not be able to do that sort of work.\r\n\r\nRealistically, I can imagine myself storing anywhere from a week to a few months worth of state history, beyond that it isn't worth the increased disk space.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/574058371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1249096479",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/47#issuecomment-1249096479",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/47",
    "id": 1249096479,
    "node_id": "IC_kwDOBggaLc5Kc7Mf",
    "user": {
      "login": "linhuatan",
      "id": 94831627,
      "node_id": "U_kgDOBacECw",
      "avatar_url": "https://avatars.githubusercontent.com/u/94831627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/linhuatan",
      "html_url": "https://github.com/linhuatan",
      "followers_url": "https://api.github.com/users/linhuatan/followers",
      "following_url": "https://api.github.com/users/linhuatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/linhuatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/linhuatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/linhuatan/subscriptions",
      "organizations_url": "https://api.github.com/users/linhuatan/orgs",
      "repos_url": "https://api.github.com/users/linhuatan/repos",
      "events_url": "https://api.github.com/users/linhuatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/linhuatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T08:47:18Z",
    "updated_at": "2022-09-16T08:47:18Z",
    "author_association": "NONE",
    "body": "@tkstanczak  Is this feature completed? How Can I config the partial archive node to retain the states of last n blocks?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1249096479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

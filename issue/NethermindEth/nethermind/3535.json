{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/3535",
  "id": 1031400159,
  "node_id": "I_kwDOBggaLc49eerf",
  "number": 3535,
  "title": "[TheMerge] Support more than one url for Json RPC/WebSockets",
  "user": {
    "login": "MarekM25",
    "id": 9356351,
    "node_id": "MDQ6VXNlcjkzNTYzNTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MarekM25",
    "html_url": "https://github.com/MarekM25",
    "followers_url": "https://api.github.com/users/MarekM25/followers",
    "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
    "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
    "organizations_url": "https://api.github.com/users/MarekM25/orgs",
    "repos_url": "https://api.github.com/users/MarekM25/repos",
    "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MarekM25/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1075562705,
      "node_id": "MDU6TGFiZWwxMDc1NTYyNzA1",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/security",
      "name": "security",
      "color": "ed216f",
      "default": false,
      "description": ""
    },
    {
      "id": 1124483401,
      "node_id": "MDU6TGFiZWwxMTI0NDgzNDAx",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/rpc",
      "name": "rpc",
      "color": "efe37a",
      "default": false,
      "description": ""
    },
    {
      "id": 1145016563,
      "node_id": "MDU6TGFiZWwxMTQ1MDE2NTYz",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "8731e2",
      "default": true,
      "description": ""
    },
    {
      "id": 3470322092,
      "node_id": "LA_kwDOBggaLc7O2Oms",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/the%20merge",
      "name": "the merge",
      "color": "58E05C",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-10-20T13:16:28Z",
  "updated_at": "2022-02-17T08:43:34Z",
  "closed_at": "2021-11-09T20:42:25Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "The current config allows us to set up only one URL for JsonRPC. For security reasons, our node has to be able to set up many URLs/ports. After the merge, we will need to listen to different ports for different RPC modules. The node should be able to duplicate RPC modules for many ports. AFAIK, the consensus clients use these modules: engine, eth, net, subscribe, web3, and maybe more.\r\n\r\n The question here is how to deliver it in the config, especially as command lines arguments. The solution could be to separate the config with extra characters like \"|\". \r\nOf course, because of backward compatibility, we don't want to change the existing configuration. \r\n```\r\nAdditionalRpcUrls: [\"http://localhost:8550|engine;eth;net;subscribe\", \"http://localhost:8560|debug;admin\"],\r\nAdditionalWebSocketsUrls: [\"http://localhost:8551|engine;eth;net;subscribe\", \"http://localhost:8561|debug;admin\"]\r\n```\r\nAn alternative way:\r\n```\r\nAdditionalRpcUrls: [\"http://localhost:8550|http;ws|engine;eth;net;subscribe\", \"http://localhost:8560|ws|debug;admin\"]\r\n```\r\nAside from the merge, such functionality could be beneficial for current users. Node operators could configure the administrative RPC, which are available only for them, for example, modules like Debug, Admin, Health. Theoretically, it could be done by firewall settings, but IMO the obligation to configure it after the merge isn't acceptable.",
  "closed_by": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/954877007",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3535#issuecomment-954877007",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
    "id": 954877007,
    "node_id": "IC_kwDOBggaLc446kRP",
    "user": {
      "login": "640774n6",
      "id": 577747,
      "node_id": "MDQ6VXNlcjU3Nzc0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/577747?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/640774n6",
      "html_url": "https://github.com/640774n6",
      "followers_url": "https://api.github.com/users/640774n6/followers",
      "following_url": "https://api.github.com/users/640774n6/following{/other_user}",
      "gists_url": "https://api.github.com/users/640774n6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/640774n6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/640774n6/subscriptions",
      "organizations_url": "https://api.github.com/users/640774n6/orgs",
      "repos_url": "https://api.github.com/users/640774n6/repos",
      "events_url": "https://api.github.com/users/640774n6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/640774n6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-29T16:21:30Z",
    "updated_at": "2021-10-30T04:09:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Spent some time getting to know the code last night. It would seem this issue would represent refactoring this all the way from IJsonRpcConfig to JsonRpcService. As far as backwards compatibility goes, it would still use Host/Port/WebSocketsPort/EnabledModules for the first url correct?  I think the configuration options listed above make sense and would be pretty easy to parse. Is there a preferred method from the above suggestions? I would lean towards the second (alternative way).",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/954877007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/956227927",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3535#issuecomment-956227927",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
    "id": 956227927,
    "node_id": "IC_kwDOBggaLc44_uFX",
    "user": {
      "login": "MarekM25",
      "id": 9356351,
      "node_id": "MDQ6VXNlcjkzNTYzNTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarekM25",
      "html_url": "https://github.com/MarekM25",
      "followers_url": "https://api.github.com/users/MarekM25/followers",
      "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
      "organizations_url": "https://api.github.com/users/MarekM25/orgs",
      "repos_url": "https://api.github.com/users/MarekM25/repos",
      "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarekM25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T13:19:42Z",
    "updated_at": "2022-02-17T08:42:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @640774n6,\r\n\r\nThank you so much for your contribution! \r\n\r\n> As far as backwards compatibility goes, it would still use Host/Port/WebSocketsPort/EnabledModules for the first url correct?\r\n\r\nYes, exactly.\r\n\r\n> Is there a preferred method from the above suggestions? I would lean towards the second (alternative way).\r\n\r\nMore people prefer the second way, so we're choosing it!\r\n`AdditionalRpcUrls: [\"http://localhost:8550|http;ws|engine;eth;net;subscribe\", \"http://localhost:8560|ws|debug;admin\"]`\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/956227927/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/956409545",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3535#issuecomment-956409545",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
    "id": 956409545,
    "node_id": "IC_kwDOBggaLc45AabJ",
    "user": {
      "login": "640774n6",
      "id": 577747,
      "node_id": "MDQ6VXNlcjU3Nzc0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/577747?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/640774n6",
      "html_url": "https://github.com/640774n6",
      "followers_url": "https://api.github.com/users/640774n6/followers",
      "following_url": "https://api.github.com/users/640774n6/following{/other_user}",
      "gists_url": "https://api.github.com/users/640774n6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/640774n6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/640774n6/subscriptions",
      "organizations_url": "https://api.github.com/users/640774n6/orgs",
      "repos_url": "https://api.github.com/users/640774n6/repos",
      "events_url": "https://api.github.com/users/640774n6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/640774n6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T17:01:38Z",
    "updated_at": "2021-11-01T17:11:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds good! I'm writing some tests.\r\n\r\nHow forgiving/flexible should the parser be? Do we want to assume default values for missing pipe sections? For example:\r\n* \"http://localhost:8550|http,ws\" => Could be valid with the assumption being that if you don't specify the modules it will use the default modules. I can see this being useful.\r\n* \"http://localhost:8550\" => Could be valid with the assumption being that if you don't specify the endpoint type it will use a default value (http?). Seems like this one may lead to confusion .\r\n\r\nI was doing some testing and realized that url ports need to be unique. Going to refactor JsonRpcUrlCollection to ensure one url per unique port. ",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/956409545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/964534461",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3535#issuecomment-964534461",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
    "id": 964534461,
    "node_id": "IC_kwDOBggaLc45faC9",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T20:54:21Z",
    "updated_at": "2021-11-09T20:54:21Z",
    "author_association": "MEMBER",
    "body": "@640774n6 big thx for great implementation!",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/964534461/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/964639053",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3535#issuecomment-964639053",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3535",
    "id": 964639053,
    "node_id": "IC_kwDOBggaLc45fzlN",
    "user": {
      "login": "640774n6",
      "id": 577747,
      "node_id": "MDQ6VXNlcjU3Nzc0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/577747?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/640774n6",
      "html_url": "https://github.com/640774n6",
      "followers_url": "https://api.github.com/users/640774n6/followers",
      "following_url": "https://api.github.com/users/640774n6/following{/other_user}",
      "gists_url": "https://api.github.com/users/640774n6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/640774n6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/640774n6/subscriptions",
      "organizations_url": "https://api.github.com/users/640774n6/orgs",
      "repos_url": "https://api.github.com/users/640774n6/repos",
      "events_url": "https://api.github.com/users/640774n6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/640774n6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T23:32:33Z",
    "updated_at": "2021-11-09T23:32:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "No problem! Happy to be able to contribute!",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/964639053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/2403",
  "id": 728183093,
  "node_id": "MDU6SXNzdWU3MjgxODMwOTM=",
  "number": 2403,
  "title": "System.NullReferenceException and TxPriorityContract",
  "user": {
    "login": "varasev",
    "id": 33550681,
    "node_id": "MDQ6VXNlcjMzNTUwNjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/33550681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/varasev",
    "html_url": "https://github.com/varasev",
    "followers_url": "https://api.github.com/users/varasev/followers",
    "following_url": "https://api.github.com/users/varasev/following{/other_user}",
    "gists_url": "https://api.github.com/users/varasev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/varasev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/varasev/subscriptions",
    "organizations_url": "https://api.github.com/users/varasev/orgs",
    "repos_url": "https://api.github.com/users/varasev/repos",
    "events_url": "https://api.github.com/users/varasev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/varasev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-10-23T12:35:51Z",
  "updated_at": "2020-10-26T19:59:36Z",
  "closed_at": "2020-10-26T19:59:36Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I’m testing the latest `v1.9.14` and noticed that sometimes when I run `posdao-test-setup`, a validator which takes this transaction with zero gas price doesn’t mine blocks anymore for some reason: https://github.com/poanetwork/posdao-test-setup/blob/cf9a55c1104f6c4462f4be30ce935c35068b0bde/scripts/deploy-staking-token.js#L62-L74\r\n\r\nIt happens not each run, but quite often. You can catch it if you try to run `posdao-test-setup` several times.\r\n\r\nUse `npm run watcher` in a separate console to see that the validator begins to skip blocks after that transaction.\r\n\r\nThere is an error in the node’s logs:\r\n\r\n```\r\n2020-10-23 15:27:50.0162|Failed to produce block. System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at Nethermind.Consensus.AuRa.Contracts.TxPriorityContract.Destination.GetTransactionKey(Transaction tx)\r\n   at Nethermind.Consensus.AuRa.Contracts.TxPriorityContract.Destination.op_Implicit(Transaction tx)\r\n   at Nethermind.Consensus.AuRa.Transactions.CompareTxByPermissionBase.GetPriority(Transaction tx)\r\n   at Nethermind.Consensus.AuRa.Transactions.CompareTxByPermissionBase.Compare(Transaction x, Transaction y)\r\n   at Nethermind.Core.CompositeComparer`1.Compare(T x, T y)\r\n   at Nethermind.Core.CompositeComparer`1.Compare(T x, T y)\r\n   at Nethermind.Core.Collections.DictionarySortedSet`2.KeyValuePairKeyOnlyComparer.Compare(KeyValuePair`2 x, KeyValuePair`2 y)\r\n   at System.Collections.Generic.SortedSet`1.AddIfNotPresent(T item)\r\n   at Nethermind.Blockchain.Producers.TxPoolTxSource.Order(IDictionary`2 pendingTransactions, IComparer`1 comparerWithIdentity)+MoveNext()\r\n   at Nethermind.Blockchain.Producers.TxPoolTxSource.GetTransactions(BlockHeader parent, Int64 gasLimit)\r\n   at Nethermind.Consensus.Transactions.CompositeTxSource.GetTransactions(BlockHeader parent, Int64 gasLimit)+MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at Nethermind.Consensus.Transactions.FilteredTxSource.GetTransactions(BlockHeader parent, Int64 gasLimit)+MoveNext()\r\n   at Nethermind.Consensus.AuRa.AuRaBlockProducer.ValidatedTxSource.GetTransactions(BlockHeader parent, Int64 gasLimit)+MoveNext()\r\n   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)\r\n   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)\r\n   at Nethermind.Core.Block..ctor(BlockHeader blockHeader, IEnumerable`1 transactions, IEnumerable`1 ommers)\r\n   at Nethermind.Blockchain.Producers.BlockProducerBase.PrepareBlock(BlockHeader parent)\r\n   at Nethermind.Consensus.AuRa.AuRaBlockProducer.PrepareBlock(BlockHeader parent)\r\n   at Nethermind.Blockchain.Producers.BlockProducerBase.ProduceNewBlock(BlockHeader parent, CancellationToken token)\r\n   at Nethermind.Blockchain.Producers.BlockProducerBase.TryProduceNewBlock(CancellationToken token)\r\n   at Nethermind.Blockchain.Producers.LoopBlockProducerBase.ProducerLoopStep(CancellationToken cancellationToken)\r\n   at Nethermind.Consensus.AuRa.AuRaBlockProducer.ProducerLoopStep(CancellationToken cancellationToken)\r\n   at Nethermind.Blockchain.Producers.LoopBlockProducerBase.ProducerLoop()\r\n```",
  "closed_by": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/2403/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

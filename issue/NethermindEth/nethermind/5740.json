{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5740",
  "id": 1730518397,
  "node_id": "I_kwDOBggaLc5nJZ19",
  "number": 5740,
  "title": "Receiving \"Reverted 0x\" on reverts instead of the actual error",
  "user": {
    "login": "leonprou",
    "id": 7228844,
    "node_id": "MDQ6VXNlcjcyMjg4NDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7228844?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leonprou",
    "html_url": "https://github.com/leonprou",
    "followers_url": "https://api.github.com/users/leonprou/followers",
    "following_url": "https://api.github.com/users/leonprou/following{/other_user}",
    "gists_url": "https://api.github.com/users/leonprou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leonprou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leonprou/subscriptions",
    "organizations_url": "https://api.github.com/users/leonprou/orgs",
    "repos_url": "https://api.github.com/users/leonprou/repos",
    "events_url": "https://api.github.com/users/leonprou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leonprou/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-05-29T10:38:19Z",
  "updated_at": "2023-06-05T10:11:21Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Description**\r\nThe Nethermind JSON-RPC returns \"Reverted 0x\" instead of the actual value when reverting with a null-like value. This issue occurs with values such as 0, \"\", and MyCustomError(0). The lack of meaningful information in the error message makes it difficult to understand the original revert reason, especially when custom errors are involved.\r\n\r\n**Steps to Reproduce**\r\n\r\nTo reproduce the issue, I deployed the following contract on Goerli (Geth) and Fuse Spark (Nethermind):\r\n\r\n``` solidity\r\npragma solidity >=0.7.0 <0.9.0;\r\n\r\n/** \r\n * @title Ballot\r\n * @dev Implements voting process along with vote delegation\r\n */\r\ncontract ErrorV4 {\r\n    error Debug(uint);\r\n\r\n    // 0xc2985578\r\n    function foo() external {\r\n        revert Debug(0);\r\n    }\r\n\r\n    // \r\n    // 0x274cdd5c\r\n    function goo() external  {\r\n        revert Debug(1);\r\n    }\r\n\r\n    function hoo() external {\r\n        revert(\"\");\r\n    }\r\n}\r\n```\r\n\r\n1.  Invoke the goo() method to effectively demonstrate the problem:\r\n``` bash\r\ncurl --location --request POST 'https://explorernode.fusespark.io/' \\\r\n--header 'Content-Type: application/json' \\\r\n--data-raw '{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"eth_call\",\r\n  \"params\": [\r\n    {\r\n      \"to\": \"0xc06fd20541FB2b0385D0AeF2e76941594095EA21\",\r\n      \"data\": \"0xc2985578\"\r\n    },\r\n    \"latest\"\r\n  ],\r\n  \"id\": 1\r\n}\r\n```\r\n\r\n**Actual behavior**\r\nThe data field returns \"Reverted 0x\":\r\n\r\n``` JSON\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"error\": {\r\n        \"code\": -32015,\r\n        \"message\": \"VM execution error.\",\r\n        \"data\": \"Reverted 0x\"\r\n    },\r\n    \"id\": 1\r\n}\r\n```\r\n**Expected behavior**\r\nI expect to receive the data from which I can decode the original error. When calling the same method with Geth:\r\n\r\n\r\n``` bash\r\ncurl --location --request POST 'https://goerli.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161' \\\r\n--header 'Content-Type: application/json' \\\r\n--data-raw '{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"eth_call\",\r\n  \"params\": [\r\n    {\r\n      \"to\": \"0xfF283c39bD63C647b656c1C4DF6e158F3d65621a\",\r\n      \"data\": \"0xc2985578\"\r\n    },\r\n    \"latest\"\r\n  ],\r\n  \"id\": 1\r\n}'\r\n```\r\n\r\nIn the data field, you can see the error signature and error parameters are received:\r\n\r\n``` JSON\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"error\": {\r\n        \"code\": 3,\r\n        \"data\": \"0x8a36f5a20000000000000000000000000000000000000000000000000000000000000000\",\r\n        \"message\": \"execution reverted\"\r\n    }\r\n}\r\n```\r\n\r\n**Screenshots**\r\n\r\nThe encoded data can be decoded with [tools.deth](https://tools.deth.net/calldata-decoder)\r\n\r\nDecoded data:\r\n![image](https://github.com/NethermindEth/nethermind/assets/7228844/5a30b85e-f558-4fc7-b260-977cfa6f89dd)\r\n\r\n\r\n**Desktop (please complete the following information):**\r\nPlease provide the following information regarding your setup:\r\n - Operating System: Linux\r\n - Version: v1.18.0+96b555a8/linux-arm64/dotnet7.0.5\r\n - Installation Method: Docker (we use our own build)\r\n - Consensus Client:  N/A\r\n\r\n**Additional context**\r\nWe've found the issue when we ran [ERC-4337](https://eips.ethereum.org/EIPS/eip-4337). The spec and the actual [bundlers](https://github.com/eth-infinitism/bundler) rely heavily on revert reasons. \r\nMore examples and context are in the [notion page](https://north-crocus-61d.notion.site/Nethermind-Revert-Bug-c31aa206fbef4d67abe28879a2e977eb)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5740/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/6046",
  "id": 1869536227,
  "node_id": "I_kwDOBggaLc5vbtvj",
  "number": 6046,
  "title": "BaseFeePerGas value format change in Block, why?",
  "user": {
    "login": "astralmaster",
    "id": 36546159,
    "node_id": "MDQ6VXNlcjM2NTQ2MTU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/36546159?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/astralmaster",
    "html_url": "https://github.com/astralmaster",
    "followers_url": "https://api.github.com/users/astralmaster/followers",
    "following_url": "https://api.github.com/users/astralmaster/following{/other_user}",
    "gists_url": "https://api.github.com/users/astralmaster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/astralmaster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/astralmaster/subscriptions",
    "organizations_url": "https://api.github.com/users/astralmaster/orgs",
    "repos_url": "https://api.github.com/users/astralmaster/repos",
    "events_url": "https://api.github.com/users/astralmaster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/astralmaster/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-28T11:05:23Z",
  "updated_at": "2023-08-28T12:56:20Z",
  "closed_at": "2023-08-28T12:55:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "`BaseFeePerGas` UInt256 property of `Nethermind.Core.Block` was changed in the past month or so to represent WEI directly without decimal places while `MaxFeePerGas `(`DecodedMaxFeePerGas`) of Nethermind.Core.Transaction is currently observed to hold both value representations - with and without decimal places. \r\n\r\nSo for example, when Nethermind client 1.20.1 received a tx with hash `0x793295507e2f7ec16271d56f63db1c7e5ee0a18e27804bbce7e19030174e4abc` from its peers on Goerli testnet, the corresponding `Transaction` object's `MaxFeePerGas` property had value `150000000000` but the same property had a value of `71` with tx `0xce8f4c7838efd139fc47b2701b03e6bd8c16291d8f7d0ea22a98ac3378a2912c` on the same network. Both are EIP-1559 transactions. \r\n\r\nHere is a dump of values of two random transactions on Goerli testnet received by 1.20.1 client as seen in `PrepareAndSubmitTransaction()` of [Nethermind.Network.Eth62ProtocolHandler.cs](https://github.com/NethermindEth/nethermind/blob/1687aed0c9745f422d9e84802fd6ba4752380464/src/Nethermind/Nethermind.Network/P2P/Subprotocols/Eth/V62/Eth62ProtocolHandler.cs#L298)\r\n\r\n`\t\tAccessList\tnull\tNethermind.Core.Eip2930.AccessList\r\n\t\tBlobVersionedHashes\tnull\tbyte[][]\r\n\t\tChainId\t5\tulong?\r\n\t\tData\t\"System.Memory<Byte>[676]\"\tSystem.Memory<byte>?\r\n\t\tDataLength\t676\tint\r\n\t\tDecodedMaxFeePerGas\t{1500000034}\tNethermind.Int256.UInt256\r\n\t\tGasBottleneck\tnull\tNethermind.Int256.UInt256?\r\n\t\tGasLimit\t87664\tlong\r\n\t\tGasPrice\t{1500000000}\tNethermind.Int256.UInt256\r\n\t\tHash\t{0xb79aae292cb30c64213d731cb16f14d3a88dc8fa493fde656dbe7875ab65d696}\tNethermind.Core.Crypto.Keccak\r\n\t\tIsContractCreation\tfalse\tbool\r\n\t\tIsMessageCall\ttrue\tbool\r\n\t\tIsServiceTransaction\tfalse\tbool\r\n\t\tIsSigned\ttrue\tbool\r\n\t\tMaxFeePerDataGas\tnull\tNethermind.Int256.UInt256?\r\n\t\tMaxFeePerGas\t{1500000034}\tNethermind.Int256.UInt256\r\n\t\tMaxPriorityFeePerGas\t{1500000000}\tNethermind.Int256.UInt256\r\n\t\tMayHaveNetworkForm\tfalse\tbool\r\n\t\tNetworkWrapper\tnull\tobject\r\n\t\tNonce\t{6}\tNethermind.Int256.UInt256\r\n\t\tPoolIndex\t0\tulong\r\n\t\tSenderAddress\tnull\tNethermind.Core.Address\r\n\t\tSignature\t{0xf8bc56570dbf3229717b57c26e90b73a4afdcb106eaa99ec12e63433ce253d986d127d4c4890a99629ddda407d9c04b573b33357e15e9a2ea0f35c0eef0d51f21b}\tNethermind.Core.Crypto.Signature\r\n\t\tSupports1559\ttrue\tbool\r\n\t\tSupportsAccessList\ttrue\tbool\r\n\t\tSupportsBlobs\tfalse\tbool\r\n\t\tTimestamp\t{1693221193}\tNethermind.Int256.UInt256\r\n\t\tTo\t{0x8616909a3a1dbda36cb3f145ee978db70041e816}\tNethermind.Core.Address\r\n\t\tType\tEIP1559\tNethermind.Core.TxType\r\n\t\tValue\t{0}\tNethermind.Int256.UInt256\r\n`\r\n\r\n`AccessList\tnull\tNethermind.Core.Eip2930.AccessList\r\nBlobVersionedHashes\tnull\tbyte[][]\r\nChainId\t5\tulong?\r\nData\t\"System.Memory<Byte>[0]\"\tSystem.Memory<byte>?\r\nDataLength\t0\tint\r\nDecodedMaxFeePerGas\t{22}\tNethermind.Int256.UInt256\r\nGasBottleneck\tnull\tNethermind.Int256.UInt256?\r\nGasLimit\t2097152\tlong\r\nGasPrice\t{22}\tNethermind.Int256.UInt256\r\nHash\t{0x3320e07daf3b49d23f5ff63e714d8204ad8d54cc1918385c5dedf7ad46549f46}\tNethermind.Core.Crypto.Keccak\r\nIsContractCreation\tfalse\tbool\r\nIsMessageCall\ttrue\tbool\r\nIsServiceTransaction\tfalse\tbool\r\nIsSigned\ttrue\tbool\r\nMaxFeePerDataGas\tnull\tNethermind.Int256.UInt256?\r\nMaxFeePerGas\t{22}\tNethermind.Int256.UInt256\r\nMaxPriorityFeePerGas\t{22}\tNethermind.Int256.UInt256\r\nMayHaveNetworkForm\tfalse\tbool\r\nNetworkWrapper\tnull\tobject\r\nNonce\t{53856}\tNethermind.Int256.UInt256\r\nPoolIndex\t0\tulong\r\nSenderAddress\tnull\tNethermind.Core.Address\r\nSignature\t{0xb4cfc6beb16582c129f08c1ae24e27a9cbbd8658fc942503793c54ebeeba784d4945e6b4fe629eea50d5af86aae1ba94c04e327428d220538d7a7fd2894bcb951c}\tNethermind.Core.Crypto.Signature\r\nSupports1559\ttrue\tbool\r\nSupportsAccessList\ttrue\tbool\r\nSupportsBlobs\tfalse\tbool\r\nTimestamp\t{1693221313}\tNethermind.Int256.UInt256\r\nTo\t{0x976073802d9de352796c3eba6f63bcc142cd5007}\tNethermind.Core.Address\r\nType\tEIP1559\tNethermind.Core.TxType\r\nValue\t{10000000000000000}\tNethermind.Int256.UInt256\r\n`\r\n\r\nNotice the format difference of `MaxFeePerGas` for the two trasnactions.\r\n\r\nWhy is that?\r\n\r\n",
  "closed_by": {
    "login": "astralmaster",
    "id": 36546159,
    "node_id": "MDQ6VXNlcjM2NTQ2MTU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/36546159?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/astralmaster",
    "html_url": "https://github.com/astralmaster",
    "followers_url": "https://api.github.com/users/astralmaster/followers",
    "following_url": "https://api.github.com/users/astralmaster/following{/other_user}",
    "gists_url": "https://api.github.com/users/astralmaster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/astralmaster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/astralmaster/subscriptions",
    "organizations_url": "https://api.github.com/users/astralmaster/orgs",
    "repos_url": "https://api.github.com/users/astralmaster/repos",
    "events_url": "https://api.github.com/users/astralmaster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/astralmaster/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1695652713",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/6046#issuecomment-1695652713",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/6046",
    "id": 1695652713,
    "node_id": "IC_kwDOBggaLc5lEZtp",
    "user": {
      "login": "astralmaster",
      "id": 36546159,
      "node_id": "MDQ6VXNlcjM2NTQ2MTU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36546159?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/astralmaster",
      "html_url": "https://github.com/astralmaster",
      "followers_url": "https://api.github.com/users/astralmaster/followers",
      "following_url": "https://api.github.com/users/astralmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/astralmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/astralmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/astralmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/astralmaster/orgs",
      "repos_url": "https://api.github.com/users/astralmaster/repos",
      "events_url": "https://api.github.com/users/astralmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/astralmaster/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-28T12:56:20Z",
    "updated_at": "2023-08-28T12:56:20Z",
    "author_association": "NONE",
    "body": "Never mind, miscalculation on my part.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1695652713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

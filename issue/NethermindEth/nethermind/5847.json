{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5847",
  "id": 1767970396,
  "node_id": "I_kwDOBggaLc5pYRZc",
  "number": 5847,
  "title": "Nethermind stops log output if NLog.config is changed",
  "user": {
    "login": "turboboost55",
    "id": 7891737,
    "node_id": "MDQ6VXNlcjc4OTE3Mzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7891737?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/turboboost55",
    "html_url": "https://github.com/turboboost55",
    "followers_url": "https://api.github.com/users/turboboost55/followers",
    "following_url": "https://api.github.com/users/turboboost55/following{/other_user}",
    "gists_url": "https://api.github.com/users/turboboost55/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/turboboost55/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/turboboost55/subscriptions",
    "organizations_url": "https://api.github.com/users/turboboost55/orgs",
    "repos_url": "https://api.github.com/users/turboboost55/repos",
    "events_url": "https://api.github.com/users/turboboost55/events{/privacy}",
    "received_events_url": "https://api.github.com/users/turboboost55/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-06-21T16:23:46Z",
  "updated_at": "2023-07-16T09:20:56Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Description**\r\nIf I modify and save NLog.config while Nethermind is running, all output to the log file stops. Console output continues, and the program seems to work as normal in all other ways.  \r\n\r\n**Steps to Reproduce**\r\n1. Start Nethermind\r\n2. Modify and save NLog.config.  The change can be anything ... even changing the wording of a comment.\r\n\r\n**Actual behavior**\r\nAll output to log file folder stops.\r\n\r\n**Expected behavior**\r\nOutput to log file should continue.\r\n\r\n\r\n**Desktop (please complete the following information):**\r\nPlease provide the following information regarding your setup:\r\n - Ubuntu 22.04.2\r\n - 1.19.2\r\n - Github release\r\n - Nimbus 23.5.1\r\n\r\n**Logs**\r\nI've included mainnet.logs.txt, console.txt (a log of the console output of Nethermind), and my NLog.config file, which I have modified to reduce verbosity to the console, but keep full detail to the log folder.\r\n\r\n - you can see the most recent start was at approximately 2023-06-21 08:49:22\r\n - at approximately 2023-06-21 08:52:24 I modified NLog.config, by simply changing the wording of a comment\r\n - when I saved NLog.config, you can see that all output to mainnet.logs.txt stopped, but output to the console continued.\r\n\r\n[mainnet.logs.txt](https://github.com/NethermindEth/nethermind/files/11820328/mainnet.logs.txt)\r\n[console.txt](https://github.com/NethermindEth/nethermind/files/11820331/console.txt)\r\n[NLog.config.txt](https://github.com/NethermindEth/nethermind/files/11820336/NLog.config.txt)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636534484",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5847#issuecomment-1636534484",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847",
    "id": 1636534484,
    "node_id": "IC_kwDOBggaLc5hi4jU",
    "user": {
      "login": "turboboost55",
      "id": 7891737,
      "node_id": "MDQ6VXNlcjc4OTE3Mzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7891737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/turboboost55",
      "html_url": "https://github.com/turboboost55",
      "followers_url": "https://api.github.com/users/turboboost55/followers",
      "following_url": "https://api.github.com/users/turboboost55/following{/other_user}",
      "gists_url": "https://api.github.com/users/turboboost55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/turboboost55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/turboboost55/subscriptions",
      "organizations_url": "https://api.github.com/users/turboboost55/orgs",
      "repos_url": "https://api.github.com/users/turboboost55/repos",
      "events_url": "https://api.github.com/users/turboboost55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/turboboost55/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T22:59:32Z",
    "updated_at": "2023-07-14T22:59:32Z",
    "author_association": "NONE",
    "body": "Any response on this?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636534484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636722565",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5847#issuecomment-1636722565",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847",
    "id": 1636722565,
    "node_id": "IC_kwDOBggaLc5hjmeF",
    "user": {
      "login": "snakefoot",
      "id": 11509660,
      "node_id": "MDQ6VXNlcjExNTA5NjYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/11509660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snakefoot",
      "html_url": "https://github.com/snakefoot",
      "followers_url": "https://api.github.com/users/snakefoot/followers",
      "following_url": "https://api.github.com/users/snakefoot/following{/other_user}",
      "gists_url": "https://api.github.com/users/snakefoot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snakefoot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snakefoot/subscriptions",
      "organizations_url": "https://api.github.com/users/snakefoot/orgs",
      "repos_url": "https://api.github.com/users/snakefoot/repos",
      "events_url": "https://api.github.com/users/snakefoot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snakefoot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-15T09:42:55Z",
    "updated_at": "2023-07-15T09:42:55Z",
    "author_association": "NONE",
    "body": "Have you tried to startup with [NLog InternalLogger](https://github.com/NLog/NLog/wiki/Internal-Logging) enabled, and capture what happens when changing the NLog.config ?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636722565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636915037",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5847#issuecomment-1636915037",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847",
    "id": 1636915037,
    "node_id": "IC_kwDOBggaLc5hkVdd",
    "user": {
      "login": "turboboost55",
      "id": 7891737,
      "node_id": "MDQ6VXNlcjc4OTE3Mzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7891737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/turboboost55",
      "html_url": "https://github.com/turboboost55",
      "followers_url": "https://api.github.com/users/turboboost55/followers",
      "following_url": "https://api.github.com/users/turboboost55/following{/other_user}",
      "gists_url": "https://api.github.com/users/turboboost55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/turboboost55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/turboboost55/subscriptions",
      "organizations_url": "https://api.github.com/users/turboboost55/orgs",
      "repos_url": "https://api.github.com/users/turboboost55/repos",
      "events_url": "https://api.github.com/users/turboboost55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/turboboost55/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-15T23:32:14Z",
    "updated_at": "2023-07-15T23:32:14Z",
    "author_association": "NONE",
    "body": "I set `internalLogLevel=\"Debug\"` in the config file and started Nethermind.  The resulting log output is attached.  \r\n\r\nI didn't examine the log output in great detail, but I did notice that at initial startup, the following line appears, indicating it is opening the log file target at the expected location (my datadir is `/mnt/lv0/data/nethermind`) :\r\n\r\n```\r\n2023-07-15 10:03:47.0666 Debug FileTarget(Name=file-async_wrapped): Creating file appender: '/mnt/lv0/data/nethermind/logs/mainnet.logs.txt'\r\n```\r\n\r\nBut when I modify and save NLog.config, which I did at 2023-07-15 10:06:22.2987, it opens the log file target at a completely different location (under `~/.net`)\r\n\r\n```\r\n2023-07-15 10:06:24.9503 Debug FileTarget(Name=file-async_wrapped): Creating file appender: '/home/russel/.net/Nethermind.Runner/Lz3ZyQq4a7Y_Cjbif5CARJstSoh1mOA=/log.txt'\r\n```\r\n\r\nI was able to verify that after the change, log output was indeed appearing in the new location, underneath `~/.net`.  I guess somehow, during the reload, it is not considering the `--datadir` setting and just using some internal default or something.\r\n\r\n\r\n\r\n[nlog-internal.txt](https://github.com/NethermindEth/nethermind/files/12062992/nlog-internal.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1636915037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1637033838",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5847#issuecomment-1637033838",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5847",
    "id": 1637033838,
    "node_id": "IC_kwDOBggaLc5hkydu",
    "user": {
      "login": "snakefoot",
      "id": 11509660,
      "node_id": "MDQ6VXNlcjExNTA5NjYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/11509660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snakefoot",
      "html_url": "https://github.com/snakefoot",
      "followers_url": "https://api.github.com/users/snakefoot/followers",
      "following_url": "https://api.github.com/users/snakefoot/following{/other_user}",
      "gists_url": "https://api.github.com/users/snakefoot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snakefoot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snakefoot/subscriptions",
      "organizations_url": "https://api.github.com/users/snakefoot/orgs",
      "repos_url": "https://api.github.com/users/snakefoot/repos",
      "events_url": "https://api.github.com/users/snakefoot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snakefoot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-16T09:20:56Z",
    "updated_at": "2023-07-16T09:20:56Z",
    "author_association": "NONE",
    "body": "NLog FileTarget uses the [AppDomain.BaseDirectory](https://learn.microsoft.com/en-us/dotnet/api/system.appdomain.basedirectory) as base-directory when no file-path specified for `FileName`.\r\n\r\nSeems that AppDomain.BaseDirectory is returning different value between initial startup, and the following configuration-reload.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1637033838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

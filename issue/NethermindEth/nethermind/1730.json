{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/1730",
  "id": 605924981,
  "node_id": "MDU6SXNzdWU2MDU5MjQ5ODE=",
  "number": 1730,
  "title": "State DB batch corruption on Full + State",
  "user": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 674950059,
      "node_id": "MDU6TGFiZWw2NzQ5NTAwNTk=",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/bug",
      "name": "bug",
      "color": "ee0701",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-04-23T22:55:18Z",
  "updated_at": "2020-04-25T13:20:19Z",
  "closed_at": "2020-04-25T13:20:19Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "2020-04-23 19:46:45.3909|INFO|468|Branch sync progress (do not extrapolate): 100.00 % of block 9930654\r\n++1+1+++++1++++++1+1+++++++11++1+++1+1+111++++1+++1+++++1++++++1\r\n++++11++++++++1++11++1++1++++1++1++++1+1+1++++1+++++1+++1+++++++\r\n+++++1+1+++1+++++++11++1+1+++++++++++1++++++++++11++1++++1++++++\r\n1+++1+11+++1++++++1111++1+1++++++++++++++++111+++1+++1+++1+++++1\r\n2020-04-23 19:46:45.3909|INFO|468|Saving root 0x8218732af0fd4a7b549fbe9f2a06936351921b2ae5f7c37d6a65a44439b3dcfc of 9930654\r\n2020-04-23 19:46:46.0143|INFO|180|Sync mode changed from StateNodes to Full\r\n2020-04-23 19:46:47.0361|INFO|68|Sync mode changed from Full to StateNodes\r\n2020-04-23 19:46:47.0361|INFO|68|Starting the node data sync from the 9930686 (0xf0e1be...db8c9b) 0xa9104aadec6a1879a40bc3ee86852afee026ad1e7904beaa1ab40b7787f6b0bf root\r\n2020-04-23 19:46:47.0361|INFO|68|Setting state sync state root to 9930686 0xa9104aadec6a1879a40bc3ee86852afee026ad1e7904beaa1ab40b7787f6b0bf\r\n2020-04-23 19:46:47.0361|INFO|68|Now syncing nodes starting from root of block 9930686\r\n2020-04-23 19:46:47.3313|INFO|15|Processed    9930655 |  6,143,220ms, mgasps    0.00 total    0.00, tps    0.02 total    0.02, bps    0.00 total    0.00, recv queue 0, proc queue 31\r\n2020-04-23 19:46:48.0391|INFO|68|Sync mode changed from StateNodes to Full\r\n2020-04-23 19:46:48.3243|INFO|98|State Sync 00.08:58:44 | ~99.40 % | 40456.62MB / ~40700.00MB | kB/s:   351 | accounts 84410729 | nodes 480603527 | diagnostics: 96.29.08ms\r\n2020-04-23 19:46:48.5284|ERROR|207|BlockchainProcessor encountered an exception. RocksDbSharp.RocksDbException: Corruption: WriteBatch has wrong count\r\n   at RocksDbSharp.Native.rocksdb_write(IntPtr db, IntPtr options, IntPtr batch) in /root/src/nethermind/src/rocksdb-sharp/RocksDbSharp/Native.cs:line 1119\r\n   at RocksDbSharp.RocksDb.Write(WriteBatch writeBatch, WriteOptions writeOptions) in /root/src/nethermind/src/rocksdb-sharp/RocksDbSharp/RocksDb.cs:line 194\r\n   at Nethermind.Db.Rocks.DbOnTheRocks.CommitBatch() in /root/src/nethermind/src/Nethermind/Nethermind.Db.Rocks/DbOnTheRocks.cs:line 286\r\n   at Nethermind.Db.StateDb.Commit() in /root/src/nethermind/src/Nethermind/Nethermind.Db/StateDb.cs:line 134\r\n   at Nethermind.Blockchain.Processing.BlockProcessor.Process(Keccak branchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer) in /root/src/nethermind/src/Nethermind/Nethermind.Blockchain/Processing/BlockProcessor.cs:line 128\r\n   at Nethermind.Blockchain.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /root/src/nethermind/src/Nethermind/Nethermind.Blockchain/Processing/BlockchainProcessor.cs:line 287\r\n   at Nethermind.Blockchain.Processing.BlockchainProcessor.RunProcessingLoop() in /root/src/nethermind/src/Nethermind/Nethermind.Blockchain/Processing/BlockchainProcessor.cs:line 226\r\n   at System.Threading.Tasks.Task.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n2020-04-23 19:46:49.4995|INFO|387|Sync peers 190(199)/512\r\n   [Peer|18.203.94.160:30303|9930686|Parity-Ethereum/v2.5.13-stable-253ff3f-20191231/x86_64-linux-gnu/rustc1.40.0|eth63][S][][481]\r\n   [Peer|31.172.81.167:30303|9930686|Parity-Ethereum/v2.7.2-stable-2662d19-20200206/x86_64-unknown-linux-gnu/rustc1.41.0|eth63][S][][179]\r\n   [Peer|47.244.9.240:30303|9930686|Parity-Ethereum/v2.5.13-stable-253ff3f-20191231/x86_64-linux-gnu/rustc1.40.0|eth63][HBR][][44]\r\n2020-04-23 19:46:49.5365|INFO|9|State Sync 00.08:58:44 | ~99.40 % | 40456.63MB / ~40700.00MB | kB/s:    13 | accounts 84410729 | nodes 480603557 | diagnostics: 61.29.08ms\r\n2020-04-23 19:46:50.6189|INFO|234|State Sync 00.08:58:44 | ~99.40 % | 40456.64MB / ~40700.00MB | kB/s:    10 | accounts 84410729 | nodes 480603578 | diagnostics: 27.29.08ms",
  "closed_by": {
    "login": "tkstanczak",
    "id": 498913,
    "node_id": "MDQ6VXNlcjQ5ODkxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tkstanczak",
    "html_url": "https://github.com/tkstanczak",
    "followers_url": "https://api.github.com/users/tkstanczak/followers",
    "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
    "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
    "repos_url": "https://api.github.com/users/tkstanczak/repos",
    "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/1730/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

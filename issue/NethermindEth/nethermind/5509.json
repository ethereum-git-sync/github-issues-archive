{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5509",
  "id": 1645656213,
  "node_id": "I_kwDOBggaLc5iFriV",
  "number": 5509,
  "title": "DB corruption",
  "user": {
    "login": "noskill",
    "id": 733626,
    "node_id": "MDQ6VXNlcjczMzYyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/733626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/noskill",
    "html_url": "https://github.com/noskill",
    "followers_url": "https://api.github.com/users/noskill/followers",
    "following_url": "https://api.github.com/users/noskill/following{/other_user}",
    "gists_url": "https://api.github.com/users/noskill/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/noskill/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/noskill/subscriptions",
    "organizations_url": "https://api.github.com/users/noskill/orgs",
    "repos_url": "https://api.github.com/users/noskill/repos",
    "events_url": "https://api.github.com/users/noskill/events{/privacy}",
    "received_events_url": "https://api.github.com/users/noskill/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-03-29T11:59:31Z",
  "updated_at": "2024-01-20T07:20:06Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I run nethermind in docker from this guide https://hackmd.io/@philknows/HkROkZW55#Option-13-Nethermind-Execution-Node\r\n\r\nEach time i create container and run nethermind it gets corrupted db at some pont:\r\n\r\n> 2023-03-28 21:36:28.0917|Syncing beacon headers... Request: ForkchoiceState: (HeadBlockHash: 0\r\n> xe82447a37eee530bc9be695b63d95f33c12cec98f5d0f2e029ef21ab81c8e3ec, SafeBlockHash: 0xc6a8c81161\r\n> 30b58e4a765adb0f6077189d8afec6ffacb5602832f84bf016ea50, FinalizedBlockHash: 0x794af1120494d593\r\n> 1ae614601e17b9d35208c9b05c71bc33e720736712670fb8) . \r\n> 2023-03-28 21:36:28.5972|Corrupted DB detected on path /data/nethermind_db/mainnet/code. Pleas\r\n> e restart Nethermind to attempt repair. \r\n> 2023-03-28 21:36:28.7673|Corrupted DB detected on path /data/nethermind_db/mainnet/code. Pleas\r\n> e restart Nethermind to attempt repair. \r\n> 2023-03-28 21:36:28.8132|Error when handling response RocksDbSharp.RocksDbException: Corruption: block checksum mismatch: stored = 2559870909, computed = 722275884, type = 1  in /data/nethermind_db/mainnet/code/001460.sst offset 6098955 size 14268\r\n>    at Nethermind.Db.Rocks.DbOnTheRocks.set_Item(Byte[] key, Byte[] value) in /src/Nethermind/Nethermind.Db.Rocks/DbOnTheRocks.cs:line 360\r\n>    at Nethermind.Synchronization.SnapSync.SnapProvider.AddCodes(Keccak[] requestedHashes, Byte[][] codes) in /src/Nethermind/Nethermind.Synchronization/SnapSync/SnapProvider.cs:line 252\r\n>    at Nethermind.Synchronization.SnapSync.SnapSyncFeed.HandleResponse(SnapSyncBatch batch, PeerInfo peer) in /src/Nethermind/Nethermind.Synchronization/SnapSync/SnapSyncFeed.cs:line 72\r\n>    at Nethermind.Synchronization.ParallelSync.SyncDispatcher`1.DoHandleResponse(T request, PeerInfo allocatedPeer) in /src/Nethermind/Nethermind.Synchronization/ParallelSync/SyncDispatcher.cs:line 173\r\n> ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1741103945",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1741103945",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1741103945,
    "node_id": "IC_kwDOBggaLc5nxyNJ",
    "user": {
      "login": "MarekM25",
      "id": 9356351,
      "node_id": "MDQ6VXNlcjkzNTYzNTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarekM25",
      "html_url": "https://github.com/MarekM25",
      "followers_url": "https://api.github.com/users/MarekM25/followers",
      "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
      "organizations_url": "https://api.github.com/users/MarekM25/orgs",
      "repos_url": "https://api.github.com/users/MarekM25/repos",
      "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarekM25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-29T15:47:46Z",
    "updated_at": "2023-09-29T15:47:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@noskill is it still the issue? Did you try the latest version of Nethermind?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1741103945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898341030",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1898341030",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1898341030,
    "node_id": "IC_kwDOBggaLc5xJmKm",
    "user": {
      "login": "kamilchodola",
      "id": 43241881,
      "node_id": "MDQ6VXNlcjQzMjQxODgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamilchodola",
      "html_url": "https://github.com/kamilchodola",
      "followers_url": "https://api.github.com/users/kamilchodola/followers",
      "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
      "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
      "repos_url": "https://api.github.com/users/kamilchodola/repos",
      "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T11:56:34Z",
    "updated_at": "2024-01-18T11:56:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think we solved plenty of things around corruptions - if no response we can close.\r\n@noskill Please check if this is still a case for You.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898341030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898586921",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1898586921",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1898586921,
    "node_id": "IC_kwDOBggaLc5xKiMp",
    "user": {
      "login": "noskill",
      "id": 733626,
      "node_id": "MDQ6VXNlcjczMzYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/733626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/noskill",
      "html_url": "https://github.com/noskill",
      "followers_url": "https://api.github.com/users/noskill/followers",
      "following_url": "https://api.github.com/users/noskill/following{/other_user}",
      "gists_url": "https://api.github.com/users/noskill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/noskill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/noskill/subscriptions",
      "organizations_url": "https://api.github.com/users/noskill/orgs",
      "repos_url": "https://api.github.com/users/noskill/repos",
      "events_url": "https://api.github.com/users/noskill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/noskill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T14:29:07Z",
    "updated_at": "2024-01-18T14:29:07Z",
    "author_association": "NONE",
    "body": "I can't reproduce the issue, i got some problems with beacon node:\r\n\r\n\r\nbeacon_node_1        | CodeError: Transport (@libp2p/tcp) could not listen on any available address\r\nnethermind_docker    | 18 Jan 14:26:10 | Peers | with best block: 38 | all: 38 | eth66 (8 %), eth67 (5 %), eth68 (87 %) | Active: None | Sleeping: All | Geth (50 %), Erigon (21 %), Nethermind (21 %), OpenEthereum (5 %), Besu (3 %) \r\nnethermind_docker    | 18 Jan 14:26:10 | No incoming messages from the consensus client that is required for sync. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898586921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898716116",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1898716116",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1898716116,
    "node_id": "IC_kwDOBggaLc5xLBvU",
    "user": {
      "login": "kamilchodola",
      "id": 43241881,
      "node_id": "MDQ6VXNlcjQzMjQxODgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamilchodola",
      "html_url": "https://github.com/kamilchodola",
      "followers_url": "https://api.github.com/users/kamilchodola/followers",
      "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
      "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
      "repos_url": "https://api.github.com/users/kamilchodola/repos",
      "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T15:38:02Z",
    "updated_at": "2024-01-18T15:38:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@noskill \r\ncan You send some more CL logs for analysis? Which one is that?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1898716116/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1900479075",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1900479075",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1900479075,
    "node_id": "IC_kwDOBggaLc5xRwJj",
    "user": {
      "login": "noskill",
      "id": 733626,
      "node_id": "MDQ6VXNlcjczMzYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/733626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/noskill",
      "html_url": "https://github.com/noskill",
      "followers_url": "https://api.github.com/users/noskill/followers",
      "following_url": "https://api.github.com/users/noskill/following{/other_user}",
      "gists_url": "https://api.github.com/users/noskill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/noskill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/noskill/subscriptions",
      "organizations_url": "https://api.github.com/users/noskill/orgs",
      "repos_url": "https://api.github.com/users/noskill/repos",
      "events_url": "https://api.github.com/users/noskill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/noskill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-19T14:03:03Z",
    "updated_at": "2024-01-19T14:03:03Z",
    "author_association": "NONE",
    "body": "sure \r\n[beacon logs](https://github.com/NethermindEth/nethermind/files/13989921/logs.txt)\r\n\r\n[nethermind logs](https://github.com/NethermindEth/nethermind/files/13989939/logs_nether.txt)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1900479075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1900595484",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1900595484",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1900595484,
    "node_id": "IC_kwDOBggaLc5xSMkc",
    "user": {
      "login": "kamilchodola",
      "id": 43241881,
      "node_id": "MDQ6VXNlcjQzMjQxODgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamilchodola",
      "html_url": "https://github.com/kamilchodola",
      "followers_url": "https://api.github.com/users/kamilchodola/followers",
      "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
      "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
      "repos_url": "https://api.github.com/users/kamilchodola/repos",
      "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-19T15:09:05Z",
    "updated_at": "2024-01-19T15:09:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@noskill \r\nDon't You have any other CL running on similar ports? Seems liek Lodestar can't acquire port for libp2p communication?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1900595484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1901033587",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1901033587",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1901033587,
    "node_id": "IC_kwDOBggaLc5xT3hz",
    "user": {
      "login": "noskill",
      "id": 733626,
      "node_id": "MDQ6VXNlcjczMzYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/733626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/noskill",
      "html_url": "https://github.com/noskill",
      "followers_url": "https://api.github.com/users/noskill/followers",
      "following_url": "https://api.github.com/users/noskill/following{/other_user}",
      "gists_url": "https://api.github.com/users/noskill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/noskill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/noskill/subscriptions",
      "organizations_url": "https://api.github.com/users/noskill/orgs",
      "repos_url": "https://api.github.com/users/noskill/repos",
      "events_url": "https://api.github.com/users/noskill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/noskill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-19T20:04:13Z",
    "updated_at": "2024-01-19T20:04:13Z",
    "author_association": "NONE",
    "body": "Indeed i had another process that use libp2p running. So far beacon and nethermind show no errors.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1901033587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1901842224",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5509#issuecomment-1901842224",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5509",
    "id": 1901842224,
    "node_id": "IC_kwDOBggaLc5xW88w",
    "user": {
      "login": "noskill",
      "id": 733626,
      "node_id": "MDQ6VXNlcjczMzYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/733626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/noskill",
      "html_url": "https://github.com/noskill",
      "followers_url": "https://api.github.com/users/noskill/followers",
      "following_url": "https://api.github.com/users/noskill/following{/other_user}",
      "gists_url": "https://api.github.com/users/noskill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/noskill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/noskill/subscriptions",
      "organizations_url": "https://api.github.com/users/noskill/orgs",
      "repos_url": "https://api.github.com/users/noskill/repos",
      "events_url": "https://api.github.com/users/noskill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/noskill/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-20T07:20:05Z",
    "updated_at": "2024-01-20T07:20:05Z",
    "author_association": "NONE",
    "body": "Sync is stack at 7.83% for 10 hours or so:\r\n\r\n```\r\n19 Jan 20:13:16 | Sync mode changed from SnapSync to FastSync, SnapSync \r\n19 Jan 20:13:16 | Snap         State Ranges (Phase 1): (  7.83 %) [*****                                                                  ] \r\n19 Jan 20:13:17 | Changing state FastSync, SnapSync to SnapSync at processed: 0 | state: 0 | block: 19043191 | header: 19043191 | target block: 19043223 | peer block: 19043223 \r\n19 Jan 20:13:17 | Sync mode changed from FastSync, SnapSync to SnapSync \r\n19 Jan 20:13:17 | Snap         State Ranges (Phase 1): (  7.83 %) [*****                                                                  ] \r\n......................................................\r\n\r\n0 Jan 07:14:37 | Received new block:  19046512 (0x31b8fc...763026) \r\n20 Jan 07:14:37 | Syncing... Inserting block 19046512 (0x31b8fc...763026). \r\n20 Jan 07:14:37 | Received ForkChoice: Head: 19046512 (0x31b8fc...763026), Safe: 19046469 (0x65d53b...ea9675), Finalized: 19046437 (0x6507d9...899371) \r\n20 Jan 07:14:37 | Syncing beacon headers, Request: ForkChoice: Head: 19046512 (0x31b8fc...763026), Safe: 19046469 (0x65d53b...ea9675), Finalized: 19046437 (0x6507d9...899371) \r\n20 Jan 07:14:37 | Snap         State Ranges (Phase 1): (  7.83 %) [*****                                                                  ] \r\n20 Jan 07:14:38 | Changing state SnapSync to FastSync, SnapSync at processed: 0 | state: 0 | block: 19046479 | header: 19046479 | target block: 19046512 | peer block: 19046512 \r\n20 Jan 07:14:38 | Sync mode changed from SnapSync to FastSync, SnapSync \r\n20 Jan 07:14:39 | Changing state FastSync, SnapSync to SnapSync at processed: 0 | state: 0 | block: 19046480 | header: 19046480 | target block: 19046512 | peer block: 19046512 \r\n20 Jan 07:14:39 | Sync mode changed from FastSync, SnapSync to SnapSync \r\n20 Jan 07:14:39 | Snap         State Ranges (Phase 1): (  7.83 %) [***** \r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1901842224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/4514",
  "id": 1358798068,
  "node_id": "I_kwDOBggaLc5Q_Zz0",
  "number": 4514,
  "title": "Processing loop threw an exception",
  "user": {
    "login": "dasudiy",
    "id": 478559,
    "node_id": "MDQ6VXNlcjQ3ODU1OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/478559?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dasudiy",
    "html_url": "https://github.com/dasudiy",
    "followers_url": "https://api.github.com/users/dasudiy/followers",
    "following_url": "https://api.github.com/users/dasudiy/following{/other_user}",
    "gists_url": "https://api.github.com/users/dasudiy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dasudiy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dasudiy/subscriptions",
    "organizations_url": "https://api.github.com/users/dasudiy/orgs",
    "repos_url": "https://api.github.com/users/dasudiy/repos",
    "events_url": "https://api.github.com/users/dasudiy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dasudiy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-01T12:50:51Z",
  "updated_at": "2022-09-01T13:41:45Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nSudden encounter error during mainnet sync, and stuck here, using default mainnet.cfg\r\n```\r\n2022-09-01 12:40:23.7525|Processing part of a long blocks branch 0/193. Block: 15452578 (0x85fa78...59239c)\r\n2022-09-01 12:40:23.8040|Processing loop threw an exception. Block: Nethermind.Consensus.Processing.BlockRef, Exception: Nethermind.Trie.TrieException: Failed to load key 8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b from root hash 0x1bc592869c66ccc91eb8f90291dbb92ad707ab7acf18785a9eea9dec3fdc2277.\r\n ---> Nethermind.Trie.TrieException: Node 0x1bc592869c66ccc91eb8f90291dbb92ad707ab7acf18785a9eea9dec3fdc2277 is missing from the DB\r\n   at Nethermind.Trie.Pruning.TrieStore.LoadRlp(Keccak keccak, IKeyValueStore keyValueStore)\r\n   at Nethermind.Trie.TrieNode.ResolveNode(ITrieNodeResolver tree)\r\n   at Nethermind.Trie.PatriciaTree.Run(Span`1 updatePath, Int32 nibblesCount, Byte[] updateValue, Boolean isUpdate, Boolean ignoreMissingDelete, Keccak startRootHash)\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash)\r\n   --- End of inner exception stack trace ---\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash)\r\n   at Nethermind.State.PersistentStorageProvider.LoadFromTree(StorageCell storageCell)\r\n   at Nethermind.State.PersistentStorageProvider.GetCurrentValue(StorageCell storageCell)\r\n   at Nethermind.Evm.VirtualMachine.ExecuteCall(EvmState vmState, Byte[] previousCallResult, ZeroPaddedSpan previousCallOutput, UInt256& previousCallOutputDestination, IReleaseSpec spec)\r\n   at Nethermind.Evm.VirtualMachine.Run(EvmState state, IWorldState worldState, ITxTracer txTracer)\r\n   at Nethermind.Evm.TransactionProcessing.TransactionProcessor.Execute(Transaction transaction, BlockHeader block, ITxTracer txTracer, ExecutionOptions executionOptions)\r\n   at Nethermind.Consensus.Processing.TransactionProcessorAdapterExtensions.ProcessTransaction(ITransactionProcessorAdapter transactionProcessor, Block block, Transaction currentTx, BlockReceiptsTracer receiptsTracer, ProcessingOptions processingOptions, IStateProvider stateProvider)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.BlockValidationTransactionsExecutor.ProcessTransactions(Block block, ProcessingOptions processingOptions, BlockReceiptsTracer receiptsTracer, IReleaseSpec spec)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessBlock(Block block, IBlockTracer blockTracer, ProcessingOptions options)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessOne(Block suggestedBlock, ProcessingOptions options, IBlockTracer blockTracer)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.Process(Keccak newBranchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.ProcessBranch(ProcessingBranch processingBranch, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.RunProcessingLoop()\r\n2022-09-01 12:40:27.3861|Processing part of a long blocks branch 0/194. Block: 15452578 (0x85fa78...59239c)\r\n2022-09-01 12:40:27.4605|Processing loop threw an exception. Block: Nethermind.Consensus.Processing.BlockRef, Exception: Nethermind.Trie.TrieException: Failed to load key 8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b from root hash 0x1bc592869c66ccc91eb8f90291dbb92ad707ab7acf18785a9eea9dec3fdc2277.\r\n ---> Nethermind.Trie.TrieException: Node 0x1bc592869c66ccc91eb8f90291dbb92ad707ab7acf18785a9eea9dec3fdc2277 is missing from the DB\r\n   at Nethermind.Trie.Pruning.TrieStore.LoadRlp(Keccak keccak, IKeyValueStore keyValueStore)\r\n   at Nethermind.Trie.TrieNode.ResolveNode(ITrieNodeResolver tree)\r\n   at Nethermind.Trie.PatriciaTree.Run(Span`1 updatePath, Int32 nibblesCount, Byte[] updateValue, Boolean isUpdate, Boolean ignoreMissingDelete, Keccak startRootHash)\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash)\r\n   --- End of inner exception stack trace ---\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash)\r\n   at Nethermind.State.PersistentStorageProvider.LoadFromTree(StorageCell storageCell)\r\n   at Nethermind.State.PersistentStorageProvider.GetCurrentValue(StorageCell storageCell)\r\n   at Nethermind.Evm.VirtualMachine.ExecuteCall(EvmState vmState, Byte[] previousCallResult, ZeroPaddedSpan previousCallOutput, UInt256& previousCallOutputDestination, IReleaseSpec spec)\r\n   at Nethermind.Evm.VirtualMachine.Run(EvmState state, IWorldState worldState, ITxTracer txTracer)\r\n   at Nethermind.Evm.TransactionProcessing.TransactionProcessor.Execute(Transaction transaction, BlockHeader block, ITxTracer txTracer, ExecutionOptions executionOptions)\r\n   at Nethermind.Consensus.Processing.TransactionProcessorAdapterExtensions.ProcessTransaction(ITransactionProcessorAdapter transactionProcessor, Block block, Transaction currentTx, BlockReceiptsTracer receiptsTracer, ProcessingOptions processingOptions, IStateProvider stateProvider)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.BlockValidationTransactionsExecutor.ProcessTransactions(Block block, ProcessingOptions processingOptions, BlockReceiptsTracer receiptsTracer, IReleaseSpec spec)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessBlock(Block block, IBlockTracer blockTracer, ProcessingOptions options)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessOne(Block suggestedBlock, ProcessingOptions options, IBlockTracer blockTracer)\r\n   at Nethermind.Consensus.Processing.BlockProcessor.Process(Keccak newBranchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.ProcessBranch(ProcessingBranch processingBranch, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.RunProcessingLoop()\r\n```\r\n\r\n\r\n**Expected behavior**\r\ncontinue syncing\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu 22.04\r\n - Version 1.14.0\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1234288985",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4514#issuecomment-1234288985",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514",
    "id": 1234288985,
    "node_id": "IC_kwDOBggaLc5JkcFZ",
    "user": {
      "login": "marcindsobczak",
      "id": 77129288,
      "node_id": "MDQ6VXNlcjc3MTI5Mjg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/77129288?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcindsobczak",
      "html_url": "https://github.com/marcindsobczak",
      "followers_url": "https://api.github.com/users/marcindsobczak/followers",
      "following_url": "https://api.github.com/users/marcindsobczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcindsobczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcindsobczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcindsobczak/subscriptions",
      "organizations_url": "https://api.github.com/users/marcindsobczak/orgs",
      "repos_url": "https://api.github.com/users/marcindsobczak/repos",
      "events_url": "https://api.github.com/users/marcindsobczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcindsobczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T13:33:16Z",
    "updated_at": "2022-09-01T13:33:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "That's very worrisome, we had problems with TrieException in the past, looks like it's not fully fixed. Would you be able to send full logs? It will help us to find source of the problem.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1234288985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1234299503",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4514#issuecomment-1234299503",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4514",
    "id": 1234299503,
    "node_id": "IC_kwDOBggaLc5Jkepv",
    "user": {
      "login": "dasudiy",
      "id": 478559,
      "node_id": "MDQ6VXNlcjQ3ODU1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/478559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dasudiy",
      "html_url": "https://github.com/dasudiy",
      "followers_url": "https://api.github.com/users/dasudiy/followers",
      "following_url": "https://api.github.com/users/dasudiy/following{/other_user}",
      "gists_url": "https://api.github.com/users/dasudiy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dasudiy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dasudiy/subscriptions",
      "organizations_url": "https://api.github.com/users/dasudiy/orgs",
      "repos_url": "https://api.github.com/users/dasudiy/repos",
      "events_url": "https://api.github.com/users/dasudiy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dasudiy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T13:41:45Z",
    "updated_at": "2022-09-01T13:41:45Z",
    "author_association": "NONE",
    "body": "[mainnet.logs.txt.zip](https://github.com/NethermindEth/nethermind/files/9470308/mainnet.logs.txt.zip)\r\nIt's my latest logs file",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1234299503/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

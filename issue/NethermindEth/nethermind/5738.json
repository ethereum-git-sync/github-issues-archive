{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5738",
  "id": 1730074761,
  "node_id": "I_kwDOBggaLc5nHtiJ",
  "number": 5738,
  "title": "VolumeFreeSpace pruning trigger is broken?",
  "user": {
    "login": "deffrian",
    "id": 19891475,
    "node_id": "MDQ6VXNlcjE5ODkxNDc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19891475?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/deffrian",
    "html_url": "https://github.com/deffrian",
    "followers_url": "https://api.github.com/users/deffrian/followers",
    "following_url": "https://api.github.com/users/deffrian/following{/other_user}",
    "gists_url": "https://api.github.com/users/deffrian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/deffrian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/deffrian/subscriptions",
    "organizations_url": "https://api.github.com/users/deffrian/orgs",
    "repos_url": "https://api.github.com/users/deffrian/repos",
    "events_url": "https://api.github.com/users/deffrian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/deffrian/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2800949320,
      "node_id": "MDU6TGFiZWwyODAwOTQ5MzIw",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/ux",
      "name": "ux",
      "color": "c5def5",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-05-29T05:12:13Z",
  "updated_at": "2023-06-16T02:16:30Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Description**\r\nWe have to check `VolumeFreeSpace` trigger. It might check not only db folder.\r\nAnd in terms of ux we should not trigger pruning after reboot. Or at least show warning.\r\n\r\nLink:\r\nhttps://discordapp.com/channels/629004402170134531/629004402170134537/1111658976061444217",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1579993236",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5738#issuecomment-1579993236",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5738",
    "id": 1579993236,
    "node_id": "IC_kwDOBggaLc5eLMiU",
    "user": {
      "login": "eliotstock",
      "id": 1144814,
      "node_id": "MDQ6VXNlcjExNDQ4MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1144814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eliotstock",
      "html_url": "https://github.com/eliotstock",
      "followers_url": "https://api.github.com/users/eliotstock/followers",
      "following_url": "https://api.github.com/users/eliotstock/following{/other_user}",
      "gists_url": "https://api.github.com/users/eliotstock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eliotstock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eliotstock/subscriptions",
      "organizations_url": "https://api.github.com/users/eliotstock/orgs",
      "repos_url": "https://api.github.com/users/eliotstock/repos",
      "events_url": "https://api.github.com/users/eliotstock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eliotstock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T06:39:43Z",
    "updated_at": "2023-06-16T02:16:30Z",
    "author_association": "NONE",
    "body": "In my case, using the following pruning config (command line params)...\r\n\r\n```\r\n--Pruning.FullPruningTrigger VolumeFreeSpace \\\r\n  --Pruning.Mode Full \\\r\n  --Pruning.FullPruningThresholdMb 307200\r\n```\r\n\r\n... I'm seeing full pruning running before it should. I'd expect this to start pruning only when there's less than 300 GB of space remaining on the drive on which NM's data sits. That drive currently has plenty of space:\r\n\r\n```\r\n$ df -h\r\nFilesystem                         Size  Used Avail Use% Mounted on\r\n...\r\n/dev/sda                           1.8T  714G  1.1T  41% /data\r\n...\r\n```\r\n\r\nHere are some logs for you.\r\n\r\n[mainnet.logs.txt](https://github.com/NethermindEth/nethermind/files/11673330/mainnet.logs.txt)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1579993236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/3541",
  "id": 1032187414,
  "node_id": "I_kwDOBggaLc49he4W",
  "number": 3541,
  "title": "eth_getTransactionReceipt returns wrong hash of block",
  "user": {
    "login": "vbaranov",
    "id": 4341812,
    "node_id": "MDQ6VXNlcjQzNDE4MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4341812?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vbaranov",
    "html_url": "https://github.com/vbaranov",
    "followers_url": "https://api.github.com/users/vbaranov/followers",
    "following_url": "https://api.github.com/users/vbaranov/following{/other_user}",
    "gists_url": "https://api.github.com/users/vbaranov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vbaranov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vbaranov/subscriptions",
    "organizations_url": "https://api.github.com/users/vbaranov/orgs",
    "repos_url": "https://api.github.com/users/vbaranov/repos",
    "events_url": "https://api.github.com/users/vbaranov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vbaranov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "marcindsobczak",
    "id": 77129288,
    "node_id": "MDQ6VXNlcjc3MTI5Mjg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/77129288?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marcindsobczak",
    "html_url": "https://github.com/marcindsobczak",
    "followers_url": "https://api.github.com/users/marcindsobczak/followers",
    "following_url": "https://api.github.com/users/marcindsobczak/following{/other_user}",
    "gists_url": "https://api.github.com/users/marcindsobczak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marcindsobczak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marcindsobczak/subscriptions",
    "organizations_url": "https://api.github.com/users/marcindsobczak/orgs",
    "repos_url": "https://api.github.com/users/marcindsobczak/repos",
    "events_url": "https://api.github.com/users/marcindsobczak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marcindsobczak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "marcindsobczak",
      "id": 77129288,
      "node_id": "MDQ6VXNlcjc3MTI5Mjg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/77129288?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcindsobczak",
      "html_url": "https://github.com/marcindsobczak",
      "followers_url": "https://api.github.com/users/marcindsobczak/followers",
      "following_url": "https://api.github.com/users/marcindsobczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcindsobczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcindsobczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcindsobczak/subscriptions",
      "organizations_url": "https://api.github.com/users/marcindsobczak/orgs",
      "repos_url": "https://api.github.com/users/marcindsobczak/repos",
      "events_url": "https://api.github.com/users/marcindsobczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcindsobczak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-10-21T08:07:50Z",
  "updated_at": "2021-11-04T16:01:38Z",
  "closed_at": "2021-11-04T16:01:38Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Nethermind/v1.11.3-0-fe90423bd-20211018/X64-Linux/5.0.7\r\n\r\nSteps to reproduce:\r\n\r\n1. Request block by number:\r\n`curl -H \"Content-Type: application/json\" -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getBlockByNumber\",\"params\":[\"21562874\", false],\"id\":1}' https://sokol-archive.blockscout.com`\r\n\r\n`{\"jsonrpc\":\"2.0\",\"result\":{\"author\":\"0xcbbcd5ac86f9a50e13313633b262e16f695a90c1\",\"difficulty\":\"0xfffffffffffffffffffffffffffffffe\",\"extraData\":\"0xdb830302068c4f70656e457468657265756d86312e34372e30826c69\",\"gasLimit\":\"0xbebc20\",\"gasUsed\":\"0x12890\",\"hash\":❗0x49148ae57b5c4f0981d332fcb3459395b0cbb3575959a09da3bb3690e46dfc1f❗\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000010000000000000000000000000000\",\"miner\":\"0xcbbcd5ac86f9a50e13313633b262e16f695a90c1\",\"number\":\"0x14905fa\",\"parentHash\":\"0x5b2a5d7526c78c63065d9919922a5711a6e7e7614c3aff7b333e9fcd654ddd44\",\"receiptsRoot\":\"0x3fd27516a4661e65b1daf3c7fc096af5d2a9038707f57ea330ceb4da279e0d9b\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"signature\":\"0x005b0f2e261524b88d5a8027f686e13760524cd683cd840ab305ce3335a6fc5775b097333331fbd255655327debd015eaba3e2840123d4b1dcf2518a05561e0c00\",\"size\":\"0x6c1\",\"stateRoot\":\"0xde749a9a71034247ae8e3edba31ec87a057b810ccbc988d206922511f2d3b9eb\",\"step\":325008504,\"totalDifficulty\":\"0x14905f9ffffffffffffffffffffffffeb59bd8e\",\"timestamp\":\"0x60dc2e58\",\"transactions\":0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\"],\"transactionsRoot\":\"0x3b20f92c61d379f78bf03be7fa935050ee713978993e3bd4c5a146743c9f7fba\",\"uncles\":[]},\"id\":1}`\r\n\r\n2. Request transaction receipt from that block\r\n`curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getTransactionReceipt\",\"params\":[\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\"],\"id\":1}' https://sokol-archive.blockscout.com`\r\n\r\n`{\"jsonrpc\":\"2.0\",\"result\":{\"transactionHash\":\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\",\"transactionIndex\":\"0x0\",\"blockHash\":\"❗0x340b5336cf5abb002674b89fde618b44a9c5f0540a33c2e17701a1ccaaa09cbf❗\",\"blockNumber\":\"0x14905fb\",\"cumulativeGasUsed\":\"0x12890\",\"gasUsed\":\"0x12890\",\"effectiveGasPrice\":\"0x2540be400\",\"from\":\"0x33e0e07ca86c869ade3fc9de9126f6c73dad105e\",\"to\":\"0x79dd14623c4d33413c0c28fdabc2285fdb1e572e\",\"contractAddress\":null,\"logs\":[{\"removed\":false,\"logIndex\":\"0x0\",\"transactionIndex\":\"0x0\",\"transactionHash\":\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\",\"blockHash\":\"0x340b5336cf5abb002674b89fde618b44a9c5f0540a33c2e17701a1ccaaa09cbf\",\"blockNumber\":\"0x14905fb\",\"address\":\"0x79dd14623c4d33413c0c28fdabc2285fdb1e572e\",\"data\":\"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000290597120000000000000000000000000000000000000000000000000000000060dc2e2c00000000000000000000000000000000000000000000000000000000006f4aa200000000000000000000000000000000000000000000000000000000000000035852500000000000000000000000000000000000000000000000000000000000\",\"topics\":[\"0xa20e495bf7cbb7bc0ecf70d514a8e6da116c9b8b2a4e1c25d06b6b176db0de0f\"]},{\"removed\":false,\"logIndex\":\"0x1\",\"transactionIndex\":\"0x0\",\"transactionHash\":\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\",\"blockHash\":\"0x340b5336cf5abb002674b89fde618b44a9c5f0540a33c2e17701a1ccaaa09cbf\",\"blockNumber\":\"0x14905fb\",\"address\":\"0x79dd14623c4d33413c0c28fdabc2285fdb1e572e\",\"data\":\"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000001d90706344d00000000000000000000000000000000000000000000000000000000060dc2e2c00000000000000000000000000000000000000000000000000000000006f4aa200000000000000000000000000000000000000000000000000000000000000035946490000000000000000000000000000000000000000000000000000000000\",\"topics\":[\"0xa20e495bf7cbb7bc0ecf70d514a8e6da116c9b8b2a4e1c25d06b6b176db0de0f\"]},{\"removed\":false,\"logIndex\":\"0x2\",\"transactionIndex\":\"0x0\",\"transactionHash\":\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\",\"blockHash\":\"0x340b5336cf5abb002674b89fde618b44a9c5f0540a33c2e17701a1ccaaa09cbf\",\"blockNumber\":\"0x14905fb\",\"address\":\"0x79dd14623c4d33413c0c28fdabc2285fdb1e572e\",\"data\":\"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000002b0ef3000000000000000000000000000000000000000000000000000000000060dc2e1300000000000000000000000000000000000000000000000000000000006f4a9800000000000000000000000000000000000000000000000000000000000000034f4e540000000000000000000000000000000000000000000000000000000000\",\"topics\":[\"0xa20e495bf7cbb7bc0ecf70d514a8e6da116c9b8b2a4e1c25d06b6b176db0de0f\"]},{\"removed\":false,\"logIndex\":\"0x3\",\"transactionIndex\":\"0x0\",\"transactionHash\":\"0xe765123449efa2ba5b2c57ba9e02c5d2ce49946fb0d57796865ce70fb2b16b04\",\"blockHash\":\"0x340b5336cf5abb002674b89fde618b44a9c5f0540a33c2e17701a1ccaaa09cbf\",\"blockNumber\":\"0x14905fb\",\"address\":\"0x79dd14623c4d33413c0c28fdabc2285fdb1e572e\",\"data\":\"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000001619f5800000000000000000000000000000000000000000000000000000000060dc2e1300000000000000000000000000000000000000000000000000000000006f4a98000000000000000000000000000000000000000000000000000000000000000352454e0000000000000000000000000000000000000000000000000000000000\",\"topics\":[\"0xa20e495bf7cbb7bc0ecf70d514a8e6da116c9b8b2a4e1c25d06b6b176db0de0f\"]}],\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000010000000000000000000000000000\",\"status\":\"0x1\",\"type\":\"0x0\"},\"id\":1}`\r\n\r\nBlock hashes are different in responses.",
  "closed_by": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/948373740",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3541#issuecomment-948373740",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541",
    "id": 948373740,
    "node_id": "IC_kwDOBggaLc44hwjs",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-21T08:20:27Z",
    "updated_at": "2021-10-21T08:20:27Z",
    "author_association": "MEMBER",
    "body": "Looks like follow up of: #3155 , but previous fix should still work, so maybe this is different scenario",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/948373740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/953696025",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3541#issuecomment-953696025",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541",
    "id": 953696025,
    "node_id": "IC_kwDOBggaLc442D8Z",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T09:58:52Z",
    "updated_at": "2021-10-28T09:58:52Z",
    "author_association": "MEMBER",
    "body": "Hi we published a fix to #3155 in version 1.10.74 on 29.06.2021. You updated this node on 5.07.2021 as seen in graphana \r\n![image](https://user-images.githubusercontent.com/12445221/139233710-f9a5f366-af99-4b65-8ca5-9aea647ea901.png)\r\n\r\nSo this was running on unpatched version that had this issue with reorgs. Did you try receipts migration later?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/953696025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/961185132",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3541#issuecomment-961185132",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3541",
    "id": 961185132,
    "node_id": "IC_kwDOBggaLc45SoVs",
    "user": {
      "login": "LukaszRozmej",
      "id": 12445221,
      "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukaszRozmej",
      "html_url": "https://github.com/LukaszRozmej",
      "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
      "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
      "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
      "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
      "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T16:01:38Z",
    "updated_at": "2021-11-04T16:01:38Z",
    "author_association": "MEMBER",
    "body": "You should be able to recover it with receipt migration",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/961185132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5955",
  "id": 1815674815,
  "node_id": "I_kwDOBggaLc5sOP-_",
  "number": 5955,
  "title": "WebSockets error Stream was too long",
  "user": {
    "login": "matyushkins",
    "id": 47747143,
    "node_id": "MDQ6VXNlcjQ3NzQ3MTQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/47747143?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matyushkins",
    "html_url": "https://github.com/matyushkins",
    "followers_url": "https://api.github.com/users/matyushkins/followers",
    "following_url": "https://api.github.com/users/matyushkins/following{/other_user}",
    "gists_url": "https://api.github.com/users/matyushkins/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matyushkins/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matyushkins/subscriptions",
    "organizations_url": "https://api.github.com/users/matyushkins/orgs",
    "repos_url": "https://api.github.com/users/matyushkins/repos",
    "events_url": "https://api.github.com/users/matyushkins/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matyushkins/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1124483401,
      "node_id": "MDU6TGFiZWwxMTI0NDgzNDAx",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/rpc",
      "name": "rpc",
      "color": "efe37a",
      "default": false,
      "description": ""
    },
    {
      "id": 4715368827,
      "node_id": "LA_kwDOBggaLc8AAAABGQ7Rew",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/gnosis",
      "name": "gnosis",
      "color": "3e6957",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "emlautarom1",
    "id": 31224949,
    "node_id": "MDQ6VXNlcjMxMjI0OTQ5",
    "avatar_url": "https://avatars.githubusercontent.com/u/31224949?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emlautarom1",
    "html_url": "https://github.com/emlautarom1",
    "followers_url": "https://api.github.com/users/emlautarom1/followers",
    "following_url": "https://api.github.com/users/emlautarom1/following{/other_user}",
    "gists_url": "https://api.github.com/users/emlautarom1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emlautarom1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emlautarom1/subscriptions",
    "organizations_url": "https://api.github.com/users/emlautarom1/orgs",
    "repos_url": "https://api.github.com/users/emlautarom1/repos",
    "events_url": "https://api.github.com/users/emlautarom1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emlautarom1/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "emlautarom1",
      "id": 31224949,
      "node_id": "MDQ6VXNlcjMxMjI0OTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/31224949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emlautarom1",
      "html_url": "https://github.com/emlautarom1",
      "followers_url": "https://api.github.com/users/emlautarom1/followers",
      "following_url": "https://api.github.com/users/emlautarom1/following{/other_user}",
      "gists_url": "https://api.github.com/users/emlautarom1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emlautarom1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emlautarom1/subscriptions",
      "organizations_url": "https://api.github.com/users/emlautarom1/orgs",
      "repos_url": "https://api.github.com/users/emlautarom1/repos",
      "events_url": "https://api.github.com/users/emlautarom1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emlautarom1/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-21T11:50:44Z",
  "updated_at": "2023-08-31T12:37:11Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Description**\r\nGnosis archive node sync explorer with debug trace block\r\nThis is repeated both with WebSockets and with http.\r\n```\r\ndebug_traceBlockByHash block 0xeb3f4a6938a880757d0469869303d26fa8636d9dbd0d632bc086268bdbece77f, error websocket: invalid close code\r\ndebug_traceBlockByHash block 0x31b5d2874766e1c2023b5d2e1559ca1cc4daa96f0fc6550764cab7702917f2e4, error websocket: invalid close code\r\n```\r\n```\r\n21 Jul 11:40:34 | WebSockets error Stream was too long. System.IO.IOException: Stream was too long.\r\n   at System.IO.MemoryStream.Write(ReadOnlySpan`1 buffer)\r\n   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)\r\n   at Nethermind.Serialization.Json.CountingTextWriter.Write(Char value)\r\n   at System.IO.TextWriter.Write(Char[] buffer, Int32 index, Int32 count)\r\n   at Newtonsoft.Json.Utilities.JavaScriptUtils.WriteEscapedJavaScriptString(TextWriter writer, String s, Char delimiter, Boolean appendDelimiters, Boolean[] charEscapeFlags, StringEscapeHandling stringEscapeHandling, IArrayPool`1 bufferPool, Char[]& writeBuffer)\r\n   at Newtonsoft.Json.JsonTextWriter.WriteValue(String value)\r\n   at Nethermind.JsonRpc.Modules.DebugModule.GethLikeTxTraceConverter.WriteEntries(JsonWriter writer, List`1 entries, JsonSerializer serializer)\r\n   at Nethermind.JsonRpc.Modules.DebugModule.GethLikeTxTraceConverter.WriteJson(JsonWriter writer, GethLikeTxTrace value, JsonSerializer serializer)\r\n   at Newtonsoft.Json.JsonConverter`1.WriteJson(JsonWriter writer, Object value, JsonSerializer serializer)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)\r\n   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)\r\n   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)\r\n   at Nethermind.Serialization.Json.EthereumJsonSerializer.Serialize[T](Stream stream, T value, Boolean indented)\r\n   at Nethermind.JsonRpc.WebSockets.JsonRpcSocketsClient.SendJsonRpcResultEntry(Entry result, Boolean endOfMessage)\r\n   at Nethermind.JsonRpc.WebSockets.JsonRpcSocketsClient.SendJsonRpcResultEntry(Entry result, Boolean endOfMessage)\r\n   at Nethermind.JsonRpc.WebSockets.JsonRpcSocketsClient.SendJsonRpcResult(JsonRpcResult result)\r\n   at Nethermind.JsonRpc.WebSockets.JsonRpcSocketsClient.ProcessAsync(ArraySegment`1 data)\r\n   at Nethermind.JsonRpc.WebSockets.JsonRpcSocketsClient.ProcessAsync(ArraySegment`1 data)\r\n   at Nethermind.Sockets.SocketClient.ReceiveAsync()\r\n   at Nethermind.Sockets.SocketClient.ReceiveAsync()\r\n   at Nethermind.Sockets.Extensions.<>c__DisplayClass0_0.<<UseWebSocketsModules>b__0>d.MoveNext()\r\n\r\n```\r\n**Desktop (please complete the following information):**\r\nPlease provide the following information regarding your setup:\r\n - Operating System: Linux docker Ubuntu 22.04\r\n - Version: 1.20.1\r\n - Consensus Client: lighthouse 4.3.0\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1700957563",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/5955#issuecomment-1700957563",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5955",
    "id": 1700957563,
    "node_id": "IC_kwDOBggaLc5lYo17",
    "user": {
      "login": "emlautarom1",
      "id": 31224949,
      "node_id": "MDQ6VXNlcjMxMjI0OTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/31224949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emlautarom1",
      "html_url": "https://github.com/emlautarom1",
      "followers_url": "https://api.github.com/users/emlautarom1/followers",
      "following_url": "https://api.github.com/users/emlautarom1/following{/other_user}",
      "gists_url": "https://api.github.com/users/emlautarom1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emlautarom1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emlautarom1/subscriptions",
      "organizations_url": "https://api.github.com/users/emlautarom1/orgs",
      "repos_url": "https://api.github.com/users/emlautarom1/repos",
      "events_url": "https://api.github.com/users/emlautarom1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emlautarom1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-31T12:37:11Z",
    "updated_at": "2023-08-31T12:37:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "We're currently trying to reproduce the issue in our machines but we don't currently have a Gnosis archive node. Have you had the same problem with a more recent block?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1700957563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

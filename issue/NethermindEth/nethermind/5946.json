{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/5946",
  "id": 1812031335,
  "node_id": "I_kwDOBggaLc5sAWdn",
  "number": 5946,
  "title": "`eth_estimateGas` returns too low gas estimate when sending ETH to fallback method",
  "user": {
    "login": "KillariDev",
    "id": 13102010,
    "node_id": "MDQ6VXNlcjEzMTAyMDEw",
    "avatar_url": "https://avatars.githubusercontent.com/u/13102010?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KillariDev",
    "html_url": "https://github.com/KillariDev",
    "followers_url": "https://api.github.com/users/KillariDev/followers",
    "following_url": "https://api.github.com/users/KillariDev/following{/other_user}",
    "gists_url": "https://api.github.com/users/KillariDev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KillariDev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KillariDev/subscriptions",
    "organizations_url": "https://api.github.com/users/KillariDev/orgs",
    "repos_url": "https://api.github.com/users/KillariDev/repos",
    "events_url": "https://api.github.com/users/KillariDev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KillariDev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-07-19T14:04:03Z",
  "updated_at": "2023-07-19T14:04:03Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Description**\r\nWhen trying to estimate gas for sending ETH to fallback method, the estimate is too low. Here's the estimate gas RPC query:\r\n```json\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"method\":\"eth_estimateGas\",\r\n    \"params\":[{\r\n        \"from\": \"0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045\",\r\n        \"to\": \"0x6978a05bbb01fcc27a41ff34f60472652bb04cfc\",\r\n        \"value\": \"0xde0b6b3a7640000\"\r\n    }]\r\n}\r\n```\r\n\r\nThis returns `0xbef9` which is 48889. For the same query Geth gives 54036. When executing the call itself, it consumes `41173` gas, which is less than the estimates, but the contract probably gets some discounts and might be doing some weird stuff with GAS opcode. Geths estimate is enough to make the call work, but Netherminds is not.\r\n\r\nNethermind version: 1.17.3 and <https://github.com/NethermindEth/nethermind/tree/feature/eth_multicall>\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/5946/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/4282",
  "id": 1305848421,
  "node_id": "I_kwDOBggaLc5N1apl",
  "number": 4282,
  "title": "trace_replayBlockTransactions method fails on archive node",
  "user": {
    "login": "nicexe",
    "id": 867535,
    "node_id": "MDQ6VXNlcjg2NzUzNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/867535?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicexe",
    "html_url": "https://github.com/nicexe",
    "followers_url": "https://api.github.com/users/nicexe/followers",
    "following_url": "https://api.github.com/users/nicexe/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicexe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicexe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicexe/subscriptions",
    "organizations_url": "https://api.github.com/users/nicexe/orgs",
    "repos_url": "https://api.github.com/users/nicexe/repos",
    "events_url": "https://api.github.com/users/nicexe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicexe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "MarekM25",
    "id": 9356351,
    "node_id": "MDQ6VXNlcjkzNTYzNTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MarekM25",
    "html_url": "https://github.com/MarekM25",
    "followers_url": "https://api.github.com/users/MarekM25/followers",
    "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
    "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
    "organizations_url": "https://api.github.com/users/MarekM25/orgs",
    "repos_url": "https://api.github.com/users/MarekM25/repos",
    "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MarekM25/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "MarekM25",
      "id": 9356351,
      "node_id": "MDQ6VXNlcjkzNTYzNTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarekM25",
      "html_url": "https://github.com/MarekM25",
      "followers_url": "https://api.github.com/users/MarekM25/followers",
      "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
      "organizations_url": "https://api.github.com/users/MarekM25/orgs",
      "repos_url": "https://api.github.com/users/MarekM25/repos",
      "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarekM25/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-07-15T10:11:51Z",
  "updated_at": "2023-02-20T19:08:22Z",
  "closed_at": "2022-07-18T07:51:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When calling `trace_replayBlockTransactions(\"0x8394F\", [\"trace\"])`, nethermind throws an error.\r\n\r\nThis is on a local testnet and I'm calling the method like so:\r\n\r\n```shell\r\n$ curl 127.0.0.1:8545 -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"trace_replayBlockTransactions\",\"params\":[\"0x8394F\",[\"trace\"]],\"id\":1,\"jsonrpc\":\"2.0\"}'`\r\n```\r\n\r\nand nethermind replies with:\r\n\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32603,\"message\":\"Internal error\",\"data\":\"Nethermind.Trie.TrieException: Failed to load key 2f6a0791cc0675d45262859d32ec96703b4f2e26dffb5effa28482f4d196e26a from root hash 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5.\\n ---> Nethermind.Trie.TrieException: Node 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5 is missing from the DB\\n   at Nethermind.Trie.Pruning.TrieStore.LoadRlp(Keccak keccak, IKeyValueStore keyValueStore) in /src/Nethermind/Nethermind.Trie/Pruning/TrieStore.cs:line 338\\n   at Nethermind.Trie.TrieNode.ResolveNode(ITrieNodeResolver tree) in /src/Nethermind/Nethermind.Trie/TrieNode.cs:line 318\\n   at Nethermind.Trie.PatriciaTree.Run(Span`1 updatePath, Int32 nibblesCount, Byte[] updateValue, Boolean isUpdate, Boolean ignoreMissingDelete, Keccak startRootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 399\\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\\n   --- End of inner exception stack trace ---\\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\\n   at Nethermind.State.StateProvider.GetState(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 659\\n   at Nethermind.State.StateProvider.GetAndAddToCache(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 685\\n   at Nethermind.State.StateProvider.GetNonce(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 132\\n   at Nethermind.Consensus.Processing.BlockProcessor.BlockValidationTransactionsExecutor.ProcessTransactions(Block block, ProcessingOptions processingOptions, BlockReceiptsTracer receiptsTracer, IReleaseSpec spec) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.BlockValidationTransactionsExecutor.cs:line 53\\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessBlock(Block block, IBlockTracer blockTracer, ProcessingOptions options) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 262\\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessOne(Block suggestedBlock, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 215\\n   at Nethermind.Consensus.Processing.BlockProcessor.Process(Keccak newBranchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 114\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.ProcessBranch(ProcessingBranch processingBranch, Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 475\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 299\\n   at Nethermind.Consensus.Processing.OneTimeChainProcessor.Process(Block block, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/OneTimeProcessor.cs:line 58\\n   at Nethermind.Consensus.Tracing.Tracer.Trace(Block block, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Tracing/Tracer.cs:line 50\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.TraceBlock(Block block, ParityTraceTypes traceTypes, TxTraceFilter txTraceFilter) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 248\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.trace_replayBlockTransactions(BlockParameter blockParameter, String[] traceTypes) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 159\"},\"id\":1}\r\n```\r\n\r\nNethermind logs of this instance:\r\n\r\n```\r\n2022-07-15 10:00:16.7705|Executing JSON RPC call trace_replayBlockTransactions with params [0x8394F,[\r\n  \"trace\"\r\n]]\r\n2022-07-15 10:00:16.7705|Error during method execution, request: ID 1, trace_replayBlockTransactions(0x8394F,[\r\n  \"trace\"\r\n]) Nethermind.Trie.TrieException: Failed to load key 2f6a0791cc0675d45262859d32ec96703b4f2e26dffb5effa28482f4d196e26a from root hash 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5.\r\n ---> Nethermind.Trie.TrieException: Node 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5 is missing from the DB\r\n   at Nethermind.Trie.Pruning.TrieStore.LoadRlp(Keccak keccak, IKeyValueStore keyValueStore) in /src/Nethermind/Nethermind.Trie/Pruning/TrieStore.cs:line 338\r\n   at Nethermind.Trie.TrieNode.ResolveNode(ITrieNodeResolver tree) in /src/Nethermind/Nethermind.Trie/TrieNode.cs:line 318\r\n   at Nethermind.Trie.PatriciaTree.Run(Span`1 updatePath, Int32 nibblesCount, Byte[] updateValue, Boolean isUpdate, Boolean ignoreMissingDelete, Keccak startRootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 399\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\r\n   --- End of inner exception stack trace ---\r\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\r\n   at Nethermind.State.StateProvider.GetState(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 659\r\n   at Nethermind.State.StateProvider.GetAndAddToCache(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 685\r\n   at Nethermind.State.StateProvider.GetNonce(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 132\r\n   at Nethermind.Consensus.Processing.BlockProcessor.BlockValidationTransactionsExecutor.ProcessTransactions(Block block, ProcessingOptions processingOptions, BlockReceiptsTracer receiptsTracer, IReleaseSpec spec) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.BlockValidationTransactionsExecutor.cs:line 53\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessBlock(Block block, IBlockTracer blockTracer, ProcessingOptions options) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 262\r\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessOne(Block suggestedBlock, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 215\r\n   at Nethermind.Consensus.Processing.BlockProcessor.Process(Keccak newBranchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 114\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.ProcessBranch(ProcessingBranch processingBranch, Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 475\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 299\r\n   at Nethermind.Consensus.Processing.OneTimeChainProcessor.Process(Block block, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/OneTimeProcessor.cs:line 58\r\n   at Nethermind.Consensus.Tracing.Tracer.Trace(Block block, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Tracing/Tracer.cs:line 50\r\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.TraceBlock(Block block, ParityTraceTypes traceTypes, TxTraceFilter txTraceFilter) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 248\r\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.trace_replayBlockTransactions(BlockParameter blockParameter, String[] traceTypes) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 159\r\n2022-07-15 10:00:16.7705|Error when handling ID 1, trace_replayBlockTransactions(0x8394F,[\r\n  \"trace\"\r\n]) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32603,\"message\":\"Internal error\",\"data\":\"Nethermind.Trie.TrieException: Failed to load key 2f6a0791cc0675d45262859d32ec96703b4f2e26dffb5effa28482f4d196e26a from root hash 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5.\\n ---> Nethermind.Trie.TrieException: Node 0x60ce3faf21e597574365d2a31d7ab629dd21e4b6a9dc05b2c1ec3a5e188ea2c5 is missing from the DB\\n   at Nethermind.Trie.Pruning.TrieStore.LoadRlp(Keccak keccak, IKeyValueStore keyValueStore) in /src/Nethermind/Nethermind.Trie/Pruning/TrieStore.cs:line 338\\n   at Nethermind.Trie.TrieNode.ResolveNode(ITrieNodeResolver tree) in /src/Nethermind/Nethermind.Trie/TrieNode.cs:line 318\\n   at Nethermind.Trie.PatriciaTree.Run(Span`1 updatePath, Int32 nibblesCount, Byte[] updateValue, Boolean isUpdate, Boolean ignoreMissingDelete, Keccak startRootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 399\\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\\n   --- End of inner exception stack trace ---\\n   at Nethermind.Trie.PatriciaTree.Get(Span`1 rawKey, Keccak rootHash) in /src/Nethermind/Nethermind.Trie/PatriciaTree.cs:line 328\\n   at Nethermind.State.StateProvider.GetState(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 659\\n   at Nethermind.State.StateProvider.GetAndAddToCache(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 685\\n   at Nethermind.State.StateProvider.GetNonce(Address address) in /src/Nethermind/Nethermind.State/StateProvider.cs:line 132\\n   at Nethermind.Consensus.Processing.BlockProcessor.BlockValidationTransactionsExecutor.ProcessTransactions(Block block, ProcessingOptions processingOptions, BlockReceiptsTracer receiptsTracer, IReleaseSpec spec) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.BlockValidationTransactionsExecutor.cs:line 53\\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessBlock(Block block, IBlockTracer blockTracer, ProcessingOptions options) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 262\\n   at Nethermind.Consensus.Processing.BlockProcessor.ProcessOne(Block suggestedBlock, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 215\\n   at Nethermind.Consensus.Processing.BlockProcessor.Process(Keccak newBranchStateRoot, List`1 suggestedBlocks, ProcessingOptions options, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockProcessor.cs:line 114\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.ProcessBranch(ProcessingBranch processingBranch, Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 475\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/BlockchainProcessor.cs:line 299\\n   at Nethermind.Consensus.Processing.OneTimeChainProcessor.Process(Block block, ProcessingOptions options, IBlockTracer tracer) in /src/Nethermind/Nethermind.Consensus/Processing/OneTimeProcessor.cs:line 58\\n   at Nethermind.Consensus.Tracing.Tracer.Trace(Block block, IBlockTracer blockTracer) in /src/Nethermind/Nethermind.Consensus/Tracing/Tracer.cs:line 50\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.TraceBlock(Block block, ParityTraceTypes traceTypes, TxTraceFilter txTraceFilter) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 248\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.trace_replayBlockTransactions(BlockParameter blockParameter, String[] traceTypes) in /src/Nethermind/Nethermind.JsonRpc/Modules/Trace/TraceRpcModule.cs:line 159\"},\"id\":1}\r\n```\r\n\r\nThose are the relevant environment variables set for nethermind:\r\n\r\n```shell\r\nNETHERMIND_AURACONFIG_ALLOWAURAPRIVATECHAINS=true\r\nNETHERMIND_INITCONFIG_ISMINING=false\r\nNETHERMIND_INITCONFIG_STORERECEIPTS=true\r\nNETHERMIND_INITCONFIG_WEBSOCKETSENABLED=true\r\nNETHERMIND_JSONRPCCONFIG_ENABLED=true\r\nNETHERMIND_JSONRPCCONFIG_ENABLEDMODULES=[Eth,Subscribe,Web3,Net,Parity,Trace]\r\nNETHERMIND_JSONRPCCONFIG_HOST=0.0.0.0\r\nNETHERMIND_JSONRPCCONFIG_PORT=8545\r\nNETHERMIND_JSONRPCCONFIG_WEBSOCKETSPORT=8546\r\nNETHERMIND_SYNCCONFIG_FASTSYNC=false\r\nNETHERMIND_SYNCCONFIG_FASTBLOCKS=false\r\nNETHERMIND_SYNCCONFIG_FASTSYNCCATCHUPHEIGHTDELTA=1000000000\r\nNETHERMIND_SYNCCONFIG_FIXRECEIPTS=true\r\nNETHERMIND_SYNCCONFIG_DOWNLOADBODIESINFASTSYNC=true\r\nNETHERMIND_SYNCCONFIG_DOWNLOADRECEIPTSINFASTSYNC=true\r\n```",
  "closed_by": {
    "login": "nicexe",
    "id": 867535,
    "node_id": "MDQ6VXNlcjg2NzUzNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/867535?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicexe",
    "html_url": "https://github.com/nicexe",
    "followers_url": "https://api.github.com/users/nicexe/followers",
    "following_url": "https://api.github.com/users/nicexe/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicexe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicexe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicexe/subscriptions",
    "organizations_url": "https://api.github.com/users/nicexe/orgs",
    "repos_url": "https://api.github.com/users/nicexe/repos",
    "events_url": "https://api.github.com/users/nicexe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicexe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1185457075",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4282#issuecomment-1185457075",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282",
    "id": 1185457075,
    "node_id": "IC_kwDOBggaLc5GqKOz",
    "user": {
      "login": "nicexe",
      "id": 867535,
      "node_id": "MDQ6VXNlcjg2NzUzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/867535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicexe",
      "html_url": "https://github.com/nicexe",
      "followers_url": "https://api.github.com/users/nicexe/followers",
      "following_url": "https://api.github.com/users/nicexe/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicexe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicexe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicexe/subscriptions",
      "organizations_url": "https://api.github.com/users/nicexe/orgs",
      "repos_url": "https://api.github.com/users/nicexe/repos",
      "events_url": "https://api.github.com/users/nicexe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicexe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-15T11:33:31Z",
    "updated_at": "2022-07-15T11:33:31Z",
    "author_association": "NONE",
    "body": "I tried an older and an earlier block and both worked.\r\n\r\nfor block 0x01\r\n\r\n```shell\r\n$ curl 127.0.0.1:8545 -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"trace_replayBlockTransactions\",\"params\":[\"0x01\",[\"trace\"]],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n```\r\n\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"result\":[{\"output\":\"0x\",\"stateDiff\":null,\"trace\":[{\"action\":{\"callType\":\"call\",\"from\":\"0x38670393cfc0c6d6a25917bbf822fd1478c599c6\",\"gas\":\"0x180b54\",\"input\":\"0x0b61ba855b102925e09a4a880cac6e3797593245496c5f1ee2458c4d1268cf8b31a71fb50000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000009104d1e51251d31b41a6b52349f521f5b9662fd0f0226ed26b4dd189a5bb17f6655f9418202242c115a819e79a727723ef46911914a479241a0f1d8f8e912db4917110b16e22d78b4e50191f55441f63b03a98070234426741fdd67779a67f09d948dd186bbfd4fa9db5f347039bc1f8a04670eb1c7650dd5cb27ccb61779650393c9785fd8b24aa5e40adb5612ccd9b3fb4000000000000000000000000000000\",\"to\":\"0x3000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x39657\",\"output\":\"0x\"},\"subtraces\":1,\"traceAddress\":[],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x3000000000000000000000000000000000000001\",\"gas\":\"0x1797dc\",\"input\":\"0x0b61ba855b102925e09a4a880cac6e3797593245496c5f1ee2458c4d1268cf8b31a71fb50000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000009104d1e51251d31b41a6b52349f521f5b9662fd0f0226ed26b4dd189a5bb17f6655f9418202242c115a819e79a727723ef46911914a479241a0f1d8f8e912db4917110b16e22d78b4e50191f55441f63b03a98070234426741fdd67779a67f09d948dd186bbfd4fa9db5f347039bc1f8a04670eb1c7650dd5cb27ccb61779650393c9785fd8b24aa5e40adb5612ccd9b3fb4000000000000000000000000000000\",\"to\":\"0x3000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x38297\",\"output\":\"0x\"},\"subtraces\":4,\"traceAddress\":[0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x3000000000000000000000000000000000000001\",\"gas\":\"0x171aab\",\"input\":\"0xfacd743b00000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x261c\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":1,\"traceAddress\":[0,0],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x16ab1c\",\"input\":\"0xfacd743b00000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x1280\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":0,\"traceAddress\":[0,0,0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x3000000000000000000000000000000000000001\",\"gas\":\"0x16f237\",\"input\":\"0x2bbb7b7200000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x3f4\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":1,\"traceAddress\":[0,1],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x169497\",\"input\":\"0x2bbb7b7200000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x1ec\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":0,\"traceAddress\":[0,1,0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x3000000000000000000000000000000000000001\",\"gas\":\"0x16eacf\",\"input\":\"0x92d276b4\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x13e3\",\"output\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":1,\"traceAddress\":[0,2],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x168d50\",\"input\":\"0x92d276b4\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x11db\",\"output\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":0,\"traceAddress\":[0,2,0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x3000000000000000000000000000000000000001\",\"gas\":\"0x16c240\",\"input\":\"0x2bbb7b7200000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x3f4\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":1,\"traceAddress\":[0,3],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x166560\",\"input\":\"0x2bbb7b7200000000000000000000000038670393cfc0c6d6a25917bbf822fd1478c599c6\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x1ec\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"},\"subtraces\":0,\"traceAddress\":[0,3,0],\"type\":\"call\"}],\"transactionHash\":\"0x80069e2a7d9fdf07d13423ce763636d47044a128686e67d6e169b073b8b4fb04\",\"vmTrace\":null}],\"id\":1}\r\n```\r\n\r\nfor block 0x95B76\r\n\r\n```shell\r\n$ curl 127.0.0.1:8545 -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"trace_replayBlockTransactions\",\"params\":[\"0x95B76\",[\"trace\"]],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n```\r\n\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"result\":[{\"output\":\"0x\",\"stateDiff\":null,\"trace\":[{\"action\":{\"callType\":\"call\",\"from\":\"0xad78a5ae1cc885bd3292bf492e61398832bf198d\",\"gas\":\"0x5c648\",\"input\":\"0xadc9772e000000000000000000000000ad78a5ae1cc885bd3292bf492e61398832bf198d0000000000000000000000000000000000000000000000000000000000000000\",\"to\":\"0x1100000000000000000000000000000000000001\",\"value\":\"0x1043561a8829300000\"},\"result\":{\"gasUsed\":\"0x1ba35\",\"output\":\"0x\"},\"subtraces\":1,\"traceAddress\":[],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1100000000000000000000000000000000000001\",\"gas\":\"0x59c07\",\"input\":\"0xadc9772e000000000000000000000000ad78a5ae1cc885bd3292bf492e61398832bf198d0000000000000000000000000000000000000000000000000000000000000000\",\"to\":\"0x1100000000000000000000000000000000000000\",\"value\":\"0x1043561a8829300000\"},\"result\":{\"gasUsed\":\"0x1a699\",\"output\":\"0x\"},\"subtraces\":3,\"traceAddress\":[0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x1100000000000000000000000000000000000001\",\"gas\":\"0x57061\",\"input\":\"0xa26301f9000000000000000000000000ad78a5ae1cc885bd3292bf492e61398832bf198d\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x1d9a\",\"output\":\"0x000000000000000000000000000000000000000000000000000000000000000c\"},\"subtraces\":1,\"traceAddress\":[0,0],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x5477b\",\"input\":\"0xa26301f9000000000000000000000000ad78a5ae1cc885bd3292bf492e61398832bf198d\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x9fe\",\"output\":\"0x000000000000000000000000000000000000000000000000000000000000000c\"},\"subtraces\":0,\"traceAddress\":[0,0,0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x1100000000000000000000000000000000000001\",\"gas\":\"0x550e8\",\"input\":\"0x4d04481e000000000000000000000000000000000000000000000000000000000000000c\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0xc26\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":1,\"traceAddress\":[0,1],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x539cd\",\"input\":\"0x4d04481e000000000000000000000000000000000000000000000000000000000000000c\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0xa1e\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":0,\"traceAddress\":[0,1,0],\"type\":\"call\"},{\"action\":{\"callType\":\"staticcall\",\"from\":\"0x1100000000000000000000000000000000000001\",\"gas\":\"0x497a1\",\"input\":\"0xe717de3a000000000000000000000000000000000000000000000000000000000000000c\",\"to\":\"0x1000000000000000000000000000000000000001\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0xbff\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":1,\"traceAddress\":[0,2],\"type\":\"call\"},{\"action\":{\"callType\":\"delegatecall\",\"from\":\"0x1000000000000000000000000000000000000001\",\"gas\":\"0x4836b\",\"input\":\"0xe717de3a000000000000000000000000000000000000000000000000000000000000000c\",\"to\":\"0x1000000000000000000000000000000000000000\",\"value\":\"0x0\"},\"result\":{\"gasUsed\":\"0x9f7\",\"output\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"},\"subtraces\":0,\"traceAddress\":[0,2,0],\"type\":\"call\"}],\"transactionHash\":\"0x8a04009a1cda454a32e059f53f9d4f53dd628b650bd371f93ea1dff81e25774d\",\"vmTrace\":null}],\"id\":1}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1185457075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1186606257",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4282#issuecomment-1186606257",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282",
    "id": 1186606257,
    "node_id": "IC_kwDOBggaLc5Guiyx",
    "user": {
      "login": "MarekM25",
      "id": 9356351,
      "node_id": "MDQ6VXNlcjkzNTYzNTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9356351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarekM25",
      "html_url": "https://github.com/MarekM25",
      "followers_url": "https://api.github.com/users/MarekM25/followers",
      "following_url": "https://api.github.com/users/MarekM25/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarekM25/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarekM25/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarekM25/subscriptions",
      "organizations_url": "https://api.github.com/users/MarekM25/orgs",
      "repos_url": "https://api.github.com/users/MarekM25/repos",
      "events_url": "https://api.github.com/users/MarekM25/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarekM25/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-17T21:00:50Z",
    "updated_at": "2022-07-17T21:00:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "HI @nicexe,\r\n\r\nUnfortunately, you will need to try resync your node if you want these traces.\r\n\r\nCould you try resync your node with --Pruning.Mode None? We changed our default settings for pruning which shouldn't be used for archive node. Of course, we updated all our supported network. However, it is missing custom networks.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1186606257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1186880034",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4282#issuecomment-1186880034",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282",
    "id": 1186880034,
    "node_id": "IC_kwDOBggaLc5Gvloi",
    "user": {
      "login": "nicexe",
      "id": 867535,
      "node_id": "MDQ6VXNlcjg2NzUzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/867535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicexe",
      "html_url": "https://github.com/nicexe",
      "followers_url": "https://api.github.com/users/nicexe/followers",
      "following_url": "https://api.github.com/users/nicexe/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicexe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicexe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicexe/subscriptions",
      "organizations_url": "https://api.github.com/users/nicexe/orgs",
      "repos_url": "https://api.github.com/users/nicexe/repos",
      "events_url": "https://api.github.com/users/nicexe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicexe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T07:51:29Z",
    "updated_at": "2022-07-18T07:51:29Z",
    "author_association": "NONE",
    "body": "Hi @MarekM25 ,\r\nThanks for the response.\r\n\r\nI have set the `NETHERMIND_PRUNINGCONFIG_MODE` to `None`, resynced and the previously failing curl request is now working",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1186880034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1437442131",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4282#issuecomment-1437442131",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4282",
    "id": 1437442131,
    "node_id": "IC_kwDOBggaLc5VraBT",
    "user": {
      "login": "abcfy2",
      "id": 5327677,
      "node_id": "MDQ6VXNlcjUzMjc2Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5327677?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcfy2",
      "html_url": "https://github.com/abcfy2",
      "followers_url": "https://api.github.com/users/abcfy2/followers",
      "following_url": "https://api.github.com/users/abcfy2/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcfy2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcfy2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcfy2/subscriptions",
      "organizations_url": "https://api.github.com/users/abcfy2/orgs",
      "repos_url": "https://api.github.com/users/abcfy2/repos",
      "events_url": "https://api.github.com/users/abcfy2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcfy2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-20T19:08:21Z",
    "updated_at": "2023-02-20T19:08:21Z",
    "author_association": "NONE",
    "body": "Hi there. I got this error, would you please help ?\r\n\r\n```\r\n2023-02-20 18:47:56.6652|ERROR|108|Error during method execution, request: ID 4, trace_replayBlockTransactions(0xFB8354,[\r\n  \"trace\"\r\n]) System.InvalidOperationException: Block without total difficulty calculated was suggested for processing\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.RunSimpleChecksAheadOfProcessing(Block suggestedBlock, ProcessingOptions options)\r\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Processing.OneTimeChainProcessor.Process(Block block, ProcessingOptions options, IBlockTracer tracer)\r\n   at Nethermind.Consensus.Tracing.Tracer.Trace(Block block, IBlockTracer blockTracer)\r\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.TraceBlock(Block block, ParityLikeBlockTracer tracer)\r\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.trace_replayBlockTransactions(BlockParameter blockParameter, String[] traceTypes)\r\n   at InvokeStub_ITraceRpcModule.trace_replayBlockTransactions(Object, Object, IntPtr*)\r\n   at System.Reflection.MethodInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)\r\n2023-02-20 18:47:56.6652|INFO|161|Executing JSON RPC call eth_call with params [{\r\n  \"data\": \"0x70a08231000000000000000000000000f89d7b9c864f589bbf53a82105107622b35eaa40\",\r\n  \"to\": \"0x95ad61b0a150d79219dcf64e1e6cc01f0b64c4ce\"\r\n}, 0xFE5BF0] \r\n2023-02-20 18:47:56.6652|WARN|108|Error when handling ID 4, trace_replayBlockTransactions(0xFB8354,[\r\n  \"trace\"\r\n]) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32603,\"message\":\"Internal error\",\"data\":\"System.InvalidOperationException: Block without total difficulty calculated was suggested for processing\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.RunSimpleChecksAheadOfProcessing(Block suggestedBlock, ProcessingOptions options)\\n   at Nethermind.Consensus.Processing.BlockchainProcessor.Process(Block suggestedBlock, ProcessingOptions options, IBlockTracer tracer)\\n   at Nethermind.Consensus.Processing.OneTimeChainProcessor.Process(Block block, ProcessingOptions options, IBlockTracer tracer)\\n   at Nethermind.Consensus.Tracing.Tracer.Trace(Block block, IBlockTracer blockTracer)\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.TraceBlock(Block block, ParityLikeBlockTracer tracer)\\n   at Nethermind.JsonRpc.Modules.Trace.TraceRpcModule.trace_replayBlockTransactions(BlockParameter blockParameter, String[] traceTypes)\\n   at InvokeStub_ITraceRpcModule.trace_replayBlockTransactions(Object, Object, IntPtr*)\\n   at System.Reflection.MethodInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)\"},\"id\":4} \r\n2023-02-20 18:47:56.6652|INFO|108|Executing JSON RPC call trace_replayBlockTransactions with params [0xFE6378, [\r\n  \"trace\"\r\n]]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1437442131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

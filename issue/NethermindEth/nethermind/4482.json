{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/4482",
  "id": 1351734445,
  "node_id": "I_kwDOBggaLc5QkdSt",
  "number": 4482,
  "title": "Docs issues, \"Manage Nethermind with systemd\"",
  "user": {
    "login": "eliotstock",
    "id": 1144814,
    "node_id": "MDQ6VXNlcjExNDQ4MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1144814?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eliotstock",
    "html_url": "https://github.com/eliotstock",
    "followers_url": "https://api.github.com/users/eliotstock/followers",
    "following_url": "https://api.github.com/users/eliotstock/following{/other_user}",
    "gists_url": "https://api.github.com/users/eliotstock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eliotstock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eliotstock/subscriptions",
    "organizations_url": "https://api.github.com/users/eliotstock/orgs",
    "repos_url": "https://api.github.com/users/eliotstock/repos",
    "events_url": "https://api.github.com/users/eliotstock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eliotstock/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1117819082,
      "node_id": "MDU6TGFiZWwxMTE3ODE5MDgy",
      "url": "https://api.github.com/repos/NethermindEth/nethermind/labels/docs",
      "name": "docs",
      "color": "97bf05",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "FalcoXYZ",
    "id": 1364936,
    "node_id": "MDQ6VXNlcjEzNjQ5MzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1364936?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/FalcoXYZ",
    "html_url": "https://github.com/FalcoXYZ",
    "followers_url": "https://api.github.com/users/FalcoXYZ/followers",
    "following_url": "https://api.github.com/users/FalcoXYZ/following{/other_user}",
    "gists_url": "https://api.github.com/users/FalcoXYZ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/FalcoXYZ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/FalcoXYZ/subscriptions",
    "organizations_url": "https://api.github.com/users/FalcoXYZ/orgs",
    "repos_url": "https://api.github.com/users/FalcoXYZ/repos",
    "events_url": "https://api.github.com/users/FalcoXYZ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/FalcoXYZ/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "FalcoXYZ",
      "id": 1364936,
      "node_id": "MDQ6VXNlcjEzNjQ5MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1364936?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FalcoXYZ",
      "html_url": "https://github.com/FalcoXYZ",
      "followers_url": "https://api.github.com/users/FalcoXYZ/followers",
      "following_url": "https://api.github.com/users/FalcoXYZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/FalcoXYZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FalcoXYZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FalcoXYZ/subscriptions",
      "organizations_url": "https://api.github.com/users/FalcoXYZ/orgs",
      "repos_url": "https://api.github.com/users/FalcoXYZ/repos",
      "events_url": "https://api.github.com/users/FalcoXYZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FalcoXYZ/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "kamilchodola",
      "id": 43241881,
      "node_id": "MDQ6VXNlcjQzMjQxODgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamilchodola",
      "html_url": "https://github.com/kamilchodola",
      "followers_url": "https://api.github.com/users/kamilchodola/followers",
      "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
      "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
      "repos_url": "https://api.github.com/users/kamilchodola/repos",
      "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-08-26T04:36:48Z",
  "updated_at": "2022-09-22T09:52:49Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Working from https://docs.nethermind.io/nethermind/first-steps-with-nethermind/manage-nethermind-with-systemd, at v 1.13.6:\r\n\r\nAt the \"Create a new user\" stage, I happen to have a large SSD for chain data and a smaller one for the OS, as per common hardware recommendations for staking machines. Simply running `sudo useradd -m -s /bin/bash nethermind` will create the user's home dir as `/home/nethermind` which is on the smaller SSD with the OS. I used the `-d` switch to specify the home dir path. I suspect many users will be in the same boat.\r\n\r\nAt the \"Install Dependencies\" stage, I wasn't forced to set a password for user `nethermind`. When I try to `sudo`, I'm prompted for my password regardless. `sudo` can't work.\r\n\r\n(Skipping this step because I've done it before creating the `nethermind` user anyway.)\r\n\r\nAt the \"Get Nethermind\" stage, I don't want to have to be continually checking for updates, downloading and installing them so I went with the Ubuntu PPA instead. Skipping this step.\r\n\r\nAt the \"download the nethermind.service config\" stage, the executable is `/home/nethermind/build/Nethermind.Runner`. But because I'm using the Ubuntu package, this should be `/usr/bin/nethermind`. I made this change to the supplied service file.\r\n\r\nBut I couldn't start the service:\r\n\r\n```\r\n$ sudo systemctl daemon-reload\r\n$ sudo service nethermind start\r\n$ journalctl -u nethermind -f\r\nAug 26 04:21:05 stake nethermind[18883]: sudo: a password is required\r\nAug 26 04:21:05 stake sudo[18883]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nAug 26 04:21:05 stake sudo[18883]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/share/nethermind/Nethermind.Runner --datadir /data/nethermind\r\nAug 26 04:21:05 stake systemd[1]: nethermind.service: Main process exited, code=exited, status=1/FAILURE\r\nAug 26 04:21:05 stake systemd[1]: nethermind.service: Failed with result 'exit-code'.\r\nAug 26 04:21:05 stake systemd[1]: nethermind.service: Scheduled restart job, restart counter is at 5.\r\nAug 26 04:21:05 stake systemd[1]: Stopped Nethermind Node.\r\nAug 26 04:21:05 stake systemd[1]: nethermind.service: Start request repeated too quickly.\r\nAug 26 04:21:05 stake systemd[1]: nethermind.service: Failed with result 'exit-code'.\r\nAug 26 04:21:05 stake systemd[1]: Failed to start Nethermind Node.\r\n```\r\n\r\nUser `nethermind` still has no password and `systemd` seems to expect there to be one. So I set one for the user.\r\n\r\nThen I realised I was in fact trying to start the service as my original user, not `nethermind`. So I su'ed to `nethermind` and tried again:\r\n\r\n```\r\n$ sudo service nethermind start\r\n[sudo] password for nethermind: \r\nSorry, user nethermind is not allowed to execute '/usr/sbin/service nethermind start' as root on stake.\r\n```\r\n\r\nStrange, because I did also add user `nethermind` to `sudoers`.\r\n\r\nGiving up on running a `systemd` service at this point. Would love to get this working though. I want the process running if the machine reboots after a power cut.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1231778736",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1231778736",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1231778736,
    "node_id": "IC_kwDOBggaLc5Ja3Ow",
    "user": {
      "login": "gituser",
      "id": 104405,
      "node_id": "MDQ6VXNlcjEwNDQwNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/104405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gituser",
      "html_url": "https://github.com/gituser",
      "followers_url": "https://api.github.com/users/gituser/followers",
      "following_url": "https://api.github.com/users/gituser/following{/other_user}",
      "gists_url": "https://api.github.com/users/gituser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gituser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gituser/subscriptions",
      "organizations_url": "https://api.github.com/users/gituser/orgs",
      "repos_url": "https://api.github.com/users/gituser/repos",
      "events_url": "https://api.github.com/users/gituser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gituser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T14:51:42Z",
    "updated_at": "2022-08-30T14:51:59Z",
    "author_association": "NONE",
    "body": "@eliotstock \r\nNot sure why you're getting issues there.\r\n\r\nAll you need to do is to create a systemd unit like this in **/etc/systemd/system/nethermind.service** (example is for ropsten network):\r\n```\r\n[Unit]\r\nDescription=Nethermind Node\r\nDocumentation=https://docs.nethermind.io\r\nAfter=network.target\r\n\r\n[Service]\r\nUser=nethermind\r\nGroup=nethermind\r\nEnvironmentFile=/home/nethermind/.env\r\nWorkingDirectory=/home/nethermind\r\nExecStart=/home/nethermind/build/Nethermind.Runner --datadir /home/nethermind/.nethermind --config /home/nethermind/build/configs/ropsten.cfg --JsonRpc.Enabled true --HealthChecks.Enabled true --HealthChecks.UIEnabled true\r\nRestart=on-failure\r\nLimitNOFILE=1000000\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n\r\nAlso make sure to create **/home/nethermind/.env** with the following contents:\r\n```\r\nNETHERMIND_LOG_LEVEL=INFO\r\n#NETHERMIND_JSONRPCCONFIG_ENABLEDMODULES=[Web3,Eth,Subscribe,Trace,Net]\r\nNETHERMIND_METRICSCONFIG_ENABLED=true\r\nNETHERMIND_METRICSCONFIG_NODENAME=Nethermind\r\nNETHERMIND_METRICSCONFIG_PUSHGATEWAYURL=http://localhost:9090/metrics\r\nNETHERMIND_HEALTHCHECKSCONFIG_ENABLED=false\r\nNETHERMIND_PRUNINGCONFIG_CACHEMB=16384\r\nNETHERMIND_ETHSTATSCONFIG_ENABLED=false\r\nNETHERMIND_ETHSTATSCONFIG_SERVER=http://localhost:3000/api\r\n```\r\n\r\nAs for sudoers, in order to run from `nethermind` user you need to have the following in **/etc/sudoers.d/nethermind**:\r\n```\r\nCmnd_Alias RESTART = /bin/systemctl restart nethermind,/bin/systemctl start nethermind,/bin/systemctl stop nethermind\r\nnethermind\tALL=(root)\tNOPASSWD: RESTART\r\n```\r\nMake sure to also:\r\n```\r\nchmod 0440 /etc/sudoers.d/nethermind\r\n```\r\nOtherwise sudo won't work.\r\n\r\nThen, from `nethermind` user it works just fine:\r\n```\r\nsudo systemctl start nethermind\r\nsudo systemctl stop nethermind\r\nsudo systemctl restart nethermind\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1231778736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1235995134",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1235995134",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1235995134,
    "node_id": "IC_kwDOBggaLc5Jq8n-",
    "user": {
      "login": "eliotstock",
      "id": 1144814,
      "node_id": "MDQ6VXNlcjExNDQ4MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1144814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eliotstock",
      "html_url": "https://github.com/eliotstock",
      "followers_url": "https://api.github.com/users/eliotstock/followers",
      "following_url": "https://api.github.com/users/eliotstock/following{/other_user}",
      "gists_url": "https://api.github.com/users/eliotstock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eliotstock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eliotstock/subscriptions",
      "organizations_url": "https://api.github.com/users/eliotstock/orgs",
      "repos_url": "https://api.github.com/users/eliotstock/repos",
      "events_url": "https://api.github.com/users/eliotstock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eliotstock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-03T00:15:11Z",
    "updated_at": "2022-09-03T00:15:11Z",
    "author_association": "NONE",
    "body": "Thanks, @gituser, but I followed this more or less exactly, changing only the paths for my machine, and still wasn't able to start the service:\r\n\r\n```\r\n$ journalctl -u nethermind -f\r\nSep 03 00:08:28 stake nethermind[2010]: sudo: a password is required\r\nSep 03 00:08:28 stake sudo[2010]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nSep 03 00:08:28 stake sudo[2010]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/share/nethermind/Nethermind.Runner --datadir /data/nethermind --config /usr/share/nethermind/configs/ropsten.cfg --JsonRpc.Enabled true --HealthChecks.Enabled true --HealthChecks.UIEnabled true\r\nSep 03 00:08:28 stake systemd[1]: nethermind.service: Main process exited, code=exited, status=1/FAILURE\r\nSep 03 00:08:28 stake systemd[1]: nethermind.service: Failed with result 'exit-code'.\r\nSep 03 00:08:28 stake systemd[1]: nethermind.service: Scheduled restart job, restart counter is at 5.\r\nSep 03 00:08:28 stake systemd[1]: Stopped Nethermind Node.\r\nSep 03 00:08:28 stake systemd[1]: nethermind.service: Start request repeated too quickly.\r\nSep 03 00:08:28 stake systemd[1]: nethermind.service: Failed with result 'exit-code'.\r\nSep 03 00:08:28 stake systemd[1]: Failed to start Nethermind Node.\r\n```\r\n\r\nI wondered if running  that `COMMAND` from the logs in a shall as root would work. It did:\r\n\r\n```\r\n$ sudo -i\r\nroot@stake:~# \r\nroot@stake:~# cd /data/nethermind/\r\nroot@stake:/data/nethermind# /usr/share/nethermind/Nethermind.Runner --datadir /data/nethermind --config /usr/share/nethermind/configs/ropsten.cfg --JsonRpc.Enabled true --HealthChecks.Enabled true --HealthChecks.UIEnabled true\r\n2022-09-03 00-05-02.2891|Nethermind starting initialization.\r\n2022-09-03 00-05-02.3367|Loading embedded plugins\r\n...\r\n```\r\n\r\nSo it runs on the shell as `root` using a direct command line, but not as `nethermind` when using `sudo systemctl start nethermind`. `/etc/sudoers.d/nethermind` is definitely mode `0440`.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1235995134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1236095424",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1236095424",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1236095424,
    "node_id": "IC_kwDOBggaLc5JrVHA",
    "user": {
      "login": "gituser",
      "id": 104405,
      "node_id": "MDQ6VXNlcjEwNDQwNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/104405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gituser",
      "html_url": "https://github.com/gituser",
      "followers_url": "https://api.github.com/users/gituser/followers",
      "following_url": "https://api.github.com/users/gituser/following{/other_user}",
      "gists_url": "https://api.github.com/users/gituser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gituser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gituser/subscriptions",
      "organizations_url": "https://api.github.com/users/gituser/orgs",
      "repos_url": "https://api.github.com/users/gituser/repos",
      "events_url": "https://api.github.com/users/gituser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gituser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-03T10:56:00Z",
    "updated_at": "2022-09-03T10:56:00Z",
    "author_association": "NONE",
    "body": "@eliotstock \r\n\r\ndid you paste into */etc/sudoers.d/nethermind* the content from my post?\r\n\r\ntry deleting and re-adding nethermind user:\r\n```\r\nuserdel nethermind\r\nadduser --disabled-password nethermind\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1236095424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1236226391",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1236226391",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1236226391,
    "node_id": "IC_kwDOBggaLc5Jr1FX",
    "user": {
      "login": "eliotstock",
      "id": 1144814,
      "node_id": "MDQ6VXNlcjExNDQ4MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1144814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eliotstock",
      "html_url": "https://github.com/eliotstock",
      "followers_url": "https://api.github.com/users/eliotstock/followers",
      "following_url": "https://api.github.com/users/eliotstock/following{/other_user}",
      "gists_url": "https://api.github.com/users/eliotstock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eliotstock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eliotstock/subscriptions",
      "organizations_url": "https://api.github.com/users/eliotstock/orgs",
      "repos_url": "https://api.github.com/users/eliotstock/repos",
      "events_url": "https://api.github.com/users/eliotstock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eliotstock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-04T01:03:02Z",
    "updated_at": "2022-09-04T01:03:02Z",
    "author_association": "NONE",
    "body": "@gituser, yes, `/etc/sudoers.d/nethermind` has your change:\r\n\r\n```\r\n$ sudo more /etc/sudoers.d/nethermind \r\nCmnd_Alias RESTART = /bin/systemctl restart nethermind,/bin/systemctl start nethermind,/bin/systemctl sto\r\np nethermind\r\nnethermind\tALL=(root)\tNOPASSWD: RESTART\r\n```\r\n\r\nI tried deleting and re-adding the `nethermind` user and having it have no password. Starting the service as the user fails:\r\n\r\n```\r\n$ sudo systemctl start nethermind\r\n$ journalctl -u nethermind -f\r\nHint: You are currently not seeing messages from other users and the system.\r\n      Users in groups 'adm', 'systemd-journal' can see all messages.\r\n      Pass -q to turn off this notice.\r\nSep 04 00:39:42 stake sudo[3362]: pam_unix(sudo:auth): conversation failed\r\nSep 04 00:39:42 stake nethermind[3362]: sudo: a password is required\r\nSep 04 00:39:42 stake sudo[3362]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nSep 04 00:39:42 stake sudo[3362]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/bin/chown -R nethermind /usr/share/nethermind\r\nSep 04 00:39:42 stake nethermind[3360]: Executing Nethermind Runner\r\nSep 04 00:39:42 stake nethermind[3363]: sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper\r\nSep 04 00:39:42 stake sudo[3363]: pam_unix(sudo:auth): conversation failed\r\nSep 04 00:39:42 stake nethermind[3363]: sudo: a password is required\r\nSep 04 00:39:42 stake sudo[3363]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nSep 04 00:39:42 stake sudo[3363]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/share/nethermind/Nethermind.Runner --datadir /data/nethermind --config /usr/share/nethermind/configs/ropsten.cfg --JsonRpc.Enabled true --HealthChecks.Enabled true --HealthChecks.UIEnabled true\r\n```\r\n\r\nSeeing `sudo: a password is required`, I also tried this *with* the `nethermind` user having a password:\r\n\r\n```\r\nsudo -i\r\n# \r\n# passwd nethermind\r\nNew password: \r\nRetype new password: \r\npasswd: password updated successfully\r\n```\r\n\r\n...end the interactive session as root and become user `nethermind` again...\r\n\r\n```\r\n$ sudo systemctl start nethermind\r\nnethermind@stake:~$ journalctl -u nethermind -f\r\nHint: You are currently not seeing messages from other users and the system.\r\n      Users in groups 'adm', 'systemd-journal' can see all messages.\r\n      Pass -q to turn off this notice.\r\nSep 04 00:45:47 stake sudo[3438]: pam_unix(sudo:auth): conversation failed\r\nSep 04 00:45:47 stake nethermind[3438]: sudo: a password is required\r\nSep 04 00:45:47 stake sudo[3438]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nSep 04 00:45:47 stake sudo[3438]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/bin/chown -R nethermind /usr/share/nethermind\r\nSep 04 00:45:47 stake nethermind[3436]: Executing Nethermind Runner\r\nSep 04 00:45:47 stake nethermind[3439]: sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper\r\nSep 04 00:45:47 stake sudo[3439]: pam_unix(sudo:auth): conversation failed\r\nSep 04 00:45:47 stake nethermind[3439]: sudo: a password is required\r\nSep 04 00:45:47 stake sudo[3439]: pam_unix(sudo:auth): auth could not identify password for [nethermind]\r\nSep 04 00:45:47 stake sudo[3439]: nethermind : command not allowed ; PWD=/data/nethermind ; USER=root ; COMMAND=/usr/share/nethermind/Nethermind.Runner --datadir /data/nethermind --config /usr/share/nethermind/configs/ropsten.cfg --JsonRpc.Enabled true --HealthChecks.Enabled true --HealthChecks.UIEnabled true\r\n```\r\n\r\nSo the problem is the same whether the `nethermind` user has a password or not: `sudo: a password is required`.\r\n\r\nI also then noticed that the path to `systemctl` in your `/etc/sudoers.d/nethermind` is wrong for my host. Mine is at `/usr/bin/systemctl`, not `/bin/systemctl`. So I fixed that and ran `sudo visudo -c` again and tested again. Still no joy.\r\n\r\nOf course there's also the issue that the process is trying to run `/usr/bin/chown -R nethermind /usr/share/nethermind` and this command is not in the `sudoers` file yet. That's also unesseary in my case - it's already owned by `nethermind`.\r\n\r\nCould it be that no-one is really running this using `systemd`, or if they are they're just running it as root for now?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1236226391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1251054032",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1251054032",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1251054032,
    "node_id": "IC_kwDOBggaLc5KkZHQ",
    "user": {
      "login": "rmlcu",
      "id": 102153607,
      "node_id": "U_kgDOBha9hw",
      "avatar_url": "https://avatars.githubusercontent.com/u/102153607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmlcu",
      "html_url": "https://github.com/rmlcu",
      "followers_url": "https://api.github.com/users/rmlcu/followers",
      "following_url": "https://api.github.com/users/rmlcu/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmlcu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmlcu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmlcu/subscriptions",
      "organizations_url": "https://api.github.com/users/rmlcu/orgs",
      "repos_url": "https://api.github.com/users/rmlcu/repos",
      "events_url": "https://api.github.com/users/rmlcu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmlcu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T13:54:39Z",
    "updated_at": "2022-09-19T14:10:11Z",
    "author_association": "NONE",
    "body": "same issues here: client doesn't start using ubuntu PPA guide.\r\n\r\n@gituser \r\neither documentation must be updated to give predictable working result or client bin's behaviour under the hood.",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1251054032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1254793249",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/4482#issuecomment-1254793249",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/4482",
    "id": 1254793249,
    "node_id": "IC_kwDOBggaLc5KyqAh",
    "user": {
      "login": "kamilchodola",
      "id": 43241881,
      "node_id": "MDQ6VXNlcjQzMjQxODgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamilchodola",
      "html_url": "https://github.com/kamilchodola",
      "followers_url": "https://api.github.com/users/kamilchodola/followers",
      "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
      "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
      "repos_url": "https://api.github.com/users/kamilchodola/repos",
      "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T09:52:49Z",
    "updated_at": "2022-09-22T09:52:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Added as a urgent item to our Documentation project - we will rework this entire section and merge it with \"Validator setup -> Eth2\".\nYou can check if this would address Your problems:\nhttps://docs.nethermind.io/nethermind/guides-and-helpers/validator-setup/eth2-validator ",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1254793249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786",
  "repository_url": "https://api.github.com/repos/NethermindEth/nethermind",
  "labels_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786/labels{/name}",
  "comments_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786/comments",
  "events_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786/events",
  "html_url": "https://github.com/NethermindEth/nethermind/issues/3786",
  "id": 1124564219,
  "node_id": "I_kwDOBggaLc5DB3z7",
  "number": 3786,
  "title": "Blocks through newHeads subscription do not contain baseFeePerGas",
  "user": {
    "login": "credfeto",
    "id": 1020430,
    "node_id": "MDQ6VXNlcjEwMjA0MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1020430?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/credfeto",
    "html_url": "https://github.com/credfeto",
    "followers_url": "https://api.github.com/users/credfeto/followers",
    "following_url": "https://api.github.com/users/credfeto/following{/other_user}",
    "gists_url": "https://api.github.com/users/credfeto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/credfeto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/credfeto/subscriptions",
    "organizations_url": "https://api.github.com/users/credfeto/orgs",
    "repos_url": "https://api.github.com/users/credfeto/repos",
    "events_url": "https://api.github.com/users/credfeto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/credfeto/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "dceleda",
    "id": 26231116,
    "node_id": "MDQ6VXNlcjI2MjMxMTE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/26231116?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dceleda",
    "html_url": "https://github.com/dceleda",
    "followers_url": "https://api.github.com/users/dceleda/followers",
    "following_url": "https://api.github.com/users/dceleda/following{/other_user}",
    "gists_url": "https://api.github.com/users/dceleda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dceleda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dceleda/subscriptions",
    "organizations_url": "https://api.github.com/users/dceleda/orgs",
    "repos_url": "https://api.github.com/users/dceleda/repos",
    "events_url": "https://api.github.com/users/dceleda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dceleda/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "dceleda",
      "id": 26231116,
      "node_id": "MDQ6VXNlcjI2MjMxMTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/26231116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dceleda",
      "html_url": "https://github.com/dceleda",
      "followers_url": "https://api.github.com/users/dceleda/followers",
      "following_url": "https://api.github.com/users/dceleda/following{/other_user}",
      "gists_url": "https://api.github.com/users/dceleda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dceleda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dceleda/subscriptions",
      "organizations_url": "https://api.github.com/users/dceleda/orgs",
      "repos_url": "https://api.github.com/users/dceleda/repos",
      "events_url": "https://api.github.com/users/dceleda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dceleda/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "kjazgar",
      "id": 67744705,
      "node_id": "MDQ6VXNlcjY3NzQ0NzA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67744705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjazgar",
      "html_url": "https://github.com/kjazgar",
      "followers_url": "https://api.github.com/users/kjazgar/followers",
      "following_url": "https://api.github.com/users/kjazgar/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjazgar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjazgar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjazgar/subscriptions",
      "organizations_url": "https://api.github.com/users/kjazgar/orgs",
      "repos_url": "https://api.github.com/users/kjazgar/repos",
      "events_url": "https://api.github.com/users/kjazgar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjazgar/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-02-04T19:54:01Z",
  "updated_at": "2022-02-11T10:52:12Z",
  "closed_at": "2022-02-11T10:52:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nBlocks through the new Heads subscription do not contain baseFeePerGas\r\n\r\nWhen part of a subscription:\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"method\":\"eth_subscription\",\"params\":{\"subscription\":\"0x80bee62781ab464297841fc5fcfe9c60\",\"result\":{\"author\":\"0xdb1c683758f493cef2e7089a3640502ab306322a\",\"difficulty\":\"0xfffffffffffffffffffffffffffffffe\",\"extraData\":\"0x4e65746865726d696e64\",\"gasLimit\":\"0x1c9c380\",\"gasUsed\":\"0x9619d\",\"hash\":\"0x101d1cae387e1b13dab4f93427c0fba536d016b50ea544df3f69dcf4f49a1617\",\"logsBloom\":\"0x00040000000000000000000000800000000000004000000000000000400000000000000000000000000000010000008000000000000000080000002000000000000000000000000000000008000000000000000000000000000000000000000000010008220000001000000000000800000000040000000000000010000000000001000000000000000000000000000000000000000001000000000000000000000000000000040000000000000000000000010000000000000000004000000000000002000000000000000000000000000000000000000000000004000020000000000000000000000000000000004000000000001000000000000000000000\",\"miner\":\"0xdb1c683758f493cef2e7089a3640502ab306322a\",\"number\":\"0x138570d\",\"parentHash\":\"0x5868319aa765a91a8b76f20d87a9f782a2861bd6e09994320be2bc0af34dd2a0\",\"receiptsRoot\":\"0xb35003155ee609ec53c615ab1ad4b381a13a32b5d4e2b385a319be6235136c4a\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"signature\":\"0x068d7f66ed31274d9416d956d687060e9a9916522da70ed6397d44a793bb62e713729d169e433b62f9ecfdaf1ac774bd609a8f40e05eab5c5f342304e04e0ba100\",\"size\":\"0x630\",\"stateRoot\":\"0x63f6d0bdf2c54760c6301ee97b35b5626760c076605d1e70cb6d3478a900f5d8\",\"step\":328800695,\"totalDifficulty\":\"0x138570cffffffffffffffffffffffffeb308f3c\",\"timestamp\":\"0x61fd8093\",\"transactions\":[\"0x25b307ff5be4af67d28023ebb708f2feca942d806ffd8075ef9b9e4413e11436\",\"0xb49bc18131fd145b1b6ac99c6d615377b68de7d476c94d2064dc9e6abef55251\",\"0x1f70ee21d2f0cf0618b34f9c3ff53cbb4cdeb705409972a373723dbbbb3dd7cf\",\"0x97028724d79e0e3d3753af2d872b2c4071dd59c162ccf3f4034f37ac0ed2acdb\",\"0xd93fa5c7a72ee6b17c81536efb01ed082a21cdff396b02f493c3e75da8dfa403\"],\"transactionsRoot\":\"0xeff825c9090225a91852a11131e534ed19f8ad7fb7cb72cc7e3fcb50dcf25be4\",\"uncles\":[]}}}\r\n```\r\n\r\nFrom same client, but with an explicit fetch of a block rather than newheads\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"result\":{\"author\":\"0xd653a665ff07d48fe0f239d184f28a54b00ec1ce\",\"difficulty\":\"0xfffffffffffffffffffffffffffffffe\",\"extraData\":\"0x4e65746865726d696e64\",\"gasLimit\":\"0x1c9c380\",\"gasUsed\":\"0x7341d\",\"hash\":\"0xd31e50a437a13b2827584f2550ce153fce7bfb43103bab332ec0bb0803919f8c\",\"logsBloom\":\"0x00040000000000000000000000800000000000004000000000000000000000000000000000000800000000010000000000000000000000000000000000000000000000000000000000000008000000002000000000000000000000000000000000000000020000000000000000000800000000000000000000000010000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000040000000004000000000000002000002000000000000000000000000000000000000000000000020080000000000000000020000000000004000000000000000000000000000001040\",\"miner\":\"0xd653a665ff07d48fe0f239d184f28a54b00ec1ce\",\"number\":\"0x138576e\",\"parentHash\":\"0xbdfa2cbb929a68d72e6c42f8e380242097a9be3b8b9e1a8db5f932a80885d6db\",\"receiptsRoot\":\"0x9fa34ed0fcade6a7b15c50d4fe280c3eae7339411656f4c036917b125134e781\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"signature\":\"0xe13f3c33082535faee5e53caf19b1cf221b2f208afe566418d73f415c285378012ffa11bf913144e147a64dc507aa09f831432cb736f49bd0431ce3c6aa67c3401\",\"size\":\"0x4cb\",\"stateRoot\":\"0x76cd020e2a8fb9f59dd29e9b70d3eecc030088fc3c2bccaca60ce7d759332197\",\"step\":328800792,\"totalDifficulty\":\"0x138576dffffffffffffffffffffffffeb308e7a\",\"timestamp\":\"0x61fd8278\",\"baseFeePerGas\":\"0x7\",\"transactions\":[\"0x0b40ecdf3a7713bce5f08e9e3413b12fd29f09f0122b474cbeb86358bb47d567\",\"0x1148f5beb568c8e95af7dae74e8d30459ae28113ae0b3d1bae2750d48c606d44\",\"0xc9c6d8a433b24455199b6357bfa05bc998aafff81d248414eb51243e4ff6f414\"],\"transactionsRoot\":\"0x5fcf1ca847e2f0d3d7449ebde0291a3a59d3c69594aee9e9ab3876d3332e2a65\",\"uncles\":[]},\"id\":\"FFMR-02:FirstBlock:1\"}]\r\n```\r\n\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n* Using Xdai (may also be on other networks but haven't checked)\r\n1. Subscribe to using websockets to newheads\r\n2. When new block comes in - check for ``baseFeePerGas`` - at this point is is missing\r\n3. Fetch any other block post EIP-1559 on xdai, ``baseFeePerGas`` is present in packet\r\n\r\ninspect the resulting \r\n**Expected behavior**\r\n\r\n``baseFeePerGas`` to be present on all blocks through newHeads subscriptions\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Desktop (please complete the following information):**\r\nVerified on these versions of nethermind:\r\n\r\n\"Nethermind/v1.12.4-0-1c8b669ae-20220204/X64-Linux/6.0.1\"\r\n\"Nethermind/v1.12.3-0-f5f0d940a-20220126/X64-Linux/6.0.1\"\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
  "closed_by": {
    "login": "LukaszRozmej",
    "id": 12445221,
    "node_id": "MDQ6VXNlcjEyNDQ1MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12445221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukaszRozmej",
    "html_url": "https://github.com/LukaszRozmej",
    "followers_url": "https://api.github.com/users/LukaszRozmej/followers",
    "following_url": "https://api.github.com/users/LukaszRozmej/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukaszRozmej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukaszRozmej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukaszRozmej/subscriptions",
    "organizations_url": "https://api.github.com/users/LukaszRozmej/orgs",
    "repos_url": "https://api.github.com/users/LukaszRozmej/repos",
    "events_url": "https://api.github.com/users/LukaszRozmej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukaszRozmej/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1030307093",
    "html_url": "https://github.com/NethermindEth/nethermind/issues/3786#issuecomment-1030307093",
    "issue_url": "https://api.github.com/repos/NethermindEth/nethermind/issues/3786",
    "id": 1030307093,
    "node_id": "IC_kwDOBggaLc49aT0V",
    "user": {
      "login": "tkstanczak",
      "id": 498913,
      "node_id": "MDQ6VXNlcjQ5ODkxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/498913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tkstanczak",
      "html_url": "https://github.com/tkstanczak",
      "followers_url": "https://api.github.com/users/tkstanczak/followers",
      "following_url": "https://api.github.com/users/tkstanczak/following{/other_user}",
      "gists_url": "https://api.github.com/users/tkstanczak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tkstanczak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tkstanczak/subscriptions",
      "organizations_url": "https://api.github.com/users/tkstanczak/orgs",
      "repos_url": "https://api.github.com/users/tkstanczak/repos",
      "events_url": "https://api.github.com/users/tkstanczak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tkstanczak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-04T19:59:55Z",
    "updated_at": "2022-02-04T19:59:55Z",
    "author_association": "MEMBER",
    "body": "@dceleda I think you know more about eth_subscribe, maybe @kjazgar could pick it up with your guidance?",
    "reactions": {
      "url": "https://api.github.com/repos/NethermindEth/nethermind/issues/comments/1030307093/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

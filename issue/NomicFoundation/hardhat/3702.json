{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3702",
  "id": 1593489836,
  "node_id": "I_kwDOB7jojM5e-rms",
  "number": 3702,
  "title": "Cannot compile vyper contract: Bad CPU type in executable",
  "user": {
    "login": "Wootroo",
    "id": 100947820,
    "node_id": "U_kgDOBgRXbA",
    "avatar_url": "https://avatars.githubusercontent.com/u/100947820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Wootroo",
    "html_url": "https://github.com/Wootroo",
    "followers_url": "https://api.github.com/users/Wootroo/followers",
    "following_url": "https://api.github.com/users/Wootroo/following{/other_user}",
    "gists_url": "https://api.github.com/users/Wootroo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Wootroo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Wootroo/subscriptions",
    "organizations_url": "https://api.github.com/users/Wootroo/orgs",
    "repos_url": "https://api.github.com/users/Wootroo/repos",
    "events_url": "https://api.github.com/users/Wootroo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Wootroo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-02-21T13:30:56Z",
  "updated_at": "2023-05-24T00:13:12Z",
  "closed_at": "2023-02-22T12:03:55Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "### Version of Hardhat\r\n\r\n2.12.7\r\n\r\n### What happened?\r\n\r\nRecently moved from my Windows 11 device to my new Apple Macbook pro with a **M2** chip.\r\n\r\nInstalled all dependencies through `npm install` and tried to compile the solidity and vyper files, but received the following error message:\r\n\r\n\r\n```\r\nCompiled 54 Solidity files successfully\r\nDownloading compiler 0.3.1\r\nAn unexpected error occurred:\r\nError: Command failed: /Users/user/Library/Caches/hardhat-nodejs/compilers-v2/vyper/darwin/0.3.1 -f combined_json /Users/user/vyperContract.vy\r\n/bin/sh: /Users/user/Library/Caches/hardhat-nodejs/compilers-v2/vyper/darwin/0.3.1: Bad CPU type in executable\r\n\r\n    at ChildProcess.exithandler (node:child_process:419:12)\r\n    at ChildProcess.emit (node:events:513:28)\r\n    at maybeClose (node:internal/child_process:1091:16)\r\n    at Socket.<anonymous> (node:internal/child_process:449:11)\r\n    at Socket.emit (node:events:513:28)\r\n    at Pipe.<anonymous> (node:net:322:12) {\r\n  code: 126,\r\n  killed: false,\r\n  signal: null,\r\n  cmd: '/Users/user/Library/Caches/hardhat-nodejs/compilers-v2/vyper/darwin/0.3.1 -f combined_json /Users/user/vyperContract.vy'\r\n}\r\n```\r\n\r\nThe solidity files are successfully compiled but the vyper contract cannot be compiled. Any suggestions?\r\nI guess this has something to do with the new macbook M2 chip?\r\n\r\nExtra info:\r\n\r\n- Vyper plugin: @nomiclabs/hardhat-vyper: 3.0.2\r\n- Target vyper version: 0.3.1\r\n- Device specs : Macbook pro with macOS Ventura\r\n\r\n### Minimal reproduction steps\r\n\r\nSimply create a new hardhat project, add the hardhat vyper plugin and try to compile a vyper file on a Mac with a M2 chip.\r\n\r\n### Search terms\r\n\r\nBad CPU type, Cannot compile vyper contract",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439749024",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3702#issuecomment-1439749024",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702",
    "id": 1439749024,
    "node_id": "IC_kwDOB7jojM5V0NOg",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-22T10:10:37Z",
    "updated_at": "2023-02-22T10:10:37Z",
    "author_association": "MEMBER",
    "body": "@alcuadrado can you confirm this?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439749024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439800126",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3702#issuecomment-1439800126",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702",
    "id": 1439800126,
    "node_id": "IC_kwDOB7jojM5V0Zs-",
    "user": {
      "login": "Wootroo",
      "id": 100947820,
      "node_id": "U_kgDOBgRXbA",
      "avatar_url": "https://avatars.githubusercontent.com/u/100947820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Wootroo",
      "html_url": "https://github.com/Wootroo",
      "followers_url": "https://api.github.com/users/Wootroo/followers",
      "following_url": "https://api.github.com/users/Wootroo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Wootroo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Wootroo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Wootroo/subscriptions",
      "organizations_url": "https://api.github.com/users/Wootroo/orgs",
      "repos_url": "https://api.github.com/users/Wootroo/repos",
      "events_url": "https://api.github.com/users/Wootroo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Wootroo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-22T10:44:01Z",
    "updated_at": "2023-02-22T10:44:01Z",
    "author_association": "NONE",
    "body": "Solved this problem by installing the `Rosetta` sofware through command line:\r\n`softwareupdate --install-rosetta`\r\n\r\nSeems like the Vyper compiler can only run default on macbooks with an `Intel` processor...",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439800126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439908896",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3702#issuecomment-1439908896",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3702",
    "id": 1439908896,
    "node_id": "IC_kwDOB7jojM5V00Qg",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-22T12:03:55Z",
    "updated_at": "2023-02-22T12:03:55Z",
    "author_association": "MEMBER",
    "body": "Oh nice, thanks for letting us know!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1439908896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

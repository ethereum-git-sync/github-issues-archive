{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2619",
  "id": 1207359362,
  "node_id": "I_kwDOB7jojM5H9teC",
  "number": 2619,
  "title": "Hardhat-etherscan verifying unrelated contracts",
  "user": {
    "login": "RayXpub",
    "id": 80392855,
    "node_id": "MDQ6VXNlcjgwMzkyODU1",
    "avatar_url": "https://avatars.githubusercontent.com/u/80392855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RayXpub",
    "html_url": "https://github.com/RayXpub",
    "followers_url": "https://api.github.com/users/RayXpub/followers",
    "following_url": "https://api.github.com/users/RayXpub/following{/other_user}",
    "gists_url": "https://api.github.com/users/RayXpub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RayXpub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RayXpub/subscriptions",
    "organizations_url": "https://api.github.com/users/RayXpub/orgs",
    "repos_url": "https://api.github.com/users/RayXpub/repos",
    "events_url": "https://api.github.com/users/RayXpub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RayXpub/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-04-18T19:15:43Z",
  "updated_at": "2022-11-18T09:53:40Z",
  "closed_at": "2022-05-14T02:32:47Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Hi,\r\n\r\nI am running into an issue with hardhat-etherscan when verifying contracts programatically. For some of my contracts after the verification is done successfully etherscan shows completely unrelated contracts on top of the actual contract, sometimes even all my repo's contracts, even mock contracts only used for testing (sometimes ending up with 100+ contracts attached). So it seems that in some cases (I do not know what triggers it) hardhat-etherscan will attach all artifacts contract to the verification.\r\n\r\nSurfing the web to find a solution I saw that a lot of docs like the one from [Binance](https://docs.binance.org/smart-chain/developer/deploy/hardhat-verify.html) mention this warning : \"Remove any unnecessary contracts and clear the artifacts otherwise these will also be part of the verified contract.\" , which I have not seen in the hardhat official documentation.\r\n\r\nThe only way I see to achieve this programatically is to remove the compile task from the plugin and run it in a separate script followed by some kind of artifact clean up task removing all unrelated contracts from the folder before actually calling `verify:verify`. The problem with this approach is that it would mean retrieving each contract dependencies (contracts + libs) which would mean rewriting a lot of the plugin logic. Plus when trying to verify a batch of contracts, it would also mean doing a clean up after each verification.\r\n\r\nI am not sure I have a good understanding of the issue nor of the potential approach to solve it. Really hope I can get some clarification and hopefully a solution.\r\n\r\ncompiler version : 0.6.12\r\nhardhat-etherscan version : 3.0.3\r\n",
  "closed_by": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1101678880",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2619#issuecomment-1101678880",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619",
    "id": 1101678880,
    "node_id": "IC_kwDOB7jojM5Bqkkg",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-04-18T19:16:05Z",
    "updated_at": "2022-04-18T19:16:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-561/hardhat-etherscan-verifying-unrelated-contracts).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: c9a5ce58-271b-486f-a995-b5e7fa2244cb",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1101678880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126616778",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2619#issuecomment-1126616778",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2619",
    "id": 1126616778,
    "node_id": "IC_kwDOB7jojM5DJs7K",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-14T02:32:47Z",
    "updated_at": "2022-05-14T02:32:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for using Hardhat. GitHub Issues are intended to be used only for known or suspected problems with Hardhat, or for feature requests.  For questions or other help, please use either [our Discord server](https://hardhat.org/discord) or [the GitHub Discussions feature](https://github.com/nomiclabs/hardhat/discussions/) instead.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126616778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

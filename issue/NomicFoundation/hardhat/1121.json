{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121",
  "id": 772278592,
  "node_id": "MDU6SXNzdWU3NzIyNzg1OTI=",
  "number": 1121,
  "title": "How to add solidity output (as defined in the solidity.settings.outputSelection) to artifacts.",
  "user": {
    "login": "dvush",
    "id": 21145096,
    "node_id": "MDQ6VXNlcjIxMTQ1MDk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/21145096?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dvush",
    "html_url": "https://github.com/dvush",
    "followers_url": "https://api.github.com/users/dvush/followers",
    "following_url": "https://api.github.com/users/dvush/following{/other_user}",
    "gists_url": "https://api.github.com/users/dvush/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dvush/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dvush/subscriptions",
    "organizations_url": "https://api.github.com/users/dvush/orgs",
    "repos_url": "https://api.github.com/users/dvush/repos",
    "events_url": "https://api.github.com/users/dvush/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dvush/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-12-21T16:08:38Z",
  "updated_at": "2023-03-31T00:14:36Z",
  "closed_at": "2022-12-30T09:51:20Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "It is possible to configure output selection using settings field of the solidity config to get some additional output from compiler and this fields will appear in some of the .json files in the `artifacts/build-info` but not in the convenient arifact file that is generated for each contract separately. \r\n\r\nAFAIK form of artifact output for solidity is hard-coded and not configurable.\r\n\r\nIs it possible to change it?",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749505246",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121#issuecomment-749505246",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
    "id": 749505246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTUwNTI0Ng==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-22T11:58:09Z",
    "updated_at": "2020-12-22T11:58:09Z",
    "author_association": "MEMBER",
    "body": "Does the `settings` property not work for you?\r\n\r\n```\r\nsolidity: {\r\n  version: \"0.7.0\",\r\n  settings: {\r\n    // whatever solc settings you want\r\n  }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749505246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749648477",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121#issuecomment-749648477",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
    "id": 749648477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTY0ODQ3Nw==",
    "user": {
      "login": "dvush",
      "id": 21145096,
      "node_id": "MDQ6VXNlcjIxMTQ1MDk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/21145096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dvush",
      "html_url": "https://github.com/dvush",
      "followers_url": "https://api.github.com/users/dvush/followers",
      "following_url": "https://api.github.com/users/dvush/following{/other_user}",
      "gists_url": "https://api.github.com/users/dvush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dvush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dvush/subscriptions",
      "organizations_url": "https://api.github.com/users/dvush/orgs",
      "repos_url": "https://api.github.com/users/dvush/repos",
      "events_url": "https://api.github.com/users/dvush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dvush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-22T16:44:53Z",
    "updated_at": "2020-12-22T16:44:53Z",
    "author_association": "NONE",
    "body": "It works, but it does not add this output to the compile artifact file of the contract. \r\n\r\nExample: \r\nI add additional output (\"storageLayout\") for one of the contracts using settings.\r\n\r\nIt works and I can find this additional output hidden somewhere in the file that is named like this: `artifacts/build-info/2cf939d2-01e9-4fd7-ade9-7ffd16be72ee.json`. So to get this additional ouput in code I have to go to `artifacts/build-info` dir and search for information that I need in this files and it can be hard because there are multiple files like this and they have random names. \r\n\r\nInstead It would be convenient to see this output in the file `artifacts/File.sol/Contract.json` where some predefined set of compiler outputs is copied (ABI, bytecode, etc.)\r\n\r\nHere is a function where built contract artifact is built https://github.com/nomiclabs/hardhat/blob/master/packages/hardhat-core/src/internal/artifacts.ts#L467 and it ignores all the outputs except some.\r\n\r\nWhat would you recommend to do to conveniently work with it?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749648477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749691503",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121#issuecomment-749691503",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
    "id": 749691503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTY5MTUwMw==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-22T18:00:17Z",
    "updated_at": "2020-12-22T18:00:17Z",
    "author_association": "MEMBER",
    "body": "Oh, I see. It depends a lot on what you are trying to accomplish, but you can start with this:\r\n\r\n```\r\nconst buildInfo = await hre.artifacts.getBuildInfo(\"contracts/Foo.sol:Foo\")\r\nconst output = buildInfo.output.contracts[\"contracts/Foo.sol\"][\"Foo\"]\r\n```\r\n\r\nand that will give you the raw output for that contract. The argument in the first call is the _fully qualified name_ of the contract, which is a string of the form `${sourceName}:${contractName}`, where source name is just the path from the root of your project to the solidity file where the contract is defined (always with forward slashes, even on windows) and the contract name is... well, the contract name.\r\n\r\nThe second line also uses the source name and the contract name to get the output, but they are different property accesses.\r\n\r\nI realize this is not very ergonomic, but I'm not sure what would be the best way to improve this for your use case. Maybe an easier way to get the output from the contract name? Or having some way to extend the data in the generated artifact based on the build output?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749691503/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749982938",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121#issuecomment-749982938",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
    "id": 749982938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTk4MjkzOA==",
    "user": {
      "login": "dvush",
      "id": 21145096,
      "node_id": "MDQ6VXNlcjIxMTQ1MDk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/21145096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dvush",
      "html_url": "https://github.com/dvush",
      "followers_url": "https://api.github.com/users/dvush/followers",
      "following_url": "https://api.github.com/users/dvush/following{/other_user}",
      "gists_url": "https://api.github.com/users/dvush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dvush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dvush/subscriptions",
      "organizations_url": "https://api.github.com/users/dvush/orgs",
      "repos_url": "https://api.github.com/users/dvush/repos",
      "events_url": "https://api.github.com/users/dvush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dvush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-23T07:20:45Z",
    "updated_at": "2020-12-23T07:20:45Z",
    "author_association": "NONE",
    "body": "Thanks! \r\n\r\nThis looks great, I did not know about `.getBuildInfo`.\r\n\r\nAbout possible ways to make it easier: I think both ways are good. \r\n\r\nNow I understand that I preferred second way because I thought about build-info files as some kind of cache that should not be used because of unpredictable file name and \"messy\" structure but if there is a  \"getBuildInfo' for contract it is as good as it can be. Although it would be more convenient if it would be possible to have functions like `getSolidityBuildInfo` or  `getSolidityOutput`  given just contract name (similar to `hre.ethers.getContractFactory`) or name with path.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/749982938/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367826237",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1121#issuecomment-1367826237",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1121",
    "id": 1367826237,
    "node_id": "IC_kwDOB7jojM5Rh189",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-30T09:51:20Z",
    "updated_at": "2022-12-30T09:51:20Z",
    "author_association": "MEMBER",
    "body": "Closing this in favor of https://github.com/NomicFoundation/hardhat/issues/3319.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367826237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

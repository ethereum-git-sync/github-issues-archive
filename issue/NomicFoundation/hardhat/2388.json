{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2388",
  "id": 1139141642,
  "node_id": "I_kwDOB7jojM5D5ewK",
  "number": 2388,
  "title": "UUPS Contract Proxy Upgrade Failing",
  "user": {
    "login": "lakshay35",
    "id": 10873132,
    "node_id": "MDQ6VXNlcjEwODczMTMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/10873132?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lakshay35",
    "html_url": "https://github.com/lakshay35",
    "followers_url": "https://api.github.com/users/lakshay35/followers",
    "following_url": "https://api.github.com/users/lakshay35/following{/other_user}",
    "gists_url": "https://api.github.com/users/lakshay35/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lakshay35/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lakshay35/subscriptions",
    "organizations_url": "https://api.github.com/users/lakshay35/orgs",
    "repos_url": "https://api.github.com/users/lakshay35/repos",
    "events_url": "https://api.github.com/users/lakshay35/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lakshay35/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "kanej",
    "id": 24030,
    "node_id": "MDQ6VXNlcjI0MDMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kanej",
    "html_url": "https://github.com/kanej",
    "followers_url": "https://api.github.com/users/kanej/followers",
    "following_url": "https://api.github.com/users/kanej/following{/other_user}",
    "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
    "organizations_url": "https://api.github.com/users/kanej/orgs",
    "repos_url": "https://api.github.com/users/kanej/repos",
    "events_url": "https://api.github.com/users/kanej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kanej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "kanej",
      "id": 24030,
      "node_id": "MDQ6VXNlcjI0MDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanej",
      "html_url": "https://github.com/kanej",
      "followers_url": "https://api.github.com/users/kanej/followers",
      "following_url": "https://api.github.com/users/kanej/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
      "organizations_url": "https://api.github.com/users/kanej/orgs",
      "repos_url": "https://api.github.com/users/kanej/repos",
      "events_url": "https://api.github.com/users/kanej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-02-15T19:43:07Z",
  "updated_at": "2022-11-18T09:53:45Z",
  "closed_at": "2022-05-13T14:40:26Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "I am trying to create a sample upgradable proxy contract deployment and have the following.\r\n\r\n`Math.sol`\r\n```solidity\r\n//SPDX-License-Identifier: Unlicense\r\npragma solidity ^0.8.0;\r\n\r\nimport \"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\";\r\nimport \"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\";\r\nimport \"@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol\";\r\n\r\ncontract Math is Initializable, UUPSUpgradeable, OwnableUpgradeable {\r\n\r\n  function initialize() public initializer {\r\n    __Ownable_init();\r\n    __UUPSUpgradeable_init();\r\n  }\r\n\r\n  function doSum(uint a, uint b) public pure returns (uint sum) {\r\n    return a + b;\r\n  }\r\n\r\n  function _authorizeUpgrade(address) internal override onlyOwner {}\r\n}\r\n```\r\n\r\n`hardhat.config.js`\r\n```javascript\r\nrequire('dotenv').config();\r\nrequire(\"@nomiclabs/hardhat-waffle\");\r\nrequire('@openzeppelin/hardhat-upgrades');\r\nrequire(\"@nomiclabs/hardhat-etherscan\");\r\n\r\nconst { ROPSTEN_API_URL, PRIVATE_KEY, ETHERSCAN_API_KEY } = process.env;\r\n// This is a sample Hardhat task. To learn how to create your own go to\r\n// https://hardhat.org/guides/create-task.html\r\ntask(\"accounts\", \"Prints the list of accounts\", async (taskArgs, hre) => {\r\n  const accounts = await hre.ethers.getSigners();\r\n\r\n  for (const account of accounts) {\r\n    console.log(account.address);\r\n  }\r\n});\r\n\r\n// You need to export an object to set up your config\r\n// Go to https://hardhat.org/config/ to learn more\r\n\r\n/**\r\n * @type import('hardhat/config').HardhatUserConfig\r\n */\r\nmodule.exports = {\r\n  solidity: \"0.8.4\",\r\n  defaultNetwork: \"hardhat\",\r\n  networks: {\r\n    hardhat: {},\r\n    ropsten: {\r\n      url: ROPSTEN_API_URL,\r\n      accounts: [`0x${PRIVATE_KEY}`],\r\n    },\r\n  },\r\n  etherscan: {\r\n    // Your API key for Etherscan\r\n    // Obtain one at https://etherscan.io/\r\n    apiKey: ETHERSCAN_API_KEY\r\n  }\r\n};\r\n\r\n```\r\nI run `npx hardhat compile`, which compiles everything fine as can be seen below\r\n\r\n```\r\n$ npx hardhat compile\r\nCompiling 1 file with 0.8.4\r\nSolidity compilation finished successfully\r\nâœ¨  Done in 1.89s.\r\n```\r\n\r\n`deploy.js`\r\n```javascript\r\n// We require the Hardhat Runtime Environment explicitly here. This is optional\r\n// but useful for running the script in a standalone fashion through `node <script>`.\r\n//\r\n// When running the script with `npx hardhat run <script>` you'll find the Hardhat\r\n// Runtime Environment's members available in the global scope.\r\nconst hre = require(\"hardhat\");\r\nconst { ethers, upgrades } = hre;\r\n\r\nasync function main() {\r\n  // Hardhat always runs the compile task when running scripts with its command\r\n  // line interface.\r\n  //\r\n  // If this script is run directly using `node` you may want to call compile\r\n  // manually to make sure everything is compiled\r\n  // await hre.run('compile');\r\n\r\n  // We get the contract to deploy\r\n  const Math = await hre.ethers.getContractFactory(\"Math\");\r\n  const instance = await upgrades.deployProxy(Math, { kind: 'uups' });\r\n\r\n\r\n  \r\n  await instance.deployed();\r\n  console.log(\"Math Proxy deployed to:\", instance.address);\r\n}\r\n\r\n// We recommend this pattern to be able to use async/await everywhere\r\n// and properly handle errors.\r\nmain()\r\n  .then(() => process.exit(0))\r\n  .catch((error) => {\r\n    console.error(error);\r\n    process.exit(1);\r\n  });\r\n\r\n```\r\n\r\nWhen running the deploy script, my contract deploys completely fine but when I replace the deployproxy code to use the following\r\n\r\n```javascript\r\n  const instance = await upgrades.upgradeProxy('0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512', Math, { kind: 'uups' })\r\n  console.log(\"Math Contract Upgraded\");\r\n```\r\n\r\nI get the following error\r\n```\r\nContract at 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 doesn't look like an administered ERC 1967 proxy\r\n```\r\n\r\nI'm not sure what is going on. Please let me know if I am doing something wrong or need to contact folks over at hardhat\r\n\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1119689765",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2388#issuecomment-1119689765",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388",
    "id": 1119689765,
    "node_id": "IC_kwDOB7jojM5CvRwl",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-06T14:33:18Z",
    "updated_at": "2022-05-06T14:33:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1119689765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126132641",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2388#issuecomment-1126132641",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2388",
    "id": 1126132641,
    "node_id": "IC_kwDOB7jojM5DH2uh",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-13T14:40:25Z",
    "updated_at": "2022-05-13T14:40:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126132641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3335",
  "id": 1441148709,
  "node_id": "I_kwDOB7jojM5V5i8l",
  "number": 3335,
  "title": "I have to install both `ethereum-waffle` and `@nomicfoundation/hardhat-chai-matchers`",
  "user": {
    "login": "islishude",
    "id": 24730006,
    "node_id": "MDQ6VXNlcjI0NzMwMDA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/24730006?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/islishude",
    "html_url": "https://github.com/islishude",
    "followers_url": "https://api.github.com/users/islishude/followers",
    "following_url": "https://api.github.com/users/islishude/following{/other_user}",
    "gists_url": "https://api.github.com/users/islishude/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/islishude/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/islishude/subscriptions",
    "organizations_url": "https://api.github.com/users/islishude/orgs",
    "repos_url": "https://api.github.com/users/islishude/repos",
    "events_url": "https://api.github.com/users/islishude/events{/privacy}",
    "received_events_url": "https://api.github.com/users/islishude/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-11-09T00:47:24Z",
  "updated_at": "2023-02-10T00:15:09Z",
  "closed_at": "2022-11-11T14:53:30Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "I'm using yarn v3 and nodejs 18.\r\n\r\nethereum-waffle is an peer package in @nomicfoundation/hardhat-chai-matchers package.\r\n\r\nIf I uninstall ethereum-waffle, i will get a module not found error.\r\n\r\n```\r\nAn unexpected error occurred:\r\n\r\nRequire stack:\r\n- /app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/dist/src/deploy.js\r\n- /app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/dist/src/index.js\r\n- /app/uniswapv2-solc0.8/hardhat.config.ts\r\n- /app/uniswapv2-solc0.8/node_modules/hardhat/internal/core/config/config-loading.js\r\n- /app/uniswapv2-solc0.8/node_modules/hardhat/internal/cli/cli.js\r\n    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:995:15)\r\n    at Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (/app/uniswapv2-solc0.8/node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)\r\n    at Function.resolve (node:internal/modules/cjs/helpers:109:19)\r\n    at getDeployMockContract (/app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/src/deploy.ts:7:30)\r\n    at /app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/src/index.ts:25:48\r\n    at getRealTarget (/app/uniswapv2-solc0.8/node_modules/hardhat/src/internal/util/lazy.ts:112:22)\r\n    at Object.get (/app/uniswapv2-solc0.8/node_modules/hardhat/src/internal/util/lazy.ts:185:26)\r\n    at Suite.<anonymous> (/app/uniswapv2-solc0.8/src/test/UniswapV2ERC20.spec.ts:11:30)\r\n    at Object.create (/app/uniswapv2-solc0.8/node_modules/hardhat/node_modules/mocha/lib/interfaces/common.js:148:19)\r\n    at context.describe.context.context (/app/uniswapv2-solc0.8/node_modules/hardhat/node_modules/mocha/lib/interfaces/bdd.js:42:27) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [\r\n    '/app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/dist/src/deploy.js',\r\n    '/app/uniswapv2-solc0.8/node_modules/@nomiclabs/hardhat-waffle/dist/src/index.js',\r\n    '/app/uniswapv2-solc0.8/hardhat.config.ts',\r\n    '/app/uniswapv2-solc0.8/node_modules/hardhat/internal/core/config/config-loading.js',\r\n    '/app/uniswapv2-solc0.8/node_modules/hardhat/internal/cli/cli.js'\r\n  ]\r\n}\r\n```",
  "closed_by": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1308039772",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3335#issuecomment-1308039772",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335",
    "id": 1308039772,
    "node_id": "IC_kwDOB7jojM5N9xpc",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-09T00:47:50Z",
    "updated_at": "2022-11-09T00:47:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1322/i-have-to-install-both-ethereum-waffle-and-nomicfoundationhardhat-chai).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 6a89c136-e580-4997-ae18-aff70d05da74",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1308039772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1309474079",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3335#issuecomment-1309474079",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335",
    "id": 1309474079,
    "node_id": "IC_kwDOB7jojM5ODP0f",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T22:32:19Z",
    "updated_at": "2022-11-09T22:32:19Z",
    "author_association": "MEMBER",
    "body": "Hey, I think you are confusing our plugins or loading both `@nomicfoundation/hardhat-chai-matchers` and `@nomiclabs/hardhat-waffle`.\r\n\r\nCan you post your config?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1309474079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1309546255",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3335#issuecomment-1309546255",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335",
    "id": 1309546255,
    "node_id": "IC_kwDOB7jojM5ODhcP",
    "user": {
      "login": "islishude",
      "id": 24730006,
      "node_id": "MDQ6VXNlcjI0NzMwMDA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/24730006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/islishude",
      "html_url": "https://github.com/islishude",
      "followers_url": "https://api.github.com/users/islishude/followers",
      "following_url": "https://api.github.com/users/islishude/following{/other_user}",
      "gists_url": "https://api.github.com/users/islishude/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/islishude/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/islishude/subscriptions",
      "organizations_url": "https://api.github.com/users/islishude/orgs",
      "repos_url": "https://api.github.com/users/islishude/repos",
      "events_url": "https://api.github.com/users/islishude/events{/privacy}",
      "received_events_url": "https://api.github.com/users/islishude/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T23:40:54Z",
    "updated_at": "2022-11-09T23:40:54Z",
    "author_association": "NONE",
    "body": "I'm using yarn v3, it works for npm, because npm installs peer packages.\r\n\r\nMy hardhat.config.ts\r\n\r\n```\r\nimport { HardhatUserConfig } from \"hardhat/config\";\r\n\r\nimport \"@nomicfoundation/hardhat-toolbox\";\r\n\r\n// if I remove this, I will get an error: TypeError: Cannot read properties of undefined (reading 'createFixtureLoader')\r\nimport \"@nomiclabs/hardhat-waffle\";\r\n```\r\n\r\nyarn doesn't install peer packages, and `@nomicfoundation/hardhat-chai-matchers` has a peer package `ethereum-waffle`, so I have to install the peer package manually.\r\n\r\nIf i install `ethereum-waffle`, I will get a warning.\r\n\r\n```\r\nYou have both ethereum-waffle and @nomicfoundation/hardhat-chai-matchers installed. They don't work correctly together, so please make sure you only use one.\r\n\r\nWe recommend you migrate to @nomicfoundation/hardhat-chai-matchers. Learn how to do it here: https://hardhat.org/migrate-from-waffle\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1309546255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1311787185",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3335#issuecomment-1311787185",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3335",
    "id": 1311787185,
    "node_id": "IC_kwDOB7jojM5OMEix",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T14:53:30Z",
    "updated_at": "2022-11-11T14:53:30Z",
    "author_association": "MEMBER",
    "body": "I see! You should migrate to our fixture loader instead. Take a look at this: https://hardhat.org/hardhat-network-helpers/docs/reference#fixtures\r\n\r\nAlso, we are working with waffle on making it more compatible with our chai matchers.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1311787185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147",
  "id": 777558057,
  "node_id": "MDU6SXNzdWU3Nzc1NTgwNTc=",
  "number": 1147,
  "title": "Hardhat and Truffle with same compiler options compile different bytecode",
  "user": {
    "login": "Aleione",
    "id": 51761861,
    "node_id": "MDQ6VXNlcjUxNzYxODYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Aleione",
    "html_url": "https://github.com/Aleione",
    "followers_url": "https://api.github.com/users/Aleione/followers",
    "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
    "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
    "organizations_url": "https://api.github.com/users/Aleione/orgs",
    "repos_url": "https://api.github.com/users/Aleione/repos",
    "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Aleione/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2021-01-03T02:07:17Z",
  "updated_at": "2023-03-31T00:14:39Z",
  "closed_at": "2022-12-30T09:32:53Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "### Issue\r\nIn the same repository i have set config file for truffle and hardhat. Compiler options (version, evm version, optimizer and runs) are the same. If i compare bytecode between truffle build folder and hardhat artifacts folder, for the same solidity contract, they are different. In this way we can not verify some contract with hardhat/etherscan since it can not detect the code deployed using truffle migration (since hardhat does not support migration). Other problem can be for developers that will use CREATE2 opcode in their solidity code.\r\n\r\n### Steps to Reproduce\r\nYou can reproduce it in this way:\r\nclone code at this link: https://gitlab.com/jarvis-network/apps/exchange/mono-repo\r\nmove in branch: feature/uma-integration-part-2\r\nyarn install\r\ncd libs/contracts\r\nyarn truffle compile\r\nyarn hardhat compile\r\n\r\n### Expected Behavior\r\nSame bytecode in artifacts folder (Truffle and Hardhat) for all contracts\r\n \r\n### Actual Results\r\nThere are differences in bytecode in some contracts (Ex. TICHelper, TICFactory, PerpetualLiquidatblePoolParty, PerpetualPoolPartyLib, PoolFactory, PoolLib)\r\n\r\n### Environment\r\nOperating System: Ubuntu 18.04.5 LTS\r\nTruffle version (truffle version): 5.1.49\r\nnode version (node --version): 14.9.0\r\nyarn version (yarn --version): 1.22.4",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754110660",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-754110660",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 754110660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDExMDY2MA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-04T17:33:23Z",
    "updated_at": "2021-01-04T17:33:23Z",
    "author_association": "MEMBER",
    "body": "Hey @Aleione, \r\n\r\nTruffle and Hardhat use different artifacts structures. Hardhat's artifacts are mostly compatible with Truffle, but there's no strong guarantee of full compatibility. How are you comparing them?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754110660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754744488",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-754744488",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 754744488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDc0NDQ4OA==",
    "user": {
      "login": "Aleione",
      "id": 51761861,
      "node_id": "MDQ6VXNlcjUxNzYxODYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aleione",
      "html_url": "https://github.com/Aleione",
      "followers_url": "https://api.github.com/users/Aleione/followers",
      "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
      "organizations_url": "https://api.github.com/users/Aleione/orgs",
      "repos_url": "https://api.github.com/users/Aleione/repos",
      "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aleione/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-05T16:27:55Z",
    "updated_at": "2021-01-05T16:29:09Z",
    "author_association": "NONE",
    "body": "I compare the two artifacts for a same contracts.  I extract the deployed bytecode field from the artifacts and i compare the two bytecodes. And there are some differences. I have compared using both git diff and winMerge",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754744488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754779216",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-754779216",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 754779216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDc3OTIxNg==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-05T17:25:29Z",
    "updated_at": "2021-01-05T17:25:29Z",
    "author_association": "MEMBER",
    "body": "@Aleione where is the source for the `getHardhatConfig` that you get from the `@jarvis-network/uma-common` package? I would like to see the full hardhat configuration.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/754779216/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/755240668",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-755240668",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 755240668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NTI0MDY2OA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-06T11:14:54Z",
    "updated_at": "2021-01-06T11:14:54Z",
    "author_association": "MEMBER",
    "body": "> I compare the two artifacts for a same contracts. I extract the deployed bytecode field from the artifacts and i compare the two bytecodes. And there are some differences. I have compared using both git diff and winMerge\r\n\r\nCan you post them here?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/755240668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/755255836",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-755255836",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 755255836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NTI1NTgzNg==",
    "user": {
      "login": "Aleione",
      "id": 51761861,
      "node_id": "MDQ6VXNlcjUxNzYxODYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aleione",
      "html_url": "https://github.com/Aleione",
      "followers_url": "https://api.github.com/users/Aleione/followers",
      "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
      "organizations_url": "https://api.github.com/users/Aleione/orgs",
      "repos_url": "https://api.github.com/users/Aleione/repos",
      "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aleione/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-06T11:50:54Z",
    "updated_at": "2021-01-06T11:50:54Z",
    "author_association": "NONE",
    "body": "Here the source for getHardhatConfig: https://gitlab.com/jarvis-network/apps/exchange/UMAprotocol/-/blob/jarvis-dev/for-publish/0.3.x/packages/common/src/HardhatConfig.js\r\n\r\nHere an example of bytecode mismatch:\r\n[truffle.txt](https://github.com/nomiclabs/hardhat/files/5775576/truffle.txt)\r\n[hardhat.txt](https://github.com/nomiclabs/hardhat/files/5775577/hardhat.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/755255836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/757827235",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-757827235",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 757827235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzgyNzIzNQ==",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-11T09:51:26Z",
    "updated_at": "2021-01-11T09:51:26Z",
    "author_association": "NONE",
    "body": "@Aleione Are you sure you're using the same compiler version in both cases?\r\n\r\nOne difference that immediately stands out when you look at these files is that the output from Hardhat one has new-style linker references (which look like this: `__$4f581643aba88594584518c6bd09698d13$__`) while Truffle output has old-style ones (`__PerpetualPositionManagerPoolPartyLib__`). Your `HardhatConfig.js` has `const solcVersion = \"0.6.12\"` and your contracts have pragmas with that version but solc stopped producing the old-style references in 0.5.0. I'd say that your Truffle install must be using some ancient solc version but if this was the case, it would not compile at all due to pragmas.\r\n\r\nAre you perhaps comparing with some older build output from Truffle? The bytecode is not stable between solc versions (even the minor releases). If you want to reproduce the bytecode, you have to use the same exact compiler version.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/757827235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/766088755",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-766088755",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 766088755,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NjA4ODc1NQ==",
    "user": {
      "login": "Aleione",
      "id": 51761861,
      "node_id": "MDQ6VXNlcjUxNzYxODYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aleione",
      "html_url": "https://github.com/Aleione",
      "followers_url": "https://api.github.com/users/Aleione/followers",
      "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
      "organizations_url": "https://api.github.com/users/Aleione/orgs",
      "repos_url": "https://api.github.com/users/Aleione/repos",
      "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aleione/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-23T14:35:03Z",
    "updated_at": "2021-01-23T14:35:03Z",
    "author_association": "NONE",
    "body": "@cameel  The compiler version, runs, optimizer and EVM version are the same. You can check in build folder (truffle) and artifact folder (hardhat) this infos, and check that are the same.  The difference in library links are independent from the mismatch. You can see the mismatch also in TICHelper contract that does not include any reference with external libraries.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/766088755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/912515954",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-912515954",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 912515954,
    "node_id": "IC_kwDOB7jojM42Y-Ny",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-03T12:53:10Z",
    "updated_at": "2021-09-03T12:53:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Aleione Did you try disabling the [bytecode hash](https://ethereum.stackexchange.com/questions/23525/what-is-the-cryptic-part-at-the-end-of-a-solidity-contract-bytecode)?\r\n\r\nHere's how I do it in my template:\r\n\r\nhttps://github.com/paulrberg/solidity-template/blob/2de6b59757e0dd7f467d7549074329391a5d671f/hardhat.config.ts#L83",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/912515954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996200784",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-996200784",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 996200784,
    "node_id": "IC_kwDOB7jojM47YNFQ",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-16T21:17:39Z",
    "updated_at": "2021-12-16T21:17:39Z",
    "author_association": "NONE",
    "body": "This unfortunately seems to be a bug in the compiler. Recently we got two issues with enough input that we could actually reproduce and investigate the problem (https://github.com/ethereum/solidity/issues/12281, https://github.com/ethereum/solidity/issues/12415) and it turns out that 0.6.12 and 0.7.0 can output different bytecode with the same metadata.\r\n\r\nThe problem only occurs if the sets of files you're compiling are not identical in both cases. When using a framework like Truffle or Hardhat this usually means that to reproduce the bytecode you need to include all the input files from your project, not just those that are actually used by the contract you want to reproduce. For example omitting `Migrations.sol` from Truffle might be enough to trigger it. The problem does not exist on solc 0.7.1 and newer.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996200784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996795341",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-996795341",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 996795341,
    "node_id": "IC_kwDOB7jojM47aePN",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-17T15:09:53Z",
    "updated_at": "2021-12-17T15:09:53Z",
    "author_association": "MEMBER",
    "body": "Thanks for the update, @cameel. Is this bug also present if you don't use the optimizer?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996795341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996800879",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-996800879",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 996800879,
    "node_id": "IC_kwDOB7jojM47aflv",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-17T15:16:59Z",
    "updated_at": "2021-12-17T15:16:59Z",
    "author_association": "NONE",
    "body": "I think it isn't. I have only seen it happen with optimizer enabled. The differences in the bytecode all seem to come from different decisions made by the optimizer. Probably because things are sorted differently and processed in a different order.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996800879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996804101",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-996804101",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 996804101,
    "node_id": "IC_kwDOB7jojM47agYF",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-17T15:21:08Z",
    "updated_at": "2021-12-17T15:21:08Z",
    "author_association": "MEMBER",
    "body": "That matches with our experience and [this other issue](https://github.com/ethereum/solidity/issues/9573).\r\n\r\nI'm also seen the same happen when the name of top-level/entry-point files change. For example, if you have a file `A.sol` that imports `lib/L.sol`, which can have files with relative imports, renaming `lib/L.sol` to something like `lib2/L.sol` can lead to different compilation outputs. My suspicion is that it has to do with some kind of sorting and how it alters the optimizer's decisions.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/996804101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367817223",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1147#issuecomment-1367817223",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1147",
    "id": 1367817223,
    "node_id": "IC_kwDOB7jojM5RhzwH",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-30T09:32:53Z",
    "updated_at": "2022-12-30T09:32:53Z",
    "author_association": "MEMBER",
    "body": "Hardhat has a workaround for the solc versions affected by this bug, so I'm closing this.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367817223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

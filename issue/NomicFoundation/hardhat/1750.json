{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1750",
  "id": 959303148,
  "node_id": "MDU6SXNzdWU5NTkzMDMxNDg=",
  "number": 1750,
  "title": "Pass forking options to `npx hardhat test`",
  "user": {
    "login": "supafreq",
    "id": 83840384,
    "node_id": "MDQ6VXNlcjgzODQwMzg0",
    "avatar_url": "https://avatars.githubusercontent.com/u/83840384?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/supafreq",
    "html_url": "https://github.com/supafreq",
    "followers_url": "https://api.github.com/users/supafreq/followers",
    "following_url": "https://api.github.com/users/supafreq/following{/other_user}",
    "gists_url": "https://api.github.com/users/supafreq/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/supafreq/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/supafreq/subscriptions",
    "organizations_url": "https://api.github.com/users/supafreq/orgs",
    "repos_url": "https://api.github.com/users/supafreq/repos",
    "events_url": "https://api.github.com/users/supafreq/events{/privacy}",
    "received_events_url": "https://api.github.com/users/supafreq/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-08-03T16:45:33Z",
  "updated_at": "2022-11-18T16:55:13Z",
  "closed_at": "2021-08-03T17:46:31Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "It would be great to be able to conditionally run tests with mainnet forking. For my unit tests, I don't want to fork mainnet, however for my integration tests, I do. Unless I'm missing something, there does not seem to be any way of doing this without manually commenting out the `forking` option from `hardhat.config.js`.\r\n\r\nOne way we could support this is by adding another command line option to `npx hardhat test`, something like `--no-forking`, so we can keep configuration defined in `hardhat.config.js`, but disable it when needed.",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/892039668",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1750#issuecomment-892039668",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1750",
    "id": 892039668,
    "node_id": "IC_kwDOB7jojM41K3H0",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T17:46:31Z",
    "updated_at": "2021-08-03T17:46:31Z",
    "author_association": "MEMBER",
    "body": "Hi @supafreq, two things come to mind:\r\n\r\n1) Use [`hardhat_reset`](https://hardhat.org/hardhat-network/guides/mainnet-forking.html#resetting-the-fork) in the setup of your integration tests with the forking configuration.\r\n2) Have two npm scripts, one of which sets an environment variable that is then used in the config to activate the fork. This is uglier and more involved, since you would also need to use the env var to skip the tests.\r\n\r\nI'm going to close this since I don't think we'd add a feature like this. Probably the \"right\" solution would be to support multiple hardhat networks, so that you can do `hh test` and `hh test --network hardhat-fork`. That's being tracked in #1111.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/892039668/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

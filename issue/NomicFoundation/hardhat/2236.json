{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236",
  "id": 1097448444,
  "node_id": "I_kwDOB7jojM5Babv8",
  "number": 2236,
  "title": "Unable to verify contracts with \"import\", and temporary solution",
  "user": {
    "login": "anh194",
    "id": 12672576,
    "node_id": "MDQ6VXNlcjEyNjcyNTc2",
    "avatar_url": "https://avatars.githubusercontent.com/u/12672576?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anh194",
    "html_url": "https://github.com/anh194",
    "followers_url": "https://api.github.com/users/anh194/followers",
    "following_url": "https://api.github.com/users/anh194/following{/other_user}",
    "gists_url": "https://api.github.com/users/anh194/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anh194/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anh194/subscriptions",
    "organizations_url": "https://api.github.com/users/anh194/orgs",
    "repos_url": "https://api.github.com/users/anh194/repos",
    "events_url": "https://api.github.com/users/anh194/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anh194/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "kanej",
    "id": 24030,
    "node_id": "MDQ6VXNlcjI0MDMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kanej",
    "html_url": "https://github.com/kanej",
    "followers_url": "https://api.github.com/users/kanej/followers",
    "following_url": "https://api.github.com/users/kanej/following{/other_user}",
    "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
    "organizations_url": "https://api.github.com/users/kanej/orgs",
    "repos_url": "https://api.github.com/users/kanej/repos",
    "events_url": "https://api.github.com/users/kanej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kanej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "kanej",
      "id": 24030,
      "node_id": "MDQ6VXNlcjI0MDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanej",
      "html_url": "https://github.com/kanej",
      "followers_url": "https://api.github.com/users/kanej/followers",
      "following_url": "https://api.github.com/users/kanej/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
      "organizations_url": "https://api.github.com/users/kanej/orgs",
      "repos_url": "https://api.github.com/users/kanej/repos",
      "events_url": "https://api.github.com/users/kanej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-01-10T04:29:13Z",
  "updated_at": "2022-11-18T09:55:36Z",
  "closed_at": "2022-02-23T19:36:31Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "I have problems deployed to testnet such as polygon mumbai. No problem if the contract does not import others libraries/contracts.\r\n\r\nVersion solidity: 0.8.9\r\nHardhat: 2.8.2\r\ncommand:\r\n`npx hardhat verify  --network polygonMumbai {contract address} --show-stack-traces`\r\nError:\r\n```\r\nSuccessfully submitted source code for contract\r\ncontracts/Match.sol:Match at 0x13Fc3017EFc2774f4B5f8F4e14cd00bCA4E2418d\r\nfor verification on the block explorer. Waiting for verification result...\r\n\r\nError in plugin @nomiclabs/hardhat-etherscan: The contract verification failed.\r\nReason: Fail - Unable to verify\r\n```\r\n\r\nSolution:\r\nI try to flatten the contract and verify it manually on polygonscan. \r\n`npx hardhat flatten {contract file location} > output.sol `\r\n\r\nPolygonscan will return multiple SPDX. Manually remove extra SPDX in the flatten file (output.sol), and verify again will return successfully.\r\n\r\nMaybe hardhat-etherscan does not remove extra SPDX after flattening the contracts?",
  "closed_by": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1008861579",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1008861579",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1008861579,
    "node_id": "IC_kwDOB7jojM48IgGL",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-10T13:13:01Z",
    "updated_at": "2022-01-10T13:13:01Z",
    "author_association": "MEMBER",
    "body": "Hey @anh194,\r\n\r\nThere's currently an issue with Mumbai contract deployments, and you may be affected by it. Can you tell us more info about your project? What does your setup look like?\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1008861579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1008921921",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1008921921",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1008921921,
    "node_id": "IC_kwDOB7jojM48Iu1B",
    "user": {
      "login": "anh194",
      "id": 12672576,
      "node_id": "MDQ6VXNlcjEyNjcyNTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/12672576?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anh194",
      "html_url": "https://github.com/anh194",
      "followers_url": "https://api.github.com/users/anh194/followers",
      "following_url": "https://api.github.com/users/anh194/following{/other_user}",
      "gists_url": "https://api.github.com/users/anh194/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anh194/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anh194/subscriptions",
      "organizations_url": "https://api.github.com/users/anh194/orgs",
      "repos_url": "https://api.github.com/users/anh194/repos",
      "events_url": "https://api.github.com/users/anh194/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anh194/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-10T14:23:59Z",
    "updated_at": "2022-01-10T14:25:23Z",
    "author_association": "NONE",
    "body": "Hi @alcuadrado \r\n\r\nI found the issue when testing the verify functionalities. You can easily reproduce the bug by deploy this simple contract and using hardhat-etherscan library to verify. I just import a random library, you can import anything to reproduce the bug.\r\n```\r\n\r\n// SPDX-License-Identifier: MIT\r\n// pragma solidity >=0.4.22 <0.9.0;\r\npragma solidity ^0.8.0;\r\n\r\nimport \"../node_modules/@chainlink/contracts/src/v0.8/VRFConsumerBase.sol\";\r\n\r\ncontract Hello {\r\n    int public tmp;\r\n\r\n    function setTmp(int _tmp) public{\r\n        tmp = _tmp;\r\n    }\r\n\r\n    function getTmp() view public returns(int){\r\n        return tmp;\r\n    }\r\n}\r\n```\r\n\r\n`npx hardhat verify --contract \"contracts/Hello.sol:Hello\" --network polygonMumbai {address} --show-stack-traces`\r\n\r\nError log:\r\n```\r\nWe tried verifying your contract Hello without including any unrelated one, but it failed.\r\nTrying again with the full solc input used to compile and deploy it.\r\nThis means that unrelated contracts may be displayed on Etherscan...\r\n\r\nSuccessfully submitted source code for contract\r\ncontracts/Hello.sol:Match at 0x13Fc3017EFc2774f4B5f8F4e14cd00bCA4E2418d\r\nfor verification on the block explorer. Waiting for verification result...\r\n\r\nError in plugin @nomiclabs/hardhat-etherscan: The contract verification failed.\r\nReason: Fail - Unable to verify\r\n\r\nNomicLabsHardhatPluginError: The contract verification failed.\r\nReason: Fail - Unable to verify\r\n    at SimpleTaskDefinition.verifySubtask [as action] (/Users/anh/Documents/coin/flipcoin/js/node_modules/@nomiclabs/hardhat-etherscan/src/index.ts:332:9)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n    at Environment._runTaskDefinition (/Users/anh/Documents/coin/flipcoin/js/node_modules/hardhat/src/internal/core/runtime-environment.ts:217:14)\r\n    at Environment.run (/Users/anh/Documents/coin/flipcoin/js/node_modules/hardhat/src/internal/core/runtime-environment.ts:129:14)\r\n    at Environment._runTaskDefinition (/Users/anh/Documents/coin/flipcoin/js/node_modules/hardhat/src/internal/core/runtime-environment.ts:217:14)\r\n    at Environment.run (/Users/anh/Documents/coin/flipcoin/js/node_modules/hardhat/src/internal/core/runtime-environment.ts:129:14)\r\n    at main (/Users/anh/Documents/coin/flipcoin/js/node_modules/hardhat/src/internal/cli/cli.ts:214:5\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1008921921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1046240217",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1046240217",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1046240217,
    "node_id": "IC_kwDOB7jojM4-XFvZ",
    "user": {
      "login": "snuffykl",
      "id": 324180,
      "node_id": "MDQ6VXNlcjMyNDE4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/324180?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snuffykl",
      "html_url": "https://github.com/snuffykl",
      "followers_url": "https://api.github.com/users/snuffykl/followers",
      "following_url": "https://api.github.com/users/snuffykl/following{/other_user}",
      "gists_url": "https://api.github.com/users/snuffykl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snuffykl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snuffykl/subscriptions",
      "organizations_url": "https://api.github.com/users/snuffykl/orgs",
      "repos_url": "https://api.github.com/users/snuffykl/repos",
      "events_url": "https://api.github.com/users/snuffykl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snuffykl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-20T13:38:15Z",
    "updated_at": "2022-02-20T13:38:15Z",
    "author_association": "NONE",
    "body": "I am having the same issue as @anh194 to verify contract in Fantom Testnet. Is there any updates on this issue ?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1046240217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1048765963",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1048765963",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1048765963,
    "node_id": "IC_kwDOB7jojM4-guYL",
    "user": {
      "login": "magic990619",
      "id": 46446076,
      "node_id": "MDQ6VXNlcjQ2NDQ2MDc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46446076?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/magic990619",
      "html_url": "https://github.com/magic990619",
      "followers_url": "https://api.github.com/users/magic990619/followers",
      "following_url": "https://api.github.com/users/magic990619/following{/other_user}",
      "gists_url": "https://api.github.com/users/magic990619/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/magic990619/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/magic990619/subscriptions",
      "organizations_url": "https://api.github.com/users/magic990619/orgs",
      "repos_url": "https://api.github.com/users/magic990619/repos",
      "events_url": "https://api.github.com/users/magic990619/events{/privacy}",
      "received_events_url": "https://api.github.com/users/magic990619/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-23T13:10:28Z",
    "updated_at": "2022-02-23T13:10:28Z",
    "author_association": "NONE",
    "body": "Same issue on polygonscan.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1048765963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1049142190",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1049142190",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1049142190,
    "node_id": "IC_kwDOB7jojM4-iKOu",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-23T19:36:31Z",
    "updated_at": "2022-02-23T19:36:31Z",
    "author_association": "MEMBER",
    "body": "I'm closing this issue as I think there are multiple things being mixed here.\r\n\r\nIf you are having problems with Mumbai or Polygon, please look at #2312.\r\n\r\n@anh194 sorry for the delay. I can't reproduce your problem.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1049142190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1104522368",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2236#issuecomment-1104522368",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2236",
    "id": 1104522368,
    "node_id": "IC_kwDOB7jojM5B1ayA",
    "user": {
      "login": "drinkius",
      "id": 1757619,
      "node_id": "MDQ6VXNlcjE3NTc2MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757619?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drinkius",
      "html_url": "https://github.com/drinkius",
      "followers_url": "https://api.github.com/users/drinkius/followers",
      "following_url": "https://api.github.com/users/drinkius/following{/other_user}",
      "gists_url": "https://api.github.com/users/drinkius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drinkius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drinkius/subscriptions",
      "organizations_url": "https://api.github.com/users/drinkius/orgs",
      "repos_url": "https://api.github.com/users/drinkius/repos",
      "events_url": "https://api.github.com/users/drinkius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drinkius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-20T22:34:26Z",
    "updated_at": "2022-04-20T22:34:26Z",
    "author_association": "NONE",
    "body": "Same issue with Fantom testnet - unable to verify contracts",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1104522368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

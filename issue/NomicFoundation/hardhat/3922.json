{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3922",
  "id": 1707222013,
  "node_id": "I_kwDOB7jojM5lwiP9",
  "number": 3922,
  "title": "hardhat-network-helpers: helpers.reset() unavailable in test file.",
  "user": {
    "login": "tdergouzi",
    "id": 42488870,
    "node_id": "MDQ6VXNlcjQyNDg4ODcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/42488870?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tdergouzi",
    "html_url": "https://github.com/tdergouzi",
    "followers_url": "https://api.github.com/users/tdergouzi/followers",
    "following_url": "https://api.github.com/users/tdergouzi/following{/other_user}",
    "gists_url": "https://api.github.com/users/tdergouzi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tdergouzi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tdergouzi/subscriptions",
    "organizations_url": "https://api.github.com/users/tdergouzi/orgs",
    "repos_url": "https://api.github.com/users/tdergouzi/repos",
    "events_url": "https://api.github.com/users/tdergouzi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tdergouzi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-05-12T08:49:02Z",
  "updated_at": "2023-06-22T12:26:56Z",
  "closed_at": "2023-05-12T09:06:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\n\n2.14.0\n\n### What happened?\n\nI import the `helpers` in my test file, and got `0 passing` when i run `hardhat test`\r\n\r\n```json\r\n{\r\n  \"name\": \"@nomicfoundation/hardhat-network-helpers\",\r\n  \"version\": \"1.0.8\",\r\n  \"description\": \"Hardhat utils for testing\"\r\n ...\r\n}\r\n```\r\n\r\ntest file: \r\n```typescript\r\nimport hre from \"hardhat\";\r\nimport { expect } from \"chai\";\r\nimport helpers from \"@nomicfoundation/hardhat-network-helpers\"\r\nimport { BigNumber } from \"ethers\";\r\n\r\ndescribe(\"Hardhat Runtime Enviroment\", async () => {\r\n\r\n  await helpers.reset()\r\n\r\n  describe(\"hre config\", async () => {\r\n    it(\"should have a config file\", function () {\r\n      expect(hre.config).to.not.eq(undefined)\r\n    })\r\n  })\r\n  \r\n  describe(\"hre signer\", async () => {\r\n    it(\"signers length should be 20\", async () => {\r\n      let signers = await hre.ethers.getSigners()\r\n      expect(signers.length).to.eq(20)\r\n    })\r\n\r\n    it(\"the first signer should be account#0\", async () => {\r\n      let signers = await hre.ethers.getSigners()\r\n      let expectSigner0 = (\"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\").toLocaleLowerCase()\r\n      expect((await signers[0].getAddress()).toLocaleLowerCase()).to.eq(expectSigner0)\r\n    })\r\n  })\r\n\r\n  describe(\"hre block infomation\", async () => {\r\n    it(\"block number\", async () => {\r\n      let blockNumber = await hre.ethers.provider.getBlockNumber()\r\n      expect(blockNumber).to.eq(BigNumber.from(3469412))\r\n    })\r\n  })\r\n})\r\n```\r\n\r\nresult:\r\n```shell\r\n0 passing (0ms)\r\n```\r\nI didn't know why the test cases were ignored. If I remove the code await helpers.reset(), it will work.\r\n\n\n### Minimal reproduction steps\n\nInstall\r\n```shell\r\nmkdir hardhat-test\r\n\r\ncd hardhat-test\r\n\r\nyarn add -D hardhat\r\n\r\nnpx hardhat # create project\r\n```\r\n\r\nUpdate `test/Lock.ts`\r\n\r\n```typescript\r\nimport { time, loadFixture, reset } from \"@nomicfoundation/hardhat-network-helpers\";\r\nimport { anyValue } from \"@nomicfoundation/hardhat-chai-matchers/withArgs\";\r\nimport { expect } from \"chai\";\r\nimport { ethers } from \"hardhat\";\r\n\r\ndescribe(\"Lock\", async function () {\r\n  // We define a fixture to reuse the same setup in every test.\r\n  // We use loadFixture to run this setup once, snapshot that state,\r\n  // and reset Hardhat Network to that snapshot in every test.\r\n\r\n  await reset();\r\n\r\n  ...\r\n}\r\n```\n\n### Search terms\n\n_No response_",
  "closed_by": {
    "login": "tdergouzi",
    "id": 42488870,
    "node_id": "MDQ6VXNlcjQyNDg4ODcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/42488870?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tdergouzi",
    "html_url": "https://github.com/tdergouzi",
    "followers_url": "https://api.github.com/users/tdergouzi/followers",
    "following_url": "https://api.github.com/users/tdergouzi/following{/other_user}",
    "gists_url": "https://api.github.com/users/tdergouzi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tdergouzi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tdergouzi/subscriptions",
    "organizations_url": "https://api.github.com/users/tdergouzi/orgs",
    "repos_url": "https://api.github.com/users/tdergouzi/repos",
    "events_url": "https://api.github.com/users/tdergouzi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tdergouzi/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1545423825",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3922#issuecomment-1545423825",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922",
    "id": 1545423825,
    "node_id": "IC_kwDOB7jojM5cHUvR",
    "user": {
      "login": "tdergouzi",
      "id": 42488870,
      "node_id": "MDQ6VXNlcjQyNDg4ODcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/42488870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tdergouzi",
      "html_url": "https://github.com/tdergouzi",
      "followers_url": "https://api.github.com/users/tdergouzi/followers",
      "following_url": "https://api.github.com/users/tdergouzi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tdergouzi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tdergouzi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tdergouzi/subscriptions",
      "organizations_url": "https://api.github.com/users/tdergouzi/orgs",
      "repos_url": "https://api.github.com/users/tdergouzi/repos",
      "events_url": "https://api.github.com/users/tdergouzi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tdergouzi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-12T09:06:19Z",
    "updated_at": "2023-05-12T09:06:19Z",
    "author_association": "NONE",
    "body": "If remove the `forking` network config in `hardhat.config.ts`,  the test will be work. My understanding is that these two methods can only be chosen based on the actual development scenario.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1545423825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1602547840",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3922#issuecomment-1602547840",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922",
    "id": 1602547840,
    "node_id": "IC_kwDOB7jojM5fhPCA",
    "user": {
      "login": "FournyP",
      "id": 64586968,
      "node_id": "MDQ6VXNlcjY0NTg2OTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/64586968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FournyP",
      "html_url": "https://github.com/FournyP",
      "followers_url": "https://api.github.com/users/FournyP/followers",
      "following_url": "https://api.github.com/users/FournyP/following{/other_user}",
      "gists_url": "https://api.github.com/users/FournyP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FournyP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FournyP/subscriptions",
      "organizations_url": "https://api.github.com/users/FournyP/orgs",
      "repos_url": "https://api.github.com/users/FournyP/repos",
      "events_url": "https://api.github.com/users/FournyP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FournyP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T12:25:38Z",
    "updated_at": "2023-06-22T12:25:38Z",
    "author_association": "NONE",
    "body": "The problem is not realy resolved. \r\n\r\nHow can we use reset in tests ?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1602547840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1602549443",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3922#issuecomment-1602549443",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3922",
    "id": 1602549443,
    "node_id": "IC_kwDOB7jojM5fhPbD",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T12:26:56Z",
    "updated_at": "2023-06-22T12:26:56Z",
    "author_association": "MEMBER",
    "body": "Check [this](https://hardhat.org/hardhat-network-helpers/docs/reference#reset([url],-[blocknumber]))",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1602549443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

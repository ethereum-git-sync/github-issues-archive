{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457",
  "id": 1509372007,
  "node_id": "I_kwDOB7jojM5Z9zBn",
  "number": 3457,
  "title": "Transaction may fail or may require manual gas limit",
  "user": {
    "login": "joelamouche",
    "id": 16758383,
    "node_id": "MDQ6VXNlcjE2NzU4Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/16758383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joelamouche",
    "html_url": "https://github.com/joelamouche",
    "followers_url": "https://api.github.com/users/joelamouche/followers",
    "following_url": "https://api.github.com/users/joelamouche/following{/other_user}",
    "gists_url": "https://api.github.com/users/joelamouche/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joelamouche/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joelamouche/subscriptions",
    "organizations_url": "https://api.github.com/users/joelamouche/orgs",
    "repos_url": "https://api.github.com/users/joelamouche/repos",
    "events_url": "https://api.github.com/users/joelamouche/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joelamouche/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    },
    {
      "id": 4952257781,
      "node_id": "LA_kwDOB7jojM8AAAABJy109Q",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:chai-matchers",
      "name": "area:chai-matchers",
      "color": "5319E7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2022-12-23T13:52:15Z",
  "updated_at": "2023-04-03T00:13:29Z",
  "closed_at": "2023-01-02T16:41:05Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "<!--\r\n\r\nThank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\nThis issue will be automatically assigned to a Hardhat team member. This person will act as the point of contact between you and the team, but won't necessarily fix it nor address it in any way. An issue being assigned does not mean that it's being worked on.\r\n\r\n-->\r\nI am using `await expect(programs.store(55)).to.be.reverted` with the following function:\r\n\r\n```\r\n    function store(uint256 newValue) public onlyOwner {\r\n        value = newValue;\r\n        emit ValueChanged(newValue);\r\n    }\r\n```\r\n\r\n`onlyOwner` comes from `@openzeppelin/contracts/access/Ownable.sol`\r\n\r\nI am expecting it to revert with \"Ownable: caller is not the owner\" but instead it says:\r\n\r\n```\r\n     Error: cannot estimate gas; transaction may fail or may require manual gas limit [ See: https://links.ethers.org/v5-errors-UNPREDICTABLE_GAS_LIMIT ] (error={\"name\":\"ProviderError\",\"_stack\":\"ProviderError: HttpProviderError\\n    at HttpProvider.request (/Users/antoineestienne/Github_Files/contracts/node_modules/hardhat/src/internal/core/providers/http.ts:78:19)\\n    at AutomaticSenderProvider.request (/Users/antoineestienne/Github_Files/contracts/node_modules/hardhat/src/internal/core/providers/accounts.ts:344:34)\\n    at AutomaticGasProvider.request (/Users/antoineestienne/Github_Files/contracts/node_modules/hardhat/src/internal/core/providers/gas-providers.ts:135:34)\\n    at FixedGasPriceProvider.request (/Users/antoineestienne/Github_Files/contracts/node_modules/hardhat/src/internal/core/providers/gas-providers.ts:54:34)\\n    at BackwardsCompatibilityProviderAdapter.send (/Users/antoineestienne/Github_Files/contracts/node_modules/hardhat/src/internal/core/providers/backwards-compatibility.ts:36:27)\\n    at EthersProviderWrapper.send (/Users/antoineestienne/Github_Files/contracts/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:48)\\n    at EthersProviderWrapper.<anonymous> (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/src.ts/json-rpc-provider.ts:640:31)\\n    at step (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/json-rpc-provider.js:48:23)\\n    at Object.next (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/json-rpc-provider.js:29:53)\\n    at /Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/json-rpc-provider.js:23:71\\n    at new Promise (<anonymous>)\\n    at __awaiter (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/json-rpc-provider.js:19:12)\\n    at EthersProviderWrapper.JsonRpcProvider.perform (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/json-rpc-provider.js:720:16)\\n    at EthersProviderWrapper.<anonymous> (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/src.ts/base-provider.ts:1738:35)\\n    at step (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/base-provider.js:48:23)\\n    at Object.next (/Users/antoineestienne/Github_Files/contracts/node_modules/@ethersproject/providers/lib/base-provider.js:29:53)\",\"code\":-32000,\"_isProviderError\":true,\"data\":{\"stack\":\"RuntimeError: VM Exception while processing transaction: revert Ownable: caller is not the owner\\n    at Function.RuntimeError.fromResults (/Users/antoineestienne/Github_Files/contracts/node_modules/ganache-core/lib/utils/runtimeerror.js:94:13)\\n    at module.exports (/Users/antoineestienne/Github_Files/contracts/node_modules/ganache-core/lib/utils/gas/guestimation.js:142:32)\",\"name\":\"RuntimeError\"}}, method=\"estimateGas\", transaction={\"from\":\"0xB3a3d099Fb8107Ef20D1C05Cc77a70c835B17d61\",\"to\":\"0xd8A1F31905F526CCeca3C873A2822d06C7Ba4d63\",\"data\":\"0x6057361d0000000000000000000000000000000000000000000000000000000000000037\",\"accessList\":null}, code=UNPREDICTABLE_GAS_LIMIT, version=providers/5.7.2)\r\n```\r\n\r\n",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364135344",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1364135344",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1364135344,
    "node_id": "IC_kwDOB7jojM5RTw2w",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T17:28:04Z",
    "updated_at": "2022-12-23T17:28:04Z",
    "author_association": "MEMBER",
    "body": "@joelamouche are you using the latest versions of Hardhat, ethers and the Chai Matchers plugin?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364135344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1368825959",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1368825959",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1368825959,
    "node_id": "IC_kwDOB7jojM5RlqBn",
    "user": {
      "login": "joelamouche",
      "id": 16758383,
      "node_id": "MDQ6VXNlcjE2NzU4Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16758383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joelamouche",
      "html_url": "https://github.com/joelamouche",
      "followers_url": "https://api.github.com/users/joelamouche/followers",
      "following_url": "https://api.github.com/users/joelamouche/following{/other_user}",
      "gists_url": "https://api.github.com/users/joelamouche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joelamouche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joelamouche/subscriptions",
      "organizations_url": "https://api.github.com/users/joelamouche/orgs",
      "repos_url": "https://api.github.com/users/joelamouche/repos",
      "events_url": "https://api.github.com/users/joelamouche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joelamouche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T10:39:18Z",
    "updated_at": "2023-01-02T10:39:18Z",
    "author_association": "NONE",
    "body": "Yes :\r\n    \"ethers\": \"^5.7.2\",\r\n    \"hardhat\": \"^2.12.5\",\r\n    \"@nomicfoundation/hardhat-chai-matchers\": \"^1.0.5\",\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1368825959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1368827370",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1368827370",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1368827370,
    "node_id": "IC_kwDOB7jojM5RlqXq",
    "user": {
      "login": "joelamouche",
      "id": 16758383,
      "node_id": "MDQ6VXNlcjE2NzU4Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16758383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joelamouche",
      "html_url": "https://github.com/joelamouche",
      "followers_url": "https://api.github.com/users/joelamouche/followers",
      "following_url": "https://api.github.com/users/joelamouche/following{/other_user}",
      "gists_url": "https://api.github.com/users/joelamouche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joelamouche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joelamouche/subscriptions",
      "organizations_url": "https://api.github.com/users/joelamouche/orgs",
      "repos_url": "https://api.github.com/users/joelamouche/repos",
      "events_url": "https://api.github.com/users/joelamouche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joelamouche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T10:41:47Z",
    "updated_at": "2023-01-02T10:43:02Z",
    "author_association": "NONE",
    "body": "Oh sorry I forgot to mention something important: I am using `npx hardhat  --network ganache test` with     \"@nomiclabs/hardhat-ganache\": \"^2.0.1\",\r\n\r\nUsing the hardhat testnet behaves as expected",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1368827370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369083118",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369083118",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369083118,
    "node_id": "IC_kwDOB7jojM5Rmozu",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T16:41:05Z",
    "updated_at": "2023-01-02T16:41:05Z",
    "author_association": "MEMBER",
    "body": "Oh, sorry, the Hardhat Chai Matchers are only meant to be used with the Hardhat network :slightly_frowning_face:\r\n\r\nMaybe there are some things Ganache could do to work with our matchers, but we should discuss that on their issue tracker. Feel free to tag me if you open an issue for that.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369083118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369093865",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369093865",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369093865,
    "node_id": "IC_kwDOB7jojM5Rmrbp",
    "user": {
      "login": "antoine-dowgo",
      "id": 102977626,
      "node_id": "U_kgDOBiNQWg",
      "avatar_url": "https://avatars.githubusercontent.com/u/102977626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antoine-dowgo",
      "html_url": "https://github.com/antoine-dowgo",
      "followers_url": "https://api.github.com/users/antoine-dowgo/followers",
      "following_url": "https://api.github.com/users/antoine-dowgo/following{/other_user}",
      "gists_url": "https://api.github.com/users/antoine-dowgo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antoine-dowgo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antoine-dowgo/subscriptions",
      "organizations_url": "https://api.github.com/users/antoine-dowgo/orgs",
      "repos_url": "https://api.github.com/users/antoine-dowgo/repos",
      "events_url": "https://api.github.com/users/antoine-dowgo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antoine-dowgo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:02:46Z",
    "updated_at": "2023-01-02T17:02:46Z",
    "author_association": "NONE",
    "body": "@fvictorio \r\nOkay but if I wrap the call in a try catch:\r\n````\r\nconst Programs = await ethers.getContractFactory(\"Programs\");\r\nconst programs = (await Programs.deploy()) as Programs;\r\ntry{\r\n  await programs.store(55)\r\n} catch(e){\r\n  console.log(e)\r\n}\r\n````\r\n\r\nI still get\r\n` Error: cannot estimate gas; transaction may fail or may require manual gas limit`\r\n\r\nWhich means that the hardhat version of ethers runs estimateGas and that's a problem because I can't get the revert reason, even manually",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369093865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369095415",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369095415",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369095415,
    "node_id": "IC_kwDOB7jojM5Rmrz3",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:04:41Z",
    "updated_at": "2023-01-02T17:04:41Z",
    "author_association": "MEMBER",
    "body": "@antoine-dowgo I'm not sure I follow. That's ethers default behavior if you don't pass a `gasLimit` value, isn't it? I don't think our version of ethers does anything different.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369095415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369103303",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369103303",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369103303,
    "node_id": "IC_kwDOB7jojM5RmtvH",
    "user": {
      "login": "antoine-dowgo",
      "id": 102977626,
      "node_id": "U_kgDOBiNQWg",
      "avatar_url": "https://avatars.githubusercontent.com/u/102977626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antoine-dowgo",
      "html_url": "https://github.com/antoine-dowgo",
      "followers_url": "https://api.github.com/users/antoine-dowgo/followers",
      "following_url": "https://api.github.com/users/antoine-dowgo/following{/other_user}",
      "gists_url": "https://api.github.com/users/antoine-dowgo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antoine-dowgo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antoine-dowgo/subscriptions",
      "organizations_url": "https://api.github.com/users/antoine-dowgo/orgs",
      "repos_url": "https://api.github.com/users/antoine-dowgo/repos",
      "events_url": "https://api.github.com/users/antoine-dowgo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antoine-dowgo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:14:50Z",
    "updated_at": "2023-01-02T17:14:50Z",
    "author_association": "NONE",
    "body": "I don't think it's about the gas limit but rather about the \"may fail'.\r\nI think the hardhat verison of the contract run gas estimation which verifies wether the call with revert or not. Since the call is supposed to revert, it throws this error. But the problem is that I don't get the error message.\r\n\r\nIf I run the exact same test with hardhat testnet I get `Error: VM Exception while processing transaction: reverted with reason string 'Ownable: caller is not the owner'`",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369103303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369113563",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369113563",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369113563,
    "node_id": "IC_kwDOB7jojM5RmwPb",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:38:29Z",
    "updated_at": "2023-01-02T17:38:29Z",
    "author_association": "MEMBER",
    "body": "Oh, I see what's going on. The in-process Hardhat network, by default, sets the transactions gas limits to the value of the block gas limit. This means that ethers doesn't perform a gas estimation and you get that error. If you change your settings to:\r\n\r\n```\r\nnetworks: {\r\n  hardhat: {\r\n    gas: \"auto\"\r\n  }\r\n}\r\n```\r\n\r\nthen ethers will perform a gas estimation and you'll get the same result for Hardhat and for external networks.\r\n\r\nIf you want to get the same behavior in both networks you have to either 1) set Hardhat's gas behavior to `\"auto\"` (as shown in the previous snippet), in which case you will get the \"cannot estimate gas\" error from ethers or 2) set the `gas` entry in the `ganache` network config to a fixed value.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369113563/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369118525",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369118525",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369118525,
    "node_id": "IC_kwDOB7jojM5Rmxc9",
    "user": {
      "login": "antoine-dowgo",
      "id": 102977626,
      "node_id": "U_kgDOBiNQWg",
      "avatar_url": "https://avatars.githubusercontent.com/u/102977626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antoine-dowgo",
      "html_url": "https://github.com/antoine-dowgo",
      "followers_url": "https://api.github.com/users/antoine-dowgo/followers",
      "following_url": "https://api.github.com/users/antoine-dowgo/following{/other_user}",
      "gists_url": "https://api.github.com/users/antoine-dowgo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antoine-dowgo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antoine-dowgo/subscriptions",
      "organizations_url": "https://api.github.com/users/antoine-dowgo/orgs",
      "repos_url": "https://api.github.com/users/antoine-dowgo/repos",
      "events_url": "https://api.github.com/users/antoine-dowgo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antoine-dowgo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:51:45Z",
    "updated_at": "2023-01-02T17:51:45Z",
    "author_association": "NONE",
    "body": "OKay thanks so If I set it to 1M it does throw this error: `Error: missing revert data in call exception; Transaction reverted without a reason string` which is a progress. Butt how do I change the setting for `@nomiclabs/hardhat-ganache`?\r\nThe instructions here https://hardhat.org/hardhat-runner/plugins/nomiclabs-hardhat-ganache don't work of are not up to date",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369118525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369128032",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369128032",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369128032,
    "node_id": "IC_kwDOB7jojM5Rmzxg",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T18:08:58Z",
    "updated_at": "2023-01-02T18:08:58Z",
    "author_association": "MEMBER",
    "body": "Try something like this:\r\n\r\n```\r\n    ganache: {\r\n      url: \"http://localhost:8545\",\r\n      gas: 30_000_000,\r\n      gasLimit: 30_000_000,\r\n    }\r\n```\r\n\r\n`gasLimit` will configure the block gas limit of the ganache network that the plugin starts. `gas` should configure the default gas sent in each transaction.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369128032/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369137116",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3457#issuecomment-1369137116",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3457",
    "id": 1369137116,
    "node_id": "IC_kwDOB7jojM5Rm1_c",
    "user": {
      "login": "antoine-dowgo",
      "id": 102977626,
      "node_id": "U_kgDOBiNQWg",
      "avatar_url": "https://avatars.githubusercontent.com/u/102977626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antoine-dowgo",
      "html_url": "https://github.com/antoine-dowgo",
      "followers_url": "https://api.github.com/users/antoine-dowgo/followers",
      "following_url": "https://api.github.com/users/antoine-dowgo/following{/other_user}",
      "gists_url": "https://api.github.com/users/antoine-dowgo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antoine-dowgo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antoine-dowgo/subscriptions",
      "organizations_url": "https://api.github.com/users/antoine-dowgo/orgs",
      "repos_url": "https://api.github.com/users/antoine-dowgo/repos",
      "events_url": "https://api.github.com/users/antoine-dowgo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antoine-dowgo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T18:26:49Z",
    "updated_at": "2023-01-02T18:27:06Z",
    "author_association": "NONE",
    "body": "Wow thanks not only does it work but it even logs the revert reason :D\r\nHOwever I had to add `@ts-ignore` : \r\n\r\n````\r\nganache: {\r\n      url: \"http://localhost:8545\",\r\n      gas: 30_000_000,\r\n      //@ts-ignore\r\n      gasLimit: 30_000_000,\r\n    },\r\n````\r\n\r\nThe typings are not up to date it seems (I'm using Typescript)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1369137116/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

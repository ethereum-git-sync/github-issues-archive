{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056",
  "id": 1342393247,
  "node_id": "I_kwDOB7jojM5QA0uf",
  "number": 3056,
  "title": "signer.signMessage message fails when run on hardhat node.",
  "user": {
    "login": "BKopyIo",
    "id": 111377116,
    "node_id": "U_kgDOBqN63A",
    "avatar_url": "https://avatars.githubusercontent.com/u/111377116?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BKopyIo",
    "html_url": "https://github.com/BKopyIo",
    "followers_url": "https://api.github.com/users/BKopyIo/followers",
    "following_url": "https://api.github.com/users/BKopyIo/following{/other_user}",
    "gists_url": "https://api.github.com/users/BKopyIo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BKopyIo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BKopyIo/subscriptions",
    "organizations_url": "https://api.github.com/users/BKopyIo/orgs",
    "repos_url": "https://api.github.com/users/BKopyIo/repos",
    "events_url": "https://api.github.com/users/BKopyIo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BKopyIo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-08-17T23:50:35Z",
  "updated_at": "2022-11-16T11:18:04Z",
  "closed_at": "2022-11-16T11:17:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": " From looking at the history here, it seems liked this problem was solved, but when I run this test:\r\n```\r\nit('can sign something', async()=>{\r\n        let message = \"Hello world\";\r\n        let [signer] = await ethers.getSigners();\r\n        let signature = await signer.signMessage(message)\r\n    })\r\n```\r\nusing just `hh test` it works fine, but if a I start a hardhat node on localhost and then run it using `hh test --network localhost` it fails with\r\n```\r\n 1) Test on localhost\r\n       can sign something:\r\n     ProviderError: Method personal_sign not found\r\n      at HttpProvider.request (node_modules/hardhat/src/internal/core/providers/http.ts:78:19)\r\n      at AutomaticSenderProvider.request (node_modules/hardhat/src/internal/core/providers/accounts.ts:351:34)\r\n      at AutomaticGasProvider.request (node_modules/hardhat/src/internal/core/providers/gas-providers.ts:136:34)\r\n      at AutomaticGasPriceProvider.request (node_modules/hardhat/src/internal/core/providers/gas-providers.ts:153:36)\r\n      at BackwardsCompatibilityProviderAdapter.send (node_modules/hardhat/src/internal/core/providers/backwards-compatibility.ts:36:27)\r\n      at EthersProviderWrapper.send (node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:48)\r\n      at JsonRpcSigner.<anonymous> (node_modules/@ethersproject/providers/src.ts/json-rpc-provider.ts:295:36)\r\n      at step (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:48:23)\r\n      at Object.next (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:29:53)\r\n      at fulfilled (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:20:58)\r\n```",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1218685649",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056#issuecomment-1218685649",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
    "id": 1218685649,
    "node_id": "IC_kwDOB7jojM5Io6rR",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-08-17T23:50:53Z",
    "updated_at": "2022-08-17T23:50:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1074/signersignmessage-message-fails-when-run-on-hardhat-node).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 8b26f0ea-fb6a-4e4e-9dab-91b1a6690880",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1218685649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1219544603",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056#issuecomment-1219544603",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
    "id": 1219544603,
    "node_id": "IC_kwDOB7jojM5IsMYb",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T14:12:03Z",
    "updated_at": "2022-08-18T14:12:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for using Hardhat.\r\n\r\nIn general, if there is a problem in Hardhat, we will need a minimal reproducible example in order to investigate it. See https://stackoverflow.com/help/minimal-reproducible-example\r\n\r\nCan you provide us with a minimal reproducible example?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1219544603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220083111",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056#issuecomment-1220083111",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
    "id": 1220083111,
    "node_id": "IC_kwDOB7jojM5IuP2n",
    "user": {
      "login": "BKopyIo",
      "id": 111377116,
      "node_id": "U_kgDOBqN63A",
      "avatar_url": "https://avatars.githubusercontent.com/u/111377116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BKopyIo",
      "html_url": "https://github.com/BKopyIo",
      "followers_url": "https://api.github.com/users/BKopyIo/followers",
      "following_url": "https://api.github.com/users/BKopyIo/following{/other_user}",
      "gists_url": "https://api.github.com/users/BKopyIo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BKopyIo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BKopyIo/subscriptions",
      "organizations_url": "https://api.github.com/users/BKopyIo/orgs",
      "repos_url": "https://api.github.com/users/BKopyIo/repos",
      "events_url": "https://api.github.com/users/BKopyIo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BKopyIo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T23:43:13Z",
    "updated_at": "2022-08-18T23:49:42Z",
    "author_association": "NONE",
    "body": "Sure, here is the test:\r\n\r\n```\r\nimport { ethers } from \"hardhat\";\r\n\r\ndescribe.only('Try hardhat sign on node',  () => {\r\n    it('attempts to sign', async ()=>{\r\n        let [signer0] = await ethers.getSigners();\r\n        let text = \"I am Foo\";\r\n        let signature = await signer0.signMessage(text);\r\n        console.log(signature);\r\n    });\r\n});\r\n```\r\n\r\nAnd here is the output in the VS Code Console:\r\n ```\r\n 1) Try hardhat sign on node\r\n       attempts to sign:\r\n     ProviderError: Method personal_sign not found\r\n      at HttpProvider.request (node_modules/hardhat/src/internal/core/providers/http.ts:78:19)\r\n      at AutomaticSenderProvider.request (node_modules/hardhat/src/internal/core/providers/accounts.ts:351:34)\r\n      at AutomaticGasProvider.request (node_modules/hardhat/src/internal/core/providers/gas-providers.ts:136:34)\r\n      at AutomaticGasPriceProvider.request (node_modules/hardhat/src/internal/core/providers/gas-providers.ts:153:36)\r\n      at BackwardsCompatibilityProviderAdapter.send (node_modules/hardhat/src/internal/core/providers/backwards-compatibility.ts:36:27)\r\n      at EthersProviderWrapper.send (node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:48)\r\n      at JsonRpcSigner.<anonymous> (node_modules/@ethersproject/providers/src.ts/json-rpc-provider.ts:295:36)\r\n      at step (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:48:23)\r\n      at Object.next (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:29:53)\r\n      at fulfilled (node_modules/@ethersproject/providers/lib/json-rpc-provider.js:20:58)\r\n```\r\n\r\nAnd here is the terminal output which is running `npx hardhat node`\r\n```\r\n\r\nAccount #18: 0xdd2fd4581271e230360230f9337d5c0430bf44c0 (10000 ETH)\r\nPrivate Key: 0xde9be858da4a47527642_5e9262ecfc3ba460bfac56360bfa6c4c28b4ee0\r\n\r\nAccount #19: 0x8626f6940e2eb28930efb4cef49b2d1f2c9c1199 (10000 ETH)\r\nPrivate Key: 0xdf57089febbacf7ba0bc___dafbffa9fc08a93fdc68e1e42411a14efcf23656e\r\n\r\neth_chainId (3)\r\neth_getBlockByNumber\r\neth_accounts\r\npersonal_sign - Method not supported\r\n```\r\n\r\nAnd hereis the NPM version info\r\n```\r\n\r\nJoshs-MacBook-Pro:bkopy-embedded-contracts jk$ npm list hardhat\r\n@bkopyio/api@0.1.16 /Users/jk/Documents/VSCodeProjects/BKopy/bkopy-embedded-contracts\r\n├─┬ @nomiclabs/hardhat-ethers@2.1.0\r\n│ └── hardhat@2.10.0 deduped\r\n├─┬ @nomiclabs/hardhat-etherscan@3.1.0\r\n│ └── hardhat@2.10.0 deduped\r\n├─┬ @nomiclabs/hardhat-waffle@2.0.3\r\n│ └── hardhat@2.10.0 deduped\r\n├─┬ @typechain/hardhat@2.3.1\r\n│ └── hardhat@2.10.0 deduped\r\n├─┬ hardhat-contract-sizer@2.5.1\r\n│ └── hardhat@2.10.0 deduped\r\n├─┬ hardhat-gas-reporter@1.0.8\r\n│ └── hardhat@2.10.0 deduped\r\n└── hardhat@2.10.0\r\n```\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220083111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1308349598",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056#issuecomment-1308349598",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
    "id": 1308349598,
    "node_id": "IC_kwDOB7jojM5N-9Se",
    "user": {
      "login": "sumer-meso",
      "id": 117561535,
      "node_id": "U_kgDOBwHYvw",
      "avatar_url": "https://avatars.githubusercontent.com/u/117561535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sumer-meso",
      "html_url": "https://github.com/sumer-meso",
      "followers_url": "https://api.github.com/users/sumer-meso/followers",
      "following_url": "https://api.github.com/users/sumer-meso/following{/other_user}",
      "gists_url": "https://api.github.com/users/sumer-meso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sumer-meso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sumer-meso/subscriptions",
      "organizations_url": "https://api.github.com/users/sumer-meso/orgs",
      "repos_url": "https://api.github.com/users/sumer-meso/repos",
      "events_url": "https://api.github.com/users/sumer-meso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sumer-meso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T07:53:52Z",
    "updated_at": "2022-11-09T07:53:52Z",
    "author_association": "NONE",
    "body": "any updates on this?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1308349598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1316832747",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3056#issuecomment-1316832747",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3056",
    "id": 1316832747,
    "node_id": "IC_kwDOB7jojM5OfUXr",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T11:17:55Z",
    "updated_at": "2022-11-16T11:17:55Z",
    "author_association": "MEMBER",
    "body": "I can't reproduce this using the latest versions of Hardhat and Ethers. If someone has this problem, then please:\r\n\r\n1) Open a new issue with a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)\r\n2) Include the versions of Hardhat,ethers.js and hardhat-ethers that you are using.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1316832747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1142",
  "id": 776557881,
  "node_id": "MDU6SXNzdWU3NzY1NTc4ODE=",
  "number": 1142,
  "title": "Invoking a method of a contract created by getContractAt returns \"call revert exception\"",
  "user": {
    "login": "aboutlo",
    "id": 1236268,
    "node_id": "MDQ6VXNlcjEyMzYyNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aboutlo",
    "html_url": "https://github.com/aboutlo",
    "followers_url": "https://api.github.com/users/aboutlo/followers",
    "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
    "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
    "organizations_url": "https://api.github.com/users/aboutlo/orgs",
    "repos_url": "https://api.github.com/users/aboutlo/repos",
    "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aboutlo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-12-30T17:24:41Z",
  "updated_at": "2022-11-18T21:09:07Z",
  "closed_at": "2020-12-30T22:57:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": "resolved",
  "body": "I'm trying to use in a task `getContractAt`\r\n\r\n```ts\r\nimport Greeter from './artifacts/contracts/Greeter.sol/Greeter.json'\r\n\r\ntask('greet', \"prints  a message\")\r\n  .setAction(async (args, {ethers}) => {\r\n    const greeter = await ethers.getContractAt(Greeter.abi, GREETER)\r\n    const message =  await greeter.greet()\r\n    console.log({ message })\r\n  })\r\n```\r\n\r\nthis throws:\r\n```\r\n{ Error: call revert exception (method=\"greet()\", errorSignature=null, errorArgs=[null], reason=null, code=CALL_EXCEPTION, version=abi/5.0.9)\r\n    at Logger.makeError (node_modules/@ethersproject/logger/src.ts/index.ts:205:28)\r\n    at Logger.throwError (node_modules/@ethersproject/logger/src.ts/index.ts:217:20)\r\n    at Interface.decodeFunctionResult (node_modules/@ethersproject/abi/src.ts/interface.ts:326:23)\r\n    at Contract.<anonymous> (node_modules/@ethersproject/contracts/src.ts/index.ts:309:44)\r\n    at step (node_modules/@ethersproject/contracts/lib/index.js:46:23)\r\n    at Object.next (node_modules/@ethersproject/contracts/lib/index.js:27:53)\r\n    at fulfilled (node_modules/@ethersproject/contracts/lib/index.js:18:58)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n  reason: null,\r\n  code: 'CALL_EXCEPTION',\r\n  method: 'greet()',\r\n  errorSignature: null,\r\n  errorArgs: [ null ],\r\n  address: '0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0',\r\n  args: [],\r\n  transaction:\r\n   { data: '0xcfae3217',\r\n     to: '0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0',\r\n     from: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',\r\n     gasLimit: BigNumber { _hex: '0x820638', _isBigNumber: true } } }\r\n ```\r\n \r\n The same code works in a script where I deploy the smart contract:\r\n \r\n ```ts\r\n const Greeter = await ethers.getContractFactory('Greeter')\r\n const greeter = await Greeter.deploy('Hi')\r\n  console.log(\r\n    `Deployed contract Greeter on \"${network.name}\" as \"${greeter.address}\"`\r\n  )\r\n  const greeterInstance = await ethers.getContractAt('Greeter', greeter.address)\r\n  const message  = await greeterInstance.greet()\r\n  console.log({message})\r\n ```\r\n \r\nAm I missing something? ",
  "closed_by": {
    "login": "aboutlo",
    "id": 1236268,
    "node_id": "MDQ6VXNlcjEyMzYyNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aboutlo",
    "html_url": "https://github.com/aboutlo",
    "followers_url": "https://api.github.com/users/aboutlo/followers",
    "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
    "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
    "organizations_url": "https://api.github.com/users/aboutlo/orgs",
    "repos_url": "https://api.github.com/users/aboutlo/repos",
    "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aboutlo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752725581",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1142#issuecomment-752725581",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142",
    "id": 752725581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjcyNTU4MQ==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T19:02:40Z",
    "updated_at": "2020-12-30T19:02:40Z",
    "author_association": "MEMBER",
    "body": "Hey @aboutlo, thanks for reporting this issue.\r\n\r\nI'm afraid there's lots of info missing to be able to tell what's going on. Can you add the steps to reproduce it? Or ideally, a link to a repo to do it? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752725581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752767527",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1142#issuecomment-752767527",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142",
    "id": 752767527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mjc2NzUyNw==",
    "user": {
      "login": "aboutlo",
      "id": 1236268,
      "node_id": "MDQ6VXNlcjEyMzYyNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aboutlo",
      "html_url": "https://github.com/aboutlo",
      "followers_url": "https://api.github.com/users/aboutlo/followers",
      "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
      "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
      "organizations_url": "https://api.github.com/users/aboutlo/orgs",
      "repos_url": "https://api.github.com/users/aboutlo/repos",
      "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aboutlo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T21:42:13Z",
    "updated_at": "2020-12-30T21:42:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @alcuadrado, I figured out my issue. Basically, I was deploying using `npx hardhat run --network hardhat scripts/deployments/001_deploy.ts` rather than `npx hardhat run --network localhost scripts/deployments/001_deploy.ts` so the error was right the smart contract wasn't deployed on my local node, but it was temporarily available on the hardhat network during the deploy script execution.\r\n\r\nI would change  https://hardhat.org/guides/deploying.html slightly to provide an example pointing to the localhost. \r\ne.g. including this config\r\nhttps://hardhat.org/config/#default-networks-object \r\n\r\nand replace `npx hardhat run --network <your-network> scripts/sample-script.js` to  `npx hardhat run --network localhost scripts/deploy.js`\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752767527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752783382",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1142#issuecomment-752783382",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142",
    "id": 752783382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mjc4MzM4Mg==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T22:59:00Z",
    "updated_at": "2020-12-30T22:59:00Z",
    "author_association": "MEMBER",
    "body": "Do you feel like sending a PR to update it? :) All the docs are in this same repo, written in markdown: https://github.com/nomiclabs/hardhat/blob/master/docs/guides/deploying.md",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/752783382/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/753513462",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1142#issuecomment-753513462",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1142",
    "id": 753513462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzUxMzQ2Mg==",
    "user": {
      "login": "aboutlo",
      "id": 1236268,
      "node_id": "MDQ6VXNlcjEyMzYyNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1236268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aboutlo",
      "html_url": "https://github.com/aboutlo",
      "followers_url": "https://api.github.com/users/aboutlo/followers",
      "following_url": "https://api.github.com/users/aboutlo/following{/other_user}",
      "gists_url": "https://api.github.com/users/aboutlo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aboutlo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aboutlo/subscriptions",
      "organizations_url": "https://api.github.com/users/aboutlo/orgs",
      "repos_url": "https://api.github.com/users/aboutlo/repos",
      "events_url": "https://api.github.com/users/aboutlo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aboutlo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-02T18:36:43Z",
    "updated_at": "2021-01-02T18:36:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "@alcuadrado https://github.com/nomiclabs/hardhat/issues/1142",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/753513462/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

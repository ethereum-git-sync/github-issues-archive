{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1940",
  "id": 1022062568,
  "node_id": "I_kwDOB7jojM4862_o",
  "number": 1940,
  "title": "Hardhat Network hangs on subscription with small \"fromBlock\"",
  "user": {
    "login": "princesscrypto1337",
    "id": 90205354,
    "node_id": "MDQ6VXNlcjkwMjA1MzU0",
    "avatar_url": "https://avatars.githubusercontent.com/u/90205354?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/princesscrypto1337",
    "html_url": "https://github.com/princesscrypto1337",
    "followers_url": "https://api.github.com/users/princesscrypto1337/followers",
    "following_url": "https://api.github.com/users/princesscrypto1337/following{/other_user}",
    "gists_url": "https://api.github.com/users/princesscrypto1337/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/princesscrypto1337/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/princesscrypto1337/subscriptions",
    "organizations_url": "https://api.github.com/users/princesscrypto1337/orgs",
    "repos_url": "https://api.github.com/users/princesscrypto1337/repos",
    "events_url": "https://api.github.com/users/princesscrypto1337/events{/privacy}",
    "received_events_url": "https://api.github.com/users/princesscrypto1337/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-10-10T18:50:55Z",
  "updated_at": "2022-11-18T10:05:12Z",
  "closed_at": "2022-02-28T18:20:50Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Thank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\n\r\n# Reproduction\r\n\r\nSend any JSON-RPC to hardhat with \"fromBlock: 0\" or some other small number. Then the subscription will hang.\r\n\r\nAs an example, if forking binance smart chain, then using web3py\r\n```\r\nweb3.eth.filter({\"address\": \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\", \"fromBlock\": 0})\r\n```\r\nwill hang.\r\n\r\n# Importance\r\n\r\nI discovered this bug when using the go bindings for watching events. For one reason or another, the [go bindings](https://github.com/ethereum/go-ethereum/blob/master/ethclient/ethclient.go#L407) defaults \"fromBlock\" to 0 instead of \"latest\". This means that, with hardhat, all of my subscriptions will hang (which in fact makes hardhat network hang and not able to respond to other requests). So this bug is crucial for making event subscription work in go by default.",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/941247404",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1940#issuecomment-941247404",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1940",
    "id": 941247404,
    "node_id": "IC_kwDOB7jojM44Gkus",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T18:05:08Z",
    "updated_at": "2021-10-12T18:05:08Z",
    "author_association": "MEMBER",
    "body": "Is this a bug, or an expected behavior related to fetching a lot of events?\r\n\r\nPut another way, does the same thing happen if you use `1` as the block number?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/941247404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2658",
  "id": 1224043571,
  "node_id": "I_kwDOB7jojM5I9Wwz",
  "number": 2658,
  "title": "Unable to call simplest method of freshly deployed contract.",
  "user": {
    "login": "hickscorp",
    "id": 822933,
    "node_id": "MDQ6VXNlcjgyMjkzMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/822933?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hickscorp",
    "html_url": "https://github.com/hickscorp",
    "followers_url": "https://api.github.com/users/hickscorp/followers",
    "following_url": "https://api.github.com/users/hickscorp/following{/other_user}",
    "gists_url": "https://api.github.com/users/hickscorp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hickscorp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hickscorp/subscriptions",
    "organizations_url": "https://api.github.com/users/hickscorp/orgs",
    "repos_url": "https://api.github.com/users/hickscorp/repos",
    "events_url": "https://api.github.com/users/hickscorp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hickscorp/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-05-03T12:38:21Z",
  "updated_at": "2022-11-18T09:53:40Z",
  "closed_at": "2022-05-06T16:45:15Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Good afternoon,\r\n\r\nI'm completely new to Hardhat (but am quite experienced with other frameworks).\r\n\r\nConsider the following contract:\r\n```solidity\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.4;\r\n\r\ncontract Registry {\r\n  function foo() public pure returns (uint256) {\r\n    return 42;\r\n  }\r\n}\r\n```\r\n\r\nIt's being deployed like so:\r\n```typescript\r\nimport { ethers, upgrades } from \"hardhat\";\r\n\r\nasync function main() {\r\n  const Registry = await ethers.getContractFactory(\"Registry\");\r\n  const registry = await Registry.deploy();\r\n  // const registry = await upgrades.deployProxy(Registry);\r\n  await registry.deployed();\r\n  console.log(`Registry deployed to ${registry.address}.`);\r\n}\r\n\r\nmain().catch((error) => {\r\n  console.error(error);\r\n  process.exitCode = 1;\r\n});\r\n```\r\n\r\nThen, using `hardhat node`:\r\n```javascript\r\nconst Registry = await ethers.getContractFactory(\"Registry\");\r\nconst registry = await Registry.attach(REGISTRY_DEPLOYED_ADDRESS);\r\nawait registry.foo();\r\n```\r\n\r\nThis errors:\r\n```\r\nUncaught:\r\nError: call revert exception [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (method=\"foo()\", data=\"0x\", errorArgs=null, errorName=null, errorSignature=null, reason=null, code=CALL_EXCEPTION, version=abi/5.6.1)\r\n    at step (whatever/node_modules/@ethersproject/contracts/lib/index.js:48:23)\r\n    at Contract.<anonymous> (whatever/node_modules/@ethersproject/contracts/src.ts/index.ts:400:44)\r\n    at Interface.decodeFunctionResult (whatever/node_modules/@ethersproject/abi/src.ts/interface.ts:429:23)\r\n    at Logger.throwError (whatever/node_modules/@ethersproject/logger/src.ts/index.ts:273:20)\r\n    at Logger.makeError (whatever/node_modules/@ethersproject/logger/src.ts/index.ts:261:28) {\r\n  reason: null,\r\n  code: 'CALL_EXCEPTION',\r\n  method: 'foo()',\r\n  data: '0x',\r\n  errorArgs: null,\r\n  errorName: null,\r\n  errorSignature: null,\r\n  address: '0x5fbdb2315678afecb367f032d93f642f64180aa3',\r\n  args: [],\r\n  transaction: {\r\n    data: '0xc2985578',\r\n    to: '0x5FbDB2315678afecb367f032d93F642f64180aa3',\r\n    from: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',\r\n    gasLimit: BigNumber { value: \"29021272\" }\r\n  }\r\n}\r\n```\r\n\r\nWhat am I doing wrong here?",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1116052076",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2658#issuecomment-1116052076",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658",
    "id": 1116052076,
    "node_id": "IC_kwDOB7jojM5ChZps",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-03T12:38:49Z",
    "updated_at": "2022-05-03T12:38:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-592/unable-to-call-simplest-method-of-freshly-deployed-contract).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 9b58e0cb-1ac3-4b69-8289-e784fafe74a3",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1116052076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1116294397",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2658#issuecomment-1116294397",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658",
    "id": 1116294397,
    "node_id": "IC_kwDOB7jojM5CiUz9",
    "user": {
      "login": "shottah",
      "id": 14793093,
      "node_id": "MDQ6VXNlcjE0NzkzMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14793093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shottah",
      "html_url": "https://github.com/shottah",
      "followers_url": "https://api.github.com/users/shottah/followers",
      "following_url": "https://api.github.com/users/shottah/following{/other_user}",
      "gists_url": "https://api.github.com/users/shottah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shottah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shottah/subscriptions",
      "organizations_url": "https://api.github.com/users/shottah/orgs",
      "repos_url": "https://api.github.com/users/shottah/repos",
      "events_url": "https://api.github.com/users/shottah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shottah/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-03T16:26:34Z",
    "updated_at": "2022-05-03T19:03:41Z",
    "author_association": "NONE",
    "body": "Are you using the following?\r\n\r\n```sh\r\n# npx hardhat run --network <network> script.js\r\nnpx hardhat run --network hardhat script.js\r\n```\r\n\r\nWhere <network> is configured in your `hardhat.config.js` like so:\r\n\r\n```ts\r\nconst config: HardhatUserConfig = {\r\n  defaultNetwork: \"hardhat\",\r\n  networks: {\r\n    hardhat: { ... }\r\n  }\r\n};\r\n```\r\n\r\nExcept replace `hardhat` with the live network you deployed to, and include the gRPC API and API Keys.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1116294397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1119805578",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2658#issuecomment-1119805578",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658",
    "id": 1119805578,
    "node_id": "IC_kwDOB7jojM5CvuCK",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-06T16:45:15Z",
    "updated_at": "2022-05-06T16:45:15Z",
    "author_association": "MEMBER",
    "body": "@hickscorp If you are using the Hardhat node, then the approach you use is usually something like this:\r\n\r\n1. In one terminal, start the node with `npx hardhat node`\r\n2. In another terminal, run your deploy script with `npx hardhat run --network localhost deploy.js`\r\n3. After that, you can run the code that does the `.attach`, but you have to use `--network localhost` again.\r\n\r\nIf you don't use `--network localhost`, then the default network, `hardhat`, will be used. This is an ephemeral, in-process network that is created with the command you are running and it's destroyed when it finishes. So if you deploy in that network and then run another script that does the `.attach` thing, this second script will try to make a call to an empty address (because nothing was deployed there).\r\n\r\nYou can [read this](https://hackmd.io/@fvictorio/hardhat-networks-and-providers) for a more in-depth explanation.\r\n\r\nHope that helps!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1119805578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126683647",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2658#issuecomment-1126683647",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2658",
    "id": 1126683647,
    "node_id": "IC_kwDOB7jojM5DJ9P_",
    "user": {
      "login": "cesarvarela",
      "id": 1172479,
      "node_id": "MDQ6VXNlcjExNzI0Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172479?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cesarvarela",
      "html_url": "https://github.com/cesarvarela",
      "followers_url": "https://api.github.com/users/cesarvarela/followers",
      "following_url": "https://api.github.com/users/cesarvarela/following{/other_user}",
      "gists_url": "https://api.github.com/users/cesarvarela/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cesarvarela/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cesarvarela/subscriptions",
      "organizations_url": "https://api.github.com/users/cesarvarela/orgs",
      "repos_url": "https://api.github.com/users/cesarvarela/repos",
      "events_url": "https://api.github.com/users/cesarvarela/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cesarvarela/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-14T10:02:28Z",
    "updated_at": "2022-05-14T10:02:28Z",
    "author_association": "NONE",
    "body": "Omg, I've spent a few hours dealing with this. \r\n\r\nMaybe a callout somewhere around the docs may save future developers some time? \r\n\r\nI think the intuition here is that it will use the localhost network by default (probably because of expecting something similar to web2 development).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1126683647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736",
  "id": 1241245496,
  "node_id": "I_kwDOB7jojM5J--c4",
  "number": 2736,
  "title": "Fork cache not working for Optimism and other networks",
  "user": {
    "login": "bernard-wagner",
    "id": 4208881,
    "node_id": "MDQ6VXNlcjQyMDg4ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4208881?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernard-wagner",
    "html_url": "https://github.com/bernard-wagner",
    "followers_url": "https://api.github.com/users/bernard-wagner/followers",
    "following_url": "https://api.github.com/users/bernard-wagner/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernard-wagner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernard-wagner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernard-wagner/subscriptions",
    "organizations_url": "https://api.github.com/users/bernard-wagner/orgs",
    "repos_url": "https://api.github.com/users/bernard-wagner/repos",
    "events_url": "https://api.github.com/users/bernard-wagner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernard-wagner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-05-19T05:47:54Z",
  "updated_at": "2022-12-14T00:14:35Z",
  "closed_at": "2022-09-14T17:01:01Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "## Overview\r\n\r\nhttps://github.com/NomicFoundation/hardhat/blob/e5e4a6e4d79cc79e03be90052059bb321645a542/packages/hardhat-core/src/internal/hardhat-network/provider/utils/makeForkClient.ts#L81\r\n\r\nWhen using Hardhat to fork Optimism Mainnet or other networks that do not have a predefined `maxReorg` caching will be disabled. \r\n\r\nIdeally `cacheToDiskEnabled` should use `maxReorg` instead of `actualMaxReorg`. This will enable caching on any chain as long as the block number is more than `FALLBACK_MAX_REORG` behind the latest.\r\n\r\nAlternative solution which will require more work: add an option to explicitly set the fork cache settings and if defined always cache.\r\n\r\n## Reproduce\r\n\r\n```\r\nnpx hardhat node --fork 'https://opt-mainnet.g.alchemy.com/v2/KEY' --fork-block-number 8540800\r\n```",
  "closed_by": {
    "login": "nomic-foundation-automation",
    "id": 101595155,
    "node_id": "U_kgDOBg44Ew",
    "avatar_url": "https://avatars.githubusercontent.com/u/101595155?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nomic-foundation-automation",
    "html_url": "https://github.com/nomic-foundation-automation",
    "followers_url": "https://api.github.com/users/nomic-foundation-automation/followers",
    "following_url": "https://api.github.com/users/nomic-foundation-automation/following{/other_user}",
    "gists_url": "https://api.github.com/users/nomic-foundation-automation/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nomic-foundation-automation/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nomic-foundation-automation/subscriptions",
    "organizations_url": "https://api.github.com/users/nomic-foundation-automation/orgs",
    "repos_url": "https://api.github.com/users/nomic-foundation-automation/repos",
    "events_url": "https://api.github.com/users/nomic-foundation-automation/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nomic-foundation-automation/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1131235707",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1131235707",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1131235707,
    "node_id": "IC_kwDOB7jojM5DbUl7",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-19T05:48:20Z",
    "updated_at": "2022-05-19T05:48:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-675/fork-cache-not-working-for-optimism-and-other-networks).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: d991fdc0-3adf-4a24-9e36-d39bec16672c",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1131235707/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1159373692",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1159373692",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1159373692,
    "node_id": "IC_kwDOB7jojM5FGqN8",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-06-18T06:36:02Z",
    "updated_at": "2022-06-18T06:36:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1159373692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1166204957",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1166204957",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1166204957,
    "node_id": "IC_kwDOB7jojM5FguAd",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-06-25T06:36:17Z",
    "updated_at": "2022-06-25T06:36:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1166204957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1193279340",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1193279340",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1193279340,
    "node_id": "IC_kwDOB7jojM5HH_9s",
    "user": {
      "login": "134dd3v",
      "id": 88387604,
      "node_id": "MDQ6VXNlcjg4Mzg3NjA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/88387604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/134dd3v",
      "html_url": "https://github.com/134dd3v",
      "followers_url": "https://api.github.com/users/134dd3v/followers",
      "following_url": "https://api.github.com/users/134dd3v/following{/other_user}",
      "gists_url": "https://api.github.com/users/134dd3v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/134dd3v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/134dd3v/subscriptions",
      "organizations_url": "https://api.github.com/users/134dd3v/orgs",
      "repos_url": "https://api.github.com/users/134dd3v/repos",
      "events_url": "https://api.github.com/users/134dd3v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/134dd3v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-24T09:20:04Z",
    "updated_at": "2022-07-24T09:20:35Z",
    "author_association": "NONE",
    "body": "This issue is still relevant. I'm facing this on arbitrum, the tests take about 3 mins to run and applying the changes in the PR #2737 makes it run in like 20 secs. I think this is an important issue which affects dev ex with hardhat, and the fix is one line change. I request maintainers to re-open this issue. cc @alcuadrado @fvictorio.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1193279340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1203621676",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1203621676",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1203621676,
    "node_id": "IC_kwDOB7jojM5Hvc8s",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-03T08:04:48Z",
    "updated_at": "2022-08-03T08:04:48Z",
    "author_association": "MEMBER",
    "body": "You are right @134dd3v, we'll try to prioritize this.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1203621676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1247380123",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2736#issuecomment-1247380123",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2736",
    "id": 1247380123,
    "node_id": "IC_kwDOB7jojM5KWYKb",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T22:52:35Z",
    "updated_at": "2022-09-14T22:52:35Z",
    "author_association": "MEMBER",
    "body": "Released in [`hardhat@2.11.2`](https://github.com/NomicFoundation/hardhat/releases/tag/hardhat%402.11.2)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1247380123/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

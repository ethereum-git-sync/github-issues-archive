{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1956",
  "id": 1027853500,
  "node_id": "I_kwDOB7jojM49Q8y8",
  "number": 1956,
  "title": "Incorrect address for contract deployed by impersonated account",
  "user": {
    "login": "chanhosuh",
    "id": 4645177,
    "node_id": "MDQ6VXNlcjQ2NDUxNzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4645177?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chanhosuh",
    "html_url": "https://github.com/chanhosuh",
    "followers_url": "https://api.github.com/users/chanhosuh/followers",
    "following_url": "https://api.github.com/users/chanhosuh/following{/other_user}",
    "gists_url": "https://api.github.com/users/chanhosuh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chanhosuh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chanhosuh/subscriptions",
    "organizations_url": "https://api.github.com/users/chanhosuh/orgs",
    "repos_url": "https://api.github.com/users/chanhosuh/repos",
    "events_url": "https://api.github.com/users/chanhosuh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chanhosuh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 4608461883,
      "node_id": "LA_kwDOB7jojM8AAAABEq-MOw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/blocked-reason:needs-ethers-support",
      "name": "blocked-reason:needs-ethers-support",
      "color": "B60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-10-15T22:05:36Z",
  "updated_at": "2022-12-30T14:39:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "This issue occurs on the regular (non-forked) hardhat network.\r\n\r\nIn hardhat 2.6.0 onwards, it is possible that a contract deployed by an impersonated account has a different address than one deployed by the same impersonated account in hardhat 2.5.0.\r\n\r\nIn my attempts at creating the MWE (see below repo), I found this bug seems highly dependent on the versions of installed dependencies allowed by Hardhat's requirements.  Doing a clean install of the deps did not, for me, result in the bug, but by using an older lockfile that had a slightly varying mix of versions, I was able to reproduce.\r\n\r\nHere is the repo with the necessary lockfile and basic test, along with steps to reproduce: https://github.com/chanhosuh/hardhat-bug",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956/timeline",
  "performed_via_github_app": null,
  "state_reason": "reopened"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1006010170",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1956#issuecomment-1006010170",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956",
    "id": 1006010170,
    "node_id": "IC_kwDOB7jojM479n86",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-05T19:21:17Z",
    "updated_at": "2022-01-05T19:21:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "We discussed this Issue in a team meeting and came to this conclusion: It seems that ethers is inferring the contract address from the signature of the transaction that deployed it, but in Hardhat the impersonated account transactions don't have legitimate signatures, so that inference is failing. ethers could change to support this, but we don't know if it will.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1006010170/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1185759535",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1956#issuecomment-1185759535",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956",
    "id": 1185759535,
    "node_id": "IC_kwDOB7jojM5GrUEv",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-15T17:37:47Z",
    "updated_at": "2022-07-15T17:37:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1185759535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1192797472",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1956#issuecomment-1192797472",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1956",
    "id": 1192797472,
    "node_id": "IC_kwDOB7jojM5HGKUg",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-22T17:37:58Z",
    "updated_at": "2022-07-22T17:37:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1192797472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023",
  "id": 1754430912,
  "node_id": "I_kwDOB7jojM5okn3A",
  "number": 4023,
  "title": "Hardhat Verify list networks expecting address parameter ",
  "user": {
    "login": "clauBv23",
    "id": 26546018,
    "node_id": "MDQ6VXNlcjI2NTQ2MDE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/26546018?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/clauBv23",
    "html_url": "https://github.com/clauBv23",
    "followers_url": "https://api.github.com/users/clauBv23/followers",
    "following_url": "https://api.github.com/users/clauBv23/following{/other_user}",
    "gists_url": "https://api.github.com/users/clauBv23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/clauBv23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/clauBv23/subscriptions",
    "organizations_url": "https://api.github.com/users/clauBv23/orgs",
    "repos_url": "https://api.github.com/users/clauBv23/repos",
    "events_url": "https://api.github.com/users/clauBv23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/clauBv23/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-06-13T09:22:08Z",
  "updated_at": "2023-06-13T09:22:22Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\n\n2.15.0\n\n### What happened?\n\nIn the hardhat-verify documentation when explaining [Multiple API keys and alternative block explorers](https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#multiple-api-keys-and-alternative-block-explorers) says that the way to see the entire supported networks list is running:\r\n\r\n`npx hardhat verify --list-networks`\r\n\r\nBut when using that command the following error is received:\r\n```\r\n Error in plugin @nomicfoundation/hardhat-verify: You didn’t provide any address. Please re-run the 'verify' task with the address of the contract you want to verify.\r\n\r\nMissingAddressError: You didn’t provide any address. Please re-run the 'verify' task with the address of the contract you want to verify.\r\n    at SimpleTaskDefinition.action (/home/claudia/projects/clau/usingHardhatVerify/node_modules/@nomicfoundation/hardhat-verify/src/index.ts:206:9)\r\n    at Environment._runTaskDefinition (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:330:35)\r\n    at Environment.run (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:163:25)\r\n    at /home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:289:29\r\n    at SimpleTaskDefinition.action (/home/claudia/projects/clau/usingHardhatVerify/node_modules/@nomicfoundation/hardhat-verify/src/index.ts:155:44)\r\n    at Environment._runTaskDefinition (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:330:35)\r\n    at Environment.run (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:163:25)\r\n    at main (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/cli/cli.ts:277:17)```\r\n```\r\n\r\nBy following the traces I realized that it happens because in the [main task](https://github.com/NomicFoundation/hardhat/blob/e6802042f635c0694324ab96a124c4b42abab9d2/packages/hardhat-verify/src/index.ts#L150-L161) before listing the networks or before checking if the networks should be listed, [the address is being checked](https://github.com/NomicFoundation/hardhat/blob/e6802042f635c0694324ab96a124c4b42abab9d2/packages/hardhat-verify/src/index.ts#L180-L182)  and due to is not being provided it fails. \r\n\r\n\r\n\r\nEffectively after adding an address in the command it works as expected\r\n\r\n`npx hardhat verify <any-address> --list-networks`\r\n\r\n\r\n```\r\nNetworks supported by hardhat-etherscan:\r\n\r\n╔══════════════════════╤════════════╗\r\n║ network              │ chain id   ║\r\n╟──────────────────────┼────────────╢\r\n║ mainnet              │ 1          ║\r\n╟──────────────────────┼────────────╢\r\n║ ropsten              │ 3          ║\r\n╟──────────────────────┼────────────╢\r\n║ rinkeby              │ 4          ║\r\n║              ...                  ║\r\n╟──────────────────────┼────────────╢\r\n║ harmonyTest          │ 1666700000 ║\r\n╚══════════════════════╧════════════╝\r\n\r\n\r\nCustom networks added by you or by plugins:\r\n\r\n╔═══════════════════════════════╗\r\n║ No custom networks were added ║\r\n╚═══════════════════════════════╝\r\n```\r\n\r\n\r\nIt doesn't feel natural for me to have to provide the contract address to verify the supported networks list, but in case it is the expected behaviour I would consider modifying it in the documentation. \n\n### Minimal reproduction steps\n\n1.  Create a simple hardhat project:\r\n         `npx hardhat `\r\n\r\n2.  Add hardhat-verify to the project :\r\n         `npm install --save-dev @nomicfoundation/hardhat-verify`\r\n\r\n3. Modify the hardhat configuration file as described in [the documentation](https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#usage)\r\n\r\n4. Run `npx hardhat verify --list-networks`\r\n\n\n### Search terms\n\nhardhat-verify list networks",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023",
  "id": 1754430912,
  "node_id": "I_kwDOB7jojM5okn3A",
  "number": 4023,
  "title": "Hardhat Verify list networks expecting address parameter ",
  "user": {
    "login": "clauBv23",
    "id": 26546018,
    "node_id": "MDQ6VXNlcjI2NTQ2MDE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/26546018?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/clauBv23",
    "html_url": "https://github.com/clauBv23",
    "followers_url": "https://api.github.com/users/clauBv23/followers",
    "following_url": "https://api.github.com/users/clauBv23/following{/other_user}",
    "gists_url": "https://api.github.com/users/clauBv23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/clauBv23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/clauBv23/subscriptions",
    "organizations_url": "https://api.github.com/users/clauBv23/orgs",
    "repos_url": "https://api.github.com/users/clauBv23/repos",
    "events_url": "https://api.github.com/users/clauBv23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/clauBv23/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    },
    {
      "id": 4952050233,
      "node_id": "LA_kwDOB7jojM8AAAABJypKOQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:hardhat-verify",
      "name": "area:hardhat-verify",
      "color": "5319E7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "schaable",
    "id": 1165424,
    "node_id": "MDQ6VXNlcjExNjU0MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/schaable",
    "html_url": "https://github.com/schaable",
    "followers_url": "https://api.github.com/users/schaable/followers",
    "following_url": "https://api.github.com/users/schaable/following{/other_user}",
    "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
    "organizations_url": "https://api.github.com/users/schaable/orgs",
    "repos_url": "https://api.github.com/users/schaable/repos",
    "events_url": "https://api.github.com/users/schaable/events{/privacy}",
    "received_events_url": "https://api.github.com/users/schaable/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "schaable",
      "id": 1165424,
      "node_id": "MDQ6VXNlcjExNjU0MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schaable",
      "html_url": "https://github.com/schaable",
      "followers_url": "https://api.github.com/users/schaable/followers",
      "following_url": "https://api.github.com/users/schaable/following{/other_user}",
      "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
      "organizations_url": "https://api.github.com/users/schaable/orgs",
      "repos_url": "https://api.github.com/users/schaable/repos",
      "events_url": "https://api.github.com/users/schaable/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schaable/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-06-13T09:22:08Z",
  "updated_at": "2023-06-16T07:14:47Z",
  "closed_at": "2023-06-16T07:14:47Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\n\n2.15.0\n\n### What happened?\n\nIn the hardhat-verify documentation when explaining [Multiple API keys and alternative block explorers](https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#multiple-api-keys-and-alternative-block-explorers) says that the way to see the entire supported networks list is running:\r\n\r\n`npx hardhat verify --list-networks`\r\n\r\nBut when using that command the following error is received:\r\n```\r\n Error in plugin @nomicfoundation/hardhat-verify: You didn’t provide any address. Please re-run the 'verify' task with the address of the contract you want to verify.\r\n\r\nMissingAddressError: You didn’t provide any address. Please re-run the 'verify' task with the address of the contract you want to verify.\r\n    at SimpleTaskDefinition.action (/home/claudia/projects/clau/usingHardhatVerify/node_modules/@nomicfoundation/hardhat-verify/src/index.ts:206:9)\r\n    at Environment._runTaskDefinition (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:330:35)\r\n    at Environment.run (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:163:25)\r\n    at /home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:289:29\r\n    at SimpleTaskDefinition.action (/home/claudia/projects/clau/usingHardhatVerify/node_modules/@nomicfoundation/hardhat-verify/src/index.ts:155:44)\r\n    at Environment._runTaskDefinition (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:330:35)\r\n    at Environment.run (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/core/runtime-environment.ts:163:25)\r\n    at main (/home/claudia/projects/clau/usingHardhatVerify/node_modules/hardhat/src/internal/cli/cli.ts:277:17)```\r\n```\r\n\r\nBy following the traces I realized that it happens because in the [main task](https://github.com/NomicFoundation/hardhat/blob/e6802042f635c0694324ab96a124c4b42abab9d2/packages/hardhat-verify/src/index.ts#L150-L161) before listing the networks or before checking if the networks should be listed, [the address is being checked](https://github.com/NomicFoundation/hardhat/blob/e6802042f635c0694324ab96a124c4b42abab9d2/packages/hardhat-verify/src/index.ts#L180-L182)  and due to is not being provided it fails. \r\n\r\n\r\n\r\nEffectively after adding an address in the command it works as expected\r\n\r\n`npx hardhat verify <any-address> --list-networks`\r\n\r\n\r\n```\r\nNetworks supported by hardhat-etherscan:\r\n\r\n╔══════════════════════╤════════════╗\r\n║ network              │ chain id   ║\r\n╟──────────────────────┼────────────╢\r\n║ mainnet              │ 1          ║\r\n╟──────────────────────┼────────────╢\r\n║ ropsten              │ 3          ║\r\n╟──────────────────────┼────────────╢\r\n║ rinkeby              │ 4          ║\r\n║              ...                  ║\r\n╟──────────────────────┼────────────╢\r\n║ harmonyTest          │ 1666700000 ║\r\n╚══════════════════════╧════════════╝\r\n\r\n\r\nCustom networks added by you or by plugins:\r\n\r\n╔═══════════════════════════════╗\r\n║ No custom networks were added ║\r\n╚═══════════════════════════════╝\r\n```\r\n\r\n\r\nIt doesn't feel natural for me to have to provide the contract address to verify the supported networks list, but in case it is the expected behaviour I would consider modifying it in the documentation. \n\n### Minimal reproduction steps\n\n1.  Create a simple hardhat project:\r\n         `npx hardhat `\r\n\r\n2.  Add hardhat-verify to the project :\r\n         `npm install --save-dev @nomicfoundation/hardhat-verify`\r\n\r\n3. Modify the hardhat configuration file as described in [the documentation](https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#usage)\r\n\r\n4. Run `npx hardhat verify --list-networks`\r\n\n\n### Search terms\n\nhardhat-verify list networks",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1590709878",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023#issuecomment-1590709878",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
    "id": 1590709878,
    "node_id": "IC_kwDOB7jojM5e0E52",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T08:21:20Z",
    "updated_at": "2023-06-14T08:21:20Z",
    "author_association": "MEMBER",
    "body": "Oh damn. Thanks, this should be an easy fix.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1590709878/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591033938",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023#issuecomment-1591033938",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
    "id": 1591033938,
    "node_id": "IC_kwDOB7jojM5e1UBS",
    "user": {
      "login": "clauBv23",
      "id": 26546018,
      "node_id": "MDQ6VXNlcjI2NTQ2MDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/26546018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clauBv23",
      "html_url": "https://github.com/clauBv23",
      "followers_url": "https://api.github.com/users/clauBv23/followers",
      "following_url": "https://api.github.com/users/clauBv23/following{/other_user}",
      "gists_url": "https://api.github.com/users/clauBv23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clauBv23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clauBv23/subscriptions",
      "organizations_url": "https://api.github.com/users/clauBv23/orgs",
      "repos_url": "https://api.github.com/users/clauBv23/repos",
      "events_url": "https://api.github.com/users/clauBv23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clauBv23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T11:43:56Z",
    "updated_at": "2023-06-14T11:43:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Indeed, I would like to contribute to this task, if possible, I already pointed up what is the problem and where it is. I would just have a question: should there be automated tests to check it works?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591033938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591108623",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023#issuecomment-1591108623",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
    "id": 1591108623,
    "node_id": "IC_kwDOB7jojM5e1mQP",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T12:35:11Z",
    "updated_at": "2023-06-14T12:35:11Z",
    "author_association": "MEMBER",
    "body": "Yes, we should add a test for this. It should be easy, but let me know if you need pointers!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591108623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591222531",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4023#issuecomment-1591222531",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4023",
    "id": 1591222531,
    "node_id": "IC_kwDOB7jojM5e2CED",
    "user": {
      "login": "clauBv23",
      "id": 26546018,
      "node_id": "MDQ6VXNlcjI2NTQ2MDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/26546018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clauBv23",
      "html_url": "https://github.com/clauBv23",
      "followers_url": "https://api.github.com/users/clauBv23/followers",
      "following_url": "https://api.github.com/users/clauBv23/following{/other_user}",
      "gists_url": "https://api.github.com/users/clauBv23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clauBv23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clauBv23/subscriptions",
      "organizations_url": "https://api.github.com/users/clauBv23/orgs",
      "repos_url": "https://api.github.com/users/clauBv23/repos",
      "events_url": "https://api.github.com/users/clauBv23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clauBv23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T13:34:44Z",
    "updated_at": "2023-06-14T13:34:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @fvictorio!! I created this PR #4030 with a really simple test, I wasn't sure how it should be tested and I think it was not been done, if you could give me some feedback and guidance on how it should be done I would appreciate it.\r\n\r\nthere is also a typo on the[ test file ](https://github.com/NomicFoundation/hardhat/blob/e6802042f635c0694324ab96a124c4b42abab9d2/packages/hardhat-verify/test/unit/index.ts#LL45C27-L45C36) not sure how should I proceed? create a new PR to fix it, or only do it on the one already created?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591222531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

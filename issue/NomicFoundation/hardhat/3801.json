{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3801",
  "id": 1645630475,
  "node_id": "I_kwDOB7jojM5iFlQL",
  "number": 3801,
  "title": " event args array is not available in the transaction receipt #3800 ",
  "user": {
    "login": "makinghappen",
    "id": 100151762,
    "node_id": "U_kgDOBfgx0g",
    "avatar_url": "https://avatars.githubusercontent.com/u/100151762?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/makinghappen",
    "html_url": "https://github.com/makinghappen",
    "followers_url": "https://api.github.com/users/makinghappen/followers",
    "following_url": "https://api.github.com/users/makinghappen/following{/other_user}",
    "gists_url": "https://api.github.com/users/makinghappen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/makinghappen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/makinghappen/subscriptions",
    "organizations_url": "https://api.github.com/users/makinghappen/orgs",
    "repos_url": "https://api.github.com/users/makinghappen/repos",
    "events_url": "https://api.github.com/users/makinghappen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/makinghappen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-29T11:44:35Z",
  "updated_at": "2023-04-05T10:35:21Z",
  "closed_at": "2023-04-04T09:20:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\r\n\r\n2.13\r\n\r\n### What happened?\r\n\r\n\r\nevent args array is not available in the transaction receipt\r\n\r\n```\r\n{\r\n  transactionIndex: 4,\r\n  blockNumber: 33710309,\r\n  transactionHash: '0x5f9893f7a19d8c774a0ff91bd62756ddbd68c0bcc3c4b0b6082daa20a924d4ff',\r\n  address: '0x0000000000000000000000000000000000001010',\r\n  topics: [\r\n    '0x4dfe1bbbcf077ddc3e01291eea2d5c70c2b422b415d95645b9adcfd678cb1d63',\r\n    '0x0000000000000000000000000000000000000000000000000000000000001010',\r\n    '0x0000000000000000000000003089c7c8f5aa2be20531634df9c12b72eaa79b0a',\r\n    '0x000000000000000000000000c26880a0af2ea0c7e8130e6ec47af756465452e8'\r\n  ],\r\n  data: '0x000000000000000000000000000000000000000000000000000143168667c60000000000000000000000000000000000000000000000000025f72f82d21626d5000000000000000000000000000000000000000000001d059ecbf0cf4a1014c000000000000000000000000000000000000000000000000025f5ec6c4bae60d5000000000000000000000000000000000000000000001d059ecd33e5d077dac0',\r\n  logIndex: 11,\r\n  blockHash: '0xcc7bb29c92f4e7cd4b4ef2dc48577a4b0d6792b5f0bb68a771d945c701b35611',\r\n  removeListener: [Function (anonymous)],\r\n  getBlock: [Function (anonymous)],\r\n  getTransaction: [Function (anonymous)],\r\n  getTransactionReceipt: [Function (anonymous)]\r\n}\r\n```\r\n\r\n\r\n### Minimal reproduction steps\r\n\r\n\r\na dependency you will need:\r\n`npm install witnet/witnet-solidity-bridge#feat/bytecodes`\r\n\r\nhardhat task code:\r\n\r\n\r\n```\r\nconst fs = require(\"fs/promises\");\r\nconst path = require(\"node:path\");\r\n\r\nconst ecosystem = \"polygon\";\r\nconst network = \"polygon.goerli\";\r\n\r\nconst witnetAddresses = require(\"witnet-solidity-bridge/migrations/witnet.addresses\")[ecosystem][network];\r\n\r\nconsole.log(witnetAddresses)\r\n\r\nlet contractAddresses;\r\n\r\n(async () => {\r\n  const contractAddressesJson = await fs.readFile(path.join(__dirname, `../abi/addresses.json`));\r\n  if (typeof contractAddressesJson !== \"undefined\") {\r\n    contractAddresses = JSON.parse(contractAddressesJson);\r\n  } else {\r\n    console.log(`contract addresses file not found at ../abi/addresses.json`);\r\n  }\r\n})();\r\n\r\ntask(\"witnetConfig\", \"configure Witnet facet\")\r\n  // .addParam(\"taskContract\", \"task contract\")\r\n  // .addParam(\"messageText\", \"message text\")\r\n  .setAction(async function (taskArguments, hre, runSuper) {\r\n    await configureWitnet();\r\n    console.log(`updated witnet config`);\r\n  });\r\n\r\nasync function configureWitnet() {\r\n  let requestHashes;\r\n  try {\r\n    const existingRequestHashes = await fs.readFile(path.join(__dirname, `../abi/witnet-requesthashes.json`));\r\n    if (typeof existingRequestHashes !== \"undefined\") {\r\n      requestHashes = JSON.parse(existingRequestHashes);\r\n    }\r\n  } catch (error) {\r\n    requestHashes = {\r\n      hashes: {},\r\n    };\r\n  }\r\n\r\n  console.log(\"verifying\");\r\n  if(typeof requestHashes.hashes[this.__hardhatContext.environment.network.config.chainId] == \"undefined\"){\r\n    requestHashes.hashes[this.__hardhatContext.environment.network.config.chainId] = {};\r\n  }\r\n\r\n  const witnetBytecodes = await ethers.getContractAt(\"IWitnetBytecodes\", witnetAddresses.WitnetBytecodes);\r\n  // const witnetV2 = await ethers.getContractAt('WitnetV2', diamondAddress)\r\n\r\n  // WitnetV2.DataRequestMethods\r\n  // /* 0 */ Unknown,\r\n  // /* 1 */ HttpGet,\r\n  // /* 2 */ Rng,\r\n  // /* 3 */ HttpPost\r\nconsole.log(requestHashes)\r\n\r\n  if (\r\n    typeof requestHashes.hashes[this.__hardhatContext.environment.network.config.chainId] == \"undefined\" ||\r\n    typeof requestHashes.hashes[this.__hardhatContext.environment.network.config.chainId].NewDataSourceHash ==\r\n      \"undefined\"\r\n  ) {\r\n    console.log(`verifying datasource`);\r\n\r\n    await witnetBytecodes.on(\"NewDataSourceHash\", (NewDataSourceHash, event) => {\r\n      console.log(\"received event\");\r\n      console.log(NewDataSourceHash, type);\r\n    });\r\n    const dataSource = await witnetBytecodes.verifyDataSource(\r\n      1, // requestMethod\r\n      /* requestSchema */ \"\",\r\n      /* requestAuthority */ \"https://api.github.com\", // => will be substituted w/ WittyPixelsLib.baseURI() on next mint\r\n      /* requestPath */ \"repos/\\\\0\\\\/pulls\", // => will by substituted w/ tokenId on next mint\r\n      /* requestQuery */ \"state=all\",\r\n      /* requestBody */ \"\",\r\n      [], // requestHeaders\r\n      \"0x8218771869\" // requestRadonScript\r\n      , { gasLimit: 8000000 }\r\n    );\r\n\r\n    const dataSourceReceipt = await dataSource.wait();\r\n    console.log(dataSourceReceipt.events[0])\r\n    }\r\n}\r\n\r\n```\r\n\r\n### Search terms\r\n\r\nhardhat transactionReceipt events args",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1495633606",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3801#issuecomment-1495633606",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801",
    "id": 1495633606,
    "node_id": "IC_kwDOB7jojM5ZJY7G",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-04T09:20:50Z",
    "updated_at": "2023-04-04T09:20:50Z",
    "author_association": "MEMBER",
    "body": "Hi @makinghappen, can you provide a more minimal example showing what the issue is? I only skimmed the code but it seems clear to me that it's not complete (and that it would have too much noise if it was).\r\n\r\nI'm tentatively closing this, but will re-open if you can provide the \r\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1495633606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1497272126",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3801#issuecomment-1497272126",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3801",
    "id": 1497272126,
    "node_id": "IC_kwDOB7jojM5ZPo8-",
    "user": {
      "login": "makinghappen",
      "id": 100151762,
      "node_id": "U_kgDOBfgx0g",
      "avatar_url": "https://avatars.githubusercontent.com/u/100151762?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makinghappen",
      "html_url": "https://github.com/makinghappen",
      "followers_url": "https://api.github.com/users/makinghappen/followers",
      "following_url": "https://api.github.com/users/makinghappen/following{/other_user}",
      "gists_url": "https://api.github.com/users/makinghappen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makinghappen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makinghappen/subscriptions",
      "organizations_url": "https://api.github.com/users/makinghappen/orgs",
      "repos_url": "https://api.github.com/users/makinghappen/repos",
      "events_url": "https://api.github.com/users/makinghappen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makinghappen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-05T10:35:21Z",
    "updated_at": "2023-04-05T10:35:21Z",
    "author_association": "NONE",
    "body": "issue solved, was actually an issue with the smart contract",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1497272126/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

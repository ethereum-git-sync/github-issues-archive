{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1374",
  "id": 851311972,
  "node_id": "MDU6SXNzdWU4NTEzMTE5NzI=",
  "number": 1374,
  "title": "Better API for Plugin is needed",
  "user": {
    "login": "wighawag",
    "id": 790580,
    "node_id": "MDQ6VXNlcjc5MDU4MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/790580?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wighawag",
    "html_url": "https://github.com/wighawag",
    "followers_url": "https://api.github.com/users/wighawag/followers",
    "following_url": "https://api.github.com/users/wighawag/following{/other_user}",
    "gists_url": "https://api.github.com/users/wighawag/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wighawag/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wighawag/subscriptions",
    "organizations_url": "https://api.github.com/users/wighawag/orgs",
    "repos_url": "https://api.github.com/users/wighawag/repos",
    "events_url": "https://api.github.com/users/wighawag/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wighawag/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-04-06T11:03:42Z",
  "updated_at": "2023-03-30T00:14:13Z",
  "closed_at": "2022-12-29T13:21:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": "resolved",
  "body": "Issues across plugins keep popping up and part of it is due to no clear semantic of the HRE's field\r\n\r\nexample of issues :\r\n- https://github.com/nomiclabs/hardhat/issues/1030\r\n\r\nHere the issue is that some field are supposed to be static while some are dynamic. it would be great to clearly differentiate between the 2 or even better make sure hardhat always support the dynamic case (which make more interesting plugin possible)\r\n\r\n- https://github.com/sc-forks/solidity-coverage/issues/624\r\n\r\nThis issue arise from the fact that solidity-coverage assume no plugin is accessing the hre.network field before end.\r\nTo go around the issue hardhat-deploy which was proviously accessing it at import time, is now wrapping it in a lazyObject. \r\n\r\n\r\nIt would be great if hardhat expose a strict plugin api that resolve this by ensuring plugin can access and transform each field in turn. \r\n\r\nWe could for example have a hook so plugin can transform the network field. The current hook (extendEnvironment) is probably not that well suited as for example, in the case of coverage it must be triggered on task invocation\r\n\r\nI curently do not have a clear way forward in mind, but would be great to get a discussion going among plugin developer to help make hardhat even better\r\n\r\n",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/814101456",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1374#issuecomment-814101456",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374",
    "id": 814101456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDEwMTQ1Ng==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-06T13:01:53Z",
    "updated_at": "2021-04-06T13:01:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Agree this would be really useful. Even just a list of best practices we should all follow would be great to have.  \r\n\r\nAnother place plugins have come into conflict is around wrapping the provider, ([example here][1]) ... would love a guide for the best way of doing this. \r\n\r\n[1]: https://github.com/zemse/hardhat-tracer/issues/3",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/814101456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/814296674",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1374#issuecomment-814296674",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374",
    "id": 814296674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDI5NjY3NA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-06T17:25:13Z",
    "updated_at": "2021-04-06T17:25:13Z",
    "author_association": "MEMBER",
    "body": "Thanks for opening this issue, @wighawag! And also for your feedback, @cgewecke! We won't be able to address this super soon, as we are at full capacity keeping up with the upcoming hardforks and solidity changes, but eventually we will. \r\n\r\nAs Chris mentioned, I think the first step would be to provide some kind of guidelines about what is expected from plugins and what is not. These guidelines will probably discourage things that some plugins are already doing, but that's fine, as this will help us understand the limitations of the plugin system and guide the design of new APIs.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/814296674/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367315311",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1374#issuecomment-1367315311",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1374",
    "id": 1367315311,
    "node_id": "IC_kwDOB7jojM5Rf5Nv",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-29T13:21:00Z",
    "updated_at": "2022-12-29T13:21:00Z",
    "author_association": "MEMBER",
    "body": "I'm going to close this issue in favor of #3491 (about having a better guide for this) and #3492 (for discussing the future of the plugin system in the next major version). Thanks a lot @wighawag and @cgewecke!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1367315311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

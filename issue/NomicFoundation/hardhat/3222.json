{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3222",
  "id": 1389517733,
  "node_id": "I_kwDOB7jojM5S0lul",
  "number": 3222,
  "title": "Warning: Calling an account which is not a contract",
  "user": {
    "login": "w3nda",
    "id": 12185681,
    "node_id": "MDQ6VXNlcjEyMTg1Njgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12185681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/w3nda",
    "html_url": "https://github.com/w3nda",
    "followers_url": "https://api.github.com/users/w3nda/followers",
    "following_url": "https://api.github.com/users/w3nda/following{/other_user}",
    "gists_url": "https://api.github.com/users/w3nda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/w3nda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/w3nda/subscriptions",
    "organizations_url": "https://api.github.com/users/w3nda/orgs",
    "repos_url": "https://api.github.com/users/w3nda/repos",
    "events_url": "https://api.github.com/users/w3nda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/w3nda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-28T14:59:36Z",
  "updated_at": "2022-12-29T00:14:01Z",
  "closed_at": "2022-09-29T12:34:00Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "<!--\r\n\r\nThank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\nThis issue will be automatically assigned to a Hardhat team member. This person will act as the point of contact between you and the team, but won't necessarily fix it nor address it in any way. An issue being assigned does not mean that it's being worked on.\r\n\r\n-->\r\n\r\nHey hardhat team! \r\nI am seeing the following warning: \r\n```\r\n  WARNING: Calling an account which is not a contract\r\n  From:                0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\r\n  To:                  0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\r\n```\r\n\r\nTo give a little context, I am using the localhost network with hardhat node.\r\nI have two contracts that I wrote to try to reproduce a re-entrancy attack.\r\n\r\nThis is a flow example of what I trigger.\r\n```\r\ncontractA.attack() -> contractB.withdraw() ->  msg.sender.call{value: someEther}(\"\") -> contractB.withdraw()\r\n```\r\nand that withdraw loop ends when contractB runs out of balance.\r\n\r\nIn simple terms, from a js script I trigger contractA.attack -> that triggers a withdraw function in contractB.\r\nThen contractB is calling a fallback function using msg.sender.call (in contractA) and then the loop continues until I drain all the funds from contractB.\r\n\r\nThe warning that I am seeing, is happening multiple times, indicating that it is happening when `message.sender.call` is triggered, problem is I don't understand how msg.sender is not address(contractA) and the initial sender address (accounts[0])\r\n\r\nCan you please suggest what am I doing wrong?",
  "closed_by": {
    "login": "w3nda",
    "id": 12185681,
    "node_id": "MDQ6VXNlcjEyMTg1Njgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12185681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/w3nda",
    "html_url": "https://github.com/w3nda",
    "followers_url": "https://api.github.com/users/w3nda/followers",
    "following_url": "https://api.github.com/users/w3nda/following{/other_user}",
    "gists_url": "https://api.github.com/users/w3nda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/w3nda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/w3nda/subscriptions",
    "organizations_url": "https://api.github.com/users/w3nda/orgs",
    "repos_url": "https://api.github.com/users/w3nda/repos",
    "events_url": "https://api.github.com/users/w3nda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/w3nda/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1261044580",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3222#issuecomment-1261044580",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222",
    "id": 1261044580,
    "node_id": "IC_kwDOB7jojM5LKgNk",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-09-28T15:00:08Z",
    "updated_at": "2022-09-28T15:00:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1217/warning-calling-an-account-which-is-not-a-contract).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 188c0d2f-5dd7-4bcf-b00d-d08121bcccb8",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1261044580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1262212922",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3222#issuecomment-1262212922",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3222",
    "id": 1262212922,
    "node_id": "IC_kwDOB7jojM5LO9c6",
    "user": {
      "login": "w3nda",
      "id": 12185681,
      "node_id": "MDQ6VXNlcjEyMTg1Njgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12185681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/w3nda",
      "html_url": "https://github.com/w3nda",
      "followers_url": "https://api.github.com/users/w3nda/followers",
      "following_url": "https://api.github.com/users/w3nda/following{/other_user}",
      "gists_url": "https://api.github.com/users/w3nda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/w3nda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/w3nda/subscriptions",
      "organizations_url": "https://api.github.com/users/w3nda/orgs",
      "repos_url": "https://api.github.com/users/w3nda/repos",
      "events_url": "https://api.github.com/users/w3nda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/w3nda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T12:34:00Z",
    "updated_at": "2022-09-29T12:34:00Z",
    "author_association": "NONE",
    "body": "Closing this, was unrelated to hardhat.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1262212922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

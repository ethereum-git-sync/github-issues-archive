{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425",
  "id": 1495839719,
  "node_id": "I_kwDOB7jojM5ZKLPn",
  "number": 3425,
  "title": "\"Sorry you have been blocked\" when attempting to verify contract on PolygonScan",
  "user": {
    "login": "grapevinegizmos",
    "id": 8684037,
    "node_id": "MDQ6VXNlcjg2ODQwMzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8684037?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/grapevinegizmos",
    "html_url": "https://github.com/grapevinegizmos",
    "followers_url": "https://api.github.com/users/grapevinegizmos/followers",
    "following_url": "https://api.github.com/users/grapevinegizmos/following{/other_user}",
    "gists_url": "https://api.github.com/users/grapevinegizmos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/grapevinegizmos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/grapevinegizmos/subscriptions",
    "organizations_url": "https://api.github.com/users/grapevinegizmos/orgs",
    "repos_url": "https://api.github.com/users/grapevinegizmos/repos",
    "events_url": "https://api.github.com/users/grapevinegizmos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/grapevinegizmos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-12-14T06:36:15Z",
  "updated_at": "2023-03-24T00:13:44Z",
  "closed_at": "2022-12-14T11:31:20Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Hi I'm running a script to verify a contract deployed to Polygon Mumbai:\r\n\r\nHere's the script:\r\n\r\n```\r\nasync function main() {\r\n    console.log(\"foo\");\r\n    await hardhat.run(\"verify:verify\", {\r\n        address: '0xf6943e4E99f27a2A4E49C7Af51CB252eFBcf9B1A',\r\n        constructorArguments: [\r\n            'Foo',\r\n            'FOO',\r\n            { \r\n              id: \"AB9C939X\",\r\n              name: 'Foo', \r\n              symbol: 'FOO', \r\n              publisher: '0x59F5B98D5b5fc01c8aE10238b93618053E62BE20', \r\n              royaltyAccount: '0x59F5B98D5b5fc01c8aE10238b93618053E62BE20', \r\n              royaltyBasisPoints: 0,\r\n              editionLimit: 10, \r\n              premint: 'false',\r\n              licenseAddress: '0x7A843257128b46C757B89a49b3495A45e43219f8', \r\n              rootTemplateName: 'bknft_agreement_template.0.0.1', \r\n              requiresSignature: 'true', \r\n            },\r\n            ['PrivateViewingEntitlement'],\r\n        ]\r\n    })\r\n}\r\n```\r\n\r\nI've tried two different api keys, it keeps returning\r\n```\r\nNomicLabsHardhatPluginError: Failed to send contract verification request.\r\nEndpoint URL: https://api-testnet.polygonscan.com/api\r\nThe HTTP server response is not ok. Status code: 403 Response text: <!DOCTYPE html>\r\n````\r\nAnd then a webpage that looks like this:\r\n<img width=\"1248\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8684037/207523490-719af2fd-8088-4cdd-b4fb-5b8ca99a15af.png\">\r\n\r\nNo obvious way for me to contact Polyganscan directly to ask them, so any ideas you might have would be great.\r\n\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "nomic-foundation-automation",
    "id": 101595155,
    "node_id": "U_kgDOBg44Ew",
    "avatar_url": "https://avatars.githubusercontent.com/u/101595155?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nomic-foundation-automation",
    "html_url": "https://github.com/nomic-foundation-automation",
    "followers_url": "https://api.github.com/users/nomic-foundation-automation/followers",
    "following_url": "https://api.github.com/users/nomic-foundation-automation/following{/other_user}",
    "gists_url": "https://api.github.com/users/nomic-foundation-automation/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nomic-foundation-automation/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nomic-foundation-automation/subscriptions",
    "organizations_url": "https://api.github.com/users/nomic-foundation-automation/orgs",
    "repos_url": "https://api.github.com/users/nomic-foundation-automation/repos",
    "events_url": "https://api.github.com/users/nomic-foundation-automation/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nomic-foundation-automation/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1350484184",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425#issuecomment-1350484184",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
    "id": 1350484184,
    "node_id": "IC_kwDOB7jojM5QfsDY",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-12-14T06:36:36Z",
    "updated_at": "2022-12-14T06:36:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1386/sorry-you-have-blocked-when-attempting-to-verify-contract-on).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 96b2bf3d-59c0-4c0f-be53-86e20219963a",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1350484184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1351064922",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425#issuecomment-1351064922",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
    "id": 1351064922,
    "node_id": "IC_kwDOB7jojM5Qh51a",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-14T11:31:20Z",
    "updated_at": "2022-12-14T11:31:20Z",
    "author_association": "MEMBER",
    "body": "Sorry @grapevinegizmos but there's nothing we can do about this. You can either wait (assuming is a temporary block) or maybe try using a VPN.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1351064922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1363563042",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425#issuecomment-1363563042",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
    "id": 1363563042,
    "node_id": "IC_kwDOB7jojM5RRlIi",
    "user": {
      "login": "grapevinegizmos",
      "id": 8684037,
      "node_id": "MDQ6VXNlcjg2ODQwMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8684037?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grapevinegizmos",
      "html_url": "https://github.com/grapevinegizmos",
      "followers_url": "https://api.github.com/users/grapevinegizmos/followers",
      "following_url": "https://api.github.com/users/grapevinegizmos/following{/other_user}",
      "gists_url": "https://api.github.com/users/grapevinegizmos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grapevinegizmos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grapevinegizmos/subscriptions",
      "organizations_url": "https://api.github.com/users/grapevinegizmos/orgs",
      "repos_url": "https://api.github.com/users/grapevinegizmos/repos",
      "events_url": "https://api.github.com/users/grapevinegizmos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grapevinegizmos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T02:57:06Z",
    "updated_at": "2022-12-23T02:57:06Z",
    "author_association": "NONE",
    "body": "I am hoping that there is some kind of workaround for this problem possible from NomicLabs -- not with respect to the cloudflare block but alternate ways to get my contract verified..\r\n\r\nA few things -- I have determined that it not my particular IP address that is being blocked, it something about either the script or the contract.  I have been able to successfully verify other contracts using the normal command line syntax\r\n\r\nI was attempting to see if I could use the command line syntax to validate the contract in question (0x6B5daC3c722B799967480824e216fCfa26597c6a( (origianlly authored in Hardhat), but the command line does not appear to have any means for entering tuples as constructor argument on the command line., and one of the constructor argument is a struct.  As far as I can tell from other issues here what that problem is mentioned, there doesn't seem to be any method of encoding structs to use the command line form `hh verify [contract address] constructor args'\r\n\r\nBut maybe there is a workaround?  I have been able successfully verify other contracts on the command line.\r\n\r\nThe other approach I was trying was to use the webform on ehterscan, but that form requires a flattened version of the file because it refers to more than 10 other contracts.    And unforunately flatten doesn't work on my contract because it has cyclic dependencies.  Those dependencies don't interfere with the operation of the contract which works fine, but they do prevent me from using the flattener tool.  Its also true that cyclic dependencies are not a blocker to verification:  contracts which contain them are verified without issue using the command line tool.  (See examples here:  0x70A3DB6b7C748631E1cec30aE15E3f2c46F85EbF & 0xeda45fb71013167E88587db0aFd6030Dc9C86572 on polygon mumbai -- these two depend on each other, and i verified using hh verify)\r\n\r\nThe graph is quite deep on this contract, I think there are something like 12 contracts involved (including several open Zep  conxtracts) so I seem to be stymied on that path as well.  \r\n\r\nUnless perhaps you can tell me if its possible to manually produce a flattened version notwithstanding the cyclic dependencies (and the fact that the spx license is different between some of these contracts which seems to upset the hardhat compiler.)\r\n\r\n If it wasn't critical that I be able to verify, I would just let it go, but unforunately I need verification for my clients.\r\n\r\nThanks.  In the meanwhile I will continue to pursue etherscan to see if they can help me identify the cause of the cloudflare block.  Many thanks.\r\n\r\n\r\n\r\nThe script I tried:\r\n\r\nasync function main() {\r\n    console.log(\"foo\");\r\n    await hardhat.run(\"verify:verify\", {\r\n        address: '0x6B5daC3c722B799967480824e216fCfa26597c6a',\r\n        constructorArguments: [\r\n            'Stack',//'Foo',\r\n            'hill',//\"FOO\"',\r\n            { \r\n              id: \"AB9C939X\",\r\n              name: 'Nonce', //Foo', \r\n              symbol: 'GMD', //FOO \r\n              publisher: '0x59F5B98D5b5fc01c8aE10238b93618053E62BE20', \r\n              royaltyAccount: '0x59F5B98D5b5fc01c8aE10238b93618053E62BE20', \r\n              royaltyBasisPoints: 0,\r\n              editionLimit: 10, \r\n              premint: 'false',\r\n              licenseAddress: '0x7A843257128b46C757B89a49b3495A45e43219f8', \r\n              rootTemplateName: 'bknft_agreement_template.0.0.1', \r\n              requiresSignature: 'true', \r\n            },\r\n            ['PrivateViewingEntitlement'],\r\n        ]\r\n    })\r\n}",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1363563042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364092025",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425#issuecomment-1364092025",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
    "id": 1364092025,
    "node_id": "IC_kwDOB7jojM5RTmR5",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T16:19:58Z",
    "updated_at": "2022-12-23T16:19:58Z",
    "author_association": "MEMBER",
    "body": "> but the command line does not appear to have any means for entering tuples as constructor argument on the command line.\r\n\r\nhttps://hardhat.org/hardhat-runner/plugins/nomiclabs-hardhat-etherscan#complex-arguments",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364092025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364111737",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3425#issuecomment-1364111737",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3425",
    "id": 1364111737,
    "node_id": "IC_kwDOB7jojM5RTrF5",
    "user": {
      "login": "grapevinegizmos",
      "id": 8684037,
      "node_id": "MDQ6VXNlcjg2ODQwMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8684037?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grapevinegizmos",
      "html_url": "https://github.com/grapevinegizmos",
      "followers_url": "https://api.github.com/users/grapevinegizmos/followers",
      "following_url": "https://api.github.com/users/grapevinegizmos/following{/other_user}",
      "gists_url": "https://api.github.com/users/grapevinegizmos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grapevinegizmos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grapevinegizmos/subscriptions",
      "organizations_url": "https://api.github.com/users/grapevinegizmos/orgs",
      "repos_url": "https://api.github.com/users/grapevinegizmos/repos",
      "events_url": "https://api.github.com/users/grapevinegizmos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grapevinegizmos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-23T16:51:44Z",
    "updated_at": "2022-12-23T16:51:44Z",
    "author_association": "NONE",
    "body": "I'm well aware of this option Franco.   In my comment above you can see that I used this technique for complex arguments in my verify script.   My question was whether there is a way to enter complex arguments directly on the command line -something like 'hh verify [address] \"{name: \"John smith\", age: 42}\".  The script is what keeps getting blocked by cloud flare.  Running verify on the command line does not.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1364111737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

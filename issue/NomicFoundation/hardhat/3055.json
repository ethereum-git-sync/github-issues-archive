{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055",
  "id": 1342357263,
  "node_id": "I_kwDOB7jojM5QAr8P",
  "number": 3055,
  "title": "hardhat test ignores reason string when running on localhost",
  "user": {
    "login": "BKopyIo",
    "id": 111377116,
    "node_id": "U_kgDOBqN63A",
    "avatar_url": "https://avatars.githubusercontent.com/u/111377116?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BKopyIo",
    "html_url": "https://github.com/BKopyIo",
    "followers_url": "https://api.github.com/users/BKopyIo/followers",
    "following_url": "https://api.github.com/users/BKopyIo/following{/other_user}",
    "gists_url": "https://api.github.com/users/BKopyIo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BKopyIo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BKopyIo/subscriptions",
    "organizations_url": "https://api.github.com/users/BKopyIo/orgs",
    "repos_url": "https://api.github.com/users/BKopyIo/repos",
    "events_url": "https://api.github.com/users/BKopyIo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BKopyIo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-08-17T22:41:50Z",
  "updated_at": "2023-03-29T00:15:44Z",
  "closed_at": "2022-12-28T08:31:15Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "I get the following message running hh test --network localhost:\r\n\r\n```\r\nError: missing revert data in call exception; Transaction reverted without a reason string [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (data=\"0x\", transaction={\"from\":\"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\",\"to\":\"0x3FE03e949D365126DB640Ae1696916261F9052e0\",\"data\":\"0x4e79eeac0000000000000000000000000000000000000000000000000000000000000002\",\"accessList\":null}, error={\"name\":\"ProviderError\",\"code\":-32603,\"_isProviderError\":true}, code=CALL_EXCEPTION, version=providers/5.6.8)\r\n-->\r\n```\r\n\r\nBut on the termnal when hardhat node is running, the revert string is displayed.  \r\n```\r\neth_call\r\n  Contract call:       <UnrecognizedContract>\r\n  From:                0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\r\n  To:                  0x3fe03e949d365126db640ae1696916261f9052e0\r\n\r\n  Error: VM Exception while processing transaction: reverted with reason string '{XJU7D7}'\r\n```\r\n\r\nIt's already pretty tough to debug errors within the solidity conracts -- would be good that whatevererror info is available is passed back to to the terminal where tests are running.\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1218563839",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1218563839",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1218563839,
    "node_id": "IC_kwDOB7jojM5Ioc7_",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-08-17T22:42:11Z",
    "updated_at": "2022-08-17T22:42:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1072/hardhat-test-ignores-reason-string-when-running-on-localhost).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: ec903c83-8980-4e09-997a-3f26e397482c",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1218563839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1219548504",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1219548504",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1219548504,
    "node_id": "IC_kwDOB7jojM5IsNVY",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T14:15:33Z",
    "updated_at": "2022-08-18T14:15:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for using Hardhat. We do have existing tests that exercise reverts with reason strings while using Hardhat Node. I'm wondering what's different about your situation.\r\n\r\nIn general, if there is a problem in Hardhat, we will need a minimal reproducible example in order to investigate it. See https://stackoverflow.com/help/minimal-reproducible-example\r\n\r\nCan you provide us with a minimal reproducible example?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1219548504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220101613",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1220101613",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1220101613,
    "node_id": "IC_kwDOB7jojM5IuUXt",
    "user": {
      "login": "BKopyIo",
      "id": 111377116,
      "node_id": "U_kgDOBqN63A",
      "avatar_url": "https://avatars.githubusercontent.com/u/111377116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BKopyIo",
      "html_url": "https://github.com/BKopyIo",
      "followers_url": "https://api.github.com/users/BKopyIo/followers",
      "following_url": "https://api.github.com/users/BKopyIo/following{/other_user}",
      "gists_url": "https://api.github.com/users/BKopyIo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BKopyIo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BKopyIo/subscriptions",
      "organizations_url": "https://api.github.com/users/BKopyIo/orgs",
      "repos_url": "https://api.github.com/users/BKopyIo/repos",
      "events_url": "https://api.github.com/users/BKopyIo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BKopyIo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T00:18:12Z",
    "updated_at": "2022-08-19T00:18:12Z",
    "author_association": "NONE",
    "body": "Unfortunately I am a bit too busy sorting out the bugs in my code to spend  a considerable amount of time constructing a MRE to demonstrate that the bugs in your code are real.  I've reproduced the actual output I received, and while I get it may not be easy to troubleshoot without somebody having done the work of producing an MRE, that doesn't mean the problem doesn't exist and isn't worth at least 'minimally investigating' on your end about what might be causing such a thing, which I take it from your note isnt deemed worth the trouble.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220101613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1222442548",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1222442548",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1222442548,
    "node_id": "IC_kwDOB7jojM5I3P40",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T14:29:14Z",
    "updated_at": "2022-08-22T14:29:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Our own resources are limited as well, so we need to ask users for help when possible/practical. Thanks for understanding, and thanks again for using Hardhat. I'm re-opening this in the hope that it might bubble up through our prioritization process.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1222442548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230841141",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1230841141",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1230841141,
    "node_id": "IC_kwDOB7jojM5JXSU1",
    "user": {
      "login": "gnarvaja",
      "id": 126963,
      "node_id": "MDQ6VXNlcjEyNjk2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126963?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnarvaja",
      "html_url": "https://github.com/gnarvaja",
      "followers_url": "https://api.github.com/users/gnarvaja/followers",
      "following_url": "https://api.github.com/users/gnarvaja/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnarvaja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnarvaja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnarvaja/subscriptions",
      "organizations_url": "https://api.github.com/users/gnarvaja/orgs",
      "repos_url": "https://api.github.com/users/gnarvaja/repos",
      "events_url": "https://api.github.com/users/gnarvaja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnarvaja/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-29T20:43:11Z",
    "updated_at": "2022-08-29T20:43:11Z",
    "author_association": "NONE",
    "body": "Not sure if it's the same problem, but I had a similar problem. \r\n\r\nSome of my tests that previously were working fine with tests like `.to.be.revertedWith(\"foo bar\")` started to fail after moving the code to Hardhat 2.10.\r\n\r\n```AssertionError: Expected transaction to be reverted with reason 'foo bar', but it reverted without a reason```\r\n\r\nIt was weird because some of the revert tests with reason were working fine, but others don't.\r\n\r\nI fixed the problem fixing ethers at version 5.6.1 thanks to https://github.com/ethers-io/ethers.js/discussions/2849#discussioncomment-2701990",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230841141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1366464984",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3055#issuecomment-1366464984",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3055",
    "id": 1366464984,
    "node_id": "IC_kwDOB7jojM5RcpnY",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-28T08:31:14Z",
    "updated_at": "2022-12-28T08:31:14Z",
    "author_association": "MEMBER",
    "body": "Closing this in favor of #1222, which should improve this kind of thing. Also: the error message is there, but the error constructed by ethers makes it hard to see.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1366464984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

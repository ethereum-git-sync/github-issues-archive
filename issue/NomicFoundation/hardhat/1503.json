{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1503",
  "id": 909397305,
  "node_id": "MDU6SXNzdWU5MDkzOTczMDU=",
  "number": 1503,
  "title": "hardhat:core:hardhat-network:node  TypeError: Cannot read property 'pc' of undefined",
  "user": {
    "login": "Ximanz",
    "id": 1032062,
    "node_id": "MDQ6VXNlcjEwMzIwNjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1032062?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Ximanz",
    "html_url": "https://github.com/Ximanz",
    "followers_url": "https://api.github.com/users/Ximanz/followers",
    "following_url": "https://api.github.com/users/Ximanz/following{/other_user}",
    "gists_url": "https://api.github.com/users/Ximanz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Ximanz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Ximanz/subscriptions",
    "organizations_url": "https://api.github.com/users/Ximanz/orgs",
    "repos_url": "https://api.github.com/users/Ximanz/repos",
    "events_url": "https://api.github.com/users/Ximanz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Ximanz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-06-02T11:26:37Z",
  "updated_at": "2022-11-18T16:00:33Z",
  "closed_at": "2021-10-19T12:25:01Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Running hardhat 2.3.0, executing a mocha/chai test with hardhat-ethers, ran into this error with one particular test case, but can't see anything problematic in my code to have caused this.  I have other tests that are almost identical but they don't cause the same error.\r\n\r\n`hardhat:core:hardhat-network:node Could not generate stack trace. Please report this to help us improve Hardhat.\r\n  hardhat:core:hardhat-network:node  TypeError: Cannot read property 'pc' of undefined\r\n    at SolidityTracer._rawTraceEvmExecution (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\stack-traces\\solidityTracer.ts:266:70)\r\n    at SolidityTracer._traceEvmExecution (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\stack-traces\\solidityTracer.ts:238:29)\r\n    at SolidityTracer._getCallMessageStackTrace (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\stack-traces\\solidityTracer.ts:149:17)\r\n    at SolidityTracer.getStackTrace (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\stack-traces\\solidityTracer.ts:76:19)\r\n    at HardhatNode._manageErrors (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\provider\\node.ts:1269:41)\r\n    at HardhatNode._gatherTraces (c:\\git\\zero-money\\node_modules\\hardhat\\src\\internal\\hardhat-network\\provider\\node.ts:1077:30)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\r\n    at runNextTicks (internal/process/task_queues.js:64:3)\r\n    at listOnTimeout (internal/timers.js:524:9) +0ms`",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/852949950",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1503#issuecomment-852949950",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503",
    "id": 852949950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1Mjk0OTk1MA==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-02T11:30:49Z",
    "updated_at": "2021-06-02T11:30:49Z",
    "author_association": "MEMBER",
    "body": "Hi @Ximanz, thanks for reporting this. Is your repo public? Or can you tell us how to reproduce the issue?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/852949950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/853007959",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1503#issuecomment-853007959",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503",
    "id": 853007959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzAwNzk1OQ==",
    "user": {
      "login": "Ximanz",
      "id": 1032062,
      "node_id": "MDQ6VXNlcjEwMzIwNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1032062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ximanz",
      "html_url": "https://github.com/Ximanz",
      "followers_url": "https://api.github.com/users/Ximanz/followers",
      "following_url": "https://api.github.com/users/Ximanz/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ximanz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ximanz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ximanz/subscriptions",
      "organizations_url": "https://api.github.com/users/Ximanz/orgs",
      "repos_url": "https://api.github.com/users/Ximanz/repos",
      "events_url": "https://api.github.com/users/Ximanz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ximanz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-02T13:02:11Z",
    "updated_at": "2021-06-02T13:02:11Z",
    "author_association": "NONE",
    "body": "My repo isn't public, but I'm basically testing a simple ERC721 contract, in particular testing the following function, which should be self explanatory:\r\n\r\n```\r\nfunction changeSupplyLimit(uint256 newSupplyLimit) public onlyOwner {\r\n    require(totalSupply() <= newSupplyLimit, \"Can't set limit below what has already been minted.\");\r\n    \r\n    emit SupplyLimitChanged(newSupplyLimit);\r\n    supplyLimit = newSupplyLimit;\r\n}\r\n```\r\n\r\nThe particular line in my test that causes this error is:\r\n```\r\nawait expect(myContract.connect(addr1).changeSupplyLimit(10)).to.be.revertedWith(\"Caller is not the owner.\");\r\n```\r\n\r\nLet me know if that's not enough information, happy to supply additional details.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/853007959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/853039129",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1503#issuecomment-853039129",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503",
    "id": 853039129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzAzOTEyOQ==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-02T13:42:38Z",
    "updated_at": "2021-06-02T13:42:38Z",
    "author_association": "MEMBER",
    "body": "That error is usually caused by a solidity construct we don't support, and that snippet looks pretty standard, so my guess is that it won't be enough. We usually need at least the whole file to be able to debug this. \r\n\r\nThe most useful thing would be for you to remove parts of your code until you have a minimal, single Solidity file that reproduces the problem, but I know that takes a lot of time. If you can't do that, then the alternative is to share your repo privately with me.\r\n\r\nIf neither one is an option for you, then let's revisit this after the next release, because it will improve several things around the tracing and maybe it will just work.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/853039129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/946669562",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1503#issuecomment-946669562",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1503",
    "id": 946669562,
    "node_id": "IC_kwDOB7jojM44bQf6",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-19T12:25:01Z",
    "updated_at": "2021-10-19T12:25:01Z",
    "author_association": "MEMBER",
    "body": "Closing for lack of details.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/946669562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

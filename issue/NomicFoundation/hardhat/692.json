{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/692",
  "id": 655365185,
  "node_id": "MDU6SXNzdWU2NTUzNjUxODU=",
  "number": 692,
  "title": "Suggestion: Re-structure as a group of composable node library packages and remove globals",
  "user": {
    "login": "fubhy",
    "id": 1172528,
    "node_id": "MDQ6VXNlcjExNzI1Mjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fubhy",
    "html_url": "https://github.com/fubhy",
    "followers_url": "https://api.github.com/users/fubhy/followers",
    "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
    "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
    "organizations_url": "https://api.github.com/users/fubhy/orgs",
    "repos_url": "https://api.github.com/users/fubhy/repos",
    "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fubhy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 947232611,
      "node_id": "MDU6TGFiZWw5NDcyMzI2MTE=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:feature",
      "name": "type:feature",
      "color": "FBCA04",
      "default": false,
      "description": "Feature request"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-07-12T09:29:45Z",
  "updated_at": "2023-06-14T13:45:16Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Hi there!\r\n\r\nFirst of all, thanks for working on this. The ethereum developer tooling space is seriously lacking in all regards and I greatly appreciate all the work by everyone here to improve this situation.\r\n\r\nI believe that, in order to make this even more useful and to not repeat the same mistakes made by Truffle, Buidler must become group of separate Node library packages instead of striving to be a monolithic command line / runtime. Ideally, I'd like to see a future where I can compose my Solidity development environment exactly for my needs, using the tools and libraries I prefer.\r\n\r\nThis is made infinitely harder by the fact that Buidler is currently structured, first and foremost, as a rigid command line tool with a lot of imho debatable choices around the runtime environment and the use of magical global properties.\r\n\r\nFor instance, instead of running `npx buidler test` to wrap and inject this runtime environment into the test runner, a much better approach imho would be to instead offer bridges and plugins for the test runner to instantiate the necessary objects on demand.\r\n\r\nThis is also highly problematic for Jest for instance (at the time of writing this, Jest adoption is 2x higher than that of Mocha btw.). Jest is a really capable test runner with a lot of great performance improvements and parallelization capabilities to take the best possible advantage of the number of available CPUs, etc. - Wrapping it in an inferior runtime and injecting singleton globals into it the primary process is a failed opportunity.\r\n\r\nIf Buidler was a group of Node libraries instead of a command line tool, it would be trivial to write a custom test environment, optionally also exposed as a zero-config preset, to integrate with Buidler. While this is somewhat possible already by reaching into the internal modules of Buidler (importing e.g. from `@nomiclabs/buidler/internal/core/providers/construction`) a lot of the assumptions around global configuration and runtime environment are still in the way and impossible to circumvent.\r\n\r\nThe same is true for all other use-cases: compile, deploy, test, etc. all ultimately suffer from the same upside down architecture that makes extending and composing/customizing this functionality infinitely harder.\r\n\r\nBottom-line: The Node ecosystem offers amazing tools for building powerful, custom command line tools and standalone scripts. Instead of attempting to offer a \"do-it-all\" runtime I think it should offer the tools to enable people to roll their own scripts and integration layers for existing tools (Jest, Mocha, etc.) instead of wrapping and thereby crippling them.\r\n\r\nI'd be happy to assist in planning and executing such an architectural change of direction if this is something you'd consider for your roadmap.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692/reactions",
    "total_count": 6,
    "+1": 6,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/657199584",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/692#issuecomment-657199584",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692",
    "id": 657199584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzE5OTU4NA==",
    "user": {
      "login": "adrianmcli",
      "id": 943555,
      "node_id": "MDQ6VXNlcjk0MzU1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/943555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adrianmcli",
      "html_url": "https://github.com/adrianmcli",
      "followers_url": "https://api.github.com/users/adrianmcli/followers",
      "following_url": "https://api.github.com/users/adrianmcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/adrianmcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adrianmcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adrianmcli/subscriptions",
      "organizations_url": "https://api.github.com/users/adrianmcli/orgs",
      "repos_url": "https://api.github.com/users/adrianmcli/repos",
      "events_url": "https://api.github.com/users/adrianmcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adrianmcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-12T09:52:04Z",
    "updated_at": "2020-07-12T22:40:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree 100%. Buidler should take advantage of what the JS ecosystem has to offer instead of trying to blackbox and wrap everything within its own runtime.\r\n\r\nAs it stands, the major \"steps\" in Ethereum dapp development are:\r\n\r\n- dev (linting, typechecking, etc.)\r\n- compile\r\n- test\r\n- deploy/migrate\r\n- wire up frontend\r\n\r\nThe JS ecosystem has settled on first-class battle-tested solutions for each of these steps. And if Buidler can become more modular, it will be much easier for existing JS devs to use. That means instead of running `npx buidler test` or `npx truffle test`, we should be able to run `npm test` which just runs `jest` for example.\r\n\r\nI understand Buidler is a task-runner, but so was Gulp and there's a reason why we've moved past it now and have Webpack and other tools. There's a real opportunity for Buidler to kickstart the next era of dapp development.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/657199584/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/657285218",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/692#issuecomment-657285218",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692",
    "id": 657285218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzI4NTIxOA==",
    "user": {
      "login": "kendricktan",
      "id": 9071748,
      "node_id": "MDQ6VXNlcjkwNzE3NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9071748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kendricktan",
      "html_url": "https://github.com/kendricktan",
      "followers_url": "https://api.github.com/users/kendricktan/followers",
      "following_url": "https://api.github.com/users/kendricktan/following{/other_user}",
      "gists_url": "https://api.github.com/users/kendricktan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kendricktan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kendricktan/subscriptions",
      "organizations_url": "https://api.github.com/users/kendricktan/orgs",
      "repos_url": "https://api.github.com/users/kendricktan/repos",
      "events_url": "https://api.github.com/users/kendricktan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kendricktan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-12T22:34:10Z",
    "updated_at": "2020-07-12T22:34:10Z",
    "author_association": "NONE",
    "body": "Agreed. The strengths of being in this ecosystem should be the ability to compose them with one another instead of having each tool create their own abstractions on top of existing tools.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/657285218/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716115790",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/692#issuecomment-716115790",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692",
    "id": 716115790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjExNTc5MA==",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-25T09:06:49Z",
    "updated_at": "2020-10-25T09:06:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@alcuadrado Hey! I wanted to bring this up again because I still think it would be desirable for hardhat to be a library first and foremost instead. This would require to separate  it from the runtime environment and the magic initialization (or remove that entirely). A lot of super exciting integrations and tools from the broader JS ecosystem are currently not compatible or hard to integrate.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716115790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591240478",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/692#issuecomment-1591240478",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/692",
    "id": 1591240478,
    "node_id": "IC_kwDOB7jojM5e2Gce",
    "user": {
      "login": "roninjin10",
      "id": 35039927,
      "node_id": "MDQ6VXNlcjM1MDM5OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/35039927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roninjin10",
      "html_url": "https://github.com/roninjin10",
      "followers_url": "https://api.github.com/users/roninjin10/followers",
      "following_url": "https://api.github.com/users/roninjin10/following{/other_user}",
      "gists_url": "https://api.github.com/users/roninjin10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/roninjin10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/roninjin10/subscriptions",
      "organizations_url": "https://api.github.com/users/roninjin10/orgs",
      "repos_url": "https://api.github.com/users/roninjin10/repos",
      "events_url": "https://api.github.com/users/roninjin10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/roninjin10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T13:45:16Z",
    "updated_at": "2023-06-14T13:45:16Z",
    "author_association": "NONE",
    "body": "This would be amazing.  The tradeoff just doesn't make sense to use hardhat's wrapped test runner over vitest or playwright.    Modularity is king.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1591240478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580",
  "id": 926522967,
  "node_id": "MDU6SXNzdWU5MjY1MjI5Njc=",
  "number": 1580,
  "title": "_validateHardforks assumes ethereum",
  "user": {
    "login": "bigwampa",
    "id": 79389347,
    "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bigwampa",
    "html_url": "https://github.com/bigwampa",
    "followers_url": "https://api.github.com/users/bigwampa/followers",
    "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
    "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
    "organizations_url": "https://api.github.com/users/bigwampa/orgs",
    "repos_url": "https://api.github.com/users/bigwampa/repos",
    "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bigwampa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937718880,
      "node_id": "LA_kwDOB7jojM8AAAABJk-cYA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:improvement",
      "name": "type:improvement",
      "color": "FBCA04",
      "default": false,
      "description": ""
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-06-21T19:24:57Z",
  "updated_at": "2023-01-03T09:17:08Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "_validateHardforks in packages/hardhat-core/src/internal/hardhat-network/provider/node.ts assumes the user is forking ethereum.\r\n\r\nIn order to support users who are developing on other blockchains, **please provide a flag to omit this check or otherwise support other blockchains.**\r\n\r\nCurrently, because hardhat assumes ethereum, any attempt to fork from a specific block number on another blockchain will throw the internal error on line 236:\r\n```      if (!upstreamCommon.gteHardfork(\"spuriousDragon\")) {\r\n        throw new InternalError(\r\n          `Cannot fork ${upstreamCommon.chainName()} from block ${forkBlockNumber}.\r\nHardhat Network's forking functionality only works with blocks from at least spuriousDragon.`\r\n        );\r\n      }```\r\n      \r\n      ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865289290",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865289290",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865289290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTI4OTI5MA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T19:29:59Z",
    "updated_at": "2021-06-21T19:29:59Z",
    "author_association": "MEMBER",
    "body": "Can you please elaborate on how this fails? We designed those validations to explicitly allow other networks.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865289290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865290375",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865290375",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865290375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTI5MDM3NQ==",
    "user": {
      "login": "bigwampa",
      "id": 79389347,
      "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bigwampa",
      "html_url": "https://github.com/bigwampa",
      "followers_url": "https://api.github.com/users/bigwampa/followers",
      "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
      "organizations_url": "https://api.github.com/users/bigwampa/orgs",
      "repos_url": "https://api.github.com/users/bigwampa/repos",
      "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bigwampa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T19:32:09Z",
    "updated_at": "2021-06-21T19:32:09Z",
    "author_association": "NONE",
    "body": "Discord comment here: \r\nhttps://discord.com/channels/750408878008827925/750408878008827928/856617376534626304",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865290375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865294383",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865294383",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865294383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTI5NDM4Mw==",
    "user": {
      "login": "bigwampa",
      "id": 79389347,
      "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bigwampa",
      "html_url": "https://github.com/bigwampa",
      "followers_url": "https://api.github.com/users/bigwampa/followers",
      "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
      "organizations_url": "https://api.github.com/users/bigwampa/orgs",
      "repos_url": "https://api.github.com/users/bigwampa/repos",
      "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bigwampa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T19:39:47Z",
    "updated_at": "2021-06-21T19:39:47Z",
    "author_association": "NONE",
    "body": "@alcuadrado, thanks for the quick response!\r\n\r\nIt seems that if the user provides a blocknumber to fork, then they will hit line 235: ```if (!upstreamCommon.gteHardfork(\"spuriousDragon\")) {```\r\n\r\nLooking into the definition of `gteHardfork()` now, but unclear how that wouldn't return false for any valid Avalanche blocknumber.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865294383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865316815",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865316815",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865316815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTMxNjgxNQ==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T20:17:16Z",
    "updated_at": "2021-06-21T20:17:16Z",
    "author_association": "MEMBER",
    "body": "My understanding is that line 225 will throw if you use a chainId not supported by ethereumjs, and in that case, the return in line 230 will prevent 235 from executing.\r\n\r\nCan you provide steps to reproduce it with Avalanche?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865316815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865368086",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865368086",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865368086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTM2ODA4Ng==",
    "user": {
      "login": "bigwampa",
      "id": 79389347,
      "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bigwampa",
      "html_url": "https://github.com/bigwampa",
      "followers_url": "https://api.github.com/users/bigwampa/followers",
      "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
      "organizations_url": "https://api.github.com/users/bigwampa/orgs",
      "repos_url": "https://api.github.com/users/bigwampa/repos",
      "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bigwampa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T21:50:27Z",
    "updated_at": "2021-06-22T18:30:17Z",
    "author_association": "NONE",
    "body": "@alcuadrado, I was working with another engineer on this. They have the reproduction steps currently. I will get them to you shortly. But a brief summary:\r\n\r\nWe followed the instructions here: https://hardhat.org/guides/mainnet-forking.html and changed the hardhat.config.js to include the following:\r\n\r\n```\r\nnetworks: {\r\n     hardhat: {\r\n         forking: {\r\n             url: \"https://api.avax.network/ext/bc/C/rpc\",\r\n             blockNumber: 2405677\r\n         }\r\n    },\r\n},\r\n```\r\nWhen we went to run the code we hit the above-mentioned error.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865368086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865373043",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-865373043",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 865373043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTM3MzA0Mw==",
    "user": {
      "login": "bigwampa",
      "id": 79389347,
      "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bigwampa",
      "html_url": "https://github.com/bigwampa",
      "followers_url": "https://api.github.com/users/bigwampa/followers",
      "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
      "organizations_url": "https://api.github.com/users/bigwampa/orgs",
      "repos_url": "https://api.github.com/users/bigwampa/repos",
      "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bigwampa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-21T22:01:39Z",
    "updated_at": "2021-06-21T22:01:39Z",
    "author_association": "NONE",
    "body": "@alcuadrado, full hardhat.config.js can be found here: https://github.com/bmino/x-voting/blob/feature/forked_mainnet/hardhat.config.js\r\n\r\nI don't think any other files are relevant to this problem. \r\n\r\nWith this config, we ran `npx hardhat test` and hit the spuriousDragon error.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/865373043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866132101",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-866132101",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 866132101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjEzMjEwMQ==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-22T16:20:39Z",
    "updated_at": "2021-06-22T16:20:39Z",
    "author_association": "MEMBER",
    "body": "I haven't look into this yet, but quick comment: that URL seems to return `1` as its chain id. It's very likely that we assume in more than one place that only the Ethereum mainnet has a chain id of 1.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866132101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866232062",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-866232062",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 866232062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjIzMjA2Mg==",
    "user": {
      "login": "bigwampa",
      "id": 79389347,
      "node_id": "MDQ6VXNlcjc5Mzg5MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/79389347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bigwampa",
      "html_url": "https://github.com/bigwampa",
      "followers_url": "https://api.github.com/users/bigwampa/followers",
      "following_url": "https://api.github.com/users/bigwampa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bigwampa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bigwampa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bigwampa/subscriptions",
      "organizations_url": "https://api.github.com/users/bigwampa/orgs",
      "repos_url": "https://api.github.com/users/bigwampa/repos",
      "events_url": "https://api.github.com/users/bigwampa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bigwampa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-22T18:29:12Z",
    "updated_at": "2021-06-22T18:29:12Z",
    "author_association": "NONE",
    "body": "Hey @fvictorio, Thanks for looking into this!\r\n\r\nThe url we provide in the **hardhat.config.js** is the default url for accessing Avalanche. From their [documentation](https://docs.avax.network/build/avalanchego-apis/contract-chain-c-chain-api), it should return a _chain id_ of `43114`.\r\n\r\nIt does, however, use a _network id_ of `1`.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866232062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866909969",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-866909969",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 866909969,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjkwOTk2OQ==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T14:55:26Z",
    "updated_at": "2021-06-23T14:55:26Z",
    "author_association": "MEMBER",
    "body": "I see. Maybe we should try to use the chain id instead of the network id if possible? I don't know much about the JSON-RPC side of that though. I guess we can try to get the `eth_chainId` first and fall back to the `net_version` if that doesn't work. (I believe we have/had a function that did exactly that).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/866909969/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/869131500",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-869131500",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 869131500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2OTEzMTUwMA==",
    "user": {
      "login": "aftermathdigital",
      "id": 84855515,
      "node_id": "MDQ6VXNlcjg0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aftermathdigital",
      "html_url": "https://github.com/aftermathdigital",
      "followers_url": "https://api.github.com/users/aftermathdigital/followers",
      "following_url": "https://api.github.com/users/aftermathdigital/following{/other_user}",
      "gists_url": "https://api.github.com/users/aftermathdigital/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aftermathdigital/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aftermathdigital/subscriptions",
      "organizations_url": "https://api.github.com/users/aftermathdigital/orgs",
      "repos_url": "https://api.github.com/users/aftermathdigital/repos",
      "events_url": "https://api.github.com/users/aftermathdigital/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aftermathdigital/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-27T09:24:01Z",
    "updated_at": "2021-06-27T10:36:48Z",
    "author_association": "NONE",
    "body": "For what it's worth, this RPC endpoint does support eth_chainId, and does indeed return 43114:\r\n\r\n```\r\n{\r\n  \"id\": 1,\r\n  \"jsonrpc\": \"2.0\",\r\n  \"result\": \"0xa86a\"\r\n}\r\n```\r\n\r\nWhich is good, because if it didn't, then falling back to net_version would make it indistinguishable from Eth.\r\nI don't understand why AVAX chose to use the same networkId as Eth in the first place though...\r\n\r\n[This PR](\r\nhttps://github.com/nomiclabs/hardhat/pull/1592) actually makes the remote chainId accessible where you'd need it for the call to `_validateHardforks`, but I don't know enough about ethereumjs' implementation to know if you can just switch the networkId for the chainId here.\r\n\r\nEdit: Although doing so does allow hardhat to fork AVAX successfully.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/869131500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/869143150",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1580#issuecomment-869143150",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1580",
    "id": 869143150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2OTE0MzE1MA==",
    "user": {
      "login": "aftermathdigital",
      "id": 84855515,
      "node_id": "MDQ6VXNlcjg0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aftermathdigital",
      "html_url": "https://github.com/aftermathdigital",
      "followers_url": "https://api.github.com/users/aftermathdigital/followers",
      "following_url": "https://api.github.com/users/aftermathdigital/following{/other_user}",
      "gists_url": "https://api.github.com/users/aftermathdigital/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aftermathdigital/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aftermathdigital/subscriptions",
      "organizations_url": "https://api.github.com/users/aftermathdigital/orgs",
      "repos_url": "https://api.github.com/users/aftermathdigital/repos",
      "events_url": "https://api.github.com/users/aftermathdigital/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aftermathdigital/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-27T11:03:08Z",
    "updated_at": "2021-06-27T11:03:08Z",
    "author_association": "NONE",
    "body": "https://github.com/nomiclabs/hardhat/pull/1593\r\n\r\nSeems to pass all tests. I haven't added a new test for this, which I feel like I should - I guess that test should check that you CAN fork chains from block before spurious dragon where the networkId is 1 and the chainId isn't.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/869143150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3954",
  "id": 1724921436,
  "node_id": "I_kwDOB7jojM5m0DZc",
  "number": 3954,
  "title": "Add warning for non mainnet etherscan failures",
  "user": {
    "login": "roninjin10",
    "id": 35039927,
    "node_id": "MDQ6VXNlcjM1MDM5OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/35039927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/roninjin10",
    "html_url": "https://github.com/roninjin10",
    "followers_url": "https://api.github.com/users/roninjin10/followers",
    "following_url": "https://api.github.com/users/roninjin10/following{/other_user}",
    "gists_url": "https://api.github.com/users/roninjin10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/roninjin10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/roninjin10/subscriptions",
    "organizations_url": "https://api.github.com/users/roninjin10/orgs",
    "repos_url": "https://api.github.com/users/roninjin10/repos",
    "events_url": "https://api.github.com/users/roninjin10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/roninjin10/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    },
    {
      "id": 4952050233,
      "node_id": "LA_kwDOB7jojM8AAAABJypKOQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:hardhat-verify",
      "name": "area:hardhat-verify",
      "color": "5319E7",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-05-25T00:56:53Z",
  "updated_at": "2023-05-29T16:49:10Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Describe the feature\n\nEtherscan requires different API keys for different networks.  e.g. a mainnet etherscan key does not work on optimism or optimism goerli.   This is a common issue we have noticed many getting tripped up on.\r\n\r\nFix: add a check [here](https://github.com/NomicFoundation/hardhat/blob/55a6a1c2f8022b846e60e37ace2519531bba0813/packages/hardhat-verify/src/etherscan.ts#L92)\r\n\r\n```\r\nif (chainId !== 1) {\r\n  console.warn(`Etherscan api keys are different for networks other than mainnet.    See <LINK TO ETHERSCAN DOCS>')\r\n}\r\n```\n\n### Search terms\n\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1567340981",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3954#issuecomment-1567340981",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954",
    "id": 1567340981,
    "node_id": "IC_kwDOB7jojM5da7m1",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-29T16:47:36Z",
    "updated_at": "2023-05-29T16:47:36Z",
    "author_association": "MEMBER",
    "body": "@roninjin10 I'm not sure I understand what you are proposing here. Right now you can set multiple API keys for different etherscan-based explorers. But there's no way for us to detect that a given API key doesn't work for the current chain id.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1567340981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1567341848",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3954#issuecomment-1567341848",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3954",
    "id": 1567341848,
    "node_id": "IC_kwDOB7jojM5da70Y",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-29T16:48:54Z",
    "updated_at": "2023-05-29T16:48:54Z",
    "author_association": "MEMBER",
    "body": "Oh wait, I think I understand what you're saying: if the request fails and the user is not connected to mainnet (or sepolia, or any network that uses the same API key than main etherscan), we show that warning.\r\n\r\nI think that makes sense, although I would also check that the error message says something about the API key being invalid.\r\n\r\nThis is a good idea, thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1567341848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

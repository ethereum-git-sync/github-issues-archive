{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022",
  "id": 1044048260,
  "node_id": "I_kwDOB7jojM4-OumE",
  "number": 2022,
  "title": "Transaction reverted and Hardhat couldn't infer the reason.",
  "user": {
    "login": "TJakubek",
    "id": 39831436,
    "node_id": "MDQ6VXNlcjM5ODMxNDM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/39831436?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TJakubek",
    "html_url": "https://github.com/TJakubek",
    "followers_url": "https://api.github.com/users/TJakubek/followers",
    "following_url": "https://api.github.com/users/TJakubek/following{/other_user}",
    "gists_url": "https://api.github.com/users/TJakubek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TJakubek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TJakubek/subscriptions",
    "organizations_url": "https://api.github.com/users/TJakubek/orgs",
    "repos_url": "https://api.github.com/users/TJakubek/repos",
    "events_url": "https://api.github.com/users/TJakubek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TJakubek/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-11-03T19:46:30Z",
  "updated_at": "2022-11-18T13:10:45Z",
  "closed_at": "2021-11-08T21:25:48Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Hi everyone. \r\n\r\nI am getting the above error during one of my contract calls when running a local node. The weird thing is sometimes the call works correctly, while others it will throw weird errors in numerous different places. \r\n\r\nIn one instance, the error stack suggests a method is called which has nothing at all to do with the one I am running. \r\n\r\nDoes anyone have any idea what can be the cause of such behaviour? Is there any additional info I can post to help with debug? \r\nThanks in advance for any help",
  "closed_by": {
    "login": "TJakubek",
    "id": 39831436,
    "node_id": "MDQ6VXNlcjM5ODMxNDM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/39831436?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TJakubek",
    "html_url": "https://github.com/TJakubek",
    "followers_url": "https://api.github.com/users/TJakubek/followers",
    "following_url": "https://api.github.com/users/TJakubek/following{/other_user}",
    "gists_url": "https://api.github.com/users/TJakubek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TJakubek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TJakubek/subscriptions",
    "organizations_url": "https://api.github.com/users/TJakubek/orgs",
    "repos_url": "https://api.github.com/users/TJakubek/repos",
    "events_url": "https://api.github.com/users/TJakubek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TJakubek/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/961219959",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022#issuecomment-961219959",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
    "id": 961219959,
    "node_id": "IC_kwDOB7jojM45Sw13",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T16:39:47Z",
    "updated_at": "2021-11-04T16:39:47Z",
    "author_association": "MEMBER",
    "body": "These errors are really hard to debug without a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example). If you can create one, we'll take a look.\r\n\r\nThe easiest way to do this when you don't know why the error happens is to take your project and create a branch where you remove everything that is not relevant to reproduce the problem. But I understand that even that could be very time-consuming.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/961219959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/962677041",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022#issuecomment-962677041",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
    "id": 962677041,
    "node_id": "IC_kwDOB7jojM45YUkx",
    "user": {
      "login": "saicharanpogul",
      "id": 36988048,
      "node_id": "MDQ6VXNlcjM2OTg4MDQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/36988048?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saicharanpogul",
      "html_url": "https://github.com/saicharanpogul",
      "followers_url": "https://api.github.com/users/saicharanpogul/followers",
      "following_url": "https://api.github.com/users/saicharanpogul/following{/other_user}",
      "gists_url": "https://api.github.com/users/saicharanpogul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saicharanpogul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saicharanpogul/subscriptions",
      "organizations_url": "https://api.github.com/users/saicharanpogul/orgs",
      "repos_url": "https://api.github.com/users/saicharanpogul/repos",
      "events_url": "https://api.github.com/users/saicharanpogul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saicharanpogul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-07T20:39:56Z",
    "updated_at": "2021-11-08T10:15:08Z",
    "author_association": "NONE",
    "body": "Same here.\r\n```\r\n...\r\n   mapping(address => mapping(uint => Person)) private people;\r\n   mapping(address => uint[]) private indexes;\r\n...\r\n   function addPerson(Person memory _person, uint8 _isPersonActive) public {\r\n        // requires\r\n        people[msg.sender][_person.personId] = _person;\r\n        if(_isPersonActive == 2) { // some condition\r\n\r\n            indexes[msg.sender].push(_person.personId); // <-- 1\r\n        }\r\n    }\r\n...\r\n```\r\nI tried the marked line then I got the following error: ``` AssertionError: Returned error: Error: Transaction reverted and Hardhat couldn't infer the reason. Please report this to help us improve Hardhat.```\r\nThe confusing part is I have some logic in another function that has almost similar functionality that worked, but in this function, it didnâ€™t work.  (It is just a similar example to my code)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/962677041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963160177",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022#issuecomment-963160177",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
    "id": 963160177,
    "node_id": "IC_kwDOB7jojM45aKhx",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T13:40:08Z",
    "updated_at": "2021-11-08T13:40:08Z",
    "author_association": "MEMBER",
    "body": "@saicharanpogul same comment: we need a minimal example with clear reproduction steps. Otherwise trying to guess how to reproduce the problem from a snippet is really time-consuming for us.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963160177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963162767",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022#issuecomment-963162767",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
    "id": 963162767,
    "node_id": "IC_kwDOB7jojM45aLKP",
    "user": {
      "login": "saicharanpogul",
      "id": 36988048,
      "node_id": "MDQ6VXNlcjM2OTg4MDQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/36988048?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saicharanpogul",
      "html_url": "https://github.com/saicharanpogul",
      "followers_url": "https://api.github.com/users/saicharanpogul/followers",
      "following_url": "https://api.github.com/users/saicharanpogul/following{/other_user}",
      "gists_url": "https://api.github.com/users/saicharanpogul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saicharanpogul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saicharanpogul/subscriptions",
      "organizations_url": "https://api.github.com/users/saicharanpogul/orgs",
      "repos_url": "https://api.github.com/users/saicharanpogul/repos",
      "events_url": "https://api.github.com/users/saicharanpogul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saicharanpogul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T13:43:38Z",
    "updated_at": "2021-11-08T13:43:38Z",
    "author_association": "NONE",
    "body": "@fvictorio I have solved it and added the issue for which I was getting that error. #2045 ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963162767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963589444",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2022#issuecomment-963589444",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2022",
    "id": 963589444,
    "node_id": "IC_kwDOB7jojM45bzVE",
    "user": {
      "login": "TJakubek",
      "id": 39831436,
      "node_id": "MDQ6VXNlcjM5ODMxNDM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/39831436?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TJakubek",
      "html_url": "https://github.com/TJakubek",
      "followers_url": "https://api.github.com/users/TJakubek/followers",
      "following_url": "https://api.github.com/users/TJakubek/following{/other_user}",
      "gists_url": "https://api.github.com/users/TJakubek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TJakubek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TJakubek/subscriptions",
      "organizations_url": "https://api.github.com/users/TJakubek/orgs",
      "repos_url": "https://api.github.com/users/TJakubek/repos",
      "events_url": "https://api.github.com/users/TJakubek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TJakubek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T21:25:48Z",
    "updated_at": "2021-11-08T21:25:48Z",
    "author_association": "NONE",
    "body": "hey guys, thanks for answering. I finally figured it out as well. \r\nMetamask was at times incorrectly estimating the amount of gas needed, so sometimes it would succeed while other times it failed. \r\n\r\nThe misleading part was that in the node logs it would always state that the gas used was below the gas sent, so it didn't help in debugging. So exactly as @saicharanpogul explained in his issue. The other misleading part was the weird stack trace I mentioned, but I guess thats not relevant. \r\n\r\nAnyways glad we both got it working!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/963589444/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

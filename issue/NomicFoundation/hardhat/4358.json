{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4358",
  "id": 1877876625,
  "node_id": "I_kwDOB7jojM5v7h-R",
  "number": 4358,
  "title": "Hardhat is replaying all blocks when forking mainnet",
  "user": {
    "login": "antoinedc",
    "id": 1327779,
    "node_id": "MDQ6VXNlcjEzMjc3Nzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1327779?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/antoinedc",
    "html_url": "https://github.com/antoinedc",
    "followers_url": "https://api.github.com/users/antoinedc/followers",
    "following_url": "https://api.github.com/users/antoinedc/following{/other_user}",
    "gists_url": "https://api.github.com/users/antoinedc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/antoinedc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/antoinedc/subscriptions",
    "organizations_url": "https://api.github.com/users/antoinedc/orgs",
    "repos_url": "https://api.github.com/users/antoinedc/repos",
    "events_url": "https://api.github.com/users/antoinedc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/antoinedc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-09-01T18:34:52Z",
  "updated_at": "2023-09-01T18:41:25Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\r\n\r\n2.17.2\r\n\r\n### What happened?\r\n\r\nWhen starting/stopping a node setup with a mainnet fork multiple times, instead of emitting the `block` event only for the latest, Hardhat is going to emit it for all past events since the last emitted one.\r\nFor example:\r\n- I start the node with a fork that is at block 1000\r\n- I stop it\r\n- 5 blocks go by\r\n- I start it again\r\n- Blocks 1001 to 1005 are going to be emitted\r\n\r\nI don't know if this is expected, but this is annoying as the main purpose of mainnet forks is to get the state, not to synchronize blocks & transactions. For my specific use case ([Ethernal](https://www.tryethernal.com)), this causes issues for users, as when they reset their node, they end up with tons of mainnet blocks/transactions in their backend, instead of just theirs.\r\n\r\nInterestingly, this doesn't happen when a block number is specified for the fork.\r\n\r\n### Minimal reproduction steps\r\n\r\nHere is a repo that reproduces the issue, instructions are in the README: https://github.com/tryethernal/repro-hardhat-bug\r\n\r\n### Search terms\r\n\r\nreplay, blocks, fork, mainnet",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4358/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

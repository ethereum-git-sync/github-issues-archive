{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3555",
  "id": 1525950153,
  "node_id": "I_kwDOB7jojM5a9CbJ",
  "number": 3555,
  "title": "pnpm warnings about peer dependencies when the toolbox is used in a javascript project",
  "user": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4935639218,
      "node_id": "LA_kwDOB7jojM8AAAABJi_gsg",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-decision",
      "name": "status:needs-decision",
      "color": "0E8A16",
      "default": false,
      "description": "We need to make a decision about this"
    },
    {
      "id": 4937718880,
      "node_id": "LA_kwDOB7jojM8AAAABJk-cYA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:improvement",
      "name": "type:improvement",
      "color": "FBCA04",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-01-09T16:48:29Z",
  "updated_at": "2023-01-10T09:59:15Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#3554 adds the possibility of initializing a project with pnpm. This works pretty well, but if you initialize a javascript project with pnpm, you get a warning about peer dependencies:\r\n\r\n```\r\nWARN  Issues with peer dependencies found\r\n.\r\n├─┬ @nomicfoundation/hardhat-toolbox 2.0.0\r\n│ ├── ✕ missing peer @types/chai@^4.2.0\r\n│ ├── ✕ missing peer @types/mocha@^9.1.0\r\n│ ├── ✕ missing peer @types/node@>=12.0.0\r\n│ ├── ✕ missing peer ts-node@>=8.0.0\r\n│ └── ✕ missing peer typescript@>=4.5.0\r\n├─┬ hardhat 2.12.5\r\n│ ├── ✕ missing peer ts-node@\"*\"\r\n│ └── ✕ missing peer typescript@\"*\"\r\n├─┬ typechain 8.1.1\r\n│ ├── ✕ missing peer typescript@>=4.3.0\r\n│ └─┬ ts-essentials 7.0.3\r\n│   └── ✕ missing peer typescript@>=3.7.0\r\n└─┬ @typechain/ethers-v5 10.2.0\r\n  ├── ✕ missing peer typescript@>=4.3.0\r\n  └── ✕ missing peer @ethersproject/bytes@^5.0.0\r\nPeer dependencies that should be installed:\r\n  @ethersproject/bytes@^5.0.0  @types/mocha@^9.1.0          ts-node@>=8.0.0              \r\n  @types/chai@^4.2.0           @types/node@>=12.0.0         typescript@>=4.5.0\r\n```\r\n\r\nThis happens because the Toolbox has those packages as peer dependencies, but it only uses them in typescript projects. This lets us have a single toolbox plugin instead of having one for javascript and one for typescript.\r\n\r\nThis isn't a problem in npm because peer dependencies are auto-installed. Yarn doesn't do this, but it doesn't emit any warnings either. pnpm, by default, doesn't install peer dependencies but it emits that very noticeable warning.\r\n\r\nA workaround is to enable the auto-installation of peerdependencies. If you create a `.npmrc` in the project with:\r\n\r\n```\r\nauto-install-peers=true\r\n```\r\n\r\nthen the peer dependencies will be installed and the warning goes away. So maybe we could create this file when a project is initialized with pnpm.\r\n\r\nAn alternative is to document this somewhere and let users do it manually if they want.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1376770881",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3555#issuecomment-1376770881",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555",
    "id": 1376770881,
    "node_id": "IC_kwDOB7jojM5SD9tB",
    "user": {
      "login": "Hopsken",
      "id": 8073519,
      "node_id": "MDQ6VXNlcjgwNzM1MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8073519?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hopsken",
      "html_url": "https://github.com/Hopsken",
      "followers_url": "https://api.github.com/users/Hopsken/followers",
      "following_url": "https://api.github.com/users/Hopsken/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hopsken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hopsken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hopsken/subscriptions",
      "organizations_url": "https://api.github.com/users/Hopsken/orgs",
      "repos_url": "https://api.github.com/users/Hopsken/repos",
      "events_url": "https://api.github.com/users/Hopsken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hopsken/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-10T05:58:14Z",
    "updated_at": "2023-01-10T05:58:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another alternative might be to use the forced command line config feature provided by pnpm as `pnpm add --config.auto-install-peers=true ...deps`, so we don't have to change the `.npmrc` file.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1376770881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1377002846",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3555#issuecomment-1377002846",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3555",
    "id": 1377002846,
    "node_id": "IC_kwDOB7jojM5SE2Ve",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-10T09:59:15Z",
    "updated_at": "2023-01-10T09:59:15Z",
    "author_association": "MEMBER",
    "body": "Ohhh, that's interesting, thanks. That might be a good solution, yeah.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1377002846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

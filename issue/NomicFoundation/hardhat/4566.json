{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4566",
  "id": 1980863186,
  "node_id": "I_kwDOB7jojM52EZLS",
  "number": 4566,
  "title": "Support `Settings` (a.k.a. Input JSON Description) in `@nomiclabs/hardhat-vyper`",
  "user": {
    "login": "pcaversaccio",
    "id": 25297591,
    "node_id": "MDQ6VXNlcjI1Mjk3NTkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/25297591?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pcaversaccio",
    "html_url": "https://github.com/pcaversaccio",
    "followers_url": "https://api.github.com/users/pcaversaccio/followers",
    "following_url": "https://api.github.com/users/pcaversaccio/following{/other_user}",
    "gists_url": "https://api.github.com/users/pcaversaccio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pcaversaccio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pcaversaccio/subscriptions",
    "organizations_url": "https://api.github.com/users/pcaversaccio/orgs",
    "repos_url": "https://api.github.com/users/pcaversaccio/repos",
    "events_url": "https://api.github.com/users/pcaversaccio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pcaversaccio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947232611,
      "node_id": "MDU6TGFiZWw5NDcyMzI2MTE=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:feature",
      "name": "type:feature",
      "color": "FBCA04",
      "default": false,
      "description": "Feature request"
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    },
    {
      "id": 4952036299,
      "node_id": "LA_kwDOB7jojM8AAAABJyoTyw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:hardhat-vyper",
      "name": "area:hardhat-vyper",
      "color": "5319E7",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "schaable",
    "id": 1165424,
    "node_id": "MDQ6VXNlcjExNjU0MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/schaable",
    "html_url": "https://github.com/schaable",
    "followers_url": "https://api.github.com/users/schaable/followers",
    "following_url": "https://api.github.com/users/schaable/following{/other_user}",
    "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
    "organizations_url": "https://api.github.com/users/schaable/orgs",
    "repos_url": "https://api.github.com/users/schaable/repos",
    "events_url": "https://api.github.com/users/schaable/events{/privacy}",
    "received_events_url": "https://api.github.com/users/schaable/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "schaable",
      "id": 1165424,
      "node_id": "MDQ6VXNlcjExNjU0MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schaable",
      "html_url": "https://github.com/schaable",
      "followers_url": "https://api.github.com/users/schaable/followers",
      "following_url": "https://api.github.com/users/schaable/following{/other_user}",
      "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
      "organizations_url": "https://api.github.com/users/schaable/orgs",
      "repos_url": "https://api.github.com/users/schaable/repos",
      "events_url": "https://api.github.com/users/schaable/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schaable/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-11-07T09:00:58Z",
  "updated_at": "2023-11-08T08:53:44Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Describe the feature\n\nThe `@nomiclabs/hardhat-vyper` package only supports currently the setting of Vyper version(s): https://github.com/NomicFoundation/hardhat/blob/ef4a94dfc49585b031faf75d5ef49bc438d43091/packages/hardhat-vyper/src/types.ts#L3-L9\r\n\r\nIt would be very convenient to have an option to at least set the `evmVersion`, as since Vyper [`0.3.8`](https://github.com/vyperlang/vyper/releases/tag/v0.3.8) (latest version is [`0.3.10`](https://github.com/vyperlang/vyper/releases/tag/v0.3.10)) the `evmVersion` is set to `shanghai` and people might be interested to deploy on e.g. Optimism with these versions but can natively since `PUSH0` is not yet supported.\r\n\r\nThe full Input JSON Description can be found [here](https://docs.vyperlang.org/en/stable/compiling-a-contract.html#input-json-description):\r\n\r\n```bash\r\n{\r\n    // Required: Source code language. Must be set to \"Vyper\".\r\n    \"language\": \"Vyper\",\r\n    // Required\r\n    // Source codes given here will be compiled.\r\n    \"sources\": {\r\n        \"contracts/foo.vy\": {\r\n            // Optional: keccak256 hash of the source file\r\n            \"keccak256\": \"0x234...\",\r\n            // Required: literal contents of the source file\r\n            \"content\": \"@external\\ndef foo() -> bool:\\n    return True\"\r\n        }\r\n    },\r\n    // Optional\r\n    // Interfaces given here are made available for import by the sources\r\n    // that are compiled. If the suffix is \".vy\", the compiler will expect\r\n    // a contract-as-interface using proper Vyper syntax. If the suffix is\r\n    // \"abi\" the compiler will expect an ABI object.\r\n    \"interfaces\": {\r\n        \"contracts/bar.vy\": {\r\n            \"content\": \"\"\r\n        },\r\n        \"contracts/baz.json\": {\r\n            \"abi\": []\r\n        }\r\n    },\r\n    // Optional\r\n    \"settings\": {\r\n        \"evmVersion\": \"shanghai\",  // EVM version to compile for. Can be istanbul, berlin, paris, shanghai (default) or cancun (experimental!).\r\n        // optional, optimization mode\r\n        // defaults to \"gas\". can be one of \"gas\", \"codesize\", \"none\",\r\n        // false  and true (the last two are for backwards compatibility).\r\n        \"optimize\": \"gas\",\r\n        // optional, whether or not the bytecode should include Vyper's signature\r\n        // defaults to true\r\n        \"bytecodeMetadata\": true,\r\n        // The following is used to select desired outputs based on file names.\r\n        // File names are given as keys, a star as a file name matches all files.\r\n        // Outputs can also follow the Solidity format where second level keys\r\n        // denoting contract names - all 2nd level outputs are applied to the file.\r\n        //\r\n        // To select all possible compiler outputs: \"outputSelection: { '*': [\"*\"] }\"\r\n        // Note that this might slow down the compilation process needlessly.\r\n        //\r\n        // The available output types are as follows:\r\n        //\r\n        //    abi - The contract ABI\r\n        //    ast - Abstract syntax tree\r\n        //    interface - Derived interface of the contract, in proper Vyper syntax\r\n        //    ir - intermediate representation of the code\r\n        //    userdoc - Natspec user documentation\r\n        //    devdoc - Natspec developer documentation\r\n        //    evm.bytecode.object - Bytecode object\r\n        //    evm.bytecode.opcodes - Opcodes list\r\n        //    evm.deployedBytecode.object - Deployed bytecode object\r\n        //    evm.deployedBytecode.opcodes - Deployed opcodes list\r\n        //    evm.deployedBytecode.sourceMap - Deployed source mapping (useful for debugging)\r\n        //    evm.methodIdentifiers - The list of function hashes\r\n        //\r\n        // Using `evm`, `evm.bytecode`, etc. will select every target part of that output.\r\n        // Additionally, `*` can be used as a wildcard to request everything.\r\n        //\r\n        \"outputSelection\": {\r\n            \"*\": [\"evm.bytecode\", \"abi\"],  // Enable the abi and bytecode outputs for every single contract\r\n            \"contracts/foo.vy\": [\"ast\"]  // Enable the ast output for contracts/foo.vy\r\n        }\r\n    }\r\n}\r\n``` \r\n\r\n> Note that the \"optimize\" inputs where modified in the latest `0.3.10` version, as well as there is ongoing discussion on how to support the standard Input JSON in the future. But the `evmVersion` is important to have in anyway.\n\n### Search terms\n\nvyper, evmVersion",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1801348358",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4566#issuecomment-1801348358",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4566",
    "id": 1801348358,
    "node_id": "IC_kwDOB7jojM5rXmUG",
    "user": {
      "login": "pcaversaccio",
      "id": 25297591,
      "node_id": "MDQ6VXNlcjI1Mjk3NTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25297591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcaversaccio",
      "html_url": "https://github.com/pcaversaccio",
      "followers_url": "https://api.github.com/users/pcaversaccio/followers",
      "following_url": "https://api.github.com/users/pcaversaccio/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcaversaccio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcaversaccio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcaversaccio/subscriptions",
      "organizations_url": "https://api.github.com/users/pcaversaccio/orgs",
      "repos_url": "https://api.github.com/users/pcaversaccio/repos",
      "events_url": "https://api.github.com/users/pcaversaccio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcaversaccio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T08:53:44Z",
    "updated_at": "2023-11-08T08:53:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just as an add-on note, since `0.3.10` you can specify the `evmVersion` via the `pragma` statement, so this can be used as a workaround for now as long as you use the latest Vyper version. You can see the configuration details in my [🐍 snekmate v0.0.3 release](https://github.com/pcaversaccio/snekmate/releases/tag/v0.0.3):\r\n\r\n![image](https://github.com/NomicFoundation/hardhat/assets/25297591/e8a8e178-3967-42f8-9aa6-ae07a21f265b) ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1801348358/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2254",
  "id": 1101067698,
  "node_id": "I_kwDOB7jojM5BoPWy",
  "number": 2254,
  "title": "when using different hardhat config of compilers may got CompilerError: Stack too deep  ",
  "user": {
    "login": "chobynleo",
    "id": 41251833,
    "node_id": "MDQ6VXNlcjQxMjUxODMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/41251833?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chobynleo",
    "html_url": "https://github.com/chobynleo",
    "followers_url": "https://api.github.com/users/chobynleo/followers",
    "following_url": "https://api.github.com/users/chobynleo/following{/other_user}",
    "gists_url": "https://api.github.com/users/chobynleo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chobynleo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chobynleo/subscriptions",
    "organizations_url": "https://api.github.com/users/chobynleo/orgs",
    "repos_url": "https://api.github.com/users/chobynleo/repos",
    "events_url": "https://api.github.com/users/chobynleo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chobynleo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "zoeyTM",
    "id": 14796043,
    "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zoeyTM",
    "html_url": "https://github.com/zoeyTM",
    "followers_url": "https://api.github.com/users/zoeyTM/followers",
    "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
    "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
    "repos_url": "https://api.github.com/users/zoeyTM/repos",
    "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zoeyTM",
      "id": 14796043,
      "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zoeyTM",
      "html_url": "https://github.com/zoeyTM",
      "followers_url": "https://api.github.com/users/zoeyTM/followers",
      "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
      "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
      "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
      "repos_url": "https://api.github.com/users/zoeyTM/repos",
      "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-01-13T02:24:20Z",
  "updated_at": "2022-11-18T10:05:40Z",
  "closed_at": "2022-01-18T09:16:52Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Hi, when using different hardhat config of compilers may got CompilerError: Stack too deep.\r\n\r\nIf config:\r\n```\r\nsolidity: {\r\n    compilers: [    \r\n          {version: \"0.7.6\"},\r\n      ],\r\n    settings: {\r\n      optimizer: {\r\n        enabled: true,\r\n        runs: 200,\r\n      }\r\n    },\r\n  },\r\n```\r\nand then got this error:\r\n> CompilerError: Stack too deep when compiling inline assembly: Variable headStart is 1 slot(s) too deep inside the stack.\r\n\r\nbut config:\r\n```\r\nsolidity: {\r\n    version: \"0.7.6\",\r\n    settings: {\r\n      optimizer: {\r\n        enabled: true,\r\n        runs: 200,\r\n      }\r\n    },\r\n  },\r\n```\r\nCompilation successfully.\r\n\r\nI just want to know what's the difference.\r\n\r\nHere is my [repo](https://github.com/chobynleo/HardhatCompilerErrorTest) for test.\r\n\r\nThanksÔºÅ \r\n\r\n",
  "closed_by": {
    "login": "chobynleo",
    "id": 41251833,
    "node_id": "MDQ6VXNlcjQxMjUxODMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/41251833?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chobynleo",
    "html_url": "https://github.com/chobynleo",
    "followers_url": "https://api.github.com/users/chobynleo/followers",
    "following_url": "https://api.github.com/users/chobynleo/following{/other_user}",
    "gists_url": "https://api.github.com/users/chobynleo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chobynleo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chobynleo/subscriptions",
    "organizations_url": "https://api.github.com/users/chobynleo/orgs",
    "repos_url": "https://api.github.com/users/chobynleo/repos",
    "events_url": "https://api.github.com/users/chobynleo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chobynleo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1012629417",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2254#issuecomment-1012629417",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254",
    "id": 1012629417,
    "node_id": "IC_kwDOB7jojM48W3-p",
    "user": {
      "login": "LukeSamkharadze",
      "id": 31849767,
      "node_id": "MDQ6VXNlcjMxODQ5NzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31849767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukeSamkharadze",
      "html_url": "https://github.com/LukeSamkharadze",
      "followers_url": "https://api.github.com/users/LukeSamkharadze/followers",
      "following_url": "https://api.github.com/users/LukeSamkharadze/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukeSamkharadze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukeSamkharadze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukeSamkharadze/subscriptions",
      "organizations_url": "https://api.github.com/users/LukeSamkharadze/orgs",
      "repos_url": "https://api.github.com/users/LukeSamkharadze/repos",
      "events_url": "https://api.github.com/users/LukeSamkharadze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukeSamkharadze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-14T00:06:48Z",
    "updated_at": "2022-01-14T00:07:06Z",
    "author_association": "NONE",
    "body": "I don't think this config is valid\r\n\r\n```JS\r\nsolidity: {\r\n    compilers: [    \r\n          {version: \"0.7.6\"},\r\n      ],\r\n    settings: {\r\n      optimizer: {\r\n        enabled: true,\r\n        runs: 200,\r\n      }\r\n    },\r\n  },\r\n```\r\n\r\nTry moving settings into compiler object\r\n\r\n```JS\r\n  solidity: {\r\n    compilers: [\r\n      {\r\n        version: \"0.7.6\",\r\n        settings: {\r\n          optimizer: {\r\n            enabled: true,\r\n            runs: 200,\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n```\r\n\r\nIt seems that when you have array of compilers you have to specify settings for each one of them",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1012629417/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 2,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014025806",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2254#issuecomment-1014025806",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254",
    "id": 1014025806,
    "node_id": "IC_kwDOB7jojM48cM5O",
    "user": {
      "login": "chobynleo",
      "id": 41251833,
      "node_id": "MDQ6VXNlcjQxMjUxODMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/41251833?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chobynleo",
      "html_url": "https://github.com/chobynleo",
      "followers_url": "https://api.github.com/users/chobynleo/followers",
      "following_url": "https://api.github.com/users/chobynleo/following{/other_user}",
      "gists_url": "https://api.github.com/users/chobynleo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chobynleo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chobynleo/subscriptions",
      "organizations_url": "https://api.github.com/users/chobynleo/orgs",
      "repos_url": "https://api.github.com/users/chobynleo/repos",
      "events_url": "https://api.github.com/users/chobynleo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chobynleo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T01:07:46Z",
    "updated_at": "2022-01-17T01:07:46Z",
    "author_association": "NONE",
    "body": "> I don't think this config is valid\r\n> \r\n> ```js\r\n> solidity: {\r\n>     compilers: [    \r\n>           {version: \"0.7.6\"},\r\n>       ],\r\n>     settings: {\r\n>       optimizer: {\r\n>         enabled: true,\r\n>         runs: 200,\r\n>       }\r\n>     },\r\n>   },\r\n> ```\r\n> \r\n> Try moving settings into compiler object\r\n> \r\n> ```js\r\n>   solidity: {\r\n>     compilers: [\r\n>       {\r\n>         version: \"0.7.6\",\r\n>         settings: {\r\n>           optimizer: {\r\n>             enabled: true,\r\n>             runs: 200,\r\n>           },\r\n>         },\r\n>       },\r\n>     ],\r\n>   },\r\n> ```\r\n> \r\n> It seems that when you have array of compilers you have to specify settings for each one of them\r\n\r\nThanks. It works.\r\nI often set this config to compile:\r\n```\r\nsolidity: {\r\n    compilers: [   \r\n          {version: \"0.4.18\"},\r\n          {version: \"0.4.24\"},\r\n          {version: \"0.5.16\"},\r\n          {version: \"0.6.12\"},\r\n          {version: \"0.6.6\"},\r\n          {version: \"0.7.6\"},\r\n          {version: \"0.8.0\"},\r\n          {version: \"0.8.4\"},\r\n      ],\r\n  },\r\n```\r\nMay be I should specify settings for each one of them.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014025806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014769130",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2254#issuecomment-1014769130",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254",
    "id": 1014769130,
    "node_id": "IC_kwDOB7jojM48fCXq",
    "user": {
      "login": "LukeSamkharadze",
      "id": 31849767,
      "node_id": "MDQ6VXNlcjMxODQ5NzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31849767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukeSamkharadze",
      "html_url": "https://github.com/LukeSamkharadze",
      "followers_url": "https://api.github.com/users/LukeSamkharadze/followers",
      "following_url": "https://api.github.com/users/LukeSamkharadze/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukeSamkharadze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukeSamkharadze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukeSamkharadze/subscriptions",
      "organizations_url": "https://api.github.com/users/LukeSamkharadze/orgs",
      "repos_url": "https://api.github.com/users/LukeSamkharadze/repos",
      "events_url": "https://api.github.com/users/LukeSamkharadze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukeSamkharadze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T17:36:33Z",
    "updated_at": "2022-01-17T18:25:28Z",
    "author_association": "NONE",
    "body": "Yep, I think so or you could hack a little\r\n\r\n```JS\r\nconst settings = {\r\n  optimizer: {\r\n    enabled: true,\r\n    runs: 200,\r\n  },\r\n};\r\n\r\nconst config = {\r\n  solidity: {\r\n    compilers: [\r\n      { version: \"0.4.18\" },\r\n      { version: \"0.4.24\" },\r\n      { version: \"0.5.16\" },\r\n      { version: \"0.6.12\" },\r\n      { version: \"0.6.6\" },\r\n      { version: \"0.7.6\" },\r\n      { version: \"0.8.0\" },\r\n      { version: \"0.8.4\" },\r\n    ].map((o) => ({ ...o, settings })),\r\n  },\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014769130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1015214143",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2254#issuecomment-1015214143",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2254",
    "id": 1015214143,
    "node_id": "IC_kwDOB7jojM48gvA_",
    "user": {
      "login": "chobynleo",
      "id": 41251833,
      "node_id": "MDQ6VXNlcjQxMjUxODMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/41251833?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chobynleo",
      "html_url": "https://github.com/chobynleo",
      "followers_url": "https://api.github.com/users/chobynleo/followers",
      "following_url": "https://api.github.com/users/chobynleo/following{/other_user}",
      "gists_url": "https://api.github.com/users/chobynleo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chobynleo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chobynleo/subscriptions",
      "organizations_url": "https://api.github.com/users/chobynleo/orgs",
      "repos_url": "https://api.github.com/users/chobynleo/repos",
      "events_url": "https://api.github.com/users/chobynleo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chobynleo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T09:16:34Z",
    "updated_at": "2022-01-18T09:16:34Z",
    "author_association": "NONE",
    "body": "> \r\n\r\nMany thanks!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1015214143/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4738",
  "id": 2068524793,
  "node_id": "I_kwDOB7jojM57Sy75",
  "number": 4738,
  "title": "Automatic generation of task scope markdown",
  "user": {
    "login": "SebastienGllmt",
    "id": 2608559,
    "node_id": "MDQ6VXNlcjI2MDg1NTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2608559?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SebastienGllmt",
    "html_url": "https://github.com/SebastienGllmt",
    "followers_url": "https://api.github.com/users/SebastienGllmt/followers",
    "following_url": "https://api.github.com/users/SebastienGllmt/following{/other_user}",
    "gists_url": "https://api.github.com/users/SebastienGllmt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SebastienGllmt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SebastienGllmt/subscriptions",
    "organizations_url": "https://api.github.com/users/SebastienGllmt/orgs",
    "repos_url": "https://api.github.com/users/SebastienGllmt/repos",
    "events_url": "https://api.github.com/users/SebastienGllmt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SebastienGllmt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "schaable",
    "id": 1165424,
    "node_id": "MDQ6VXNlcjExNjU0MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/schaable",
    "html_url": "https://github.com/schaable",
    "followers_url": "https://api.github.com/users/schaable/followers",
    "following_url": "https://api.github.com/users/schaable/following{/other_user}",
    "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
    "organizations_url": "https://api.github.com/users/schaable/orgs",
    "repos_url": "https://api.github.com/users/schaable/repos",
    "events_url": "https://api.github.com/users/schaable/events{/privacy}",
    "received_events_url": "https://api.github.com/users/schaable/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "schaable",
      "id": 1165424,
      "node_id": "MDQ6VXNlcjExNjU0MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schaable",
      "html_url": "https://github.com/schaable",
      "followers_url": "https://api.github.com/users/schaable/followers",
      "following_url": "https://api.github.com/users/schaable/following{/other_user}",
      "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
      "organizations_url": "https://api.github.com/users/schaable/orgs",
      "repos_url": "https://api.github.com/users/schaable/repos",
      "events_url": "https://api.github.com/users/schaable/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schaable/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2024-01-06T10:32:59Z",
  "updated_at": "2024-01-29T16:58:26Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Describe the feature\r\n\r\nCurrently if you create a plugin with multiple tasks each in the same scope, you end up duplicating the definition of all your tasks in your code and in your docs. It would be easier if the documentation was automatically generated\r\n\r\nI wrote code to do this for my own project that I'm sharing below\r\n\r\n```javascript\r\ntask('genDocs', `Generate documentation for tasks of a given scope`)\r\n  .addParam('scope', 'The scope to generate documentation for')\r\n  .setAction(async ({ scope }, hre) => {\r\n    const scopeContent = hre.scopes[scope];\r\n    console.log(scopeContent);\r\n\r\n    console.log(`# ${scopeContent.description ?? scope}`);\r\n    console.log(\r\n      `These are all the [hardhat tasks](https://hardhat.org/hardhat-runner/docs/advanced/create-task) available for the scope \\`${scope}\\`.`\r\n    );\r\n    console.log();\r\n    console.log(`You can call each of these tasks using \\`npx hardhat ${scope} task_name\\``);\r\n    for (const [name, definition] of Object.entries(scopeContent.tasks)) {\r\n      console.log();\r\n      console.log(`## \\`${name}\\``);\r\n      console.log(definition.description ?? 'No description provided');\r\n      const parameters = Object.values(definition.paramDefinitions);\r\n      if (parameters.length > 0) {\r\n        console.log();\r\n        console.log('Parameters:');\r\n        for (const param of parameters) {\r\n          let annotations = [];\r\n          if (param.isOptional) {\r\n            annotations.push(`optional`);\r\n            if (param.defaultValue != null) {\r\n              annotations.push(`${param.defaultValue}`);\r\n            }\r\n          }\r\n          if (param.type) {\r\n            annotations.push(`${param.type.name}`);\r\n          }\r\n          const annotationText = annotations.length > 0 ? ` *(${annotations.join(', ')})* ` : '';\r\n          console.log(\r\n            `- **${param.name}**${annotationText}: ${\r\n              param.description ?? 'No description provided'\r\n            }`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  });\r\n```\r\n\r\n<details>\r\n  <summary>Example generation output</summary>\r\n    \r\n    # Paima Engine tasks\r\n    These are all the [hardhat tasks](https://hardhat.org/hardhat-runner/docs/advanced/create-task) available for the scope `paima`.\r\n\r\n    You can call each of these tasks using `npx hardhat paima task_name`\r\n\r\n    ## `PaimaL2Contract:submitGameInput`\r\n    Submit data to the Paima L2 contract\r\n\r\n    Parameters:\r\n    - **contract** *(optional, string)* : The contracts's address\r\n    - **data** *(optional, string)* : The data to submit either hex-encoded (0x...) or Paima concise-encoded\r\n</details>\r\n\r\n### Search terms\r\n\r\ngenerate docs, generate documentation, codegen",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1914413129",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4738#issuecomment-1914413129",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738",
    "id": 1914413129,
    "node_id": "IC_kwDOB7jojM5yG6BJ",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-29T10:36:42Z",
    "updated_at": "2024-01-29T10:36:42Z",
    "author_association": "MEMBER",
    "body": "Hi @SebastienGllmt, thanks for sharing this and sorry for not responding before.\r\n\r\nCan you expand a bit on what you are doing here? I'm mainly interested in what you mean by \"you end up duplicating the definition of all your tasks in your code and in your docs\".\r\n\r\nCan you give us an example of, say, a scope with two tasks, what you'd to do with them, and how would you do that manually? That would help us understand if there's something we can have in Hardhat that helps with that use case.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1914413129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1915165311",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4738#issuecomment-1915165311",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4738",
    "id": 1915165311,
    "node_id": "IC_kwDOB7jojM5yJxp_",
    "user": {
      "login": "SebastienGllmt",
      "id": 2608559,
      "node_id": "MDQ6VXNlcjI2MDg1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2608559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SebastienGllmt",
      "html_url": "https://github.com/SebastienGllmt",
      "followers_url": "https://api.github.com/users/SebastienGllmt/followers",
      "following_url": "https://api.github.com/users/SebastienGllmt/following{/other_user}",
      "gists_url": "https://api.github.com/users/SebastienGllmt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SebastienGllmt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SebastienGllmt/subscriptions",
      "organizations_url": "https://api.github.com/users/SebastienGllmt/orgs",
      "repos_url": "https://api.github.com/users/SebastienGllmt/repos",
      "events_url": "https://api.github.com/users/SebastienGllmt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SebastienGllmt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-29T16:58:25Z",
    "updated_at": "2024-01-29T16:58:25Z",
    "author_association": "NONE",
    "body": "For example, you can see the definition of our hardhat tasks here: https://github.com/PaimaStudios/paima-engine/blob/master/packages/contracts/evm-contracts/src/paimaL2.ts#L5\r\n\r\nYou can see the task definitions already contain a name, description, all the arguments (along with if they're optional, etc.).\r\n\r\nNow if you look at our docs for our Hardhat tasks here: https://docs.paimastudios.com/home/libraries/evm-contracts/hardhat-tasks\r\n\r\nYou can see it contains the same name, description, arguments and everything because I generated the docs using the script I posted above. Had I not written this script, I would have had to manually copy-paste the prose into our docs so people can see the tasks available and what they do\r\n\r\nIn fact, Hardhat does this kind of document generation in a sense since as you know the entire reason Hardhat provides a way for tasks to provide descriptions of themselves in the code is to document it in the hardhat CLI",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1915165311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

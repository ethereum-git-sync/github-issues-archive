{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1529",
  "id": 916123480,
  "node_id": "MDU6SXNzdWU5MTYxMjM0ODA=",
  "number": 1529,
  "title": "Don't allow calls with insufficient funds",
  "user": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-06-09T12:03:07Z",
  "updated_at": "2023-01-03T09:16:50Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Reproduction:\r\n\r\n1) Initialize a hardhat network with an account with an initial balance of `\"1000000000000000000\"`\r\n2) Deploy a contract like this:\r\n\r\n    ```solidity\r\n    contract Foo {\r\n      function f() public payable returns (uint) {\r\n        return msg.value;\r\n      }\r\n    }\r\n    ```\r\n\r\n3) Run this code:\r\n\r\n    ```js\r\n    const Foo = await ethers.getContractFactory(\"Foo\")\r\n    const foo = await Foo.deploy({ gasPrice: 1 })\r\n    await foo.callStatic.f({ value: ethers.BigNumber.from(\"1000000000000000000\") });\r\n    ```\r\n\r\nThe expected behavior is to throw an \"insufficient funds for intrinsic transaction cost\" kind of error, but hardhat just returns the given value.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1316959551",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1529#issuecomment-1316959551",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1529",
    "id": 1316959551,
    "node_id": "IC_kwDOB7jojM5OfzU_",
    "user": {
      "login": "migoldfinger",
      "id": 106750422,
      "node_id": "U_kgDOBlzh1g",
      "avatar_url": "https://avatars.githubusercontent.com/u/106750422?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/migoldfinger",
      "html_url": "https://github.com/migoldfinger",
      "followers_url": "https://api.github.com/users/migoldfinger/followers",
      "following_url": "https://api.github.com/users/migoldfinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/migoldfinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/migoldfinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/migoldfinger/subscriptions",
      "organizations_url": "https://api.github.com/users/migoldfinger/orgs",
      "repos_url": "https://api.github.com/users/migoldfinger/repos",
      "events_url": "https://api.github.com/users/migoldfinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/migoldfinger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T12:40:53Z",
    "updated_at": "2022-11-16T12:40:53Z",
    "author_association": "NONE",
    "body": "You are calling the functions like it where an non changing Function. Functions called this way do not consume gas.\r\nMy understanding is that if you use callStatic the function is handled like a view(pure function.\r\nTherefore this function can not have insufficient funds. Just remove the callStatic and you will get the error.\r\nSee: https://docs.ethers.io/v5/api/contract/contract/#contract-callStatic\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1316959551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

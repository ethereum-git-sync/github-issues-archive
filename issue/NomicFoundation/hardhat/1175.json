{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1175",
  "id": 784342964,
  "node_id": "MDU6SXNzdWU3ODQzNDI5NjQ=",
  "number": 1175,
  "title": "Signature values mixed up using HardhatProvider",
  "user": {
    "login": "MrToph",
    "id": 3176721,
    "node_id": "MDQ6VXNlcjMxNzY3MjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3176721?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MrToph",
    "html_url": "https://github.com/MrToph",
    "followers_url": "https://api.github.com/users/MrToph/followers",
    "following_url": "https://api.github.com/users/MrToph/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrToph/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MrToph/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrToph/subscriptions",
    "organizations_url": "https://api.github.com/users/MrToph/orgs",
    "repos_url": "https://api.github.com/users/MrToph/repos",
    "events_url": "https://api.github.com/users/MrToph/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MrToph/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-01-12T15:30:07Z",
  "updated_at": "2022-11-18T21:09:02Z",
  "closed_at": "2021-01-14T22:55:49Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Hi,\r\n\r\nI'm using a local hardhat network forking from ropsten and when I get [the following transaction](https://ropsten.etherscan.io/tx/0xabc467bedd1d17462fcc7942d0af7874d6f8bdefee2b299c9168a216d3ff0edb) using the ethersjs provider, the tx's `r` and `s` values are mixed up for me. I configured my hardhat network to use an alchemy endpoint.\r\nThis is my code:\r\n\r\n```js\r\nimport hre from \"hardhat\";\r\nconst { ethers } = hre;\r\n// correct r and s values are returned using this provider\r\n// const provider = new ethers.providers.JsonRpcProvider(`https://eth-ropsten.alchemyapi.io/v2/SECRET`)\r\n\r\n// wrong values are returned using the configured hardhat network forking ropsten\r\nconst provider = hre.ethers.provider\r\nconst firstTxHash = `0xabc467bedd1d17462fcc7942d0af7874d6f8bdefee2b299c9168a216d3ff0edb`;\r\nconst firstTx = await provider.getTransaction(firstTxHash);\r\nconsole.log(`firstTx`, JSON.stringify(firstTx, null, 4));\r\n\r\n// supposed to be these values, but r and s is interchanged\r\n// r: '0xa5522718c0f95dde27f0827f55de836342ceda594d20458523dd71a539d52ad7',\r\n// s: '0x5710e64311d481764b5ae8ca691b05d14054782c7d489f3511a7abf2f5078962',\r\n```\r\n\r\nNote that I get the correct r and s values when creating a new JsonRpcProvider using the Alchemy's node URL directly.\r\nThat's why I've been thinking that this might be an issue with hardhat.\r\nThis is the hardhat config I'm using:\r\n\r\n```js\r\nimport dotenv from \"dotenv\";\r\ndotenv.config(); // load env vars from .env\r\nimport { task, HardhatUserConfig } from \"hardhat/config\";\r\nimport \"@nomiclabs/hardhat-waffle\";\r\n\r\nconst { ARCHIVE_URL, MNEMONIC } = process.env;\r\n\r\nconst accounts = {\r\n  mnemonic: MNEMONIC,\r\n};\r\n\r\n// Go to https://hardhat.org/config/ to learn more\r\nconst config: HardhatUserConfig = {\r\n  solidity: {\r\n    compilers: [\r\n      { version: \"0.7.3\" }\r\n    ],\r\n  },\r\n  networks: {\r\n    ropsten: {\r\n      url: ARCHIVE_URL,\r\n      accounts,\r\n    },\r\n    hardhat: {\r\n      accounts,\r\n      forking: {\r\n        url: ARCHIVE_URL, // https://eth-ropsten.alchemyapi.io/v2/SECRET`,\r\n        blockNumber: 9389313,\r\n      },\r\n    },\r\n  },\r\n  mocha: {\r\n    timeout: 300 * 1e3,\r\n  }\r\n};\r\n```\r\n\r\n\r\n\r\nRef [ethersjs issue](https://github.com/ethers-io/ethers.js/issues/1224)",
  "closed_by": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/758752991",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1175#issuecomment-758752991",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175",
    "id": 758752991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1ODc1Mjk5MQ==",
    "user": {
      "login": "scnale",
      "id": 12967987,
      "node_id": "MDQ6VXNlcjEyOTY3OTg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12967987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scnale",
      "html_url": "https://github.com/scnale",
      "followers_url": "https://api.github.com/users/scnale/followers",
      "following_url": "https://api.github.com/users/scnale/following{/other_user}",
      "gists_url": "https://api.github.com/users/scnale/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scnale/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scnale/subscriptions",
      "organizations_url": "https://api.github.com/users/scnale/orgs",
      "repos_url": "https://api.github.com/users/scnale/repos",
      "events_url": "https://api.github.com/users/scnale/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scnale/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-12T15:55:45Z",
    "updated_at": "2021-01-12T15:55:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "We recently merged a fix (#1158) for this and it'll be out in the next release.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/758752991/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/760528540",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1175#issuecomment-760528540",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1175",
    "id": 760528540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDUyODU0MA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-14T22:55:49Z",
    "updated_at": "2021-01-14T22:55:49Z",
    "author_association": "MEMBER",
    "body": "This has been fixed in v2.0.8. Thanks for reporting it!\r\n\r\nhttps://github.com/nomiclabs/hardhat/releases/tag/hardhat-core-v2.0.8",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/760528540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201",
  "id": 1380947686,
  "node_id": "I_kwDOB7jojM5ST5bm",
  "number": 3201,
  "title": "Hardhat-core `internal/cli/cli.js` is not executable anymore",
  "user": {
    "login": "ottodevs",
    "id": 5030059,
    "node_id": "MDQ6VXNlcjUwMzAwNTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5030059?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ottodevs",
    "html_url": "https://github.com/ottodevs",
    "followers_url": "https://api.github.com/users/ottodevs/followers",
    "following_url": "https://api.github.com/users/ottodevs/following{/other_user}",
    "gists_url": "https://api.github.com/users/ottodevs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ottodevs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ottodevs/subscriptions",
    "organizations_url": "https://api.github.com/users/ottodevs/orgs",
    "repos_url": "https://api.github.com/users/ottodevs/repos",
    "events_url": "https://api.github.com/users/ottodevs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ottodevs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-09-21T13:35:48Z",
  "updated_at": "2023-01-31T00:15:25Z",
  "closed_at": "2022-11-01T12:26:58Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Recent versions of hardhat changed the way `cli.js` is built, so it has not executable permission anymore, that causes new installations to fail while trying to call any `hardhat` command with `Permission denied`. It is specially disturbing in CI environments.\r\n\r\nTo reproduce, just install an older version of hardhat in an empty node project (ensure you are not caching dependencies) and run `ls -ll ./node_modules/hardhat/internal/cli/cli.js`\r\n\r\nThe output permissions show:\r\n`lrwxr-xr-x` (note the x that allows the program to be executable)\r\n\r\nNow try with the latest version and the output for  `ls -ll ./node_modules/hardhat/internal/cli/cli.js` is now:\r\n`-rw-r--r--` so the command hardhat that is just an alias for cli.js is not working anymore until making it executable",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253722808",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1253722808",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1253722808,
    "node_id": "IC_kwDOB7jojM5Kukq4",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-09-21T13:36:13Z",
    "updated_at": "2022-09-21T13:36:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1197/hardhat-core-internalcliclijs-is-not-executable-anymore).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: b7ba7e4f-0a56-4e10-93ad-32a12b5bfab0",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253722808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253785335",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1253785335",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1253785335,
    "node_id": "IC_kwDOB7jojM5Kuz73",
    "user": {
      "login": "ottodevs",
      "id": 5030059,
      "node_id": "MDQ6VXNlcjUwMzAwNTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5030059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ottodevs",
      "html_url": "https://github.com/ottodevs",
      "followers_url": "https://api.github.com/users/ottodevs/followers",
      "following_url": "https://api.github.com/users/ottodevs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ottodevs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ottodevs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ottodevs/subscriptions",
      "organizations_url": "https://api.github.com/users/ottodevs/orgs",
      "repos_url": "https://api.github.com/users/ottodevs/repos",
      "events_url": "https://api.github.com/users/ottodevs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ottodevs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T14:21:54Z",
    "updated_at": "2022-09-21T14:23:05Z",
    "author_association": "NONE",
    "body": "It does seem related to our code environment, because I tried several versions and all fail with the same issue, also with github actions:\r\n![image](https://user-images.githubusercontent.com/5030059/191529845-993bcea9-1817-4c6b-a443-893d2d98cb3d.png)\r\n\r\nMaybe it is related to pnpm or because I am using hardhat as a regular dependency instead of devDependency, I will keep trying and updating",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253785335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253847737",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1253847737",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1253847737,
    "node_id": "IC_kwDOB7jojM5KvDK5",
    "user": {
      "login": "ottodevs",
      "id": 5030059,
      "node_id": "MDQ6VXNlcjUwMzAwNTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5030059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ottodevs",
      "html_url": "https://github.com/ottodevs",
      "followers_url": "https://api.github.com/users/ottodevs/followers",
      "following_url": "https://api.github.com/users/ottodevs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ottodevs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ottodevs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ottodevs/subscriptions",
      "organizations_url": "https://api.github.com/users/ottodevs/orgs",
      "repos_url": "https://api.github.com/users/ottodevs/repos",
      "events_url": "https://api.github.com/users/ottodevs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ottodevs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T15:08:35Z",
    "updated_at": "2022-09-21T15:08:35Z",
    "author_association": "NONE",
    "body": "As I was suspecting the issue is related to `pnpm`  when `node-linker = hoisted` is defined in `.npmrc` so not specifically related to hardhat, but it happens with some packages like hardhat while others are installed with the proper permissions.\r\n\r\nThe current solution is to add `prefer-symlinked-executables = false` to `.npmrc`\r\n\r\nReference: https://github.com/pnpm/pnpm/issues/5252",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253847737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1297470407",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1297470407",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1297470407,
    "node_id": "IC_kwDOB7jojM5NVdPH",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-31T18:04:34Z",
    "updated_at": "2022-10-31T18:04:34Z",
    "author_association": "MEMBER",
    "body": "Hi @ottodevs, do you think there's something we can do on our side?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1297470407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1297863986",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1297863986",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1297863986,
    "node_id": "IC_kwDOB7jojM5NW9Uy",
    "user": {
      "login": "ottodevs",
      "id": 5030059,
      "node_id": "MDQ6VXNlcjUwMzAwNTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5030059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ottodevs",
      "html_url": "https://github.com/ottodevs",
      "followers_url": "https://api.github.com/users/ottodevs/followers",
      "following_url": "https://api.github.com/users/ottodevs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ottodevs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ottodevs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ottodevs/subscriptions",
      "organizations_url": "https://api.github.com/users/ottodevs/orgs",
      "repos_url": "https://api.github.com/users/ottodevs/repos",
      "events_url": "https://api.github.com/users/ottodevs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ottodevs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-01T00:47:24Z",
    "updated_at": "2022-11-01T00:47:24Z",
    "author_association": "NONE",
    "body": "> Hi @ottodevs, do you think there's something we can do on our side?\r\n\r\nMaybe there is a potential solution to generate the correct executable permissions for symlinked executables, as there are so many libraries that work correctly that way, but at this moment I am not sure what would be the potential fix... right now the workaround is adding that `.npmrc` flag, but that is probably degrading pnpm experience, since preventing symlinked executables will use more disk space.\r\n\r\nI don't know the correct answer, so maybe for now it is ok to close this, unless you have any idea on what is happening or enough amount of devs demand this to consider adding some priority.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1297863986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1298438033",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3201#issuecomment-1298438033",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3201",
    "id": 1298438033,
    "node_id": "IC_kwDOB7jojM5NZJeR",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-01T12:26:58Z",
    "updated_at": "2022-11-01T12:26:58Z",
    "author_association": "MEMBER",
    "body": "Thank you. I'm going to close it mainly for bookkeeping reasons but we do monitor closed issues. If you or anyone else has any idea of how to approach this, please leave a comment here.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1298438033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

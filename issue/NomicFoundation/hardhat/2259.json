{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2259",
  "id": 1102910794,
  "node_id": "I_kwDOB7jojM5BvRVK",
  "number": 2259,
  "title": "tsconfig short paths are not working",
  "user": {
    "login": "LukeSamkharadze",
    "id": 31849767,
    "node_id": "MDQ6VXNlcjMxODQ5NzY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/31849767?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukeSamkharadze",
    "html_url": "https://github.com/LukeSamkharadze",
    "followers_url": "https://api.github.com/users/LukeSamkharadze/followers",
    "following_url": "https://api.github.com/users/LukeSamkharadze/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukeSamkharadze/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukeSamkharadze/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukeSamkharadze/subscriptions",
    "organizations_url": "https://api.github.com/users/LukeSamkharadze/orgs",
    "repos_url": "https://api.github.com/users/LukeSamkharadze/repos",
    "events_url": "https://api.github.com/users/LukeSamkharadze/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukeSamkharadze/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "kanej",
    "id": 24030,
    "node_id": "MDQ6VXNlcjI0MDMw",
    "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kanej",
    "html_url": "https://github.com/kanej",
    "followers_url": "https://api.github.com/users/kanej/followers",
    "following_url": "https://api.github.com/users/kanej/following{/other_user}",
    "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
    "organizations_url": "https://api.github.com/users/kanej/orgs",
    "repos_url": "https://api.github.com/users/kanej/repos",
    "events_url": "https://api.github.com/users/kanej/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kanej/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "kanej",
      "id": 24030,
      "node_id": "MDQ6VXNlcjI0MDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanej",
      "html_url": "https://github.com/kanej",
      "followers_url": "https://api.github.com/users/kanej/followers",
      "following_url": "https://api.github.com/users/kanej/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
      "organizations_url": "https://api.github.com/users/kanej/orgs",
      "repos_url": "https://api.github.com/users/kanej/repos",
      "events_url": "https://api.github.com/users/kanej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanej/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-01-14T04:07:38Z",
  "updated_at": "2022-11-18T10:05:40Z",
  "closed_at": "2022-01-17T17:16:50Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "My `tsconfig.json`\r\n\r\n```JSON\r\n{\r\n  \"compilerOptions\": {\r\n    \"target\": \"es2018\",\r\n    \"module\": \"commonjs\",\r\n    \"strict\": true,\r\n    \"esModuleInterop\": true,\r\n    \"outDir\": \"dist\",\r\n    \"declaration\": true,\r\n    \"resolveJsonModule\": true,\r\n    \"baseUrl\": \".\",\r\n    \"paths\": {\r\n      \"@built-contracts/*\": [\"artifacts/contracts/*\"]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nHere is my `contracts/utils/SummitReferral.test.ts` file. Btw when I `ctrl` + `left click` the path `@built-contracts/utils/WBNB.sol/WBNB.json` it resolves file correctly\r\n\r\n```TS\r\nimport { expect, assert } from \"chai\";\r\nimport { Contract, utils } from \"ethers\";\r\nimport WETH from \"@built-contracts/utils/WBNB.sol/WBNB.json\";\r\n```\r\n\r\n`VS Code` has a little red squiggly as well, but it resolves path correctly when I hover the mouse\r\n\r\n![image](https://user-images.githubusercontent.com/31849767/149449559-89359b29-02e3-45e8-a579-f71943bc1037.png)\r\n\r\n\r\nOutput when running `hardhat test`\r\n\r\n```\r\n> hardhat test\r\n\r\nNo need to generate any newer typings.\r\nAn unexpected error occurred:\r\n\r\nError: Cannot find module '@built-contracts/utils/WBNB.sol/WBNB.json'\r\nRequire stack:\r\n- /home/luke/repos/dx/summitswap-contracts/test/SummitReferral.test.ts\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/mocha/lib/mocha.js\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/mocha/index.js\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/builtin-tasks/test.js\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/core/tasks/builtin-tasks.js\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/core/config/config-loading.js\r\n- /home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/cli/cli.js\r\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:902:15)\r\n    at Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (/home/luke/repos/dx/summitswap-contracts/node_modules/@cspotcode/source-map-support/source-map-support.js:679:30)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:746:27)\r\n    at Module.require (internal/modules/cjs/loader.js:974:19)\r\n    at require (internal/modules/cjs/helpers.js:93:18)\r\n    at Object.<anonymous> (/home/luke/repos/dx/summitswap-contracts/test/SummitReferral.test.ts:4:1)\r\n    at Module._compile (internal/modules/cjs/loader.js:1085:14)\r\n    at Module.m._compile (/home/luke/repos/dx/summitswap-contracts/node_modules/ts-node/src/index.ts:1371:23)\r\n    at Module._extensions..js (internal/modules/cjs/loader.js:1114:10)\r\n    at Object.require.extensions.<computed> [as .ts] (/home/luke/repos/dx/summitswap-contracts/node_modules/ts-node/src/index.ts:1374:12) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [\r\n    '/home/luke/repos/dx/summitswap-contracts/test/SummitReferral.test.ts',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/mocha/lib/mocha.js',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/mocha/index.js',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/builtin-tasks/test.js',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/core/tasks/builtin-tasks.js',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/core/config/config-loading.js',\r\n    '/home/luke/repos/dx/summitswap-contracts/node_modules/hardhat/internal/cli/cli.js'\r\n  ]\r\n}\r\n```\r\n\r\nI tried to use `tsconfig` paths in isolated/seperate project as well and it worked perfectly, maybe something is causing this issue in this project?",
  "closed_by": {
    "login": "LukeSamkharadze",
    "id": 31849767,
    "node_id": "MDQ6VXNlcjMxODQ5NzY3",
    "avatar_url": "https://avatars.githubusercontent.com/u/31849767?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LukeSamkharadze",
    "html_url": "https://github.com/LukeSamkharadze",
    "followers_url": "https://api.github.com/users/LukeSamkharadze/followers",
    "following_url": "https://api.github.com/users/LukeSamkharadze/following{/other_user}",
    "gists_url": "https://api.github.com/users/LukeSamkharadze/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LukeSamkharadze/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LukeSamkharadze/subscriptions",
    "organizations_url": "https://api.github.com/users/LukeSamkharadze/orgs",
    "repos_url": "https://api.github.com/users/LukeSamkharadze/repos",
    "events_url": "https://api.github.com/users/LukeSamkharadze/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LukeSamkharadze/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014378597",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2259#issuecomment-1014378597",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259",
    "id": 1014378597,
    "node_id": "IC_kwDOB7jojM48djBl",
    "user": {
      "login": "kanej",
      "id": 24030,
      "node_id": "MDQ6VXNlcjI0MDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanej",
      "html_url": "https://github.com/kanej",
      "followers_url": "https://api.github.com/users/kanej/followers",
      "following_url": "https://api.github.com/users/kanej/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
      "organizations_url": "https://api.github.com/users/kanej/orgs",
      "repos_url": "https://api.github.com/users/kanej/repos",
      "events_url": "https://api.github.com/users/kanej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T10:42:25Z",
    "updated_at": "2022-01-17T10:42:25Z",
    "author_association": "MEMBER",
    "body": "I was able to reproduce this error on a new hardhat (v2.8.2) typescript sample project, by adding the typescript paths in tsconfig and attempting to refer to contract output in the sample test.\r\n\r\n`npx hardhat test` shows the error above. A run of `tsc --traceResolution | grep @built-contracts` shows that pure typescript is able to resolve the json file:\r\n\r\n![image](https://user-images.githubusercontent.com/24030/149754899-293bfe3f-0093-47ac-8566-2a14d3cc2c7d.png)\r\n\r\nThe error must be either somewhere else in typescript or in the interplay between mocha, module resolution and typescript. ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014378597/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014690718",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2259#issuecomment-1014690718",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259",
    "id": 1014690718,
    "node_id": "IC_kwDOB7jojM48evOe",
    "user": {
      "login": "kanej",
      "id": 24030,
      "node_id": "MDQ6VXNlcjI0MDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/24030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kanej",
      "html_url": "https://github.com/kanej",
      "followers_url": "https://api.github.com/users/kanej/followers",
      "following_url": "https://api.github.com/users/kanej/following{/other_user}",
      "gists_url": "https://api.github.com/users/kanej/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kanej/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kanej/subscriptions",
      "organizations_url": "https://api.github.com/users/kanej/orgs",
      "repos_url": "https://api.github.com/users/kanej/repos",
      "events_url": "https://api.github.com/users/kanej/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kanej/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T16:02:01Z",
    "updated_at": "2022-01-17T16:02:01Z",
    "author_association": "MEMBER",
    "body": "Hey @LukeSamkharadze, to use typescript paths in hardhat you need to register the `tsconfig-paths/register` module in your hardhat config. You can find the details in the hardhat docs:\r\n\r\nhttps://hardhat.org/guides/typescript.html#support-for-path-mappings",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014690718/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 3,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014751863",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2259#issuecomment-1014751863",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2259",
    "id": 1014751863,
    "node_id": "IC_kwDOB7jojM48e-J3",
    "user": {
      "login": "LukeSamkharadze",
      "id": 31849767,
      "node_id": "MDQ6VXNlcjMxODQ5NzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31849767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukeSamkharadze",
      "html_url": "https://github.com/LukeSamkharadze",
      "followers_url": "https://api.github.com/users/LukeSamkharadze/followers",
      "following_url": "https://api.github.com/users/LukeSamkharadze/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukeSamkharadze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukeSamkharadze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukeSamkharadze/subscriptions",
      "organizations_url": "https://api.github.com/users/LukeSamkharadze/orgs",
      "repos_url": "https://api.github.com/users/LukeSamkharadze/repos",
      "events_url": "https://api.github.com/users/LukeSamkharadze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukeSamkharadze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T17:16:50Z",
    "updated_at": "2022-01-17T17:16:50Z",
    "author_association": "NONE",
    "body": "@kanej thanks a lot, it worked. I totally missed that",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1014751863/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

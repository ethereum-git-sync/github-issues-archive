{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945",
  "id": 1304463360,
  "node_id": "I_kwDOB7jojM5NwIgA",
  "number": 2945,
  "title": "Make typechecking opt-in instead of opt-out",
  "user": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2022-07-14T08:45:42Z",
  "updated_at": "2022-11-30T00:15:48Z",
  "closed_at": "2022-08-31T16:16:57Z",
  "author_association": "MEMBER",
  "active_lock_reason": "resolved",
  "body": "Typescript projects are always typechecked. You can opt-out of that with `TS_NODE_TRANSPILE_ONLY=1`, but most users don't know about this and it means unnecessary friction (since most of the time you probably don't want to typecheck).\r\n\r\nWe want to improve this. There are some things to do:\r\n\r\n1. Consider replacing `ts-node` with [`swc`](https://swc.rs/). Alternatively, just always set the transpile-only flag when using `ts-node`.\r\n2. Add some mechanism for explicitly typechecking the project, like a `typecheck` flag (or we could just use the existing `check` task).\r\n3. Document this where appropriate.",
  "closed_by": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1184171525",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1184171525",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1184171525,
    "node_id": "IC_kwDOB7jojM5GlQYF",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-14T08:46:05Z",
    "updated_at": "2022-07-14T08:46:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-959/make-typechecking-opt-in-instead-of-opt-out).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: ef1ee6e9-46ae-482a-826a-2519967d3aab",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1184171525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1206926421",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1206926421",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1206926421,
    "node_id": "IC_kwDOB7jojM5H8DxV",
    "user": {
      "login": "phated",
      "id": 992373,
      "node_id": "MDQ6VXNlcjk5MjM3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/992373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/phated",
      "html_url": "https://github.com/phated",
      "followers_url": "https://api.github.com/users/phated/followers",
      "following_url": "https://api.github.com/users/phated/following{/other_user}",
      "gists_url": "https://api.github.com/users/phated/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/phated/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/phated/subscriptions",
      "organizations_url": "https://api.github.com/users/phated/orgs",
      "repos_url": "https://api.github.com/users/phated/repos",
      "events_url": "https://api.github.com/users/phated/events{/privacy}",
      "received_events_url": "https://api.github.com/users/phated/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-05T21:51:17Z",
    "updated_at": "2022-08-05T21:51:17Z",
    "author_association": "NONE",
    "body": "@fvictorio I'd recommend staying on ts-node. I've been working with swc for some gulp stuff and it is still very experimental and contains significant bugs (such as segfaulting when having 2 copies on your system).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1206926421/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1206928575",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1206928575",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1206928575,
    "node_id": "IC_kwDOB7jojM5H8ES_",
    "user": {
      "login": "phated",
      "id": 992373,
      "node_id": "MDQ6VXNlcjk5MjM3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/992373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/phated",
      "html_url": "https://github.com/phated",
      "followers_url": "https://api.github.com/users/phated/followers",
      "following_url": "https://api.github.com/users/phated/following{/other_user}",
      "gists_url": "https://api.github.com/users/phated/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/phated/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/phated/subscriptions",
      "organizations_url": "https://api.github.com/users/phated/orgs",
      "repos_url": "https://api.github.com/users/phated/repos",
      "events_url": "https://api.github.com/users/phated/events{/privacy}",
      "received_events_url": "https://api.github.com/users/phated/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-05T21:52:13Z",
    "updated_at": "2022-08-05T21:52:13Z",
    "author_association": "NONE",
    "body": "fwiw, ts-node 10 supports `.cts` extension, which would allow hardhat.config.cts to remain compiled to commonjs even if it is within a `type: module` project.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1206928575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1207911840",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1207911840",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1207911840,
    "node_id": "IC_kwDOB7jojM5H_0Wg",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T09:55:20Z",
    "updated_at": "2022-08-08T09:55:20Z",
    "author_association": "MEMBER",
    "body": "@phated thank you for the tip. We are currently on the fence about using ts-node or swc and this might be the tie-breaker we needed.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1207911840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208360866",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208360866",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208360866,
    "node_id": "IC_kwDOB7jojM5IBh-i",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T16:44:52Z",
    "updated_at": "2022-08-08T16:48:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fvictorio Have you considered stuff like esbuild / esbuild-kit (https://github.com/esbuild-kit)? We leverage that toolchain to enable `vitest` to work with hardhat. And I'm also happily using `tsx` and `tsup` elsewhere.\r\n\r\nNot having to pass everything always through ts-node (and particularly the typechecking of course), comes with some significant performance gains for larger codebases.\r\n\r\nEDIT: Another issue with ts-node is that it still doesn't support path mappings. https://github.com/TypeStrong/ts-node/pull/1585",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208360866/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208523754",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208523754",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208523754,
    "node_id": "IC_kwDOB7jojM5ICJvq",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T19:29:28Z",
    "updated_at": "2022-08-08T19:29:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe this is the time to re-evaluate full ESM compatibility? <3 :-)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208523754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208551842",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208551842",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208551842,
    "node_id": "IC_kwDOB7jojM5ICQmi",
    "user": {
      "login": "phated",
      "id": 992373,
      "node_id": "MDQ6VXNlcjk5MjM3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/992373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/phated",
      "html_url": "https://github.com/phated",
      "followers_url": "https://api.github.com/users/phated/followers",
      "following_url": "https://api.github.com/users/phated/following{/other_user}",
      "gists_url": "https://api.github.com/users/phated/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/phated/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/phated/subscriptions",
      "organizations_url": "https://api.github.com/users/phated/orgs",
      "repos_url": "https://api.github.com/users/phated/repos",
      "events_url": "https://api.github.com/users/phated/events{/privacy}",
      "received_events_url": "https://api.github.com/users/phated/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T20:01:30Z",
    "updated_at": "2022-08-08T20:01:52Z",
    "author_association": "NONE",
    "body": "> Maybe this is the time to re-evaluate full ESM compatibility?\r\n\r\n\"Full ESM compat\" is impossible in hardhat before the next major. Hardhat's task system relies entirely on the order which tasks are imported and ESM is **always** async, which means order is not ensured whatsoever.\r\n\r\nFranco and I are looking into smaller changes that will allow hardhat to continue operating in CJS mode inside `type: module` projects.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208551842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208706796",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208706796",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208706796,
    "node_id": "IC_kwDOB7jojM5IC2bs",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T23:05:01Z",
    "updated_at": "2022-08-08T23:05:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > Maybe this is the time to re-evaluate full ESM compatibility?\r\n> \r\n> \"Full ESM compat\" is impossible in hardhat before the next major. Hardhat's task system relies entirely on the order which tasks are imported and ESM is **always** async, which means order is not ensured whatsoever.\r\n> \r\n> Franco and I are looking into smaller changes that will allow hardhat to continue operating in CJS mode inside `type: module` projects.\r\n\r\nIt's not impossible. Hard, to refactor without breaking changes, yes maybe ... But not impossible! I've discussed this before and looked into it for a few hours. It can be accomplished by separating and isolating all the internal components from the CLI and the \"task runner\" parts. For more tightly integrating with testrunners like vitest, jest, et. al this is arguably even a requirement anyways because you really don't want to take the test process parallelization capabilities away from those which you do if you wrap it upside down with the hardhat task runner first.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208706796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208710758",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208710758",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208710758,
    "node_id": "IC_kwDOB7jojM5IC3Zm",
    "user": {
      "login": "phated",
      "id": 992373,
      "node_id": "MDQ6VXNlcjk5MjM3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/992373?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/phated",
      "html_url": "https://github.com/phated",
      "followers_url": "https://api.github.com/users/phated/followers",
      "following_url": "https://api.github.com/users/phated/following{/other_user}",
      "gists_url": "https://api.github.com/users/phated/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/phated/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/phated/subscriptions",
      "organizations_url": "https://api.github.com/users/phated/orgs",
      "repos_url": "https://api.github.com/users/phated/repos",
      "events_url": "https://api.github.com/users/phated/events{/privacy}",
      "received_events_url": "https://api.github.com/users/phated/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T23:10:59Z",
    "updated_at": "2022-08-08T23:10:59Z",
    "author_association": "NONE",
    "body": "> Hard, to refactor without breaking changes, yes maybe ... But not impossible!\r\n\r\nIt's not about the hardhat implementation itself. It would be an ecosystem level breaking change. Everyone's hardhat.config file would be broken because task order cannot be guaranteed.\r\n\r\nAgain, we are discussing workarounds that will allow hardhat to exist alongside a `type: module` project.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208710758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208725094",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1208725094",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1208725094,
    "node_id": "IC_kwDOB7jojM5IC65m",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T23:33:10Z",
    "updated_at": "2022-08-08T23:33:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "What I'm saying is: Let's modularize the core components of hardhat and expose some of the underlying bits that are also useful outside of the task runner mode of operation (hardhat evm, etc.) programmatically. \r\n\r\nFirst of all, this would make customization and recomposability much easier: It's currently rather fiddly to access underlying functionality, bypassing the task runner / script / cli layer.  \r\n\r\nSecondly, it would allow for these components to then be defined as ES modules. The part that you are worried about, the `hardhat` package, task runner, config loading, etc. can remain CJS and simply wrap the ESM exports using async dynamic imports.\r\n\r\nThat way, everyone gets what they want: Those who fancy to use the internal modules conveniently, bypassing the hardhat cli to e.g. utilize the hardhat evm from within vitest or else can do so while those who want to continue to use the hardhat cli in its current form can do that too. It doesn't have to be either / or.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208725094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1209423295",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1209423295",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1209423295,
    "node_id": "IC_kwDOB7jojM5IFlW_",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-09T14:01:27Z",
    "updated_at": "2022-08-09T14:01:27Z",
    "author_association": "MEMBER",
    "body": "Thanks for the chiming in here, @phated and @fubhy! ðŸ’–\r\n\r\n> What I'm saying is: Let's modularize the core components of hardhat and expose some of the underlying bits that are also useful outside of the task runner mode of operation (hardhat evm, etc.) programmatically.\r\n\r\nThis is still something we want to do, as we discussed some time ago. We haven't had enough bandwidth yet, but we will soon. We've put a ton of work into growing the team lately.\r\n\r\nOnce we have a clear timeline to when this can happen I'll reach out. We may do it when we switch Hardhat Network's backend to rust, as now we use some ethereumjs' apis in our codebase (e.g. in our Blockchain).\r\n\r\n> The part that you are worried about, the hardhat package, task runner, config loading, etc. can remain CJS and simply wrap the ESM exports using async dynamic imports.\r\n\r\nYes, I think this is what Blaine means by not being able to add full support. Right now your config needs to be CJS (and hence everything imported from it), or the plugin system will break in ugly ways.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1209423295/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1209435807",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1209435807",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1209435807,
    "node_id": "IC_kwDOB7jojM5IFoaf",
    "user": {
      "login": "fubhy",
      "id": 1172528,
      "node_id": "MDQ6VXNlcjExNzI1Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1172528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubhy",
      "html_url": "https://github.com/fubhy",
      "followers_url": "https://api.github.com/users/fubhy/followers",
      "following_url": "https://api.github.com/users/fubhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubhy/subscriptions",
      "organizations_url": "https://api.github.com/users/fubhy/orgs",
      "repos_url": "https://api.github.com/users/fubhy/repos",
      "events_url": "https://api.github.com/users/fubhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-09T14:11:36Z",
    "updated_at": "2022-08-09T14:11:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @alcuadrado. Just to be clear I definitely don't want to derail this effort or distract you from your roadmap. I am just really eager to delete as much of the workarounds that are currently needed for our use-case as possible. I love deleting code :-). So apologies if I pushed this a bit off-topic.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1209435807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230607338",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1230607338",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1230607338,
    "node_id": "IC_kwDOB7jojM5JWZPq",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-29T17:18:27Z",
    "updated_at": "2022-08-29T17:18:27Z",
    "author_association": "MEMBER",
    "body": "This is what we need to do:\r\n\r\n1. Transpile-only by default. That's mainly about changing [this line](https://github.com/NomicFoundation/hardhat/blob/f23d106048c2cd5d98bcb3e11596afbcb085afa8/packages/hardhat-core/src/internal/core/typescript-support.ts#L71) and [this line](https://github.com/NomicFoundation/hardhat/blob/f23d106048c2cd5d98bcb3e11596afbcb085afa8/packages/hardhat-core/src/internal/util/scripts-runner.ts#L106) so that they require `\"ts-node/register/transpile-only\"` instead (unless typechecking is enabled, see next item).\r\n2. Add a `--typecheck` global flag. When used, `ts-node` will perform typechecking as it does now.\r\n3. Make the necessary changes in the [typescript guide](https://hardhat.org/hardhat-runner/docs/guides/typescript).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230607338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230695655",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2945#issuecomment-1230695655",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2945",
    "id": 1230695655,
    "node_id": "IC_kwDOB7jojM5JWuzn",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-29T18:25:10Z",
    "updated_at": "2022-08-29T18:25:10Z",
    "author_association": "MEMBER",
    "body": "Also, using `--typecheck` should throw if the project does not support typescript.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1230695655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

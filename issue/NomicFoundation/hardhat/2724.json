{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724",
  "id": 1238710024,
  "node_id": "I_kwDOB7jojM5J1TcI",
  "number": 2724,
  "title": "Strack traces not compatible with viaIR",
  "user": {
    "login": "axic",
    "id": 20340,
    "node_id": "MDQ6VXNlcjIwMzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axic",
    "html_url": "https://github.com/axic",
    "followers_url": "https://api.github.com/users/axic/followers",
    "following_url": "https://api.github.com/users/axic/following{/other_user}",
    "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
    "organizations_url": "https://api.github.com/users/axic/orgs",
    "repos_url": "https://api.github.com/users/axic/repos",
    "events_url": "https://api.github.com/users/axic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2022-05-17T14:14:42Z",
  "updated_at": "2023-02-20T00:16:15Z",
  "closed_at": "2022-11-21T16:19:48Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Using hardhat 2.9.5, after enabling `viaIR`:\r\n```json\r\n  solidity: {\r\n    compilers: [\r\n      {\r\n        version: \"0.8.13\",\r\n        settings: {\r\n          viaIR: true,\r\n          optimizer: {\r\n            enabled: true,\r\n            runs: 1000,\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n```\r\n\r\nSome stack traces cannot be generated properly:\r\n````\r\n/Projects/test/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js:108\r\n    return new SolidityCallSite(sourceReference.sourceName, sourceReference.contract, sourceReference.function !== undefined\r\n                                                ^\r\n\r\nTypeError: Cannot read property 'sourceName' of undefined\r\n````\r\n\r\nDumping the `stackTraceEmpty` shows it is for a panic, without a source reference:\r\n```\r\n{\r\n  type: 5,\r\n  sourceReference: undefined,\r\n  errorCode: BN {\r\n    negative: 0,\r\n    words: [\r\n      17, 0, 0, 0, 0,\r\n       0, 0, 0, 0, 0,\r\n       0\r\n    ],\r\n    length: 1,\r\n    red: null\r\n  }\r\n}\r\n```\r\n\r\nUnfortunately I cannot share a demo repository, but I believe the following should trigger:\r\n1. Code with arithmetic overflow (e.g. `balanceOf[msg.sender] = 1; balanceOf[msg.sender] += type(uint256).max`)\r\n2. A test case calling the above (it can expect a failure or not)",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724/reactions",
    "total_count": 5,
    "+1": 5,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1128926582",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1128926582",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1128926582,
    "node_id": "IC_kwDOB7jojM5DSg12",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-17T14:15:12Z",
    "updated_at": "2022-05-17T14:15:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-664/strack-traces-not-compatible-with-viair-[nomicfoundationhardhat2724]).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: c329f1ec-445c-48b6-b455-6bffb3deb2db",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1128926582/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1149873289",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1149873289",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1149873289,
    "node_id": "IC_kwDOB7jojM5EiayJ",
    "user": {
      "login": "134dd3v",
      "id": 88387604,
      "node_id": "MDQ6VXNlcjg4Mzg3NjA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/88387604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/134dd3v",
      "html_url": "https://github.com/134dd3v",
      "followers_url": "https://api.github.com/users/134dd3v/followers",
      "following_url": "https://api.github.com/users/134dd3v/following{/other_user}",
      "gists_url": "https://api.github.com/users/134dd3v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/134dd3v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/134dd3v/subscriptions",
      "organizations_url": "https://api.github.com/users/134dd3v/orgs",
      "repos_url": "https://api.github.com/users/134dd3v/repos",
      "events_url": "https://api.github.com/users/134dd3v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/134dd3v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T12:50:07Z",
    "updated_at": "2022-06-08T12:50:07Z",
    "author_association": "NONE",
    "body": "It would be great to simply skip the stack trace if its not supported.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1149873289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150011036",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1150011036",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1150011036,
    "node_id": "IC_kwDOB7jojM5Ei8ac",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T14:40:16Z",
    "updated_at": "2022-06-08T14:40:16Z",
    "author_association": "MEMBER",
    "body": "@134dd3v what do you mean? Hardhat doesn't crash or anything if the stack trace is not supported (or at least it shouldn't).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150011036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150022860",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1150022860",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1150022860,
    "node_id": "IC_kwDOB7jojM5Ei_TM",
    "user": {
      "login": "134dd3v",
      "id": 88387604,
      "node_id": "MDQ6VXNlcjg4Mzg3NjA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/88387604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/134dd3v",
      "html_url": "https://github.com/134dd3v",
      "followers_url": "https://api.github.com/users/134dd3v/followers",
      "following_url": "https://api.github.com/users/134dd3v/following{/other_user}",
      "gists_url": "https://api.github.com/users/134dd3v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/134dd3v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/134dd3v/subscriptions",
      "organizations_url": "https://api.github.com/users/134dd3v/orgs",
      "repos_url": "https://api.github.com/users/134dd3v/repos",
      "events_url": "https://api.github.com/users/134dd3v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/134dd3v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T14:49:21Z",
    "updated_at": "2022-06-08T14:50:10Z",
    "author_association": "NONE",
    "body": "In our [CI](https://github.com/RageTrade/core/runs/6794473742?check_suite_focus=true), at the very end, there's an error printed:\r\n\r\n```\r\n/home/runner/work/core/core/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js:108\r\n    return new SolidityCallSite(sourceReference.sourceName, sourceReference.contract, sourceReference.function !== undefined\r\n\r\n\r\nTypeError: Cannot read properties of undefined (reading 'sourceName')\r\n```\r\n\r\nIt doesn't crash hardhat but does throw an error. In most of our tests, we do a setup in before hook and ig that's where it throws.\r\n\r\nPost that I've just added a simple [patch](https://github.com/RageTrade/core/pull/164/commits/33e727123513ad98cccebee9bbefd195b3de4278) which at least prevents the `TypeError` from being thrown and our tests continue to run as they should.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150022860/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150026698",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1150026698",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1150026698,
    "node_id": "IC_kwDOB7jojM5EjAPK",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T14:52:19Z",
    "updated_at": "2022-06-08T14:52:19Z",
    "author_association": "MEMBER",
    "body": "Thank you @134dd3v, we'll look into that.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150026698/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150140948",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1150140948",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1150140948,
    "node_id": "IC_kwDOB7jojM5EjcIU",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T16:33:18Z",
    "updated_at": "2022-06-08T16:33:18Z",
    "author_association": "NONE",
    "body": "> Hardhat doesn't crash or anything if the stack trace is not supported (or at least it shouldn't).\r\n\r\nThat is the point of this report, it does crash ðŸ˜“ ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1150140948/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1151251053",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1151251053",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1151251053,
    "node_id": "IC_kwDOB7jojM5EnrJt",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T15:12:04Z",
    "updated_at": "2022-06-09T15:12:04Z",
    "author_association": "NONE",
    "body": "> In our [CI](https://github.com/RageTrade/core/runs/6794473742?check_suite_focus=true), at the very end, there's an error printed:\r\n\r\nThis looks like the problem I reported in #2115. It happens in tons of projects with `viaIR` with the latest compiler when they test revert messages. And AFAIK that's mostly a matter of Hardhat's heuristics not matching the code produced by the IR codegen.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1151251053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1151257491",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1151257491",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1151257491,
    "node_id": "IC_kwDOB7jojM5EnsuT",
    "user": {
      "login": "axic",
      "id": 20340,
      "node_id": "MDQ6VXNlcjIwMzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/20340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axic",
      "html_url": "https://github.com/axic",
      "followers_url": "https://api.github.com/users/axic/followers",
      "following_url": "https://api.github.com/users/axic/following{/other_user}",
      "gists_url": "https://api.github.com/users/axic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axic/subscriptions",
      "organizations_url": "https://api.github.com/users/axic/orgs",
      "repos_url": "https://api.github.com/users/axic/repos",
      "events_url": "https://api.github.com/users/axic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T15:17:09Z",
    "updated_at": "2022-06-09T15:17:39Z",
    "author_association": "NONE",
    "body": "btw this is my local workaround:\r\n```diff\r\n function sourceReferenceToSolidityCallsite(sourceReference) {\r\n+    if (!sourceReference) {\r\n+      return new SolidityCallSite(\"UnknownFile\", \"UnknownContract\", solidity_stack_trace_1.UNKNOWN_FUNCTION_NAME, 0);\r\n+    }\r\n\r\n     return new SolidityCallSite(sourceReference.sourceName, sourceReference.contract, sourceReference.function !== undefined\r\n        ? sourceReference.function\r\n        : solidity_stack_trace_1.UNKNOWN_FUNCTION_NAME, sourceReference.line);\r\n }\r\n```\r\n\r\nIt helps me run it, but that's about it.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1151257491/reactions",
      "total_count": 10,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 3,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1161998080",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1161998080",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1161998080,
    "node_id": "IC_kwDOB7jojM5FQq8A",
    "user": {
      "login": "aleph-v",
      "id": 20227705,
      "node_id": "MDQ6VXNlcjIwMjI3NzA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/20227705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aleph-v",
      "html_url": "https://github.com/aleph-v",
      "followers_url": "https://api.github.com/users/aleph-v/followers",
      "following_url": "https://api.github.com/users/aleph-v/following{/other_user}",
      "gists_url": "https://api.github.com/users/aleph-v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aleph-v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aleph-v/subscriptions",
      "organizations_url": "https://api.github.com/users/aleph-v/orgs",
      "repos_url": "https://api.github.com/users/aleph-v/repos",
      "events_url": "https://api.github.com/users/aleph-v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aleph-v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-21T16:40:17Z",
    "updated_at": "2022-06-21T16:40:17Z",
    "author_association": "NONE",
    "body": "Hi, I'd like to report also having this bug and it breaking the tests. When viaIR is enabled in 8.14 the tests do not run and instead error out. Without viaIR on the same tests all pass and work properly.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1161998080/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253679972",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1253679972",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1253679972,
    "node_id": "IC_kwDOB7jojM5KuaNk",
    "user": {
      "login": "emretepedev",
      "id": 70508617,
      "node_id": "MDQ6VXNlcjcwNTA4NjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/70508617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emretepedev",
      "html_url": "https://github.com/emretepedev",
      "followers_url": "https://api.github.com/users/emretepedev/followers",
      "following_url": "https://api.github.com/users/emretepedev/following{/other_user}",
      "gists_url": "https://api.github.com/users/emretepedev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emretepedev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emretepedev/subscriptions",
      "organizations_url": "https://api.github.com/users/emretepedev/orgs",
      "repos_url": "https://api.github.com/users/emretepedev/repos",
      "events_url": "https://api.github.com/users/emretepedev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emretepedev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T13:02:41Z",
    "updated_at": "2022-09-21T13:02:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Same issue here. Is there any suggestion?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1253679972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1254959197",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1254959197",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1254959197,
    "node_id": "IC_kwDOB7jojM5KzShd",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T12:33:26Z",
    "updated_at": "2022-09-22T12:33:26Z",
    "author_association": "MEMBER",
    "body": "We are going to add some basic support for viaIR (probably in the next release), but stack traces and error inferring won't work 100% well until this issue is somehow solved: https://github.com/ethereum/solidity/issues/12533\r\n\r\nWe are also going to print a warning indicating so, but at least compiling contracts and running tests will work fine.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1254959197/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1276054032",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1276054032",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1276054032,
    "node_id": "IC_kwDOB7jojM5MDwoQ",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-12T12:08:05Z",
    "updated_at": "2022-10-12T12:08:05Z",
    "author_association": "MEMBER",
    "body": "For anyone interested in this: we just published a version under the `ir` npm tag with some basic support for viaIR. As explained before, this is experimental support, and things like stack traces and inferred errors won't work as well as with the normal compilation pipeline.\r\n\r\nYou can try it out with `npm install hardhat@ir`.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1276054032/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1276407174",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1276407174",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1276407174,
    "node_id": "IC_kwDOB7jojM5MFG2G",
    "user": {
      "login": "emretepedev",
      "id": 70508617,
      "node_id": "MDQ6VXNlcjcwNTA4NjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/70508617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emretepedev",
      "html_url": "https://github.com/emretepedev",
      "followers_url": "https://api.github.com/users/emretepedev/followers",
      "following_url": "https://api.github.com/users/emretepedev/following{/other_user}",
      "gists_url": "https://api.github.com/users/emretepedev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emretepedev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emretepedev/subscriptions",
      "organizations_url": "https://api.github.com/users/emretepedev/orgs",
      "repos_url": "https://api.github.com/users/emretepedev/repos",
      "events_url": "https://api.github.com/users/emretepedev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emretepedev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-12T15:58:50Z",
    "updated_at": "2022-10-12T17:07:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "It works well for me. I didn't get this error:\r\n\r\n`TypeError: Cannot read properties of undefined (reading 'sourceName')`\r\n\r\nThanks!\r\n\r\n> For anyone interested in this: we just published a version under the `ir` npm tag with some basic support for viaIR. As explained before, this is experimental support, and things like stack traces and inferred errors won't work as well as with the normal compilation pipeline.\r\n> \r\n> You can try it out with `npm install hardhat@ir`.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1276407174/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1321024494",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1321024494",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1321024494,
    "node_id": "IC_kwDOB7jojM5OvTvu",
    "user": {
      "login": "scotthconner",
      "id": 952183,
      "node_id": "MDQ6VXNlcjk1MjE4Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/952183?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scotthconner",
      "html_url": "https://github.com/scotthconner",
      "followers_url": "https://api.github.com/users/scotthconner/followers",
      "following_url": "https://api.github.com/users/scotthconner/following{/other_user}",
      "gists_url": "https://api.github.com/users/scotthconner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scotthconner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scotthconner/subscriptions",
      "organizations_url": "https://api.github.com/users/scotthconner/orgs",
      "repos_url": "https://api.github.com/users/scotthconner/repos",
      "events_url": "https://api.github.com/users/scotthconner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scotthconner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-20T03:28:30Z",
    "updated_at": "2022-11-20T03:28:30Z",
    "author_association": "NONE",
    "body": "I dont know what hardhat@ir does, but it fixed my issues. I ended up on this adventure:\r\n\r\n1) Create a solidity smart contract method with enough arguments that it produced a stack too deep error.\r\n2) Do research on optimizer and viaIR. Enable it.\r\n3) Realize that tests fail with viaIR on?\r\n4) Find this thread.\r\n5) run npm install hardhat@ir\r\n6) re-run npx hardhat compile; npx hardhat test\r\n7) Profit?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1321024494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1321024602",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1321024602",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1321024602,
    "node_id": "IC_kwDOB7jojM5OvTxa",
    "user": {
      "login": "scotthconner",
      "id": 952183,
      "node_id": "MDQ6VXNlcjk1MjE4Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/952183?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scotthconner",
      "html_url": "https://github.com/scotthconner",
      "followers_url": "https://api.github.com/users/scotthconner/followers",
      "following_url": "https://api.github.com/users/scotthconner/following{/other_user}",
      "gists_url": "https://api.github.com/users/scotthconner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scotthconner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scotthconner/subscriptions",
      "organizations_url": "https://api.github.com/users/scotthconner/orgs",
      "repos_url": "https://api.github.com/users/scotthconner/repos",
      "events_url": "https://api.github.com/users/scotthconner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scotthconner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-20T03:29:41Z",
    "updated_at": "2022-11-20T03:29:41Z",
    "author_association": "NONE",
    "body": "However, I get this when running \"npx hardhat coverage\":\r\n\r\nYulException: Variable var__921 is 3 slot(s) too deep inside the stack. Stack too deep. Try compiling with `--via-ir` (cli) or the equivalent `viaIR: true` (standard JSON) while enabling the optimizer. Otherwise, try removing local variables.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1321024602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1322318439",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2724#issuecomment-1322318439",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2724",
    "id": 1322318439,
    "node_id": "IC_kwDOB7jojM5O0Ppn",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-21T16:19:48Z",
    "updated_at": "2022-11-21T16:19:48Z",
    "author_association": "MEMBER",
    "body": "Thank you for the feedback @scotthconner.\r\n\r\nI'm going to close this issue now in favor of #3365, so we can have all the information related to the IR support in a single issue. Please leave any feedback about the `hardhat@ir` version there.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1322318439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

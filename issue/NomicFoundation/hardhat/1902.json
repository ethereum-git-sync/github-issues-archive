{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902",
  "id": 1005616670,
  "node_id": "I_kwDOB7jojM478H4e",
  "number": 1902,
  "title": "Hardhat forking network validation",
  "user": {
    "login": "fredlacs",
    "id": 32464905,
    "node_id": "MDQ6VXNlcjMyNDY0OTA1",
    "avatar_url": "https://avatars.githubusercontent.com/u/32464905?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fredlacs",
    "html_url": "https://github.com/fredlacs",
    "followers_url": "https://api.github.com/users/fredlacs/followers",
    "following_url": "https://api.github.com/users/fredlacs/following{/other_user}",
    "gists_url": "https://api.github.com/users/fredlacs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fredlacs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fredlacs/subscriptions",
    "organizations_url": "https://api.github.com/users/fredlacs/orgs",
    "repos_url": "https://api.github.com/users/fredlacs/repos",
    "events_url": "https://api.github.com/users/fredlacs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fredlacs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 4745762096,
      "node_id": "LA_kwDOB7jojM8AAAABGt6VMA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/blocked-reason:needs-rethnet",
      "name": "blocked-reason:needs-rethnet",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 4937718880,
      "node_id": "LA_kwDOB7jojM8AAAABJk-cYA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:improvement",
      "name": "type:improvement",
      "color": "FBCA04",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-09-23T16:12:28Z",
  "updated_at": "2023-02-02T21:23:13Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "A number of users attempt to fork different networks using hardhat.\r\n\r\nSome networks are evm compatible with an RPC interface that works with hardhat forking, but the internals are sometimes different to that of the evm (for example gas metering is different).\r\n\r\nBy forking these networks with hardhat, users might get the impression that their tests are executing correctly but when contracts are deployed they can fail.\r\n\r\nThis can still be useful for integration testing, but users should get a warning about that when attempting to fork certain networks.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/926580331",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902#issuecomment-926580331",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
    "id": 926580331,
    "node_id": "IC_kwDOB7jojM43On5r",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T12:18:24Z",
    "updated_at": "2021-09-24T12:18:24Z",
    "author_association": "MEMBER",
    "body": "Thanks for opening this issue, @fredlacs. It's something that we also noticed and were worried about. Many users don't realize that Hardhat Network and Arbitrum are very different systems, with some compatibility.\r\n\r\nHow do you think we should communicate this? In particular, what did you mean by \"This can still be useful for integration testing\"? Integration tests for contracts that are meant to be run on Arbitrum?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/926580331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/926799686",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902#issuecomment-926799686",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
    "id": 926799686,
    "node_id": "IC_kwDOB7jojM43PddG",
    "user": {
      "login": "fredlacs",
      "id": 32464905,
      "node_id": "MDQ6VXNlcjMyNDY0OTA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32464905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fredlacs",
      "html_url": "https://github.com/fredlacs",
      "followers_url": "https://api.github.com/users/fredlacs/followers",
      "following_url": "https://api.github.com/users/fredlacs/following{/other_user}",
      "gists_url": "https://api.github.com/users/fredlacs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fredlacs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fredlacs/subscriptions",
      "organizations_url": "https://api.github.com/users/fredlacs/orgs",
      "repos_url": "https://api.github.com/users/fredlacs/repos",
      "events_url": "https://api.github.com/users/fredlacs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fredlacs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T17:25:53Z",
    "updated_at": "2021-09-24T17:25:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "The feature is useful for integration testing in the sense that it can give a dev more confidence that their Arbitrum deployment will integrate with the correct addresses and using the intended interfaces.\r\n\r\nThe two main issues that I'd highlight in a warning are: possible different execution environment, precompiles and gas metering.\r\n\r\nI think an opt-in mechanism with loud warnings for any chain ID that isn't whitelisted works well.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/926799686/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1192876616",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902#issuecomment-1192876616",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
    "id": 1192876616,
    "node_id": "IC_kwDOB7jojM5HGdpI",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-22T19:32:01Z",
    "updated_at": "2022-07-22T19:32:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1192876616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195848219",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902#issuecomment-1195848219",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
    "id": 1195848219,
    "node_id": "IC_kwDOB7jojM5HRzIb",
    "user": {
      "login": "gzeoneth",
      "id": 95478735,
      "node_id": "U_kgDOBbDjzw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95478735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gzeoneth",
      "html_url": "https://github.com/gzeoneth",
      "followers_url": "https://api.github.com/users/gzeoneth/followers",
      "following_url": "https://api.github.com/users/gzeoneth/following{/other_user}",
      "gists_url": "https://api.github.com/users/gzeoneth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gzeoneth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gzeoneth/subscriptions",
      "organizations_url": "https://api.github.com/users/gzeoneth/orgs",
      "repos_url": "https://api.github.com/users/gzeoneth/repos",
      "events_url": "https://api.github.com/users/gzeoneth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gzeoneth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T18:39:45Z",
    "updated_at": "2022-07-26T18:40:15Z",
    "author_association": "NONE",
    "body": "With #2995, the user would have to add a new flag to make networks like Arbitrum Nitro works with hardhat. That would serves as part of the opt-in mechanism but we probably should still have a warning based on chainId.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195848219/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1414391054",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1902#issuecomment-1414391054",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1902",
    "id": 1414391054,
    "node_id": "IC_kwDOB7jojM5UTeUO",
    "user": {
      "login": "mdcoon",
      "id": 15849695,
      "node_id": "MDQ6VXNlcjE1ODQ5Njk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15849695?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdcoon",
      "html_url": "https://github.com/mdcoon",
      "followers_url": "https://api.github.com/users/mdcoon/followers",
      "following_url": "https://api.github.com/users/mdcoon/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdcoon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdcoon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdcoon/subscriptions",
      "organizations_url": "https://api.github.com/users/mdcoon/orgs",
      "repos_url": "https://api.github.com/users/mdcoon/repos",
      "events_url": "https://api.github.com/users/mdcoon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdcoon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-02T21:23:13Z",
    "updated_at": "2023-02-02T21:23:13Z",
    "author_association": "NONE",
    "body": "To add to the discussion. The precompiles are essential for any smart contract attempting to get L1 gas fee information on-chain, or even offchain in unit tests through the harhat ethers providers. The precompile addresses/opcodes are not passing. If I call an RPC endpoint directly outside of Hardhat, it works fine. But obviously can't test my contracts through a forked Hardhat instance that does not support the precompiles. Perhaps some opcodes and precompile addresses could be mapped to fallback to the backing archive node RPC endpoint. ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1414391054/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

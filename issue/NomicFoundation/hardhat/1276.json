{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276",
  "id": 816574361,
  "node_id": "MDU6SXNzdWU4MTY1NzQzNjE=",
  "number": 1276,
  "title": "running the command runs hardhat twice",
  "user": {
    "login": "novaknole",
    "id": 23176187,
    "node_id": "MDQ6VXNlcjIzMTc2MTg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/23176187?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/novaknole",
    "html_url": "https://github.com/novaknole",
    "followers_url": "https://api.github.com/users/novaknole/followers",
    "following_url": "https://api.github.com/users/novaknole/following{/other_user}",
    "gists_url": "https://api.github.com/users/novaknole/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/novaknole/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/novaknole/subscriptions",
    "organizations_url": "https://api.github.com/users/novaknole/orgs",
    "repos_url": "https://api.github.com/users/novaknole/repos",
    "events_url": "https://api.github.com/users/novaknole/events{/privacy}",
    "received_events_url": "https://api.github.com/users/novaknole/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-25T16:04:34Z",
  "updated_at": "2022-11-18T19:00:41Z",
  "closed_at": "2021-03-03T15:04:52Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "This is my `tsconfig.json`.\r\n\r\n```js\r\n{\r\n    \"compilerOptions\": {\r\n      \"target\": \"es5\",\r\n      \"module\": \"commonjs\",\r\n      \"strict\": true,\r\n      \"esModuleInterop\": true,\r\n      \"moduleResolution\": \"node\",\r\n      \"forceConsistentCasingInFileNames\": true,\r\n      \"outDir\": \"dist\"\r\n    },\r\n    \"include\": [\"hardhat.config.ts\", \"./tasks\", \"./deploy\", \"./test\"]\r\n  }\r\n```\r\n\r\nThis is my `hardhat config`.\r\n\r\n```js\r\nimport { HardhatUserConfig } from 'hardhat/types'\r\nimport '@nomiclabs/hardhat-ethers'\r\nimport '@nomiclabs/hardhat-etherscan'\r\nimport '@nomiclabs/hardhat-waffle'\r\nimport 'hardhat-deploy'\r\nimport 'hardhat-typechain'\r\nimport 'solidity-coverage'\r\n\r\nimport { accounts } from './utils/network'\r\n\r\nconst config: HardhatUserConfig = {\r\n  solidity: {\r\n    version: '0.6.8',\r\n    settings: {\r\n      optimizer: {\r\n        enabled: true,\r\n        runs: 20000, // TODO: target average DAO use\r\n      },\r\n    },\r\n  },\r\n  etherscan: {\r\n    apiKey: process.env.ETHERSCAN_KEY,\r\n  },\r\n  networks: {\r\n    exampleHere: {\r\n      url: \"https://fasfasf.eth.aragon.network\",\r\n      accounts: accounts('mainnet123'),\r\n    },\r\n    rinkeby: {\r\n      url: 'https://rinkeby.eth.aragon.network',\r\n      accounts: accounts('rinkeby'),\r\n    }\r\n  },\r\n}\r\n```\r\n\r\nIn my package.json, I have this.\r\n\r\n```js\r\n\"deploy\": \"hardhat deploy\",\r\n```\r\n\r\nand I run `yarn deploy --network rinkeby`.\r\n\r\nas you can see in the code, `accounts` is my function which just returns the private key for the according network. \r\n\r\nThe problem is that `accounts` runs twice for `rinkeby` network and for also `exampleHere` . If I put `exampleHere` below `rinkeby` in the config, then it runs only twice.  \r\n\r\nNo idea what's going on..",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786050861",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786050861",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786050861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjA1MDg2MQ==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T16:58:23Z",
    "updated_at": "2021-02-25T16:58:23Z",
    "author_association": "MEMBER",
    "body": "There's a few cases where Hardhat can be initialized more than once, for example `npx hardhat console` and `npx hardhat run <script>`. There's no guarantee that your config file will be evaluated just once.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786050861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786054635",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786054635",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786054635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjA1NDYzNQ==",
    "user": {
      "login": "novaknole",
      "id": 23176187,
      "node_id": "MDQ6VXNlcjIzMTc2MTg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/23176187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/novaknole",
      "html_url": "https://github.com/novaknole",
      "followers_url": "https://api.github.com/users/novaknole/followers",
      "following_url": "https://api.github.com/users/novaknole/following{/other_user}",
      "gists_url": "https://api.github.com/users/novaknole/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/novaknole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/novaknole/subscriptions",
      "organizations_url": "https://api.github.com/users/novaknole/orgs",
      "repos_url": "https://api.github.com/users/novaknole/repos",
      "events_url": "https://api.github.com/users/novaknole/events{/privacy}",
      "received_events_url": "https://api.github.com/users/novaknole/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T17:03:42Z",
    "updated_at": "2021-02-25T17:03:56Z",
    "author_association": "NONE",
    "body": "This gives a problem, because currently, I have the following config:\r\n\r\n```js\r\nnetworks: {\r\n    mainnet: {\r\n      url: \"https://mainnet.network\",\r\n      accounts: accounts('mainnet'),\r\n    },\r\n    rinkeby: {\r\n      url: 'https://rinkeby.network',\r\n      accounts: accounts('rinkeby'),\r\n    }\r\n  },\r\n```\r\n\r\nWhen I run `yarn deploy --network rinkeby`, it runs both of the networks(`mainnet and rinkeby`) which results in an error `not enough gas to deploy contract` , because I don't have any money on the mainnet..",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786054635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786173730",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786173730",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786173730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjE3MzczMA==",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T20:17:07Z",
    "updated_at": "2021-02-25T20:17:07Z",
    "author_association": "MEMBER",
    "body": "Oh, that's not what I meant. The config file may be evaluated multiple times, but the task should be run once.\r\n\r\n@wighawag does this sound familiar to you?\r\n\r\nWhat does your `accounts` function do?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786173730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786174798",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786174798",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786174798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjE3NDc5OA==",
    "user": {
      "login": "novaknole",
      "id": 23176187,
      "node_id": "MDQ6VXNlcjIzMTc2MTg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/23176187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/novaknole",
      "html_url": "https://github.com/novaknole",
      "followers_url": "https://api.github.com/users/novaknole/followers",
      "following_url": "https://api.github.com/users/novaknole/following{/other_user}",
      "gists_url": "https://api.github.com/users/novaknole/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/novaknole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/novaknole/subscriptions",
      "organizations_url": "https://api.github.com/users/novaknole/orgs",
      "repos_url": "https://api.github.com/users/novaknole/repos",
      "events_url": "https://api.github.com/users/novaknole/events{/privacy}",
      "received_events_url": "https://api.github.com/users/novaknole/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T20:18:52Z",
    "updated_at": "2021-02-25T20:18:52Z",
    "author_association": "NONE",
    "body": "I think, I understand now. It seems like `accounts` function gets run multiple times, but actual task gets run one time. \r\n\r\nSounds good to me and thanks for the quick follow up\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786174798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786184495",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786184495",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786184495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjE4NDQ5NQ==",
    "user": {
      "login": "novaknole",
      "id": 23176187,
      "node_id": "MDQ6VXNlcjIzMTc2MTg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/23176187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/novaknole",
      "html_url": "https://github.com/novaknole",
      "followers_url": "https://api.github.com/users/novaknole/followers",
      "following_url": "https://api.github.com/users/novaknole/following{/other_user}",
      "gists_url": "https://api.github.com/users/novaknole/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/novaknole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/novaknole/subscriptions",
      "organizations_url": "https://api.github.com/users/novaknole/orgs",
      "repos_url": "https://api.github.com/users/novaknole/repos",
      "events_url": "https://api.github.com/users/novaknole/events{/privacy}",
      "received_events_url": "https://api.github.com/users/novaknole/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T20:31:40Z",
    "updated_at": "2021-02-25T20:31:40Z",
    "author_association": "NONE",
    "body": "@alcuadrado \r\n\r\nSorry for asking questions here, This will be my last question and while you're here, maybe asking this in this thread makes more sense.\r\n\r\nThere's a function hardhat exposes such as :\r\n\r\n```\r\nawait HRE.run(task, params)\r\n```\r\n\r\nI put it in a `try/catch` block. For my case, it goes into catch block with a reason: `Reason: Contract source code already verified`. Is there any way I can somehow import a type which would quickly let me know that it throws this error specifically ? I don't want to do `if(error == \"Reason: Contract source code already verified\")`.\r\n\r\nThanks a lot in advance.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786184495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786196047",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1276#issuecomment-786196047",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1276",
    "id": 786196047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjE5NjA0Nw==",
    "user": {
      "login": "wighawag",
      "id": 790580,
      "node_id": "MDQ6VXNlcjc5MDU4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/790580?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wighawag",
      "html_url": "https://github.com/wighawag",
      "followers_url": "https://api.github.com/users/wighawag/followers",
      "following_url": "https://api.github.com/users/wighawag/following{/other_user}",
      "gists_url": "https://api.github.com/users/wighawag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wighawag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wighawag/subscriptions",
      "organizations_url": "https://api.github.com/users/wighawag/orgs",
      "repos_url": "https://api.github.com/users/wighawag/repos",
      "events_url": "https://api.github.com/users/wighawag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wighawag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T20:53:31Z",
    "updated_at": "2021-02-25T20:53:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Oh, that's not what I meant. The config file may be evaluated multiple times, but the task should be run once.\r\n> \r\n> @wighawag does this sound familiar to you?\r\n> \r\n> What does your `accounts` function do?\r\n\r\nit is a utility function I have in my boilerplate : https://github.com/wighawag/template-ethereum-contracts/blob/8e72bef568fc317f524bfb3164a479bdc0d0ed4a/utils/network.ts#L41-L43\r\n\r\nit help make you have different account per network using env variable if set, so you can have a generic env for all network or a specific one as you wish.\r\n\r\nI did not know that `hardhat.config.js` would be called multiple time though. And so that would be the reason for the multiple call here.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/786196047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

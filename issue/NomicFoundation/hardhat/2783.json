{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2783",
  "id": 1253169165,
  "node_id": "I_kwDOB7jojM5KsdgN",
  "number": 2783,
  "title": "hardhat_mine won't work with valid hex string",
  "user": {
    "login": "gbarros",
    "id": 1740378,
    "node_id": "MDQ6VXNlcjE3NDAzNzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1740378?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gbarros",
    "html_url": "https://github.com/gbarros",
    "followers_url": "https://api.github.com/users/gbarros/followers",
    "following_url": "https://api.github.com/users/gbarros/following{/other_user}",
    "gists_url": "https://api.github.com/users/gbarros/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gbarros/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gbarros/subscriptions",
    "organizations_url": "https://api.github.com/users/gbarros/orgs",
    "repos_url": "https://api.github.com/users/gbarros/repos",
    "events_url": "https://api.github.com/users/gbarros/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gbarros/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-05-30T22:48:23Z",
  "updated_at": "2022-11-18T08:57:31Z",
  "closed_at": "2022-05-31T15:14:35Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "\r\nThe code block bellow won't work on version `2.9.7`.  (I didn't test other versions, I upgraded straight to lastest).\r\n\r\nI was updating my test utility functions to use `hardhat_mine` and it's a common practice of \"toHex\" functions to produce strings with pairs for hex numbers. It means that the 256 blocks example given would actually produce the zero before the 1. \r\n```\r\n// mine 256 blocks\r\nawait hre.network.provider.send(\"hardhat_mine\", [\"0x0100\"])\r\n```\r\n\r\nYou can check the produced hex strings on common functions such as:\r\n```\r\nethers.utils.hexlify(256)\r\nBigNumber.from(256).toHexString()\r\n```\r\n\r\nThe error produced on tests is the following: \r\n```\r\n InvalidArgumentsError: Errors encountered in param 0: Invalid value \"0x0100\" supplied to : QUANTITY | undefined\r\n ```\r\n<!--\r\n\r\nThank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\nThis issue will be automatically assigned to a Hardhat team member. This person will act as the point of contact between you and the team, but won't necessarily fix it nor address it in any way. An issue being assigned does not mean that it's being worked on.\r\n\r\n-->\r\n",
  "closed_by": {
    "login": "nomic-foundation-automation",
    "id": 101595155,
    "node_id": "U_kgDOBg44Ew",
    "avatar_url": "https://avatars.githubusercontent.com/u/101595155?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nomic-foundation-automation",
    "html_url": "https://github.com/nomic-foundation-automation",
    "followers_url": "https://api.github.com/users/nomic-foundation-automation/followers",
    "following_url": "https://api.github.com/users/nomic-foundation-automation/following{/other_user}",
    "gists_url": "https://api.github.com/users/nomic-foundation-automation/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nomic-foundation-automation/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nomic-foundation-automation/subscriptions",
    "organizations_url": "https://api.github.com/users/nomic-foundation-automation/orgs",
    "repos_url": "https://api.github.com/users/nomic-foundation-automation/repos",
    "events_url": "https://api.github.com/users/nomic-foundation-automation/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nomic-foundation-automation/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1141523524",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2783#issuecomment-1141523524",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783",
    "id": 1141523524,
    "node_id": "IC_kwDOB7jojM5ECkRE",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-05-30T22:48:46Z",
    "updated_at": "2022-05-30T22:48:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-751/hardhat-mine-wont-work-with-valid-hex-string).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 49aadb5c-5981-4fdd-96ba-a892c662d787",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1141523524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142244283",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2783#issuecomment-1142244283",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783",
    "id": 1142244283,
    "node_id": "IC_kwDOB7jojM5EFUO7",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-31T14:55:00Z",
    "updated_at": "2022-05-31T14:55:00Z",
    "author_association": "MEMBER",
    "body": "Hi @gbarros, thanks for reporting this.\r\n\r\nThis is a common problem that comes from the fact that the `QUANTITY` type, as defined by the spec, doesn't allow leading zeroes. Since `hardhat_mine` is a custom method, we could be more permissive here and use a different type (one that allows these leading zeros), but so far we've opted for consistency.\r\n\r\nBut we are aware this is an annoying problem. One way we are trying to address it is with a set of helpers that let you interact with the network in a more ergonomic way. We released a beta version of this, and we'll release a stable version soon, but they can be used right now. In fact, we really appreciate people trying them out now, to get early feedback. You can read more about them [here](https://nomiclabs.notion.site/Public-Hardhat-Network-Helpers-216cf3c665124895bf1f6e2f9343f86f), but the tl'dr is:\r\n\r\n1. Install the package with `npm i @nomicfoundation/hardhat-network-helpers@beta`\r\n2. Use it in your code like this:\r\n\r\n    ```js\r\n    const helpers = require(\"@nomicfoundation/hardhat-network-helpers\")\r\n    \r\n    await helpers.mine(1000)\r\n    ```\r\n\r\nUsing this method has several advantages:\r\n\r\n- Many kind of values are accepted, like plain numbers, native bigints, ethers's bignumbers, hex-strings (even with leading zeros).\r\n- The resulting code is shorter and nicer\r\n- You get type-checks, better error messages, auto-complete for discoverability, and so on.\r\n\r\nI'm going to leave this issue open for now, but to be honest it's probably going to be a \"won't fix\". Please let me know if you disagree with this decision.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142244283/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142259149",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2783#issuecomment-1142259149",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783",
    "id": 1142259149,
    "node_id": "IC_kwDOB7jojM5EFX3N",
    "user": {
      "login": "gbarros",
      "id": 1740378,
      "node_id": "MDQ6VXNlcjE3NDAzNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1740378?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gbarros",
      "html_url": "https://github.com/gbarros",
      "followers_url": "https://api.github.com/users/gbarros/followers",
      "following_url": "https://api.github.com/users/gbarros/following{/other_user}",
      "gists_url": "https://api.github.com/users/gbarros/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gbarros/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gbarros/subscriptions",
      "organizations_url": "https://api.github.com/users/gbarros/orgs",
      "repos_url": "https://api.github.com/users/gbarros/repos",
      "events_url": "https://api.github.com/users/gbarros/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gbarros/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-31T15:07:52Z",
    "updated_at": "2022-05-31T15:07:52Z",
    "author_association": "NONE",
    "body": "I like that idea of a helpers package a lot and I'll be using it for sure =)\n\nHowever, I'd take into consideration other users/scenarios that would try to connect straight through the RPC and suffer with this issue.\n\nI'm good though, thanks a lot! ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142259149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142267061",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2783#issuecomment-1142267061",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2783",
    "id": 1142267061,
    "node_id": "IC_kwDOB7jojM5EFZy1",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-31T15:14:35Z",
    "updated_at": "2022-05-31T15:14:35Z",
    "author_association": "MEMBER",
    "body": "> and I'll be using it for sure =)\r\n\r\nThanks a lot! Any feedback about them is very welcome.\r\n\r\n> However, I'd take into consideration other users/scenarios that would try to connect straight through the RPC and suffer with this issue.\r\n\r\nMy take is that users just trying to interact with the network should use these helpers, and people using the RPC interface directly are most likely doing something advanced, and therefore having to follow the spec to the letter shouldn't be a concern. But this is a wild guess, I'm open to being proven wrong about this in the future :sweat_smile: \r\n\r\n> I'm good though, thanks a lot!\r\n\r\nIn that case, I'll just close this, thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1142267061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

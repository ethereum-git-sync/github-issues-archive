{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722",
  "id": 1601832089,
  "node_id": "I_kwDOB7jojM5fegSZ",
  "number": 3722,
  "title": "No access to solc in hardhat compile",
  "user": {
    "login": "nezouse",
    "id": 9447880,
    "node_id": "MDQ6VXNlcjk0NDc4ODA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9447880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nezouse",
    "html_url": "https://github.com/nezouse",
    "followers_url": "https://api.github.com/users/nezouse/followers",
    "following_url": "https://api.github.com/users/nezouse/following{/other_user}",
    "gists_url": "https://api.github.com/users/nezouse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nezouse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nezouse/subscriptions",
    "organizations_url": "https://api.github.com/users/nezouse/orgs",
    "repos_url": "https://api.github.com/users/nezouse/repos",
    "events_url": "https://api.github.com/users/nezouse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nezouse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-02-27T19:43:38Z",
  "updated_at": "2023-06-05T08:52:05Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\n\n2.12.7\n\n### What happened?\n\nWe are using hardhat to compile and test our contracts. Everything was working fine, but recently sometimes when running build we got \r\n```Error: spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e EACCES```\r\n\r\nand right now it happens on nearly every run. \r\n\r\nWe are running it on self hosted runner with turborepo, so a few packages can be compiled at the same time (which i guess may be the cause of error, but everything was fine before)\n\n### Minimal reproduction steps\n\ncontracts-common:setup-build: > hardhat compile\r\ncontracts-common:setup-build: \r\ncontracts-common:setup-build: An unexpected error occurred:\r\ncontracts-common:setup-build: \r\ncontracts-common:setup-build: Error: spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e EACCES\r\ncontracts-common:setup-build:     at Process.ChildProcess._handle.onexit (node:internal/child_process:283:[19]\r\ncontracts-common:setup-build:     at onErrorNT (node:internal/child_process:478:16)\r\ncontracts-common:setup-build:     at processTicksAndRejections (node:internal/process/task_queues:83:[21] {\r\ncontracts-common:setup-build:   errno: -13,\r\ncontracts-common:setup-build:   code: 'EACCES',\r\ncontracts-common:setup-build:   syscall: 'spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e',\r\ncontracts-common:setup-build:   path: '/home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e',\r\ncontracts-common:setup-build:   spawnargs: [ '--standard-json' ],\r\ncontracts-common:setup-build:   cmd: '/home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e --standard-json'\r\ncontracts-common:setup-build: }\r\ncontracts-common:setup-build:  ELIFECYCLE  Command failed with exit code 1.\n\n### Search terms\n\nsolc, compile",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1461731207",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1461731207",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1461731207,
    "node_id": "IC_kwDOB7jojM5XID-H",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T10:15:52Z",
    "updated_at": "2023-03-09T10:15:52Z",
    "author_association": "MEMBER",
    "body": "@nezouse do you mean that you have multiple Hardhat projects and they are being compiled at the same time?\r\n\r\nIf that's the case, maybe we have a race condition in our compiler downloader.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1461731207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1498320536",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1498320536",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1498320536,
    "node_id": "IC_kwDOB7jojM5ZTo6Y",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-06T00:15:52Z",
    "updated_at": "2023-04-06T00:15:52Z",
    "author_association": "NONE",
    "body": "We are having the same issue, our project is setup so that we're installing multiple versions of compilers across our project. https://github.com/smartcontractkit/chainlink/actions/runs/4620609361/jobs/8170964978\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1498320536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1506521870",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1506521870",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1506521870,
    "node_id": "IC_kwDOB7jojM5Zy7MO",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-13T07:59:55Z",
    "updated_at": "2023-04-13T07:59:55Z",
    "author_association": "MEMBER",
    "body": "Thank you @HenryNguyen5, I'll see if I can create a minimal reproduction for this.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1506521870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1507894820",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1507894820",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1507894820,
    "node_id": "IC_kwDOB7jojM5Z4KYk",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-14T04:03:41Z",
    "updated_at": "2023-04-14T04:03:41Z",
    "author_association": "NONE",
    "body": "Hi @fvictorio, I opened a PR [here](https://github.com/NomicFoundation/hardhat/pull/3818) that resolves it.\r\n\r\nI was unable to create a minimal repro on my side, I was just using the chainlink repo to repro. LMK if you want a bash script to repro it on `smartcontractkit/chainlink`, the repo is pretty big though.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1507894820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1576392476",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1576392476",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1576392476,
    "node_id": "IC_kwDOB7jojM5d9dcc",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-05T08:51:58Z",
    "updated_at": "2023-06-05T08:51:58Z",
    "author_association": "MEMBER",
    "body": "I created a reproduction example [here](https://github.com/fvictorio/hardhat-parallel-compilations-bug). It doesn't really produces the same error as the one reported by OP, but assuming the underlying cause is the same, it should be enough.\r\n\r\n@HenryNguyen5 I tried your PR in that repository and it didn't really fix the problem. This makes sense because, while you added a mutex, that is local to the process. The problem here is that multiple hardhat compile processes are executed at the same time.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1576392476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

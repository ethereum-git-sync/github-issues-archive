{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722",
  "id": 1601832089,
  "node_id": "I_kwDOB7jojM5fegSZ",
  "number": 3722,
  "title": "Race condition in compiler download when more than one Hardhat process is compiling ",
  "user": {
    "login": "nezouse",
    "id": 9447880,
    "node_id": "MDQ6VXNlcjk0NDc4ODA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9447880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nezouse",
    "html_url": "https://github.com/nezouse",
    "followers_url": "https://api.github.com/users/nezouse/followers",
    "following_url": "https://api.github.com/users/nezouse/following{/other_user}",
    "gists_url": "https://api.github.com/users/nezouse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nezouse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nezouse/subscriptions",
    "organizations_url": "https://api.github.com/users/nezouse/orgs",
    "repos_url": "https://api.github.com/users/nezouse/repos",
    "events_url": "https://api.github.com/users/nezouse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nezouse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 5666138810,
      "node_id": "LA_kwDOB7jojM8AAAABUbpqug",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:compilation",
      "name": "area:compilation",
      "color": "5319E7",
      "default": false,
      "description": "Related to the built-in compile task"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2023-02-27T19:43:38Z",
  "updated_at": "2023-10-12T04:06:33Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\n\n2.12.7\n\n### What happened?\n\nWe are using hardhat to compile and test our contracts. Everything was working fine, but recently sometimes when running build we got \r\n```Error: spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e EACCES```\r\n\r\nand right now it happens on nearly every run. \r\n\r\nWe are running it on self hosted runner with turborepo, so a few packages can be compiled at the same time (which i guess may be the cause of error, but everything was fine before)\n\n### Minimal reproduction steps\n\ncontracts-common:setup-build: > hardhat compile\r\ncontracts-common:setup-build: \r\ncontracts-common:setup-build: An unexpected error occurred:\r\ncontracts-common:setup-build: \r\ncontracts-common:setup-build: Error: spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e EACCES\r\ncontracts-common:setup-build:     at Process.ChildProcess._handle.onexit (node:internal/child_process:283:[19]\r\ncontracts-common:setup-build:     at onErrorNT (node:internal/child_process:478:16)\r\ncontracts-common:setup-build:     at processTicksAndRejections (node:internal/process/task_queues:83:[21] {\r\ncontracts-common:setup-build:   errno: -13,\r\ncontracts-common:setup-build:   code: 'EACCES',\r\ncontracts-common:setup-build:   syscall: 'spawn /home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e',\r\ncontracts-common:setup-build:   path: '/home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e',\r\ncontracts-common:setup-build:   spawnargs: [ '--standard-json' ],\r\ncontracts-common:setup-build:   cmd: '/home/github/.cache/hardhat-nodejs/compilers-v2/linux-amd64/solc-linux-amd64-v0.8.16+commit.07a7930e --standard-json'\r\ncontracts-common:setup-build: }\r\ncontracts-common:setup-build:  ELIFECYCLE  Command failed with exit code 1.\n\n### Search terms\n\nsolc, compile",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1461731207",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1461731207",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1461731207,
    "node_id": "IC_kwDOB7jojM5XID-H",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T10:15:52Z",
    "updated_at": "2023-03-09T10:15:52Z",
    "author_association": "MEMBER",
    "body": "@nezouse do you mean that you have multiple Hardhat projects and they are being compiled at the same time?\r\n\r\nIf that's the case, maybe we have a race condition in our compiler downloader.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1461731207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1498320536",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1498320536",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1498320536,
    "node_id": "IC_kwDOB7jojM5ZTo6Y",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-06T00:15:52Z",
    "updated_at": "2023-04-06T00:15:52Z",
    "author_association": "NONE",
    "body": "We are having the same issue, our project is setup so that we're installing multiple versions of compilers across our project. https://github.com/smartcontractkit/chainlink/actions/runs/4620609361/jobs/8170964978\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1498320536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1506521870",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1506521870",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1506521870,
    "node_id": "IC_kwDOB7jojM5Zy7MO",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-13T07:59:55Z",
    "updated_at": "2023-04-13T07:59:55Z",
    "author_association": "MEMBER",
    "body": "Thank you @HenryNguyen5, I'll see if I can create a minimal reproduction for this.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1506521870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1507894820",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1507894820",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1507894820,
    "node_id": "IC_kwDOB7jojM5Z4KYk",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-14T04:03:41Z",
    "updated_at": "2023-04-14T04:03:41Z",
    "author_association": "NONE",
    "body": "Hi @fvictorio, I opened a PR [here](https://github.com/NomicFoundation/hardhat/pull/3818) that resolves it.\r\n\r\nI was unable to create a minimal repro on my side, I was just using the chainlink repo to repro. LMK if you want a bash script to repro it on `smartcontractkit/chainlink`, the repo is pretty big though.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1507894820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1576392476",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1576392476",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1576392476,
    "node_id": "IC_kwDOB7jojM5d9dcc",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-05T08:51:58Z",
    "updated_at": "2023-09-26T12:50:09Z",
    "author_association": "MEMBER",
    "body": "I created a reproduction example [here](https://github.com/fvictorio/hardhat-parallel-compilations-bug). It doesn't really produces the same error as the one reported by OP, but assuming the underlying cause is the same, it should be enough.\r\n\r\n@HenryNguyen5 I tried your PR in that repository and it didn't really fix the problem. This makes sense because, while you added a mutex, that is local to the process. The problem here is that multiple hardhat compile processes are executed at the same time.\r\n\r\nEdit: better reproduction repository here -> https://github.com/robercano/hardhat-concurrency-issue",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1576392476/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1735560171",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1735560171",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1735560171,
    "node_id": "IC_kwDOB7jojM5ncovr",
    "user": {
      "login": "robercano",
      "id": 3525807,
      "node_id": "MDQ6VXNlcjM1MjU4MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3525807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robercano",
      "html_url": "https://github.com/robercano",
      "followers_url": "https://api.github.com/users/robercano/followers",
      "following_url": "https://api.github.com/users/robercano/following{/other_user}",
      "gists_url": "https://api.github.com/users/robercano/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robercano/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robercano/subscriptions",
      "organizations_url": "https://api.github.com/users/robercano/orgs",
      "repos_url": "https://api.github.com/users/robercano/repos",
      "events_url": "https://api.github.com/users/robercano/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robercano/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-26T13:36:52Z",
    "updated_at": "2023-09-26T13:36:52Z",
    "author_association": "NONE",
    "body": "Let me know if you need any help or extra tests with the reproduction repo",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1735560171/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1745926768",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1745926768",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1745926768,
    "node_id": "IC_kwDOB7jojM5oELpw",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-04T00:19:57Z",
    "updated_at": "2023-10-04T00:30:44Z",
    "author_association": "NONE",
    "body": "> I created a reproduction example [here](https://github.com/fvictorio/hardhat-parallel-compilations-bug). It doesn't really produces the same error as the one reported by OP, but assuming the underlying cause is the same, it should be enough.\r\n> \r\n> @HenryNguyen5 I tried your PR in that repository and it didn't really fix the problem. This makes sense because, while you added a mutex, that is local to the process. The problem here is that multiple hardhat compile processes are executed at the same time.\r\n> \r\n> Edit: better reproduction repository here -> [robercano/hardhat-concurrency-issue](https://github.com/robercano/hardhat-concurrency-issue)\r\n\r\nCould you explain to me why this portion of the code had a `getConcurrencySafeDownloader` call in the first place then? It led me to believe this is where concurrent operations happen regarding multiple hardhat compilers being downloaded. Running the PR branch against our repository `smartcontractkit/chainlink` fixes the issue of multiple compiler downloads, leading to the PR checks passing.\r\n\r\nI think your reproduction repository is exposing a different concurrency bug. The one I was running into was that a _single_ invocation of `hardhat` compile with _multiple_ supported versions would cause a race cond. The reproduction repo assumes that `hardhat compile` is called multiple times, so that each process is unaware of each other.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1745926768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1756007424",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1756007424",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1756007424,
    "node_id": "IC_kwDOB7jojM5oqowA",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T18:34:49Z",
    "updated_at": "2023-10-10T18:34:49Z",
    "author_association": "MEMBER",
    "body": "> I think your reproduction repository is exposing a different concurrency bug. The one I was running into was that a single invocation of hardhat compile with multiple supported versions would cause a race cond. The reproduction repo assumes that hardhat compile is called multiple times, so that each process is unaware of each other.\r\n\r\nAh, my bad. We might need to re-visit this then to see if there are actually two problems here.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1756007424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1758876195",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3722#issuecomment-1758876195",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3722",
    "id": 1758876195,
    "node_id": "IC_kwDOB7jojM5o1lIj",
    "user": {
      "login": "HenryNguyen5",
      "id": 6404866,
      "node_id": "MDQ6VXNlcjY0MDQ4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6404866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HenryNguyen5",
      "html_url": "https://github.com/HenryNguyen5",
      "followers_url": "https://api.github.com/users/HenryNguyen5/followers",
      "following_url": "https://api.github.com/users/HenryNguyen5/following{/other_user}",
      "gists_url": "https://api.github.com/users/HenryNguyen5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HenryNguyen5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HenryNguyen5/subscriptions",
      "organizations_url": "https://api.github.com/users/HenryNguyen5/orgs",
      "repos_url": "https://api.github.com/users/HenryNguyen5/repos",
      "events_url": "https://api.github.com/users/HenryNguyen5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HenryNguyen5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-12T04:02:37Z",
    "updated_at": "2023-10-12T04:06:33Z",
    "author_association": "NONE",
    "body": "> Ah, my bad. We might need to re-visit this then to see if there are actually two problems here.\r\n\r\nI tried creating a minimal repro for you for multi-version-single-compile, but it doesnt show up unless there is a large codebase along with multiple compilation versions. It seems like there needs to be multiple compiler downloads interspersed with compiilations that are undergoing / overlapping to surface this separate bug.\r\n\r\nI'll end up creating a test branch you can checkout from https://github.com/smartcontractkit/chainlink and run locally so that you can triage effectively. \r\n\r\nThe codebase is large enough that after a few iterations you'll see the unpatched HH error out on a compiler violation but the patch version will continue over many iterations (until you get bored :)).\r\n\r\nI hope that'll be enough to get this fix merged in, the changes are pretty minimal and its breaking our CI badly\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1758876195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

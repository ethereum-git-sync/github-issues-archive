{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292",
  "id": 1111746743,
  "node_id": "I_kwDOB7jojM5CQ-i3",
  "number": 2292,
  "title": "[Request] Allow CLI arguments to be used when running scripts",
  "user": {
    "login": "system32uwu",
    "id": 29718978,
    "node_id": "MDQ6VXNlcjI5NzE4OTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29718978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/system32uwu",
    "html_url": "https://github.com/system32uwu",
    "followers_url": "https://api.github.com/users/system32uwu/followers",
    "following_url": "https://api.github.com/users/system32uwu/following{/other_user}",
    "gists_url": "https://api.github.com/users/system32uwu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/system32uwu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/system32uwu/subscriptions",
    "organizations_url": "https://api.github.com/users/system32uwu/orgs",
    "repos_url": "https://api.github.com/users/system32uwu/repos",
    "events_url": "https://api.github.com/users/system32uwu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/system32uwu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-01-23T02:01:12Z",
  "updated_at": "2022-11-17T21:12:34Z",
  "closed_at": "2022-01-23T14:31:29Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "# Problem\r\n\r\nWhen trying to run a script using arguments it fails with the following error:\r\n\r\n`Error HH308: Unrecognized positional argument Collection1`\r\n\r\n# Context\r\n\r\nI'm currently working on a game that will use multiple collections of NFTs, but they all share the same smart contract, just deployed with different values.\r\n\r\n# Example use case:\r\n\r\nDeploy the same contract, but with different values each instance\r\n `hardhat run --network localhost deploy-token.ts Collection1 C1 10000 `\r\n `hardhat run --network localhost deploy-token.ts Collection2 C2 5000 `\r\n `hardhat run --network localhost deploy-token.ts Collection3 C3 100 `\r\n\r\nWhere Collection{n} is the name, C{n} the symbol and the last number the max supply.\r\n\r\nThis solves having to manually change hardcoded values in the deploy script each time it needs to be run.\r\n\r\nI considered using a task for this but since the template generated uses scripts/deploy.ts to deploy the Greeter contract I'm assuming I should be using the later and not a task.\r\n\r\n# Full example (the one I'm currently developing)\r\n\r\n```typescript\r\nimport { ethers } from 'hardhat'\r\n\r\nasync function main() {\r\n  // Deploy AQLF\r\n  const AQLF = await ethers.getContractFactory('AquariumLifeForm')\r\n  const aqlf = await AQLF.deploy(\r\n    process.argv[2], // baseURI\r\n    process.argv[3], // Name of collection\r\n    process.argv[4], // Symbol of collection\r\n    process.argv[5], // Mint price\r\n    process.argv[6], // Max mint at once\r\n    process.argv[7], // Amount of tokens reserved\r\n    process.argv[8]  // Max supply of tokens\r\n  )\r\n\r\n  await aqlf.deployed()\r\n\r\n  console.log(\r\n    'New Aquarium Life Form collection deployed to:',\r\n    aqlf.address\r\n  )\r\n}\r\n\r\n// We recommend this pattern to be able to use async/await everywhere\r\n// and properly handle errors.\r\nmain().catch((error) => {\r\n  console.error(error)\r\n  process.exitCode = 1\r\n})\r\n```\r\nSo I'd need to run this deploy script for every collection we have (+10).\r\n\r\nFinally, I tried running the script with node as suggested in the comments of the deploy script, but I'm facing the following error:\r\n\r\n`TSError: тип Unable to compile TypeScript:\r\nscripts/deploy-plank.ts:17:27 - error TS2339: Property 'ethers' does not exist on type 'HardhatRuntimeEnvironment'.`\r\n\r\nUpdate: Running this with node but using `require` instead of `import` when importing hardhat works, but I'm assuming we should be able to achieve the same using the `run` command from the hardhat CLI, also, this would mean that I can't run the script using the argument `--network localhost`, so when I try to access to my local node I don't have access to the deployed contracts\r\n\r\nI saw #651 but using node removes the ability to use the network argument for the `run` task, the `run` task should just forward all the parameters that it doesn't recognize to the following task / script / command. ",
  "closed_by": {
    "login": "system32uwu",
    "id": 29718978,
    "node_id": "MDQ6VXNlcjI5NzE4OTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29718978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/system32uwu",
    "html_url": "https://github.com/system32uwu",
    "followers_url": "https://api.github.com/users/system32uwu/followers",
    "following_url": "https://api.github.com/users/system32uwu/following{/other_user}",
    "gists_url": "https://api.github.com/users/system32uwu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/system32uwu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/system32uwu/subscriptions",
    "organizations_url": "https://api.github.com/users/system32uwu/orgs",
    "repos_url": "https://api.github.com/users/system32uwu/repos",
    "events_url": "https://api.github.com/users/system32uwu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/system32uwu/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019404521",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1019404521",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1019404521,
    "node_id": "IC_kwDOB7jojM48wuDp",
    "user": {
      "login": "system32uwu",
      "id": 29718978,
      "node_id": "MDQ6VXNlcjI5NzE4OTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29718978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/system32uwu",
      "html_url": "https://github.com/system32uwu",
      "followers_url": "https://api.github.com/users/system32uwu/followers",
      "following_url": "https://api.github.com/users/system32uwu/following{/other_user}",
      "gists_url": "https://api.github.com/users/system32uwu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/system32uwu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/system32uwu/subscriptions",
      "organizations_url": "https://api.github.com/users/system32uwu/orgs",
      "repos_url": "https://api.github.com/users/system32uwu/repos",
      "events_url": "https://api.github.com/users/system32uwu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/system32uwu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T03:27:06Z",
    "updated_at": "2022-01-23T03:27:06Z",
    "author_association": "NONE",
    "body": "I tried creating a task to deploy our currency since it sounded easier:\r\n\r\n`hardhat.config.ts`:\r\n\r\n```typescript\r\ntask('deploy-plank', 'Deploys $PLANK')\r\n  .addPositionalParam(\r\n    'supply',\r\n    'Initial Supply',\r\n    undefined,\r\n    types.int,\r\n    false\r\n  )\r\n  .addPositionalParam(\r\n    'beneficiary',\r\n    'Address of the beneficiary',\r\n    undefined,\r\n    types.string,\r\n    false\r\n  )\r\n  .setAction(async (taskArgs, hre) => {\r\n    console.log(taskArgs)\r\n    await hre.run('compile')\r\n\r\n    const PLANK = await hre.ethers.getContractFactory('Plankton')\r\n    const plank = await PLANK.deploy(process.argv[2], process.argv[3])\r\n\r\n    await plank.deployed()\r\n\r\n    console.log('$PLANK deployed to:', plank.address)\r\n    console.log(process.argv.join(', '))\r\n  })\r\n```\r\n\r\nso then I run `yarn hardhat` to register the task\r\n\r\nand finally running `yarn hardhat run deploy-plank 20000000 0x8626f6940e2eb28930efb4cef49b2d1f2c9c1199` should work, but I'm getting: `Error HH308: Unrecognized positional argument 20000000`\r\n\r\nWhich is weird, because when I check for help of this task using `yarn hardhat help deploy-plank` I get:\r\n\r\n```\r\nUsage: hardhat [GLOBAL OPTIONS] deploy-plank supply beneficiary\r\n\r\nPOSITIONAL ARGUMENTS:\r\n\r\n  supply        Initial Supply \r\n  beneficiary   Address of the beneficiary \r\n\r\ndeploy-plank: Deploys $PLANK\r\n```\r\n\r\nNot sure what I'm doing wrong, but it seems that creating a dedicated task will be the solution for my use case, any help is much appreciated",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019404521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019417851",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1019417851",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1019417851,
    "node_id": "IC_kwDOB7jojM48wxT7",
    "user": {
      "login": "impguard",
      "id": 1912284,
      "node_id": "MDQ6VXNlcjE5MTIyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1912284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/impguard",
      "html_url": "https://github.com/impguard",
      "followers_url": "https://api.github.com/users/impguard/followers",
      "following_url": "https://api.github.com/users/impguard/following{/other_user}",
      "gists_url": "https://api.github.com/users/impguard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/impguard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/impguard/subscriptions",
      "organizations_url": "https://api.github.com/users/impguard/orgs",
      "repos_url": "https://api.github.com/users/impguard/repos",
      "events_url": "https://api.github.com/users/impguard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/impguard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T05:39:27Z",
    "updated_at": "2022-01-23T05:39:27Z",
    "author_association": "NONE",
    "body": "Run it directly\r\n\r\n```\r\nnpx hardhat deploy-plank ...\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019417851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019419085",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1019419085",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1019419085,
    "node_id": "IC_kwDOB7jojM48wxnN",
    "user": {
      "login": "system32uwu",
      "id": 29718978,
      "node_id": "MDQ6VXNlcjI5NzE4OTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29718978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/system32uwu",
      "html_url": "https://github.com/system32uwu",
      "followers_url": "https://api.github.com/users/system32uwu/followers",
      "following_url": "https://api.github.com/users/system32uwu/following{/other_user}",
      "gists_url": "https://api.github.com/users/system32uwu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/system32uwu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/system32uwu/subscriptions",
      "organizations_url": "https://api.github.com/users/system32uwu/orgs",
      "repos_url": "https://api.github.com/users/system32uwu/repos",
      "events_url": "https://api.github.com/users/system32uwu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/system32uwu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T05:54:58Z",
    "updated_at": "2022-01-23T05:54:58Z",
    "author_association": "NONE",
    "body": "Oh okay that works for running the task, sorry I mixed the commands, thank you for the clarification there.\r\n\r\nI'd close but maybe this should be either be covered in the documentation (use tasks if you need to use arguments) or otherwise implemented (for running scripts with arguments I mean)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019419085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019437088",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1019437088",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1019437088,
    "node_id": "IC_kwDOB7jojM48w2Ag",
    "user": {
      "login": "impguard",
      "id": 1912284,
      "node_id": "MDQ6VXNlcjE5MTIyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1912284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/impguard",
      "html_url": "https://github.com/impguard",
      "followers_url": "https://api.github.com/users/impguard/followers",
      "following_url": "https://api.github.com/users/impguard/following{/other_user}",
      "gists_url": "https://api.github.com/users/impguard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/impguard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/impguard/subscriptions",
      "organizations_url": "https://api.github.com/users/impguard/orgs",
      "repos_url": "https://api.github.com/users/impguard/repos",
      "events_url": "https://api.github.com/users/impguard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/impguard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T08:24:50Z",
    "updated_at": "2022-01-23T08:26:20Z",
    "author_association": "NONE",
    "body": "> Hardhat scripts are useful for simple things that don't take user arguments, and for integrating with external tools that aren't well suited for the Hardhat CLI, like a Node.js debugger.\r\n> \r\n> If you want to automate more complex things, and receive user arguments, you can learn how to create your own tasks here.\r\n\r\nIt's bolded directly at the very top of the docs for scripts.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019437088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019497640",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1019497640",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1019497640,
    "node_id": "IC_kwDOB7jojM48xEyo",
    "user": {
      "login": "system32uwu",
      "id": 29718978,
      "node_id": "MDQ6VXNlcjI5NzE4OTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29718978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/system32uwu",
      "html_url": "https://github.com/system32uwu",
      "followers_url": "https://api.github.com/users/system32uwu/followers",
      "following_url": "https://api.github.com/users/system32uwu/following{/other_user}",
      "gists_url": "https://api.github.com/users/system32uwu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/system32uwu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/system32uwu/subscriptions",
      "organizations_url": "https://api.github.com/users/system32uwu/orgs",
      "repos_url": "https://api.github.com/users/system32uwu/repos",
      "events_url": "https://api.github.com/users/system32uwu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/system32uwu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T14:31:29Z",
    "updated_at": "2022-01-23T14:31:29Z",
    "author_association": "NONE",
    "body": "Yeah I checked again and I don't know how I missed the TIP that mentions user arguments, my bad. Thank you for your time!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1019497640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208764800",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2292#issuecomment-1208764800",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2292",
    "id": 1208764800,
    "node_id": "IC_kwDOB7jojM5IDEmA",
    "user": {
      "login": "excalq",
      "id": 610274,
      "node_id": "MDQ6VXNlcjYxMDI3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/610274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/excalq",
      "html_url": "https://github.com/excalq",
      "followers_url": "https://api.github.com/users/excalq/followers",
      "following_url": "https://api.github.com/users/excalq/following{/other_user}",
      "gists_url": "https://api.github.com/users/excalq/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/excalq/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/excalq/subscriptions",
      "organizations_url": "https://api.github.com/users/excalq/orgs",
      "repos_url": "https://api.github.com/users/excalq/repos",
      "events_url": "https://api.github.com/users/excalq/events{/privacy}",
      "received_events_url": "https://api.github.com/users/excalq/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-09T00:44:59Z",
    "updated_at": "2022-08-09T00:44:59Z",
    "author_association": "NONE",
    "body": "Since scripts are much more portable than tasks, it would be great to have the option of using arguments.\r\n\r\nOne such use case would be a Hardhat user and a JS client sharing a script. Having Hardhat automatically interpret Typescript is a nice feature as well, versus standalone scripting.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208764800/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

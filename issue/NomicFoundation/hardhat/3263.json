{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263",
  "id": 1402998264,
  "node_id": "I_kwDOB7jojM5ToA34",
  "number": 3263,
  "title": "bytecode recorded on deployment suddenly not matching bytecode of artifacts ",
  "user": {
    "login": "matthewlilley",
    "id": 6063350,
    "node_id": "MDQ6VXNlcjYwNjMzNTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6063350?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matthewlilley",
    "html_url": "https://github.com/matthewlilley",
    "followers_url": "https://api.github.com/users/matthewlilley/followers",
    "following_url": "https://api.github.com/users/matthewlilley/following{/other_user}",
    "gists_url": "https://api.github.com/users/matthewlilley/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matthewlilley/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matthewlilley/subscriptions",
    "organizations_url": "https://api.github.com/users/matthewlilley/orgs",
    "repos_url": "https://api.github.com/users/matthewlilley/repos",
    "events_url": "https://api.github.com/users/matthewlilley/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matthewlilley/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2474207618,
      "node_id": "MDU6TGFiZWwyNDc0MjA3NjE4",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:needs-more-info",
      "name": "status:needs-more-info",
      "color": "0E8A16",
      "default": false,
      "description": "There's not enough information to start working on this issue"
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-10-10T11:10:57Z",
  "updated_at": "2023-07-17T00:17:56Z",
  "closed_at": "2023-03-09T17:30:15Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "We have various commits, such as this one throughout the history of the repository. This is the first where deployments were extracted so we have a copy of the bytecode upon deployment.\r\n\r\nhttps://github.com/sushiswap/trident/commit/f730debcec2d50cb92e4b0c0200b1d81f81bb9b4\r\n\r\nIf you were to clone this repostiory and checkout this commit, run hardhat build & compare bytecode from artifacts e.g. ConstantProductPoolFactory.json against the polygon deployment for the same file they are no longer matching.\r\n\r\nThis protocol has been deployed on a number of networks over 6 months, but now it's impossible to find any point in time where artifacts generated at those deployment commits will have the same bytecode found in the deployment file. \r\n\r\nThis is really odd... It feels like this is related to a loose dependecy of hardhat which has forced an update behind the scenes or something. It's difficult to debug but definitely an issue since it can be easily shown that determism has been lost since we've recorded our bytecode on deployment, and can no long match this up with generated artifacts at any point in the history of our repositoy.\r\n",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273152560",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1273152560",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1273152560,
    "node_id": "IC_kwDOB7jojM5L4sQw",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-10-10T11:11:22Z",
    "updated_at": "2022-10-10T11:11:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-1253/bytecode-recorded-on-deployment-suddenly-not-matching-bytecode-of).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: f39fac3d-dc83-47cd-80a2-628d965715fa",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273152560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273455789",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1273455789",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1273455789,
    "node_id": "IC_kwDOB7jojM5L52St",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T15:06:24Z",
    "updated_at": "2022-10-10T15:06:24Z",
    "author_association": "MEMBER",
    "body": "> against the polygon deployment for the same file they are no longer matching.\r\n\r\nCan you share a link to that contract in the Polygon explorer?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273455789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273457413",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1273457413",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1273457413,
    "node_id": "IC_kwDOB7jojM5L52sF",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T15:07:25Z",
    "updated_at": "2022-10-10T15:07:25Z",
    "author_association": "MEMBER",
    "body": "Nevermind, I just saw that that is saved in the deployments. I'll look into this as soon as I have some time.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273457413/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273842849",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1273842849",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1273842849,
    "node_id": "IC_kwDOB7jojM5L7Uyh",
    "user": {
      "login": "sarangparikh22",
      "id": 23114493,
      "node_id": "MDQ6VXNlcjIzMTE0NDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/23114493?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sarangparikh22",
      "html_url": "https://github.com/sarangparikh22",
      "followers_url": "https://api.github.com/users/sarangparikh22/followers",
      "following_url": "https://api.github.com/users/sarangparikh22/following{/other_user}",
      "gists_url": "https://api.github.com/users/sarangparikh22/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sarangparikh22/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sarangparikh22/subscriptions",
      "organizations_url": "https://api.github.com/users/sarangparikh22/orgs",
      "repos_url": "https://api.github.com/users/sarangparikh22/repos",
      "events_url": "https://api.github.com/users/sarangparikh22/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sarangparikh22/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T21:39:16Z",
    "updated_at": "2022-10-10T21:39:16Z",
    "author_association": "NONE",
    "body": "There has been more development on this, so, we re-deployed and the bytecode and deployedBytecode on the deployments folder match as that of older deployments, however they are different from the artifact. ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273842849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273912779",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1273912779",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1273912779,
    "node_id": "IC_kwDOB7jojM5L7l3L",
    "user": {
      "login": "matthewlilley",
      "id": 6063350,
      "node_id": "MDQ6VXNlcjYwNjMzNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6063350?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewlilley",
      "html_url": "https://github.com/matthewlilley",
      "followers_url": "https://api.github.com/users/matthewlilley/followers",
      "following_url": "https://api.github.com/users/matthewlilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewlilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewlilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewlilley/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewlilley/orgs",
      "repos_url": "https://api.github.com/users/matthewlilley/repos",
      "events_url": "https://api.github.com/users/matthewlilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewlilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T23:34:51Z",
    "updated_at": "2022-10-10T23:34:51Z",
    "author_association": "NONE",
    "body": "@fvictorio Yeah, this appears to be a regression. If we deploy we're getting the correct bytecode, but generated artifacts never match the deployed contract. I'll touch up our artifacts manually for now until you have a chance to dig into this more deeply.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1273912779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1365844892",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1365844892",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1365844892,
    "node_id": "IC_kwDOB7jojM5RaSOc",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-27T11:48:06Z",
    "updated_at": "2022-12-27T11:48:06Z",
    "author_association": "MEMBER",
    "body": "Ok, sharing my findings here, although I don't know how helpful they will be.\r\n\r\nI compared the (deployment, not deployed) bytecode of the `ConstantProductPoolFactory` contract as obtained from compiling the project in that commit, and the deployment bytecode indicated in the `deployments` file.\r\n\r\nThe first 41426 characters of the bytecode are the same. The final part is different, which usually means that the metadata is different. But in this case there is an extra fun added because there are two metadatas involved, and the two are different.\r\n\r\nThese are the last characters of each bytecode, split into lines to make it easier to see:\r\n\r\n```\r\na2646970667358221220\r\n2f9fb6aa3dd81d974058981cd60b5b9a73205462b7f1289fb1c3d2aa89f2f817\r\n64736f6c634300080a0033\r\na2646970667358221220\r\nd1454cd6da4a6737aa0a6a44d45bdcc7e744e878a914301886efa4efc1195931\r\n64736f6c634300080a0033\r\n```\r\n\r\n```\r\na2646970667358221220\r\n23b1b16732d5efbbde4fe9c09ad57bc5e282ee9d8115186daf2a0c35f79fae82\r\n64736f6c634300080a0033\r\na2646970667358221220\r\n2574e272fe091577903e8619f249f8e3e1f3373c680480c579a6639f1784d57a\r\n64736f6c634300080a0033\r\n```\r\n\r\nYou can see that the 2nd and 5th lines are different, but the other ones are the same. This is because only the hash part of the metadata are different. The rest, like for example the solc version (`00080a`, which is `0.8.10`) are the same.\r\n\r\nThe first metadata corresponds to the bytecode of the `ConstantProductPool` contract, which is inside the factory bytecode. The second metadata is the one that corresponds to the factory bytecode itself.\r\n\r\nSo, the weird thing here is that the metadata of the `ConstantProductPool` factory is different (even when the bytecode is the same), and this of course causes the metada\r\nof the factory to also change.\r\n\r\nThe important  thing to notice here is that **the executable part of the bytecode is the same in both cases**. So why did this change? I have no idea. Maybe someone changed a comment in the `ConstantProductPool` contract, and this produced a change in its metadata, in the metadata of the inlined bytecode inside the factory, and in the metadata of the factory. Presumably this also changed the metadata of the contract bytecode itself, but since that contract is not part of the `deployments` file (only the factory is), we have no way of knowing.\r\n\r\nBtw, I only skimmed the deployed bytecodes, but I'm pretty sure the same analysis applies.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1365844892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1365854903",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1365854903",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1365854903,
    "node_id": "IC_kwDOB7jojM5RaUq3",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-27T12:05:09Z",
    "updated_at": "2022-12-27T12:05:09Z",
    "author_association": "MEMBER",
    "body": "Changing a comment in the `ConstantProductPool.sol` file (not factory) indeed produces a change in the exact same two places.\r\n\r\nChanging a comment in the `ConstantProductPoolFactory.sol` file only produces a change in the second point (the metadata).\r\n\r\nAll of this is expected, just sharing because it further confirms my theory.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1365854903/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1462470126",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1462470126",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1462470126,
    "node_id": "IC_kwDOB7jojM5XK4Xu",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T17:30:15Z",
    "updated_at": "2023-03-09T17:30:15Z",
    "author_association": "MEMBER",
    "body": "I think I'm going to close this one because there isn't much we can do. Happy to re-open if you think otherwise.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1462470126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1510964160",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3263#issuecomment-1510964160",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3263",
    "id": 1510964160,
    "node_id": "IC_kwDOB7jojM5aD3vA",
    "user": {
      "login": "0xtomm",
      "id": 84812080,
      "node_id": "MDQ6VXNlcjg0ODEyMDgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/84812080?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xtomm",
      "html_url": "https://github.com/0xtomm",
      "followers_url": "https://api.github.com/users/0xtomm/followers",
      "following_url": "https://api.github.com/users/0xtomm/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xtomm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xtomm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xtomm/subscriptions",
      "organizations_url": "https://api.github.com/users/0xtomm/orgs",
      "repos_url": "https://api.github.com/users/0xtomm/repos",
      "events_url": "https://api.github.com/users/0xtomm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xtomm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T09:00:03Z",
    "updated_at": "2023-04-17T09:21:43Z",
    "author_association": "NONE",
    "body": "I'm having the same issue, I think it's caused by `hardhat-preprocessor`\r\n\r\nThe trident repo is using it there: https://github.com/sushiswap/trident/blob/b4f1e3bdaa8ebfbb8881c9794b03cb439879171c/hardhat.config.ts#L339\r\nI believe the issue is located here:  https://github.com/wighawag/hardhat-preprocessor/blob/dac6c715ce1fa5af83441302d655d8922cfc4880/src/index.ts#L179 as it will cause the field `settings.libraries.__CACHE_BREAKER__` on the contract metadata to be different on each compile.\r\n\r\nFrom the docs:\r\n> The object containing the transform function can also have a settings field that is used for caching. If no settings field is set, no caching will take place and contracts will be recompiled. If the settings field is set, then the contract will be recompiled only if the settings changed.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1510964160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

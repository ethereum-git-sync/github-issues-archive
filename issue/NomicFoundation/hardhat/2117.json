{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2117",
  "id": 1067869474,
  "node_id": "I_kwDOB7jojM4_pmUi",
  "number": 2117,
  "title": "hardhat-etherscan`ERC1967Proxy` fail",
  "user": {
    "login": "gigamesh",
    "id": 32403632,
    "node_id": "MDQ6VXNlcjMyNDAzNjMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/32403632?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gigamesh",
    "html_url": "https://github.com/gigamesh",
    "followers_url": "https://api.github.com/users/gigamesh/followers",
    "following_url": "https://api.github.com/users/gigamesh/following{/other_user}",
    "gists_url": "https://api.github.com/users/gigamesh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gigamesh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gigamesh/subscriptions",
    "organizations_url": "https://api.github.com/users/gigamesh/orgs",
    "repos_url": "https://api.github.com/users/gigamesh/repos",
    "events_url": "https://api.github.com/users/gigamesh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gigamesh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "zoeyTM",
    "id": 14796043,
    "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zoeyTM",
    "html_url": "https://github.com/zoeyTM",
    "followers_url": "https://api.github.com/users/zoeyTM/followers",
    "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
    "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
    "repos_url": "https://api.github.com/users/zoeyTM/repos",
    "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zoeyTM",
      "id": 14796043,
      "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zoeyTM",
      "html_url": "https://github.com/zoeyTM",
      "followers_url": "https://api.github.com/users/zoeyTM/followers",
      "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
      "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
      "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
      "repos_url": "https://api.github.com/users/zoeyTM/repos",
      "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-12-01T02:07:09Z",
  "updated_at": "2022-11-18T10:08:32Z",
  "closed_at": "2021-12-01T21:09:30Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "I'm not sure if this is a bug with `hardhat-etherscan` or a bug with Etherscan but I haven't been able to consistently verify an `ERC1967Proxy`. The implementation verifies, but not the proxy. Any ideas?\r\n\r\n```\r\nSuccessfully verified contract ArtistCreator on Etherscan.\r\nhttps://rinkeby.etherscan.io/address/0xDE76497e40F69d4ae50f7E2Ae1e20e9a6B2c95D8#code\r\nVerifying proxy: 0x8e9794C65Ccf6f5C47eea20D5489f05EF5C65419\r\n\r\nSuccessfully submitted source code for contract\r\ncontracts/ArtistCreatorProxy.sol:ArtistCreatorProxy at 0x8e9794C65Ccf6f5C47eea20D5489f05EF5C65419\r\nfor verification on Etherscan. Waiting for verification result...\r\n\r\nWe tried verifying your contract ArtistCreatorProxy without including any unrelated one, but it failed.\r\nTrying again with the full solc input used to compile and deploy it.\r\nThis means that unrelated contracts may be displayed on Etherscan...\r\n\r\nSuccessfully submitted source code for contract\r\ncontracts/ArtistCreatorProxy.sol:ArtistCreatorProxy at 0x8e9794C65Ccf6f5C47eea20D5489f05EF5C65419\r\nfor verification on Etherscan. Waiting for verification result...\r\n\r\nNomicLabsHardhatPluginError: The contract verification failed.\r\nReason: Fail - Unable to verify\r\n    at SimpleTaskDefinition.verifySubtask [as action] (/Users/masurka/SOUND_XYZ/sound-collective/node_modules/@nomiclabs/hardhat-etherscan/src/index.ts:330:9)\r\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\r\n    at async Environment._runTaskDefinition (/Users/masurka/SOUND_XYZ/sound-collective/node_modules/hardhat/src/internal/core/runtime-environment.ts:217:14)\r\n    at async Environment.run (/Users/masurka/SOUND_XYZ/sound-collective/node_modules/hardhat/src/internal/core/runtime-environment.ts:129:14)\r\n```\r\n\r\nProxy code:\r\n```\r\npragma solidity ^0.8.7;\r\n\r\nimport '@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol';\r\n\r\ncontract ArtistCreatorProxy is ERC1967Proxy {\r\n    constructor(\r\n        address _logic,\r\n        address,\r\n        bytes memory _data\r\n    ) payable ERC1967Proxy(_logic, _data) {}\r\n}\r\n```",
  "closed_by": {
    "login": "gigamesh",
    "id": 32403632,
    "node_id": "MDQ6VXNlcjMyNDAzNjMy",
    "avatar_url": "https://avatars.githubusercontent.com/u/32403632?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gigamesh",
    "html_url": "https://github.com/gigamesh",
    "followers_url": "https://api.github.com/users/gigamesh/followers",
    "following_url": "https://api.github.com/users/gigamesh/following{/other_user}",
    "gists_url": "https://api.github.com/users/gigamesh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gigamesh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gigamesh/subscriptions",
    "organizations_url": "https://api.github.com/users/gigamesh/orgs",
    "repos_url": "https://api.github.com/users/gigamesh/repos",
    "events_url": "https://api.github.com/users/gigamesh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gigamesh/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/983630446",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2117#issuecomment-983630446",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117",
    "id": 983630446,
    "node_id": "IC_kwDOB7jojM46oQJu",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-01T13:15:37Z",
    "updated_at": "2021-12-01T13:15:37Z",
    "author_association": "MEMBER",
    "body": "Hey @gigamesh, \r\n\r\nWere both contracts deployed at the same time? did you modify your codebase after deploying them? If not, this looks like an issue with Etherscan. ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/983630446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/984058615",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2117#issuecomment-984058615",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2117",
    "id": 984058615,
    "node_id": "IC_kwDOB7jojM46p4r3",
    "user": {
      "login": "gigamesh",
      "id": 32403632,
      "node_id": "MDQ6VXNlcjMyNDAzNjMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/32403632?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gigamesh",
      "html_url": "https://github.com/gigamesh",
      "followers_url": "https://api.github.com/users/gigamesh/followers",
      "following_url": "https://api.github.com/users/gigamesh/following{/other_user}",
      "gists_url": "https://api.github.com/users/gigamesh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gigamesh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gigamesh/subscriptions",
      "organizations_url": "https://api.github.com/users/gigamesh/orgs",
      "repos_url": "https://api.github.com/users/gigamesh/repos",
      "events_url": "https://api.github.com/users/gigamesh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gigamesh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-01T21:11:52Z",
    "updated_at": "2021-12-01T21:11:52Z",
    "author_association": "NONE",
    "body": "Thanks @alcuadrado \r\n\r\nFor anyone who finds this in the future, The issue was that I was mistakenly retrieving the beacon address and trying to initialize that, rather than the implementation. You need to instantiate the UpgradeableBeacon contract with the correct address, then call `implementation()` on it to get the implementation address.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/984058615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

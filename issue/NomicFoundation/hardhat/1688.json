{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1688",
  "id": 946845635,
  "node_id": "MDU6SXNzdWU5NDY4NDU2MzU=",
  "number": 1688,
  "title": "BASEFEE always returns 0 when running an `eth_call` with a London block",
  "user": {
    "login": "alcuadrado",
    "id": 176499,
    "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alcuadrado",
    "html_url": "https://github.com/alcuadrado",
    "followers_url": "https://api.github.com/users/alcuadrado/followers",
    "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
    "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
    "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
    "repos_url": "https://api.github.com/users/alcuadrado/repos",
    "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 901960538,
      "node_id": "MDU6TGFiZWw5MDE5NjA1Mzg=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:bug",
      "name": "type:bug",
      "color": "FBCA04",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 4745762096,
      "node_id": "LA_kwDOB7jojM8AAAABGt6VMA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/blocked-reason:needs-rethnet",
      "name": "blocked-reason:needs-rethnet",
      "color": "B60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-07-17T15:32:01Z",
  "updated_at": "2023-01-03T09:16:50Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "I'm opening this issue to document a limitation in our `eth_call` implementation.\r\n\r\nTranscript of an internal conversation in the ethereumjs discord:\r\n\r\n> @alcuadrado:\r\n> I found another limitation of the vm wrt to geth's and other's\r\n> eth_call should run an EVM message in the context of a block and return its return data. Nothing new here.\r\n> \r\n> This can only be done with runTx in the vm, as runCall has some limitations we've discussed a lot of times.\r\n> \r\n> runTx requires a tx with a gasPrice/maxFeePerGas&maxPriorityFeePerGas. This value should be 0, and this is how other clients behave.\r\n> \r\n> If the block where the eth_call is running has a baseFeePerGas, this tx will be rejected, as its fee params would be too low (that 0). We should have a way to disable this check.\r\n> \r\n> As a workaround, we are creating a new block with baseFeePerGas = 0, but this will also change the value returned by BASEFEE.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1267317959",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1688#issuecomment-1267317959",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688",
    "id": 1267317959,
    "node_id": "IC_kwDOB7jojM5LibzH",
    "user": {
      "login": "penandlim",
      "id": 4276174,
      "node_id": "MDQ6VXNlcjQyNzYxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4276174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penandlim",
      "html_url": "https://github.com/penandlim",
      "followers_url": "https://api.github.com/users/penandlim/followers",
      "following_url": "https://api.github.com/users/penandlim/following{/other_user}",
      "gists_url": "https://api.github.com/users/penandlim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penandlim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penandlim/subscriptions",
      "organizations_url": "https://api.github.com/users/penandlim/orgs",
      "repos_url": "https://api.github.com/users/penandlim/repos",
      "events_url": "https://api.github.com/users/penandlim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penandlim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T17:19:25Z",
    "updated_at": "2022-10-04T17:19:25Z",
    "author_association": "NONE",
    "body": "Note that this is currently blocking estimating costs on forked network for Arbitrum Bridge as some of their inner working contracts reference basefee to calculate the cost for bridging.\r\n\r\nLooks like it returns zero on view / callstatic but uses expected value on write calls.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1267317959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1267318830",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1688#issuecomment-1267318830",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688",
    "id": 1267318830,
    "node_id": "IC_kwDOB7jojM5LicAu",
    "user": {
      "login": "penandlim",
      "id": 4276174,
      "node_id": "MDQ6VXNlcjQyNzYxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4276174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penandlim",
      "html_url": "https://github.com/penandlim",
      "followers_url": "https://api.github.com/users/penandlim/followers",
      "following_url": "https://api.github.com/users/penandlim/following{/other_user}",
      "gists_url": "https://api.github.com/users/penandlim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penandlim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penandlim/subscriptions",
      "organizations_url": "https://api.github.com/users/penandlim/orgs",
      "repos_url": "https://api.github.com/users/penandlim/repos",
      "events_url": "https://api.github.com/users/penandlim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penandlim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T17:20:10Z",
    "updated_at": "2022-10-04T17:20:10Z",
    "author_association": "NONE",
    "body": "Relevant issue: https://github.com/NomicFoundation/hardhat/issues/3028",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1267318830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1270271843",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1688#issuecomment-1270271843",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1688",
    "id": 1270271843,
    "node_id": "IC_kwDOB7jojM5Lts9j",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-06T15:29:22Z",
    "updated_at": "2022-10-06T15:29:22Z",
    "author_association": "MEMBER",
    "body": "Thanks for the extra data @penandlim, I will update the priority of this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1270271843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

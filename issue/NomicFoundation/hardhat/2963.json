{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2963",
  "id": 1309957440,
  "node_id": "I_kwDOB7jojM5OFF1A",
  "number": 2963,
  "title": "Set ETH balance when impersonateAccount is called.",
  "user": {
    "login": "rokso",
    "id": 14338548,
    "node_id": "MDQ6VXNlcjE0MzM4NTQ4",
    "avatar_url": "https://avatars.githubusercontent.com/u/14338548?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rokso",
    "html_url": "https://github.com/rokso",
    "followers_url": "https://api.github.com/users/rokso/followers",
    "following_url": "https://api.github.com/users/rokso/following{/other_user}",
    "gists_url": "https://api.github.com/users/rokso/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rokso/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rokso/subscriptions",
    "organizations_url": "https://api.github.com/users/rokso/orgs",
    "repos_url": "https://api.github.com/users/rokso/repos",
    "events_url": "https://api.github.com/users/rokso/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rokso/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-07-19T19:34:21Z",
  "updated_at": "2022-11-17T21:12:37Z",
  "closed_at": "2022-08-08T12:55:24Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "<!--\r\n\r\nThank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\nThis issue will be automatically assigned to a Hardhat team member. This person will act as the point of contact between you and the team, but won't necessarily fix it nor address it in any way. An issue being assigned does not mean that it's being worked on.\r\n\r\n-->\r\nWhile `helpers.impersonateAccount()` and `ethers.getImpersonatedSigner()` are very useful and reduced my code by few lines and it will be better to set some ether balance after impersonate is called. It will help with impersonating contract with 0 ETH balance. \r\nI am currently explicitly calling `setBalance()` after each call to impersonate.",
  "closed_by": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1189475816",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2963#issuecomment-1189475816",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963",
    "id": 1189475816,
    "node_id": "IC_kwDOB7jojM5G5fXo",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-19T19:34:47Z",
    "updated_at": "2022-07-19T19:34:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-975/set-eth-balance-when-impersonateaccount-is-called).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: a6707233-b695-42bb-9de5-c89ba0e9279e",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1189475816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1189476711",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2963#issuecomment-1189476711",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963",
    "id": 1189476711,
    "node_id": "IC_kwDOB7jojM5G5fln",
    "user": {
      "login": "rokso",
      "id": 14338548,
      "node_id": "MDQ6VXNlcjE0MzM4NTQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/14338548?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rokso",
      "html_url": "https://github.com/rokso",
      "followers_url": "https://api.github.com/users/rokso/followers",
      "following_url": "https://api.github.com/users/rokso/following{/other_user}",
      "gists_url": "https://api.github.com/users/rokso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rokso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rokso/subscriptions",
      "organizations_url": "https://api.github.com/users/rokso/orgs",
      "repos_url": "https://api.github.com/users/rokso/repos",
      "events_url": "https://api.github.com/users/rokso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rokso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T19:35:57Z",
    "updated_at": "2022-07-19T19:35:57Z",
    "author_association": "NONE",
    "body": "Here is what I am doing currently.\r\n```\r\nasync function unlock(_address) {\r\n  await helpers.impersonateAccount(_address)\r\n  await helpers.setBalance(_address, ethers.utils.parseEther('1'))\r\n  return ethers.getSigner(_address)\r\n}\r\n```\r\nAbove can be 1 liner, ethers.getImpersonatedSigner(), for me if balance is set by default",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1189476711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208091849",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2963#issuecomment-1208091849",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963",
    "id": 1208091849,
    "node_id": "IC_kwDOB7jojM5IAgTJ",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T12:55:24Z",
    "updated_at": "2022-08-08T12:55:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for using Hardhat, and for sharing your suggestions.\r\n\r\nPlease note that in @nomiclabs/hardhat-ethers v2.1.0 we \"added new helper getImpersonatedSigner(), a shorthand for invoking the hardhat_impersonateAccount JSON-RPC method followed immediately by ethers.getSigner().\"\r\n\r\nI do not foresee us adding an _additional_ helper that also sets the balance, but if it's important to you and others we would certainly consider it, so feel free to re-open this if you feel strongly about it.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208091849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208370244",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2963#issuecomment-1208370244",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2963",
    "id": 1208370244,
    "node_id": "IC_kwDOB7jojM5IBkRE",
    "user": {
      "login": "rokso",
      "id": 14338548,
      "node_id": "MDQ6VXNlcjE0MzM4NTQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/14338548?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rokso",
      "html_url": "https://github.com/rokso",
      "followers_url": "https://api.github.com/users/rokso/followers",
      "following_url": "https://api.github.com/users/rokso/following{/other_user}",
      "gists_url": "https://api.github.com/users/rokso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rokso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rokso/subscriptions",
      "organizations_url": "https://api.github.com/users/rokso/orgs",
      "repos_url": "https://api.github.com/users/rokso/repos",
      "events_url": "https://api.github.com/users/rokso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rokso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T16:54:36Z",
    "updated_at": "2022-08-08T16:54:36Z",
    "author_association": "NONE",
    "body": "I am aware of `getImpersonatedSigner`. \r\nFYI I was not asking to add another helper. What I was asking is to set ETH balance by default when someone calls `getImpersonatedSigner` or `hardhat_impersonateAccount`. But I get it that it is not looking useful/promising to you. I have my workaround in place so I am fine anyway. Thanks for your response.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1208370244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

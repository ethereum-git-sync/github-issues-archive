{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4405",
  "id": 1905475371,
  "node_id": "I_kwDOB7jojM5xkz8r",
  "number": 4405,
  "title": "Add `initialBlockNumber` option for the node",
  "user": {
    "login": "mshakeg",
    "id": 40227090,
    "node_id": "MDQ6VXNlcjQwMjI3MDkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/40227090?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mshakeg",
    "html_url": "https://github.com/mshakeg",
    "followers_url": "https://api.github.com/users/mshakeg/followers",
    "following_url": "https://api.github.com/users/mshakeg/following{/other_user}",
    "gists_url": "https://api.github.com/users/mshakeg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mshakeg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mshakeg/subscriptions",
    "organizations_url": "https://api.github.com/users/mshakeg/orgs",
    "repos_url": "https://api.github.com/users/mshakeg/repos",
    "events_url": "https://api.github.com/users/mshakeg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mshakeg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 947232611,
      "node_id": "MDU6TGFiZWw5NDcyMzI2MTE=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:feature",
      "name": "type:feature",
      "color": "FBCA04",
      "default": false,
      "description": "Feature request"
    },
    {
      "id": 4745762096,
      "node_id": "LA_kwDOB7jojM8AAAABGt6VMA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/blocked-reason:needs-edr",
      "name": "blocked-reason:needs-edr",
      "color": "B60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "schaable",
    "id": 1165424,
    "node_id": "MDQ6VXNlcjExNjU0MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/schaable",
    "html_url": "https://github.com/schaable",
    "followers_url": "https://api.github.com/users/schaable/followers",
    "following_url": "https://api.github.com/users/schaable/following{/other_user}",
    "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
    "organizations_url": "https://api.github.com/users/schaable/orgs",
    "repos_url": "https://api.github.com/users/schaable/repos",
    "events_url": "https://api.github.com/users/schaable/events{/privacy}",
    "received_events_url": "https://api.github.com/users/schaable/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "schaable",
      "id": 1165424,
      "node_id": "MDQ6VXNlcjExNjU0MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1165424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schaable",
      "html_url": "https://github.com/schaable",
      "followers_url": "https://api.github.com/users/schaable/followers",
      "following_url": "https://api.github.com/users/schaable/following{/other_user}",
      "gists_url": "https://api.github.com/users/schaable/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schaable/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schaable/subscriptions",
      "organizations_url": "https://api.github.com/users/schaable/orgs",
      "repos_url": "https://api.github.com/users/schaable/repos",
      "events_url": "https://api.github.com/users/schaable/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schaable/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-09-20T17:56:47Z",
  "updated_at": "2023-10-18T17:24:50Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Describe the feature\n\n#### Description\r\n\r\nI propose a feature to allow users to specify a custom start time and initial block number for the local Hardhat network. Currently, Hardhat initializes the local development network with the current timestamp and starts from block number 0. While the network allows manipulation of the EVM time and block numbers through methods like `evm_increaseTime` and `evm_mine`, it does not offer the capability to start the network with custom initial settings let alone specifying a start time in the past i.e. less than the current unix time.\r\n\r\n#### Motivation\r\n\r\nThe need for this feature arises from various testing scenarios where developers need to simulate or replay past mainnet transactions. Having control over the exact start time and block number is crucial for achieving accurate testing conditions.\r\n\r\nFor example, consider a series of transactions A, B, and C that occurred at times 1000, 1003, and 1008 respectively on mainnet. If we want to test these transactions on a local Hardhat node, the current method would be to:\r\n\r\n1. Start the Hardhat node.\r\n2. Replay transaction A at the current time\r\n3. Use time.increaseTo to increase the time by the time delta of tx A and B.\r\n4. Replay transaction B.\r\n5. Repeat for other transactions.\r\n\r\nThis method lacks precision and makes it cumbersome to simulate more complex scenarios where the exact start time and block number are essential.\r\n\r\n#### Proposed Solution\r\n\r\nI propose extending the configuration options for the Hardhat network to include `startTime` and `startBlockNumber`. For example:\r\n\r\n```js\r\nmodule.exports = {\r\n  networks: {\r\n    hardhat: {\r\n      startTime: 1672444800,  // Unix timestamp\r\n      startBlockNumber: 1345678,\r\n    },\r\n  },\r\n  // other configs\r\n}\r\n```\r\n\r\nThe above settings would instruct the Hardhat network to initialize itself starting from the given Unix timestamp and block number.\n\n### Search terms\n\nnode start time past",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1743989711",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4405#issuecomment-1743989711",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405",
    "id": 1743989711,
    "node_id": "IC_kwDOB7jojM5n8yvP",
    "user": {
      "login": "ernaneluis",
      "id": 1398769,
      "node_id": "MDQ6VXNlcjEzOTg3Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1398769?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ernaneluis",
      "html_url": "https://github.com/ernaneluis",
      "followers_url": "https://api.github.com/users/ernaneluis/followers",
      "following_url": "https://api.github.com/users/ernaneluis/following{/other_user}",
      "gists_url": "https://api.github.com/users/ernaneluis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ernaneluis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ernaneluis/subscriptions",
      "organizations_url": "https://api.github.com/users/ernaneluis/orgs",
      "repos_url": "https://api.github.com/users/ernaneluis/repos",
      "events_url": "https://api.github.com/users/ernaneluis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ernaneluis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-03T00:48:38Z",
    "updated_at": "2023-10-03T00:48:38Z",
    "author_association": "NONE",
    "body": "Any updates here? Its a nice feature to have.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1743989711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1766556568",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4405#issuecomment-1766556568",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405",
    "id": 1766556568,
    "node_id": "IC_kwDOB7jojM5pS4OY",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-17T14:38:44Z",
    "updated_at": "2023-10-17T14:38:44Z",
    "author_association": "MEMBER",
    "body": "Hardhat already supports an `initialDate` option for the starting timestamp, so I guess the proposal here is just about having an `initialBlockNumber` option, that respects that `initialDate` (if set), right?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1766556568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1766856879",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4405#issuecomment-1766856879",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4405",
    "id": 1766856879,
    "node_id": "IC_kwDOB7jojM5pUBiv",
    "user": {
      "login": "mshakeg",
      "id": 40227090,
      "node_id": "MDQ6VXNlcjQwMjI3MDkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/40227090?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mshakeg",
      "html_url": "https://github.com/mshakeg",
      "followers_url": "https://api.github.com/users/mshakeg/followers",
      "following_url": "https://api.github.com/users/mshakeg/following{/other_user}",
      "gists_url": "https://api.github.com/users/mshakeg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mshakeg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mshakeg/subscriptions",
      "organizations_url": "https://api.github.com/users/mshakeg/orgs",
      "repos_url": "https://api.github.com/users/mshakeg/repos",
      "events_url": "https://api.github.com/users/mshakeg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mshakeg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-17T17:24:58Z",
    "updated_at": "2023-10-17T17:24:58Z",
    "author_association": "NONE",
    "body": "@fvictorio thanks for pointing out the `initialDate` option, in that case, yes, this issue is essentially an ask for an `initialBlockNumber` option.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1766856879/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

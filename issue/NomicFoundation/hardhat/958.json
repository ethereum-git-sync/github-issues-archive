{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/958",
  "id": 729911171,
  "node_id": "MDU6SXNzdWU3Mjk5MTExNzE=",
  "number": 958,
  "title": "Cant override task, Error HH201: Could not set param export for task deploy:runDeploy because its name is already used.",
  "user": {
    "login": "RobertoSnap",
    "id": 4772930,
    "node_id": "MDQ6VXNlcjQ3NzI5MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4772930?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RobertoSnap",
    "html_url": "https://github.com/RobertoSnap",
    "followers_url": "https://api.github.com/users/RobertoSnap/followers",
    "following_url": "https://api.github.com/users/RobertoSnap/following{/other_user}",
    "gists_url": "https://api.github.com/users/RobertoSnap/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RobertoSnap/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RobertoSnap/subscriptions",
    "organizations_url": "https://api.github.com/users/RobertoSnap/orgs",
    "repos_url": "https://api.github.com/users/RobertoSnap/repos",
    "events_url": "https://api.github.com/users/RobertoSnap/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RobertoSnap/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-10-26T21:11:17Z",
  "updated_at": "2022-11-19T00:15:38Z",
  "closed_at": "2020-10-26T22:06:53Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": "resolved",
  "body": "# issue\r\nIn hardhat im getting:\r\n\r\n```bash\r\nError HH201: Could not set param export for task deploy:runDeploy because its name is already used\r\n```\r\n\r\nOn overriding this task from deploy\r\n\r\n```typescript\r\n\r\nsubtask(TASK_DEPLOY_RUN_DEPLOY, 'deploy run only')\r\n  .addOptionalParam('export', 'export current network deployments')\r\n  .addOptionalParam('exportAll', 'export all deployments into one file')\r\n  .addOptionalParam('tags', 'dependencies to run')\r\n  .addOptionalParam('write', 'whether to write deployments to file', true, types.boolean)\r\n  .addOptionalParam('pendingtx', 'whether to save pending tx', false, types.boolean)\r\n  .addOptionalParam('gasprice', 'gas price to use for transactions', undefined, types.string)\r\n  .addFlag('reset', 'whether to delete deployments files first')\r\n  .addFlag('log', 'whether to output log')\r\n  .setAction(async (args) => {\r\n    return deploymentsManager.runDeploy(args.tags, {\r\n      log: args.log,\r\n      resetMemory: false,\r\n      deletePreviousDeployments: args.reset,\r\n      writeDeploymentsToFiles: args.write,\r\n      export: args.export,\r\n      exportAll: args.exportAll,\r\n      savePendingTx: args.pendingtx,\r\n      gasPrice: args.gasprice,\r\n    });\r\n  });\r\n```\r\n\r\nWhen declearing this task myself:\r\n\r\n```typescript\r\nsubtask(\r\n  TASK_DEPLOY_RUN_DEPLOY,\r\n  \"Generate react component after deploy\"\r\n).setAction(async (args, hre, runSuper) => {\r\n  try {\r\n    if (!runSuper.isDefined)\r\n      throw Error(\"runSuper not defined for \" + TASK_DEPLOY_RUN_DEPLOY);\r\n    await runSuper(args);\r\n    await hre.run(TASK_REACT_MAIN, args);\r\n    return;\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n});\r\n```\r\n\r\nIm not redeclearing the export param. :confused:\r\n\r\n# reproduce steps\r\n\r\n`git clone https://github.com/symfoni/buidler-plugins.git override-issue-hardhat`\r\n`cd override-issue-hardhat`\r\n`git checkout hardhat`\r\n`yarn`\r\n`yarn run bootstrap`\r\n`yarn run watch`\r\nOpen a new terminal\r\n`yarn run node`\r\n\r\nError should popup",
  "closed_by": {
    "login": "RobertoSnap",
    "id": 4772930,
    "node_id": "MDQ6VXNlcjQ3NzI5MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4772930?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RobertoSnap",
    "html_url": "https://github.com/RobertoSnap",
    "followers_url": "https://api.github.com/users/RobertoSnap/followers",
    "following_url": "https://api.github.com/users/RobertoSnap/following{/other_user}",
    "gists_url": "https://api.github.com/users/RobertoSnap/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RobertoSnap/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RobertoSnap/subscriptions",
    "organizations_url": "https://api.github.com/users/RobertoSnap/orgs",
    "repos_url": "https://api.github.com/users/RobertoSnap/repos",
    "events_url": "https://api.github.com/users/RobertoSnap/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RobertoSnap/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716826424",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/958#issuecomment-716826424",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958",
    "id": 716826424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjgyNjQyNA==",
    "user": {
      "login": "RobertoSnap",
      "id": 4772930,
      "node_id": "MDQ6VXNlcjQ3NzI5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4772930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoSnap",
      "html_url": "https://github.com/RobertoSnap",
      "followers_url": "https://api.github.com/users/RobertoSnap/followers",
      "following_url": "https://api.github.com/users/RobertoSnap/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoSnap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoSnap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoSnap/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoSnap/orgs",
      "repos_url": "https://api.github.com/users/RobertoSnap/repos",
      "events_url": "https://api.github.com/users/RobertoSnap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoSnap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-26T21:12:08Z",
    "updated_at": "2020-10-26T21:12:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Error does not resurface in new repo, must be something local. Closing issue.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716826424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716828577",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/958#issuecomment-716828577",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958",
    "id": 716828577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjgyODU3Nw==",
    "user": {
      "login": "RobertoSnap",
      "id": 4772930,
      "node_id": "MDQ6VXNlcjQ3NzI5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4772930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoSnap",
      "html_url": "https://github.com/RobertoSnap",
      "followers_url": "https://api.github.com/users/RobertoSnap/followers",
      "following_url": "https://api.github.com/users/RobertoSnap/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoSnap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoSnap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoSnap/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoSnap/orgs",
      "repos_url": "https://api.github.com/users/RobertoSnap/repos",
      "events_url": "https://api.github.com/users/RobertoSnap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoSnap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-26T21:16:32Z",
    "updated_at": "2020-10-26T21:16:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "EDIT: Reopening. I forgot to change brance to hardhat. \r\n\r\nThe error pops up is new local repo also. ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716828577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716850153",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/958#issuecomment-716850153",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/958",
    "id": 716850153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjg1MDE1Mw==",
    "user": {
      "login": "RobertoSnap",
      "id": 4772930,
      "node_id": "MDQ6VXNlcjQ3NzI5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4772930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoSnap",
      "html_url": "https://github.com/RobertoSnap",
      "followers_url": "https://api.github.com/users/RobertoSnap/followers",
      "following_url": "https://api.github.com/users/RobertoSnap/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoSnap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoSnap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoSnap/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoSnap/orgs",
      "repos_url": "https://api.github.com/users/RobertoSnap/repos",
      "events_url": "https://api.github.com/users/RobertoSnap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoSnap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-26T22:06:53Z",
    "updated_at": "2020-10-26T22:06:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Solution: Use yarn workspaces\r\n\r\nFix from @alcuadrado https://github.com/symfoni/buidler-plugins/commit/0aeecb63c24bd6533df7078db8fd35b42aa209ef\r\n\r\n@alcuadrado\r\nthe issue is that you have two different versions of buidler-deploy\r\non in the demo package, and another one in the plugin\r\nso the demo and the plugin are both loading buidler-deploy\r\nthat's what you normally avoid with peerDependencies\r\nbut in this case, they are both peer and dev\r\nas we recommend, as there's no clear way to run tests otherwise\r\nthe easiest way to avoid this is by hoising the packages by using yarn workspaces\r\nI just sent you a pr with the fix",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/716850153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

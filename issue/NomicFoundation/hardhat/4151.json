{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4151",
  "id": 1805173366,
  "node_id": "I_kwDOB7jojM5rmMJ2",
  "number": 4151,
  "title": "Improve experience of mixing hardhat_reset and fixtures",
  "user": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937718880,
      "node_id": "LA_kwDOB7jojM8AAAABJk-cYA",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:improvement",
      "name": "type:improvement",
      "color": "FBCA04",
      "default": false,
      "description": ""
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    },
    {
      "id": 4952057568,
      "node_id": "LA_kwDOB7jojM8AAAABJypm4A",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/area:network-helpers",
      "name": "area:network-helpers",
      "color": "5319E7",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-07-14T16:50:11Z",
  "updated_at": "2023-07-27T22:39:23Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "If you use fixtures and `hardhat_reset`, you will likely run into an error like:\r\n\r\n```\r\nFixtureSnapshotError: There was an error reverting the snapshot of the fixture.\r\n\r\nThis might be caused by using nested loadFixture calls in a test, for example by using multiple beforeEach calls. This is not supported yet.\r\n```\r\n\r\nThat message is misleading, and also a lie: we support nested loadFixture calls now.\r\n\r\nTwo things to do here:\r\n- Update that error message\r\n- Check if there's an easy way to detect that there was a reset and act accordingly (just clear the fixtures array in that case I guess?)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1646676797",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4151#issuecomment-1646676797",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151",
    "id": 1646676797,
    "node_id": "IC_kwDOB7jojM5iJks9",
    "user": {
      "login": "zdenham",
      "id": 16373521,
      "node_id": "MDQ6VXNlcjE2MzczNTIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/16373521?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zdenham",
      "html_url": "https://github.com/zdenham",
      "followers_url": "https://api.github.com/users/zdenham/followers",
      "following_url": "https://api.github.com/users/zdenham/following{/other_user}",
      "gists_url": "https://api.github.com/users/zdenham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zdenham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zdenham/subscriptions",
      "organizations_url": "https://api.github.com/users/zdenham/orgs",
      "repos_url": "https://api.github.com/users/zdenham/repos",
      "events_url": "https://api.github.com/users/zdenham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zdenham/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-22T21:42:24Z",
    "updated_at": "2023-07-22T22:33:28Z",
    "author_association": "NONE",
    "body": "I'm also seeing this issue with fixtures + `hardhat_reset` on _any_ test, our workaround was to run this test which required rest without fixtures (and separately from the rest of our tests with fixtures).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1646676797/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1654673571",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4151#issuecomment-1654673571",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4151",
    "id": 1654673571,
    "node_id": "IC_kwDOB7jojM5ioFCj",
    "user": {
      "login": "Saty248",
      "id": 68778874,
      "node_id": "MDQ6VXNlcjY4Nzc4ODc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/68778874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Saty248",
      "html_url": "https://github.com/Saty248",
      "followers_url": "https://api.github.com/users/Saty248/followers",
      "following_url": "https://api.github.com/users/Saty248/following{/other_user}",
      "gists_url": "https://api.github.com/users/Saty248/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Saty248/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Saty248/subscriptions",
      "organizations_url": "https://api.github.com/users/Saty248/orgs",
      "repos_url": "https://api.github.com/users/Saty248/repos",
      "events_url": "https://api.github.com/users/Saty248/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Saty248/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T22:39:23Z",
    "updated_at": "2023-07-27T22:39:23Z",
    "author_association": "NONE",
    "body": "hi @fvictorio ,am working on this issue.. \r\n\r\n1. first of all ,in my pr, am changing the the error message to \r\n\r\nThere was an error reverting the snapshot of the fixture.\r\n\r\nThis might be caused by using hardhat_reset and loadFixture calls in a testcase.  \r\n\r\n2. what we also can do is, when hardhat_reset is called, we create a function at the loadFixtures which sets the fixtures array to empty.\r\n\r\nany thoughts about this idea?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1654673571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

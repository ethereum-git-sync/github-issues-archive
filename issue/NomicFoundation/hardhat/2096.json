{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2096",
  "id": 1063734976,
  "node_id": "I_kwDOB7jojM4_Z07A",
  "number": 2096,
  "title": "eth_getBlockByNumber on forked instance: missing uncle hashes",
  "user": {
    "login": "vince91",
    "id": 6903139,
    "node_id": "MDQ6VXNlcjY5MDMxMzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6903139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vince91",
    "html_url": "https://github.com/vince91",
    "followers_url": "https://api.github.com/users/vince91/followers",
    "following_url": "https://api.github.com/users/vince91/following{/other_user}",
    "gists_url": "https://api.github.com/users/vince91/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vince91/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vince91/subscriptions",
    "organizations_url": "https://api.github.com/users/vince91/orgs",
    "repos_url": "https://api.github.com/users/vince91/repos",
    "events_url": "https://api.github.com/users/vince91/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vince91/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "zoeyTM",
    "id": 14796043,
    "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zoeyTM",
    "html_url": "https://github.com/zoeyTM",
    "followers_url": "https://api.github.com/users/zoeyTM/followers",
    "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
    "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
    "repos_url": "https://api.github.com/users/zoeyTM/repos",
    "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zoeyTM",
      "id": 14796043,
      "node_id": "MDQ6VXNlcjE0Nzk2MDQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/14796043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zoeyTM",
      "html_url": "https://github.com/zoeyTM",
      "followers_url": "https://api.github.com/users/zoeyTM/followers",
      "following_url": "https://api.github.com/users/zoeyTM/following{/other_user}",
      "gists_url": "https://api.github.com/users/zoeyTM/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zoeyTM/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zoeyTM/subscriptions",
      "organizations_url": "https://api.github.com/users/zoeyTM/orgs",
      "repos_url": "https://api.github.com/users/zoeyTM/repos",
      "events_url": "https://api.github.com/users/zoeyTM/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zoeyTM/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-11-25T15:44:13Z",
  "updated_at": "2022-11-18T00:17:28Z",
  "closed_at": "2022-07-01T19:31:46Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "Using hardhat mainnet forking, when calling `eth_getBlockByNumber` on a block with uncles, the response does not contain uncle hashes.\r\n\r\n### Steps to reproduce:\r\n\r\n1/ Fork mainnet\r\n\r\n `npx hardhat node --fork YOUR_NODE_URL --port 8666 --fork-block-number 13497486`\r\n\r\n2/ Run Go snippet\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"context\"\r\n\t\"fmt\"\r\n\t\"math/big\"\r\n\r\n\t\"github.com/ethereum/go-ethereum/ethclient\"\r\n)\r\n\r\nfunc main() {\r\n\tclient, _ := ethclient.Dial(\"http://localhost:8666\")\r\n\tblock, err := client.BlockByNumber(context.Background(), big.NewInt(13497486))\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\tfmt.Println(\"nbUncleHashes\", len(block.Uncles()))\r\n}\r\n```\r\n\r\n### Result\r\n\r\nWe get an error because that block has an uncle, but inside the response, the list of uncle hashes is empty.\r\n\r\nhttps://github.com/ethereum/go-ethereum/blob/e761255ba7e19ec7c380f008f9035da3caa77994/ethclient/ethclient.go#L125\r\n\r\n### Expected\r\n\r\nHardhat returns the list of uncle hashes and no error.\r\n\r\n\r\nRelated PR https://github.com/nomiclabs/hardhat/pull/1915\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/979333487",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2096#issuecomment-979333487",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096",
    "id": 979333487,
    "node_id": "IC_kwDOB7jojM46X3Fv",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-25T16:13:06Z",
    "updated_at": "2021-11-25T16:13:06Z",
    "author_association": "MEMBER",
    "body": "Thanks @vince91! I was looking for a way to reproduce this",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/979333487/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/979478037",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2096#issuecomment-979478037",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096",
    "id": 979478037,
    "node_id": "IC_kwDOB7jojM46YaYV",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-25T21:35:07Z",
    "updated_at": "2021-11-25T21:35:07Z",
    "author_association": "MEMBER",
    "body": "I think that to fix this we would need to address your comment from #1915 and implement `eth_getUncleByBlockHashAndIndex`",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/979478037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1165835801",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2096#issuecomment-1165835801",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096",
    "id": 1165835801,
    "node_id": "IC_kwDOB7jojM5FfT4Z",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-06-24T18:37:53Z",
    "updated_at": "2022-06-24T18:37:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1165835801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1172657488",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2096#issuecomment-1172657488",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2096",
    "id": 1172657488,
    "node_id": "IC_kwDOB7jojM5F5VVQ",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-01T19:31:45Z",
    "updated_at": "2022-07-01T19:31:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1172657488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

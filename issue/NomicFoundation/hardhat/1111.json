{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111",
  "id": 770015283,
  "node_id": "MDU6SXNzdWU3NzAwMTUyODM=",
  "number": 1111,
  "title": "Request: multiple hardhat networks",
  "user": {
    "login": "dmihal",
    "id": 1661138,
    "node_id": "MDQ6VXNlcjE2NjExMzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1661138?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dmihal",
    "html_url": "https://github.com/dmihal",
    "followers_url": "https://api.github.com/users/dmihal/followers",
    "following_url": "https://api.github.com/users/dmihal/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmihal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dmihal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmihal/subscriptions",
    "organizations_url": "https://api.github.com/users/dmihal/orgs",
    "repos_url": "https://api.github.com/users/dmihal/repos",
    "events_url": "https://api.github.com/users/dmihal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dmihal/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 947232611,
      "node_id": "MDU6TGFiZWw5NDcyMzI2MTE=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:feature",
      "name": "type:feature",
      "color": "FBCA04",
      "default": false,
      "description": "Feature request"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-12-17T13:14:45Z",
  "updated_at": "2022-12-30T09:46:14Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Right now, only one \"hardhat\" network can be defined in the configuration. It would be nice if multiple could be defined with multiple configurations (for example, one for local testing and one for mainnet forking)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111/reactions",
    "total_count": 6,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/882914296",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-882914296",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 882914296,
    "node_id": "IC_kwDOB7jojM40oDP4",
    "user": {
      "login": "sshmaxime",
      "id": 25589782,
      "node_id": "MDQ6VXNlcjI1NTg5Nzgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25589782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sshmaxime",
      "html_url": "https://github.com/sshmaxime",
      "followers_url": "https://api.github.com/users/sshmaxime/followers",
      "following_url": "https://api.github.com/users/sshmaxime/following{/other_user}",
      "gists_url": "https://api.github.com/users/sshmaxime/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sshmaxime/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sshmaxime/subscriptions",
      "organizations_url": "https://api.github.com/users/sshmaxime/orgs",
      "repos_url": "https://api.github.com/users/sshmaxime/repos",
      "events_url": "https://api.github.com/users/sshmaxime/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sshmaxime/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-19T22:58:13Z",
    "updated_at": "2021-07-19T22:58:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is must. Especially for forking.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/882914296/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/883283493",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-883283493",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 883283493,
    "node_id": "IC_kwDOB7jojM40pdYl",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-20T10:29:02Z",
    "updated_at": "2021-07-20T10:29:02Z",
    "author_association": "MEMBER",
    "body": "In case anyone ends up here, the way to do this right now is to use environment variables and configure the network programmatically. So, say you want the Hardhat network to be non-forked by default but to fork in some scenarios. Then you could do something like this:\r\n\r\n```js\r\nconst hardhat = {\r\n  // your basic hardhat config\r\n}\r\n\r\nif (process.env.FORK === \"true\") {\r\n  hardhat.forking = {\r\n    // your forking config\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  networks: {\r\n    hardhat,\r\n    // other networks\r\n  }\r\n}\r\n```\r\n\r\nThen you can do `hh run myLocalScript.js` and `FORK=true hh run myForkScript.js`\r\n\r\nWe know this is not ideal, but it should at least help as a workaround.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/883283493/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/906874015",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-906874015",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 906874015,
    "node_id": "IC_kwDOB7jojM42Dcyf",
    "user": {
      "login": "nataouze",
      "id": 16722185,
      "node_id": "MDQ6VXNlcjE2NzIyMTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16722185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nataouze",
      "html_url": "https://github.com/nataouze",
      "followers_url": "https://api.github.com/users/nataouze/followers",
      "following_url": "https://api.github.com/users/nataouze/following{/other_user}",
      "gists_url": "https://api.github.com/users/nataouze/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nataouze/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nataouze/subscriptions",
      "organizations_url": "https://api.github.com/users/nataouze/orgs",
      "repos_url": "https://api.github.com/users/nataouze/repos",
      "events_url": "https://api.github.com/users/nataouze/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nataouze/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-27T02:18:21Z",
    "updated_at": "2021-08-27T02:18:21Z",
    "author_association": "NONE",
    "body": "My use-case is to test migrations which run on several networks, typically a L1/L2 setup. With `hardhat-deploy`, there is the concept of `companionNetworks`, so the config could look like this:\r\n\r\n```js\r\nmodule.exports = {\r\n  networks: {\r\n    hardhat: {\r\n      hardfork: 'london',\r\n      companionNetworks: {\r\n        L2: 'hardhat_L2'\r\n      }\r\n    },\r\n    hardhat_L2: {\r\n      type: 'hardhat', // for example\r\n      hardfork: 'berlin',\r\n      blockGasLimit: 30000000\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIt implies that several instances of the hardhat EVM would run in parallel, not sure if there are specific restrictions about this",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/906874015/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/907100572",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-907100572",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 907100572,
    "node_id": "IC_kwDOB7jojM42EUGc",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-27T10:28:49Z",
    "updated_at": "2021-08-27T10:28:49Z",
    "author_association": "MEMBER",
    "body": "@nataouze I think this issue is specifically about having networks with other name than `hardhat` that are also Hardhat networks. What you are suggesting (running multiple Hardhat networks in parallel) might be an interesting feature request, but we should have a different issue for that. (Fair warning: that seems like a hard thing for us to implement, so don't expect support for it soon :sweat_smile:)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/907100572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/920280422",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-920280422",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 920280422,
    "node_id": "IC_kwDOB7jojM422l1m",
    "user": {
      "login": "nick-staked",
      "id": 70966133,
      "node_id": "MDQ6VXNlcjcwOTY2MTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/70966133?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nick-staked",
      "html_url": "https://github.com/nick-staked",
      "followers_url": "https://api.github.com/users/nick-staked/followers",
      "following_url": "https://api.github.com/users/nick-staked/following{/other_user}",
      "gists_url": "https://api.github.com/users/nick-staked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nick-staked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nick-staked/subscriptions",
      "organizations_url": "https://api.github.com/users/nick-staked/orgs",
      "repos_url": "https://api.github.com/users/nick-staked/repos",
      "events_url": "https://api.github.com/users/nick-staked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nick-staked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-15T18:38:34Z",
    "updated_at": "2021-09-15T20:25:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've bumped into this issue as well. Just want to add some color for my particular use case and will also share my work around.\r\n\r\nMy application needs to either use multiple endpoints or even switch between networks. Further, I have the need to reset my node back to the latest block at different points in time. My workaround looks like this:\r\n\r\n```typescript\r\ninterface RequestForkingParams {\r\n  forking: {\r\n    url?:string, //should be deleted\r\n    jsonRpcUrl?: string,\r\n    blockNumber?: number,\r\n    accounts?: string[]\r\n  }\r\n}\r\n\r\nasync function reset(network:keyof typeof config.networks){\r\n  const original = config.networks[network];\r\n  const params:RequestForkingParams = {...config.networks.hardhat}; // copy hardhat network args\r\n\r\n  // Type Narrowing\r\n  if (\"url\" in original) { // if using another network besides \"hardhat\"\r\n    params.forking.jsonRpcUrl = original.url; \r\n  } else {\r\n    params.forking.jsonRpcUrl = original.forking.url;\r\n  }\r\n\r\n  delete params.forking.url; // delete unused key\r\n\r\n  await this.network.provider.request({\r\n    method: \"hardhat_reset\",\r\n    params: [params]\r\n  });\r\n}\r\n```\r\n\r\nAs an oddity, it seems that using the `hardhat_reset` rpc method expects a `jsonRpcUrl` key instead of the plain `url` key in the original config. It would be great to standardize the spec here so one could simplify the implementation to `config.networks[network];`",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/920280422/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/932025784",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-932025784",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 932025784,
    "node_id": "IC_kwDOB7jojM43jZW4",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T08:22:33Z",
    "updated_at": "2021-10-01T08:22:33Z",
    "author_association": "NONE",
    "body": "I'm also in need to forking different networks at the same time.\r\nResetting via a `hardhat_reset` call only works if I serialize my workflow, losing the ability to run different chains autonomously, without codependencies on each other.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/932025784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1215767764",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1111#issuecomment-1215767764",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1111",
    "id": 1215767764,
    "node_id": "IC_kwDOB7jojM5IdyTU",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T20:39:21Z",
    "updated_at": "2022-08-15T20:39:21Z",
    "author_association": "MEMBER",
    "body": "This is blocked by #3042. See my comment [here](https://github.com/NomicFoundation/hardhat/issues/2797#issuecomment-1215757465) for extra context.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1215767764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

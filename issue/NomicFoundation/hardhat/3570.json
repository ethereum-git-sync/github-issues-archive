{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/3570",
  "id": 1531004299,
  "node_id": "I_kwDOB7jojM5bQUWL",
  "number": 3570,
  "title": "Why to use `await contract.deployed()` after `await Contract.deploy()`?",
  "user": {
    "login": "k06a",
    "id": 702124,
    "node_id": "MDQ6VXNlcjcwMjEyNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/k06a",
    "html_url": "https://github.com/k06a",
    "followers_url": "https://api.github.com/users/k06a/followers",
    "following_url": "https://api.github.com/users/k06a/following{/other_user}",
    "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
    "organizations_url": "https://api.github.com/users/k06a/orgs",
    "repos_url": "https://api.github.com/users/k06a/repos",
    "events_url": "https://api.github.com/users/k06a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/k06a/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-01-12T16:16:26Z",
  "updated_at": "2023-04-13T00:12:20Z",
  "closed_at": "2023-01-12T20:30:23Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": "resolved",
  "body": "What is the reasoning behind the `.deployed()` call? It seems awaiting `.deploy()` should be enough.\r\n\r\nI see some tutorials and tests contains the following practice:\r\n- https://hardhat.org/hardhat-runner/docs/guides/deploying\r\n    ```js\r\n    const lock = await Lock.deploy(unlockTime, { value: lockedAmount });\r\n    await lock.deployed();\r\n    ```\r\n- https://github.com/NomicFoundation/hardhat/blob/654e7cd44a0f1229a44538f73584c538961a117e/packages/hardhat-waffle/test/fixture-projects/hardhat-project/test/tests.js#L48-L50",
  "closed_by": {
    "login": "k06a",
    "id": 702124,
    "node_id": "MDQ6VXNlcjcwMjEyNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/k06a",
    "html_url": "https://github.com/k06a",
    "followers_url": "https://api.github.com/users/k06a/followers",
    "following_url": "https://api.github.com/users/k06a/following{/other_user}",
    "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
    "organizations_url": "https://api.github.com/users/k06a/orgs",
    "repos_url": "https://api.github.com/users/k06a/repos",
    "events_url": "https://api.github.com/users/k06a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/k06a/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1380778788",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3570#issuecomment-1380778788",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570",
    "id": 1380778788,
    "node_id": "IC_kwDOB7jojM5STQMk",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-12T17:46:11Z",
    "updated_at": "2023-01-12T17:46:11Z",
    "author_association": "MEMBER",
    "body": "Hey,\r\n\r\n`.deployed()` is necessary for deployments, as otherwise ethers doesn't wait for the contract to be deployed. \r\n\r\nIt's not really necessary in tests, as those transactions get confirmed instantly. We don't recommend it anymore [in tests](https://github.com/NomicFoundation/hardhat/blob/main/packages/hardhat-core/sample-projects/javascript/test/Lock.js#L23). ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1380778788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1380962009",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/3570#issuecomment-1380962009",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/3570",
    "id": 1380962009,
    "node_id": "IC_kwDOB7jojM5ST87Z",
    "user": {
      "login": "k06a",
      "id": 702124,
      "node_id": "MDQ6VXNlcjcwMjEyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/702124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k06a",
      "html_url": "https://github.com/k06a",
      "followers_url": "https://api.github.com/users/k06a/followers",
      "following_url": "https://api.github.com/users/k06a/following{/other_user}",
      "gists_url": "https://api.github.com/users/k06a/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/k06a/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/k06a/subscriptions",
      "organizations_url": "https://api.github.com/users/k06a/orgs",
      "repos_url": "https://api.github.com/users/k06a/repos",
      "events_url": "https://api.github.com/users/k06a/events{/privacy}",
      "received_events_url": "https://api.github.com/users/k06a/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-12T20:30:23Z",
    "updated_at": "2023-01-12T20:30:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@alcuadrado, I see in the previous major version of [Ethers 4.0](https://docs.ethers.org/v4/api-contract.html#deployment) it was like this:\r\n> `prototype.deploy( … ) => Promise<Contract>`\r\n\r\n> Creates a transaction to deploy the transaction and sends it to the network using the contract [Signer](https://docs.ethers.org/v4/api-wallet.html#signer), returning a [Promise](https://docs.ethers.org/v4/notes.html#promise) that resolves to a Contract. The transaction is available as contract.deployTransaction.\r\n\r\n> Keep in mind that the Contract may not be mined immediately. The contract.deployed() function will return a [Promise](https://docs.ethers.org/v4/notes.html#promise) which will resolve once the contract is deployed, or reject if there was an error during deployment.\r\n\r\nBut in the latest [Ethers 5.4](https://docs.ethers.org/v5/api/contract/contract-factory/#ContractFactory-deploy) this changed dramatically:\r\n> `contractFactory.deploy( ...args [ , overrides ] ) ⇒ Promise< Contract >`\r\n\r\n> Uses the signer to deploy the Contract with args passed into the constructor and returns a Contract which is attached to the address where this contract will be deployed once the transaction is mined.\r\n\r\n> The transaction can be found at contract.deployTransaction, and no interactions should be made until the transaction is mined.\r\n\r\n> If the optional overrides is specified, they can be used to override the endowment value, transaction nonce, gasLimit or gasPrice.\r\n\r\nNow it makes sense, and hope Ethers 5.x developers had strong enough reasons to add one more layer of awaits.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1380962009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

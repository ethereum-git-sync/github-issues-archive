{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/4648",
  "id": 2026437824,
  "node_id": "I_kwDOB7jojM54yPzA",
  "number": 4648,
  "title": "eth_call doesn't work with geth 1.13",
  "user": {
    "login": "nuliknol",
    "id": 1125368,
    "node_id": "MDQ6VXNlcjExMjUzNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1125368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nuliknol",
    "html_url": "https://github.com/nuliknol",
    "followers_url": "https://api.github.com/users/nuliknol/followers",
    "following_url": "https://api.github.com/users/nuliknol/following{/other_user}",
    "gists_url": "https://api.github.com/users/nuliknol/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nuliknol/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nuliknol/subscriptions",
    "organizations_url": "https://api.github.com/users/nuliknol/orgs",
    "repos_url": "https://api.github.com/users/nuliknol/repos",
    "events_url": "https://api.github.com/users/nuliknol/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nuliknol/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4937119027,
      "node_id": "LA_kwDOB7jojM8AAAABJkZ1Mw",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:triaging",
      "name": "status:triaging",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-12-05T15:09:52Z",
  "updated_at": "2023-12-06T13:58:36Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version of Hardhat\r\n\r\n2.19.1\r\n\r\n### What happened?\r\n\r\nWhen sending eth_call to a contract for accessing read-only function with golang of Ethereum geth 1.13, the response from Hardhat is \"unknown selector\" error. \r\n\r\nThe reason for this error is that Hardhat expect contract input provided in the field `data` , but ethereum geth 1.13 is sending it in field name `input`. \r\n\r\nThis is RPC message sent with golang of geth 1.13.5\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"eth_call\",\"params\":[\r\n    {   \r\n        \"from\":\"0x0000000000000000000000000000000000000000\",\r\n        \"input\":\"0x8b1329e0\",\r\n        \"to\":\"0x5fbdb2315678afecb367f032d93f642f64180aa3\"\r\n    },  \r\n    \"latest\"\r\n]}\r\n```\r\n\r\nand this is RPC message sent with hardhat `run` command:\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"method\":\"eth_call\",\"params\":[\r\n    {   \r\n        \"from\":\"0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266\",\r\n        \"to\":\"0x5fbdb2315678afecb367f032d93f642f64180aa3\",\r\n        \"data\":\"0x8b1329e0\"\r\n    },  \r\n    \"latest\"\r\n],\"id\":4}\r\n```\r\n\r\nAs you can see Hardhat encodes the RPC data with `data` field, while geth uses `input` field. For this reason I am getting `unknown selector` error because Hardhat simply doesn't read contract input when decoding JSON text sent over HTTP\r\n\r\n\r\nHow to reproduce: \r\n1. Create a contract with read-only function\r\n2. Download geth 1.13 and generate contract wrappers using `abigen` tool\r\n3. Create a program in golang to send eth_call to the read-only function\r\n\r\nThe result is \"unknow selector\" error and execution of a fallback function\r\n\r\n\r\n\r\n### Search terms\r\n\r\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1841896034",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/4648#issuecomment-1841896034",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/4648",
    "id": 1841896034,
    "node_id": "IC_kwDOB7jojM5tyRpi",
    "user": {
      "login": "marlon-wiprud",
      "id": 37754165,
      "node_id": "MDQ6VXNlcjM3NzU0MTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/37754165?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marlon-wiprud",
      "html_url": "https://github.com/marlon-wiprud",
      "followers_url": "https://api.github.com/users/marlon-wiprud/followers",
      "following_url": "https://api.github.com/users/marlon-wiprud/following{/other_user}",
      "gists_url": "https://api.github.com/users/marlon-wiprud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marlon-wiprud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marlon-wiprud/subscriptions",
      "organizations_url": "https://api.github.com/users/marlon-wiprud/orgs",
      "repos_url": "https://api.github.com/users/marlon-wiprud/repos",
      "events_url": "https://api.github.com/users/marlon-wiprud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marlon-wiprud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-06T00:52:02Z",
    "updated_at": "2023-12-06T13:58:36Z",
    "author_association": "NONE",
    "body": "Ran into a similar issue making read-only calls against a hardhat contract with go bindings via abigen - downgrading from `1.13.5` to `1.12.2` resolved the problem for me. \r\n\r\nedit: found this PR which has aims to fix the problem: https://github.com/NomicFoundation/hardhat/pull/4438",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1841896034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

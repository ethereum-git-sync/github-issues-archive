{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906",
  "id": 1298273743,
  "node_id": "I_kwDOB7jojM5NYhXP",
  "number": 2906,
  "title": "HardhatNetworkHelpersError: Invalid timestamp 1657236743 is not larger than current timestamp 1716852786",
  "user": {
    "login": "Hirama",
    "id": 2853815,
    "node_id": "MDQ6VXNlcjI4NTM4MTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2853815?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Hirama",
    "html_url": "https://github.com/Hirama",
    "followers_url": "https://api.github.com/users/Hirama/followers",
    "following_url": "https://api.github.com/users/Hirama/following{/other_user}",
    "gists_url": "https://api.github.com/users/Hirama/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Hirama/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Hirama/subscriptions",
    "organizations_url": "https://api.github.com/users/Hirama/orgs",
    "repos_url": "https://api.github.com/users/Hirama/repos",
    "events_url": "https://api.github.com/users/Hirama/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Hirama/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "feuGeneA",
    "id": 7883777,
    "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/feuGeneA",
    "html_url": "https://github.com/feuGeneA",
    "followers_url": "https://api.github.com/users/feuGeneA/followers",
    "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
    "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
    "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
    "repos_url": "https://api.github.com/users/feuGeneA/repos",
    "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-07-07T23:38:27Z",
  "updated_at": "2023-01-02T00:13:57Z",
  "closed_at": "2022-10-03T13:34:48Z",
  "author_association": "NONE",
  "active_lock_reason": "resolved",
  "body": "<!--\r\n\r\nThank you for using Hardhat and taking the time to open an issue!\r\n\r\n**Note that this issue tracker is not a support channel.**\r\n\r\n- For help with Hardhat and Hardhat network, please use our [Discord server](https://hardhat.org/discord).\r\n- For help with ethers.js, please go to [its Github Discussions](https://github.com/ethers-io/ethers.js/discussions).\r\n\r\nIf you are reporting a bug, please include reproduction steps. The best way to do this is to include a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). If you can't do that, then include a link to your repo, and the steps to reproduce the problem. The easiest it is to reproduce your problem, the faster we are going to be able to fix it.\r\n\r\nIf you are submitting a feature request, please take the time to clearly describe your use case, and not only your proposed solution.\r\n\r\nThis issue will be automatically assigned to a Hardhat team member. This person will act as the point of contact between you and the team, but won't necessarily fix it nor address it in any way. An issue being assigned does not mean that it's being worked on.\r\n\r\n-->\r\nCant manipulate with correct timestamp.\r\n\r\n_\"hardhat\": \"^2.10.0\"\r\n\"@nomicfoundation/hardhat-network-helpers\": \"^1.0.2\"_\r\n\r\nThe code\r\n```\r\nconsole.log(\"Now:\", Math.floor(Date.now() / 1000))\r\nconsole.log(\"Latest:\", await time.latest());\r\nawait time.setNextBlockTimestamp(Math.floor(Date.now() / 1000));\r\n```\r\nConsole\r\n```\r\nNow: 1657236743\r\nLatest: 1716852786\r\n```\r\nError\r\n**HardhatNetworkHelpersError: Invalid timestamp 1657236743 is not larger than current timestamp 1716852786**\r\n\r\n\r\n",
  "closed_by": {
    "login": "fvictorio",
    "id": 417134,
    "node_id": "MDQ6VXNlcjQxNzEzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fvictorio",
    "html_url": "https://github.com/fvictorio",
    "followers_url": "https://api.github.com/users/fvictorio/followers",
    "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
    "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
    "organizations_url": "https://api.github.com/users/fvictorio/orgs",
    "repos_url": "https://api.github.com/users/fvictorio/repos",
    "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fvictorio/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178372940",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1178372940",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1178372940,
    "node_id": "IC_kwDOB7jojM5GPItM",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-07-07T23:38:51Z",
    "updated_at": "2022-07-07T23:38:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is also being [tracked on Linear](https://linear.app/nomic-foundation/issue/HH-919/hardhatnetworkhelperserror-invalid-timestamp-1657236743-is-not-larger).\n\nWe use Linear to manage our development process, but we keep the conversations on Github.\n\nLINEAR-ID: 497cf789-4bc5-4f9f-9ad7-9f65b0be2073",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178372940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178405575",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1178405575",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1178405575,
    "node_id": "IC_kwDOB7jojM5GPQrH",
    "user": {
      "login": "alcuadrado",
      "id": 176499,
      "node_id": "MDQ6VXNlcjE3NjQ5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alcuadrado",
      "html_url": "https://github.com/alcuadrado",
      "followers_url": "https://api.github.com/users/alcuadrado/followers",
      "following_url": "https://api.github.com/users/alcuadrado/following{/other_user}",
      "gists_url": "https://api.github.com/users/alcuadrado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alcuadrado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alcuadrado/subscriptions",
      "organizations_url": "https://api.github.com/users/alcuadrado/orgs",
      "repos_url": "https://api.github.com/users/alcuadrado/repos",
      "events_url": "https://api.github.com/users/alcuadrado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alcuadrado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T00:37:43Z",
    "updated_at": "2022-07-08T00:37:43Z",
    "author_association": "MEMBER",
    "body": "Hey! Thanks for reporting this issue so quickly ðŸ™Œ\r\n\r\nAre you forking a remote network?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178405575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178807868",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1178807868",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1178807868,
    "node_id": "IC_kwDOB7jojM5GQy48",
    "user": {
      "login": "Hirama",
      "id": 2853815,
      "node_id": "MDQ6VXNlcjI4NTM4MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2853815?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hirama",
      "html_url": "https://github.com/Hirama",
      "followers_url": "https://api.github.com/users/Hirama/followers",
      "following_url": "https://api.github.com/users/Hirama/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hirama/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hirama/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hirama/subscriptions",
      "organizations_url": "https://api.github.com/users/Hirama/orgs",
      "repos_url": "https://api.github.com/users/Hirama/repos",
      "events_url": "https://api.github.com/users/Hirama/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hirama/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T10:13:15Z",
    "updated_at": "2022-07-08T10:13:15Z",
    "author_association": "NONE",
    "body": "> \r\n\r\nHey! Nope, just running the tests",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1178807868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1179327403",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1179327403",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1179327403,
    "node_id": "IC_kwDOB7jojM5GSxur",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T20:12:00Z",
    "updated_at": "2022-07-08T20:12:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > \r\n> \r\n> Hey! Nope, just running the tests\r\n\r\nWhich tests? Something you can point us to?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1179327403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1180458832",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1180458832",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1180458832,
    "node_id": "IC_kwDOB7jojM5GXF9Q",
    "user": {
      "login": "Hirama",
      "id": 2853815,
      "node_id": "MDQ6VXNlcjI4NTM4MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2853815?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hirama",
      "html_url": "https://github.com/Hirama",
      "followers_url": "https://api.github.com/users/Hirama/followers",
      "following_url": "https://api.github.com/users/Hirama/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hirama/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hirama/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hirama/subscriptions",
      "organizations_url": "https://api.github.com/users/Hirama/orgs",
      "repos_url": "https://api.github.com/users/Hirama/repos",
      "events_url": "https://api.github.com/users/Hirama/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hirama/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T14:09:33Z",
    "updated_at": "2022-07-11T14:09:33Z",
    "author_association": "NONE",
    "body": "> > > \r\n> > \r\n> > \r\n> > Hey! Nope, just running the tests\r\n> \r\n> Which tests? Something you can point us to?\r\n\r\n`npx hardhat test`\r\n\r\nThe problem is that `block.timestamp` returns time from distant future\r\n<img width=\"587\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2853815/178283454-b01803f9-425e-4470-8189-dc1652f11563.png\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1180458832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1180574904",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1180574904",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1180574904,
    "node_id": "IC_kwDOB7jojM5GXiS4",
    "user": {
      "login": "feuGeneA",
      "id": 7883777,
      "node_id": "MDQ6VXNlcjc4ODM3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7883777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/feuGeneA",
      "html_url": "https://github.com/feuGeneA",
      "followers_url": "https://api.github.com/users/feuGeneA/followers",
      "following_url": "https://api.github.com/users/feuGeneA/following{/other_user}",
      "gists_url": "https://api.github.com/users/feuGeneA/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/feuGeneA/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feuGeneA/subscriptions",
      "organizations_url": "https://api.github.com/users/feuGeneA/orgs",
      "repos_url": "https://api.github.com/users/feuGeneA/repos",
      "events_url": "https://api.github.com/users/feuGeneA/events{/privacy}",
      "received_events_url": "https://api.github.com/users/feuGeneA/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T15:46:18Z",
    "updated_at": "2022-07-11T15:46:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the response, but that doesn't quite answer the question. You've told us that you're running the tests within a Hardhat project, but you haven't shared with us which project it is that you're running the tests for. Can you share your Hardhat project with us? Perhaps via a GitHub repo, or a .zip file attached to this Issue?",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1180574904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1183969132",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1183969132",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1183969132,
    "node_id": "IC_kwDOB7jojM5Gke9s",
    "user": {
      "login": "joglea",
      "id": 2239700,
      "node_id": "MDQ6VXNlcjIyMzk3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2239700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joglea",
      "html_url": "https://github.com/joglea",
      "followers_url": "https://api.github.com/users/joglea/followers",
      "following_url": "https://api.github.com/users/joglea/following{/other_user}",
      "gists_url": "https://api.github.com/users/joglea/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joglea/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joglea/subscriptions",
      "organizations_url": "https://api.github.com/users/joglea/orgs",
      "repos_url": "https://api.github.com/users/joglea/repos",
      "events_url": "https://api.github.com/users/joglea/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joglea/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T04:19:54Z",
    "updated_at": "2022-07-14T04:19:54Z",
    "author_association": "NONE",
    "body": "@feuGeneA  My hardhat project has similar problem . I run the \"npx hardhat node\" .\r\nWhen I repeat test my script \"test/Lock.js\" ,the local hardhat node's block.timestamp is bigger and bigger than my local timestamp.\r\nfirst the block.timestamp is smaller than my local timestamp:\r\nnpx hardhat test test/Lock.js\r\n\r\n![1](https://user-images.githubusercontent.com/2239700/178896113-196f013c-132a-4599-9b95-fff07a909157.png)\r\n\r\n![2](https://user-images.githubusercontent.com/2239700/178896262-d2e1b7b4-1893-4704-b9b7-2933f281f3e5.png)\r\n![3](https://user-images.githubusercontent.com/2239700/178897332-6805691f-7ed5-4fdf-84d3-3933f765c850.png)\r\n![4](https://user-images.githubusercontent.com/2239700/178897341-073fe71b-0003-4ccd-bde0-aba15225341b.png)\r\n\r\n...\r\nafter run my test script for several times, the block.timestamp is bigger than my local timestamp:\r\n\r\n![6](https://user-images.githubusercontent.com/2239700/178897369-62469bd6-e106-43af-9786-a45072a30d5a.png)\r\n![7](https://user-images.githubusercontent.com/2239700/178897633-b6fa2731-9920-45fa-88fd-62375f0917a9.png)\r\n\r\n\r\nthe block.timestamp will get bigger\r\n\r\nmy test project's zip file :\r\n\r\n[test-hardhat.zip](https://github.com/NomicFoundation/hardhat/files/9108351/test-hardhat.zip)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1183969132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195242897",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1195242897",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1195242897,
    "node_id": "IC_kwDOB7jojM5HPfWR",
    "user": {
      "login": "kasoqian",
      "id": 95743792,
      "node_id": "U_kgDOBbTvMA",
      "avatar_url": "https://avatars.githubusercontent.com/u/95743792?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kasoqian",
      "html_url": "https://github.com/kasoqian",
      "followers_url": "https://api.github.com/users/kasoqian/followers",
      "following_url": "https://api.github.com/users/kasoqian/following{/other_user}",
      "gists_url": "https://api.github.com/users/kasoqian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kasoqian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kasoqian/subscriptions",
      "organizations_url": "https://api.github.com/users/kasoqian/orgs",
      "repos_url": "https://api.github.com/users/kasoqian/repos",
      "events_url": "https://api.github.com/users/kasoqian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kasoqian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T09:28:39Z",
    "updated_at": "2022-07-26T09:28:39Z",
    "author_association": "NONE",
    "body": "The reason I found this solution is because there is another test file which is named `Lock.sol` and this file has a modified timestamp in it. Just comment out this default file.\r\n\r\nlike this:\r\n````js\r\n // const unlockTime = (await time.latest()) + ONE_YEAR_IN_SECS;\r\n````\r\n\r\n@alcuadrado @joglea @Hirama @feuGeneA ",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195242897/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195247954",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1195247954",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1195247954,
    "node_id": "IC_kwDOB7jojM5HPglS",
    "user": {
      "login": "kasoqian",
      "id": 95743792,
      "node_id": "U_kgDOBbTvMA",
      "avatar_url": "https://avatars.githubusercontent.com/u/95743792?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kasoqian",
      "html_url": "https://github.com/kasoqian",
      "followers_url": "https://api.github.com/users/kasoqian/followers",
      "following_url": "https://api.github.com/users/kasoqian/following{/other_user}",
      "gists_url": "https://api.github.com/users/kasoqian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kasoqian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kasoqian/subscriptions",
      "organizations_url": "https://api.github.com/users/kasoqian/orgs",
      "repos_url": "https://api.github.com/users/kasoqian/repos",
      "events_url": "https://api.github.com/users/kasoqian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kasoqian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T09:33:41Z",
    "updated_at": "2022-07-26T09:33:41Z",
    "author_association": "NONE",
    "body": "> @feuGeneA My hardhat project has similar problem . I run the \"npx hardhat node\" . When I repeat test my script \"test/Lock.js\" ,the local hardhat node's block.timestamp is bigger and bigger than my local timestamp. first the block.timestamp is smaller than my local timestamp: npx hardhat test test/Lock.js\r\n> \r\n> ![1](https://user-images.githubusercontent.com/2239700/178896113-196f013c-132a-4599-9b95-fff07a909157.png)\r\n> \r\n> ![2](https://user-images.githubusercontent.com/2239700/178896262-d2e1b7b4-1893-4704-b9b7-2933f281f3e5.png) ![3](https://user-images.githubusercontent.com/2239700/178897332-6805691f-7ed5-4fdf-84d3-3933f765c850.png) ![4](https://user-images.githubusercontent.com/2239700/178897341-073fe71b-0003-4ccd-bde0-aba15225341b.png)\r\n> \r\n> ... after run my test script for several times, the block.timestamp is bigger than my local timestamp:\r\n> \r\n> ![6](https://user-images.githubusercontent.com/2239700/178897369-62469bd6-e106-43af-9786-a45072a30d5a.png) ![7](https://user-images.githubusercontent.com/2239700/178897633-b6fa2731-9920-45fa-88fd-62375f0917a9.png)\r\n> \r\n> the block.timestamp will get bigger\r\n> \r\n> my test project's zip file :\r\n> \r\n> [test-hardhat.zip](https://github.com/NomicFoundation/hardhat/files/9108351/test-hardhat.zip)\r\n\r\nlook! You have the `Lock` test file, delete it that will work!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1195247954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1217836869",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1217836869",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1217836869,
    "node_id": "IC_kwDOB7jojM5IlrdF",
    "user": {
      "login": "vladikopl01",
      "id": 56199219,
      "node_id": "MDQ6VXNlcjU2MTk5MjE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56199219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vladikopl01",
      "html_url": "https://github.com/vladikopl01",
      "followers_url": "https://api.github.com/users/vladikopl01/followers",
      "following_url": "https://api.github.com/users/vladikopl01/following{/other_user}",
      "gists_url": "https://api.github.com/users/vladikopl01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vladikopl01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vladikopl01/subscriptions",
      "organizations_url": "https://api.github.com/users/vladikopl01/orgs",
      "repos_url": "https://api.github.com/users/vladikopl01/repos",
      "events_url": "https://api.github.com/users/vladikopl01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vladikopl01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-17T10:36:10Z",
    "updated_at": "2022-08-17T10:47:56Z",
    "author_association": "NONE",
    "body": "I had the same problem while running tests. Every test with expected equals for `latest()` and the `block.timestamp` causes test failure and has a difference in time of 1 sec. I make data struct on contract based on `latest()` timestamp and then get back this struct to expect creating process was performed without issues, but get the difference in time.\r\n\r\nHere is my test case:\r\n```typescript\r\nit('fail - invalid start date', async () => {\r\n      const actionWallet: SignerWithAddress = bcdOwnerWallet;\r\n      const saleInfo: SaleInfo = {\r\n        ...defaultSaleInfo,\r\n        startDate: toBN((await latest()) - 1000),\r\n      };\r\n\r\n      const salesCounterBefore = await bcdContract.connect(actionWallet).getSaleCount();\r\n\r\n      await checkContractOwner(actionWallet.address, bcdContract, true);\r\n\r\n      await expect(createSale(bcdContract, actionWallet, saleInfo))\r\n        .to.be.revertedWithCustomError(bcdContract, CustomErrors.INVALID_START_DATE)\r\n        .withArgs(saleInfo.startDate, await latest());\r\n\r\n      const salesCounterAfter = await bcdContract.connect(actionWallet).getSaleCount();\r\n      expect(salesCounterAfter).to.be.eq(salesCounterBefore);\r\n    });\r\n```\r\n\r\nSo, I had a `saleInfo` data object which I expected not to be added as Sale struct to the contract's state, because of raised custom error on contract. It should be reverted with such parameters as `saleInfo.startDate` and `block.timestamp` which should be equal in test to `saleInfo.startDate` and `latest()`, as `latest()` should return `block.timestamp` time, but it differs just for 1 sec.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1217836869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220508268",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1220508268",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1220508268,
    "node_id": "IC_kwDOB7jojM5Iv3ps",
    "user": {
      "login": "vladikopl01",
      "id": 56199219,
      "node_id": "MDQ6VXNlcjU2MTk5MjE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56199219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vladikopl01",
      "html_url": "https://github.com/vladikopl01",
      "followers_url": "https://api.github.com/users/vladikopl01/followers",
      "following_url": "https://api.github.com/users/vladikopl01/following{/other_user}",
      "gists_url": "https://api.github.com/users/vladikopl01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vladikopl01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vladikopl01/subscriptions",
      "organizations_url": "https://api.github.com/users/vladikopl01/orgs",
      "repos_url": "https://api.github.com/users/vladikopl01/repos",
      "events_url": "https://api.github.com/users/vladikopl01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vladikopl01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T10:21:24Z",
    "updated_at": "2022-08-19T10:21:24Z",
    "author_association": "NONE",
    "body": "> I had the same problem while running tests. Every test with expected equals for `latest()` and the `block.timestamp` causes test failure and has a difference in time of 1 sec. I make data struct on contract based on `latest()` timestamp and then get back this struct to expect creating process was performed without issues, but get the difference in time.\r\n> \r\n> Here is my test case:\r\n> \r\n> ```ts\r\n> it('fail - invalid start date', async () => {\r\n>       const actionWallet: SignerWithAddress = bcdOwnerWallet;\r\n>       const saleInfo: SaleInfo = {\r\n>         ...defaultSaleInfo,\r\n>         startDate: toBN((await latest()) - 1000),\r\n>       };\r\n> \r\n>       const salesCounterBefore = await bcdContract.connect(actionWallet).getSaleCount();\r\n> \r\n>       await checkContractOwner(actionWallet.address, bcdContract, true);\r\n> \r\n>       await expect(createSale(bcdContract, actionWallet, saleInfo))\r\n>         .to.be.revertedWithCustomError(bcdContract, CustomErrors.INVALID_START_DATE)\r\n>         .withArgs(saleInfo.startDate, await latest());\r\n> \r\n>       const salesCounterAfter = await bcdContract.connect(actionWallet).getSaleCount();\r\n>       expect(salesCounterAfter).to.be.eq(salesCounterBefore);\r\n>     });\r\n> ```\r\n> \r\n> So, I had a `saleInfo` data object which I expected not to be added as Sale struct to the contract's state, because of raised custom error on contract. It should be reverted with such parameters as `saleInfo.startDate` and `block.timestamp` which should be equal in test to `saleInfo.startDate` and `latest()`, as `latest()` should return `block.timestamp` time, but it differs just for 1 sec.\r\n\r\nI realized that `latest()` function returns the latest block timestamp and my custom error returns `block.timestamp` of the possible next block, so there is a difference in 1 sec between them. \r\n\r\nIt will be great to have such a function to get the next possible timestamp of the block, which is proceeded by the current transaction, if it is possible at all. Anyways, I will be glad to hear any ideas on how to resolve my problem appropriately.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1220508268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1265450293",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/2906#issuecomment-1265450293",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/2906",
    "id": 1265450293,
    "node_id": "IC_kwDOB7jojM5LbT01",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T13:34:47Z",
    "updated_at": "2022-10-03T13:34:47Z",
    "author_association": "MEMBER",
    "body": "There seem to be a couple of problems going on here.\r\n\r\nThe first issue, about the timestamp being way in the future... I don't know what's going on. And I don't think we can figure it out without reproduction steps.\r\n\r\n> When I repeat test my script \"test/Lock.js\" ,the local hardhat node's block.timestamp is bigger and bigger than my local timestamp.\r\n\r\nThis is probably caused by Hardhat increasing each block's timestamp by at least one second. We do this to follow the consensus rule that dictates that each block must have a different timestamp, but we are going to introduce an option to relax this condition.\r\n\r\n> I realized that latest() function returns the latest block timestamp and my custom error returns block.timestamp of the possible next block, so there is a difference in 1 sec between them.\r\n>\r\n> It will be great to have such a function to get the next possible timestamp of the block, which is proceeded by the current transaction, if it is possible at all. Anyways, I will be glad to hear any ideas on how to resolve my problem appropriately.\r\n\r\nThis would be hard to do because, in the normal case, the next block timestamp depends on, well, when the block was mined.\r\n\r\nWhat you can do is to use `setNextBlockTimestamp` to set the timestamp of the new block and then compare that in your test.\r\n\r\n---\r\n\r\nI'm going to close this issue now. If someone still has some problem, please open a new issue.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1265450293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

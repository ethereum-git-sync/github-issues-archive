{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065",
  "id": 752695984,
  "node_id": "MDU6SXNzdWU3NTI2OTU5ODQ=",
  "number": 1065,
  "title": "Feature Request: send a transaction that will be mined after N blocks",
  "user": {
    "login": "gitpusha",
    "id": 36712489,
    "node_id": "MDQ6VXNlcjM2NzEyNDg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/36712489?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gitpusha",
    "html_url": "https://github.com/gitpusha",
    "followers_url": "https://api.github.com/users/gitpusha/followers",
    "following_url": "https://api.github.com/users/gitpusha/following{/other_user}",
    "gists_url": "https://api.github.com/users/gitpusha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gitpusha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gitpusha/subscriptions",
    "organizations_url": "https://api.github.com/users/gitpusha/orgs",
    "repos_url": "https://api.github.com/users/gitpusha/repos",
    "events_url": "https://api.github.com/users/gitpusha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gitpusha/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947232611,
      "node_id": "MDU6TGFiZWw5NDcyMzI2MTE=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:feature",
      "name": "type:feature",
      "color": "FBCA04",
      "default": false,
      "description": "Feature request"
    },
    {
      "id": 4937720577,
      "node_id": "LA_kwDOB7jojM8AAAABJk-jAQ",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:ready",
      "name": "status:ready",
      "color": "0E8A16",
      "default": false,
      "description": "This issue is ready to be worked on"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-11-28T15:16:39Z",
  "updated_at": "2023-01-03T09:17:27Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "It would be amazing if there was a network config for hardhat network on localhost that lets you configure a random mining latency within a range: \r\n\r\ne.g. \r\n\r\n```javascript\r\n    localhost: {\r\n      latency: [15, 60],  // range in between 15 and 60 seconds\r\n      timeout: 150000,\r\n      forking: {\r\n```\r\n\r\nThis would allow for testing dapps against hardhat network RPC with conditions much closer to mainnet conditions. \r\n\r\nOften many bugs in dapp logic are only exposed once you run the logic with high network latency. \r\n\r\n\r\nUPDATE:\r\n\r\n#1087 PR includes logic that would enable mainnet consensus latency assimilation by having block times be set via interval mining mode. However, for this issue I am referring to tx inclusion latency and not block creation latency. Therefore, while already being a good step in the right direction to also solve the issue at hand, it is not quite a fitting solution for the tx inclusion latency I am addressing in here. ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/747616906",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065#issuecomment-747616906",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
    "id": 747616906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzYxNjkwNg==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T18:27:22Z",
    "updated_at": "2020-12-17T18:27:22Z",
    "author_association": "MEMBER",
    "body": "Related to: #1087",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/747616906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/747617276",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065#issuecomment-747617276",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
    "id": 747617276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzYxNzI3Ng==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T18:28:04Z",
    "updated_at": "2020-12-17T18:28:04Z",
    "author_association": "MEMBER",
    "body": "Oh, actually, that PR isn't *exactly* what you want, but I think it will be close enough.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/747617276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/751484264",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065#issuecomment-751484264",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
    "id": 751484264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MTQ4NDI2NA==",
    "user": {
      "login": "gitpusha",
      "id": 36712489,
      "node_id": "MDQ6VXNlcjM2NzEyNDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36712489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gitpusha",
      "html_url": "https://github.com/gitpusha",
      "followers_url": "https://api.github.com/users/gitpusha/followers",
      "following_url": "https://api.github.com/users/gitpusha/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitpusha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitpusha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitpusha/subscriptions",
      "organizations_url": "https://api.github.com/users/gitpusha/orgs",
      "repos_url": "https://api.github.com/users/gitpusha/repos",
      "events_url": "https://api.github.com/users/gitpusha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitpusha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-27T15:59:03Z",
    "updated_at": "2020-12-27T16:11:23Z",
    "author_association": "NONE",
    "body": "> Oh, actually, that PR isn't exactly what you want, but I think it will be close enough.\r\n\r\nYeah, it seems to be really close. \r\n\r\nSome differences: \r\n\r\nI wasnt explicit about this and I will update my original text, but I think it would be even better to assimilate mainnet conditions by allowing certain pending transactions to be included in blocks with a random block height. \r\n\r\nSo one could have the interval mode on and have blocks be mined e.g. every 15 seconds. \r\n\r\nAdditionally ( not included in #1087 ) **it would be great to have the ability to have pending tx be included at a random block height offset from the latest block mined.** \r\n\r\nFor example: \r\n\r\n- configure randomized tx inclusion: \r\n\r\n```javascript\r\n// this config means that every new pending tx will be assigned a \r\n// height where it will be included in the chain at random. \r\n// The height is determined by: blockHeight when tx is sent + random int between 1 and 5\r\n{ txMiningBlockHeightOffset: [1, 5] } \r\n```\r\nExample:\r\n\r\n0:00 Start block mining 15 second interval (auto-mining is turned off)\r\n\r\n0:15 block 1 is mined\r\n\r\n0:30 block 2 is mined \r\n\r\n0:31 tx-0xdeadbeef is sent and is assigned block height `lastBlockNum + randInt(1,5)` : 2 + 3 => 5\r\n\r\n0:45 block 3 is mined\r\n\r\n1:00 block 4 is mined\r\n\r\n1:15 block 5 is mined and includes tx-0xdeadbeef\r\n\r\n1:30 block 6 is mined\r\n\r\n....\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/751484264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/863191944",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065#issuecomment-863191944",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
    "id": 863191944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzE5MTk0NA==",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-17T12:20:38Z",
    "updated_at": "2021-06-17T12:20:38Z",
    "author_association": "MEMBER",
    "body": "Hardhat [2.4.0](https://github.com/nomiclabs/hardhat/releases/tag/hardhat-core-v2.4.0) now has support for setting a min gas price such that transactions below that threshold are not mined. While that's not _exactly_ what this issue is about, I think it's enough of a building block to simulate the intended behavior.\r\n\r\nI'm going to leave this open anyway because we might add this specific feature (send a transaction and indicate somehow that it should be included after 3 blocks) sometime in the future.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/863191944/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/876200894",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1065#issuecomment-876200894",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1065",
    "id": 876200894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjIwMDg5NA==",
    "user": {
      "login": "gitpusha",
      "id": 36712489,
      "node_id": "MDQ6VXNlcjM2NzEyNDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/36712489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gitpusha",
      "html_url": "https://github.com/gitpusha",
      "followers_url": "https://api.github.com/users/gitpusha/followers",
      "following_url": "https://api.github.com/users/gitpusha/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitpusha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitpusha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitpusha/subscriptions",
      "organizations_url": "https://api.github.com/users/gitpusha/orgs",
      "repos_url": "https://api.github.com/users/gitpusha/repos",
      "events_url": "https://api.github.com/users/gitpusha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitpusha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T07:27:40Z",
    "updated_at": "2021-07-08T07:27:40Z",
    "author_association": "NONE",
    "body": "Super cool! Can't wait to try it out!",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/876200894/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

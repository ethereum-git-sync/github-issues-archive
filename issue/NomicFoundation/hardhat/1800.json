{
  "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
  "repository_url": "https://api.github.com/repos/NomicFoundation/hardhat",
  "labels_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800/labels{/name}",
  "comments_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800/comments",
  "events_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800/events",
  "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800",
  "id": 971636360,
  "node_id": "MDU6SXNzdWU5NzE2MzYzNjA=",
  "number": 1800,
  "title": "hardhat.org mangles anchor navigation for plugins docs",
  "user": {
    "login": "aspiers",
    "id": 100738,
    "node_id": "MDQ6VXNlcjEwMDczOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/100738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aspiers",
    "html_url": "https://github.com/aspiers",
    "followers_url": "https://api.github.com/users/aspiers/followers",
    "following_url": "https://api.github.com/users/aspiers/following{/other_user}",
    "gists_url": "https://api.github.com/users/aspiers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aspiers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aspiers/subscriptions",
    "organizations_url": "https://api.github.com/users/aspiers/orgs",
    "repos_url": "https://api.github.com/users/aspiers/repos",
    "events_url": "https://api.github.com/users/aspiers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aspiers/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 947230177,
      "node_id": "MDU6TGFiZWw5NDcyMzAxNzc=",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/status:blocked",
      "name": "status:blocked",
      "color": "0E8A16",
      "default": false,
      "description": "Blocked by other issues or external reasons"
    },
    {
      "id": 3280394266,
      "node_id": "MDU6TGFiZWwzMjgwMzk0MjY2",
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/labels/type:website",
      "name": "type:website",
      "color": "FBCA04",
      "default": false,
      "description": "Related to the website code, not its content"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2021-08-16T11:23:10Z",
  "updated_at": "2022-12-31T09:45:54Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "This is a documentation bug specific to https://hardhat.org/plugins/hardhat-deploy.html - at the top of that plugin's documentation you will see a table of contents.  But clicking on many of the items within that TOC will fail to jump to the correct section.  For example, click on `2. hardhat node` within the TOC and nothing will happen because the target anchor link doesn't exist.\r\n\r\nThis is *not* an issue with the hardhat-deploy third-party docs.  If you visit their README, you can see the TOC navigation working fine:\r\n\r\nhttps://github.com/wighawag/hardhat-deploy/tree/master\r\n\r\nThe problem appears to be that hardhat.org is mangling the link targets.  For example, the item `2. hardhat node` has the hyperlink:\r\n\r\n- https://hardhat.org/plugins/hardhat-deploy.html#2-hardhat-node\r\n\r\nbut the link target is actually:\r\n\r\n- https://hardhat.org/plugins/hardhat-deploy.html#_2-hardhat-node\r\n\r\nso following the link fails to navigate anywhere.\r\n\r\nFor comparison, the original README has the correct anchor both in the TOC link and the target section:\r\n\r\n- https://github.com/wighawag/hardhat-deploy/tree/master#2-hardhat-node",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900074231",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-900074231",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 900074231,
    "node_id": "IC_kwDOB7jojM41pgr3",
    "user": {
      "login": "drortirosh",
      "id": 40341007,
      "node_id": "MDQ6VXNlcjQwMzQxMDA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/40341007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drortirosh",
      "html_url": "https://github.com/drortirosh",
      "followers_url": "https://api.github.com/users/drortirosh/followers",
      "following_url": "https://api.github.com/users/drortirosh/following{/other_user}",
      "gists_url": "https://api.github.com/users/drortirosh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drortirosh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drortirosh/subscriptions",
      "organizations_url": "https://api.github.com/users/drortirosh/orgs",
      "repos_url": "https://api.github.com/users/drortirosh/repos",
      "events_url": "https://api.github.com/users/drortirosh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drortirosh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-17T07:49:05Z",
    "updated_at": "2021-08-17T07:49:05Z",
    "author_association": "NONE",
    "body": "This is but a problem with the hardhat.org sure itself, but with the markdown parser of vuepress, which is slightly different than the markdown parser of github..",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900074231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900162937",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-900162937",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 900162937,
    "node_id": "IC_kwDOB7jojM41p2V5",
    "user": {
      "login": "aspiers",
      "id": 100738,
      "node_id": "MDQ6VXNlcjEwMDczOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/100738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aspiers",
      "html_url": "https://github.com/aspiers",
      "followers_url": "https://api.github.com/users/aspiers/followers",
      "following_url": "https://api.github.com/users/aspiers/following{/other_user}",
      "gists_url": "https://api.github.com/users/aspiers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aspiers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aspiers/subscriptions",
      "organizations_url": "https://api.github.com/users/aspiers/orgs",
      "repos_url": "https://api.github.com/users/aspiers/repos",
      "events_url": "https://api.github.com/users/aspiers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aspiers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-17T10:03:22Z",
    "updated_at": "2021-08-17T10:03:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the info!  I see that https://vuepress.vuejs.org/guide/markdown.html says:\r\n\r\n> Headers automatically get anchor links applied. Rendering of anchors can be configured using the `markdown.anchor` option.\r\n\r\nSo the problem seems to be that vuepress automatically generates anchors with a different algorithm to GitHub.  Looking further, [the \"Advanced Configuration\" section](https://vuepress.vuejs.org/guide/markdown.html#advanced-configuration) says:\r\n\r\n> VuePress uses `markdown-it` as the Markdown renderer. A lot of the extensions above are implemented via custom plugins. You can further customize the `markdown-it` instance using the `markdown` option in `.vuepress/config.js`\r\n\r\nand looking at `markdown-it`'s GitHub issue tracker reveals [markdown-it/markdown-it#28 (Header anchors [needs discussion])](https://github.com/markdown-it/markdown-it/issues/28) which has been open since 2015, even though there are plugins available for `markdown-it` to automatically generate header anchors.  I'm not sure which one hardhat.org uses, but https://github.com/valeriangalliat/markdown-it-anchor is one example, the author of which is [already aware of compatibility issues between different header anchor generation schemes](https://github.com/valeriangalliat/markdown-it-anchor/issues/84#issuecomment-802332897).",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900162937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900187631",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-900187631",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 900187631,
    "node_id": "IC_kwDOB7jojM41p8Xv",
    "user": {
      "login": "aspiers",
      "id": 100738,
      "node_id": "MDQ6VXNlcjEwMDczOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/100738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aspiers",
      "html_url": "https://github.com/aspiers",
      "followers_url": "https://api.github.com/users/aspiers/followers",
      "following_url": "https://api.github.com/users/aspiers/following{/other_user}",
      "gists_url": "https://api.github.com/users/aspiers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aspiers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aspiers/subscriptions",
      "organizations_url": "https://api.github.com/users/aspiers/orgs",
      "repos_url": "https://api.github.com/users/aspiers/repos",
      "events_url": "https://api.github.com/users/aspiers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aspiers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-17T10:43:09Z",
    "updated_at": "2021-08-17T10:45:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ahah!  I just noticed https://github.com/nomiclabs/hardhat/blob/master/docs/.vuepress/config.js, which configures `markdown` to use [a custom `slugify` function](https://github.com/nomiclabs/hardhat/blob/619034bfe33b96141dd504bf98dda847878259bf/docs/.vuepress/config.js#L239-L256) which wraps around this default `slugify`:\r\n\r\nhttps://github.com/nomiclabs/hardhat/blob/619034bfe33b96141dd504bf98dda847878259bf/docs/.vuepress/config.js#L1\r\n\r\nand [VuePress's Config Reference confirms that `slugify` is indeed the config option responsible for generating header anchors](https://vuepress.vuejs.org/config/#markdown-slugify).  (There also seems to be [`anchor`](https://vuepress.vuejs.org/config/#markdown-anchor), but I'm not sure what the difference is.)\r\n\r\n(It's also worth noting that [`slugify` may be used for generation of other things like file paths](https://github.com/vuejs/vuepress/issues/1134), not just header anchors.)\r\n\r\nBut I was wrong when I previously wrote:\r\n> So the problem seems to be that vuepress automatically generates anchors with a different algorithm to GitHub.\r\n\r\nOf course it doesn't matter what algorithm is used, as long as it is consistent between the generation of the links in the TOC and the generation of the anchor targets for the headers.\r\n\r\nLooking at the implementation of the default `slugify` from `@vuepress/shared-utils`, I previously thought [this was the culprit line](https://github.com/vuejs/vuepress/blob/f077f71a7e54a23998feeef3ee6190b0baff6079/packages/%40vuepress/shared-utils/src/slugify.ts#L22-L23):\r\n\r\n![image](https://user-images.githubusercontent.com/100738/129708612-80511623-2ea4-4088-9e0a-8e65d07f443d.png)\r\n\r\nbut I was wrong: the problem is not just with the `_` prefix; there appear to be multiple inconsistencies between how the TOC links are generated and how the header anchors are generated.  As an example of a different inconsistency, with a header whose text contains the `/` symbol:\r\n\r\n- https://hardhat.org/plugins/hardhat-deploy.html#hardhat-tasks-availableupdated is the link used by the TOC, but\r\n- https://hardhat.org/plugins/hardhat-deploy.html#hardhat-tasks-available-updated is the actual working anchor link\r\n\r\nI've filed https://github.com/vuejs/vuepress/issues/2913 to report this.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/900187631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/904838881",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-904838881",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 904838881,
    "node_id": "IC_kwDOB7jojM417r7h",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-24T17:31:38Z",
    "updated_at": "2021-08-24T17:31:38Z",
    "author_association": "MEMBER",
    "body": "Wow, thanks a lot @aspiers, this is incredibly useful. At some point we are going to stop rendering third-party plugins's readmes on the site, but if I'm understanding correctly this would also affect the core plugins if we add tables of contents to them (and some of them should probably have TOCs)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/904838881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/905483323",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-905483323",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 905483323,
    "node_id": "IC_kwDOB7jojM41-JQ7",
    "user": {
      "login": "aspiers",
      "id": 100738,
      "node_id": "MDQ6VXNlcjEwMDczOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/100738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aspiers",
      "html_url": "https://github.com/aspiers",
      "followers_url": "https://api.github.com/users/aspiers/followers",
      "following_url": "https://api.github.com/users/aspiers/following{/other_user}",
      "gists_url": "https://api.github.com/users/aspiers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aspiers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aspiers/subscriptions",
      "organizations_url": "https://api.github.com/users/aspiers/orgs",
      "repos_url": "https://api.github.com/users/aspiers/repos",
      "events_url": "https://api.github.com/users/aspiers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aspiers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-25T13:04:35Z",
    "updated_at": "2021-08-25T13:04:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah I don't think this is specific to third-party plugins - you're probably right that we'd see the same problem with TOCs on any page within the site's VuePress.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/905483323/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1201364781",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-1201364781",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 1201364781,
    "node_id": "IC_kwDOB7jojM5Hm18t",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-08-01T15:37:00Z",
    "updated_at": "2022-08-01T15:37:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was marked as stale because it didn't have any activity in the last 30 days. If you think it's still relevant, please leave a comment indicating so. Otherwise, it will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1201364781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1207905645",
    "html_url": "https://github.com/NomicFoundation/hardhat/issues/1800#issuecomment-1207905645",
    "issue_url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/1800",
    "id": 1207905645,
    "node_id": "IC_kwDOB7jojM5H_y1t",
    "user": {
      "login": "fvictorio",
      "id": 417134,
      "node_id": "MDQ6VXNlcjQxNzEzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417134?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fvictorio",
      "html_url": "https://github.com/fvictorio",
      "followers_url": "https://api.github.com/users/fvictorio/followers",
      "following_url": "https://api.github.com/users/fvictorio/following{/other_user}",
      "gists_url": "https://api.github.com/users/fvictorio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fvictorio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fvictorio/subscriptions",
      "organizations_url": "https://api.github.com/users/fvictorio/orgs",
      "repos_url": "https://api.github.com/users/fvictorio/repos",
      "events_url": "https://api.github.com/users/fvictorio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fvictorio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-08T09:49:13Z",
    "updated_at": "2022-08-08T09:49:13Z",
    "author_association": "MEMBER",
    "body": "@aspiers I think this is no longer relevant because we no longer show third-party plugins under `hardhat.org` (we just redirect to the npm page). Can you confirm if this is the case?\r\n\r\n(The reason we did this change is to prevent users from thinking that these are official plugins.)",
    "reactions": {
      "url": "https://api.github.com/repos/NomicFoundation/hardhat/issues/comments/1207905645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

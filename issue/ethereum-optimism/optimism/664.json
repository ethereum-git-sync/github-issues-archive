{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/664",
  "id": 869445969,
  "node_id": "MDU6SXNzdWU4Njk0NDU5Njk=",
  "number": 664,
  "title": "`estimateGas` reverts, but the transaction succeeds with a hardcoded `gasLimit`",
  "user": {
    "login": "platocrat",
    "id": 37757724,
    "node_id": "MDQ6VXNlcjM3NzU3NzI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/platocrat",
    "html_url": "https://github.com/platocrat",
    "followers_url": "https://api.github.com/users/platocrat/followers",
    "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
    "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
    "organizations_url": "https://api.github.com/users/platocrat/orgs",
    "repos_url": "https://api.github.com/users/platocrat/repos",
    "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/platocrat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 2981541772,
      "node_id": "MDU6TGFiZWwyOTgxNTQxNzcy",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-confirmed",
      "name": "P-confirmed",
      "color": "BFD4F2",
      "default": false,
      "description": "A confirmed bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 29,
  "created_at": "2021-04-28T03:06:03Z",
  "updated_at": "2021-05-12T23:39:32Z",
  "closed_at": "2021-05-12T23:39:32Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nIn ChainLink's [LinkToken](https://github.com/smartcontractkit/LinkToken) integration tests, 3/7 tests fail. Those that do fail involve contract calls that should revert. However, instead of a revert message being returned, the familiar `cannot estimate gas` error is thrown.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone https://github.com/smartcontractkit/LinkToken.git`\r\n2. `git checkout feature/ovm-integration-upstream-changes`\r\n3. Start the docker containers under `optimism/ops` to start a local OE network\r\n3. Back in the LinkToken project directory, run:  `yarn && yarn setup && yarn test:integration../test/v0.7/bridge/optimism/OVM_L2ERC20Gateway.test.ts`\r\n4. See the familiar error:\r\n```\r\nError: cannot estimate gas; transaction may fail or may require manual gas limit\r\n```\r\n\r\n**Expected behavior**\r\nA transaction that fails `estimateGas` should not succeed with a hardcoded `gasLimit`\r\n\r\n**Related issues**\r\n#474 \r\n#543 ",
  "closed_by": {
    "login": "snario",
    "id": 1933029,
    "node_id": "MDQ6VXNlcjE5MzMwMjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/snario",
    "html_url": "https://github.com/snario",
    "followers_url": "https://api.github.com/users/snario/followers",
    "following_url": "https://api.github.com/users/snario/following{/other_user}",
    "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
    "organizations_url": "https://api.github.com/users/snario/orgs",
    "repos_url": "https://api.github.com/users/snario/repos",
    "events_url": "https://api.github.com/users/snario/events{/privacy}",
    "received_events_url": "https://api.github.com/users/snario/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828114979",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828114979",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828114979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODExNDk3OQ==",
    "user": {
      "login": "transmissions11",
      "id": 26209401,
      "node_id": "MDQ6VXNlcjI2MjA5NDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26209401?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/transmissions11",
      "html_url": "https://github.com/transmissions11",
      "followers_url": "https://api.github.com/users/transmissions11/followers",
      "following_url": "https://api.github.com/users/transmissions11/following{/other_user}",
      "gists_url": "https://api.github.com/users/transmissions11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/transmissions11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/transmissions11/subscriptions",
      "organizations_url": "https://api.github.com/users/transmissions11/orgs",
      "repos_url": "https://api.github.com/users/transmissions11/repos",
      "events_url": "https://api.github.com/users/transmissions11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/transmissions11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T03:29:46Z",
    "updated_at": "2021-04-28T03:29:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hasn't there been an issue up for this for a while?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828114979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828118118",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828118118",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828118118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODExODExOA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T03:39:47Z",
    "updated_at": "2021-04-28T03:39:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hasn't there been an issue up for this for a while?\r\n\r\nyes. #474 is one related issue and #543 is perhaps another",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828118118/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828523069",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828523069",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828523069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODUyMzA2OQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T14:55:01Z",
    "updated_at": "2021-04-28T14:55:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho closing since this is a duplicate of #474 ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828523069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828710935",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828710935",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828710935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODcxMDkzNQ==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T19:11:42Z",
    "updated_at": "2021-04-28T19:11:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platocrat The expected behavior listed here isn't actually right. Chainlink is getting `UNPREDICTABLE_GAS_LIMIT` when trying to `estimateGas` but the tx succeeds with a static gasLimit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828710935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828718660",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828718660",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828718660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODcxODY2MA==",
    "user": {
      "login": "transmissions11",
      "id": 26209401,
      "node_id": "MDQ6VXNlcjI2MjA5NDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26209401?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/transmissions11",
      "html_url": "https://github.com/transmissions11",
      "followers_url": "https://api.github.com/users/transmissions11/followers",
      "following_url": "https://api.github.com/users/transmissions11/following{/other_user}",
      "gists_url": "https://api.github.com/users/transmissions11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/transmissions11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/transmissions11/subscriptions",
      "organizations_url": "https://api.github.com/users/transmissions11/orgs",
      "repos_url": "https://api.github.com/users/transmissions11/repos",
      "events_url": "https://api.github.com/users/transmissions11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/transmissions11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T19:24:49Z",
    "updated_at": "2021-04-28T19:46:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @platocrat The expected behavior listed here isn't actually right. Chainlink is getting `UNPREDICTABLE_GAS_LIMIT` when trying to `estimateGas` but the tx succeeds with a static gasLimit.\r\n\r\n@K-Ho I've noticed that txs always succeed with a static gas limit actually...\r\n\r\nHere's a reproduction branch: https://github.com/Rari-Capital/nova/tree/gasLimitNoRevertRepro",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828718660/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828723823",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828723823",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828723823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODcyMzgyMw==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T19:33:50Z",
    "updated_at": "2021-04-28T19:33:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho just to confirm that this really is the same issue that we see for contract calls that revert, here are the full error messages for the 2 Waffle-based tests that fail with this error:\r\n\r\n<img width=\"941\" alt=\"Screen Shot 2021-04-28 at 2 27 23 PM\" src=\"https://user-images.githubusercontent.com/37757724/116461427-daa25b00-a82d-11eb-9672-10f911a9608f.png\">\r\n\r\nI highlighted the `code=UNPREDICTABLE_GAS_LIMIT` field, which you can see appears in both error messages.\r\n\r\n**NOTE**: I can confirm that specifying the gas limit to `8999999` for the calls in these two tests does makes the txs succeed. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828723823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828753455",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-828753455",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 828753455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODc1MzQ1NQ==",
    "user": {
      "login": "snario",
      "id": 1933029,
      "node_id": "MDQ6VXNlcjE5MzMwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snario",
      "html_url": "https://github.com/snario",
      "followers_url": "https://api.github.com/users/snario/followers",
      "following_url": "https://api.github.com/users/snario/following{/other_user}",
      "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
      "organizations_url": "https://api.github.com/users/snario/orgs",
      "repos_url": "https://api.github.com/users/snario/repos",
      "events_url": "https://api.github.com/users/snario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T20:24:10Z",
    "updated_at": "2021-04-28T20:24:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is **not** a duplicate of #474. That issue describes “estimateGas does not provide the revert reason” and this issue describes: “estimateGas reverts, but the transaction succeeds with a hardcoded gasLimit” ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828753455/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829780262",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-829780262",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 829780262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTc4MDI2Mg==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-30T03:28:30Z",
    "updated_at": "2021-04-30T03:28:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe the problem is with `simulateMessage()`. It is the main difference between a regular transaction and `eth_call`, `eth_estimateGas` uses `eth_call`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829780262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831433480",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831433480",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831433480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTQzMzQ4MA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T18:07:28Z",
    "updated_at": "2021-05-03T18:08:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tynes @snario I re-ran the integration test for the hardhat example in the monorepo and get an odd type error.\r\n\r\nThe error is below:\r\n```\r\n   Error: invalid BigNumber string (argument=\"value\", value=\"auto\", code=INVALID_ARGUMENT, version=bignumber/5.1.0)\r\n      at Logger.makeError (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/logger/src.ts/index.ts:205:28)\r\n      at Logger.throwError (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/logger/src.ts/index.ts:217:20)\r\n      at Logger.throwArgumentError (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/logger/src.ts/index.ts:221:21)\r\n      at Function.BigNumber.from (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/bignumber/src.ts/bignumber.ts:240:27)\r\n      at JsonRpcProvider.provider.getGasPrice (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/packages/hardhat-ovm/src/index.ts:225:26)\r\n      at Wallet.<anonymous> (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/abstract-signer/src.ts/index.ts:139:36)\r\n      at step (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/abstract-signer/lib/index.js:48:23)\r\n      at Object.next (/Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/abstract-signer/lib/index.js:29:53)\r\n      at /Users/platocrat/Documents/GitHub/OptimismPBC/Optimism/optimism/node_modules/@ethersproject/abstract-signer/lib/index.js:23:71\r\n      at new Promise (<anonymous>)\r\n```\r\n\r\nThe error points to [`optimism/packages/hardhat-ovm/src/index.ts:225:26`](https://github.com/ethereum-optimism/optimism/blob/562266063f6bea20fdb94fbf0b4ebd3767e678e7/packages/hardhat-ovm/src/index.ts#L226).\r\nNote that this error is received after pulling and building @tynes's branch from [ethereum-optimism/optimism/pull/721](https://github.com/ethereum-optimism/optimism/pull/721).\r\n\r\n@K-Ho From this new error shown above, I believe [ethereum-optimism/optimism/pull/721](https://github.com/ethereum-optimism/optimism/pull/721) should warrant a separate GH issue to document this error in `hardhat-ovm`\r\nI also think we can conclude that the original issue here is resolved as per Kevin's response earlier:\r\n\r\n> @platocrat The expected behavior listed here isn't actually right. Chainlink is getting `UNPREDICTABLE_GAS_LIMIT` when trying to `estimateGas` but the tx succeeds with a static gasLimit.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831433480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831463387",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831463387",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831463387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTQ2MzM4Nw==",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T18:56:53Z",
    "updated_at": "2021-05-03T18:57:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platocrat this error you got is because there is no `gasPrice: 0` parameter in your hardhat config [here](https://github.com/smartcontractkit/LinkToken/blob/feature/ovm-integration-upstream-changes/hardhat.config.ts#L39), whereas the examples [now all use it](https://github.com/ethereum-optimism/optimism/blob/master/examples/hardhat/hardhat.config.js#L15-L18).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831463387/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831519835",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831519835",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831519835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTUxOTgzNQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T20:40:02Z",
    "updated_at": "2021-05-03T20:40:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm confirming that this issue is fixed by [ethereum-optimism/optimism/pull/721](https://github.com/ethereum-optimism/optimism/pull/721)!!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831519835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831546995",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831546995",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831546995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTU0Njk5NQ==",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T21:28:03Z",
    "updated_at": "2021-05-03T21:28:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "What's the exact fix by 721? Do you get proper revert messages?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831546995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831614225",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831614225",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831614225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTYxNDIyNQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-04T00:20:35Z",
    "updated_at": "2021-05-04T00:20:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> What's the exact fix by 721? Do you get proper revert messages?\r\n\r\nThe fix appears to be that we no longer need to specify a hardcoded `gasLimit`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831614225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831616135",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831616135",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831616135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTYxNjEzNQ==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-04T00:26:03Z",
    "updated_at": "2021-05-04T00:26:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The fix appears to be that we no longer need to specify a hardcoded gasLimit.\r\n\r\nThis is the result of the fix\r\n\r\n> What's the exact fix by 721? Do you get proper revert messages?\r\n\r\nThe problem was that the interface between userland and the system contracts was not defined. `ExecutionManager.run` returned a different ABI encoded returndata compared to `ExecutionManager.simulateMessage`. The returndata was parsed by simply slicing bytes which worked when the returndata was a single type but then broke when it was multiple types.\r\n\r\n`eth_estimateGas` calls `eth_call` under the hood a bunch of times, so the problem was also present in `eth_call` - basically the return value of the `eth_call` wouldn't be deserialized correctly by `l2geth` and it would interpret the returndata as indicating that the transaction reverted when it actually didn't. This would result in the message `Error: cannot estimate gas; transaction may fail or may require manual gas limit` because `l2geth` thought that the tx would revert",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831616135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831635508",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831635508",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831635508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTYzNTUwOA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-04T01:34:07Z",
    "updated_at": "2021-05-10T19:46:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho @tynes @snario\r\nRe-ran integration tests of ChainLink's old LinkToken branch `feature/ovm-integration-upstream-changes` using a newly fetched and rebuilt version of the `optimism/ops` containers.\r\n\r\nThe tests that are supposed to revert still revert with the same `UNPREDICTABLE_GAS_LIMIT` error:\r\n```\r\nError: cannot estimate gas; transaction may fail or may require manual gas limit\r\n```\r\n\r\nI also confirmed that adding a hardcoded gasLimit of `8999999` is still a workaround.\r\n\r\n## Update\r\n1. Running the tests again _without_ specifying a hardcoded `gasLimit` _nor_ `gasPrice` results in the `UNPREDICTABLE_GAS_LIMIT` error _in all tests_.\r\n2. Adding a hardcoded `gasPrice: 0` to all contract calls still results in all tests failing with the error above.\r\n3. Finally, adding a hardcoded `gasPrice: 0` _and_  `gasLimit: 8999999` to all contract calls results in the familiar error described in [ethereum-optimism/optimism/issues/717](https://github.com/ethereum-optimism/optimism/issues/717) in 2/4 of the failing tests (the other 2 that fail are dependent on the first succeeding.\r\n\r\nWhat's odd about point 3 is that only 3/7 tests pass, and _of those that pass_, **they involve contract calls that revert**, which is the opposite of what was happening previously. \r\nPreviously, _4/7 tests were passing_, but _those that were failing_ involved contract calls that revert.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831635508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831659086",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-831659086",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 831659086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTY1OTA4Ng==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-04T03:13:37Z",
    "updated_at": "2021-05-04T03:13:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platocrat - are you still seeing this `estimateGas` error with the Waffle ERC20 Example tests? If so, I think the next step would be to comment out parts of execution until we nail down the exact section that causes `estimateGas` to fail",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/831659086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/832293814",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-832293814",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 832293814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMjI5MzgxNA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-04T22:39:08Z",
    "updated_at": "2021-05-04T22:39:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Regarding https://github.com/ethereum-optimism/optimism/issues/664 and https://github.com/ethereum-optimism/optimism/pull/721:\r\n1. `l1-l2-deposit-withdrawal` outside of monorepo (because of current issue with installing `@eth-optimism/contracts` as a dep when inside monorepo)\r\n   a. I ran the `optimism/ops` containers from the `l2geth/fix-returndata` branch (from [pull/721](https://github.com/ethereum-optimism/optimism/pull/721)) and ran the `l1-l2-deposit-withdrawal script`.\r\n   b. Without specifying `gasPrice: 0` nor `gasLimit: 8999999`, none of the transactions in the `example.js` script will be submitted successfully.\r\n   c. Specifying only `gasPrice: 0` in every contract call results in the errors thrown, as in [issue/664](https://github.com/ethereum-optimism/optimism/issues/664), for every call\r\n   d. Specifying both `gasPrice: 0` nor `gasLimit: 8999999` results in the script working as expected, all transactions are submitted successfully\r\n2. `Waffle-ERC20-Example` within monorepo\r\n   e. [Tests] As @K-Ho pointed out when running the Waffle tests in `optimism/examples/waffle`, all tests pass without any changes.\r\n   f. This means that we do NOT need to hardcode a `gasPrice` nor `gasLimit` anywhere\r\n3. `Truffle-ERC20-Example` outside of monorepo (no concerning reason, just quicker for me -- I believe we can now finalize https://github.com/ethereum-optimism/optimism/pull/666 ):\r\n   g. [Tests] TL;DR is that tests fail ONLY if `gasPrice: 0` is not set everywhere, including in all  migrations scripts, when running tests\r\n   h. [Deployments] Running migrations is successful after setting`gasPrice: 0` in migrations file(s).\r\n4. `optimism-tutorial` within monorepo\r\n   i. [Tests] Will only pass if we set `gasPrice: 0` in the `hardhat.config.*`\r\n   j. [Deployments] Successful even WITHOUT a hardcoded `gasLimit` and `gasPrice`\r\n\r\ncc: @snario @gakonst @K-Ho @tynes ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/832293814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837198854",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837198854",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837198854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzE5ODg1NA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T19:28:51Z",
    "updated_at": "2021-05-10T21:34:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho @snario \r\nWas able to repro this error in a couple of ChainLink's integration tests.\r\n\r\nRepro case:\r\n1. Git clone LinkToken: `git clone https://github.com/smartcontractkit/LinkToken.git`\r\n2. Checkout branch: `git checkout feature/oe-token`\r\n3. Install deps: `yarn`\r\n4. Clean setup: `yarn clean && yarn setup`\r\n5. Comment out line 8 in `test/helpers/optimism/index.ts`\r\n5. Run tests: `yarn test --network optimism ./test/v0.7/bridge/token/LinkTokenChild.test.ts`\r\n6. See error in 2/3 tests\r\n\r\n<img width=\"926\" alt=\"Screen Shot 2021-05-10 at 2 28 14 PM\" src=\"https://user-images.githubusercontent.com/37757724/117714002-f5fd5680-b19b-11eb-901b-068d19cc2e5c.png\">",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837198854/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837309666",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837309666",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837309666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzMwOTY2Ng==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T20:43:21Z",
    "updated_at": "2021-05-10T20:43:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platocrat I'll take a look at this in an hour or so. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837309666/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837375550",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837375550",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837375550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzM3NTU1MA==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T21:29:15Z",
    "updated_at": "2021-05-10T21:37:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "~~@platocrat I'm unable to reproduce this on `v0.3.0-rc`. We might've fixed the problem in that branch.~~\r\n\r\nI was able to reproduce on `v0.3.0-rc` by commenting out this line: https://github.com/smartcontractkit/LinkToken/blob/8731d538f1290ac6bf6bdcd6a5aa92ae8a8125d5/test/helpers/optimism/index.ts#L8",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837375550/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837383946",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837383946",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837383946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzM4Mzk0Ng==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T21:35:46Z",
    "updated_at": "2021-05-10T21:36:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "You need to comment out line 8 in `LinkToken/test/helpers/optimism/index.ts`",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837383946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837398698",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837398698",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837398698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzM5ODY5OA==",
    "user": {
      "login": "snario",
      "id": 1933029,
      "node_id": "MDQ6VXNlcjE5MzMwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snario",
      "html_url": "https://github.com/snario",
      "followers_url": "https://api.github.com/users/snario/followers",
      "following_url": "https://api.github.com/users/snario/following{/other_user}",
      "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
      "organizations_url": "https://api.github.com/users/snario/orgs",
      "repos_url": "https://api.github.com/users/snario/repos",
      "events_url": "https://api.github.com/users/snario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T21:48:43Z",
    "updated_at": "2021-05-10T21:48:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "The above ChainLink test failure seems unrelated to what this Github issue was created for. ChainLink is seeing https://github.com/ethereum-optimism/optimism/issues/474#ref-issue-860562459 I believe — revert reasons not propagating up correctly. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837398698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837398788",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837398788",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837398788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzM5ODc4OA==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T21:48:49Z",
    "updated_at": "2021-05-10T21:48:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to fix this problem by using `v0.3.0` (now merged into master!) and changing the tests as follows:\r\n\r\n1. Remove https://github.com/smartcontractkit/LinkToken/blob/8731d538f1290ac6bf6bdcd6a5aa92ae8a8125d5/test/helpers/optimism/index.ts#L8\r\n2. Modify tests:\r\n\r\n```diff\r\n     it('can NOT deposit without  access (gateway role)', async () => {\r\n-      const depositTx = await l2Token.deposit(oe.l2Wallet.address, 100, h.optimism.TX_OVERRIDES_OE_BUG)\r\n-      // TODO: fetch revert reason\r\n-      // revert: LinkTokenChild: missing role\r\n-      await h.txRevert(depositTx.wait())\r\n+      await expect(\r\n+        l2Token.deposit(oe.l2Wallet.address, 100, h.optimism.TX_OVERRIDES_OE_BUG)\r\n+      ).to.be.revertedWith('No access')\r\n     })\r\n     it('owner can migrate to a new gateway', async () => {\r\n@@ -221,10 +220,11 @@ describe(`LinkTokenChild ${Versions.v0_7}`, () => {\r\n       const removeAccessTx = await l2Token.removeAccess(owner.address)\r\n       await removeAccessTx.wait()\r\n       // Owner deposit fails\r\n-      const depositTx = await l2Token.deposit(owner.address, 100, h.optimism.TX_OVERRIDES_OE_BUG)\r\n       // TODO: fetch revert reason\r\n       // revert: LinkTokenChild: missing role\r\n-      await h.txRevert(depositTx.wait())\r\n+      await expect(\r\n+        l2Token.deposit(owner.address, 100, h.optimism.TX_OVERRIDES_OE_BUG)\r\n+      ).to.be.revertedWith('No access')\r\n       // TODO: owner renounce ownership\r\n     })\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837398788/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837403814",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837403814",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837403814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzQwMzgxNA==",
    "user": {
      "login": "snario",
      "id": 1933029,
      "node_id": "MDQ6VXNlcjE5MzMwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snario",
      "html_url": "https://github.com/snario",
      "followers_url": "https://api.github.com/users/snario/followers",
      "following_url": "https://api.github.com/users/snario/following{/other_user}",
      "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
      "organizations_url": "https://api.github.com/users/snario/orgs",
      "repos_url": "https://api.github.com/users/snario/repos",
      "events_url": "https://api.github.com/users/snario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T21:54:01Z",
    "updated_at": "2021-05-10T21:54:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm going to close this issue. If something from the above conversation is still unclear, let's open a new issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837403814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837966691",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-837966691",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 837966691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzk2NjY5MQ==",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T07:12:08Z",
    "updated_at": "2021-05-11T07:12:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Of note, Kelvin's approach above is the correct way to do it in JS. The way the tests were written before, they'd fail even in EVM mode because you're awaiting a failing transaction with an overridden gas limit.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/837966691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840013280",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-840013280",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 840013280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDAxMzI4MA==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T18:41:54Z",
    "updated_at": "2021-05-12T18:41:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "re-opening this issue - here's Chainlink still seeing this issue appear:\r\nThis PR is green with static gasLimit: https://github.com/smartcontractkit/LinkToken/pull/33\r\nThis PR is red with NO static gasLimit: https://github.com/smartcontractkit/LinkToken/pull/37 (just this one change)\r\nThis is the failure: https://github.com/smartcontractkit/LinkToken/runs/2569267264?check_suite_focus=true (UNPREDICTABLE_GAS_LIMIT)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840013280/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840056439",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-840056439",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 840056439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDA1NjQzOQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T19:56:08Z",
    "updated_at": "2021-05-12T19:56:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to repro https://github.com/smartcontractkit/LinkToken/pull/37 locally.\r\nGoing to inspect further",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840056439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840083147",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-840083147",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 840083147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDA4MzE0Nw==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T20:42:01Z",
    "updated_at": "2021-05-12T20:44:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "I resolved the `UNPREDICTABLE_GAS_LIMIT` errors in the two tests in https://github.com/smartcontractkit/LinkToken/pull/37 using Kelvin's approach earlier above:\r\n\r\n```diff\r\n      it('can NOT deposit without  access (gateway role)', async () => {\r\n-      const mintTx = await l2Token.mint(oe.l2Wallet.address, 100, optimism.TX_OVERRIDES_BUG)\r\n-      // TODO: fetch revert reason\r\n-      // revert: 'No access'\r\n-      await h.txRevert(mintTx.wait())\r\n+      const mintTx = l2Token.mint(oe.l2Wallet.address, 100, optimism.TX_OVERRIDES_BUG)\r\n+      await expect(mintTx).to.be.revertedWith('No access')\r\n})\r\n      it('owner can migrate to a new gateway', async () => {\r\n-      const mintTx = await l2Token.mint(owner.address, 100, optimism.TX_OVERRIDES_BUG)\r\n-      // TODO: fetch revert reason\r\n-      // revert: 'No access'\r\n-      await h.txRevert(mintTx.wait())\r\n+      const mintTx = l2Token.mint(owner.address, 100, optimism.TX_OVERRIDES_BUG)\r\n+      await expect(mintTx).to.be.revertedWith('No access')\r\n})\r\n```\r\n\r\n**Note**\r\nThe above changes were communicated to @krebernisak in the #optimism-chainlink channel in Synthetix's discord",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840083147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840171407",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/664#issuecomment-840171407",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/664",
    "id": 840171407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDE3MTQwNw==",
    "user": {
      "login": "snario",
      "id": 1933029,
      "node_id": "MDQ6VXNlcjE5MzMwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/snario",
      "html_url": "https://github.com/snario",
      "followers_url": "https://api.github.com/users/snario/followers",
      "following_url": "https://api.github.com/users/snario/following{/other_user}",
      "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
      "organizations_url": "https://api.github.com/users/snario/orgs",
      "repos_url": "https://api.github.com/users/snario/repos",
      "events_url": "https://api.github.com/users/snario/events{/privacy}",
      "received_events_url": "https://api.github.com/users/snario/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-12T23:39:32Z",
    "updated_at": "2021-05-12T23:39:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "As @gakonst mentioned, it looks like the test was just written incorrectly.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840171407/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

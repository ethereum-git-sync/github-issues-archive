{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/7512",
  "id": 1923105909,
  "node_id": "I_kwDODjvEJM5yoER1",
  "number": 7512,
  "title": "Check the sanity of `op-batcher` CLI flags",
  "user": {
    "login": "seungjulee",
    "id": 4685781,
    "node_id": "MDQ6VXNlcjQ2ODU3ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4685781?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/seungjulee",
    "html_url": "https://github.com/seungjulee",
    "followers_url": "https://api.github.com/users/seungjulee/followers",
    "following_url": "https://api.github.com/users/seungjulee/following{/other_user}",
    "gists_url": "https://api.github.com/users/seungjulee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/seungjulee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/seungjulee/subscriptions",
    "organizations_url": "https://api.github.com/users/seungjulee/orgs",
    "repos_url": "https://api.github.com/users/seungjulee/repos",
    "events_url": "https://api.github.com/users/seungjulee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/seungjulee/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-10-03T01:24:46Z",
  "updated_at": "2023-10-03T01:24:46Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently `op-batcher` does not `Check()` the sanity of the cli flags that are loaded directly. The below is the complete list.  \r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/0025fff177d656fc14d64c174eef3b69a03413dc/op-batcher/batcher/config.go#L118-L128 \r\n\r\nNot checking the CLI inputs at the program start could be problematic even though most of these values are checked by each module that depends on these inputs. Someone can run the program with unexpected CLI input flags, which can run the program in unexpected way. Checking these parameters will also enforce us to explicitly define the behavior of the program which has been loosely defined.   \r\n\r\n**Describe the solution you'd like**\r\nWe should check the sanity of the above input like the example below. \r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/0025fff177d656fc14d64c174eef3b69a03413dc/op-node/p2p/cli/load_config.go#L43-L279\r\n\r\nThe check should be done as a part of `Check()` for the config below.\r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/0025fff177d656fc14d64c174eef3b69a03413dc/op-batcher/batcher/config.go#L98-L112\r\n\r\n- [ ] For int/duration values, we should figure out the appropriate min and max for each flags. Check if the modules that uses these inputs already check the expected number on instantiation. If not, consult with people who have context on this as this can shift the behavior of the product. \r\n- [ ] For RPC URL values, check if the URL is valid. \r\n- [ ] While visiting this issue, it would be nice to audit if other CLI programs on this monorepo are checking the sanity of inputs. \r\n\r\n**Describe alternatives you've considered**\r\n\r\n**Additional context**\r\n\r\nThis issue was created as a suggestion from https://github.com/ethereum-optimism/optimism/pull/7482#discussion_r1343035478\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7512/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

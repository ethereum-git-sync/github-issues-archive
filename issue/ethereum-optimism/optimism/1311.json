{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311",
  "id": 960473826,
  "node_id": "MDU6SXNzdWU5NjA0NzM4MjY=",
  "number": 1311,
  "title": "Bug:  `ops` tool does not build on a user's Intel Mac ",
  "user": {
    "login": "platocrat",
    "id": 37757724,
    "node_id": "MDQ6VXNlcjM3NzU3NzI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/platocrat",
    "html_url": "https://github.com/platocrat",
    "followers_url": "https://api.github.com/users/platocrat/followers",
    "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
    "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
    "organizations_url": "https://api.github.com/users/platocrat/orgs",
    "repos_url": "https://api.github.com/users/platocrat/repos",
    "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/platocrat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 2907832834,
      "node_id": "MDU6TGFiZWwyOTA3ODMyODM0",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/M-ops",
      "name": "M-ops",
      "color": "FBCA04",
      "default": false,
      "description": "Module: ops"
    },
    {
      "id": 2930018676,
      "node_id": "MDU6TGFiZWwyOTMwMDE4Njc2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-unconfirmed",
      "name": "P-unconfirmed",
      "color": "BFD4F2",
      "default": false,
      "description": "Issue might be valid, but itâ€™s not yet confirmed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-08-04T13:42:42Z",
  "updated_at": "2022-03-27T17:05:56Z",
  "closed_at": "2022-03-27T17:05:56Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\nThis bug was surfaced by @nicholaspai\r\n\r\n**Describe the bug**\r\n@nicholaspai runs an Intel Mac and is experiencing an error when attempting to start the docker containers from the `ops` tool.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Git clone monorepo:  `git clone https://github.com/ethereum-optimism/optimism.git`\r\n2. `yarn && yarn build`\r\n3. `cd ops && docker-compose build && docker-compose up`\r\n4. See error:\r\n```\r\npanic: runtime error: index out of range [0] with length 0\r\n\r\ngoroutine 78 [running]:\r\ngithub.com/docker/compose-cli/pkg/compose.(*convergence).updateProject(0xc00000d098, 0xc000262460, 0xc0000c8e40, 0xa)\r\n    github.com/docker/compose-cli/pkg/compose/convergence.go:114 +0xfcf\r\ngithub.com/docker/compose-cli/pkg/compose.(*convergence).apply.func1(0x20d6548, 0xc0005670e0, 0xc0000c8e40, 0xa, 0x1f2d4e5, 0x8)\r\n    github.com/docker/compose-cli/pkg/compose/convergence.go:104 +0x292\r\ngithub.com/docker/compose-cli/pkg/compose.run.func1(0x0, 0x0)\r\n    github.com/docker/compose-cli/pkg/compose/dependencies.go:102 +0xa3\r\ngolang.org/x/sync/errgroup.(*Group).Go.func1(0xc000255aa0, 0xc000466600)\r\n    golang.org/x/sync@v0.0.0-20210220032951-036812b2e83c/errgroup/errgroup.go:57 +0x59\r\ncreated by golang.org/x/sync/errgroup.(*Group).Go\r\n    golang.org/x/sync@v0.0.0-20210220032951-036812b2e83c/errgroup/errgroup.go:54 +0x66\r\n```\r\n\r\n**Expected behavior**\r\nSince I also run an Intel Mac and experienced no issues when following the repro steps above, we expect for there to be no issues when starting/running the docker containers in the `ops` tool.\r\n\r\n**System Specs:**\r\n - OS: Intel Mac\r\n\r\n**Additional context**\r\n[Link to the first error of the discussion on Discord](https://discord.com/channels/667044843901681675/676980316518481930/872193638069837835)\r\n",
  "closed_by": {
    "login": "smartcontracts",
    "id": 14298799,
    "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/smartcontracts",
    "html_url": "https://github.com/smartcontracts",
    "followers_url": "https://api.github.com/users/smartcontracts/followers",
    "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
    "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
    "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
    "repos_url": "https://api.github.com/users/smartcontracts/repos",
    "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/892670886",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311#issuecomment-892670886",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
    "id": 892670886,
    "node_id": "IC_kwDODjvEJM41NROm",
    "user": {
      "login": "nicholaspai",
      "id": 9457025,
      "node_id": "MDQ6VXNlcjk0NTcwMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9457025?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicholaspai",
      "html_url": "https://github.com/nicholaspai",
      "followers_url": "https://api.github.com/users/nicholaspai/followers",
      "following_url": "https://api.github.com/users/nicholaspai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicholaspai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicholaspai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicholaspai/subscriptions",
      "organizations_url": "https://api.github.com/users/nicholaspai/orgs",
      "repos_url": "https://api.github.com/users/nicholaspai/repos",
      "events_url": "https://api.github.com/users/nicholaspai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicholaspai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T13:44:17Z",
    "updated_at": "2021-08-04T13:44:17Z",
    "author_association": "NONE",
    "body": "Thanks @platocrat ! Small correction:\r\n\r\n> After advising him to clear his docker cache with docker system prune -a, he now experiences the error shown below in the repro steps.\r\n\r\nI  ran the reproduction steps and actually just saw the same error originally described `panic: runtime error: index out of range [0] with length 0`.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/892670886/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/892672923",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311#issuecomment-892672923",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
    "id": 892672923,
    "node_id": "IC_kwDODjvEJM41NRub",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T13:46:51Z",
    "updated_at": "2021-08-04T13:46:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Thanks @platocrat ! Small correction:\r\n> \r\n> > After advising him to clear his docker cache with docker system prune -a, he now experiences the error shown below in the repro steps.\r\n> \r\n> I ran the reproduction steps and actually just saw the same error originally described `panic: runtime error: index out of range [0] with length 0`.\r\n\r\nI apologize for the mistake. Updated the issue to reference only first error :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/892672923/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/961360891",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311#issuecomment-961360891",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
    "id": 961360891,
    "node_id": "IC_kwDODjvEJM45TTP7",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T19:42:17Z",
    "updated_at": "2021-11-04T19:42:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "We really need to dedicate some time to fixing any docker issues with macos. Luckily, most people won't have to run the `ops` setup anymore after OVM 2.0.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/961360891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1079476198",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311#issuecomment-1079476198",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
    "id": 1079476198,
    "node_id": "IC_kwDODjvEJM5AV3_m",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-25T22:03:54Z",
    "updated_at": "2022-03-25T22:03:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmmm this issue is really old, I'm gonna try building on my Intel Mac and see if I can still reproduce. If I can't reproduce, I'm probably just gonna close this issue and we can either re-open or create a new issue if someone else runs into the same problem down the line.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1079476198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1079971604",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1311#issuecomment-1079971604",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1311",
    "id": 1079971604,
    "node_id": "IC_kwDODjvEJM5AXw8U",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-27T17:05:56Z",
    "updated_at": "2022-03-27T17:05:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to build fine on my intel mac. Going to close this issue. If someone else runs into this issue again in the future, we can re-open.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1079971604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

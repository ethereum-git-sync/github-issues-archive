{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/8705",
  "id": 2051127991,
  "node_id": "I_kwDODjvEJM56Qbq3",
  "number": 8705,
  "title": "CI can't generate coverage",
  "user": {
    "login": "0xfuturistic",
    "id": 105765223,
    "node_id": "U_kgDOBk3ZZw",
    "avatar_url": "https://avatars.githubusercontent.com/u/105765223?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xfuturistic",
    "html_url": "https://github.com/0xfuturistic",
    "followers_url": "https://api.github.com/users/0xfuturistic/followers",
    "following_url": "https://api.github.com/users/0xfuturistic/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xfuturistic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xfuturistic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xfuturistic/subscriptions",
    "organizations_url": "https://api.github.com/users/0xfuturistic/orgs",
    "repos_url": "https://api.github.com/users/0xfuturistic/repos",
    "events_url": "https://api.github.com/users/0xfuturistic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xfuturistic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: bugs"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-12-20T19:13:55Z",
  "updated_at": "2023-12-20T21:28:15Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "CI seems unable to generate coverage as part of the step `contracts-bedrock-coverage`. This is important because the step is responsible for generating and uploading the coverage to Codecov, which means that changes, such as new tests, may not make it to Codecov, preventing certain PRs from passing all CI checks.\r\n\r\nTo validate whether this was due to an error from changes in my branch, I created [a fresh branch](https://github.com/ethereum-optimism/optimism/tree/ctb/immutable-tes) from [develop](https://github.com/ethereum-optimism/optimism/tree/develop). There, I slightly modified two comments as to make the system not skip generating coverage and [made a PR](https://github.com/ethereum-optimism/optimism/pull/8703). Again, CI failed, precisely at the point of running `forge coverage --report lcov`, as can be seen here: https://app.circleci.com/pipelines/github/ethereum-optimism/optimism/37495/workflows/[%E2%80%A6]4-8d5e-c36cba321263/jobs/1687717/parallel-runs/0/steps/0-105.\r\n\r\nThere's an [issue](https://github.com/foundry-rs/foundry/issues/6442) posted in Foundry's repo that outlines a similar problem, which, as it says in the description, belongs to tests of [Optimism](https://github.com/ethereum-optimism).\r\n\r\nThe fact that I cannot replicate this error locally (macOS Sonoma 14.2.1, M3 Max) seems unlikely to be due to a mismatch in Forge versions, since my local computer and CI are using the same version: `forge 0.2.0 (53b15e6 2023-12-14T00:17:09.405850859Z)`.\r\n\r\n@tynes pointed out that the issue could originate here: https://github.com/ethereum-optimism/optimism/blob/355bdf337a9331418f1f41d8451a1a4cd56fdd94/packages/contracts-bedrock/test/setup/Setup.sol#L80 which gets wonky when 2 diff compiler versions are used. More specifically, the error could arise from the code not being able to find the artifact (where the error msg is coming from).",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8705/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

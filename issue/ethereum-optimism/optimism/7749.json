{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/7749",
  "id": 1951183412,
  "node_id": "I_kwDODjvEJM50TLI0",
  "number": 7749,
  "title": "'EvmError: Revert' during contract deployment ",
  "user": {
    "login": "wangyufsn",
    "id": 141099829,
    "node_id": "U_kgDOCGkDNQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/141099829?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wangyufsn",
    "html_url": "https://github.com/wangyufsn",
    "followers_url": "https://api.github.com/users/wangyufsn/followers",
    "following_url": "https://api.github.com/users/wangyufsn/following{/other_user}",
    "gists_url": "https://api.github.com/users/wangyufsn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wangyufsn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wangyufsn/subscriptions",
    "organizations_url": "https://api.github.com/users/wangyufsn/orgs",
    "repos_url": "https://api.github.com/users/wangyufsn/repos",
    "events_url": "https://api.github.com/users/wangyufsn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wangyufsn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-10-19T04:33:47Z",
  "updated_at": "2023-10-19T04:33:47Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nWhen deploying the 'contract-bedrock' contract to the network, I consistently encounter an 'EvmError: Revert' when the environment variable `IMPL_SALT` is null (its default value is 'ethers phoenix' in Deploy.s.sol).\r\n\r\nWhen I set IMPL_SALT to a value like \"a\" that doesn't have a space, everything works fine.\r\n\r\n**To Reproduce**\r\n\r\nThe full logs:\r\n\r\n```\r\n~/work/fsn/op/optimism-priv/packages/contracts-bedrock v1.2.0-devnet ❯ export IMPL_SALT=\"ethers phoenix\"                                                          10s ▼ wangyufsn\r\n~/work/fsn/op/optimism-priv/packages/contracts-bedrock v1.2.0-devnet ❯ echo $IMPL_SALT                                                                                ▼ wangyufsn\r\nethers phoenix\r\n~/work/fsn/op/optimism-priv/packages/contracts-bedrock v1.2.0-devnet ❯ forge script scripts/Deploy.s.sol:Deploy --private-key $PRIVATE_KEY --broadcast --rpc-url $ETH_RPC_URL --gas-estimate-multiplier 100 --priority-gas-price 1000000000 --with-gas-price 1000000000 --legacy\r\n[⠆] Compiling...\r\nNo files changed, compilation skipped\r\nTraces:\r\n  [47861147] → new Deploy@0x5b73C5498c1E3b4dbA84de0F1833c4a029d90519\r\n    └─ ← 238319 bytes of code\r\n\r\n  [4469670] Deploy::setUp() \r\n    ├─ [0] VM::projectRoot() [staticcall]\r\n    │   └─ ← /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock\r\n    ├─ [0] VM::envOr(DEPLOY_SCRIPT, Deploy) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::envOr(DEPLOYMENT_CONTEXT, ) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::envOr(SIG, run) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::envOr(DEPLOY_FILE, run-latest.json) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::envOr(CHAIN_ID, 6480000000 [6.48e9]) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::toString(6480000000 [6.48e9]) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000a3634383030303030303000000000000000000000000000000000000000000000\r\n    ├─ [0] VM::createDir(/Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost, true) \r\n    │   └─ ← ()\r\n    ├─ [0] VM::readFile(/Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.chainId) [staticcall]\r\n    │   └─ ← <file>\r\n    ├─ [0] VM::envOr(STRICT_DEPLOYMENT, true) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] VM::parseUint(6480000000) [staticcall]\r\n    │   └─ ← 6480000000 [6.48e9]\r\n    ├─ [0] console::log(Connected to network with chainid %s, 6480000000 [6.48e9]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::readFile(/Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) [staticcall]\r\n    │   └─ ← <file>\r\n    ├─ [0] console::log(Storing temp deployment data in %s, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::projectRoot() [staticcall]\r\n    │   └─ ← /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock\r\n    ├─ [4021278] → new DeployConfig.0.8.15@0xC7f2Cf4845C6db0e1a1e91ED41Bcd0FcC1b0E141\r\n    │   ├─ [0] console::log(DeployConfig: reading file %s, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deploy-config/localhost.json) [staticcall]\r\n    │   │   └─ ← ()\r\n    │   ├─ [0] VM::readFile(/Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deploy-config/localhost.json) [staticcall]\r\n    │   │   └─ ← <file>\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.finalSystemOwner) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.portalGuardian) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l1ChainID) \r\n    │   │   └─ ← 6480000000 [6.48e9]\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2ChainID) \r\n    │   │   └─ ← 6480001000 [6.48e9]\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2BlockTime) \r\n    │   │   └─ ← 2\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.maxSequencerDrift) \r\n    │   │   └─ ← 600\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.sequencerWindowSize) \r\n    │   │   └─ ← 3600\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.channelTimeout) \r\n    │   │   └─ ← 300\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.p2pSequencerAddress) \r\n    │   │   └─ ← 0x914850eC53748207c22A8a49B8DD5b8443a70206\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.batchInboxAddress) \r\n    │   │   └─ ← 0xFf00000000000000000000000000000000042069\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.batchSenderAddress) \r\n    │   │   └─ ← 0x3e2fD4b80428e39b30f87F97893995e125B47085\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2OutputOracleSubmissionInterval) \r\n    │   │   └─ ← 120\r\n    │   ├─ [0] VM::parseJsonInt(<stringified JSON>, $.l2OutputOracleStartingTimestamp) \r\n    │   │   └─ ← 1692263072\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2OutputOracleStartingBlockNumber) \r\n    │   │   └─ ← 0\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.l2OutputOracleProposer) \r\n    │   │   └─ ← 0x17a0B99caC180a5d066f046148f6f0A80f9e3f26\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.l2OutputOracleChallenger) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.finalizationPeriodSeconds) \r\n    │   │   └─ ← 12\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.proxyAdminOwner) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.baseFeeVaultRecipient) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.l1FeeVaultRecipient) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.sequencerFeeVaultRecipient) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonString(<stringified JSON>, $.governanceTokenName) \r\n    │   │   └─ ← Optimism\r\n    │   ├─ [0] VM::parseJsonString(<stringified JSON>, $.governanceTokenSymbol) \r\n    │   │   └─ ← OP\r\n    │   ├─ [0] VM::parseJsonAddress(<stringified JSON>, $.governanceTokenOwner) \r\n    │   │   └─ ← 0x5F14D1e4e6FE7f89e7F7d790d034391B2CebF353\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2GenesisBlockGasLimit) \r\n    │   │   └─ ← 30000000 [3e7]\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.l2GenesisBlockBaseFeePerGas) \r\n    │   │   └─ ← 1000000000 [1e9]\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.gasPriceOracleOverhead) \r\n    │   │   └─ ← 2100\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.gasPriceOracleScalar) \r\n    │   │   └─ ← 1000000 [1e6]\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.eip1559Denominator) \r\n    │   │   └─ ← 50\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.eip1559Elasticity) \r\n    │   │   └─ ← 10\r\n    │   ├─ [0] VM::parseJsonUint(<stringified JSON>, $.systemConfigStartBlock) \r\n    │   │   └─ ← 0\r\n    │   └─ ← 6145 bytes of code\r\n    ├─ [0] console::log(Deploying from %s, Deploy) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] console::log(Deployment context: %s, localhost) [staticcall]\r\n    │   └─ ← ()\r\n    └─ ← ()\r\n\r\n  [9079256848779013731] Deploy::run() \r\n    ├─ [0] console::log(Deploying L1 system) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [327884] → new AddressManager@0x1Bb06909B82512722e68005da77371EB5105f7A4\r\n    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2)\r\n    │   └─ ← 1519 bytes of code\r\n    ├─ [307] AddressManager::owner() [staticcall]\r\n    │   └─ ← 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, AddressManager, 0x1Bb06909B82512722e68005da77371EB5105f7A4) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(AddressManager deployed at %s, AddressManager: [0x1Bb06909B82512722e68005da77371EB5105f7A4]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [1331897] → new ProxyAdmin@0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\r\n    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2)\r\n    │   ├─ emit OwnershipTransferred(previousOwner: 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2, newOwner: 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2)\r\n    │   └─ ← 6524 bytes of code\r\n    ├─ [363] ProxyAdmin::owner() [staticcall]\r\n    │   └─ ← 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2\r\n    ├─ [2325] ProxyAdmin::addressManager() [staticcall]\r\n    │   └─ ← 0x0000000000000000000000000000000000000000\r\n    ├─ [20602] ProxyAdmin::setAddressManager(AddressManager: [0x1Bb06909B82512722e68005da77371EB5105f7A4]) \r\n    │   └─ ← ()\r\n    ├─ [325] ProxyAdmin::addressManager() [staticcall]\r\n    │   └─ ← AddressManager: [0x1Bb06909B82512722e68005da77371EB5105f7A4]\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, ProxyAdmin, 0x7a33480766a6eec3f4E06b1E55e560b3940D1E28) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(ProxyAdmin deployed at %s, ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [436020] → new Proxy@0x54fDB740d4be889e054363025986E49EEb932e40\r\n    │   ├─ emit AdminChanged(previousAdmin: 0x0000000000000000000000000000000000000000, newAdmin: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← 2059 bytes of code\r\n    ├─ [0] VM::load(Proxy: [0x54fDB740d4be889e054363025986E49EEb932e40], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, OptimismPortalProxy, 0x54fDB740d4be889e054363025986E49EEb932e40) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(OptimismPortalProxy deployed at %s, Proxy: [0x54fDB740d4be889e054363025986E49EEb932e40]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [436020] → new Proxy@0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\r\n    │   ├─ emit AdminChanged(previousAdmin: 0x0000000000000000000000000000000000000000, newAdmin: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← 2059 bytes of code\r\n    ├─ [0] VM::load(Proxy: [0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, L2OutputOracleProxy, 0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(L2OutputOracleProxy deployed at %s, Proxy: [0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [436020] → new Proxy@0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\r\n    │   ├─ emit AdminChanged(previousAdmin: 0x0000000000000000000000000000000000000000, newAdmin: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← 2059 bytes of code\r\n    ├─ [0] VM::load(Proxy: [0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, SystemConfigProxy, 0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\",\"SystemConfigProxy\":\"0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(SystemConfigProxy deployed at %s, Proxy: [0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [517230] → new L1ChugSplashProxy@0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\r\n    │   └─ ← 2472 bytes of code\r\n    ├─ [0] VM::load(L1ChugSplashProxy: [0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, L1StandardBridgeProxy, 0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L1StandardBridgeProxy\":\"0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\",\"SystemConfigProxy\":\"0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(L1StandardBridgeProxy deployed at %s, L1ChugSplashProxy: [0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [205458] → new ResolvedDelegateProxy@0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5\r\n    │   └─ ← 799 bytes of code\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, L1CrossDomainMessengerProxy, 0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L1CrossDomainMessengerProxy\":\"0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5\",\"L1StandardBridgeProxy\":\"0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\",\"SystemConfigProxy\":\"0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(L1CrossDomainMessengerProxy deployed at %s, ResolvedDelegateProxy: [0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [3213] AddressManager::getAddress(OVM_L1CrossDomainMessenger) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000000000000000000000\r\n    ├─ [23397] AddressManager::setAddress(OVM_L1CrossDomainMessenger, ResolvedDelegateProxy: [0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5]) \r\n    │   ├─ emit AddressSet(name: 0x3b4a6791a6879d27c0ceeea3f78f8ebe66a01905f4a1290a8c6aff3e85f4665a, newAddress: ResolvedDelegateProxy: [0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5], oldAddress: 0x0000000000000000000000000000000000000000)\r\n    │   └─ ← ()\r\n    ├─ [1213] AddressManager::getAddress(OVM_L1CrossDomainMessenger) [staticcall]\r\n    │   └─ ← ResolvedDelegateProxy: [0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5]\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [436020] → new Proxy@0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B\r\n    │   ├─ emit AdminChanged(previousAdmin: 0x0000000000000000000000000000000000000000, newAdmin: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← 2059 bytes of code\r\n    ├─ [0] VM::load(Proxy: [0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, OptimismMintableERC20FactoryProxy, 0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L1CrossDomainMessengerProxy\":\"0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5\",\"L1StandardBridgeProxy\":\"0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismMintableERC20FactoryProxy\":\"0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\",\"SystemConfigProxy\":\"0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(OptimismMintableERC20FactoryProxy deployed at %s, Proxy: [0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [436020] → new Proxy@0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b\r\n    │   ├─ emit AdminChanged(previousAdmin: 0x0000000000000000000000000000000000000000, newAdmin: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← 2059 bytes of code\r\n    ├─ [0] VM::load(Proxy: [0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b], 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103) [staticcall]\r\n    │   └─ ← 0x0000000000000000000000007a33480766a6eec3f4e06b1e55e560b3940d1e28\r\n    ├─ [0] VM::serializeAddress(<stringified JSON>, L1ERC721BridgeProxy, 0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b) \r\n    │   └─ ← {\"AddressManager\":\"0x1Bb06909B82512722e68005da77371EB5105f7A4\",\"L1CrossDomainMessengerProxy\":\"0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5\",\"L1ERC721BridgeProxy\":\"0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b\",\"L1StandardBridgeProxy\":\"0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\",\"L2OutputOracleProxy\":\"0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\",\"OptimismMintableERC20FactoryProxy\":\"0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B\",\"OptimismPortalProxy\":\"0x54fDB740d4be889e054363025986E49EEb932e40\",\"ProxyAdmin\":\"0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\",\"SystemConfigProxy\":\"0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\"}\r\n    ├─ [0] VM::writeJson(<stringified JSON>, /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy) \r\n    │   └─ ← ()\r\n    ├─ [0] console::log(L1ERC721BridgeProxy deployed at %s, Proxy: [0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [307] AddressManager::owner() [staticcall]\r\n    │   └─ ← 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2\r\n    ├─ [2314] AddressManager::transferOwnership(ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28]) \r\n    │   ├─ emit OwnershipTransferred(previousOwner: 0x0Bc865632068BB98fE33B6C1A981dCe7e813b0E2, newOwner: ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28])\r\n    │   └─ ← ()\r\n    ├─ [0] console::log(AddressManager ownership transferred to %s, ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28]) [staticcall]\r\n    │   └─ ← ()\r\n    ├─ [307] AddressManager::owner() [staticcall]\r\n    │   └─ ← ProxyAdmin: [0x7a33480766a6eec3f4E06b1E55e560b3940D1E28]\r\n    ├─ [0] VM::stopBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::startBroadcast() \r\n    │   └─ ← ()\r\n    ├─ [0] VM::envOr(IMPL_SALT, ethers phoenix) \r\n    │   └─ ← <env var value>\r\n    ├─ [0] → new <Unknown>@0xa2ADe3E767f566a05022e3cf95382043cd88b434\r\n    │   └─ ← 0 bytes of code\r\n    └─ ← \"EvmError: Revert\"\r\n\r\n\r\n\r\n== Logs ==\r\n  Connected to network with chainid ****** \r\n  Storing temp deployment data in /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deployments/localhost/.deploy\r\n  DeployConfig: reading file /Users/smallyu/work/fsn/op/optimism-priv/packages/contracts-bedrock/deploy-config/localhost.json\r\n  Deploying from Deploy\r\n  Deployment context: localhost\r\n  Deploying L1 system\r\n  AddressManager deployed at 0x1Bb06909B82512722e68005da77371EB5105f7A4\r\n  ProxyAdmin deployed at 0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\r\n  OptimismPortalProxy deployed at 0x54fDB740d4be889e054363025986E49EEb932e40\r\n  L2OutputOracleProxy deployed at 0xbDe5C01Ec292f03C6B32468afe8505BeDE02d935\r\n  SystemConfigProxy deployed at 0xEa3Cdd9f65093E7df36dD75B6210cD79e35bdfDF\r\n  L1StandardBridgeProxy deployed at 0xAEfeaB9120b22f186C4a161CBFb7EEc4551ecBae\r\n  L1CrossDomainMessengerProxy deployed at 0x4AC3Fa0a0D65FF6A1844d3c423AB4f85Ee9f8Aa5\r\n  OptimismMintableERC20FactoryProxy deployed at 0xEdaC2451838D3d3De0ab01Ddd589eF77ECA2b55B\r\n  L1ERC721BridgeProxy deployed at 0x022Da3CEE1Df5E25e4cb4316fee6056ba3F6535b\r\n  AddressManager ownership transferred to 0x7a33480766a6eec3f4E06b1E55e560b3940D1E28\r\nError: \r\nScript failed.\r\n\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI'm not sure if it's a bug with Optimism or Forge. However, if it is indeed a bug, setting the default IMPL_SALT to another value that doesn't cause problems in Deploy.s.sol might be a solution.\r\n\r\n**System Specs:**\r\n\r\n- OS: macOS & Linkex\r\n- Optimism Version: v1.2.0\r\n- Forge Version: 0.2.0 (Commit: 490b588, Date: 2023-10-19T00:17:59.298376000Z)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7749/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

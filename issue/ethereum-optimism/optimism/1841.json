{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/1841",
  "id": 1068918868,
  "node_id": "I_kwDODjvEJM4_tmhU",
  "number": 1841,
  "title": "Calldata Cost Reduction Checklist",
  "user": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-12-01T22:09:50Z",
  "updated_at": "2022-04-12T04:10:05Z",
  "closed_at": "2022-04-12T04:10:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\nThere have been some recent proposals to reduce the gas cost of calldata which would allow for rollups to be cheaper. The L1 portion of the fee (used to cover batch submission) is charged along with the L2 portion of the fee (used to cover L2 execution).\r\n\r\n- https://github.com/ethereum/EIPs/pull/4488\r\n- https://github.com/ethereum/EIPs/pull/4490\r\n\r\nThese changes would cause the `GasPriceOracle` predeploy to overcharge for the L1 gas price, since the calldata costs are hardcoded in the contract. This means that we need to upgrade the `GasPriceOracle` contract once this change goes into place. Currently, there is no proxy in front of the `GasPriceOracle` - perhaps the `GasPriceOracleV2` should be deployed behind a proxy so that it is upgradable. See [here](https://github.com/ethereum-optimism/optimism/blob/639e5b13f2ab94b7b49e1f8114ed05a064df8a27/packages/contracts/contracts/L2/predeploys/OVM_GasPriceOracle.sol#L150) for the implementation of how the L1 portion of the fee is currently computed.\r\n\r\nIn the meantime, the price discrepancy can be handled by setting the `scalar` or `overhead` values lower.\r\n- https://github.com/ethereum-optimism/optimism/blob/639e5b13f2ab94b7b49e1f8114ed05a064df8a27/packages/contracts/contracts/L2/predeploys/OVM_GasPriceOracle.sol#L28\r\n-  https://github.com/ethereum-optimism/optimism/blob/639e5b13f2ab94b7b49e1f8114ed05a064df8a27/packages/contracts/contracts/L2/predeploys/OVM_GasPriceOracle.sol#L30\r\n\r\nTODOs:\r\n- [ ]  Determine if using a proxy is the correct approach in the future\r\n- [ ] Write the `GasPriceOracleV2` contract, which should be similar in functionality\r\n- [ ] Hardfork/squash fork logic will be required to switch to the new `GasPriceOracleV2`\r\n- [ ] Determine the correct values for the `scalar` and `overhead` to compensate for the cheaper calldata costs\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1841/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

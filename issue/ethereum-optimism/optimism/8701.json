{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/8701",
  "id": 2050544208,
  "node_id": "I_kwDODjvEJM56ONJQ",
  "number": 8701,
  "title": "Cancun/Dencun support tracker",
  "user": {
    "login": "protolambda",
    "id": 19571989,
    "node_id": "MDQ6VXNlcjE5NTcxOTg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/protolambda",
    "html_url": "https://github.com/protolambda",
    "followers_url": "https://api.github.com/users/protolambda/followers",
    "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
    "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
    "organizations_url": "https://api.github.com/users/protolambda/orgs",
    "repos_url": "https://api.github.com/users/protolambda/repos",
    "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/protolambda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "EvanJRichard",
    "id": 5766842,
    "node_id": "MDQ6VXNlcjU3NjY4NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5766842?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EvanJRichard",
    "html_url": "https://github.com/EvanJRichard",
    "followers_url": "https://api.github.com/users/EvanJRichard/followers",
    "following_url": "https://api.github.com/users/EvanJRichard/following{/other_user}",
    "gists_url": "https://api.github.com/users/EvanJRichard/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EvanJRichard/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EvanJRichard/subscriptions",
    "organizations_url": "https://api.github.com/users/EvanJRichard/orgs",
    "repos_url": "https://api.github.com/users/EvanJRichard/repos",
    "events_url": "https://api.github.com/users/EvanJRichard/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EvanJRichard/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "EvanJRichard",
      "id": 5766842,
      "node_id": "MDQ6VXNlcjU3NjY4NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5766842?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EvanJRichard",
      "html_url": "https://github.com/EvanJRichard",
      "followers_url": "https://api.github.com/users/EvanJRichard/followers",
      "following_url": "https://api.github.com/users/EvanJRichard/following{/other_user}",
      "gists_url": "https://api.github.com/users/EvanJRichard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EvanJRichard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EvanJRichard/subscriptions",
      "organizations_url": "https://api.github.com/users/EvanJRichard/orgs",
      "repos_url": "https://api.github.com/users/EvanJRichard/repos",
      "events_url": "https://api.github.com/users/EvanJRichard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EvanJRichard/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-12-20T13:23:32Z",
  "updated_at": "2023-12-20T22:37:56Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Specs draft: https://github.com/ethereum-optimism/optimism/pull/8602\r\n\r\n- Cancun (Execution Layer):\r\n    - [EIP-1153: Transient storage opcodes](https://eips.ethereum.org/EIPS/eip-1153)\r\n    - [EIP-4844: Shard Blob Transactions](https://eips.ethereum.org/EIPS/eip-4844)\r\n        - Blob transactions are disabled\r\n    - [EIP-4788: Beacon block root in the EVM](https://eips.ethereum.org/EIPS/eip-4788)\r\n        - The L1 beacon block root is embedded into L2\r\n        - The Beacon roots contract deployment is automated\r\n    - [EIP-5656: MCOPY - Memory copying instruction](https://eips.ethereum.org/EIPS/eip-5656)\r\n    - [EIP-6780: SELFDESTRUCT only in same transaction](https://eips.ethereum.org/EIPS/eip-6780)\r\n    - [EIP-7516: BLOBBASEFEE opcode](https://eips.ethereum.org/EIPS/eip-7516)\r\n- Deneb (Consensus Layer): *not applicable to L2*\r\n    - [EIP-7044: Perpetually Valid Signed Voluntary Exits](https://eips.ethereum.org/EIPS/eip-7044)\r\n    - [EIP-7045: Increase Max Attestation Inclusion Slot](https://eips.ethereum.org/EIPS/eip-7045)\r\n    - [EIP-7514: Add Max Epoch Churn Limit](https://eips.ethereum.org/EIPS/eip-7514)\r\n\r\n\r\nsuperchain-registry:\r\n- [x] Rename Eclipse to Ecotone https://github.com/ethereum-optimism/superchain-registry/pull/47\r\n \r\nop-geth: https://github.com/ethereum-optimism/op-geth/pull/205\r\n- [x] pull in superchain-registry change\r\n- [x] Activate Cancun when Optimism Ecotone is active\r\n- Blob transactions are disabled\r\n  - [x] Tx-pool:\r\n    - Disable entire blob sub-tx-pool here in [`eth/backend`](https://github.com/ethereum-optimism/op-geth/blob/25fd986a27b206b8454b2e9ceb4b699a238974ed/eth/backend.go#L256)\r\n    - Update [`txpool.ValidateTransaction`](https://github.com/ethereum-optimism/op-geth/blob/dbe93022ea25f509b7253a166fcdd0b4037f5017/core/txpool/validation.go#L65),\r\n      it's used by sub-pools to validate, and we already disabled the sub-pool, but better safe than sorry, in case the legacy-pool is misused.\r\n  - [x] RPC:\r\n    - Optimize happy-path by dropping tx, before processing in tx-pool,\r\n      in [`SendTx`](https://github.com/ethereum-optimism/op-geth/blob/dbe93022ea25f509b7253a166fcdd0b4037f5017/eth/api_backend.go#L295),\r\n      return `core.ErrTxTypeNotSupported`\r\n  - [x] State-transition\r\n    - `StateProcessor.Process` creates a signer based on the current block number with [`types.MakeSigner`],\r\n      in case optimism config is active, we should return the london-signer.\r\n    - `LatestSigner` is used by a bunch of utils. We should return the london-signer if optimism config is active.\r\n\r\nTODO: we can consider refactoring the signer to implement an `OpStackSigner` that wraps the upstream signers and adds the diff of enabling deposits and disabling blob txs.\r\n\r\nMonorepo: https://github.com/ethereum-optimism/optimism/pull/8707\r\n- [x] pull in superchain-registry change (`go.mod` update)\r\n- [x] pull in op-geth changes (`go.mod` update)\r\n- [x] Rename Eclipse to Ecotone\r\n- [x] Deploy-config change for Ecotone activation\r\n- [ ] Implement op-node attributes change to insert the exact specified beacon-block roots upgrade tx\r\n- [ ] Implement op-node attributes change to insert the beacon-block-root\r\n- [ ] Action test for beacon-block roots upgrade tx\r\n- [ ] Implement op-node attributes change to add new header beacon-block-root field\r\n    - [ ] Check if Forkchoice update v3 is used\r\n    - [ ] Check if SSZ encoding needs update\r\n- [x] Update specs etc. to refer to Ecotone, not Eclipse\r\n   - [x] Also the hashes in the upgrade txn will need changing\r\n- [x] Extend op-chain-ops L2 genesis to embed the beacon-block-root contract at the right address, if Cancun is active.\r\n\r\nCode to embed in genesis:\r\n```\r\ncast code --rpc-url=https://ethereum-goerli-rpc.allthatnode.com/ 0x000F3df6D732807Ef1319fB7B8bB8522d0Beac02\r\n0x3373fffffffffffffffffffffffffffffffffffffffe14604d57602036146024575f5ffd5b5f35801560495762001fff810690815414603c575f5ffd5b62001fff01545f5260205ff35b5f5ffd5b62001fff42064281555f359062001fff015500\r\n```\r\nBased on the deterministic code deployment of the EIP, the above should be the correct bytecode, for the `0x000F3df6D732807Ef1319fB7B8bB8522d0Beac02` that's in the EIP.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8701/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

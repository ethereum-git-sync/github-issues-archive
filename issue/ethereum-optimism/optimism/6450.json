{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450",
  "id": 1821542768,
  "node_id": "I_kwDODjvEJM5skolw",
  "number": 6450,
  "title": "ERC-4337 bundler for local devnet",
  "user": {
    "login": "rho-cassiopeiae",
    "id": 84779039,
    "node_id": "MDQ6VXNlcjg0Nzc5MDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/84779039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rho-cassiopeiae",
    "html_url": "https://github.com/rho-cassiopeiae",
    "followers_url": "https://api.github.com/users/rho-cassiopeiae/followers",
    "following_url": "https://api.github.com/users/rho-cassiopeiae/following{/other_user}",
    "gists_url": "https://api.github.com/users/rho-cassiopeiae/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rho-cassiopeiae/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rho-cassiopeiae/subscriptions",
    "organizations_url": "https://api.github.com/users/rho-cassiopeiae/orgs",
    "repos_url": "https://api.github.com/users/rho-cassiopeiae/repos",
    "events_url": "https://api.github.com/users/rho-cassiopeiae/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rho-cassiopeiae/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-07-26T04:11:48Z",
  "updated_at": "2023-08-07T05:09:13Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I'm trying to run [this bundler](https://github.com/eth-infinitism/bundler) together with local devnet, but have no luck.\r\n\r\nI first add `--rpc.allow-unprotected-txs` flag to both entrypoint.sh files in ops-bedrock folder, since without it I get \"only replay-protected (EIP-155) transactions allowed over RPC\" error later. Then I launch the devnet using `make devnet-up` and make some adjustments in the bundler code: change all relevant target ports from 8545 to 9545 and in the 2-deploy-entrypoint.ts file comment out the code that checks that `chainId` is either 1337 or 31337, since it is actually 901.\r\n\r\nBut when I run `yarn hardhat-deploy --network localhost` to deploy the entrypoint, I get \"Insufficient funds\" error.\r\n\r\nI think I need to change some private key-related settings of the devnet, but I'm not sure which ones. I tried changing `BLOCK_SIGNER_PRIVATE_KEY` and `BLOCK_SIGNER_ADDRESS` to `0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80` and `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266` (`test*11 junk` mnemonic account 0), since the bundler seems to be using this account for deployment, but still got the same error.\r\n\r\n**Describe the solution you'd like**\r\nIt would be great to have a local bundler out of the box, since there is already support for ERC-4337 on both OP Goerli and OP Mainnet.\r\n\r\n**Describe alternatives you've considered**\r\nCurrently I have to run the bundler on hardhat L1. It works fine without any adjustments, but since I'm developing for Optimism it's not what I ultimately need.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1651589534",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450#issuecomment-1651589534",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
    "id": 1651589534,
    "node_id": "IC_kwDODjvEJM5icUGe",
    "user": {
      "login": "netzulo",
      "id": 11871932,
      "node_id": "MDQ6VXNlcjExODcxOTMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11871932?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/netzulo",
      "html_url": "https://github.com/netzulo",
      "followers_url": "https://api.github.com/users/netzulo/followers",
      "following_url": "https://api.github.com/users/netzulo/following{/other_user}",
      "gists_url": "https://api.github.com/users/netzulo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/netzulo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/netzulo/subscriptions",
      "organizations_url": "https://api.github.com/users/netzulo/orgs",
      "repos_url": "https://api.github.com/users/netzulo/repos",
      "events_url": "https://api.github.com/users/netzulo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/netzulo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T11:23:40Z",
    "updated_at": "2023-07-26T11:23:50Z",
    "author_association": "NONE",
    "body": "i think you will solve just using  `make devnet-up-deploy` , when \"devnet-up\" just compilation and basic tasks are completed, at \"deploy\" some txns are executed over your L1+L2 devnet and fund main accounts :D",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1651589534/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652016955",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450#issuecomment-1652016955",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
    "id": 1652016955,
    "node_id": "IC_kwDODjvEJM5id8c7",
    "user": {
      "login": "rflihxyz",
      "id": 109089247,
      "node_id": "U_kgDOBoCR3w",
      "avatar_url": "https://avatars.githubusercontent.com/u/109089247?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rflihxyz",
      "html_url": "https://github.com/rflihxyz",
      "followers_url": "https://api.github.com/users/rflihxyz/followers",
      "following_url": "https://api.github.com/users/rflihxyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/rflihxyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rflihxyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rflihxyz/subscriptions",
      "organizations_url": "https://api.github.com/users/rflihxyz/orgs",
      "repos_url": "https://api.github.com/users/rflihxyz/repos",
      "events_url": "https://api.github.com/users/rflihxyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rflihxyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T15:17:20Z",
    "updated_at": "2023-07-26T15:17:20Z",
    "author_association": "NONE",
    "body": "Hey @rho-cassiopeiae, can you dm me on telegram (@rflihxyz)! I'm trying to do the same and would love to chat about it! Best",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652016955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652473916",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450#issuecomment-1652473916",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
    "id": 1652473916,
    "node_id": "IC_kwDODjvEJM5ifsA8",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T20:49:09Z",
    "updated_at": "2023-07-26T20:49:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rho-cassiopeiae Thanks for being interested in trying to run a bundler on optimism devnet! I've opened a couple of PRs attempting to make this process easier.\r\n\r\nWe currently have 2 devnets and I am working on consolidating them into a single devnet. The two commands are:\r\n- `make devnet-up`\r\n- `make devnet-up-deploy`\r\n\r\nRegarding the lack of funds, #6463 was created to add more accounts with funds at genesis for `make devnet-up`. You can check the balance of an account using `cast balance` - if the accounts do not have funds on L1, then something is wrong. Be sure to use the right port, I believe `8545` is the L1 port.\r\n\r\nIt would be super helpful to confirm if `make devnet-up` or `make devnet-up-deploy` has the genesis funds at the dev accounts.\r\n\r\nI see here that the hardhat config for the bundler contracts uses the same mnemonic that we use to seed genesis accounts so it seems like they are not funded in the genesis?\r\nhttps://github.com/eth-infinitism/bundler/blob/623991115d891419408ccffb8b65c0c4bb48421c/packages/bundler/hardhat.config.ts#L11",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652473916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652676144",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450#issuecomment-1652676144",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
    "id": 1652676144,
    "node_id": "IC_kwDODjvEJM5igdYw",
    "user": {
      "login": "binjix23",
      "id": 120355637,
      "node_id": "U_kgDOByx7NQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/120355637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/binjix23",
      "html_url": "https://github.com/binjix23",
      "followers_url": "https://api.github.com/users/binjix23/followers",
      "following_url": "https://api.github.com/users/binjix23/following{/other_user}",
      "gists_url": "https://api.github.com/users/binjix23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/binjix23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/binjix23/subscriptions",
      "organizations_url": "https://api.github.com/users/binjix23/orgs",
      "repos_url": "https://api.github.com/users/binjix23/repos",
      "events_url": "https://api.github.com/users/binjix23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/binjix23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T23:24:00Z",
    "updated_at": "2023-07-26T23:24:00Z",
    "author_association": "NONE",
    "body": "HI @rflihxyz @netzulo @rho-cassiopeiae \r\n\r\nLovely to see this discussion, would love to invite you to our exclusive builders chat here: https://t.me/+nUBuIdVYanZjZWZh\r\n\r\nWe have an AA specific channel where you can ask questions and get connected with others in the eco! \r\n\r\nIf you want to verify me, feel free to DM me on twitter @binji_x ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652676144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652728985",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6450#issuecomment-1652728985",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6450",
    "id": 1652728985,
    "node_id": "IC_kwDODjvEJM5igqSZ",
    "user": {
      "login": "binjix23",
      "id": 120355637,
      "node_id": "U_kgDOByx7NQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/120355637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/binjix23",
      "html_url": "https://github.com/binjix23",
      "followers_url": "https://api.github.com/users/binjix23/followers",
      "following_url": "https://api.github.com/users/binjix23/following{/other_user}",
      "gists_url": "https://api.github.com/users/binjix23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/binjix23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/binjix23/subscriptions",
      "organizations_url": "https://api.github.com/users/binjix23/orgs",
      "repos_url": "https://api.github.com/users/binjix23/repos",
      "events_url": "https://api.github.com/users/binjix23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/binjix23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T00:33:01Z",
    "updated_at": "2023-07-27T00:33:01Z",
    "author_association": "NONE",
    "body": "If the link is broken, you can use this one : https://t.me/+oUu1W1Z6WI03MTFh",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652728985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

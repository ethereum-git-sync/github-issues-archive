{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/1259",
  "id": 941835934,
  "node_id": "MDU6SXNzdWU5NDE4MzU5MzQ=",
  "number": 1259,
  "title": "Gas golf for bridge - cloning L2StandardERC20 in the OVM_L2StandardTokenFactory.",
  "user": {
    "login": "0xkonata",
    "id": 87266578,
    "node_id": "MDQ6VXNlcjg3MjY2NTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/87266578?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xkonata",
    "html_url": "https://github.com/0xkonata",
    "followers_url": "https://api.github.com/users/0xkonata/followers",
    "following_url": "https://api.github.com/users/0xkonata/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xkonata/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xkonata/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xkonata/subscriptions",
    "organizations_url": "https://api.github.com/users/0xkonata/orgs",
    "repos_url": "https://api.github.com/users/0xkonata/repos",
    "events_url": "https://api.github.com/users/0xkonata/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xkonata/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-07-12T09:05:17Z",
  "updated_at": "2021-07-15T10:21:51Z",
  "closed_at": "2021-07-12T22:49:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\nThe [factory](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/optimistic-ethereum/OVM/bridge/tokens/OVM_L2StandardTokenFactory.sol#L26) seems building plain [token](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/optimistic-ethereum/libraries/standards/L2StandardERC20.sol) instance everytime.\r\n\r\n**Describe the solution you'd like**\r\nThe [EIP-1167 minimal proxy](https://eips.ethereum.org/EIPS/eip-1167) in the factory. The proxy is 45bytes and it can have the implementation address within its bytes. Hence every each token deployment would be far lighter.\r\n\r\n**Describe alternatives you've considered**\r\nJust keep using current one.",
  "closed_by": {
    "login": "0xkonata",
    "id": 87266578,
    "node_id": "MDQ6VXNlcjg3MjY2NTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/87266578?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xkonata",
    "html_url": "https://github.com/0xkonata",
    "followers_url": "https://api.github.com/users/0xkonata/followers",
    "following_url": "https://api.github.com/users/0xkonata/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xkonata/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xkonata/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xkonata/subscriptions",
    "organizations_url": "https://api.github.com/users/0xkonata/orgs",
    "repos_url": "https://api.github.com/users/0xkonata/repos",
    "events_url": "https://api.github.com/users/0xkonata/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xkonata/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878547244",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1259#issuecomment-878547244",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259",
    "id": 878547244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODU0NzI0NA==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T19:47:41Z",
    "updated_at": "2021-07-12T19:47:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "If you open a PR against the `regenesis/0.5.0` branch with this change, it would be greatly appreciated.\r\nhttps://github.com/ethereum-optimism/optimism/tree/regenesis/0.5.0",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878547244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878556872",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1259#issuecomment-878556872",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259",
    "id": 878556872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODU1Njg3Mg==",
    "user": {
      "login": "transmissions11",
      "id": 26209401,
      "node_id": "MDQ6VXNlcjI2MjA5NDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26209401?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/transmissions11",
      "html_url": "https://github.com/transmissions11",
      "followers_url": "https://api.github.com/users/transmissions11/followers",
      "following_url": "https://api.github.com/users/transmissions11/following{/other_user}",
      "gists_url": "https://api.github.com/users/transmissions11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/transmissions11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/transmissions11/subscriptions",
      "organizations_url": "https://api.github.com/users/transmissions11/orgs",
      "repos_url": "https://api.github.com/users/transmissions11/repos",
      "events_url": "https://api.github.com/users/transmissions11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/transmissions11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T20:03:56Z",
    "updated_at": "2021-07-15T10:21:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> **Is your feature request related to a problem? Please describe.**\r\n> The [factory](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/optimistic-ethereum/OVM/bridge/tokens/OVM_L2StandardTokenFactory.sol#L26) seems building plain [token](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/optimistic-ethereum/libraries/standards/L2StandardERC20.sol) instance everytime.\r\n> \r\n> **Describe the solution you'd like**\r\n> The [EIP-1167 minimal proxy](https://eips.ethereum.org/EIPS/eip-1167) in the factory. The proxy is 45bytes and it can have the implementation address within its bytes. Hence every each token deployment would be far lighter.\r\n> \r\n> **Describe alternatives you've considered**\r\n> Just keep using current one.\r\n\r\na) The EIP-1167 minimal proxy cannot be deployed on Optimism. It uses unsafe opcodes.\r\n\r\nb) I'd argue not using proxies is a good design choice here as tokens don't need to be created by end users frequently. Proxies shift the gas burden from the creator to users (as delegatecalls consume additional gas on each call), and creators really don't need to be optimized for here. Uniswap follows this pattern, factories deploy a full instance of Uniswap pools, not a proxy, as it's not worth saving the creator that gas once in exchange for raising the cost of all interactions in perpetuity. \r\n\r\nEspecially since some of the ERC20s that get spit out from the factory will likely be some of the most used contracts on Optimism, we shouldn't be needlessly raising their gas consumption without a really good reason (imo)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878556872/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878647898",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/1259#issuecomment-878647898",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/1259",
    "id": 878647898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODY0Nzg5OA==",
    "user": {
      "login": "0xkonata",
      "id": 87266578,
      "node_id": "MDQ6VXNlcjg3MjY2NTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/87266578?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xkonata",
      "html_url": "https://github.com/0xkonata",
      "followers_url": "https://api.github.com/users/0xkonata/followers",
      "following_url": "https://api.github.com/users/0xkonata/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xkonata/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xkonata/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xkonata/subscriptions",
      "organizations_url": "https://api.github.com/users/0xkonata/orgs",
      "repos_url": "https://api.github.com/users/0xkonata/repos",
      "events_url": "https://api.github.com/users/0xkonata/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xkonata/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T22:49:49Z",
    "updated_at": "2021-07-12T22:49:49Z",
    "author_association": "NONE",
    "body": "Agreed. I close this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/878647898/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

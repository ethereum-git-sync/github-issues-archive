{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/7467",
  "id": 1918374951,
  "node_id": "I_kwDODjvEJM5yWBQn",
  "number": 7467,
  "title": "Submodule Initialization fails for `safe-contracts` dependency",
  "user": {
    "login": "epociask",
    "id": 42627790,
    "node_id": "MDQ6VXNlcjQyNjI3Nzkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/42627790?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/epociask",
    "html_url": "https://github.com/epociask",
    "followers_url": "https://api.github.com/users/epociask/followers",
    "following_url": "https://api.github.com/users/epociask/following{/other_user}",
    "gists_url": "https://api.github.com/users/epociask/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/epociask/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/epociask/subscriptions",
    "organizations_url": "https://api.github.com/users/epociask/orgs",
    "repos_url": "https://api.github.com/users/epociask/repos",
    "events_url": "https://api.github.com/users/epociask/events{/privacy}",
    "received_events_url": "https://api.github.com/users/epociask/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-09-28T23:00:12Z",
  "updated_at": "2023-09-29T17:13:20Z",
  "closed_at": "2023-09-29T17:13:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nInvoking `make submodules` results in the following error:\r\n```bash\r\nfatal: Unable to find refs/remotes/origin/v1.4.0 revision in submodule path 'packages/contracts-bedrock/lib/safe-contracts'\r\nPYTHONPATH=./bedrock-devnet python3 ./bedrock-devnet/main.py --monorepo-dir=. --allocs\r\n```\r\n\r\nThe [.gitmodules](https://github.com/ethereum-optimism/optimism/blob/007e1a2dc0c393edb3af215d5c460d50810a700e/.gitmodules) makes a reference to a `v1.4.0` branch for safe-contracts which doesn't actually exist in the repo. It appears that this being used to try to alias a [release](https://github.com/safe-global/safe-contracts/releases/tag/v1.4.0) which is failing. \r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nRun `make submodules` from monorepo root\r\n\r\n**System Specs:**\r\n - OS: Mac\r\n - Package Version (or commit hash):\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
  "closed_by": {
    "login": "epociask",
    "id": 42627790,
    "node_id": "MDQ6VXNlcjQyNjI3Nzkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/42627790?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/epociask",
    "html_url": "https://github.com/epociask",
    "followers_url": "https://api.github.com/users/epociask/followers",
    "following_url": "https://api.github.com/users/epociask/following{/other_user}",
    "gists_url": "https://api.github.com/users/epociask/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/epociask/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/epociask/subscriptions",
    "organizations_url": "https://api.github.com/users/epociask/orgs",
    "repos_url": "https://api.github.com/users/epociask/repos",
    "events_url": "https://api.github.com/users/epociask/events{/privacy}",
    "received_events_url": "https://api.github.com/users/epociask/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1740976552",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7467#issuecomment-1740976552",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467",
    "id": 1740976552,
    "node_id": "IC_kwDODjvEJM5nxTGo",
    "user": {
      "login": "Sabnock01",
      "id": 24715302,
      "node_id": "MDQ6VXNlcjI0NzE1MzAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/24715302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sabnock01",
      "html_url": "https://github.com/Sabnock01",
      "followers_url": "https://api.github.com/users/Sabnock01/followers",
      "following_url": "https://api.github.com/users/Sabnock01/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sabnock01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sabnock01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sabnock01/subscriptions",
      "organizations_url": "https://api.github.com/users/Sabnock01/orgs",
      "repos_url": "https://api.github.com/users/Sabnock01/repos",
      "events_url": "https://api.github.com/users/Sabnock01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sabnock01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-29T14:23:00Z",
    "updated_at": "2023-09-29T14:24:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Did you run any other commands before that one and are you on the latest commit of the `develop` branch? \r\n\r\nI ran `make submodules` and got the following output:\r\n\r\n```bash\r\n‚ùØ make submodules\r\n# CI will checkout submodules on its own (and fails on these commands)\r\nif [ -z \"$GITHUB_ENV\" ]; then \\\r\n        git submodule init; \\\r\n        git submodule update --recursive; \\\r\nfi\r\nSubmodule 'packages/contracts-bedrock/lib/clones-with-immutable-args' (https://github.com/Saw-mon-and-Natalie/clones-with-immutable-args) registered for path 'packages/contracts-bedrock/lib/clones-with-immutable-args'\r\nSubmodule 'packages/contracts-bedrock/lib/forge-std' (https://github.com/foundry-rs/forge-std) registered for path 'packages/contracts-bedrock/lib/forge-std'\r\nSubmodule 'packages/contracts-bedrock/lib/openzeppelin-contracts' (https://github.com/OpenZeppelin/openzeppelin-contracts) registered for path 'packages/contracts-bedrock/lib/openzeppelin-contracts'\r\nSubmodule 'packages/contracts-bedrock/lib/openzeppelin-contracts-upgradeable' (https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable) registered for path 'packages/contracts-bedrock/lib/openzeppelin-contracts-upgradeable'\r\nSubmodule 'packages/contracts-bedrock/lib/safe-contracts' (https://github.com/safe-global/safe-contracts) registered for path 'packages/contracts-bedrock/lib/safe-contracts'\r\nSubmodule 'packages/contracts-bedrock/lib/solmate' (https://github.com/transmissions11/solmate) registered for path 'packages/contracts-bedrock/lib/solmate'\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/clones-with-immutable-args'...\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/forge-std'...\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/openzeppelin-contracts'...\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/openzeppelin-contracts-upgradeable'...\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/safe-contracts'...\r\nCloning into '/home/sabnock/git_local/forks/optimism/packages/contracts-bedrock/lib/solmate'...\r\nSubmodule path 'packages/contracts-bedrock/lib/clones-with-immutable-args': checked out '105efee1b9127ed7f6fedf139e1fc796ce8791f2'\r\nSubmodule path 'packages/contracts-bedrock/lib/forge-std': checked out 'e8a047e3f40f13fa37af6fe14e6e06283d9a060e'\r\nSubmodule path 'packages/contracts-bedrock/lib/openzeppelin-contracts': checked out 'ecd2ca2cd7cac116f7a37d0e474bbb3d7d5e1c4d'\r\nSubmodule path 'packages/contracts-bedrock/lib/openzeppelin-contracts-upgradeable': checked out '0a2cb9a445c365870ed7a8ab461b12acf3e27d63'\r\nSubmodule path 'packages/contracts-bedrock/lib/safe-contracts': checked out 'e870f514ad34cd9654c72174d6d4a839e3c6639f'\r\nSubmodule path 'packages/contracts-bedrock/lib/solmate': checked out '8f9b23f8838670afda0fd8983f2c41e8037ae6bc'\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1740976552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1741080394",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7467#issuecomment-1741080394",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467",
    "id": 1741080394,
    "node_id": "IC_kwDODjvEJM5nxsdK",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-29T15:30:57Z",
    "updated_at": "2023-09-29T15:30:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Make sure to pull the latest commits. This issue doesn't happen locally for me or in CI altho I do not use mac",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1741080394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1741238559",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7467#issuecomment-1741238559",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7467",
    "id": 1741238559,
    "node_id": "IC_kwDODjvEJM5nyTEf",
    "user": {
      "login": "epociask",
      "id": 42627790,
      "node_id": "MDQ6VXNlcjQyNjI3Nzkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/42627790?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/epociask",
      "html_url": "https://github.com/epociask",
      "followers_url": "https://api.github.com/users/epociask/followers",
      "following_url": "https://api.github.com/users/epociask/following{/other_user}",
      "gists_url": "https://api.github.com/users/epociask/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/epociask/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/epociask/subscriptions",
      "organizations_url": "https://api.github.com/users/epociask/orgs",
      "repos_url": "https://api.github.com/users/epociask/repos",
      "events_url": "https://api.github.com/users/epociask/events{/privacy}",
      "received_events_url": "https://api.github.com/users/epociask/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-29T17:13:19Z",
    "updated_at": "2023-09-29T17:13:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm on the latest commit. Interestingly enough I was able to pull a fresh copy of the repo and successfully generate all submodules on another macos machine. Looks like it's unique to my machine, apologies for the false alarm! ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1741238559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/7580",
  "id": 1929739115,
  "node_id": "I_kwDODjvEJM5zBXtr",
  "number": 7580,
  "title": "Block skipped on synchronisation process after performing a deposit",
  "user": {
    "login": "djav35",
    "id": 78488623,
    "node_id": "MDQ6VXNlcjc4NDg4NjIz",
    "avatar_url": "https://avatars.githubusercontent.com/u/78488623?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djav35",
    "html_url": "https://github.com/djav35",
    "followers_url": "https://api.github.com/users/djav35/followers",
    "following_url": "https://api.github.com/users/djav35/following{/other_user}",
    "gists_url": "https://api.github.com/users/djav35/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djav35/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djav35/subscriptions",
    "organizations_url": "https://api.github.com/users/djav35/orgs",
    "repos_url": "https://api.github.com/users/djav35/repos",
    "events_url": "https://api.github.com/users/djav35/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djav35/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832604,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNjA0",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-question",
      "name": "C-question",
      "color": "C5DEF5",
      "default": false,
      "description": "User questions that are neither feature requests nor bug reports"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-06T09:05:50Z",
  "updated_at": "2023-11-01T19:39:25Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When using OP Stack, the funds of L2 accounts are set/updated according to the events emitted by L1 contract when performing a deposit. If the L2 block synchronisation process happen to skip the block containing the event (for any reason, such as resetting the network starting from a more recent L1 block), the deposit funds will not be reflected on the corresponding L2 account. In this kind of scenario what is the best way to “recover” these funds? Whats the best strategy to “re-sync” the network in case something fails?\r\n\r\n**To Reproduce**\r\n1. Set up an OP Stack L2 network.\r\n2. Start syncing blocks providing B1 as genesis L1 block\r\n3. Perform a deposit (send L1 Eth to L1 Bridge contract). This emits an event in block B5.\r\n4. Stop the L2 network when it had synced up to block B4. \r\n5. Restart the L2 network providing block B6 as starting block.\r\n\r\nI am aware that this may not be a bug in itself, but im wondering what is the best way to navigate around this issue. And an additional question: how much time does it take to sync blocks?\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1752164227",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7580#issuecomment-1752164227",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7580",
    "id": 1752164227,
    "node_id": "IC_kwDODjvEJM5ob-eD",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-08T21:18:04Z",
    "updated_at": "2023-10-08T21:18:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "The derivation rules do not allow the L2 to skip L1 blocks.  Step 5 as described is not restarting the network, but creating an entirely new, alternate network. There isn't an easy way to do that with the current OP Stack.\r\n\r\nIf you stop the sequencer for some period of time, and then start it again, it will resume processing from where it left off on the L1 chain.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1752164227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

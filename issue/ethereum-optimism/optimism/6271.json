{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/6271",
  "id": 1801373341,
  "node_id": "I_kwDODjvEJM5rXsad",
  "number": 6271,
  "title": "PNPM build returns error code even when build is successful",
  "user": {
    "login": "rflihxyz",
    "id": 109089247,
    "node_id": "U_kgDOBoCR3w",
    "avatar_url": "https://avatars.githubusercontent.com/u/109089247?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rflihxyz",
    "html_url": "https://github.com/rflihxyz",
    "followers_url": "https://api.github.com/users/rflihxyz/followers",
    "following_url": "https://api.github.com/users/rflihxyz/following{/other_user}",
    "gists_url": "https://api.github.com/users/rflihxyz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rflihxyz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rflihxyz/subscriptions",
    "organizations_url": "https://api.github.com/users/rflihxyz/orgs",
    "repos_url": "https://api.github.com/users/rflihxyz/repos",
    "events_url": "https://api.github.com/users/rflihxyz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rflihxyz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-07-12T16:46:19Z",
  "updated_at": "2023-07-12T16:53:59Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nFrom the \"OP Stack deploy tutorial, yarn build has been replaced with pnpm, and \"PNPM build\" returns a non-zero value.\r\n\r\n**To Reproduce**\r\nPut this in a dockerfile and run:\r\n\r\n`FROM --platform=linux/amd64 ubuntu:22.04\r\n\r\n# Update package lists and install necessary dependencies\r\nRUN apt-get update && apt-get install -y \\\r\n    git \\\r\n    make \\\r\n    wget \\\r\n    gcc \\\r\n    jq \\\r\n    libusb-1.0-0-dev \\\r\n    libc6 \\\r\n    curl\r\n\r\n# Install Node.js 16.x\r\nRUN curl -fsSL https://deb.nodesource.com/setup_16.x | bash -\r\nRUN apt-get install -y nodejs\r\n\r\n# Install npm\r\n#RUN apt-get install -y npm\r\n\r\n# Install Yarn\r\nRUN npm install --global yarn \\\r\n    && npm i -g pnpm\r\n\r\n\r\n# Set up Go environment variables\r\nENV GOROOT /usr/local/go\r\nENV GOPATH /go\r\nENV PATH $GOPATH/bin:$GOROOT/bin:$PATH\r\n\r\n# Define the Go version to install\r\nARG GO_VERSION=1.20\r\n\r\n# Download and install Go\r\nRUN wget -q https://dl.google.com/go/go${GO_VERSION}.linux-amd64.tar.gz \\\r\n    && tar -C /usr/local -xzf go${GO_VERSION}.linux-amd64.tar.gz \\\r\n    && rm go${GO_VERSION}.linux-amd64.tar.gz\r\n\r\n# Install Foundry\r\nSHELL [\"/bin/bash\", \"-c\"]\r\n\r\nRUN curl -L https://foundry.paradigm.xyz | bash\r\nRUN source ~/.bashrc\r\nENV PATH=\"/root/.foundry/bin:${PATH}\"\r\nRUN foundryup\r\n\r\n# last master branch commit that passes all checks: 3fc1166aa32888331a67d7dc6bdcabd3be2b3541\r\n#    && git checkout 9e8647e872d488c9716e18ceac985d461a72250a \\ \r\n## && git checkout \r\n\r\nRUN mkdir /opstack-temp \\\r\n    && cd /opstack-temp/ \\\r\n    && foundryup \\\r\n    && git clone https://github.com/ethereum-optimism/optimism.git \\\r\n    && cd optimism \\\r\n    && git checkout 9e8647e872d488c9716e18ceac985d461a72250a \\ \r\n    && pnpm install \\\r\n    && make op-node op-batcher op-proposer\r\n\r\nRUN cd /opstack-temp/optimism \\\r\n    && pnpm build \r\n`    \r\n**Expected behavior**\r\nSuccessful build, return zero.\r\n\r\n**Screenshots**\r\nhttps://ibb.co/wNBfn71\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6271/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

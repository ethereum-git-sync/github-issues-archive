{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/849",
  "id": 890180785,
  "node_id": "MDU6SXNzdWU4OTAxODA3ODU=",
  "number": 849,
  "title": "hanging L2 to L1 withdrawals when using `withdraw` or `withdrawTo`",
  "user": {
    "login": "platocrat",
    "id": 37757724,
    "node_id": "MDQ6VXNlcjM3NzU3NzI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/platocrat",
    "html_url": "https://github.com/platocrat",
    "followers_url": "https://api.github.com/users/platocrat/followers",
    "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
    "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
    "organizations_url": "https://api.github.com/users/platocrat/orgs",
    "repos_url": "https://api.github.com/users/platocrat/repos",
    "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/platocrat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 2930018676,
      "node_id": "MDU6TGFiZWwyOTMwMDE4Njc2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-unconfirmed",
      "name": "P-unconfirmed",
      "color": "BFD4F2",
      "default": false,
      "description": "Issue might be valid, but it’s not yet confirmed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2021-05-12T14:59:58Z",
  "updated_at": "2021-05-20T21:06:11Z",
  "closed_at": "2021-05-20T21:04:51Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nThis issue arose from Ale's integration tests.\r\n\r\nWhen running all integration tests for `synthetix`'s `develop` branch, the tests will always hang at the first L2 to L1 withdrawal step. The individual test for this step is named \"when waiting for the tx to complete on L1\".\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Git clone `synthetix`: `git clone https://github.com/Synthetixio/synthetix.git`\r\n2. Install deps: `npm run clean-install`\r\n3. Deploy contracts: `node publish deploy-ovm-pair`\r\n3. Run integration tests: `npm run test:prod:ovm`\r\n4. See the tests first hang on the withdrawals test, \"when waiting for the tx to complete on L1\":\r\n<img width=\"751\" alt=\"Screen Shot 2021-05-12 at 9 30 22 AM\" src=\"https://user-images.githubusercontent.com/37757724/117992594-adad7800-b304-11eb-8fe5-180d0a1931e4.png\">\r\n\r\n5. Restart the relayer and batch submitter using the Docker Desktop dashboard/UI:\r\n<img width=\"1243\" alt=\"Screen Shot 2021-05-12 at 9 31 09 AM\" src=\"https://user-images.githubusercontent.com/37757724/117992770-ca49b000-b304-11eb-8d74-d4d4ae9702c0.png\">\r\n\r\n6. See tests continue to pass\r\n\r\n\r\n\r\n**Expected behavior**\r\n\r\n\r\n**Screenshots**\r\nThe screenshots are below are of the container logs for `ops_relayer_1` and `op_batch_submitter_1` as the tests begin to hang:\r\n1. `ops_relayer_1` logs:\r\n<img width=\"1247\" alt=\"Screen Shot 2021-05-12 at 9 38 15 AM\" src=\"https://user-images.githubusercontent.com/37757724/117993949-c9654e00-b305-11eb-9484-979cad1293de.png\">\r\nThe pattern of repeated logs continue to repeat until the relay is restarted.\r\n\r\n2. `ops_batch_submitter_1` logs:\r\n<img width=\"1247\" alt=\"Screen Shot 2021-05-12 at 9 44 16 AM\" src=\"https://user-images.githubusercontent.com/37757724/117996332-af2c6f80-b307-11eb-8124-236ed4b07e46.png\">\r\nNo new batches are submitted before tests begin to hang. So, these logs are static once the tests are hanging.\r\n\r\nSuccessful logs of the relayer after the container is restarted:\r\n1. `ops_relayer_1` logs:\r\n<img width=\"1247\" alt=\"Screen Shot 2021-05-12 at 9 49 50 AM\" src=\"https://user-images.githubusercontent.com/37757724/117996221-958b2800-b307-11eb-9055-7ee92a201b4b.png\">\r\n\r\n**System Specs:**\r\n - OS: macOS\r\n - Package Version: :\r\n\r\n**Additional context**\r\nIf you don't restart the batch submitter nor relayer containers, the \"before all\" hook for [WITHDRAW]'s \"when waiting for the tx to complete on L1\" will timeout.\r\nTests will continue to pass as expected afterward until reaching the same test for [WITHDRAW TO], where these test will also timeout in the \"before all\" hook.\r\n\r\n<img width=\"902\" alt=\"Screen Shot 2021-05-12 at 10 07 58 AM\" src=\"https://user-images.githubusercontent.com/37757724/117998901-f0258380-b309-11eb-84e5-846007f39d6d.png\">\r\n\r\n-----\r\n**Note**\r\nIt's difficult to get both the batch submitter logs near the same time as the relayer logs because the `ops_batch_submitter_1` logs only seem to update when backing out of and returning to the `LOGS` tab in the UI.\r\n",
  "closed_by": {
    "login": "smartcontracts",
    "id": 14298799,
    "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/smartcontracts",
    "html_url": "https://github.com/smartcontracts",
    "followers_url": "https://api.github.com/users/smartcontracts/followers",
    "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
    "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
    "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
    "repos_url": "https://api.github.com/users/smartcontracts/repos",
    "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840769460",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-840769460",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 840769460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDc2OTQ2MA==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-13T19:05:54Z",
    "updated_at": "2021-05-13T19:05:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "The logline in `ops_relayer_1` that says `Did not find L2->L1 messages` is suspect. You can get the combined logs with:\r\n\r\n```\r\ndocker-compose logs op_relayer_1 ops_batch_submitter_1\r\n```\r\n\r\nor\r\n\r\n```\r\ndocker-compose logs | egrep 'batch_submitter|relayer'\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840769460/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840777383",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-840777383",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 840777383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDc3NzM4Mw==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-13T19:19:46Z",
    "updated_at": "2021-05-13T19:19:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Taking a look now",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840777383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840788449",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-840788449",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 840788449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDc4ODQ0OQ==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-13T19:41:08Z",
    "updated_at": "2021-05-13T19:44:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Unable to reproduce against `develop`. Here's my only test failure:\r\n\r\n```\r\n[0]       [WITHDRAW] when withdrawing SNX from L2 to L1\r\n[0]         when waiting for the tx to complete on L2\r\n[0]           when a user has the expected amount of SNX in L2\r\n[0]             ✓ shows the user has SNX\r\n[0]             when the SNX rate has been updated\r\n[0]               when initiation is suspended on L2\r\n[0]                 ✓ reverts when the user attempts to initiate a withdrawal\r\n[0]               before a user initiates a withdrawal on L2\r\n[0]                 ✓ inititation is active on both layers\r\n[0]                 when a user initiates a withdrawal on L2\r\n[0]                   ✓ reduces the users balance\r\n[0]                   ✓ inititation is deactivated on L1\r\n[0]                   when waiting for the tx to complete on L1\r\n[0]                     1) emitted a WithdrawalFinalized event <----------------- only test failure is here\r\n[0]                     ✓ shows that the users L1 balance increased\r\n[0]                     ✓ shows that the escrow balance decreased\r\n``",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840788449/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840792044",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-840792044",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 840792044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDc5MjA0NA==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-13T19:47:52Z",
    "updated_at": "2021-05-13T19:47:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://asciinema.org/a/5kJA5oM4jjc1IetH9rW34p3pT",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/840792044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/841424494",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-841424494",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 841424494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTQyNDQ5NA==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-14T18:29:34Z",
    "updated_at": "2021-05-14T18:29:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @ajsantander",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/841424494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842596049",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-842596049",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 842596049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjU5NjA0OQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T20:06:24Z",
    "updated_at": "2021-05-17T20:06:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are the full logs of the batch submitter and relayer while I ran these tests again (still hanging) and had to restart both services:\r\n\r\n[bs-and-relayer-logs-of-synthetix-tests.zip](https://github.com/ethereum-optimism/optimism/files/6496579/bs-and-relayer-logs-of-synthetix-tests.zip)\r\n\r\nI also added a few comments, that you can find by searching for \"---------\" (number of `-`s matters), that I think may help",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842596049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842620934",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-842620934",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 842620934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjYyMDkzNA==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T20:34:59Z",
    "updated_at": "2021-05-17T20:34:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ale from Synthetix ran a few experiments that failed:\r\n> 1. Spun up `ops`, waited 10 minutes, deployed the Synthetix instances, waited 10 minutes, and only then started the tests. Tests timed out in withdrawals.\r\n> 2. Let the test run for an hour during a \"hang\". No changes.\r\n> 3. Tried sending transactions on both chains during a hang every few seconds, to see if it revived the watcher. Nothing...\r\n>\r\n> Before it was just the withdrawal finalization watchers, now its any finalization watcher\r\n\r\ncc: @smartcontracts @tynes",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842620934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842661760",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-842661760",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 842661760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjY2MTc2MA==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T21:43:07Z",
    "updated_at": "2021-05-17T21:43:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platocrat I'm away from my desktop until late tomorrow and I have a hard time spinning up the whole system on my laptop. I'll get back to this on Weds.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842661760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842662894",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-842662894",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 842662894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjY2Mjg5NA==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T21:45:15Z",
    "updated_at": "2021-05-17T21:45:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmmm those logs are quite interesting. Especially:\r\n\r\n```\r\n----------------- RELAYER and BATCH SUBMITTER ARE RESTARTED -----------------\r\n\r\nrelayer_1            | {\"level\":30,\"time\":1621277317406,\"msg\":\"Service is starting...\"}\r\nrelayer_1            | {\"level\":30,\"time\":1621277317408,\"msg\":\"Service is initializing...\"}\r\n```\r\n\r\ncc @tynes why would the relayer be restarting? Is it getting OOM killed?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842662894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842696485",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-842696485",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 842696485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjY5NjQ4NQ==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T23:01:18Z",
    "updated_at": "2021-05-17T23:06:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hmmm those logs are quite interesting. Especially:\r\n> \r\n> ```\r\n> ----------------- RELAYER and BATCH SUBMITTER ARE RESTARTED -----------------\r\n> \r\n> relayer_1            | {\"level\":30,\"time\":1621277317406,\"msg\":\"Service is starting...\"}\r\n> relayer_1            | {\"level\":30,\"time\":1621277317408,\"msg\":\"Service is initializing...\"}\r\n> ```\r\n> \r\n> cc @tynes why would the relayer be restarting? Is it getting OOM killed?\r\n\r\nI initiated the restart lol\r\n\r\n> Here are the full logs of the batch submitter and relayer while I ran these tests again (still hanging) and **_had to restart both services_**:\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/842696485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/844321726",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-844321726",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 844321726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDMyMTcyNg==",
    "user": {
      "login": "platocrat",
      "id": 37757724,
      "node_id": "MDQ6VXNlcjM3NzU3NzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platocrat",
      "html_url": "https://github.com/platocrat",
      "followers_url": "https://api.github.com/users/platocrat/followers",
      "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
      "organizations_url": "https://api.github.com/users/platocrat/orgs",
      "repos_url": "https://api.github.com/users/platocrat/repos",
      "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platocrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-19T17:37:05Z",
    "updated_at": "2021-05-19T17:37:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho is I know Ale is blocked on this, is this also blocking Synthetix collectively?\r\nI'm wondering how to move forward with this issue",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/844321726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/844438679",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-844438679",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 844438679,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDQzODY3OQ==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-19T20:16:19Z",
    "updated_at": "2021-05-19T20:16:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is also starting to block our CI - see timeout withdrawal: https://github.com/ethereum-optimism/optimism/pull/917/checks?check_run_id=2623010867",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/844438679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/845475903",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/849#issuecomment-845475903",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/849",
    "id": 845475903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTQ3NTkwMw==",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-20T21:04:50Z",
    "updated_at": "2021-05-20T21:06:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe this is now fixed as of #926 :-) going to close unless anyone else starts to see this issue again. Please remember to perform the following steps to use the latest version of this repo:\r\n```\r\ncd optimism\r\ngit fetch\r\ngit checkout develop\r\ngit pull origin develop\r\nyarn clean\r\nyarn build\r\ncd ops\r\ndocker-compose down -v\r\ndocker-compose build --parallel\r\ndocker-compose up # optional, only if you want to spin the system up\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/845475903/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

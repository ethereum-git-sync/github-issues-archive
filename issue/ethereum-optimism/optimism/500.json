{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/500",
  "id": 861955805,
  "node_id": "MDU6SXNzdWU4NjE5NTU4MDU=",
  "number": 500,
  "title": "Depositing ETH from L1 to L2 costs too much gas",
  "user": {
    "login": "snario",
    "id": 1933029,
    "node_id": "MDQ6VXNlcjE5MzMwMjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1933029?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/snario",
    "html_url": "https://github.com/snario",
    "followers_url": "https://api.github.com/users/snario/followers",
    "following_url": "https://api.github.com/users/snario/following{/other_user}",
    "gists_url": "https://api.github.com/users/snario/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/snario/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/snario/subscriptions",
    "organizations_url": "https://api.github.com/users/snario/orgs",
    "repos_url": "https://api.github.com/users/snario/repos",
    "events_url": "https://api.github.com/users/snario/events{/privacy}",
    "received_events_url": "https://api.github.com/users/snario/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "elenadimitrova",
    "id": 703848,
    "node_id": "MDQ6VXNlcjcwMzg0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/elenadimitrova",
    "html_url": "https://github.com/elenadimitrova",
    "followers_url": "https://api.github.com/users/elenadimitrova/followers",
    "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
    "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
    "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
    "repos_url": "https://api.github.com/users/elenadimitrova/repos",
    "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
    "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "elenadimitrova",
      "id": 703848,
      "node_id": "MDQ6VXNlcjcwMzg0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elenadimitrova",
      "html_url": "https://github.com/elenadimitrova",
      "followers_url": "https://api.github.com/users/elenadimitrova/followers",
      "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
      "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
      "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
      "repos_url": "https://api.github.com/users/elenadimitrova/repos",
      "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "ben-chain",
      "id": 10091895,
      "node_id": "MDQ6VXNlcjEwMDkxODk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10091895?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben-chain",
      "html_url": "https://github.com/ben-chain",
      "followers_url": "https://api.github.com/users/ben-chain/followers",
      "following_url": "https://api.github.com/users/ben-chain/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben-chain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben-chain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben-chain/subscriptions",
      "organizations_url": "https://api.github.com/users/ben-chain/orgs",
      "repos_url": "https://api.github.com/users/ben-chain/repos",
      "events_url": "https://api.github.com/users/ben-chain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben-chain/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2021-04-19T21:37:34Z",
  "updated_at": "2021-05-18T17:51:39Z",
  "closed_at": "2021-05-18T17:51:39Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "An L1 -> L2 deposit looks as though it is costing ~240,000 gas which is significantly more than what you'd expect for a relatively simple transfer. The figure is large because the contracts do some rate limiting on the number of L1 -> L2 `enQueue`s. It seems like that could be optimized. As a first step, one should do an audit of this code path and try to profile what operations are inflating the gas cost.",
  "closed_by": {
    "login": "elenadimitrova",
    "id": 703848,
    "node_id": "MDQ6VXNlcjcwMzg0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/elenadimitrova",
    "html_url": "https://github.com/elenadimitrova",
    "followers_url": "https://api.github.com/users/elenadimitrova/followers",
    "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
    "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
    "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
    "repos_url": "https://api.github.com/users/elenadimitrova/repos",
    "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
    "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822807187",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-822807187",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 822807187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjgwNzE4Nw==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T21:45:46Z",
    "updated_at": "2021-04-19T21:45:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @ben-chain @maurelian ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822807187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822842523",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-822842523",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 822842523,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjg0MjUyMw==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T22:57:42Z",
    "updated_at": "2021-04-19T22:57:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "We need to map out a few low hanging fruit here for decreasing deposit gas cost, as over 1,000 people will be depositing ETH in a couple weeks to use Synthetix Exchange",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822842523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822843070",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-822843070",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 822843070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjg0MzA3MA==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-19T22:59:11Z",
    "updated_at": "2021-04-19T22:59:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "1. Remove the messageNonce (read the length of the CTC queue instead)\r\n2. Remove the gas burn in `enqueue`\r\n3. Remove the sentMessages mapping storage. (Later, add functionality for `replayMessage` that allows providing an inclusion proof to the queue element)\r\n4. Generally clean up the gateway to make fewer cross contract calls",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/822843070/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/823170953",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-823170953",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 823170953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzE3MDk1Mw==",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T10:38:36Z",
    "updated_at": "2021-04-20T10:38:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "K-Ho's changes are good suggestions, I'd have to look more closely to come up with more. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/823170953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/824318652",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-824318652",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 824318652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNDMxODY1Mg==",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-21T19:56:22Z",
    "updated_at": "2021-04-21T19:56:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @elenadimitrova ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/824318652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825146829",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825146829",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825146829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTE0NjgyOQ==",
    "user": {
      "login": "ben-chain",
      "id": 10091895,
      "node_id": "MDQ6VXNlcjEwMDkxODk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10091895?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben-chain",
      "html_url": "https://github.com/ben-chain",
      "followers_url": "https://api.github.com/users/ben-chain/followers",
      "following_url": "https://api.github.com/users/ben-chain/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben-chain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben-chain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben-chain/subscriptions",
      "organizations_url": "https://api.github.com/users/ben-chain/orgs",
      "repos_url": "https://api.github.com/users/ben-chain/repos",
      "events_url": "https://api.github.com/users/ben-chain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben-chain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T20:01:46Z",
    "updated_at": "2021-04-22T20:01:46Z",
    "author_association": "COLLABORATOR",
    "body": "WRT 4., I do not think the gateway does any more than the two minimum required calls for transferring and enqueueing.  1.-3. look great though and will be big improvements :D ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825146829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825164389",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825164389",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825164389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTE2NDM4OQ==",
    "user": {
      "login": "elenadimitrova",
      "id": 703848,
      "node_id": "MDQ6VXNlcjcwMzg0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elenadimitrova",
      "html_url": "https://github.com/elenadimitrova",
      "followers_url": "https://api.github.com/users/elenadimitrova/followers",
      "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
      "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
      "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
      "repos_url": "https://api.github.com/users/elenadimitrova/repos",
      "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T20:30:55Z",
    "updated_at": "2021-04-22T20:30:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Making constructor initialised variables `immutable` will also help with reducing storage reads",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825164389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825165056",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825165056",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825165056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTE2NTA1Ng==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T20:32:09Z",
    "updated_at": "2021-04-22T20:32:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "A deposit into zksync takes about 60,000 gas for reference, see:\r\nhttps://etherscan.io/tx/0xe16b21b5c8eb3ee61e15663502c7bec3a982e5ca2187ff98f7fe72e094b80386",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825165056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825172956",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825172956",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825172956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTE3Mjk1Ng==",
    "user": {
      "login": "elenadimitrova",
      "id": 703848,
      "node_id": "MDQ6VXNlcjcwMzg0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elenadimitrova",
      "html_url": "https://github.com/elenadimitrova",
      "followers_url": "https://api.github.com/users/elenadimitrova/followers",
      "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
      "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
      "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
      "repos_url": "https://api.github.com/users/elenadimitrova/repos",
      "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T20:44:58Z",
    "updated_at": "2021-04-22T20:44:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tynes This tx is depositing ETH rather than ERC20 and is thus much lighter. Still we can improve our numbers for sure. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825172956/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825174665",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825174665",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825174665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTE3NDY2NQ==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T20:47:44Z",
    "updated_at": "2021-04-22T20:47:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @tynes This tx is depositing ETH rather than ERC20 and is thus much lighter. Still we can improve our numbers for sure.\r\n\r\nNote that there is a way to deposit ETH directly, see https://github.com/ethereum-optimism/contracts/pull/311",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825174665/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825831333",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-825831333",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 825831333,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTgzMTMzMw==",
    "user": {
      "login": "ben-chain",
      "id": 10091895,
      "node_id": "MDQ6VXNlcjEwMDkxODk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10091895?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben-chain",
      "html_url": "https://github.com/ben-chain",
      "followers_url": "https://api.github.com/users/ben-chain/followers",
      "following_url": "https://api.github.com/users/ben-chain/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben-chain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben-chain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben-chain/subscriptions",
      "organizations_url": "https://api.github.com/users/ben-chain/orgs",
      "repos_url": "https://api.github.com/users/ben-chain/repos",
      "events_url": "https://api.github.com/users/ben-chain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben-chain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T18:09:52Z",
    "updated_at": "2021-04-23T18:09:52Z",
    "author_association": "COLLABORATOR",
    "body": "In terms of headaches that might arise from this, the main thing should be if anywhere in the `message-relayer` service which completes withdrawals by providing the transaction and witness on L1 has some sort of assumption that messageNonces are strictly incrementing.  This is because using the `queue.length` as the nonce could mean someone else calls enqueue, so that the cross-domain message nonce being set by the `L1CrossDomainMessenger` would jump up by more than 1.  I don't *think* that the service makes this assumption -- should just use the value emitted by events -- but that would be the most likely thing I would expect to see breaking integration tests.\r\n\r\nA general comment on the crossdomainmessengers is that IMO the `Abs_BaseCrossDomainMessenger` inheritance model is not particularly good, and especially with these changes, the implementations on L1 and L2 are even less symmetric.  So I think it could be worthwhile to break out a `Lib_CrossDomainUtils.sol` library for any shared pure functions we want to have, and then have the messengers still share an interface, but not inherit from a parent implementation.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825831333/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828745489",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-828745489",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 828745489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODc0NTQ4OQ==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T20:12:01Z",
    "updated_at": "2021-04-28T20:12:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Remove the gas burn in `enqueue`\r\n\r\nHave we considered making users pay a fee to the sequencer on L1 for the enqueue txs instead of burning the gas? The fee could attempt to cover the cost of the batch submission. The charged fee will always have to be a guess on how much the batch submission will cost without some sort of engineered hedging\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/828745489/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829326347",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-829326347",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 829326347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTMyNjM0Nw==",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T15:16:29Z",
    "updated_at": "2021-04-29T18:06:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Re: @K-Ho's brief spec [above ](https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-822843070)\r\n\r\n> 3. Remove the `sentMessages` mapping storage. (Later, add functionality for `replayMessage` that allows providing an inclusion proof to the queue element)\r\n\r\nA note about `replayMessage()`: it currently serves no purpose, but will be useful when we begin enforcing \"[gas limit epochs](https://github.com/ethereum-optimism/optimism/blob/56c441a2e140efb8bebb29f00ad9bc3dfef2ce40/specs/protocol/components/execution.md#L135)\", so it does make sense IMO to remove it for now, leaving some kind of note behind about it. \r\n\r\nWhen it is time to reimplement it, the way to do the inclusion proof will be ~~to make a call to `CTC.verifyTransaction()`, verifying the transaction `enqueued` according to the call made in [`_sendXDomainMessage()`](https://github.com/ethereum-optimism/optimism/blob/56c441a2e140efb8bebb29f00ad9bc3dfef2ce40/packages/contracts/contracts/optimistic-ethereum/OVM/bridge/messaging/OVM_L1CrossDomainMessenger.sol#L342).~~\r\n\r\n**Edit:** this is a much easier way:\r\n\r\n<details>\r\n<summary>Take a queue index argument, and call `getQueueElement()`, then compare the `transactionHashes`. <br/>\r\nie. _something_ like this:\r\n</summary>\r\n\r\n```\r\n  function replayMessage(\r\n        address _target,\r\n        address _sender,\r\n        bytes memory _message,\r\n        uint256 _queueIndex,\r\n        uint32 _gasLimit\r\n    )\r\n        override\r\n        public\r\n    {\r\n\r\n        // Verify that the message is in the queue:\r\n        QueueElement element = iOVM_CanonicalTransactionChain(resolve(\"OVM_CanonicalTransactionChain\")).getQueueElement(_queueIndex);\r\n\r\n       // Compute the transactionHash\r\n       bytes32 transactionHash = keccak256(                  \r\n            abi.encode(\r\n                address(this), \r\n                resolve(\"OVM_L2CrossDomainMessenger\"),\r\n                _gasLimit,\r\n                _message\r\n            )\r\n        );\r\n\r\n        require(\r\n            transactionHash == element.transactionHash,\r\n            \"Provided message has not been enqueued.\"\r\n        );\r\n\r\n        bytes memory xDomainCalldata = _getXDomainCalldata(\r\n            _target,\r\n            _sender,\r\n            _message,\r\n            _messageNonce\r\n        );\r\n\r\n        _sendXDomainMessage(xDomainCalldata, _gasLimit);\r\n    }\r\n```\r\n\r\n<\\details>",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829326347/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829423434",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/500#issuecomment-829423434",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/500",
    "id": 829423434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTQyMzQzNA==",
    "user": {
      "login": "ben-chain",
      "id": 10091895,
      "node_id": "MDQ6VXNlcjEwMDkxODk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10091895?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben-chain",
      "html_url": "https://github.com/ben-chain",
      "followers_url": "https://api.github.com/users/ben-chain/followers",
      "following_url": "https://api.github.com/users/ben-chain/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben-chain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben-chain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben-chain/subscriptions",
      "organizations_url": "https://api.github.com/users/ben-chain/orgs",
      "repos_url": "https://api.github.com/users/ben-chain/repos",
      "events_url": "https://api.github.com/users/ben-chain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben-chain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T16:46:57Z",
    "updated_at": "2021-04-29T16:46:57Z",
    "author_association": "COLLABORATOR",
    "body": "> > Remove the gas burn in `enqueue`\r\n> \r\n> Have we considered making users pay a fee to the sequencer on L1 for the enqueue txs instead of burning the gas? The fee could attempt to cover the cost of the batch submission. The charged fee will always have to be a guess on how much the batch submission will cost without some sort of engineered hedging\r\n\r\nI think this is a good idea although the devEx is worse because this would require paying ETH at the end of the deposit code path, which may be somewhat annoying to implement.  Curious of folks' thoughts on that.  I do think that the MVP gas reduction is just to not charge the extra gas any more, and delegate this work to a future ticket if we think the DoS is an actually pressing issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/829423434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301",
  "id": 1648201608,
  "node_id": "I_kwDODjvEJM5iPY-I",
  "number": 5301,
  "title": "Transactions get stuck for hours (even days) and they never get included on-chain",
  "user": {
    "login": "dimriou",
    "id": 20386008,
    "node_id": "MDQ6VXNlcjIwMzg2MDA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/20386008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dimriou",
    "html_url": "https://github.com/dimriou",
    "followers_url": "https://api.github.com/users/dimriou/followers",
    "following_url": "https://api.github.com/users/dimriou/following{/other_user}",
    "gists_url": "https://api.github.com/users/dimriou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dimriou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dimriou/subscriptions",
    "organizations_url": "https://api.github.com/users/dimriou/orgs",
    "repos_url": "https://api.github.com/users/dimriou/repos",
    "events_url": "https://api.github.com/users/dimriou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dimriou/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "K-Ho",
    "id": 5341583,
    "node_id": "MDQ6VXNlcjUzNDE1ODM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/K-Ho",
    "html_url": "https://github.com/K-Ho",
    "followers_url": "https://api.github.com/users/K-Ho/followers",
    "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
    "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
    "organizations_url": "https://api.github.com/users/K-Ho/orgs",
    "repos_url": "https://api.github.com/users/K-Ho/repos",
    "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
    "received_events_url": "https://api.github.com/users/K-Ho/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-03-30T19:38:10Z",
  "updated_at": "2023-05-11T11:09:59Z",
  "closed_at": "2023-05-11T11:08:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n**Describe the bug**\r\nOver the past few weeks, weâ€™ve encountered an issue on Optimism Goerli. Our transactions are getting stuck for hours (even days) and they never get included on-chain even though the gas values are aligned with the market prices. For example I found one specific tx that has been stuck for at least 12 hours (`0x9c6c7497c33188c2fdb2dfaa019bc5f282f3a111afe2f18fe66a392c01ed9e26`) with  feeCap=6.450009038 gwei while other transactions get included with far less feeCap (i.e. [1 Gwei](https://goerli-optimism.etherscan.io/tx/0x91b593da5c7f88037573f642b0404d79921eb3b9a8b3c3ffdba8d21c66b95ffb)). It would be expected for our transaction not to be included if we only tried once, but we have a retry mechanism that re-sends the same attempt over and over and the response is always that it is already known (classified as [TransactionAlreadyInMempool](https://github.com/smartcontractkit/chainlink/blob/develop/core/chains/evm/client/errors.go#L82) error in our transaction manager). I would assume that eventually a tx that is already in mempool, will be included in a future block at some point, especially if the price is higher than the rest txs. We also utilize at least 2 different RPC endpoints from external providers so the chance of being a provider issue is very low.\r\n\r\n**To Reproduce**\r\nThis occurs from time to time on CL's nodes deployed on testnet.\r\n\r\n**Expected behavior**\r\nWe expect transactions that include gas prices close to the market fees, to eventually be included and not stay in mempool for multiple hours.",
  "closed_by": {
    "login": "smartcontracts",
    "id": 14298799,
    "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/smartcontracts",
    "html_url": "https://github.com/smartcontracts",
    "followers_url": "https://api.github.com/users/smartcontracts/followers",
    "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
    "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
    "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
    "repos_url": "https://api.github.com/users/smartcontracts/repos",
    "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1507212098",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301#issuecomment-1507212098",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
    "id": 1507212098,
    "node_id": "IC_kwDODjvEJM5Z1jtC",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-13T15:56:01Z",
    "updated_at": "2023-04-13T15:56:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "In discussion with Chainlink, we've identified that the root cause of this issue was CL getting false confirmations of txs being confirmed, and then sending transactions with future nonces, which then got stuck in the mempool. We believe this should fix the issue that was causing transactions to be treated as confirmed, when they were never actually included by the sequencer:\r\n\r\nhttps://github.com/ethereum-optimism/op-geth/pull/80",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1507212098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1515085974",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301#issuecomment-1515085974",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
    "id": 1515085974,
    "node_id": "IC_kwDODjvEJM5aTmCW",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-19T17:10:30Z",
    "updated_at": "2023-04-19T17:10:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@K-Ho is this resolved?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1515085974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1522649461",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301#issuecomment-1522649461",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
    "id": 1522649461,
    "node_id": "IC_kwDODjvEJM5awcl1",
    "user": {
      "login": "K-Ho",
      "id": 5341583,
      "node_id": "MDQ6VXNlcjUzNDE1ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/K-Ho",
      "html_url": "https://github.com/K-Ho",
      "followers_url": "https://api.github.com/users/K-Ho/followers",
      "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
      "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
      "organizations_url": "https://api.github.com/users/K-Ho/orgs",
      "repos_url": "https://api.github.com/users/K-Ho/repos",
      "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
      "received_events_url": "https://api.github.com/users/K-Ho/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T01:55:35Z",
    "updated_at": "2023-04-26T01:55:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "the fix should be included in https://github.com/ethereum-optimism/op-geth/releases/tag/v1.101105.1 , but let us know if the issue goes away @dimriou ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1522649461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1543796155",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301#issuecomment-1543796155",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
    "id": 1543796155,
    "node_id": "IC_kwDODjvEJM5cBHW7",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-11T11:08:18Z",
    "updated_at": "2023-05-11T11:08:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Going to close but happy to re-open if the issue appears again",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1543796155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1543798869",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5301#issuecomment-1543798869",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5301",
    "id": 1543798869,
    "node_id": "IC_kwDODjvEJM5cBIBV",
    "user": {
      "login": "dimriou",
      "id": 20386008,
      "node_id": "MDQ6VXNlcjIwMzg2MDA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20386008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dimriou",
      "html_url": "https://github.com/dimriou",
      "followers_url": "https://api.github.com/users/dimriou/followers",
      "following_url": "https://api.github.com/users/dimriou/following{/other_user}",
      "gists_url": "https://api.github.com/users/dimriou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dimriou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dimriou/subscriptions",
      "organizations_url": "https://api.github.com/users/dimriou/orgs",
      "repos_url": "https://api.github.com/users/dimriou/repos",
      "events_url": "https://api.github.com/users/dimriou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dimriou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-11T11:09:59Z",
    "updated_at": "2023-05-11T11:09:59Z",
    "author_association": "NONE",
    "body": "Issue seems to have been fixed. Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1543798869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

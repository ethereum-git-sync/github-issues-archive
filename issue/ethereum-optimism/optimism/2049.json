{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/2049",
  "id": 1111942681,
  "node_id": "I_kwDODjvEJM5CRuYZ",
  "number": 2049,
  "title": "Invalid JSON-RPC response on Kovan testnet",
  "user": {
    "login": "palango",
    "id": 90851,
    "node_id": "MDQ6VXNlcjkwODUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/90851?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palango",
    "html_url": "https://github.com/palango",
    "followers_url": "https://api.github.com/users/palango/followers",
    "following_url": "https://api.github.com/users/palango/following{/other_user}",
    "gists_url": "https://api.github.com/users/palango/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palango/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palango/subscriptions",
    "organizations_url": "https://api.github.com/users/palango/orgs",
    "repos_url": "https://api.github.com/users/palango/repos",
    "events_url": "https://api.github.com/users/palango/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palango/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 2930018676,
      "node_id": "MDU6TGFiZWwyOTMwMDE4Njc2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-unconfirmed",
      "name": "P-unconfirmed",
      "color": "BFD4F2",
      "default": false,
      "description": "Issue might be valid, but itâ€™s not yet confirmed"
    },
    {
      "id": 3357535896,
      "node_id": "MDU6TGFiZWwzMzU3NTM1ODk2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/M-l2geth",
      "name": "M-l2geth",
      "color": "FBCA04",
      "default": false,
      "description": "Module: l2geth"
    },
    {
      "id": 3758870754,
      "node_id": "LA_kwDODjvEJM7gC9Di",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/N-kovan",
      "name": "N-kovan",
      "color": "D4C5F9",
      "default": false,
      "description": "Network: kovan"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-01-23T18:03:57Z",
  "updated_at": "2022-01-24T10:47:12Z",
  "closed_at": "2022-01-23T21:02:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nI'm trying to deploy some contracts, but I'm running into invalid JSON-RPC responses of the official https://kovan.optimism.io endpoint.\r\n\r\nI'm using brownie to deploy the contracts and added some logging. I ommited all uninteresting logs before, but can provide them if you need them. Below you see that the transaction to deploy the contract sends back a transaction hash. brownie then tries to get more informarion about this tx with the `eth_getTransactionByHash`, to which a result without either `result` or `error` keys is returned. According to the [specification](https://www.jsonrpc.org/specification) this is invalid and brownie crashes at this point.\r\n```\r\n{'jsonrpc': '2.0', 'result': HexBytes('0xab2d73293b8dba25fc4ee17dfad9b5d1f16c9c1bd43a4c8982291467141c650a'), 'id': 11}\r\nTransaction sent: 0xab2d73293b8dba25fc4ee17dfad9b5d1f16c9c1bd43a4c8982291467141c650a\r\nMaking request. Method: eth_getTransactionByHash ('0xab2d73293b8dba25fc4ee17dfad9b5d1f16c9c1bd43a4c8982291467141c650a',)\r\n{'jsonrpc': '2.0', 'id': 12}\r\n  File \"brownie/_cli/run.py\", line 50, in main\r\n    return_value, frame = run(\r\n  File \"brownie/project/scripts.py\", line 103, in run\r\n    return_value = f_locals[method_name](*args, **kwargs)\r\n  File \"./scripts/deploy.py\", line 13, in main\r\n    MintableToken.deploy(int(1e18), {\"from\": deployer})\r\n  File \"brownie/network/contract.py\", line 524, in __call__\r\n    return tx[\"from\"].deploy(\r\n  File \"brownie/network/account.py\", line 510, in deploy\r\n    receipt, exc = self._make_transaction(\r\n  File \"brownie/network/account.py\", line 759, in _make_transaction\r\n    receipt = TransactionReceipt(\r\n  File \"brownie/network/transaction.py\", line 198, in __init__\r\n    tx: Dict = web3.eth.get_transaction(HexBytes(self.txid))\r\n  File \"web3/eth.py\", line 617, in get_transaction\r\n    return self._get_transaction(transaction_hash)\r\n  File \"web3/module.py\", line 57, in caller\r\n    result = w3.manager.request_blocking(method_str,\r\n  File \"web3/manager.py\", line 188, in request_blocking\r\n    return self.formatted_response(response,\r\n  File \"web3/manager.py\", line 170, in formatted_response\r\n    elif response['result'] in NULL_RESPONSES:\r\nKeyError: 'result'\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Send a tx deploying a new contract\r\n2. Call `eth_getTransactionByHash` with the returned tx hash\r\n\r\n**Expected behavior**\r\nThe response should be valid and return information about the transaction.\r\n\r\n**System Specs:**\r\n - OS: macOS\r\n - Package Version: Optimism Kovan testnet (Started not working on Friday, still happens as of now. Wasn't broken beginning of last week)\r\n",
  "closed_by": {
    "login": "mslipper",
    "id": 67953,
    "node_id": "MDQ6VXNlcjY3OTUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67953?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mslipper",
    "html_url": "https://github.com/mslipper",
    "followers_url": "https://api.github.com/users/mslipper/followers",
    "following_url": "https://api.github.com/users/mslipper/following{/other_user}",
    "gists_url": "https://api.github.com/users/mslipper/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mslipper/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mslipper/subscriptions",
    "organizations_url": "https://api.github.com/users/mslipper/orgs",
    "repos_url": "https://api.github.com/users/mslipper/repos",
    "events_url": "https://api.github.com/users/mslipper/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mslipper/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019559745",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2049#issuecomment-1019559745",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049",
    "id": 1019559745,
    "node_id": "IC_kwDODjvEJM48xT9B",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T20:21:29Z",
    "updated_at": "2022-01-23T20:21:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds like possibly another proxyd issue? cc @mslipper ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019559745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019560038",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2049#issuecomment-1019560038",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049",
    "id": 1019560038,
    "node_id": "IC_kwDODjvEJM48xUBm",
    "user": {
      "login": "mslipper",
      "id": 67953,
      "node_id": "MDQ6VXNlcjY3OTUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mslipper",
      "html_url": "https://github.com/mslipper",
      "followers_url": "https://api.github.com/users/mslipper/followers",
      "following_url": "https://api.github.com/users/mslipper/following{/other_user}",
      "gists_url": "https://api.github.com/users/mslipper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mslipper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mslipper/subscriptions",
      "organizations_url": "https://api.github.com/users/mslipper/orgs",
      "repos_url": "https://api.github.com/users/mslipper/repos",
      "events_url": "https://api.github.com/users/mslipper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mslipper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T20:23:31Z",
    "updated_at": "2022-01-23T20:23:31Z",
    "author_association": "COLLABORATOR",
    "body": "Yep, I'll have this fixed shortly.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019560038/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019565390",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2049#issuecomment-1019565390",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049",
    "id": 1019565390,
    "node_id": "IC_kwDODjvEJM48xVVO",
    "user": {
      "login": "mslipper",
      "id": 67953,
      "node_id": "MDQ6VXNlcjY3OTUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mslipper",
      "html_url": "https://github.com/mslipper",
      "followers_url": "https://api.github.com/users/mslipper/followers",
      "following_url": "https://api.github.com/users/mslipper/following{/other_user}",
      "gists_url": "https://api.github.com/users/mslipper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mslipper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mslipper/subscriptions",
      "organizations_url": "https://api.github.com/users/mslipper/orgs",
      "repos_url": "https://api.github.com/users/mslipper/repos",
      "events_url": "https://api.github.com/users/mslipper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mslipper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T20:56:07Z",
    "updated_at": "2022-01-23T20:56:07Z",
    "author_association": "COLLABORATOR",
    "body": "Hi @palango,\r\n\r\nThis should be fixed now. I deployed the contents of the above PR separately, since `develop` currently contains additional changes we want to test before deploying to Kovan. Please let me know if you see any other issues.\r\n\r\nNote that last Friday we changed kovan.optimism.io to route most RPCs to infrastructure providers like Infura and Alchemy rather than the sequencer. We did this to match how mainnet works and protect the sequencer from experiencing too much load. This means that you'll need to retry for a couple of seconds if the transaction you just submitted comes back as `null` from the `eth_getTransactionByHash` endpoint. Most Ethereum libraries do this automatically, but I wanted to point this out in case brownie doesn't.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019565390/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019962164",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2049#issuecomment-1019962164",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2049",
    "id": 1019962164,
    "node_id": "IC_kwDODjvEJM48y2M0",
    "user": {
      "login": "palango",
      "id": 90851,
      "node_id": "MDQ6VXNlcjkwODUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/90851?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/palango",
      "html_url": "https://github.com/palango",
      "followers_url": "https://api.github.com/users/palango/followers",
      "following_url": "https://api.github.com/users/palango/following{/other_user}",
      "gists_url": "https://api.github.com/users/palango/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/palango/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/palango/subscriptions",
      "organizations_url": "https://api.github.com/users/palango/orgs",
      "repos_url": "https://api.github.com/users/palango/repos",
      "events_url": "https://api.github.com/users/palango/events{/privacy}",
      "received_events_url": "https://api.github.com/users/palango/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T10:47:12Z",
    "updated_at": "2022-01-24T10:47:12Z",
    "author_association": "NONE",
    "body": "@mslipper That fixed the problems for me, thanks for looking at it so quickly!",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1019962164/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/6365",
  "id": 1813205356,
  "node_id": "I_kwDODjvEJM5sE1Fs",
  "number": 6365,
  "title": "Triggering extraData doing finalizeBridgeERC20",
  "user": {
    "login": "egonspace",
    "id": 24305489,
    "node_id": "MDQ6VXNlcjI0MzA1NDg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/24305489?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/egonspace",
    "html_url": "https://github.com/egonspace",
    "followers_url": "https://api.github.com/users/egonspace/followers",
    "following_url": "https://api.github.com/users/egonspace/following{/other_user}",
    "gists_url": "https://api.github.com/users/egonspace/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/egonspace/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/egonspace/subscriptions",
    "organizations_url": "https://api.github.com/users/egonspace/orgs",
    "repos_url": "https://api.github.com/users/egonspace/repos",
    "events_url": "https://api.github.com/users/egonspace/events{/privacy}",
    "received_events_url": "https://api.github.com/users/egonspace/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-07-20T05:47:24Z",
  "updated_at": "2023-07-28T16:18:40Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\nI want to trigger a contract call while bridging the ERC20 token, but `extraData` of `finalizeBridgeERC20()` function is used only as the purpose of event argument(https://github.com/ethereum-optimism/optimism/blob/427f15ba8c56286d647eaa28197144b192623657/packages/contracts-bedrock/contracts/universal/StandardBridge.sol#L274C24-L274C34\r\n) and not used for calldata. So it's inconvenient for implementing various dapp.\r\n\r\nI wonder if it's because of security reasons or gas cost issues, but `CrossDomainMessenger` has that feature, so I don't think it's that problem either, so why didn't you implement this feature? Is there another problem?\r\n\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1644845891",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6365#issuecomment-1644845891",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365",
    "id": 1644845891,
    "node_id": "IC_kwDODjvEJM5iCltD",
    "user": {
      "login": "egonspace",
      "id": 24305489,
      "node_id": "MDQ6VXNlcjI0MzA1NDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24305489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/egonspace",
      "html_url": "https://github.com/egonspace",
      "followers_url": "https://api.github.com/users/egonspace/followers",
      "following_url": "https://api.github.com/users/egonspace/following{/other_user}",
      "gists_url": "https://api.github.com/users/egonspace/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/egonspace/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/egonspace/subscriptions",
      "organizations_url": "https://api.github.com/users/egonspace/orgs",
      "repos_url": "https://api.github.com/users/egonspace/repos",
      "events_url": "https://api.github.com/users/egonspace/events{/privacy}",
      "received_events_url": "https://api.github.com/users/egonspace/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T00:55:53Z",
    "updated_at": "2023-07-21T00:55:53Z",
    "author_association": "NONE",
    "body": "Of course, it can be a problem for `StandardBridge` to call other contract directly, but isn't it a problem if the Bridge calls it through a proxy in the middle?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1644845891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652499074",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6365#issuecomment-1652499074",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365",
    "id": 1652499074,
    "node_id": "IC_kwDODjvEJM5ifyKC",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-26T21:09:36Z",
    "updated_at": "2023-07-26T21:09:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you describe the usecase in more detail so we can learn and consider new uses of `extraData` in the future? One possible future uses it for `permit2` witness data to allow for single tx deposits of ERC20 tokens",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652499074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652721343",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6365#issuecomment-1652721343",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365",
    "id": 1652721343,
    "node_id": "IC_kwDODjvEJM5igoa_",
    "user": {
      "login": "egonspace",
      "id": 24305489,
      "node_id": "MDQ6VXNlcjI0MzA1NDg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24305489?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/egonspace",
      "html_url": "https://github.com/egonspace",
      "followers_url": "https://api.github.com/users/egonspace/followers",
      "following_url": "https://api.github.com/users/egonspace/following{/other_user}",
      "gists_url": "https://api.github.com/users/egonspace/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/egonspace/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/egonspace/subscriptions",
      "organizations_url": "https://api.github.com/users/egonspace/orgs",
      "repos_url": "https://api.github.com/users/egonspace/repos",
      "events_url": "https://api.github.com/users/egonspace/events{/privacy}",
      "received_events_url": "https://api.github.com/users/egonspace/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T00:23:46Z",
    "updated_at": "2023-07-27T00:28:32Z",
    "author_association": "NONE",
    "body": "Consider, for example, a dapp like a market across multi-chain. The market contract is on L1, but users on Optimism have to buy products after bridging, i.e., he requires two steps.\r\n\r\nFor user convenience, a payment contract can be deployed on Optimism, and if the user pays for this contract, eth can be bridged to L1 and at the same time call the purchase function of the market in L1.\r\n\r\nThe current bridge implementation requires passing eth and passing the purchase function call with `CorssDomainMessenger` separately, but it is difficult for the recipient to combine these two calls into one session.\r\nIn particular, when a _contract_ receives a deposit of bridge assets, the contract cannot receive any notification.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1652721343/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1655958912",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6365#issuecomment-1655958912",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6365",
    "id": 1655958912,
    "node_id": "IC_kwDODjvEJM5is-2A",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T16:18:40Z",
    "updated_at": "2023-07-28T16:18:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "I definitely understand that this would be much cheaper to batch the 2 operations into a single operation. It is possible to do so with a single operation but I am not sure of the security implications of allowing arbitrary extra data to be passed through the bridge calls. This could be considered for a feature in the future, but we would be 100% sure that there are not security issues with this. Until this time, developers will need to send 2 deposits, one for the bridge and one for the call. Note that these will execute atomically on L2 together",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1655958912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

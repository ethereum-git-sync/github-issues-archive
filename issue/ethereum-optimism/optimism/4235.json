{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235",
  "id": 1478104527,
  "node_id": "I_kwDODjvEJM5YGhXP",
  "number": 4235,
  "title": "DTL not syncing - Issue: \"Cannot read properties of null\"",
  "user": {
    "login": "sanbotto",
    "id": 28357728,
    "node_id": "MDQ6VXNlcjI4MzU3NzI4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28357728?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sanbotto",
    "html_url": "https://github.com/sanbotto",
    "followers_url": "https://api.github.com/users/sanbotto/followers",
    "following_url": "https://api.github.com/users/sanbotto/following{/other_user}",
    "gists_url": "https://api.github.com/users/sanbotto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sanbotto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sanbotto/subscriptions",
    "organizations_url": "https://api.github.com/users/sanbotto/orgs",
    "repos_url": "https://api.github.com/users/sanbotto/repos",
    "events_url": "https://api.github.com/users/sanbotto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sanbotto/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-12-06T03:51:43Z",
  "updated_at": "2022-12-13T09:57:28Z",
  "closed_at": "2022-12-07T13:07:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nDTL not syncing, causing the node to be unusable. Issue:\r\n\r\n```\r\n{\"level\":30,\"time\":1670293646497,\"highestSyncedL1Block\":13596687,\"targetL1Block\":13598687,\"msg\":\"Synchronizing events from Layer 1 (Ethereum)\"}\r\n{\"level\":30,\"time\":1670293647013,\"eventName\":\"TransactionEnqueued\",\"numEvents\":24,\"durationMs\":11,\"msg\":\"Processed events\"}\r\n{\"level\":50,\"time\":1670293647489,\"extra\":{\"message\":\"TypeError: Cannot read properties of null (reading 'from')\",\"stack\":\"TypeError: Cannot read properties of null (reading 'from')\\n    at Object.getExtraData (/chaindata/optimism/packages/data-transport-layer/src/services/l1-ingestion/handlers/sequencer-batch-appended.ts:67:32)\\n    at runMicrotasks (<anonymous>)\\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\\n    at async L1IngestionService._syncEvents (/chaindata/optimism/packages/data-transport-layer/src/services/l1-ingestion/service.ts:428:29)\\n    at async L1IngestionService._start (/chaindata/optimism/packages/data-transport-layer/src/services/l1-ingestion/service.ts:244:9)\\n    at async L1IngestionService.start (/chaindata/optimism/packages/common-ts/src/base-service/base-service.ts:69:5)\\n    at async Promise.all (index 1)\\n    at async L1DataTransportService._start (/chaindata/optimism/packages/data-transport-layer/src/services/main/service.ts:139:7)\\n    at async L1DataTransportService.start (/chaindata/optimism/packages/common-ts/src/base-service/base-service.ts:69:5)\\n    at async /chaindata/optimism/packages/data-transport-layer/src/services/run.ts:69:5\"},\"msg\":\"Caught an unhandled error\"}\r\n```\r\n\r\n&#x200B;\r\n\r\n**To Reproduce**\r\n1. Create a new node, either by following the Docker way or the non-Docker way, as per described [here](https://community.optimism.io/docs/developers/build/run-a-node/).\r\n2. If deploying using Docker, start all services with `docker compose up -d`. If deploying without Docker, start DTL running the following from the within `optimism` directory:\r\n    ```\r\n    cd packages/data-transport-layer\r\n    yarn start\r\n    ```\r\n3. If using Docker, an extra step is needed to see the error; you'll have to run this:\r\n    ```\r\n    docker logs --follow optimism-dtl-1\r\n    ```\r\n\r\n&#x200B;\r\n\r\n**Expected behavior**\r\nDTL should actually sync and show no errors.\r\n\r\n&#x200B;\r\n\r\n**System Specs:**\r\n - OS: Ubuntu 20.04.5 LTS\r\n - Kernel: Linux 5.15.0-1026-aws\r\n - Package Version (or commit hash): 6528ae75b (I've also tried with the latest code pulled from GH, which right now corresponds to b1b35c9)\r\n - RAM: 16GB\r\n - vCPUs: 4\r\n - Disk: 1500GiB\r\n - Docker version (for the test that used Docker): 20.10.21\r\n\r\n&#x200B;\r\n\r\n**Additional context**\r\nI have one other node running perfectly fine with this exact same config (and it's actually exactly the same because I used the same Terraform code for the deployment, and I even tried using the same exact commit the other node picked up), the only difference is that the working node was started on Nov 10 and not today (or any previous day but later than Nov 10), which should be irrelevant.\r\n\r\n&#x200B;\r\n\r\n**Env files for the Docker option**\r\n\r\n`.env`:\r\n\r\n```\r\nNETWORK_NAME=mainnet\r\nNODE_TYPE=full\r\nSYNC_SOURCE=l1\r\nHEALTHCHECK__REFERENCE_RPC_PROVIDER=REDACTED_L2_RPC\r\nFAULT_DETECTOR__L1_RPC_PROVIDER=REDACTED_L1_RPC\r\nDATA_TRANSPORT_LAYER__L1_RPC_ENDPOINT=REDACTED_L1_RPC\r\nPORT__L2GETH_HTTP=8545\r\nPORT__L2GETH_WS=8546\r\nPORT__DTL=7878\r\nPORT__HEALTHCHECK_METRICS=7300\r\nRESTART=unless-stopped\r\n```\r\n\r\n`docker-compose.yml`:\r\n\r\n```\r\n---\r\nversion: \"3.4\"\r\nx-logging: &logging\r\n  logging:\r\n    driver: json-file\r\n    options:\r\n      max-size: 10m\r\n      max-file: \"3\"\r\n\r\nservices:\r\n  dtl:\r\n    image: ethereumoptimism/data-transport-layer:0.5.48\r\n    restart: unless-stopped\r\n    env_file:\r\n      - ./envs/mainnet/dtl.env\r\n      - .env\r\n    volumes:\r\n      - /chaindata/optimism/dtl:/db\r\n    ports:\r\n      - 7878:7878\r\n    <<: *logging\r\n\r\n  l2geth:\r\n    image: ethereumoptimism/l2geth:0.5.29\r\n    restart: unless-stopped\r\n    stop_grace_period: 3m\r\n    entrypoint:\r\n      - /bin/sh\r\n      - -c\r\n      - \"/scripts/check-for-chaindata-berlin.sh && /scripts/l2geth-start.sh\"\r\n    env_file:\r\n      - ./envs/mainnet/l2geth.env\r\n      - .env\r\n    volumes:\r\n      - /chaindata/optimism/l2geth:/geth\r\n      - ./scripts/:/scripts/\r\n    ports:\r\n      - 8545:8545\r\n      - 8546:8546\r\n    <<: *logging\r\n\r\n  healthcheck:\r\n    image: ethereumoptimism/replica-healthcheck:1.1.12\r\n    restart: unless-stopped\r\n    env_file:\r\n      - ./envs/mainnet/healthcheck.env\r\n      - .env\r\n    ports:\r\n      - 7300:7300\r\n    <<: *logging\r\n\r\n  influxdb:\r\n    image: quay.io/influxdb/influxdb:2.2.0\r\n    restart: unless-stopped\r\n    env_file:\r\n      - ./envs/mainnet/influxdb.env\r\n    ports:\r\n      - 8086:8086\r\n    volumes:\r\n      - /chaindata/optimism/influxdb_data:/var/lib/influxdb\r\n```\r\n\r\n_PS: I've also tried using images `data-transport-layer:0.5.47`, `l2geth:0.5.29`, `replica-healthcheck:1.1.12` and `influxdb:1.6`._\r\n\r\n&#x200B;\r\n\r\nFor mainnet's `l2geth.env`, I replaced the default `SEQUENCER_CLIENT_HTTP` for the same L2 RPC endpoint used at `.env`.\r\n\r\n&#x200B;\r\n\r\n**Env files for the non-Docker option**\r\n\r\nDTL's `.env`:\r\n\r\n```\r\nDATA_TRANSPORT_LAYER__NODE_ENV=production\r\nDATA_TRANSPORT_LAYER__ETH_NETWORK_NAME=mainnet\r\nDATA_TRANSPORT_LAYER__DB_PATH=/chaindata/optimism/packages/data-transport-layer/db\r\nDATA_TRANSPORT_LAYER__ADDRESS_MANAGER=0xdE1FCfB0851916CA5101820A69b13a4E276bd81F\r\nDATA_TRANSPORT_LAYER__POLLING_INTERVAL=5000\r\nDATA_TRANSPORT_LAYER__DANGEROUSLY_CATCH_ALL_ERRORS=true\r\nDATA_TRANSPORT_LAYER__CONFIRMATIONS=12\r\nDATA_TRANSPORT_LAYER__SERVER_HOSTNAME=localhost\r\nDATA_TRANSPORT_LAYER__SERVER_PORT=7878\r\nDATA_TRANSPORT_LAYER__SYNC_FROM_L1=true\r\nDATA_TRANSPORT_LAYER__DEFAULT_BACKEND=l1\r\nDATA_TRANSPORT_LAYER__L1_GAS_PRICE_BACKEND=l1\r\nDATA_TRANSPORT_LAYER__L1_RPC_ENDPOINT=REDACTED_L1_RPC\r\nDATA_TRANSPORT_LAYER__LOGS_PER_POLLING_INTERVAL=2000\r\nDATA_TRANSPORT_LAYER__SYNC_FROM_L2=false\r\nDATA_TRANSPORT_LAYER__L2_RPC_ENDPOINT=REDACTED_L2_RPC\r\nDATA_TRANSPORT_LAYER__TRANSACTIONS_PER_POLLING_INTERVAL=1000\r\nDATA_TRANSPORT_LAYER__L2_CHAIN_ID=10\r\nDATA_TRANSPORT_LAYER__LEGACY_SEQUENCER_COMPATIBILITY=false\r\n```\r\n\r\nl2geth's `env.sh`:\r\n\r\n```\r\nexport CHAIN_ID=10\r\nexport DATADIR=/chaindata/optimism/l2geth/gethData\r\nexport NETWORK_ID=10\r\nexport NO_DISCOVER=true\r\nexport NO_USB=true\r\nexport GASPRICE=0\r\nexport GCMODE=full\r\nexport BLOCK_SIGNER_ADDRESS=0x00000398232E2064F896018496b4b44b3D62751F\r\nexport BLOCK_SIGNER_PRIVATE_KEY=6587ae678cf4fc9a33000cdbf9f35226b71dcc6a4684a31203241f9bcfd55d27\r\nexport ETH1_CTC_DEPLOYMENT_HEIGHT=13596466\r\nexport ETH1_SYNC_SERVICE_ENABLE=true\r\nexport ROLLUP_ADDRESS_MANAGER_OWNER_ADDRESS=0x9BA6e03D8B90dE867373Db8cF1A58d2F7F006b3A\r\nexport ROLLUP_BACKEND=l1\r\nexport ROLLUP_CLIENT_HTTP=http://localhost:7878\r\nexport ROLLUP_DISABLE_TRANSFERS=false\r\nexport ROLLUP_ENABLE_L2_GAS_POLLING=false\r\nexport ROLLUP_GAS_PRICE_ORACLE_OWNER_ADDRESS=0x648E3e8101BFaB7bf5997Bd007Fb473786019159\r\nexport ROLLUP_MAX_CALLDATA_SIZE=40000\r\nexport ROLLUP_POLL_INTERVAL_FLAG=1s\r\nexport ROLLUP_SYNC_SERVICE_ENABLE=true\r\nexport ROLLUP_TIMESTAMP_REFRESH=5m\r\nexport ROLLUP_VERIFIER_ENABLE=true\r\nexport RPC_ADDR=0.0.0.0\r\nexport RPC_API=eth,rollup,net,web3,debug\r\nexport RPC_CORS_DOMAIN=*\r\nexport RPC_ENABLE=true\r\nexport RPC_PORT=8545\r\nexport RPC_VHOSTS=*\r\nexport SEQUENCER_CLIENT_HTTP=REDACTED_L2_RPC\r\nexport TARGET_GAS_LIMIT=15000000\r\nexport USING_OVM=true\r\nexport WS_ADDR=0.0.0.0\r\nexport WS_API=eth,rollup,net,web3,debug\r\nexport WS_ORIGINS=*\r\nexport WS=true\r\n```",
  "closed_by": {
    "login": "sanbotto",
    "id": 28357728,
    "node_id": "MDQ6VXNlcjI4MzU3NzI4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28357728?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sanbotto",
    "html_url": "https://github.com/sanbotto",
    "followers_url": "https://api.github.com/users/sanbotto/followers",
    "following_url": "https://api.github.com/users/sanbotto/following{/other_user}",
    "gists_url": "https://api.github.com/users/sanbotto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sanbotto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sanbotto/subscriptions",
    "organizations_url": "https://api.github.com/users/sanbotto/orgs",
    "repos_url": "https://api.github.com/users/sanbotto/repos",
    "events_url": "https://api.github.com/users/sanbotto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sanbotto/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339598931",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1339598931",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1339598931,
    "node_id": "IC_kwDODjvEJM5P2KhT",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T16:01:34Z",
    "updated_at": "2022-12-06T16:01:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like you're using a configuration meant to sync from L1, but you're providing an L2 RPC. I probably need to update the DTL to give a better error for this.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339598931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339706178",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1339706178",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1339706178,
    "node_id": "IC_kwDODjvEJM5P2ktC",
    "user": {
      "login": "sanbotto",
      "id": 28357728,
      "node_id": "MDQ6VXNlcjI4MzU3NzI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28357728?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanbotto",
      "html_url": "https://github.com/sanbotto",
      "followers_url": "https://api.github.com/users/sanbotto/followers",
      "following_url": "https://api.github.com/users/sanbotto/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanbotto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanbotto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanbotto/subscriptions",
      "organizations_url": "https://api.github.com/users/sanbotto/orgs",
      "repos_url": "https://api.github.com/users/sanbotto/repos",
      "events_url": "https://api.github.com/users/sanbotto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanbotto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T17:14:57Z",
    "updated_at": "2022-12-06T17:14:57Z",
    "author_association": "NONE",
    "body": "Sorry, I made a mistake while opening the issue and redacting the endpoints for Docker's `.env`. I've updated `FAULT_DETECTOR__L1_RPC_PROVIDER` and `DATA_TRANSPORT_LAYER__L1_RPC_ENDPOINT` to show that I'm actually using L1 endpoints there.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339706178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339728798",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1339728798",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1339728798,
    "node_id": "IC_kwDODjvEJM5P2qOe",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T17:30:33Z",
    "updated_at": "2022-12-06T17:30:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm... so the error triggers because somehow `l1Transaction` is returning as `null` in this line of code:\r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/e5834b25f0f452ddac4374af3077a143cda20c54/packages/data-transport-layer/src/services/l1-ingestion/handlers/sequencer-batch-appended.ts#L31\r\n\r\nI'm not entirely sure why the DTL would be detecting an event and somehow not be able to retrieve the txn that corresponds to that event.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339728798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339730220",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1339730220",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1339730220,
    "node_id": "IC_kwDODjvEJM5P2qks",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T17:31:40Z",
    "updated_at": "2022-12-06T17:31:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is the issue intermittent or does it just loop around that error forever?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339730220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339735456",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1339735456",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1339735456,
    "node_id": "IC_kwDODjvEJM5P2r2g",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T17:36:07Z",
    "updated_at": "2022-12-06T17:36:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Would be willing to disclose the provider behind the RPC?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1339735456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1340940575",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1340940575",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1340940575,
    "node_id": "IC_kwDODjvEJM5P7SEf",
    "user": {
      "login": "sanbotto",
      "id": 28357728,
      "node_id": "MDQ6VXNlcjI4MzU3NzI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28357728?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanbotto",
      "html_url": "https://github.com/sanbotto",
      "followers_url": "https://api.github.com/users/sanbotto/followers",
      "following_url": "https://api.github.com/users/sanbotto/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanbotto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanbotto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanbotto/subscriptions",
      "organizations_url": "https://api.github.com/users/sanbotto/orgs",
      "repos_url": "https://api.github.com/users/sanbotto/repos",
      "events_url": "https://api.github.com/users/sanbotto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanbotto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-07T13:07:36Z",
    "updated_at": "2022-12-07T13:07:36Z",
    "author_association": "NONE",
    "body": "> Is the issue intermittent or does it just loop around that error forever?\r\n\r\nLoops forever.\r\n\r\n> Would be willing to disclose the provider behind the RPC?\r\n\r\nWe are using our own geth node for L1, but it's the same one that we're using for the other working Optimism node, and for a bunch of other types of nodes as well, so I never thought of it being the issue... Spoiler alert: it was üôÑ\r\n\r\nI'm using Infura now while I debug the geth node. Sorry for wasting your time with this! üôè",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1340940575/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1341107165",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1341107165",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1341107165,
    "node_id": "IC_kwDODjvEJM5P76vd",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-07T15:09:56Z",
    "updated_at": "2022-12-07T15:09:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Not a waste of time! Thanks for the report. Will help people who have similar issues in the future :-)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1341107165/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1347623893",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1347623893",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1347623893,
    "node_id": "IC_kwDODjvEJM5QUxvV",
    "user": {
      "login": "hub-il",
      "id": 54118440,
      "node_id": "MDQ6VXNlcjU0MTE4NDQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/54118440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hub-il",
      "html_url": "https://github.com/hub-il",
      "followers_url": "https://api.github.com/users/hub-il/followers",
      "following_url": "https://api.github.com/users/hub-il/following{/other_user}",
      "gists_url": "https://api.github.com/users/hub-il/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hub-il/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hub-il/subscriptions",
      "organizations_url": "https://api.github.com/users/hub-il/orgs",
      "repos_url": "https://api.github.com/users/hub-il/repos",
      "events_url": "https://api.github.com/users/hub-il/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hub-il/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T01:37:01Z",
    "updated_at": "2022-12-13T01:37:01Z",
    "author_association": "NONE",
    "body": "@smartcontracts @sanbotto where you able to figure out this issue?  Just as @sanbotto said, I have an archive geth node that is able to function correctly with other l2 chains.  I have the same error as @sanbotto which is preventing any syncing from happening.  \r\n\r\n~~~~\r\n{\"level\":30,\"time\":1670895334172,\"msg\":\"Service is starting...\"}\r\n{\"level\":30,\"time\":1670895334173,\"msg\":\"Service is initializing...\"}\r\n{\"level\":30,\"time\":1670895334173,\"msg\":\"Initializing L1 Data Transport Service...\"}\r\n{\"level\":30,\"time\":1670895334191,\"msg\":\"L2 chain ID is: 10\"}\r\n{\"level\":30,\"time\":1670895334191,\"msg\":\"BSS HF1 will activate at: 2824317\"}\r\n{\"level\":30,\"time\":1670895334197,\"msg\":\"Service is initializing...\"}\r\n{\"level\":30,\"time\":1670895334203,\"defaultBackend\":\"l1\",\"l1GasPriceBackend\":\"l1\",\"msg\":\"HTTP Server Options\"}\r\n{\"level\":30,\"time\":1670895334203,\"url\":\"http://REDACTED_L1_NODE:8545\",\"msg\":\"HTTP Server L1 RPC Provider initialized\"}\r\n{\"level\":40,\"time\":1670895334203,\"msg\":\"HTTP Server L2 RPC Provider not initialized\"}\r\n{\"level\":30,\"time\":1670895334203,\"msg\":\"Service has initialized.\"}\r\n{\"level\":30,\"time\":1670895334203,\"msg\":\"Service is initializing...\"}\r\n{\"level\":30,\"time\":1670895334204,\"addressManager\":\"0xdE1FCfB0851916CA5101820A69b13a4E276bd81F\",\"msg\":\"Using AddressManager\"}\r\n{\"level\":30,\"time\":1670895334292,\"startingL1BlockNumber\":13596466,\"msg\":\"Starting sync\"}\r\n{\"level\":30,\"time\":1670895334298,\"msg\":\"Service has initialized.\"}\r\n{\"level\":30,\"time\":1670895334298,\"msg\":\"Service has initialized.\"}\r\n{\"level\":30,\"time\":1670895334298,\"msg\":\"Service is starting...\"}\r\n{\"level\":30,\"time\":1670895334298,\"msg\":\"Service is starting...\"}\r\n{\"level\":30,\"time\":1670895334299,\"host\":\"0.0.0.0\",\"port\":7878,\"msg\":\"Server started and listening\"}\r\n{\"level\":30,\"time\":1670895334300,\"msg\":\"Service has started\"}\r\n{\"level\":30,\"time\":1670895334304,\"highestSyncedL1Block\":13596466,\"targetL1Block\":13598466,\"msg\":\"Synchronizing events from Layer 1 (Ethereum)\"}\r\n{\"level\":30,\"time\":1670895334657,\"eventName\":\"TransactionEnqueued\",\"numEvents\":23,\"durationMs\":9,\"msg\":\"Processed events\"}\r\n{\"level\":50,\"time\":1670895334793,\"extra\":{\"message\":\"TypeError: Cannot read properties of null (reading 'from')\",\"stack\":\"TypeError: Cannot read properties of null (reading 'from')\\n    at Object.getExtraData (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/handlers/sequencer-batch-appended.js:27:38)\\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\\n    at async L1IngestionService._syncEvents (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:230:39)\\n    at async L1IngestionService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:140:17)\\n    at async L1IngestionService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async Promise.all (index 1)\\n    at async L1DataTransportService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/main/service.js:69:13)\\n    at async L1DataTransportService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async /opt/optimism/packages/data-transport-layer/dist/src/services/run.js:77:9\"},\"msg\":\"Caught an unhandled error\"}\r\n{\"level\":30,\"time\":1670895335137,\"method\":\"GET\",\"url\":\"/batch/transaction/latest\",\"elapsed\":0,\"msg\":\"Served HTTP Request\"}\r\n{\"level\":30,\"time\":1670895335298,\"highestSyncedL1Block\":13596466,\"targetL1Block\":13598466,\"msg\":\"Synchronizing events from Layer 1 (Ethereum)\"}\r\n{\"level\":30,\"time\":1670895335505,\"eventName\":\"TransactionEnqueued\",\"numEvents\":23,\"durationMs\":8,\"msg\":\"Processed events\"}\r\n{\"level\":50,\"time\":1670895335624,\"extra\":{\"message\":\"TypeError: Cannot read properties of null (reading 'from')\",\"stack\":\"TypeError: Cannot read properties of null (reading 'from')\\n    at Object.getExtraData (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/handlers/sequencer-batch-appended.js:27:38)\\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\\n    at async L1IngestionService._syncEvents (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:230:39)\\n    at async L1IngestionService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:140:17)\\n    at async L1IngestionService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async Promise.all (index 1)\\n    at async L1DataTransportService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/main/service.js:69:13)\\n    at async L1DataTransportService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async /opt/optimism/packages/data-transport-layer/dist/src/services/run.js:77:9\"},\"msg\":\"Caught an unhandled error\"}\r\n{\"level\":30,\"time\":1670895336128,\"highestSyncedL1Block\":13596466,\"targetL1Block\":13598466,\"msg\":\"Synchronizing events from Layer 1 (Ethereum)\"}\r\n{\"level\":30,\"time\":1670895336133,\"method\":\"GET\",\"url\":\"/batch/transaction/latest\",\"elapsed\":0,\"msg\":\"Served HTTP Request\"}\r\n{\"level\":30,\"time\":1670895336329,\"eventName\":\"TransactionEnqueued\",\"numEvents\":23,\"durationMs\":5,\"msg\":\"Processed events\"}\r\n~~~~",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1347623893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1348090382",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/4235#issuecomment-1348090382",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/4235",
    "id": 1348090382,
    "node_id": "IC_kwDODjvEJM5QWjoO",
    "user": {
      "login": "zhy827827",
      "id": 15209848,
      "node_id": "MDQ6VXNlcjE1MjA5ODQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/15209848?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zhy827827",
      "html_url": "https://github.com/zhy827827",
      "followers_url": "https://api.github.com/users/zhy827827/followers",
      "following_url": "https://api.github.com/users/zhy827827/following{/other_user}",
      "gists_url": "https://api.github.com/users/zhy827827/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zhy827827/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zhy827827/subscriptions",
      "organizations_url": "https://api.github.com/users/zhy827827/orgs",
      "repos_url": "https://api.github.com/users/zhy827827/repos",
      "events_url": "https://api.github.com/users/zhy827827/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zhy827827/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T09:56:33Z",
    "updated_at": "2022-12-13T09:57:28Z",
    "author_association": "NONE",
    "body": "{\"level\":50,\"time\":1670925371732,\"extra\":{\"message\":\"TypeError: Cannot read properties of null (reading 'from')\",\"stack\":\"TypeError: Cannot read properties of null (reading 'from')\\n    at Object.getExtraData (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/handlers/sequencer-batch-appended.js:27:38)\\n    at runMicrotasks (<anonymous>)\\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\\n    at async L1IngestionService._syncEvents (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:277:39)\\n    at async L1IngestionService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/l1-ingestion/service.js:156:17)\\n    at async L1IngestionService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async Promise.all (index 1)\\n    at async L1DataTransportService._start (/opt/optimism/packages/data-transport-layer/dist/src/services/main/service.js:69:13)\\n    at async L1DataTransportService.start (/opt/optimism/packages/common-ts/dist/base-service/base-service.js:33:9)\\n    at async /opt/optimism/packages/data-transport-layer/dist/src/services/run.js:78:9\"},\"msg\":\"Caught an unhandled error\"}\r\n\r\nSame problems",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1348090382/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/2835",
  "id": 1279968146,
  "node_id": "I_kwDODjvEJM5MSsOS",
  "number": 2835,
  "title": "Pending nonce doesn't update after sending tx",
  "user": {
    "login": "ex7ept",
    "id": 35398145,
    "node_id": "MDQ6VXNlcjM1Mzk4MTQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/35398145?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ex7ept",
    "html_url": "https://github.com/ex7ept",
    "followers_url": "https://api.github.com/users/ex7ept/followers",
    "following_url": "https://api.github.com/users/ex7ept/following{/other_user}",
    "gists_url": "https://api.github.com/users/ex7ept/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ex7ept/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ex7ept/subscriptions",
    "organizations_url": "https://api.github.com/users/ex7ept/orgs",
    "repos_url": "https://api.github.com/users/ex7ept/repos",
    "events_url": "https://api.github.com/users/ex7ept/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ex7ept/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 3152093041,
      "node_id": "MDU6TGFiZWwzMTUyMDkzMDQx",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-wontfix",
      "name": "P-wontfix",
      "color": "C5DEF5",
      "default": false,
      "description": "Something we won't fix because it's intended behavior"
    },
    {
      "id": 4266439918,
      "node_id": "LA_kwDODjvEJM7-TLTu",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bedrock-fixes-this",
      "name": "C-bedrock-fixes-this",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: Something Bedrock fixes"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-06-22T11:08:39Z",
  "updated_at": "2023-06-16T19:15:26Z",
  "closed_at": "2023-06-16T19:15:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nThe eth_getTransactionCount result did not update after a tx broadcast, even confirmed.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nSet up a local node , \r\n1. Prepare an account with some ETH/ERC20 balance\r\n2. Call eth_getTransactionCount with param of the account, \"pending\" to the local node\r\n3. Transfer ETH/ERC20 out to another account using eth_sendTransaciont /eth_sendRawTransaction to the local node\r\n4. Call eth_getTransactionCount with param of the account, \"pending\" to the local node\r\n   \r\n   Now you would found the call result of 4th step is the same as 2nd step call result.\r\n  \r\n  You can code 2nd, 3rd, 4th steps into a code snippet for easier reproducing it. \r\nYou would see \r\n**Expected behavior**\r\nThe 4th step eth_txCount call result would returned +1 value based on the 2nd step eth_txCount Call.\r\n\r\n**System Specs:**\r\n - OS: Ubuntu 20.04.2 LTS x86_64\r\n - l2geth:0.5.21\r\n - data-transport-layer:0.5.35\r\n\r\n",
  "closed_by": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1166153090",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2835#issuecomment-1166153090",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835",
    "id": 1166153090,
    "node_id": "IC_kwDODjvEJM5FghWC",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-25T00:32:22Z",
    "updated_at": "2022-06-25T00:32:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Nodes currently do not maintain a pending state, so this behavior is expected. We're fixing this in Bedrock by re-introducing the concept of pending state.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1166153090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1167913184",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2835#issuecomment-1167913184",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2835",
    "id": 1167913184,
    "node_id": "IC_kwDODjvEJM5FnPDg",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-27T21:19:40Z",
    "updated_at": "2022-06-27T21:19:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "This could be a latency issue, if right after submitting a transaction the nonce doesn't increment then it means that the transaction is still propagating throughout the network",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1167913184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

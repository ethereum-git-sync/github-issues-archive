{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025",
  "id": 1868558590,
  "node_id": "I_kwDODjvEJM5vX_D-",
  "number": 7025,
  "title": "Error when doing make op-node as go-libp2p/quic-go are not working well",
  "user": {
    "login": "0xZangetsudev",
    "id": 103854285,
    "node_id": "U_kgDOBjCwzQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/103854285?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xZangetsudev",
    "html_url": "https://github.com/0xZangetsudev",
    "followers_url": "https://api.github.com/users/0xZangetsudev/followers",
    "following_url": "https://api.github.com/users/0xZangetsudev/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xZangetsudev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xZangetsudev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xZangetsudev/subscriptions",
    "organizations_url": "https://api.github.com/users/0xZangetsudev/orgs",
    "repos_url": "https://api.github.com/users/0xZangetsudev/repos",
    "events_url": "https://api.github.com/users/0xZangetsudev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xZangetsudev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-08-27T16:46:07Z",
  "updated_at": "2023-09-27T21:05:08Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello I got these errors when trying to do make op-node without changing anything : \r\n\r\n```\r\nmake -C ./op-node op-node\r\nmake[1]: Entering directory '/home/zangetsu/data2/optimism/op-node'\r\nenv GO111MODULE=on GOOS= GOARCH= go build -v -ldflags \"-X main.GitCommit=f37a108c8affd46f0d8011947e226826e196cbdd -X main.GitDate=1692991674 -X github.com/ethereum-optimism/optimism/op-node/version.Version=v0.0.0 -X github.com/ethereum-optimism/optimism/op-node/version.Meta=\" -o ./bin/op-node ./cmd/main.go\r\ngithub.com/quic-go/quic-go/internal/utils/ringbuffer\r\ngithub.com/quic-go/quic-go/internal/utils/linkedlist\r\ngithub.com/quic-go/quic-go/internal/protocol\r\ngithub.com/quic-go/quic-go/internal/utils\r\ngithub.com/quic-go/quic-go/quicvarint\r\ngithub.com/quic-go/quic-go/internal/qtls\r\ngithub.com/quic-go/quic-go/internal/qerr\r\ngithub.com/quic-go/quic-go/internal/flowcontrol\r\ngithub.com/quic-go/quic-go/internal/wire\r\ngithub.com/quic-go/quic-go/logging\r\ngithub.com/quic-go/quic-go/internal/logutils\r\ngithub.com/quic-go/quic-go/internal/congestion\r\ngithub.com/quic-go/quic-go/internal/handshake\r\ngithub.com/quic-go/quic-go/internal/ackhandler\r\ngithub.com/quic-go/quic-go\r\ngithub.com/quic-go/quic-go/qlog\r\ngithub.com/quic-go/quic-go/http3\r\ngithub.com/libp2p/go-libp2p/p2p/net/swarm\r\n# github.com/libp2p/go-libp2p/p2p/net/swarm\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/net/swarm/swarm_dial.go:570:19: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/net/swarm/swarm_dial.go:636:16: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/net/swarm/swarm_dial.go:645:58: undefined: quic.VersionDraft29\r\ngithub.com/libp2p/go-libp2p/p2p/transport/quicreuse\r\n# github.com/libp2p/go-libp2p/p2p/transport/quicreuse\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/config.go:20:45: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/connmgr.go:16:28: undefined: quic.DialContext\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/connmgr.go:50:11: quicConf.StatelessResetKey undefined (type *quic.Config has no field or method StatelessResetKey)\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/connmgr.go:60:21: cannot use quiclogging.NewMultiplexedTracer(tracers...) (value of type logging.Tracer) as func(context.Context, protocol.Perspective, protocol.ConnectionID) logging.ConnectionTracer value in assignment\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/connmgr.go:178:22: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/connmgr.go:179:49: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/listener.go:49:49: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/listener.go:83:9: cannot use ln (variable of type *quic.Listener) as quic.Listener value in assignment\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/listener.go:92:53: conn.ConnectionState().TLS.ConnectionState undefined (type tls.ConnectionState has no field or method ConnectionState)\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/quic_multiaddr.go:23:12: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.27.8/p2p/transport/quicreuse/quic_multiaddr.go:23:12: too many errors\r\ngithub.com/quic-go/webtransport-go\r\nmake[1]: *** [Makefile:12: op-node] Error 1\r\nmake[1]: Leaving directory '/home/zangetsu/data2/optimism/op-node'\r\nmake: *** [Makefile:35: op-node] Error 2\r\n```\r\n\r\nIf I update go-libp2p I get :\r\n\r\n```\r\nmake -C ./op-node op-node\r\nmake[1]: Entering directory '/home/zangetsu/data2/optimism/op-node'\r\nenv GO111MODULE=on GOOS= GOARCH= go build -v -ldflags \"-X main.GitCommit=f37a108c8affd46f0d8011947e226826e196cbdd -X main.GitDate=1692991674 -X github.com/ethereum-optimism/optimism/op-node/version.Version=v0.0.0 -X github.com/ethereum-optimism/optimism/op-node/version.Meta=\" -o ./bin/op-node ./cmd/main.go\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.30.0/p2p/host/peerstore/pstoreds/addr_book.go:17:2: missing go.sum entry for module providing package github.com/hashicorp/golang-lru/arc/v2 (imported by github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoreds); to add:\r\n\tgo get github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoreds@v0.30.0\r\np2p/host.go:20:2: no required module provides package github.com/libp2p/go-libp2p/p2p/muxer/mplex; to add it:\r\n\tgo get github.com/libp2p/go-libp2p/p2p/muxer/mplex\r\nmake[1]: *** [Makefile:12: op-node] Error 1\r\nmake[1]: Leaving directory '/home/zangetsu/data2/optimism/op-node'\r\nmake: *** [Makefile:35: op-node] Error 2\r\n```\r\n\r\n(go get github.com/libp2p/go-libp2p/p2p/muxer/mplex   is not defined so it will not work)\r\n\r\n\r\nif I update quick-go I get :\r\n\r\n```\r\nmake -C ./op-node op-node\r\nmake[1]: Entering directory '/home/zangetsu/data2/optimism/op-node'\r\nenv GO111MODULE=on GOOS= GOARCH= go build -v -ldflags \"-X main.GitCommit=f37a108c8affd46f0d8011947e226826e196cbdd -X main.GitDate=1692991674 -X github.com/ethereum-optimism/optimism/op-node/version.Version=v0.0.0 -X github.com/ethereum-optimism/optimism/op-node/version.Meta=\" -o ./bin/op-node ./cmd/main.go\r\ngithub.com/libp2p/go-libp2p/p2p/host/peerstore/pstoreds\r\ngithub.com/libp2p/go-libp2p/p2p/transport/quicreuse\r\ngithub.com/libp2p/go-libp2p/p2p/protocol/identify\r\n# github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoreds\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/host/peerstore/pstoreds/addr_book.go:205:26: undefined: lru.NewARC\r\n# github.com/libp2p/go-libp2p/p2p/transport/quicreuse\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/config.go:20:45: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/connmgr.go:186:22: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/connmgr.go:187:49: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/connmgr.go:255:14: undefined: quic.OptimizeConn\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/listener.go:49:50: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/listener.go:92:53: conn.ConnectionState().TLS.ConnectionState undefined (type tls.ConnectionState has no field or method ConnectionState)\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/quic_multiaddr.go:23:12: undefined: quic.VersionDraft29\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/transport/quicreuse/quic_multiaddr.go:38:19: undefined: quic.VersionDraft29\r\n# github.com/libp2p/go-libp2p/p2p/protocol/identify\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/protocol/identify/id.go:559:25: type func(a multiaddr.Multiaddr, b multiaddr.Multiaddr) bool of func(a, b ma.Multiaddr) bool {…} does not match inferred type func(a multiaddr.Multiaddr, b multiaddr.Multiaddr) int for func(a E, b E) int\r\n../../../go/pkg/mod/github.com/libp2p/go-libp2p@v0.29.2/p2p/protocol/identify/obsaddr.go:217:22: type func(first *observedAddr, second *observedAddr) bool of func(first, second *observedAddr) bool {…} does not match inferred type func(a *observedAddr, b *observedAddr) int for func(a E, b E) int\r\nmake[1]: *** [Makefile:12: op-node] Error 1\r\nmake[1]: Leaving directory '/home/zangetsu/data2/optimism/op-node'\r\nmake: *** [Makefile:35: op-node] Error 2\r\n```\r\n\r\n\r\nThanks for your help!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1729619382",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025#issuecomment-1729619382",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
    "id": 1729619382,
    "node_id": "IC_kwDODjvEJM5nF-W2",
    "user": {
      "login": "imranshifa",
      "id": 82541533,
      "node_id": "MDQ6VXNlcjgyNTQxNTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/82541533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imranshifa",
      "html_url": "https://github.com/imranshifa",
      "followers_url": "https://api.github.com/users/imranshifa/followers",
      "following_url": "https://api.github.com/users/imranshifa/following{/other_user}",
      "gists_url": "https://api.github.com/users/imranshifa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imranshifa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imranshifa/subscriptions",
      "organizations_url": "https://api.github.com/users/imranshifa/orgs",
      "repos_url": "https://api.github.com/users/imranshifa/repos",
      "events_url": "https://api.github.com/users/imranshifa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imranshifa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-21T13:45:50Z",
    "updated_at": "2023-09-21T13:45:50Z",
    "author_association": "NONE",
    "body": "did you figure out how to resolve this error?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1729619382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1736536145",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025#issuecomment-1736536145",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
    "id": 1736536145,
    "node_id": "IC_kwDODjvEJM5ngXBR",
    "user": {
      "login": "trianglesphere",
      "id": 11803341,
      "node_id": "MDQ6VXNlcjExODAzMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11803341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trianglesphere",
      "html_url": "https://github.com/trianglesphere",
      "followers_url": "https://api.github.com/users/trianglesphere/followers",
      "following_url": "https://api.github.com/users/trianglesphere/following{/other_user}",
      "gists_url": "https://api.github.com/users/trianglesphere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trianglesphere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trianglesphere/subscriptions",
      "organizations_url": "https://api.github.com/users/trianglesphere/orgs",
      "repos_url": "https://api.github.com/users/trianglesphere/repos",
      "events_url": "https://api.github.com/users/trianglesphere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trianglesphere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T01:37:41Z",
    "updated_at": "2023-09-27T01:37:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "What is the output of `go version`. I believe we may have required go 1.20, but current develop is now on go 1.21. (Take a look at the root `go.mod` for the minimum version you need). Rarely being on a newer version will causes problems (libp2p had that issue), but in general it's ok to be on a newer version, but being on an old version will cause problems.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1736536145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1737318861",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025#issuecomment-1737318861",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
    "id": 1737318861,
    "node_id": "IC_kwDODjvEJM5njWHN",
    "user": {
      "login": "imranshifa",
      "id": 82541533,
      "node_id": "MDQ6VXNlcjgyNTQxNTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/82541533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imranshifa",
      "html_url": "https://github.com/imranshifa",
      "followers_url": "https://api.github.com/users/imranshifa/followers",
      "following_url": "https://api.github.com/users/imranshifa/following{/other_user}",
      "gists_url": "https://api.github.com/users/imranshifa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imranshifa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imranshifa/subscriptions",
      "organizations_url": "https://api.github.com/users/imranshifa/orgs",
      "repos_url": "https://api.github.com/users/imranshifa/repos",
      "events_url": "https://api.github.com/users/imranshifa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imranshifa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T12:40:20Z",
    "updated_at": "2023-09-27T12:40:20Z",
    "author_association": "NONE",
    "body": "> What is the output of `go version`. I believe we may have required go 1.20, but current develop is now on go 1.21. (Take a look at the root `go.mod` for the minimum version you need). Rarely being on a newer version will causes problems (libp2p had that issue), but in general it's ok to be on a newer version, but being on an old version will cause problems.\r\n\r\nit works with 1.20 but not with the latest 1.21",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1737318861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1738002355",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025#issuecomment-1738002355",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
    "id": 1738002355,
    "node_id": "IC_kwDODjvEJM5nl8-z",
    "user": {
      "login": "trianglesphere",
      "id": 11803341,
      "node_id": "MDQ6VXNlcjExODAzMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11803341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trianglesphere",
      "html_url": "https://github.com/trianglesphere",
      "followers_url": "https://api.github.com/users/trianglesphere/followers",
      "following_url": "https://api.github.com/users/trianglesphere/following{/other_user}",
      "gists_url": "https://api.github.com/users/trianglesphere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trianglesphere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trianglesphere/subscriptions",
      "organizations_url": "https://api.github.com/users/trianglesphere/orgs",
      "repos_url": "https://api.github.com/users/trianglesphere/repos",
      "events_url": "https://api.github.com/users/trianglesphere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trianglesphere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T20:03:50Z",
    "updated_at": "2023-09-27T20:03:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "> it works with 1.20 but not with the latest 1.21\r\n\r\n@imranshifa what is the commit in the monorepo that you are working with?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1738002355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1738076641",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/7025#issuecomment-1738076641",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/7025",
    "id": 1738076641,
    "node_id": "IC_kwDODjvEJM5nmPHh",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-27T21:05:08Z",
    "updated_at": "2023-09-27T21:05:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "It's worth noting that since this issue was originally logged, libp2p and quic-go have been updated to be compatible with go 1.21 (and the minimum version bumped to 1.21) so it's very likely this has been fixed.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1738076641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

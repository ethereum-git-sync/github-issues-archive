{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/787",
  "id": 877592598,
  "node_id": "MDU6SXNzdWU4Nzc1OTI1OTg=",
  "number": 787,
  "title": "msgHash of L1 to L2 deposit is `undefined`",
  "user": {
    "login": "platocrat",
    "id": 37757724,
    "node_id": "MDQ6VXNlcjM3NzU3NzI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/37757724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/platocrat",
    "html_url": "https://github.com/platocrat",
    "followers_url": "https://api.github.com/users/platocrat/followers",
    "following_url": "https://api.github.com/users/platocrat/following{/other_user}",
    "gists_url": "https://api.github.com/users/platocrat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/platocrat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/platocrat/subscriptions",
    "organizations_url": "https://api.github.com/users/platocrat/orgs",
    "repos_url": "https://api.github.com/users/platocrat/repos",
    "events_url": "https://api.github.com/users/platocrat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/platocrat/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-05-06T15:00:45Z",
  "updated_at": "2021-05-06T16:21:28Z",
  "closed_at": "2021-05-06T16:21:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\n@anthonymartin @gdsoumya (ScalingEthereum hackers) reported an issue with using the `watcher` to get an L1 to L2 message hash for a Kovan deposit. The message hash being returned is `undefined`.\r\nThis prevents them from being able to retrieve the L2 transaction receipt by using the `watcher`.\r\n\r\nContract deployments to Kovan work. The message hash being undefined is the only issue blocking their project.\r\nThey are using logic from the `l1-l2-deposit-withdrawal` example script to get the message hash. You can find this logic in their [`deploy-kovan.js` script](https://github.com/gdsoumya/scaling-eth-hackathon/blob/2786c318c1fd6b3b9e6ceb7518f725d77f4cedd7/packages/hardhat/deploy-kovan.js#L165-L171). It is shared below for convenience:\r\n```js\r\n  // Wait for the message to be relayed to L2.\r\n  console.log(\"Waiting for deposit to be relayed to L2...\");\r\n\r\n  const [msgHash1] = await watcher.getMessageHashesFromL1Tx(tx2.hash);\r\n  console.log(msgHash1, tx2.hash);\r\n  await watcher.getL2TransactionReceipt(msgHash1);\r\n```\r\n\r\n**Expected behavior**\r\nMessage passing works as expected locally. So, the same behavior is should be expected on Kovan.\r\n\r\n**Additional context**\r\n@anthonymartin and @gdsoumya will share additional comments as needed.",
  "closed_by": {
    "login": "K-Ho",
    "id": 5341583,
    "node_id": "MDQ6VXNlcjUzNDE1ODM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5341583?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/K-Ho",
    "html_url": "https://github.com/K-Ho",
    "followers_url": "https://api.github.com/users/K-Ho/followers",
    "following_url": "https://api.github.com/users/K-Ho/following{/other_user}",
    "gists_url": "https://api.github.com/users/K-Ho/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/K-Ho/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/K-Ho/subscriptions",
    "organizations_url": "https://api.github.com/users/K-Ho/orgs",
    "repos_url": "https://api.github.com/users/K-Ho/repos",
    "events_url": "https://api.github.com/users/K-Ho/events{/privacy}",
    "received_events_url": "https://api.github.com/users/K-Ho/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/833641169",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/787#issuecomment-833641169",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/787",
    "id": 833641169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMzY0MTE2OQ==",
    "user": {
      "login": "gdsoumya",
      "id": 44349253,
      "node_id": "MDQ6VXNlcjQ0MzQ5MjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/44349253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gdsoumya",
      "html_url": "https://github.com/gdsoumya",
      "followers_url": "https://api.github.com/users/gdsoumya/followers",
      "following_url": "https://api.github.com/users/gdsoumya/following{/other_user}",
      "gists_url": "https://api.github.com/users/gdsoumya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gdsoumya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gdsoumya/subscriptions",
      "organizations_url": "https://api.github.com/users/gdsoumya/orgs",
      "repos_url": "https://api.github.com/users/gdsoumya/repos",
      "events_url": "https://api.github.com/users/gdsoumya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gdsoumya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-06T16:02:17Z",
    "updated_at": "2021-05-06T16:02:17Z",
    "author_association": "NONE",
    "body": "The issue was with the L1 messenger address, once the updated address was used the correct msgHash was returned @platocrat ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/833641169/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

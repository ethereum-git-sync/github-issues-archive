{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/556",
  "id": 864581757,
  "node_id": "MDU6SXNzdWU4NjQ1ODE3NTc=",
  "number": 556,
  "title": "Integration test services are inflexible and depend on a single `docker-compose.yml` config",
  "user": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-04-22T06:16:31Z",
  "updated_at": "2021-04-23T02:55:19Z",
  "closed_at": "2021-04-23T02:55:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI'd like to be able to define multiple configuration sets for the integration tests and have different sets of tests run against fresh instances of the system. Right now it is impossible to use this repo to write integration tests for the verifier as `l2geth` always comes up in sequencer mode. In `optimism-integration` this was possible, although much more complex. Perhaps there is a happy medium.\r\n\r\n**Describe the solution you'd like**\r\n`optimism-integration` would iterate through a series of test suites and bring up the full system for each test suite. This would give a fresh state for each test suite as well as giving an opportunity to merge configs using `docker-compose -f base.yml specific-to-test-suite.yml`. I am not exactly sure how this is possible with the current setup.\r\n\r\n**Describe alternatives you've considered**\r\nIt is possible to put verifier tests in a different repo, but that kind of defeats the purpose of the monorepo\r\n\r\n",
  "closed_by": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/824678678",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/556#issuecomment-824678678",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556",
    "id": 824678678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNDY3ODY3OA==",
    "user": {
      "login": "gakonst",
      "id": 17802178,
      "node_id": "MDQ6VXNlcjE3ODAyMTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17802178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gakonst",
      "html_url": "https://github.com/gakonst",
      "followers_url": "https://api.github.com/users/gakonst/followers",
      "following_url": "https://api.github.com/users/gakonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/gakonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gakonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gakonst/subscriptions",
      "organizations_url": "https://api.github.com/users/gakonst/orgs",
      "repos_url": "https://api.github.com/users/gakonst/repos",
      "events_url": "https://api.github.com/users/gakonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gakonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T09:14:54Z",
    "updated_at": "2021-04-22T09:19:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Isn't bringing the sequencer up in verfier mode a matter of setting the `ROLLUP_VERIFIER_ENABLE` flag?\r\n\r\nIf so, we can allow that env var to be set in the `docker-compose.yml` file, and simply bring up 2 l2geth instances, one in sequencer mode, one in verifier mode (i.e. add 1 more service, `l2geth-verifier`).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/824678678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825345858",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/556#issuecomment-825345858",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556",
    "id": 825345858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTM0NTg1OA==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T02:41:48Z",
    "updated_at": "2021-04-23T02:41:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "> If so, we can allow that env var to be set in the docker-compose.yml file, and simply bring up 2 l2geth instances\r\n\r\nThis is possible, but then we would need to run 3 l2geth instances (sequencer, verifier, replica) to be able to test all of the code paths. Sometimes it would also be nice to cut out some codepaths, ie submit batches directly from the tests instead of sending transactions to the sequencer and having the batch submitter submit them",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825345858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825350171",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/556#issuecomment-825350171",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/556",
    "id": 825350171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNTM1MDE3MQ==",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-23T02:55:19Z",
    "updated_at": "2021-04-23T02:55:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing, will add the extra l2geth in the future but hopefully it doesn't price people out from local dev",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/825350171/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

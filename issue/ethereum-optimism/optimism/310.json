{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/310",
  "id": 715980054,
  "node_id": "MDU6SXNzdWU3MTU5ODAwNTQ=",
  "number": 310,
  "title": "Verifier Transaction Batch Ordering",
  "user": {
    "login": "willmeister",
    "id": 1787541,
    "node_id": "MDQ6VXNlcjE3ODc1NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1787541?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/willmeister",
    "html_url": "https://github.com/willmeister",
    "followers_url": "https://api.github.com/users/willmeister/followers",
    "following_url": "https://api.github.com/users/willmeister/following{/other_user}",
    "gists_url": "https://api.github.com/users/willmeister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/willmeister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/willmeister/subscriptions",
    "organizations_url": "https://api.github.com/users/willmeister/orgs",
    "repos_url": "https://api.github.com/users/willmeister/repos",
    "events_url": "https://api.github.com/users/willmeister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/willmeister/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-10-06T19:55:06Z",
  "updated_at": "2021-02-02T00:34:57Z",
  "closed_at": "2021-02-02T00:34:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nVerifiers will\r\n1. Passively observe Ethereum contracts\r\n1. Compute the resulting state of rolled up transactions by using the OVM geth fork\r\n1. Prove fraud resulting from a mismatch between claimed resulting state and computed resulting state\r\n\r\nBatches of rollup transactions will likely contain more than one rollup transaction (that's the whole benefit of Optimistic Rollup), and these transactions will need to be processed by the OVM geth fork in order of batch number, followed by index within batch.\r\n\r\nAt the moment, the mechanism by which order is enforced in transmitting transactions to the OVM geth fork does not work and [assigns all transactions within a batch the same index](https://github.com/ethereum-optimism/optimism-monorepo/blob/master/packages/rollup-core/src/app/data/data-service.ts#L227)\r\n\r\n**Steps to reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run a verifier pointing at contracts with rollup transactions posted (starting at an L1 block number _before_ they were posted)\r\n2. Verify that `l1_rollup_tx` entries all have an `index_within_submission` of `0`\r\n\r\n**Expected behavior**\r\nThe `l1_rollup_tx.index_within_submission` should be unique in combination with `geth_submission_queue_index`, and the first transaction in the rollup batch should get index 0, the second gets index 1, and so on...\r\n",
  "closed_by": {
    "login": "tynes",
    "id": 6626818,
    "node_id": "MDQ6VXNlcjY2MjY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tynes",
    "html_url": "https://github.com/tynes",
    "followers_url": "https://api.github.com/users/tynes/followers",
    "following_url": "https://api.github.com/users/tynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
    "organizations_url": "https://api.github.com/users/tynes/orgs",
    "repos_url": "https://api.github.com/users/tynes/repos",
    "events_url": "https://api.github.com/users/tynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/704521390",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/310#issuecomment-704521390",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/310",
    "id": 704521390,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDUyMTM5MA==",
    "user": {
      "login": "willmeister",
      "id": 1787541,
      "node_id": "MDQ6VXNlcjE3ODc1NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1787541?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willmeister",
      "html_url": "https://github.com/willmeister",
      "followers_url": "https://api.github.com/users/willmeister/followers",
      "following_url": "https://api.github.com/users/willmeister/following{/other_user}",
      "gists_url": "https://api.github.com/users/willmeister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willmeister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willmeister/subscriptions",
      "organizations_url": "https://api.github.com/users/willmeister/orgs",
      "repos_url": "https://api.github.com/users/willmeister/repos",
      "events_url": "https://api.github.com/users/willmeister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willmeister/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-06T20:02:01Z",
    "updated_at": "2020-10-06T20:02:01Z",
    "author_association": "NONE",
    "body": "Note: this issue does not pertain to full-blown Sequencers because Sequencers have _already_ processed batches of transactions within the OVM geth fork at the time that they receive and parse the rollup data from Ethereum. Sequencers can then just compare state roots instead of send to Geth and _then_ compare state roots.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/704521390/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

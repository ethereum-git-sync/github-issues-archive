{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195",
  "id": 1780978444,
  "node_id": "I_kwDODjvEJM5qJ5MM",
  "number": 6195,
  "title": "Pinning Forge Binary will cause CI failure",
  "user": {
    "login": "sambacha",
    "id": 32783916,
    "node_id": "MDQ6VXNlcjMyNzgzOTE2",
    "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sambacha",
    "html_url": "https://github.com/sambacha",
    "followers_url": "https://api.github.com/users/sambacha/followers",
    "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
    "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
    "organizations_url": "https://api.github.com/users/sambacha/orgs",
    "repos_url": "https://api.github.com/users/sambacha/repos",
    "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sambacha/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-06-29T14:43:14Z",
  "updated_at": "2023-06-29T18:28:08Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "POV: You are a mn engineer working late when suddenly all your work in CI pipelines stops.\n\nYou spend a few hours looking at what you did wrong possibly.\n\nThen you make a horrid discovery.\n![image](https://github.com/ethereum-optimism/optimism/assets/32783916/5d40c9cc-7841-4b24-89b7-08c1987de595)\n> If only \n\nFoundry deleted the binaries of nightly and only keeps the latest 5 versions. Relying on their github actions release archive will invariably cause CI failures after the pined binary is eventually deleted.\n\n> Additionally, the version identifier is ~~fucked~~ not friendly, they put short git hash infront of the timestamp, making it harder to sort ðŸ˜‘\n\nWe maintain our own release pipeline for building binaries for CI usage and for developer environments (we use a different macOS lld that results in better performance in compiling, etc). As an example their macOS pipeline had not actually been creating release binaries and were 2 version releases behind the linux binaries.\n\nThe alternative is adopting nix. If you have yet to hear the good word of our lord and saviour I promise you wont ever look back.\n\n \n\nRegards,\n\nSam Bacha",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 1,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613435329",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613435329",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613435329,
    "node_id": "IC_kwDODjvEJM5gKxHB",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T15:42:37Z",
    "updated_at": "2023-06-29T15:42:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "\r\n![7qzsxr](https://github.com/ethereum-optimism/optimism/assets/23033765/655e0ab3-274f-499f-8558-5a52848681db)\r\n\r\n\r\n> Foundry deleted the binaries of nightly and only keeps the latest 5 versions. Relying on their github actions release archive will invariably cause CI failures after the pined binary is eventually deleted.\r\n\r\nIs this a recent change that Foundry has adopted? \r\nWe've been pinning our foundry version for quite some time. Before we adopted that approach things would often break _due to_ an update.\r\n\r\nAlso, can you clarify precisely what you're suggesting we do? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613435329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613460468",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613460468",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613460468,
    "node_id": "IC_kwDODjvEJM5gK3P0",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:00:37Z",
    "updated_at": "2023-06-29T16:00:37Z",
    "author_association": "NONE",
    "body": "> ![7qzsxr](https://user-images.githubusercontent.com/23033765/249829472-655e0ab3-274f-499f-8558-5a52848681db.jpg)\r\n> \r\n> > Foundry deleted the binaries of nightly and only keeps the latest 5 versions. Relying on their github actions release archive will invariably cause CI failures after the pined binary is eventually deleted.\r\n> \r\n> Is this a recent change that Foundry has adopted? We've been pinning our foundry version for quite some time. Before we adopted that approach things would often break _due to_ an update.\r\n> \r\n> Also, can you clarify precisely what you're suggesting we do?\r\n\r\nKeep the pinned forge binary you are using in a forked repo or a repo in which you upload the binary to a release so you can point to that binary for the release to download.\r\n\r\nFoundry deletes nightly releases since it at least v0.1.0. Its in the workflow scripts as part of the release process to prune the oldest release when adding a new one.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613460468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613468476",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613468476",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613468476,
    "node_id": "IC_kwDODjvEJM5gK5M8",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:06:33Z",
    "updated_at": "2023-06-29T16:11:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see. The reason this is not an issue for us in CI is that we build from source:\r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/6856455cbf524d7e6c5e5ac07d5483068b477dec/ops/docker/ci-builder/Dockerfile#L20-L24\r\n\r\nAnywhere else (ie. READMEs and yarn scripts we use `foundryup -C` which does the same. \r\n\r\nAm I missing somewhere that we're relying on foundry's GHA?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613468476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613471240",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613471240",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613471240,
    "node_id": "IC_kwDODjvEJM5gK54I",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:08:38Z",
    "updated_at": "2023-06-29T16:08:38Z",
    "author_association": "NONE",
    "body": "> I see. The reason this is not an issue for us in CI is that we build from source:\r\n> \r\n> https://github.com/ethereum-optimism/optimism/blob/6856455cbf524d7e6c5e5ac07d5483068b477dec/ops/docker/ci-builder/Dockerfile#L20-L21\r\n\r\nwhy do you hate yourself so ser? ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613471240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613480198",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613480198",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613480198,
    "node_id": "IC_kwDODjvEJM5gK8EG",
    "user": {
      "login": "clabby",
      "id": 8406232,
      "node_id": "MDQ6VXNlcjg0MDYyMzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8406232?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clabby",
      "html_url": "https://github.com/clabby",
      "followers_url": "https://api.github.com/users/clabby/followers",
      "following_url": "https://api.github.com/users/clabby/following{/other_user}",
      "gists_url": "https://api.github.com/users/clabby/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clabby/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clabby/subscriptions",
      "organizations_url": "https://api.github.com/users/clabby/orgs",
      "repos_url": "https://api.github.com/users/clabby/repos",
      "events_url": "https://api.github.com/users/clabby/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clabby/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:15:38Z",
    "updated_at": "2023-06-29T16:15:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > I see. The reason this is not an issue for us in CI is that we build from source:\r\n> > https://github.com/ethereum-optimism/optimism/blob/6856455cbf524d7e6c5e5ac07d5483068b477dec/ops/docker/ci-builder/Dockerfile#L20-L21\r\n> \r\n> why do you hate yourself so ser?\r\n\r\n![image](https://github.com/ethereum-optimism/optimism/assets/8406232/57110b78-282e-4eed-b543-a00e6c04012e)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613480198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613493096",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613493096",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613493096,
    "node_id": "IC_kwDODjvEJM5gK_No",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T16:25:46Z",
    "updated_at": "2023-06-29T16:25:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "`foundryup -C SHA` is lawful good until you have to update `SHA` in [more than one place](https://github.com/ethereum-optimism/optimism/pull/6162/files), at which point it instantly flips to chaotic evil.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613493096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613582464",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613582464",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613582464,
    "node_id": "IC_kwDODjvEJM5gLVCA",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T17:41:48Z",
    "updated_at": "2023-06-29T17:41:48Z",
    "author_association": "NONE",
    "body": "> `foundryup -C SHA` is lawful good until you have to update `SHA` in [more than one place](https://github.com/ethereum-optimism/optimism/pull/6162/files), at which point it instantly flips to chaotic evil.\r\n\r\nhow about fucked no matter wat: https://github.blog/changelog/2021-01-21-github-actions-short-sha-deprecation/",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613582464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613608490",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6195#issuecomment-1613608490",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6195",
    "id": 1613608490,
    "node_id": "IC_kwDODjvEJM5gLbYq",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-29T18:28:08Z",
    "updated_at": "2023-06-29T18:28:08Z",
    "author_association": "NONE",
    "body": "Inshallah more robust CI is provided for you, I would very much be interested in the time benchmarks of the current system. \n\n![image](https://github.com/ethereum-optimism/optimism/assets/32783916/6918db43-45b1-4929-b856-7717a87ebd0a)\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1613608490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

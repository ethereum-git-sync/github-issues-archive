{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/8616",
  "id": 2041226412,
  "node_id": "I_kwDODjvEJM55qqSs",
  "number": 8616,
  "title": "Too many predeploy proxies generated in genesis.json",
  "user": {
    "login": "drinkius",
    "id": 1757619,
    "node_id": "MDQ6VXNlcjE3NTc2MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1757619?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/drinkius",
    "html_url": "https://github.com/drinkius",
    "followers_url": "https://api.github.com/users/drinkius/followers",
    "following_url": "https://api.github.com/users/drinkius/following{/other_user}",
    "gists_url": "https://api.github.com/users/drinkius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/drinkius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/drinkius/subscriptions",
    "organizations_url": "https://api.github.com/users/drinkius/orgs",
    "repos_url": "https://api.github.com/users/drinkius/repos",
    "events_url": "https://api.github.com/users/drinkius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/drinkius/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-12-14T08:48:50Z",
  "updated_at": "2023-12-14T08:54:19Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nWhen running the default own L2 deploy instructions found [here](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#generate-the-l2-config-files), the genesis script generates 2048 proxies which in the end seem to be unused, the really needed ones are around 40 proxies corresponding to the predeploy addresses. If they are unneeded then it might be wise to lower the number of proxies generated\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Follow L2 [deploy instructions](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup)\r\n2. Check generated genesis.json file\r\n3. See that it's over 9 megabytes\r\n\r\n**Expected behavior**\r\nIf the proxies are indeed unused and this value was selected arbitrarily, it's better to lower it to a reasonable number, around 50, which would cover additional predeploy contracts that can be created in the near future. This can be done by changing the value found [here](https://github.com/ethereum-optimism/optimism/blob/6e371b4bc31b99f726f439da8b82186d2e084475/op-chain-ops/genesis/layer_two.go#L42):\r\n\r\n`err = setProxies(db, predeploys.ProxyAdminAddr, BigL2PredeployNamespace, 2048)`\r\n\r\n**Additional context**\r\nThis issue can be the cause for bloated genesis files on OP Stack rollups that are launched by many players in RaaS field, an already deployed example can be the Zora Mainnet, [here is the genesis.json](https://api.conduit.xyz/file/v1/optimism/genesis/zora-mainnet-0) they provide. I can provide a PR and run all the tests with the fix if needed\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/8616/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

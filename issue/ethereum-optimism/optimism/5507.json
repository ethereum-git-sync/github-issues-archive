{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/5507",
  "id": 1675992423,
  "node_id": "I_kwDODjvEJM5j5Z1n",
  "number": 5507,
  "title": "messageStatus:2 - STATE_ROOT_NOT_PUBLISHE",
  "user": {
    "login": "wuzhanfly",
    "id": 14866386,
    "node_id": "MDQ6VXNlcjE0ODY2Mzg2",
    "avatar_url": "https://avatars.githubusercontent.com/u/14866386?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wuzhanfly",
    "html_url": "https://github.com/wuzhanfly",
    "followers_url": "https://api.github.com/users/wuzhanfly/followers",
    "following_url": "https://api.github.com/users/wuzhanfly/following{/other_user}",
    "gists_url": "https://api.github.com/users/wuzhanfly/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wuzhanfly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wuzhanfly/subscriptions",
    "organizations_url": "https://api.github.com/users/wuzhanfly/orgs",
    "repos_url": "https://api.github.com/users/wuzhanfly/repos",
    "events_url": "https://api.github.com/users/wuzhanfly/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wuzhanfly/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3106109286,
      "node_id": "MDU6TGFiZWwzMTA2MTA5Mjg2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-customer-issue",
      "name": "C-customer-issue",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: An issue encountered by customers integrating with Optimism"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-04-20T04:47:52Z",
  "updated_at": "2023-04-21T16:37:35Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello. I'm testing private chain with optimism stack. So I build optimism stack on top of private chain and both optimism and private l1 working separately, transactions and deployments etc all cool. I'm also experimenting with optimism sdk, anyway I have my crosschainmessenger with my the contract addresses from deployments and chain ids etc. Everything working fine deposit eth/erc20/send message fine. \r\nThe problem is: withdrawal. \r\nWhenever I do withdrawal my \"messageStatus:2 - STATE_ROOT_NOT_PUBLISHED\". \r\nWhat might be the problem at this point?? \r\n\r\nThings I've checked: I put console output on optimism sdk crosschainmessenger(node_modules/@eth-optimism/sdk/dist/cross-chain-messenger.js) getMessageBedrockOutput() function and the error is L2OutputOracle: cannot get output for a block that has not been proposed'.\r\nSo, I've checked the L2OutputOracle contract and latestBlockNumber() is 0, FINALIZATION_PERIOD_SECONDS() is 12 if it makes any difference. \r\nAnyway, clearly something is wrong because L2OutputOracle.getL2OutputIndexAfter(uint256 _l2BlockNumber) requires _l2BlockNumber <= latestBlockNumber() .\r\n\r\nSo idk what to do to fix that yet, any help would be great thanks!\r\n(In short: help me fixing my private stack withdraw, problem is always getting \"messageStatus:2 - STATE_ROOT_NOT_PUBLISHED\")\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1516227009",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5507#issuecomment-1516227009",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507",
    "id": 1516227009,
    "node_id": "IC_kwDODjvEJM5aX8nB",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T12:16:26Z",
    "updated_at": "2023-04-20T12:16:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "You also need to run the `op-proposer`. We are working on getting this added to the docs. https://github.com/ethereum-optimism/optimism/pull/5391",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1516227009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1517502659",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5507#issuecomment-1517502659",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507",
    "id": 1517502659,
    "node_id": "IC_kwDODjvEJM5ac0DD",
    "user": {
      "login": "wuzhanfly",
      "id": 14866386,
      "node_id": "MDQ6VXNlcjE0ODY2Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14866386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wuzhanfly",
      "html_url": "https://github.com/wuzhanfly",
      "followers_url": "https://api.github.com/users/wuzhanfly/followers",
      "following_url": "https://api.github.com/users/wuzhanfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/wuzhanfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wuzhanfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wuzhanfly/subscriptions",
      "organizations_url": "https://api.github.com/users/wuzhanfly/orgs",
      "repos_url": "https://api.github.com/users/wuzhanfly/repos",
      "events_url": "https://api.github.com/users/wuzhanfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wuzhanfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T08:55:50Z",
    "updated_at": "2023-04-21T08:55:50Z",
    "author_association": "NONE",
    "body": "####  After running op-propose, the state of the message can be changed and can be withdrawn normally, but it takes a long time (about 15h) for the message to change from the STATE_ROOT_NOT_PUBLISHED state to the READY_TO_PROVE state. The time for my op-propose to submit the message is 2mins\r\n```bash\r\n./bin/op-batcher \\\r\n    --l2-eth-rpc=http://localhost:8565 \\\r\n    --rollup-rpc=http://localhost:8577 \\\r\n    --poll-interval=1s \\\r\n    --sub-safety-margin=6 \\\r\n    --num-confirmations=1 \\\r\n    --safe-abort-nonce-too-low-count=3 \\\r\n    --resubmission-timeout=30s \\\r\n    --rpc.addr=0.0.0.0 \\\r\n    --rpc.port=8578 \\\r\n    --rpc.enable-admin \\\r\n    --max-channel-duration=120 \\\r\n    --target-l1-tx-size-bytes=2048 \\\r\n    --l1-eth-rpc=https://eth-goerli.g.alchemy.com/v2/\\\r\n    --private-key=\r\n```\r\n```bash\r\n\t./bin/op-node \\\r\n\t--l2=http://localhost:8571 \\\r\n\t--l2.jwt-secret=./jwt.txt \\\r\n\t--sequencer.enabled \\\r\n\t--sequencer.l1-confs=3 \\\r\n\t--verifier.l1-confs=3 \\\r\n\t--rollup.config=./rollup.json \\\r\n\t--rpc.addr=0.0.0.0 \\\r\n\t--rpc.port=8577 \\\r\n\t--p2p.disable \\\r\n\t--rpc.enable-admin \\\r\n\t--p2p.listen.ip=0.0.0.0 \\\r\n\t--p2p.listen.tcp=9033 \\\r\n\t--p2p.listen.udp=9033 \\\r\n\t--p2p.sequencer.key=b3 \\\r\n\t--l1=https://eth-goerli.g.alchemy.com/v2/... \\\r\n\t--l1.rpckind=alchemy\r\n```\r\n\r\n```bash\r\n./bin/op-proposer \\\r\n    --poll-interval 12s \\\r\n    --rpc.port 8560 \\\r\n    --rollup-rpc http://localhost:8547 \\\r\n    --l2oo-address $L2OO_ADDR \\\r\n    --private-key $PROPOSER_KEY \\\r\n    --l1-eth-rpc $L1_RPC\r\n```\r\n```bash\r\nversion = 1.0.3\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1517502659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1517845892",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5507#issuecomment-1517845892",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507",
    "id": 1517845892,
    "node_id": "IC_kwDODjvEJM5aeH2E",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T13:35:24Z",
    "updated_at": "2023-04-21T13:35:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmmm strange. What is your `finalizationPeriodSeconds` in your deploy config?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1517845892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1518079814",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/5507#issuecomment-1518079814",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/5507",
    "id": 1518079814,
    "node_id": "IC_kwDODjvEJM5afA9G",
    "user": {
      "login": "wuzhanfly",
      "id": 14866386,
      "node_id": "MDQ6VXNlcjE0ODY2Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14866386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wuzhanfly",
      "html_url": "https://github.com/wuzhanfly",
      "followers_url": "https://api.github.com/users/wuzhanfly/followers",
      "following_url": "https://api.github.com/users/wuzhanfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/wuzhanfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wuzhanfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wuzhanfly/subscriptions",
      "organizations_url": "https://api.github.com/users/wuzhanfly/orgs",
      "repos_url": "https://api.github.com/users/wuzhanfly/repos",
      "events_url": "https://api.github.com/users/wuzhanfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wuzhanfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T16:37:34Z",
    "updated_at": "2023-04-21T16:37:34Z",
    "author_association": "NONE",
    "body": "getting-started.json \r\n\r\n```bash\r\n{\r\n  \"finalizationPeriodSeconds\": 12,\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1518079814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

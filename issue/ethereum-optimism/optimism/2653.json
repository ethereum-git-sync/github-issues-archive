{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653",
  "id": 1257477341,
  "node_id": "I_kwDODjvEJM5K85Td",
  "number": 2653,
  "title": "L1 DTL sync can fail when pointing at nodes that don't cache events",
  "user": {
    "login": "Inphi",
    "id": 3516807,
    "node_id": "MDQ6VXNlcjM1MTY4MDc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3516807?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Inphi",
    "html_url": "https://github.com/Inphi",
    "followers_url": "https://api.github.com/users/Inphi/followers",
    "following_url": "https://api.github.com/users/Inphi/following{/other_user}",
    "gists_url": "https://api.github.com/users/Inphi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Inphi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Inphi/subscriptions",
    "organizations_url": "https://api.github.com/users/Inphi/orgs",
    "repos_url": "https://api.github.com/users/Inphi/repos",
    "events_url": "https://api.github.com/users/Inphi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Inphi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832490,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNDkw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bug",
      "name": "C-bug",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 2907832766,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNzY2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/M-dtl",
      "name": "M-dtl",
      "color": "FBCA04",
      "default": false,
      "description": "Module: data transport layer"
    },
    {
      "id": 2981541772,
      "node_id": "MDU6TGFiZWwyOTgxNTQxNzcy",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-confirmed",
      "name": "P-confirmed",
      "color": "BFD4F2",
      "default": false,
      "description": "A confirmed bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-06-02T01:39:27Z",
  "updated_at": "2022-09-24T02:18:14Z",
  "closed_at": "2022-09-24T02:18:14Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "<!--\r\nNeed help?\r\nRefer to our contributing guidelines for additional information about making a good issue:\r\nhttps://github.com/ethereum-optimism/.github/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n**Describe the bug**\r\nWhen `DATA_TRANSPORT_LAYER__SYNC_FROM_L1=true`, the dtl can stall and fail to sync new transactions. \r\nWe see the following error in logs:\r\n```\r\nError: bad response (status=502, headers={\"content-length\":\"0\",\"connection\":\"close\",\"date\":\"Sun, 29 May 2022 17:34:38 GMT\",\"via\":\"kong/2.8.1.0-enterprise-edition\"}, body=null, requestBody=\"{\\\"method\\\":\\\"eth_getLogs\\\",\\\"params\\\":[{\\\"fromBlock\\\":\\\"0xcf7732\\\",\\\"toBlock\\\":\\\"0xde7af2\\\",\\\"address\\\":\\\"0xde1fcfb0851916ca5101820a69b13a4e276bd81f\\\",\\\"topics\\\":[\\\"0x9416a153a346f93d95f94b064ae3f148b6460473c6e82b3f9fc2521b873fcd6c\\\",\\\"0x02b616af23339f1e031e76333e2d5b1c3067beb78578c961911872cc2127ef8b\\\"]}],\\\"id\\\":650,\\\"jsonrpc\\\":\\\"2.0\\\"}\", requestMethod=\"POST\", url=\"https://venasaur.com/\", code=SERVER_ERROR, version=web/5.5.1)\r\n```\r\nThe RPC request seems to be originating from this [line](https://github.com/ethereum-optimism/optimism/blob/8478377523c6f1480458567af7fe4c52250c7968/packages/data-transport-layer/src/services/l1-ingestion/service.ts#L444). The DTL queries eth_getLogs to retrieve events emitted by the `AddressManager` contract. However, the DTL creates this query with a block range, where the starting block is always the configured `DATA_TRANSPORT_LAYER__L1_START_HEIGHT`. This causes issues because as the JSON-RPC response of such a request would be ginormous, as dtl syncing is close to the tip. In the above log, the block range spans 1 million blocks. This most likely explains the HTTP 5xx error returned by the backend. This problem is compounded as the DTL repeatedly tries to retrieve logs from a large block range during each loop of the l1-ingestion service.\r\n\r\n**Desired Outcome**\r\nThe DTL shouldn't resync logs starting from `DATA_TRANSPORT_LAYER__L1_START_HEIGHT`. It should remember previous events from prior queries and adjust the start_block `eth_getLog` parameter on successive syncs.",
  "closed_by": {
    "login": "smartcontracts",
    "id": 14298799,
    "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/smartcontracts",
    "html_url": "https://github.com/smartcontracts",
    "followers_url": "https://api.github.com/users/smartcontracts/followers",
    "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
    "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
    "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
    "repos_url": "https://api.github.com/users/smartcontracts/repos",
    "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1144327490",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1144327490",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1144327490,
    "node_id": "IC_kwDODjvEJM5ENQ1C",
    "user": {
      "login": "Inphi",
      "id": 3516807,
      "node_id": "MDQ6VXNlcjM1MTY4MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3516807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Inphi",
      "html_url": "https://github.com/Inphi",
      "followers_url": "https://api.github.com/users/Inphi/followers",
      "following_url": "https://api.github.com/users/Inphi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Inphi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Inphi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Inphi/subscriptions",
      "organizations_url": "https://api.github.com/users/Inphi/orgs",
      "repos_url": "https://api.github.com/users/Inphi/repos",
      "events_url": "https://api.github.com/users/Inphi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Inphi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-02T01:39:46Z",
    "updated_at": "2022-06-02T01:39:46Z",
    "author_association": "COLLABORATOR",
    "body": "cc: @smartcontracts ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1144327490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1153154675",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1153154675",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1153154675,
    "node_id": "IC_kwDODjvEJM5Eu75z",
    "user": {
      "login": "platschi",
      "id": 548702,
      "node_id": "MDQ6VXNlcjU0ODcwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548702?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/platschi",
      "html_url": "https://github.com/platschi",
      "followers_url": "https://api.github.com/users/platschi/followers",
      "following_url": "https://api.github.com/users/platschi/following{/other_user}",
      "gists_url": "https://api.github.com/users/platschi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/platschi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/platschi/subscriptions",
      "organizations_url": "https://api.github.com/users/platschi/orgs",
      "repos_url": "https://api.github.com/users/platschi/repos",
      "events_url": "https://api.github.com/users/platschi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/platschi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-12T12:45:09Z",
    "updated_at": "2022-06-12T12:45:09Z",
    "author_association": "NONE",
    "body": "Can confirm having the same issue, resulting in stale sync:\r\n\r\n```\r\n{\"level\":50,\"time\":1655037518661,\"extra\":{\"message\":\"Error: missing response (requestBody=\\\"{\\\\\\\"method\\\\\\\":\\\\\\\"eth_getLogs\\\\\\\",\\\\\\\"params\\\\\\\":[{\\\\\\\"fromBlock\\\\\\\":\\\\\\\"0xcf7732\\\\\\\",\\\\\\\"toBlock\\\\\\\":\\\\\\\"0xe41f04\\\\\\\",\\\\\\\"address\\\\\\\":\\\\\\\"0xde1fcfb0851916ca5101820a69b13a4e276bd81f\\\\\\\",\\\\\\\"topics\\\\\\\":[\\\\\\\"0x9416a153a346f93d95f94b064ae3f148b6460473c6e82b3f9fc2521b873fcd6c\\\\\\\",\\\\\\\"0x02b616af23339f1e031e76333e2d5b1c3067beb78578c961911872cc2127ef8b\\\\\\\"]}],\\\\\\\"id\\\\\\\":50,\\\\\\\"jsonrpc\\\\\\\":\\\\\\\"2.0\\\\\\\"}\\\", requestMethod=\\\"POST\\\", serverError={\\\"code\\\":\\\"ECONNRESET\\\"}, url=\\\"http://localhost:8545\\\", code=SERVER_ERROR, version=web/5.6.1)\",\"stack\":\"Error: missing response (requestBody=\\\"{\\\\\\\"method\\\\\\\":\\\\\\\"eth_getLogs\\\\\\\",\\\\\\\"params\\\\\\\":[{\\\\\\\"fromBlock\\\\\\\":\\\\\\\"0xcf7732\\\\\\\",\\\\\\\"toBlock\\\\\\\":\\\\\\\"0xe41f04\\\\\\\",\\\\\\\"address\\\\\\\":\\\\\\\"0xde1fcfb0851916ca5101820a69b13a4e276bd81f\\\\\\\",\\\\\\\"topics\\\\\\\":[\\\\\\\"0x9416a153a346f93d95f94b064ae3f148b6460473c6e82b3f9fc2521b873fcd6c\\\\\\\",\\\\\\\"0x02b616af23339f1e031e76333e2d5b1c3067beb78578c961911872cc2127ef8b\\\\\\\"]}],\\\\\\\"id\\\\\\\":50,\\\\\\\"jsonrpc\\\\\\\":\\\\\\\"2.0\\\\\\\"}\\\", requestMethod=\\\"POST\\\", serverError={\\\"code\\\":\\\"ECONNRESET\\\"}, url=\\\"http://localhost:8545\\\", code=SERVER_ERROR, version=web/5.6.1)\\n    at Logger.makeError (/home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/logger/src.ts/index.ts:261:28)\\n    at Logger.throwError (/home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/logger/src.ts/index.ts:273:20)\\n    at /home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/web/src.ts/index.ts:280:28\\n    at step (/home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/web/lib/index.js:33:23)\\n    at Object.throw (/home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/web/lib/index.js:14:53)\\n    at rejected (/home/optimism/optimism/node_modules/@ethersproject/providers/node_modules/@ethersproject/web/lib/index.js:6:65)\\n    at runMicrotasks (<anonymous>)\\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\",\"code\":\"SERVER_ERROR\"},\"msg\":\"Caught an unhandled error\"}\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1153154675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1157845069",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1157845069",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1157845069,
    "node_id": "IC_kwDODjvEJM5FA1BN",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-16T16:01:39Z",
    "updated_at": "2022-06-16T16:01:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@platschi can be temporarily resolved by syncing from Alchemy/Infura/whatever, any node provider that caches events. I'm looking at potential fixes but have a few other things in the pipeline and likely won't have a fix out until end of next week at the earliest.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1157845069/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1185118717",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1185118717",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1185118717,
    "node_id": "IC_kwDODjvEJM5Go3n9",
    "user": {
      "login": "ericlee42",
      "id": 92196970,
      "node_id": "U_kgDOBX7Qag",
      "avatar_url": "https://avatars.githubusercontent.com/u/92196970?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ericlee42",
      "html_url": "https://github.com/ericlee42",
      "followers_url": "https://api.github.com/users/ericlee42/followers",
      "following_url": "https://api.github.com/users/ericlee42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ericlee42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ericlee42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ericlee42/subscriptions",
      "organizations_url": "https://api.github.com/users/ericlee42/orgs",
      "repos_url": "https://api.github.com/users/ericlee42/repos",
      "events_url": "https://api.github.com/users/ericlee42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ericlee42/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-15T03:01:55Z",
    "updated_at": "2022-07-15T03:01:55Z",
    "author_association": "NONE",
    "body": "https://github.com/ethereum-optimism/optimism/blob/7baf49f1862fcad037a44e69b82b39e670307140/packages/data-transport-layer/src/services/l1-ingestion/service.ts#L353-L363\r\n\r\nThe block range is too large to get the events, I think it can be fixed\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1185118717/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200778009",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1200778009",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1200778009,
    "node_id": "IC_kwDODjvEJM5HkmsZ",
    "user": {
      "login": "BabySid",
      "id": 6658943,
      "node_id": "MDQ6VXNlcjY2NTg5NDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6658943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BabySid",
      "html_url": "https://github.com/BabySid",
      "followers_url": "https://api.github.com/users/BabySid/followers",
      "following_url": "https://api.github.com/users/BabySid/following{/other_user}",
      "gists_url": "https://api.github.com/users/BabySid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BabySid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BabySid/subscriptions",
      "organizations_url": "https://api.github.com/users/BabySid/orgs",
      "repos_url": "https://api.github.com/users/BabySid/repos",
      "events_url": "https://api.github.com/users/BabySid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BabySid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-01T06:40:58Z",
    "updated_at": "2022-08-01T06:40:58Z",
    "author_association": "NONE",
    "body": "I meet this problem too, and found this issuse. but it seems this pr is pausing now... any progress?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200778009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200916543",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1200916543",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1200916543,
    "node_id": "IC_kwDODjvEJM5HlIg_",
    "user": {
      "login": "BabySid",
      "id": 6658943,
      "node_id": "MDQ6VXNlcjY2NTg5NDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6658943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BabySid",
      "html_url": "https://github.com/BabySid",
      "followers_url": "https://api.github.com/users/BabySid/followers",
      "following_url": "https://api.github.com/users/BabySid/following{/other_user}",
      "gists_url": "https://api.github.com/users/BabySid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BabySid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BabySid/subscriptions",
      "organizations_url": "https://api.github.com/users/BabySid/orgs",
      "repos_url": "https://api.github.com/users/BabySid/repos",
      "events_url": "https://api.github.com/users/BabySid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BabySid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-01T08:58:32Z",
    "updated_at": "2022-08-01T08:58:32Z",
    "author_association": "NONE",
    "body": "@smartcontracts \r\n\r\nSorry to interrupt, how about the repair plan for this issue? :)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200916543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1238410782",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1238410782",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1238410782,
    "node_id": "IC_kwDODjvEJM5J0KYe",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-06T16:52:11Z",
    "updated_at": "2022-09-06T16:52:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@BabySid (and perhaps others looking at this issue), I spent some more time thinking about this and I want to give some context as to where we're at with fixing this:\r\n- Generally speaking, this issue occurs when syncing from L1 Geth nodes. It doesn't happen when syncing from Erigon or when syncing from node providers like Alchemy or Infura. Mainly, this is because Geth's log querying performance isn't very good.\r\n- Solving this problem \"the right way\" requires modifying the `data-transport-layer` to either introduce a new stateful entry in the dtl's database or introducing some relatively complex caching.\r\n- Since other syncing options exist (namely syncing via Erigon if you want to run your own node), there's less of a need to solve this issue immediately.\r\n- We are all hands on deck attempting to ship Bedrock, the new version of Optimism that will make issues like this obsolete.\r\n\r\nSo, therefore:\r\n- We will likely not fix this issue \"the right way\" until after we ship Bedrock.\r\n- If you want to sync without trusting node providers, I would recommend syncing off of Erigon.\r\n- If you really, really need to sync off of a Geth node, I can potentially put together a hacky (very unofficial) `data-transport-layer` image for you that would resolve the issue BUT could break under certain conditions (the hack can break if we use a certain upgrade path on L1, but we no longer use this upgrade path and have no plans to use this upgrade path in the future).",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1238410782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1238956146",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1238956146",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1238956146,
    "node_id": "IC_kwDODjvEJM5J2Phy",
    "user": {
      "login": "BabySid",
      "id": 6658943,
      "node_id": "MDQ6VXNlcjY2NTg5NDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6658943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BabySid",
      "html_url": "https://github.com/BabySid",
      "followers_url": "https://api.github.com/users/BabySid/followers",
      "following_url": "https://api.github.com/users/BabySid/following{/other_user}",
      "gists_url": "https://api.github.com/users/BabySid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BabySid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BabySid/subscriptions",
      "organizations_url": "https://api.github.com/users/BabySid/orgs",
      "repos_url": "https://api.github.com/users/BabySid/repos",
      "events_url": "https://api.github.com/users/BabySid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BabySid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-07T06:20:09Z",
    "updated_at": "2022-09-07T06:20:09Z",
    "author_association": "NONE",
    "body": "> @BabySid (and perhaps others looking at this issue), I spent some more time thinking about this and I want to give some context as to where we're at with fixing this:\r\n> \r\n>     * Generally speaking, this issue occurs when syncing from L1 Geth nodes. It doesn't happen when syncing from Erigon or when syncing from node providers like Alchemy or Infura. Mainly, this is because Geth's log querying performance isn't very good.\r\n> \r\n>     * Solving this problem \"the right way\" requires modifying the `data-transport-layer` to either introduce a new stateful entry in the dtl's database or introducing some relatively complex caching.\r\n> \r\n>     * Since other syncing options exist (namely syncing via Erigon if you want to run your own node), there's less of a need to solve this issue immediately.\r\n> \r\n>     * We are all hands on deck attempting to ship Bedrock, the new version of Optimism that will make issues like this obsolete.\r\n> \r\n> \r\n> So, therefore:\r\n> \r\n>     * We will likely not fix this issue \"the right way\" until after we ship Bedrock.\r\n> \r\n>     * If you want to sync without trusting node providers, I would recommend syncing off of Erigon.\r\n> \r\n>     * If you really, really need to sync off of a Geth node, I can potentially put together a hacky (very unofficial) `data-transport-layer` image for you that would resolve the issue BUT could break under certain conditions (the hack can break if we use a certain upgrade path on L1, but we no longer use this upgrade path and have no plans to use this upgrade path in the future).\r\n\r\nThank you very much for replying these messages. For me, erigon has been used to synchronize now, and I will look forward to the Bedrock very much.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1238956146/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1256835943",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/2653#issuecomment-1256835943",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/2653",
    "id": 1256835943,
    "node_id": "IC_kwDODjvEJM5K6ctn",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-24T02:18:14Z",
    "updated_at": "2022-09-24T02:18:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "#3445 fixed this issue for mainnet",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1256835943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

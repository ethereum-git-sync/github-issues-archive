{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/3690",
  "id": 1404391345,
  "node_id": "I_kwDODjvEJM5TtU-x",
  "number": 3690,
  "title": "L2geth stop sync",
  "user": {
    "login": "artjoma",
    "id": 15686738,
    "node_id": "MDQ6VXNlcjE1Njg2NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artjoma",
    "html_url": "https://github.com/artjoma",
    "followers_url": "https://api.github.com/users/artjoma/followers",
    "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
    "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
    "organizations_url": "https://api.github.com/users/artjoma/orgs",
    "repos_url": "https://api.github.com/users/artjoma/repos",
    "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artjoma/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-10-11T10:21:41Z",
  "updated_at": "2022-10-11T23:42:07Z",
  "closed_at": "2022-10-11T23:42:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nAfter start node, can't synchronize, node stack. CPU usage 0%, disk usage 0%. DTL works fine.\r\n\r\n**To Reproduce**\r\n* stop l2geth\r\n* start l2geth\r\n\r\n**Expected behavior**\r\nShould sync\r\n\r\n**Screenshots**\r\n```\r\nINFO [10-11|08:55:58.366] Starting peer-to-peer node               instance=Geth/v1.9.10-stable/linux-amd64/go1.19\r\nINFO [10-11|08:55:58.366] Allocated trie memory caches             clean=512.00MiB dirty=0.00B\r\nINFO [10-11|08:55:58.366] Allocated cache and file handles         database=/mnt/md2/optimism-mainnet/l2geth/chaindata/geth/chaindata cache=512.00MiB handles=350000\r\nINFO [10-11|08:56:01.561] Opened ancient database                  database=/mnt/md2/optimism-mainnet/l2geth/chaindata/geth/chaindata/ancient\r\nINFO [10-11|08:56:01.564] Initialised chain configuration          config=\"{ChainID: 10 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: 0 Petersburg: 0 Istanbul: 0, Muir Glacier: 0, Berlin>\r\nINFO [10-11|08:56:01.565] Initialising Ethereum protocol           versions=\"[64 63]\" network=10 dbversion=7\r\nINFO [10-11|08:56:01.566] Loaded most recent local header          number=21720347 hash=21b701…31195e td=43440695 age=1mo1w1d\r\nINFO [10-11|08:56:01.566] Loaded most recent local full block      number=21720347 hash=21b701…31195e td=43440695 age=1mo1w1d\r\nINFO [10-11|08:56:01.566] Loaded most recent local fast block      number=21720347 hash=21b701…31195e td=43440695 age=1mo1w1d\r\nINFO [10-11|08:56:01.637] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [10-11|08:56:01.637] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [10-11|08:56:01.637] Running in verifier mode                 sync-backend=l1\r\nINFO [10-11|08:56:01.637] Configured rollup client                 url=http://0.0.0.0:7878 chain-id=10 ctc-deploy-height=13596466\r\nINFO [10-11|08:56:01.651] Connected to upstream service\r\nINFO [10-11|08:56:01.653] Updating batch index                     old=0xc000c66a68 new=130426\r\nINFO [10-11|08:56:01.653] Found latest index                       index=21720347\r\nINFO [10-11|08:56:01.654] Block not found, resetting index         new=21720346 old=21720347\r\nINFO [10-11|08:56:01.654] Found latest queue index                 queue-index=139906\r\nINFO [10-11|08:56:01.664] Found correct staring queue index        queue-index=139906\r\nINFO [10-11|08:56:01.664] Initialized Latest L1 Info               blocknumber=15460610 timestamp=1662142452\r\nINFO [10-11|08:56:01.664] Initial Rollup State                     state=0xd9d6acc7301815884344ca8902856f85002de78d23ec0250fb0471604c61d75a index=21720346 queue-index=139906 verified-index=0xc00bf2c540\r\nWARN [10-11|08:56:01.664] Switch sync mode from fast sync to full sync\r\nINFO [10-11|08:56:01.665] Backend Config                           max-calldata-size=40000 gas-limit=15000000 is-verifier=true using-ovm=true\r\nINFO [10-11|08:56:01.669] New local node record                    seq=4 id=48fe0e4c88a169d0 ip=127.0.0.1 udp=0 tcp=30303\r\nINFO [10-11|08:56:01.669] Started P2P networking                   self=\"enode://e46b2c7e6a916d9460ce425e177d92bf43c12a0e38d9528059723f55f10ef1bef28ad58936a4f825064660ef768427fede936d183cc13258360db1f190cd18fe@127.0.0.1:30303?discport=0\"\r\nINFO [10-11|08:56:01.670] IPC endpoint opened                      url=/mnt/md2/optimism-mainnet/l2geth/chaindata/geth.ipc\r\nINFO [10-11|08:56:01.670] HTTP endpoint opened                     url=http://0.0.0.0:28545 cors=* vhosts=*\r\nINFO [10-11|08:56:01.670] WebSocket endpoint opened                url=ws://[::]:8546\r\nINFO [10-11|08:56:04.971] Unlocked account                         address=0x00000398232E2064F896018496b4b44b3D62751F\r\nINFO [10-11|08:56:04.971] Transaction pool price threshold updated price=0\r\nINFO [10-11|08:56:04.971] Transaction pool price threshold updated price=0\r\nINFO [10-11|08:56:04.971] Initializing Sync Service\r\nINFO [10-11|08:56:04.973] Set L2 Gas Price                         gasprice=1000000\r\nINFO [10-11|08:56:04.973] Set L1 Gas Price                         gasprice=12259556408\r\nINFO [10-11|08:56:04.973] Set batch overhead                       overhead=2100\r\nINFO [10-11|08:56:04.974] Set scalar                               scalar=1\r\nINFO [10-11|08:56:04.974] Starting Verifier Loop                   poll-interval=1s timestamp-refresh-threshold=5m0s\r\nINFO [10-11|08:56:04.983] Syncing transaction batch range          start=130427 end=190122\r\nINFO [10-11|08:56:05.094] New block                                index=21720347 l1-timestamp=1662142452 l1-blocknumber=15460610 tx-hash=0x1dc048c1b15d32061e63cf7cd835311a10590894b462b9b2809e45ed4280ccfc queue-orign=sequencer gas=70176 fees>\r\nINFO [10-11|09:56:01.638] Regenerated local transaction journal    transactions=0 accounts=0\r\n```\r\nLogging with trace level:\r\n```\r\nDEBUG[10-11|17:15:31.124] Historical transaction matches           index=21720345 hash=0x052e8a60fa2c0da40a0818568d1a05ef7aa283b03b91fd35df3d5c97af5ed839\r\nTRACE[10-11|17:15:31.124] Applying batched transaction             index=21720346\r\nTRACE[10-11|17:15:31.124] Applying indexed transaction             index=21720346\r\nDEBUG[10-11|17:15:31.124] Historical transaction matches           index=21720346 hash=0x7d67919bbbcfcc0548c1405c1a305606ff65c2cd6c6691e894b41e181a16ea8e\r\nTRACE[10-11|17:15:31.124] Applying batched transaction             index=21720347\r\nTRACE[10-11|17:15:31.124] Applying indexed transaction             index=21720347\r\nDEBUG[10-11|17:15:31.124] Applying transaction to tip              index=21720347 hash=0x1dc048c1b15d32061e63cf7cd835311a10590894b462b9b2809e45ed4280ccfc origin=sequencer\r\nDEBUG[10-11|17:15:31.125] Attempting to commit rollup transaction  hash=0x1dc048c1b15d32061e63cf7cd835311a10590894b462b9b2809e45ed4280ccfc\r\nTRACE[10-11|17:15:31.125] Waiting for transaction to be added to chain hash=0x1dc048c1b15d32061e63cf7cd835311a10590894b462b9b2809e45ed4280ccfc\r\nDEBUG[10-11|17:15:31.126] Adding L1 fee                            l1-fee=57276647538176\r\nDEBUG[10-11|17:15:31.218] VM returned with error                   err=\"evm: execution reverted\"              ret=0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000353504c0000000000000000000000000000000000000000000000000000000000\r\nINFO [10-11|17:15:31.218] New block                                index=21720347 l1-timestamp=1662142452 l1-blocknumber=15460610 tx-hash=0x1dc048c1b15d32061e63cf7cd835311a10590894b462b9b2809e45ed4280ccfc queue-orign=sequencer gas=70176 fees=7.0176e-08 elapsed=93.632ms\r\nTRACE[10-11|17:15:31.219] Waiting for slot to sign and propagate   delay=0s\r\n```\r\n\r\n**System Specs:**\r\n - OS: Linux\r\n - Branch develop based on Geth1.9.10\r\n\r\n```\r\nexport USING_OVM=true\r\nexport SEQUENCER_CLIENT_HTTP=https://mainnet.optimism.io\r\nexport BLOCK_SIGNER_ADDRESS=0x00000398232E2064F896018496b4b44b3D62751F\r\nexport BLOCK_SIGNER_PRIVATE_KEY=XXXXX\r\nexport BLOCK_SIGNER_PRIVATE_KEY_PASSWORD=pwd\r\nexport ETH1_CTC_DEPLOYMENT_HEIGHT=13596466\r\nexport ETH1_SYNC_SERVICE_ENABLE=true\r\nexport L2GETH_GENESIS_URL=https://storage.googleapis.com/optimism/mainnet/genesis-berlin.json\r\nexport L2GETH_GENESIS_HASH=0x106b0a3247ca54714381b1109e82cc6b7e32fd79ae56fbcc2e7b1541122f84ea\r\nexport L2GETH_BERLIN_ACTIVATION_HEIGHT=3950000\r\nexport ROLLUP_BACKEND=l1\r\nexport ROLLUP_CLIENT_HTTP=http://0.0.0.0:7878\r\nexport ROLLUP_DISABLE_TRANSFERS=false\r\nexport ROLLUP_ENABLE_L2_GAS_POLLING=false\r\nexport ROLLUP_GAS_PRICE_ORACLE_OWNER_ADDRESS=0x648E3e8101BFaB7bf5997Bd007Fb473786019159\r\nexport ROLLUP_MAX_CALLDATA_SIZE=40000\r\nexport ROLLUP_POLL_INTERVAL_FLAG=1s\r\nexport ROLLUP_SYNC_SERVICE_ENABLE=true\r\nexport ROLLUP_TIMESTAMP_REFRESH=5m\r\nexport ROLLUP_VERIFIER_ENABLE=true\r\n\r\nexport GCMODE=archive\r\nexport DATADIR=/mnt/md2/optimism-mainnet/l2geth/chaindata\r\nexport CHAIN_ID=10\r\nexport NETWORK_ID=10\r\nexport NO_DISCOVER=true\r\nexport NO_USB=true\r\nexport GASPRICE=0\r\nexport TARGET_GAS_LIMIT=15000000\r\nexport RPC_ADDR=0.0.0.0\r\nexport RPC_API=eth,rollup,net,web3,debug\r\nexport RPC_CORS_DOMAIN=*\r\nexport RPC_ENABLE=true\r\nexport RPC_PORT=28545\r\nexport RPC_VHOSTS=*\r\nexport WS_ADDR=0.0.0.0\r\nexport WS_API=eth,rollup,net,web3,debug\r\nexport WS_ORIGINS=*\r\nexport WS=true\r\n\r\n\r\n./geth \\\r\n   --datadir=$DATADIR \\\r\n   --password=$DATADIR/password \\\r\n   --allow-insecure-unlock \\\r\n   --unlock=$BLOCK_SIGNER_ADDRESS \\\r\n   --mine \\\r\n   --miner.etherbase=$BLOCK_SIGNER_ADDRESS \\\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
  "closed_by": {
    "login": "artjoma",
    "id": 15686738,
    "node_id": "MDQ6VXNlcjE1Njg2NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artjoma",
    "html_url": "https://github.com/artjoma",
    "followers_url": "https://api.github.com/users/artjoma/followers",
    "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
    "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
    "organizations_url": "https://api.github.com/users/artjoma/orgs",
    "repos_url": "https://api.github.com/users/artjoma/repos",
    "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artjoma/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1275247684",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3690#issuecomment-1275247684",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690",
    "id": 1275247684,
    "node_id": "IC_kwDODjvEJM5MArxE",
    "user": {
      "login": "jacquesvcritien",
      "id": 30493486,
      "node_id": "MDQ6VXNlcjMwNDkzNDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/30493486?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacquesvcritien",
      "html_url": "https://github.com/jacquesvcritien",
      "followers_url": "https://api.github.com/users/jacquesvcritien/followers",
      "following_url": "https://api.github.com/users/jacquesvcritien/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacquesvcritien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacquesvcritien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacquesvcritien/subscriptions",
      "organizations_url": "https://api.github.com/users/jacquesvcritien/orgs",
      "repos_url": "https://api.github.com/users/jacquesvcritien/repos",
      "events_url": "https://api.github.com/users/jacquesvcritien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacquesvcritien/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-11T20:37:28Z",
    "updated_at": "2022-10-11T20:37:28Z",
    "author_association": "NONE",
    "body": "I fixed this by increasing TARGET_GAS_LIMIT",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1275247684/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1275406540",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3690#issuecomment-1275406540",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3690",
    "id": 1275406540,
    "node_id": "IC_kwDODjvEJM5MBSjM",
    "user": {
      "login": "artjoma",
      "id": 15686738,
      "node_id": "MDQ6VXNlcjE1Njg2NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artjoma",
      "html_url": "https://github.com/artjoma",
      "followers_url": "https://api.github.com/users/artjoma/followers",
      "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
      "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
      "organizations_url": "https://api.github.com/users/artjoma/orgs",
      "repos_url": "https://api.github.com/users/artjoma/repos",
      "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artjoma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-11T23:41:48Z",
    "updated_at": "2022-10-11T23:41:48Z",
    "author_association": "NONE",
    "body": "@jacquesvcritien thank you! ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1275406540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062",
  "id": 1307743225,
  "node_id": "I_kwDODjvEJM5N8pP5",
  "number": 3062,
  "title": "About L1 to L2 recharge action call chain",
  "user": {
    "login": "af913337456",
    "id": 10436277,
    "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/af913337456",
    "html_url": "https://github.com/af913337456",
    "followers_url": "https://api.github.com/users/af913337456/followers",
    "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
    "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
    "organizations_url": "https://api.github.com/users/af913337456/orgs",
    "repos_url": "https://api.github.com/users/af913337456/repos",
    "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
    "received_events_url": "https://api.github.com/users/af913337456/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2907832604,
      "node_id": "MDU6TGFiZWwyOTA3ODMyNjA0",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-question",
      "name": "C-question",
      "color": "C5DEF5",
      "default": false,
      "description": "User questions that are neither feature requests nor bug reports"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 17,
  "created_at": "2022-07-18T10:33:14Z",
  "updated_at": "2022-07-30T08:52:50Z",
  "closed_at": "2022-07-30T08:52:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, i am learning the OP source code, met some problem which confuse me, about the Deposit ETH action.\r\n\r\n1. User try to deposit ETH to his OP address;\r\n2. Call contract \"L1StanderBridge.sol 's depositETH function\" ;\r\n3. Core code: `bytes memory message = abi.encodeWithSelector(\r\n            IL2ERC20Bridge.finalizeDeposit.selector,\r\n            address(0),\r\n            Lib_PredeployAddresses.OVM_ETH,\r\n            _from,\r\n            _to,\r\n            msg.value,\r\n            _data\r\n        );`\r\n4. On the third point above, the \"finalizeDeposit\" function will be call on the L2StanderBridge.sol to finish the deposit action.\r\n\r\nQuestion is:\r\n     When did the \"finalizeDeposit\" being called and by which character? the Relayer?\r\n\r\nSome job i have done:\r\n      I been searching the \"message-relayer\" project which wrote by typescript, but didn't find any sign of the L2StanderBridge's \"finalizeDeposit\" calling. The call of \"relayMessage\" is also limited, and only the L1 contract can be called.\r\n\r\nWould you pls help me, thanks alot.",
  "closed_by": {
    "login": "af913337456",
    "id": 10436277,
    "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/af913337456",
    "html_url": "https://github.com/af913337456",
    "followers_url": "https://api.github.com/users/af913337456/followers",
    "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
    "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
    "organizations_url": "https://api.github.com/users/af913337456/orgs",
    "repos_url": "https://api.github.com/users/af913337456/repos",
    "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
    "received_events_url": "https://api.github.com/users/af913337456/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1187404637",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1187404637",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1187404637,
    "node_id": "IC_kwDODjvEJM5Gxltd",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T13:18:29Z",
    "updated_at": "2022-07-18T13:18:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, thanks for taking a look at our code! This can indeed be a confusing aspect of the system.\r\n\r\nIn the case of a transaction being sent from L1 to L2,there is no need for a relayer.  The L2 geth client actually runs the L2 transaction as if it were being sent by the address on L1 which called `L1StandardBridge.depositEth()`.\r\n\r\nI'd suggest looking more at our upcoming upgrade, including the contracts in [contracts-bedrock](https://github.com/ethereum-optimism/optimism/blob/b70872149d98f9b14e2b15f74f9d08de75bb8b6e/node_modules/@eth-optimism/contracts-bedrock/contracts), and the [deposit specs](https://github.com/ethereum-optimism/optimism/blob/b70872149d98f9b14e2b15f74f9d08de75bb8b6e/specs/deposits.md#L1) which address your question. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1187404637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1187640419",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1187640419",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1187640419,
    "node_id": "IC_kwDODjvEJM5GyfRj",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T15:26:09Z",
    "updated_at": "2022-07-18T15:26:09Z",
    "author_association": "NONE",
    "body": "@maurelian \r\n\r\nThank you very much for your answer. I read the source code of all components further according to your tips, and came to the following conclusion. It should be correct. Could you please help me review it again? This will be the first complete code level call process in the whole network.\r\n\r\nðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡\r\n\r\nL1 Deposit Action:\r\n\r\nL1StanderdBridge.solâ€™s depositETH â€”> _initiateETHDeposit\r\n â€”> sendCrossDomainMessage â€”> sendMessage â€”> L1CrossDomainMessenger.solâ€™s sendMessage â€”> _sendXDomainMessage â€”> enqueue â€”> Event_TransactionEnqueued\r\n\r\nTransactionEnqueuedâ€™s tx_message contains the â€œfinalizeDepositâ€ function\r\n\r\nDataTransportLayer:\r\n\r\nfilter_TransactionEnqueued ---> StorageEnqueued\r\n\r\nSequencer:\r\n\r\nload_TransactionEnqueued â€”> Execute_Tx â€”> finalizeDeposit being executed â€”> done",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1187640419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1188387032",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1188387032",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1188387032,
    "node_id": "IC_kwDODjvEJM5G1VjY",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T22:29:01Z",
    "updated_at": "2022-07-18T22:29:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yep, that's looks right to me. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1188387032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1188490390",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1188490390",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1188490390,
    "node_id": "IC_kwDODjvEJM5G1uyW",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T01:17:54Z",
    "updated_at": "2022-07-19T01:17:54Z",
    "author_association": "NONE",
    "body": "> Yep, that's looks right to me.\r\n\r\n@maurelian \r\n\r\nI have another doubt:\r\n\r\nWe know that \"batch submitter\" will extract transactions from L2 block, and then submit them in batches to L1 CTC. In our conclusion above, will the recharge transaction also be submitted? If so, but it has completed the recharge action in L2. Is it unnecessary to submit it to CTC again, because it does not need to be challenged.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1188490390/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1189284407",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1189284407",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1189284407,
    "node_id": "IC_kwDODjvEJM5G4wo3",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T16:17:15Z",
    "updated_at": "2022-07-19T16:17:15Z",
    "author_association": "NONE",
    "body": "on waiting for you sir  @maurelian ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1189284407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190074819",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1190074819",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1190074819,
    "node_id": "IC_kwDODjvEJM5G7xnD",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T09:57:48Z",
    "updated_at": "2022-07-20T09:57:48Z",
    "author_association": "NONE",
    "body": "> > Yep, that's looks right to me.\r\n> \r\n> @maurelian\r\n> \r\n> I have another doubt:\r\n> \r\n> We know that \"batch submitter\" will extract transactions from L2 block, and then submit them in batches to L1 CTC. In our conclusion above, will the recharge transaction also be submitted? If so, but it has completed the recharge action in L2. Is it unnecessary to submit it to CTC again, because it does not need to be challenged.\r\n\r\n@maurelian are you still here sir",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190074819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190636640",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1190636640",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1190636640,
    "node_id": "IC_kwDODjvEJM5G96xg",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T18:51:54Z",
    "updated_at": "2022-07-20T18:51:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Once `appendSequencerBatch()` has successfully run, there should be no need to ever submit the same batches again.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190636640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190925017",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1190925017",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1190925017,
    "node_id": "IC_kwDODjvEJM5G_BLZ",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-21T01:09:25Z",
    "updated_at": "2022-07-30T08:52:30Z",
    "author_association": "NONE",
    "body": "> Once `appendSequencerBatch()` has successfully run, there should be no need to ever submit the same batches again.\r\n\r\n@maurelian \r\n\r\nThank you. ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1190925017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1192384220",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1192384220",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1192384220,
    "node_id": "IC_kwDODjvEJM5HElbc",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-22T09:40:49Z",
    "updated_at": "2022-07-22T09:40:49Z",
    "author_association": "NONE",
    "body": "> > Once `appendSequencerBatch()` has successfully run, there should be no need to ever submit the same batches again.\r\n> \r\n> @maurelian\r\n> \r\n> Thank you. I know that the same transaction will only be submitted once in `appendsequencerbatch`. What I want to know is that the last step of recharge transaction has been completed in L2, that is, `finalizedeposit`. At this time, it is no longer necessary to be submitted to L1 by `appendsequencerbatch`, right? If so, I didn't find this in the code. If not, we know that the transactions submitted by `appendsequencerbatch` to L1 will eventually be executed in L1, and the recharge action does not need to be executed at all.\r\n\r\n@maurelian wait for you sir",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1192384220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1193327643",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1193327643",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1193327643,
    "node_id": "IC_kwDODjvEJM5HILwb",
    "user": {
      "login": "Inphi",
      "id": 3516807,
      "node_id": "MDQ6VXNlcjM1MTY4MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3516807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Inphi",
      "html_url": "https://github.com/Inphi",
      "followers_url": "https://api.github.com/users/Inphi/followers",
      "following_url": "https://api.github.com/users/Inphi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Inphi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Inphi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Inphi/subscriptions",
      "organizations_url": "https://api.github.com/users/Inphi/orgs",
      "repos_url": "https://api.github.com/users/Inphi/repos",
      "events_url": "https://api.github.com/users/Inphi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Inphi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-24T14:18:46Z",
    "updated_at": "2022-07-24T14:18:46Z",
    "author_association": "COLLABORATOR",
    "body": "@af913337456 what do you mean by a \"recharge transaction\"?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1193327643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1193465833",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1193465833",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1193465833,
    "node_id": "IC_kwDODjvEJM5HItfp",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T01:46:17Z",
    "updated_at": "2022-07-25T10:47:27Z",
    "author_association": "NONE",
    "body": "> @af913337456 what do you mean by a \"recharge transaction\"?\r\n\r\nthe deposit action, \"_initiateETHDeposit\", you can see this conversationâ€˜s context",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1193465833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1194382814",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1194382814",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1194382814,
    "node_id": "IC_kwDODjvEJM5HMNXe",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T17:23:57Z",
    "updated_at": "2022-07-25T17:23:57Z",
    "author_association": "NONE",
    "body": "> > Once `appendSequencerBatch()` has successfully run, there should be no need to ever submit the same batches again.\r\n> \r\n> @maurelian\r\n> \r\n> Thank you. I know that the same transaction will only be submitted once in `appendsequencerbatch`. What I want to know is that the last step of recharge transaction has been completed in L2, that is, `finalizedeposit`. At this time, it is no longer necessary to be submitted to L1 by `appendsequencerbatch`, right? If so, I didn't find this in the code. If not, we know that the transactions submitted by `appendsequencerbatch` to L1 will eventually be executed in L1, and the recharge action does not need to be executed at all.\r\n\r\n@maurelian pls help me sir ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1194382814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1195797609",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1195797609",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1195797609,
    "node_id": "IC_kwDODjvEJM5HRmxp",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T17:51:25Z",
    "updated_at": "2022-07-26T17:51:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "I do not understand. So that we can try to answer your question efficiently:\r\n\r\n1. Please summarize your question from the beginning without simply quoting your previous questions.\r\n2. Please describe the flow you are asking about, including which parts you do understand, and which parts are unclear.\r\n3. Please provide links to the locations in the code that you are unclear about.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1195797609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1196228364",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1196228364",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1196228364,
    "node_id": "IC_kwDODjvEJM5HTP8M",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T03:35:56Z",
    "updated_at": "2022-07-30T08:51:50Z",
    "author_association": "NONE",
    "body": "> We know that \"batch submitter\" will extract transactions from L2 block, and then submit them in batches to L1 CTC. In our conclusion above, will the recharge transaction also be submitted? If so, but it has completed the recharge action in L2. Is it unnecessary to submit it to CTC again, because it does not need to be challenged.\r\n\r\n@maurelian \r\n\r\nThanks. I will now explain it from the complete process, combined with the project components and the code call chain process.\r\n\t\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1196228364/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1196228583",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1196228583",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1196228583,
    "node_id": "IC_kwDODjvEJM5HTP_n",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T03:36:27Z",
    "updated_at": "2022-07-27T03:36:27Z",
    "author_association": "NONE",
    "body": "> > We know that \"batch submitter\" will extract transactions from L2 block, and then submit them in batches to L1 CTC. In our conclusion above, will the recharge transaction also be submitted? If so, but it has completed the recharge action in L2. Is it unnecessary to submit it to CTC again, because it does not need to be challenged.\r\n> \r\n> @maurelian\r\n> \r\n> Thanks. I will now explain it from the complete process, combined with the project components and the code call chain process.\r\n> \r\n> 1. User try to `deposit` ETH to his `OP` address;\r\n> 2. Call contract `L1_StanderBridge.sol' s depositETH function`;\r\n> 3. `L1_StanderBridge.sol` core code: `bytes memory message = abi.encodeWithSelector( IL2ERC20Bridge.finalizeDeposit.selector, address(0), Lib_PredeployAddresses.OVM_ETH, _from, _to, msg.value, _data )`;\r\n> 4. On the third point above, will call to the `sendCrossDomainMessage --> L1CrossDomainMessenger's sendMessage --> _sendXDomainMessage --> CanonicalTransactionChain's enqueue --> TransactionEnqueued`\r\n> 5. On the fourth point above, the `finalizeDeposit` function will be included in `TransactionEnqueued`;\r\n> 6. And the `DataTransportLayer` scan the block transactions and filter the `TransactionEnqueued`, then storage the `TransactionEnqueued`;\r\n> 7. `Sequencer` load the `TransactionEnqueued` from the DB, and execute the Tx which contains the `finalizeDeposit` message, this will call to the `L2_StanderBridge.sol 's finalizeDeposit function`;\r\n> 8. So far, the user's deposit process has been completed. His L2 address also has a corresponding recharge token;\r\n> 9. In the above steps, the `Tx` of the message containing `finalizeDeposit` is also packaged in the L2 block;\r\n> 10. `batch-submitter` will extract transactions from L2 block and pack them in `tx-batches` to L1's CTC;\r\n> 11. The tinth point, `deposit transaction` also be submitted by `batch-submitter`, because it is packaged in L2 block;\r\n> 12. `tx-batches` which in L1's CTC, wait for the `challenge time` pass;\r\n> 13. the the `challenge time` passed, now the `relayer` call to `L1CrossDomainMessenger's relayMessage`;\r\n> 14. Now the problem comes, the user's `deposit` action has completed in L2, you can see it at the `eighth point`. And now will it be executed again in 'l1crossdomainmessenger's relaymessage'? If not, why not? According to the process, it has indeed been submitted here.\r\n\r\n@Inphi @smartcontracts here",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1196228583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1199204198",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1199204198",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1199204198,
    "node_id": "IC_kwDODjvEJM5Hemdm",
    "user": {
      "login": "af913337456",
      "id": 10436277,
      "node_id": "MDQ6VXNlcjEwNDM2Mjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10436277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/af913337456",
      "html_url": "https://github.com/af913337456",
      "followers_url": "https://api.github.com/users/af913337456/followers",
      "following_url": "https://api.github.com/users/af913337456/following{/other_user}",
      "gists_url": "https://api.github.com/users/af913337456/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/af913337456/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/af913337456/subscriptions",
      "organizations_url": "https://api.github.com/users/af913337456/orgs",
      "repos_url": "https://api.github.com/users/af913337456/repos",
      "events_url": "https://api.github.com/users/af913337456/events{/privacy}",
      "received_events_url": "https://api.github.com/users/af913337456/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-29T12:11:06Z",
    "updated_at": "2022-07-29T12:11:06Z",
    "author_association": "NONE",
    "body": "@maurelian sir",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1199204198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200059968",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3062#issuecomment-1200059968",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3062",
    "id": 1200059968,
    "node_id": "IC_kwDODjvEJM5Hh3ZA",
    "user": {
      "login": "maurelian",
      "id": 23033765,
      "node_id": "MDQ6VXNlcjIzMDMzNzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23033765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maurelian",
      "html_url": "https://github.com/maurelian",
      "followers_url": "https://api.github.com/users/maurelian/followers",
      "following_url": "https://api.github.com/users/maurelian/following{/other_user}",
      "gists_url": "https://api.github.com/users/maurelian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maurelian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maurelian/subscriptions",
      "organizations_url": "https://api.github.com/users/maurelian/orgs",
      "repos_url": "https://api.github.com/users/maurelian/repos",
      "events_url": "https://api.github.com/users/maurelian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maurelian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-30T01:29:16Z",
    "updated_at": "2022-07-30T01:29:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "> And now will it be executed again in 'l1crossdomainmessenger's relaymessage' ? If not, why not? According to the process, it has indeed been submitted here.\r\n\r\n`relayMessage()` will only succeed if this check passes: \r\n\r\nhttps://github.com/ethereum-optimism/optimism/blob/2a7be367634f147736f960eb2f38a77291cdfcad/packages/contracts/contracts/L1/messaging/L1CrossDomainMessenger.sol#L180\r\n\r\n`_verifyXDomainMessage` requires that the message is stored in the L2ToL1MessagePassers state.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1200059968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

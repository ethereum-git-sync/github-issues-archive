{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/9235",
  "id": 2106467104,
  "node_id": "I_kwDODjvEJM59jiMg",
  "number": 9235,
  "title": "Decrease SDK size / introduce submodules",
  "user": {
    "login": "ruXlab",
    "id": 1110234,
    "node_id": "MDQ6VXNlcjExMTAyMzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1110234?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ruXlab",
    "html_url": "https://github.com/ruXlab",
    "followers_url": "https://api.github.com/users/ruXlab/followers",
    "following_url": "https://api.github.com/users/ruXlab/following{/other_user}",
    "gists_url": "https://api.github.com/users/ruXlab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ruXlab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ruXlab/subscriptions",
    "organizations_url": "https://api.github.com/users/ruXlab/orgs",
    "repos_url": "https://api.github.com/users/ruXlab/repos",
    "events_url": "https://api.github.com/users/ruXlab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ruXlab/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2024-01-29T21:28:19Z",
  "updated_at": "2024-01-29T23:53:55Z",
  "closed_at": "2024-01-29T23:47:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello OP team\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI found that the SDK size is beyond expected. However, only fraction of the components can be used for the everyday \"userspace\" tasks.\r\n\r\n**Describe the solution you'd like**\r\nIt'd be great to introduce modules so user can choose what functionality needed. For some use cases it'd be just a gas price computation, for other - full blown testing dependencies with FaultDisputeGame.\r\n\r\n**Describe alternatives you've considered**\r\nWhen building the prod image one of the options is prune test-related contracts using plain `rm -rf`, releasing about 80Mb of disk space but it's a band-aid solution.\r\n\r\n**Current version**\r\n3.1.8\r\n\r\n**Steps to reproduce**\r\n(in the new folder, no deps installed)\r\n```sh\r\n$ npm install @eth-optimism/sdk\r\n\r\n$ du -sh node_modules/\r\n451M node_modules/\r\n\r\n$ du -h -d1 node_modules/ | sort -hr\r\n451M\tnode_modules/\r\n414M\tnode_modules/@eth-optimism <------------ [!!!!!!!!!!]\r\n11M\tnode_modules/ethers\r\n8.2M\tnode_modules/@ethersproject\r\n5.0M\tnode_modules/lodash\r\n2.8M\tnode_modules/@noble\r\n2.4M\tnode_modules/aes-js\r\n\r\n\r\n$ du -h -d3 node_modules/\\@eth-optimism/ | sort -hr\r\n414M\tnode_modules/@eth-optimism/\r\n410M\tnode_modules/@eth-optimism/contracts-bedrock\r\n393M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts <----------- [!!!!!!!!!!!!!!]\r\n69M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/FaultDisputeGame.t.sol\r\n52M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/L1StandardBridge.t.sol\r\n25M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/CommonTest.t.sol\r\n17M\tnode_modules/@eth-optimism/contracts-bedrock/deployments\r\n16M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/OptimismPortal.t.sol\r\n14M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/console2.sol\r\n14M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/console.sol\r\n14M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/L2StandardBridge.t.sol\r\n7.9M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/StdCheats.sol\r\n7.0M\tnode_modules/@eth-optimism/contracts-bedrock/forge-artifacts/L2OutputOracle.t.so\r\n\r\n....\r\n\r\n\r\n```\r\n\r\n",
  "closed_by": {
    "login": "roninjin10",
    "id": 35039927,
    "node_id": "MDQ6VXNlcjM1MDM5OTI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/35039927?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/roninjin10",
    "html_url": "https://github.com/roninjin10",
    "followers_url": "https://api.github.com/users/roninjin10/followers",
    "following_url": "https://api.github.com/users/roninjin10/following{/other_user}",
    "gists_url": "https://api.github.com/users/roninjin10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/roninjin10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/roninjin10/subscriptions",
    "organizations_url": "https://api.github.com/users/roninjin10/orgs",
    "repos_url": "https://api.github.com/users/roninjin10/repos",
    "events_url": "https://api.github.com/users/roninjin10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/roninjin10/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1915775721",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/9235#issuecomment-1915775721",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235",
    "id": 1915775721,
    "node_id": "IC_kwDODjvEJM5yMGrp",
    "user": {
      "login": "roninjin10",
      "id": 35039927,
      "node_id": "MDQ6VXNlcjM1MDM5OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/35039927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roninjin10",
      "html_url": "https://github.com/roninjin10",
      "followers_url": "https://api.github.com/users/roninjin10/followers",
      "following_url": "https://api.github.com/users/roninjin10/following{/other_user}",
      "gists_url": "https://api.github.com/users/roninjin10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/roninjin10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/roninjin10/subscriptions",
      "organizations_url": "https://api.github.com/users/roninjin10/orgs",
      "repos_url": "https://api.github.com/users/roninjin10/repos",
      "events_url": "https://api.github.com/users/roninjin10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/roninjin10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-29T23:47:55Z",
    "updated_at": "2024-01-29T23:47:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "The SDK is extremely large! This is a huge issue for those who are cognizant about bundle size.  \r\n\r\nMost of the SDK size comes from contract artifacts that are consumed by the SDK in a way such that treeshaking cannot occur.  It's not because the sdk itself is very large, it's mostly just one single file. So breaking it up into modules actually won't fix the issue unless the underlying contracts artifacts issue is also fixed. And even then treeshaking for ethers v5 and our class based sdk makes it better but still not great.\r\n\r\nFor context we created [op-viem](https://github.com/base-org/op-viem) to address this issue. Op-viem has all the functionality of the SDK in it at a much smaller bundle size hit that gets even better if you only use some of op-viem both viem and op-viem are tree shakable.\r\n\r\nDepending on your use case you might not even need op-viem because [viem supports the op stack natively](https://viem.sh/op-stack)\r\n\r\nWe have no plans to update the `@eth-optimism/sdk` and suggest everybody consider migrating to viem or op-viem",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1915775721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1915782863",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/9235#issuecomment-1915782863",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/9235",
    "id": 1915782863,
    "node_id": "IC_kwDODjvEJM5yMIbP",
    "user": {
      "login": "roninjin10",
      "id": 35039927,
      "node_id": "MDQ6VXNlcjM1MDM5OTI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/35039927?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roninjin10",
      "html_url": "https://github.com/roninjin10",
      "followers_url": "https://api.github.com/users/roninjin10/followers",
      "following_url": "https://api.github.com/users/roninjin10/following{/other_user}",
      "gists_url": "https://api.github.com/users/roninjin10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/roninjin10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/roninjin10/subscriptions",
      "organizations_url": "https://api.github.com/users/roninjin10/orgs",
      "repos_url": "https://api.github.com/users/roninjin10/repos",
      "events_url": "https://api.github.com/users/roninjin10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/roninjin10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-29T23:53:39Z",
    "updated_at": "2024-01-29T23:53:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the issue and if you either\r\n- Need the sdk updated and want guidance on how to do it\r\n- Need help migrating to viem\r\n- Feel like this issue shouldn't have been closed\r\n\r\nJust let me know and I'm happy to help :)",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1915782863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

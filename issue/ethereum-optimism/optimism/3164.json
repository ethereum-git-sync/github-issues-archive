{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164",
  "id": 1327796676,
  "node_id": "I_kwDODjvEJM5PJJHE",
  "number": 3164,
  "title": "L2Geth: Block synchronization requires importing leaked private key",
  "user": {
    "login": "wjmelements",
    "id": 799573,
    "node_id": "MDQ6VXNlcjc5OTU3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wjmelements",
    "html_url": "https://github.com/wjmelements",
    "followers_url": "https://api.github.com/users/wjmelements/followers",
    "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
    "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
    "organizations_url": "https://api.github.com/users/wjmelements/orgs",
    "repos_url": "https://api.github.com/users/wjmelements/repos",
    "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wjmelements/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3152093041,
      "node_id": "MDU6TGFiZWwzMTUyMDkzMDQx",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/P-wontfix",
      "name": "P-wontfix",
      "color": "C5DEF5",
      "default": false,
      "description": "Something we won't fix because it's intended behavior"
    },
    {
      "id": 3357535896,
      "node_id": "MDU6TGFiZWwzMzU3NTM1ODk2",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/M-l2geth",
      "name": "M-l2geth",
      "color": "FBCA04",
      "default": false,
      "description": "Module: l2geth"
    },
    {
      "id": 4266439918,
      "node_id": "LA_kwDODjvEJM7-TLTu",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/C-bedrock-fixes-this",
      "name": "C-bedrock-fixes-this",
      "color": "C5DEF5",
      "default": false,
      "description": "Category: Something Bedrock fixes"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-08-03T21:12:06Z",
  "updated_at": "2022-12-15T23:45:51Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Ask\r\nYour nodes should not require users to import a leaked private key into their keychain\r\n\r\n## Context (Resolved)\r\n\r\nWhen syncing from L1 it seems to get stuck.\r\n\r\nI am on commit 907ef2ee21db7f1e7ef438095ece1537178f7559 trying to follow the sync from L1 steps in the [docs](https://community.optimism.io/docs/developers/build/run-a-node/). I have attempted the setup three times on two different machines. I setup the DTL and the l2geth.\r\n\r\nCurrent DTL:\r\n```\r\n$ curl -s http://localhost:7878/eth/syncing?backend=l1\r\n{\"syncing\":true,\"highestKnownTransactionIndex\":17499838,\"currentTransactionIndex\":434044}\r\n```\r\n\r\nl2geth output, to the point it gets stuck:\r\n```\r\nINFO [08-03|13:56:02.860] Maximum peer count                       ETH=50 LES=0 total=50\r\nINFO [08-03|13:56:02.860] Smartcard socket not found, disabling    err=\"stat /run/pcscd/pcscd.comm: no such file or directory\"\r\nINFO [08-03|13:56:02.861] Starting peer-to-peer node               instance=Geth/v1.9.10-stable/linux-amd64/go1.19\r\nINFO [08-03|13:56:02.861] Allocated trie memory caches             clean=8.00GiB dirty=0.00B\r\nINFO [08-03|13:56:02.861] Allocated cache and file handles         database=/shared_ebs/optimism_data/geth/chaindata cache=8.00GiB handles=262144\r\nINFO [08-03|13:56:03.004] Opened ancient database                  database=/shared_ebs/optimism_data/geth/chaindata/ancient\r\nINFO [08-03|13:56:03.007] Initialised chain configuration          config=\"{ChainID: 10 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: 0 Petersburg: 0 Istanbul: 0, Muir Glacier: 0, Berlin: 3950000, Engine: clique}\"\r\nINFO [08-03|13:56:03.008] Initialising Ethereum protocol           versions=\"[64 63]\" network=10 dbversion=7\r\nINFO [08-03|13:56:03.012] Loaded most recent local header          number=0 hash=c02471�~@�726846 td=1 age=53y4mo1w\r\nINFO [08-03|13:56:03.012] Loaded most recent local full block      number=0 hash=c02471�~@�726846 td=1 age=53y4mo1w\r\nINFO [08-03|13:56:03.012] Loaded most recent local fast block      number=0 hash=c02471�~@�726846 td=1 age=53y4mo1w\r\nINFO [08-03|13:56:03.013] Loaded local transaction journal         transactions=0 dropped=0\r\nINFO [08-03|13:56:03.013] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [08-03|13:56:03.013] Running in verifier mode                 sync-backend=l1\r\nINFO [08-03|13:56:03.013] Configured rollup client                 url=http://localhost:7878 chain-id=10 ctc-deploy-height=13596466\r\nINFO [08-03|13:56:03.126] Connected to upstream service\r\nINFO [08-03|13:56:03.126] Initializing initial OVM Context         ctc-deploy-height=13596466\r\nINFO [08-03|13:56:03.141] Found latest queue index                 queue-index=9422\r\nINFO [08-03|13:56:03.141] Hit genesis block when fixing queue index\r\nINFO [08-03|13:56:03.141] Initialized Latest L1 Info               blocknumber=13596466 timestamp=1636654670\r\nINFO [08-03|13:56:03.141] Initial Rollup State                     state=0x8cd430ffda5fc66b3b87c1de38a08f26d9e568cc6afee1759ac528e2db6436b1 index=<nil> queue-index=9422 verified-index=<nil>\r\nINFO [08-03|13:56:03.256] Allocated fast sync bloom                size=8.00GiB\r\nINFO [08-03|13:56:03.260] Backend Config                           max-calldata-size=40000 gas-limit=15000000 is-verifier=true using-ovm=true\r\nINFO [08-03|13:56:03.310] New local node record                    seq=6 id=2e8f41a2ddd81e38 ip=127.0.0.1 udp=0 tcp=30010\r\nINFO [08-03|13:56:03.310] Started P2P networking                   self=\"enode://d16ca5c58f1d5f3a56af71b407d880f94b6ac8d0ffaf47e8470e562777ffb8b31602e706658fc1ff0bd6e71cdda6642b04318657bfd360fedd1d75f7bf9c4931@127.0.0.1:30010?discport=0\"\r\nINFO [08-03|13:56:03.313] IPC endpoint opened                      url=/shared_ebs/optimism_data/geth.ipc\r\nINFO [08-03|13:56:03.314] HTTP endpoint opened                     url=http://0.0.0.0:8610                cors=* vhosts=*\r\nINFO [08-03|13:56:03.316] WebSocket endpoint opened                url=ws://[::]:8611\r\nINFO [08-03|13:56:05.707] Unlocked account                         address=0x81E17523ad50960b0B4c98969E20cD5115b68735\r\nINFO [08-03|13:56:05.708] Transaction pool price threshold updated price=0\r\nINFO [08-03|13:56:05.708] Transaction pool price threshold updated price=0\r\nINFO [08-03|13:56:05.708] Initializing Sync Service\r\nINFO [08-03|13:56:05.710] Set L2 Gas Price                         gasprice=1\r\nINFO [08-03|13:56:05.710] Set L1 Gas Price                         gasprice=1\r\nINFO [08-03|13:56:05.710] Set batch overhead                       overhead=2750\r\nINFO [08-03|13:56:05.711] Set scalar                               scalar=1.5\r\nINFO [08-03|13:56:05.711] Starting Verifier Loop                   poll-interval=1s timestamp-refresh-threshold=5m0s\r\nINFO [08-03|13:56:06.176] Syncing transaction batch range          start=0 end=2560\r\nINFO [08-03|13:56:06.248] New block                                index=0     l1-timestamp=1636665399 l1-blocknumber=13597253 tx-hash=0x5e77a04531c7c107af1882d76cbff9486d0a9aa53701c30888509d4f5f2b003a queue-orign=sequencer gas=202813 fees=2.02813e-13 elapsed=42.689ms\r\nWARN [08-03|13:56:06.248] Block sealing failed                     err=\"unauthorized signer\"\r\nINFO [08-03|13:56:11.256] Initializing fast sync bloom             items=1193683 errorrate=0.000 elapsed=8.000s\r\nINFO [08-03|13:56:19.273] Initializing fast sync bloom             items=2201729 errorrate=0.000 elapsed=16.016s\r\nINFO [08-03|13:56:27.273] Initializing fast sync bloom             items=3586677 errorrate=0.000 elapsed=24.016s\r\nINFO [08-03|13:56:30.796] Initialized fast sync bloom              items=4883104 errorrate=0.000 elapsed=27.540s\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1204499784",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164#issuecomment-1204499784",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
    "id": 1204499784,
    "node_id": "IC_kwDODjvEJM5HyzVI",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-03T21:25:02Z",
    "updated_at": "2022-08-03T21:25:02Z",
    "author_association": "NONE",
    "body": "Based on the logs I believe the most likely cause is\r\n```\r\nWARN [08-03|13:56:06.248] Block sealing failed                     err=\"unauthorized signer\"\r\n```\r\nwhich may be related to the docs saying\r\n```\r\nCreate the geth account. The private key needs to be the one specified in the configuration, otherwise the consensus algorithm fails and the node does not synchronize.\r\n```\r\nIndeed I am using the account and private key that *I specified* in the configuration but I am not using the one for `0x00000398232E2064F896018496b4b44b3D62751F`. I will see if I am indeed supposed to use your \"private\" key. If that is truly the fix, yall should either incorporate this key into the repo or remove the check, depending on the actual reason you made this necessary. Your protocol should not require users to import a leaked private key into their keychain. But I will see if this the fix",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1204499784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1204521027",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164#issuecomment-1204521027",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
    "id": 1204521027,
    "node_id": "IC_kwDODjvEJM5Hy4hD",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-03T21:49:29Z",
    "updated_at": "2022-08-03T21:49:29Z",
    "author_association": "NONE",
    "body": "> I will see if I am indeed supposed to use your \"private\" key\r\n\r\nIndeed the fix is to keep `0x00000398232E2064F896018496b4b44b3D62751F` from the example configuration",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1204521027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1205626344",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164#issuecomment-1205626344",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
    "id": 1205626344,
    "node_id": "IC_kwDODjvEJM5H3GXo",
    "user": {
      "login": "tynes",
      "id": 6626818,
      "node_id": "MDQ6VXNlcjY2MjY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tynes",
      "html_url": "https://github.com/tynes",
      "followers_url": "https://api.github.com/users/tynes/followers",
      "following_url": "https://api.github.com/users/tynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/tynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
      "organizations_url": "https://api.github.com/users/tynes/orgs",
      "repos_url": "https://api.github.com/users/tynes/repos",
      "events_url": "https://api.github.com/users/tynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-04T18:34:43Z",
    "updated_at": "2022-08-04T18:34:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Your protocol should not require users to import a leaked private key into their keychain\r\n\r\nUnfortunately due to the way that the current system was built, the same key must be used for the clique signer to get deterministic block hashes. This is a huge face palm and will be fixed when we migrate to the new bedrock architecture.\r\n\r\nAn improvement would be to hardcode the key into the `l2geth` codebase and just use it at runtime",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1205626344/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1215800953",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164#issuecomment-1215800953",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
    "id": 1215800953,
    "node_id": "IC_kwDODjvEJM5Id6Z5",
    "user": {
      "login": "smartcontracts",
      "id": 14298799,
      "node_id": "MDQ6VXNlcjE0Mjk4Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/14298799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smartcontracts",
      "html_url": "https://github.com/smartcontracts",
      "followers_url": "https://api.github.com/users/smartcontracts/followers",
      "following_url": "https://api.github.com/users/smartcontracts/following{/other_user}",
      "gists_url": "https://api.github.com/users/smartcontracts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smartcontracts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smartcontracts/subscriptions",
      "organizations_url": "https://api.github.com/users/smartcontracts/orgs",
      "repos_url": "https://api.github.com/users/smartcontracts/repos",
      "events_url": "https://api.github.com/users/smartcontracts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smartcontracts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T21:03:03Z",
    "updated_at": "2022-08-15T21:03:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Marking \"wontfix\" since this will not be addressed until Bedrock makes the issue obsolete. Like @tynes stated, we import a specific known private key to get deterministic block hashes. Does not impact user security.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1215800953/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1353876969",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/3164#issuecomment-1353876969",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/3164",
    "id": 1353876969,
    "node_id": "IC_kwDODjvEJM5QsoXp",
    "user": {
      "login": "aslanbayramov",
      "id": 117563304,
      "node_id": "U_kgDOBwHfqA",
      "avatar_url": "https://avatars.githubusercontent.com/u/117563304?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aslanbayramov",
      "html_url": "https://github.com/aslanbayramov",
      "followers_url": "https://api.github.com/users/aslanbayramov/followers",
      "following_url": "https://api.github.com/users/aslanbayramov/following{/other_user}",
      "gists_url": "https://api.github.com/users/aslanbayramov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aslanbayramov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aslanbayramov/subscriptions",
      "organizations_url": "https://api.github.com/users/aslanbayramov/orgs",
      "repos_url": "https://api.github.com/users/aslanbayramov/repos",
      "events_url": "https://api.github.com/users/aslanbayramov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aslanbayramov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-15T23:45:51Z",
    "updated_at": "2022-12-15T23:45:51Z",
    "author_association": "NONE",
    "body": "Kvvlbı",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1353876969/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

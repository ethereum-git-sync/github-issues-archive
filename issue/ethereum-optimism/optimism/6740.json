{
  "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
  "repository_url": "https://api.github.com/repos/ethereum-optimism/optimism",
  "labels_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740/labels{/name}",
  "comments_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740/comments",
  "events_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740/events",
  "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740",
  "id": 1846939529,
  "node_id": "I_kwDODjvEJM5uFg-J",
  "number": 6740,
  "title": "op-service: RPC transport options ",
  "user": {
    "login": "protolambda",
    "id": 19571989,
    "node_id": "MDQ6VXNlcjE5NTcxOTg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/protolambda",
    "html_url": "https://github.com/protolambda",
    "followers_url": "https://api.github.com/users/protolambda/followers",
    "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
    "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
    "organizations_url": "https://api.github.com/users/protolambda/orgs",
    "repos_url": "https://api.github.com/users/protolambda/repos",
    "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/protolambda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2978714528,
      "node_id": "MDU6TGFiZWwyOTc4NzE0NTI4",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/D-good-first-issue",
      "name": "D-good-first-issue",
      "color": "F9D0C4",
      "default": false,
      "description": "Difficulty: A great task to get started"
    },
    {
      "id": 5828636827,
      "node_id": "LA_kwDODjvEJM8AAAABW2nwmw",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/M-community",
      "name": "M-community",
      "color": "C2E0C6",
      "default": false,
      "description": "Meta: community help wanted"
    },
    {
      "id": 5851595221,
      "node_id": "LA_kwDODjvEJM8AAAABXMhB1Q",
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/labels/A-op-service",
      "name": "A-op-service",
      "color": "FEF2C0",
      "default": false,
      "description": "Area: op-service"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "protolambda",
    "id": 19571989,
    "node_id": "MDQ6VXNlcjE5NTcxOTg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/protolambda",
    "html_url": "https://github.com/protolambda",
    "followers_url": "https://api.github.com/users/protolambda/followers",
    "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
    "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
    "organizations_url": "https://api.github.com/users/protolambda/orgs",
    "repos_url": "https://api.github.com/users/protolambda/repos",
    "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/protolambda/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-08-11T14:37:03Z",
  "updated_at": "2023-08-24T23:56:45Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "- [ ] extend RPC transport options\r\n  - We could support:\r\n    - websocket RPC, like geth\r\n    - IPC RPC, like geth\r\n    - attaching in-process: this can make tests faster, by not depending on http requests/servers.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682269592",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1682269592",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1682269592,
    "node_id": "IC_kwDODjvEJM5kRWWY",
    "user": {
      "login": "AN-Drew207",
      "id": 81970877,
      "node_id": "MDQ6VXNlcjgxOTcwODc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/81970877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AN-Drew207",
      "html_url": "https://github.com/AN-Drew207",
      "followers_url": "https://api.github.com/users/AN-Drew207/followers",
      "following_url": "https://api.github.com/users/AN-Drew207/following{/other_user}",
      "gists_url": "https://api.github.com/users/AN-Drew207/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AN-Drew207/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AN-Drew207/subscriptions",
      "organizations_url": "https://api.github.com/users/AN-Drew207/orgs",
      "repos_url": "https://api.github.com/users/AN-Drew207/repos",
      "events_url": "https://api.github.com/users/AN-Drew207/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AN-Drew207/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-17T13:16:22Z",
    "updated_at": "2023-08-17T13:16:22Z",
    "author_association": "NONE",
    "body": "Hi! A friend (@0xR360) and I want to contribute in this issue, we have a couple of questions, where are implemented the RPC transport options now? and we have a question related to this item\r\n\r\n> \"attaching in-process: this can make tests faster, by not depending on http requests/servers.\" \r\n\r\n We would like to know which tests would run faster and why?\r\n \r\n Thanks in advance!\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682269592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682280428",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1682280428",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1682280428,
    "node_id": "IC_kwDODjvEJM5kRY_s",
    "user": {
      "login": "Rcontre360",
      "id": 69065663,
      "node_id": "MDQ6VXNlcjY5MDY1NjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/69065663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rcontre360",
      "html_url": "https://github.com/Rcontre360",
      "followers_url": "https://api.github.com/users/Rcontre360/followers",
      "following_url": "https://api.github.com/users/Rcontre360/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rcontre360/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rcontre360/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rcontre360/subscriptions",
      "organizations_url": "https://api.github.com/users/Rcontre360/orgs",
      "repos_url": "https://api.github.com/users/Rcontre360/repos",
      "events_url": "https://api.github.com/users/Rcontre360/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rcontre360/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-17T13:23:04Z",
    "updated_at": "2023-08-17T13:23:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes! Thanks @AN-Drew207 . Would like to contribute here too",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682280428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682763396",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1682763396",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1682763396,
    "node_id": "IC_kwDODjvEJM5kTO6E",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-17T18:26:02Z",
    "updated_at": "2023-08-17T18:26:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AN-Drew207 in op-geth, see https://github.com/ethereum-optimism/op-geth  if you're unsure how to support the transports, please go through the op-geth code and then post any proposed changes / usage here. This is a more advanced issue than some of the other good-first-issue items, so it may require more time to get right.\r\n\r\n@Rcontre360 thank you, @AN-Drew207 was first, but if you're really interested you can help them by outlining the geth RPC utils and options here.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1682763396/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1685306226",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1685306226",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1685306226,
    "node_id": "IC_kwDODjvEJM5kc7ty",
    "user": {
      "login": "Rcontre360",
      "id": 69065663,
      "node_id": "MDQ6VXNlcjY5MDY1NjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/69065663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rcontre360",
      "html_url": "https://github.com/Rcontre360",
      "followers_url": "https://api.github.com/users/Rcontre360/followers",
      "following_url": "https://api.github.com/users/Rcontre360/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rcontre360/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rcontre360/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rcontre360/subscriptions",
      "organizations_url": "https://api.github.com/users/Rcontre360/orgs",
      "repos_url": "https://api.github.com/users/Rcontre360/repos",
      "events_url": "https://api.github.com/users/Rcontre360/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rcontre360/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-20T15:01:16Z",
    "updated_at": "2023-08-20T15:01:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @protolambda!\r\nThe following is the Idea we get from the issue and what we need to do. We reviewed the op-geth code to see how they do it and this are the points we think we need to work on. Let us know if we are missing anything or if we have the wrong understanding.\r\n\r\n - Create flags on command line to allow the user to configure ws and ipc. https://github.com/ethereum-optimism/optimism/blob/develop/op-node/flags/flags.go \r\n\r\n - Update the Config or RPCConfig struct to have this the ipc/ws config available: https://github.com/ethereum-optimism/optimism/blob/develop/op-node/node/config.go#L15-L48\r\n\r\n- Modify rpcServer to hold server instances of ipc, ws https://github.com/ethereum-optimism/optimism/blob/develop/op-node/node/server.go#L21-L29 . In op-geth they seem to hold the server instances of all 3 transports in the Node config object.\r\n\r\n - Create a WebsocketHandler and IPCHandler (ws: https://github.com/ethereum-optimism/op-geth/blob/optimism/rpc/websocket.go). Then configure properly the rpcServer on creation and start https://github.com/ethereum-optimism/optimism/blob/develop/op-node/node/server.go#L31-L46\r\n\r\nQuestions:\r\n - Let us know if we are understanding well and we are on track :).\r\n - About the \"attaching in-process\" we need more clarification about what it is exactly\r\n - Can we work first on \"move op-node client package\", make the PR so that you start verifying our code? or we must do the PR after finishing everything?",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1685306226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1687058155",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1687058155",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1687058155,
    "node_id": "IC_kwDODjvEJM5kjnbr",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-21T21:18:41Z",
    "updated_at": "2023-08-21T21:18:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @Rcontre360!\r\nI've split out the code-organization related cleanup into its own issue: https://github.com/ethereum-optimism/optimism/issues/6936\r\nIf you're able to tackle that first then go for it, I appreciate the contributions :+1: ",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1687058155/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1692562316",
    "html_url": "https://github.com/ethereum-optimism/optimism/issues/6740#issuecomment-1692562316",
    "issue_url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/6740",
    "id": 1692562316,
    "node_id": "IC_kwDODjvEJM5k4nOM",
    "user": {
      "login": "sambacha",
      "id": 32783916,
      "node_id": "MDQ6VXNlcjMyNzgzOTE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/32783916?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sambacha",
      "html_url": "https://github.com/sambacha",
      "followers_url": "https://api.github.com/users/sambacha/followers",
      "following_url": "https://api.github.com/users/sambacha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sambacha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sambacha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sambacha/subscriptions",
      "organizations_url": "https://api.github.com/users/sambacha/orgs",
      "repos_url": "https://api.github.com/users/sambacha/repos",
      "events_url": "https://api.github.com/users/sambacha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sambacha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T23:56:45Z",
    "updated_at": "2023-08-24T23:56:45Z",
    "author_association": "NONE",
    "body": "gRPC would enable streaming, which would be helpful for large RPC responses like debug_* etc.",
    "reactions": {
      "url": "https://api.github.com/repos/ethereum-optimism/optimism/issues/comments/1692562316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

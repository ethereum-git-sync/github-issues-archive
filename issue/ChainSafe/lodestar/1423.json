{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1423",
  "id": 682223911,
  "node_id": "MDU6SXNzdWU2ODIyMjM5MTE=",
  "number": 1423,
  "title": "Initial Sync keeps retrying a range on restart",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-08-19T22:30:13Z",
  "updated_at": "2020-08-20T15:32:35Z",
  "closed_at": "2020-08-20T15:32:35Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nI keep getting this in my node, can't move forward.\r\n```\r\n2020-08-20 05:58:51  [SYNC]             info: Imported blocks for slots: 74438,74439,74441,74442,74443,74444,74445,74446,74447,74449,74451,74454,74455,74456,74458,74459,74461,74462,74464,74466,74471,74473,74474,74475,74476,74478,74479,74481,74485,74490,74491,74493,74495,74496,74498,74499,74501\r\n2020-08-20 05:58:51  [SYNC]             warn: Received block parent root doesn't match our head head=0xe1aeb5e8b60a65c5013716c19c4c26ad93b42a00c7cebb4bef903f11208df955, headSlot=74437, blockParent=0xcd03f1aafa136f6284052e37739f92adafd0b5883c1745642e31df446fc6fc45, blockSlot=74438\r\n2020-08-20 05:58:51  [SYNC]          verbose: last processed slot=74437\r\n2020-08-20 05:58:51  [SYNC]             warn: Failed to process range, retry fetching range, lastSlot=74437\r\n```\r\nThis is because I have block 74437 in db which is not part of finalized chain, it came from regular sync 2 days ago and now it becomes my head while the real parent of block 74438 is 74435.\r\nCan't recover from that atm.\r\n**Expected behavior**\r\nInitial Sync currently only expects finalized blocks in db which is good for most of the time.\r\nBut for the 1st range it fetches, it should expect some unfinalized blocks in db since it may come from an old regular sync some days ago.\r\n\r\n**Steps to Reproduce**\r\n\r\n1. Sync Medalla until Regular Sync so we have some unfinalized block in db and it becomes head\r\n2. Stop\r\n3. Wait for some time so Medalla can have new finalized epoch (in my case it's 2 days)\r\n4. Start our node again to sync, it may be stuck if our head is not part of finalized chain.\r\n\r\n\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1423/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

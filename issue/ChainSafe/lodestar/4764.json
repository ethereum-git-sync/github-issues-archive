{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4764",
  "id": 1447223471,
  "node_id": "I_kwDOCD5_Gc5WQuCv",
  "number": 4764,
  "title": "Investigate InsufficientPeers issue when submitPoolAttestations in sim tests",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-11-14T01:25:57Z",
  "updated_at": "2023-02-27T08:09:18Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "        I am seeing lot of these error messages on the `unstable` branch during the sim tests. \r\n\r\n```\r\nEph 4/4 1.635[node-2-cl-lodestar/api] \u001B[31merror\u001B[39m: Error on submitPoolAttestations [0] slot=36, index=2 PublishError.InsufficientPeers\r\nError: PublishError.InsufficientPeers\r\n    at EventTarget.publish (file:///home/runner/work/lodestar/lodestar/node_modules/@chainsafe/libp2p-gossipsub/src/index.ts:1957:13)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at EventTarget.publishObject (file:///home/runner/work/lodestar/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:171:20)\r\n    at EventTarget.publishBeaconAttestation (file:///home/runner/work/lodestar/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:213:12)\r\n    at file:///home/runner/work/lodestar/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:52:31\r\n    at async Promise.all (index 0)\r\n    at Object.submitPoolAttestations (file:///home/runner/work/lodestar/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:46:7)\r\n    at Object.handler (file:///home/runner/work/lodestar/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\n```\r\n\r\n_Originally posted by @nazarhussain in https://github.com/ChainSafe/lodestar/issues/4660#issuecomment-1311457914_\r\n      ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1314723423",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1314723423",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1314723423,
    "node_id": "IC_kwDOCD5_Gc5OXRZf",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T03:40:22Z",
    "updated_at": "2022-11-15T03:40:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "this used to happen in e2e tests when we have single node, it's gone after we configured `network: {allowPublishToZeroPeers: true},` in `getDevBeaconNode` api",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1314723423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1315075294",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1315075294",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1315075294,
    "node_id": "IC_kwDOCD5_Gc5OYnTe",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-15T10:04:04Z",
    "updated_at": "2022-11-15T10:04:22Z",
    "author_association": "MEMBER",
    "body": "> this used to happen in e2e tests when we have single node, it's gone after we configured `network: {allowPublishToZeroPeers: true},` in `getDevBeaconNode` api\r\n\r\nIn this test the network always has 4 peers connected with each other. `allowPublishToZeroPeers` of course suppresses the error, that the purpose of the flag. However:\r\n- The network has 4 peers each running >= 32 validators\r\n- Then, all nodes _should_ be subscribed to all subnets and all syncnets\r\n- If scores are good all nodes should be meshed with each other\r\n- Then, when publishing any gossip object it should be sent to at least 1 peer. So, why does the `InsufficientPeers` error happen?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1315075294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1316614153",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1316614153",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1316614153,
    "node_id": "IC_kwDOCD5_Gc5OefAJ",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T08:46:59Z",
    "updated_at": "2022-11-16T08:46:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dapplion I just want to give info to this issue, I didn't mean the issue happened in any e2e tests. I also wasn't able to find a sim test in CI that has this error, @nazarhussain will help me with that",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1316614153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1332494658",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1332494658",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1332494658,
    "node_id": "IC_kwDOCD5_Gc5PbEFC",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-30T17:19:35Z",
    "updated_at": "2022-11-30T17:21:46Z",
    "author_association": "MEMBER",
    "body": "@tuyennhv I have the same issue on a local testnet if you want to debug this further (5 peers, 8 validators).\r\n\r\nis this related btw: #4816\r\n\r\n```\r\nDec-01 00:19:38.001[]                 info: Synced - slot: 181 - head: 181 0x3603…3f34 - execution: valid(0xec5a…6cd4) - finalized: 0x1eb0…9fba:3 - peers: 4                                                                                   \r\nDec-01 00:19:44.514[api]             error: Error on submitPoolSyncCommitteeSignatures [0] slot=182, validatorIndex=0 PublishError.InsufficientPeers                                                                                           \r\nError: PublishError.InsufficientPeers                                                                                                                                                                                                          \r\n    at EventTarget.publish (file:///home/user/.opt/ChainSafe/lodestar/node_modules/@chainsafe/libp2p-gossipsub/src/index.ts:1957:13)                                                                                                           \r\n    at EventTarget.publishObject (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:171:20)                                                                                                       \r\n    at EventTarget.publishSyncCommitteeSignature (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:242:5)                                                                                        \r\n    at async Promise.all (index 0)                                                                                                                                                                                                             \r\n    at file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:146:13                                                                                                                                 \r\n    at async Promise.all (index 0)                                                                                                                                                                                                             \r\n    at Object.submitPoolSyncCommitteeSignatures (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:116:7)\r\n    at Object.handler (file:///home/user/.opt/ChainSafe/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nError: Multiple errors on publishAggregateAndProofs\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\n    at Object.submitPoolSyncCommitteeSignatures (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:170:15)\r\n    at Object.handler (file:///home/user/.opt/ChainSafe/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\nDec-01 00:19:50.004[]                 info: Synced - slot: 182 - head: 182 0x3298…a96e - execution: valid(0xadd1…27ef) - finalized: 0x1eb0…9fba:3 - peers: 4\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1332494658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1332929853",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1332929853",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1332929853,
    "node_id": "IC_kwDOCD5_Gc5PcuU9",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-01T00:18:44Z",
    "updated_at": "2022-12-01T00:18:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @tuyennhv I have the same issue on a local testnet if you want to debug this further (5 peers, 8 validators).\r\n\r\n@q9f could you show me how to set up the network? it's not an issue if it happens some slots after a node is started because peer discovery needs some time to get stable subnet peers\r\n\r\n> is this related btw: https://github.com/ChainSafe/lodestar/issues/4816\r\n\r\nno, that's peer drop issue while this is about not enough subnet peers even through we have enough peers",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1332929853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1333212890",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1333212890",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1333212890,
    "node_id": "IC_kwDOCD5_Gc5Pdzba",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-01T05:26:53Z",
    "updated_at": "2022-12-01T05:26:53Z",
    "author_association": "MEMBER",
    "body": "> @q9f could you show me how to set up the network? it's not an issue if it happens some slots after a node is started because peer discovery needs some time to get stable subnet peers\r\n\r\nI have two execution clients (geth), five beacon nodes (lodestar), and one validator (lodestar, with 8 keys)\r\n\r\n```shell\r\ngeth \\\r\n  --networkid 11166111 \\\r\n  --datadir \"/tmp/holesovice/execution/1\" \\\r\n  --authrpc.port 8651 \\\r\n  --port 31303 \\\r\n  --bootnodes \"enode://d5704c15a444908cacdea75c25139530024c248b05815e7e260c415bea2381465fa7cd4f78d778700e37a2be9fe480642d308e74a704bcf146bf7cb53732ab83@127.0.0.1:30303,enode://eb271cb12a0f227265e79322fb3e8fc9e87e5401d1781f328b2002584dcfc200686f76644c614f629fcea10ca81b06c5ceb357da5aadd62934e8c26fc39944b3@127.0.0.1:31303\"\r\n\r\nlodestar beacon \\\r\n  --suggestedFeeRecipient \"0xCaA29806044A08E533963b2e573C1230A2cd9a2d\" \\\r\n  --execution.urls \"http://127.0.0.1:8551\" \\\r\n  --jwt-secret \"/tmp/holesovice/execution/0/geth/jwtsecret\" \\\r\n  --dataDir \"/tmp/holesovice/consensus/4\" \\\r\n  --paramsFile \"/home/user/.opt/eth-clients/holesovice/consensus/config.yaml\" \\\r\n  --genesisStateFile \"/home/user/.opt/eth-clients/holesovice/consensus/genesis.ssz\" \\\r\n  --enr.ip 127.0.0.1 \\\r\n  --rest.port 9996 \\\r\n  --port 9400 \\\r\n  --network.connectToDiscv5Bootnodes true \\\r\n  --bootnodes \"enr:-Ku4QFQtoQ8Os6ePsGnaVhQHVOJpG1AdD8lI5eVin-LVXhDIY5GtGfZhJfWiN9sx59y9rt5kKEdA3hlVd5NcbVr97gkFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDfrT8vAhZhEf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQL8-KCPND2kixBj-wDqGG33ySHYJflbz7XkGL5JsVxJnYN0Y3CCIyg,enr:-Ku4QNOQz2TatOuWhuFvuzfXpDsPrv4An-P5P60SwG3nR-pWdsj2G0Is7M5lJ0cqfGFrg0QLEb1Bj5l3u6gvo4PmFDEFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDfrT8vAhZhEf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQPZxnhiMNp6Kwt0xg29s8bcCYsWheIyQ3GKamZ4lnipLIN0Y3CCI4w,enr:-Ku4QHFo3nbJPxWY0je6z34UPfma9xqP9os0ML3GIgUCnsyhRGC84B0BvHOOuxEVBEzKPAoCv7hbMkGGkbCPqMhMclUFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDfrT8vAhZhEf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQP9MEV7lchABvza09gZKSuSb1pEv99SlFjrHSQujh7lb4N0Y3CCI_A,enr:-Ku4QHJ3K_HhJWuLid32jpxwZipds0-YgtX8IW43BvJqUQutJ6il5EIQY71qS9T_vHNst5Y_Bm0OOdh84xnxVF4hsLoFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDfrT8vAhZhEf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQMmaG17UMfVGG8NAuAmMzFd88xWstoO_gHMOO5RnaWNi4N0Y3CCJFQ,enr:-Ku4QD_lKVwo52Y9JOrZibU9I6qh-QOiA213HAELfLHfnB4reWQhZq0YVS1rsf1GU7afqjD7UvKfWQTi6LsdjGNkMSwFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDfrT8vAhZhEf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQJsajVPzBxl8CS8W2Jj7CKpxojG5t85yrQ32WuMD1h4eoN0Y3CCJLg\"\r\n\r\nlodestar validator \\\r\n  --dataDir \"/tmp/holesovice/consensus/0\" \\\r\n  --suggestedFeeRecipient \"0xCaA29806044A08E533963b2e573C1230A2cd9a2d\" \\\r\n  --graffiti \"YOLO HOLESOVICE LODESTAR\" \\\r\n  --paramsFile \"/home/user/.opt/eth-clients/holesovice/consensus/config.yaml\" \\\r\n  --importKeystores \"/home/user/.opt/eth-clients/holesovice/consensus/validator_keys\" \\\r\n  --importKeystoresPassword \"/home/user/.opt/eth-clients/holesovice/consensus/validator_keys/password.txt\"\r\n```\r\n\r\nJust realized it's an `Error on submitPoolSyncCommitteeSignatures` not `submitPoolAttestations` though.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1333212890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1361138359",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1361138359",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1361138359,
    "node_id": "IC_kwDOCD5_Gc5RIVK3",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-21T10:32:06Z",
    "updated_at": "2022-12-21T10:32:06Z",
    "author_association": "MEMBER",
    "body": "I just tried again and keep having this. My beacon node has 4 peers but I keep seeing this:\r\n\r\n```\r\nError: Multiple errors on publishAggregateAndProofs\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\n    at Object.submitPoolSyncCommitteeSignatures (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:170:15)\r\n    at Object.handler (file:///home/user/.opt/ChainSafe/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\nDec-21 11:28:09.001[]                 info: Synced - slot: 4849 - head: 4849 0x899f…360f - execution: valid(0xeddb…56c1) - finalized: 0xc353…c3b5:149 - peers: 4\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1361138359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1443757593",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1443757593",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1443757593,
    "node_id": "IC_kwDOCD5_Gc5WDf4Z",
    "user": {
      "login": "avenbreaks",
      "id": 93043826,
      "node_id": "U_kgDOBYu8cg",
      "avatar_url": "https://avatars.githubusercontent.com/u/93043826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avenbreaks",
      "html_url": "https://github.com/avenbreaks",
      "followers_url": "https://api.github.com/users/avenbreaks/followers",
      "following_url": "https://api.github.com/users/avenbreaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/avenbreaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avenbreaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avenbreaks/subscriptions",
      "organizations_url": "https://api.github.com/users/avenbreaks/orgs",
      "repos_url": "https://api.github.com/users/avenbreaks/repos",
      "events_url": "https://api.github.com/users/avenbreaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avenbreaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-24T14:28:36Z",
    "updated_at": "2023-02-24T14:28:36Z",
    "author_association": "NONE",
    "body": "> @tuyennhvSaya memiliki masalah yang sama di testnet lokal jika Anda ingin men-debug ini lebih lanjut (5 rekan, 8 validator).\r\n> \r\n> apakah ini terkait btw: #4816\r\n> \r\n> ```\r\n> Dec-01 00:19:38.001[]                 info: Synced - slot: 181 - head: 181 0x3603…3f34 - execution: valid(0xec5a…6cd4) - finalized: 0x1eb0…9fba:3 - peers: 4                                                                                   \r\n> Dec-01 00:19:44.514[api]             error: Error on submitPoolSyncCommitteeSignatures [0] slot=182, validatorIndex=0 PublishError.InsufficientPeers                                                                                           \r\n> Error: PublishError.InsufficientPeers                                                                                                                                                                                                          \r\n>     at EventTarget.publish (file:///home/user/.opt/ChainSafe/lodestar/node_modules/@chainsafe/libp2p-gossipsub/src/index.ts:1957:13)                                                                                                           \r\n>     at EventTarget.publishObject (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:171:20)                                                                                                       \r\n>     at EventTarget.publishSyncCommitteeSignature (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/network/gossip/gossipsub.ts:242:5)                                                                                        \r\n>     at async Promise.all (index 0)                                                                                                                                                                                                             \r\n>     at file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:146:13                                                                                                                                 \r\n>     at async Promise.all (index 0)                                                                                                                                                                                                             \r\n>     at Object.submitPoolSyncCommitteeSignatures (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:116:7)\r\n>     at Object.handler (file:///home/user/.opt/ChainSafe/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> Error: Multiple errors on publishAggregateAndProofs\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n> PublishError.InsufficientPeers\r\n>     at Object.submitPoolSyncCommitteeSignatures (file:///home/user/.opt/ChainSafe/lodestar/packages/beacon-node/src/api/impl/beacon/pool/index.ts:170:15)\r\n>     at Object.handler (file:///home/user/.opt/ChainSafe/lodestar/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\n> Dec-01 00:19:50.004[]                 info: Synced - slot: 182 - head: 182 0x3298…a96e - execution: valid(0xadd1…27ef) - finalized: 0x1eb0…9fba:3 - peers: 4\r\n> ```\r\n\r\nim getting same error : \r\n\r\n```\r\nError: Internal Server Error: PublishError.InsufficientPeers\r\n    at HttpClient.requestWithBody (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/httpClient.ts:258:15)\r\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at HttpClient.request (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/httpClient.ts:132:12)\r\n    at Object.request [as submitPoolAttestations] (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/client.ts:82:9)\r\n    at AttestationService.signAndPublishAttestations (file:///mnt/block-volume/lodestar/packages/validator/src/services/attestation.ts:158:7)\r\n    at AttestationService.runAttestationTasks (file:///mnt/block-volume/lodestar/packages/validator/src/services/attestation.ts:74:5)\r\n    at Clock.runAtMostEvery (file:///mnt/block-volume/lodestar/packages/validator/src/util/clock.ts:96:7)\r\nFeb-24 14:19:33.428[]                \u001B[31merror\u001B[39m: Error publishing SyncCommitteeMessage slot=3 Internal Server Error: Multiple errors on publishAggregateAndProofs\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nError: Internal Server Error: Multiple errors on publishAggregateAndProofs\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\n    at HttpClient.requestWithBody (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/httpClient.ts:258:15)\r\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at HttpClient.request (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/httpClient.ts:132:12)\r\n    at Object.request [as submitPoolSyncCommitteeSignatures] (file:///mnt/block-volume/lodestar/packages/api/src/utils/client/client.ts:82:9)\r\n    at SyncCommitteeService.produceAndPublishSyncCommittees (file:///mnt/block-volume/lodestar/packages/validator/src/services/syncCommittee.ts:148:9)\r\n    at SyncCommitteeService.runSyncCommitteeTasks (file:///mnt/block-volume/lodestar/packages/validator/src/services/syncCommittee.ts:67:31)\r\n    at Clock.runAtMostEvery (file:///mnt/block-volume/lodestar/packages/validator/src/util/clock.ts:96:7)\r\nFeb-24 14:19:41.203[]                 \u001B[32minfo\u001B[39m: Published aggregateAndProofs slot=3, index=0, count=1\r\nFeb-24 14:19:41.205[]                 \u001B[32minfo\u001B[39m: Published SyncCommitteeContribution slot=3, index=1, count=1\r\nFeb-24 14:19:41.209[]                 \u001B[32minfo\u001B[39m: Published SyncCommitteeContribution slot=3, index=2, count=1\r\nFeb-24 14:19:41.210[]                 \u001B[32minfo\u001B[39m: Published SyncCommitteeContribution slot=3, index=3, count=1\r\nFeb-24 14:19:45.143[]                 \u001B[32minfo\u001B[39m: Published block slot=4, validator=0xa750…9b5d, graffiti=YOLO MERGEDNET GETH LODESTAR, source=engine, feeRecipient=0xcaa29806044a08e533963b2e573c1230a2cd9a2d, transactions=0\r\nFeb-24 14:19:45.415[]                \u001B[31merror\u001B[39m: Error publishing SyncCommitteeMessage slot=4 Internal Server Error: Multiple errors on publishAggregateAndProofs\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1443757593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1445880108",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4764#issuecomment-1445880108",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4764",
    "id": 1445880108,
    "node_id": "IC_kwDOCD5_Gc5WLmEs",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-27T08:09:17Z",
    "updated_at": "2023-02-27T08:09:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "this could be due to https://github.com/ChainSafe/lodestar/issues/5198#issuecomment-1445879443",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1445880108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

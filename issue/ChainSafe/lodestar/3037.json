{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3037",
  "id": 982570094,
  "node_id": "MDU6SXNzdWU5ODI1NzAwOTQ=",
  "number": 3037,
  "title": "Error: Could not locate the bindings file.",
  "user": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 1643030513,
      "node_id": "MDU6TGFiZWwxNjQzMDMwNTEz",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-dependencies",
      "name": "meta-dependencies",
      "color": "fff7fb",
      "default": false,
      "description": "Pull requests that update a dependency."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-08-30T09:09:39Z",
  "updated_at": "2021-09-14T11:27:11Z",
  "closed_at": "2021-08-30T13:13:15Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\nLodestar latest master does not run `Error: Could not locate the bindings file.`\r\n\r\n**Steps to Reproduce**\r\n\r\n```\r\n~/.opt/chainsafe/lodestar q9-release-0292\r\n❯ lerna bootstrap\r\ninfo cli using local version of lerna\r\nlerna notice cli v4.0.0\r\nlerna info bootstrap root only\r\nyarn install v1.22.11\r\n[1/5] Validating package.json...\r\n[2/5] Resolving packages...\r\n[3/5] Fetching packages...\r\ninfo fsevents@2.3.2: The platform \"linux\" is incompatible with this module.\r\ninfo \"fsevents@2.3.2\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo fsevents@2.1.3: The platform \"linux\" is incompatible with this module.\r\ninfo \"fsevents@2.1.3\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-android-arm64@1.1.0: The platform \"linux\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-android-arm64@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-android-arm64@1.1.0: The CPU architecture \"x64\" is incompatible with this module.\r\ninfo @node-rs/crc32-darwin-arm64@1.1.0: The platform \"linux\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-darwin-arm64@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-darwin-arm64@1.1.0: The CPU architecture \"x64\" is incompatible with this module.\r\ninfo @node-rs/crc32-darwin-x64@1.1.0: The platform \"linux\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-darwin-x64@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-linux-arm-gnueabihf@1.1.0: The CPU architecture \"x64\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-linux-arm-gnueabihf@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-linux-arm64-gnu@1.1.0: The CPU architecture \"x64\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-linux-arm64-gnu@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-win32-ia32-msvc@1.1.0: The platform \"linux\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-win32-ia32-msvc@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo @node-rs/crc32-win32-ia32-msvc@1.1.0: The CPU architecture \"x64\" is incompatible with this module.\r\ninfo @node-rs/crc32-win32-x64-msvc@1.1.0: The platform \"linux\" is incompatible with this module.\r\ninfo \"@node-rs/crc32-win32-x64-msvc@1.1.0\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\n[4/5] Linking dependencies...\r\nwarning \" > typedoc@0.19.2\" has incorrect peer dependency \"typescript@3.9.x || 4.0.x\".\r\nwarning \" > typedoc-plugin-external-module-name@4.0.3\" has incorrect peer dependency \"typedoc@>=0.7.0 <0.18.0\".\r\nwarning \" > @chainsafe/lodestar-api@0.29.1\" has unmet peer dependency \"fastify@3.15.1\".\r\nwarning \"workspace-aggregator-796e684f-fe76-4299-b627-e217ed57c6ab > @chainsafe/lodestar > prometheus-gc-stats@0.6.3\" has incorrect peer dependency \"prom-client@>= 10 <= 12\".\r\nwarning \"workspace-aggregator-796e684f-fe76-4299-b627-e217ed57c6ab > @chainsafe/lodestar-cli > multiaddr > dns-over-http-resolver > native-fetch@2.0.1\" has unmet peer dependency \"node-fetch@*\".\r\n[5/5] Building fresh packages...\r\nDone in 3.89s.\r\n\r\n~/.opt/chainsafe/lodestar q9-release-0292\r\n❯ lodestar --version\r\ninternal/modules/cjs/loader.js:892\r\n  throw err;\r\n  ^\r\n\r\nError: Cannot find module '../lib'\r\nRequire stack:\r\n- /home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar\r\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:889:15)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:745:27)\r\n    at Module.require (internal/modules/cjs/loader.js:961:19)\r\n    at require (internal/modules/cjs/helpers.js:92:18)\r\n    at Object.<anonymous> (/home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar:3:1)\r\n    at Module._compile (internal/modules/cjs/loader.js:1072:14)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1101:10)\r\n    at Module.load (internal/modules/cjs/loader.js:937:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:778:12)\r\n    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:76:12) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [ '/home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar' ]\r\n}                                                                                                                                                                                                                                                                                                    \r\n\r\n~/.opt/chainsafe/lodestar q9-release-0292\r\n❯ lerna bootstrap\r\ninfo cli using local version of lerna\r\nlerna notice cli v4.0.0\r\nlerna info bootstrap root only\r\nyarn install v1.22.11\r\n[1/5] Validating package.json...\r\n[2/5] Resolving packages...\r\nsuccess Already up-to-date.\r\nDone in 0.68s.\r\n\r\n~/.opt/chainsafe/lodestar q9-release-0292\r\n❯ lodestar --version \r\ninternal/modules/cjs/loader.js:892\r\n  throw err;\r\n  ^\r\n\r\nError: Cannot find module '../lib'\r\nRequire stack:\r\n- /home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar\r\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:889:15)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:745:27)\r\n    at Module.require (internal/modules/cjs/loader.js:961:19)\r\n    at require (internal/modules/cjs/helpers.js:92:18)\r\n    at Object.<anonymous> (/home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar:3:1)\r\n    at Module._compile (internal/modules/cjs/loader.js:1072:14)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1101:10)\r\n    at Module.load (internal/modules/cjs/loader.js:937:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:778:12)\r\n    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:76:12) {\r\n  code: 'MODULE_NOT_FOUND',\r\n  requireStack: [ '/home/user/.opt/chainsafe/lodestar/packages/cli/bin/lodestar' ]\r\n}\r\n\r\n~/.opt/chainsafe/lodestar q9-release-0292\r\n❯ yarn build\r\nyarn run v1.22.11\r\n$ yarn clean && lerna run build\r\n$ rm -rf ./packages/*/lib ./packages/*/*.tsbuildinfo\r\nlerna notice cli v4.0.0\r\nlerna info Executing command in 13 packages: \"yarn run build\"\r\n@chainsafe/lodestar-params: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-utils: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-types: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-spec-test-util: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-config: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-api: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-beacon-state-transition: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-db: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-fork-choice: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-light-client: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-validator: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar: $ tsc -p tsconfig.build.json\r\n@chainsafe/lodestar-cli: $ tsc -p tsconfig.build.json && yarn write-git-data\r\n@chainsafe/lodestar-cli: $ node lib/util/gitData/writeGitData.js\r\nlerna success run Ran npm script 'build' in 13 packages in 35.6s:\r\nlerna success - @chainsafe/lodestar-api\r\nlerna success - @chainsafe/lodestar-beacon-state-transition\r\nlerna success - @chainsafe/lodestar-cli\r\nlerna success - @chainsafe/lodestar-config\r\nlerna success - @chainsafe/lodestar-db\r\nlerna success - @chainsafe/lodestar-fork-choice\r\nlerna success - @chainsafe/lodestar-light-client\r\nlerna success - @chainsafe/lodestar\r\nlerna success - @chainsafe/lodestar-params\r\nlerna success - @chainsafe/lodestar-spec-test-util\r\nlerna success - @chainsafe/lodestar-types\r\nlerna success - @chainsafe/lodestar-utils\r\nlerna success - @chainsafe/lodestar-validator\r\nDone in 36.18s.\r\n\r\n~/.opt/chainsafe/lodestar q9-release-0292 37s\r\n❯ lodestar --version               \r\n/home/user/.opt/chainsafe/lodestar/node_modules/bindings/bindings.js:135\r\n  throw err;\r\n  ^\r\n\r\nError: Could not locate the bindings file. Tried:\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/Debug/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/Release/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/out/Debug/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/Debug/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/out/Release/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/Release/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/default/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/compiled/14.17.5/linux/x64/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/release/install-root/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/debug/install-root/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/default/install-root/binding.node\r\n → /home/user/.opt/chainsafe/lodestar/node_modules/snappy/lib/binding/node-v83-linux-x64/binding.node\r\n    at bindings (/home/user/.opt/chainsafe/lodestar/node_modules/bindings/bindings.js:126:9)\r\n    at Object.<anonymous> (/home/user/.opt/chainsafe/lodestar/node_modules/snappy/snappy.js:2:34)\r\n    at Module._compile (internal/modules/cjs/loader.js:1072:14)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1101:10)\r\n    at Module.load (internal/modules/cjs/loader.js:937:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:778:12)\r\n    at Module.require (internal/modules/cjs/loader.js:961:19)\r\n    at require (internal/modules/cjs/helpers.js:92:18)\r\n    at Object.<anonymous> (/home/user/.opt/chainsafe/lodestar/node_modules/@chainsafe/snappy-stream/lib/compress-stream.js:4:14)\r\n    at Module._compile (internal/modules/cjs/loader.js:1072:14) {\r\n  tries: [\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/Debug/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/Release/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/out/Debug/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/Debug/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/out/Release/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/Release/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/build/default/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/compiled/14.17.5/linux/x64/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/release/install-root/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/debug/install-root/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/addon-build/default/install-root/binding.node',\r\n    '/home/user/.opt/chainsafe/lodestar/node_modules/snappy/lib/binding/node-v83-linux-x64/binding.node'\r\n  ]\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/908320192",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3037#issuecomment-908320192",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037",
    "id": 908320192,
    "node_id": "IC_kwDOCD5_Gc42I93A",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-30T12:58:55Z",
    "updated_at": "2021-08-30T12:58:55Z",
    "author_association": "MEMBER",
    "body": "Can you try removing node_modules in the root directory and try again?\r\n```\r\nrm -rf node_modules\r\nyarn\r\nyarn build\r\n./lodestar --version\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/908320192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/908331928",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3037#issuecomment-908331928",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3037",
    "id": 908331928,
    "node_id": "IC_kwDOCD5_Gc42JAuY",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-30T13:13:13Z",
    "updated_at": "2021-08-30T13:13:13Z",
    "author_association": "MEMBER",
    "body": "Indeed that worked, thanks 🙏🏼 ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/908331928/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

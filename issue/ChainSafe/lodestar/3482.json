{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3482",
  "id": 1070517631,
  "node_id": "I_kwDOCD5_Gc4_zs1_",
  "number": 3482,
  "title": "investigate: local testnet beacon<>beacon interop with lighthouse ",
  "user": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-12-03T11:59:43Z",
  "updated_at": "2021-12-07T07:57:49Z",
  "closed_at": "2021-12-07T07:57:46Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "@ethdreamer reported that lodestar was not syncing with the lighthouse local testnet setup. \r\ntestnet setup: https://github.com/ethDreamer/lighthouse-kintsugi-interop/tree/lodestar/\r\n\r\nUPDATE:\r\n- [x] However was able to setup and sync a lodestar beacon node (no validators) with the same and matching head sync states\r\nlodestar\r\n```\r\n16c87255b31fd24\r\nDec-03 07:58:12.043 [CHAIN]         verbose: Block processed slot=886, root=0xbf178e0ec0513ca837a3d649cd685b895856824298339a70416c87255b31fd24\r\nDec-03 07:58:12.043 [CHAIN]         verbose: New chain head headSlot=886, headRoot=0xbf178e0ec0513ca837a3d649cd685b895856824298339a70416c87255b31fd24\r\nDec-03 07:58:18.002 []                 info: Synced - slot: 886 - head: 886 0xbf17…fd24 - finalized: 0x0000…0000:0 - peers: 1\r\n```\r\nlighthouse:\r\n```\r\nDec 03 07:58:18.001 INFO Synced                                  slot: 886, block: 0xbf17…fd24, epoch: 27, finalized_epoch: 0, finalized_root: 0x0000…0000, exec_hash: n/a, peers: 1, service: slot_notifier\r\n```\r\nthe cli args used for lodestar:\r\n```bash\r\n./lodestar beacon --rootDir /data/interop/datadir/lodestar --paramsFile /data/interop/datadir/testnet/config.yaml --genesisStateFile /data/interop/datadir/testnet/genesis.ssz --network.discv5.enabled --eth1.enabled false --execution.urls http://localhost:8545 --enr.ip 127.0.0.1 --enr.tcp 9001 --enr.udp 9001 --port 9001 --discoveryPort 9001  --logLevel debug --network.discv5.bootEnrs \"enr:-Ly4QPOzB5o4ldodVGk2MK9ms-E8NL6NYHBz8xGBiy-am9vYZ0zHX7TQDM--XtLb48jg9N6oOdMvwBmZ3DtDFY9dmzcCh2F0dG5ldHOIAAAAAAAAAACEZXRoMpCSRWn8AgAAAf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQJmMbzA19NBqAFPuBQZiLsQT-BQ1FOQyzElspkbYm2JSYhzeW5jbmV0cwCDdGNwgiMog3VkcIIjKA\"\r\n```\r\n\r\ncorresponding rccconfig file: (usage ./lodestar beacon --rcConfig rcconfig.yml)\r\n```env\r\nrootDir: /data/interop/datadir/lodestar\r\nparamsFile: /data/interop/datadir/testnet/config.yaml\r\ngenesisStateFile: /data/interop/datadir/testnet/genesis.ssz\r\nnetwork.discv5.enabled: true\r\nnetwork.discv5.bootEnrs:\r\n  - enr:-Ly4QPOzB5o4ldodVGk2MK9ms-E8NL6NYHBz8xGBiy-am9vYZ0zHX7TQDM--XtLb48jg9N6oOdMvwBmZ3DtDFY9dmzcCh2F0dG5ldHOIAAAAAAAAAACEZXRoMpCSRWn8AgAAAf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQJmMbzA19NBqAFPuBQZiLsQT-BQ1FOQyzElspkbYm2JSYhzeW5jbmV0cwCDdGNwgiMog3VkcIIjKA\r\neth1.disableEth1DepositDataTracker: true\r\neth1.enabled: false\r\nexecution.urls: http://localhost:8545\r\nenr.ip: 127.0.0.1\r\nenr.tcp: 9001\r\nenr.udp: 9001\r\nport: 9001\r\ndiscoveryPort: 9001\r\nnetwork.localMultiaddrs: \"/ip4/127.0.0.1/tcp/9000/p2p/16Uiu2HAm2JbZ2unKEs6A1QiKaFyKrZZgLkafNwzBgxyZARXgF5be\"\r\n```\r\n\r\nWaiting for confirmation on the sync from @ethdreamer as well, or help further investigate/debug:\r\n\r\n- [x] Issues were resolved/debugged together with the Lighthouse team <4 dec 2021>\r\n  - [x] peering issue: confirmed on both sides lodestar picked up the peer within a minute of startup\r\n  - [x] syncing issue: on lighthouse's setup lodestar was not syncing fast, resolved that the issue was lodestar was only intermittently getting blocks and head was not catching up, however on wasn't able to repo this side, mark to further investigate the issue\r\n  - [x] lodestar and lighthouse both were able to produce and sync each other's block without issue once the lodestar synced up\r\n  - [x] confirmed blocks/state roots were matching doesn't matter which side proposed the blocks\r\n  - [x] debugged post merge scenario, lodestar's EL request were not getting successful, finally issue was resolved to be that of a proxy that lighthouse was using as lodestar was makign gzipped requests, and the proxy was not able to handle. issue was resolved when proxy removed\r\n\r\nPending issue still to be investigated/confirmed resolved\r\n~~-[ ] in the intial syncing, why lodestar was intermittently getting blocks, is lighthouse node rate limiting or there some networking proxy issue. lighthouse team to investigate and update as couldnt replicate on the local setup~~ closing till lighthouse updates\r\n~~-[ ] generation of the validator keys using script was failing on the local side with the proto's tool with out of bounds error for 2nd node (2 node setup)~~ closing as not relevant as of now\r\n",
  "closed_by": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/987662418",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3482#issuecomment-987662418",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3482",
    "id": 987662418,
    "node_id": "IC_kwDOCD5_Gc463ohS",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-07T07:57:45Z",
    "updated_at": "2021-12-07T07:57:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "closing as things seems to be resolved for now.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/987662418/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1206",
  "id": 664928465,
  "node_id": "MDU6SXNzdWU2NjQ5Mjg0NjU=",
  "number": 1206,
  "title": "Update to libp2p 0.29.x, gossipsubv1.1",
  "user": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-07-24T05:36:02Z",
  "updated_at": "2020-10-08T17:20:11Z",
  "closed_at": "2020-10-08T17:20:11Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\nIt's that time again, time to start looking into upgrading from libp2p 0.28.x to libp2p 0.29.x. At the same time, we will need to upgrade gossipsub (0.5.x).\r\nEven tho neither libp2p 0.29.x nor gossipsub 0.5.x have been published, we may still begin the process of upgrading using \r\nlibp2p/js-libp2p branch 0.29.x and ChainSafe/js-libp2p-pubsub branch gsv1.1\r\n\r\nSeemingly all major changes to gossipsub have been merged in, with only additional testing and non-breaking changes left, see:\r\nhttps://github.com/ChainSafe/js-libp2p-gossipsub/issues/73\r\n\r\n**Describe the solution you'd like**\r\nUpgrade libp2p stack, be ready for the official 0.29.x and 0.5.x release.\r\n\r\n**Additional context**\r\nI believe the main difference, for us, between versions is in gossipsub, not much in libp2p core:\r\n- peer scoring - we can pass in [`scoreParams`](https://github.com/ChainSafe/js-libp2p-gossipsub/blob/gsv1.1/ts/index.ts#L33) and `scoreThresholds` when they get defined in the spec\r\n- the `Message` object is now only used minimally in pubsub components. Instead [`InMessage`](https://github.com/ChainSafe/js-libp2p-gossipsub/blob/gsv1.1/ts/message/index.ts#L69) is used throughout. Everywhere that operates on a \"message\" is operating on an `InMessage`. Gossipsub emits `InMessage`s on subscribed topics. Note it now has a `receivedFrom` field, the string peer id of the direct sender.\r\n- topic validators - instead of returning an `ExtendedValidatorResult`, topic validator functions now `throw` an Error. Valid errors are defined [here](https://github.com/ChainSafe/js-libp2p-gossipsub/blob/gsv1.1/ts/constants.ts#L216).  Example [here](https://github.com/ChainSafe/js-libp2p-gossipsub/blob/gsv1.1/test/pubsub.spec.js#L148).  The function signature is also changed, now `(topic: string, message: InMessage): void` - peerId is no longer a parameter, instead `message.receivedFrom` should be used.\r\n- Because of the validation refactor, we no longer use the `_processTopicValidatorResult` function, its been deleted.\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1206/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

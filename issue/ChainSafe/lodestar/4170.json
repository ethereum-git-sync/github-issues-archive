{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4170",
  "id": 1274881298,
  "node_id": "I_kwDOCD5_Gc5L_SUS",
  "number": 4170,
  "title": "Consider using snappy along with snappyjs",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 2963898184,
      "node_id": "MDU6TGFiZWwyOTYzODk4MTg0",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-performance",
      "name": "scope-performance",
      "color": "980043",
      "default": false,
      "description": "Performance issue and ideas to improve performance."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-06-17T10:49:34Z",
  "updated_at": "2022-07-13T14:19:08Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nRight now we only use snappyjs and it's good with current gossip message size, but after the merge the block size is way bigger and it's better to use \"snappy\" at least for `beacon_block` topic, it also support async version\r\n\r\n- The benchmark: https://github.com/ChainSafe/lodestar/blob/tuyen/benchmark-snappy/packages/lodestar/test/perf/network/gossip/encoding.test.ts#L33\r\n- The result\r\n\r\n|Uncompressed size|Times of attestation size|# of runs per second - snappyjs| # of runs per second - snappy|\r\n|-------------------|-------------------------|------------------------|------------------------|\r\n|229 bytes|1|815|120|\r\n|22.9 kb|100|2022|2047|\r\n|114 kb|500|3.6|8.6|\r\n\r\n**Describe the solution you'd like**\r\n\r\nConsider using snappy for `beacon_block` topic and snappyjs for other topics\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1162792802",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4170#issuecomment-1162792802",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4170",
    "id": 1162792802,
    "node_id": "IC_kwDOCD5_Gc5FTs9i",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-22T08:14:16Z",
    "updated_at": "2022-06-22T08:14:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "another direction is to research if we can port the snappyjs implementation into assembly script since the interface is similar to `as-sha256`",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1162792802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
